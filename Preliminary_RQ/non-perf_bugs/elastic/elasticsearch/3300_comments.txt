[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/20645972","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-20645972","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":20645972,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjQ1OTcy","user":{"login":"brusic","id":354105,"node_id":"MDQ6VXNlcjM1NDEwNQ==","avatar_url":"https://avatars1.githubusercontent.com/u/354105?v=4","gravatar_id":"","url":"https://api.github.com/users/brusic","html_url":"https://github.com/brusic","followers_url":"https://api.github.com/users/brusic/followers","following_url":"https://api.github.com/users/brusic/following{/other_user}","gists_url":"https://api.github.com/users/brusic/gists{/gist_id}","starred_url":"https://api.github.com/users/brusic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brusic/subscriptions","organizations_url":"https://api.github.com/users/brusic/orgs","repos_url":"https://api.github.com/users/brusic/repos","events_url":"https://api.github.com/users/brusic/events{/privacy}","received_events_url":"https://api.github.com/users/brusic/received_events","type":"User","site_admin":false},"created_at":"2013-07-09T00:26:01Z","updated_at":"2013-07-09T00:30:27Z","author_association":"CONTRIBUTOR","body":"Definitely watching this thread. Too much to digest right now, but good work. I assumed that the long rumored facet refactoring would be at the implementation level and not at this higher level.\n\nFirst question that pops into mind is what is the target release for this issue? The issue is tagged v1.0.0.Beta1, so will 1.0 be held off until this issue is release? So far, there are no new major issues tagged 1.0 with the exception of this one. Once again, very exciting work.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/20646283","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-20646283","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":20646283,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjQ2Mjgz","user":{"login":"mattweber","id":173955,"node_id":"MDQ6VXNlcjE3Mzk1NQ==","avatar_url":"https://avatars3.githubusercontent.com/u/173955?v=4","gravatar_id":"","url":"https://api.github.com/users/mattweber","html_url":"https://github.com/mattweber","followers_url":"https://api.github.com/users/mattweber/followers","following_url":"https://api.github.com/users/mattweber/following{/other_user}","gists_url":"https://api.github.com/users/mattweber/gists{/gist_id}","starred_url":"https://api.github.com/users/mattweber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattweber/subscriptions","organizations_url":"https://api.github.com/users/mattweber/orgs","repos_url":"https://api.github.com/users/mattweber/repos","events_url":"https://api.github.com/users/mattweber/events{/privacy}","received_events_url":"https://api.github.com/users/mattweber/received_events","type":"User","site_admin":false},"created_at":"2013-07-09T00:35:30Z","updated_at":"2013-07-09T00:35:30Z","author_association":"CONTRIBUTOR","body":"Great work, these are so powerful!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/20648022","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-20648022","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":20648022,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjQ4MDIy","user":{"login":"uboness","id":211019,"node_id":"MDQ6VXNlcjIxMTAxOQ==","avatar_url":"https://avatars3.githubusercontent.com/u/211019?v=4","gravatar_id":"","url":"https://api.github.com/users/uboness","html_url":"https://github.com/uboness","followers_url":"https://api.github.com/users/uboness/followers","following_url":"https://api.github.com/users/uboness/following{/other_user}","gists_url":"https://api.github.com/users/uboness/gists{/gist_id}","starred_url":"https://api.github.com/users/uboness/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uboness/subscriptions","organizations_url":"https://api.github.com/users/uboness/orgs","repos_url":"https://api.github.com/users/uboness/repos","events_url":"https://api.github.com/users/uboness/events{/privacy}","received_events_url":"https://api.github.com/users/uboness/received_events","type":"User","site_admin":false},"created_at":"2013-07-09T01:27:29Z","updated_at":"2013-07-09T01:28:12Z","author_association":"CONTRIBUTOR","body":"@brusic \n\n> I assumed that the long rumored facet refactoring would be at the implementation level and not at this higher level.\n\nSo there are two reasons why we took this path: \n1. we don't want to break/modify/change anything in the current facets while we're working on the aggregations \n2. It is a big change, not only from implementation perspective, but also from a functional perspective - the way one approaches data aggregations in elasticsearch changes quite a bit, to the extent we believe it deserves its own module and set of apis.\n\n> First question that pops into mind is what is the target release for this issue? The issue is tagged v1.0.0.Beta1, so will 1.0 be held off until this issue is release? So far, there are no new major issues tagged 1.0 with the exception of this one. Once again, very exciting work.\n\nthe target release is indeed 1.0, and rest assured that more work will join this one :). As for 1.0 release timelines... we always planned to have this functionality in 1.0 and we always took it into account, so it doesn't really put a delay on things (just part of the work that needs to be done)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/20653717","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-20653717","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":20653717,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjUzNzE3","user":{"login":"itsadok","id":142512,"node_id":"MDQ6VXNlcjE0MjUxMg==","avatar_url":"https://avatars2.githubusercontent.com/u/142512?v=4","gravatar_id":"","url":"https://api.github.com/users/itsadok","html_url":"https://github.com/itsadok","followers_url":"https://api.github.com/users/itsadok/followers","following_url":"https://api.github.com/users/itsadok/following{/other_user}","gists_url":"https://api.github.com/users/itsadok/gists{/gist_id}","starred_url":"https://api.github.com/users/itsadok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/itsadok/subscriptions","organizations_url":"https://api.github.com/users/itsadok/orgs","repos_url":"https://api.github.com/users/itsadok/repos","events_url":"https://api.github.com/users/itsadok/events{/privacy}","received_events_url":"https://api.github.com/users/itsadok/received_events","type":"User","site_admin":false},"created_at":"2013-07-09T05:07:23Z","updated_at":"2013-07-09T05:07:23Z","author_association":"CONTRIBUTOR","body":"You didn't mention it in Date Histogram, but are you going to add pre/post\noffset, like in #1599? Or should something like this be done manually, with\na script?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/20658325","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-20658325","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":20658325,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjU4MzI1","user":{"login":"jprante","id":635745,"node_id":"MDQ6VXNlcjYzNTc0NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/635745?v=4","gravatar_id":"","url":"https://api.github.com/users/jprante","html_url":"https://github.com/jprante","followers_url":"https://api.github.com/users/jprante/followers","following_url":"https://api.github.com/users/jprante/following{/other_user}","gists_url":"https://api.github.com/users/jprante/gists{/gist_id}","starred_url":"https://api.github.com/users/jprante/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jprante/subscriptions","organizations_url":"https://api.github.com/users/jprante/orgs","repos_url":"https://api.github.com/users/jprante/repos","events_url":"https://api.github.com/users/jprante/events{/privacy}","received_events_url":"https://api.github.com/users/jprante/received_events","type":"User","site_admin":false},"created_at":"2013-07-09T07:45:00Z","updated_at":"2013-07-09T07:47:35Z","author_association":"CONTRIBUTOR","body":"Many thanks for the summary! I assume this is the facet refactoring we all wait for. \n\nI would love to see term labels, collations for sorting, and pattern based formatting for the values in the terms aggregation. (\"asc\" and \"desc\" for an \"order\" is definitely not sufficient)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/20659045","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-20659045","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":20659045,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjU5MDQ1","user":{"login":"uboness","id":211019,"node_id":"MDQ6VXNlcjIxMTAxOQ==","avatar_url":"https://avatars3.githubusercontent.com/u/211019?v=4","gravatar_id":"","url":"https://api.github.com/users/uboness","html_url":"https://github.com/uboness","followers_url":"https://api.github.com/users/uboness/followers","following_url":"https://api.github.com/users/uboness/following{/other_user}","gists_url":"https://api.github.com/users/uboness/gists{/gist_id}","starred_url":"https://api.github.com/users/uboness/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uboness/subscriptions","organizations_url":"https://api.github.com/users/uboness/orgs","repos_url":"https://api.github.com/users/uboness/repos","events_url":"https://api.github.com/users/uboness/events{/privacy}","received_events_url":"https://api.github.com/users/uboness/received_events","type":"User","site_admin":false},"created_at":"2013-07-09T08:03:29Z","updated_at":"2013-07-09T08:03:29Z","author_association":"CONTRIBUTOR","body":"@itsadok definitely! added to the above description\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/20659905","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-20659905","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":20659905,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjU5OTA1","user":{"login":"pecke01","id":799762,"node_id":"MDQ6VXNlcjc5OTc2Mg==","avatar_url":"https://avatars1.githubusercontent.com/u/799762?v=4","gravatar_id":"","url":"https://api.github.com/users/pecke01","html_url":"https://github.com/pecke01","followers_url":"https://api.github.com/users/pecke01/followers","following_url":"https://api.github.com/users/pecke01/following{/other_user}","gists_url":"https://api.github.com/users/pecke01/gists{/gist_id}","starred_url":"https://api.github.com/users/pecke01/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pecke01/subscriptions","organizations_url":"https://api.github.com/users/pecke01/orgs","repos_url":"https://api.github.com/users/pecke01/repos","events_url":"https://api.github.com/users/pecke01/events{/privacy}","received_events_url":"https://api.github.com/users/pecke01/received_events","type":"User","site_admin":false},"created_at":"2013-07-09T08:25:19Z","updated_at":"2013-07-09T08:25:19Z","author_association":"CONTRIBUTOR","body":"@uboness Great write up. Thanks for sharing this with the community.\n\nOne thing that I have found useful in other aggregation engines I used is what they have called `buckets`. Instead of defining ranges like, 1 to 5, 6 to 10.. etc. It is possible to get an even spread by defining the number of buckets. \nExample requesting 3 buckets for price I would be able to get something like this:\n 1 - 12$ (10)\n13 - 51$ (10)\n51 - 120 (10)\n\nFiltering will then adjust the buckets but will still be an even spread in 3 of them. This is ofc possible by doing several queries today but if it would be possible to get in there `auto-magically` I would like it. This might be possible from what you described above but I might have just not understood it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/20660208","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-20660208","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":20660208,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjYwMjA4","user":{"login":"uboness","id":211019,"node_id":"MDQ6VXNlcjIxMTAxOQ==","avatar_url":"https://avatars3.githubusercontent.com/u/211019?v=4","gravatar_id":"","url":"https://api.github.com/users/uboness","html_url":"https://github.com/uboness","followers_url":"https://api.github.com/users/uboness/followers","following_url":"https://api.github.com/users/uboness/following{/other_user}","gists_url":"https://api.github.com/users/uboness/gists{/gist_id}","starred_url":"https://api.github.com/users/uboness/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uboness/subscriptions","organizations_url":"https://api.github.com/users/uboness/orgs","repos_url":"https://api.github.com/users/uboness/repos","events_url":"https://api.github.com/users/uboness/events{/privacy}","received_events_url":"https://api.github.com/users/uboness/received_events","type":"User","site_admin":false},"created_at":"2013-07-09T08:32:14Z","updated_at":"2013-07-09T08:32:14Z","author_association":"CONTRIBUTOR","body":"@jprante this is just the initial phase, where we take all existing functionality of the facets and supporting it. In a later stage we definitely plan to enhance it further\n\n> I would love to see term labels\n\nCan you elaborate on that?\n\n> pattern based formatting for the values\n\nWe have this currently supported for date values only... won't be hard to add it to numeric as well.\n\n> \"asc\" and \"desc\" for an \"order\" is definitely not sufficient\n\nWhy?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/20665468","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-20665468","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":20665468,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjY1NDY4","user":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"created_at":"2013-07-09T10:28:56Z","updated_at":"2013-07-09T10:28:56Z","author_association":"CONTRIBUTOR","body":"I think I may have another category of faceting/summarisation to consider. \n\nI'm interested in representing the strength of relationships between different buckets - i.e. the results are represented as a weighted graph not neatly contained hierarchies. Nodes are categories, edges represent varying degrees of association between categories.\n\nOne example might be showing how various IT skills in job ads are related (web vs database vs unix vs java vs search etc).\n\nIn my example implementation I instrumented various branches of my query with a number of \"tagging wrapper\" queries whose only purpose is to mark a point in the query tree that produces results of a certain type e.g.\n- tag=web\n  - query=css OR html OR jquery ..\n- tag=database\n  - query=oracle OR mysql...\n- tag=search\n  - query=lucene OR solr or \"elastic search\" or elasticsearch...\n\nA special facetter can then find these TaggingScorers in the executing query tree and observe the doc ids firing from each of the Scorer streams and record strengths of association between pairs of tags as they are seen to match the same doc. Of course the categories (web vs java) etc could be defined as part of the facet info, acting only as a perspective onto a query's results, but I can imagine there are scenarios where, as in my example, they are defined as an integral part of the query selection criteria and faceting can usefully \"listen in\" on the various parts of the query to extract these categories.\n\nThere are a couple of concepts in here that have me thinking:\n1. Is there generally a useful role for adding metadata to query clauses (e.g. for faceting or highlighting/explain introspection)\n2. Weighted concept graphs are an interesting form of summary that can be derived quickly from large amounts of data as a by-product of Lucene scoring\n\nThere's a lot happening with facets design right now so I'm keen to throw these ideas into the mix.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/20932892","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-20932892","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":20932892,"node_id":"MDEyOklzc3VlQ29tbWVudDIwOTMyODky","user":{"login":"aparo","id":28075,"node_id":"MDQ6VXNlcjI4MDc1","avatar_url":"https://avatars1.githubusercontent.com/u/28075?v=4","gravatar_id":"","url":"https://api.github.com/users/aparo","html_url":"https://github.com/aparo","followers_url":"https://api.github.com/users/aparo/followers","following_url":"https://api.github.com/users/aparo/following{/other_user}","gists_url":"https://api.github.com/users/aparo/gists{/gist_id}","starred_url":"https://api.github.com/users/aparo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aparo/subscriptions","organizations_url":"https://api.github.com/users/aparo/orgs","repos_url":"https://api.github.com/users/aparo/repos","events_url":"https://api.github.com/users/aparo/events{/privacy}","received_events_url":"https://api.github.com/users/aparo/received_events","type":"User","site_admin":false},"created_at":"2013-07-14T07:29:36Z","updated_at":"2013-07-14T07:29:36Z","author_association":"NONE","body":"This is a good way to improve facet/aggregation.\nJust an hint: in the output the _type of aggregation is missing. I often used in postprocessing of facet results and to check errors.\nProbably it's missing because it's a second level detail.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/20956639","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-20956639","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":20956639,"node_id":"MDEyOklzc3VlQ29tbWVudDIwOTU2NjM5","user":{"login":"julianhille","id":741067,"node_id":"MDQ6VXNlcjc0MTA2Nw==","avatar_url":"https://avatars1.githubusercontent.com/u/741067?v=4","gravatar_id":"","url":"https://api.github.com/users/julianhille","html_url":"https://github.com/julianhille","followers_url":"https://api.github.com/users/julianhille/followers","following_url":"https://api.github.com/users/julianhille/following{/other_user}","gists_url":"https://api.github.com/users/julianhille/gists{/gist_id}","starred_url":"https://api.github.com/users/julianhille/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianhille/subscriptions","organizations_url":"https://api.github.com/users/julianhille/orgs","repos_url":"https://api.github.com/users/julianhille/repos","events_url":"https://api.github.com/users/julianhille/events{/privacy}","received_events_url":"https://api.github.com/users/julianhille/received_events","type":"User","site_admin":false},"created_at":"2013-07-15T08:18:00Z","updated_at":"2013-07-15T08:25:41Z","author_association":"NONE","body":"Hi,\n\nmy 2 cents:\nI like the idea of the whole new way of aggregation, it will be, if speed is good, way more flexible.\n\nMy ideas what id like to see:\n- i strongly support the automagically \"range sizes\" like pecke01 said. We're asked about it a lot.\n- An \"all facets\" would be nice. On terms i often have to hard code a limit like 1000 to get all of them. But i dont know when the length of the terms reach this limit. Thus a \"give me all facets\" would be nice.\n- we use a lot of filters and also a lot of facets, but nearly every facet if have to put in more than twice.\n  As an example if we have two books with different authors and the same different prices. I could filter for the price and get only one bock (as expected).\n  But the facet for author needs every facet filter besides its own.\n\n``` javascript\n{\n  query: {match_all:{}},\n  filter: {\n    and: [\n      term: {\n       price: 10\n      },\n      term: {\n        author: someauthor\n      }\n    ]\n  },\n  facets: {\n    author: {\n      facet_filter: {\n        term: {\n          price: 10\n        }\n      },\n      terms: {\n        field: author,\n        size: 10\n      }\n    }\n  }\n}\n```\n\nthis should be solved different. Like a exclude filter for field option or something like that. Sorry at this point i dont come up with an idea to solve it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/21046783","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-21046783","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":21046783,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMDQ2Nzgz","user":{"login":"fredbenenson","id":195741,"node_id":"MDQ6VXNlcjE5NTc0MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/195741?v=4","gravatar_id":"","url":"https://api.github.com/users/fredbenenson","html_url":"https://github.com/fredbenenson","followers_url":"https://api.github.com/users/fredbenenson/followers","following_url":"https://api.github.com/users/fredbenenson/following{/other_user}","gists_url":"https://api.github.com/users/fredbenenson/gists{/gist_id}","starred_url":"https://api.github.com/users/fredbenenson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fredbenenson/subscriptions","organizations_url":"https://api.github.com/users/fredbenenson/orgs","repos_url":"https://api.github.com/users/fredbenenson/repos","events_url":"https://api.github.com/users/fredbenenson/events{/privacy}","received_events_url":"https://api.github.com/users/fredbenenson/received_events","type":"User","site_admin":false},"created_at":"2013-07-16T14:46:16Z","updated_at":"2013-07-16T14:46:16Z","author_association":"NONE","body":"Very excited about this new direction for facets & aggregations.\n\nI wanted to confirm one thing, and had a question about another. \n\nFirst: a specific example (related to my reference to the elasticfacets plugin), where we're aggregating by a date histogram but also doing an aggregation of terms within each bucket.\n\nEverything I've read in this issue indicates this is possible, so I'm just asking for confirmation. Here's how I think it'd look:\n\n``` json\n\"aggs\" : {\n    \"histo\" : {\n        \"date_histogram\" : {\n            \"field\" : \"date\",\n            \"interval\" : \"month\"\n        }\n    },\n    \"aggregations\" : {\n        \"genders\" : {\n            \"terms\" : { \"field\" : \"gender\", \"order\": { \"_term\" : \"desc\" } }\n        }\n    }\n}\n```\n\nThe output would then show the count of documents per-gender per-month based on their `date` field.\n\nSecond: will 1.0 be backwards compatible with old-school (e.g. 0.20.1) faceting? \n\nThanks!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/21047705","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-21047705","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":21047705,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMDQ3NzA1","user":{"login":"mattweber","id":173955,"node_id":"MDQ6VXNlcjE3Mzk1NQ==","avatar_url":"https://avatars3.githubusercontent.com/u/173955?v=4","gravatar_id":"","url":"https://api.github.com/users/mattweber","html_url":"https://github.com/mattweber","followers_url":"https://api.github.com/users/mattweber/followers","following_url":"https://api.github.com/users/mattweber/following{/other_user}","gists_url":"https://api.github.com/users/mattweber/gists{/gist_id}","starred_url":"https://api.github.com/users/mattweber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattweber/subscriptions","organizations_url":"https://api.github.com/users/mattweber/orgs","repos_url":"https://api.github.com/users/mattweber/repos","events_url":"https://api.github.com/users/mattweber/events{/privacy}","received_events_url":"https://api.github.com/users/mattweber/received_events","type":"User","site_admin":false},"created_at":"2013-07-16T14:58:14Z","updated_at":"2013-07-16T14:58:14Z","author_association":"CONTRIBUTOR","body":"Hey Fred, \n\nI can confirm this will work.  You need to move your genders aggregation up into the histo object like this though:\n\n```\n\"aggs\" : {\n    \"histo\" : {\n        \"date_histogram\" : {\n            \"field\" : \"date\",\n            \"interval\" : \"month\"\n        },\n        \"aggregations\" : {\n            \"genders\" : {\n                \"terms\" : { \"field\" : \"gender\", \"order\": { \"_term\" : \"desc\" } }\n            }\n        }\n    }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/21061797","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-21061797","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":21061797,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMDYxNzk3","user":{"login":"jrick1977","id":3384667,"node_id":"MDQ6VXNlcjMzODQ2Njc=","avatar_url":"https://avatars0.githubusercontent.com/u/3384667?v=4","gravatar_id":"","url":"https://api.github.com/users/jrick1977","html_url":"https://github.com/jrick1977","followers_url":"https://api.github.com/users/jrick1977/followers","following_url":"https://api.github.com/users/jrick1977/following{/other_user}","gists_url":"https://api.github.com/users/jrick1977/gists{/gist_id}","starred_url":"https://api.github.com/users/jrick1977/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrick1977/subscriptions","organizations_url":"https://api.github.com/users/jrick1977/orgs","repos_url":"https://api.github.com/users/jrick1977/repos","events_url":"https://api.github.com/users/jrick1977/events{/privacy}","received_events_url":"https://api.github.com/users/jrick1977/received_events","type":"User","site_admin":false},"created_at":"2013-07-16T18:13:14Z","updated_at":"2013-07-16T18:13:14Z","author_association":"NONE","body":"This is looking really good.  One thing I cannot seem to find is an example of a nested aggregation, there is an example of a query but no example of the results.  The type of query I would be interested in seeing would look like this:\n\n```\n    \"aggs\": {\n        \"genders\": {\n            \"terms\": {\n                \"field\": \"gender\"\n            },\n            \"aggs\": {\n                \"age_groups\" : {\n                    \"range\" : {\n                        \"field\" : \"age\",\n                        \"ranges\" : [\n                            { \"to\" : 5 },\n                            { \"from\" : 5, \"to\" : 10 },\n                            { \"from\" : 10, \"to\" : 15 },\n                            { \"from\" : 15}\n                        ]\n                    },\n                    \"aggs\" : {\n                        \"avg_height\" : { \"avg\" : { \"field\" : \"height\" } }\n                    }\n                }\n            }\n        }\n    }\n```\n\nI believe this should return an aggregation by gender and age.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/21193152","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-21193152","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":21193152,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMTkzMTUy","user":{"login":"uboness","id":211019,"node_id":"MDQ6VXNlcjIxMTAxOQ==","avatar_url":"https://avatars3.githubusercontent.com/u/211019?v=4","gravatar_id":"","url":"https://api.github.com/users/uboness","html_url":"https://github.com/uboness","followers_url":"https://api.github.com/users/uboness/followers","following_url":"https://api.github.com/users/uboness/following{/other_user}","gists_url":"https://api.github.com/users/uboness/gists{/gist_id}","starred_url":"https://api.github.com/users/uboness/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uboness/subscriptions","organizations_url":"https://api.github.com/users/uboness/orgs","repos_url":"https://api.github.com/users/uboness/repos","events_url":"https://api.github.com/users/uboness/events{/privacy}","received_events_url":"https://api.github.com/users/uboness/received_events","type":"User","site_admin":false},"created_at":"2013-07-18T15:48:57Z","updated_at":"2013-07-18T15:48:57Z","author_association":"CONTRIBUTOR","body":"@fredbenenson \n\n> will 1.0 be backwards compatible with old-school (e.g. 0.20.1) faceting?\n\nWe're definitely keeping the facet module for time being... the aggregations is just an additional separated api\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/21193833","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-21193833","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":21193833,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMTkzODMz","user":{"login":"uboness","id":211019,"node_id":"MDQ6VXNlcjIxMTAxOQ==","avatar_url":"https://avatars3.githubusercontent.com/u/211019?v=4","gravatar_id":"","url":"https://api.github.com/users/uboness","html_url":"https://github.com/uboness","followers_url":"https://api.github.com/users/uboness/followers","following_url":"https://api.github.com/users/uboness/following{/other_user}","gists_url":"https://api.github.com/users/uboness/gists{/gist_id}","starred_url":"https://api.github.com/users/uboness/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uboness/subscriptions","organizations_url":"https://api.github.com/users/uboness/orgs","repos_url":"https://api.github.com/users/uboness/repos","events_url":"https://api.github.com/users/uboness/events{/privacy}","received_events_url":"https://api.github.com/users/uboness/received_events","type":"User","site_admin":false},"created_at":"2013-07-18T15:58:09Z","updated_at":"2013-07-18T15:58:09Z","author_association":"CONTRIBUTOR","body":"@jrick1977 \n\nyou'd get back something like this:\n\n``` json\n\"aggregations\": {\n  \"genders\": {\n    \"terms\": [\n      {\n        \"term\": \"female\",\n        \"doc_count\": 4,\n        \"age_groups\": [\n          {\n            \"to\": 20.0,\n            \"doc_count\": 1,\n            \"avg_height\": {\n              \"value\": 160.0\n            }\n          },\n          {\n            \"from\": 20.0,\n            \"to\": 25.0,\n            \"doc_count\": 0,\n            \"avg_height\": {\n              \"value\": null\n            }\n          },\n          {\n            \"from\": 25.0,\n            \"to\": 30.0,\n            \"doc_count\": 2,\n            \"avg_height\": {\n              \"value\": 160.0\n            }\n          },\n          {\n            \"from\": 30.0,\n            \"doc_count\": 1,\n            \"avg_height\": {\n              \"value\": 173.0\n            }\n          }\n        ]\n      },\n      {\n        \"term\": \"male\",\n        \"doc_count\": 3,\n        \"age_groups\": [\n          {\n            \"to\": 20.0,\n            \"doc_count\": 0,\n            \"avg_height\": {\n              \"value\": null\n            }\n          },\n          {\n            \"from\": 20.0,\n            \"to\": 25.0,\n            \"doc_count\": 1,\n            \"avg_height\": {\n              \"value\": 175.0\n            }\n          },\n          {\n            \"from\": 25.0,\n            \"to\": 30.0,\n            \"doc_count\": 0,\n            \"avg_height\": {\n              \"value\": null\n            }\n          },\n          {\n            \"from\": 30.0,\n            \"doc_count\": 2,\n            \"avg_height\": {\n              \"value\": 178.5\n            }\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/21211672","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-21211672","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":21211672,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMjExNjcy","user":{"login":"jprante","id":635745,"node_id":"MDQ6VXNlcjYzNTc0NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/635745?v=4","gravatar_id":"","url":"https://api.github.com/users/jprante","html_url":"https://github.com/jprante","followers_url":"https://api.github.com/users/jprante/followers","following_url":"https://api.github.com/users/jprante/following{/other_user}","gists_url":"https://api.github.com/users/jprante/gists{/gist_id}","starred_url":"https://api.github.com/users/jprante/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jprante/subscriptions","organizations_url":"https://api.github.com/users/jprante/orgs","repos_url":"https://api.github.com/users/jprante/repos","events_url":"https://api.github.com/users/jprante/events{/privacy}","received_events_url":"https://api.github.com/users/jprante/received_events","type":"User","site_admin":false},"created_at":"2013-07-18T20:19:05Z","updated_at":"2013-07-18T20:20:23Z","author_association":"CONTRIBUTOR","body":"@uboness \n\nWith facet labels, a caller might be able to pass a map of codes and string values (the labels). If the aggregation completes and should list the values in the entries, they are matched against the codes to obtain a label. So, codes as field values could drive e.g. language dependent visualization, without extra lookup loop by the caller.\n\nThe reason why order asc/desc is not enough is because it always assume Unicode canonical sorting order. For multilingual texts localized to an environment, this does not suffice. For example, I need german phone book sorting order not only in sorting fields but also in facet entries. It would be nice to have Unicode locale- and collation-aware sorting of entries. Explained here for Java http://docs.oracle.com/javase/tutorial/i18n/text/collationintro.html ICU has much more sophisticated collations http://userguide.icu-project.org/collation/concepts\n\nAnother example to have custom sorting is natural sort order.\n\nSee also my pull requests, for ICU facets\n\nhttps://github.com/elasticsearch/elasticsearch-analysis-icu/pull/7\n\nand for collation-based sort keys\n\nhttps://github.com/elasticsearch/elasticsearch/pull/2338\n\nThanks, and keep up the good work!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/21212467","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-21212467","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":21212467,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMjEyNDY3","user":{"login":"jrick1977","id":3384667,"node_id":"MDQ6VXNlcjMzODQ2Njc=","avatar_url":"https://avatars0.githubusercontent.com/u/3384667?v=4","gravatar_id":"","url":"https://api.github.com/users/jrick1977","html_url":"https://github.com/jrick1977","followers_url":"https://api.github.com/users/jrick1977/followers","following_url":"https://api.github.com/users/jrick1977/following{/other_user}","gists_url":"https://api.github.com/users/jrick1977/gists{/gist_id}","starred_url":"https://api.github.com/users/jrick1977/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrick1977/subscriptions","organizations_url":"https://api.github.com/users/jrick1977/orgs","repos_url":"https://api.github.com/users/jrick1977/repos","events_url":"https://api.github.com/users/jrick1977/events{/privacy}","received_events_url":"https://api.github.com/users/jrick1977/received_events","type":"User","site_admin":false},"created_at":"2013-07-18T20:30:17Z","updated_at":"2013-07-18T20:30:17Z","author_association":"NONE","body":"@uboness Perfect!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/21213255","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-21213255","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":21213255,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMjEzMjU1","user":{"login":"uboness","id":211019,"node_id":"MDQ6VXNlcjIxMTAxOQ==","avatar_url":"https://avatars3.githubusercontent.com/u/211019?v=4","gravatar_id":"","url":"https://api.github.com/users/uboness","html_url":"https://github.com/uboness","followers_url":"https://api.github.com/users/uboness/followers","following_url":"https://api.github.com/users/uboness/following{/other_user}","gists_url":"https://api.github.com/users/uboness/gists{/gist_id}","starred_url":"https://api.github.com/users/uboness/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uboness/subscriptions","organizations_url":"https://api.github.com/users/uboness/orgs","repos_url":"https://api.github.com/users/uboness/repos","events_url":"https://api.github.com/users/uboness/events{/privacy}","received_events_url":"https://api.github.com/users/uboness/received_events","type":"User","site_admin":false},"created_at":"2013-07-18T20:42:02Z","updated_at":"2013-07-18T20:42:02Z","author_association":"CONTRIBUTOR","body":"@jprante \n\n> With facet labels, a caller might be able to pass a map of codes and string values (the labels). If the aggregation completes and should list the values in the entries, they are matched against the codes to obtain a label. So, codes as field values could drive e.g. language dependent visualization, without extra lookup loop by the caller.\n\ngotcha\n\n> The reason why order asc/desc is not enough...\n\nsure... I guess I misunderstood you, from order direction point of view asc/desc is enough... it's just that we need to be able make the order object extensible to support things like collation... ie:\n\n``` json\n\"order\" : {\n   \"by\" : \"name\",\n   \"direction\" : \"asc\",\n   ...\n}\n```\n\nI think it makes sense to support the above as well (and the form we have today for simplicity).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/21951994","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-21951994","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":21951994,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTUxOTk0","user":{"login":"lukas-vlcek","id":205174,"node_id":"MDQ6VXNlcjIwNTE3NA==","avatar_url":"https://avatars2.githubusercontent.com/u/205174?v=4","gravatar_id":"","url":"https://api.github.com/users/lukas-vlcek","html_url":"https://github.com/lukas-vlcek","followers_url":"https://api.github.com/users/lukas-vlcek/followers","following_url":"https://api.github.com/users/lukas-vlcek/following{/other_user}","gists_url":"https://api.github.com/users/lukas-vlcek/gists{/gist_id}","starred_url":"https://api.github.com/users/lukas-vlcek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukas-vlcek/subscriptions","organizations_url":"https://api.github.com/users/lukas-vlcek/orgs","repos_url":"https://api.github.com/users/lukas-vlcek/repos","events_url":"https://api.github.com/users/lukas-vlcek/events{/privacy}","received_events_url":"https://api.github.com/users/lukas-vlcek/received_events","type":"User","site_admin":false},"created_at":"2013-08-01T16:55:13Z","updated_at":"2013-08-01T16:55:13Z","author_association":"CONTRIBUTOR","body":"Looking pretty nice!\n\nIf I may one thing: At the beginning I was confused by the terminology a bit. After some time I realized that one can think of this in terms of relational-algebra operations used in traditional SQL.\n- Bucket Aggregator -> Grouping\n- Calc Aggregator -> [vanilla] Aggregator\n\nNice definition of these operations in context of Map-Reduce can be found in [Chapter 2.](http://i.stanford.edu/~ullman/mmds/ch2.pdf) (p.32.), [Mining of Massive Datasets](http://i.stanford.edu/~ullman/mmds.html). Maybe using terms Grouping and Aggregation would make it sound more familiar to people with \"traditional / old-fashioned\" background?\n\nAlso it seems to me that the terms Aggregation and Aggregator are somehow interchangeable? At least from the end user perspective it would not hurt to get rid of one of them? At least I do not see what role the Aggregator (as an computational unit) plays in this for now. May be it will make more sense from the Java API perspective later?\n\nIn the end some questions:\n- Do the buckets have to be distinct or can they overlap?\n- Would it make sense for a single bucket to have more then a one calc leave associated with it?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/21959690","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-21959690","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":21959690,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTU5Njkw","user":{"login":"jprante","id":635745,"node_id":"MDQ6VXNlcjYzNTc0NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/635745?v=4","gravatar_id":"","url":"https://api.github.com/users/jprante","html_url":"https://github.com/jprante","followers_url":"https://api.github.com/users/jprante/followers","following_url":"https://api.github.com/users/jprante/following{/other_user}","gists_url":"https://api.github.com/users/jprante/gists{/gist_id}","starred_url":"https://api.github.com/users/jprante/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jprante/subscriptions","organizations_url":"https://api.github.com/users/jprante/orgs","repos_url":"https://api.github.com/users/jprante/repos","events_url":"https://api.github.com/users/jprante/events{/privacy}","received_events_url":"https://api.github.com/users/jprante/received_events","type":"User","site_admin":false},"created_at":"2013-08-01T18:38:19Z","updated_at":"2013-08-01T18:38:19Z","author_association":"CONTRIBUTOR","body":"+1 for \"Grouping\" and \"Aggregation\" terms\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/21961244","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-21961244","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":21961244,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTYxMjQ0","user":{"login":"uboness","id":211019,"node_id":"MDQ6VXNlcjIxMTAxOQ==","avatar_url":"https://avatars3.githubusercontent.com/u/211019?v=4","gravatar_id":"","url":"https://api.github.com/users/uboness","html_url":"https://github.com/uboness","followers_url":"https://api.github.com/users/uboness/followers","following_url":"https://api.github.com/users/uboness/following{/other_user}","gists_url":"https://api.github.com/users/uboness/gists{/gist_id}","starred_url":"https://api.github.com/users/uboness/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uboness/subscriptions","organizations_url":"https://api.github.com/users/uboness/orgs","repos_url":"https://api.github.com/users/uboness/repos","events_url":"https://api.github.com/users/uboness/events{/privacy}","received_events_url":"https://api.github.com/users/uboness/received_events","type":"User","site_admin":false},"created_at":"2013-08-01T18:57:42Z","updated_at":"2013-08-01T18:57:55Z","author_association":"CONTRIBUTOR","body":"@lukas-vlcek @jrick1977 \n\nthanks for this feedback!\n\nReg. changing terminology... one thing to note here is that both from impl. & user perspectives, both the grouping action and the aggregating actions (as you refer to them) are a type of an aggregation. Where ever you can define an aggregation, you can either put a clac or a bucket aggregation there. For this reason we need to have one name to refer to both, and we believed `aggregations` or `aggs` fit best. It's a framework that supports different types of aggregations. Changing the name \"bucket\" to \"group\" is fine... if the feedback we get is that it's a more fitting name, we'll do that, but we still need to refer to them as aggregations (just of different kind). making this distinction in the terminology will require changing the API to reflect that, and by that, most chances, will make the API more verbose/complex.\n\nbtw, if you have a better name of `calc aggregations` feel free to suggest that (we're kinda on the fence reg. this name).\n\n> Also it seems to me that the terms Aggregation and Aggregator are somehow interchangeable? At least from the end user perspective it would not hurt to get rid of one of them? At least I do not see what role the Aggregator (as an computational unit) plays in this for now. May be it will make more sense from the Java API perspective later?\n\nAggregation & Aggregator are two different things. From the user perspective, you don't need to know `aggregator`, just `aggregation`. The way you can look at it - an `aggregator` is the dynamic runtime representation of the `aggregation`. It does the actual aggregation **job**, and its output is the corresponding `aggregation` - which can be seen as a basic \"static\" data structure that holds the result of the aggregation. (if you compare it to facetings, `aggregator` is like `facet executor` and `aggregation` is like `facet`).\n\nI agree that the user documentation should probably not mention aggregators at all... we'll fix that once we have formal docs for it.\n\n> Do the buckets have to be distinct or can they overlap?\n\nYes... for example you can have multiple ranges that overlap each other... no restriction from impl perspective.\n\n> Would it make sense for a single bucket to have more then a one calc leave associated with it?\n\nIt could, yeah... a simple example would be to get 2 different stats aggregation on 2 different fields\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/21977894","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-21977894","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":21977894,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTc3ODk0","user":{"login":"rmattler","id":5138308,"node_id":"MDQ6VXNlcjUxMzgzMDg=","avatar_url":"https://avatars3.githubusercontent.com/u/5138308?v=4","gravatar_id":"","url":"https://api.github.com/users/rmattler","html_url":"https://github.com/rmattler","followers_url":"https://api.github.com/users/rmattler/followers","following_url":"https://api.github.com/users/rmattler/following{/other_user}","gists_url":"https://api.github.com/users/rmattler/gists{/gist_id}","starred_url":"https://api.github.com/users/rmattler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmattler/subscriptions","organizations_url":"https://api.github.com/users/rmattler/orgs","repos_url":"https://api.github.com/users/rmattler/repos","events_url":"https://api.github.com/users/rmattler/events{/privacy}","received_events_url":"https://api.github.com/users/rmattler/received_events","type":"User","site_admin":false},"created_at":"2013-08-01T23:44:40Z","updated_at":"2013-08-01T23:44:40Z","author_association":"NONE","body":"Could you please comment if aggregation will solve my use case?\n\nIf I have documents with these values.\n\n_source: {date: 01.01.2013 desc: XXX value: 100}\n_source: {date: 02.01.2012 desc: XXX value: 200}\n_source: {date: 03.01.2011 desc: XXX value: 300}\n_source: {date: 04.01.2011 desc: YYY value: 400}\n_source: {date: 05.01.2011 desc: YYY value: 500}\n\nI need to produce:\n\nDesc Last Date Last Value\nXXX 01.01.2013 100\nYYY 05.01.2011 500\n\nI need to get the documents with the most recent date for that desc so I can pull the value off of it.\nIf aggregation can not give me the document would it be possible to give the document id with the most recent date for that desc? And I could use an id filter to get the documents.\n\nThanks for your time.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/21981813","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-21981813","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":21981813,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTgxODEz","user":{"login":"mattweber","id":173955,"node_id":"MDQ6VXNlcjE3Mzk1NQ==","avatar_url":"https://avatars3.githubusercontent.com/u/173955?v=4","gravatar_id":"","url":"https://api.github.com/users/mattweber","html_url":"https://github.com/mattweber","followers_url":"https://api.github.com/users/mattweber/followers","following_url":"https://api.github.com/users/mattweber/following{/other_user}","gists_url":"https://api.github.com/users/mattweber/gists{/gist_id}","starred_url":"https://api.github.com/users/mattweber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattweber/subscriptions","organizations_url":"https://api.github.com/users/mattweber/orgs","repos_url":"https://api.github.com/users/mattweber/repos","events_url":"https://api.github.com/users/mattweber/events{/privacy}","received_events_url":"https://api.github.com/users/mattweber/received_events","type":"User","site_admin":false},"created_at":"2013-08-02T01:42:20Z","updated_at":"2013-08-02T01:42:20Z","author_association":"CONTRIBUTOR","body":"@rmattler This should be asked on the mailing list.  Ask it there and myself and others will actually respond.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/22008126","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-22008126","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":22008126,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMDA4MTI2","user":{"login":"roytmana","id":2524911,"node_id":"MDQ6VXNlcjI1MjQ5MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2524911?v=4","gravatar_id":"","url":"https://api.github.com/users/roytmana","html_url":"https://github.com/roytmana","followers_url":"https://api.github.com/users/roytmana/followers","following_url":"https://api.github.com/users/roytmana/following{/other_user}","gists_url":"https://api.github.com/users/roytmana/gists{/gist_id}","starred_url":"https://api.github.com/users/roytmana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roytmana/subscriptions","organizations_url":"https://api.github.com/users/roytmana/orgs","repos_url":"https://api.github.com/users/roytmana/repos","events_url":"https://api.github.com/users/roytmana/events{/privacy}","received_events_url":"https://api.github.com/users/roytmana/received_events","type":"User","site_admin":false},"created_at":"2013-08-02T14:13:34Z","updated_at":"2013-08-02T14:13:34Z","author_association":"NONE","body":"Very exciting - just what we need. One question I have is about consistency of the results given the distributed nature of the calculations. Now that ES is moving into the territory of BI it is even more important. Current facet implementation does not guarantee correct counts when ordered by count because distributed calculation and subsequent collation of the results. Will aggregation framework make any such guarantees?\nWithout them BI applications will suffer greatly as businessbusers must have exact and not approximate results. Total count or sum must stay the same no matter how we aggregate inside a given bucket\nThanks\nAlex\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/22335801","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-22335801","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":22335801,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMzM1ODAx","user":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"created_at":"2013-08-08T16:25:02Z","updated_at":"2013-08-08T16:25:02Z","author_association":"CONTRIBUTOR","body":"> BI applications will suffer greatly as businessbusers must have exact and not approximate results\n\nSome additional thoughts about approaches for building user faith in numbers (dealing with fuzziness and the need for context):\n\nAs we move into BI a worry of mine is that search engines are not databases and they are designed to produce fuzzy sets (elements belong to the result set to varying degrees). In our search apps we frequently fail to explain to end users that the results can vary massively in match quality so they should not always put too much stock in any exact numbers we show.\nI think the first ES facet I wrote was the one that \"buckets\" the match scores of docs so you can draw a quality distribution for all of the search results. It was largely for my own benefit to view the \"long tail\" of low-quality matches for various query types (more like this, fuzzy etc). \nI can think of a number of approaches to coping-with-fuzzy-sets, none of which are ideal :\na) Offer clients tools to first \"trim\" the long tail of crap e.g. only facet on the top N matches or \nb) Facet summaries can have the option to aggregate quality scores rather than absolute doc counts or\nc) \"Fuzzy\" criteria/result sets are automatically spotted and facets not offered or suitable accuracy warnings displayed alongside any aggregations\nd) Do nothing - educate users about interpreting results\n\nUsers also have to consider any natural skews in the data and it is often useful to put the numbers (inaccurately matched as they may be) into some sort of context:\n- The ability to express geo coverage as % of a background distribution: ( for why, see http://xkcd.com/1138/ )\n- \"Top\" term selection criteria for term-based facets need not always be \"most popular\" - Mike McCandless and I got into that on his Jira search project: http://goo.gl/vU73gc\n- Time-based buckets should be able to diff against corpus stats due to possible fluctuations in corpus size e.g. indeed.com plot skills as a % of all job ads: http://www.indeed.com/jobtrends?q=elasticsearch%2C+solr&l=\n\nIn all these scenarios, some background source of stats is required alongside the query result counts as context. The source of this data is typically found looking into the whole corpus.\n\nFor performance or API complexity reasons we may choose not to factor any support for these concerns into the core ES design, but it is at least worth acknowledging these issues exist while we are in the design phase.\n\nCheers\nMark\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/22362651","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-22362651","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":22362651,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMzYyNjUx","user":{"login":"roytmana","id":2524911,"node_id":"MDQ6VXNlcjI1MjQ5MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2524911?v=4","gravatar_id":"","url":"https://api.github.com/users/roytmana","html_url":"https://github.com/roytmana","followers_url":"https://api.github.com/users/roytmana/followers","following_url":"https://api.github.com/users/roytmana/following{/other_user}","gists_url":"https://api.github.com/users/roytmana/gists{/gist_id}","starred_url":"https://api.github.com/users/roytmana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roytmana/subscriptions","organizations_url":"https://api.github.com/users/roytmana/orgs","repos_url":"https://api.github.com/users/roytmana/repos","events_url":"https://api.github.com/users/roytmana/events{/privacy}","received_events_url":"https://api.github.com/users/roytmana/received_events","type":"User","site_admin":false},"created_at":"2013-08-08T22:21:20Z","updated_at":"2013-08-08T22:21:20Z","author_association":"NONE","body":"Mark, \n\nOne of the ways I deal with it now is by calculating two extra  totals per say terms stats facet using stat facets - one total  for the query and the other totals for \"missing\" for example if facet field is blank. With this two totals I can produce at leas consistent grand total, missing and other counts/sums even if returned top facets are no 100% correct other bucket captures the diff from corect grand total. Then user can request more facet values to be fetched and grand total will stay correct\n\nI wish terms stats facet got missing and other totals consistent with terms facet to make it easier to deal with it but that of course does not solve consistency issue it just makes it less noticeable.\n\nI understand performance concerns of the consistency but ideally it would be left to the implementor to choose slower over  fuzzy if only you supported consistency guarantees\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/22553659","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-22553659","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":22553659,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNTUzNjU5","user":{"login":"fterrier","id":767302,"node_id":"MDQ6VXNlcjc2NzMwMg==","avatar_url":"https://avatars0.githubusercontent.com/u/767302?v=4","gravatar_id":"","url":"https://api.github.com/users/fterrier","html_url":"https://github.com/fterrier","followers_url":"https://api.github.com/users/fterrier/followers","following_url":"https://api.github.com/users/fterrier/following{/other_user}","gists_url":"https://api.github.com/users/fterrier/gists{/gist_id}","starred_url":"https://api.github.com/users/fterrier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fterrier/subscriptions","organizations_url":"https://api.github.com/users/fterrier/orgs","repos_url":"https://api.github.com/users/fterrier/repos","events_url":"https://api.github.com/users/fterrier/events{/privacy}","received_events_url":"https://api.github.com/users/fterrier/received_events","type":"User","site_admin":false},"created_at":"2013-08-13T09:43:33Z","updated_at":"2013-08-13T09:43:33Z","author_association":"NONE","body":"+1 for the automagically \"range sizes\" like @pecke01 said\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/23838613","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-23838613","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":23838613,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODM4NjEz","user":{"login":"btiernay","id":2717578,"node_id":"MDQ6VXNlcjI3MTc1Nzg=","avatar_url":"https://avatars3.githubusercontent.com/u/2717578?v=4","gravatar_id":"","url":"https://api.github.com/users/btiernay","html_url":"https://github.com/btiernay","followers_url":"https://api.github.com/users/btiernay/followers","following_url":"https://api.github.com/users/btiernay/following{/other_user}","gists_url":"https://api.github.com/users/btiernay/gists{/gist_id}","starred_url":"https://api.github.com/users/btiernay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/btiernay/subscriptions","organizations_url":"https://api.github.com/users/btiernay/orgs","repos_url":"https://api.github.com/users/btiernay/repos","events_url":"https://api.github.com/users/btiernay/events{/privacy}","received_events_url":"https://api.github.com/users/btiernay/received_events","type":"User","site_admin":false},"created_at":"2013-09-05T01:36:31Z","updated_at":"2013-09-05T01:36:52Z","author_association":"NONE","body":"I'm curious if this feature will support my use case which can be described as \"nested query aggregation on a per hit basis\". The difference here is that the aggregation context would be a hit and its direct and indirect sub-documents and not a top level doc set. A key difference is that the aggregations could be used to compute a score which can in turn be globally sorted upon. This is a departure from the Aggregations Module which appears to not have the concept of a hit. \n\nIn SQL terms, this would be the equivalent of a subquery in both a select list projection and order by clause. Although this type of aggregation is currently supported in a limited fashion using scripting and custom scoring, some types of aggregation are simply not possible in an efficient manner (e.g. number of grandchildren with a unique field value).\n\n@martijnvg I'd be curious to get your insight here since you seem to be the \"nested guy\" :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/28076101","html_url":"https://github.com/elastic/elasticsearch/issues/3300#issuecomment-28076101","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3300","id":28076101,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDc2MTAx","user":{"login":"netconstructor","id":370161,"node_id":"MDQ6VXNlcjM3MDE2MQ==","avatar_url":"https://avatars0.githubusercontent.com/u/370161?v=4","gravatar_id":"","url":"https://api.github.com/users/netconstructor","html_url":"https://github.com/netconstructor","followers_url":"https://api.github.com/users/netconstructor/followers","following_url":"https://api.github.com/users/netconstructor/following{/other_user}","gists_url":"https://api.github.com/users/netconstructor/gists{/gist_id}","starred_url":"https://api.github.com/users/netconstructor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/netconstructor/subscriptions","organizations_url":"https://api.github.com/users/netconstructor/orgs","repos_url":"https://api.github.com/users/netconstructor/repos","events_url":"https://api.github.com/users/netconstructor/events{/privacy}","received_events_url":"https://api.github.com/users/netconstructor/received_events","type":"User","site_admin":false},"created_at":"2013-11-08T16:29:41Z","updated_at":"2013-11-08T16:29:41Z","author_association":"NONE","body":"A+ guys... can't wait for these enhancements to get finalized!\n","performed_via_github_app":null}]