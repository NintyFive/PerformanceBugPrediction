[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/87777115","html_url":"https://github.com/elastic/elasticsearch/issues/10299#issuecomment-87777115","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10299","id":87777115,"node_id":"MDEyOklzc3VlQ29tbWVudDg3Nzc3MTE1","user":{"login":"l15k4","id":518855,"node_id":"MDQ6VXNlcjUxODg1NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/518855?v=4","gravatar_id":"","url":"https://api.github.com/users/l15k4","html_url":"https://github.com/l15k4","followers_url":"https://api.github.com/users/l15k4/followers","following_url":"https://api.github.com/users/l15k4/following{/other_user}","gists_url":"https://api.github.com/users/l15k4/gists{/gist_id}","starred_url":"https://api.github.com/users/l15k4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/l15k4/subscriptions","organizations_url":"https://api.github.com/users/l15k4/orgs","repos_url":"https://api.github.com/users/l15k4/repos","events_url":"https://api.github.com/users/l15k4/events{/privacy}","received_events_url":"https://api.github.com/users/l15k4/received_events","type":"User","site_admin":false},"created_at":"2015-03-30T18:11:05Z","updated_at":"2015-03-30T18:11:05Z","author_association":"NONE","body":"Weird thing is that if I create exactly the same template in Sense, it works! And by \"exactly\" I mean  (Compare with clipboard -> contents are identical) ... So that the template created by Java client is somehow \"corrupted\" on the binary level or something like that\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/87836802","html_url":"https://github.com/elastic/elasticsearch/issues/10299#issuecomment-87836802","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10299","id":87836802,"node_id":"MDEyOklzc3VlQ29tbWVudDg3ODM2ODAy","user":{"login":"brwe","id":4320215,"node_id":"MDQ6VXNlcjQzMjAyMTU=","avatar_url":"https://avatars0.githubusercontent.com/u/4320215?v=4","gravatar_id":"","url":"https://api.github.com/users/brwe","html_url":"https://github.com/brwe","followers_url":"https://api.github.com/users/brwe/followers","following_url":"https://api.github.com/users/brwe/following{/other_user}","gists_url":"https://api.github.com/users/brwe/gists{/gist_id}","starred_url":"https://api.github.com/users/brwe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brwe/subscriptions","organizations_url":"https://api.github.com/users/brwe/orgs","repos_url":"https://api.github.com/users/brwe/repos","events_url":"https://api.github.com/users/brwe/events{/privacy}","received_events_url":"https://api.github.com/users/brwe/received_events","type":"User","site_admin":false},"created_at":"2015-03-30T21:30:41Z","updated_at":"2015-03-30T21:30:41Z","author_association":"CONTRIBUTOR","body":"The error could come from a template that looks like the one I pasted below. If the \"template_mi\" that you showed had caused it, then the fields inside the \"resource\" mapping would be printed as well so I assume a different template is responsible. To check if you have a different template like the one below, could you do\n`\n curl -XGET \"http://localhost:9200/_template?pretty\"\n`\nafter you got the error message and paste the result and the document you tried to index here?\n\nFaulty template that can cause this exception:\n\n```\n {\n   \"template_mi\": {\n      \"order\": 0,\n      \"template\": \"mi_*\",\n      \"settings\": {},\n      \"mappings\": {\n         \"resource\": {\n            \"resource\": {\n               \"properties\": {}\n            }\n         }\n      },\n      \"aliases\": {}\n   }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/87840138","html_url":"https://github.com/elastic/elasticsearch/issues/10299#issuecomment-87840138","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10299","id":87840138,"node_id":"MDEyOklzc3VlQ29tbWVudDg3ODQwMTM4","user":{"login":"l15k4","id":518855,"node_id":"MDQ6VXNlcjUxODg1NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/518855?v=4","gravatar_id":"","url":"https://api.github.com/users/l15k4","html_url":"https://github.com/l15k4","followers_url":"https://api.github.com/users/l15k4/followers","following_url":"https://api.github.com/users/l15k4/following{/other_user}","gists_url":"https://api.github.com/users/l15k4/gists{/gist_id}","starred_url":"https://api.github.com/users/l15k4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/l15k4/subscriptions","organizations_url":"https://api.github.com/users/l15k4/orgs","repos_url":"https://api.github.com/users/l15k4/repos","events_url":"https://api.github.com/users/l15k4/events{/privacy}","received_events_url":"https://api.github.com/users/l15k4/received_events","type":"User","site_admin":false},"created_at":"2015-03-30T21:40:53Z","updated_at":"2015-03-30T21:42:11Z","author_association":"NONE","body":"Hi,\n\nthe existing template `GET _template?pretty` is this, nothing else is there except for `marvel` template : \n\n``` json\n \"template_mi\": {\n      \"order\": 0,\n      \"template\": \"mi_*\",\n      \"settings\": {},\n      \"mappings\": {\n         \"error\": {\n            \"dynamic\": \"dynamic\",\n            \"_source\": {\n               \"enabled\": true\n            },\n            \"properties\": {\n               \"dataFields\": {\n                  \"index\": \"not_analyzed\",\n                  \"type\": \"string\"\n               },\n               \"dataRow\": {\n                  \"index\": \"not_analyzed\",\n                  \"type\": \"string\"\n               },\n               \"headerRow\": {\n                  \"index\": \"not_analyzed\",\n                  \"type\": \"string\"\n               },\n               \"fileName\": {\n                  \"index\": \"not_analyzed\",\n                  \"type\": \"string\"\n               },\n               \"headerFields\": {\n                  \"index\": \"not_analyzed\",\n                  \"type\": \"string\"\n               }\n            },\n            \"_all\": {\n               \"enabled\": true\n            }\n         },\n         \"resource\": {\n            \"dynamic\": \"dynamic\",\n            \"_source\": {\n               \"enabled\": true\n            },\n            \"properties\": {\n               \"host\": {\n                  \"index\": \"not_analyzed\",\n                  \"type\": \"string\"\n               },\n               \"recIds\": {\n                  \"type\": \"integer\"\n               },\n               \"created\": {\n                  \"type\": \"long\"\n               },\n               \"name\": {\n                  \"index\": \"not_analyzed\",\n                  \"type\": \"string\"\n               },\n               \"campaign\": {\n                  \"index\": \"not_analyzed\",\n                  \"type\": \"string\"\n               }\n            },\n            \"_all\": {\n               \"enabled\": true\n            }\n         },\n         \"record\": {\n            \"dynamic\": \"dynamic\",\n            \"_source\": {\n               \"enabled\": true\n            },\n            \"properties\": {\n               \"timestamp\": {\n                  \"type\": \"long\"\n               },\n               \"memberid\": {\n                  \"index\": \"not_analyzed\",\n                  \"type\": \"string\"\n               },\n               \"token\": {\n                  \"index\": \"not_analyzed\",\n                  \"type\": \"string\"\n               },\n               \"respid\": {\n                  \"index\": \"not_analyzed\",\n                  \"type\": \"string\"\n               },\n               \"weighting\": {\n                  \"type\": \"double\"\n               },\n               \"mid\": {\n                  \"index\": \"not_analyzed\",\n                  \"type\": \"string\"\n               },\n               \"gwid\": {\n                  \"index\": \"not_analyzed\",\n                  \"type\": \"string\"\n               }\n            },\n            \"_all\": {\n               \"enabled\": true\n            }\n         }\n      },\n      \"aliases\": {}\n   }\n```\n\nAnd the request : \n\n``` json\nPOST /mi_124/resource/\n{\n    \"name\" : \"abc.log.gz\",\n    \"host\" : \"whatever\",\n    \"campaign\" : \"0001\",\n    \"created\" : 1234567890\n}\n```\n\nError: \n\n```\nMapperParsingException[mapping [resource]]; nested: MapperParsingException[Root type mapping not empty after parsing! Remaining fields:   [resource : {properties={}}]]; \n```\n\n```\norg.elasticsearch.index.mapper.MapperParsingException: mapping [resource]\n        at org.elasticsearch.cluster.metadata.MetaDataCreateIndexService$2.execute(MetaDataCreateIndexService.java:401)\n        at org.elasticsearch.cluster.service.InternalClusterService$UpdateTask.run(InternalClusterService.java:365)\n        at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.runAndClean(PrioritizedEsThreadPoolExecutor.java:188)\n        at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:158)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n        at java.lang.Thread.run(Thread.java:745)\nCaused by: org.elasticsearch.index.mapper.MapperParsingException: Root type mapping not empty after parsing! Remaining fields:   [resource : {properties={}}]\n        at org.elasticsearch.index.mapper.DocumentMapperParser.parse(DocumentMapperParser.java:278)\n        at org.elasticsearch.index.mapper.DocumentMapperParser.parseCompressed(DocumentMapperParser.java:192)\n        at org.elasticsearch.index.mapper.MapperService.parse(MapperService.java:434)\n        at org.elasticsearch.index.mapper.MapperService.merge(MapperService.java:307)\n        at org.elasticsearch.cluster.metadata.MetaDataCreateIndexService$2.execute(MetaDataCreateIndexService.java:398)\n        ... 6 more\n```\n\nBtw if I create this template using `curl` or `Sense`, it works, but if I create this template (absolutely identically, meaning that the `_tempalte` outputs are identical) using Java client, then I get this error... \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/87856029","html_url":"https://github.com/elastic/elasticsearch/issues/10299#issuecomment-87856029","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10299","id":87856029,"node_id":"MDEyOklzc3VlQ29tbWVudDg3ODU2MDI5","user":{"login":"brwe","id":4320215,"node_id":"MDQ6VXNlcjQzMjAyMTU=","avatar_url":"https://avatars0.githubusercontent.com/u/4320215?v=4","gravatar_id":"","url":"https://api.github.com/users/brwe","html_url":"https://github.com/brwe","followers_url":"https://api.github.com/users/brwe/followers","following_url":"https://api.github.com/users/brwe/following{/other_user}","gists_url":"https://api.github.com/users/brwe/gists{/gist_id}","starred_url":"https://api.github.com/users/brwe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brwe/subscriptions","organizations_url":"https://api.github.com/users/brwe/orgs","repos_url":"https://api.github.com/users/brwe/repos","events_url":"https://api.github.com/users/brwe/events{/privacy}","received_events_url":"https://api.github.com/users/brwe/received_events","type":"User","site_admin":false},"created_at":"2015-03-30T22:17:21Z","updated_at":"2015-03-30T22:17:21Z","author_association":"CONTRIBUTOR","body":"Do you use the java client or elastic4s? If you use plain java, can you add the code that reproduces this?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/87860335","html_url":"https://github.com/elastic/elasticsearch/issues/10299#issuecomment-87860335","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10299","id":87860335,"node_id":"MDEyOklzc3VlQ29tbWVudDg3ODYwMzM1","user":{"login":"brwe","id":4320215,"node_id":"MDQ6VXNlcjQzMjAyMTU=","avatar_url":"https://avatars0.githubusercontent.com/u/4320215?v=4","gravatar_id":"","url":"https://api.github.com/users/brwe","html_url":"https://github.com/brwe","followers_url":"https://api.github.com/users/brwe/followers","following_url":"https://api.github.com/users/brwe/following{/other_user}","gists_url":"https://api.github.com/users/brwe/gists{/gist_id}","starred_url":"https://api.github.com/users/brwe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brwe/subscriptions","organizations_url":"https://api.github.com/users/brwe/orgs","repos_url":"https://api.github.com/users/brwe/repos","events_url":"https://api.github.com/users/brwe/events{/privacy}","received_events_url":"https://api.github.com/users/brwe/received_events","type":"User","site_admin":false},"created_at":"2015-03-30T22:32:47Z","updated_at":"2015-03-30T22:32:47Z","author_association":"CONTRIBUTOR","body":"Can you paste the java code here?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/87862186","html_url":"https://github.com/elastic/elasticsearch/issues/10299#issuecomment-87862186","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10299","id":87862186,"node_id":"MDEyOklzc3VlQ29tbWVudDg3ODYyMTg2","user":{"login":"l15k4","id":518855,"node_id":"MDQ6VXNlcjUxODg1NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/518855?v=4","gravatar_id":"","url":"https://api.github.com/users/l15k4","html_url":"https://github.com/l15k4","followers_url":"https://api.github.com/users/l15k4/followers","following_url":"https://api.github.com/users/l15k4/following{/other_user}","gists_url":"https://api.github.com/users/l15k4/gists{/gist_id}","starred_url":"https://api.github.com/users/l15k4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/l15k4/subscriptions","organizations_url":"https://api.github.com/users/l15k4/orgs","repos_url":"https://api.github.com/users/l15k4/repos","events_url":"https://api.github.com/users/l15k4/events{/privacy}","received_events_url":"https://api.github.com/users/l15k4/received_events","type":"User","site_admin":false},"created_at":"2015-03-30T22:39:57Z","updated_at":"2015-03-30T22:39:57Z","author_association":"NONE","body":"I will, I'm just debugging the index request and this is what it looks like at MetaDataCreateIndexService, you can see the weird object model...\n![es-bug](https://cloud.githubusercontent.com/assets/518855/6908594/722d48a8-d73e-11e4-9780-0e3ec19509b9.png)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/87874158","html_url":"https://github.com/elastic/elasticsearch/issues/10299#issuecomment-87874158","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10299","id":87874158,"node_id":"MDEyOklzc3VlQ29tbWVudDg3ODc0MTU4","user":{"login":"l15k4","id":518855,"node_id":"MDQ6VXNlcjUxODg1NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/518855?v=4","gravatar_id":"","url":"https://api.github.com/users/l15k4","html_url":"https://github.com/l15k4","followers_url":"https://api.github.com/users/l15k4/followers","following_url":"https://api.github.com/users/l15k4/following{/other_user}","gists_url":"https://api.github.com/users/l15k4/gists{/gist_id}","starred_url":"https://api.github.com/users/l15k4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/l15k4/subscriptions","organizations_url":"https://api.github.com/users/l15k4/orgs","repos_url":"https://api.github.com/users/l15k4/repos","events_url":"https://api.github.com/users/l15k4/events{/privacy}","received_events_url":"https://api.github.com/users/l15k4/received_events","type":"User","site_admin":false},"created_at":"2015-03-30T23:16:35Z","updated_at":"2015-03-30T23:19:40Z","author_association":"NONE","body":"Uff, I'll have to come back to it tomorrow, it's 1:15AM ... The XContentBuilder#string() for `resource` mapping from the code I pasted yields : \n\n``` json\n{\n  \"_all\": {\n    \"enabled\": true\n  },\n  \"_source\": {\n    \"enabled\": true\n  },\n  \"dynamic\": \"dynamic\",\n  \"_ttl\": {\n    \"enabled\": false\n  },\n  \"properties\": {\n    \"name\": {\n      \"type\": \"string\",\n      \"index\": \"not_analyzed\"\n    },\n    \"host\": {\n      \"type\": \"string\",\n      \"index\": \"not_analyzed\"\n    },\n    \"campaign\": {\n      \"type\": \"string\",\n      \"index\": \"not_analyzed\"\n    },\n    \"created\": {\n      \"type\": \"long\"\n    },\n    \"recIds\": {\n      \"type\": \"integer\"\n    }\n  }\n}\n```\n\nI don't think the problem is in the template creation... Everything looks as it should on this part. So far it really looks like the bug is on the `MetaDataCreateIndexService` side\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/87877562","html_url":"https://github.com/elastic/elasticsearch/issues/10299#issuecomment-87877562","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10299","id":87877562,"node_id":"MDEyOklzc3VlQ29tbWVudDg3ODc3NTYy","user":{"login":"l15k4","id":518855,"node_id":"MDQ6VXNlcjUxODg1NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/518855?v=4","gravatar_id":"","url":"https://api.github.com/users/l15k4","html_url":"https://github.com/l15k4","followers_url":"https://api.github.com/users/l15k4/followers","following_url":"https://api.github.com/users/l15k4/following{/other_user}","gists_url":"https://api.github.com/users/l15k4/gists{/gist_id}","starred_url":"https://api.github.com/users/l15k4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/l15k4/subscriptions","organizations_url":"https://api.github.com/users/l15k4/orgs","repos_url":"https://api.github.com/users/l15k4/repos","events_url":"https://api.github.com/users/l15k4/events{/privacy}","received_events_url":"https://api.github.com/users/l15k4/received_events","type":"User","site_admin":false},"created_at":"2015-03-30T23:40:07Z","updated_at":"2015-03-30T23:42:38Z","author_association":"NONE","body":"![bug-es](https://cloud.githubusercontent.com/assets/518855/6909516/353ff7b6-d747-11e4-8304-1d35da506209.png)\nThe empty resource comes from here https://github.com/elastic/elasticsearch/blob/master/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java#L250\n\nAnd it is then merged with the template mappings into the resulting invalid template mapping that I have showed you on the screenshot\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/87878764","html_url":"https://github.com/elastic/elasticsearch/issues/10299#issuecomment-87878764","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10299","id":87878764,"node_id":"MDEyOklzc3VlQ29tbWVudDg3ODc4NzY0","user":{"login":"l15k4","id":518855,"node_id":"MDQ6VXNlcjUxODg1NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/518855?v=4","gravatar_id":"","url":"https://api.github.com/users/l15k4","html_url":"https://github.com/l15k4","followers_url":"https://api.github.com/users/l15k4/followers","following_url":"https://api.github.com/users/l15k4/following{/other_user}","gists_url":"https://api.github.com/users/l15k4/gists{/gist_id}","starred_url":"https://api.github.com/users/l15k4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/l15k4/subscriptions","organizations_url":"https://api.github.com/users/l15k4/orgs","repos_url":"https://api.github.com/users/l15k4/repos","events_url":"https://api.github.com/users/l15k4/events{/privacy}","received_events_url":"https://api.github.com/users/l15k4/received_events","type":"User","site_admin":false},"created_at":"2015-03-30T23:48:07Z","updated_at":"2015-03-31T00:07:07Z","author_association":"NONE","body":"This is code for indexing : \n\n```\n      client\n        .client\n        .prepareIndex(\"mi_2015_02\", \"resource\")\n        .setSource(\n         jsonBuilder()\n          .startObject()\n            .field(\"name\", fileName)\n            .field(\"host\", host)\n            .field(\"campaign\", campaign)\n            .field(\"time\", date.getTime)\n          .endObject())\n        .execute()\n        .actionGet()\n```\n\nAny idea why this happens? Why is the empty resource mapping in the request?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/87986508","html_url":"https://github.com/elastic/elasticsearch/issues/10299#issuecomment-87986508","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10299","id":87986508,"node_id":"MDEyOklzc3VlQ29tbWVudDg3OTg2NTA4","user":{"login":"l15k4","id":518855,"node_id":"MDQ6VXNlcjUxODg1NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/518855?v=4","gravatar_id":"","url":"https://api.github.com/users/l15k4","html_url":"https://github.com/l15k4","followers_url":"https://api.github.com/users/l15k4/followers","following_url":"https://api.github.com/users/l15k4/following{/other_user}","gists_url":"https://api.github.com/users/l15k4/gists{/gist_id}","starred_url":"https://api.github.com/users/l15k4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/l15k4/subscriptions","organizations_url":"https://api.github.com/users/l15k4/orgs","repos_url":"https://api.github.com/users/l15k4/repos","events_url":"https://api.github.com/users/l15k4/events{/privacy}","received_events_url":"https://api.github.com/users/l15k4/received_events","type":"User","site_admin":false},"created_at":"2015-03-31T07:55:20Z","updated_at":"2015-03-31T08:17:10Z","author_association":"NONE","body":"It looks like createIndexRequest I pasted above has an empty mapping autogenerated for it's type as you can see on the screenshot and it also triggers template index creation and these 2 mappings are merged together, unfortunately incorrectly\n![es-bug](https://cloud.githubusercontent.com/assets/518855/6914545/084fd876-d78c-11e4-8acc-127d867e516b.png)\n\nSo I was happy I found that I needed to set `action.auto_create_index: false` and it will solve my problem, but guess what, `action.auto_create_index: false` disables index templates, so that I'm still stuck here....\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/88003956","html_url":"https://github.com/elastic/elasticsearch/issues/10299#issuecomment-88003956","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10299","id":88003956,"node_id":"MDEyOklzc3VlQ29tbWVudDg4MDAzOTU2","user":{"login":"l15k4","id":518855,"node_id":"MDQ6VXNlcjUxODg1NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/518855?v=4","gravatar_id":"","url":"https://api.github.com/users/l15k4","html_url":"https://github.com/l15k4","followers_url":"https://api.github.com/users/l15k4/followers","following_url":"https://api.github.com/users/l15k4/following{/other_user}","gists_url":"https://api.github.com/users/l15k4/gists{/gist_id}","starred_url":"https://api.github.com/users/l15k4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/l15k4/subscriptions","organizations_url":"https://api.github.com/users/l15k4/orgs","repos_url":"https://api.github.com/users/l15k4/repos","events_url":"https://api.github.com/users/l15k4/events{/privacy}","received_events_url":"https://api.github.com/users/l15k4/received_events","type":"User","site_admin":false},"created_at":"2015-03-31T09:03:36Z","updated_at":"2015-03-31T09:33:23Z","author_association":"NONE","body":"This is the java version and it works, so the problem seems to be on my part or in elastic4s\n\n``` java\nclient.admin.indices.preparePutTemplate(name).setTemplate(pattern).setOrder(0)\n        .addMapping(\"resource\",\n          jsonBuilder().\n            startObject.\n              startObject(\"resource\").\n                field(\"numeric_detection\", false).\n                startObject(\"properties\").\n                  startObject(\"name\").\n                    field(\"type\", \"string\").field(\"index\", \"not_analyzed\").\n                  endObject().\n                  startObject(\"host\").\n                    field(\"type\", \"string\").field(\"index\", \"not_analyzed\").\n                  endObject().\n                  startObject(\"campaign\").\n                    field(\"type\", \"string\").field(\"index\", \"not_analyzed\").\n                  endObject().\n                  startObject(\"created\").\n                    field(\"type\", \"long\").\n                  endObject().\n                  startObject(\"recIds\").\n                    field(\"type\", \"integer\").\n                  endObject().\n                endObject().\n              endObject().\n            endObject()\n        ).addMapping(\"record\",\n          jsonBuilder().\n            startObject().\n              startObject(\"record\").\n                field(\"numeric_detection\", false).\n                startObject(\"properties\").\n                  startObject(\"gwid\").\n                    field(\"type\", \"string\").field(\"index\", \"not_analyzed\").\n                  endObject().\n                  startObject(\"mid\").\n                    field(\"type\", \"string\").field(\"index\", \"not_analyzed\").\n                  endObject().\n                  startObject(\"memberid\").\n                    field(\"type\", \"string\").field(\"index\", \"not_analyzed\").\n                  endObject().\n                  startObject(\"respid\").\n                    field(\"type\", \"string\").field(\"index\", \"not_analyzed\").\n                  endObject().\n                  startObject(\"token\").\n                    field(\"type\", \"string\").field(\"index\", \"not_analyzed\").\n                  endObject().\n                  startObject(\"weighting\").\n                    field(\"type\", \"double\").\n                  endObject().\n                  startObject(\"timestamp\").\n                    field(\"type\", \"long\").\n                  endObject().\n                endObject().\n              endObject().\n            endObject()\n        ).addMapping(\"error\",\n          jsonBuilder().\n            startObject().\n              startObject(\"error\").\n                startObject(\"properties\").\n                  startObject(\"fileName\").\n                    field(\"type\", \"string\").field(\"index\", \"not_analyzed\").\n                  endObject().\n                  startObject(\"headerRow\").\n                    field(\"type\", \"string\").field(\"index\", \"not_analyzed\").\n                  endObject().\n                  startObject(\"dataRow\").\n                    field(\"type\", \"string\").field(\"index\", \"not_analyzed\").\n                  endObject().\n                  startObject(\"headerFields\").\n                    field(\"type\", \"string\").field(\"index\", \"not_analyzed\").\n                  endObject().\n                  startObject(\"dataFields\").\n                    field(\"type\", \"string\").field(\"index\", \"not_analyzed\").\n                  endObject().\n                endObject().\n              endObject().\n            endObject()\n        ).get()\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/88504666","html_url":"https://github.com/elastic/elasticsearch/issues/10299#issuecomment-88504666","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10299","id":88504666,"node_id":"MDEyOklzc3VlQ29tbWVudDg4NTA0NjY2","user":{"login":"l15k4","id":518855,"node_id":"MDQ6VXNlcjUxODg1NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/518855?v=4","gravatar_id":"","url":"https://api.github.com/users/l15k4","html_url":"https://github.com/l15k4","followers_url":"https://api.github.com/users/l15k4/followers","following_url":"https://api.github.com/users/l15k4/following{/other_user}","gists_url":"https://api.github.com/users/l15k4/gists{/gist_id}","starred_url":"https://api.github.com/users/l15k4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/l15k4/subscriptions","organizations_url":"https://api.github.com/users/l15k4/orgs","repos_url":"https://api.github.com/users/l15k4/repos","events_url":"https://api.github.com/users/l15k4/events{/privacy}","received_events_url":"https://api.github.com/users/l15k4/received_events","type":"User","site_admin":false},"created_at":"2015-04-01T14:26:51Z","updated_at":"2015-04-01T14:26:51Z","author_association":"NONE","body":"Closing as it is either my fault or it is elastic4s problem\n","performed_via_github_app":null}]