{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/23739","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23739/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23739/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23739/events","html_url":"https://github.com/elastic/elasticsearch/issues/23739","id":216814503,"node_id":"MDU6SXNzdWUyMTY4MTQ1MDM=","number":23739,"title":"Test Failure: ClusterServiceTests. testClusterStateUpdateLogging","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"labels":[{"id":151561891,"node_id":"MDU6TGFiZWwxNTE1NjE4OTE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Logging","name":":Core/Infra/Logging","color":"0e8a16","default":false,"description":"Log management and logging utilities"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"assignees":[{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false}],"milestone":null,"comments":7,"created_at":"2017-03-24T15:09:21Z","updated_at":"2019-02-01T00:13:20Z","closed_at":"2019-02-01T00:13:20Z","author_association":"MEMBER","active_lock_reason":null,"body":"Fails periodically but rarely (1-2 times a month) on 5.1, 5.2, 5.3, 5.x and master branches. \r\n\r\n```\r\nSuite: org.elasticsearch.cluster.service.ClusterServiceTests\r\n  1> [2017-03-24T10:42:28,985][INFO ][o.e.c.s.ClusterServiceTests] [testSingleBatchSubmission]: before test\r\n  1> [2017-03-24T10:42:28,992][INFO ][o.e.c.s.ClusterServiceTests$TimedClusterService] new_master {node1}{Us26Ll-DRY6tGqIwXRgx8g}{local}{local[295]}, reason: test setting state\r\n  1> [2017-03-24T10:42:28,995][INFO ][o.e.c.s.ClusterServiceTests] [testSingleBatchSubmission]: after test\r\n  1> [2017-03-24T10:42:28,997][INFO ][o.e.c.s.ClusterServiceTests] [testClusterStateBatchedUpdates]: before test\r\n  1> [2017-03-24T10:42:29,000][INFO ][o.e.c.s.ClusterServiceTests$TimedClusterService] new_master {node1}{VvwSV_nRSMuBLNPEogvXuQ}{local}{local[296]}, reason: test setting state\r\n  1> [2017-03-24T10:42:29,160][INFO ][o.e.c.s.ClusterServiceTests] [testClusterStateBatchedUpdates]: after test\r\n  1> [2017-03-24T10:42:29,164][INFO ][o.e.c.s.ClusterServiceTests] [testClusterStateUpdateLogging]: before test\r\n  1> [2017-03-24T10:42:29,168][TRACE][o.e.c.s.ClusterServiceTests$TimedClusterService] will process [test setting state]\r\n  1> [2017-03-24T10:42:29,168][DEBUG][o.e.c.s.ClusterServiceTests$TimedClusterService] processing [test setting state]: execute\r\n  1> [2017-03-24T10:42:29,169][TRACE][o.e.c.s.ClusterServiceTests$TimedClusterService] cluster state updated, source [test setting state]\r\n  1> cluster uuid: _na_\r\n  1> version: 2\r\n  1> state uuid: 31YhffagTya2Wnf2FvVoXw\r\n  1> from_diff: false\r\n  1> meta data version: 0\r\n  1> nodes: \r\n  1>    {node1}{gJfhYupGSQWSvbSpf5bxUw}{local}{local[297]}, local, master\r\n  1> routing_table (version 0):\r\n  1> routing_nodes:\r\n  1> ---- unassigned\r\n  1> [2017-03-24T10:42:29,170][INFO ][o.e.c.s.ClusterServiceTests$TimedClusterService] new_master {node1}{gJfhYupGSQWSvbSpf5bxUw}{local}{local[297]}, reason: test setting state\r\n  1> [2017-03-24T10:42:29,170][DEBUG][o.e.c.s.ClusterServiceTests$TimedClusterService] publishing cluster state version [2]\r\n  1> [2017-03-24T10:42:29,172][DEBUG][o.e.c.s.ClusterServiceTests$TimedClusterService] applying cluster state version 2\r\n  1> [2017-03-24T10:42:29,172][DEBUG][o.e.c.s.ClusterServiceTests$TimedClusterService] set local cluster state to version 2\r\n  1> [2017-03-24T10:42:29,172][TRACE][o.e.c.s.ClusterServiceTests$TimedClusterService] calling [org.elasticsearch.cluster.service.ClusterService$LocalNodeMasterListeners@39ceead6] with change to version [2]\r\n  1> [2017-03-24T10:42:29,172][DEBUG][o.e.c.s.ClusterServiceTests$TimedClusterService] processing [test setting state]: took [3ms] done applying updated cluster_state (version: 2, uuid: 31YhffagTya2Wnf2FvVoXw)\r\n  1> [2017-03-24T10:42:29,179][TRACE][o.e.c.s.ClusterServiceTests$TimedClusterService] will process [test1]\r\n  1> [2017-03-24T10:42:29,179][DEBUG][o.e.c.s.ClusterServiceTests$TimedClusterService] processing [test1]: execute\r\n  1> [2017-03-24T10:42:29,180][DEBUG][o.e.c.s.ClusterServiceTests$TimedClusterService] processing [test1]: took [1s] no change in cluster_state\r\n  1> [2017-03-24T10:42:29,181][TRACE][o.e.c.s.ClusterServiceTests$TimedClusterService] will process [test2]\r\n  1> [2017-03-24T10:42:29,181][DEBUG][o.e.c.s.ClusterServiceTests$TimedClusterService] processing [test2]: execute\r\n  1> [2017-03-24T10:42:29,182][TRACE][o.e.c.s.ClusterServiceTests$TimedClusterService] failed to execute cluster state update in [2s], state:\r\n  1> version [2], source [test2]\r\n  1> nodes: \r\n  1>    {node1}{gJfhYupGSQWSvbSpf5bxUw}{local}{local[297]}, local, master\r\n  1> routing_table (version 0):\r\n  1> routing_nodes:\r\n  1> ---- unassigned\r\n  1> java.lang.IllegalArgumentException: Testing handling of exceptions in the cluster state task\r\n  1> \tat org.elasticsearch.cluster.service.ClusterServiceTests$18.execute(ClusterServiceTests.java:867) ~[test/:?]\r\n  1> \tat org.elasticsearch.cluster.ClusterStateUpdateTask.execute(ClusterStateUpdateTask.java:45) ~[main/:5.4.0-SNAPSHOT]\r\n  1> \tat org.elasticsearch.cluster.service.ClusterService.executeTasks(ClusterService.java:679) ~[main/:?]\r\n  1> \tat org.elasticsearch.cluster.service.ClusterService.calculateTaskOutputs(ClusterService.java:658) ~[main/:?]\r\n  1> \tat org.elasticsearch.cluster.service.ClusterService.runTasks(ClusterService.java:617) ~[main/:?]\r\n  1> \tat org.elasticsearch.cluster.service.ClusterService$UpdateTask.run(ClusterService.java:1117) ~[main/:?]\r\n  1> \tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:544) ~[main/:?]\r\n  1> \tat org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.runAndClean(PrioritizedEsThreadPoolExecutor.java:238) ~[main/:?]\r\n  1> \tat org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:201) ~[main/:?]\r\n  1> \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[?:1.8.0_111]\r\n  1> \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[?:1.8.0_111]\r\n  1> \tat java.lang.Thread.run(Thread.java:745) ~[?:1.8.0_111]\r\n  1> [2017-03-24T10:42:29,184][DEBUG][o.e.c.s.ClusterServiceTests$TimedClusterService] processing [test2]: took [2s] no change in cluster_state\r\n  1> [2017-03-24T10:42:29,184][TRACE][o.e.c.s.ClusterServiceTests$TimedClusterService] will process [test3]\r\n  1> [2017-03-24T10:42:29,184][DEBUG][o.e.c.s.ClusterServiceTests$TimedClusterService] processing [test3]: execute\r\n  1> [2017-03-24T10:42:29,184][TRACE][o.e.c.s.ClusterServiceTests$TimedClusterService] cluster state updated, source [test3]\r\n  2> REPRODUCE WITH: gradle :core:test -Dtests.seed=4750D393F4387E4B -Dtests.class=org.elasticsearch.cluster.service.ClusterServiceTests -Dtests.method=\"testClusterStateUpdateLogging\" -Dtests.security.manager=true -Dtests.locale=en-PH -Dtests.timezone=Zulu\r\n  1> cluster uuid: _na_\r\n  1> version: 4\r\n  1> state uuid: qoJTIhLARm22d_Wb1_-fIw\r\n  1> from_diff: false\r\n  1> meta data version: 0\r\n  1> nodes: \r\n  1>    {node1}{gJfhYupGSQWSvbSpf5bxUw}{local}{local[297]}, local, master\r\n  1> routing_table (version 0):\r\n  1> routing_nodes:\r\n  1> ---- unassigned\r\n  1> [2017-03-24T10:42:29,184][DEBUG][o.e.c.s.ClusterServiceTests$TimedClusterService] publishing cluster state version [4]\r\n  1> [2017-03-24T10:42:29,184][DEBUG][o.e.c.s.ClusterServiceTests$TimedClusterService] applying cluster state version 4\r\n  1> [2017-03-24T10:42:29,184][DEBUG][o.e.c.s.ClusterServiceTests$TimedClusterService] set local cluster state to version 4\r\n  1> [2017-03-24T10:42:29,184][TRACE][o.e.c.s.ClusterServiceTests$TimedClusterService] calling [org.elasticsearch.cluster.service.ClusterService$LocalNodeMasterListeners@39ceead6] with change to version [4]\r\n  1> [2017-03-24T10:42:29,184][DEBUG][o.e.c.s.ClusterServiceTests$TimedClusterService] processing [test3]: took [3s] done applying updated cluster_state (version: 4, uuid: qoJTIhLARm22d_Wb1_-fIw)\r\n  1> [2017-03-24T10:42:29,184][TRACE][o.e.c.s.ClusterServiceTests$TimedClusterService] will process [test4]\r\n  1> [2017-03-24T10:42:29,185][DEBUG][o.e.c.s.ClusterServiceTests$TimedClusterService] processing [test4]: execute\r\n  1> 2017-03-24 10:42:29,186 elasticsearch[clusterService#updateTask][T#1] ERROR Attempted to append to non-started appender mock\r\n  1> [2017-03-24T10:42:29,185][DEBUG][o.e.c.s.ClusterServiceTests$TimedClusterService] processing [test4]: took [0s] no change in cluster_state\r\nFAILURE 0.04s J0 | ClusterServiceTests.testClusterStateUpdateLogging <<< FAILURES!\r\n   > Throwable #1: java.lang.AssertionError: \r\n   > Expected: an empty collection\r\n   >      but: <[Attempted to append to non-started appender mock]>\r\n   > \tat __randomizedtesting.SeedInfo.seed([4750D393F4387E4B:EEA6460CBA279397]:0)\r\n   > \tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \tat org.elasticsearch.test.ESTestCase.checkStaticState(ESTestCase.java:379)\r\n   > \tat org.elasticsearch.test.ESTestCase.after(ESTestCase.java:262)\r\n   > \tat java.lang.Thread.run(Thread.java:745)\r\n  1> [2017-03-24T10:42:29,199][INFO ][o.e.c.s.ClusterServiceTests] [testLocalNodeMasterListenerCallbacks]: before test\r\n  1> [2017-03-24T10:42:29,201][INFO ][o.e.c.s.ClusterServiceTests$TimedClusterService] new_master {node1}{GBu-l3igQRqd_40IMx6Qmg}{local}{local[298]}, reason: test setting state\r\n  1> [2017-03-24T10:42:29,203][INFO ][o.e.c.s.ClusterServiceTests$TimedClusterService] new_master {node1}{0ss1FrODSAqQUvCA5ffcJA}{local}{local[299]}, reason: test setting state\r\n  1> [2017-03-24T10:42:29,204][INFO ][o.e.c.s.ClusterServiceTests$TimedClusterService] new_master {node1}{0ss1FrODSAqQUvCA5ffcJA}{local}{local[299]}, reason: test setting state\r\n  1> [2017-03-24T10:42:29,204][INFO ][o.e.c.s.ClusterServiceTests] [testLocalNodeMasterListenerCallbacks]: after test\r\n  1> [2017-03-24T10:42:29,206][INFO ][o.e.c.s.ClusterServiceTests] [testClusterStateUpdateTasksAreExecutedInOrder]: before test\r\n  1> [2017-03-24T10:42:29,208][INFO ][o.e.c.s.ClusterServiceTests$TimedClusterService] new_master {node1}{JZU5dkNnQwik-8ul80jtCw}{local}{local[300]}, reason: test setting state\r\n  1> [2017-03-24T10:42:29,387][INFO ][o.e.c.s.ClusterServiceTests] [testClusterStateUpdateTasksAreExecutedInOrder]: after test\r\n  1> [2017-03-24T10:42:29,389][INFO ][o.e.c.s.ClusterServiceTests] [testPrioritizedTasks]: before test\r\n  1> [2017-03-24T10:42:29,394][INFO ][o.e.c.s.ClusterServiceTests$TimedClusterService] new_master {node1}{UTcHwFD4S3OqVJOorAwNbA}{local}{local[301]}, reason: test setting state\r\n  1> [2017-03-24T10:42:29,396][INFO ][o.e.c.s.ClusterServiceTests] [testPrioritizedTasks]: after test\r\n  1> [2017-03-24T10:42:29,398][INFO ][o.e.c.s.ClusterServiceTests] [testClusterStateApplierCantSampleClusterState]: before test\r\n  1> [2017-03-24T10:42:29,405][INFO ][o.e.c.s.ClusterServiceTests$TimedClusterService] new_master {node1}{6WnJWJwXTsuC5pJFoS26Kw}{local}{local[302]}, reason: test setting state\r\n  1> [2017-03-24T10:42:29,406][INFO ][o.e.c.s.ClusterServiceTests] [testClusterStateApplierCantSampleClusterState]: after test\r\n  1> [2017-03-24T10:42:29,408][INFO ][o.e.c.s.ClusterServiceTests] [testMasterAwareExecution]: before test\r\n  1> [2017-03-24T10:42:29,411][INFO ][o.e.c.s.ClusterServiceTests$TimedClusterService] new_master {node1}{z54dh55bTq2LyIEmE-6YNw}{local}{local[303]}, reason: test setting state\r\n  1> [2017-03-24T10:42:29,417][INFO ][o.e.c.s.ClusterServiceTests] [testMasterAwareExecution]: after test\r\n  1> [2017-03-24T10:42:29,424][WARN ][o.e.c.s.ClusterServiceTests$TimedClusterService] cluster state update task [test2] took [32s] above the warn threshold of 30s\r\n  1> [2017-03-24T10:42:29,424][WARN ][o.e.c.s.ClusterServiceTests$TimedClusterService] cluster state update task [test2] took [32s] above the warn threshold of 30s\r\n  1> [2017-03-24T10:42:29,424][WARN ][o.e.c.s.ClusterServiceTests$TimedClusterService] cluster state update task [test3] took [33s] above the warn threshold of 30s\r\n  1> [2017-03-24T10:42:29,425][WARN ][o.e.c.s.ClusterServiceTests$TimedClusterService] cluster state update task [test4] took [34s] above the warn threshold of 30s\r\n  1> [2017-03-24T10:42:29,431][INFO ][o.e.c.s.ClusterServiceTests] [testClusterStateTaskListenerThrowingExceptionIsOkay]: before test\r\n  1> [2017-03-24T10:42:29,440][INFO ][o.e.c.s.ClusterServiceTests$TimedClusterService] new_master {node1}{LPB1z4FVTE-mN6y_OcfLYw}{local}{local[306]}, reason: test setting state\r\n  1> [2017-03-24T10:42:29,444][ERROR][o.e.c.s.ClusterServiceTests$TimedClusterService] exception thrown by listener while notifying of cluster state processed from [testClusterStateTaskListenerThrowingExceptionIsOkay], old cluster state:\r\n  1> cluster uuid: _na_\r\n  1> version: 2\r\n  1> state uuid: I7gZBOsGSgOjW7ho9hlyLA\r\n  1> from_diff: false\r\n  1> meta data version: 0\r\n  1> nodes: \r\n  1>    {node1}{LPB1z4FVTE-mN6y_OcfLYw}{local}{local[306]}, local, master\r\n  1> routing_table (version 0):\r\n  1> routing_nodes:\r\n  1> ---- unassigned\r\n  1> new cluster state:\r\n  1> cluster uuid: _na_\r\n  1> version: 3\r\n  1> state uuid: f_6etjQ8TMuwbgAER7zbHA\r\n  1> from_diff: false\r\n  1> meta data version: 0\r\n  1> nodes: \r\n  1>    {node1}{LPB1z4FVTE-mN6y_OcfLYw}{local}{local[306]}, local, master\r\n  1> routing_table (version 0):\r\n  1> routing_nodes:\r\n  1> ---- unassigned\r\n  1> java.lang.IllegalStateException: testClusterStateTaskListenerThrowingExceptionIsOkay\r\n  1> \tat org.elasticsearch.cluster.service.ClusterServiceTests$10.clusterStateProcessed(ClusterServiceTests.java:339) ~[test/:?]\r\n  1> \tat org.elasticsearch.cluster.service.ClusterService$SafeClusterStateTaskListener.clusterStateProcessed(ClusterService.java:1022) ~[main/:?]\r\n  1> \tat org.elasticsearch.cluster.service.ClusterService$TaskOutputs.lambda$processedDifferentClusterState$1(ClusterService.java:916) ~[main/:?]\r\n  1> \tat java.util.ArrayList.forEach(ArrayList.java:1249) ~[?:1.8.0_111]\r\n  1> \tat org.elasticsearch.cluster.service.ClusterService$TaskOutputs.processedDifferentClusterState(ClusterService.java:916) ~[main/:?]\r\n  1> \tat org.elasticsearch.cluster.service.ClusterService.publishAndApplyChanges(ClusterService.java:842) ~[main/:?]\r\n  1> \tat org.elasticsearch.cluster.service.ClusterService.runTasks(ClusterService.java:633) ~[main/:?]\r\n  1> \tat org.elasticsearch.cluster.service.ClusterService$UpdateTask.run(ClusterService.java:1117) ~[main/:?]\r\n  1> \tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:544) ~[main/:?]\r\n  1> \tat org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.runAndClean(PrioritizedEsThreadPoolExecutor.java:238) ~[main/:?]\r\n  1> \tat org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:201) ~[main/:?]\r\n  1> \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[?:1.8.0_111]\r\n  1> \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[?:1.8.0_111]\r\n  1> \tat java.lang.Thread.run(Thread.java:745) ~[?:1.8.0_111]\r\n  1> [2017-03-24T10:42:29,445][INFO ][o.e.c.s.ClusterServiceTests] [testClusterStateTaskListenerThrowingExceptionIsOkay]: after test\r\n  1> [2017-03-24T10:42:29,448][INFO ][o.e.c.s.ClusterServiceTests] [testBlockingCallInClusterStateTaskListenerFails]: before test\r\n  1> [2017-03-24T10:42:29,451][INFO ][o.e.c.s.ClusterServiceTests$TimedClusterService] new_master {node1}{x7DCbkb_Sv2GgAjPUDkQNw}{local}{local[307]}, reason: test setting state\r\n  1> [2017-03-24T10:42:29,453][INFO ][o.e.c.s.ClusterServiceTests] [testBlockingCallInClusterStateTaskListenerFails]: after test\r\n  1> [2017-03-24T10:42:29,455][INFO ][o.e.c.s.ClusterServiceTests] [testDisconnectFromNewlyAddedNodesIfClusterStatePublishingFails]: before test\r\n  1> [2017-03-24T10:42:29,459][INFO ][o.e.c.s.ClusterServiceTests$TimedClusterService] new_master {node1}{Bn8RrsDNQoSEvy4JLd7P6Q}{local}{local[308]}, reason: test setting state\r\n  1> [2017-03-24T10:42:29,473][INFO ][o.e.c.s.ClusterServiceTests$TimedClusterService] new_master {node1}{M2ePtn7FTnCBSzAEzkYKsQ}{local}{local[309]}, reason: test setting state\r\n  1> [2017-03-24T10:42:29,477][INFO ][o.e.c.s.ClusterServiceTests$TimedClusterService] added {{node2}{SxyuFjitREK0DpSzuei2dQ}{local}{local[310]},}, reason: test\r\n  1> [2017-03-24T10:42:29,478][WARN ][o.e.c.s.ClusterServiceTests$TimedClusterService] failing [test]: failed to commit cluster state version [3]\r\n  1> org.elasticsearch.discovery.Discovery$FailedToCommitClusterStateException: just to test this\r\n  1> \tat org.elasticsearch.cluster.service.ClusterServiceTests.lambda$testDisconnectFromNewlyAddedNodesIfClusterStatePublishingFails$12(ClusterServiceTests.java:1076) ~[test/:?]\r\n  1> \tat org.elasticsearch.cluster.service.ClusterService.publishAndApplyChanges(ClusterService.java:788) ~[main/:?]\r\n  1> \tat org.elasticsearch.cluster.service.ClusterService.runTasks(ClusterService.java:633) ~[main/:?]\r\n  1> \tat org.elasticsearch.cluster.service.ClusterService$UpdateTask.run(ClusterService.java:1117) ~[main/:?]\r\n  1> \tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:544) ~[main/:?]\r\n  1> \tat org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.runAndClean(PrioritizedEsThreadPoolExecutor.java:238) ~[main/:?]\r\n  1> \tat org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:201) ~[main/:?]\r\n  1> \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[?:1.8.0_111]\r\n  1> \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[?:1.8.0_111]\r\n  1> \tat java.lang.Thread.run(Thread.java:745) ~[?:1.8.0_111]\r\n  1> [2017-03-24T10:42:29,481][INFO ][o.e.c.s.ClusterServiceTests] [testDisconnectFromNewlyAddedNodesIfClusterStatePublishingFails]: after test\r\n  1> [2017-03-24T10:42:29,483][INFO ][o.e.c.s.ClusterServiceTests] [testTimeoutUpdateTask]: before test\r\n  1> [2017-03-24T10:42:29,493][INFO ][o.e.c.s.ClusterServiceTests$TimedClusterService] new_master {node1}{PPfuJQSxT4CkA8iLTM68iQ}{local}{local[311]}, reason: test setting state\r\n  1> [2017-03-24T10:42:29,499][INFO ][o.e.c.s.ClusterServiceTests] [testTimeoutUpdateTask]: after test\r\n  1> [2017-03-24T10:42:29,500][INFO ][o.e.c.s.ClusterServiceTests] [testOneExecutorDontStarveAnother]: before test\r\n  1> [2017-03-24T10:42:29,502][INFO ][o.e.c.s.ClusterServiceTests$TimedClusterService] new_master {node1}{UP3JsEP3Req6B0vxzCFQeg}{local}{local[312]}, reason: test setting state\r\n  1> [2017-03-24T10:42:29,505][INFO ][o.e.c.s.ClusterServiceTests] [testOneExecutorDontStarveAnother]: after test\r\n  1> [2017-03-24T10:42:29,507][INFO ][o.e.c.s.ClusterServiceTests] [testDuplicateSubmission]: before test\r\n  1> [2017-03-24T10:42:29,522][INFO ][o.e.c.s.ClusterServiceTests$TimedClusterService] new_master {node1}{a6HtYxkASg6GpfUrgVMRPA}{local}{local[313]}, reason: test setting state\r\n  1> [2017-03-24T10:42:29,527][INFO ][o.e.c.s.ClusterServiceTests] [testDuplicateSubmission]: after test\r\n  1> [2017-03-24T10:42:29,539][INFO ][o.e.c.s.ClusterServiceTests] [testTimedOutUpdateTaskCleanedUp]: before test\r\n  1> [2017-03-24T10:42:29,543][INFO ][o.e.c.s.ClusterServiceTests$TimedClusterService] new_master {node1}{l4dyH25TR3ebpfTUBcABRw}{local}{local[314]}, reason: test setting state\r\n  1> [2017-03-24T10:42:29,546][INFO ][o.e.c.s.ClusterServiceTests] [testTimedOutUpdateTaskCleanedUp]: after test\r\n  1> [2017-03-24T10:42:29,550][INFO ][o.e.c.s.ClusterServiceTests] [testClusterStateApplierCanCreateAnObserver]: before test\r\n  1> [2017-03-24T10:42:29,555][INFO ][o.e.c.s.ClusterServiceTests$TimedClusterService] new_master {node1}{C1T8a4alTLO9HxHFNBLiKg}{local}{local[315]}, reason: test setting state\r\n  1> [2017-03-24T10:42:29,558][INFO ][o.e.c.s.ClusterServiceTests] [testClusterStateApplierCanCreateAnObserver]: after test\r\n  2> NOTE: leaving temporary files on disk at: /var/lib/jenkins/workspace/elastic+elasticsearch+5.x+multijob-unix-compatibility/os/opensuse/core/build/testrun/test/J0/temp/org.elasticsearch.cluster.service.ClusterServiceTests_4750D393F4387E4B-001\r\n  2> NOTE: test params are: codec=Asserting(Lucene62): {}, docValues:{}, maxPointsInLeafNode=344, maxMBSortInHeap=5.831578072249608, sim=RandomSimilarity(queryNorm=true,coord=no): {}, locale=en-PH, timezone=Zulu\r\n  2> NOTE: Linux 3.16.7-53-default amd64/Oracle Corporation 1.8.0_111 (64-bit)/cpus=4,threads=1,free=395147848,total=530579456\r\n  2> verTests, ScheduleWithFixedDelayTests, OsStatsTests, CountedCollectorTests, FilterAllocationDeciderTests, MatchPhrasePrefixQueryBuilderTests, PipelineExecutionServiceTests, JvmMonitorTests, CompletionSuggesterBuilderTests, TrackingResultProcessorTests, LegacyTokenCountFieldMapperTests, NetworkServiceTests, TaskTests, CustomPassageFormatterTests, CharMatcherTests, ConstructingObjectParserTests, DiscoveryNodesTests, SpatialStrategyTests, RestIndicesActionTests, MoreLikeThisQueryBuilderTests, URIPatternTests, SnapshotUtilsTests, GeoContextMappingTests, MultiOrdinalsTests, IndexTests, DateFieldTypeTests, UpdateNumberOfReplicasTests, MetaDataDeleteIndexServiceTests, IdFieldMapperTests, PercentileRanksTests, ShardStateActionTests, BytesStreamsTests, DecisionsImpactOnClusterHealthTests, BlendedTermQueryTests, GeoJSONShapeParserTests, AllocationDecisionTests, ClusterRebalanceRoutingTests, InnerHitBuilderTests, SettingsTests, CommandTests, BinaryFieldMapperTests, GroupShardsIteratorTests, SimulatePipelineRequestTests, ClusterAllocationExplainActionTests, AvgTests, DateMathParserTests, IndexIdTests, FileInfoTests, IndexRequestTests, NullValueObjectMappingTests, BooleansTests, CopyToMapperTests, CombineFunctionTests, ConcurrentRecyclerTests, CommonGramsTokenFilterFactoryTests, FileWatcherTests, LegacyByteFieldTypeTests, LegacyDoubleFieldTypeTests, ShardsLimitAllocationTests, MinBucketTests, DateMathExpressionResolverTests, GeoDistanceQueryBuilderTests, SizeValueTests, DateHistogramTests, CborXContentTests, IndexShardOperationsLockTests, ASCIIFoldingTokenFilterFactoryTests, LegacyIntegerFieldTypeTests, IndexMetaDataTests, CompletionSuggestionOptionTests, ConstantScoreQueryBuilderTests, TransportNodesActionTests, GetFieldMappingsResponseTests, StartRecoveryRequestTests, TermSuggestionOptionTests, RangeFieldMapperTests, SpanTermQueryBuilderTests, ExpectedShardSizeAllocationTests, MaxTests, AdapterActionFutureTests, FreqTermsEnumTests, IndicesServiceTests, EvictingQueueTests, TableTests, RangeQueryRewriteTests, FieldMaskingSpanQueryBuilderTests, ConfigurationUtilsTests, StoreRecoveryTests, SettingTests, CodecTests, JavaMultiFieldMergeTests, PreferPrimaryAllocationTests, MinScoreScorerTests, ExplainRequestTests, ShardCoreKeyMapTests, FieldStatsProviderRefreshTests, PolygonBuilderTests, StatsTests, NumbersTests, IndicesStatsTests, DerivativeTests, BucketScriptTests, RandomAllocationDeciderTests, SnowballAnalyzerTests, HppcMapsTestsompletionSuggestionOptionTests, ConstantScoreQueryBuilderTests, TransportNodesActionTests, GetFieldMappingsResponseTests, StartRecoveryRequestTests, TermSuggestionOptionTests, RangeFieldMapperTests, SpanTermQueryBuilderTests, ExpectedShardSizeAllocationTests, MaxTests, AdapterActionFutureTests, FreqTermsEnumTests, IndicesServiceTests, EvictingQueueTests, TableTests, RangeQueryRewriteTests, FieldMaskingSpanQueryBuilderTests, ConfigurationUtilsTests, StoreRecoveryTests, SettingTests, CodecTests, JavaMultiFieldMergeTests, PreferPrimaryAllocationTests, MinScoreScorerTests, ExplainRequestTests, ShardCoreKeyMapTests, FieldStatsProviderRefreshTests, PolygonBuilderTests, StatsTests, NumbersTests, IndicesStatsTests, DerivativeTests, BucketScriptTests, RandomAllocationDeciderTests, SnowballAnalyzerTests, HppcMapsTests, UidFieldTypeTests, AvgBucketTests, RecoverySourceHandlerTests, SimulateDocumentSimpleResultTests, ScriptQueryBuilderTests, MultiFieldIncludeInAllMapperTests, NestedTests, HasParentQueryBuilderTests, CompletionsStatsTests, ParentTaskAssigningClientTests, RestControllerTests, GeoPointParsingTests, FsDirectoryServiceTests, DeleteByQueryRequestTests, DirectCandidateGeneratorTests, DynamicMappingDisabledTests, FsBlobStoreContainerTests, GatewayServiceTests, ClusterRerouteTests, MultiGetRequestTests, RoutingFieldMapperTests, AnalysisModuleTests, IngestServiceTests, TransportBulkActionTookTests, FieldNamesFieldMapperTests, IndexBalanceTests, SpanContainingQueryBuilderTests, ClusterServiceTests]\r\nCompleted [315/923] on J0 in 0.61s, 17 tests, 1 failure <<< FAILURES!\r\n```\r\n","closed_by":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"performed_via_github_app":null}