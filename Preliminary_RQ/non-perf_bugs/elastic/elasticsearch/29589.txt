{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/29589","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29589/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29589/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29589/events","html_url":"https://github.com/elastic/elasticsearch/issues/29589","id":315572338,"node_id":"MDU6SXNzdWUzMTU1NzIzMzg=","number":29589,"title":"Inconsistent behavior when requesting stats for the 'suggest' metric","user":{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false},"labels":[{"id":146836529,"node_id":"MDU6TGFiZWwxNDY4MzY1Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Stats","name":":Core/Features/Stats","color":"0e8a16","default":false,"description":"Statistics tracking and retrieval APIs"},{"id":753477051,"node_id":"MDU6TGFiZWw3NTM0NzcwNTE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v6.3.0","name":"v6.3.0","color":"DDDDDD","default":false,"description":null},{"id":1223177445,"node_id":"MDU6TGFiZWwxMjIzMTc3NDQ1","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v7.0.0-beta1","name":"v7.0.0-beta1","color":"dddddd","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-04-18T17:27:02Z","updated_at":"2019-02-07T08:34:53Z","closed_at":"2018-04-24T23:03:49Z","author_association":"MEMBER","active_lock_reason":null,"body":"**Elasticsearch version** (`bin/elasticsearch --version`): 6.2.3\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nWith the indices stats endpoint, requesting the ’suggest’ metric returns search stats (which include suggest stats). It looks like we explicitly map ‘suggest’ to the search stats flag when executing the action: https://github.com/elastic/elasticsearch/blob/6.2/server/src/main/java/org/elasticsearch/rest/action/admin/indices/RestIndicesStatsAction.java#L71\r\n\r\nOn the other hand, requesting the ‘suggest’ metric through the nodes stats endpoint returns no stats at all, despite the documentation showing that ‘suggest’ is accepted: https://www.elastic.co/guide/en/elasticsearch/reference/6.2/cluster-nodes-stats.html\r\n\r\nI don't have a lot of context, but since suggest has been rolled into search, it may make sense for the 'suggest' metric to never be accepted. This would mean that (1) both indices + nodes stats fail when 'suggest' is requested, and (2) the nodes stats documentation should be updated to remove the reference to 'suggest'.\r\n\r\n**Steps to reproduce**:\r\n```\r\nPUT test\r\nGET /_stats/suggest\r\nGET /_nodes/stats/indices/suggest\r\n```\r\nSee the following gist for the response output: https://gist.github.com/jtibshirani/16fc07384a90b0016d4fd07cedd7c512","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}