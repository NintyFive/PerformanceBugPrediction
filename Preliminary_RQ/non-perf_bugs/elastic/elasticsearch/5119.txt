{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/5119","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5119/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5119/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5119/events","html_url":"https://github.com/elastic/elasticsearch/issues/5119","id":27562651,"node_id":"MDU6SXNzdWUyNzU2MjY1MQ==","number":5119,"title":"Delay startup of marvel plugin","user":{"login":"markwalkom","id":3184718,"node_id":"MDQ6VXNlcjMxODQ3MTg=","avatar_url":"https://avatars0.githubusercontent.com/u/3184718?v=4","gravatar_id":"","url":"https://api.github.com/users/markwalkom","html_url":"https://github.com/markwalkom","followers_url":"https://api.github.com/users/markwalkom/followers","following_url":"https://api.github.com/users/markwalkom/following{/other_user}","gists_url":"https://api.github.com/users/markwalkom/gists{/gist_id}","starred_url":"https://api.github.com/users/markwalkom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markwalkom/subscriptions","organizations_url":"https://api.github.com/users/markwalkom/orgs","repos_url":"https://api.github.com/users/markwalkom/repos","events_url":"https://api.github.com/users/markwalkom/events{/privacy}","received_events_url":"https://api.github.com/users/markwalkom/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"assignees":[{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2014-02-13T23:42:20Z","updated_at":"2015-01-05T08:00:57Z","closed_at":"2015-01-05T08:00:57Z","author_association":"MEMBER","active_lock_reason":null,"body":"When starting up an ES node with the marvel plugin installed, before the node can connect to or start a cluster it complains every second that it cannot connect to upload stats which generates a lot of noise in the logs;\n\n```\n[2014-02-14 10:32:10,991][ERROR][marvel.agent.exporter    ] error connecting to [localhost:9200]\njava.net.ConnectException: Connection refused\n        at java.net.PlainSocketImpl.socketConnect(Native Method)\n        at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)\n        at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)\n        at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)\n        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\n        at java.net.Socket.connect(Socket.java:579)\n        at sun.net.NetworkClient.doConnect(NetworkClient.java:175)\n        at sun.net.www.http.HttpClient.openServer(HttpClient.java:432)\n        at sun.net.www.http.HttpClient.openServer(HttpClient.java:527)\n        at sun.net.www.http.HttpClient.<init>(HttpClient.java:211)\n        at sun.net.www.http.HttpClient.New(HttpClient.java:308)\n        at sun.net.www.http.HttpClient.New(HttpClient.java:326)\n        at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:996)\n        at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:932)\n        at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:850)\n        at org.elasticsearch.marvel.agent.exporter.ESExporter.openConnection(ESExporter.java:317)\n        at org.elasticsearch.marvel.agent.exporter.ESExporter.openExportingConnection(ESExporter.java:198)\n        at org.elasticsearch.marvel.agent.exporter.ESExporter.exportXContent(ESExporter.java:246)\n        at org.elasticsearch.marvel.agent.exporter.ESExporter.exportNodeStats(ESExporter.java:135)\n        at org.elasticsearch.marvel.agent.AgentService$ExportingWorker.exportNodeStats(AgentService.java:274)\n        at org.elasticsearch.marvel.agent.AgentService$ExportingWorker.run(AgentService.java:174)\n        at java.lang.Thread.run(Thread.java:744)\n[2014-02-14 10:32:10,991][ERROR][marvel.agent.exporter    ] could not connect to any configured elasticsearch instances: [localhost:9200]\n```\n\nIt'd be nicer if marvel could wait until cluster state is established and then start stats collection.\n","closed_by":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"performed_via_github_app":null}