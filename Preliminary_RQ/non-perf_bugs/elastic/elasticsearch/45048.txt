{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/45048","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45048/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45048/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45048/events","html_url":"https://github.com/elastic/elasticsearch/issues/45048","id":475154336,"node_id":"MDU6SXNzdWU0NzUxNTQzMzY=","number":45048,"title":"Geo: Switch Geometry classes from lat, lon, alt to x, y, z ","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"labels":[{"id":141079527,"node_id":"MDU6TGFiZWwxNDEwNzk1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Analytics/Geo","name":":Analytics/Geo","color":"0e8a16","default":false,"description":"Indexing, search aggregations of geo points and shapes"},{"id":912794284,"node_id":"MDU6TGFiZWw5MTI3OTQyODQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Query%20Languages/SQL","name":":Query Languages/SQL","color":"0e8a16","default":false,"description":"SQL querying"},{"id":416200220,"node_id":"MDU6TGFiZWw0MTYyMDAyMjA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebreaking-java","name":">breaking-java","color":"d93f0b","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-07-31T13:44:59Z","updated_at":"2019-08-09T17:22:00Z","closed_at":"2019-08-09T17:22:00Z","author_association":"MEMBER","active_lock_reason":null,"body":"### Proposal\r\n\r\n- Change all references to `lat`, `lon` and `alt` with `x`, `y`, and `z`\r\n- Change the order of the parameters in constructors from`lat`, `lon`, `alt`  to `x`, `y`, `z`\r\n- Move Geometry hierarchy from `org.elasticsearch.geo.geometry` to `org.elasticsearch.geometry`\r\n\r\n### Rationale\r\n\r\nI think I made a mistake of going with `lat`, `lon` notation instead of `x`, `y` notation when I first introduced the `Geometry` hierarchy and the window of opportunity to rectify this mistake with a limited impact on end users is quickly closing. I have been recently doing a lot of refactoring work with `Geometry` classes and was constantly struggling with the order and naming of parameters for the following reasons:\r\n\r\n- the current order and naming defers from most of the other libraries and standard that we are using in elasticsearch including JTS, WKT, GeoJSON and naming convention used in geosql functions.\r\n- we are in process of extending use of `Geometry` classes in the context of `XYShapes` and different projections, which makes generic `x` and `y` more appropriate than `lat` and `lon`.\r\n - the hierarchy is based on `Geometry` (not Geography) in the first place, so member naming based on `lat` and `lon` doesn't seem to be consistent with the class naming.\r\n\r\n### Reducing the impact\r\n\r\nIf we make the transition before 7.4 the only users who would be affected are JDBC users that are using geosql features. The feature is currently marked as beta and JDBC driver is setup in such a way that it doesn't provide any compatibility between version, so migration will mean recompiling with a new version of the driver. Since we are change the order of the parameters in constructor but not the type we will bring users attention to this issue by also changing the package name for Geometry classes. However, there is no way to avoid changing the code for JDBC geosql users. On the positive side, switching to x, y, z naming convention will make interface it more consistent for goesql users as well. Considering that the feature is really, I don't think that a lot of users will be affected by this change. \r\n\r\nIn 7.4 the Geometry hierarchy will become the part of `QueryBuilder` interface, so any changes will have much bigger impact. \r\n ","closed_by":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"performed_via_github_app":null}