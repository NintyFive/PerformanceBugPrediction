{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/48716","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48716/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48716/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48716/events","html_url":"https://github.com/elastic/elasticsearch/issues/48716","id":514944879,"node_id":"MDU6SXNzdWU1MTQ5NDQ4Nzk=","number":48716,"title":"Allow creation of API keys on behalf of other users","user":{"login":"peterschretlen","id":7903188,"node_id":"MDQ6VXNlcjc5MDMxODg=","avatar_url":"https://avatars1.githubusercontent.com/u/7903188?v=4","gravatar_id":"","url":"https://api.github.com/users/peterschretlen","html_url":"https://github.com/peterschretlen","followers_url":"https://api.github.com/users/peterschretlen/followers","following_url":"https://api.github.com/users/peterschretlen/following{/other_user}","gists_url":"https://api.github.com/users/peterschretlen/gists{/gist_id}","starred_url":"https://api.github.com/users/peterschretlen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peterschretlen/subscriptions","organizations_url":"https://api.github.com/users/peterschretlen/orgs","repos_url":"https://api.github.com/users/peterschretlen/repos","events_url":"https://api.github.com/users/peterschretlen/events{/privacy}","received_events_url":"https://api.github.com/users/peterschretlen/received_events","type":"User","site_admin":false},"labels":[{"id":912837951,"node_id":"MDU6TGFiZWw5MTI4Mzc5NTE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Security/Authentication","name":":Security/Authentication","color":"0e8a16","default":false,"description":"Logging in, Usernames/passwords, Realms (Native/LDAP/AD/SAML/PKI/etc)"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":1903451964,"node_id":"MDU6TGFiZWwxOTAzNDUxOTY0","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Top%20Ask","name":"Top Ask","color":"fef2c0","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"assignees":[{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false}],"milestone":null,"comments":21,"created_at":"2019-10-30T19:58:58Z","updated_at":"2020-03-26T02:00:54Z","closed_at":"2020-03-26T02:00:54Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"The `manage_own_api_key` role allows creating a point-in-time snapshot of an authenticated user's permissions, that does not expire.  This is ideal for [Kibana alerting](https://github.com/elastic/kibana/pull/41389) which runs scheduled background alert checks where permissions need to be enforced but the authenticated user isn't around.  \r\n\r\nHowever most users won't have the `manage_own_api_key` role. Generally this should be an explicitly granted privilege.\r\n\r\nWould it be possible to allow a user (like the kibana system user) to create API keys on behalf of other users (similar to the [token api](https://www.elastic.co/guide/en/elasticsearch/reference/7.5/security-api-get-token.html) )?\r\n\r\nThe user of a service like alerting would then require no special privileges.  They would not need access to (or even awareness of) the API keys created on their behalf.  The system user could be restricted to creating keys for users whose credentials they have  ( like a user submitting a request to create an alert, for example ).\r\n","closed_by":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"performed_via_github_app":null}