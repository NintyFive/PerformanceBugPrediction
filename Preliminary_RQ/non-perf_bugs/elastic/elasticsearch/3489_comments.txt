[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/22549235","html_url":"https://github.com/elastic/elasticsearch/issues/3489#issuecomment-22549235","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3489","id":22549235,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNTQ5MjM1","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-08-13T08:10:17Z","updated_at":"2013-08-13T08:10:17Z","author_association":"CONTRIBUTOR","body":"I agree we should be more verbose regarding how to gain the previous behaviour. Yet, I have to say this is bw compatible given you have an already existing index that option will still work ok. You can also use the option if you specify an old version in the mapping like '{ \"version\" : \"4.2\", ...}' I will go ahead and fix the documentation and the exception for this tokenizer and related token filters. Thanks for reporting.\n\nsimon\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/22557836","html_url":"https://github.com/elastic/elasticsearch/issues/3489#issuecomment-22557836","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3489","id":22557836,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNTU3ODM2","user":{"login":"dbertram","id":864848,"node_id":"MDQ6VXNlcjg2NDg0OA==","avatar_url":"https://avatars3.githubusercontent.com/u/864848?v=4","gravatar_id":"","url":"https://api.github.com/users/dbertram","html_url":"https://github.com/dbertram","followers_url":"https://api.github.com/users/dbertram/followers","following_url":"https://api.github.com/users/dbertram/following{/other_user}","gists_url":"https://api.github.com/users/dbertram/gists{/gist_id}","starred_url":"https://api.github.com/users/dbertram/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbertram/subscriptions","organizations_url":"https://api.github.com/users/dbertram/orgs","repos_url":"https://api.github.com/users/dbertram/repos","events_url":"https://api.github.com/users/dbertram/events{/privacy}","received_events_url":"https://api.github.com/users/dbertram/received_events","type":"User","site_admin":false},"created_at":"2013-08-13T11:14:19Z","updated_at":"2013-08-13T11:14:19Z","author_association":"NONE","body":"Thanks, Simon! Sorry about the mix-up regarding whether or not this was backwards incompatible. Our setup does automatic mapping updates, so from my perspective all I did was update from 0.90.1 to 0.90.3 and then I started seeing exceptions. I'll be more careful before filing issues in the future. :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/22558349","html_url":"https://github.com/elastic/elasticsearch/issues/3489#issuecomment-22558349","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3489","id":22558349,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNTU4MzQ5","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-08-13T11:25:15Z","updated_at":"2013-08-13T11:25:15Z","author_association":"CONTRIBUTOR","body":"@dbertram I think it's good to file issues! First other people can easily google for it and 2. they see how to resolve it. I just wanted to make sure that folks understand that it's not breaking anything. Thanks for opening this. Just to confirm, you move to a setup where you have `\"filter\" : [\"reverse\", \"edgeNGram\", \"reverse\"]`  right?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/22566983","html_url":"https://github.com/elastic/elasticsearch/issues/3489#issuecomment-22566983","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3489","id":22566983,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNTY2OTgz","user":{"login":"dbertram","id":864848,"node_id":"MDQ6VXNlcjg2NDg0OA==","avatar_url":"https://avatars3.githubusercontent.com/u/864848?v=4","gravatar_id":"","url":"https://api.github.com/users/dbertram","html_url":"https://github.com/dbertram","followers_url":"https://api.github.com/users/dbertram/followers","following_url":"https://api.github.com/users/dbertram/following{/other_user}","gists_url":"https://api.github.com/users/dbertram/gists{/gist_id}","starred_url":"https://api.github.com/users/dbertram/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbertram/subscriptions","organizations_url":"https://api.github.com/users/dbertram/orgs","repos_url":"https://api.github.com/users/dbertram/repos","events_url":"https://api.github.com/users/dbertram/events{/privacy}","received_events_url":"https://api.github.com/users/dbertram/received_events","type":"User","site_admin":false},"created_at":"2013-08-13T14:05:42Z","updated_at":"2013-08-13T14:05:42Z","author_association":"NONE","body":"Correct. I've also tested this using the [_analyze API](http://www.elasticsearch.org/guide/reference/api/admin-indices-analyze/) to ensure the old side=BACK tokenizer and the new \"analyzer with reverse, edgeNGram, reverse token filters\" produce the same tokens. The offsets are different, but from what I've read that was the entire point of modifying the edgeNGram tokenizer/token filter in the first place.\n\nJust one thing I wanted to clarify wrt the \"backwards compatible change\" aspect:\n\nIf you have an index created with 0.90.1 that defines an edgeNGram tokenizer using side=BACK and then upgrade to 0.90.3, you _do_ start getting exceptions without changing the mapping when you try to index documents that use that tokenizer:\n\n``` java\norg.elasticsearch.ElasticSearchIllegalArgumentException: side=BACK is not supported anymore. Please fix your analysis ch\nain or use an older compatibility version (<=4.2) but beware that it might cause highlighting bugs.\n        at org.elasticsearch.index.analysis.EdgeNGramTokenizerFactory.create(EdgeNGramTokenizerFactory.java:66)\n        at org.elasticsearch.index.analysis.CustomAnalyzer.createComponents(CustomAnalyzer.java:83)\n        at org.apache.lucene.analysis.CustomAnalyzerWrapper.createComponents(CustomAnalyzerWrapper.java:60)\n        at org.apache.lucene.analysis.AnalyzerWrapper.createComponents(AnalyzerWrapper.java:66)\n        at org.apache.lucene.analysis.Analyzer.tokenStream(Analyzer.java:177)\n        at org.apache.lucene.document.Field.tokenStream(Field.java:552)\n        at org.elasticsearch.index.mapper.core.StringFieldMapper$StringField.tokenStream(StringFieldMapper.java:360)\n        at org.apache.lucene.index.DocInverterPerField.processFields(DocInverterPerField.java:95)\n        at org.apache.lucene.index.DocFieldProcessor.processDocument(DocFieldProcessor.java:245)\n        at org.apache.lucene.index.DocumentsWriterPerThread.updateDocuments(DocumentsWriterPerThread.java:323)\n        at org.apache.lucene.index.DocumentsWriter.updateDocuments(DocumentsWriter.java:398)\n        at org.apache.lucene.index.IndexWriter.updateDocuments(IndexWriter.java:1288)\n        at org.apache.lucene.index.IndexWriter.addDocuments(IndexWriter.java:1248)\n        at org.elasticsearch.index.engine.robin.RobinEngine.innerIndex(RobinEngine.java:577)\n        at org.elasticsearch.index.engine.robin.RobinEngine.index(RobinEngine.java:490)\n        at org.elasticsearch.index.shard.service.InternalIndexShard.index(InternalIndexShard.java:341)\n        at org.elasticsearch.action.index.TransportIndexAction.shardOperationOnPrimary(TransportIndexAction.java:207)\n        at org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationActi\non.performOnPrimary(TransportShardReplicationOperationAction.java:521)\n        at org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationActi\non$1.run(TransportShardReplicationOperationAction.java:419)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n        at java.lang.Thread.run(Thread.java:619)\n```\n\nSo wouldn't that qualify as a backwards-incompatible change? Or am I misunderstanding something?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/22570714","html_url":"https://github.com/elastic/elasticsearch/issues/3489#issuecomment-22570714","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3489","id":22570714,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNTcwNzE0","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-08-13T14:55:49Z","updated_at":"2013-08-13T14:55:49Z","author_association":"CONTRIBUTOR","body":"@dbertram this is what I feared! This should not be the case, so this seems to be a bug! I will try to come up with a test that reproduces this.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/22669438","html_url":"https://github.com/elastic/elasticsearch/issues/3489#issuecomment-22669438","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3489","id":22669438,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjY5NDM4","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-08-14T21:40:46Z","updated_at":"2013-08-14T21:40:46Z","author_association":"CONTRIBUTOR","body":"I found out what caused the problems with upgrading. Unfortunately the check was not smart enough to handle the case correctly so I fixe the upgrade path. This should now work just fine to upgrade from `0.90.1` to `0.90.3`. The problem here was essentially that we checked on the lucene version we added this with but `0.90.1` was already release with this lucene version and we manually ported the fixed tokenizers. So I needed to check for the actual ES version to make this work correctly.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/22699659","html_url":"https://github.com/elastic/elasticsearch/issues/3489#issuecomment-22699659","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3489","id":22699659,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjk5NjU5","user":{"login":"dbertram","id":864848,"node_id":"MDQ6VXNlcjg2NDg0OA==","avatar_url":"https://avatars3.githubusercontent.com/u/864848?v=4","gravatar_id":"","url":"https://api.github.com/users/dbertram","html_url":"https://github.com/dbertram","followers_url":"https://api.github.com/users/dbertram/followers","following_url":"https://api.github.com/users/dbertram/following{/other_user}","gists_url":"https://api.github.com/users/dbertram/gists{/gist_id}","starred_url":"https://api.github.com/users/dbertram/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbertram/subscriptions","organizations_url":"https://api.github.com/users/dbertram/orgs","repos_url":"https://api.github.com/users/dbertram/repos","events_url":"https://api.github.com/users/dbertram/events{/privacy}","received_events_url":"https://api.github.com/users/dbertram/received_events","type":"User","site_admin":false},"created_at":"2013-08-15T12:21:28Z","updated_at":"2013-08-15T12:21:28Z","author_association":"NONE","body":"Ah. Glad you got the upgrade path smoothed out. Thanks, Simon!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/22699914","html_url":"https://github.com/elastic/elasticsearch/issues/3489#issuecomment-22699914","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3489","id":22699914,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjk5OTE0","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-08-15T12:28:16Z","updated_at":"2013-08-15T12:28:16Z","author_association":"CONTRIBUTOR","body":"@dbertram thanks for bringing it up!\n","performed_via_github_app":null}]