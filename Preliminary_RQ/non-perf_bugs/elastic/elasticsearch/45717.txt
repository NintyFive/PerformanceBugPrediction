{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/45717","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45717/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45717/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45717/events","html_url":"https://github.com/elastic/elasticsearch/issues/45717","id":482717382,"node_id":"MDU6SXNzdWU0ODI3MTczODI=","number":45717,"title":"Clarify realtime get API documentation","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"labels":[{"id":145572580,"node_id":"MDU6TGFiZWwxNDU1NzI1ODA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/CRUD","name":":Distributed/CRUD","color":"0e8a16","default":false,"description":"A catch all label for issues around indexing, updating and getting a doc by id. Not search."},{"id":23715,"node_id":"MDU6TGFiZWwyMzcxNQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Edocs","name":">docs","color":"db755e","default":false,"description":"General docs changes"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2019-08-20T08:27:45Z","updated_at":"2019-12-02T16:18:09Z","closed_at":"2019-12-02T16:18:09Z","author_association":"MEMBER","active_lock_reason":null,"body":"Reported at: https://discuss.elastic.co/t/the-id-query-will-trigger-refresh-but-i-still-cant-search-with-query-qsl/195829\r\n\r\nThe [documentation](https://www.elastic.co/guide/en/elasticsearch/reference/7.3/docs-get.html#realtime) states:\r\n\r\n> If a document has been updated but is not yet refreshed, the get API will issue a refresh call in-place to make the document visible. This will also make other documents changed since the last refresh visible. \r\n\r\nBut the following script does not seem to prove it:\r\n\r\n```\r\nDELETE test\r\nPUT test \r\n{\r\n  \"settings\": {\r\n    \"refresh_interval\": \"-1\"\r\n  }\r\n}\r\nPUT test/_doc/1\r\n{\r\n  \"foo\": \"bar\"\r\n}\r\n```\r\n\r\nThis gives empty results:\r\n\r\n```\r\nGET test/_search\r\n```\r\n\r\nThis gives empty results although we called the GET API:\r\n\r\n```\r\nGET test/_doc/1\r\nGET test/_search\r\n```\r\n\r\nThis works when we manually refresh the index:\r\n\r\n```\r\nPOST test/_refresh\r\nGET test/_search\r\n```\r\n\r\nSo the documentation is not entirely exact about what is happening behind the scene. May be it's because I have only one document and some threshold are involved here?","closed_by":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"performed_via_github_app":null}