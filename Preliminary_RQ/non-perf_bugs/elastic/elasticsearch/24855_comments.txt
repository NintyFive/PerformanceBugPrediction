[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/313672239","html_url":"https://github.com/elastic/elasticsearch/issues/24855#issuecomment-313672239","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24855","id":313672239,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMzY3MjIzOQ==","user":{"login":"emmerich","id":701222,"node_id":"MDQ6VXNlcjcwMTIyMg==","avatar_url":"https://avatars2.githubusercontent.com/u/701222?v=4","gravatar_id":"","url":"https://api.github.com/users/emmerich","html_url":"https://github.com/emmerich","followers_url":"https://api.github.com/users/emmerich/followers","following_url":"https://api.github.com/users/emmerich/following{/other_user}","gists_url":"https://api.github.com/users/emmerich/gists{/gist_id}","starred_url":"https://api.github.com/users/emmerich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/emmerich/subscriptions","organizations_url":"https://api.github.com/users/emmerich/orgs","repos_url":"https://api.github.com/users/emmerich/repos","events_url":"https://api.github.com/users/emmerich/events{/privacy}","received_events_url":"https://api.github.com/users/emmerich/received_events","type":"User","site_admin":false},"created_at":"2017-07-07T12:50:07Z","updated_at":"2017-07-07T12:50:07Z","author_association":"NONE","body":"Just a quick note that I myself came across this requirement, and decided to approach it with the terms+terms+top_hits approach. With 7000 documents returned by the query before aggregations, I found that the performance tripled when I added the final top_hits aggregation. (terms+top_hits was fine, terms+terms was fine, terms+terms+top_hits was awful).\r\n\r\nI raised this as a forum post here: https://discuss.elastic.co/t/top-hits-performance-inside-2-levels-of-terms-aggregations/92266\r\n\r\nBut it's perhaps useful to see it here too.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/365877496","html_url":"https://github.com/elastic/elasticsearch/issues/24855#issuecomment-365877496","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24855","id":365877496,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTg3NzQ5Ng==","user":{"login":"tarunramsinghani","id":2929463,"node_id":"MDQ6VXNlcjI5Mjk0NjM=","avatar_url":"https://avatars3.githubusercontent.com/u/2929463?v=4","gravatar_id":"","url":"https://api.github.com/users/tarunramsinghani","html_url":"https://github.com/tarunramsinghani","followers_url":"https://api.github.com/users/tarunramsinghani/followers","following_url":"https://api.github.com/users/tarunramsinghani/following{/other_user}","gists_url":"https://api.github.com/users/tarunramsinghani/gists{/gist_id}","starred_url":"https://api.github.com/users/tarunramsinghani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarunramsinghani/subscriptions","organizations_url":"https://api.github.com/users/tarunramsinghani/orgs","repos_url":"https://api.github.com/users/tarunramsinghani/repos","events_url":"https://api.github.com/users/tarunramsinghani/events{/privacy}","received_events_url":"https://api.github.com/users/tarunramsinghani/received_events","type":"User","site_admin":true},"created_at":"2018-02-15T09:56:09Z","updated_at":"2018-02-15T09:56:09Z","author_association":"NONE","body":"+1\r\n\r\nWe are also using term->terms->TopHits to solve a problem, where multiple level of collapse with pagination will be very useful. But the question is would it be better to have Parent->Child Structure to solve this problem performance wise instead of having N-level nesting for collapse ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/375108461","html_url":"https://github.com/elastic/elasticsearch/issues/24855#issuecomment-375108461","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24855","id":375108461,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NTEwODQ2MQ==","user":{"login":"andyb-elastic","id":29205940,"node_id":"MDQ6VXNlcjI5MjA1OTQw","avatar_url":"https://avatars2.githubusercontent.com/u/29205940?v=4","gravatar_id":"","url":"https://api.github.com/users/andyb-elastic","html_url":"https://github.com/andyb-elastic","followers_url":"https://api.github.com/users/andyb-elastic/followers","following_url":"https://api.github.com/users/andyb-elastic/following{/other_user}","gists_url":"https://api.github.com/users/andyb-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/andyb-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyb-elastic/subscriptions","organizations_url":"https://api.github.com/users/andyb-elastic/orgs","repos_url":"https://api.github.com/users/andyb-elastic/repos","events_url":"https://api.github.com/users/andyb-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/andyb-elastic/received_events","type":"User","site_admin":false},"created_at":"2018-03-21T21:53:24Z","updated_at":"2018-03-21T21:53:24Z","author_association":"CONTRIBUTOR","body":"@elastic/es-search-aggs ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/621747789","html_url":"https://github.com/elastic/elasticsearch/issues/24855#issuecomment-621747789","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24855","id":621747789,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMTc0Nzc4OQ==","user":{"login":"stojan-jovic","id":34024604,"node_id":"MDQ6VXNlcjM0MDI0NjA0","avatar_url":"https://avatars0.githubusercontent.com/u/34024604?v=4","gravatar_id":"","url":"https://api.github.com/users/stojan-jovic","html_url":"https://github.com/stojan-jovic","followers_url":"https://api.github.com/users/stojan-jovic/followers","following_url":"https://api.github.com/users/stojan-jovic/following{/other_user}","gists_url":"https://api.github.com/users/stojan-jovic/gists{/gist_id}","starred_url":"https://api.github.com/users/stojan-jovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stojan-jovic/subscriptions","organizations_url":"https://api.github.com/users/stojan-jovic/orgs","repos_url":"https://api.github.com/users/stojan-jovic/repos","events_url":"https://api.github.com/users/stojan-jovic/events{/privacy}","received_events_url":"https://api.github.com/users/stojan-jovic/received_events","type":"User","site_admin":false},"created_at":"2020-04-30T10:25:52Z","updated_at":"2020-04-30T10:25:52Z","author_association":"NONE","body":"Wondering why did we give up from approach introduced in #31557? Are there plans to support something like that in the near future?","performed_via_github_app":null}]