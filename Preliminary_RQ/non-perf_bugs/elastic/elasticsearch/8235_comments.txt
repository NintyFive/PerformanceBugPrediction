[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/113281415","html_url":"https://github.com/elastic/elasticsearch/issues/8235#issuecomment-113281415","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8235","id":113281415,"node_id":"MDEyOklzc3VlQ29tbWVudDExMzI4MTQxNQ==","user":{"login":"vineelyalamarthy","id":515877,"node_id":"MDQ6VXNlcjUxNTg3Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/515877?v=4","gravatar_id":"","url":"https://api.github.com/users/vineelyalamarthy","html_url":"https://github.com/vineelyalamarthy","followers_url":"https://api.github.com/users/vineelyalamarthy/followers","following_url":"https://api.github.com/users/vineelyalamarthy/following{/other_user}","gists_url":"https://api.github.com/users/vineelyalamarthy/gists{/gist_id}","starred_url":"https://api.github.com/users/vineelyalamarthy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vineelyalamarthy/subscriptions","organizations_url":"https://api.github.com/users/vineelyalamarthy/orgs","repos_url":"https://api.github.com/users/vineelyalamarthy/repos","events_url":"https://api.github.com/users/vineelyalamarthy/events{/privacy}","received_events_url":"https://api.github.com/users/vineelyalamarthy/received_events","type":"User","site_admin":false},"created_at":"2015-06-18T20:32:49Z","updated_at":"2015-06-18T20:32:49Z","author_association":"NONE","body":"@clintongormley  How can I assign this bug to myself. This sounds interesting.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/113420277","html_url":"https://github.com/elastic/elasticsearch/issues/8235#issuecomment-113420277","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8235","id":113420277,"node_id":"MDEyOklzc3VlQ29tbWVudDExMzQyMDI3Nw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-06-19T07:59:45Z","updated_at":"2015-06-19T07:59:45Z","author_association":"CONTRIBUTOR","body":"@vineelyalamarthy no need to assign it.  If you see a PR you're interested in working on, you can just go ahead and submit a PR. Although I'd advise discussing the approach in the issue before writing any code.\n\nNot sure this is a good one to start on though, it's more complicated than it looks. I've marked it discuss because I don't think there is an easy way to do this.  Take a look at this example:\n\n```\nPUT t\n{\n  \"settings\": {\n    \"analysis\": {\n      \"analyzer\": {\n        \"my_analyzer\": {\n          \"tokenizer\": \"standard\",\n          \"filter\": [\n            \"lowercase\",\n            \"compound_words\"\n          ]\n        }\n      },\n      \"filter\": {\n        \"compound_words\": {\n          \"type\": \"dictionary_decompounder\",\n          \"word_list\": [\n            \"shoe\",\n            \"rack\"\n          ]\n        }\n      }\n    }\n  }\n}\n\nGET t/_analyze?analyzer=my_analyzer&text=My shoerack\n```\n\nreturns\n\n```\n{\n   \"tokens\": [\n      {\n         \"token\": \"my\",\n         \"start_offset\": 0,\n         \"end_offset\": 2,\n         \"type\": \"<ALPHANUM>\",\n         \"position\": 1\n      },\n      {\n         \"token\": \"shoerack\",\n         \"start_offset\": 3,\n         \"end_offset\": 11,\n         \"type\": \"<ALPHANUM>\",\n         \"position\": 2\n      },\n      {\n         \"token\": \"shoe\",\n         \"start_offset\": 3,\n         \"end_offset\": 11,\n         \"type\": \"<ALPHANUM>\",\n         \"position\": 2\n      },\n      {\n         \"token\": \"rack\",\n         \"start_offset\": 3,\n         \"end_offset\": 11,\n         \"type\": \"<ALPHANUM>\",\n         \"position\": 2\n      }\n   ]\n}\n```\n\nSo `shoerack`, `shoe`, and `rack` are stacked in the same position.  This is the same thing that happens with synonyms (but if you're expanding synonyms at query time, you don't want to enforce matching ALL alternatives).\n\nQueries like the `match` query are constructed by first analyzing the query string to produce a token stream (like the above) then generating low level `term` queries, wrapped in a `bool` query, for each token. There is no way to distinguish between stacked tokens that have been generated by a compound filter and tokens that have been generated by a synonym filter.\n\nTo make this change possible, the query generation process would need to understand the analysis chain... that's a big change!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/263059341","html_url":"https://github.com/elastic/elasticsearch/issues/8235#issuecomment-263059341","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8235","id":263059341,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzA1OTM0MQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-11-26T11:53:06Z","updated_at":"2016-11-26T11:53:06Z","author_association":"CONTRIBUTOR","body":"As of 5.0, this now works correctly:\r\n\r\n```\r\nPUT t\r\n{\r\n  \"settings\": {\r\n    \"analysis\": {\r\n      \"analyzer\": {\r\n        \"my_analyzer\": {\r\n          \"tokenizer\": \"standard\",\r\n          \"filter\": [\r\n            \"lowercase\",\r\n            \"compound_words\"\r\n          ]\r\n        }\r\n      },\r\n      \"filter\": {\r\n        \"compound_words\": {\r\n          \"type\": \"dictionary_decompounder\",\r\n          \"word_list\": [\r\n            \"shoe\",\r\n            \"rack\"\r\n          ]\r\n        }\r\n      }\r\n    }\r\n  },\r\n  \"mappings\": {\r\n    \"t\": {\r\n      \"properties\": {\r\n        \"text\": {\r\n          \"type\": \"text\",\r\n          \"analyzer\": \"my_analyzer\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n\r\nGET t/_validate/query?explain\r\n{\r\n  \"query\": {\r\n    \"match\": {\r\n      \"text\": {\r\n        \"query\": \"my shoerack\",\r\n        \"operator\": \"and\"\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThe explanation returned by the above is:\r\n\r\n    +text:my +Synonym(text:rack text:shoe text:shoerack)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/298160923","html_url":"https://github.com/elastic/elasticsearch/issues/8235#issuecomment-298160923","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8235","id":298160923,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODE2MDkyMw==","user":{"login":"gbhatia81","id":12962265,"node_id":"MDQ6VXNlcjEyOTYyMjY1","avatar_url":"https://avatars3.githubusercontent.com/u/12962265?v=4","gravatar_id":"","url":"https://api.github.com/users/gbhatia81","html_url":"https://github.com/gbhatia81","followers_url":"https://api.github.com/users/gbhatia81/followers","following_url":"https://api.github.com/users/gbhatia81/following{/other_user}","gists_url":"https://api.github.com/users/gbhatia81/gists{/gist_id}","starred_url":"https://api.github.com/users/gbhatia81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gbhatia81/subscriptions","organizations_url":"https://api.github.com/users/gbhatia81/orgs","repos_url":"https://api.github.com/users/gbhatia81/repos","events_url":"https://api.github.com/users/gbhatia81/events{/privacy}","received_events_url":"https://api.github.com/users/gbhatia81/received_events","type":"User","site_admin":false},"created_at":"2017-04-29T10:31:57Z","updated_at":"2017-04-29T10:32:52Z","author_association":"NONE","body":"I am not sure if it is still working as expected. As explained in _validate query, lucene is still trying to search for following\r\n\"my\" AND (\"rack\" OR \" shoe\" OR \"shoerack\")\r\nWhat was originally needed and is still a requirement in my case is a way to do following\r\n\"my\" AND (\"shoerack\" OR (\"shoe\" AND \"rack\"))\r\n\r\nThis should be a common use case for others as well. When just \"Shoerack\" is queried , system is going and finding all results that even contain just shoe or just rack, which in my opinion, not good. There should be a way to force AND query for decompounded words.\r\n\r\n@clintongormley  - i am not sure if issue should be closed.\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/304338115","html_url":"https://github.com/elastic/elasticsearch/issues/8235#issuecomment-304338115","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8235","id":304338115,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDMzODExNQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-05-26T17:11:12Z","updated_at":"2017-05-26T17:11:12Z","author_association":"CONTRIBUTOR","body":"@gbhatia81 the point of decompounding words is to look for some of the sub-words within a compound word.  In a language that uses compound words, you wouldn't have `shoerack` or `shoe rack`, just `shoerack`.  ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/341507885","html_url":"https://github.com/elastic/elasticsearch/issues/8235#issuecomment-341507885","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8235","id":341507885,"node_id":"MDEyOklzc3VlQ29tbWVudDM0MTUwNzg4NQ==","user":{"login":"kkraus","id":1324560,"node_id":"MDQ6VXNlcjEzMjQ1NjA=","avatar_url":"https://avatars2.githubusercontent.com/u/1324560?v=4","gravatar_id":"","url":"https://api.github.com/users/kkraus","html_url":"https://github.com/kkraus","followers_url":"https://api.github.com/users/kkraus/followers","following_url":"https://api.github.com/users/kkraus/following{/other_user}","gists_url":"https://api.github.com/users/kkraus/gists{/gist_id}","starred_url":"https://api.github.com/users/kkraus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkraus/subscriptions","organizations_url":"https://api.github.com/users/kkraus/orgs","repos_url":"https://api.github.com/users/kkraus/repos","events_url":"https://api.github.com/users/kkraus/events{/privacy}","received_events_url":"https://api.github.com/users/kkraus/received_events","type":"User","site_admin":false},"created_at":"2017-11-02T17:59:25Z","updated_at":"2017-11-02T17:59:25Z","author_association":"NONE","body":"@clintongormley I'm running into a similar issue (using 5.6.3) and it a very valid use-case for Nike. Users will type \"airmax\" or \"air max\" or \"#BeTrue\" or \"be true\" and we need the query to executed as shown above in the original thread, basically equating the terms. The synonym maintenance would be considerable so I'm wondering if there are any other recommended approaches to make this type of query possible? (\"airmax\" OR \" air\" AND \"max\")","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/341672842","html_url":"https://github.com/elastic/elasticsearch/issues/8235#issuecomment-341672842","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8235","id":341672842,"node_id":"MDEyOklzc3VlQ29tbWVudDM0MTY3Mjg0Mg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-11-03T10:55:51Z","updated_at":"2017-11-03T10:55:51Z","author_association":"CONTRIBUTOR","body":"@kkraus synonyms are the way to go here","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/341672934","html_url":"https://github.com/elastic/elasticsearch/issues/8235#issuecomment-341672934","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8235","id":341672934,"node_id":"MDEyOklzc3VlQ29tbWVudDM0MTY3MjkzNA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-11-03T10:56:16Z","updated_at":"2017-11-03T10:56:16Z","author_association":"CONTRIBUTOR","body":"Or possibly shingles","performed_via_github_app":null}]