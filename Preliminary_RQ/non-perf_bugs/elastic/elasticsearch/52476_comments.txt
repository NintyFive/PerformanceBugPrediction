[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/587472314","html_url":"https://github.com/elastic/elasticsearch/issues/52476#issuecomment-587472314","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52476","id":587472314,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzQ3MjMxNA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-02-18T13:57:39Z","updated_at":"2020-02-18T13:57:39Z","author_association":"COLLABORATOR","body":"Pinging @elastic/ml-core (:ml)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/587473598","html_url":"https://github.com/elastic/elasticsearch/issues/52476#issuecomment-587473598","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52476","id":587473598,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzQ3MzU5OA==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2020-02-18T14:00:39Z","updated_at":"2020-02-18T14:00:39Z","author_association":"CONTRIBUTOR","body":"The pattern for handling multiple state documents can be copied from the way categorizer state is managed.  Categorizer state is like data frame analytics state in that each persist overwrites the previous one.  (Anomaly detector state is different in that each persist is indexed as a separate model snapshot, so the pattern for handling multiple documents cannot be copied from anomaly detector state.)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/692555816","html_url":"https://github.com/elastic/elasticsearch/issues/52476#issuecomment-692555816","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52476","id":692555816,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MjU1NTgxNg==","user":{"login":"dimitris-athanasiou","id":9351617,"node_id":"MDQ6VXNlcjkzNTE2MTc=","avatar_url":"https://avatars3.githubusercontent.com/u/9351617?v=4","gravatar_id":"","url":"https://api.github.com/users/dimitris-athanasiou","html_url":"https://github.com/dimitris-athanasiou","followers_url":"https://api.github.com/users/dimitris-athanasiou/followers","following_url":"https://api.github.com/users/dimitris-athanasiou/following{/other_user}","gists_url":"https://api.github.com/users/dimitris-athanasiou/gists{/gist_id}","starred_url":"https://api.github.com/users/dimitris-athanasiou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dimitris-athanasiou/subscriptions","organizations_url":"https://api.github.com/users/dimitris-athanasiou/orgs","repos_url":"https://api.github.com/users/dimitris-athanasiou/repos","events_url":"https://api.github.com/users/dimitris-athanasiou/events{/privacy}","received_events_url":"https://api.github.com/users/dimitris-athanasiou/received_events","type":"User","site_admin":false},"created_at":"2020-09-15T08:28:22Z","updated_at":"2020-09-15T08:28:22Z","author_association":"CONTRIBUTOR","body":"> Categorizer state is like data frame analytics state in that each persist overwrites the previous one.\r\n\r\nFor this to work for data frame analytics we have to be certain that the newer state can never be less documents than a prior state. Is that a correct assumption @tveasey ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/692573657","html_url":"https://github.com/elastic/elasticsearch/issues/52476#issuecomment-692573657","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52476","id":692573657,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MjU3MzY1Nw==","user":{"login":"tveasey","id":7591487,"node_id":"MDQ6VXNlcjc1OTE0ODc=","avatar_url":"https://avatars3.githubusercontent.com/u/7591487?v=4","gravatar_id":"","url":"https://api.github.com/users/tveasey","html_url":"https://github.com/tveasey","followers_url":"https://api.github.com/users/tveasey/followers","following_url":"https://api.github.com/users/tveasey/following{/other_user}","gists_url":"https://api.github.com/users/tveasey/gists{/gist_id}","starred_url":"https://api.github.com/users/tveasey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tveasey/subscriptions","organizations_url":"https://api.github.com/users/tveasey/orgs","repos_url":"https://api.github.com/users/tveasey/repos","events_url":"https://api.github.com/users/tveasey/events{/privacy}","received_events_url":"https://api.github.com/users/tveasey/received_events","type":"User","site_admin":false},"created_at":"2020-09-15T08:58:27Z","updated_at":"2020-09-15T08:58:27Z","author_association":"CONTRIBUTOR","body":"As discussed offline, we can't guaranty that the state grows monotonically during training.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/692620564","html_url":"https://github.com/elastic/elasticsearch/issues/52476#issuecomment-692620564","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52476","id":692620564,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MjYyMDU2NA==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2020-09-15T10:17:18Z","updated_at":"2020-09-15T10:17:18Z","author_association":"CONTRIBUTOR","body":"> For this to work for data frame analytics we have to be certain that the newer state can never be less documents than a prior state.\r\n\r\nThis isn’t true. The last document ends with `”eos”: true` and the C++ stops reading after this. That functionality was added in the Prelert days for this exact case of the number of state documents going down. The extra document will still exist in the index, but won’t be decompressed by the C++.\r\n\r\nWe might need to change the C++ to read and discard everything after the `”eos”: true` to avoid blocking the Java thread (if that’s not done already). In the Prelert days the documents were pulled from the C++ rather than pushed from the Java, so the C++ just wouldn’t pull the leftover document.","performed_via_github_app":null}]