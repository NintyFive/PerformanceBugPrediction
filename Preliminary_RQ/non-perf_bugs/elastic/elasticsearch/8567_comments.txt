[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63819649","html_url":"https://github.com/elastic/elasticsearch/issues/8567#issuecomment-63819649","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8567","id":63819649,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODE5NjQ5","user":{"login":"ZeAleks","id":4868394,"node_id":"MDQ6VXNlcjQ4NjgzOTQ=","avatar_url":"https://avatars3.githubusercontent.com/u/4868394?v=4","gravatar_id":"","url":"https://api.github.com/users/ZeAleks","html_url":"https://github.com/ZeAleks","followers_url":"https://api.github.com/users/ZeAleks/followers","following_url":"https://api.github.com/users/ZeAleks/following{/other_user}","gists_url":"https://api.github.com/users/ZeAleks/gists{/gist_id}","starred_url":"https://api.github.com/users/ZeAleks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ZeAleks/subscriptions","organizations_url":"https://api.github.com/users/ZeAleks/orgs","repos_url":"https://api.github.com/users/ZeAleks/repos","events_url":"https://api.github.com/users/ZeAleks/events{/privacy}","received_events_url":"https://api.github.com/users/ZeAleks/received_events","type":"User","site_admin":false},"created_at":"2014-11-20T14:56:11Z","updated_at":"2014-11-20T14:56:11Z","author_association":"NONE","body":"Hello Analect,\n\nI'm facing some performance issue with 1.4 version of Elasticsearch. So I was wondering if I should rollback the installation.\nBut I red that : http://www.elasticsearch.org/guide/en/elasticsearch/reference/1.4/indices-upgrade.html\n1.4 is using new version of lucene. So, maybe, new documents that you inserted has new formats and cannot be used anymore with 1.3 version of Elasticsearch.\n\nIf this is the reason for your exception, you have two choices :\n- run 1.4 and try to correct what can be\n- reindex everything\n\nKeep us in touch.\n\nGood luck.\nAlek\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63826491","html_url":"https://github.com/elastic/elasticsearch/issues/8567#issuecomment-63826491","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8567","id":63826491,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODI2NDkx","user":{"login":"Analect","id":4063815,"node_id":"MDQ6VXNlcjQwNjM4MTU=","avatar_url":"https://avatars2.githubusercontent.com/u/4063815?v=4","gravatar_id":"","url":"https://api.github.com/users/Analect","html_url":"https://github.com/Analect","followers_url":"https://api.github.com/users/Analect/followers","following_url":"https://api.github.com/users/Analect/following{/other_user}","gists_url":"https://api.github.com/users/Analect/gists{/gist_id}","starred_url":"https://api.github.com/users/Analect/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Analect/subscriptions","organizations_url":"https://api.github.com/users/Analect/orgs","repos_url":"https://api.github.com/users/Analect/repos","events_url":"https://api.github.com/users/Analect/events{/privacy}","received_events_url":"https://api.github.com/users/Analect/received_events","type":"User","site_admin":false},"created_at":"2014-11-20T15:37:52Z","updated_at":"2014-11-20T15:37:52Z","author_association":"NONE","body":"@ZeAleks \nThanks for your response.\nI don't think I'm affected by what you describe ... as I'm even having this issue on a blank database when I first try to start up a version of ES. I'm not even trying to move around an existing database between versions ... which is why I'm puzzled by why one version of ES (ie. 1.3.5) would want to be referencing a _river that had been used in testing another version (1.4.0).  The only explanation I can think of is that it somehow pulled down some reference to the river from a running mongodb replica-set, but I don't know enough about how the mechanism works to be sure if that is a possibility. Even with that replicaset closed down, the same Exception was occurring on the startup of version 1.3.5, where the 'head' plugin is left hanging.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63827473","html_url":"https://github.com/elastic/elasticsearch/issues/8567#issuecomment-63827473","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8567","id":63827473,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODI3NDcz","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-11-20T15:43:31Z","updated_at":"2014-11-20T15:43:31Z","author_association":"CONTRIBUTOR","body":"@Analect do you have the 1.4 instance still running by any chance? \n\n@ZeAleks what kind of perf issues are you seeing?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63829456","html_url":"https://github.com/elastic/elasticsearch/issues/8567#issuecomment-63829456","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8567","id":63829456,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODI5NDU2","user":{"login":"ZeAleks","id":4868394,"node_id":"MDQ6VXNlcjQ4NjgzOTQ=","avatar_url":"https://avatars3.githubusercontent.com/u/4868394?v=4","gravatar_id":"","url":"https://api.github.com/users/ZeAleks","html_url":"https://github.com/ZeAleks","followers_url":"https://api.github.com/users/ZeAleks/followers","following_url":"https://api.github.com/users/ZeAleks/following{/other_user}","gists_url":"https://api.github.com/users/ZeAleks/gists{/gist_id}","starred_url":"https://api.github.com/users/ZeAleks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ZeAleks/subscriptions","organizations_url":"https://api.github.com/users/ZeAleks/orgs","repos_url":"https://api.github.com/users/ZeAleks/repos","events_url":"https://api.github.com/users/ZeAleks/events{/privacy}","received_events_url":"https://api.github.com/users/ZeAleks/received_events","type":"User","site_admin":false},"created_at":"2014-11-20T15:54:54Z","updated_at":"2014-11-20T15:54:54Z","author_association":"NONE","body":"@s1monw Here is the corresponding post for my perf issues : https://github.com/elasticsearch/elasticsearch/issues/8553\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63829516","html_url":"https://github.com/elastic/elasticsearch/issues/8567#issuecomment-63829516","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8567","id":63829516,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODI5NTE2","user":{"login":"Analect","id":4063815,"node_id":"MDQ6VXNlcjQwNjM4MTU=","avatar_url":"https://avatars2.githubusercontent.com/u/4063815?v=4","gravatar_id":"","url":"https://api.github.com/users/Analect","html_url":"https://github.com/Analect","followers_url":"https://api.github.com/users/Analect/followers","following_url":"https://api.github.com/users/Analect/following{/other_user}","gists_url":"https://api.github.com/users/Analect/gists{/gist_id}","starred_url":"https://api.github.com/users/Analect/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Analect/subscriptions","organizations_url":"https://api.github.com/users/Analect/orgs","repos_url":"https://api.github.com/users/Analect/repos","events_url":"https://api.github.com/users/Analect/events{/privacy}","received_events_url":"https://api.github.com/users/Analect/received_events","type":"User","site_admin":false},"created_at":"2014-11-20T15:55:12Z","updated_at":"2014-11-20T15:55:12Z","author_association":"NONE","body":"@s1monw No, I make sure I only have a single version running at any time to avoid any possibility of conflicts. For the 1.4 version, because I was having a problem getting that running again (I can't recall the detail .. but it might have been something related to the river_mongodb too), I ended up deleting the elasticsearch folder under /data, in expectation that this would clear things up and allow me to start with a new blank database. It obviously hadn't the desired effect ... and then I had this related problem in 1.3.5, where it was looking for a _river definition in that folder I had deleted under the 1.4 installation ... eventhough I had only installed 1.3.5 and hadn't even added any mappings to it yet ... and certainly not any _river mappings.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63832138","html_url":"https://github.com/elastic/elasticsearch/issues/8567#issuecomment-63832138","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8567","id":63832138,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODMyMTM4","user":{"login":"Analect","id":4063815,"node_id":"MDQ6VXNlcjQwNjM4MTU=","avatar_url":"https://avatars2.githubusercontent.com/u/4063815?v=4","gravatar_id":"","url":"https://api.github.com/users/Analect","html_url":"https://github.com/Analect","followers_url":"https://api.github.com/users/Analect/followers","following_url":"https://api.github.com/users/Analect/following{/other_user}","gists_url":"https://api.github.com/users/Analect/gists{/gist_id}","starred_url":"https://api.github.com/users/Analect/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Analect/subscriptions","organizations_url":"https://api.github.com/users/Analect/orgs","repos_url":"https://api.github.com/users/Analect/repos","events_url":"https://api.github.com/users/Analect/events{/privacy}","received_events_url":"https://api.github.com/users/Analect/received_events","type":"User","site_admin":false},"created_at":"2014-11-20T16:09:36Z","updated_at":"2014-11-20T16:09:36Z","author_association":"NONE","body":"@s1monw This is odd.\nI had completely removed ES 1.4.0 from my machine\nI downloaded a new version of the tar and expanded it.\nThe ES starts fine:\n{\n  \"status\" : 200,\n  \"name\" : \"Mr. Justice\",\n  \"cluster_name\" : \"elasticsearch\",\n  \"version\" : {\n    \"number\" : \"1.4.0\",\n    \"build_hash\" : \"bc94bd81298f81c656893ab1ddddd30a99356066\",\n    \"build_timestamp\" : \"2014-11-05T14:26:12Z\",\n    \"build_snapshot\" : false,\n    \"lucene_version\" : \"4.10.2\"\n  },\n  \"tagline\" : \"You Know, for Search\"\n}\n\nHowever, 'head' is not working ... for this reason, it appears:\nhttps://github.com/mobz/elasticsearch-head/issues/170\n\nWhat I find really odd though, is that when I try to navigate to 'head' (not yet fixing it as per the link above), I still get a reference to a _river (see last line of logs below) ... eventhough on this new installation of version 1.4, the only plugin I have installed is 'head'.\n\n[2014-11-20 08:06:13,551][INFO ][node                     ] [Louise Mason] version[1.4.0], pid[8512], build[bc94bd8/2014-11-05T14:26:12Z]\n[2014-11-20 08:06:13,552][INFO ][node                     ] [Louise Mason] initializing ...\n[2014-11-20 08:06:13,556][INFO ][plugins                  ] [Louise Mason] loaded [], sites [head]\n[2014-11-20 08:06:15,541][INFO ][node                     ] [Louise Mason] initialized\n[2014-11-20 08:06:15,542][INFO ][node                     ] [Louise Mason] starting ...\n[2014-11-20 08:06:15,631][INFO ][transport                ] [Louise Mason] bound_address {inet[/0:0:0:0:0:0:0:0:9301]}, publish_address {inet[/10.211.55.6:9301]}\n[2014-11-20 08:06:15,642][INFO ][discovery                ] [Louise Mason] elasticsearch/jNaGt-FdSLOtJzOrzbVF8A\n[2014-11-20 08:06:18,685][INFO ][cluster.service          ] [Louise Mason] detected_master [DJ][V3oubzV6THmie2DR5LSReg][ubuntu][inet[/10.211.55.6:9300]], added {[DJ][V3oubzV6THmie2DR5LSReg][ubuntu][inet[/10.211.55.6:9300]],}, reason: zen-disco-receive(from master [[DJ][V3oubzV6THmie2DR5LSReg][ubuntu][inet[/10.211.55.6:9300]]])\n[2014-11-20 08:06:18,721][INFO ][http                     ] [Louise Mason] bound_address {inet[/0:0:0:0:0:0:0:0:9200]}, publish_address {inet[/10.211.55.6:9200]}\n[2014-11-20 08:06:18,722][INFO ][node                     ] [Louise Mason] started\n[2014-11-20 08:06:25,859][DEBUG][action.admin.cluster.node.stats] [Louise Mason] failed to execute on node [V3oubzV6THmie2DR5LSReg]\norg.elasticsearch.transport.RemoteTransportException: [DJ][inet[/10.211.55.6:9300]][cluster:monitor/nodes/stats[n]]\nCaused by: org.elasticsearch.ElasticsearchException: io exception while building 'store stats'\n    at org.elasticsearch.index.shard.service.InternalIndexShard.storeStats(InternalIndexShard.java:542)\n    at org.elasticsearch.action.admin.indices.stats.CommonStats.<init>(CommonStats.java:134)\n    at org.elasticsearch.action.admin.indices.stats.ShardStats.<init>(ShardStats.java:49)\n    at org.elasticsearch.indices.InternalIndicesService.stats(InternalIndicesService.java:212)\n    at org.elasticsearch.node.service.NodeService.stats(NodeService.java:156)\n    at org.elasticsearch.action.admin.cluster.node.stats.TransportNodesStatsAction.nodeOperation(TransportNodesStatsAction.java:96)\n    at org.elasticsearch.action.admin.cluster.node.stats.TransportNodesStatsAction.nodeOperation(TransportNodesStatsAction.java:44)\n    at org.elasticsearch.action.support.nodes.TransportNodesOperationAction$NodeTransportHandler.messageReceived(TransportNodesOperationAction.java:278)\n    at org.elasticsearch.action.support.nodes.TransportNodesOperationAction$NodeTransportHandler.messageReceived(TransportNodesOperationAction.java:269)\n    at org.elasticsearch.transport.netty.MessageChannelHandler$RequestHandler.run(MessageChannelHandler.java:275)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:744)\nCaused by: org.apache.lucene.store.NoSuchDirectoryException: directory '/home/mccoole/Development/Tools/ES/elasticsearch-1.4.0/data/elasticsearch/nodes/0/indices/_river/0/index' does not exist\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63835443","html_url":"https://github.com/elastic/elasticsearch/issues/8567#issuecomment-63835443","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8567","id":63835443,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODM1NDQz","user":{"login":"Analect","id":4063815,"node_id":"MDQ6VXNlcjQwNjM4MTU=","avatar_url":"https://avatars2.githubusercontent.com/u/4063815?v=4","gravatar_id":"","url":"https://api.github.com/users/Analect","html_url":"https://github.com/Analect","followers_url":"https://api.github.com/users/Analect/followers","following_url":"https://api.github.com/users/Analect/following{/other_user}","gists_url":"https://api.github.com/users/Analect/gists{/gist_id}","starred_url":"https://api.github.com/users/Analect/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Analect/subscriptions","organizations_url":"https://api.github.com/users/Analect/orgs","repos_url":"https://api.github.com/users/Analect/repos","events_url":"https://api.github.com/users/Analect/events{/privacy}","received_events_url":"https://api.github.com/users/Analect/received_events","type":"User","site_admin":false},"created_at":"2014-11-20T16:27:40Z","updated_at":"2014-11-20T16:27:40Z","author_association":"NONE","body":"@s1monw \nFYI, I made the fix for 'head', as per issue 170 linked above.  However, head still won't work and so it might be related to the NoSuchDirectoryException I'm having. Am I right in understanding that there's a separate lucene instance associated with each ES database?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63950766","html_url":"https://github.com/elastic/elasticsearch/issues/8567#issuecomment-63950766","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8567","id":63950766,"node_id":"MDEyOklzc3VlQ29tbWVudDYzOTUwNzY2","user":{"login":"Analect","id":4063815,"node_id":"MDQ6VXNlcjQwNjM4MTU=","avatar_url":"https://avatars2.githubusercontent.com/u/4063815?v=4","gravatar_id":"","url":"https://api.github.com/users/Analect","html_url":"https://github.com/Analect","followers_url":"https://api.github.com/users/Analect/followers","following_url":"https://api.github.com/users/Analect/following{/other_user}","gists_url":"https://api.github.com/users/Analect/gists{/gist_id}","starred_url":"https://api.github.com/users/Analect/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Analect/subscriptions","organizations_url":"https://api.github.com/users/Analect/orgs","repos_url":"https://api.github.com/users/Analect/repos","events_url":"https://api.github.com/users/Analect/events{/privacy}","received_events_url":"https://api.github.com/users/Analect/received_events","type":"User","site_admin":false},"created_at":"2014-11-21T10:14:48Z","updated_at":"2014-11-21T10:14:48Z","author_association":"NONE","body":"@s1monw \nAny suggestions how I can fix this org.apache.lucene.store.NoSuchDirectoryException. I'm not concerned with losing data, as this was a blank database ... I just want to be able to get ES 1.4 up and running again and visible on head ... but somehow (I think!) this directory exception is preventing that on my linux machine. As explained above, I've tried a fresh install, but that doesn't appear to fix, as it still searches for this rogue _river/0/index directory that was deleted long ago. On my windows machine, the 1.4 install with the CORS fix in the *.yml allows me to get head working, so I'm stumped as to why I can't get the linux one working.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64196324","html_url":"https://github.com/elastic/elasticsearch/issues/8567#issuecomment-64196324","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8567","id":64196324,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MTk2MzI0","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-11-24T13:54:53Z","updated_at":"2014-11-24T13:54:53Z","author_association":"CONTRIBUTOR","body":"@analect you are definitely running more than one node:\n\n```\n[2014-11-20 08:06:18,685][INFO ][cluster.service ] [Louise Mason] detected_master [DJ]\n```\n\nand they're running on the same machine. You can see that this new node started with ports 9301/9201, not 9300/9200\n\nI suggest you do a `killall java` and start again :)\n","performed_via_github_app":null}]