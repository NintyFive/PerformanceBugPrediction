[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/122273387","html_url":"https://github.com/elastic/elasticsearch/issues/12278#issuecomment-122273387","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12278","id":122273387,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMjI3MzM4Nw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-07-17T13:20:51Z","updated_at":"2015-07-17T13:20:51Z","author_association":"CONTRIBUTOR","body":"@cbuescher could you take a look at this one?  I think the docs need some updating - I'm confused as to best way to do something like this.\n\nthanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/123288315","html_url":"https://github.com/elastic/elasticsearch/issues/12278#issuecomment-123288315","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12278","id":123288315,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMzI4ODMxNQ==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2015-07-21T12:23:45Z","updated_at":"2015-07-21T12:23:45Z","author_association":"MEMBER","body":"I just verified this on 1.7. and the result still looks like @feltnerm describes it above. Might be a bug, but looking at the code, at first glance it looks like timezone should already be applied to `extended_bounds`. Will have to look into this more deeply.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/123288460","html_url":"https://github.com/elastic/elasticsearch/issues/12278#issuecomment-123288460","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12278","id":123288460,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMzI4ODQ2MA==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2015-07-21T12:24:38Z","updated_at":"2015-07-21T12:24:38Z","author_association":"MEMBER","body":"@feltnerm which version of ES were you using for the output you described above?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/123364390","html_url":"https://github.com/elastic/elasticsearch/issues/12278#issuecomment-123364390","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12278","id":123364390,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMzM2NDM5MA==","user":{"login":"feltnerm","id":146949,"node_id":"MDQ6VXNlcjE0Njk0OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/146949?v=4","gravatar_id":"","url":"https://api.github.com/users/feltnerm","html_url":"https://github.com/feltnerm","followers_url":"https://api.github.com/users/feltnerm/followers","following_url":"https://api.github.com/users/feltnerm/following{/other_user}","gists_url":"https://api.github.com/users/feltnerm/gists{/gist_id}","starred_url":"https://api.github.com/users/feltnerm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/feltnerm/subscriptions","organizations_url":"https://api.github.com/users/feltnerm/orgs","repos_url":"https://api.github.com/users/feltnerm/repos","events_url":"https://api.github.com/users/feltnerm/events{/privacy}","received_events_url":"https://api.github.com/users/feltnerm/received_events","type":"User","site_admin":false},"created_at":"2015-07-21T15:09:01Z","updated_at":"2015-07-21T15:09:01Z","author_association":"NONE","body":"@cbuescher the above is from 1.5.2, but I have tried with 1.6.x as well. Can try on 1.6.x or 1.7.x if needed.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/125615089","html_url":"https://github.com/elastic/elasticsearch/issues/12278#issuecomment-125615089","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12278","id":125615089,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNTYxNTA4OQ==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2015-07-28T13:43:16Z","updated_at":"2015-07-28T13:43:16Z","author_association":"MEMBER","body":"Some preliminary findings: I was able to dig a bit deeper into this, and could reproduce the behaviour on master, haven't found a way to fix this though. \nThe root problem seems to be that the extended bounds datemath expression is first evaluated without considering the timezone (so the \"/d\" day rounding that comes with the datemath expression results in UTC day changes). Later on, the time zone rounding of the aggregation is applied, but since we have specified one hour intervals here, the min/max of the extended bounds doesn't change. Before jumping to a quick fix here we need to rethink what the timezone parameter in this type of aggregation should apply to, if it should also affect date math expressions like \"now/d\" or if this has undesired side effects. \n","performed_via_github_app":null}]