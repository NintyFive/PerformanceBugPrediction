[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/165798147","html_url":"https://github.com/elastic/elasticsearch/issues/15538#issuecomment-165798147","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15538","id":165798147,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NTc5ODE0Nw==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-12-18T14:59:31Z","updated_at":"2015-12-18T14:59:31Z","author_association":"CONTRIBUTOR","body":"Can you include all threads in the thread dump?\n\nSomehow your shard is scheduled a truly insane number of merges (655K+) over time ... have you changed any settings from defaults?  How are you using ES, e.g. are you asking ES to refresh or flush frequently?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/166188487","html_url":"https://github.com/elastic/elasticsearch/issues/15538#issuecomment-166188487","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15538","id":166188487,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NjE4ODQ4Nw==","user":{"login":"makeyang","id":13898618,"node_id":"MDQ6VXNlcjEzODk4NjE4","avatar_url":"https://avatars2.githubusercontent.com/u/13898618?v=4","gravatar_id":"","url":"https://api.github.com/users/makeyang","html_url":"https://github.com/makeyang","followers_url":"https://api.github.com/users/makeyang/followers","following_url":"https://api.github.com/users/makeyang/following{/other_user}","gists_url":"https://api.github.com/users/makeyang/gists{/gist_id}","starred_url":"https://api.github.com/users/makeyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/makeyang/subscriptions","organizations_url":"https://api.github.com/users/makeyang/orgs","repos_url":"https://api.github.com/users/makeyang/repos","events_url":"https://api.github.com/users/makeyang/events{/privacy}","received_events_url":"https://api.github.com/users/makeyang/received_events","type":"User","site_admin":false},"created_at":"2015-12-21T03:27:21Z","updated_at":"2015-12-21T03:27:21Z","author_association":"CONTRIBUTOR","body":"@mikemccand  sorry for late replay. it was the weekend last 2 days and I happened can't touch internet.\nthe full thread dump is below link:\nhttps://github.com/makeyang/grocery/blob/master/td.txt\nYes, I changed some settings from default:\nindex.translog.sync_interval: 30s\nindex.translog.durability: async\nindices.memory.index_buffer_size: 40%\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/166398703","html_url":"https://github.com/elastic/elasticsearch/issues/15538#issuecomment-166398703","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15538","id":166398703,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NjM5ODcwMw==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-12-21T19:35:32Z","updated_at":"2015-12-21T19:35:32Z","author_association":"CONTRIBUTOR","body":"I see way too many bulk indexing threads (stalled, because merging can't keep up).\n\nDid you increase your bulk thread pool size to >= 200?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/166478716","html_url":"https://github.com/elastic/elasticsearch/issues/15538#issuecomment-166478716","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15538","id":166478716,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NjQ3ODcxNg==","user":{"login":"makeyang","id":13898618,"node_id":"MDQ6VXNlcjEzODk4NjE4","avatar_url":"https://avatars2.githubusercontent.com/u/13898618?v=4","gravatar_id":"","url":"https://api.github.com/users/makeyang","html_url":"https://github.com/makeyang","followers_url":"https://api.github.com/users/makeyang/followers","following_url":"https://api.github.com/users/makeyang/following{/other_user}","gists_url":"https://api.github.com/users/makeyang/gists{/gist_id}","starred_url":"https://api.github.com/users/makeyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/makeyang/subscriptions","organizations_url":"https://api.github.com/users/makeyang/orgs","repos_url":"https://api.github.com/users/makeyang/repos","events_url":"https://api.github.com/users/makeyang/events{/privacy}","received_events_url":"https://api.github.com/users/makeyang/received_events","type":"User","site_admin":false},"created_at":"2015-12-22T02:04:15Z","updated_at":"2015-12-22T02:04:15Z","author_association":"CONTRIBUTOR","body":"@mikemccand \nyes, bulk thread pool size to = 200\n\nour situation is below:\nmany client try to write to ES and concurrency is high, so I try to handle this high concurrency  and modified the thread pool size and queue size.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/170385319","html_url":"https://github.com/elastic/elasticsearch/issues/15538#issuecomment-170385319","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15538","id":170385319,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDM4NTMxOQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-01-10T19:55:40Z","updated_at":"2016-01-10T19:55:40Z","author_association":"CONTRIBUTOR","body":"@makeyang don't increase the number of bulk threads like that - you're overloading the system on one side and paying for it somewhere else.  You won't be able to set such high values going forward. See https://github.com/elastic/elasticsearch/pull/15585\n\nIf your hardware isn't keeping up with your requirements, you need more hardware\n","performed_via_github_app":null}]