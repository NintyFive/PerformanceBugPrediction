{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/41097","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41097/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41097/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41097/events","html_url":"https://github.com/elastic/elasticsearch/issues/41097","id":431768234,"node_id":"MDU6SXNzdWU0MzE3NjgyMzQ=","number":41097,"title":"Query Terms Null or []","user":{"login":"EliuFlorez","id":784787,"node_id":"MDQ6VXNlcjc4NDc4Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/784787?v=4","gravatar_id":"","url":"https://api.github.com/users/EliuFlorez","html_url":"https://github.com/EliuFlorez","followers_url":"https://api.github.com/users/EliuFlorez/followers","following_url":"https://api.github.com/users/EliuFlorez/following{/other_user}","gists_url":"https://api.github.com/users/EliuFlorez/gists{/gist_id}","starred_url":"https://api.github.com/users/EliuFlorez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EliuFlorez/subscriptions","organizations_url":"https://api.github.com/users/EliuFlorez/orgs","repos_url":"https://api.github.com/users/EliuFlorez/repos","events_url":"https://api.github.com/users/EliuFlorez/events{/privacy}","received_events_url":"https://api.github.com/users/EliuFlorez/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-04-10T23:43:01Z","updated_at":"2019-04-11T00:38:07Z","closed_at":"2019-04-11T00:38:07Z","author_association":"NONE","active_lock_reason":null,"body":"Hi guys, you know I have a problem with a query in \"Terms\" where the query is:\r\n\r\n```\r\nGET /user/_search\r\n{\r\n  \"query\": {\r\n    \"terms\" : { \r\n      \"user\" : [\"user-1\"]\r\n    }\r\n  }\r\n}\r\n```\r\nsomething so simple but it does not return anything. I put an example of index and response.\r\n\r\nMapper:\r\n```\r\nPUT /user/_doc/1\r\n{\r\n  \"user\" : \"user-1\"\r\n}\r\n\r\nPUT /user/_doc/2\r\n{\r\n  \"user\" : \"user-2\"\r\n}\r\n\r\nPUT /user/_doc/3\r\n{\r\n  \"user\" : \"user-3\"\r\n}\r\n```\r\nQuery Failed:\r\n```\r\nGET /user/_search\r\n{\r\n  \"query\": {\r\n    \"terms\" : { \r\n      \"user\" : [\"user-1\"]\r\n    }\r\n  }\r\n}\r\n```\r\nRespose Failed:\r\n```\r\n{\r\n  \"took\" : 0,\r\n  \"timed_out\" : false,\r\n  \"_shards\" : {\r\n    \"total\" : 5,\r\n    \"successful\" : 5,\r\n    \"skipped\" : 0,\r\n    \"failed\" : 0\r\n  },\r\n  \"hits\" : {\r\n    \"total\" : 0,\r\n    \"max_score\" : null,\r\n    \"hits\" : [ ]\r\n  }\r\n}\r\n```\r\nWhen removing \"-\" from terms, the result is returned but I need it to be exact, since it will be used for location queries where it must be exact, because if only \"california\" is indicated, it can return results from the US and California. Mexico.\r\n\r\nQuery Success:\r\n```\r\nGET /user/_search\r\n{\r\n  \"query\": {\r\n    \"terms\" : { \r\n      \"user\" : [\"1\"]\r\n    }\r\n  }\r\n}\r\n```\r\nResponse Success:\r\n```\r\n{\r\n  \"took\" : 0,\r\n  \"timed_out\" : false,\r\n  \"_shards\" : {\r\n    \"total\" : 5,\r\n    \"successful\" : 5,\r\n    \"skipped\" : 0,\r\n    \"failed\" : 0\r\n  },\r\n  \"hits\" : {\r\n    \"total\" : 1,\r\n    \"max_score\" : 1.0,\r\n    \"hits\" : [\r\n      {\r\n        \"_index\" : \"user\",\r\n        \"_type\" : \"_doc\",\r\n        \"_id\" : \"1\",\r\n        \"_score\" : 1.0,\r\n        \"_source\" : {\r\n          \"user\" : \"user-1\"\r\n        }\r\n      }\r\n    ]\r\n  }\r\n}\r\n```\r\nI use Terms since you can specify several locations in the same query.\r\nI hope you help me.\r\nGreetings.","closed_by":{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false},"performed_via_github_app":null}