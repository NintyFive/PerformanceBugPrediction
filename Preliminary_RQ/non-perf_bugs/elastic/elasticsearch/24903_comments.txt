[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/359625444","html_url":"https://github.com/elastic/elasticsearch/issues/24903#issuecomment-359625444","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24903","id":359625444,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTYyNTQ0NA==","user":{"login":"adamhadani","id":139888,"node_id":"MDQ6VXNlcjEzOTg4OA==","avatar_url":"https://avatars0.githubusercontent.com/u/139888?v=4","gravatar_id":"","url":"https://api.github.com/users/adamhadani","html_url":"https://github.com/adamhadani","followers_url":"https://api.github.com/users/adamhadani/followers","following_url":"https://api.github.com/users/adamhadani/following{/other_user}","gists_url":"https://api.github.com/users/adamhadani/gists{/gist_id}","starred_url":"https://api.github.com/users/adamhadani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adamhadani/subscriptions","organizations_url":"https://api.github.com/users/adamhadani/orgs","repos_url":"https://api.github.com/users/adamhadani/repos","events_url":"https://api.github.com/users/adamhadani/events{/privacy}","received_events_url":"https://api.github.com/users/adamhadani/received_events","type":"User","site_admin":false},"created_at":"2018-01-23T00:30:40Z","updated_at":"2018-01-23T00:32:37Z","author_association":"NONE","body":"Reproduced as well.\r\n\r\nI think expected behavior should be that all things being equal, a result item's score should be the length of the longest \"exact\" matching prefix, *regardless* of fuzziness parameter setting, when that value is higher than `prefix length - fuzziness`\r\n\r\nOne side effect of this is that if I query for `promo` and I have two documents in my index, `prom` and `promo`, the latter should be scored higher and come back as first result (which is more intuitive).\r\n\r\nOne can then control tie breaking or otherwise interacting with this logic using the index-time `weight` as usual","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/374312268","html_url":"https://github.com/elastic/elasticsearch/issues/24903#issuecomment-374312268","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24903","id":374312268,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NDMxMjI2OA==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2018-03-19T18:12:18Z","updated_at":"2018-03-19T18:12:18Z","author_association":"MEMBER","body":"cc @elastic/es-search-aggs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/419832044","html_url":"https://github.com/elastic/elasticsearch/issues/24903#issuecomment-419832044","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24903","id":419832044,"node_id":"MDEyOklzc3VlQ29tbWVudDQxOTgzMjA0NA==","user":{"login":"PepijnDeWachter","id":43132854,"node_id":"MDQ6VXNlcjQzMTMyODU0","avatar_url":"https://avatars0.githubusercontent.com/u/43132854?v=4","gravatar_id":"","url":"https://api.github.com/users/PepijnDeWachter","html_url":"https://github.com/PepijnDeWachter","followers_url":"https://api.github.com/users/PepijnDeWachter/followers","following_url":"https://api.github.com/users/PepijnDeWachter/following{/other_user}","gists_url":"https://api.github.com/users/PepijnDeWachter/gists{/gist_id}","starred_url":"https://api.github.com/users/PepijnDeWachter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PepijnDeWachter/subscriptions","organizations_url":"https://api.github.com/users/PepijnDeWachter/orgs","repos_url":"https://api.github.com/users/PepijnDeWachter/repos","events_url":"https://api.github.com/users/PepijnDeWachter/events{/privacy}","received_events_url":"https://api.github.com/users/PepijnDeWachter/received_events","type":"User","site_admin":false},"created_at":"2018-09-10T08:34:04Z","updated_at":"2018-09-10T08:34:04Z","author_association":"NONE","body":"currently having the exact same issue, any word on this?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/434288952","html_url":"https://github.com/elastic/elasticsearch/issues/24903#issuecomment-434288952","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24903","id":434288952,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDI4ODk1Mg==","user":{"login":"cleentfaar","id":795661,"node_id":"MDQ6VXNlcjc5NTY2MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/795661?v=4","gravatar_id":"","url":"https://api.github.com/users/cleentfaar","html_url":"https://github.com/cleentfaar","followers_url":"https://api.github.com/users/cleentfaar/followers","following_url":"https://api.github.com/users/cleentfaar/following{/other_user}","gists_url":"https://api.github.com/users/cleentfaar/gists{/gist_id}","starred_url":"https://api.github.com/users/cleentfaar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cleentfaar/subscriptions","organizations_url":"https://api.github.com/users/cleentfaar/orgs","repos_url":"https://api.github.com/users/cleentfaar/repos","events_url":"https://api.github.com/users/cleentfaar/events{/privacy}","received_events_url":"https://api.github.com/users/cleentfaar/received_events","type":"User","site_admin":false},"created_at":"2018-10-30T12:52:46Z","updated_at":"2018-10-30T12:52:46Z","author_association":"NONE","body":"Can reproduce using 6.2.3:\r\n```\r\n    \"version\": {\r\n        \"number\": \"6.2.3\",\r\n        \"build_hash\": \"c59ff00\",\r\n        \"build_date\": \"2018-03-13T10:06:29.741383Z\",\r\n        \"build_snapshot\": false,\r\n        \"lucene_version\": \"7.2.1\",\r\n        \"minimum_wire_compatibility_version\": \"5.6.0\",\r\n        \"minimum_index_compatibility_version\": \"5.0.0\"\r\n    },\r\n```\r\n\r\nhope this gets fixed soon as it's becoming a big headache for our stakeholders and users.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/434357331","html_url":"https://github.com/elastic/elasticsearch/issues/24903#issuecomment-434357331","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24903","id":434357331,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDM1NzMzMQ==","user":{"login":"sanderlissenburg","id":3524777,"node_id":"MDQ6VXNlcjM1MjQ3Nzc=","avatar_url":"https://avatars0.githubusercontent.com/u/3524777?v=4","gravatar_id":"","url":"https://api.github.com/users/sanderlissenburg","html_url":"https://github.com/sanderlissenburg","followers_url":"https://api.github.com/users/sanderlissenburg/followers","following_url":"https://api.github.com/users/sanderlissenburg/following{/other_user}","gists_url":"https://api.github.com/users/sanderlissenburg/gists{/gist_id}","starred_url":"https://api.github.com/users/sanderlissenburg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sanderlissenburg/subscriptions","organizations_url":"https://api.github.com/users/sanderlissenburg/orgs","repos_url":"https://api.github.com/users/sanderlissenburg/repos","events_url":"https://api.github.com/users/sanderlissenburg/events{/privacy}","received_events_url":"https://api.github.com/users/sanderlissenburg/received_events","type":"User","site_admin":false},"created_at":"2018-10-30T15:52:22Z","updated_at":"2018-10-30T15:52:22Z","author_association":"NONE","body":"Same here. For instance search for `Bonn`, but `Bohlen` get returned before `Bonn`.\r\n\r\nQuery\r\n```\r\n{\r\n\t\"suggest\": {\r\n\t    \"name-fuzzy-suggest\" : {\r\n\t        \"prefix\" : \"Bonn\", \r\n\t        \"completion\" : { \r\n\t            \"field\" : \"suggest\",\r\n\t            \"fuzzy\": {\"fuzziness\": 2}\r\n\t        }\r\n\t    }\r\n}\r\n```\r\n\r\nResult\r\n```\r\n{\r\n    \"took\": 5,\r\n    \"timed_out\": false,\r\n    \"_shards\": {\r\n        \"total\": 5,\r\n        \"successful\": 5,\r\n        \"skipped\": 0,\r\n        \"failed\": 0\r\n    },\r\n    \"hits\": {\r\n        \"total\": 0,\r\n        \"max_score\": 0,\r\n        \"hits\": []\r\n    },\r\n    \"suggest\": {\r\n        \"name-fuzzy-suggest\": [\r\n            {\r\n                \"text\": \"Bonn\",\r\n                \"offset\": 0,\r\n                \"length\": 4,\r\n                \"options\": [\r\n                    {\r\n                        \"text\": \"Bohlen\",\r\n                        \"_index\": \"test_it_1540912066\",\r\n                        \"_type\": \"test_it\",\r\n                        \"_id\": \"e53963c2-d904-5486-b4c0-9cd7c6faf497\",\r\n                        \"_score\": 2,\r\n                        \"_source\": {\r\n                            \"name\": \"Böhlen\",\r\n                            \"suggest\": {\r\n                                \"input\": [\r\n                                    \"Böhlen\",\r\n                                    \"Bohlen\"\r\n                                ]\r\n                            }\r\n                        }\r\n                    },\r\n                    {\r\n                        \"text\": \"Boizenburg\",\r\n                        \"_index\": \"test_it_1540912066\",\r\n                        \"_type\": \"test_it\",\r\n                        \"_id\": \"ab36d626-be7d-5ee1-a36c-7417ed5a6896\",\r\n                        \"_score\": 2,\r\n                        \"_source\": {\r\n                            \"name\": \"Boizenburg\",\r\n                            \"suggest\": {\r\n                                \"input\": [\r\n                                    \"Boizenburg\",\r\n                                    \"Boizenburg\"\r\n                                ]\r\n                            }\r\n                        }\r\n                    },\r\n                    {\r\n                        \"text\": \"Bonn\",\r\n                        \"_index\": \"test_it_1540912066\",\r\n                        \"_type\": \"test_it\",\r\n                        \"_id\": \"8fe4dbd2-0806-5bda-8602-19ad4757f11a\",\r\n                        \"_score\": 2,\r\n                        \"_source\": {\r\n                            \"name\": \"Bonn\",\r\n                            \"suggest\": {\r\n                                \"input\": [\r\n                                    \"Bonn\",\r\n                                    \"Bonn\"\r\n                                ]\r\n                            }\r\n                        }\r\n                    },\r\n                    {\r\n                        \"text\": \"Bonnigheim\",\r\n                        \"_index\": \"test_it_1540912066\",\r\n                        \"_type\": \"test_it\",\r\n                        \"_id\": \"4902127c-5422-5c2b-a596-97408fadbae5\",\r\n                        \"_score\": 2,\r\n                        \"_source\": {\r\n                            \"name\": \"Bönnigheim\",\r\n                            \"suggest\": {\r\n                                \"input\": [\r\n                                    \"Bönnigheim\",\r\n                                    \"Bonnigheim\"\r\n                                ]\r\n                            }\r\n                        }\r\n                    }\r\n                ]\r\n            }\r\n        ]\r\n}\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/461774661","html_url":"https://github.com/elastic/elasticsearch/issues/24903#issuecomment-461774661","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24903","id":461774661,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTc3NDY2MQ==","user":{"login":"narmadham","id":3821891,"node_id":"MDQ6VXNlcjM4MjE4OTE=","avatar_url":"https://avatars1.githubusercontent.com/u/3821891?v=4","gravatar_id":"","url":"https://api.github.com/users/narmadham","html_url":"https://github.com/narmadham","followers_url":"https://api.github.com/users/narmadham/followers","following_url":"https://api.github.com/users/narmadham/following{/other_user}","gists_url":"https://api.github.com/users/narmadham/gists{/gist_id}","starred_url":"https://api.github.com/users/narmadham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narmadham/subscriptions","organizations_url":"https://api.github.com/users/narmadham/orgs","repos_url":"https://api.github.com/users/narmadham/repos","events_url":"https://api.github.com/users/narmadham/events{/privacy}","received_events_url":"https://api.github.com/users/narmadham/received_events","type":"User","site_admin":false},"created_at":"2019-02-08T11:32:09Z","updated_at":"2019-02-08T12:17:03Z","author_association":"NONE","body":"Using 6.5.3 and still got the issue. It doesn’t look good. Any work around?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/468313507","html_url":"https://github.com/elastic/elasticsearch/issues/24903#issuecomment-468313507","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24903","id":468313507,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODMxMzUwNw==","user":{"login":"jalberto","id":99927,"node_id":"MDQ6VXNlcjk5OTI3","avatar_url":"https://avatars2.githubusercontent.com/u/99927?v=4","gravatar_id":"","url":"https://api.github.com/users/jalberto","html_url":"https://github.com/jalberto","followers_url":"https://api.github.com/users/jalberto/followers","following_url":"https://api.github.com/users/jalberto/following{/other_user}","gists_url":"https://api.github.com/users/jalberto/gists{/gist_id}","starred_url":"https://api.github.com/users/jalberto/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jalberto/subscriptions","organizations_url":"https://api.github.com/users/jalberto/orgs","repos_url":"https://api.github.com/users/jalberto/repos","events_url":"https://api.github.com/users/jalberto/events{/privacy}","received_events_url":"https://api.github.com/users/jalberto/received_events","type":"User","site_admin":false},"created_at":"2019-02-28T15:23:38Z","updated_at":"2019-02-28T15:23:38Z","author_association":"NONE","body":"same with 6.6, this issue can be traced back to 2014 (https://github.com/elastic/elasticsearch/issues/7060)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/485778585","html_url":"https://github.com/elastic/elasticsearch/issues/24903#issuecomment-485778585","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24903","id":485778585,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTc3ODU4NQ==","user":{"login":"crisk","id":9974635,"node_id":"MDQ6VXNlcjk5NzQ2MzU=","avatar_url":"https://avatars3.githubusercontent.com/u/9974635?v=4","gravatar_id":"","url":"https://api.github.com/users/crisk","html_url":"https://github.com/crisk","followers_url":"https://api.github.com/users/crisk/followers","following_url":"https://api.github.com/users/crisk/following{/other_user}","gists_url":"https://api.github.com/users/crisk/gists{/gist_id}","starred_url":"https://api.github.com/users/crisk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crisk/subscriptions","organizations_url":"https://api.github.com/users/crisk/orgs","repos_url":"https://api.github.com/users/crisk/repos","events_url":"https://api.github.com/users/crisk/events{/privacy}","received_events_url":"https://api.github.com/users/crisk/received_events","type":"User","site_admin":false},"created_at":"2019-04-23T12:19:11Z","updated_at":"2019-04-23T12:19:11Z","author_association":"NONE","body":"same with 5.6\r\nseems to be a lucene issue. does anybody know if this is already patched, or is there maybe a workaround?\r\nthank you","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/485811430","html_url":"https://github.com/elastic/elasticsearch/issues/24903#issuecomment-485811430","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24903","id":485811430,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTgxMTQzMA==","user":{"login":"sanderlissenburg","id":3524777,"node_id":"MDQ6VXNlcjM1MjQ3Nzc=","avatar_url":"https://avatars0.githubusercontent.com/u/3524777?v=4","gravatar_id":"","url":"https://api.github.com/users/sanderlissenburg","html_url":"https://github.com/sanderlissenburg","followers_url":"https://api.github.com/users/sanderlissenburg/followers","following_url":"https://api.github.com/users/sanderlissenburg/following{/other_user}","gists_url":"https://api.github.com/users/sanderlissenburg/gists{/gist_id}","starred_url":"https://api.github.com/users/sanderlissenburg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sanderlissenburg/subscriptions","organizations_url":"https://api.github.com/users/sanderlissenburg/orgs","repos_url":"https://api.github.com/users/sanderlissenburg/repos","events_url":"https://api.github.com/users/sanderlissenburg/events{/privacy}","received_events_url":"https://api.github.com/users/sanderlissenburg/received_events","type":"User","site_admin":false},"created_at":"2019-04-23T13:51:01Z","updated_at":"2019-04-23T13:51:01Z","author_association":"NONE","body":"I \"fixed\" this problem partially with a query and partially in code (JS). To continue the \"Bonn\" example;\r\n\r\nFirst I use 2 suggest query elements with a max size for each of 5 items. One element does a fuzzy search, the other a none fuzzy search. When I get the result (max 10 items) I filter them out with JS, where I store the exact results before the fuzzy results. Also I filter out duplicates.\r\n\r\n```\r\n{\r\n    'suggest': {\r\n        'autocomplete_fuzzy': {\r\n            'prefix': 'Bonn',\r\n            'completion': {\r\n                'field': 'suggest',\r\n                'fuzzy': { 'fuzziness': 2 },\r\n                'size': 5\r\n            }\r\n        },\r\n        'autocomplete': {\r\n            'prefix': 'Bonn',\r\n            'completion': {\r\n                'field': 'suggest',\r\n                'size': 5\r\n            }\r\n        },\r\n    },\r\n}\r\n```\r\n\r\n```\r\nresults.suggest.autocomplete[0].options.forEach(function (suggestion) {\r\n  ids.push(suggestion._id);\r\n  suggestions.push(suggestion);\r\n});\r\n\r\nresults.suggest.autocomplete_fuzzy[0].options.forEach(function (suggestion) {\r\n  if (ids.indexOf(suggestion._id) == -1) {\r\n    suggestions.push(suggestion);\r\n  }\r\n});\r\n```\r\n\r\nI hope it helps.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/485813297","html_url":"https://github.com/elastic/elasticsearch/issues/24903#issuecomment-485813297","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24903","id":485813297,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTgxMzI5Nw==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2019-04-23T13:55:36Z","updated_at":"2019-04-23T13:55:36Z","author_association":"MEMBER","body":"For prefix queries that involve fuzziness, the completion suggester finds all minimal prefix path that intersect with the suggestions and compute a boost per path that is equal to the length of the shared prefix. For instance the prefix `headi` will find `head` as the minimal prefix that matches `heading`, `head` and `header` with a fuzziness of 1 and `hea` with a fuzziness of 2. Since suggestions are always visited in order of their weight we cannot compute the boost based on the final input, it is always computed from the minimal prefix. I agree that it can be misleading but this limitation is needed to ensure that queries always return the best weights while remaining efficient.\r\nOne possible workaround is to run multiple suggestion queries, one per fuzziness value and to rerank the result client side. This will be more efficient than trying to assign specific boost per output so I am closing this issue.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/485817644","html_url":"https://github.com/elastic/elasticsearch/issues/24903#issuecomment-485817644","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24903","id":485817644,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTgxNzY0NA==","user":{"login":"PepijnDeWachter","id":43132854,"node_id":"MDQ6VXNlcjQzMTMyODU0","avatar_url":"https://avatars0.githubusercontent.com/u/43132854?v=4","gravatar_id":"","url":"https://api.github.com/users/PepijnDeWachter","html_url":"https://github.com/PepijnDeWachter","followers_url":"https://api.github.com/users/PepijnDeWachter/followers","following_url":"https://api.github.com/users/PepijnDeWachter/following{/other_user}","gists_url":"https://api.github.com/users/PepijnDeWachter/gists{/gist_id}","starred_url":"https://api.github.com/users/PepijnDeWachter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PepijnDeWachter/subscriptions","organizations_url":"https://api.github.com/users/PepijnDeWachter/orgs","repos_url":"https://api.github.com/users/PepijnDeWachter/repos","events_url":"https://api.github.com/users/PepijnDeWachter/events{/privacy}","received_events_url":"https://api.github.com/users/PepijnDeWachter/received_events","type":"User","site_admin":false},"created_at":"2019-04-23T14:05:25Z","updated_at":"2019-04-23T14:05:25Z","author_association":"NONE","body":"I've worked around this by using the weight attribute on the suggest \r\nfield, every time a user selects a value from the completion suggester \r\nand submits the form in which the suggester was used I increment the \r\nweight attribute.\r\n\r\nIf you're already using the weight attribute for something else this \r\nmight not work in your case, but in my case that was no issue.\r\n\r\nUsing this workaround means I don't need to combine multiple responses \r\nand only do one query.\r\n\r\nThe biggest downside with this method is that when you don't have any \r\n'usage' data the problem isn't solved, depending on how many values you \r\nhave in the suggester and if there is an expected popularity curve in \r\nthe data you might not find a benefit in this workaround.\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/491183632","html_url":"https://github.com/elastic/elasticsearch/issues/24903#issuecomment-491183632","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24903","id":491183632,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MTE4MzYzMg==","user":{"login":"impulse","id":8146736,"node_id":"MDQ6VXNlcjgxNDY3MzY=","avatar_url":"https://avatars3.githubusercontent.com/u/8146736?v=4","gravatar_id":"","url":"https://api.github.com/users/impulse","html_url":"https://github.com/impulse","followers_url":"https://api.github.com/users/impulse/followers","following_url":"https://api.github.com/users/impulse/following{/other_user}","gists_url":"https://api.github.com/users/impulse/gists{/gist_id}","starred_url":"https://api.github.com/users/impulse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/impulse/subscriptions","organizations_url":"https://api.github.com/users/impulse/orgs","repos_url":"https://api.github.com/users/impulse/repos","events_url":"https://api.github.com/users/impulse/events{/privacy}","received_events_url":"https://api.github.com/users/impulse/received_events","type":"User","site_admin":false},"created_at":"2019-05-10T07:12:04Z","updated_at":"2019-05-10T08:26:22Z","author_association":"NONE","body":"Quick lodash solution for obtaining unique suggestions when running multiple suggestions queries:\r\n```js\r\nconst { autocomplete, autocomplete_fuzzy } = responseObj.data.suggest;\r\nconst mergedSuggestions = _.concat(\r\n  autocomplete[0].options,\r\n  autocomplete_fuzzy[0].options\r\n).map(suggestion => {\r\n  _.unset(suggestion, \"_score\");\r\n  return suggestion;\r\n});\r\nconst uniqueSuggestions = _.uniqWith(mergedSuggestions, _.isEqual);\r\n```","performed_via_github_app":null}]