{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/17435","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17435/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17435/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17435/events","html_url":"https://github.com/elastic/elasticsearch/issues/17435","id":144777151,"node_id":"MDU6SXNzdWUxNDQ3NzcxNTE=","number":17435,"title":"Verbose dangling indices logging","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"labels":[{"id":836504707,"node_id":"MDU6TGFiZWw4MzY1MDQ3MDc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Distributed","name":":Distributed/Distributed","color":"0e8a16","default":false,"description":"A catch all label for anything in the Distributed Area. If you aren't sure, use this one."},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":92913658,"node_id":"MDU6TGFiZWw5MjkxMzY1OA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/blocker","name":"blocker","color":"e11d21","default":false,"description":null},{"id":352250322,"node_id":"MDU6TGFiZWwzNTIyNTAzMjI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v5.0.0-alpha2","name":"v5.0.0-alpha2","color":"dddddd","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":38,"created_at":"2016-03-31T03:13:16Z","updated_at":"2018-02-13T19:54:43Z","closed_at":"2016-04-25T20:16:08Z","author_association":"MEMBER","active_lock_reason":null,"body":"While investigating #17319, I had started two nodes built from master, and indexed some data. I thought I killed these nodes but one of them was still running. I started another node and it produced the following in its logs:\n\n```\n[2016-03-30 22:51:39,322][WARN ][gateway                  ] [Ani-Mator] [[i/CetR0D_FTdmYi5IcTE55EA]] can not be imported as a dangling index, as index with same name already exists in cluster metadata\n[2016-03-30 22:51:39,335][WARN ][gateway                  ] [Ani-Mator] [[i/CetR0D_FTdmYi5IcTE55EA]] can not be imported as a dangling index, as index with same name already exists in cluster metadata\n[2016-03-30 22:51:39,375][WARN ][gateway                  ] [Ani-Mator] [[i/CetR0D_FTdmYi5IcTE55EA]] can not be imported as a dangling index, as index with same name already exists in cluster metadata\n[2016-03-30 22:51:39,495][WARN ][gateway                  ] [Ani-Mator] [[i/CetR0D_FTdmYi5IcTE55EA]] can not be imported as a dangling index, as index with same name already exists in cluster metadata\n[2016-03-30 22:51:39,524][WARN ][gateway                  ] [Ani-Mator] [[i/CetR0D_FTdmYi5IcTE55EA]] can not be imported as a dangling index, as index with same name already exists in cluster metadata\n[2016-03-30 22:51:39,543][WARN ][gateway                  ] [Ani-Mator] [[i/CetR0D_FTdmYi5IcTE55EA]] can not be imported as a dangling index, as index with same name already exists in cluster metadata\n[2016-03-30 22:51:39,571][WARN ][gateway                  ] [Ani-Mator] [[i/CetR0D_FTdmYi5IcTE55EA]] can not be imported as a dangling index, as index with same name already exists in cluster metadata\n[2016-03-30 22:51:39,630][WARN ][gateway                  ] [Ani-Mator] [[i/CetR0D_FTdmYi5IcTE55EA]] can not be imported as a dangling index, as index with same name already exists in cluster metadata\n[2016-03-30 22:51:40,049][WARN ][gateway                  ] [Ani-Mator] [[i/CetR0D_FTdmYi5IcTE55EA]] can not be imported as a dangling index, as index with same name already exists in cluster metadata\n[2016-03-30 22:51:40,183][WARN ][gateway                  ] [Ani-Mator] [[i/CetR0D_FTdmYi5IcTE55EA]] can not be imported as a dangling index, as index with same name already exists in cluster metadata\n[2016-03-30 22:51:40,214][WARN ][gateway                  ] [Ani-Mator] [[i/CetR0D_FTdmYi5IcTE55EA]] can not be imported as a dangling index, as index with same name already exists in cluster metadata\n[2016-03-30 22:51:40,251][WARN ][gateway                  ] [Ani-Mator] [[i/CetR0D_FTdmYi5IcTE55EA]] can not be imported as a dangling index, as index with same name already exists in cluster metadata\n[2016-03-30 22:51:40,573][WARN ][gateway                  ] [Ani-Mator] [[i/CetR0D_FTdmYi5IcTE55EA]] can not be imported as a dangling index, as index with same name already exists in cluster metadata\n```\n\nI tried to reproduce this from a fresh cluster, but it did not immediately reproduce. I restored the shared data directory for this cluster from backup and the issue appeared again so there appears to be something special here.\n1. Package the elasticsearch tar from master\n2. Extract the tar into some location `/path/to/elasticsearch`\n3. Extract the attached [data.tar.gz](https://github.com/elastic/elasticsearch/files/196920/data.tar.gz) into `/path/to/elasticsearch/data`\n4. Start Elasticsearch twice from `/path/to/elasticsearch/bin/elasticsearch`\n5. :boom: \n","closed_by":{"login":"abeyad","id":1631297,"node_id":"MDQ6VXNlcjE2MzEyOTc=","avatar_url":"https://avatars2.githubusercontent.com/u/1631297?v=4","gravatar_id":"","url":"https://api.github.com/users/abeyad","html_url":"https://github.com/abeyad","followers_url":"https://api.github.com/users/abeyad/followers","following_url":"https://api.github.com/users/abeyad/following{/other_user}","gists_url":"https://api.github.com/users/abeyad/gists{/gist_id}","starred_url":"https://api.github.com/users/abeyad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abeyad/subscriptions","organizations_url":"https://api.github.com/users/abeyad/orgs","repos_url":"https://api.github.com/users/abeyad/repos","events_url":"https://api.github.com/users/abeyad/events{/privacy}","received_events_url":"https://api.github.com/users/abeyad/received_events","type":"User","site_admin":false},"performed_via_github_app":null}