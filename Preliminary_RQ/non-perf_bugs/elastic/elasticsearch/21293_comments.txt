[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/258120509","html_url":"https://github.com/elastic/elasticsearch/issues/21293#issuecomment-258120509","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21293","id":258120509,"node_id":"MDEyOklzc3VlQ29tbWVudDI1ODEyMDUwOQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-11-03T11:39:06Z","updated_at":"2016-11-03T11:39:06Z","author_association":"CONTRIBUTOR","body":"@nknize would this be feasible?  \n\nRelated to https://github.com/elastic/elasticsearch/issues/7574\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/285139102","html_url":"https://github.com/elastic/elasticsearch/issues/21293#issuecomment-285139102","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21293","id":285139102,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTEzOTEwMg==","user":{"login":"nknize","id":830187,"node_id":"MDQ6VXNlcjgzMDE4Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/830187?v=4","gravatar_id":"","url":"https://api.github.com/users/nknize","html_url":"https://github.com/nknize","followers_url":"https://api.github.com/users/nknize/followers","following_url":"https://api.github.com/users/nknize/following{/other_user}","gists_url":"https://api.github.com/users/nknize/gists{/gist_id}","starred_url":"https://api.github.com/users/nknize/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nknize/subscriptions","organizations_url":"https://api.github.com/users/nknize/orgs","repos_url":"https://api.github.com/users/nknize/repos","events_url":"https://api.github.com/users/nknize/events{/privacy}","received_events_url":"https://api.github.com/users/nknize/received_events","type":"User","site_admin":false},"created_at":"2017-03-08T19:16:05Z","updated_at":"2017-03-08T19:16:12Z","author_association":"CONTRIBUTOR","body":"I'll update the code for this to show how this can be done in the aggregation. Below is a code snippet for computing the geohash cells for a shape. It can be done for quad tree as well for natural mercator matching. \r\n\r\n```java\r\n    // build poly\r\n    ctx = JtsSpatialContext.GEO;\r\n    Shape shape = ctx.readShapeFromWkt(wkt);\r\n\r\n    // build geohash prefix tree and iterate intersecting cells\r\n    CellIterator iter = new GeohashPrefixTree(ctx, 6).getTreeCellIterator(shape, 6);\r\n    while (iter.hasNext()) {\r\n      Cell c = iter.next();\r\n      System.out.println(c);\r\n    }\r\n```\r\n\r\nI am a little concerned about the complexity inside the aggregation framework.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/285556483","html_url":"https://github.com/elastic/elasticsearch/issues/21293#issuecomment-285556483","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21293","id":285556483,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTU1NjQ4Mw==","user":{"login":"mikeurbach","id":1182100,"node_id":"MDQ6VXNlcjExODIxMDA=","avatar_url":"https://avatars0.githubusercontent.com/u/1182100?v=4","gravatar_id":"","url":"https://api.github.com/users/mikeurbach","html_url":"https://github.com/mikeurbach","followers_url":"https://api.github.com/users/mikeurbach/followers","following_url":"https://api.github.com/users/mikeurbach/following{/other_user}","gists_url":"https://api.github.com/users/mikeurbach/gists{/gist_id}","starred_url":"https://api.github.com/users/mikeurbach/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikeurbach/subscriptions","organizations_url":"https://api.github.com/users/mikeurbach/orgs","repos_url":"https://api.github.com/users/mikeurbach/repos","events_url":"https://api.github.com/users/mikeurbach/events{/privacy}","received_events_url":"https://api.github.com/users/mikeurbach/received_events","type":"User","site_admin":false},"created_at":"2017-03-10T02:37:25Z","updated_at":"2017-03-10T02:37:25Z","author_association":"NONE","body":"we talked about this at elasticon, it would be an awesome feature that my team would use a lot!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/289129700","html_url":"https://github.com/elastic/elasticsearch/issues/21293#issuecomment-289129700","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21293","id":289129700,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTEyOTcwMA==","user":{"login":"rtrujill007","id":6181677,"node_id":"MDQ6VXNlcjYxODE2Nzc=","avatar_url":"https://avatars2.githubusercontent.com/u/6181677?v=4","gravatar_id":"","url":"https://api.github.com/users/rtrujill007","html_url":"https://github.com/rtrujill007","followers_url":"https://api.github.com/users/rtrujill007/followers","following_url":"https://api.github.com/users/rtrujill007/following{/other_user}","gists_url":"https://api.github.com/users/rtrujill007/gists{/gist_id}","starred_url":"https://api.github.com/users/rtrujill007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rtrujill007/subscriptions","organizations_url":"https://api.github.com/users/rtrujill007/orgs","repos_url":"https://api.github.com/users/rtrujill007/repos","events_url":"https://api.github.com/users/rtrujill007/events{/privacy}","received_events_url":"https://api.github.com/users/rtrujill007/received_events","type":"User","site_admin":false},"created_at":"2017-03-24T20:04:33Z","updated_at":"2017-03-24T20:04:33Z","author_association":"NONE","body":"ðŸ‘  \r\n\r\nThis would also greatly benefit us (Esri) as well!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/373792984","html_url":"https://github.com/elastic/elasticsearch/issues/21293#issuecomment-373792984","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21293","id":373792984,"node_id":"MDEyOklzc3VlQ29tbWVudDM3Mzc5Mjk4NA==","user":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"created_at":"2018-03-16T17:49:02Z","updated_at":"2018-03-16T17:49:02Z","author_association":"CONTRIBUTOR","body":"cc @elastic/es-search-aggs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/429319375","html_url":"https://github.com/elastic/elasticsearch/issues/21293#issuecomment-429319375","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21293","id":429319375,"node_id":"MDEyOklzc3VlQ29tbWVudDQyOTMxOTM3NQ==","user":{"login":"refaelasraf","id":18240821,"node_id":"MDQ6VXNlcjE4MjQwODIx","avatar_url":"https://avatars3.githubusercontent.com/u/18240821?v=4","gravatar_id":"","url":"https://api.github.com/users/refaelasraf","html_url":"https://github.com/refaelasraf","followers_url":"https://api.github.com/users/refaelasraf/followers","following_url":"https://api.github.com/users/refaelasraf/following{/other_user}","gists_url":"https://api.github.com/users/refaelasraf/gists{/gist_id}","starred_url":"https://api.github.com/users/refaelasraf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/refaelasraf/subscriptions","organizations_url":"https://api.github.com/users/refaelasraf/orgs","repos_url":"https://api.github.com/users/refaelasraf/repos","events_url":"https://api.github.com/users/refaelasraf/events{/privacy}","received_events_url":"https://api.github.com/users/refaelasraf/received_events","type":"User","site_admin":false},"created_at":"2018-10-12T13:08:06Z","updated_at":"2018-10-12T13:08:06Z","author_association":"NONE","body":"Have any updates about this question?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/430612613","html_url":"https://github.com/elastic/elasticsearch/issues/21293#issuecomment-430612613","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21293","id":430612613,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMDYxMjYxMw==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2018-10-17T12:42:22Z","updated_at":"2018-10-17T12:42:22Z","author_association":"MEMBER","body":"> I am a little concerned about the complexity inside the aggregation framework.\r\n\r\nThis looks like we don't have agreement yet on whether this is feasible or not. I'll tag this for team discussion to see how we can move this forward or if we don't want to pursue this idea.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/431975975","html_url":"https://github.com/elastic/elasticsearch/issues/21293#issuecomment-431975975","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21293","id":431975975,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMTk3NTk3NQ==","user":{"login":"nknize","id":830187,"node_id":"MDQ6VXNlcjgzMDE4Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/830187?v=4","gravatar_id":"","url":"https://api.github.com/users/nknize","html_url":"https://github.com/nknize","followers_url":"https://api.github.com/users/nknize/followers","following_url":"https://api.github.com/users/nknize/following{/other_user}","gists_url":"https://api.github.com/users/nknize/gists{/gist_id}","starred_url":"https://api.github.com/users/nknize/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nknize/subscriptions","organizations_url":"https://api.github.com/users/nknize/orgs","repos_url":"https://api.github.com/users/nknize/repos","events_url":"https://api.github.com/users/nknize/events{/privacy}","received_events_url":"https://api.github.com/users/nknize/received_events","type":"User","site_admin":false},"created_at":"2018-10-22T20:39:09Z","updated_at":"2018-10-22T20:39:09Z","author_association":"CONTRIBUTOR","body":"We revisited this topic in the weekly team discussion. The main blocker is that we do not yet have DocValues support for shapes. And we will likely not have doc value support until [BKD Backed Shapes](https://github.com/elastic/elasticsearch/issues/32039) is complete.  \r\n\r\nDocValues for shapes is a bit more tricky than it might seem because there is no support for multivalue DocValues. If there were, we could index a docvalue for each decomposed shape term created by the index (either quad cell or tessellated triangle) and use them to compute intersection with the grid bucket(s). Alternatively we could create a single docvalue for each shape that represents the shape in some standard format (e.g., WKB), but then we not only have to unmarshall the docvalue but also recompute the relation between the shape and the aggregation grid cell(s). A linear scan issue that would likely not scale.\r\n\r\nSince we can't take either of the above approaches we could, alternatively, create a single docvalue for each shape that represents the tessellation of the shape and then compute the intersection of the grid bucket(s) with that tessellation. While this is doable, it is also a linear scan issue that may not scale. Additionally, DocValues have a cap on storage size that would substantially limit the size of the shape in terms of number of vertices.\r\n\r\nBottom line, we need to determine an efficient docvalue approach (or alternative) that helps take advantage of the decomposed terms in the index and does not over constrain us on size of the shape.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/452101058","html_url":"https://github.com/elastic/elasticsearch/issues/21293#issuecomment-452101058","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21293","id":452101058,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjEwMTA1OA==","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2019-01-07T22:14:48Z","updated_at":"2019-01-07T22:14:48Z","author_association":"MEMBER","body":"Depends on #37206","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/474413546","html_url":"https://github.com/elastic/elasticsearch/issues/21293#issuecomment-474413546","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21293","id":474413546,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDQxMzU0Ng==","user":{"login":"thomasneirynck","id":1833023,"node_id":"MDQ6VXNlcjE4MzMwMjM=","avatar_url":"https://avatars2.githubusercontent.com/u/1833023?v=4","gravatar_id":"","url":"https://api.github.com/users/thomasneirynck","html_url":"https://github.com/thomasneirynck","followers_url":"https://api.github.com/users/thomasneirynck/followers","following_url":"https://api.github.com/users/thomasneirynck/following{/other_user}","gists_url":"https://api.github.com/users/thomasneirynck/gists{/gist_id}","starred_url":"https://api.github.com/users/thomasneirynck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thomasneirynck/subscriptions","organizations_url":"https://api.github.com/users/thomasneirynck/orgs","repos_url":"https://api.github.com/users/thomasneirynck/repos","events_url":"https://api.github.com/users/thomasneirynck/events{/privacy}","received_events_url":"https://api.github.com/users/thomasneirynck/received_events","type":"User","site_admin":false},"created_at":"2019-03-19T15:08:33Z","updated_at":"2019-03-19T15:22:10Z","author_association":"NONE","body":"To give some context from the Kibana Maps app perspective, and why this remains relevant.\r\n\r\nThe UX currently disables indices with `geo_shape` fields from being added as a grid or heatmap. It would help improve the symmetry between these data sources, and reduce some of the confusion as to why users cannot make heatmaps from e.g. points stored as a `geo_shape`. Adding this would also simplify the data modeling step up front, as users would not need to take into account whether they store their documents as `geo_point` or `geo_shape`, since there would be no limitations to choosing the latter at query-time or in the UX in Kibana. The different nuances between the two aren't always clear for the beginner user.\r\n\r\nThis difference in support between `geo_point` and `geo_shape` also impacts geojson data upload (or any format for that matter), as the upload  will need to inspect what geometries are in the file, before the index is created (cf. https://github.com/elastic/kibana/issues/28765).\r\n \r\n(A similar issue with the difference in agg support between `geo_point` and `geo_shape` would be https://github.com/elastic/elasticsearch/issues/7574. This is affecting the UX in the Kibana Maps app in a similar way, where the app disables functionality when the `geo_shape` field is used).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/689602140","html_url":"https://github.com/elastic/elasticsearch/issues/21293#issuecomment-689602140","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21293","id":689602140,"node_id":"MDEyOklzc3VlQ29tbWVudDY4OTYwMjE0MA==","user":{"login":"csoulios","id":1561376,"node_id":"MDQ6VXNlcjE1NjEzNzY=","avatar_url":"https://avatars2.githubusercontent.com/u/1561376?v=4","gravatar_id":"","url":"https://api.github.com/users/csoulios","html_url":"https://github.com/csoulios","followers_url":"https://api.github.com/users/csoulios/followers","following_url":"https://api.github.com/users/csoulios/following{/other_user}","gists_url":"https://api.github.com/users/csoulios/gists{/gist_id}","starred_url":"https://api.github.com/users/csoulios/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/csoulios/subscriptions","organizations_url":"https://api.github.com/users/csoulios/orgs","repos_url":"https://api.github.com/users/csoulios/repos","events_url":"https://api.github.com/users/csoulios/events{/privacy}","received_events_url":"https://api.github.com/users/csoulios/received_events","type":"User","site_admin":false},"created_at":"2020-09-09T14:31:55Z","updated_at":"2020-09-09T14:31:55Z","author_association":"CONTRIBUTOR","body":"Issue closed by PR #55966, released in v7.8.0","performed_via_github_app":null}]