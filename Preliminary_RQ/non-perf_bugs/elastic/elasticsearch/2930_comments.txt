[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16882386","html_url":"https://github.com/elastic/elasticsearch/issues/2930#issuecomment-16882386","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2930","id":16882386,"node_id":"MDEyOklzc3VlQ29tbWVudDE2ODgyMzg2","user":{"login":"pecke01","id":799762,"node_id":"MDQ6VXNlcjc5OTc2Mg==","avatar_url":"https://avatars1.githubusercontent.com/u/799762?v=4","gravatar_id":"","url":"https://api.github.com/users/pecke01","html_url":"https://github.com/pecke01","followers_url":"https://api.github.com/users/pecke01/followers","following_url":"https://api.github.com/users/pecke01/following{/other_user}","gists_url":"https://api.github.com/users/pecke01/gists{/gist_id}","starred_url":"https://api.github.com/users/pecke01/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pecke01/subscriptions","organizations_url":"https://api.github.com/users/pecke01/orgs","repos_url":"https://api.github.com/users/pecke01/repos","events_url":"https://api.github.com/users/pecke01/events{/privacy}","received_events_url":"https://api.github.com/users/pecke01/received_events","type":"User","site_admin":false},"created_at":"2013-04-23T19:57:58Z","updated_at":"2013-04-23T20:00:00Z","author_association":"CONTRIBUTOR","body":"script_field will limit the return to the field specifed just like using the normal fields param when searching. If you want more fields returned you can specify them in the same query.\n\nSo I would say that this is by design. Not my design so can't say 100% but for me this is normal behaviour.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16882873","html_url":"https://github.com/elastic/elasticsearch/issues/2930#issuecomment-16882873","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2930","id":16882873,"node_id":"MDEyOklzc3VlQ29tbWVudDE2ODgyODcz","user":{"login":"amir20","id":260667,"node_id":"MDQ6VXNlcjI2MDY2Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/260667?v=4","gravatar_id":"","url":"https://api.github.com/users/amir20","html_url":"https://github.com/amir20","followers_url":"https://api.github.com/users/amir20/followers","following_url":"https://api.github.com/users/amir20/following{/other_user}","gists_url":"https://api.github.com/users/amir20/gists{/gist_id}","starred_url":"https://api.github.com/users/amir20/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amir20/subscriptions","organizations_url":"https://api.github.com/users/amir20/orgs","repos_url":"https://api.github.com/users/amir20/repos","events_url":"https://api.github.com/users/amir20/events{/privacy}","received_events_url":"https://api.github.com/users/amir20/received_events","type":"User","site_admin":false},"created_at":"2013-04-23T20:05:06Z","updated_at":"2013-04-23T20:07:07Z","author_association":"NONE","body":"What do you mean exactly include them in the same query? Do you mean move the query to `script_field`? \n\nEdit: Found [this stackoverflow](http://stackoverflow.com/questions/11856155/no-more-source-if-script-fields-is-used-in-elasticsearch-query)\n\nI would say this is confusing because I read all the documentation a lot to make sure I was't missing anything. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16883120","html_url":"https://github.com/elastic/elasticsearch/issues/2930#issuecomment-16883120","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2930","id":16883120,"node_id":"MDEyOklzc3VlQ29tbWVudDE2ODgzMTIw","user":{"login":"pecke01","id":799762,"node_id":"MDQ6VXNlcjc5OTc2Mg==","avatar_url":"https://avatars1.githubusercontent.com/u/799762?v=4","gravatar_id":"","url":"https://api.github.com/users/pecke01","html_url":"https://github.com/pecke01","followers_url":"https://api.github.com/users/pecke01/followers","following_url":"https://api.github.com/users/pecke01/following{/other_user}","gists_url":"https://api.github.com/users/pecke01/gists{/gist_id}","starred_url":"https://api.github.com/users/pecke01/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pecke01/subscriptions","organizations_url":"https://api.github.com/users/pecke01/orgs","repos_url":"https://api.github.com/users/pecke01/repos","events_url":"https://api.github.com/users/pecke01/events{/privacy}","received_events_url":"https://api.github.com/users/pecke01/received_events","type":"User","site_admin":false},"created_at":"2013-04-23T20:09:15Z","updated_at":"2013-04-23T20:11:53Z","author_association":"CONTRIBUTOR","body":"Then I would do this:\n\n``` javascript\n{\n  \"fields\" : [\"description\",\"name\",\"created_at\"],\n  \"script_fields\": {\n    \"distance\": {\n      \"script\": \"doc['lat_lon'].distanceInKm(0,50.3)\"\n    }\n  },\n \"query\": {\n    \"match_all\": {}\n  }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16883195","html_url":"https://github.com/elastic/elasticsearch/issues/2930#issuecomment-16883195","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2930","id":16883195,"node_id":"MDEyOklzc3VlQ29tbWVudDE2ODgzMTk1","user":{"login":"amir20","id":260667,"node_id":"MDQ6VXNlcjI2MDY2Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/260667?v=4","gravatar_id":"","url":"https://api.github.com/users/amir20","html_url":"https://github.com/amir20","followers_url":"https://api.github.com/users/amir20/followers","following_url":"https://api.github.com/users/amir20/following{/other_user}","gists_url":"https://api.github.com/users/amir20/gists{/gist_id}","starred_url":"https://api.github.com/users/amir20/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amir20/subscriptions","organizations_url":"https://api.github.com/users/amir20/orgs","repos_url":"https://api.github.com/users/amir20/repos","events_url":"https://api.github.com/users/amir20/events{/privacy}","received_events_url":"https://api.github.com/users/amir20/received_events","type":"User","site_admin":false},"created_at":"2013-04-23T20:10:50Z","updated_at":"2013-04-23T20:10:50Z","author_association":"NONE","body":"I see. Yea that's what I found too. There isn't a way to return all fields is there? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16883510","html_url":"https://github.com/elastic/elasticsearch/issues/2930#issuecomment-16883510","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2930","id":16883510,"node_id":"MDEyOklzc3VlQ29tbWVudDE2ODgzNTEw","user":{"login":"amir20","id":260667,"node_id":"MDQ6VXNlcjI2MDY2Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/260667?v=4","gravatar_id":"","url":"https://api.github.com/users/amir20","html_url":"https://github.com/amir20","followers_url":"https://api.github.com/users/amir20/followers","following_url":"https://api.github.com/users/amir20/following{/other_user}","gists_url":"https://api.github.com/users/amir20/gists{/gist_id}","starred_url":"https://api.github.com/users/amir20/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amir20/subscriptions","organizations_url":"https://api.github.com/users/amir20/orgs","repos_url":"https://api.github.com/users/amir20/repos","events_url":"https://api.github.com/users/amir20/events{/privacy}","received_events_url":"https://api.github.com/users/amir20/received_events","type":"User","site_admin":false},"created_at":"2013-04-23T20:16:55Z","updated_at":"2013-04-23T20:16:55Z","author_association":"NONE","body":"By the way thank you for responding. At least I am unblocked. This is weird behavior. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16884001","html_url":"https://github.com/elastic/elasticsearch/issues/2930#issuecomment-16884001","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2930","id":16884001,"node_id":"MDEyOklzc3VlQ29tbWVudDE2ODg0MDAx","user":{"login":"pecke01","id":799762,"node_id":"MDQ6VXNlcjc5OTc2Mg==","avatar_url":"https://avatars1.githubusercontent.com/u/799762?v=4","gravatar_id":"","url":"https://api.github.com/users/pecke01","html_url":"https://github.com/pecke01","followers_url":"https://api.github.com/users/pecke01/followers","following_url":"https://api.github.com/users/pecke01/following{/other_user}","gists_url":"https://api.github.com/users/pecke01/gists{/gist_id}","starred_url":"https://api.github.com/users/pecke01/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pecke01/subscriptions","organizations_url":"https://api.github.com/users/pecke01/orgs","repos_url":"https://api.github.com/users/pecke01/repos","events_url":"https://api.github.com/users/pecke01/events{/privacy}","received_events_url":"https://api.github.com/users/pecke01/received_events","type":"User","site_admin":false},"created_at":"2013-04-23T20:25:16Z","updated_at":"2013-04-23T20:25:16Z","author_association":"CONTRIBUTOR","body":"Glad I could help. Good Luck\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16934975","html_url":"https://github.com/elastic/elasticsearch/issues/2930#issuecomment-16934975","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2930","id":16934975,"node_id":"MDEyOklzc3VlQ29tbWVudDE2OTM0OTc1","user":{"login":"amir20","id":260667,"node_id":"MDQ6VXNlcjI2MDY2Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/260667?v=4","gravatar_id":"","url":"https://api.github.com/users/amir20","html_url":"https://github.com/amir20","followers_url":"https://api.github.com/users/amir20/followers","following_url":"https://api.github.com/users/amir20/following{/other_user}","gists_url":"https://api.github.com/users/amir20/gists{/gist_id}","starred_url":"https://api.github.com/users/amir20/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amir20/subscriptions","organizations_url":"https://api.github.com/users/amir20/orgs","repos_url":"https://api.github.com/users/amir20/repos","events_url":"https://api.github.com/users/amir20/events{/privacy}","received_events_url":"https://api.github.com/users/amir20/received_events","type":"User","site_admin":false},"created_at":"2013-04-24T14:40:01Z","updated_at":"2013-04-24T14:40:01Z","author_association":"NONE","body":"I am closing this since it seems like it does what is supposed to. However, I do still find this behavior confusing. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16945657","html_url":"https://github.com/elastic/elasticsearch/issues/2930#issuecomment-16945657","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2930","id":16945657,"node_id":"MDEyOklzc3VlQ29tbWVudDE2OTQ1NjU3","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2013-04-24T16:29:25Z","updated_at":"2013-04-24T16:29:25Z","author_association":"MEMBER","body":"You can also return the actual source by asking for the `_source` in the fields element.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16946484","html_url":"https://github.com/elastic/elasticsearch/issues/2930#issuecomment-16946484","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2930","id":16946484,"node_id":"MDEyOklzc3VlQ29tbWVudDE2OTQ2NDg0","user":{"login":"amir20","id":260667,"node_id":"MDQ6VXNlcjI2MDY2Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/260667?v=4","gravatar_id":"","url":"https://api.github.com/users/amir20","html_url":"https://github.com/amir20","followers_url":"https://api.github.com/users/amir20/followers","following_url":"https://api.github.com/users/amir20/following{/other_user}","gists_url":"https://api.github.com/users/amir20/gists{/gist_id}","starred_url":"https://api.github.com/users/amir20/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amir20/subscriptions","organizations_url":"https://api.github.com/users/amir20/orgs","repos_url":"https://api.github.com/users/amir20/repos","events_url":"https://api.github.com/users/amir20/events{/privacy}","received_events_url":"https://api.github.com/users/amir20/received_events","type":"User","site_admin":false},"created_at":"2013-04-24T16:42:59Z","updated_at":"2013-04-24T16:43:55Z","author_association":"NONE","body":"@kimchy That seems to work when I use elasticsearch but when I use it via `tire` gem it seems that the `distance` field is no longer returned. I assume this is because elasticsearch returns all the fields under the `_source` key and not `fields`. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16959011","html_url":"https://github.com/elastic/elasticsearch/issues/2930#issuecomment-16959011","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2930","id":16959011,"node_id":"MDEyOklzc3VlQ29tbWVudDE2OTU5MDEx","user":{"login":"karmi","id":4790,"node_id":"MDQ6VXNlcjQ3OTA=","avatar_url":"https://avatars1.githubusercontent.com/u/4790?v=4","gravatar_id":"","url":"https://api.github.com/users/karmi","html_url":"https://github.com/karmi","followers_url":"https://api.github.com/users/karmi/followers","following_url":"https://api.github.com/users/karmi/following{/other_user}","gists_url":"https://api.github.com/users/karmi/gists{/gist_id}","starred_url":"https://api.github.com/users/karmi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karmi/subscriptions","organizations_url":"https://api.github.com/users/karmi/orgs","repos_url":"https://api.github.com/users/karmi/repos","events_url":"https://api.github.com/users/karmi/events{/privacy}","received_events_url":"https://api.github.com/users/karmi/received_events","type":"User","site_admin":false},"created_at":"2013-04-24T19:28:41Z","updated_at":"2013-04-24T19:28:52Z","author_association":"CONTRIBUTOR","body":"@amir20 You have to ask for the specific fields at the moment, see the original issue at karmi/tire#712.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16961592","html_url":"https://github.com/elastic/elasticsearch/issues/2930#issuecomment-16961592","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2930","id":16961592,"node_id":"MDEyOklzc3VlQ29tbWVudDE2OTYxNTky","user":{"login":"amir20","id":260667,"node_id":"MDQ6VXNlcjI2MDY2Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/260667?v=4","gravatar_id":"","url":"https://api.github.com/users/amir20","html_url":"https://github.com/amir20","followers_url":"https://api.github.com/users/amir20/followers","following_url":"https://api.github.com/users/amir20/following{/other_user}","gists_url":"https://api.github.com/users/amir20/gists{/gist_id}","starred_url":"https://api.github.com/users/amir20/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amir20/subscriptions","organizations_url":"https://api.github.com/users/amir20/orgs","repos_url":"https://api.github.com/users/amir20/repos","events_url":"https://api.github.com/users/amir20/events{/privacy}","received_events_url":"https://api.github.com/users/amir20/received_events","type":"User","site_admin":false},"created_at":"2013-04-24T20:10:06Z","updated_at":"2013-04-24T20:10:06Z","author_association":"NONE","body":"@karmi I did specify the fields explicitly and it worked. However, @kimchy suggested that I can use `_source`. Trying with elasticsearch, I can see the document being returned correctly in the `_source` tag instead of `fields`. However, tire gem does not return the `_source` data. Any suggestions to use `_source` and tire together?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16961738","html_url":"https://github.com/elastic/elasticsearch/issues/2930#issuecomment-16961738","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2930","id":16961738,"node_id":"MDEyOklzc3VlQ29tbWVudDE2OTYxNzM4","user":{"login":"amir20","id":260667,"node_id":"MDQ6VXNlcjI2MDY2Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/260667?v=4","gravatar_id":"","url":"https://api.github.com/users/amir20","html_url":"https://github.com/amir20","followers_url":"https://api.github.com/users/amir20/followers","following_url":"https://api.github.com/users/amir20/following{/other_user}","gists_url":"https://api.github.com/users/amir20/gists{/gist_id}","starred_url":"https://api.github.com/users/amir20/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amir20/subscriptions","organizations_url":"https://api.github.com/users/amir20/orgs","repos_url":"https://api.github.com/users/amir20/repos","events_url":"https://api.github.com/users/amir20/events{/privacy}","received_events_url":"https://api.github.com/users/amir20/received_events","type":"User","site_admin":false},"created_at":"2013-04-24T20:12:10Z","updated_at":"2013-04-24T20:12:10Z","author_association":"NONE","body":"I just saw your other comment about https://github.com/karmi/tire/issues/687. So ignore my comment above. I will follow that issue. Thank you.  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/16993991","html_url":"https://github.com/elastic/elasticsearch/issues/2930#issuecomment-16993991","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2930","id":16993991,"node_id":"MDEyOklzc3VlQ29tbWVudDE2OTkzOTkx","user":{"login":"karmi","id":4790,"node_id":"MDQ6VXNlcjQ3OTA=","avatar_url":"https://avatars1.githubusercontent.com/u/4790?v=4","gravatar_id":"","url":"https://api.github.com/users/karmi","html_url":"https://github.com/karmi","followers_url":"https://api.github.com/users/karmi/followers","following_url":"https://api.github.com/users/karmi/following{/other_user}","gists_url":"https://api.github.com/users/karmi/gists{/gist_id}","starred_url":"https://api.github.com/users/karmi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karmi/subscriptions","organizations_url":"https://api.github.com/users/karmi/orgs","repos_url":"https://api.github.com/users/karmi/repos","events_url":"https://api.github.com/users/karmi/events{/privacy}","received_events_url":"https://api.github.com/users/karmi/received_events","type":"User","site_admin":false},"created_at":"2013-04-25T08:18:51Z","updated_at":"2013-04-25T08:18:51Z","author_association":"CONTRIBUTOR","body":"@amir20 Yeah, it's a bug in the way fields and _source is handled, when you use it together.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19002919","html_url":"https://github.com/elastic/elasticsearch/issues/2930#issuecomment-19002919","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2930","id":19002919,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MDAyOTE5","user":{"login":"karmi","id":4790,"node_id":"MDQ6VXNlcjQ3OTA=","avatar_url":"https://avatars1.githubusercontent.com/u/4790?v=4","gravatar_id":"","url":"https://api.github.com/users/karmi","html_url":"https://github.com/karmi","followers_url":"https://api.github.com/users/karmi/followers","following_url":"https://api.github.com/users/karmi/following{/other_user}","gists_url":"https://api.github.com/users/karmi/gists{/gist_id}","starred_url":"https://api.github.com/users/karmi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karmi/subscriptions","organizations_url":"https://api.github.com/users/karmi/orgs","repos_url":"https://api.github.com/users/karmi/repos","events_url":"https://api.github.com/users/karmi/events{/privacy}","received_events_url":"https://api.github.com/users/karmi/received_events","type":"User","site_admin":false},"created_at":"2013-06-05T19:35:03Z","updated_at":"2013-06-05T19:35:03Z","author_association":"CONTRIBUTOR","body":"@amir20 The bug is now closed on Tire master, you can try it out. See integration test: https://github.com/karmi/tire/blob/master/test/integration/results_test.rb#L52-L63 Thanks for the report! \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19003937","html_url":"https://github.com/elastic/elasticsearch/issues/2930#issuecomment-19003937","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2930","id":19003937,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MDAzOTM3","user":{"login":"amir20","id":260667,"node_id":"MDQ6VXNlcjI2MDY2Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/260667?v=4","gravatar_id":"","url":"https://api.github.com/users/amir20","html_url":"https://github.com/amir20","followers_url":"https://api.github.com/users/amir20/followers","following_url":"https://api.github.com/users/amir20/following{/other_user}","gists_url":"https://api.github.com/users/amir20/gists{/gist_id}","starred_url":"https://api.github.com/users/amir20/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amir20/subscriptions","organizations_url":"https://api.github.com/users/amir20/orgs","repos_url":"https://api.github.com/users/amir20/repos","events_url":"https://api.github.com/users/amir20/events{/privacy}","received_events_url":"https://api.github.com/users/amir20/received_events","type":"User","site_admin":false},"created_at":"2013-06-05T19:52:52Z","updated_at":"2013-06-05T19:52:52Z","author_association":"NONE","body":"Great. Will try it out soon. \n","performed_via_github_app":null}]