[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/623331779","html_url":"https://github.com/elastic/elasticsearch/issues/55618#issuecomment-623331779","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55618","id":623331779,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMzMzMTc3OQ==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2020-05-04T08:33:55Z","updated_at":"2020-05-04T08:33:55Z","author_association":"MEMBER","body":"Thanks for raising this issue. Do you have any specific steps to reproduce this? \r\n\r\nNote: This one might be a duplicate of https://github.com/elastic/elasticsearch/issues/46116 despite the versions being different.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/623331831","html_url":"https://github.com/elastic/elasticsearch/issues/55618#issuecomment-623331831","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55618","id":623331831,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMzMzMTgzMQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-05-04T08:34:05Z","updated_at":"2020-05-04T08:34:05Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-analytics-geo (:Analytics/Aggregations)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/623454979","html_url":"https://github.com/elastic/elasticsearch/issues/55618#issuecomment-623454979","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55618","id":623454979,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMzQ1NDk3OQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2020-05-04T13:11:56Z","updated_at":"2020-05-04T13:11:56Z","author_association":"CONTRIBUTOR","body":"I'm working on a thread that started with #54758 that should give us better control over memory usage on the coordinating node. I don't expect it to bear fruit super soon though. In the mean time I suggest lowering the size of the composite aggregation and/or lowering the precision on the cardinality agg.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/623654381","html_url":"https://github.com/elastic/elasticsearch/issues/55618#issuecomment-623654381","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55618","id":623654381,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMzY1NDM4MQ==","user":{"login":"alogishetty","id":18541319,"node_id":"MDQ6VXNlcjE4NTQxMzE5","avatar_url":"https://avatars1.githubusercontent.com/u/18541319?v=4","gravatar_id":"","url":"https://api.github.com/users/alogishetty","html_url":"https://github.com/alogishetty","followers_url":"https://api.github.com/users/alogishetty/followers","following_url":"https://api.github.com/users/alogishetty/following{/other_user}","gists_url":"https://api.github.com/users/alogishetty/gists{/gist_id}","starred_url":"https://api.github.com/users/alogishetty/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alogishetty/subscriptions","organizations_url":"https://api.github.com/users/alogishetty/orgs","repos_url":"https://api.github.com/users/alogishetty/repos","events_url":"https://api.github.com/users/alogishetty/events{/privacy}","received_events_url":"https://api.github.com/users/alogishetty/received_events","type":"User","site_admin":false},"created_at":"2020-05-04T19:18:59Z","updated_at":"2020-05-04T19:40:01Z","author_association":"NONE","body":"We had an issue on Master nodes, on 4-29-2020 due to many garbage collection cycles. Our cluster we Red and went into cycles from Red to Yellow to Red for hours. Until it recovered by itself. Seems like we had the same garbage collection issue on co-ordination nodes too.\r\n\r\nMaster node (1 of 3 nodes):\r\n![image](https://user-images.githubusercontent.com/18541319/81004719-70b9c600-8e12-11ea-8412-ee74beb5b18e.png)\r\n\r\nCo-ordination node (1 of 2 nodes):\r\n![image](https://user-images.githubusercontent.com/18541319/81006340-f9d1fc80-8e14-11ea-97cb-0136124724a3.png)\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/624082001","html_url":"https://github.com/elastic/elasticsearch/issues/55618#issuecomment-624082001","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55618","id":624082001,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNDA4MjAwMQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2020-05-05T14:15:34Z","updated_at":"2020-05-05T14:15:34Z","author_association":"CONTRIBUTOR","body":">  Master nodes\r\n\r\nI can't really comment on what is up with the master nodes. The stack trace that you linked when creating the issue is a coordinating node issue. Are you sending queries to your master nodes? In general that is ok, but if you are having issues like this with agg reduction running you out of memory then I'd avoid it.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/624316103","html_url":"https://github.com/elastic/elasticsearch/issues/55618#issuecomment-624316103","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55618","id":624316103,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNDMxNjEwMw==","user":{"login":"alogishetty","id":18541319,"node_id":"MDQ6VXNlcjE4NTQxMzE5","avatar_url":"https://avatars1.githubusercontent.com/u/18541319?v=4","gravatar_id":"","url":"https://api.github.com/users/alogishetty","html_url":"https://github.com/alogishetty","followers_url":"https://api.github.com/users/alogishetty/followers","following_url":"https://api.github.com/users/alogishetty/following{/other_user}","gists_url":"https://api.github.com/users/alogishetty/gists{/gist_id}","starred_url":"https://api.github.com/users/alogishetty/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alogishetty/subscriptions","organizations_url":"https://api.github.com/users/alogishetty/orgs","repos_url":"https://api.github.com/users/alogishetty/repos","events_url":"https://api.github.com/users/alogishetty/events{/privacy}","received_events_url":"https://api.github.com/users/alogishetty/received_events","type":"User","site_admin":false},"created_at":"2020-05-05T21:28:08Z","updated_at":"2020-05-05T21:38:52Z","author_association":"NONE","body":"We have a cluster of 18, with 3 master nodes, 12 data nodes, 1 ingest node and 2 coordination nodes. And your master nodes, don't take any queries.\r\n\r\nSeems like there is a memory management issue with elastic 7.5.2","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/624364615","html_url":"https://github.com/elastic/elasticsearch/issues/55618#issuecomment-624364615","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55618","id":624364615,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNDM2NDYxNQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2020-05-05T23:49:33Z","updated_at":"2020-05-05T23:49:33Z","author_association":"CONTRIBUTOR","body":"Your best bet for the master nodes is to get a heap dump and have a look at what is in there and open a new issue when you have an idea what is up there. The issue you've opened here is a coordinating node one and I'm working on it. Just, slowly.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/645900285","html_url":"https://github.com/elastic/elasticsearch/issues/55618#issuecomment-645900285","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55618","id":645900285,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTkwMDI4NQ==","user":{"login":"iverase","id":29038686,"node_id":"MDQ6VXNlcjI5MDM4Njg2","avatar_url":"https://avatars1.githubusercontent.com/u/29038686?v=4","gravatar_id":"","url":"https://api.github.com/users/iverase","html_url":"https://github.com/iverase","followers_url":"https://api.github.com/users/iverase/followers","following_url":"https://api.github.com/users/iverase/following{/other_user}","gists_url":"https://api.github.com/users/iverase/gists{/gist_id}","starred_url":"https://api.github.com/users/iverase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iverase/subscriptions","organizations_url":"https://api.github.com/users/iverase/orgs","repos_url":"https://api.github.com/users/iverase/repos","events_url":"https://api.github.com/users/iverase/events{/privacy}","received_events_url":"https://api.github.com/users/iverase/received_events","type":"User","site_admin":false},"created_at":"2020-06-18T09:29:49Z","updated_at":"2020-06-18T09:29:49Z","author_association":"CONTRIBUTOR","body":"There has been several improvements in memory management in the latests release. In particular for coordinating nodes, for example https://github.com/elastic/elasticsearch/pull/46751 or #54758.  I am closing for the time being this issue as there is no action to be done at this moment. Please feel free to report the issue again if it keeps happening. ","performed_via_github_app":null}]