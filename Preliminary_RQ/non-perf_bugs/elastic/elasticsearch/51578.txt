{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/51578","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51578/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51578/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51578/events","html_url":"https://github.com/elastic/elasticsearch/issues/51578","id":556492400,"node_id":"MDU6SXNzdWU1NTY0OTI0MDA=","number":51578,"title":"Update docs with notes on deprecation logs throttling/limiting behavior","user":{"login":"cjcenizal","id":1238659,"node_id":"MDQ6VXNlcjEyMzg2NTk=","avatar_url":"https://avatars2.githubusercontent.com/u/1238659?v=4","gravatar_id":"","url":"https://api.github.com/users/cjcenizal","html_url":"https://github.com/cjcenizal","followers_url":"https://api.github.com/users/cjcenizal/followers","following_url":"https://api.github.com/users/cjcenizal/following{/other_user}","gists_url":"https://api.github.com/users/cjcenizal/gists{/gist_id}","starred_url":"https://api.github.com/users/cjcenizal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cjcenizal/subscriptions","organizations_url":"https://api.github.com/users/cjcenizal/orgs","repos_url":"https://api.github.com/users/cjcenizal/repos","events_url":"https://api.github.com/users/cjcenizal/events{/privacy}","received_events_url":"https://api.github.com/users/cjcenizal/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2020-01-28T21:52:23Z","updated_at":"2020-01-30T03:54:03Z","closed_at":"2020-01-30T03:54:02Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Per a convo with @jakelandis, some (but not all) deprecation warnings are throttled or limited to being stored in the log to a single instance. As of 7.7, you can observe this behavior by [enabling deprecation logging](https://www.elastic.co/guide/en/elasticsearch/reference/7.0/logging.html#deprecation-logging) and executing this request multiple times:\r\n\r\n```\r\nPUT _template/test?include_type_name\r\n{\r\n  \"index_patterns\": [\r\n    \"my_index\"\r\n  ],\r\n  \"mappings\": {\r\n    \"my_custom_type\": {\r\n      \"properties\": {\r\n        \"name\": {\r\n          \"type\": \"geo_shape\",\r\n          \"tree\": \"quadtree\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nBoth the `include_type_name` query param the `tree` geo-shape parameter have been deprecated in 7.0, however the deprecation message for the former is logged once while the latter is logged per request. This might be confusing for users unless documented somewhere. I think it would be discoverable in the docs linked to above.\r\n\r\n```\r\n{\"type\": \"deprecation\", \"timestamp\": \"2020-01-28T13:33:37,156-08:00\", \"level\": \"WARN\", \"component\": \"o.e.d.r.a.a.i.RestPutIndexTemplateAction\", \"cluster.name\": \"elasticsearch\", \"node.name\": \"CJs-MacBook-Pro.local\", \"message\": \"[types removal] Specifying include_type_name in put index template requests is deprecated. The parameter will be removed in the next major version.\", \"cluster.uuid\": \"RHW6A9haRh2iIyhZ4R6gCA\", \"node.id\": \"Q8QttK8pRcaUaVwEyQRt_Q\"  }\r\n{\"type\": \"deprecation\", \"timestamp\": \"2020-01-28T13:36:22,164-08:00\", \"level\": \"WARN\", \"component\": \"o.e.d.i.m.LegacyGeoShapeFieldMapper\", \"cluster.name\": \"elasticsearch\", \"node.name\": \"CJs-MacBook-Pro.local\", \"message\": \"Field parameter [tree] is deprecated and will be removed in a future version.\", \"cluster.uuid\": \"RHW6A9haRh2iIyhZ4R6gCA\", \"node.id\": \"Q8QttK8pRcaUaVwEyQRt_Q\"  }\r\n{\"type\": \"deprecation\", \"timestamp\": \"2020-01-28T13:36:28,894-08:00\", \"level\": \"WARN\", \"component\": \"o.e.d.i.m.LegacyGeoShapeFieldMapper\", \"cluster.name\": \"elasticsearch\", \"node.name\": \"CJs-MacBook-Pro.local\", \"message\": \"Field parameter [tree] is deprecated and will be removed in a future version.\", \"cluster.uuid\": \"RHW6A9haRh2iIyhZ4R6gCA\", \"node.id\": \"Q8QttK8pRcaUaVwEyQRt_Q\"  }\r\n{\"type\": \"deprecation\", \"timestamp\": \"2020-01-28T13:36:41,879-08:00\", \"level\": \"WARN\", \"component\": \"o.e.d.i.m.LegacyGeoShapeFieldMapper\", \"cluster.name\": \"elasticsearch\", \"node.name\": \"CJs-MacBook-Pro.local\", \"message\": \"Field parameter [tree] is deprecated and will be removed in a future version.\", \"cluster.uuid\": \"RHW6A9haRh2iIyhZ4R6gCA\", \"node.id\": \"Q8QttK8pRcaUaVwEyQRt_Q\"  }\r\n\r\n```\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}