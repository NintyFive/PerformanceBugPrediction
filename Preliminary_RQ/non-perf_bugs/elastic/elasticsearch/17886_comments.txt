[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/212426845","html_url":"https://github.com/elastic/elasticsearch/issues/17886#issuecomment-212426845","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17886","id":212426845,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMjQyNjg0NQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-04-20T13:38:17Z","updated_at":"2016-04-20T13:38:17Z","author_association":"CONTRIBUTOR","body":"It sounds like something is incorrect with how you are putting the index template.  Could you provide the actual code you use?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/212436551","html_url":"https://github.com/elastic/elasticsearch/issues/17886#issuecomment-212436551","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17886","id":212436551,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMjQzNjU1MQ==","user":{"login":"jorgecorreiaptc","id":12597000,"node_id":"MDQ6VXNlcjEyNTk3MDAw","avatar_url":"https://avatars0.githubusercontent.com/u/12597000?v=4","gravatar_id":"","url":"https://api.github.com/users/jorgecorreiaptc","html_url":"https://github.com/jorgecorreiaptc","followers_url":"https://api.github.com/users/jorgecorreiaptc/followers","following_url":"https://api.github.com/users/jorgecorreiaptc/following{/other_user}","gists_url":"https://api.github.com/users/jorgecorreiaptc/gists{/gist_id}","starred_url":"https://api.github.com/users/jorgecorreiaptc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jorgecorreiaptc/subscriptions","organizations_url":"https://api.github.com/users/jorgecorreiaptc/orgs","repos_url":"https://api.github.com/users/jorgecorreiaptc/repos","events_url":"https://api.github.com/users/jorgecorreiaptc/events{/privacy}","received_events_url":"https://api.github.com/users/jorgecorreiaptc/received_events","type":"User","site_admin":false},"created_at":"2016-04-20T13:58:36Z","updated_at":"2016-04-20T13:58:36Z","author_association":"NONE","body":"I am doing this in the same way I did in the version 1.7.1.\n\nBellow is the code I am running:\n\n``` java\nprivate static void createIndexTemplate(Client client, String indexDailyPackageTemplateName, String indexDailyPackageMatch) throws IOException {\n\n        String typeA = \"{\\\"properties\\\":{\\\"id\\\":{\\\"type\\\":\\\"long\\\"},\\\"type\\\":{\\\"properties\\\":{\\\"name\\\":{\\\"type\\\":\\\"string\\\",\\\"fields\\\":{\\\"raw\\\":{\\\"type\\\":\\\"string\\\",\\\"index\\\":\\\"not_analyzed\\\"}}},\\\"id\\\":{\\\"type\\\":\\\"long\\\"}}},\\\"uuid\\\":{\\\"type\\\":\\\"string\\\",\\\"fields\\\":{\\\"raw\\\":{\\\"type\\\":\\\"string\\\",\\\"index\\\":\\\"not_analyzed\\\"}}}},\\\"dynamic\\\":\\\"false\\\"}\";\n        String typeB = \"{\\\"properties\\\":{\\\"numMessages\\\":{\\\"type\\\":\\\"long\\\"},\\\"id\\\":{\\\"type\\\":\\\"long\\\"}},\\\"dynamic\\\":\\\"false\\\"}\";\n\n        PutIndexTemplateRequestBuilder indexTemplateRequestBuilder = client.admin().indices().preparePutTemplate(indexDailyPackageTemplateName)\n            .addMapping(\"type_a\", typeA).addMapping(\"type_b\", typeB).setTemplate(indexDailyPackageMatch);\n\n        indexTemplateRequestBuilder.execute().actionGet();\n    }\n```\n\nAfter I run this, when I use:\n`curl -XGET http://localhost:9200/_template/index_template`\nI get\n\n``` json{\n\u0000\u0000\"index_template\": {\n      \"order\": 0,\n      \"template\": \"template*\",\n      \"settings\": {},\n      \"mappings\": {\n         \"type_b\": {\n            \"dynamic\": \"false\",\n            \"properties\": {\n               \"numMessages\": {\n                  \"type\": \"long\"\n               },\n               \"id\": {\n                  \"type\": \"long\"\n               }\n            }\n         },\n         \"type_a\": {\n            \"dynamic\": \"false\",\n            \"properties\": {\n               \"id\": {\n                  \"type\": \"long\"\n               },\n               \"type\": {\n                  \"properties\": {\n                     \"name\": {\n                        \"type\": \"string\",\n                        \"fields\": {\n                           \"raw\": {\n                              \"index\": \"not_analyzed\",\n                              \"type\": \"string\"\n                           }\n                        }\n                     },\n                     \"id\": {\n                        \"type\": \"long\"\n                     }\n                  }\n               },\n               \"uuid\": {\n                  \"type\": \"string\",\n                  \"fields\": {\n                     \"raw\": {\n                        \"index\": \"not_analyzed\",\n                        \"type\": \"string\"\n                     }\n                  }\n               }\n            }\n         }\n      },\n      \"aliases\": {}\n   }\n}\n```\n\nIt looks like the template was created, but it didn't work as expected.\n\nThanks.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/212455089","html_url":"https://github.com/elastic/elasticsearch/issues/17886#issuecomment-212455089","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17886","id":212455089,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMjQ1NTA4OQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-04-20T14:47:35Z","updated_at":"2016-04-20T14:47:35Z","author_association":"CONTRIBUTOR","body":"Sorry @jorgecorreiaptc - I've tried this several times, with one node and with two.  It works the way it is supposed to work, I'm not seeing what you describe.  Any more details?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/212455330","html_url":"https://github.com/elastic/elasticsearch/issues/17886#issuecomment-212455330","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17886","id":212455330,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMjQ1NTMzMA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-04-20T14:47:51Z","updated_at":"2016-04-20T14:47:51Z","author_association":"CONTRIBUTOR","body":"Try on a fresh cluster and record all the recreation steps?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/212471309","html_url":"https://github.com/elastic/elasticsearch/issues/17886#issuecomment-212471309","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17886","id":212471309,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMjQ3MTMwOQ==","user":{"login":"jorgecorreiaptc","id":12597000,"node_id":"MDQ6VXNlcjEyNTk3MDAw","avatar_url":"https://avatars0.githubusercontent.com/u/12597000?v=4","gravatar_id":"","url":"https://api.github.com/users/jorgecorreiaptc","html_url":"https://github.com/jorgecorreiaptc","followers_url":"https://api.github.com/users/jorgecorreiaptc/followers","following_url":"https://api.github.com/users/jorgecorreiaptc/following{/other_user}","gists_url":"https://api.github.com/users/jorgecorreiaptc/gists{/gist_id}","starred_url":"https://api.github.com/users/jorgecorreiaptc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jorgecorreiaptc/subscriptions","organizations_url":"https://api.github.com/users/jorgecorreiaptc/orgs","repos_url":"https://api.github.com/users/jorgecorreiaptc/repos","events_url":"https://api.github.com/users/jorgecorreiaptc/events{/privacy}","received_events_url":"https://api.github.com/users/jorgecorreiaptc/received_events","type":"User","site_admin":false},"created_at":"2016-04-20T15:13:32Z","updated_at":"2016-04-20T15:18:01Z","author_association":"NONE","body":"I downloaded the ElasticSearch (v2.3.1) just to make sure I have a clean cluster with the default configurations. \n\nBellow is the java complete java code I am using to configure the Index Template:\n\n``` java\npackage pt.aig.aigx.index.configurator;\n\nimport java.io.IOException;\nimport java.net.InetAddress;\nimport java.net.UnknownHostException;\n\nimport org.elasticsearch.action.admin.indices.template.put.PutIndexTemplateRequestBuilder;\nimport org.elasticsearch.client.Client;\nimport org.elasticsearch.client.transport.TransportClient;\nimport org.elasticsearch.common.settings.Settings;\nimport org.elasticsearch.common.transport.InetSocketTransportAddress;\n\npublic class IndexTemplateTest {\n\n    private static final String[] HOSTS = {\"127.0.0.1\"};\n\n    private static final int PORT = 9300;\n\n    private static final String CLUSTER_NAME = \"elasticsearch\";\n\n    private static final String NODE_NAME = \"rest-analytics\";\n\n    private static final String MULTICAST_ENABLED = \"false\";\n\n    public static void main(String[] args) throws Exception {\n\n        Client client = getESClient();\n\n        createIndexTemplate(client, \"index_template\", \"template*\");\n    }\n\n    private static void createIndexTemplate(Client client, String indexDailyPackageTemplateName, String indexDailyPackageMatch) throws IOException {\n\n        String typeA = \"{\\\"properties\\\":{\\\"id\\\":{\\\"type\\\":\\\"long\\\"},\\\"type\\\":{\\\"properties\\\":{\\\"name\\\":{\\\"type\\\":\\\"string\\\",\\\"fields\\\":{\\\"raw\\\":{\\\"type\\\":\\\"string\\\",\\\"index\\\":\\\"not_analyzed\\\"}}},\\\"id\\\":{\\\"type\\\":\\\"long\\\"}}},\\\"uuid\\\":{\\\"type\\\":\\\"string\\\",\\\"fields\\\":{\\\"raw\\\":{\\\"type\\\":\\\"string\\\",\\\"index\\\":\\\"not_analyzed\\\"}}}},\\\"dynamic\\\":\\\"false\\\"}\";\n        String typeB = \"{\\\"properties\\\":{\\\"numMessages\\\":{\\\"type\\\":\\\"long\\\"},\\\"id\\\":{\\\"type\\\":\\\"long\\\"}},\\\"dynamic\\\":\\\"false\\\"}\";\n\n        PutIndexTemplateRequestBuilder indexTemplateRequestBuilder = client.admin().indices().preparePutTemplate(indexDailyPackageTemplateName)\n            .addMapping(\"type_a\", typeA).addMapping(\"type_b\", typeB).setTemplate(indexDailyPackageMatch);\n\n        indexTemplateRequestBuilder.execute().actionGet();\n    }\n\n    private static Client getESClient() {\n        Settings settings = buildElasticSearchSettings();\n\n        TransportClient transportClient = TransportClient.builder().settings(settings).build();\n        for (String host : HOSTS) {\n            try {\n                transportClient = transportClient.addTransportAddress(new InetSocketTransportAddress(InetAddress.getByName(host), PORT));\n            } catch (UnknownHostException e) {\n                throw new RuntimeException(e);\n            }\n        }\n\n        return transportClient;\n    }\n\n    private static Settings buildElasticSearchSettings() {\n\n      //@formatter:off\n        return Settings.settingsBuilder()\n            .put(\"cluster.name\", CLUSTER_NAME)\n            .put(\"node.name\", NODE_NAME)\n            .put(\"discovery.zen.ping.multicast.enabled\", MULTICAST_ENABLED)\n            .put(\"discovery.zen.ping.unicast.hosts\", getUnicastHostsArray())\n            .build();\n        //@formatter:on\n    }\n\n    private static String getUnicastHostsArray() {\n        String hosts = \"\";\n        int it = 0;\n        for (String host : HOSTS) {\n            if (it == 0) {\n                hosts += host + \":\" + PORT;\n            } else {\n                hosts += \",\" + host + \":\" + PORT;\n            }\n            ++it;\n        }\n\n        return hosts;\n    }\n\n}\n```\n\nThe dependency I currently have in my pom.xml\n\n``` xml\n<dependency>\n    <groupId>org.elasticsearch</groupId>\n    <artifactId>elasticsearch</artifactId>\n    <version>2.3.1</version>\n</dependency>\n```\n\nAnd still have the same problem\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/212499785","html_url":"https://github.com/elastic/elasticsearch/issues/17886#issuecomment-212499785","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17886","id":212499785,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMjQ5OTc4NQ==","user":{"login":"johtani","id":1142449,"node_id":"MDQ6VXNlcjExNDI0NDk=","avatar_url":"https://avatars0.githubusercontent.com/u/1142449?v=4","gravatar_id":"","url":"https://api.github.com/users/johtani","html_url":"https://github.com/johtani","followers_url":"https://api.github.com/users/johtani/followers","following_url":"https://api.github.com/users/johtani/following{/other_user}","gists_url":"https://api.github.com/users/johtani/gists{/gist_id}","starred_url":"https://api.github.com/users/johtani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/johtani/subscriptions","organizations_url":"https://api.github.com/users/johtani/orgs","repos_url":"https://api.github.com/users/johtani/repos","events_url":"https://api.github.com/users/johtani/events{/privacy}","received_events_url":"https://api.github.com/users/johtani/received_events","type":"User","site_admin":false},"created_at":"2016-04-20T16:22:36Z","updated_at":"2016-04-20T16:22:36Z","author_association":"CONTRIBUTOR","body":"hi @jorgecorreiaptc \n\nI changed your code as follows, added each type name in mapping.\n\n```\n        String typeA = \"{\\\"type_a\\\":{\\\"properties\\\":{\\\"id\\\"...\\\"dynamic\\\":\\\"false\\\"}}\";\n        String typeB = \"{\\\"type_b\\\":{\\\"properties\\\":{\\\"num...,\\\"dynamic\\\":\\\"false\\\"}}\";\n```\n\nThen, it works for me. \n\nI think it is related to https://github.com/elastic/elasticsearch/issues/10436#issuecomment-172060358\n\ncc: @clintongormley \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/212503414","html_url":"https://github.com/elastic/elasticsearch/issues/17886#issuecomment-212503414","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17886","id":212503414,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMjUwMzQxNA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-04-20T16:33:47Z","updated_at":"2016-04-20T16:33:47Z","author_association":"CONTRIBUTOR","body":"thanks @johtani \n\nClosing in favour of https://github.com/elastic/elasticsearch/issues/10436\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/212508768","html_url":"https://github.com/elastic/elasticsearch/issues/17886#issuecomment-212508768","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17886","id":212508768,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMjUwODc2OA==","user":{"login":"jorgecorreiaptc","id":12597000,"node_id":"MDQ6VXNlcjEyNTk3MDAw","avatar_url":"https://avatars0.githubusercontent.com/u/12597000?v=4","gravatar_id":"","url":"https://api.github.com/users/jorgecorreiaptc","html_url":"https://github.com/jorgecorreiaptc","followers_url":"https://api.github.com/users/jorgecorreiaptc/followers","following_url":"https://api.github.com/users/jorgecorreiaptc/following{/other_user}","gists_url":"https://api.github.com/users/jorgecorreiaptc/gists{/gist_id}","starred_url":"https://api.github.com/users/jorgecorreiaptc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jorgecorreiaptc/subscriptions","organizations_url":"https://api.github.com/users/jorgecorreiaptc/orgs","repos_url":"https://api.github.com/users/jorgecorreiaptc/repos","events_url":"https://api.github.com/users/jorgecorreiaptc/events{/privacy}","received_events_url":"https://api.github.com/users/jorgecorreiaptc/received_events","type":"User","site_admin":false},"created_at":"2016-04-20T16:45:54Z","updated_at":"2016-04-20T16:45:54Z","author_association":"NONE","body":"Hi @johtani \n\nI did those changes and it is working. \n\nThank you @johtani and @clintongormley \n","performed_via_github_app":null}]