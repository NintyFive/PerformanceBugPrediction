{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/36065","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36065/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36065/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36065/events","html_url":"https://github.com/elastic/elasticsearch/issues/36065","id":385822733,"node_id":"MDU6SXNzdWUzODU4MjI3MzM=","number":36065,"title":"[CI] Suite timeout in xpack.watcher.test.integration.SingleNodeTests","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"labels":[{"id":912845062,"node_id":"MDU6TGFiZWw5MTI4NDUwNjI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Watcher","name":":Core/Features/Watcher","color":"0e8a16","default":false,"description":""},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-11-29T16:36:15Z","updated_at":"2019-02-11T19:23:26Z","closed_at":"2019-02-11T19:23:25Z","author_association":"MEMBER","active_lock_reason":null,"body":"Build: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+intake/430/console\r\n\r\n```\r\n16:57:34   2> WARNING: Suite execution timed out: org.elasticsearch.xpack.watcher.test.integration.SingleNodeTests\r\n16:57:34   2> ==== jstack at approximately timeout time ====\r\n16:57:34   2> \"elasticsearch[node_s0][management][T#2]\" ID=247 TIMED_WAITING on org.elasticsearch.common.util.concurrent.EsExecutors$ExecutorScalingQueue@ddb4e9f\r\n16:57:34   2> \tat sun.misc.Unsafe.park(Native Method)\r\n16:57:34   2> \t- timed waiting on org.elasticsearch.common.util.concurrent.EsExecutors$ExecutorScalingQueue@ddb4e9f\r\n16:57:34   2> \tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\r\n16:57:34   2> \tat java.util.concurrent.LinkedTransferQueue.awaitMatch(LinkedTransferQueue.java:734)\r\n16:57:34   2> \tat java.util.concurrent.LinkedTransferQueue.xfer(LinkedTransferQueue.java:647)\r\n16:57:34   2> \tat java.util.concurrent.LinkedTransferQueue.poll(LinkedTransferQueue.java:1277)\r\n16:57:34   2> \tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1073)\r\n16:57:34   2> \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\r\n16:57:34   2> \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n16:57:34   2> \tat java.lang.Thread.run(Thread.java:748)\r\n16:57:34   2> \"elasticsearch[node_s0][watcher][T#2]\" ID=246 WAITING on java.util.concurrent.CountDownLatch$Sync@3c9ce712\r\n16:57:34   2> \tat sun.misc.Unsafe.park(Native Method)\r\n16:57:34   2> \t- waiting on java.util.concurrent.CountDownLatch$Sync@3c9ce712\r\n16:57:34   2> \tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n16:57:34   2> \tat java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:836)\r\n16:57:34   2> \tat java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(AbstractQueuedSynchronizer.java:997)\r\n16:57:34   2> \tat java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1304)\r\n16:57:34   2> \tat java.util.concurrent.CountDownLatch.await(CountDownLatch.java:231)\r\n16:57:34   2> \tat org.elasticsearch.action.bulk.BulkRequestHandler.execute(BulkRequestHandler.java:85)\r\n16:57:34   2> \tat org.elasticsearch.action.bulk.BulkProcessor.execute(BulkProcessor.java:372)\r\n16:57:34   2> \tat org.elasticsearch.action.bulk.BulkProcessor.executeIfNeeded(BulkProcessor.java:363)\r\n16:57:34   2> \tat org.elasticsearch.action.bulk.BulkProcessor.internalAdd(BulkProcessor.java:320)\r\n16:57:34   2> \t- locked org.elasticsearch.action.bulk.BulkProcessor@42215896\r\n16:57:34   2> \tat org.elasticsearch.action.bulk.BulkProcessor.add(BulkProcessor.java:303)\r\n16:57:34   2> \tat org.elasticsearch.action.bulk.BulkProcessor.add(BulkProcessor.java:299)\r\n16:57:34   2> \tat org.elasticsearch.action.bulk.BulkProcessor.add(BulkProcessor.java:285)\r\n16:57:34   2> \tat org.elasticsearch.xpack.watcher.history.HistoryStore.put(HistoryStore.java:52)\r\n16:57:34   2> \tat org.elasticsearch.xpack.watcher.execution.ExecutionService.execute(ExecutionService.java:318)\r\n16:57:34   2> \tat org.elasticsearch.xpack.watcher.execution.ExecutionService.lambda$executeAsync$5(ExecutionService.java:398)\r\n16:57:34   2> \tat org.elasticsearch.xpack.watcher.execution.ExecutionService$$Lambda$2830/108281761.run(Unknown Source)\r\n16:57:34   2> \tat org.elasticsearch.xpack.watcher.execution.ExecutionService$WatchExecutionTask.run(ExecutionService.java:547)\r\n16:57:34   2> \tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:660)\r\n16:57:34   2> \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n16:57:34   2> \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n16:57:34   2> \tat java.lang.Thread.run(Thread.java:748)\r\n16:57:34   2> \tLocked synchronizers:\r\n16:57:34   2> \t- java.util.concurrent.ThreadPoolExecutor$Worker@59d63772\r\n16:57:34   2> \"elasticsearch[node_s0][warmer][T#1]\" ID=245 WAITING on org.elasticsearch.common.util.concurrent.EsExecutors$ExecutorScalingQueue@3a8cafa8\r\n16:57:34   2> \tat sun.misc.Unsafe.park(Native Method)\r\n16:57:34   2> \t- waiting on org.elasticsearch.common.util.concurrent.EsExecutors$ExecutorScalingQueue@3a8cafa8\r\n16:57:34   2> \tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n16:57:34   2> \tat java.util.concurrent.LinkedTransferQueue.awaitMatch(LinkedTransferQueue.java:737)\r\n16:57:34   2> \tat java.util.concurrent.LinkedTransferQueue.xfer(LinkedTransferQueue.java:647)\r\n16:57:34   2> \tat java.util.concurrent.LinkedTransferQueue.take(LinkedTransferQueue.java:1269)\r\n16:57:34   2> \tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)\r\n16:57:34   2> \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\r\n16:57:34   2> \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n16:57:34   2> \tat java.lang.Thread.run(Thread.java:748)\r\n16:57:34   2> \"elasticsearch[node_s0][watcher][T#1]\" ID=244 WAITING on java.util.concurrent.LinkedTransferQueue@6df4b1d0\r\n16:57:34   2> \tat sun.misc.Unsafe.park(Native Method)\r\n16:57:34   2> \t- waiting on java.util.concurrent.LinkedTransferQueue@6df4b1d0\r\n16:57:34   2> \tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n16:57:34   2> \tat java.util.concurrent.LinkedTransferQueue.awaitMatch(LinkedTransferQueue.java:737)\r\n16:57:34   2> \tat java.util.concurrent.LinkedTransferQueue.xfer(LinkedTransferQueue.java:647)\r\n16:57:34   2> \tat java.util.concurrent.LinkedTransferQueue.take(LinkedTransferQueue.java:1269)\r\n16:57:34   2> \tat org.elasticsearch.common.util.concurrent.SizeBlockingQueue.take(SizeBlockingQueue.java:165)\r\n16:57:34   2> \tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)\r\n16:57:34   2> \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\r\n16:57:34   2> \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n16:57:34   2> \tat java.lang.Thread.run(Thread.java:748)\r\n16:57:34   2> \"elasticsearch[node_s0][get][T#1]\" ID=243 WAITING on java.util.concurrent.LinkedTransferQueue@25d9a110\r\n16:57:34   2> \tat sun.misc.Unsafe.park(Native Method)\r\n16:57:34   2> \t- waiting on java.util.concurrent.LinkedTransferQueue@25d9a110\r\n16:57:34   2> \tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n16:57:34   2> \tat java.util.concurrent.LinkedTransferQueue.awaitMatch(LinkedTransferQueue.java:737)\r\n16:57:34   2> \tat java.util.concurrent.LinkedTransferQueue.xfer(LinkedTransferQueue.java:647)\r\n16:57:34   2> \tat java.util.concurrent.LinkedTransferQueue.take(LinkedTransferQueue.java:1269)\r\n16:57:34   2> \tat org.elasticsearch.common.util.concurrent.SizeBlockingQueue.take(SizeBlockingQueue.java:165)\r\n16:57:34   2> \tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)\r\n16:57:34   2> \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\r\n16:57:34   2> \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n16:57:34   2> \tat java.lang.Thread.run(Thread.java:748)\r\n16:57:34   2> \"elasticsearch[node_s0][write][T#1]\" ID=242 WAITING on java.util.concurrent.LinkedTransferQueue@7e2676ce\r\n16:57:34   2> \tat sun.misc.Unsafe.park(Native Method)\r\n16:57:34   2> \t- waiting on java.util.concurrent.LinkedTransferQueue@7e2676ce\r\n16:57:34   2> \tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n16:57:34   2> \tat java.util.concurrent.LinkedTransferQueue.awaitMatch(LinkedTransferQueue.java:737)\r\n16:57:34   2> \tat java.util.concurrent.LinkedTransferQueue.xfer(LinkedTransferQueue.java:647)\r\n16:57:34   2> \tat java.util.concurrent.LinkedTransferQueue.take(LinkedTransferQueue.java:1269)\r\n16:57:34   2> \tat org.elasticsearch.common.util.concurrent.SizeBlockingQueue.take(SizeBlockingQueue.java:165)\r\n16:57:34   2> \tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)\r\n16:57:34   2> \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\r\n16:57:34   2> \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n16:57:34   2> \tat java.lang.Thread.run(Thread.java:748)\r\n16:57:34   2> \"elasticsearch[node_s0][search][T#2]\" ID=241 WAITING on java.util.concurrent.LinkedTransferQueue@2188674d\r\n16:57:34   2> \tat sun.misc.Unsafe.park(Native Method)\r\n16:57:34   2> \t- waiting on java.util.concurrent.LinkedTransferQueue@2188674d\r\n16:57:34   2> \tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n16:57:34   2> \tat java.util.concurrent.LinkedTransferQueue.awaitMatch(LinkedTransferQueue.java:737)\r\n```\r\n\r\nI cannot reproduce this locally, nevertheless:\r\n```\r\n./gradlew :x-pack:plugin:watcher:test \\\r\n  -Dtests.seed=3B8B6AE36FA884D2 \\\r\n  -Dtests.class=org.elasticsearch.xpack.watcher.test.integration.SingleNodeTests \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=en-US \\\r\n  -Dtests.timezone=Etc/UTC \\\r\n  -Dcompiler.java=11 \\\r\n  -Druntime.java=8\r\n```\r\n","closed_by":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"performed_via_github_app":null}