{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/59145","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/59145/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/59145/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/59145/events","html_url":"https://github.com/elastic/elasticsearch/issues/59145","id":652311497,"node_id":"MDU6SXNzdWU2NTIzMTE0OTc=","number":59145,"title":"[CI] :qa:os:destructiveBatsTest.upgrade failures","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"labels":[{"id":106454670,"node_id":"MDU6TGFiZWwxMDY0NTQ2NzA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Build","name":":Delivery/Build","color":"0e8a16","default":false,"description":"Build or test infrastructure"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2020-07-07T13:12:39Z","updated_at":"2020-11-11T21:36:14Z","closed_at":"2020-08-06T16:19:26Z","author_association":"MEMBER","active_lock_reason":null,"body":"Several instances of failures in `:qa:os:destructiveBatsTest.upgrade`\r\n\r\ne.g.\r\nhttps://gradle-enterprise.elastic.co/s/mudcssujz53gq\r\nhttps://gradle-enterprise.elastic.co/s/jzzokkmwp4vzk\r\n\r\nExcerpt:\r\n```\r\n:qa:os:destructiveBatsTest.upgrade FAILED\r\n1..12\r\nok 1 [UPGRADE] install old version\r\nok 2 [UPGRADE] modify keystore\r\nok 3 [UPGRADE] start old version\r\nok 4 [UPGRADE] check elasticsearch version is old version\r\nok 5 [UPGRADE] index some documents into a few indexes\r\nok 6 [UPGRADE] verify that the documents are there\r\nok 7 [UPGRADE] stop old version\r\nok 8 [UPGRADE] install version under test\r\nnot ok 9 [UPGRADE] start version under test\r\n# (from function `wait_for_elasticsearch_status' in file /var/lib/jenkins/workspace/elastic+elasticsearch+master+multijob+packaging-tests-unix-gcp/os/oraclelinux-7-packaging/qa/os/bats/utils/utils.bash, line 474,\r\n#  from function `start_elasticsearch_service' in file /var/lib/jenkins/workspace/elastic+elasticsearch+master+multijob+packaging-tests-unix-gcp/os/oraclelinux-7-packaging/qa/os/bats/utils/utils.bash, line 295,\r\n#  in test file /var/lib/jenkins/workspace/elastic+elasticsearch+master+multijob+packaging-tests-unix-gcp/os/oraclelinux-7-packaging/qa/os/bats/upgrade/80_upgrade.bats, line 113)\r\n#   `start_elasticsearch_service yellow library' failed\r\n# BWC test version: 7.1.0\r\n# Making sure elasticsearch is up...\r\n# --2020-07-05 09:18:41--  http://localhost:9200/_cluster/health\r\n# Resolving localhost (localhost)... ::1, 127.0.0.1\r\n# Connecting to localhost (localhost)|::1|:9200... connected.\r\n# HTTP request sent, awaiting response... 200 OK\r\n# Length: 385 [application/json]\r\n# Saving to: ‘STDOUT’\r\n# {\"cluster_name\":\"elasticsearch\",\"status\":\"red\",\"timed_out\":false,\"number_of_nodes\":1,\"number_of_data_nodes\":1,\"active_primary_shards\":0,\"active_shards\":0,\"relocating_shards\":0,\"initializing_shards\":0,\"unassigned_shards\":4,\"delayed_unassigned_shards\":0,\"number_of_pending_tasks\":1,\"number_of_in_flight_fetch\":0,\"task_max_waiting_in_queue_millis\":0,\"active_shards_percent_as_number\":0.0}\r\n#      0K                                                       100% 46.6M=0s\r\n# \r\n# 2020-07-05 09:18:41 (46.6 MB/s) - written to stdout [385/385]\r\n# \r\n# Trying to connect to elasticsearch and wait for expected status yellow for index library\r\n# {\r\n#   \"cluster_name\" : \"elasticsearch\",\r\n#   \"status\" : \"yellow\",\r\n#   \"timed_out\" : false,\r\n#   \"number_of_nodes\" : 1,\r\n#   \"number_of_data_nodes\" : 1,\r\n#   \"active_primary_shards\" : 1,\r\n#   \"active_shards\" : 1,\r\n#   \"relocating_shards\" : 0,\r\n#   \"initializing_shards\" : 0,\r\n#   \"unassigned_shards\" : 1,\r\n#   \"delayed_unassigned_shards\" : 0,\r\n#   \"number_of_pending_tasks\" : 3,\r\n#   \"number_of_in_flight_fetch\" : 0,\r\n#   \"task_max_waiting_in_queue_millis\" : 35,\r\n#   \"active_shards_percent_as_number\" : 25.0\r\n# }\r\n# Connected\r\n# Checking that the cluster health matches the waited for status...\r\n# unexpected status:  'red' wanted 'yellow'\r\n# Here's the elasticsearch log:\r\n# [2020-07-05T09:18:12,970][INFO ][o.e.e.NodeEnvironment    ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] using [1] data paths, mounts [[/ (/dev/sda1)]], net usable_space [304.5gb], net total_space [349.9gb], types [xfs]\r\n# [2020-07-05T09:18:12,974][INFO ][o.e.e.NodeEnvironment    ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] heap size [989.8mb], compressed ordinary object pointers [true]\r\n# [2020-07-05T09:18:12,976][INFO ][o.e.n.Node               ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] node name [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556], node ID [qyzX7fyUSx67ui4CSahBWg], cluster name [elasticsearch]\r\n# [2020-07-05T09:18:12,977][INFO ][o.e.n.Node               ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] version[7.1.0], pid[15309], build[oss/rpm/606a173/2019-05-16T00:43:15.323135Z], OS[Linux/4.14.35-1902.303.5.3.el7uek.x86_64/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/11.0.2/11.0.2+7]\r\n# [2020-07-05T09:18:12,977][INFO ][o.e.n.Node               ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] JVM home [/var/lib/jenkins/.java/openjdk-11.0.2-linux]\r\n# [2020-07-05T09:18:12,979][INFO ][o.e.n.Node               ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] JVM arguments [-Xms1g, -Xmx1g, -XX:+UseConcMarkSweepGC, -XX:CMSInitiatingOccupancyFraction=75, -XX:+UseCMSInitiatingOccupancyOnly, -Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Djava.io.tmpdir=/tmp/elasticsearch-10952062091795249794, -XX:+HeapDumpOnOutOfMemoryError, -XX:HeapDumpPath=/var/lib/elasticsearch, -XX:ErrorFile=/var/log/elasticsearch/hs_err_pid%p.log, -Xlog:gc*,gc+age=trace,safepoint:file=/var/log/elasticsearch/gc.log:utctime,pid,tags:filecount=32,filesize=64m, -Djava.locale.providers=COMPAT, -Dio.netty.allocator.type=unpooled, -Des.path.home=/usr/share/elasticsearch, -Des.path.conf=/etc/elasticsearch, -Des.distribution.flavor=oss, -Des.distribution.type=rpm, -Des.bundled_jdk=true]\r\n# [2020-07-05T09:18:13,840][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [aggs-matrix-stats]\r\n# [2020-07-05T09:18:13,841][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [analysis-common]\r\n# [2020-07-05T09:18:13,841][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [ingest-common]\r\n# [2020-07-05T09:18:13,841][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [ingest-geoip]\r\n# [2020-07-05T09:18:13,842][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [ingest-user-agent]\r\n# [2020-07-05T09:18:13,842][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [lang-expression]\r\n# [2020-07-05T09:18:13,842][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [lang-mustache]\r\n# [2020-07-05T09:18:13,843][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [lang-painless]\r\n# [2020-07-05T09:18:13,843][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [mapper-extras]\r\n# [2020-07-05T09:18:13,843][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [parent-join]\r\n# [2020-07-05T09:18:13,844][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [percolator]\r\n# [2020-07-05T09:18:13,844][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [rank-eval]\r\n# [2020-07-05T09:18:13,844][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [reindex]\r\n# [2020-07-05T09:18:13,845][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [repository-url]\r\n# [2020-07-05T09:18:13,845][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [transport-netty4]\r\n# [2020-07-05T09:18:13,846][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] no plugins loaded\r\n# [2020-07-05T09:18:16,752][INFO ][o.e.d.DiscoveryModule    ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] using discovery type [zen] and seed hosts providers [settings]\r\n# [2020-07-05T09:18:17,232][INFO ][o.e.n.Node               ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] initialized\r\n# [2020-07-05T09:18:17,233][INFO ][o.e.n.Node               ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] starting ...\r\n# [2020-07-05T09:18:17,383][INFO ][o.e.t.TransportService   ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] publish_address {127.0.0.1:9300}, bound_addresses {[::1]:9300}, {127.0.0.1:9300}\r\n# [2020-07-05T09:18:17,395][WARN ][o.e.b.BootstrapChecks    ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] the default discovery settings are unsuitable for production use; at least one of [discovery.seed_hosts, discovery.seed_providers, cluster.initial_master_nodes] must be configured\r\n# [2020-07-05T09:18:17,414][INFO ][o.e.c.c.ClusterBootstrapService] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] no discovery configuration found, will perform best-effort cluster bootstrapping after [3s] unless existing master is discovered\r\n# [2020-07-05T09:18:20,423][INFO ][o.e.c.c.Coordinator      ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] setting initial configuration to VotingConfiguration{qyzX7fyUSx67ui4CSahBWg}\r\n# [2020-07-05T09:18:20,575][INFO ][o.e.c.s.MasterService    ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] elected-as-master ([1] nodes joined)[{elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556}{qyzX7fyUSx67ui4CSahBWg}{2Me0Xe1rRL-oxr7Y-gdKmQ}{127.0.0.1}{127.0.0.1:9300} elect leader, _BECOME_MASTER_TASK_, _FINISH_ELECTION_], term: 1, version: 1, reason: master node changed {previous [], current [{elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556}{qyzX7fyUSx67ui4CSahBWg}{2Me0Xe1rRL-oxr7Y-gdKmQ}{127.0.0.1}{127.0.0.1:9300}]}\r\n# [2020-07-05T09:18:20,599][INFO ][o.e.c.c.CoordinationState] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] cluster UUID set to [N2iM-pl0Sm-AscxIHpqSdA]\r\n# [2020-07-05T09:18:20,613][INFO ][o.e.c.s.ClusterApplierService] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] master node changed {previous [], current [{elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556}{qyzX7fyUSx67ui4CSahBWg}{2Me0Xe1rRL-oxr7Y-gdKmQ}{127.0.0.1}{127.0.0.1:9300}]}, term: 1, version: 1, reason: Publication{term=1, version=1}\r\n# [2020-07-05T09:18:20,638][INFO ][o.e.g.GatewayService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] recovered [0] indices into cluster_state\r\n# [2020-07-05T09:18:20,642][INFO ][o.e.h.AbstractHttpServerTransport] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] publish_address {127.0.0.1:9200}, bound_addresses {[::1]:9200}, {127.0.0.1:9200}\r\n# [2020-07-05T09:18:20,642][INFO ][o.e.n.Node               ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] started\r\n# [2020-07-05T09:18:21,991][INFO ][o.e.c.m.MetaDataCreateIndexService] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] [library] creating index, cause [auto(bulk api)], templates [], shards [1]/[1], mappings []\r\n# [2020-07-05T09:18:22,416][INFO ][o.e.c.m.MetaDataMappingService] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] [library/xXw5ropCSGC2ZnCmiBCGJw] create_mapping [_doc]\r\n# [2020-07-05T09:18:22,555][INFO ][o.e.c.m.MetaDataCreateIndexService] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] [library2] creating index, cause [auto(bulk api)], templates [], shards [1]/[1], mappings []\r\n# [2020-07-05T09:18:22,647][INFO ][o.e.c.m.MetaDataMappingService] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] [library2/KTzwhwojT52gmset37TRhw] create_mapping [_doc]\r\n# [2020-07-05T09:18:23,093][INFO ][o.e.n.Node               ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] stopping ...\r\n# [2020-07-05T09:18:23,171][INFO ][o.e.n.Node               ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] stopped\r\n# [2020-07-05T09:18:23,171][INFO ][o.e.n.Node               ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] closing ...\r\n# [2020-07-05T09:18:23,180][INFO ][o.e.n.Node               ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] closed\r\n# [2020-07-05T09:18:36,238][INFO ][o.e.n.Node               ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] version[8.0.0-SNAPSHOT], pid[16876], build[oss/rpm/283cd8369d76c51e3f578dadf26cee7b8fc5f906/2020-07-05T09:07:21.960995Z], OS[Linux/4.14.35-1902.303.5.3.el7uek.x86_64/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/11.0.2/11.0.2+7]\r\n# [2020-07-05T09:18:36,243][INFO ][o.e.n.Node               ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] JVM home [/var/lib/jenkins/.java/openjdk-11.0.2-linux]\r\n# [2020-07-05T09:18:36,244][INFO ][o.e.n.Node               ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] JVM arguments [-Xshare:auto, -Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dio.netty.allocator.numDirectArenas=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Djava.locale.providers=SPI,COMPAT, -Xms1g, -Xmx1g, -XX:+UseConcMarkSweepGC, -XX:CMSInitiatingOccupancyFraction=75, -XX:+UseCMSInitiatingOccupancyOnly, -Djava.io.tmpdir=/tmp/elasticsearch-18271609915702022712, -XX:+HeapDumpOnOutOfMemoryError, -XX:HeapDumpPath=/var/lib/elasticsearch, -XX:ErrorFile=/var/log/elasticsearch/hs_err_pid%p.log, -Xlog:gc*,gc+age=trace,safepoint:file=/var/log/elasticsearch/gc.log:utctime,pid,tags:filecount=32,filesize=64m, -XX:MaxDirectMemorySize=536870912, -Des.path.home=/usr/share/elasticsearch, -Des.path.conf=/etc/elasticsearch, -Des.distribution.flavor=oss, -Des.distribution.type=rpm, -Des.bundled_jdk=true]\r\n# [2020-07-05T09:18:36,245][WARN ][o.e.n.Node               ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] version [8.0.0-SNAPSHOT] is a pre-release version of Elasticsearch and is not suitable for production\r\n# [2020-07-05T09:18:37,248][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [aggs-matrix-stats]\r\n# [2020-07-05T09:18:37,248][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [analysis-common]\r\n# [2020-07-05T09:18:37,248][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [geo]\r\n# [2020-07-05T09:18:37,248][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [ingest-common]\r\n# [2020-07-05T09:18:37,249][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [ingest-geoip]\r\n# [2020-07-05T09:18:37,249][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [ingest-user-agent]\r\n# [2020-07-05T09:18:37,249][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [kibana]\r\n# [2020-07-05T09:18:37,249][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [lang-expression]\r\n# [2020-07-05T09:18:37,249][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [lang-mustache]\r\n# [2020-07-05T09:18:37,250][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [lang-painless]\r\n# [2020-07-05T09:18:37,250][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [mapper-extras]\r\n# [2020-07-05T09:18:37,250][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [parent-join]\r\n# [2020-07-05T09:18:37,250][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [percolator]\r\n# [2020-07-05T09:18:37,251][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [rank-eval]\r\n# [2020-07-05T09:18:37,251][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [reindex]\r\n# [2020-07-05T09:18:37,251][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [repository-url]\r\n# [2020-07-05T09:18:37,251][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [systemd]\r\n# [2020-07-05T09:18:37,251][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [tasks]\r\n# [2020-07-05T09:18:37,252][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] loaded module [transport-netty4]\r\n# [2020-07-05T09:18:37,252][INFO ][o.e.p.PluginsService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] no plugins loaded\r\n# [2020-07-05T09:18:37,312][INFO ][o.e.e.NodeEnvironment    ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] using [1] data paths, mounts [[/ (/dev/sda1)]], net usable_space [304.5gb], net total_space [349.9gb], types [xfs]\r\n# [2020-07-05T09:18:37,313][INFO ][o.e.e.NodeEnvironment    ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] heap size [989.8mb], compressed ordinary object pointers [true]\r\n# [2020-07-05T09:18:37,318][INFO ][o.e.e.NodeEnvironment    ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] upgrading legacy data folders: [/var/lib/elasticsearch]\r\n# [2020-07-05T09:18:37,385][INFO ][o.e.e.NodeEnvironment    ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] data folder upgrade: moved from [/var/lib/elasticsearch/nodes/0/indices] to [/var/lib/elasticsearch/indices]\r\n# [2020-07-05T09:18:37,385][INFO ][o.e.e.NodeEnvironment    ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] data folder upgrade: moved from [/var/lib/elasticsearch/nodes/0/_state] to [/var/lib/elasticsearch/_state]\r\n# [2020-07-05T09:18:37,395][INFO ][o.e.n.Node               ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] node name [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556], node ID [qyzX7fyUSx67ui4CSahBWg], cluster name [elasticsearch]\r\n# [2020-07-05T09:18:40,595][INFO ][o.e.d.DiscoveryModule    ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] using discovery type [zen] and seed hosts providers [settings]\r\n# [2020-07-05T09:18:41,100][INFO ][o.e.n.Node               ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] initialized\r\n# [2020-07-05T09:18:41,101][INFO ][o.e.n.Node               ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] starting ...\r\n# [2020-07-05T09:18:41,273][INFO ][o.e.t.TransportService   ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] publish_address {127.0.0.1:9300}, bound_addresses {[::1]:9300}, {127.0.0.1:9300}\r\n# [2020-07-05T09:18:41,561][WARN ][o.e.b.BootstrapChecks    ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] the default discovery settings are unsuitable for production use; at least one of [discovery.seed_hosts, discovery.seed_providers, cluster.initial_master_nodes] must be configured\r\n# [2020-07-05T09:18:41,563][INFO ][o.e.c.c.Coordinator      ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] cluster UUID [N2iM-pl0Sm-AscxIHpqSdA]\r\n# [2020-07-05T09:18:41,576][INFO ][o.e.c.c.ClusterBootstrapService] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] no discovery configuration found, will perform best-effort cluster bootstrapping after [3s] unless existing master is discovered\r\n# [2020-07-05T09:18:41,718][INFO ][o.e.c.s.MasterService    ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] elected-as-master ([1] nodes joined)[{elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556}{qyzX7fyUSx67ui4CSahBWg}{LoEzAaAeTOmv6Q28m1Jfzw}{127.0.0.1}{127.0.0.1:9300}{dimr} elect leader, _BECOME_MASTER_TASK_, _FINISH_ELECTION_], term: 2, version: 9, delta: master node changed {previous [], current [{elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556}{qyzX7fyUSx67ui4CSahBWg}{LoEzAaAeTOmv6Q28m1Jfzw}{127.0.0.1}{127.0.0.1:9300}{dimr}]}\r\n# [2020-07-05T09:18:41,774][INFO ][o.e.c.s.ClusterApplierService] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] master node changed {previous [], current [{elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556}{qyzX7fyUSx67ui4CSahBWg}{LoEzAaAeTOmv6Q28m1Jfzw}{127.0.0.1}{127.0.0.1:9300}{dimr}]}, term: 2, version: 9, reason: Publication{term=2, version=9}\r\n# [2020-07-05T09:18:41,796][INFO ][o.e.h.AbstractHttpServerTransport] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] publish_address {127.0.0.1:9200}, bound_addresses {[::1]:9200}, {127.0.0.1:9200}\r\n# [2020-07-05T09:18:41,797][INFO ][o.e.n.Node               ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] started\r\n# [2020-07-05T09:18:41,843][INFO ][o.e.g.GatewayService     ] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] recovered [2] indices into cluster_state\r\n# [2020-07-05T09:18:42,332][INFO ][o.e.c.r.a.AllocationService] [elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556] current.health=\"YELLOW\" message=\"Cluster health status changed from [RED] to [YELLOW] (reason: [shards started [[library2][0]]]).\" previous.health=\"RED\" reason=\"shards started [[library2][0]]\"\r\n# Here's the tail of the log at /var/log/messages:\r\n# Jul  5 09:17:59 elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556 systemd: Reloading.\r\n# Jul  5 09:18:05 elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556 systemd: Stopped Apply Kernel Variables.\r\n# Jul  5 09:18:05 elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556 systemd: Stopping Apply Kernel Variables...\r\n# Jul  5 09:18:05 elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556 systemd: Starting Apply Kernel Variables...\r\n# Jul  5 09:18:05 elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556 systemd: Started Apply Kernel Variables.\r\n# Jul  5 09:18:10 elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556 systemd: Reloading.\r\n# Jul  5 09:18:10 elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556 systemd: Reloading.\r\n# Jul  5 09:18:10 elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556 systemd: Started Elasticsearch.\r\n# Jul  5 09:18:10 elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556 elasticsearch: OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.\r\n# Jul  5 09:18:23 elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556 systemd: Stopping Elasticsearch...\r\n# Jul  5 09:18:23 elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556 systemd: Stopped Elasticsearch.\r\n# Jul  5 09:18:28 elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556 systemd: Stopped Apply Kernel Variables.\r\n# Jul  5 09:18:28 elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556 systemd: Stopping Apply Kernel Variables...\r\n# Jul  5 09:18:28 elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556 systemd: Starting Apply Kernel Variables...\r\n# Jul  5 09:18:28 elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556 systemd: Started Apply Kernel Variables.\r\n# Jul  5 09:18:32 elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556 systemd: Reloading.\r\n# Jul  5 09:18:32 elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556 systemd: Reloading.\r\n# Jul  5 09:18:32 elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556 systemd: Starting Elasticsearch...\r\n# Jul  5 09:18:34 elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556 systemd-entrypoint: OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.\r\n# Jul  5 09:18:41 elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556 systemd: Started Elasticsearch.\r\n# Current java processes:\r\n# jenkins     1597  4.1  1.9 14297652 632468 ?     Sl   09:06   0:30 java -Djava.util.logging.config.file=/var/lib/jenkins/logging.properties -javaagent:/opt/jolokia/jolokia-agent.jar=config=/opt/jolokia/jolokia.properties -Dorg.jenkinsci.plugins.gitclient.Git.timeOut=20 -jar /usr/local/share/jenkins/swarm-client-3.17.jar -description OracleLinux 7.8 - 4 CPU Cores / 52056 MB Memory -disableClientsUniqueId -executors 1 -fsroot /var/lib/jenkins -master https://elasticsearch-ci.elastic.co/ -maxRetryInterval 160 -retryBackOffStrategy linear -mode exclusive -name elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556 -username local-admin -passwordFile /var/lib/jenkins/.jenkins_password -name elasticsearch-ci-immutable-oraclelinux-7-p-1593939877159790556 -master https://elasticsearch-ci.elastic.co -username local-admin -labels oraclelinux-7-packaging -labels immutable -description MachineType:custom-16-32768,DiskSize:350\r\n# jenkins     1874  3.5  1.4 12994748 461332 ?     Sl   09:06   0:25 java -server -Drunbld.version=1.6.12 -jar /usr/local/bin/runbld --redirect-stderr --last-good-commit elastic+elasticsearch+master+git+push /tmp/jenkins4336337036981893893.sh\r\n# root        2356  0.0  0.0 242812  7700 ?        S    09:07   0:00 sudo -E env PATH=/var/lib/jenkins/.java/openjdk14/bin:/sbin:/bin:/usr/sbin:/usr/bin RUNTIME_JAVA_HOME=/var/lib/jenkins/.java/openjdk-11.0.2-linux --unset=JAVA_HOME SYSTEM_JAVA_HOME=/var/lib/jenkins/.java/openjdk-11.0.2-linux ./gradlew -g /var/lib/jenkins/.gradle --scan --parallel --continue --build-cache -Dorg.elasticsearch.build.cache.url=https://gradle-enterprise.elastic.co/cache/ -Dbwc.checkout.align=true destructivePackagingTest\r\n# root        2358  0.7  0.3 3732996 114944 ?      Sl   09:07   0:05 java -Xmx64m -Xms64m -XX:+HeapDumpOnOutOfMemoryError -Xmx128m -Xms128m -Dorg.gradle.appname=gradlew -classpath /var/lib/jenkins/workspace/elastic+elasticsearch+master+multijob+packaging-tests-unix-gcp/os/oraclelinux-7-packaging/gradle/wrapper/gradle-wrapper.jar org.gradle.wrapper.GradleWrapperMain -g /var/lib/jenkins/.gradle --scan --parallel --continue --build-cache -Dorg.elasticsearch.build.cache.url=https://gradle-enterprise.elastic.co/cache/ -Dbwc.checkout.align=true destructivePackagingTest\r\n# root        2413  115  5.3 13550056 1759532 ?    Ssl  09:07  13:18 /var/lib/jenkins/.java/openjdk-14.0.1-linux/bin/java -XX:+HeapDumpOnOutOfMemoryError -Xss2m --add-opens java.base/java.util=ALL-UNNAMED --add-opens java.base/java.lang=ALL-UNNAMED --add-opens java.base/java.lang.invoke=ALL-UNNAMED --add-opens java.prefs/java.util.prefs=ALL-UNNAMED -Xmx3g -Dfile.encoding=UTF-8 -Duser.country=US -Duser.language=en -Duser.variant -cp /var/lib/jenkins/.gradle/wrapper/dists/gradle-6.5-all/2oz4ud9k3tuxjg84bbf55q0tn/gradle-6.5/lib/gradle-launcher-6.5.jar org.gradle.launcher.daemon.bootstrap.GradleDaemon 6.5\r\n# elastic+   16876  371  4.2 8014788 1379476 ?     Ssl  09:18   0:37 /var/lib/jenkins/.java/openjdk-11.0.2-linux/bin/java -Xshare:auto -Des.networkaddress.cache.ttl=60 -Des.networkaddress.cache.negative.ttl=10 -XX:+AlwaysPreTouch -Xss1m -Djava.awt.headless=true -Dfile.encoding=UTF-8 -Djna.nosys=true -XX:-OmitStackTraceInFastThrow -Dio.netty.noUnsafe=true -Dio.netty.noKeySetOptimization=true -Dio.netty.recycler.maxCapacityPerThread=0 -Dio.netty.allocator.numDirectArenas=0 -Dlog4j.shutdownHookEnabled=false -Dlog4j2.disable.jmx=true -Djava.locale.providers=SPI,COMPAT -Xms1g -Xmx1g -XX:+UseConcMarkSweepGC -XX:CMSInitiatingOccupancyFraction=75 -XX:+UseCMSInitiatingOccupancyOnly -Djava.io.tmpdir=/tmp/elasticsearch-18271609915702022712 -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/var/lib/elasticsearch -XX:ErrorFile=/var/log/elasticsearch/hs_err_pid%p.log -Xlog:gc*,gc+age=trace,safepoint:file=/var/log/elasticsearch/gc.log:utctime,pid,tags:filecount=32,filesize=64m -XX:MaxDirectMemorySize=536870912 -Des.path.home=/usr/share/elasticsearch -Des.path.conf=/etc/elasticsearch -Des.distribution.flavor=oss -Des.distribution.type=rpm -Des.bundled_jdk=true -cp /usr/share/elasticsearch/lib/* org.elasticsearch.bootstrap.Elasticsearch -p /var/run/elasticsearch/elasticsearch.pid --quiet\r\n# Testing if ES ports are open:\r\n# port 9200 on host 127.0.0.1 is open\r\n# /var/lib/jenkins/workspace/elastic+elasticsearch+master+multijob+packaging-tests-unix-gcp/os/oraclelinux-7-packaging/qa/os/bats/utils/utils.bash: connect: Connection refused\r\n# /var/lib/jenkins/workspace/elastic+elasticsearch+master+multijob+packaging-tests-unix-gcp/os/oraclelinux-7-packaging/qa/os/bats/utils/utils.bash: line 390: /dev/tcp/127.0.0.1/9201: Connection refused\r\n# port 9201 on host 127.0.0.1 is not open\r\nok 10 [UPGRADE] check elasticsearch version is version under test\r\nok 11 [UPGRADE] verify that the documents are there after restart\r\nok 12 [UPGRADE] cleanup version under test\r\n```\r\n\r\n","closed_by":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"performed_via_github_app":null}