[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218813224","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218813224","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218813224,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODgxMzIyNA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T16:34:58Z","updated_at":"2016-05-12T16:34:58Z","author_association":"CONTRIBUTOR","body":"Hi @alicegoldfuss \n\nCould you provide the actual command that you use to enable/disable shard allocation, along with the output of:\n\n```\nGET _cluster/settings\n```\n\nand (assuming you have unassigned shards atm):\n\n```\nGET _shard_stores\n```\n\nAlso, would be good to take an unassigned shard and try to assign it to a particular node with the [cluster-reroute API](https://www.elastic.co/guide/en/elasticsearch/reference/2.2/cluster-reroute.html), adding the `?explain` flag to figure out why the shard isn't being assigned.\n\nthanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218831464","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218831464","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218831464,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODgzMTQ2NA==","user":{"login":"alicegoldfuss","id":4809374,"node_id":"MDQ6VXNlcjQ4MDkzNzQ=","avatar_url":"https://avatars3.githubusercontent.com/u/4809374?v=4","gravatar_id":"","url":"https://api.github.com/users/alicegoldfuss","html_url":"https://github.com/alicegoldfuss","followers_url":"https://api.github.com/users/alicegoldfuss/followers","following_url":"https://api.github.com/users/alicegoldfuss/following{/other_user}","gists_url":"https://api.github.com/users/alicegoldfuss/gists{/gist_id}","starred_url":"https://api.github.com/users/alicegoldfuss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alicegoldfuss/subscriptions","organizations_url":"https://api.github.com/users/alicegoldfuss/orgs","repos_url":"https://api.github.com/users/alicegoldfuss/repos","events_url":"https://api.github.com/users/alicegoldfuss/events{/privacy}","received_events_url":"https://api.github.com/users/alicegoldfuss/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T17:41:27Z","updated_at":"2016-05-12T17:43:20Z","author_association":"NONE","body":"Hi Clinton!\n\n```\n$ curl -XPUT http://node-1.com:9200/_cluster/settings -d '{\"transient\":{\"cluster.routing.allocation.enable\": \"all\"}}'\n{\"acknowledged\":true,\"persistent\":{},\"transient\":{\"cluster\":{\"routing\":{\"allocation\":{\"enable\":\"all\"}}}}}\n```\n\n```\n$ curl -XGET http://node-1.com:9200/_cluster/settings\n{\"persistent\":{\"cluster\":{\"routing\":{\"allocation\":{\"enable\":\"all\"}}}},\"transient\":{\"cluster\":{\"routing\":{\"allocation\":{\"enable\":\"all\"}}}}}\n```\n\nShard stores returned a lot, so I cleaned up one of the replies:\n\n```\n{\"indices\":{\"index-1\":{\"shards\":{\"2\":{\"stores\":[{\"urZEQshBQourcmigNqeG0g\":{\"name\":\"node-1\",\"transport_address\":\"127.0.0.1:9300\",\"attributes\":{\"ec2az\":\"us-east-1a\",\"datacenter\":\"use1v\"}},\"version\":40,\"allocation\":\"primary\"},{\"uWmawPeUQ2KYNR1sLKvxfA\":{\"name\":\"node-2\",\"transport_address\":\"127.0.0.1:9300\",\"attributes\":{\"ec2az\":\"us-east-1d\",\"datacenter\":\"use1v\"}},\"version\":25,\"allocation\":\"unused\"}]}}},\n```\n\nThe explain query dumped a bunch of stuff. Can I give it to you privately?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218832859","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218832859","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218832859,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODgzMjg1OQ==","user":{"login":"alicegoldfuss","id":4809374,"node_id":"MDQ6VXNlcjQ4MDkzNzQ=","avatar_url":"https://avatars3.githubusercontent.com/u/4809374?v=4","gravatar_id":"","url":"https://api.github.com/users/alicegoldfuss","html_url":"https://github.com/alicegoldfuss","followers_url":"https://api.github.com/users/alicegoldfuss/followers","following_url":"https://api.github.com/users/alicegoldfuss/following{/other_user}","gists_url":"https://api.github.com/users/alicegoldfuss/gists{/gist_id}","starred_url":"https://api.github.com/users/alicegoldfuss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alicegoldfuss/subscriptions","organizations_url":"https://api.github.com/users/alicegoldfuss/orgs","repos_url":"https://api.github.com/users/alicegoldfuss/repos","events_url":"https://api.github.com/users/alicegoldfuss/events{/privacy}","received_events_url":"https://api.github.com/users/alicegoldfuss/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T17:46:37Z","updated_at":"2016-05-12T17:46:37Z","author_association":"NONE","body":"Also I should add that assigning the shard via the API worked. That has always worked. But the cluster doesn't assign automatically.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218840646","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218840646","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218840646,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODg0MDY0Ng==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T18:14:11Z","updated_at":"2016-05-12T18:14:11Z","author_association":"CONTRIBUTOR","body":"> The explain query dumped a bunch of stuff. Can I give it to you privately?\n\nSure. clinton at elastic dot co\n\n> Also I should add that assigning the shard via the API worked. That has always worked. But the cluster doesn't assign automatically.\n\nDo you have ongoing recoveries? What is the output of:\n\n```\nGET _cat/recovery?v\n```\n\nI also see you're using node attributes, and possibly multiple data centres?  (usually this is a no-no, unless they're like ec2 availability zones, ie as fast as a lan). Could you paste the settings you're using for shard awareness/allocation?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218842094","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218842094","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218842094,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODg0MjA5NA==","user":{"login":"alicegoldfuss","id":4809374,"node_id":"MDQ6VXNlcjQ4MDkzNzQ=","avatar_url":"https://avatars3.githubusercontent.com/u/4809374?v=4","gravatar_id":"","url":"https://api.github.com/users/alicegoldfuss","html_url":"https://github.com/alicegoldfuss","followers_url":"https://api.github.com/users/alicegoldfuss/followers","following_url":"https://api.github.com/users/alicegoldfuss/following{/other_user}","gists_url":"https://api.github.com/users/alicegoldfuss/gists{/gist_id}","starred_url":"https://api.github.com/users/alicegoldfuss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alicegoldfuss/subscriptions","organizations_url":"https://api.github.com/users/alicegoldfuss/orgs","repos_url":"https://api.github.com/users/alicegoldfuss/repos","events_url":"https://api.github.com/users/alicegoldfuss/events{/privacy}","received_events_url":"https://api.github.com/users/alicegoldfuss/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T18:19:33Z","updated_at":"2016-05-12T18:19:33Z","author_association":"NONE","body":"I will send you the query dump and recovery dump.\n\nWe are using multiple AWS availability zones, not physical data centers.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218852762","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218852762","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218852762,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODg1Mjc2Mg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T18:57:19Z","updated_at":"2016-05-12T18:57:19Z","author_association":"CONTRIBUTOR","body":"@alicegoldfuss It looks like you tried to reroute an already assigned shard.  Could you try one that is unassigned, eg shard 1 of index `logstash-2016.02.13`?  (with `?explain`)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218853247","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218853247","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218853247,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODg1MzI0Nw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T18:59:08Z","updated_at":"2016-05-12T18:59:08Z","author_association":"CONTRIBUTOR","body":"Also, could you paste the settings you're using for shard awareness/allocation?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218854745","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218854745","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218854745,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODg1NDc0NQ==","user":{"login":"alicegoldfuss","id":4809374,"node_id":"MDQ6VXNlcjQ4MDkzNzQ=","avatar_url":"https://avatars3.githubusercontent.com/u/4809374?v=4","gravatar_id":"","url":"https://api.github.com/users/alicegoldfuss","html_url":"https://github.com/alicegoldfuss","followers_url":"https://api.github.com/users/alicegoldfuss/followers","following_url":"https://api.github.com/users/alicegoldfuss/following{/other_user}","gists_url":"https://api.github.com/users/alicegoldfuss/gists{/gist_id}","starred_url":"https://api.github.com/users/alicegoldfuss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alicegoldfuss/subscriptions","organizations_url":"https://api.github.com/users/alicegoldfuss/orgs","repos_url":"https://api.github.com/users/alicegoldfuss/repos","events_url":"https://api.github.com/users/alicegoldfuss/events{/privacy}","received_events_url":"https://api.github.com/users/alicegoldfuss/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T19:04:47Z","updated_at":"2016-05-12T19:04:47Z","author_association":"NONE","body":"@clintongormley I assigned a shard that was unassigned. But when I reran the command to create that file, yes it was already assigned.\n\nI will send you the new shard assignment.\n\nCan you tell me where to find the settings for shard awareness/allocation?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218855201","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218855201","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218855201,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODg1NTIwMQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T19:06:34Z","updated_at":"2016-05-12T19:06:34Z","author_association":"CONTRIBUTOR","body":"@alicegoldfuss Either in index settings or in node settings, depending on what is set.  Try:\n\n```\nGET _nodes/settings\nGET logstash-2016.02.13/_settings\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218856432","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218856432","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218856432,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODg1NjQzMg==","user":{"login":"alicegoldfuss","id":4809374,"node_id":"MDQ6VXNlcjQ4MDkzNzQ=","avatar_url":"https://avatars3.githubusercontent.com/u/4809374?v=4","gravatar_id":"","url":"https://api.github.com/users/alicegoldfuss","html_url":"https://github.com/alicegoldfuss","followers_url":"https://api.github.com/users/alicegoldfuss/followers","following_url":"https://api.github.com/users/alicegoldfuss/following{/other_user}","gists_url":"https://api.github.com/users/alicegoldfuss/gists{/gist_id}","starred_url":"https://api.github.com/users/alicegoldfuss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alicegoldfuss/subscriptions","organizations_url":"https://api.github.com/users/alicegoldfuss/orgs","repos_url":"https://api.github.com/users/alicegoldfuss/repos","events_url":"https://api.github.com/users/alicegoldfuss/events{/privacy}","received_events_url":"https://api.github.com/users/alicegoldfuss/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T19:11:16Z","updated_at":"2016-05-12T19:11:16Z","author_association":"NONE","body":"Okay, emailed those settings to you.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218860346","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218860346","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218860346,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODg2MDM0Ng==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T19:26:43Z","updated_at":"2016-05-12T19:26:43Z","author_association":"CONTRIBUTOR","body":"@alicegoldfuss apparently those shards can be allocated so if you just call `_reroute` without any body or arguments (now that I think about it you might need to specify an empty body) will shard get allocated? if you allocate one shard manually will others follow once that shards is started?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218871332","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218871332","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218871332,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODg3MTMzMg==","user":{"login":"alicegoldfuss","id":4809374,"node_id":"MDQ6VXNlcjQ4MDkzNzQ=","avatar_url":"https://avatars3.githubusercontent.com/u/4809374?v=4","gravatar_id":"","url":"https://api.github.com/users/alicegoldfuss","html_url":"https://github.com/alicegoldfuss","followers_url":"https://api.github.com/users/alicegoldfuss/followers","following_url":"https://api.github.com/users/alicegoldfuss/following{/other_user}","gists_url":"https://api.github.com/users/alicegoldfuss/gists{/gist_id}","starred_url":"https://api.github.com/users/alicegoldfuss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alicegoldfuss/subscriptions","organizations_url":"https://api.github.com/users/alicegoldfuss/orgs","repos_url":"https://api.github.com/users/alicegoldfuss/repos","events_url":"https://api.github.com/users/alicegoldfuss/events{/privacy}","received_events_url":"https://api.github.com/users/alicegoldfuss/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T20:10:44Z","updated_at":"2016-05-12T20:10:44Z","author_association":"NONE","body":"Hello!\n\nIf I manually allocate one shard, the other shards will not follow suit.\n\nI ran the following:\n\n`curl -XPOST 'http://node-1.com:9200/_cluster/reroute'`\n\nThat returned a large response, full of shard states:\n\n```\n{\"state\":\"STARTED\",\"primary\":false,\"node\":\"XXXXXXXXXXX\",\"relocating_node\":null,\"shard\":4,\"index\":\"index-1\",\"version\":24,\"allocation_id\":{\"id\":\"XXXXXXXXXXXX\"}}\n```\n\nBut no signs of actual allocation.\n\nI ran it with an empty body and got the same.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218886290","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218886290","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218886290,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODg4NjI5MA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T21:07:57Z","updated_at":"2016-05-12T21:07:57Z","author_association":"CONTRIBUTOR","body":"well I think from here on I don't have many more ideas than enabling trace logging for allocation for `cluster.routing.allocation.decider` as well as `cluster.routing.allocation` @bleskes any ideas?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218888133","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218888133","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218888133,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODg4ODEzMw==","user":{"login":"alicegoldfuss","id":4809374,"node_id":"MDQ6VXNlcjQ4MDkzNzQ=","avatar_url":"https://avatars3.githubusercontent.com/u/4809374?v=4","gravatar_id":"","url":"https://api.github.com/users/alicegoldfuss","html_url":"https://github.com/alicegoldfuss","followers_url":"https://api.github.com/users/alicegoldfuss/followers","following_url":"https://api.github.com/users/alicegoldfuss/following{/other_user}","gists_url":"https://api.github.com/users/alicegoldfuss/gists{/gist_id}","starred_url":"https://api.github.com/users/alicegoldfuss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alicegoldfuss/subscriptions","organizations_url":"https://api.github.com/users/alicegoldfuss/orgs","repos_url":"https://api.github.com/users/alicegoldfuss/repos","events_url":"https://api.github.com/users/alicegoldfuss/events{/privacy}","received_events_url":"https://api.github.com/users/alicegoldfuss/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T21:15:28Z","updated_at":"2016-05-12T21:15:28Z","author_association":"NONE","body":"That would require either putting in a Puppet PR (I don't think I could deploy in time) or disabling Puppet and shoving the settings into the config on the boxes (not my favorite choice). So if there's a Plan B I would prefer it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218889146","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218889146","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218889146,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODg4OTE0Ng==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T21:19:38Z","updated_at":"2016-05-12T21:19:49Z","author_association":"MEMBER","body":">  So if there's a Plan B I would prefer it.\n\nYou can do it from the settings API:\n\n```\nPUT /_cluster/settings\n{\n    \"transient\" : {\n        \"logger.cluster.routing.allocation.decider\": \"TRACE\",\n        \"logger.cluster.routing.allocation\": \"TRACE\"\n    }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218891023","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218891023","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218891023,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODg5MTAyMw==","user":{"login":"alicegoldfuss","id":4809374,"node_id":"MDQ6VXNlcjQ4MDkzNzQ=","avatar_url":"https://avatars3.githubusercontent.com/u/4809374?v=4","gravatar_id":"","url":"https://api.github.com/users/alicegoldfuss","html_url":"https://github.com/alicegoldfuss","followers_url":"https://api.github.com/users/alicegoldfuss/followers","following_url":"https://api.github.com/users/alicegoldfuss/following{/other_user}","gists_url":"https://api.github.com/users/alicegoldfuss/gists{/gist_id}","starred_url":"https://api.github.com/users/alicegoldfuss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alicegoldfuss/subscriptions","organizations_url":"https://api.github.com/users/alicegoldfuss/orgs","repos_url":"https://api.github.com/users/alicegoldfuss/repos","events_url":"https://api.github.com/users/alicegoldfuss/events{/privacy}","received_events_url":"https://api.github.com/users/alicegoldfuss/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T21:27:02Z","updated_at":"2016-05-12T21:27:02Z","author_association":"NONE","body":"Thanks! So, put those in place and try to allocate a shard with explain enabled? Or will those settings generate log files?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218891492","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218891492","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218891492,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODg5MTQ5Mg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T21:28:59Z","updated_at":"2016-05-12T21:29:28Z","author_association":"MEMBER","body":"> Thanks! So, put those in place and try to allocate a shard with explain enabled? Or will those settings generate log files?\n\nIt will probably start generating log lines, but try to do an allocation too and share the master logs from the time you enabled the traces.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218896289","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218896289","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218896289,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODg5NjI4OQ==","user":{"login":"alicegoldfuss","id":4809374,"node_id":"MDQ6VXNlcjQ4MDkzNzQ=","avatar_url":"https://avatars3.githubusercontent.com/u/4809374?v=4","gravatar_id":"","url":"https://api.github.com/users/alicegoldfuss","html_url":"https://github.com/alicegoldfuss","followers_url":"https://api.github.com/users/alicegoldfuss/followers","following_url":"https://api.github.com/users/alicegoldfuss/following{/other_user}","gists_url":"https://api.github.com/users/alicegoldfuss/gists{/gist_id}","starred_url":"https://api.github.com/users/alicegoldfuss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alicegoldfuss/subscriptions","organizations_url":"https://api.github.com/users/alicegoldfuss/orgs","repos_url":"https://api.github.com/users/alicegoldfuss/repos","events_url":"https://api.github.com/users/alicegoldfuss/events{/privacy}","received_events_url":"https://api.github.com/users/alicegoldfuss/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T21:49:48Z","updated_at":"2016-05-12T21:49:48Z","author_association":"NONE","body":"```\n$ curl -XPUT 'http://node-1.com:9200/_cluster/settings' -d '{\"transient\" : {\"logger.cluster.routing.allocation.decider\": \"TRACE\",\"logger.cluster.routing.allocation\": \"TRACE\"}}'\n{\"acknowledged\":true,\"persistent\":{},\"transient\":{\"logger\":{\"cluster\":{\"routing\":{\"allocation\":\"TRACE\",\"allocation.decider\":\"TRACE\"}}}}}\n```\n\nI successfully allocated two shards with the API. Elasticsearch generated no additional logs. I captured the explain dumps if you would like to see them.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218897958","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218897958","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218897958,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODg5Nzk1OA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T21:57:12Z","updated_at":"2016-05-12T21:57:12Z","author_association":"MEMBER","body":"> Elasticsearch generated no additional logs.\n\nAre you sure that you extracted the logs from the master node? You can check the master with `GET /_cat/master` against any node in the cluster.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218901780","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218901780","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218901780,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODkwMTc4MA==","user":{"login":"alicegoldfuss","id":4809374,"node_id":"MDQ6VXNlcjQ4MDkzNzQ=","avatar_url":"https://avatars3.githubusercontent.com/u/4809374?v=4","gravatar_id":"","url":"https://api.github.com/users/alicegoldfuss","html_url":"https://github.com/alicegoldfuss","followers_url":"https://api.github.com/users/alicegoldfuss/followers","following_url":"https://api.github.com/users/alicegoldfuss/following{/other_user}","gists_url":"https://api.github.com/users/alicegoldfuss/gists{/gist_id}","starred_url":"https://api.github.com/users/alicegoldfuss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alicegoldfuss/subscriptions","organizations_url":"https://api.github.com/users/alicegoldfuss/orgs","repos_url":"https://api.github.com/users/alicegoldfuss/repos","events_url":"https://api.github.com/users/alicegoldfuss/events{/privacy}","received_events_url":"https://api.github.com/users/alicegoldfuss/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T22:16:05Z","updated_at":"2016-05-12T22:16:05Z","author_association":"NONE","body":"Okay! I thought ES logs would be the same across the cluster. I have a 37 MB log file for you @jasontedor where can I send it?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218902814","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218902814","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218902814,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODkwMjgxNA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T22:21:26Z","updated_at":"2016-05-12T22:22:32Z","author_association":"MEMBER","body":"> Okay! I thought ES logs would be the same across the cluster.\n\nEach node is a special snowflake, and the master is a very special snowflake and in particular is the only node making allocation decisions.\n\n> I have a 37 MB log file for you @jasontedor where can I send it?\n\nCan you gzip compress that (if not already) and send it to my first name at the same domain as @clintongormley's email address from earlier?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218904807","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218904807","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218904807,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODkwNDgwNw==","user":{"login":"alicegoldfuss","id":4809374,"node_id":"MDQ6VXNlcjQ4MDkzNzQ=","avatar_url":"https://avatars3.githubusercontent.com/u/4809374?v=4","gravatar_id":"","url":"https://api.github.com/users/alicegoldfuss","html_url":"https://github.com/alicegoldfuss","followers_url":"https://api.github.com/users/alicegoldfuss/followers","following_url":"https://api.github.com/users/alicegoldfuss/following{/other_user}","gists_url":"https://api.github.com/users/alicegoldfuss/gists{/gist_id}","starred_url":"https://api.github.com/users/alicegoldfuss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alicegoldfuss/subscriptions","organizations_url":"https://api.github.com/users/alicegoldfuss/orgs","repos_url":"https://api.github.com/users/alicegoldfuss/repos","events_url":"https://api.github.com/users/alicegoldfuss/events{/privacy}","received_events_url":"https://api.github.com/users/alicegoldfuss/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T22:32:18Z","updated_at":"2016-05-12T22:32:18Z","author_association":"NONE","body":"Done :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218908315","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218908315","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218908315,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODkwODMxNQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T22:52:33Z","updated_at":"2016-05-12T22:52:33Z","author_association":"MEMBER","body":"@alicegoldfuss Can you hit `GET /_cluster/settings` against the master node and share here?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218908741","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218908741","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218908741,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODkwODc0MQ==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T22:54:57Z","updated_at":"2016-05-12T22:55:39Z","author_association":"MEMBER","body":"Do you have the timestamps from when you performed the allocation? I see things like:\n\n```\n[2016-05-12 21:47:20,469][TRACE][cluster.routing.allocation.decider] [...] Can not allocate [...], at[2016-05-12T05:48:08.074Z], details[failed recovery, failure RecoveryFailedException[index: Recovery failed from {node}{...}{...}{...}{...} into {...}{...}{...}{...}{...} (no activity after [30m])]; nested: ElasticsearchTimeoutException[no activity after [30m]]; ]]] on node [.....] due to [DisableAllocationDecider]\n```\n\nEspecially the `DisableAllocationDecider` part, it looks like allocation is still disabled at this point, has it been turned back on? I noticed in your command for enabling allocation that you have enabled the `EnableAllocationDecider`, but perhaps the `DisableAllocationDecider` (which is [deprecated in 2.x](https://github.com/elastic/elasticsearch/blob/2.x/core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/DisableAllocationDecider.java#L51-L64) ) is still disabling allocation?\n\nIn 2.x, both are around since DisableAllocationDecider is deprecated so people can move away from it, however, they both have effect, so if allocation is disabled by the DisableAllocationDecider then it will still be disabled.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218908994","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218908994","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218908994,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODkwODk5NA==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T22:56:24Z","updated_at":"2016-05-12T22:56:24Z","author_association":"MEMBER","body":"Additionally, I _only_ see logs from the `cluster.routing.allocation.decider` and `cluster.routing.allocation.allocator` packages in this file, what happened to the logs from the other packages?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218910982","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218910982","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218910982,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODkxMDk4Mg==","user":{"login":"alicegoldfuss","id":4809374,"node_id":"MDQ6VXNlcjQ4MDkzNzQ=","avatar_url":"https://avatars3.githubusercontent.com/u/4809374?v=4","gravatar_id":"","url":"https://api.github.com/users/alicegoldfuss","html_url":"https://github.com/alicegoldfuss","followers_url":"https://api.github.com/users/alicegoldfuss/followers","following_url":"https://api.github.com/users/alicegoldfuss/following{/other_user}","gists_url":"https://api.github.com/users/alicegoldfuss/gists{/gist_id}","starred_url":"https://api.github.com/users/alicegoldfuss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alicegoldfuss/subscriptions","organizations_url":"https://api.github.com/users/alicegoldfuss/orgs","repos_url":"https://api.github.com/users/alicegoldfuss/repos","events_url":"https://api.github.com/users/alicegoldfuss/events{/privacy}","received_events_url":"https://api.github.com/users/alicegoldfuss/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T23:08:03Z","updated_at":"2016-05-12T23:08:03Z","author_association":"NONE","body":"Ran settings against the master node:\n\n```\n$ curl -XGET http://node-master.com:9200/_cluster/settings\n{\"persistent\":{\"cluster\":{\"routing\":{\"allocation\":{\"enable\":\"all\"}}}},\"transient\":{\"cluster\":{\"routing\":{\"allocation\":{\"enable\":\"all\"}}},\"logger\":{\"cluster\":{\"routing\":{\"allocation\":\"TRACE\",\"allocation.decider\":\"TRACE\"}}}}}\n```\n\nI don't have specific timestamps, but I did give you the entire log file. Everything you see in that file is what I can see on the master. The other nodes are full of the 30 minute timeout notifications from when I was allocating hundreds of shards yesterday.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218911476","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218911476","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218911476,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODkxMTQ3Ng==","user":{"login":"alicegoldfuss","id":4809374,"node_id":"MDQ6VXNlcjQ4MDkzNzQ=","avatar_url":"https://avatars3.githubusercontent.com/u/4809374?v=4","gravatar_id":"","url":"https://api.github.com/users/alicegoldfuss","html_url":"https://github.com/alicegoldfuss","followers_url":"https://api.github.com/users/alicegoldfuss/followers","following_url":"https://api.github.com/users/alicegoldfuss/following{/other_user}","gists_url":"https://api.github.com/users/alicegoldfuss/gists{/gist_id}","starred_url":"https://api.github.com/users/alicegoldfuss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alicegoldfuss/subscriptions","organizations_url":"https://api.github.com/users/alicegoldfuss/orgs","repos_url":"https://api.github.com/users/alicegoldfuss/repos","events_url":"https://api.github.com/users/alicegoldfuss/events{/privacy}","received_events_url":"https://api.github.com/users/alicegoldfuss/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T23:10:56Z","updated_at":"2016-05-12T23:11:18Z","author_association":"NONE","body":"How can I toggle the `DisableAllocatiorDecider`? Give me a command and I'll try running it.\n\nI know this is probably in your docs somewhere, but I'm pretty swamped, so sorry in advance.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218911949","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218911949","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218911949,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODkxMTk0OQ==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T23:13:59Z","updated_at":"2016-05-12T23:13:59Z","author_association":"MEMBER","body":"Okay, it's still possible that the indices have the disable allocation decider enabled on them as I don't have the settings you emailed Clint earlier (he's offline), you can try:\n\n```\ncurl -XPUT 'node:9200/_cluster/settings' -d'{\"transient\": {\"cluster.routing.allocation.disable_allocation\": false}}'\n```\n\nAnd additionally (in case it is set on the indices themselves):\n\n```\ncurl -XPUT 'node:9200/_all/_settings' -d'{\"index.routing.allocation.disable_allocation\": false}'\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218913330","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218913330","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218913330,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODkxMzMzMA==","user":{"login":"alicegoldfuss","id":4809374,"node_id":"MDQ6VXNlcjQ4MDkzNzQ=","avatar_url":"https://avatars3.githubusercontent.com/u/4809374?v=4","gravatar_id":"","url":"https://api.github.com/users/alicegoldfuss","html_url":"https://github.com/alicegoldfuss","followers_url":"https://api.github.com/users/alicegoldfuss/followers","following_url":"https://api.github.com/users/alicegoldfuss/following{/other_user}","gists_url":"https://api.github.com/users/alicegoldfuss/gists{/gist_id}","starred_url":"https://api.github.com/users/alicegoldfuss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alicegoldfuss/subscriptions","organizations_url":"https://api.github.com/users/alicegoldfuss/orgs","repos_url":"https://api.github.com/users/alicegoldfuss/repos","events_url":"https://api.github.com/users/alicegoldfuss/events{/privacy}","received_events_url":"https://api.github.com/users/alicegoldfuss/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T23:22:12Z","updated_at":"2016-05-12T23:22:12Z","author_association":"NONE","body":"YOU DID IT!\n\nIt was set on the indices themselves! I issued the second command you provided and BAM shards are initializing automatically!\n\nNo idea how that thing got toggled in the first place, but I will never touch it again.\n\nThank you everyone!\n\n![](https://media.giphy.com/media/iPTTjEt19igne/giphy.gif)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/218913588","html_url":"https://github.com/elastic/elasticsearch/issues/18294#issuecomment-218913588","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18294","id":218913588,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODkxMzU4OA==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2016-05-12T23:23:34Z","updated_at":"2016-05-12T23:23:34Z","author_association":"MEMBER","body":"Glad to hear that!\n\nI'm going to close this issue, thanks for debugging with us :)\n","performed_via_github_app":null}]