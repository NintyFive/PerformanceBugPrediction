[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/410178023","html_url":"https://github.com/elastic/elasticsearch/issues/32601#issuecomment-410178023","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32601","id":410178023,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMDE3ODAyMw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-08-03T08:04:21Z","updated_at":"2018-08-03T08:04:21Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/410237345","html_url":"https://github.com/elastic/elasticsearch/issues/32601#issuecomment-410237345","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32601","id":410237345,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMDIzNzM0NQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-08-03T12:23:32Z","updated_at":"2018-08-03T12:23:32Z","author_association":"MEMBER","body":"Relates #10005","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/410251848","html_url":"https://github.com/elastic/elasticsearch/issues/32601#issuecomment-410251848","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32601","id":410251848,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMDI1MTg0OA==","user":{"login":"uschindler","id":1005388,"node_id":"MDQ6VXNlcjEwMDUzODg=","avatar_url":"https://avatars2.githubusercontent.com/u/1005388?v=4","gravatar_id":"","url":"https://api.github.com/users/uschindler","html_url":"https://github.com/uschindler","followers_url":"https://api.github.com/users/uschindler/followers","following_url":"https://api.github.com/users/uschindler/following{/other_user}","gists_url":"https://api.github.com/users/uschindler/gists{/gist_id}","starred_url":"https://api.github.com/users/uschindler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uschindler/subscriptions","organizations_url":"https://api.github.com/users/uschindler/orgs","repos_url":"https://api.github.com/users/uschindler/repos","events_url":"https://api.github.com/users/uschindler/events{/privacy}","received_events_url":"https://api.github.com/users/uschindler/received_events","type":"User","site_admin":false},"created_at":"2018-08-03T13:24:30Z","updated_at":"2018-08-03T13:27:56Z","author_association":"CONTRIBUTOR","body":"Another alternative to use a double with \"days since epoch\" or similar. Dates around the current time/epoch have highest precision, but datetimes far away from today loose precision. We use this aproach for scientific data, as it is obvious that exact date times only make sense around now, not for stuff far away.\r\nThis approach allows easy sorting and the conversion to java.time is easy:\r\n\r\n```java\r\n  /** Converts a TemporalAccessor to a double (days since epoch). Includes time, if available. */\r\n  public static double temporalToDouble(TemporalAccessor accessor) {\r\n    double r = accessor.getLong(ChronoField.EPOCH_DAY);\r\n    if (accessor.isSupported(ChronoField.NANO_OF_DAY)) {\r\n      r += accessor.getLong(ChronoField.NANO_OF_DAY) / NANOS_PER_DAY;\r\n    }\r\n    return r;\r\n  }\r\n\r\n  /** Converts a double with the days since epoch to an Instant. */\r\n  public static Instant doubleToInstant(double epochDouble) {\r\n    final long epochDays = (long) epochDouble;\r\n    return Instant.EPOCH.plus(epochDays, ChronoUnit.DAYS)\r\n        .plusNanos(Math.round((epochDouble - epochDays) * NANOS_PER_DAY));\r\n  }\r\n  ```\r\n\r\nJust ideas! (this code is untested, I just converted it from millies to nanos, maybe there are some sign problem, but i think it's tested also for dates before epoch).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/410253365","html_url":"https://github.com/elastic/elasticsearch/issues/32601#issuecomment-410253365","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32601","id":410253365,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMDI1MzM2NQ==","user":{"login":"uschindler","id":1005388,"node_id":"MDQ6VXNlcjEwMDUzODg=","avatar_url":"https://avatars2.githubusercontent.com/u/1005388?v=4","gravatar_id":"","url":"https://api.github.com/users/uschindler","html_url":"https://github.com/uschindler","followers_url":"https://api.github.com/users/uschindler/followers","following_url":"https://api.github.com/users/uschindler/following{/other_user}","gists_url":"https://api.github.com/users/uschindler/gists{/gist_id}","starred_url":"https://api.github.com/users/uschindler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uschindler/subscriptions","organizations_url":"https://api.github.com/users/uschindler/orgs","repos_url":"https://api.github.com/users/uschindler/repos","events_url":"https://api.github.com/users/uschindler/events{/privacy}","received_events_url":"https://api.github.com/users/uschindler/received_events","type":"User","site_admin":false},"created_at":"2018-08-03T13:29:36Z","updated_at":"2018-08-03T13:29:36Z","author_association":"CONTRIBUTOR","body":"As far as I remember PostgreSQL internally uses the same data type for SQL timestamps.","performed_via_github_app":null}]