{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/15822","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15822/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15822/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15822/events","html_url":"https://github.com/elastic/elasticsearch/issues/15822","id":125386180,"node_id":"MDU6SXNzdWUxMjUzODYxODA=","number":15822,"title":"java.lang.NullPointerException while updating document","user":{"login":"zim32","id":538976,"node_id":"MDQ6VXNlcjUzODk3Ng==","avatar_url":"https://avatars0.githubusercontent.com/u/538976?v=4","gravatar_id":"","url":"https://api.github.com/users/zim32","html_url":"https://github.com/zim32","followers_url":"https://api.github.com/users/zim32/followers","following_url":"https://api.github.com/users/zim32/following{/other_user}","gists_url":"https://api.github.com/users/zim32/gists{/gist_id}","starred_url":"https://api.github.com/users/zim32/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zim32/subscriptions","organizations_url":"https://api.github.com/users/zim32/orgs","repos_url":"https://api.github.com/users/zim32/repos","events_url":"https://api.github.com/users/zim32/events{/privacy}","received_events_url":"https://api.github.com/users/zim32/received_events","type":"User","site_admin":false},"labels":[{"id":145572580,"node_id":"MDU6TGFiZWwxNDU1NzI1ODA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/CRUD","name":":Distributed/CRUD","color":"0e8a16","default":false,"description":"A catch all label for issues around indexing, updating and getting a doc by id. Not search."},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":92913858,"node_id":"MDU6TGFiZWw5MjkxMzg1OA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/good%20first%20issue","name":"good first issue","color":"07569b","default":true,"description":"low hanging fruit"},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":{"login":"abeyad","id":1631297,"node_id":"MDQ6VXNlcjE2MzEyOTc=","avatar_url":"https://avatars2.githubusercontent.com/u/1631297?v=4","gravatar_id":"","url":"https://api.github.com/users/abeyad","html_url":"https://github.com/abeyad","followers_url":"https://api.github.com/users/abeyad/followers","following_url":"https://api.github.com/users/abeyad/following{/other_user}","gists_url":"https://api.github.com/users/abeyad/gists{/gist_id}","starred_url":"https://api.github.com/users/abeyad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abeyad/subscriptions","organizations_url":"https://api.github.com/users/abeyad/orgs","repos_url":"https://api.github.com/users/abeyad/repos","events_url":"https://api.github.com/users/abeyad/events{/privacy}","received_events_url":"https://api.github.com/users/abeyad/received_events","type":"User","site_admin":false},"assignees":[{"login":"abeyad","id":1631297,"node_id":"MDQ6VXNlcjE2MzEyOTc=","avatar_url":"https://avatars2.githubusercontent.com/u/1631297?v=4","gravatar_id":"","url":"https://api.github.com/users/abeyad","html_url":"https://github.com/abeyad","followers_url":"https://api.github.com/users/abeyad/followers","following_url":"https://api.github.com/users/abeyad/following{/other_user}","gists_url":"https://api.github.com/users/abeyad/gists{/gist_id}","starred_url":"https://api.github.com/users/abeyad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abeyad/subscriptions","organizations_url":"https://api.github.com/users/abeyad/orgs","repos_url":"https://api.github.com/users/abeyad/repos","events_url":"https://api.github.com/users/abeyad/events{/privacy}","received_events_url":"https://api.github.com/users/abeyad/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2016-01-07T12:36:07Z","updated_at":"2016-01-12T16:13:54Z","closed_at":"2016-01-12T16:13:54Z","author_association":"NONE","active_lock_reason":null,"body":"Using this docker container: https://hub.docker.com/_/elasticsearch/\nVersion: 2.1.0\n\nElastic throws NullPointerException while I'm trying to update single document using inline script\n\n**First GET document**\n\n```\ncurl -XGET 'http://172.18.0.3:9200/counters-20160107/counters/20160107T1100:1:3:2?routing=1:2&pretty'\n{\n  \"_index\" : \"counters-20160107\",\n  \"_type\" : \"counters\",\n  \"_id\" : \"20160107T1100:1:3:2\",\n  \"_version\" : 1,\n  \"_routing\" : \"1:2\",\n  \"found\" : true,\n  \"_source\":{\"company\":2,\"time\":1452167502000,\"counters\":{...}}\n}\n```\n\n**And update**\n\n```\ncurl -XPOST 'http://172.18.0.3:9200/counters-20160107/counters/20160107T1100:1:3:2/_update?routing=1:2' -d@/root/tmp/update\n{\"error\":{\"root_cause\":[{\"type\":\"null_pointer_exception\",\"reason\":null}],\"type\":\"null_pointer_exception\",\"reason\":null},\"status\":500}\n```\n\n**Content of /root/tmp/update**\n\n```\n\"script\" : {\n  \"inline\": \"ctx._source.company = cid\",\n  \"params\": {\n    \"cid\": \"1\"\n  }\n}\n```\n\n**Log**\n\n```\ntail -f /var/log/elasticsearch/elasticsearch.log\n[2016-01-07 12:26:25,986][INFO ][rest.suppressed          ] /counters-20160107/counters/20160107T1100:1:3:2/_update Params: {routing=1:2, index=counters-20160107, id=20160107T1100:1:3:2, type=counters}\njava.lang.NullPointerException\n```\n","closed_by":{"login":"abeyad","id":1631297,"node_id":"MDQ6VXNlcjE2MzEyOTc=","avatar_url":"https://avatars2.githubusercontent.com/u/1631297?v=4","gravatar_id":"","url":"https://api.github.com/users/abeyad","html_url":"https://github.com/abeyad","followers_url":"https://api.github.com/users/abeyad/followers","following_url":"https://api.github.com/users/abeyad/following{/other_user}","gists_url":"https://api.github.com/users/abeyad/gists{/gist_id}","starred_url":"https://api.github.com/users/abeyad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abeyad/subscriptions","organizations_url":"https://api.github.com/users/abeyad/orgs","repos_url":"https://api.github.com/users/abeyad/repos","events_url":"https://api.github.com/users/abeyad/events{/privacy}","received_events_url":"https://api.github.com/users/abeyad/received_events","type":"User","site_admin":false},"performed_via_github_app":null}