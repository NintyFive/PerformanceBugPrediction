[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54593495","html_url":"https://github.com/elastic/elasticsearch/issues/7601#issuecomment-54593495","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7601","id":54593495,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTkzNDk1","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-09-05T07:30:06Z","updated_at":"2014-09-05T07:30:06Z","author_association":"CONTRIBUTOR","body":"This is actually by design but we might either throw an error if you don't have the newline or if there are pending characters in the json stream or support requests without whitespaces.... I will mark the issue accordingly - I can totally see how this can be a timesink!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54721532","html_url":"https://github.com/elastic/elasticsearch/issues/7601#issuecomment-54721532","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7601","id":54721532,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzIxNTMy","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-09-06T17:27:15Z","updated_at":"2014-09-06T17:27:15Z","author_association":"CONTRIBUTOR","body":"We should do the same for the bulk API and  mpercolate, \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54723933","html_url":"https://github.com/elastic/elasticsearch/issues/7601#issuecomment-54723933","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7601","id":54723933,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzIzOTMz","user":{"login":"michaelklishin","id":1090,"node_id":"MDQ6VXNlcjEwOTA=","avatar_url":"https://avatars3.githubusercontent.com/u/1090?v=4","gravatar_id":"","url":"https://api.github.com/users/michaelklishin","html_url":"https://github.com/michaelklishin","followers_url":"https://api.github.com/users/michaelklishin/followers","following_url":"https://api.github.com/users/michaelklishin/following{/other_user}","gists_url":"https://api.github.com/users/michaelklishin/gists{/gist_id}","starred_url":"https://api.github.com/users/michaelklishin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michaelklishin/subscriptions","organizations_url":"https://api.github.com/users/michaelklishin/orgs","repos_url":"https://api.github.com/users/michaelklishin/repos","events_url":"https://api.github.com/users/michaelklishin/events{/privacy}","received_events_url":"https://api.github.com/users/michaelklishin/received_events","type":"User","site_admin":false},"created_at":"2014-09-06T18:36:52Z","updated_at":"2014-09-06T18:36:52Z","author_association":"NONE","body":"@s1monw @clintongormley what if ES would add a new line to the JSON body before attempting to parse? As far as I understand, an empty trailing new line should do no harm.\n\nI'd be up for working on a pull request if you like the idea.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54724365","html_url":"https://github.com/elastic/elasticsearch/issues/7601#issuecomment-54724365","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7601","id":54724365,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzI0MzY1","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-09-06T18:51:31Z","updated_at":"2014-09-06T18:51:31Z","author_association":"CONTRIBUTOR","body":"> what if ES would add a new line to the JSON body before attempting to parse? As far as I understand, an empty trailing new line should do no harm.\n\nIt could hide the fact that the request has been truncated incorrectly. I think the solution here is to complain with a meaningful error message if these bulk requests do not end with `\\n`\n\n> I'd be up for working on a pull request if you like the idea.\n\n Yes, a PR would be gratefully accepted :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63949273","html_url":"https://github.com/elastic/elasticsearch/issues/7601#issuecomment-63949273","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7601","id":63949273,"node_id":"MDEyOklzc3VlQ29tbWVudDYzOTQ5Mjcz","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-11-21T10:02:36Z","updated_at":"2014-11-21T10:02:36Z","author_association":"CONTRIBUTOR","body":"@michaelklishin any news on the PR you wanted to work on? maybe I just missed it?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63958031","html_url":"https://github.com/elastic/elasticsearch/issues/7601#issuecomment-63958031","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7601","id":63958031,"node_id":"MDEyOklzc3VlQ29tbWVudDYzOTU4MDMx","user":{"login":"michaelklishin","id":1090,"node_id":"MDQ6VXNlcjEwOTA=","avatar_url":"https://avatars3.githubusercontent.com/u/1090?v=4","gravatar_id":"","url":"https://api.github.com/users/michaelklishin","html_url":"https://github.com/michaelklishin","followers_url":"https://api.github.com/users/michaelklishin/followers","following_url":"https://api.github.com/users/michaelklishin/following{/other_user}","gists_url":"https://api.github.com/users/michaelklishin/gists{/gist_id}","starred_url":"https://api.github.com/users/michaelklishin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michaelklishin/subscriptions","organizations_url":"https://api.github.com/users/michaelklishin/orgs","repos_url":"https://api.github.com/users/michaelklishin/repos","events_url":"https://api.github.com/users/michaelklishin/events{/privacy}","received_events_url":"https://api.github.com/users/michaelklishin/received_events","type":"User","site_admin":false},"created_at":"2014-11-21T11:26:01Z","updated_at":"2014-11-21T11:26:01Z","author_association":"NONE","body":"@s1monw not sure how soon I can get to this. What's the decision: to respond with an error if bulk request body doesn't end in a new line?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64241859","html_url":"https://github.com/elastic/elasticsearch/issues/7601#issuecomment-64241859","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7601","id":64241859,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MjQxODU5","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-11-24T18:42:29Z","updated_at":"2014-11-24T18:42:29Z","author_association":"CONTRIBUTOR","body":"@michaelklishin yes - to at least make it easy for users to figure out what is going wrong.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/246982403","html_url":"https://github.com/elastic/elasticsearch/issues/7601#issuecomment-246982403","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7601","id":246982403,"node_id":"MDEyOklzc3VlQ29tbWVudDI0Njk4MjQwMw==","user":{"login":"pvgoddijn","id":155655,"node_id":"MDQ6VXNlcjE1NTY1NQ==","avatar_url":"https://avatars3.githubusercontent.com/u/155655?v=4","gravatar_id":"","url":"https://api.github.com/users/pvgoddijn","html_url":"https://github.com/pvgoddijn","followers_url":"https://api.github.com/users/pvgoddijn/followers","following_url":"https://api.github.com/users/pvgoddijn/following{/other_user}","gists_url":"https://api.github.com/users/pvgoddijn/gists{/gist_id}","starred_url":"https://api.github.com/users/pvgoddijn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvgoddijn/subscriptions","organizations_url":"https://api.github.com/users/pvgoddijn/orgs","repos_url":"https://api.github.com/users/pvgoddijn/repos","events_url":"https://api.github.com/users/pvgoddijn/events{/privacy}","received_events_url":"https://api.github.com/users/pvgoddijn/received_events","type":"User","site_admin":false},"created_at":"2016-09-14T11:21:25Z","updated_at":"2016-09-14T11:22:31Z","author_association":"NONE","body":"i just found this bug due to a related 'error'\n\nWhen doing a bulk update with precisely one record (without the trailing newline), a error is thrown.\n(not very clear this is about a missing newline but it is)\n\n`{\"error\":{\"root_cause\":[{\"type\":\"action_request_validation_exception\",\"reason\":\"Validation Failed: 1: no requests added;\"}],\"type\":\"action_request_validation_exception\",\"reason\":\"Validation Failed: 1: no requests added;\"},\"status\":400}`\n\nThis made me realize i was not indexing the final document of my batch updates.\n\nI think the current situation is dangerously misleading and either a warning should be thrown or a newline should be 'assumed' on the end of the input.\n\nComing from the (Java) RestClient side of this issue i would prefer the assumption of newlines because the JacksonObjectMapper doesnt support adding a newline after every root object, but does support a 'RootValueSeparator' (which is why i fell into this trap and i would assume more Java users will  / would)\n","performed_via_github_app":null}]