[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/151860296","html_url":"https://github.com/elastic/elasticsearch/issues/14335#issuecomment-151860296","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14335","id":151860296,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MTg2MDI5Ng==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2015-10-28T14:23:03Z","updated_at":"2015-10-28T14:23:03Z","author_association":"CONTRIBUTOR","body":"I'm concerned about this optimization because i think it can easily open a can of worms where things start to look like they used to.\n\nI also think it only really applies for more rare / abuse type cases: its _extraordinarily_ risky and in the worst case acts like a DBMS full table scan.\n\nSo, I don't think we should do it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154466654","html_url":"https://github.com/elastic/elasticsearch/issues/14335#issuecomment-154466654","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14335","id":154466654,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDQ2NjY1NA==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2015-11-06T16:44:04Z","updated_at":"2015-11-06T16:44:04Z","author_association":"MEMBER","body":"At least for the aggregation `filter` case, can we just default to `DocValuesTermsQuery` on the Elasticsearch side?  It seems like the agg filter will always satisfy the case of \"just matching\" instead of iterating?\n\nI've been running into a lot of slow aggs due to `filter` agg buckets lately.  Rewriting it is usually non-trivial (have to move some filters to the query, convert some to `terms` aggs and then exclude terms you aren't interested in, etc).\n\nI don't really know enough Adrien's suggestion to comment intelligently, but it's a noticeable performance problem for aggs anyhow.  If aggs could be a bit smarter it'd be a nice win for users.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/155084216","html_url":"https://github.com/elastic/elasticsearch/issues/14335#issuecomment-155084216","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14335","id":155084216,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NTA4NDIxNg==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-11-09T14:49:58Z","updated_at":"2015-11-09T14:49:58Z","author_association":"CONTRIBUTOR","body":"I'm a bit torn here. I certainly agree with Robert that I don't want to get back to the previous situation where we were trying to do too much on top of Lucene and often ended up making worse decisions than the ones that Lucene would have made by itself. Given that the new query improvements (improved cost API, two-phase iteration, etc.) only landed into the hands of our users two weeks ago, I suggest that we wait for a couple months before reevaluating this issue so that we have better perspective.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/155091050","html_url":"https://github.com/elastic/elasticsearch/issues/14335#issuecomment-155091050","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14335","id":155091050,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NTA5MTA1MA==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2015-11-09T15:09:57Z","updated_at":"2015-11-09T15:09:57Z","author_association":"MEMBER","body":"Works for me, I certainly don't know enough about how all the components fit together to have a well-educated opinion.  :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/297319254","html_url":"https://github.com/elastic/elasticsearch/issues/14335#issuecomment-297319254","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14335","id":297319254,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzMxOTI1NA==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2017-04-26T09:34:39Z","updated_at":"2017-04-26T09:34:39Z","author_association":"MEMBER","body":"Closing as this is no longer relevant","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/297452561","html_url":"https://github.com/elastic/elasticsearch/issues/14335#issuecomment-297452561","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14335","id":297452561,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzQ1MjU2MQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-04-26T15:42:08Z","updated_at":"2017-04-26T15:42:08Z","author_association":"CONTRIBUTOR","body":"Superseded by https://issues.apache.org/jira/browse/LUCENE-7055","performed_via_github_app":null}]