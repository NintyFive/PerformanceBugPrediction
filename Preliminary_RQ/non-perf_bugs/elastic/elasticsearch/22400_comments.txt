[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/269911615","html_url":"https://github.com/elastic/elasticsearch/issues/22400#issuecomment-269911615","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22400","id":269911615,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTkxMTYxNQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-01-01T17:31:01Z","updated_at":"2017-01-01T17:31:01Z","author_association":"MEMBER","body":"Would you please be more specific about the context and what you're expecting?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/270338491","html_url":"https://github.com/elastic/elasticsearch/issues/22400#issuecomment-270338491","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22400","id":270338491,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDMzODQ5MQ==","user":{"login":"killolol","id":9128588,"node_id":"MDQ6VXNlcjkxMjg1ODg=","avatar_url":"https://avatars0.githubusercontent.com/u/9128588?v=4","gravatar_id":"","url":"https://api.github.com/users/killolol","html_url":"https://github.com/killolol","followers_url":"https://api.github.com/users/killolol/followers","following_url":"https://api.github.com/users/killolol/following{/other_user}","gists_url":"https://api.github.com/users/killolol/gists{/gist_id}","starred_url":"https://api.github.com/users/killolol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/killolol/subscriptions","organizations_url":"https://api.github.com/users/killolol/orgs","repos_url":"https://api.github.com/users/killolol/repos","events_url":"https://api.github.com/users/killolol/events{/privacy}","received_events_url":"https://api.github.com/users/killolol/received_events","type":"User","site_admin":false},"created_at":"2017-01-04T10:18:53Z","updated_at":"2017-01-04T10:18:53Z","author_association":"NONE","body":"Here is error from log : ... \"status\"=>400, \"error\"=>{\"type\"=>\"mapper_parsing_exception\", \"reason\"=>\"failed to parse [ip]\", \"caused_by\"=>{\"type\"=>\"illegal_argument_exception\", \"reason\"=>\"'xxxx::xxxx:xxxx:xxxx:xxxx%12' is not an IP string literal.\"}}}}}\r\n\r\nIt is valid IPv6 address since %12 is scope ID of IPv6 address. \r\nI want to ask if you are planning support for scope ID in ES, or to parse it myself. \r\nThanks.\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/271656246","html_url":"https://github.com/elastic/elasticsearch/issues/22400#issuecomment-271656246","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22400","id":271656246,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTY1NjI0Ng==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-01-10T18:26:29Z","updated_at":"2017-01-10T18:26:29Z","author_association":"CONTRIBUTOR","body":"It looks like that not a scope ID but a [zone index](https://en.wikipedia.org/wiki/IPv6_address#Link-local_addresses_and_zone_indices), which is used only for routing outgoing traffic via link local.  None of the [Address Formats](https://en.wikipedia.org/wiki/IPv6_address#Address_formats) use the zone index, so I very much doubt we'll be supporting it.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/281075537","html_url":"https://github.com/elastic/elasticsearch/issues/22400#issuecomment-281075537","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22400","id":281075537,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MTA3NTUzNw==","user":{"login":"vbohata","id":20965804,"node_id":"MDQ6VXNlcjIwOTY1ODA0","avatar_url":"https://avatars0.githubusercontent.com/u/20965804?v=4","gravatar_id":"","url":"https://api.github.com/users/vbohata","html_url":"https://github.com/vbohata","followers_url":"https://api.github.com/users/vbohata/followers","following_url":"https://api.github.com/users/vbohata/following{/other_user}","gists_url":"https://api.github.com/users/vbohata/gists{/gist_id}","starred_url":"https://api.github.com/users/vbohata/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vbohata/subscriptions","organizations_url":"https://api.github.com/users/vbohata/orgs","repos_url":"https://api.github.com/users/vbohata/repos","events_url":"https://api.github.com/users/vbohata/events{/privacy}","received_events_url":"https://api.github.com/users/vbohata/received_events","type":"User","site_admin":false},"created_at":"2017-02-20T13:11:20Z","updated_at":"2017-02-20T13:11:20Z","author_association":"NONE","body":"Elasticsearch should automatically just ignore that part of IPv6 address.\r\nBtw. :: is not accepted by elasticsearch, which should because this is a short format of 0000:0000:0000:0000:0000:0000:0000:0000.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/335386701","html_url":"https://github.com/elastic/elasticsearch/issues/22400#issuecomment-335386701","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22400","id":335386701,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTM4NjcwMQ==","user":{"login":"nick4u","id":5399008,"node_id":"MDQ6VXNlcjUzOTkwMDg=","avatar_url":"https://avatars3.githubusercontent.com/u/5399008?v=4","gravatar_id":"","url":"https://api.github.com/users/nick4u","html_url":"https://github.com/nick4u","followers_url":"https://api.github.com/users/nick4u/followers","following_url":"https://api.github.com/users/nick4u/following{/other_user}","gists_url":"https://api.github.com/users/nick4u/gists{/gist_id}","starred_url":"https://api.github.com/users/nick4u/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nick4u/subscriptions","organizations_url":"https://api.github.com/users/nick4u/orgs","repos_url":"https://api.github.com/users/nick4u/repos","events_url":"https://api.github.com/users/nick4u/events{/privacy}","received_events_url":"https://api.github.com/users/nick4u/received_events","type":"User","site_admin":false},"created_at":"2017-10-10T07:33:39Z","updated_at":"2017-10-10T07:33:39Z","author_association":"NONE","body":"I have tons (about 1,5GB/day) of errors like that :\r\n```\r\n[DEBUG][o.e.a.b.TransportShardBulkAction] [ct102-15-log-fr1] [www-2017.10.09][0] failed to execute bulk item (index) BulkShardRequest [[www-2017.10.09][0]] containing [\r\norg.elasticsearch.index.mapper.MapperParsingException: failed to parse [clientip]\r\n.....\r\nCaused by: java.lang.IllegalArgumentException: 'fe80::d1bb:dad5:6c5:95a4%12' is not an IP string literal.\r\n\r\n```\r\ncoming from IIS logs\r\n\r\ncould anyone help me make appropriate logstash mutate/filter removing from field \"clientip\" string (\"fe80::d1bb:dad5:6c5:95a4%12\") everything past \"%\" including \"%\" sign?\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/395480335","html_url":"https://github.com/elastic/elasticsearch/issues/22400#issuecomment-395480335","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22400","id":395480335,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTQ4MDMzNQ==","user":{"login":"jdnewhouse","id":13296920,"node_id":"MDQ6VXNlcjEzMjk2OTIw","avatar_url":"https://avatars3.githubusercontent.com/u/13296920?v=4","gravatar_id":"","url":"https://api.github.com/users/jdnewhouse","html_url":"https://github.com/jdnewhouse","followers_url":"https://api.github.com/users/jdnewhouse/followers","following_url":"https://api.github.com/users/jdnewhouse/following{/other_user}","gists_url":"https://api.github.com/users/jdnewhouse/gists{/gist_id}","starred_url":"https://api.github.com/users/jdnewhouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdnewhouse/subscriptions","organizations_url":"https://api.github.com/users/jdnewhouse/orgs","repos_url":"https://api.github.com/users/jdnewhouse/repos","events_url":"https://api.github.com/users/jdnewhouse/events{/privacy}","received_events_url":"https://api.github.com/users/jdnewhouse/received_events","type":"User","site_admin":false},"created_at":"2018-06-07T16:19:02Z","updated_at":"2018-06-07T16:22:12Z","author_association":"NONE","body":"@nick4u Here is how I fix the scope id problem in IPv6:\r\n\r\n```\r\nfilter {\r\n    if \"%\" in [clientip] { \r\n        grok {\r\n            match => { \"clientip\" => \"%{GREEDYDATA:clientip}%\" }\r\n            overwrite => [ \"clientip\" ]\r\n            id => \"grok_filter_ipv6\"\r\n        }\r\n    }\r\n}\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/452109181","html_url":"https://github.com/elastic/elasticsearch/issues/22400#issuecomment-452109181","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22400","id":452109181,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjEwOTE4MQ==","user":{"login":"rdsworks","id":859114,"node_id":"MDQ6VXNlcjg1OTExNA==","avatar_url":"https://avatars2.githubusercontent.com/u/859114?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsworks","html_url":"https://github.com/rdsworks","followers_url":"https://api.github.com/users/rdsworks/followers","following_url":"https://api.github.com/users/rdsworks/following{/other_user}","gists_url":"https://api.github.com/users/rdsworks/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsworks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsworks/subscriptions","organizations_url":"https://api.github.com/users/rdsworks/orgs","repos_url":"https://api.github.com/users/rdsworks/repos","events_url":"https://api.github.com/users/rdsworks/events{/privacy}","received_events_url":"https://api.github.com/users/rdsworks/received_events","type":"User","site_admin":false},"created_at":"2019-01-07T22:45:26Z","updated_at":"2019-01-07T22:45:26Z","author_association":"NONE","body":"I got around this in the Ingest Pipeline by defining a custom pattern_definition which removed the (%.+) from the already defined IPV6 pattern, then used that to strip scope.\r\n\r\nIt's throwing the exception when it's trying to store the value as type: ip.\r\n\r\n\"processors\": [\r\n    {\r\n      \"grok\": {\r\n        \"field\": \"message\",\r\n        \"patterns\": [\"%{TIMESTAMP_ISO8601:date_time} %{WORD:s_sitename} %{HOSTNAME:s_computername} %{**IPC**:s_ip} %{WORD:cs_method} %{URIPATH:cs_uri_stem} %{NOTSPACE:cs_uri_query} %{NUMBER:s_port} %{NOTSPACE:cs_username} %{**IPC**:c_ip}(%.+)? %{NOTSPACE:cs_version} %{NOTSPACE:cs_user_agent} %{NOTSPACE:cs_cookie} %{NOTSPACE:cs_referer} %{NOTSPACE:cs_host} %{NUMBER:sc_status} %{NUMBER:sc_substatus} %{NUMBER:sc_win32_status} %{NUMBER:sc_bytes} %{NUMBER:cs_bytes} %{NUMBER:time_taken}\"],\r\n        \"pattern_definitions\": {\r\n          \"IPV6C\" : \"((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]?\\\\d)(\\\\.(25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]?\\\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]?\\\\d)(\\\\.(25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]?\\\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]?\\\\d)(\\\\.(25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]?\\\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]?\\\\d)(\\\\.(25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]?\\\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]?\\\\d)(\\\\.(25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]?\\\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]?\\\\d)(\\\\.(25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]?\\\\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]?\\\\d)(\\\\.(25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]?\\\\d)){3}))|:)))\",\r\n          \"IPC\" : \"(?:%{IPV6C}|%{IPV4})\"\r\n        }\r\n      }\r\n","performed_via_github_app":null}]