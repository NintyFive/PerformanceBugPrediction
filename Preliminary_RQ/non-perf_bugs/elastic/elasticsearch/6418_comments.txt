[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/68389055","html_url":"https://github.com/elastic/elasticsearch/issues/6418#issuecomment-68389055","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6418","id":68389055,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Mzg5MDU1","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-12-30T19:34:08Z","updated_at":"2014-12-30T19:34:08Z","author_association":"CONTRIBUTOR","body":"Hi @gibrown \n\nWhat's your use case for this?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/68390289","html_url":"https://github.com/elastic/elasticsearch/issues/6418#issuecomment-68390289","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6418","id":68390289,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzkwMjg5","user":{"login":"gibrown","id":820871,"node_id":"MDQ6VXNlcjgyMDg3MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/820871?v=4","gravatar_id":"","url":"https://api.github.com/users/gibrown","html_url":"https://github.com/gibrown","followers_url":"https://api.github.com/users/gibrown/followers","following_url":"https://api.github.com/users/gibrown/following{/other_user}","gists_url":"https://api.github.com/users/gibrown/gists{/gist_id}","starred_url":"https://api.github.com/users/gibrown/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gibrown/subscriptions","organizations_url":"https://api.github.com/users/gibrown/orgs","repos_url":"https://api.github.com/users/gibrown/repos","events_url":"https://api.github.com/users/gibrown/events{/privacy}","received_events_url":"https://api.github.com/users/gibrown/received_events","type":"User","site_admin":false},"created_at":"2014-12-30T19:47:31Z","updated_at":"2014-12-30T19:47:31Z","author_association":"CONTRIBUTOR","body":"We don't allow (or want) any scripting on queries. We have a lot of internal and external users creating queries, and I don't trust running scripts in any of the queries. We try and prevent that in our client code, but given how easily you could bring down a cluster with a script I'd prefer them to be completely disabled for queries.\n\nBut for update operations scripting is extremely necessary. The update API is mostly useless with scripting turned off, and using the update API is necessary to scale our indexing.\n\nSo I think it would beneficial to individually configure which endpoints can accept scripts.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/68438158","html_url":"https://github.com/elastic/elasticsearch/issues/6418#issuecomment-68438158","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6418","id":68438158,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDM4MTU4","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-12-31T12:01:56Z","updated_at":"2014-12-31T12:01:56Z","author_association":"CONTRIBUTOR","body":"@gibrown thanks for the info.  These script settings also relate to the script source ie #7147, and sandboxed vs enabled vs disabled.\n\nFor instance, you may want to allow sandboxed dynamic scripting for updates, but only predefined indexed scripts for search (but without sandboxing). Wondering if we need to support general settings (for ease of use) and more specific settings (for flexible control).  There are also differences between scripting engines that make some safer than others, regardless of sandboxing. For instance, even though groovy is sandboxed, a simple `while (true) {}` will run forever.  Expressions, on the other hand, doesn't have loops and so doesn't suffer from that issue.\n\nThe settings need to cover the following combinations\n- mode:  enabled, disabled, sandboxed\n- source:  indexed, dynamic, file\n- engine: groovy, expressions, mustache, etc\n- operation: update, search, aggs\n\nI propose the following specific settings, which is what the code will use to decide whether to allow a script or not:\n\n```\nscript.engine.groovy.indexed.update:    sandbox/enable/disable\nscript.engine.groovy.indexed.search:    sandbox/enable/disable\nscript.engine.groovy.indexed.aggs:      sandbox/enable/disable\nscript.engine.groovy.dynamic.update:    sandbox/enable/disable\nscript.engine.groovy.dynamic.search:    sandbox/enable/disable\nscript.engine.groovy.dynamic.aggs:      sandbox/enable/disable\nscript.engine.groovy.file.update:       sandbox/enable/disable\nscript.engine.groovy.file.search:       sandbox/enable/disable\nscript.engine.groovy.file.aggs:         sandbox/enable/disable\n```\n\nFor ease of use, we should also support the following more generic settings:\n\n```\nscript.all:     sandbox/enable/disable  (default: `sandbox`)\n\nscript.indexed: sandbox/enable/disable\nscript.dynamic: sandbox/enable/disable\nscript.file:    sandbox/enable/disable\n\nscript.update:  sandbox/enable/disable\nscript.search:  sandbox/enable/disable\nscript.aggs:    sandbox/enable/disable\n```\n\nThese will be used to calculate the more specific settings, using the stricter setting of each combination, eg:\n\n```\nscript.all:                             sandbox\nscript.dynamic:                         disable\nscript.search:                          disable\nscript.engine.groovy.file.search:       enable\n```\n\nwill result in the following specific settings:\n\n```\nscript.engine.groovy.indexed.update:    sandbox\nscript.engine.groovy.indexed.search:    disable\nscript.engine.groovy.indexed.aggs:      sandbox\nscript.engine.groovy.dynamic.update:    disable\nscript.engine.groovy.dynamic.search:    disable\nscript.engine.groovy.dynamic.aggs:      disable\nscript.engine.groovy.file.update:       sandbox\nscript.engine.groovy.file.search:       enable\nscript.engine.groovy.file.aggs:         sandbox\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/68469181","html_url":"https://github.com/elastic/elasticsearch/issues/6418#issuecomment-68469181","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6418","id":68469181,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDY5MTgx","user":{"login":"gibrown","id":820871,"node_id":"MDQ6VXNlcjgyMDg3MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/820871?v=4","gravatar_id":"","url":"https://api.github.com/users/gibrown","html_url":"https://github.com/gibrown","followers_url":"https://api.github.com/users/gibrown/followers","following_url":"https://api.github.com/users/gibrown/following{/other_user}","gists_url":"https://api.github.com/users/gibrown/gists{/gist_id}","starred_url":"https://api.github.com/users/gibrown/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gibrown/subscriptions","organizations_url":"https://api.github.com/users/gibrown/orgs","repos_url":"https://api.github.com/users/gibrown/repos","events_url":"https://api.github.com/users/gibrown/events{/privacy}","received_events_url":"https://api.github.com/users/gibrown/received_events","type":"User","site_admin":false},"created_at":"2014-12-31T21:05:52Z","updated_at":"2014-12-31T21:05:52Z","author_association":"CONTRIBUTOR","body":"Those sound great to me. Would definitely work for my case.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76384887","html_url":"https://github.com/elastic/elasticsearch/issues/6418#issuecomment-76384887","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6418","id":76384887,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Mzg0ODg3","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-02-27T12:04:55Z","updated_at":"2015-02-27T12:04:55Z","author_association":"CONTRIBUTOR","body":"I removed the blocker label here - it's not really a blocker...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76399739","html_url":"https://github.com/elastic/elasticsearch/issues/6418#issuecomment-76399739","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6418","id":76399739,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Mzk5NzM5","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2015-02-27T14:11:42Z","updated_at":"2015-02-27T14:11:42Z","author_association":"MEMBER","body":"I am looking into this. I think that the default should not just be `script.all: sandbox` otherwise groovy file scripts cannot be run by default, which is kinda annoying and breaks bw comp. To be honest I am leaning towards removing the `script.all` setting for simplicity in favour of explicit configuration of the three generic settings, which would have the following defaults:\n\n```\nscript.file: enable\nscript.indexed: sandbox\nscript.dynamic: sandbox\n```\n\nThoughts?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76939601","html_url":"https://github.com/elastic/elasticsearch/issues/6418#issuecomment-76939601","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6418","id":76939601,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTM5NjAx","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-03-03T12:51:47Z","updated_at":"2015-03-03T12:51:47Z","author_association":"CONTRIBUTOR","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76941514","html_url":"https://github.com/elastic/elasticsearch/issues/6418#issuecomment-76941514","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6418","id":76941514,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTQxNTE0","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2015-03-03T13:05:39Z","updated_at":"2015-03-03T13:05:39Z","author_association":"MEMBER","body":"As for the more generic settings, I am wondering about conflicts. Of course more specific settings take precedence. But which one takes precedence between conflicting script_type based setting and operation based setting?\n\nLet's say we have:\n\n```\nscript.dynamic: enable\nscript.search: disable\n```\n\nShould it get expanded to the following?\n\n```\nscript.engine.groovy.indexed.update:  sandbox\nscript.engine.groovy.indexed.search: disable\nscript.engine.groovy.indexed.aggs: sandbox\nscript.engine.groovy.dynamic.update: enable\nscript.engine.groovy.dynamic.search: disable\nscript.engine.groovy.dynamic.aggs: enable\nscript.engine.groovy.file.update: sandbox\nscript.engine.groovy.file.search: disable\nscript.engine.groovy.file.aggs: sandbox\n```\n\nIf so, it means that operation based settings take precedence over script_type based settings. Maybe it's obvious, but I thought it was worth to double check what folks think.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/77009489","html_url":"https://github.com/elastic/elasticsearch/issues/6418#issuecomment-77009489","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6418","id":77009489,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MDA5NDg5","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-03-03T18:54:36Z","updated_at":"2015-03-03T18:54:36Z","author_association":"CONTRIBUTOR","body":"Yes, I think the order should be: lang > source > operation\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/77415498","html_url":"https://github.com/elastic/elasticsearch/issues/6418#issuecomment-77415498","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6418","id":77415498,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDE1NDk4","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2015-03-05T18:04:01Z","updated_at":"2015-03-05T18:04:01Z","author_association":"MEMBER","body":"Just noticed that `mustache` and `native` are treated as special scripting engines since they are considered safer than others. Turns out that currently we always considered them both enabled, even if dynamic scripting is completely off.\n\nThat means that our default settings should be different only for `mustache` and `native`, they would have everything enabled by default.\n\nWe could have a problem though with generic settings as they would end up affecting `mustache` and `native` too. Think of `script.dynamic` set to `false`. Should we still allow `mustache` and `native` scripts anyways, which would mean not applying those generic settings to them? But maybe make it possible to set their settings only through engine specific settings? Thoughts?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/77428007","html_url":"https://github.com/elastic/elasticsearch/issues/6418#issuecomment-77428007","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6418","id":77428007,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDI4MDA3","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-03-05T19:03:51Z","updated_at":"2015-03-05T19:03:51Z","author_association":"MEMBER","body":"`native` scripts are by definition not dynamic.  Why would these settings ever affect them?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/77428107","html_url":"https://github.com/elastic/elasticsearch/issues/6418#issuecomment-77428107","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6418","id":77428107,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDI4MTA3","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-03-05T19:04:08Z","updated_at":"2015-03-05T19:04:08Z","author_association":"CONTRIBUTOR","body":"> Think of script.dynamic set to false. Should we still allow mustache and native scripts anyways, which would mean not applying those generic settings to them? But maybe make it possible to set their settings only through engine specific settings? Thoughts?\n\nHmm... good point. Native scripts can't be defined dynamically anyway, so it's really just templating.  The default will be that dynamic mustache and expressions are on, but everything else is off.  So I think there is no real need to set `script.dynamic: false`.  So if somebody sets it, we'd do what they say and disable mustache and expressions too.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/77434888","html_url":"https://github.com/elastic/elasticsearch/issues/6418#issuecomment-77434888","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6418","id":77434888,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDM0ODg4","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2015-03-05T19:34:25Z","updated_at":"2015-03-05T19:34:25Z","author_association":"MEMBER","body":"If we do that, we also need to be extra sure to document that search templates will not work if dynamic scripting is disabled (just a reminder)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/77527478","html_url":"https://github.com/elastic/elasticsearch/issues/6418#issuecomment-77527478","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6418","id":77527478,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NTI3NDc4","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2015-03-06T09:07:09Z","updated_at":"2015-03-06T09:07:09Z","author_association":"MEMBER","body":"> native scripts are by definition not dynamic. Why would these settings ever affect them?\n\n@rjernst good point. Weird, but the fact that native scripts are not dynamic is an implementation detail of the native engine. You execute the script as it was dynamic (providing its name as `script: my_script`), then the engine knows that what you provided is not a script but the identifier of a script that is already compiled somewhere...\n\n> Native scripts can't be defined dynamically anyway, so it's really just templating.\n\n@clintongormley right but as I described above native scripts end up being considered dynamic although they aren't. That means that unless we treat them as special scripts they won't be executable with defaults settings, as their engine is not declared \"sandboxed\". I think the notion of `file`, `indexed` and `dynamic` makes little sense in the context of `native` scripts, and we should have a special case for them, like we currently have [here](https://github.com/elasticsearch/elasticsearch/blob/master/src/main/java/org/elasticsearch/script/ScriptService.java#L511). I wonder if these fine grained settings should even apply to native scripts. By default you have no native scripts available, and if you install any via plugin, you just want to be able to execute them. Does it ever make sense to disable native scripts, especially given that these settings are static? I am leaning towards taking them out of this loop and making them always enabled regardless of settings.\n\nAs for `mustache` scripts, they are a little bit different as their engine is declared \"sandboxed\", thus they would run with default settings. That said they would be affected by generic settings applied, which is acceptable as @clintongormley said, we will document it as @dakrone suggested. The only concern is that this behaviour breaks backwards compatibility as at the moment you can always execute mustache scripts...\n","performed_via_github_app":null}]