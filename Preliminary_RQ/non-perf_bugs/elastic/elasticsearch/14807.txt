{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/14807","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14807/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14807/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14807/events","html_url":"https://github.com/elastic/elasticsearch/issues/14807","id":117422032,"node_id":"MDU6SXNzdWUxMTc0MjIwMzI=","number":14807,"title":"Marvel not working after changing cluster.name to sth. else than elasticsearch","user":{"login":"mdiehm","id":1712627,"node_id":"MDQ6VXNlcjE3MTI2Mjc=","avatar_url":"https://avatars1.githubusercontent.com/u/1712627?v=4","gravatar_id":"","url":"https://api.github.com/users/mdiehm","html_url":"https://github.com/mdiehm","followers_url":"https://api.github.com/users/mdiehm/followers","following_url":"https://api.github.com/users/mdiehm/following{/other_user}","gists_url":"https://api.github.com/users/mdiehm/gists{/gist_id}","starred_url":"https://api.github.com/users/mdiehm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdiehm/subscriptions","organizations_url":"https://api.github.com/users/mdiehm/orgs","repos_url":"https://api.github.com/users/mdiehm/repos","events_url":"https://api.github.com/users/mdiehm/events{/privacy}","received_events_url":"https://api.github.com/users/mdiehm/received_events","type":"User","site_admin":false},"labels":[{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2015-11-17T18:45:22Z","updated_at":"2016-01-18T10:49:10Z","closed_at":"2016-01-18T10:49:10Z","author_association":"NONE","active_lock_reason":null,"body":"Marvel worked fine when the cluster was name elasticsearch. No I changed it and things went wrong. I have uninstalled marvel and licence and reinstalled with no success. I see there is a marvel index created in the indices directory:\n\nroot@moose:/var/lib/elasticsearch/hirschewiewir/nodes/0/indices# du -hs .marvel-es-*\n16K     .marvel-es-2015.11.17\n16K     .marvel-es-data\n\nbut the shareds are unassigned:\n.marvel-es-data       0 p UNASSIGNED  \n.marvel-es-data       0 r UNASSIGNED  \n\nwhen I start elasticsearch i see in the logfile:\n[2015-11-17 19:31:57,216][INFO ][plugins                  ] [moose] loaded [license, marvel], sites []\n\nwhen I try to access the marvel plugin within kibana i get the following error message in the elasticsearch logfile: \n\n[2015-11-17 19:37:21,955][DEBUG][action.search.type       ] [moose] All shards failed for phase: [query_fetch]                                                                                                              [59/87]\n[.marvel-es-data][[.marvel-es-data][0]] NoShardAvailableActionException[null]\n        at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction.start(TransportSearchTypeAction.java:151)\n        at org.elasticsearch.action.search.type.TransportSearchQueryAndFetchAction.doExecute(TransportSearchQueryAndFetchAction.java:58)\n        at org.elasticsearch.action.search.type.TransportSearchQueryAndFetchAction.doExecute(TransportSearchQueryAndFetchAction.java:47)\n        at org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:70)\n        at org.elasticsearch.action.search.TransportSearchAction.doExecute(TransportSearchAction.java:103)\n        at org.elasticsearch.action.search.TransportSearchAction.doExecute(TransportSearchAction.java:44)\n        at org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:70)\n        at org.elasticsearch.client.node.NodeClient.doExecute(NodeClient.java:58)\n        at org.elasticsearch.client.support.AbstractClient.execute(AbstractClient.java:347)\n        at org.elasticsearch.client.FilterClient.doExecute(FilterClient.java:52)\n        at org.elasticsearch.rest.BaseRestHandler$HeadersAndContextCopyClient.doExecute(BaseRestHandler.java:83)\n        at org.elasticsearch.client.support.AbstractClient.execute(AbstractClient.java:347)\n        at org.elasticsearch.client.support.AbstractClient.search(AbstractClient.java:570)\n        at org.elasticsearch.rest.action.search.RestSearchAction.handleRequest(RestSearchAction.java:84)\n        at org.elasticsearch.rest.BaseRestHandler.handleRequest(BaseRestHandler.java:54)\n        at org.elasticsearch.rest.RestController.executeHandler(RestController.java:207)\n        at org.elasticsearch.rest.RestController.dispatchRequest(RestController.java:166)\n        at org.elasticsearch.http.HttpServer.internalDispatchRequest(HttpServer.java:128)\n        at org.elasticsearch.http.HttpServer$Dispatcher.dispatchRequest(HttpServer.java:86)\n        at org.elasticsearch.http.netty.NettyHttpServerTransport.dispatchRequest(NettyHttpServerTransport.java:348)\n        at org.elasticsearch.http.netty.HttpRequestHandler.messageReceived(HttpRequestHandler.java:63)\n        at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\n        at org.elasticsearch.http.netty.pipelining.HttpPipeliningHandler.messageReceived(HttpPipeliningHandler.java:60)\n        at org.jboss.netty.channel.SimpleChannelHandler.handleUpstream(SimpleChannelHandler.java:88)\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\n        at org.jboss.netty.handler.codec.http.HttpChunkAggregator.messageReceived(HttpChunkAggregator.java:145)\n        at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\n        at org.jboss.netty.handler.codec.http.HttpContentDecoder.messageReceived(HttpContentDecoder.java:108)\n        at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\n        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)\n        at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:459)\n        at org.jboss.netty.handler.codec.replay.ReplayingDecoder.callDecode(ReplayingDecoder.java:536)\n        at org.jboss.netty.handler.codec.replay.ReplayingDecoder.messageReceived(ReplayingDecoder.java:435)\n        at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\n        at org.elasticsearch.common.netty.OpenChannelsHandler.handleUpstream(OpenChannelsHandler.java:75)\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)\n        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)\n        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)\n        at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:88)\n        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:108)\n        at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:337)\n        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)\n        at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)\n        at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\n        at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}