{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/9792","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9792/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9792/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9792/events","html_url":"https://github.com/elastic/elasticsearch/issues/9792","id":58373816,"node_id":"MDU6SXNzdWU1ODM3MzgxNg==","number":9792,"title":"Queue size","user":{"login":"christopher5106","id":6875375,"node_id":"MDQ6VXNlcjY4NzUzNzU=","avatar_url":"https://avatars0.githubusercontent.com/u/6875375?v=4","gravatar_id":"","url":"https://api.github.com/users/christopher5106","html_url":"https://github.com/christopher5106","followers_url":"https://api.github.com/users/christopher5106/followers","following_url":"https://api.github.com/users/christopher5106/following{/other_user}","gists_url":"https://api.github.com/users/christopher5106/gists{/gist_id}","starred_url":"https://api.github.com/users/christopher5106/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christopher5106/subscriptions","organizations_url":"https://api.github.com/users/christopher5106/orgs","repos_url":"https://api.github.com/users/christopher5106/repos","events_url":"https://api.github.com/users/christopher5106/events{/privacy}","received_events_url":"https://api.github.com/users/christopher5106/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-02-20T16:14:01Z","updated_at":"2015-02-20T21:03:16Z","closed_at":"2015-02-20T21:03:16Z","author_association":"NONE","active_lock_reason":null,"body":"I'm having the following problem : \n\n\"SearchPhaseExecutionException[Failed to execute phase [query], all shards failed; shardFailures {[rlrweRJAQJqaoKfFB8il5A][stt_prod][3]: EsRejectedExecutionException[rejected execution (queue capacity 1000) on org.elasticsearch.action.search.type.TransportSearchTypeAction\n\nIt sounds very strange; when I restarted the server, it worked fine again.\n\nWhat could happen ? \n\nHere is my configuration : \n- ES version is 1.0.1\n- I have 3 indexes, of respective size 2.5G, 1.7G and 250M, each one has 5 shards\n- the cluster is one only one instance (solo)\n- the state of the cluster says 15 successful shard, 0 failed shard and 30 total shards (where are the 15 shards missing ?)\n- in my settings, mlockall is set to true\n- I enabled script.disable_dynamic: false, installed plugins _head and action-updatebyquery\n- ES heap size is set 50% which I can confirm using top command : \n  5320 elastic+  20   0  9.918g 4.788g  72980 S   7.6 65.3  29:49.42 java\n- I'm using 30% of disk capacity\n\nMy traffic is not more than 125 requests per minutes : \n![requests](https://cloud.githubusercontent.com/assets/6875375/6289842/466f8b60-b923-11e4-89bf-4e58dcba4a03.png)\n\nSo if I understand well, each request can live 30s, how come I have a queue of 1000 ?!\nCan ES save the requests in the queue while the shards have failed ? \nWhy do the shards do not come back ?\n\nThanks for your help (I'm not using ES usually, more Solr or CloudSearch)\n","closed_by":{"login":"markwalkom","id":3184718,"node_id":"MDQ6VXNlcjMxODQ3MTg=","avatar_url":"https://avatars0.githubusercontent.com/u/3184718?v=4","gravatar_id":"","url":"https://api.github.com/users/markwalkom","html_url":"https://github.com/markwalkom","followers_url":"https://api.github.com/users/markwalkom/followers","following_url":"https://api.github.com/users/markwalkom/following{/other_user}","gists_url":"https://api.github.com/users/markwalkom/gists{/gist_id}","starred_url":"https://api.github.com/users/markwalkom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markwalkom/subscriptions","organizations_url":"https://api.github.com/users/markwalkom/orgs","repos_url":"https://api.github.com/users/markwalkom/repos","events_url":"https://api.github.com/users/markwalkom/events{/privacy}","received_events_url":"https://api.github.com/users/markwalkom/received_events","type":"User","site_admin":false},"performed_via_github_app":null}