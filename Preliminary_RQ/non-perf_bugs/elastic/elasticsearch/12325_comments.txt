[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/122563033","html_url":"https://github.com/elastic/elasticsearch/issues/12325#issuecomment-122563033","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12325","id":122563033,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMjU2MzAzMw==","user":{"login":"dimroc","id":635121,"node_id":"MDQ6VXNlcjYzNTEyMQ==","avatar_url":"https://avatars2.githubusercontent.com/u/635121?v=4","gravatar_id":"","url":"https://api.github.com/users/dimroc","html_url":"https://github.com/dimroc","followers_url":"https://api.github.com/users/dimroc/followers","following_url":"https://api.github.com/users/dimroc/following{/other_user}","gists_url":"https://api.github.com/users/dimroc/gists{/gist_id}","starred_url":"https://api.github.com/users/dimroc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dimroc/subscriptions","organizations_url":"https://api.github.com/users/dimroc/orgs","repos_url":"https://api.github.com/users/dimroc/repos","events_url":"https://api.github.com/users/dimroc/events{/privacy}","received_events_url":"https://api.github.com/users/dimroc/received_events","type":"User","site_admin":false},"created_at":"2015-07-18T16:39:30Z","updated_at":"2015-07-18T16:39:56Z","author_association":"NONE","body":"Bug Repro Steps:\n\n```\ncurl -XPUT http://127.0.0.1:9200/repro-bug -d '{\"settings\":{\"number_of_shards\":3},\"mappings\":{\"geoevent\":{\"properties\":{\"geojson\":{\"type\":\"geo_shape\"}}}}}'\n\ncurl https://gist.githubusercontent.com/dimroc/51e20d6f0b309f3ddca7/raw/de3fc24504c6b37f5f9c63bb9f25a409ee2feb3f/repro-bug-payload.json > /tmp/repro-bug.json\n\ncurl --data \"@/tmp/repro-bug.json\" -XPUT http://127.0.0.1:9200/repro-bug/geoevent/1\n```\n\nResult:\n\n```\n{\"error\":\"MapperParsingException[failed to parse [geojson]]; nested: IllegalArgumentException[Points of LinearRing do not form a closed linestring]; \",\"status\":400}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/146536069","html_url":"https://github.com/elastic/elasticsearch/issues/12325#issuecomment-146536069","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12325","id":146536069,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NjUzNjA2OQ==","user":{"login":"komarserjio","id":297514,"node_id":"MDQ6VXNlcjI5NzUxNA==","avatar_url":"https://avatars2.githubusercontent.com/u/297514?v=4","gravatar_id":"","url":"https://api.github.com/users/komarserjio","html_url":"https://github.com/komarserjio","followers_url":"https://api.github.com/users/komarserjio/followers","following_url":"https://api.github.com/users/komarserjio/following{/other_user}","gists_url":"https://api.github.com/users/komarserjio/gists{/gist_id}","starred_url":"https://api.github.com/users/komarserjio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/komarserjio/subscriptions","organizations_url":"https://api.github.com/users/komarserjio/orgs","repos_url":"https://api.github.com/users/komarserjio/repos","events_url":"https://api.github.com/users/komarserjio/events{/privacy}","received_events_url":"https://api.github.com/users/komarserjio/received_events","type":"User","site_admin":false},"created_at":"2015-10-08T13:02:28Z","updated_at":"2015-10-08T13:08:38Z","author_association":"NONE","body":"@dimroc Looks like your polygon is not fully valid (by [ISO 19107:2003](http://www.iso.org/iso/catalogue_detail.htm?csnumber=26012) standard).\nI had the same issue when I was importing [Flickr Shapefiles Dataset](http://code.flickr.net/2011/01/08/flickr-shapefiles-public-dataset-2-0/) files into elastic search.\n\nYou can repair/fix the polygon using this tool: https://github.com/tudelft3d/prepair\nI did the trick with your repro-bug.json file and it helped - elastic search accepts fixed version.\n\nSteps:\n\n```\n# fixed invalid polygon using tudelft3d/prepair tool\n$ ./prepair --shpOut --ogr /tmp/repro-bug.json\n# convert generated shape file back to geojson format\n$ ogr2ogr -f GeoJSON  fixed-polygon.geojson out.shp\n\n# ES accepts the fixed polygon now\n$ curl --data \"@/tmp/prepair/fixed-polygon.geojson\" -XPUT http://localhost:9200/repro-bug/geoevent/1\n{\"_index\":\"repro-bug\",\"_type\":\"geoevent\",\"_id\":\"1\",\"_version\":1,\"created\":true}%\n```\n\nHope it helps :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/146569107","html_url":"https://github.com/elastic/elasticsearch/issues/12325#issuecomment-146569107","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12325","id":146569107,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NjU2OTEwNw==","user":{"login":"dimroc","id":635121,"node_id":"MDQ6VXNlcjYzNTEyMQ==","avatar_url":"https://avatars2.githubusercontent.com/u/635121?v=4","gravatar_id":"","url":"https://api.github.com/users/dimroc","html_url":"https://github.com/dimroc","followers_url":"https://api.github.com/users/dimroc/followers","following_url":"https://api.github.com/users/dimroc/following{/other_user}","gists_url":"https://api.github.com/users/dimroc/gists{/gist_id}","starred_url":"https://api.github.com/users/dimroc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dimroc/subscriptions","organizations_url":"https://api.github.com/users/dimroc/orgs","repos_url":"https://api.github.com/users/dimroc/repos","events_url":"https://api.github.com/users/dimroc/events{/privacy}","received_events_url":"https://api.github.com/users/dimroc/received_events","type":"User","site_admin":false},"created_at":"2015-10-08T14:49:49Z","updated_at":"2015-10-08T14:49:49Z","author_association":"NONE","body":"Thanks for the heads up @komarserjio, I'll be sure to check it out.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/156134912","html_url":"https://github.com/elastic/elasticsearch/issues/12325#issuecomment-156134912","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12325","id":156134912,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NjEzNDkxMg==","user":{"login":"bogensberger","id":1038966,"node_id":"MDQ6VXNlcjEwMzg5NjY=","avatar_url":"https://avatars1.githubusercontent.com/u/1038966?v=4","gravatar_id":"","url":"https://api.github.com/users/bogensberger","html_url":"https://github.com/bogensberger","followers_url":"https://api.github.com/users/bogensberger/followers","following_url":"https://api.github.com/users/bogensberger/following{/other_user}","gists_url":"https://api.github.com/users/bogensberger/gists{/gist_id}","starred_url":"https://api.github.com/users/bogensberger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bogensberger/subscriptions","organizations_url":"https://api.github.com/users/bogensberger/orgs","repos_url":"https://api.github.com/users/bogensberger/repos","events_url":"https://api.github.com/users/bogensberger/events{/privacy}","received_events_url":"https://api.github.com/users/bogensberger/received_events","type":"User","site_admin":false},"created_at":"2015-11-12T15:16:12Z","updated_at":"2015-11-12T15:17:19Z","author_association":"CONTRIBUTOR","body":"+1\n\nI also verified that the shape is correct, using geojsonlint.com\nThis is the GeoShape i tried to index: https://gist.github.com/sfsheath/9592083/#file-rome-json\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/156175971","html_url":"https://github.com/elastic/elasticsearch/issues/12325#issuecomment-156175971","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12325","id":156175971,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NjE3NTk3MQ==","user":{"login":"nknize","id":830187,"node_id":"MDQ6VXNlcjgzMDE4Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/830187?v=4","gravatar_id":"","url":"https://api.github.com/users/nknize","html_url":"https://github.com/nknize","followers_url":"https://api.github.com/users/nknize/followers","following_url":"https://api.github.com/users/nknize/following{/other_user}","gists_url":"https://api.github.com/users/nknize/gists{/gist_id}","starred_url":"https://api.github.com/users/nknize/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nknize/subscriptions","organizations_url":"https://api.github.com/users/nknize/orgs","repos_url":"https://api.github.com/users/nknize/repos","events_url":"https://api.github.com/users/nknize/events{/privacy}","received_events_url":"https://api.github.com/users/nknize/received_events","type":"User","site_admin":false},"created_at":"2015-11-12T17:30:47Z","updated_at":"2015-11-12T17:30:47Z","author_association":"CONTRIBUTOR","body":"@dimroc, hopefully you were able to resolve your issue. I was able to verify a closed loop at:\n\n``` json\n[-87.530045, 41.742051],\n[-87.530044, 41.742051],\n[-87.530045, 41.742051],\n```\n\nWhich violates the OGC SFA spec.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/156179330","html_url":"https://github.com/elastic/elasticsearch/issues/12325#issuecomment-156179330","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12325","id":156179330,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NjE3OTMzMA==","user":{"login":"nknize","id":830187,"node_id":"MDQ6VXNlcjgzMDE4Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/830187?v=4","gravatar_id":"","url":"https://api.github.com/users/nknize","html_url":"https://github.com/nknize","followers_url":"https://api.github.com/users/nknize/followers","following_url":"https://api.github.com/users/nknize/following{/other_user}","gists_url":"https://api.github.com/users/nknize/gists{/gist_id}","starred_url":"https://api.github.com/users/nknize/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nknize/subscriptions","organizations_url":"https://api.github.com/users/nknize/orgs","repos_url":"https://api.github.com/users/nknize/repos","events_url":"https://api.github.com/users/nknize/events{/privacy}","received_events_url":"https://api.github.com/users/nknize/received_events","type":"User","site_admin":false},"created_at":"2015-11-12T17:40:33Z","updated_at":"2015-11-12T17:40:33Z","author_association":"CONTRIBUTOR","body":"@bogensberger  \n\nrome.json feature `\"OBJECTID\" : 1` also contains a closed loop at:\n\n``` json\n[ 24.041199999999662, 38.212069999999528 ], \n[ 24.093430000000922, 38.270619999999326 ], \n[ 24.07726, 38.317940000000931 ],\n[ 24.04028, 38.354170000000465 ],\n[ 24.009260000000666, 38.394249999999374 ],\n[ 23.96148, 38.377899999999613 ],\n[ 23.91187, 38.384640000000218 ],\n[ 23.862670000000378, 38.39394 ],\n[ 23.810740000000862, 38.386249999999677 ], \n[ 23.806060000000912, 38.317409999999711 ], \n[ 23.858089999999777, 38.314169999999706 ],\n[ 23.907110000000159, 38.298380000000293 ], \n[ 23.95579, 38.275229999999397 ], \n[ 24.001120000000753, 38.244950000000244 ], \n[ 24.041199999999662, 38.212069999999528 ],\n```\n\nTry out the wonderful suggestion posted above by @komarserjio and let us know if you were able to clean up the geometry.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/175048303","html_url":"https://github.com/elastic/elasticsearch/issues/12325#issuecomment-175048303","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12325","id":175048303,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NTA0ODMwMw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-01-26T14:36:41Z","updated_at":"2016-01-26T14:36:41Z","author_association":"CONTRIBUTOR","body":"No more feedback. Closing\n","performed_via_github_app":null}]