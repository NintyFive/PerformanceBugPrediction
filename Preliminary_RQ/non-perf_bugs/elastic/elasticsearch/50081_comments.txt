[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/564613658","html_url":"https://github.com/elastic/elasticsearch/issues/50081#issuecomment-564613658","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50081","id":564613658,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDYxMzY1OA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-12-11T16:06:10Z","updated_at":"2019-12-11T16:06:10Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search (:Search/Mapping)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/564614901","html_url":"https://github.com/elastic/elasticsearch/issues/50081#issuecomment-564614901","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50081","id":564614901,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDYxNDkwMQ==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2019-12-11T16:08:44Z","updated_at":"2019-12-11T16:08:44Z","author_association":"MEMBER","body":"I can confirm, the example still works for me on 7.4.2 but not on 7.5.0","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/564623404","html_url":"https://github.com/elastic/elasticsearch/issues/50081#issuecomment-564623404","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50081","id":564623404,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDYyMzQwNA==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2019-12-11T16:26:44Z","updated_at":"2019-12-11T16:26:44Z","author_association":"MEMBER","body":"I think this is related to #46675 which made date parsing stricter in 7.5. We probably need to be prepared to catch more date parsing exceptions when ignore_malformed is set. Working on a fix...","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/577592589","html_url":"https://github.com/elastic/elasticsearch/issues/50081#issuecomment-577592589","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50081","id":577592589,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NzU5MjU4OQ==","user":{"login":"faxm0dem","id":112638,"node_id":"MDQ6VXNlcjExMjYzOA==","avatar_url":"https://avatars2.githubusercontent.com/u/112638?v=4","gravatar_id":"","url":"https://api.github.com/users/faxm0dem","html_url":"https://github.com/faxm0dem","followers_url":"https://api.github.com/users/faxm0dem/followers","following_url":"https://api.github.com/users/faxm0dem/following{/other_user}","gists_url":"https://api.github.com/users/faxm0dem/gists{/gist_id}","starred_url":"https://api.github.com/users/faxm0dem/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/faxm0dem/subscriptions","organizations_url":"https://api.github.com/users/faxm0dem/orgs","repos_url":"https://api.github.com/users/faxm0dem/repos","events_url":"https://api.github.com/users/faxm0dem/events{/privacy}","received_events_url":"https://api.github.com/users/faxm0dem/received_events","type":"User","site_admin":false},"created_at":"2020-01-23T09:13:44Z","updated_at":"2020-01-23T09:13:44Z","author_association":"NONE","body":"I'm not sure this is related, but when using `ignore_malformed:false` explicitly, it's not even possible to index valid dates:\r\n\r\n```\r\n7.5.1☠ HTTP PUT https://elastic:9200/syslog-2020.01.23/_mapping <<<'{\"properties\":{\"time_explicit\":{\"ignore_malformed\":false,\"type\":\"date\",\"format\":\"'\"YYYY-MM-dd'T'HH:mm:ssZ\"'\"}}}'\r\nHTTP/1.1 200 OK\r\ncontent-length: 21\r\ncontent-type: application/json; charset=UTF-8\r\n\r\n{\r\n    \"acknowledged\": true\r\n}\r\n\r\n7.5.1☠ HTTP PUT https://elastic:9200/syslog-2020.01.23/_mapping <<<'{\"properties\":{\"time_implicit\":{\"type\":\"date\",\"format\":\"'\"YYYY-MM-dd'T'HH:mm:ssZ\"'\"}}}'\r\nHTTP/1.1 200 OK\r\ncontent-length: 21\r\ncontent-type: application/json; charset=UTF-8\r\n\r\n{\r\n    \"acknowledged\": true\r\n}\r\n\r\n7.5.1☠ HTTP POST https://elastic:9200/syslog-2020.01.23/_doc <<<'{\"time_explicit\":\"2020-01-23T08:46:31+01:00\"}'\r\nHTTP/1.1 400 Bad Request\r\ncontent-length: 738\r\ncontent-type: application/json; charset=UTF-8\r\n\r\n{\r\n    \"error\": {\r\n        \"caused_by\": {\r\n            \"caused_by\": {\r\n                \"reason\": \"date_time_parse_exception: Text '2020-01-23T08:46:31+01:00' could not be parsed at index 19\",\r\n                \"type\": \"date_time_parse_exception\"\r\n            },\r\n            \"reason\": \"failed to parse date field [2020-01-23T08:46:31+01:00] with format [YYYY-MM-dd'T'HH:mm:ssZ]\",\r\n            \"type\": \"illegal_argument_exception\"\r\n        },\r\n        \"reason\": \"failed to parse field [time_explicit] of type [date] in document with id '6eqs0W8Bq4GBZRSzFXdL'. Preview of field's value: '2020-01-23T08:46:31+01:00'\",\r\n        \"root_cause\": [\r\n            {\r\n                \"reason\": \"failed to parse field [time_explicit] of type [date] in document with id '6eqs0W8Bq4GBZRSzFXdL'. Preview of field's value: '2020-01-23T08:46:31+01:00'\",\r\n                \"type\": \"mapper_parsing_exception\"\r\n            }\r\n        ],\r\n        \"type\": \"mapper_parsing_exception\"\r\n    },\r\n    \"status\": 400\r\n}\r\n\r\n7.5.1☠ HTTP POST https://elastic:9200/syslog-2020.01.23/_doc <<<'{\"time_implicit\":\"2020-01-23T08:46:31+01:00\"}'\r\nHTTP/1.1 201 Created\r\nLocation: /syslog-2020.01.23/_doc/6uqs0W8Bq4GBZRSzMXfn\r\ncontent-length: 184\r\ncontent-type: application/json; charset=UTF-8\r\n\r\n{\r\n    \"_id\": \"6uqs0W8Bq4GBZRSzMXfn\",\r\n    \"_index\": \"syslog-2020.01.23\",\r\n    \"_primary_term\": 1,\r\n    \"_seq_no\": 0,\r\n    \"_shards\": {\r\n        \"failed\": 0,\r\n        \"successful\": 2,\r\n        \"total\": 2\r\n    },\r\n    \"_type\": \"_doc\",\r\n    \"_version\": 1,\r\n    \"result\": \"created\"\r\n}\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/577652042","html_url":"https://github.com/elastic/elasticsearch/issues/50081#issuecomment-577652042","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50081","id":577652042,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NzY1MjA0Mg==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2020-01-23T12:02:03Z","updated_at":"2020-01-23T12:02:03Z","author_association":"MEMBER","body":"Hi @faxm0dem, the patterns you use don't match the time zone format you are trying to enter in a very subtle way. \r\nNote that:\r\n\"yyyy-MM-dd'T'HH:mm:ssZ\" will parse \"2020-01-23T08:46:31+0100\" (missing colon)\r\n\"yyyy-MM-dd'T'HH:mm:ssZZZZZ\" will parse \"2020-01-23T08:46:31+01:00\" (with colon)\r\n\r\nIts a bit of a head-scratcher but in line with the java DateTimeFormatter docs:\r\n\r\nOffset Z: This formats the offset based on the number of pattern letters. **One, two or three letters outputs the hour and minute, without a colon, such as '+0130'**. The output will be '+0000' when the offset is zero. Four letters outputs the full form of localized offset, equivalent to four letters of Offset-O. The output will be the corresponding localized offset text if the offset is zero. **Five letters outputs the hour, minute, with optional second if non-zero, with colon.** It outputs 'Z' if the offset is zero. Six or more letters throws IllegalArgumentException. \r\n\r\nTook me a bit to grok myself, unfortunately date formatting is a bit tricky...","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/578047447","html_url":"https://github.com/elastic/elasticsearch/issues/50081#issuecomment-578047447","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50081","id":578047447,"node_id":"MDEyOklzc3VlQ29tbWVudDU3ODA0NzQ0Nw==","user":{"login":"faxm0dem","id":112638,"node_id":"MDQ6VXNlcjExMjYzOA==","avatar_url":"https://avatars2.githubusercontent.com/u/112638?v=4","gravatar_id":"","url":"https://api.github.com/users/faxm0dem","html_url":"https://github.com/faxm0dem","followers_url":"https://api.github.com/users/faxm0dem/followers","following_url":"https://api.github.com/users/faxm0dem/following{/other_user}","gists_url":"https://api.github.com/users/faxm0dem/gists{/gist_id}","starred_url":"https://api.github.com/users/faxm0dem/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/faxm0dem/subscriptions","organizations_url":"https://api.github.com/users/faxm0dem/orgs","repos_url":"https://api.github.com/users/faxm0dem/repos","events_url":"https://api.github.com/users/faxm0dem/events{/privacy}","received_events_url":"https://api.github.com/users/faxm0dem/received_events","type":"User","site_admin":false},"created_at":"2020-01-24T09:03:38Z","updated_at":"2020-01-24T09:08:15Z","author_association":"NONE","body":"thanks a lot for investigating! I managed to find something different between 6.8.6 and 7.x.y #51394\r\nSo the quote you pasted seems to be coherent with ES7, but not ES6. The fact is that I used the same JVM so I don't really get it","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/578067807","html_url":"https://github.com/elastic/elasticsearch/issues/50081#issuecomment-578067807","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50081","id":578067807,"node_id":"MDEyOklzc3VlQ29tbWVudDU3ODA2NzgwNw==","user":{"login":"faxm0dem","id":112638,"node_id":"MDQ6VXNlcjExMjYzOA==","avatar_url":"https://avatars2.githubusercontent.com/u/112638?v=4","gravatar_id":"","url":"https://api.github.com/users/faxm0dem","html_url":"https://github.com/faxm0dem","followers_url":"https://api.github.com/users/faxm0dem/followers","following_url":"https://api.github.com/users/faxm0dem/following{/other_user}","gists_url":"https://api.github.com/users/faxm0dem/gists{/gist_id}","starred_url":"https://api.github.com/users/faxm0dem/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/faxm0dem/subscriptions","organizations_url":"https://api.github.com/users/faxm0dem/orgs","repos_url":"https://api.github.com/users/faxm0dem/repos","events_url":"https://api.github.com/users/faxm0dem/events{/privacy}","received_events_url":"https://api.github.com/users/faxm0dem/received_events","type":"User","site_admin":false},"created_at":"2020-01-24T10:09:16Z","updated_at":"2020-01-24T10:09:16Z","author_association":"NONE","body":"as it turns out, `YYYY-MM-dd'T'HH:mm:ssZZZZZ` parses all my dates to some time in 1970...","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/578081004","html_url":"https://github.com/elastic/elasticsearch/issues/50081#issuecomment-578081004","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50081","id":578081004,"node_id":"MDEyOklzc3VlQ29tbWVudDU3ODA4MTAwNA==","user":{"login":"faxm0dem","id":112638,"node_id":"MDQ6VXNlcjExMjYzOA==","avatar_url":"https://avatars2.githubusercontent.com/u/112638?v=4","gravatar_id":"","url":"https://api.github.com/users/faxm0dem","html_url":"https://github.com/faxm0dem","followers_url":"https://api.github.com/users/faxm0dem/followers","following_url":"https://api.github.com/users/faxm0dem/following{/other_user}","gists_url":"https://api.github.com/users/faxm0dem/gists{/gist_id}","starred_url":"https://api.github.com/users/faxm0dem/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/faxm0dem/subscriptions","organizations_url":"https://api.github.com/users/faxm0dem/orgs","repos_url":"https://api.github.com/users/faxm0dem/repos","events_url":"https://api.github.com/users/faxm0dem/events{/privacy}","received_events_url":"https://api.github.com/users/faxm0dem/received_events","type":"User","site_admin":false},"created_at":"2020-01-24T10:48:55Z","updated_at":"2020-01-24T10:48:55Z","author_association":"NONE","body":"Update: I realised I was using the weekyear `Y` instead of the \"era\" year `y`.\r\nIf I use the `yyyy-MM-dd'T'HH:mm:ssZZZZZ`, the document is correctly parsed.\r\nSo I guess it accidentally worked in 6.x ","performed_via_github_app":null}]