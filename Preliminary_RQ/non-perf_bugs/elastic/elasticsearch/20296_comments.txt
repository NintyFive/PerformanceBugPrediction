[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/244329369","html_url":"https://github.com/elastic/elasticsearch/issues/20296#issuecomment-244329369","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20296","id":244329369,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDMyOTM2OQ==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2016-09-02T09:34:40Z","updated_at":"2016-09-02T09:34:40Z","author_association":"MEMBER","body":"@jasontedor What do you think?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/244330493","html_url":"https://github.com/elastic/elasticsearch/issues/20296#issuecomment-244330493","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20296","id":244330493,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDMzMDQ5Mw==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2016-09-02T09:39:57Z","updated_at":"2016-09-02T09:40:23Z","author_association":"MEMBER","body":"When I remove ec2 plugin, elasticsearch starts normally.\n\nWhen I install ec2:\n\n``` sh\nbin/elasticsearch-plugin install file:///home/ec2-user/discovery-ec2-5.0.0-alpha6-SNAPSHOT.zip\n```\n\nElasticsearch stops without any message (using an empty `elasticsearch.yml`:\n\n```\n[2016-09-02T09:38:25,174][INFO ][node                     ] [] initializing ...\n[2016-09-02T09:38:25,297][INFO ][env                      ] [nWC6hUC] using [1] data paths, mounts [[/ (/dev/xvda1)]], net usable_space [6.3gb], net total_space [7.7gb], spins? [no], types [ext4]\n[2016-09-02T09:38:25,298][INFO ][env                      ] [nWC6hUC] heap size [247.6mb], compressed ordinary object pointers [true]\n[2016-09-02T09:38:25,299][INFO ][node                     ] [nWC6hUC] node name [nWC6hUC] derived from node ID; set [node.name] to override\n[2016-09-02T09:38:25,303][INFO ][node                     ] [nWC6hUC] version[5.0.0-alpha6-SNAPSHOT], pid[9125], build[e5ff3da/2016-09-01T09:45:15.021Z], OS[Linux/4.4.11-23.53.amzn1.x86_64/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/1.8.0_101/25.101-b13]\n[2016-09-02T09:38:27,234][INFO ][plugins                  ] [nWC6hUC] loaded module [aggs-matrix-stats]\n[2016-09-02T09:38:27,239][INFO ][plugins                  ] [nWC6hUC] loaded module [ingest-common]\n[2016-09-02T09:38:27,239][INFO ][plugins                  ] [nWC6hUC] loaded module [lang-expression]\n[2016-09-02T09:38:27,239][INFO ][plugins                  ] [nWC6hUC] loaded module [lang-groovy]\n[2016-09-02T09:38:27,239][INFO ][plugins                  ] [nWC6hUC] loaded module [lang-mustache]\n[2016-09-02T09:38:27,239][INFO ][plugins                  ] [nWC6hUC] loaded module [lang-painless]\n[2016-09-02T09:38:27,239][INFO ][plugins                  ] [nWC6hUC] loaded module [percolator]\n[2016-09-02T09:38:27,239][INFO ][plugins                  ] [nWC6hUC] loaded module [reindex]\n[2016-09-02T09:38:27,240][INFO ][plugins                  ] [nWC6hUC] loaded module [transport-netty3]\n[2016-09-02T09:38:27,240][INFO ][plugins                  ] [nWC6hUC] loaded module [transport-netty4]\n[2016-09-02T09:38:27,241][INFO ][plugins                  ] [nWC6hUC] loaded plugin [discovery-ec2]\n[2016-09-02T09:38:30,751][INFO ][node                     ] [nWC6hUC] initialized\n[2016-09-02T09:38:30,752][INFO ][node                     ] [nWC6hUC] starting ...\n[2016-09-02T09:38:31,048][INFO ][transport                ] [nWC6hUC] publish_address {127.0.0.1:9300}, bound_addresses {[::1]:9300}, {127.0.0.1:9300}\nProcessus arrêté\n```\n\nI'm using \n\n``` sh\n$ java -version\nopenjdk version \"1.8.0_101\"\nOpenJDK Runtime Environment (build 1.8.0_101-b13)\nOpenJDK 64-Bit Server VM (build 25.101-b13, mixed mode)\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/244333085","html_url":"https://github.com/elastic/elasticsearch/issues/20296#issuecomment-244333085","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20296","id":244333085,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDMzMzA4NQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-09-02T09:51:36Z","updated_at":"2016-09-02T09:51:36Z","author_association":"MEMBER","body":"I think that Log4j is trying to log some exception that is thrown, but does not have permissions to access `sun.nio.ch`. I think that this is just hiding the real exception. Can you grant `java.lang.RuntimePermission` `accessClassInPackage.sun.nio.ch` and see what the real exception here is? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/244335680","html_url":"https://github.com/elastic/elasticsearch/issues/20296#issuecomment-244335680","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20296","id":244335680,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDMzNTY4MA==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2016-09-02T10:03:23Z","updated_at":"2016-09-02T10:03:41Z","author_association":"MEMBER","body":"For the record, I'm not able to reproduce all that locally (MacOS) with:\n\n``` sh\n$ java -version\njava version \"1.8.0_60\"\nJava(TM) SE Runtime Environment (build 1.8.0_60-b27)\nJava HotSpot(TM) 64-Bit Server VM (build 25.60-b23, mixed mode)\n```\n\nI'm going to make the suggested change and deploy on ec2 again to get more details if possible.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/244397187","html_url":"https://github.com/elastic/elasticsearch/issues/20296#issuecomment-244397187","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20296","id":244397187,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDM5NzE4Nw==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2016-09-02T14:52:05Z","updated_at":"2016-09-02T14:52:05Z","author_association":"MEMBER","body":"So the real exception is:\n\n```\n[2016-09-02T14:33:19,273][ERROR][bootstrap                ] [K7iceog] Exception\norg.elasticsearch.http.BindHttpException: Failed to bind to [org.elasticsearch.common.transport.PortsRange@2a19a0fe]\n    at org.elasticsearch.http.netty4.Netty4HttpServerTransport.bindAddress(Netty4HttpServerTransport.java:440) ~[?:?]\n    at org.elasticsearch.http.netty4.Netty4HttpServerTransport.createBoundHttpAddress(Netty4HttpServerTransport.java:338) ~[?:?]\n    at org.elasticsearch.http.netty4.Netty4HttpServerTransport.doStart(Netty4HttpServerTransport.java:324) ~[?:?]\n    at org.elasticsearch.common.component.AbstractLifecycleComponent.start(AbstractLifecycleComponent.java:68) ~[elasticsearch-5.0.0-alpha6-SNAPSHOT.jar:5.0.0-alpha6-SNAPSHOT]\n    at org.elasticsearch.http.HttpServer.doStart(HttpServer.java:77) ~[elasticsearch-5.0.0-alpha6-SNAPSHOT.jar:5.0.0-alpha6-SNAPSHOT]\n    at org.elasticsearch.common.component.AbstractLifecycleComponent.start(AbstractLifecycleComponent.java:68) ~[elasticsearch-5.0.0-alpha6-SNAPSHOT.jar:5.0.0-alpha6-SNAPSHOT]\n    at org.elasticsearch.node.Node.start(Node.java:553) ~[elasticsearch-5.0.0-alpha6-SNAPSHOT.jar:5.0.0-alpha6-SNAPSHOT]\n    at org.elasticsearch.bootstrap.Bootstrap.start(Bootstrap.java:193) ~[elasticsearch-5.0.0-alpha6-SNAPSHOT.jar:5.0.0-alpha6-SNAPSHOT]\n    at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:257) [elasticsearch-5.0.0-alpha6-SNAPSHOT.jar:5.0.0-alpha6-SNAPSHOT]\n    at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:100) [elasticsearch-5.0.0-alpha6-SNAPSHOT.jar:5.0.0-alpha6-SNAPSHOT]\n    at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:95) [elasticsearch-5.0.0-alpha6-SNAPSHOT.jar:5.0.0-alpha6-SNAPSHOT]\n    at org.elasticsearch.cli.SettingCommand.execute(SettingCommand.java:54) [elasticsearch-5.0.0-alpha6-SNAPSHOT.jar:5.0.0-alpha6-SNAPSHOT]\n    at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:88) [elasticsearch-5.0.0-alpha6-SNAPSHOT.jar:5.0.0-alpha6-SNAPSHOT]\n    at org.elasticsearch.cli.Command.main(Command.java:54) [elasticsearch-5.0.0-alpha6-SNAPSHOT.jar:5.0.0-alpha6-SNAPSHOT]\n    at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:74) [elasticsearch-5.0.0-alpha6-SNAPSHOT.jar:5.0.0-alpha6-SNAPSHOT]\n    at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:67) [elasticsearch-5.0.0-alpha6-SNAPSHOT.jar:5.0.0-alpha6-SNAPSHOT]\nCaused by: java.net.BindException: Ne peut attribuer l'adresse demandée\n    at sun.nio.ch.Net.bind0(Native Method) ~[?:1.8.0_101]\n    at sun.nio.ch.Net.bind(Net.java:433) ~[?:1.8.0_101]\n    at sun.nio.ch.Net.bind(Net.java:425) ~[?:1.8.0_101]\n    at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:223) ~[?:1.8.0_101]\n    at io.netty.channel.socket.nio.NioServerSocketChannel.doBind(NioServerSocketChannel.java:127) ~[?:?]\n    at io.netty.channel.AbstractChannel$AbstractUnsafe.bind(AbstractChannel.java:554) ~[?:?]\n    at io.netty.channel.DefaultChannelPipeline$HeadContext.bind(DefaultChannelPipeline.java:1258) ~[?:?]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeBind(AbstractChannelHandlerContext.java:511) ~[?:?]\n    at io.netty.channel.AbstractChannelHandlerContext.bind(AbstractChannelHandlerContext.java:496) ~[?:?]\n    at io.netty.channel.DefaultChannelPipeline.bind(DefaultChannelPipeline.java:980) ~[?:?]\n    at io.netty.channel.AbstractChannel.bind(AbstractChannel.java:250) ~[?:?]\n    at io.netty.bootstrap.AbstractBootstrap$2.run(AbstractBootstrap.java:363) ~[?:?]\n    at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) ~[?:?]\n    at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:418) ~[?:?]\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:440) ~[?:?]\n    at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:873) ~[?:?]\n    at java.lang.Thread.run(Thread.java:745) ~[?:1.8.0_101]\n```\n\nWas caused by a bad configuration in `elasticsearch.yml` file.\n\nI'm still having an issue which happens when I have ec2 installed but I don't define any configuration in `elasticsearch.yml`. Full logs here: https://gist.github.com/dadoonet/56108d664bbc79379f578c2d4288df70\n\nIn my console, I have:\n\n```\n2016-09-02 14:46:55,789 main ERROR An exception occurred processing Appender rolling java.security.AccessControlException: access denied (\"java.lang.RuntimePermission\" \"accessClassInPackage.sun.reflect\")\n    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:472)\n    at java.security.AccessController.checkPermission(AccessController.java:884)\n    at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)\n    at java.lang.SecurityManager.checkPackageAccess(SecurityManager.java:1564)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:311)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    at java.lang.Class.forName0(Native Method)\n    at java.lang.Class.forName(Class.java:264)\n    at org.apache.logging.log4j.util.LoaderUtil.loadClass(LoaderUtil.java:122)\n    at org.apache.logging.log4j.core.util.Loader.loadClass(Loader.java:228)\n    at org.apache.logging.log4j.core.impl.ThrowableProxy.loadClass(ThrowableProxy.java:496)\n    at org.apache.logging.log4j.core.impl.ThrowableProxy.toExtendedStackTrace(ThrowableProxy.java:617)\n    at org.apache.logging.log4j.core.impl.ThrowableProxy.<init>(ThrowableProxy.java:135)\n    at org.apache.logging.log4j.core.impl.ThrowableProxy.<init>(ThrowableProxy.java:117)\n    at org.apache.logging.log4j.core.impl.MutableLogEvent.getThrownProxy(MutableLogEvent.java:314)\n    at org.apache.logging.log4j.core.pattern.ExtendedThrowablePatternConverter.format(ExtendedThrowablePatternConverter.java:61)\n    at org.apache.logging.log4j.core.pattern.PatternFormatter.format(PatternFormatter.java:38)\n    at org.apache.logging.log4j.core.layout.PatternLayout$PatternSerializer.toSerializable(PatternLayout.java:294)\n    at org.apache.logging.log4j.core.layout.PatternLayout.toText(PatternLayout.java:195)\n    at org.apache.logging.log4j.core.layout.PatternLayout.encode(PatternLayout.java:180)\n    at org.apache.logging.log4j.core.layout.PatternLayout.encode(PatternLayout.java:57)\n    at org.apache.logging.log4j.core.appender.AbstractOutputStreamAppender.directEncodeEvent(AbstractOutputStreamAppender.java:120)\n    at org.apache.logging.log4j.core.appender.AbstractOutputStreamAppender.tryAppend(AbstractOutputStreamAppender.java:113)\n    at org.apache.logging.log4j.core.appender.AbstractOutputStreamAppender.append(AbstractOutputStreamAppender.java:104)\n    at org.apache.logging.log4j.core.appender.RollingFileAppender.append(RollingFileAppender.java:86)\n    at org.apache.logging.log4j.core.config.AppenderControl.tryCallAppender(AppenderControl.java:155)\n    at org.apache.logging.log4j.core.config.AppenderControl.callAppender0(AppenderControl.java:128)\n    at org.apache.logging.log4j.core.config.AppenderControl.callAppenderPreventRecursion(AppenderControl.java:119)\n    at org.apache.logging.log4j.core.config.AppenderControl.callAppender(AppenderControl.java:84)\n    at org.apache.logging.log4j.core.config.LoggerConfig.callAppenders(LoggerConfig.java:390)\n    at org.apache.logging.log4j.core.config.LoggerConfig.processLogEvent(LoggerConfig.java:375)\n    at org.apache.logging.log4j.core.config.LoggerConfig.log(LoggerConfig.java:359)\n    at org.apache.logging.log4j.core.config.LoggerConfig.log(LoggerConfig.java:349)\n    at org.apache.logging.log4j.core.config.AwaitCompletionReliabilityStrategy.log(AwaitCompletionReliabilityStrategy.java:63)\n    at org.apache.logging.log4j.core.Logger.logMessage(Logger.java:146)\n    at org.apache.logging.log4j.spi.AbstractLogger.logMessage(AbstractLogger.java:2011)\n    at org.apache.logging.log4j.spi.AbstractLogger.logIfEnabled(AbstractLogger.java:1884)\n    at org.apache.logging.log4j.spi.AbstractLogger.debug(AbstractLogger.java:442)\n    at org.elasticsearch.transport.netty4.Netty4InternalESLogger.debug(Netty4InternalESLogger.java:84)\n    at io.netty.util.NetUtil$1.run(NetUtil.java:273)\n    at io.netty.util.NetUtil$1.run(NetUtil.java:247)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at io.netty.util.NetUtil.<clinit>(NetUtil.java:247)\n    at io.netty.util.internal.MacAddressUtil.bestAvailableMac(MacAddressUtil.java:53)\n    at io.netty.channel.DefaultChannelId.defaultMachineId(DefaultChannelId.java:127)\n    at io.netty.channel.DefaultChannelId.<clinit>(DefaultChannelId.java:104)\n    at io.netty.channel.AbstractChannel.newId(AbstractChannel.java:107)\n    at io.netty.channel.AbstractChannel.<init>(AbstractChannel.java:79)\n    at io.netty.channel.nio.AbstractNioChannel.<init>(AbstractNioChannel.java:84)\n    at io.netty.channel.nio.AbstractNioMessageChannel.<init>(AbstractNioMessageChannel.java:42)\n    at io.netty.channel.socket.nio.NioServerSocketChannel.<init>(NioServerSocketChannel.java:85)\n    at io.netty.channel.socket.nio.NioServerSocketChannel.<init>(NioServerSocketChannel.java:71)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at java.lang.Class.newInstance(Class.java:442)\n    at io.netty.channel.ReflectiveChannelFactory.newChannel(ReflectiveChannelFactory.java:38)\n    at io.netty.bootstrap.AbstractBootstrap.initAndRegister(AbstractBootstrap.java:319)\n    at io.netty.bootstrap.AbstractBootstrap.doBind(AbstractBootstrap.java:281)\n    at io.netty.bootstrap.AbstractBootstrap.bind(AbstractBootstrap.java:277)\n    at org.elasticsearch.transport.netty4.Netty4Transport.bind(Netty4Transport.java:475)\n    at org.elasticsearch.transport.netty4.Netty4Transport.bind(Netty4Transport.java:91)\n    at org.elasticsearch.transport.TcpTransport.lambda$bindToPort$940(TcpTransport.java:609)\n    at org.elasticsearch.common.transport.PortsRange.iterate(PortsRange.java:73)\n    at org.elasticsearch.transport.TcpTransport.bindToPort(TcpTransport.java:607)\n    at org.elasticsearch.transport.TcpTransport.bindServer(TcpTransport.java:591)\n    at org.elasticsearch.transport.netty4.Netty4Transport.doStart(Netty4Transport.java:182)\n    at org.elasticsearch.common.component.AbstractLifecycleComponent.start(AbstractLifecycleComponent.java:68)\n    at org.elasticsearch.transport.TransportService.doStart(TransportService.java:178)\n    at org.elasticsearch.common.component.AbstractLifecycleComponent.start(AbstractLifecycleComponent.java:68)\n    at org.elasticsearch.node.Node.start(Node.java:502)\n    at org.elasticsearch.bootstrap.Bootstrap.start(Bootstrap.java:193)\n    at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:257)\n    at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:100)\n    at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:95)\n    at org.elasticsearch.cli.SettingCommand.execute(SettingCommand.java:54)\n    at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:88)\n    at org.elasticsearch.cli.Command.main(Command.java:54)\n    at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:74)\n    at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:67)\n```\n\nAnd the process immediately stops.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/244397733","html_url":"https://github.com/elastic/elasticsearch/issues/20296#issuecomment-244397733","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20296","id":244397733,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDM5NzczMw==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2016-09-02T14:53:59Z","updated_at":"2016-09-02T14:53:59Z","author_association":"MEMBER","body":"Apparently, as soon as I add `network.host: _ec2_` the process starts. I still have the same trace though.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/244401032","html_url":"https://github.com/elastic/elasticsearch/issues/20296#issuecomment-244401032","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20296","id":244401032,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDQwMTAzMg==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2016-09-02T15:05:19Z","updated_at":"2016-09-02T15:05:19Z","author_association":"MEMBER","body":"New test with 2 nodes:\n\n``` yaml\ncloud.aws.access_key: \"MYKEY\"\ncloud.aws.secret_key: \"MYSECRET\"\ncloud.aws.region: eu-central-1\nnetwork.host: _ec2_\ndiscovery.type: ec2\n```\n\nWhen I start the second node, I'm getting:\n\n```\n[2016-09-02T15:01:14,208][INFO ][transport                ] [W810Von] publish_address {172.31.7.122:9300}, bound_addresses {172.31.7.122:9300}\n...\n[2016-09-02T15:01:15,321][DEBUG][com.amazonaws.requestId  ] AWS Request ID: 392b0c38-0835-4e1f-b1a9-df868f78d7ce\n[2016-09-02T15:01:15,326][DEBUG][discovery.ec2            ] [W810Von] using dynamic discovery nodes [{#cloud-i-a316ce1f-0}{6QCA1_PVSDS9TvYPeoIPTA}{10.35.149.94}{10.35.149.94:9300}, {#cloud-i-dfaf1762-0}{UJYFQx7WTX6jf8Kt3RuKAQ}{10.35.20.247}{10.35.20.247:9300}, {#cloud-i-26b4549b-0}{gDcZMSdQSKKMAc1hx-cZGQ}{10.35.130.115}{10.35.130.115:9300}, {#cloud-i-b6bd050b-0}{uGiP4g9zRsu5nxh4G5e8rg}{10.35.16.171}{10.35.16.171:9300}, {#cloud-i-d37ba06f-0}{EaquIySbR16p_jYzi-upmw}{10.35.153.73}{10.35.153.73:9300}, {#cloud-i-96fabc2a-0}{IaqpUcACTHSASPtFwbtuQw}{10.35.40.199}{10.35.40.199:9300}, {#cloud-i-b1aaec0d-0}{a-jwOq6jRCirQuiwAfLuAg}{10.35.52.154}{10.35.52.154:9300}, {#cloud-i-22b3539f-0}{eFkhAa2bTlqezEF33CD7oA}{10.35.143.143}{10.35.143.143:9300}, {#cloud-i-ac025b10-0}{2KA4R9HJTK2BnZbIit1eyQ}{172.31.7.122}{172.31.7.122:9300}, {#cloud-i-ad025b11-0}{9RsoYYy2RiaxLSvEMvI0bA}{172.31.7.123}{172.31.7.123:9300}]\n[2016-09-02T15:01:15,415][DEBUG][transport.netty4         ] [W810Von] connected to node [{#zen_unicast_15_#cloud-i-ad025b11-0#}{moGN20VwS4K7KNe48WZC-A}{172.31.7.123}{172.31.7.123:9300}]\n[2016-09-02T15:01:15,451][DEBUG][netty.buffer.AbstractByteBuf] -Dio.netty.buffer.bytebuf.checkAccessible: true\n[2016-09-02T15:01:15,459][DEBUG][netty.util.ResourceLeakDetectorFactory] Loaded default ResourceLeakDetector: io.netty.util.ResourceLeakDetector@6eb01749\n[2016-09-02T15:01:15,471][DEBUG][netty.util.Recycler      ] -Dio.netty.recycler.maxCapacityPerThread: 32768\n[2016-09-02T15:01:15,471][DEBUG][netty.util.Recycler      ] -Dio.netty.recycler.maxSharedCapacityFactor: 2\n[2016-09-02T15:01:15,471][DEBUG][netty.util.Recycler      ] -Dio.netty.recycler.linkCapacity: 16\n[2016-09-02T15:01:15,471][DEBUG][netty.util.Recycler      ] -Dio.netty.recycler.ratio: 8\nProcessus arrêté\n```\n\nThe process immediately dies.\n\nI have no clue about what is happening there. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/244402084","html_url":"https://github.com/elastic/elasticsearch/issues/20296#issuecomment-244402084","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20296","id":244402084,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDQwMjA4NA==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2016-09-02T15:08:47Z","updated_at":"2016-09-02T15:08:47Z","author_association":"MEMBER","body":"When on server `172.31.7.122`, I'm running:\n\n``` sh\ncurl 172.31.7.123:9200\ncurl: (52) Empty reply from server\n```\n\nAnd the node running on `172.31.7.123` dies with nothing in logs but this in the console:\n\n```\nProcessus arrêté\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/244407494","html_url":"https://github.com/elastic/elasticsearch/issues/20296#issuecomment-244407494","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20296","id":244407494,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDQwNzQ5NA==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2016-09-02T15:28:07Z","updated_at":"2016-09-02T15:28:07Z","author_association":"MEMBER","body":"Ok. Forget about all that mess. Was mainly caused by not enough memory...\nAs for GCE, I was using a 512mb instance which does not seem to be enough. It runs fine with a 1Gb instance (even if I'm still using 256m heap size).\n\nI'm closing this issue. May be we should keep it open though until we have a fix for the LOG4J2 issue?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/244449871","html_url":"https://github.com/elastic/elasticsearch/issues/20296#issuecomment-244449871","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20296","id":244449871,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDQ0OTg3MQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-09-02T18:15:49Z","updated_at":"2016-09-02T18:15:49Z","author_association":"MEMBER","body":"Superseded by #20304\n","performed_via_github_app":null}]