{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/7605","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7605/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7605/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7605/events","html_url":"https://github.com/elastic/elasticsearch/issues/7605","id":41995842,"node_id":"MDU6SXNzdWU0MTk5NTg0Mg==","number":7605,"title":"Force shards apart from one another","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2014-09-04T23:00:09Z","updated_at":"2014-09-04T23:07:42Z","closed_at":"2014-09-04T23:07:42Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"This is kind of a rephrasing of #5748.  Here is the thing: no matter what I do with the balancer options I still sometimes see shards for my high traffic index being pushed together.  I _think_ this is because the balancer can make some hasty decisions when there are many unassigned shards.  Whatever the case I need this to not happen ever.  I want a way to say, \"never ever ever ever put any two shards of this index on a machine.  Seriously, just leave the thing unassigned if you can't do it.\"  It'd be kind of like [total shards per node](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/index-modules-allocation.html#_total_shards_per_node) but on the index level.\n\nI know I could crank up the \"primary\" balance option - in fact I already have it set like I described in #5748 but I still see the problem.  Sometimes its just a temporary thing - I bounce a node and things shift around and two end up together.  The problem is that under real load that'd be enough to cause the machine to enter an io thrashing death spiral.\n\nSo, yeah, I'm working to make this not so big a deal - do less IO and all that.  But this will give me piece of mind.\n\nIf this is something Elasticsearch would be willing to incorporate I'm happy to work on it.  Its more important to me than #7171 because it is a hard guarantee.  #7171 would still be useful. \n","closed_by":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"performed_via_github_app":null}