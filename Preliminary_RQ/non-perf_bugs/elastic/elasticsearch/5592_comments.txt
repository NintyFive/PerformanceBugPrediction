[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/45756204","html_url":"https://github.com/elastic/elasticsearch/issues/5592#issuecomment-45756204","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5592","id":45756204,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NzU2MjA0","user":{"login":"rberringer","id":7861303,"node_id":"MDQ6VXNlcjc4NjEzMDM=","avatar_url":"https://avatars1.githubusercontent.com/u/7861303?v=4","gravatar_id":"","url":"https://api.github.com/users/rberringer","html_url":"https://github.com/rberringer","followers_url":"https://api.github.com/users/rberringer/followers","following_url":"https://api.github.com/users/rberringer/following{/other_user}","gists_url":"https://api.github.com/users/rberringer/gists{/gist_id}","starred_url":"https://api.github.com/users/rberringer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rberringer/subscriptions","organizations_url":"https://api.github.com/users/rberringer/orgs","repos_url":"https://api.github.com/users/rberringer/repos","events_url":"https://api.github.com/users/rberringer/events{/privacy}","received_events_url":"https://api.github.com/users/rberringer/received_events","type":"User","site_admin":false},"created_at":"2014-06-11T15:22:16Z","updated_at":"2014-06-11T15:22:16Z","author_association":"NONE","body":"I see the same. I am running version 1.1.1. If the first coordinate's x value in my inner polygon is the same as the first coordinate's x value in my outer polygon I get the ArrayIndexOutOfBoundsException.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52774039","html_url":"https://github.com/elastic/elasticsearch/issues/5592#issuecomment-52774039","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5592","id":52774039,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzc0MDM5","user":{"login":"mcuelenaere","id":1682432,"node_id":"MDQ6VXNlcjE2ODI0MzI=","avatar_url":"https://avatars0.githubusercontent.com/u/1682432?v=4","gravatar_id":"","url":"https://api.github.com/users/mcuelenaere","html_url":"https://github.com/mcuelenaere","followers_url":"https://api.github.com/users/mcuelenaere/followers","following_url":"https://api.github.com/users/mcuelenaere/following{/other_user}","gists_url":"https://api.github.com/users/mcuelenaere/gists{/gist_id}","starred_url":"https://api.github.com/users/mcuelenaere/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcuelenaere/subscriptions","organizations_url":"https://api.github.com/users/mcuelenaere/orgs","repos_url":"https://api.github.com/users/mcuelenaere/repos","events_url":"https://api.github.com/users/mcuelenaere/events{/privacy}","received_events_url":"https://api.github.com/users/mcuelenaere/received_events","type":"User","site_admin":false},"created_at":"2014-08-20T13:00:32Z","updated_at":"2014-08-20T13:00:32Z","author_association":"NONE","body":"Another example:\n\n``` json\n{\n  \"type\": \"Polygon\",\n  \"coordinates\": [\n    [\n      [3.1019747572216, 51.0669454624],\n      [3.1020102578034, 51.066935662965],\n      [3.102010546753, 51.066935583214],\n      [3.1021346305184, 51.066901330016],\n      [3.1020901288154, 51.066866669173],\n      [3.1020390125375, 51.066881010922],\n      [3.1019903844109, 51.066894654364],\n      [3.1017943936263, 51.066949642491],\n      [3.1018217306228, 51.066987703695],\n      [3.1019747572216, 51.0669454624]\n    ],\n    [\n      [3.1020390125375, 51.066881010922],\n      [3.1020792567632, 51.06687334992],\n      [3.1020855169818, 51.066882954507],\n      [3.1020472839155, 51.066893507128],\n      [3.1020390125375, 51.066881010922]\n    ]\n  ]\n}\n```\n\nStacktrace when indexing this on ES 1.3.2:\n\n```\norg.elasticsearch.index.mapper.MapperParsingException: failed to parse [address.shape]\n    at org.elasticsearch.index.mapper.geo.GeoShapeFieldMapper.parse(GeoShapeFieldMapper.java:249)\n    at org.elasticsearch.index.mapper.object.ObjectMapper.serializeObject(ObjectMapper.java:549)\n    at org.elasticsearch.index.mapper.object.ObjectMapper.parse(ObjectMapper.java:491)\n    at org.elasticsearch.index.mapper.object.ObjectMapper.serializeObject(ObjectMapper.java:549)\n    at org.elasticsearch.index.mapper.object.ObjectMapper.parse(ObjectMapper.java:491)\n    at org.elasticsearch.index.mapper.DocumentMapper.parse(DocumentMapper.java:534)\n    at org.elasticsearch.index.mapper.DocumentMapper.parse(DocumentMapper.java:483)\n    at org.elasticsearch.index.shard.service.InternalIndexShard.prepareIndex(InternalIndexShard.java:397)\n    at org.elasticsearch.action.bulk.TransportShardBulkAction.shardIndexOperation(TransportShardBulkAction.java:421)\n    at org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:158)\n    at org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction.performOnPrimary(TransportShardReplicationOperationAction.java:522)\n    at org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction$1.run(TransportShardReplicationOperationAction.java:421)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: java.lang.ArrayIndexOutOfBoundsException: -1\n    at org.elasticsearch.common.geo.builders.BasePolygonBuilder.assign(BasePolygonBuilder.java:363)\n    at org.elasticsearch.common.geo.builders.BasePolygonBuilder.compose(BasePolygonBuilder.java:341)\n    at org.elasticsearch.common.geo.builders.BasePolygonBuilder.coordinates(BasePolygonBuilder.java:140)\n    at org.elasticsearch.common.geo.builders.BasePolygonBuilder.buildGeometry(BasePolygonBuilder.java:169)\n    at org.elasticsearch.common.geo.builders.BasePolygonBuilder.build(BasePolygonBuilder.java:145)\n    at org.elasticsearch.index.mapper.geo.GeoShapeFieldMapper.parse(GeoShapeFieldMapper.java:234)\n    ... 14 more\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54137244","html_url":"https://github.com/elastic/elasticsearch/issues/5592#issuecomment-54137244","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5592","id":54137244,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTM3MjQ0","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2014-09-02T11:11:49Z","updated_at":"2014-09-02T11:11:49Z","author_association":"MEMBER","body":"Closing as this is resolved by #7190\n","performed_via_github_app":null}]