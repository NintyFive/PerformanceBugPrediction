{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/14641","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14641/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14641/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14641/events","html_url":"https://github.com/elastic/elasticsearch/issues/14641","id":116012796,"node_id":"MDU6SXNzdWUxMTYwMTI3OTY=","number":14641,"title":"Dates and epoch_millis as floats","user":{"login":"royrusso","id":654238,"node_id":"MDQ6VXNlcjY1NDIzOA==","avatar_url":"https://avatars3.githubusercontent.com/u/654238?v=4","gravatar_id":"","url":"https://api.github.com/users/royrusso","html_url":"https://github.com/royrusso","followers_url":"https://api.github.com/users/royrusso/followers","following_url":"https://api.github.com/users/royrusso/following{/other_user}","gists_url":"https://api.github.com/users/royrusso/gists{/gist_id}","starred_url":"https://api.github.com/users/royrusso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/royrusso/subscriptions","organizations_url":"https://api.github.com/users/royrusso/orgs","repos_url":"https://api.github.com/users/royrusso/repos","events_url":"https://api.github.com/users/royrusso/events{/privacy}","received_events_url":"https://api.github.com/users/royrusso/received_events","type":"User","site_admin":false},"labels":[{"id":141145460,"node_id":"MDU6TGFiZWwxNDExNDU0NjA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Mapping","name":":Search/Mapping","color":"0e8a16","default":false,"description":"How fields should be indexed"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":92913858,"node_id":"MDU6TGFiZWw5MjkxMzg1OA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/good%20first%20issue","name":"good first issue","color":"07569b","default":true,"description":"low hanging fruit"},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":{"login":"albertzaharovits","id":4568420,"node_id":"MDQ6VXNlcjQ1Njg0MjA=","avatar_url":"https://avatars2.githubusercontent.com/u/4568420?v=4","gravatar_id":"","url":"https://api.github.com/users/albertzaharovits","html_url":"https://github.com/albertzaharovits","followers_url":"https://api.github.com/users/albertzaharovits/followers","following_url":"https://api.github.com/users/albertzaharovits/following{/other_user}","gists_url":"https://api.github.com/users/albertzaharovits/gists{/gist_id}","starred_url":"https://api.github.com/users/albertzaharovits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertzaharovits/subscriptions","organizations_url":"https://api.github.com/users/albertzaharovits/orgs","repos_url":"https://api.github.com/users/albertzaharovits/repos","events_url":"https://api.github.com/users/albertzaharovits/events{/privacy}","received_events_url":"https://api.github.com/users/albertzaharovits/received_events","type":"User","site_admin":false},"assignees":[{"login":"albertzaharovits","id":4568420,"node_id":"MDQ6VXNlcjQ1Njg0MjA=","avatar_url":"https://avatars2.githubusercontent.com/u/4568420?v=4","gravatar_id":"","url":"https://api.github.com/users/albertzaharovits","html_url":"https://github.com/albertzaharovits","followers_url":"https://api.github.com/users/albertzaharovits/followers","following_url":"https://api.github.com/users/albertzaharovits/following{/other_user}","gists_url":"https://api.github.com/users/albertzaharovits/gists{/gist_id}","starred_url":"https://api.github.com/users/albertzaharovits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertzaharovits/subscriptions","organizations_url":"https://api.github.com/users/albertzaharovits/orgs","repos_url":"https://api.github.com/users/albertzaharovits/repos","events_url":"https://api.github.com/users/albertzaharovits/events{/privacy}","received_events_url":"https://api.github.com/users/albertzaharovits/received_events","type":"User","site_admin":false}],"milestone":null,"comments":7,"created_at":"2015-11-10T02:35:19Z","updated_at":"2019-09-11T18:38:14Z","closed_at":"2017-08-13T05:35:46Z","author_association":"NONE","active_lock_reason":null,"body":"Attempting to migrate to 2.x, I've encountered a strange problem with range filters not able to match any of the mappings I try holding epoch_millis. Maybe related to #10971\n\nGiven a document with a time_stamp field in the mapping:\n\n```\n          \"time_stamp\": {\n            \"type\": \"date\",\n            \"format\": \"epoch_millis\"\n          }\n```\n\nWith some data:\n\n```\nstation: \"ASN00033312\",\nprecip_tenths_mm: 2,\ntime_stamp: 1390712400000,\nlocation: {\nlat: -23.2233,\nlon: 150.605\n}\n```\n\nI would expect the following to match:\n\n```\n\"query\": {\n    \"filtered\": {\n      \"filter\": {\n        \"bool\": {\n          \"must\": [\n            {\n              \"range\": {\n                \"time_stamp\": {\n             \"gte\": 1390712400000,\n             \"format\" : \"epoch_millis\"\n                }\n            }\n            }\n          ]\n        }\n      }\n    }\n  }\n```\n\nThe above returns no document, even though there are thousands that should respond. Removing the format at query time, doesn't help. Mapping the time_stamp field as format \"basic_date\", as I had in 1.x, doesn't seem to return anything either.\n\nBug? Pebcak?\n","closed_by":{"login":"albertzaharovits","id":4568420,"node_id":"MDQ6VXNlcjQ1Njg0MjA=","avatar_url":"https://avatars2.githubusercontent.com/u/4568420?v=4","gravatar_id":"","url":"https://api.github.com/users/albertzaharovits","html_url":"https://github.com/albertzaharovits","followers_url":"https://api.github.com/users/albertzaharovits/followers","following_url":"https://api.github.com/users/albertzaharovits/following{/other_user}","gists_url":"https://api.github.com/users/albertzaharovits/gists{/gist_id}","starred_url":"https://api.github.com/users/albertzaharovits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertzaharovits/subscriptions","organizations_url":"https://api.github.com/users/albertzaharovits/orgs","repos_url":"https://api.github.com/users/albertzaharovits/repos","events_url":"https://api.github.com/users/albertzaharovits/events{/privacy}","received_events_url":"https://api.github.com/users/albertzaharovits/received_events","type":"User","site_admin":false},"performed_via_github_app":null}