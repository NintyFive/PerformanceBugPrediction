{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/12098","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12098/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12098/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12098/events","html_url":"https://github.com/elastic/elasticsearch/issues/12098","id":93613950,"node_id":"MDU6SXNzdWU5MzYxMzk1MA==","number":12098,"title":"Precise and consistent MapperParsingException messages","user":{"login":"f-s-p","id":6797582,"node_id":"MDQ6VXNlcjY3OTc1ODI=","avatar_url":"https://avatars1.githubusercontent.com/u/6797582?v=4","gravatar_id":"","url":"https://api.github.com/users/f-s-p","html_url":"https://github.com/f-s-p","followers_url":"https://api.github.com/users/f-s-p/followers","following_url":"https://api.github.com/users/f-s-p/following{/other_user}","gists_url":"https://api.github.com/users/f-s-p/gists{/gist_id}","starred_url":"https://api.github.com/users/f-s-p/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/f-s-p/subscriptions","organizations_url":"https://api.github.com/users/f-s-p/orgs","repos_url":"https://api.github.com/users/f-s-p/repos","events_url":"https://api.github.com/users/f-s-p/events{/privacy}","received_events_url":"https://api.github.com/users/f-s-p/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2015-07-07T19:52:19Z","updated_at":"2015-07-08T17:13:38Z","closed_at":"2015-07-08T17:13:38Z","author_association":"NONE","active_lock_reason":null,"body":"The \"error\" field value that is returned for a MappingParserException is inconsistent and imprecise, which makes it difficult to programatically address.  This may be related to #7983.\n\nFor example:\n\n``` sh\n# dynamically create a mapping\ncurl -XPOST 'http://localhost:9200/error_test/my_docs' -d '{ \"complex_obj\": { \"data\": { \"value\": { \"data\": { \"name\": \"alice\" } } } } }'\n# violate it\ncurl -XPOST 'http://localhost:9200/error_test/my_docs' -d '{ \"complex_obj\": { \"data\": { \"value\": { \"data\": \"alice\" } } } }'\n{\"error\":\"MapperParsingException[object mapping for [my_docs] tried to parse field [complex_obj] as object, but got EOF, has a concrete value been provided to it?]\",\"status\":400}\n# violate it in the same way but with an additional root field\ncurl -XPOST 'http://localhost:9200/error_test/my_docs' -d '{ \"complex_obj\": { \"data\": { \"value\": { \"data\": \"alice\" } } }, \"data\": \"a simple string\" }'\n{\"error\":\"MapperParsingException[object mapping for [complex_obj] tried to parse field [data] as object, but got EOF, has a concrete value been provided to it?]\",\"status\":400}\n```\n\nThe two error messages returned are inconsistent.  The first square bracket'ed name is the document type in the first instance and in the other is a field name.\n\nThe messages also do not indicate the exact field causing the exception.  It is difficult to determine which field does the field name refer to if there are multiple fields with the same name.  It would be more helpful to provide the full dotted path of the field the caused the exception, such as `complex_ob.data.value.data`.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}