[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/198717725","html_url":"https://github.com/elastic/elasticsearch/issues/17200#issuecomment-198717725","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17200","id":198717725,"node_id":"MDEyOklzc3VlQ29tbWVudDE5ODcxNzcyNQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-03-19T14:55:35Z","updated_at":"2016-03-19T14:55:35Z","author_association":"MEMBER","body":"The `lang-groovy` module is provided as a separate artifact with coordinates `org.elasticsearch.module:lang-groovy:2.2.0`.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/198726680","html_url":"https://github.com/elastic/elasticsearch/issues/17200#issuecomment-198726680","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17200","id":198726680,"node_id":"MDEyOklzc3VlQ29tbWVudDE5ODcyNjY4MA==","user":{"login":"anuraaga","id":198344,"node_id":"MDQ6VXNlcjE5ODM0NA==","avatar_url":"https://avatars0.githubusercontent.com/u/198344?v=4","gravatar_id":"","url":"https://api.github.com/users/anuraaga","html_url":"https://github.com/anuraaga","followers_url":"https://api.github.com/users/anuraaga/followers","following_url":"https://api.github.com/users/anuraaga/following{/other_user}","gists_url":"https://api.github.com/users/anuraaga/gists{/gist_id}","starred_url":"https://api.github.com/users/anuraaga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anuraaga/subscriptions","organizations_url":"https://api.github.com/users/anuraaga/orgs","repos_url":"https://api.github.com/users/anuraaga/repos","events_url":"https://api.github.com/users/anuraaga/events{/privacy}","received_events_url":"https://api.github.com/users/anuraaga/received_events","type":"User","site_admin":false},"created_at":"2016-03-19T15:37:50Z","updated_at":"2016-03-19T15:37:50Z","author_association":"NONE","body":"Thanks for the pointer to the artifact, I could find GroovyScriptEngineService on the classpath now! But it seems with the separation of the modules something has changed in initialization - just having the dependency doesn't seem to be enough to enable groovy support, I still get script_lang not supported [groovy].\n\nI have come up with this weird hack but is their an official way of loading the groovy plugin? Also all the docs indicate that groovy works out of the box, but since it doesn't seem to be true for node clients, it would be nice to mention the appropriate settings in the documentation to avoid issues filed like this one :)\n\n``` java\n// HACK: Define this class to expose a protected constructor that let's use\n  // initialize GroovyPlugin.\n  private static class PluginLoadingNode extends Node {\n\n    private PluginLoadingNode(Settings preparedSettings) {\n      super(InternalSettingsPreparer.prepareEnvironment(preparedSettings, null),\n          Version.CURRENT,\n          ImmutableList.<Class<? extends Plugin>>of(GroovyPlugin.class));\n    }\n  }\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/198736081","html_url":"https://github.com/elastic/elasticsearch/issues/17200#issuecomment-198736081","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17200","id":198736081,"node_id":"MDEyOklzc3VlQ29tbWVudDE5ODczNjA4MQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-03-19T15:48:15Z","updated_at":"2016-03-19T15:48:42Z","author_association":"MEMBER","body":"> Also all the docs indicate that groovy works out of the box, but since it doesn't seem to be true for node clients\n\nCorrect, when a regular Elasticsearch node starts we look for the `lang-groovy` module (among others) but otherwise do not.\n\n> I have come up with this weird hack but is their an official way of loading the groovy plugin? \n\nYes. Note that this is what Elastiscearch does for its tests that depend on plugins. Also see the discussion on #15927.\n","performed_via_github_app":null}]