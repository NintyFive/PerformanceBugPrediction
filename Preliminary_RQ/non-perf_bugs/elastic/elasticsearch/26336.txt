{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/26336","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26336/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26336/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26336/events","html_url":"https://github.com/elastic/elasticsearch/issues/26336","id":252175277,"node_id":"MDU6SXNzdWUyNTIxNzUyNzc=","number":26336,"title":"[BalancedShardsAllocator] balance shards  should consider the storage space of instances?","user":{"login":"keenbo","id":1872588,"node_id":"MDQ6VXNlcjE4NzI1ODg=","avatar_url":"https://avatars0.githubusercontent.com/u/1872588?v=4","gravatar_id":"","url":"https://api.github.com/users/keenbo","html_url":"https://github.com/keenbo","followers_url":"https://api.github.com/users/keenbo/followers","following_url":"https://api.github.com/users/keenbo/following{/other_user}","gists_url":"https://api.github.com/users/keenbo/gists{/gist_id}","starred_url":"https://api.github.com/users/keenbo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keenbo/subscriptions","organizations_url":"https://api.github.com/users/keenbo/orgs","repos_url":"https://api.github.com/users/keenbo/repos","events_url":"https://api.github.com/users/keenbo/events{/privacy}","received_events_url":"https://api.github.com/users/keenbo/received_events","type":"User","site_admin":false},"labels":[{"id":836504707,"node_id":"MDU6TGFiZWw4MzY1MDQ3MDc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Distributed","name":":Distributed/Distributed","color":"0e8a16","default":false,"description":"A catch all label for anything in the Distributed Area. If you aren't sure, use this one."},{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-08-23T06:34:41Z","updated_at":"2018-02-13T19:23:56Z","closed_at":"2017-10-12T22:24:57Z","author_association":"NONE","active_lock_reason":null,"body":"As the [BalancedShardsAllocator] balance the shards  Follow 2 important principles.\r\nFirst,Make sure that all es instances have near slice quantities.\r\nSecond,The indexâ€˜s shards are allocated in different instances as much as possible.\r\n\r\nWe have different machines, and the storage capacity of machines is not the same size. If we do not consider the storage space weight of the instance, when the capacity storage is full, the low capacity machine will first arrive at the storage bottleneck, and then it will lead to removal. Because the [DiskThresholdDecider] will make the moving decition!\r\n\r\n### My opinitions is the [WeightFunction] should consider the storage space of instances ?\r\n","closed_by":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"performed_via_github_app":null}