[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/11936120","html_url":"https://github.com/elastic/elasticsearch/issues/2519#issuecomment-11936120","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2519","id":11936120,"node_id":"MDEyOklzc3VlQ29tbWVudDExOTM2MTIw","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2013-01-06T22:51:10Z","updated_at":"2013-01-06T22:51:10Z","author_association":"MEMBER","body":"Do you get a failure in this case? I tested it, and it works fine even if you don't have the spatial4j lib in the classpath, assuming you don't call the builders that require it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/11995033","html_url":"https://github.com/elastic/elasticsearch/issues/2519#issuecomment-11995033","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2519","id":11995033,"node_id":"MDEyOklzc3VlQ29tbWVudDExOTk1MDMz","user":{"login":"yurkom","id":1897602,"node_id":"MDQ6VXNlcjE4OTc2MDI=","avatar_url":"https://avatars3.githubusercontent.com/u/1897602?v=4","gravatar_id":"","url":"https://api.github.com/users/yurkom","html_url":"https://github.com/yurkom","followers_url":"https://api.github.com/users/yurkom/followers","following_url":"https://api.github.com/users/yurkom/following{/other_user}","gists_url":"https://api.github.com/users/yurkom/gists{/gist_id}","starred_url":"https://api.github.com/users/yurkom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yurkom/subscriptions","organizations_url":"https://api.github.com/users/yurkom/orgs","repos_url":"https://api.github.com/users/yurkom/repos","events_url":"https://api.github.com/users/yurkom/events{/privacy}","received_events_url":"https://api.github.com/users/yurkom/received_events","type":"User","site_admin":false},"created_at":"2013-01-08T12:19:18Z","updated_at":"2013-01-08T14:45:34Z","author_association":"NONE","body":"I have found that it is not an issue for Java. It is reproduced in the [Scala](http://www.scala-lang.org/) compiler (ver. 2.9.2). I tested two simple classes for Java and Scala. They did the same work. And the scala code got a failure.\n\n``` scala\nimport org.elasticsearch.index.query.FilterBuilders._\n\nclass ElasticTest {\n  def test {\n    orFilter(termFilter(\"key\", \"phrase\"))\n  }\n}\n```\n\n``` log\nerror: error while loading FilterBuilders, Missing dependency 'class com.spatial4j.core.shape.Shape', required by c:\\lib\\elastic.jar(org/elasticsearch/index/query/FilterBuilders.class)\nElasticTest.scala:5: error: not found: value orFilter\n    orFilter(termFilter(\"key\", \"phrase\"))\n    ^\ntwo errors found\n```\n\nAbout the issue:\nhttps://issues.scala-lang.org/browse/SI-5343\nhttp://www.scala-lang.org/node/12342\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/13903486","html_url":"https://github.com/elastic/elasticsearch/issues/2519#issuecomment-13903486","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2519","id":13903486,"node_id":"MDEyOklzc3VlQ29tbWVudDEzOTAzNDg2","user":{"login":"danklynn","id":191227,"node_id":"MDQ6VXNlcjE5MTIyNw==","avatar_url":"https://avatars2.githubusercontent.com/u/191227?v=4","gravatar_id":"","url":"https://api.github.com/users/danklynn","html_url":"https://github.com/danklynn","followers_url":"https://api.github.com/users/danklynn/followers","following_url":"https://api.github.com/users/danklynn/following{/other_user}","gists_url":"https://api.github.com/users/danklynn/gists{/gist_id}","starred_url":"https://api.github.com/users/danklynn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danklynn/subscriptions","organizations_url":"https://api.github.com/users/danklynn/orgs","repos_url":"https://api.github.com/users/danklynn/repos","events_url":"https://api.github.com/users/danklynn/events{/privacy}","received_events_url":"https://api.github.com/users/danklynn/received_events","type":"User","site_admin":false},"created_at":"2013-02-21T18:04:54Z","updated_at":"2013-02-21T18:04:54Z","author_association":"NONE","body":"This issue is also present in the Groovy runtime:\n\n``` groovy\n// this throws a NoClassDefFoundError:\ndef query = QueryBuilders.boolQuery()\n```\n\njava.lang.NoClassDefFoundError: com/spatial4j/core/shape/Shape\n    at java.lang.Class.getDeclaredMethods0(Native Method)\n    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427)\n    at java.lang.Class.getDeclaredMethods(Class.java:1791)\n    at org.codehaus.groovy.reflection.CachedClass$3$1.run(CachedClass.java:84)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at org.codehaus.groovy.reflection.CachedClass$3.initValue(CachedClass.java:81)\n    at org.codehaus.groovy.reflection.CachedClass$3.initValue(CachedClass.java:79)\n    at org.codehaus.groovy.util.LazyReference.getLocked(LazyReference.java:46)\n    at org.codehaus.groovy.util.LazyReference.get(LazyReference.java:33)\n    at org.codehaus.groovy.reflection.CachedClass.getMethods(CachedClass.java:250)\n    at groovy.lang.MetaClassImpl.populateMethods(MetaClassImpl.java:305)\n    at groovy.lang.MetaClassImpl.fillMethodIndex(MetaClassImpl.java:284)\n    at groovy.lang.MetaClassImpl.initialize(MetaClassImpl.java:2904)\n    at groovy.lang.ExpandoMetaClass.initialize(ExpandoMetaClass.java:483)\n    at org.codehaus.groovy.reflection.ClassInfo.getMetaClassUnderLock(ClassInfo.java:166)\n    at org.codehaus.groovy.reflection.ClassInfo.getMetaClass(ClassInfo.java:182)\n    at org.codehaus.groovy.runtime.metaclass.MetaClassRegistryImpl.getMetaClass(MetaClassRegistryImpl.java:227)\n    at org.codehaus.groovy.runtime.InvokerHelper.getMetaClass(InvokerHelper.java:751)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.createCallStaticSite(CallSiteArray.java:59)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.createCallSite(CallSiteArray.java:146)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:112)\n    at com.fullcontact.elasticsearchtests.TestHarness.queryElasticSearch(TestHarness.groovy:27)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/13904448","html_url":"https://github.com/elastic/elasticsearch/issues/2519#issuecomment-13904448","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2519","id":13904448,"node_id":"MDEyOklzc3VlQ29tbWVudDEzOTA0NDQ4","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2013-02-21T18:24:28Z","updated_at":"2013-02-21T18:24:28Z","author_association":"MEMBER","body":"@danklynn which groovy version?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/15152833","html_url":"https://github.com/elastic/elasticsearch/issues/2519#issuecomment-15152833","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2519","id":15152833,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MTUyODMz","user":{"login":"pablomolnar","id":247612,"node_id":"MDQ6VXNlcjI0NzYxMg==","avatar_url":"https://avatars0.githubusercontent.com/u/247612?v=4","gravatar_id":"","url":"https://api.github.com/users/pablomolnar","html_url":"https://github.com/pablomolnar","followers_url":"https://api.github.com/users/pablomolnar/followers","following_url":"https://api.github.com/users/pablomolnar/following{/other_user}","gists_url":"https://api.github.com/users/pablomolnar/gists{/gist_id}","starred_url":"https://api.github.com/users/pablomolnar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pablomolnar/subscriptions","organizations_url":"https://api.github.com/users/pablomolnar/orgs","repos_url":"https://api.github.com/users/pablomolnar/repos","events_url":"https://api.github.com/users/pablomolnar/events{/privacy}","received_events_url":"https://api.github.com/users/pablomolnar/received_events","type":"User","site_admin":false},"created_at":"2013-03-20T00:47:42Z","updated_at":"2013-03-20T00:47:42Z","author_association":"NONE","body":"@kimchy The issue is pretty issue to reproduce in Grails 2.2.1\n\n1) grails create-app bug\n2) Add inside the dependecy block in the BuildConfig.groovy:\n\n```\n    compile 'org.elasticsearch:elasticsearch:0.20.5'\n    compile('org.elasticsearch:elasticsearch-lang-groovy:1.3.0')\n```\n\n3) Add this unit test:\n\nclass ClassNotFoundTests {\n\n```\nvoid testBug() {\n    org.elasticsearch.index.query.QueryBuilders.matchAllQuery()\n}\n```\n\n4) grails test-app report:\n\n Running 1 unit test... 1 of 1\n| Failure:  testBug(bug.ClassNotFoundTests)\n|  java.lang.NoClassDefFoundError: com/spatial4j/core/shape/Shape\n    at java.lang.Class.privateGetDeclaredMethods(Class.java:2451)\n    at java.lang.Class.getDeclaredMethods(Class.java:1810)\n    at org.codehaus.groovy.util.LazyReference.getLocked(LazyReference.java:46)\n    at org.codehaus.groovy.util.LazyReference.get(LazyReference.java:33)\n    at bug.ClassNotFoundTests.testBug(ClassNotFoundTests.groovy:12)\nCaused by: java.lang.ClassNotFoundException: com.spatial4j.core.shape.Shape\n    at org.codehaus.groovy.tools.RootLoader.findClass(RootLoader.java:175)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)\n    at org.codehaus.groovy.tools.RootLoader.loadClass(RootLoader.java:147)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)\n    ... 5 more\n| Completed 1 unit test, 1 failed in 533ms\n| Packaging Grails application.....\n| Tests FAILED  - view reports in /private/tmp/bug/target/test-reports\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/15152940","html_url":"https://github.com/elastic/elasticsearch/issues/2519#issuecomment-15152940","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2519","id":15152940,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MTUyOTQw","user":{"login":"pablomolnar","id":247612,"node_id":"MDQ6VXNlcjI0NzYxMg==","avatar_url":"https://avatars0.githubusercontent.com/u/247612?v=4","gravatar_id":"","url":"https://api.github.com/users/pablomolnar","html_url":"https://github.com/pablomolnar","followers_url":"https://api.github.com/users/pablomolnar/followers","following_url":"https://api.github.com/users/pablomolnar/following{/other_user}","gists_url":"https://api.github.com/users/pablomolnar/gists{/gist_id}","starred_url":"https://api.github.com/users/pablomolnar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pablomolnar/subscriptions","organizations_url":"https://api.github.com/users/pablomolnar/orgs","repos_url":"https://api.github.com/users/pablomolnar/repos","events_url":"https://api.github.com/users/pablomolnar/events{/privacy}","received_events_url":"https://api.github.com/users/pablomolnar/received_events","type":"User","site_admin":false},"created_at":"2013-03-20T00:51:00Z","updated_at":"2013-03-20T00:51:00Z","author_association":"NONE","body":"Also, FYI the issue is not present using 0.90.0.Beta1:\n\n```\n    compile 'org.elasticsearch:elasticsearch:0.90.0.Beta1'\n    compile('org.elasticsearch:elasticsearch-lang-groovy:1.4.0')\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/527376788","html_url":"https://github.com/elastic/elasticsearch/issues/2519#issuecomment-527376788","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2519","id":527376788,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzM3Njc4OA==","user":{"login":"worldsayshi","id":930909,"node_id":"MDQ6VXNlcjkzMDkwOQ==","avatar_url":"https://avatars2.githubusercontent.com/u/930909?v=4","gravatar_id":"","url":"https://api.github.com/users/worldsayshi","html_url":"https://github.com/worldsayshi","followers_url":"https://api.github.com/users/worldsayshi/followers","following_url":"https://api.github.com/users/worldsayshi/following{/other_user}","gists_url":"https://api.github.com/users/worldsayshi/gists{/gist_id}","starred_url":"https://api.github.com/users/worldsayshi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/worldsayshi/subscriptions","organizations_url":"https://api.github.com/users/worldsayshi/orgs","repos_url":"https://api.github.com/users/worldsayshi/repos","events_url":"https://api.github.com/users/worldsayshi/events{/privacy}","received_events_url":"https://api.github.com/users/worldsayshi/received_events","type":"User","site_admin":false},"created_at":"2019-09-03T09:17:37Z","updated_at":"2019-09-03T09:30:07Z","author_association":"NONE","body":"This still seem to happen in Groovy (v 2.4.15) with elasticsearch-6.6.0.\r\n\r\nHere's a (probably obvious) workaround: Wrap the method calls in Java:\r\n\r\n```\r\npublic class QueryBuildersWrapper {\r\n    public static MatchQueryBuilder matchQuery(String name, Object text) {\r\n        return QueryBuilders.matchQuery(name, text);\r\n    }\r\n}\r\n```","performed_via_github_app":null}]