[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/167007810","html_url":"https://github.com/elastic/elasticsearch/issues/15645#issuecomment-167007810","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15645","id":167007810,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NzAwNzgxMA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-12-23T23:20:40Z","updated_at":"2015-12-23T23:20:40Z","author_association":"CONTRIBUTOR","body":"So my initial assumption is that you are mainly unlucky. We don't throttle outgoing recovery/relocations yet so it's totally possible that they move all from one machine. Do you know if you have any recovery settings set on your cluster? \n\nhttps://github.com/elastic/elasticsearch/pull/15372 <== this will help here it won't allow all recoveries to come from the same source\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/167008050","html_url":"https://github.com/elastic/elasticsearch/issues/15645#issuecomment-167008050","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15645","id":167008050,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NzAwODA1MA==","user":{"login":"shaharmor","id":10861920,"node_id":"MDQ6VXNlcjEwODYxOTIw","avatar_url":"https://avatars3.githubusercontent.com/u/10861920?v=4","gravatar_id":"","url":"https://api.github.com/users/shaharmor","html_url":"https://github.com/shaharmor","followers_url":"https://api.github.com/users/shaharmor/followers","following_url":"https://api.github.com/users/shaharmor/following{/other_user}","gists_url":"https://api.github.com/users/shaharmor/gists{/gist_id}","starred_url":"https://api.github.com/users/shaharmor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shaharmor/subscriptions","organizations_url":"https://api.github.com/users/shaharmor/orgs","repos_url":"https://api.github.com/users/shaharmor/repos","events_url":"https://api.github.com/users/shaharmor/events{/privacy}","received_events_url":"https://api.github.com/users/shaharmor/received_events","type":"User","site_admin":false},"created_at":"2015-12-23T23:23:31Z","updated_at":"2015-12-23T23:23:31Z","author_association":"NONE","body":"these are my related settings:\n\n```\nindices.recovery.max_bytes_per_sec: \"100mb\"\nindices.recovery.concurrent_streams: 5\ncluster.routing.allocation.node_concurrent_recoveries: 5\n```\n\nnot sure if anything else is related\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/167008605","html_url":"https://github.com/elastic/elasticsearch/issues/15645#issuecomment-167008605","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15645","id":167008605,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NzAwODYwNQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-12-23T23:30:02Z","updated_at":"2015-12-23T23:30:02Z","author_association":"CONTRIBUTOR","body":"> cluster.routing.allocation.node_concurrent_recoveries: 5\n\nthat limits the target nodes not the source that's why all can come from the same source\n\n> indices.recovery.concurrent_streams: 5\n\nthat limits now many concurrent threads we use to send files from the source so all recoveries will shard 5 workers\n\n> indices.recovery.max_bytes_per_sec: \"100mb\"\n\nthat's throttling IO rate of the 5 workers\nI don't think here is anything you can do about all this, that's just the way it works :(\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/167009067","html_url":"https://github.com/elastic/elasticsearch/issues/15645#issuecomment-167009067","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15645","id":167009067,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NzAwOTA2Nw==","user":{"login":"shaharmor","id":10861920,"node_id":"MDQ6VXNlcjEwODYxOTIw","avatar_url":"https://avatars3.githubusercontent.com/u/10861920?v=4","gravatar_id":"","url":"https://api.github.com/users/shaharmor","html_url":"https://github.com/shaharmor","followers_url":"https://api.github.com/users/shaharmor/followers","following_url":"https://api.github.com/users/shaharmor/following{/other_user}","gists_url":"https://api.github.com/users/shaharmor/gists{/gist_id}","starred_url":"https://api.github.com/users/shaharmor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shaharmor/subscriptions","organizations_url":"https://api.github.com/users/shaharmor/orgs","repos_url":"https://api.github.com/users/shaharmor/repos","events_url":"https://api.github.com/users/shaharmor/events{/privacy}","received_events_url":"https://api.github.com/users/shaharmor/received_events","type":"User","site_admin":false},"created_at":"2015-12-23T23:34:52Z","updated_at":"2015-12-23T23:34:52Z","author_association":"NONE","body":"even if i increase the concurrent recoveries and streams to 10, the extra 5 shards after still coming from the same source... looks very \"unlucky\" to me :(\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/167009233","html_url":"https://github.com/elastic/elasticsearch/issues/15645#issuecomment-167009233","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15645","id":167009233,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NzAwOTIzMw==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-12-23T23:36:39Z","updated_at":"2015-12-23T23:36:39Z","author_association":"CONTRIBUTOR","body":"> even if i increase the concurrent recoveries and streams to 10, the extra 5 shards after still coming from the same source... looks very \"unlucky\" to me :(\n\nas I said - nothing you can do about this until #15372 is available which will be likely 3.0\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/167009349","html_url":"https://github.com/elastic/elasticsearch/issues/15645#issuecomment-167009349","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15645","id":167009349,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NzAwOTM0OQ==","user":{"login":"shaharmor","id":10861920,"node_id":"MDQ6VXNlcjEwODYxOTIw","avatar_url":"https://avatars3.githubusercontent.com/u/10861920?v=4","gravatar_id":"","url":"https://api.github.com/users/shaharmor","html_url":"https://github.com/shaharmor","followers_url":"https://api.github.com/users/shaharmor/followers","following_url":"https://api.github.com/users/shaharmor/following{/other_user}","gists_url":"https://api.github.com/users/shaharmor/gists{/gist_id}","starred_url":"https://api.github.com/users/shaharmor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shaharmor/subscriptions","organizations_url":"https://api.github.com/users/shaharmor/orgs","repos_url":"https://api.github.com/users/shaharmor/repos","events_url":"https://api.github.com/users/shaharmor/events{/privacy}","received_events_url":"https://api.github.com/users/shaharmor/received_events","type":"User","site_admin":false},"created_at":"2015-12-23T23:38:02Z","updated_at":"2015-12-23T23:38:02Z","author_association":"NONE","body":"Got it. thanks a lot for the information!\n","performed_via_github_app":null}]