{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/53318","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53318/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53318/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53318/events","html_url":"https://github.com/elastic/elasticsearch/issues/53318","id":578229525,"node_id":"MDU6SXNzdWU1NzgyMjk1MjU=","number":53318,"title":"Template API does not return the name of the index which has failed the update","user":{"login":"almiche","id":14715156,"node_id":"MDQ6VXNlcjE0NzE1MTU2","avatar_url":"https://avatars0.githubusercontent.com/u/14715156?v=4","gravatar_id":"","url":"https://api.github.com/users/almiche","html_url":"https://github.com/almiche","followers_url":"https://api.github.com/users/almiche/followers","following_url":"https://api.github.com/users/almiche/following{/other_user}","gists_url":"https://api.github.com/users/almiche/gists{/gist_id}","starred_url":"https://api.github.com/users/almiche/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/almiche/subscriptions","organizations_url":"https://api.github.com/users/almiche/orgs","repos_url":"https://api.github.com/users/almiche/repos","events_url":"https://api.github.com/users/almiche/events{/privacy}","received_events_url":"https://api.github.com/users/almiche/received_events","type":"User","site_admin":false},"labels":[{"id":163824881,"node_id":"MDU6TGFiZWwxNjM4MjQ4ODE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Indices%20APIs","name":":Core/Features/Indices APIs","color":"0e8a16","default":false,"description":"APIs to create and manage indices"},{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-03-09T22:36:19Z","updated_at":"2020-05-04T08:41:14Z","closed_at":"2020-05-04T08:41:13Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\n\r\n** Please read the guidelines below. **\r\n\r\nIssues that do not follow these guidelines are likely to be closed.\r\n\r\n<!-- Feature request -->\r\n\r\n**Describe the feature**:\r\n\r\nI would like to include the template name being modified in a MapperParsingException when making a PUT request to the template API with a faulty template.\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`): 7.2.0\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version** (`java -version`):12.0.1\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): Linux ec1f30f2faf4 4.19.76-linuxkit #1 SMP Thu Oct 17 19:31:58 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nTaking a look a the output of a failing Template API put request (in this example I added an unsupported parameter on a field for testing) \r\n\r\n```\r\n{\r\n  \"error\" : {\r\n    \"root_cause\" : [\r\n      {\r\n        \"type\" : \"mapper_parsing_exception\",\r\n        \"reason\" : \"Mapping definition for [host_name] has unsupported parameters:  [_all : {enabled=true}]\"\r\n      }\r\n    ],\r\n    \"type\" : \"mapper_parsing_exception\",\r\n    \"reason\" : \"Failed to parse mapping [_doc]: Mapping definition for [host_name] has unsupported parameters:  [_all : {enabled=true}]\",\r\n    \"caused_by\" : {\r\n      \"type\" : \"mapper_parsing_exception\",\r\n      \"reason\" : \"Mapping definition for [host_name] has unsupported parameters:  [_all : {enabled=true}]\"\r\n    }\r\n  },\r\n  \"status\" : 400\r\n}\r\n``` \r\nIt does not contain the name of the index or template in question here. I was wondering if it would be possible to include that information into error message, since otherwise the information being returned currently is essentially useless.\r\n\r\n**Steps to reproduce**:\r\n\r\nPlease include a *minimal* but *complete* recreation of the problem, including\r\n(e.g.) index creation, mappings, settings, query etc.  The easier you make for\r\nus to reproduce it, the more likely that somebody will take the time to look at it.\r\n\r\n 1.  Make the following curl request \r\n```\r\ncurl -X PUT \"localhost:9200/_template/template_1?pretty\" -H 'Content-Type: application/json' -d'\r\n{\r\n  \"index_patterns\": [\"te*\", \"bar*\"],\r\n  \"settings\": {\r\n    \"number_of_shards\": 1\r\n  },\r\n  \"mappings\": {\r\n    \"_source\": {\r\n      \"enabled\": false\r\n    },\r\n    \"properties\": {\r\n      \"host_name\": {\r\n        \"type\": \"keyword\",\r\n        \"_all\": {\r\n          \"enabled\": true   \r\n        }\r\n      },\r\n      \"created_at\": {\r\n        \"type\": \"date\",\r\n        \"format\": \"EEE MMM dd HH:mm:ss Z yyyy\"\r\n      }\r\n    }\r\n  }\r\n}\r\n'\r\n```\r\n\r\n**Provide logs (if relevant)**:\r\n\r\n","closed_by":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"performed_via_github_app":null}