[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/323305753","html_url":"https://github.com/elastic/elasticsearch/issues/26271#issuecomment-323305753","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26271","id":323305753,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMzMwNTc1Mw==","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2017-08-18T09:26:54Z","updated_at":"2017-08-18T09:26:54Z","author_association":"MEMBER","body":"Can you please provide:\r\n- the mapping for the document and packet_size field?\r\n- the document with the given `_id` as returned by a `GET /index/type/id`\r\n- the aggregation executed by Kibana","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/323985607","html_url":"https://github.com/elastic/elasticsearch/issues/26271#issuecomment-323985607","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26271","id":323985607,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMzk4NTYwNw==","user":{"login":"lilizhaolilizhao","id":7157975,"node_id":"MDQ6VXNlcjcxNTc5NzU=","avatar_url":"https://avatars3.githubusercontent.com/u/7157975?v=4","gravatar_id":"","url":"https://api.github.com/users/lilizhaolilizhao","html_url":"https://github.com/lilizhaolilizhao","followers_url":"https://api.github.com/users/lilizhaolilizhao/followers","following_url":"https://api.github.com/users/lilizhaolilizhao/following{/other_user}","gists_url":"https://api.github.com/users/lilizhaolilizhao/gists{/gist_id}","starred_url":"https://api.github.com/users/lilizhaolilizhao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lilizhaolilizhao/subscriptions","organizations_url":"https://api.github.com/users/lilizhaolilizhao/orgs","repos_url":"https://api.github.com/users/lilizhaolilizhao/repos","events_url":"https://api.github.com/users/lilizhaolilizhao/events{/privacy}","received_events_url":"https://api.github.com/users/lilizhaolilizhao/received_events","type":"User","site_admin":false},"created_at":"2017-08-22T10:25:43Z","updated_at":"2017-08-22T10:25:43Z","author_association":"NONE","body":"**This example uses a new ID, the last used ID has been deleted**\r\n## 1 mapping:\r\n{\r\n  \"stats-eth-agg-1-2017.08.21\": {\r\n    \"mappings\": {\r\n      \"agg\": {\r\n        \"_all\": {\r\n          \"enabled\": false,\r\n          \"norms\": false\r\n        },\r\n        \"dynamic_templates\": [\r\n          {\r\n            \"template1\": {\r\n              \"match\": \"*\",\r\n              \"mapping\": {\r\n                \"doc_values\": true,\r\n                \"ignore_above\": 1024,\r\n                \"index\": \"not_analyzed\",\r\n                \"type\": \"{dynamic_type}\"\r\n              }\r\n            }\r\n          }\r\n        ],\r\n        \"properties\": {\r\n          \"aggregate_timestamp_double\": {\r\n            \"type\": \"long\"\r\n          },\r\n          \"aggregate_timestamp_double_5m\": {\r\n            \"type\": \"long\"\r\n          },\r\n          \"end_timestamp\": {\r\n            \"type\": \"date\"\r\n          },\r\n          \"id\": {\r\n            \"type\": \"keyword\",\r\n            \"ignore_above\": 1024\r\n          },\r\n          \"packet_size\": {\r\n            \"type\": \"float\"\r\n          },\r\n          \"port\": {\r\n            \"type\": \"keyword\",\r\n            \"ignore_above\": 1024\r\n          },\r\n          \"probe_hostname\": {\r\n            \"type\": \"keyword\",\r\n            \"ignore_above\": 1024\r\n          },\r\n          \"start_timestamp\": {\r\n            \"type\": \"date\"\r\n          },\r\n          \"subnet\": {\r\n            \"type\": \"text\",\r\n            \"analyzer\": \"whitespace\",\r\n            \"fielddata\": true\r\n          }\r\n        }\r\n      },\r\n      \"_default_\": {\r\n        \"_all\": {\r\n          \"enabled\": false,\r\n          \"norms\": false\r\n        },\r\n        \"dynamic_templates\": [\r\n          {\r\n            \"template1\": {\r\n              \"match\": \"*\",\r\n              \"mapping\": {\r\n                \"doc_values\": true,\r\n                \"ignore_above\": 1024,\r\n                \"index\": \"not_analyzed\",\r\n                \"type\": \"{dynamic_type}\"\r\n              }\r\n            }\r\n          }\r\n        ],\r\n        \"properties\": {\r\n          \"end_timestamp\": {\r\n            \"type\": \"date\"\r\n          },\r\n          \"start_timestamp\": {\r\n            \"type\": \"date\"\r\n          },\r\n          \"subnet\": {\r\n            \"type\": \"text\",\r\n            \"analyzer\": \"whitespace\",\r\n            \"fielddata\": true\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n## 2 GET /index/type/id\r\n**request**:          \r\n            curl -XGET 'http://10.128.9.207:9200/stats-eth-agg-1-2017.08.21/agg/cb202746-7891-491d-b7b5-f7f10e21eef6'\r\n**reponse**:         \r\n            {\r\n  \"_index\": \"stats-eth-agg-1-2017.08.21\",\r\n  \"_type\": \"agg\",\r\n  \"_id\": \"cb202746-7891-491d-b7b5-f7f10e21eef6\",\r\n  \"_version\": 1,\r\n  \"found\": true,\r\n  \"_source\": {\r\n    \"start_timestamp\": \"2017-08-21T15:50:00.000Z\",\r\n    \"port\": \"0\",\r\n    \"probe_hostname\": \"ni-server\",\r\n    \"packet_size\": **2327931416**,\r\n    \"id\": \"cb202746-7891-491d-b7b5-f7f10e21eef6\",\r\n    \"aggregate_timestamp_double\": 82800,\r\n    \"aggregate_timestamp_double_5m\": 85800\r\n  }\r\n}\r\n## 3  the aggregation request\r\n**request**: \r\n            {\r\n  \"size\": 0,\r\n  \"query\": {\r\n    \"bool\": {\r\n      \"must\": [\r\n        {\r\n          \"query_string\": {\r\n            \"query\": \"_id:cb202746-7891-491d-b7b5-f7f10e21eef6\",\r\n            \"analyze_wildcard\": true\r\n          }\r\n        },\r\n        {\r\n          \"range\": {\r\n            \"start_timestamp\": {\r\n              \"gte\": 1503310388784,\r\n              \"lte\": 1503396788784,\r\n              \"format\": \"epoch_millis\"\r\n            }\r\n          }\r\n        }\r\n      ],\r\n      \"must_not\": []\r\n    }\r\n  },\r\n  \"_source\": {\r\n    \"excludes\": []\r\n  },\r\n  \"aggs\": {\r\n    \"2\": {\r\n      \"sum\": {\r\n        \"field\": \"packet_size\"\r\n      }\r\n    }\r\n  }\r\n}\r\n**reponse**:\r\n{\r\n  \"took\": 2,\r\n  \"timed_out\": false,\r\n  \"_shards\": {\r\n    \"total\": 5,\r\n    \"successful\": 5,\r\n    \"failed\": 0\r\n  },\r\n  \"hits\": {\r\n    \"total\": 1,\r\n    \"max_score\": 0,\r\n    \"hits\": []\r\n  },\r\n  \"aggregations\": {\r\n    \"2\": {\r\n      \"value\": 2327931392\r\n    }\r\n  },\r\n  \"status\": 200\r\n}\r\n![qq 20170822182425](https://user-images.githubusercontent.com/7157975/29561224-47da1e2e-8767-11e7-9b5a-02c177b6c2ce.png)\r\n![qq 20170822182449](https://user-images.githubusercontent.com/7157975/29561226-48350384-8767-11e7-9fff-a9a64b506376.png)\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/323986413","html_url":"https://github.com/elastic/elasticsearch/issues/26271#issuecomment-323986413","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26271","id":323986413,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMzk4NjQxMw==","user":{"login":"lilizhaolilizhao","id":7157975,"node_id":"MDQ6VXNlcjcxNTc5NzU=","avatar_url":"https://avatars3.githubusercontent.com/u/7157975?v=4","gravatar_id":"","url":"https://api.github.com/users/lilizhaolilizhao","html_url":"https://github.com/lilizhaolilizhao","followers_url":"https://api.github.com/users/lilizhaolilizhao/followers","following_url":"https://api.github.com/users/lilizhaolilizhao/following{/other_user}","gists_url":"https://api.github.com/users/lilizhaolilizhao/gists{/gist_id}","starred_url":"https://api.github.com/users/lilizhaolilizhao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lilizhaolilizhao/subscriptions","organizations_url":"https://api.github.com/users/lilizhaolilizhao/orgs","repos_url":"https://api.github.com/users/lilizhaolilizhao/repos","events_url":"https://api.github.com/users/lilizhaolilizhao/events{/privacy}","received_events_url":"https://api.github.com/users/lilizhaolilizhao/received_events","type":"User","site_admin":false},"created_at":"2017-08-22T10:29:29Z","updated_at":"2017-08-22T10:29:29Z","author_association":"NONE","body":"@tlrx ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/324033988","html_url":"https://github.com/elastic/elasticsearch/issues/26271#issuecomment-324033988","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26271","id":324033988,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNDAzMzk4OA==","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2017-08-22T13:55:55Z","updated_at":"2017-08-22T13:55:55Z","author_association":"MEMBER","body":"Thanks @lilizhaolilizhao.\r\n\r\nThe value `\"packet_size\": 2327931416` returned in the `_source` field in the GET request and shown in Kibana is the exact value provided when the document has been indexed. But what is interesting is the value indexed for the field packet_size for this document and you can return this value using [Doc Value Fields](https://www.elastic.co/guide/en/elasticsearch/reference/5.5/search-request-docvalue-fields.html). \r\n\r\nIn your search request, just add: `\"docvalue_fields\" : [\"packet_size\"]` and it should return `2.327931392E9`. I think that this is due to `2327931416` being parsed first as `double` and then narrowly converted to a `float` which results in a precision loss.\r\n\r\nIf you can trade disk space for accuracy and map the `packet_size` field as a `double` you should get back the right result.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/324201602","html_url":"https://github.com/elastic/elasticsearch/issues/26271#issuecomment-324201602","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26271","id":324201602,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNDIwMTYwMg==","user":{"login":"lilizhaolilizhao","id":7157975,"node_id":"MDQ6VXNlcjcxNTc5NzU=","avatar_url":"https://avatars3.githubusercontent.com/u/7157975?v=4","gravatar_id":"","url":"https://api.github.com/users/lilizhaolilizhao","html_url":"https://github.com/lilizhaolilizhao","followers_url":"https://api.github.com/users/lilizhaolilizhao/followers","following_url":"https://api.github.com/users/lilizhaolilizhao/following{/other_user}","gists_url":"https://api.github.com/users/lilizhaolilizhao/gists{/gist_id}","starred_url":"https://api.github.com/users/lilizhaolilizhao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lilizhaolilizhao/subscriptions","organizations_url":"https://api.github.com/users/lilizhaolilizhao/orgs","repos_url":"https://api.github.com/users/lilizhaolilizhao/repos","events_url":"https://api.github.com/users/lilizhaolilizhao/events{/privacy}","received_events_url":"https://api.github.com/users/lilizhaolilizhao/received_events","type":"User","site_admin":false},"created_at":"2017-08-23T02:15:28Z","updated_at":"2017-08-23T02:16:03Z","author_association":"NONE","body":"Thanks. @tlrx    \r\nYou are right. Is converted from double to float type, the damage caused by the accuracy.\r\n![qq 20170823101148](https://user-images.githubusercontent.com/7157975/29595733-f7ed20f2-87eb-11e7-9107-e72459909b27.jpg)\r\n![qq 20170823101152](https://user-images.githubusercontent.com/7157975/29595734-f7f86368-87eb-11e7-8765-7e0ff8d806cd.jpg)\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/324588287","html_url":"https://github.com/elastic/elasticsearch/issues/26271#issuecomment-324588287","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26271","id":324588287,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNDU4ODI4Nw==","user":{"login":"lilizhaolilizhao","id":7157975,"node_id":"MDQ6VXNlcjcxNTc5NzU=","avatar_url":"https://avatars3.githubusercontent.com/u/7157975?v=4","gravatar_id":"","url":"https://api.github.com/users/lilizhaolilizhao","html_url":"https://github.com/lilizhaolilizhao","followers_url":"https://api.github.com/users/lilizhaolilizhao/followers","following_url":"https://api.github.com/users/lilizhaolilizhao/following{/other_user}","gists_url":"https://api.github.com/users/lilizhaolilizhao/gists{/gist_id}","starred_url":"https://api.github.com/users/lilizhaolilizhao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lilizhaolilizhao/subscriptions","organizations_url":"https://api.github.com/users/lilizhaolilizhao/orgs","repos_url":"https://api.github.com/users/lilizhaolilizhao/repos","events_url":"https://api.github.com/users/lilizhaolilizhao/events{/privacy}","received_events_url":"https://api.github.com/users/lilizhaolilizhao/received_events","type":"User","site_admin":false},"created_at":"2017-08-24T09:47:39Z","updated_at":"2017-08-24T09:47:39Z","author_association":"NONE","body":"@tlrx \r\n## 1  I found the **root causes of the problem**\r\nthis project settings is a dynamic template, the template does not specify the type of \"packet_size\", \"packet_size\" program variables of type double, according to the field \"packet_size\" type of dynamic template generation in mapping is **FLOAT TYPE**.\r\n## 2 The Elasticsearch version we used was upgraded from **2.2.1 to 5.2.0**. \r\nThe same dynamic template, in the mapping generated on 2.2.1, the field \"packet_size\" is **DOUBLE TYPE**; in the mapping generated on 5.2.0, the field \"packet_size\" is **FLOAT TYPE**.\r\n\r\n## **The following content is the dynamic template:**\r\n{\r\n  \"order\": 0,\r\n  \"template\": \"stats-eth-agg-1-*\",\r\n  \"settings\": {\r\n    \"index\": {\r\n      \"number_of_replicas\": \"0\"\r\n    }\r\n  },\r\n  \"mappings\": {\r\n    \"_default_\": {\r\n      \"dynamic_templates\": [\r\n        {\r\n          \"template1\": {\r\n            \"mapping\": {\r\n              \"ignore_above\": 1024,\r\n              \"index\": \"not_analyzed\",\r\n              \"type\": \"{dynamic_type}\",\r\n              \"doc_values\": true\r\n            },\r\n            \"match\": \"*\"\r\n          }\r\n        }\r\n      ],\r\n      \"_all\": {\r\n        \"norms\": {\r\n          \"enabled\": false\r\n        },\r\n        \"enabled\": false\r\n      },\r\n      \"properties\": {\r\n        \"subnet\": {\r\n          \"fielddata\": true,\r\n          \"analyzer\": \"whitespace\",\r\n          \"type\": \"string\"\r\n        },\r\n        \"end_timestamp\": {\r\n          \"type\": \"date\"\r\n        },\r\n        \"start_timestamp\": {\r\n          \"type\": \"date\"\r\n        }\r\n      }\r\n    }\r\n  },\r\n  \"aliases\": {}\r\n}","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/324589042","html_url":"https://github.com/elastic/elasticsearch/issues/26271#issuecomment-324589042","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26271","id":324589042,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNDU4OTA0Mg==","user":{"login":"lilizhaolilizhao","id":7157975,"node_id":"MDQ6VXNlcjcxNTc5NzU=","avatar_url":"https://avatars3.githubusercontent.com/u/7157975?v=4","gravatar_id":"","url":"https://api.github.com/users/lilizhaolilizhao","html_url":"https://github.com/lilizhaolilizhao","followers_url":"https://api.github.com/users/lilizhaolilizhao/followers","following_url":"https://api.github.com/users/lilizhaolilizhao/following{/other_user}","gists_url":"https://api.github.com/users/lilizhaolilizhao/gists{/gist_id}","starred_url":"https://api.github.com/users/lilizhaolilizhao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lilizhaolilizhao/subscriptions","organizations_url":"https://api.github.com/users/lilizhaolilizhao/orgs","repos_url":"https://api.github.com/users/lilizhaolilizhao/repos","events_url":"https://api.github.com/users/lilizhaolilizhao/events{/privacy}","received_events_url":"https://api.github.com/users/lilizhaolilizhao/received_events","type":"User","site_admin":false},"created_at":"2017-08-24T09:51:01Z","updated_at":"2017-08-24T09:51:01Z","author_association":"NONE","body":"@tlrx  \r\nI initially think it is a double type variable, and the mapping field type generated by the dynamic template is incorrect. What do you think?\r\nThank you very much.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/328516350","html_url":"https://github.com/elastic/elasticsearch/issues/26271#issuecomment-328516350","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26271","id":328516350,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODUxNjM1MA==","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2017-09-11T12:39:14Z","updated_at":"2017-09-11T12:39:14Z","author_association":"MEMBER","body":"> I initially think it is a double type variable, and the mapping field type generated by the dynamic template is incorrect. What do you think?\r\n\r\nI think that:\r\n- the mapping must be explicit for the `packet_size` field and mapped as a `double` (the dynamic template defaults to the dynamic type detection, which depends of the value received for the 1st document)\r\n- the content sent to Elasticsearch must be valid doubles\r\n\r\nIt should be OK. I don't see this as a bug since the type detected for the field really depends of what is sent for the first document. On a production cluster the mappings of every field should be clearly defined.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/332420191","html_url":"https://github.com/elastic/elasticsearch/issues/26271#issuecomment-332420191","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26271","id":332420191,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjQyMDE5MQ==","user":{"login":"lilizhaolilizhao","id":7157975,"node_id":"MDQ6VXNlcjcxNTc5NzU=","avatar_url":"https://avatars3.githubusercontent.com/u/7157975?v=4","gravatar_id":"","url":"https://api.github.com/users/lilizhaolilizhao","html_url":"https://github.com/lilizhaolilizhao","followers_url":"https://api.github.com/users/lilizhaolilizhao/followers","following_url":"https://api.github.com/users/lilizhaolilizhao/following{/other_user}","gists_url":"https://api.github.com/users/lilizhaolilizhao/gists{/gist_id}","starred_url":"https://api.github.com/users/lilizhaolilizhao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lilizhaolilizhao/subscriptions","organizations_url":"https://api.github.com/users/lilizhaolilizhao/orgs","repos_url":"https://api.github.com/users/lilizhaolilizhao/repos","events_url":"https://api.github.com/users/lilizhaolilizhao/events{/privacy}","received_events_url":"https://api.github.com/users/lilizhaolilizhao/received_events","type":"User","site_admin":false},"created_at":"2017-09-27T06:16:59Z","updated_at":"2017-09-27T06:27:21Z","author_association":"NONE","body":"@tlrx \r\nIf the dynamic template does not explicit the specified type, a double type variable is identified as the float type in the mapping. Is this a bug? That's what I've found at the project.\r\n\r\nIn the Java program, the variables are double types, stored in ES, and the corresponding field type in mapping is float. Is this bug?\r\n\r\nAnd the corresponding field type the 1st document are also of the double type. In the last version（2.2.1）, there was no such problem.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/332829674","html_url":"https://github.com/elastic/elasticsearch/issues/26271#issuecomment-332829674","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26271","id":332829674,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjgyOTY3NA==","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2017-09-28T13:03:49Z","updated_at":"2017-09-28T13:03:49Z","author_association":"MEMBER","body":"> If the dynamic template does not explicit the specified type, a double type variable is identified as the float type in the mapping. Is this a bug? That's what I've found at the project.\r\n\r\nWhen no mapping is defined, float are used by default instead of double because it is more space efficient. That's explicitly defined [here](https://github.com/elastic/elasticsearch/blob/master/core/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java#L757-L759) in the code so it's not a bug.\r\n\r\n\r\n> And the corresponding field type the 1st document are also of the double type. In the last version（2.2.1）, there was no such problem.\r\n\r\nYes, it's been changed in #15319 and documented in the [breaking changes for 5.0](https://www.elastic.co/guide/en/elasticsearch/reference/5.0/breaking_50_mapping_changes.html#_floating_points_use_literal_float_literal_instead_of_literal_double_literal)\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/336057884","html_url":"https://github.com/elastic/elasticsearch/issues/26271#issuecomment-336057884","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26271","id":336057884,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjA1Nzg4NA==","user":{"login":"lilizhaolilizhao","id":7157975,"node_id":"MDQ6VXNlcjcxNTc5NzU=","avatar_url":"https://avatars3.githubusercontent.com/u/7157975?v=4","gravatar_id":"","url":"https://api.github.com/users/lilizhaolilizhao","html_url":"https://github.com/lilizhaolilizhao","followers_url":"https://api.github.com/users/lilizhaolilizhao/followers","following_url":"https://api.github.com/users/lilizhaolilizhao/following{/other_user}","gists_url":"https://api.github.com/users/lilizhaolilizhao/gists{/gist_id}","starred_url":"https://api.github.com/users/lilizhaolilizhao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lilizhaolilizhao/subscriptions","organizations_url":"https://api.github.com/users/lilizhaolilizhao/orgs","repos_url":"https://api.github.com/users/lilizhaolilizhao/repos","events_url":"https://api.github.com/users/lilizhaolilizhao/events{/privacy}","received_events_url":"https://api.github.com/users/lilizhaolilizhao/received_events","type":"User","site_admin":false},"created_at":"2017-10-12T08:26:28Z","updated_at":"2017-10-12T08:26:28Z","author_association":"NONE","body":"@tlrx  ok, thanks.","performed_via_github_app":null}]