{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/45232","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45232/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45232/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45232/events","html_url":"https://github.com/elastic/elasticsearch/issues/45232","id":477319403,"node_id":"MDU6SXNzdWU0NzczMTk0MDM=","number":45232,"title":"How do i disqualify a parent document, based on a key value pair in a child doc in elasticsearch","user":{"login":"yashtandon07","id":37371445,"node_id":"MDQ6VXNlcjM3MzcxNDQ1","avatar_url":"https://avatars2.githubusercontent.com/u/37371445?v=4","gravatar_id":"","url":"https://api.github.com/users/yashtandon07","html_url":"https://github.com/yashtandon07","followers_url":"https://api.github.com/users/yashtandon07/followers","following_url":"https://api.github.com/users/yashtandon07/following{/other_user}","gists_url":"https://api.github.com/users/yashtandon07/gists{/gist_id}","starred_url":"https://api.github.com/users/yashtandon07/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yashtandon07/subscriptions","organizations_url":"https://api.github.com/users/yashtandon07/orgs","repos_url":"https://api.github.com/users/yashtandon07/repos","events_url":"https://api.github.com/users/yashtandon07/events{/privacy}","received_events_url":"https://api.github.com/users/yashtandon07/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-08-06T11:13:55Z","updated_at":"2019-08-06T11:19:26Z","closed_at":"2019-08-06T11:19:26Z","author_association":"NONE","active_lock_reason":null,"body":"I am using parent child relationship in elasticsearch v7.3 suppose my parent document consist of 'users' also their are more than one child documents for each parent document. Now in all my child document i have with me a text field suppose 'name' with value 'raju' or 'yash' or etc. And my query is to get all the parent documents, whose child doc must not contain 'name' equals to 'raju'.\r\n\r\ni.e if suppose we have 4 child doc in a parent doc and even if one child doc has name 'raju' then its parent doc must be disqualified and it must not be retrieved. hence i would request if anyone can help me with this.\r\n\r\n                \"has_child\": {\r\n                  \"type\": \"child_1\",\r\n                  \"query\": [\r\n                    {\r\n                      \"bool\": {\r\n                        \"must_not\": [\r\n                          {\r\n                            \"match_phrase\": {\r\n                              \"name\": \"raju\"\r\n                            }\r\n                          }\r\n                        ]\r\n                      }\r\n                    }\r\n                  ]\r\n                }\r\nAs the negative weight concept has been removed then what is the way to acheive the solution to this problem. Any help would be highly appreciable. \r\n\r\nES Version: 7.3\r\nOS: ubuntu 18.04\r\nGitHub reference: https://github.com/elastic/elasticsearch/issues/19166","closed_by":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"performed_via_github_app":null}