{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/1377","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1377/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1377/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1377/events","html_url":"https://github.com/elastic/elasticsearch/issues/1377","id":1836488,"node_id":"MDU6SXNzdWUxODM2NDg4","number":1377,"title":"count doesn't work for empty query (discrepancy with search API)","user":{"login":"IlyaSemenov","id":128121,"node_id":"MDQ6VXNlcjEyODEyMQ==","avatar_url":"https://avatars1.githubusercontent.com/u/128121?v=4","gravatar_id":"","url":"https://api.github.com/users/IlyaSemenov","html_url":"https://github.com/IlyaSemenov","followers_url":"https://api.github.com/users/IlyaSemenov/followers","following_url":"https://api.github.com/users/IlyaSemenov/following{/other_user}","gists_url":"https://api.github.com/users/IlyaSemenov/gists{/gist_id}","starred_url":"https://api.github.com/users/IlyaSemenov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IlyaSemenov/subscriptions","organizations_url":"https://api.github.com/users/IlyaSemenov/orgs","repos_url":"https://api.github.com/users/IlyaSemenov/repos","events_url":"https://api.github.com/users/IlyaSemenov/events{/privacy}","received_events_url":"https://api.github.com/users/IlyaSemenov/received_events","type":"User","site_admin":false},"labels":[{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":127902,"node_id":"MDU6TGFiZWwxMjc5MDI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.18.0","name":"v0.18.0","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2011-10-06T18:34:48Z","updated_at":"2011-10-06T19:57:37Z","closed_at":"2011-10-06T19:57:37Z","author_association":"NONE","active_lock_reason":null,"body":"The count API by its nature is very similar to search API, supposedly taking the 'query' part of a query and returning only the count of results (without the actual results). This works as expected in all cases except the empty query.\n\n```\n$ curl -XGET 'http://localhost:9200/gallery/item/_search?q=test'\n... \"hits\":{\"total\":31 ...\n\n$ curl -XGET 'http://localhost:9200/gallery/item/_count?q=test'\n{\"count\":31 ...\n\n$ curl -XGET 'http://localhost:9200/gallery/item/_search'\n... \"hits\":{\"total\":11444 ...\n\n$ curl -XGET 'http://localhost:9200/gallery/item/_count'\n{\"error\":\"No query to execute, not in body, and not bounded to 'q' parameter\"}\n```\n\nI believe this discrepancy between search and count APIs needs to be fixed, and count for empty query should return the total count of the documents, like search already does.\n","closed_by":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"performed_via_github_app":null}