[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/587344343","html_url":"https://github.com/elastic/elasticsearch/issues/52453#issuecomment-587344343","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52453","id":587344343,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzM0NDM0Mw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-02-18T08:43:08Z","updated_at":"2020-02-18T08:43:08Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features (:Core/Features/Watcher)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/592415547","html_url":"https://github.com/elastic/elasticsearch/issues/52453#issuecomment-592415547","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52453","id":592415547,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjQxNTU0Nw==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2020-02-28T08:56:23Z","updated_at":"2020-02-28T08:56:23Z","author_association":"MEMBER","body":"Reported by @dakrone in #33326:\r\n\r\n```\r\n09:55:26 \r\n09:55:26 org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityClientYamlTestSuiteIT > test {yaml=watcher/usage/10_basic/Test watcher usage stats output} FAILED\r\n09:55:26     java.lang.AssertionError: Failure at [watcher/usage/10_basic:48]: field [watcher.count.active] is not greater than [$watch_count_active]\r\n09:55:26     Expected: a value greater than <1>\r\n09:55:26          but: <1> was equal to <1>\r\n09:55:26         at __randomizedtesting.SeedInfo.seed([3AA5E1A0040CF825:B2F1DE7AAAF095DD]:0)\r\n09:55:26         at org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.executeSection(ESClientYamlSuiteTestCase.java:405)\r\n09:55:26         at org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.test(ESClientYamlSuiteTestCase.java:382)\r\n09:55:26         at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n09:55:26         at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n```\r\n\r\nI was unable to reproduce this on the 7.x branch.\r\n\r\nFailure:\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.x+matrix-java-periodic/ES_RUNTIME_JAVA=zulu11,nodes=general-purpose/538/consoleFull\r\nhttps://gradle-enterprise.elastic.co/s/xxhruxec3jeji","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/592418434","html_url":"https://github.com/elastic/elasticsearch/issues/52453#issuecomment-592418434","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52453","id":592418434,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjQxODQzNA==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2020-02-28T09:04:04Z","updated_at":"2020-05-11T19:22:12Z","author_association":"MEMBER","body":"This (^) is another test that failed because incorrect stats counts are reported. \r\n\r\nI suspect the main cause of these failures is that watcher, is not fully started on all shard instances that it serves watches from. More specifically the `WatcherIndexingListener` maybe inactive for a specific shard. We change the tests to ensure that watcher is fully started, but on the other hand we can change the put watch api to check whether the `WatcherIndexingListener` is active prior to indexing. If it not ready wait similar to the timeout on index request (waiting for enough shard copies to be ready prior to indexing)?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/593699564","html_url":"https://github.com/elastic/elasticsearch/issues/52453#issuecomment-593699564","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52453","id":593699564,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MzY5OTU2NA==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2020-03-03T00:15:41Z","updated_at":"2020-03-03T00:15:41Z","author_association":"CONTRIBUTOR","body":"`SmokeTestWatcherTestSuiteIT.testMonitorClusterHealth` has failed twice again today. I assume due to the nature of the underlying cause that muting isn't practical.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/593797501","html_url":"https://github.com/elastic/elasticsearch/issues/52453#issuecomment-593797501","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52453","id":593797501,"node_id":"MDEyOklzc3VlQ29tbWVudDU5Mzc5NzUwMQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2020-03-03T06:55:03Z","updated_at":"2020-03-03T06:55:03Z","author_association":"MEMBER","body":"I want to see how these tests respond to #52627. \r\n\r\nOtherwise I think we should investigate changing the watcher put and delete APIs to wait for the watch to be added to the trigger service before returning a response. Tests assume that this always happens, but that is not the case. In the meantime specific tests can be muted.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/594179118","html_url":"https://github.com/elastic/elasticsearch/issues/52453#issuecomment-594179118","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52453","id":594179118,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDE3OTExOA==","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2020-03-03T21:30:01Z","updated_at":"2020-03-03T21:30:01Z","author_association":"MEMBER","body":"@martijnvg it looks like it just failed https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob-unix-compatibility/os=centos-7&&immutable/611/console","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/594567499","html_url":"https://github.com/elastic/elasticsearch/issues/52453#issuecomment-594567499","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52453","id":594567499,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDU2NzQ5OQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2020-03-04T14:45:32Z","updated_at":"2020-03-04T15:11:41Z","author_association":"MEMBER","body":"I will mute the `SmokeTestWatcherTestSuiteIT#testMonitorClusterHealth` for now in master and 7.x\r\n\r\nUpdate: I've used the wrong issue id in the commit message 🤦‍♂ \r\n[master](9918a8fd6bceaf209e1a5cbb41be3bbf80f81f2d), [7.x](2e325e24cb28a1ff5152382c39cbea3198472240)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/608625902","html_url":"https://github.com/elastic/elasticsearch/issues/52453#issuecomment-608625902","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52453","id":608625902,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODYyNTkwMg==","user":{"login":"jbaiera","id":875779,"node_id":"MDQ6VXNlcjg3NTc3OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/875779?v=4","gravatar_id":"","url":"https://api.github.com/users/jbaiera","html_url":"https://github.com/jbaiera","followers_url":"https://api.github.com/users/jbaiera/followers","following_url":"https://api.github.com/users/jbaiera/following{/other_user}","gists_url":"https://api.github.com/users/jbaiera/gists{/gist_id}","starred_url":"https://api.github.com/users/jbaiera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbaiera/subscriptions","organizations_url":"https://api.github.com/users/jbaiera/orgs","repos_url":"https://api.github.com/users/jbaiera/repos","events_url":"https://api.github.com/users/jbaiera/events{/privacy}","received_events_url":"https://api.github.com/users/jbaiera/received_events","type":"User","site_admin":false},"created_at":"2020-04-03T19:46:00Z","updated_at":"2020-04-03T19:46:00Z","author_association":"CONTRIBUTOR","body":"There was a failure today that was related to https://github.com/elastic/elasticsearch/issues/33326, which looks like this issue replaces.\r\n\r\nhttps://gradle-enterprise.elastic.co/s/dhqipxj2iuyfc","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/637781553","html_url":"https://github.com/elastic/elasticsearch/issues/52453#issuecomment-637781553","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52453","id":637781553,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNzc4MTU1Mw==","user":{"login":"jakelandis","id":976291,"node_id":"MDQ6VXNlcjk3NjI5MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/976291?v=4","gravatar_id":"","url":"https://api.github.com/users/jakelandis","html_url":"https://github.com/jakelandis","followers_url":"https://api.github.com/users/jakelandis/followers","following_url":"https://api.github.com/users/jakelandis/following{/other_user}","gists_url":"https://api.github.com/users/jakelandis/gists{/gist_id}","starred_url":"https://api.github.com/users/jakelandis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakelandis/subscriptions","organizations_url":"https://api.github.com/users/jakelandis/orgs","repos_url":"https://api.github.com/users/jakelandis/repos","events_url":"https://api.github.com/users/jakelandis/events{/privacy}","received_events_url":"https://api.github.com/users/jakelandis/received_events","type":"User","site_admin":false},"created_at":"2020-06-02T20:15:05Z","updated_at":"2020-06-02T20:15:05Z","author_association":"CONTRIBUTOR","body":"There are no instances of these failures since May 11 (There are a couple SSL failures in a FIPs container ... but that is not what this issue is about)\r\nThis corresponds with #56556 was introduced to help address issues like this. \r\n\r\n<img width=\"1917\" alt=\"image\" src=\"https://user-images.githubusercontent.com/976291/83565082-61966880-a4e3-11ea-85bd-3449ec2e65bd.png\">\r\n<img width=\"1923\" alt=\"image\" src=\"https://user-images.githubusercontent.com/976291/83564962-2f850680-a4e3-11ea-832b-40dd1d4fd7e4.png\">\r\n\r\n\r\n","performed_via_github_app":null}]