[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/206783814","html_url":"https://github.com/elastic/elasticsearch/issues/17574#issuecomment-206783814","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17574","id":206783814,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjc4MzgxNA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-04-07T09:35:25Z","updated_at":"2016-04-07T09:35:25Z","author_association":"CONTRIBUTOR","body":"I'm not sure what we can do here.  Making an https request sends a lot of gobbledygook to a server which is listening for an http request.  Not sure how we would differentiate this from just plain random bytes.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/207353793","html_url":"https://github.com/elastic/elasticsearch/issues/17574#issuecomment-207353793","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17574","id":207353793,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNzM1Mzc5Mw==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2016-04-08T09:50:23Z","updated_at":"2016-04-08T09:50:23Z","author_association":"MEMBER","body":"We discussed this in Fix-It Friday. The problem occurs when we try to determine the HTTP version:\n\n```\njava.lang.IllegalArgumentException: invalid version format: ∩┐Ç+∩┐Ç/∩┐î∩╛⌐∩┐î∩╛¿∩┐î�∩┐î�∩┐Ç\nat org.jboss.netty.handler.codec.http.HttpVersion.(HttpVersion.java:94)\nat org.jboss.netty.handler.codec.http.HttpVersion.valueOf(HttpVersion.java:62)\n...\n```\n\nSo in the absence of a valid HTTP version something is fishy anyway and we can at least detect that this is an invalid protocol. \n\nObviously on protocol level there is not much we can do except to close the connection but we can maybe log a bit better exception.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/207357696","html_url":"https://github.com/elastic/elasticsearch/issues/17574#issuecomment-207357696","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17574","id":207357696,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNzM1NzY5Ng==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-04-08T10:05:03Z","updated_at":"2016-04-08T10:05:47Z","author_association":"MEMBER","body":"There's nothing that we can do here. Note that I can produce the exact same stack trace with this request:\n\n```\n$ curl -XGET \"localhost:9200/ foo\"\n```\n\nwhich produces:\n\n```\njava.lang.IllegalArgumentException: invalid version format: FOO HTTP/1.1\n    at org.jboss.netty.handler.codec.http.HttpVersion.<init>(HttpVersion.java:94)\n    at org.jboss.netty.handler.codec.http.HttpVersion.valueOf(HttpVersion.java:62)\n```\n\nBad requests are bad.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/207358281","html_url":"https://github.com/elastic/elasticsearch/issues/17574#issuecomment-207358281","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17574","id":207358281,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNzM1ODI4MQ==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2016-04-08T10:06:49Z","updated_at":"2016-04-08T10:06:49Z","author_association":"MEMBER","body":"As discussed, in that case it does not make to much sense to try to distinguish invalid HTTP requests and invalid protocols if the behavior is identical.\n","performed_via_github_app":null}]