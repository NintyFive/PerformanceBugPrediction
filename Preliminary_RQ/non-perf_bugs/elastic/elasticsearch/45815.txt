{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/45815","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45815/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45815/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45815/events","html_url":"https://github.com/elastic/elasticsearch/issues/45815","id":483603696,"node_id":"MDU6SXNzdWU0ODM2MDM2OTY=","number":45815,"title":"Allow max_map_count=65536 on single nodes for Docker containers","user":{"login":"WingsLikeEagles","id":40436741,"node_id":"MDQ6VXNlcjQwNDM2NzQx","avatar_url":"https://avatars3.githubusercontent.com/u/40436741?v=4","gravatar_id":"","url":"https://api.github.com/users/WingsLikeEagles","html_url":"https://github.com/WingsLikeEagles","followers_url":"https://api.github.com/users/WingsLikeEagles/followers","following_url":"https://api.github.com/users/WingsLikeEagles/following{/other_user}","gists_url":"https://api.github.com/users/WingsLikeEagles/gists{/gist_id}","starred_url":"https://api.github.com/users/WingsLikeEagles/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WingsLikeEagles/subscriptions","organizations_url":"https://api.github.com/users/WingsLikeEagles/orgs","repos_url":"https://api.github.com/users/WingsLikeEagles/repos","events_url":"https://api.github.com/users/WingsLikeEagles/events{/privacy}","received_events_url":"https://api.github.com/users/WingsLikeEagles/received_events","type":"User","site_admin":false},"labels":[{"id":144797810,"node_id":"MDU6TGFiZWwxNDQ3OTc4MTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Core","name":":Core/Infra/Core","color":"0e8a16","default":false,"description":"Core issues without another label"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2019-08-21T19:14:14Z","updated_at":"2019-08-22T18:48:02Z","closed_at":"2019-08-22T18:48:02Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\n\r\n** Please read the guidelines below. **\r\n\r\nIssues that do not follow these guidelines are likely to be closed.\r\n\r\n1.  GitHub is reserved for bug reports and feature requests. The best place to\r\n    ask a general question is at the Elastic [forums](https://discuss.elastic.co).\r\n    GitHub is not the place for general questions.\r\n\r\n2.  Is this bug report or feature request for a supported OS? If not, it\r\n    is likely to be closed.  See https://www.elastic.co/support/matrix#show_os\r\n\r\n3.  Please fill out EITHER the feature request block or the bug report block\r\n    below, and delete the other block.\r\n\r\n-->\r\n\r\n<!-- Feature request -->\r\n\r\n**Describe the feature**:\r\nPlease add a feature to allow max_map_count to be the system default of 65536 for running single nodes in a Docker Container.  Currently, the only way to run ElasticSearch in a Docker Container is to set the host vm.max_map_count = 262144.  This is impossible (and likely unnecessary) in some environments.\r\n\r\nSonarQube currently uses ElasticSearch, and trying to run it in a container fails at startup if this is not set on the host due to bootstrap checks.  However, once the container is up and running it continues to run fine if the setting on the host is reverted to 65536.\r\n\r\nIf this many map counts are really needed to avoid an out of memory situation, then perhaps another alternative would be to create a new process to handle the extra resource requirement rather than requiring a system wide change.  This seems like a poor practice to require a system wide change (which may negatively impact system stability and security).\r\n\r\n<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`):\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version** (`java -version`):\r\n\r\n**OS version** (`uname -a` if on a Unix-like system):\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\n**Steps to reproduce**:\r\n\r\nPlease include a *minimal* but *complete* recreation of the problem, including\r\n(e.g.) index creation, mappings, settings, query etc.  The easier you make for\r\nus to reproduce it, the more likely that somebody will take the time to look at it.\r\n\r\n 1.\r\n 2.\r\n 3.\r\n\r\n**Provide logs (if relevant)**:\r\n\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}