{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/10152","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10152/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10152/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10152/events","html_url":"https://github.com/elastic/elasticsearch/issues/10152","id":62896349,"node_id":"MDU6SXNzdWU2Mjg5NjM0OQ==","number":10152,"title":"Tribe/Query node doesn't work in pure IPv6 environment","user":{"login":"cheramilm","id":6292105,"node_id":"MDQ6VXNlcjYyOTIxMDU=","avatar_url":"https://avatars3.githubusercontent.com/u/6292105?v=4","gravatar_id":"","url":"https://api.github.com/users/cheramilm","html_url":"https://github.com/cheramilm","followers_url":"https://api.github.com/users/cheramilm/followers","following_url":"https://api.github.com/users/cheramilm/following{/other_user}","gists_url":"https://api.github.com/users/cheramilm/gists{/gist_id}","starred_url":"https://api.github.com/users/cheramilm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cheramilm/subscriptions","organizations_url":"https://api.github.com/users/cheramilm/orgs","repos_url":"https://api.github.com/users/cheramilm/repos","events_url":"https://api.github.com/users/cheramilm/events{/privacy}","received_events_url":"https://api.github.com/users/cheramilm/received_events","type":"User","site_admin":false},"labels":[{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2015-03-19T06:48:52Z","updated_at":"2015-04-26T20:02:07Z","closed_at":"2015-04-26T20:02:06Z","author_association":"NONE","active_lock_reason":null,"body":"In pure IPv6 environment, we configure query node and send query request to query node, and found it  doesn't work and requests finally send to 127.0.0.1, we run the request:\nhttp://masternode:9200/_nodes/is_query:true/settings?pretty\n\nwould return some result like:\n\n```\n{\n  \"cluster_name\": \"ElasticsearchCluster\",\n  \"nodes\": {\n    \"-eddeG7aRtOowARRz-QJRA\": {\n      \"name\": \"ES-QueryNode1/ElasticsearchCluster\",\n      \"transport_address\": \"inet[/fd3e:842e:1c9d:10:0:0:0:1fe%0:9301]\",\n      \"host\": \"Query\",\n      \"ip\": \"127.0.0.1\",\n      \"version\": \"1.3.2\",\n      \"build\": \"dee175d\",\n      \"attributes\": {\n        \"client\": \"true\",\n        \"is_query\": \"true\",\n        \"data\": \"false\",\n        \"is_index\": \"false\"\n      },\n      \"settings\": {\n        \"node\": {\n          \"client\": \"true\",\n          \"is_query\": \"true\",\n          \"is_index\": \"false\",\n          \"name\": \"ES-QueryNode1/ElasticsearchCluster\"\n        },\n        \"bootstrap\": {\n          \"mlockall\": \"true\"\n        },\n        \"http\": {\n          \"enabled\": \"false\",\n          \"netty\": {\n            \"maxInitialLineLength\": \"65536\"\n          }\n        },\n        \"tribe\": {\n          \"name\": \"ElasticsearchCluster\"\n        },\n        \"name\": \"ES-QueryNode1/ElasticsearchCluster\",\n        \"path\": {\n          \"data\": \"\\\\xxxx\\\\data\",\n          \"work\": \"\\\\xxxx\\\\elasticsearch-1.3.2\",\n          \"home\": \"\\\\xxxx\\\\elasticsearch-1.3.2\",\n          \"conf\": \"\\\\xxxx\\\\elasticsearch-1.3.2\\\\config\",\n          \"logs\": \"\\\\xxxxelasticsearch-1.3.2/logs\"\n        },\n        \"config\": \"\\\\xxxx\\\\elasticsearch-1.3.2\\\\config\\\\elasticsearch.yml\",\n        \"cluster\": {\n          \"name\": \"ElasticsearchCluster\"\n        },\n        \"discovery\": {\n          \"zen\": {\n            \"ping\": {\n              \"unicast\": {\n                \"hosts\": \"masternode:9300\"\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nPlease notice the line \"ip\" : \"127.0.0.1\",\n\nIf we setup such ES cluster in IPv4 environment, and run same request:\n\n```\n{\n  \"cluster_name\": \"ElasticsearchCluster\",\n  \"nodes\": {\n    \"3lmWVMs1T_upCWAFHOxS-w\": {\n      \"name\": \"ES-QueryNode1/ElasticsearchCluster\",\n      \"transport_address\": \"inet[/192.168.1.66:9302]\",\n      \"host\": \"Instance2\",\n      \"ip\": \"192.168.1.66\",\n      \"version\": \"1.3.2\",\n      \"build\": \"dee175d\",\n      \"attributes\": {\n        \"client\": \"true\",\n        \"is_query\": \"true\",\n        \"data\": \"false\",\n        \"master\": \"false\"\n      },\n      \"settings\": {\n        \"path\": {\n          \"logs\": \"C:/elasticsearch-1.3.2 Tribe/logs\",\n          \"home\": \"C:\\\\elasticsearch-1.3.2 Tribe\"\n        },\n        \"cluster\": {\n          \"name\": \"ElasticsearchCluster\"\n        },\n        \"node\": {\n          \"data\": \"false\",\n          \"client\": \"true\",\n          \"is_query\": \"true\",\n          \"master\": \"false\",\n          \"name\": \"ES-QueryNode1/ElasticsearchCluster\"\n        },\n        \"http\": {\n          \"enabled\": \"false\"\n        },\n        \"discovery\": {\n          \"zen\": {\n            \"ping\": {\n              \"unicast\": {\n                \"hosts\": [\n                  \"masternode:9300\"\n                ]\n              }\n            }\n          }\n        },\n        \"tribe\": {\n          \"name\": \"ElasticsearchCluster\"\n        },\n        \"name\": \"ES-QueryNode1/ElasticsearchCluster\"\n      }\n    }\n  }\n}\n```\n\nWe can get correct IP: \n\"ip\" : \"192.168.1.66\",\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}