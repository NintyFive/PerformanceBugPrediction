[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/392512071","html_url":"https://github.com/elastic/elasticsearch/issues/30904#issuecomment-392512071","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30904","id":392512071,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjUxMjA3MQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-05-28T12:18:42Z","updated_at":"2018-05-28T12:18:42Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/401033984","html_url":"https://github.com/elastic/elasticsearch/issues/30904#issuecomment-401033984","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30904","id":401033984,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMTAzMzk4NA==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2018-06-28T13:26:58Z","updated_at":"2018-06-28T13:26:58Z","author_association":"CONTRIBUTOR","body":"Another possibly interesting use-case of managing the clusters in this way is that we might fingerprint the config (distro, plugins, config etc ) and instead of spinning one up for each test, clean up and re-use running instances. \r\n@rjernst @nik9000  do you see that as a possibility ? Will the overlap be significant ? How concerned are we about cross talk between test ? We could have some similar logging to tests per JVM, forcing the same grouping of tests per cluster for reproducibility  will require more thinking, but i's not impossible to implement.   I'm also not sure what the potential saving is, i.e. how much time is spent to start up and wait for clusters and how many times we do so in a build.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/401205651","html_url":"https://github.com/elastic/elasticsearch/issues/30904#issuecomment-401205651","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30904","id":401205651,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMTIwNTY1MQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2018-06-28T23:45:44Z","updated_at":"2018-06-28T23:45:44Z","author_association":"MEMBER","body":"I don't think we have the exact same config often enough, nor do I think the potential savings would be worth the headache of non-reproducibility (ie if the cluster is altered in some way by a different test runner that has a side affect on later tests run).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/405244053","html_url":"https://github.com/elastic/elasticsearch/issues/30904#issuecomment-405244053","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30904","id":405244053,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNTI0NDA1Mw==","user":{"login":"davidkyle","id":2353640,"node_id":"MDQ6VXNlcjIzNTM2NDA=","avatar_url":"https://avatars1.githubusercontent.com/u/2353640?v=4","gravatar_id":"","url":"https://api.github.com/users/davidkyle","html_url":"https://github.com/davidkyle","followers_url":"https://api.github.com/users/davidkyle/followers","following_url":"https://api.github.com/users/davidkyle/following{/other_user}","gists_url":"https://api.github.com/users/davidkyle/gists{/gist_id}","starred_url":"https://api.github.com/users/davidkyle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidkyle/subscriptions","organizations_url":"https://api.github.com/users/davidkyle/orgs","repos_url":"https://api.github.com/users/davidkyle/repos","events_url":"https://api.github.com/users/davidkyle/events{/privacy}","received_events_url":"https://api.github.com/users/davidkyle/received_events","type":"User","site_admin":false},"created_at":"2018-07-16T13:17:37Z","updated_at":"2018-07-16T13:17:37Z","author_association":"MEMBER","body":"It is desirable to have the ability to configure individual nodes in a cluster with node specific settings. For example, given a 3 node cluster the ability to enable machine learning (`node.ml: true`) on a subset of those nodes would cover test cases that are not possible or easily achievable at the moment due to the fact that all nodes on the cluster have the same configuration. Ideally the config could be randomised (1, 2 or 3 of the nodes are ML nodes, the master node is not an ML node, etc) and the specific configuration would be reproducible from the test seed. This would cover a particular class of bugs we have seen in ML and make intermittent test failures more reproducible.\r\n\r\nI would imagine this ability is also useful for testing ingest nodes, dedicated masters and data only nodes.  @atorok can you please consider this request when designing the DSL","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/405462213","html_url":"https://github.com/elastic/elasticsearch/issues/30904#issuecomment-405462213","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30904","id":405462213,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNTQ2MjIxMw==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2018-07-17T05:17:05Z","updated_at":"2018-07-17T05:17:05Z","author_association":"CONTRIBUTOR","body":"@davidkyle I am considering this. I'm focusing on single node cluster first, but I see multi node as a composite, so the DSL could be applied both to cluster level for common config, and node level for customization in a similar manner. I think that will address the needs you describe.  Randomization support in the build is a different topic orthogonal to cluster formation. I can imagine other uses for it, and I think it would be useful to add  support for it at some point. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/519107084","html_url":"https://github.com/elastic/elasticsearch/issues/30904#issuecomment-519107084","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30904","id":519107084,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTEwNzA4NA==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-08-07T13:52:03Z","updated_at":"2019-08-07T13:52:03Z","author_association":"CONTRIBUTOR","body":"We now have the `elasticsearch.testclusters` plugin to achieve this. \r\nThere's no DSL to expose per node configuration yet, but nodes can be individually configured in the internals it's just a matter of exposing that. ","performed_via_github_app":null}]