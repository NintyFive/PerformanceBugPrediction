[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17233323","html_url":"https://github.com/elastic/elasticsearch/issues/2956#issuecomment-17233323","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2956","id":17233323,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MjMzMzIz","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2013-04-30T15:12:38Z","updated_at":"2013-04-30T15:12:38Z","author_association":"CONTRIBUTOR","body":"Hi @Lothiraldan \n\nHow many nodes are you using for this test?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17325437","html_url":"https://github.com/elastic/elasticsearch/issues/2956#issuecomment-17325437","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2956","id":17325437,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MzI1NDM3","user":{"login":"Lothiraldan","id":243665,"node_id":"MDQ6VXNlcjI0MzY2NQ==","avatar_url":"https://avatars2.githubusercontent.com/u/243665?v=4","gravatar_id":"","url":"https://api.github.com/users/Lothiraldan","html_url":"https://github.com/Lothiraldan","followers_url":"https://api.github.com/users/Lothiraldan/followers","following_url":"https://api.github.com/users/Lothiraldan/following{/other_user}","gists_url":"https://api.github.com/users/Lothiraldan/gists{/gist_id}","starred_url":"https://api.github.com/users/Lothiraldan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Lothiraldan/subscriptions","organizations_url":"https://api.github.com/users/Lothiraldan/orgs","repos_url":"https://api.github.com/users/Lothiraldan/repos","events_url":"https://api.github.com/users/Lothiraldan/events{/privacy}","received_events_url":"https://api.github.com/users/Lothiraldan/received_events","type":"User","site_admin":false},"created_at":"2013-05-02T08:09:41Z","updated_at":"2013-05-02T08:09:41Z","author_association":"NONE","body":"Only one,\nI forget to give my configuration, here is: https://novapaste.novapost.net/paste/0a71c83787a62ad1ceb439b279f933b704cc4faa#vFtrtEWk5oA9Yn0r7MLcTRYIrybPAHNZR4vSIB5/JnY=\n\nDuring my tests, I erase all indexes before launching them (with curl -XDELETE http://localhost:9200/_all).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17394147","html_url":"https://github.com/elastic/elasticsearch/issues/2956#issuecomment-17394147","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2956","id":17394147,"node_id":"MDEyOklzc3VlQ29tbWVudDE3Mzk0MTQ3","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2013-05-03T13:33:26Z","updated_at":"2013-05-03T13:33:26Z","author_association":"MEMBER","body":"Hey,\n\nthe link you supplied in your last comment, is 404. I'll try to reproduce this behaviour, so any bit of information is helpful.\n\nThanks a lot for reporting! I might come back with a few more questions.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17400526","html_url":"https://github.com/elastic/elasticsearch/issues/2956#issuecomment-17400526","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2956","id":17400526,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NDAwNTI2","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2013-05-03T15:27:38Z","updated_at":"2013-05-03T15:27:38Z","author_association":"MEMBER","body":"I cannot reproduce this issue with your minimum sample above, I always get back the test1.2 alias in the last two lines as expected.\n\nCan you provide some more information (especially your configuration). Just for complete reference (and to get other people to reproduce it). What JVM version are you running 0.90 on, and on what operating system?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17470575","html_url":"https://github.com/elastic/elasticsearch/issues/2956#issuecomment-17470575","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2956","id":17470575,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NDcwNTc1","user":{"login":"Lothiraldan","id":243665,"node_id":"MDQ6VXNlcjI0MzY2NQ==","avatar_url":"https://avatars2.githubusercontent.com/u/243665?v=4","gravatar_id":"","url":"https://api.github.com/users/Lothiraldan","html_url":"https://github.com/Lothiraldan","followers_url":"https://api.github.com/users/Lothiraldan/followers","following_url":"https://api.github.com/users/Lothiraldan/following{/other_user}","gists_url":"https://api.github.com/users/Lothiraldan/gists{/gist_id}","starred_url":"https://api.github.com/users/Lothiraldan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Lothiraldan/subscriptions","organizations_url":"https://api.github.com/users/Lothiraldan/orgs","repos_url":"https://api.github.com/users/Lothiraldan/repos","events_url":"https://api.github.com/users/Lothiraldan/events{/privacy}","received_events_url":"https://api.github.com/users/Lothiraldan/received_events","type":"User","site_admin":false},"created_at":"2013-05-06T08:12:47Z","updated_at":"2013-05-06T08:12:47Z","author_association":"NONE","body":"Hi, sorry here is my configuration: https://novapaste.novapost.net/paste/d8f1d7974c287eff9c401d5d602c1c8818fde322#oJT1FtxNUuLYh2ke+hwF3BN5Ru5XtcJ3ovouRKnpy1k=\n\nI'm running elastic search on debian wheezy using this java version:\n    java -version\n    java version \"1.6.0_27\"\n    OpenJDK Runtime Environment (IcedTea6 1.12.4) (6b27-1.12.4-1)\n    OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode)\n\nI tried on a fresh installation on an amazon ec2 instance but didn't remember with which jvm with the same result. I can retry if needed.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17715572","html_url":"https://github.com/elastic/elasticsearch/issues/2956#issuecomment-17715572","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2956","id":17715572,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NzE1NTcy","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2013-05-10T11:27:52Z","updated_at":"2013-05-10T11:27:52Z","author_association":"MEMBER","body":"Tried to reproduce it with your configuration settings, no luck so far. Neither on mac os X nor on a virtualized ubuntu (using also an icedtea openjdk distribution with the same java version).\n\nCan you reproduce it in a stable manner on ec2 or your local system?\n\nRunning out of ideas how to reproduce at the moment...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17865176","html_url":"https://github.com/elastic/elasticsearch/issues/2956#issuecomment-17865176","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2956","id":17865176,"node_id":"MDEyOklzc3VlQ29tbWVudDE3ODY1MTc2","user":{"login":"Lothiraldan","id":243665,"node_id":"MDQ6VXNlcjI0MzY2NQ==","avatar_url":"https://avatars2.githubusercontent.com/u/243665?v=4","gravatar_id":"","url":"https://api.github.com/users/Lothiraldan","html_url":"https://github.com/Lothiraldan","followers_url":"https://api.github.com/users/Lothiraldan/followers","following_url":"https://api.github.com/users/Lothiraldan/following{/other_user}","gists_url":"https://api.github.com/users/Lothiraldan/gists{/gist_id}","starred_url":"https://api.github.com/users/Lothiraldan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Lothiraldan/subscriptions","organizations_url":"https://api.github.com/users/Lothiraldan/orgs","repos_url":"https://api.github.com/users/Lothiraldan/repos","events_url":"https://api.github.com/users/Lothiraldan/events{/privacy}","received_events_url":"https://api.github.com/users/Lothiraldan/received_events","type":"User","site_admin":false},"created_at":"2013-05-14T09:16:21Z","updated_at":"2013-05-14T09:16:21Z","author_association":"NONE","body":"Ok will try to reproduce it on ec2 this week.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18485450","html_url":"https://github.com/elastic/elasticsearch/issues/2956#issuecomment-18485450","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2956","id":18485450,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDg1NDUw","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2013-05-27T07:14:11Z","updated_at":"2013-05-27T07:14:11Z","author_association":"MEMBER","body":"Hey,\n\ndid you have any chance to reproduce this? I really want to make sure we dont have an issue here as this is important functionality, so sorry for bugging you :-)\n\nThanks!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18907847","html_url":"https://github.com/elastic/elasticsearch/issues/2956#issuecomment-18907847","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2956","id":18907847,"node_id":"MDEyOklzc3VlQ29tbWVudDE4OTA3ODQ3","user":{"login":"Lothiraldan","id":243665,"node_id":"MDQ6VXNlcjI0MzY2NQ==","avatar_url":"https://avatars2.githubusercontent.com/u/243665?v=4","gravatar_id":"","url":"https://api.github.com/users/Lothiraldan","html_url":"https://github.com/Lothiraldan","followers_url":"https://api.github.com/users/Lothiraldan/followers","following_url":"https://api.github.com/users/Lothiraldan/following{/other_user}","gists_url":"https://api.github.com/users/Lothiraldan/gists{/gist_id}","starred_url":"https://api.github.com/users/Lothiraldan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Lothiraldan/subscriptions","organizations_url":"https://api.github.com/users/Lothiraldan/orgs","repos_url":"https://api.github.com/users/Lothiraldan/repos","events_url":"https://api.github.com/users/Lothiraldan/events{/privacy}","received_events_url":"https://api.github.com/users/Lothiraldan/received_events","type":"User","site_admin":false},"created_at":"2013-06-04T13:13:48Z","updated_at":"2013-06-04T13:14:53Z","author_association":"NONE","body":"Hi @spinscale, I just tried on a raw ec2 instance and I can reproduce. Steps to reproduce:\n- Start an ec2 instance with ubuntu 12.04 LTS\n- wget https://download.elasticsearch.org/elasticsearch/elasticsearch/elasticsearch-0.90.1.deb\n- sudo dpkg -i elasticsearch-0.90.1.deb\n- sudo apt-get update\n- sudo apt-get install -f\n- touch test.sh\n- nano test.sh\n- bash test.sh\n\nThe java version installed was openjdk 7u21.\n\nOddly, my tests didn't fail anymore on my local environment with latest release. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19038873","html_url":"https://github.com/elastic/elasticsearch/issues/2956#issuecomment-19038873","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2956","id":19038873,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MDM4ODcz","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2013-06-06T11:20:39Z","updated_at":"2013-06-06T12:27:27Z","author_association":"MEMBER","body":"hey,\n\nI was finally able to reproduce this on a virtualbox based VM locally as well. It fails about 20% of the time (sometimes twenty test runs it is working fine, pretty hard to debug). I will try to isolate this (JDK version, some OS setup) a bit more.\n\nThanks a lot for your work and help so far!\nIf you have any more indicating ideas, I am also really happy to hear them :-)\n\n**Update**: This breaks on my ubuntu VM with openjdk7, oracle java 6 and oracle java 7 - so I'll exclude JVM as a problem for now.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19042827","html_url":"https://github.com/elastic/elasticsearch/issues/2956#issuecomment-19042827","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2956","id":19042827,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MDQyODI3","user":{"login":"Lothiraldan","id":243665,"node_id":"MDQ6VXNlcjI0MzY2NQ==","avatar_url":"https://avatars2.githubusercontent.com/u/243665?v=4","gravatar_id":"","url":"https://api.github.com/users/Lothiraldan","html_url":"https://github.com/Lothiraldan","followers_url":"https://api.github.com/users/Lothiraldan/followers","following_url":"https://api.github.com/users/Lothiraldan/following{/other_user}","gists_url":"https://api.github.com/users/Lothiraldan/gists{/gist_id}","starred_url":"https://api.github.com/users/Lothiraldan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Lothiraldan/subscriptions","organizations_url":"https://api.github.com/users/Lothiraldan/orgs","repos_url":"https://api.github.com/users/Lothiraldan/repos","events_url":"https://api.github.com/users/Lothiraldan/events{/privacy}","received_events_url":"https://api.github.com/users/Lothiraldan/received_events","type":"User","site_admin":false},"created_at":"2013-06-06T12:51:49Z","updated_at":"2013-06-06T12:51:49Z","author_association":"NONE","body":"Cool, I just rerun my tests, I was on the bad branch. They continue to fail with 0.90.1. I hope you will found the problem, we would like to give a try to 0.90.X branch.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19046652","html_url":"https://github.com/elastic/elasticsearch/issues/2956#issuecomment-19046652","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2956","id":19046652,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MDQ2NjUy","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2013-06-06T13:58:14Z","updated_at":"2013-06-06T13:58:14Z","author_association":"MEMBER","body":"I think I found the issue. And it is luckily not a bug, but rather again I overlooked coping with the async nature of elasticsearch. So here is what happens (with your current sample).\n- test.1.1 gets created, aliases added\n- status read, everything fine\n- test.1.2 gets created\n- aliases get added, but here the adding of an alias does not work, because the shards are still in `INITIALIZING` state, instead of being in `STARTED` state. So adding the alias fails.\n\nThe solution is simple, just wait for the cluster state to jump to yellow after creating the index and before creating the aliases and you are safe\n\n```\ncurl -XGET 'http://localhost:9200/_cluster/health?wait_for_status=yellow'\n```\n\nI ran the script above with the line above added after the indices are created and I didnt get any errors when running it 2000 times in the VM.\n\nNow the answer why this happens merely on virtualized machines is also pretty easy. They're way slower (the reason I couldnt reproduce it on my workstation I guess).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19054151","html_url":"https://github.com/elastic/elasticsearch/issues/2956#issuecomment-19054151","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2956","id":19054151,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MDU0MTUx","user":{"login":"Lothiraldan","id":243665,"node_id":"MDQ6VXNlcjI0MzY2NQ==","avatar_url":"https://avatars2.githubusercontent.com/u/243665?v=4","gravatar_id":"","url":"https://api.github.com/users/Lothiraldan","html_url":"https://github.com/Lothiraldan","followers_url":"https://api.github.com/users/Lothiraldan/followers","following_url":"https://api.github.com/users/Lothiraldan/following{/other_user}","gists_url":"https://api.github.com/users/Lothiraldan/gists{/gist_id}","starred_url":"https://api.github.com/users/Lothiraldan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Lothiraldan/subscriptions","organizations_url":"https://api.github.com/users/Lothiraldan/orgs","repos_url":"https://api.github.com/users/Lothiraldan/repos","events_url":"https://api.github.com/users/Lothiraldan/events{/privacy}","received_events_url":"https://api.github.com/users/Lothiraldan/received_events","type":"User","site_admin":false},"created_at":"2013-06-06T15:42:40Z","updated_at":"2013-06-06T15:42:40Z","author_association":"NONE","body":"Ok, get it.\n\nBut why curl -i -XPOST 'http://localhost:9200/_aliases' -d '...' returns a 200 code if alias adding fails? Shouldn't we get a 503 status code with Retry-After header?\n\n```\n503 Service Unavailable\n\nThe server is currently unable to handle the request due to a temporary\noverloading or maintenance of the server. The implication is that this\nis a temporary condition which will be alleviated after some delay. If\nknown, the length of the delay MAY be indicated in a Retry-After header.\nIf no Retry-After is given, the client SHOULD handle the response as it\nwould for a 500 response.\n\nNote: The existence of the 503 status code does not imply that a\nserver must use it when becoming overloaded. Some servers may wish\nto simply refuse the connection.\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19054686","html_url":"https://github.com/elastic/elasticsearch/issues/2956#issuecomment-19054686","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2956","id":19054686,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MDU0Njg2","user":{"login":"Lothiraldan","id":243665,"node_id":"MDQ6VXNlcjI0MzY2NQ==","avatar_url":"https://avatars2.githubusercontent.com/u/243665?v=4","gravatar_id":"","url":"https://api.github.com/users/Lothiraldan","html_url":"https://github.com/Lothiraldan","followers_url":"https://api.github.com/users/Lothiraldan/followers","following_url":"https://api.github.com/users/Lothiraldan/following{/other_user}","gists_url":"https://api.github.com/users/Lothiraldan/gists{/gist_id}","starred_url":"https://api.github.com/users/Lothiraldan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Lothiraldan/subscriptions","organizations_url":"https://api.github.com/users/Lothiraldan/orgs","repos_url":"https://api.github.com/users/Lothiraldan/repos","events_url":"https://api.github.com/users/Lothiraldan/events{/privacy}","received_events_url":"https://api.github.com/users/Lothiraldan/received_events","type":"User","site_admin":false},"created_at":"2013-06-06T15:49:46Z","updated_at":"2013-06-06T15:49:46Z","author_association":"NONE","body":"I just retried with the 0.20.6 release, I added the current line before creating the second couple of aliases:\n\n```\ncurl -XGET 'http://localhost:9200/_cluster/health'\n```\n\nIt show that cluster state is also red but so why alias adding works ? What changed between 0.20.6 and 0.90. Was the alias adding command waiting for cluster state changes to yellow?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19058399","html_url":"https://github.com/elastic/elasticsearch/issues/2956#issuecomment-19058399","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2956","id":19058399,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MDU4Mzk5","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2013-06-06T16:49:12Z","updated_at":"2013-06-06T16:49:12Z","author_association":"MEMBER","body":"We talked about this issue internally a bit and came to the conclusion that adding aliases should work, even if the shards of an index are not yet marked as `STARTED` (because everything for adding is existent). We will need to investigate this further in order to be sure what happened.\n\nIn the meantime I hope you have at least a solution to work with.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19197134","html_url":"https://github.com/elastic/elasticsearch/issues/2956#issuecomment-19197134","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2956","id":19197134,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTk3MTM0","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2013-06-10T13:06:28Z","updated_at":"2013-06-10T13:06:28Z","author_association":"MEMBER","body":"Hey, after spending some more time (and help) I think I found the issue - and the reason you are seing this on 0.90 only, even though it already existed in 0.20.\n\nIf you want to reproduce it more easily, just create an index with one hundred or more shards.\n\nThis is what happens\n- You are creating an index, adding the aliases\n- The aliases are added, regardless of the status of the index (can be red as well as in your case)\n- You call the _status api - the status API return this\n\n```\n{\"ok\":true,\"_shards\":{\"total\":100,\"successful\":0,\"failed\":0},\"indices\":{}}\n```\n- As you can see, the shards are not yet allocated at all and therefore no indices are linked to it\n\nPossible workaround in order to be sure that the aliases have been added without relying that the indices are in an operational state is to check the cluster state API:\n\n```\ncurl -s 'localhost:9200/_cluster/state?pretty' | python -c \"import json; import sys; x = json.load(sys.stdin); print x['metadata']['indices']['test.1.2']['aliases']\"\n```\n\nThe reason for this to happen merely in 0.90 is most likely compared to 0.20 is the introduction of throttling, which slows down index creation.\n\nHope this helps :-)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19743793","html_url":"https://github.com/elastic/elasticsearch/issues/2956#issuecomment-19743793","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2956","id":19743793,"node_id":"MDEyOklzc3VlQ29tbWVudDE5NzQzNzkz","user":{"login":"nonflet","id":3763784,"node_id":"MDQ6VXNlcjM3NjM3ODQ=","avatar_url":"https://avatars1.githubusercontent.com/u/3763784?v=4","gravatar_id":"","url":"https://api.github.com/users/nonflet","html_url":"https://github.com/nonflet","followers_url":"https://api.github.com/users/nonflet/followers","following_url":"https://api.github.com/users/nonflet/following{/other_user}","gists_url":"https://api.github.com/users/nonflet/gists{/gist_id}","starred_url":"https://api.github.com/users/nonflet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nonflet/subscriptions","organizations_url":"https://api.github.com/users/nonflet/orgs","repos_url":"https://api.github.com/users/nonflet/repos","events_url":"https://api.github.com/users/nonflet/events{/privacy}","received_events_url":"https://api.github.com/users/nonflet/received_events","type":"User","site_admin":false},"created_at":"2013-06-20T10:43:21Z","updated_at":"2013-06-20T10:43:21Z","author_association":"NONE","body":"Hey everybody !\nSo, what's the fix for this bug now ? Using 0.20 ? Or 0.19 ? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19904996","html_url":"https://github.com/elastic/elasticsearch/issues/2956#issuecomment-19904996","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2956","id":19904996,"node_id":"MDEyOklzc3VlQ29tbWVudDE5OTA0OTk2","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2013-06-24T12:56:58Z","updated_at":"2013-06-24T12:56:58Z","author_association":"MEMBER","body":"Hey,\n\nsorry for not being clear enough in the first case. I try to explain better. First, this is not a bug and has always been handled the same, no matter in which elasticsearch version.\n\nThe reason why this occurs is the following:\n- An index gets created, but is not yet ready to index data\n- Because it is not yet ready, there is no `/_status` information for this index provided\n- When an alias is added, the cluster state gets updated. This happens totally independent from the creation of the index and the state the index is in\n- As soon as it is ready, the `/_status` API can be called and contains all information\n- If an alias has been added, but the index is still not ready (because not all primary shards have been initialized yet), the `/_status` will still not show the alias (even the if is there)\n\nConsider the `/_status` API for an index only valid if the index is ready to index data\n\nIn short: If you need to have information about aliases, regardless if they can be used, consider using the cluster state API, otherwise use the index status API.\n\nI hope it is clear now, otherwise, feel free to ask further questions and I'll try to explain better.\n","performed_via_github_app":null}]