[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/418358415","html_url":"https://github.com/elastic/elasticsearch/issues/33379#issuecomment-418358415","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33379","id":418358415,"node_id":"MDEyOklzc3VlQ29tbWVudDQxODM1ODQxNQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-09-04T13:02:32Z","updated_at":"2018-09-04T13:02:32Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/418646702","html_url":"https://github.com/elastic/elasticsearch/issues/33379#issuecomment-418646702","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33379","id":418646702,"node_id":"MDEyOklzc3VlQ29tbWVudDQxODY0NjcwMg==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2018-09-05T08:34:11Z","updated_at":"2018-09-05T08:34:11Z","author_association":"MEMBER","body":"@dnhatn I'm removing this test in #33367 as it is no longer possible to use the follow api without the create_and_follow api creating the follow index (this api adds custom index metadata).\r\n\r\nAlso I think that this should be tested in a unit test only and that already has been done in `FollowIndexActionTests`. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/418651167","html_url":"https://github.com/elastic/elasticsearch/issues/33379#issuecomment-418651167","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33379","id":418651167,"node_id":"MDEyOklzc3VlQ29tbWVudDQxODY1MTE2Nw==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2018-09-05T08:49:14Z","updated_at":"2018-09-05T08:49:14Z","author_association":"MEMBER","body":"I think the reason that this test failed is because not all leader shard copies were ready and the test does not wait for all leader shard copies to be ready before executing the follow api.\r\n\r\n```\r\n 2.29s J1 | ShardChangesIT.testValidateFollowingIndexSettings <<< FAILURES!\r\n   > Throwable #1: java.lang.IllegalArgumentException: Not all copies of follow shard are started\r\n   >    at org.elasticsearch.xpack.ccr.action.ShardFollowTasksExecutor.validate(ShardFollowTasksExecutor.java:77)\r\n   >    at org.elasticsearch.xpack.ccr.action.ShardFollowTasksExecutor.validate(ShardFollowTasksExecutor.java:53)\r\n   >    at org.elasticsearch.persistent.PersistentTasksClusterService$1.execute(PersistentTasksClusterService.java:77)\r\n   >    at org.elasticsearch.cluster.ClusterStateUpdateTask.execute(ClusterStateUpdateTask.java:45)\r\n   >    at org.elasticsearch.cluster.service.MasterService.executeTasks(MasterService.java:639)\r\n   >    at org.elasticsearch.cluster.service.MasterService.calculateTaskOutputs(MasterService.java:268)\r\n   >    at org.elasticsearch.cluster.service.MasterService.runTasks(MasterService.java:198)\r\n   >    at org.elasticsearch.cluster.service.MasterService$Batcher.run(MasterService.java:133)\r\n   >    at org.elasticsearch.cluster.service.TaskBatcher.runIfNotProcessed(TaskBatcher.java:150)\r\n   >    at org.elasticsearch.cluster.service.TaskBatcher$BatchedTask.run(TaskBatcher.java:188)\r\n   >    at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:624)\r\n   >    at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.runAndClean(PrioritizedEsThreadPoolExecutor.java:244)\r\n   >    at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:207)\r\n   >    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n   >    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/421330698","html_url":"https://github.com/elastic/elasticsearch/issues/33379#issuecomment-421330698","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33379","id":421330698,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMTMzMDY5OA==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2018-09-14T11:30:17Z","updated_at":"2018-09-14T11:30:17Z","author_association":"MEMBER","body":"This test no longer exists.","performed_via_github_app":null}]