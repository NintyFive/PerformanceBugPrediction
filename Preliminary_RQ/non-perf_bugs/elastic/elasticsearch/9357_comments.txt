[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/70589956","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-70589956","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":70589956,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTg5OTU2","user":{"login":"drewr","id":6202,"node_id":"MDQ6VXNlcjYyMDI=","avatar_url":"https://avatars3.githubusercontent.com/u/6202?v=4","gravatar_id":"","url":"https://api.github.com/users/drewr","html_url":"https://github.com/drewr","followers_url":"https://api.github.com/users/drewr/followers","following_url":"https://api.github.com/users/drewr/following{/other_user}","gists_url":"https://api.github.com/users/drewr/gists{/gist_id}","starred_url":"https://api.github.com/users/drewr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drewr/subscriptions","organizations_url":"https://api.github.com/users/drewr/orgs","repos_url":"https://api.github.com/users/drewr/repos","events_url":"https://api.github.com/users/drewr/events{/privacy}","received_events_url":"https://api.github.com/users/drewr/received_events","type":"User","site_admin":false},"created_at":"2015-01-20T01:25:26Z","updated_at":"2015-01-20T01:25:26Z","author_association":"MEMBER","body":"This can happen if the user starting ES doesn't have permission to lock the address space.  In the parent environment root must have set `ulimit -l unlimited` before `exec`ing Java.\n\nIs this with the RPM?  With sysvinit or systemd?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/70590149","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-70590149","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":70590149,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTkwMTQ5","user":{"login":"markwalkom","id":3184718,"node_id":"MDQ6VXNlcjMxODQ3MTg=","avatar_url":"https://avatars0.githubusercontent.com/u/3184718?v=4","gravatar_id":"","url":"https://api.github.com/users/markwalkom","html_url":"https://github.com/markwalkom","followers_url":"https://api.github.com/users/markwalkom/followers","following_url":"https://api.github.com/users/markwalkom/following{/other_user}","gists_url":"https://api.github.com/users/markwalkom/gists{/gist_id}","starred_url":"https://api.github.com/users/markwalkom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markwalkom/subscriptions","organizations_url":"https://api.github.com/users/markwalkom/orgs","repos_url":"https://api.github.com/users/markwalkom/repos","events_url":"https://api.github.com/users/markwalkom/events{/privacy}","received_events_url":"https://api.github.com/users/markwalkom/received_events","type":"User","site_admin":false},"created_at":"2015-01-20T01:27:43Z","updated_at":"2015-01-20T01:27:43Z","author_association":"MEMBER","body":"This is a default install from repo, so RPM and sysvinit.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/70590934","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-70590934","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":70590934,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTkwOTM0","user":{"login":"markwalkom","id":3184718,"node_id":"MDQ6VXNlcjMxODQ3MTg=","avatar_url":"https://avatars0.githubusercontent.com/u/3184718?v=4","gravatar_id":"","url":"https://api.github.com/users/markwalkom","html_url":"https://github.com/markwalkom","followers_url":"https://api.github.com/users/markwalkom/followers","following_url":"https://api.github.com/users/markwalkom/following{/other_user}","gists_url":"https://api.github.com/users/markwalkom/gists{/gist_id}","starred_url":"https://api.github.com/users/markwalkom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markwalkom/subscriptions","organizations_url":"https://api.github.com/users/markwalkom/orgs","repos_url":"https://api.github.com/users/markwalkom/repos","events_url":"https://api.github.com/users/markwalkom/events{/privacy}","received_events_url":"https://api.github.com/users/markwalkom/received_events","type":"User","site_admin":false},"created_at":"2015-01-20T01:36:14Z","updated_at":"2015-01-20T01:36:43Z","author_association":"MEMBER","body":"Looks like it uses systemd.\n\n@masaruh pointed out that you can edit `/usr/lib/systemd/system/elasticsearch.service` and set;\n\n```\nLimitMEMLOCK=infinity\n```\n\nThen;\n\n```\nsystemctl daemon-reload\nservice elasticsearch restart\n```\n\nThat gives;\n\n```\n# curl -s localhost:9200/_nodes?pretty|grep mlock\n          \"mlockall\" : \"true\"\n        \"mlockall\" : true\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/70591784","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-70591784","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":70591784,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTkxNzg0","user":{"login":"markwalkom","id":3184718,"node_id":"MDQ6VXNlcjMxODQ3MTg=","avatar_url":"https://avatars0.githubusercontent.com/u/3184718?v=4","gravatar_id":"","url":"https://api.github.com/users/markwalkom","html_url":"https://github.com/markwalkom","followers_url":"https://api.github.com/users/markwalkom/followers","following_url":"https://api.github.com/users/markwalkom/following{/other_user}","gists_url":"https://api.github.com/users/markwalkom/gists{/gist_id}","starred_url":"https://api.github.com/users/markwalkom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markwalkom/subscriptions","organizations_url":"https://api.github.com/users/markwalkom/orgs","repos_url":"https://api.github.com/users/markwalkom/repos","events_url":"https://api.github.com/users/markwalkom/events{/privacy}","received_events_url":"https://api.github.com/users/markwalkom/received_events","type":"User","site_admin":false},"created_at":"2015-01-20T01:46:33Z","updated_at":"2015-01-20T01:46:33Z","author_association":"MEMBER","body":"Looks like we need to correctly set this via systemd, which is the default as of RHEL/CentOS 7.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/89336411","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-89336411","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":89336411,"node_id":"MDEyOklzc3VlQ29tbWVudDg5MzM2NDEx","user":{"login":"rsareth","id":4334697,"node_id":"MDQ6VXNlcjQzMzQ2OTc=","avatar_url":"https://avatars3.githubusercontent.com/u/4334697?v=4","gravatar_id":"","url":"https://api.github.com/users/rsareth","html_url":"https://github.com/rsareth","followers_url":"https://api.github.com/users/rsareth/followers","following_url":"https://api.github.com/users/rsareth/following{/other_user}","gists_url":"https://api.github.com/users/rsareth/gists{/gist_id}","starred_url":"https://api.github.com/users/rsareth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rsareth/subscriptions","organizations_url":"https://api.github.com/users/rsareth/orgs","repos_url":"https://api.github.com/users/rsareth/repos","events_url":"https://api.github.com/users/rsareth/events{/privacy}","received_events_url":"https://api.github.com/users/rsareth/received_events","type":"User","site_admin":false},"created_at":"2015-04-03T15:56:20Z","updated_at":"2015-04-03T16:01:47Z","author_association":"NONE","body":"Hi,\n\nI'm using the elasticsearch-1.4.2 RPM package and I'm dealing with the same problem on redhat-6.3 x86_64 / vmware vm with this version of java : \n\n> java version \"1.7.0_71\"\n> OpenJDK Runtime Environment (rhel-2.5.3.1.el5_11-x86_64 u71-b14)\n> OpenJDK 64-Bit Server VM (build 24.65-b04, mixed mode)\n\nI've changed the property LimitMEMLOCK /usr/lib/systemd/system/elasticsearch.service hoping it would've worked. No effect as espected :-( \n\nAnd this line in the log that I don't understand : \n\n> [2015-04-03 17:22:28,827][WARN ][common.jna               ] unable to link C library. native methods (mlockall) will be disabled.\n\nThe jna.jar is present :-|\n\nAnd I don't know how to make the OS using the LimitMEMLOCK parameter.\n\nWhat's very weird : \n- on manual installation (elasticsearch-1.4.4), I can see the mlockall parameters set to true,\n- on VM, I've read that the mlockall doesn't work (http://grokbase.com/t/gg/elasticsearch/1344ea29rg/mlockall-fails#20130408pbjeniv37tm2og7cyxa7ifohie)\n\nAny idea, please ?\n\nThank you\n\nPS: I can't upgrade to ES-1.4.4. I'm stuck on ES-1.4.2 :-(\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/91893091","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-91893091","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":91893091,"node_id":"MDEyOklzc3VlQ29tbWVudDkxODkzMDkx","user":{"login":"lmgray","id":11010636,"node_id":"MDQ6VXNlcjExMDEwNjM2","avatar_url":"https://avatars0.githubusercontent.com/u/11010636?v=4","gravatar_id":"","url":"https://api.github.com/users/lmgray","html_url":"https://github.com/lmgray","followers_url":"https://api.github.com/users/lmgray/followers","following_url":"https://api.github.com/users/lmgray/following{/other_user}","gists_url":"https://api.github.com/users/lmgray/gists{/gist_id}","starred_url":"https://api.github.com/users/lmgray/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmgray/subscriptions","organizations_url":"https://api.github.com/users/lmgray/orgs","repos_url":"https://api.github.com/users/lmgray/repos","events_url":"https://api.github.com/users/lmgray/events{/privacy}","received_events_url":"https://api.github.com/users/lmgray/received_events","type":"User","site_admin":false},"created_at":"2015-04-11T17:57:07Z","updated_at":"2015-04-12T01:24:45Z","author_association":"NONE","body":"I've been chasing this one also with latest elasticsearch on RHEL 6 -- kept getting  the following on startup despite having \"elasticsearch - memlock unlimited\" in /etc/security/limits.conf, \"MAX_LOCKED_MEMORY=unlimited\" in /etc/sysconfig/elasticsearch:\n\n```\nUnable to lock JVM memory (ENOMEM). This can result in part of the JVM being swapped out. Increase RLIMIT_MEMLOCK (ulimit).\n```\n\nIt seems if I cd /etc/rc.d/init.d and start elasticsearch using ./elasticsearch start, the script runs and limits/memlock stuff works as expected.  But when it's run as /etc/rc.d/init.d/elasticsearch start, it uses systemctl and the limits are not applied.\n\nI found  /usr/lib/systemd/system/elasticsearch.service had the needed line commented out:\n\n```\n# See MAX_LOCKED_MEMORY in sysconfig, use \"infinity\" when MAX_LOCKED_MEMORY=unlimited and using bootstrap.mlockall: true\n#LimitMEMLOCK=infinity\n```\n\nUncommenting that, running \"systemctl daemon-reload\" and restarting elasticsearch allowed the memlock to work properly.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/93687880","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-93687880","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":93687880,"node_id":"MDEyOklzc3VlQ29tbWVudDkzNjg3ODgw","user":{"login":"rsareth","id":4334697,"node_id":"MDQ6VXNlcjQzMzQ2OTc=","avatar_url":"https://avatars3.githubusercontent.com/u/4334697?v=4","gravatar_id":"","url":"https://api.github.com/users/rsareth","html_url":"https://github.com/rsareth","followers_url":"https://api.github.com/users/rsareth/followers","following_url":"https://api.github.com/users/rsareth/following{/other_user}","gists_url":"https://api.github.com/users/rsareth/gists{/gist_id}","starred_url":"https://api.github.com/users/rsareth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rsareth/subscriptions","organizations_url":"https://api.github.com/users/rsareth/orgs","repos_url":"https://api.github.com/users/rsareth/repos","events_url":"https://api.github.com/users/rsareth/events{/privacy}","received_events_url":"https://api.github.com/users/rsareth/received_events","type":"User","site_admin":false},"created_at":"2015-04-16T09:18:38Z","updated_at":"2015-04-16T09:18:38Z","author_association":"NONE","body":"Hi Imgray,\n\nThank you for your response. I've tested what you have done, but it hasn't worked for me.\n\nI've checked :\n- file /etc/security/limits.conf has the correct lines\n- file /etc/sysconfig/elasticsearch has \"MAX_LOCKED_MEMORY=unlimited\"\n- file /usr/lib/systemd/system/elasticsearch.service has the limitMEMLOCK uncommented\n\nAnd I've restarted the service like you did with the script /etc/rc.d/init.d/elasticsearch\n\nAt the end, I've have the same result :\n\n> $ curl -s localhost:9200/_nodes?pretty|grep mlockall\n>        \"mlockall\" : \"true\"\n>     \"mlockall\" : false\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/93698810","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-93698810","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":93698810,"node_id":"MDEyOklzc3VlQ29tbWVudDkzNjk4ODEw","user":{"login":"lmgray","id":11010636,"node_id":"MDQ6VXNlcjExMDEwNjM2","avatar_url":"https://avatars0.githubusercontent.com/u/11010636?v=4","gravatar_id":"","url":"https://api.github.com/users/lmgray","html_url":"https://github.com/lmgray","followers_url":"https://api.github.com/users/lmgray/followers","following_url":"https://api.github.com/users/lmgray/following{/other_user}","gists_url":"https://api.github.com/users/lmgray/gists{/gist_id}","starred_url":"https://api.github.com/users/lmgray/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmgray/subscriptions","organizations_url":"https://api.github.com/users/lmgray/orgs","repos_url":"https://api.github.com/users/lmgray/repos","events_url":"https://api.github.com/users/lmgray/events{/privacy}","received_events_url":"https://api.github.com/users/lmgray/received_events","type":"User","site_admin":false},"created_at":"2015-04-16T10:06:48Z","updated_at":"2015-04-23T12:21:57Z","author_association":"NONE","body":"Have you tried:\n\n# cd /etc/rc.d/init.d\n\n# ./elasticsearch start\n\nI found running it that way it would run the init script vs. using systemd \nand it would work.\nThat said, when I uncommented the limitMEMLOCK like in \n/usr/lib/systemd/system/elasticsearch.service\nsystemd then worked so you seem to have a different problem than I had.\n\nAfter you start it, try \"cat /proc/pid/limits and see what the memory \nlimit there is?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/96612395","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-96612395","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":96612395,"node_id":"MDEyOklzc3VlQ29tbWVudDk2NjEyMzk1","user":{"login":"rsareth","id":4334697,"node_id":"MDQ6VXNlcjQzMzQ2OTc=","avatar_url":"https://avatars3.githubusercontent.com/u/4334697?v=4","gravatar_id":"","url":"https://api.github.com/users/rsareth","html_url":"https://github.com/rsareth","followers_url":"https://api.github.com/users/rsareth/followers","following_url":"https://api.github.com/users/rsareth/following{/other_user}","gists_url":"https://api.github.com/users/rsareth/gists{/gist_id}","starred_url":"https://api.github.com/users/rsareth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rsareth/subscriptions","organizations_url":"https://api.github.com/users/rsareth/orgs","repos_url":"https://api.github.com/users/rsareth/repos","events_url":"https://api.github.com/users/rsareth/events{/privacy}","received_events_url":"https://api.github.com/users/rsareth/received_events","type":"User","site_admin":false},"created_at":"2015-04-27T11:17:08Z","updated_at":"2015-04-27T11:18:32Z","author_association":"NONE","body":"Hi Imgray,\n\nSorry for the delay. I've just tried your actions and it doesn't work too :-(\n\nHere it is the limits for the current pid for elasticsearch :\n\n> $ cat /proc/33505/limits\n> Limit                     Soft Limit           Hard Limit           Units\n>  Max cpu time              unlimited            unlimited            seconds\n> Max file size             unlimited            unlimited            bytes\n>  Max data size             unlimited            unlimited            bytes\n>  Max stack size            10485760             unlimited            bytes\n>  Max core file size        0                    unlimited            bytes\n>  Max resident set          unlimited            unlimited            bytes\n>  Max processes             1024                 30449                processes\n>  Max open files            64000                64000                files\n>  Max locked memory         unlimited            unlimited            bytes\n>  Max address space         unlimited            unlimited            bytes\n>  Max file locks            unlimited            unlimited            locks\n>  Max pending signals       30449                30449                signals\n>  Max msgqueue size         819200               819200               bytes\n>  Max nice priority         0                    0\n>  Max realtime priority     0                    0\n>  Max realtime timeout      unlimited            unlimited            us\n\nAs you can see, the \"Max locked memory\" is set to unlimited. Now, I think I can confirm that our problems are different.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/103792909","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-103792909","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":103792909,"node_id":"MDEyOklzc3VlQ29tbWVudDEwMzc5MjkwOQ==","user":{"login":"matejzero","id":4689252,"node_id":"MDQ6VXNlcjQ2ODkyNTI=","avatar_url":"https://avatars3.githubusercontent.com/u/4689252?v=4","gravatar_id":"","url":"https://api.github.com/users/matejzero","html_url":"https://github.com/matejzero","followers_url":"https://api.github.com/users/matejzero/followers","following_url":"https://api.github.com/users/matejzero/following{/other_user}","gists_url":"https://api.github.com/users/matejzero/gists{/gist_id}","starred_url":"https://api.github.com/users/matejzero/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matejzero/subscriptions","organizations_url":"https://api.github.com/users/matejzero/orgs","repos_url":"https://api.github.com/users/matejzero/repos","events_url":"https://api.github.com/users/matejzero/events{/privacy}","received_events_url":"https://api.github.com/users/matejzero/received_events","type":"User","site_admin":false},"created_at":"2015-05-20T07:29:39Z","updated_at":"2015-05-20T07:29:39Z","author_association":"NONE","body":"Why is LimitMEMLOCK commented in systemd service file anyway?\nHow can I make sure, this stays uncommented during upgrades? It would be nice to add an env variable in sysconfig/elasticsearch so that it would set this to the right value and stayed persistent during upgrades.\n\nI also had this problem and commenting out LimitMEMLOCK in elasticsearch.service resolved the issue. That was on CentOS 7.\n\nMatej\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/103800025","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-103800025","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":103800025,"node_id":"MDEyOklzc3VlQ29tbWVudDEwMzgwMDAyNQ==","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2015-05-20T07:53:29Z","updated_at":"2015-05-20T07:53:29Z","author_association":"MEMBER","body":"@matejzero that's a nice suggestion but as far as I know env vars can be only be used in some SystemD settings like `ExecStart` but not in `LimitMEMLOCK`. I'll double check.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/103800447","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-103800447","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":103800447,"node_id":"MDEyOklzc3VlQ29tbWVudDEwMzgwMDQ0Nw==","user":{"login":"matejzero","id":4689252,"node_id":"MDQ6VXNlcjQ2ODkyNTI=","avatar_url":"https://avatars3.githubusercontent.com/u/4689252?v=4","gravatar_id":"","url":"https://api.github.com/users/matejzero","html_url":"https://github.com/matejzero","followers_url":"https://api.github.com/users/matejzero/followers","following_url":"https://api.github.com/users/matejzero/following{/other_user}","gists_url":"https://api.github.com/users/matejzero/gists{/gist_id}","starred_url":"https://api.github.com/users/matejzero/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matejzero/subscriptions","organizations_url":"https://api.github.com/users/matejzero/orgs","repos_url":"https://api.github.com/users/matejzero/repos","events_url":"https://api.github.com/users/matejzero/events{/privacy}","received_events_url":"https://api.github.com/users/matejzero/received_events","type":"User","site_admin":false},"created_at":"2015-05-20T07:56:27Z","updated_at":"2015-05-20T07:56:27Z","author_association":"NONE","body":"I uncommented LimitMEMLOCK on all my nodes and it works on physical machines, but ES won't start on ovirt VM. systemctl reports `elasticsearch.service: main process exited, code=killed, status=9/KILL`.\n\nWill investigate and report back.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/103800968","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-103800968","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":103800968,"node_id":"MDEyOklzc3VlQ29tbWVudDEwMzgwMDk2OA==","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2015-05-20T08:00:15Z","updated_at":"2015-05-20T08:00:15Z","author_association":"MEMBER","body":"@matejzero not sure it helps a lot but you can also have a look at #11163 and #9582\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/103804098","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-103804098","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":103804098,"node_id":"MDEyOklzc3VlQ29tbWVudDEwMzgwNDA5OA==","user":{"login":"matejzero","id":4689252,"node_id":"MDQ6VXNlcjQ2ODkyNTI=","avatar_url":"https://avatars3.githubusercontent.com/u/4689252?v=4","gravatar_id":"","url":"https://api.github.com/users/matejzero","html_url":"https://github.com/matejzero","followers_url":"https://api.github.com/users/matejzero/followers","following_url":"https://api.github.com/users/matejzero/following{/other_user}","gists_url":"https://api.github.com/users/matejzero/gists{/gist_id}","starred_url":"https://api.github.com/users/matejzero/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matejzero/subscriptions","organizations_url":"https://api.github.com/users/matejzero/orgs","repos_url":"https://api.github.com/users/matejzero/repos","events_url":"https://api.github.com/users/matejzero/events{/privacy}","received_events_url":"https://api.github.com/users/matejzero/received_events","type":"User","site_admin":false},"created_at":"2015-05-20T08:12:09Z","updated_at":"2015-05-20T08:12:09Z","author_association":"NONE","body":"It was a mistake on my side. I accidentally set ES_HEAP_SIZE to 100% memory and OOM killed the process. Ather fixing ES_HEAP_SIZE, it now works with LimitMEMLOCK set to infinity.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/131640643","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-131640643","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":131640643,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMTY0MDY0Mw==","user":{"login":"markwalkom","id":3184718,"node_id":"MDQ6VXNlcjMxODQ3MTg=","avatar_url":"https://avatars0.githubusercontent.com/u/3184718?v=4","gravatar_id":"","url":"https://api.github.com/users/markwalkom","html_url":"https://github.com/markwalkom","followers_url":"https://api.github.com/users/markwalkom/followers","following_url":"https://api.github.com/users/markwalkom/following{/other_user}","gists_url":"https://api.github.com/users/markwalkom/gists{/gist_id}","starred_url":"https://api.github.com/users/markwalkom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markwalkom/subscriptions","organizations_url":"https://api.github.com/users/markwalkom/orgs","repos_url":"https://api.github.com/users/markwalkom/repos","events_url":"https://api.github.com/users/markwalkom/events{/privacy}","received_events_url":"https://api.github.com/users/markwalkom/received_events","type":"User","site_admin":false},"created_at":"2015-08-16T23:43:30Z","updated_at":"2015-08-16T23:43:30Z","author_association":"MEMBER","body":"Just wanted to poke the bear here to see if we can get this resolved, it's a performance hit that should be simple to fix and it'd be great to see in 2.0.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/164068194","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-164068194","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":164068194,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NDA2ODE5NA==","user":{"login":"markwalkom","id":3184718,"node_id":"MDQ6VXNlcjMxODQ3MTg=","avatar_url":"https://avatars0.githubusercontent.com/u/3184718?v=4","gravatar_id":"","url":"https://api.github.com/users/markwalkom","html_url":"https://github.com/markwalkom","followers_url":"https://api.github.com/users/markwalkom/followers","following_url":"https://api.github.com/users/markwalkom/following{/other_user}","gists_url":"https://api.github.com/users/markwalkom/gists{/gist_id}","starred_url":"https://api.github.com/users/markwalkom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markwalkom/subscriptions","organizations_url":"https://api.github.com/users/markwalkom/orgs","repos_url":"https://api.github.com/users/markwalkom/repos","events_url":"https://api.github.com/users/markwalkom/events{/privacy}","received_events_url":"https://api.github.com/users/markwalkom/received_events","type":"User","site_admin":false},"created_at":"2015-12-11T22:36:10Z","updated_at":"2015-12-11T22:36:10Z","author_association":"MEMBER","body":"@tlrx is there no way for us to manage this without forcing users to have to edit `/usr/lib/systemd/system/elasticsearch.service` after each upgrade/install? Or are we limited with systemd and how it handles things like this?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/166862205","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-166862205","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":166862205,"node_id":"MDEyOklzc3VlQ29tbWVudDE2Njg2MjIwNQ==","user":{"login":"harpreetsb","id":6584304,"node_id":"MDQ6VXNlcjY1ODQzMDQ=","avatar_url":"https://avatars3.githubusercontent.com/u/6584304?v=4","gravatar_id":"","url":"https://api.github.com/users/harpreetsb","html_url":"https://github.com/harpreetsb","followers_url":"https://api.github.com/users/harpreetsb/followers","following_url":"https://api.github.com/users/harpreetsb/following{/other_user}","gists_url":"https://api.github.com/users/harpreetsb/gists{/gist_id}","starred_url":"https://api.github.com/users/harpreetsb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harpreetsb/subscriptions","organizations_url":"https://api.github.com/users/harpreetsb/orgs","repos_url":"https://api.github.com/users/harpreetsb/repos","events_url":"https://api.github.com/users/harpreetsb/events{/privacy}","received_events_url":"https://api.github.com/users/harpreetsb/received_events","type":"User","site_admin":false},"created_at":"2015-12-23T10:54:00Z","updated_at":"2015-12-23T10:55:45Z","author_association":"NONE","body":"hi,\ni am using ubuntu and facing same problem\nthe output of `http://localhost:9200/_nodes?pretty`\ngives\n\n``` json\n{\n...\n\n       \"bootstrap\" : {\n          \"mlockall\" : \"true\"\n        },\n    ....\n\n \"process\" : {\n        \"refresh_interval_in_millis\" : 1000,\n        \"id\" : 2962,\n        \"mlockall\" : false\n      },\n}\n```\n\nAlso\nthe command\n`systemctl daemon-reload` is no available on ubuntu,\nwhat is the option, i restarted the system, but nothing\n\ncan someone help\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/172880212","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-172880212","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":172880212,"node_id":"MDEyOklzc3VlQ29tbWVudDE3Mjg4MDIxMg==","user":{"login":"rgevaert","id":66934,"node_id":"MDQ6VXNlcjY2OTM0","avatar_url":"https://avatars2.githubusercontent.com/u/66934?v=4","gravatar_id":"","url":"https://api.github.com/users/rgevaert","html_url":"https://github.com/rgevaert","followers_url":"https://api.github.com/users/rgevaert/followers","following_url":"https://api.github.com/users/rgevaert/following{/other_user}","gists_url":"https://api.github.com/users/rgevaert/gists{/gist_id}","starred_url":"https://api.github.com/users/rgevaert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rgevaert/subscriptions","organizations_url":"https://api.github.com/users/rgevaert/orgs","repos_url":"https://api.github.com/users/rgevaert/repos","events_url":"https://api.github.com/users/rgevaert/events{/privacy}","received_events_url":"https://api.github.com/users/rgevaert/received_events","type":"User","site_admin":false},"created_at":"2016-01-19T15:05:50Z","updated_at":"2016-01-19T15:05:50Z","author_association":"NONE","body":"You can also create a file in  /etc/systemd/system/elasticsearch.service.d/1-fixmemlock.conf with the contents \n\n  [Service]\n  LimitMEMLOCK=infinity\n\nEn then \" systemctl daemon-reload\"\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/173150377","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-173150377","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":173150377,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MzE1MDM3Nw==","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2016-01-20T09:55:32Z","updated_at":"2016-01-20T09:55:32Z","author_association":"MEMBER","body":"> @tlrx is there no way for us to manage this without forcing users to have to edit /usr/lib/systemd/system/elasticsearch.service after each upgrade/install? Or are we limited with systemd and how it handles things like this?\n\nSorry it took so long to answer. The [systemd documentation](http://www.freedesktop.org/software/systemd/man/systemd.unit.html#id-1.11.3) indicates how to override default settings, see section \"Overriding vendor settings\". I did not test it but it should work on most distributions.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/173234476","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-173234476","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":173234476,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MzIzNDQ3Ng==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-01-20T15:15:55Z","updated_at":"2016-01-20T15:15:55Z","author_association":"CONTRIBUTOR","body":"It sounds like what we need to do here is to add docs for adding a `elasticsearch.service.d/` .conf file, so that this config survives upgrades\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/182552852","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-182552852","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":182552852,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MjU1Mjg1Mg==","user":{"login":"onetruebob74","id":5693788,"node_id":"MDQ6VXNlcjU2OTM3ODg=","avatar_url":"https://avatars0.githubusercontent.com/u/5693788?v=4","gravatar_id":"","url":"https://api.github.com/users/onetruebob74","html_url":"https://github.com/onetruebob74","followers_url":"https://api.github.com/users/onetruebob74/followers","following_url":"https://api.github.com/users/onetruebob74/following{/other_user}","gists_url":"https://api.github.com/users/onetruebob74/gists{/gist_id}","starred_url":"https://api.github.com/users/onetruebob74/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/onetruebob74/subscriptions","organizations_url":"https://api.github.com/users/onetruebob74/orgs","repos_url":"https://api.github.com/users/onetruebob74/repos","events_url":"https://api.github.com/users/onetruebob74/events{/privacy}","received_events_url":"https://api.github.com/users/onetruebob74/received_events","type":"User","site_admin":false},"created_at":"2016-02-10T19:57:23Z","updated_at":"2016-02-10T19:57:23Z","author_association":"NONE","body":"So, to add more fuel to this fire, I have an ES cluster that all have bootstrap.mlockall: true.  They also each have have a modified systemd file that has LimitMEMLOCK=infinity uncommented.  However, when I issue curl -XGET 'http://es01:9200/_nodes/process?pretty'  I get the following:\n\n```\n{\n  \"cluster_name\" : \"ELKCLUSTER\",\n  \"nodes\" : {\n    \"US3o_DhWR56SiTyHqhWG_g\" : {\n      \"name\" : \"ws02\",\n      \"transport_address\" : \"10.254.27.193:9300\",\n      \"host\" : \"10.254.27.193\",\n      \"ip\" : \"10.254.27.193\",\n      \"version\" : \"2.1.1\",\n      \"build\" : \"40e2c53\",\n      \"http_address\" : \"10.254.27.193:9200\",\n      \"attributes\" : {\n        \"data\" : \"false\",\n        \"master\" : \"false\"\n      },\n      \"process\" : {\n        \"refresh_interval_in_millis\" : 1000,\n        \"id\" : 31783,\n        \"mlockall\" : false\n      }\n    },\n    \"LahFOMA7Thi4cN_ThxjmZw\" : {\n      \"name\" : \"es02\",\n      \"transport_address\" : \"10.254.27.192:9300\",\n      \"host\" : \"10.254.27.192\",\n      \"ip\" : \"10.254.27.192\",\n      \"version\" : \"2.1.1\",\n      \"build\" : \"40e2c53\",\n      \"http_address\" : \"10.254.27.192:9200\",\n      \"attributes\" : {\n        \"master\" : \"true\"\n      },\n      \"process\" : {\n        \"refresh_interval_in_millis\" : 1000,\n        \"id\" : 1611,\n        \"mlockall\" : false\n      }\n    },\n    \"Gl9E2ukUTJuSh0q4gnk7Rg\" : {\n      \"name\" : \"es01\",\n      \"transport_address\" : \"10.254.27.191:9300\",\n      \"host\" : \"10.254.27.191\",\n      \"ip\" : \"10.254.27.191\",\n      \"version\" : \"2.1.1\",\n      \"build\" : \"40e2c53\",\n      \"http_address\" : \"10.254.27.191:9200\",\n      \"attributes\" : {\n        \"master\" : \"true\"\n      },\n      \"process\" : {\n        \"refresh_interval_in_millis\" : 1000,\n        \"id\" : 53852,\n        \"mlockall\" : true\n      }\n    }\n  }\n}\n```\n\nws02 is the Kibana server, the two es0? servers are elasticsearch.  Any thoughts as to why mlockall is showing as false for es02 and ws02?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/183729456","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-183729456","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":183729456,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MzcyOTQ1Ng==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-02-13T19:27:17Z","updated_at":"2016-02-13T19:27:17Z","author_association":"CONTRIBUTOR","body":"@onetruebob74 have a look in your error log - see what it has to say.  likeliest thing is that there is something different in the system configurations of theses machines\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/187133623","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-187133623","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":187133623,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NzEzMzYyMw==","user":{"login":"elvarb","id":1716457,"node_id":"MDQ6VXNlcjE3MTY0NTc=","avatar_url":"https://avatars2.githubusercontent.com/u/1716457?v=4","gravatar_id":"","url":"https://api.github.com/users/elvarb","html_url":"https://github.com/elvarb","followers_url":"https://api.github.com/users/elvarb/followers","following_url":"https://api.github.com/users/elvarb/following{/other_user}","gists_url":"https://api.github.com/users/elvarb/gists{/gist_id}","starred_url":"https://api.github.com/users/elvarb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elvarb/subscriptions","organizations_url":"https://api.github.com/users/elvarb/orgs","repos_url":"https://api.github.com/users/elvarb/repos","events_url":"https://api.github.com/users/elvarb/events{/privacy}","received_events_url":"https://api.github.com/users/elvarb/received_events","type":"User","site_admin":false},"created_at":"2016-02-22T11:34:32Z","updated_at":"2016-02-22T11:34:58Z","author_association":"NONE","body":"I had the this problem and what Ingray mentioned worked for me\n\n> I found /usr/lib/systemd/system/elasticsearch.service had the needed line commented out:\n> \n> `# See MAX_LOCKED_MEMORY in sysconfig, use \"infinity\" when MAX_LOCKED_MEMORY=unlimited and using bootstrap.mlockall: true\n> #LimitMEMLOCK=infinity`\n> Uncommenting that, running \"systemctl daemon-reload\" and restarting elasticsearch allowed the memlock to work properly.\n\nThis should be added in the documentation \n\nhttps://www.elastic.co/guide/en/elasticsearch/reference/current/setup-configuration.html#setup-configuration-memory\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/207100788","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-207100788","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":207100788,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNzEwMDc4OA==","user":{"login":"jdelgad","id":4778670,"node_id":"MDQ6VXNlcjQ3Nzg2NzA=","avatar_url":"https://avatars2.githubusercontent.com/u/4778670?v=4","gravatar_id":"","url":"https://api.github.com/users/jdelgad","html_url":"https://github.com/jdelgad","followers_url":"https://api.github.com/users/jdelgad/followers","following_url":"https://api.github.com/users/jdelgad/following{/other_user}","gists_url":"https://api.github.com/users/jdelgad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdelgad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdelgad/subscriptions","organizations_url":"https://api.github.com/users/jdelgad/orgs","repos_url":"https://api.github.com/users/jdelgad/repos","events_url":"https://api.github.com/users/jdelgad/events{/privacy}","received_events_url":"https://api.github.com/users/jdelgad/received_events","type":"User","site_admin":false},"created_at":"2016-04-07T21:45:05Z","updated_at":"2016-04-07T21:45:05Z","author_association":"NONE","body":"I had the same issue and turned out `/tmp` was set to 'noexec' (`grep tmp /etc/fstab`). I ended up creating a new directory and used the `-Djna.tmpdir` option.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/221224140","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-221224140","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":221224140,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMTIyNDE0MA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-05-24T10:06:04Z","updated_at":"2016-05-24T10:06:04Z","author_association":"CONTRIBUTOR","body":"These docs have been rewritten. Closing\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/258564281","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-258564281","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":258564281,"node_id":"MDEyOklzc3VlQ29tbWVudDI1ODU2NDI4MQ==","user":{"login":"spanktar","id":601300,"node_id":"MDQ6VXNlcjYwMTMwMA==","avatar_url":"https://avatars3.githubusercontent.com/u/601300?v=4","gravatar_id":"","url":"https://api.github.com/users/spanktar","html_url":"https://github.com/spanktar","followers_url":"https://api.github.com/users/spanktar/followers","following_url":"https://api.github.com/users/spanktar/following{/other_user}","gists_url":"https://api.github.com/users/spanktar/gists{/gist_id}","starred_url":"https://api.github.com/users/spanktar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spanktar/subscriptions","organizations_url":"https://api.github.com/users/spanktar/orgs","repos_url":"https://api.github.com/users/spanktar/repos","events_url":"https://api.github.com/users/spanktar/events{/privacy}","received_events_url":"https://api.github.com/users/spanktar/received_events","type":"User","site_admin":false},"created_at":"2016-11-04T22:35:53Z","updated_at":"2016-11-04T22:35:53Z","author_association":"NONE","body":"404: https://www.elastic.co/guide/en/elasticsearch/reference/current/setup-configuration.html#setup-configuration-memory\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/258565721","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-258565721","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":258565721,"node_id":"MDEyOklzc3VlQ29tbWVudDI1ODU2NTcyMQ==","user":{"login":"markwalkom","id":3184718,"node_id":"MDQ6VXNlcjMxODQ3MTg=","avatar_url":"https://avatars0.githubusercontent.com/u/3184718?v=4","gravatar_id":"","url":"https://api.github.com/users/markwalkom","html_url":"https://github.com/markwalkom","followers_url":"https://api.github.com/users/markwalkom/followers","following_url":"https://api.github.com/users/markwalkom/following{/other_user}","gists_url":"https://api.github.com/users/markwalkom/gists{/gist_id}","starred_url":"https://api.github.com/users/markwalkom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markwalkom/subscriptions","organizations_url":"https://api.github.com/users/markwalkom/orgs","repos_url":"https://api.github.com/users/markwalkom/repos","events_url":"https://api.github.com/users/markwalkom/events{/privacy}","received_events_url":"https://api.github.com/users/markwalkom/received_events","type":"User","site_admin":false},"created_at":"2016-11-04T22:45:22Z","updated_at":"2016-11-04T22:45:22Z","author_association":"MEMBER","body":"See https://www.elastic.co/guide/en/elasticsearch/reference/current/_memory_lock_check.html\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/297698914","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-297698914","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":297698914,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzY5ODkxNA==","user":{"login":"jbenoit2011","id":4025437,"node_id":"MDQ6VXNlcjQwMjU0Mzc=","avatar_url":"https://avatars2.githubusercontent.com/u/4025437?v=4","gravatar_id":"","url":"https://api.github.com/users/jbenoit2011","html_url":"https://github.com/jbenoit2011","followers_url":"https://api.github.com/users/jbenoit2011/followers","following_url":"https://api.github.com/users/jbenoit2011/following{/other_user}","gists_url":"https://api.github.com/users/jbenoit2011/gists{/gist_id}","starred_url":"https://api.github.com/users/jbenoit2011/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbenoit2011/subscriptions","organizations_url":"https://api.github.com/users/jbenoit2011/orgs","repos_url":"https://api.github.com/users/jbenoit2011/repos","events_url":"https://api.github.com/users/jbenoit2011/events{/privacy}","received_events_url":"https://api.github.com/users/jbenoit2011/received_events","type":"User","site_admin":false},"created_at":"2017-04-27T12:26:50Z","updated_at":"2017-04-27T12:29:22Z","author_association":"NONE","body":"Note that could happen if your Elasticsearch node is managed by `supervisord`, since the latter one seems to not take in account ulimits: https://github.com/Supervisor/supervisor/pull/229\r\n\r\nFor example, Elasticbeanstalk use supervisor to manage processes.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/339321224","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-339321224","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":339321224,"node_id":"MDEyOklzc3VlQ29tbWVudDMzOTMyMTIyNA==","user":{"login":"CHM-me-ch","id":32633045,"node_id":"MDQ6VXNlcjMyNjMzMDQ1","avatar_url":"https://avatars2.githubusercontent.com/u/32633045?v=4","gravatar_id":"","url":"https://api.github.com/users/CHM-me-ch","html_url":"https://github.com/CHM-me-ch","followers_url":"https://api.github.com/users/CHM-me-ch/followers","following_url":"https://api.github.com/users/CHM-me-ch/following{/other_user}","gists_url":"https://api.github.com/users/CHM-me-ch/gists{/gist_id}","starred_url":"https://api.github.com/users/CHM-me-ch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CHM-me-ch/subscriptions","organizations_url":"https://api.github.com/users/CHM-me-ch/orgs","repos_url":"https://api.github.com/users/CHM-me-ch/repos","events_url":"https://api.github.com/users/CHM-me-ch/events{/privacy}","received_events_url":"https://api.github.com/users/CHM-me-ch/received_events","type":"User","site_admin":false},"created_at":"2017-10-25T12:58:32Z","updated_at":"2017-10-25T12:58:32Z","author_association":"NONE","body":"i am stuck with the error \"Cannot allocate memory\" while calling the mlockall() function. Can anyone please help me.\r\n\r\nI am running my program in eclipse (2017) and OS is ubuntu 16.04 LTS.\r\nI am trying to establish/ implement an UDP connection(real time & using i210 ethernet controller) and the real time extension i have used is \"PREEMPT_RT\".\r\nI am pasting my code below:\r\n\r\n#include <arpa/inet.h>\r\n#include <netinet/in.h>\r\n#include <stdio.h>\r\n#include <sys/types.h>\r\n#include <sys/socket.h>\r\n#include <unistd.h>\r\n#include <limits.h>\r\n#include <pthread.h>\r\n#include <sched.h>\r\n#include <stdlib.h>\r\n#include <sys/mman.h>\r\n#include <string.h>\r\n\r\n#define BUFLEN 512\r\n\r\n#define NPACK 5\r\n#define PORT 8089\r\n\r\n#define SRV_IP \"127.0.0.1\"\r\n/* diep(), #includes and #defines like in the server */\r\n\r\nvoid diep(char *s)\r\n      {\r\n        perror(s);\r\n        exit(1);\r\n      }\r\n\r\nvoid *thread_func(void)\r\n{\r\n        /*  RT specific stuff here */\r\n\tstruct sockaddr_in si_other;\r\n\tint s, i, slen=sizeof(si_other);\r\n\tchar buf[BUFLEN];\r\n\r\n\tif ((s=socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP))==-1)\r\n\tdiep(\"socket\");\r\n\r\n\tmemset((char *) &si_other, 0, sizeof(si_other));\r\n\tsi_other.sin_family = AF_INET;\r\n\tsi_other.sin_port = htons(PORT);\r\n\tif (inet_aton(SRV_IP, &si_other.sin_addr)==0) {\r\n\tfprintf(stderr, \"inet_aton() failed\\n\");\r\n\texit(1);\r\n\t    }\r\n\r\n\tfor (i=0; i<NPACK; i++) {\r\n\tprintf(\"Sending packet %d\\n\", i);\r\n\tsprintf(buf, \"This is packet %d\\n\", i);\r\n\tif (sendto(s, buf, BUFLEN, 0, &si_other, slen)==-1)\r\n\tdiep(\"sendto()\");\r\n\t   }\r\n\r\n\t    close(s);\r\n        //return NULL;\r\n\t    return 0;\r\n}\r\n\r\nint main(int argc, char* argv[])\r\n{\r\n\r\n\tstruct sched_param param;\r\n\t        pthread_attr_t attr;\r\n\t        pthread_t thread;\r\n\t        int ret;\r\n\r\n\t        int *ptr;\r\n\t        ptr=(int*) malloc(400*1024);\r\n\t        if(ptr==NULL)\r\n\t        {\r\n\t        \tprintf(\"Error!Memory not allocated\");\r\n\t        \texit(0);\r\n\t        }\r\n\r\n\t        /* Lock memory*/\r\n\t        if(mlockall(MCL_CURRENT|MCL_FUTURE) == -1) {\r\n\t                printf(\"mlockall failed: %m\\n\");\r\n\t                exit(-2);\r\n\t        }\r\n\r\n\t        /* Initialize pthread attributes (default values) */\r\n\t        ret = pthread_attr_init(&attr);\r\n\t        if (ret) {\r\n\t                printf(\"init pthread attributes failed\\n\");\r\n\t                goto out;\r\n\t        }\r\n\r\n\t        /* Set a specific stack size  */\r\n\t        ret = pthread_attr_setstacksize (&attr, PTHREAD_STACK_MIN);\r\n\t        if (ret) {\r\n\t            printf(\"pthread setstacksize failed\\n\");\r\n\t            goto out;\r\n\t        }\r\n\r\n\t        /* Set scheduler policy and priority of pthread */\r\n\t        ret = pthread_attr_setschedpolicy(&attr, SCHED_FIFO);\r\n\t        if (ret) {\r\n\t                printf(\"pthread setschedpolicy failed\\n\");\r\n\t                goto out;\r\n\t        }\r\n\t        param.sched_priority = 80;\r\n\t        ret = pthread_attr_setschedparam(&attr, &param);\r\n\t        if (ret) {\r\n\t                printf(\"pthread setschedparam failed\\n\");\r\n\t                goto out;\r\n\t        }\r\n\t        /* Use scheduling parameters of attr */\r\n\t        ret = pthread_attr_setinheritsched(&attr, PTHREAD_EXPLICIT_SCHED);\r\n\t        if (ret) {\r\n\t                printf(\"pthread setinheritsched failed\\n\");\r\n\t                goto out;\r\n\t        }\r\n\r\n\t        /* Create a pthread with specified attributes*/\r\n\t        ret = pthread_create(&thread, &attr, thread_func, NULL);\r\n\t        if (ret) {\r\n\t                printf(\"create pthread failed\\n\");\r\n\t                goto out;\r\n\t        }\r\n\r\n\t        /* Join the thread and wait until it is done*/\r\n\t        ret = pthread_join(thread, NULL);\r\n\t        if (ret)\r\n\t                printf(\"join pthread failed: %m\\n\");\r\n\r\n\r\n\r\n    out:\r\n    \t                return ret;\r\n\r\n\r\n  }\r\n\r\nI am new to ll this, and kindly please point out what i am doing wrong.\r\nThis is just a client side program .. i have similar one for server also.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/339405034","html_url":"https://github.com/elastic/elasticsearch/issues/9357#issuecomment-339405034","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9357","id":339405034,"node_id":"MDEyOklzc3VlQ29tbWVudDMzOTQwNTAzNA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-10-25T17:21:44Z","updated_at":"2017-10-25T17:21:44Z","author_association":"MEMBER","body":"@CHM-me-ch This issue is not for general help with `mlockall`, nor is this repository even for general help. We use this repository to track issues for Elasticsearch. It looks like you're seeking general programming help. Maybe try Stack Overflow?","performed_via_github_app":null}]