{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/24695","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24695/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24695/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24695/events","html_url":"https://github.com/elastic/elasticsearch/issues/24695","id":228906964,"node_id":"MDU6SXNzdWUyMjg5MDY5NjQ=","number":24695,"title":"Painless null pointer exception","user":{"login":"biggiesmallsAG","id":17421028,"node_id":"MDQ6VXNlcjE3NDIxMDI4","avatar_url":"https://avatars0.githubusercontent.com/u/17421028?v=4","gravatar_id":"","url":"https://api.github.com/users/biggiesmallsAG","html_url":"https://github.com/biggiesmallsAG","followers_url":"https://api.github.com/users/biggiesmallsAG/followers","following_url":"https://api.github.com/users/biggiesmallsAG/following{/other_user}","gists_url":"https://api.github.com/users/biggiesmallsAG/gists{/gist_id}","starred_url":"https://api.github.com/users/biggiesmallsAG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/biggiesmallsAG/subscriptions","organizations_url":"https://api.github.com/users/biggiesmallsAG/orgs","repos_url":"https://api.github.com/users/biggiesmallsAG/repos","events_url":"https://api.github.com/users/biggiesmallsAG/events{/privacy}","received_events_url":"https://api.github.com/users/biggiesmallsAG/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2017-05-16T03:41:29Z","updated_at":"2019-09-22T17:47:54Z","closed_at":"2017-05-16T03:54:25Z","author_association":"NONE","active_lock_reason":null,"body":"Document:\r\n\r\n```\r\n      {\r\n        \"_index\": \"optik\",\r\n        \"_type\": \"indicators\",\r\n        \"_id\": \"AVwPUXjQo8Mgt9lhybim\",\r\n        \"_score\": 1,\r\n        \"_routing\": \"test1\",\r\n        \"_parent\": \"test1\",\r\n        \"_source\": {\r\n          \"indicators_list\": [\r\n            {\r\n              \"indicator\": \"apple.com.au\",\r\n              \"ptag_type\": \"\",\r\n              \"ptag_analyst\": \"\",\r\n              \"ptag_date\": \"1970-01-01T00:00:00.000000\"\r\n            }\r\n          ]\r\n        }\r\n      }\r\n```\r\n\r\nScripting:\r\n\r\n```\r\nPOST optik/indicators/AVwPUXjQo8Mgt9lhybim/_update?parent=test1\r\n{\r\n  \"script\": {\r\n    \"lang\": \"painless\",\r\n    \"inline\": \"int i=0; for (i = 0; i < doc['indicators_list'].length; i++) { if (doc['indicators_list'][i]['indicator'].value == 'apple.com.au') { doc['indicators_list'][i]['ptag_type'].value = params.ptag_type;}}\",\r\n    \"params\": {\r\n      \"ptag_type\": \"malicious\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nError:\r\n\r\n```\r\n{\r\n  \"error\": {\r\n    \"root_cause\": [\r\n      {\r\n        \"type\": \"remote_transport_exception\",\r\n        \"reason\": \"[h4M67tk][10.37.129.11:9300][indices:data/write/update[s]]\"\r\n      }\r\n    ],\r\n    \"type\": \"illegal_argument_exception\",\r\n    \"reason\": \"failed to execute script\",\r\n    \"caused_by\": {\r\n      \"type\": \"script_exception\",\r\n      \"reason\": \"compile error\",\r\n      \"script_stack\": [],\r\n      \"script\": \"int i=0; for (i = 0; i < doc['indicators_list'].length; i++) { if (doc['indicators_list'][i]['indicator'].value == 'apple.com.au') { doc['indicators_list'][i]['ptag_type'].value = params.ptag_type;}}\",\r\n      \"lang\": \"painless\",\r\n      \"caused_by\": {\r\n        \"type\": \"null_pointer_exception\",\r\n        \"reason\": null\r\n      }\r\n    }\r\n  },\r\n  \"status\": 400\r\n}\r\n```\r\n\r\nIm at a dead end, would be nice to know where the null pointer is.. or why my script that is seemingly syntactically correct is failing..","closed_by":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"performed_via_github_app":null}