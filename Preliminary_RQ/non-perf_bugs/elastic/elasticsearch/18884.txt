{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/18884","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18884/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18884/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18884/events","html_url":"https://github.com/elastic/elasticsearch/issues/18884","id":160363396,"node_id":"MDU6SXNzdWUxNjAzNjMzOTY=","number":18884,"title":"Completion Suggester with  prefix and regx not working","user":{"login":"ishara","id":1032792,"node_id":"MDQ6VXNlcjEwMzI3OTI=","avatar_url":"https://avatars1.githubusercontent.com/u/1032792?v=4","gravatar_id":"","url":"https://api.github.com/users/ishara","html_url":"https://github.com/ishara","followers_url":"https://api.github.com/users/ishara/followers","following_url":"https://api.github.com/users/ishara/following{/other_user}","gists_url":"https://api.github.com/users/ishara/gists{/gist_id}","starred_url":"https://api.github.com/users/ishara/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ishara/subscriptions","organizations_url":"https://api.github.com/users/ishara/orgs","repos_url":"https://api.github.com/users/ishara/repos","events_url":"https://api.github.com/users/ishara/events{/privacy}","received_events_url":"https://api.github.com/users/ishara/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2016-06-15T08:15:59Z","updated_at":"2016-06-15T09:07:53Z","closed_at":"2016-06-15T09:07:53Z","author_association":"NONE","active_lock_reason":null,"body":"I have try with Completion Suggest with prefix,regx and text. This is work only with text.  \nbut I have check with elasticsearch test cases and working fine with prefix and regex (Test class -CompletionSuggestSearchIT).\n\n**Elasticsearch version**:2.3.3\n\n**JVM version**:1.8\n\n**OS version**:windows 10\n\n**Description of the problem including expected versus actual behavior**:\n\n**Steps to reproduce**:\n\nDELETE /simple_suggest_index\nPUT /simple_suggest_index\nPUT /simple_suggest_index/simple_type/_mapping\n{\n\"simple_type\": {\n\"properties\": {\n  \"name\" : { \"type\" : \"string\" },\n\"suggest\": {\n\"type\": \"completion\",\n\"analyzer\" : \"simple\",\n\"search_analyzer\": \"simple\",\n\"preserve_separators\":false,\n\"preserve_position_increments\":false\n}\n}\n}\n}\n\nPOST /simple_suggest_index/simple_type/\n{\"name\":\"1\",\"suggest\":{\"input\":[\"Foo Fighters\"]}}\nPOST /simple_suggest_index/simple_type/\n{\"name\":\"2\",\"suggest\":{\"input\":[\"Generator\"]}}\nPOST /simple_suggest_index/simple_type/\n{\"name\":\"3\",\"suggest\":{\"input\":[\"Foo Fighters Generator\"]}}\nPOST /simple_suggest_index/simple_type/\n{\"name\":\"4\",\"suggest\":{\"input\":[\"Mr ishara samantha nanayakkara\"]}}\n\nPOST /simple_suggest_index/_suggest?pretty\n{\n  \"simple_type\": {\n    \"prefix\": \"m\",\n    \"completion\": {\n      \"field\": \"suggest\",\n      \"fuzzy\": {\n        \"fuzziness\": 2\n      }\n    }\n  }\n}\nPOST /simple_suggest_index/_search?pretty\n{\n  \"suggest\" : {\n    \"simple_type\" : {\n      \"prefix\" : \"m\",\n      \"completion\" : {\n        \"field\" : \"suggest\",\n        \"size\" : 10,\n        \"fuzzy\" : {\n          \"fuzziness\" : 2,\n          \"transpositions\" : true,\n          \"min_length\" : 3,\n          \"prefix_length\" : 1,\n          \"unicode_aware\" : false,\n          \"max_determinized_states\" : 10000\n        }\n      }\n    }\n  }\n}\n\n**Describe the feature**:\n\n{\n   \"_shards\": {\n      \"total\": 5,\n      \"successful\": 0,\n      \"failed\": 5,\n      \"failures\": [\n         {\n            \"shard\": 0,\n            \"index\": \"simple_suggest_index\",\n            \"status\": \"INTERNAL_SERVER_ERROR\",\n            \"reason\": {\n               \"type\": \"exception\",\n               \"reason\": \"failed to execute suggest\",\n               \"caused_by\": {\n                  \"type\": \"illegal_argument_exception\",\n                  \"reason\": \"[suggest] does not support [prefix]\"\n               }\n            }\n         }\n      ]\n   }\n}\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}