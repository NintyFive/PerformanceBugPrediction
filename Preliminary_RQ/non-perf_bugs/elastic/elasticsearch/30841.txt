{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/30841","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30841/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30841/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30841/events","html_url":"https://github.com/elastic/elasticsearch/issues/30841","id":326141781,"node_id":"MDU6SXNzdWUzMjYxNDE3ODE=","number":30841,"title":"[Feature Request] Request to honour the aggregate nested filters despite reverse nesting.","user":{"login":"kkhaitan","id":37134649,"node_id":"MDQ6VXNlcjM3MTM0NjQ5","avatar_url":"https://avatars3.githubusercontent.com/u/37134649?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhaitan","html_url":"https://github.com/kkhaitan","followers_url":"https://api.github.com/users/kkhaitan/followers","following_url":"https://api.github.com/users/kkhaitan/following{/other_user}","gists_url":"https://api.github.com/users/kkhaitan/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhaitan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhaitan/subscriptions","organizations_url":"https://api.github.com/users/kkhaitan/orgs","repos_url":"https://api.github.com/users/kkhaitan/repos","events_url":"https://api.github.com/users/kkhaitan/events{/privacy}","received_events_url":"https://api.github.com/users/kkhaitan/received_events","type":"User","site_admin":false},"labels":[{"id":141141324,"node_id":"MDU6TGFiZWwxNDExNDEzMjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Analytics/Aggregations","name":":Analytics/Aggregations","color":"0e8a16","default":false,"description":"Aggregations"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":1967499105,"node_id":"MDU6TGFiZWwxOTY3NDk5MTA1","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Analytics","name":"Team:Analytics","color":"fef2c0","default":false,"description":"Meta label for analytics/geo team"},{"id":176784422,"node_id":"MDU6TGFiZWwxNzY3ODQ0MjI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/won't%20fix","name":"won't fix","color":"f7c6c7","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-05-24T14:14:06Z","updated_at":"2020-07-08T21:03:24Z","closed_at":"2020-07-08T21:03:24Z","author_association":"NONE","active_lock_reason":null,"body":"\r\n\r\n<!-- Feature request -->\r\n\r\n**Describe the feature**: As of today if a nested aggregate filter is defined post which a reverse nested sub-aggregate is placed the context for the filter is lost for any further nested sub-aggregate. The only resolution for this is to repeat the filter over and over again at each of the sub-aggregate level. This problem has been faced by multiple developer one of the instance being:\r\nhttps://discuss.elastic.co/t/reverse-nested-aggregations-with-filters/125128\r\n\r\nIdeally until and unless a nested sub-aggregate overrides the filter the parent nested filter should be honoured despite the introduction of reverse nesting instead of the same filter being repeated in each of the nested sub-aggregate instance.\r\n\r\nPlease feel free to revert back if you need any additional information from my end.\r\n\r\n(From my end verified the existing list of feature/bug but couldn't find the relevant information, currently I'm using v5.5.2)\r\n\r\n","closed_by":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"performed_via_github_app":null}