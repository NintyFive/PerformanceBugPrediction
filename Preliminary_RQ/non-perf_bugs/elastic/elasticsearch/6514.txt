{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/6514","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6514/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6514/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6514/events","html_url":"https://github.com/elastic/elasticsearch/issues/6514","id":35796436,"node_id":"MDU6SXNzdWUzNTc5NjQzNg==","number":6514,"title":"Indexing: Using _id as object doesnt work for future queries","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2014-06-16T13:36:15Z","updated_at":"2014-12-30T20:04:30Z","closed_at":"2014-12-30T20:04:30Z","author_association":"MEMBER","active_lock_reason":null,"body":"Hey,\n\nhad to describe the issue in one line, here is the possibiltiy to reproduce\n\n```\nDELETE campaigns\nPUT campaigns\n{\n   \"mappings\" : {\n      \"campaign\" : {\n         \"properties\" : {\n            \"location\" : {\n                \"type\": \"geo_shape\",\n                \"tree\": \"quadtree\"\n            }\n         }\n      }\n   }\n}\n\nPOST /campaigns/campaign/1\n{\n  \"location\" : {\n      \"type\" : \"circle\",\n      \"coordinates\" : [45.01, 2.26],\n      \"radius\" : \"9000m\"\n  }\n}\n\nPOST campaigns/campaign/\n{\n  \"_id\": { \"c_id\": \"1891\"},\n  \"location\" : {\n      \"type\" : \"circle\",\n      \"coordinates\" : [45.01, 2.26],\n      \"radius\" : \"9000m\"\n  }\n}\n\nGET campaigns/campaign/_search\n\nGET campaigns/campaign/_search\n{\n    \"query\":{\n        \"filtered\": {\n            \"query\": {\n                \"match_all\": {}\n            },\n            \"filter\": {\n                \"geo_shape\": {\n                    \"location\": {\n                   \"relation\": \"intersects\",\n                        \"shape\": {\n                            \"type\": \"circle\",\n                            \"coordinates\" : [45.01001, 2.26],\n                            \"radius\":\"1m\"\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n```\n\nYou can see the difference between match all and the geo shape query, even though the points are the same. If you remove the `_id` field from the document, everything works, so maybe the IdFieldMapper throws an Exception (rightfully, as an id cannot be an object) and then the rest of the document is not indexed.\n\nIf you replace the `_id` object with a string, you get an exception, that the id values dont match as one ID is autogenerated. Not sure, if this is the desired behaviour.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}