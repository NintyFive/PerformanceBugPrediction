[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/153441431","html_url":"https://github.com/elastic/elasticsearch/issues/14488#issuecomment-153441431","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14488","id":153441431,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MzQ0MTQzMQ==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2015-11-03T18:14:45Z","updated_at":"2015-11-03T18:14:45Z","author_association":"CONTRIBUTOR","body":"on the side: you don't want to enable write to final fields (see https://github.com/elastic/elasticsearch/issues/8175)\n\n> but I do need to serialize an object to a JSON string inside my groovy script.\n\nCan you elaborate more on this? It seems strange for a script to have to do this serialization.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/153460800","html_url":"https://github.com/elastic/elasticsearch/issues/14488#issuecomment-153460800","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14488","id":153460800,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MzQ2MDgwMA==","user":{"login":"federico-peralta-schaffner","id":4276120,"node_id":"MDQ6VXNlcjQyNzYxMjA=","avatar_url":"https://avatars1.githubusercontent.com/u/4276120?v=4","gravatar_id":"","url":"https://api.github.com/users/federico-peralta-schaffner","html_url":"https://github.com/federico-peralta-schaffner","followers_url":"https://api.github.com/users/federico-peralta-schaffner/followers","following_url":"https://api.github.com/users/federico-peralta-schaffner/following{/other_user}","gists_url":"https://api.github.com/users/federico-peralta-schaffner/gists{/gist_id}","starred_url":"https://api.github.com/users/federico-peralta-schaffner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/federico-peralta-schaffner/subscriptions","organizations_url":"https://api.github.com/users/federico-peralta-schaffner/orgs","repos_url":"https://api.github.com/users/federico-peralta-schaffner/repos","events_url":"https://api.github.com/users/federico-peralta-schaffner/events{/privacy}","received_events_url":"https://api.github.com/users/federico-peralta-schaffner/received_events","type":"User","site_admin":false},"created_at":"2015-11-03T19:22:30Z","updated_at":"2015-11-03T19:22:30Z","author_association":"NONE","body":"@rmuir Thanks for the prompt reply!\n\nI don't want to enable writes to final fields. The problem is that the `FastStringUtils` Groovy class attempts to check the `groovy.json.faststringutils.write.to.final.fields` system property (this is Groovy code, not mine, please check `FastStringUtils` line 37). There the security error occurs, since the current security policy is not allowing to read system properties, whatever its value is. My point is that this seems to be a bug, since any Groovy class that internally uses the `FastStringUtils` class fails with a security exception (such as `JsonOutput`, which I'm using in my script).\n\n> > but I do need to serialize an object to a JSON string inside my groovy script\n> \n> Can you elaborate more on this? It seems strange for a script to have to do this serialization.\n\nSure, I have an array of objects in my document and my script serializes this array to a string, which is then stored in a new field of type `string`. But this is required as per the functional specifications. Anyways, even if I could change the requirements or implement some work-around, it wouldn't take too long before someone else attempts to indirectly use the Grovvy's `FastStringUtils` class.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/153476582","html_url":"https://github.com/elastic/elasticsearch/issues/14488#issuecomment-153476582","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14488","id":153476582,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MzQ3NjU4Mg==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2015-11-03T20:25:15Z","updated_at":"2015-11-03T20:25:15Z","author_association":"CONTRIBUTOR","body":"Hi, thanks for the report. I opened a PR for this: https://github.com/elastic/elasticsearch/issues/14500\n\nSeparately, I'm not sure its the best to do json serialization like this inside a script... but it is not dangerous to allow the properties in question to be read.\n","performed_via_github_app":null}]