[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/301459034","html_url":"https://github.com/elastic/elasticsearch/issues/24674#issuecomment-301459034","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24674","id":301459034,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTQ1OTAzNA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-05-15T12:23:05Z","updated_at":"2017-05-15T12:23:05Z","author_association":"CONTRIBUTOR","body":"Hi @trik-1 \r\n\r\nI'm unable to replicate as you haven't provided the various analysis files (eg emoticons, synonyms) etc.  Also, please could you try using the `unified` highlighter instead?  (just set  `\"type\": \"unified\"`) and let me know if the problem disappears?\r\n\r\nthanks","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/301465159","html_url":"https://github.com/elastic/elasticsearch/issues/24674#issuecomment-301465159","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24674","id":301465159,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTQ2NTE1OQ==","user":{"login":"steveodonovan","id":18128367,"node_id":"MDQ6VXNlcjE4MTI4MzY3","avatar_url":"https://avatars3.githubusercontent.com/u/18128367?v=4","gravatar_id":"","url":"https://api.github.com/users/steveodonovan","html_url":"https://github.com/steveodonovan","followers_url":"https://api.github.com/users/steveodonovan/followers","following_url":"https://api.github.com/users/steveodonovan/following{/other_user}","gists_url":"https://api.github.com/users/steveodonovan/gists{/gist_id}","starred_url":"https://api.github.com/users/steveodonovan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/steveodonovan/subscriptions","organizations_url":"https://api.github.com/users/steveodonovan/orgs","repos_url":"https://api.github.com/users/steveodonovan/repos","events_url":"https://api.github.com/users/steveodonovan/events{/privacy}","received_events_url":"https://api.github.com/users/steveodonovan/received_events","type":"User","site_admin":false},"created_at":"2017-05-15T12:51:05Z","updated_at":"2017-05-15T12:51:05Z","author_association":"NONE","body":"Hi @clintongormley Thanks for the quick reply. \r\n\r\nThe problem disappeared with the unified highlighter. Thanks for the work around.\r\n\r\nOne moment, I'll just remove those analysis files and post the changed index","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/301466791","html_url":"https://github.com/elastic/elasticsearch/issues/24674#issuecomment-301466791","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24674","id":301466791,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTQ2Njc5MQ==","user":{"login":"steveodonovan","id":18128367,"node_id":"MDQ6VXNlcjE4MTI4MzY3","avatar_url":"https://avatars3.githubusercontent.com/u/18128367?v=4","gravatar_id":"","url":"https://api.github.com/users/steveodonovan","html_url":"https://github.com/steveodonovan","followers_url":"https://api.github.com/users/steveodonovan/followers","following_url":"https://api.github.com/users/steveodonovan/following{/other_user}","gists_url":"https://api.github.com/users/steveodonovan/gists{/gist_id}","starred_url":"https://api.github.com/users/steveodonovan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/steveodonovan/subscriptions","organizations_url":"https://api.github.com/users/steveodonovan/orgs","repos_url":"https://api.github.com/users/steveodonovan/repos","events_url":"https://api.github.com/users/steveodonovan/events{/privacy}","received_events_url":"https://api.github.com/users/steveodonovan/received_events","type":"User","site_admin":false},"created_at":"2017-05-15T12:57:46Z","updated_at":"2017-05-15T12:57:46Z","author_association":"NONE","body":"```\r\n{  \r\n   \"template\":\"i_users_*\",\r\n   \"settings\":{  \r\n      \"number_of_shards\":10,\r\n      \"number_of_replicas\":1,\r\n      \"index.mapping.total_fields.limit\":\"100\",\r\n      \"index.mapping.depth.limit\":\"1\",\r\n      \"index.mapping.nested_fields.limit\":\"1\",\r\n      \"index.search.slowlog.threshold.query.warn\":\"100ms\",\r\n      \"index.search.slowlog.threshold.fetch.warn\":\"100ms\",\r\n      \"analysis\":{  \r\n         \"char_filter\":{  \r\n            \"zwj_char_filter\":{  \r\n               \"type\":\"mapping\",\r\n               \"mappings\":[  \r\n                  \"\\\\u200D=>\"\r\n               ]\r\n            }\r\n         },\r\n         \"filter\":{  \r\n            \"autocomplete_filter\":{  \r\n               \"type\":\"edge_ngram\",\r\n               \"min_gram\":1,\r\n               \"max_gram\":50\r\n            },\r\n            \"filter_ngrams\":{  \r\n               \"type\":\"ngram\",\r\n               \"min_gram\":1,\r\n               \"max_gram\":50\r\n            },\r\n            \"filter_email\":{  \r\n               \"type\":\"pattern_capture\",\r\n               \"preserve_original\":1,\r\n               \"patterns\":[  \r\n                  \"([^@]+)\",\r\n                  \"(\\\\p{L}+)\",\r\n                  \"(\\\\d+)\",\r\n                  \"@(.+)\"\r\n               ]\r\n            },\r\n            \"punctuation_filter\":{  \r\n               \"type\":\"pattern_replace\",\r\n               \"pattern\":\"\\\\p{Punct}|\\\\uFE0E|\\\\uFE0F|\\\\uD83C\\\\uDFFB|\\\\uD83C\\\\uDFFC|\\\\uD83C\\\\uDFFD|\\\\uD83C\\\\uDFFE|\\\\uD83C\\\\uDFFF\",\r\n               \"replace\":\"\"\r\n            },\r\n            \"remove_empty_filter\":{  \r\n               \"type\":\"length\",\r\n               \"min\":1\r\n            },\r\n            \"filter_doublemetaphone\":{  \r\n               \"type\":\"phonetic\",\r\n               \"encoder\":\"doublemetaphone\",\r\n               \"replace\":false\r\n            }\r\n         },\r\n         \"analyzer\":{  \r\n            \"search_name_analyzer\":{  \r\n               \"type\":\"custom\",\r\n               \"tokenizer\":\"standard\",\r\n               \"filter\":[  \r\n                  \"lowercase\",\r\n                  \"icu_folding\"\r\n               ]\r\n            },\r\n            \"email_analyzer\":{  \r\n               \"filter\":[  \r\n                  \"filter_email\",\r\n                  \"lowercase\",\r\n                  \"unique\"\r\n               ],\r\n               \"tokenizer\":\"uax_url_email\"\r\n            },\r\n            \"doublemetaphone_analyzer\":{  \r\n               \"type\":\"custom\",\r\n               \"tokenizer\":\"standard\",\r\n               \"filter\":[  \r\n                  \"lowercase\",\r\n                  \"icu_folding\",\r\n                  \"filter_doublemetaphone\"\r\n               ]\r\n            },\r\n            \"partial_name\":{  \r\n               \"char_filter\":[  \r\n                  \"zwj_char_filter\"\r\n               ],\r\n               \"tokenizer\":\"whitespace\",\r\n               \"filter\":[  \r\n                  \"lowercase\",\r\n                  \"punctuation_filter\",\r\n                  \"remove_empty_filter\",\r\n                  \"autocomplete_filter\"\r\n               ]\r\n            },\r\n            \"full_name\":{  \r\n               \"char_filter\":[  \r\n                  \"zwj_char_filter\"\r\n               ],\r\n               \"tokenizer\":\"whitespace\",\r\n               \"filter\":[  \r\n                  \"lowercase\",\r\n                  \"punctuation_filter\",\r\n                  \"remove_empty_filter\"\r\n               ]\r\n            },\r\n            \"autocomplete_analyzer\":{  \r\n               \"type\":\"custom\",\r\n               \"tokenizer\":\"standard\",\r\n               \"filter\":[  \r\n                  \"lowercase\",\r\n                  \"icu_folding\",\r\n                  \"autocomplete_filter\"\r\n               ]\r\n            },\r\n            \"partial_middle_name\":{  \r\n               \"char_filter\":[  \r\n                  \"zwj_char_filter\"\r\n               ],\r\n               \"tokenizer\":\"whitespace\",\r\n               \"filter\":[  \r\n                  \"lowercase\",\r\n                  \"punctuation_filter\",\r\n                  \"remove_empty_filter\",\r\n                  \"filter_ngrams\"\r\n               ]\r\n            },\r\n            \"keyword_lowercase\":{  \r\n               \"char_filter\":[  \r\n                  \"zwj_char_filter\"\r\n               ],\r\n               \"tokenizer\":\"keyword\",\r\n               \"filter\":[  \r\n                  \"lowercase\",\r\n                  \"punctuation_filter\",\r\n                  \"remove_empty_filter\"\r\n               ]\r\n            },\r\n            \"partial_name_back\":{  \r\n               \"char_filter\":[  \r\n                  \"zwj_char_filter\"\r\n               ],\r\n               \"tokenizer\":\"whitespace\",\r\n               \"filter\":[  \r\n                  \"lowercase\",\r\n                  \"punctuation_filter\",\r\n                  \"remove_empty_filter\",\r\n                  \"reverse\",\r\n                  \"autocomplete_filter\",\r\n                  \"reverse\"\r\n               ]\r\n            }\r\n         }\r\n      }\r\n   },\r\n   \"mappings\":{  \r\n      \"relation\":{  \r\n         \"_source\":{  \r\n            \"enabled\":true\r\n         },\r\n         \"properties\":{  \r\n            \"id\":{  \r\n               \"type\":\"keyword\"\r\n            },\r\n            \"connection_id\":{  \r\n               \"type\":\"keyword\"\r\n            },\r\n            \"identity_id\":{  \r\n               \"type\":\"keyword\"\r\n            },\r\n            \"identity_ext_id\":{  \r\n               \"type\":\"keyword\"\r\n            },\r\n            \"identity_name\":{  \r\n               \"type\":\"text\",\r\n               \"analyzer\":\"autocomplete_analyzer\",\r\n               \"search_analyzer\":\"search_name_analyzer\",\r\n               \"term_vector\":\"with_positions_offsets\",\r\n               \"fields\":{  \r\n                  \"raw\":{  \r\n                     \"type\":\"keyword\"\r\n                  },\r\n                  \"metaphone\":{  \r\n                     \"type\":\"text\",\r\n                     \"analyzer\":\"doublemetaphone_analyzer\",\r\n                     \"search_analyzer\":\"search_name_analyzer\",\r\n                     \"term_vector\":\"with_positions_offsets\"\r\n                  }\r\n               }\r\n            },\r\n            \"identity_email\":{  \r\n               \"type\":\"keyword\",\r\n               \"fields\":{  \r\n                  \"searchable\":{  \r\n                     \"type\":\"text\",\r\n                     \"analyzer\":\"email_analyzer\"\r\n                  }\r\n               }\r\n            },\r\n            \"identity_type\":{  \r\n               \"type\":\"keyword\"\r\n            },\r\n            \"identity_is_blocked\":{  \r\n               \"type\":\"boolean\"\r\n            },\r\n            \"identity_state\":{  \r\n               \"type\":\"keyword\"\r\n            },\r\n            \"identity_org\":{  \r\n               \"type\":\"keyword\"\r\n            },\r\n            \"identity_photo_url\":{  \r\n               \"type\":\"keyword\"\r\n            },\r\n            \"identity_created_at\":{  \r\n               \"type\":\"date\",\r\n               \"format\":\"epoch_millis\"\r\n            },\r\n            \"identity_updated_at\":{  \r\n               \"type\":\"date\",\r\n               \"format\":\"epoch_millis\"\r\n            },\r\n            \"identity_created_by\":{  \r\n               \"type\":\"keyword\"\r\n            },\r\n            \"identity_updated_by\":{  \r\n               \"type\":\"keyword\"\r\n            },\r\n            \"space_id\":{  \r\n               \"type\":\"keyword\"\r\n            },\r\n            \"space_type\":{  \r\n               \"type\":\"keyword\"\r\n            },\r\n            \"space_name\":{  \r\n               \"analyzer\":\"full_name\",\r\n               \"term_vector\":\"with_positions_offsets\",\r\n               \"type\":\"text\",\r\n               \"fields\":{  \r\n                  \"raw\":{  \r\n                     \"type\":\"keyword\"\r\n                  },\r\n                  \"lowercase\":{  \r\n                     \"analyzer\":\"keyword_lowercase\",\r\n                     \"type\":\"text\"\r\n                  },\r\n                  \"partial_back\":{  \r\n                     \"search_analyzer\":\"full_name\",\r\n                     \"analyzer\":\"partial_name_back\",\r\n                     \"term_vector\":\"with_positions_offsets\",\r\n                     \"type\":\"text\"\r\n                  },\r\n                  \"partial\":{  \r\n                     \"search_analyzer\":\"full_name\",\r\n                     \"analyzer\":\"partial_name\",\r\n                     \"term_vector\":\"with_positions_offsets\",\r\n                     \"type\":\"text\"\r\n                  },\r\n                  \"partial_middle\":{  \r\n                     \"search_analyzer\":\"full_name\",\r\n                     \"analyzer\":\"partial_middle_name\",\r\n                     \"term_vector\":\"with_positions_offsets\",\r\n                     \"type\":\"text\"\r\n                  }\r\n               }\r\n            },\r\n            \"version\":{  \r\n               \"type\":\"long\"\r\n            },\r\n            \"created_at\":{  \r\n               \"type\":\"date\",\r\n               \"format\":\"epoch_millis\"\r\n            },\r\n            \"updated_at\":{  \r\n               \"type\":\"date\",\r\n               \"format\":\"epoch_millis\"\r\n            },\r\n            \"created_by\":{  \r\n               \"type\":\"keyword\"\r\n            },\r\n            \"updated_by\":{  \r\n               \"type\":\"keyword\"\r\n            }\r\n         }\r\n      }\r\n   },\r\n   \"aliases\":{  \r\n      \"a_users\":{  \r\n\r\n      },\r\n      \"a_users_search\":{  \r\n\r\n      }\r\n   }\r\n}\r\n```\r\n\r\nsame error\r\n\r\n```\r\n{\r\n  \"took\": 37,\r\n  \"timed_out\": false,\r\n  \"_shards\": {\r\n    \"total\": 10,\r\n    \"successful\": 9,\r\n    \"failed\": 1,\r\n    \"failures\": [\r\n      {\r\n        \"shard\": 7,\r\n        \"index\": \"a_users_v2\",\r\n        \"node\": \"OsPEy5PDTzqbvcZN3gPr6Q\",\r\n        \"reason\": {\r\n          \"type\": \"array_index_out_of_bounds_exception\",\r\n          \"reason\": \"0\"\r\n        }\r\n      }\r\n    ]\r\n  },\r\n  \"hits\": {\r\n    \"total\": 1,\r\n    \"max_score\": 2.5844476,\r\n    \"hits\": []\r\n  }\r\n}\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/301468330","html_url":"https://github.com/elastic/elasticsearch/issues/24674#issuecomment-301468330","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24674","id":301468330,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTQ2ODMzMA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-05-15T13:03:45Z","updated_at":"2017-05-15T13:03:45Z","author_association":"CONTRIBUTOR","body":"thanks @trik-1 , i'll mark this as adoptme, but it is unlikely to be fixed.  the plan is to remove the other highlighters and just to support the `unified` highlighter going forwards","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/375391349","html_url":"https://github.com/elastic/elasticsearch/issues/24674#issuecomment-375391349","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24674","id":375391349,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NTM5MTM0OQ==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2018-03-22T17:28:48Z","updated_at":"2018-03-22T17:28:48Z","author_association":"MEMBER","body":"The `unified` highlighter can be used to perform highlighting on a field indexed with `term_vector` so I am closing this issue as won't fix (for the `fvh`) since the recreation works with the `unified`. The FVH implementation is in Lucene and did not changed in years so it is unlikely that we'll have a solution for it in a near future. ","performed_via_github_app":null}]