[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/379088","html_url":"https://github.com/elastic/elasticsearch/issues/341#issuecomment-379088","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/341","id":379088,"node_id":"MDEyOklzc3VlQ29tbWVudDM3OTA4OA==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-08-30T16:27:49Z","updated_at":"2010-08-30T16:27:49Z","author_association":"MEMBER","body":"Is there a chance for a \"curl\" recreation of this bug? Easier for me to write a test that recreates it then, and make sure its fixed.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/380251","html_url":"https://github.com/elastic/elasticsearch/issues/341#issuecomment-380251","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/341","id":380251,"node_id":"MDEyOklzc3VlQ29tbWVudDM4MDI1MQ==","user":{"login":"an2deg","id":380882,"node_id":"MDQ6VXNlcjM4MDg4Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/380882?v=4","gravatar_id":"","url":"https://api.github.com/users/an2deg","html_url":"https://github.com/an2deg","followers_url":"https://api.github.com/users/an2deg/followers","following_url":"https://api.github.com/users/an2deg/following{/other_user}","gists_url":"https://api.github.com/users/an2deg/gists{/gist_id}","starred_url":"https://api.github.com/users/an2deg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/an2deg/subscriptions","organizations_url":"https://api.github.com/users/an2deg/orgs","repos_url":"https://api.github.com/users/an2deg/repos","events_url":"https://api.github.com/users/an2deg/events{/privacy}","received_events_url":"https://api.github.com/users/an2deg/received_events","type":"User","site_admin":false},"created_at":"2010-08-31T07:14:22Z","updated_at":"2010-08-31T07:14:22Z","author_association":"NONE","body":"Can't reproduce it with curl, but here it:\n\ncurl -XPUT 'http://localhost:9200/contacts3/'\ncurl -XPUT 'http://localhost:9200/contacts3/contact3/_mapping' -d '\n{\"contact3\": {\"properties\": {\"serialized_object\": {\"index\": \"not_analyzed\", \"type\": \"object\", \"properties\": {\"fields\": {\"type\": \"object\", \"properties\": {\"dates\": {\"type\": \"object\", \"properties\": {\"value\": {\"type\": \"string\"}}}}}}, \"store\": \"yes\"}, \"fields\": {\"type\": \"object\", \"properties\": {\"dates\": {\"type\": \"string\"}}, \"store\": \"yes\"}, \"company_id\": {\"index\": \"not_analyzed\", \"type\": \"string\", \"store\": \"yes\"}, \"is_account\": {\"type\": \"boolean\", \"store\": \"yes\"}, \"id\": {\"type\": \"string\", \"store\": \"yes\"}, \"owner_id\": {\"index\": \"not_analyzed\", \"type\": \"string\", \"store\": \"yes\"}}}}'\n\ncurl -XPUT 'http://localhost:9200/contacts3/contact3/4bf571e8304e747bb9000081' -d '\n{\"serialized_object\": { \"account_id\": null, \"tags\": [], \"fields\": {\"website\": [], \"dates\": [], \"last_name\": [], \"description\": [], \"title\": [], \"first_name\": [{\"note\": \"\", \"modificator\": \"\", \"value\": \"sergei\", \"sequenc \": 0}], \"phone\": [], \"company_name\": [], \"address\": [], \"email\": [{\"note\": \"\", \"modificator\": \"other\", \"value\": \"sergei@kovbasyuk.com.ua\", \"sequence\": 0}, {\"note\": \"\", \"modificator\": \"home\", \"value\": \"webmans2@gmail.com\", \"sequence\": 1}]},  \"updated\": \"2010-08-30 15:43:06+0000\", \"object_type\": \"contact\", \"avatars\": null, \"is_account\": false, \"company_id\": \"4bec433c304e745ad3000009\", \"id\": \"4bf571e8304e747bb9000081\", \"owner_id\": \" bec433c304e745ad3000007\"}, \"account_id\": null, \"fields\": {\"website\": [], \"dates\": [], \"last_name\": [], \"description\": [], \"title\": [], \"first_name\": [\"sergei\", \"1ZjHE5vngEUsRvj0J\"], \"phone\": [], \"company_name\": [], \"address\": [], \"email\": [\"sergei@kovbasyuk.com.ua\", \"webmans2@gmail.com\", \"1ZjHE5vngEUsRvj0J\"], \"name\": [\"sergei\", \"1ZjHE5vngEUsRvj0J\"], \"avatars\": null}, \"company_id\": \"4bec433c304e745ad3000009\", \"is_account\": false, \"id\": \"4bf571e8304e747bb9000081\", \"owner_id\": \"4bec433c304e745ad3000007\", \"updated\": \"2010-08-30 15:43:06+0000\"}\n'\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/380343","html_url":"https://github.com/elastic/elasticsearch/issues/341#issuecomment-380343","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/341","id":380343,"node_id":"MDEyOklzc3VlQ29tbWVudDM4MDM0Mw==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-08-31T08:21:59Z","updated_at":"2010-08-31T08:21:59Z","author_association":"MEMBER","body":"can you recreate this in a different way so I can easily run it?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/380425","html_url":"https://github.com/elastic/elasticsearch/issues/341#issuecomment-380425","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/341","id":380425,"node_id":"MDEyOklzc3VlQ29tbWVudDM4MDQyNQ==","user":{"login":"an2deg","id":380882,"node_id":"MDQ6VXNlcjM4MDg4Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/380882?v=4","gravatar_id":"","url":"https://api.github.com/users/an2deg","html_url":"https://github.com/an2deg","followers_url":"https://api.github.com/users/an2deg/followers","following_url":"https://api.github.com/users/an2deg/following{/other_user}","gists_url":"https://api.github.com/users/an2deg/gists{/gist_id}","starred_url":"https://api.github.com/users/an2deg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/an2deg/subscriptions","organizations_url":"https://api.github.com/users/an2deg/orgs","repos_url":"https://api.github.com/users/an2deg/repos","events_url":"https://api.github.com/users/an2deg/events{/privacy}","received_events_url":"https://api.github.com/users/an2deg/received_events","type":"User","site_admin":false},"created_at":"2010-08-31T09:33:49Z","updated_at":"2010-08-31T09:33:49Z","author_association":"NONE","body":"Ok, here is updated test case:\n1) Index first document with \"avatars\": {}\n2) Then index document with \"avatars\": null and get java.lang.NullPointerException\n\ncurl -XDELETE 'http://localhost:9200/contacts3/'\n\ncurl -XPUT 'http://localhost:9200/contacts3/'\n\ncurl -XPUT 'http://localhost:9200/contacts3/contact3/_mapping' -d '\n{\"contact3\": {\"properties\": {\"serialized_object\": {\"index\": \"not_analyzed\", \"type\": \"object\", \"properties\": {\"fields\": {\"type\": \"object\", \"properties\": {\"dates\": {\"type\": \"object\", \"properties\": {\"value\": {\"type\": \"string\"}}}}}}, \"store\": \"yes\"}, \"fields\": {\"type\": \"object\", \"properties\": {\"dates\": {\"type\": \"string\"}}, \"store\": \"yes\"}, \"company_id\": {\"index\": \"not_analyzed\", \"type\": \"string\", \"store\": \"yes\"}, \"is_account\": {\"type\": \"boolean\", \"store\": \"yes\"}, \"id\": {\"type\": \"string\", \"store\": \"yes\"}, \"owner_id\": {\"index\": \"not_analyzed\", \"type\": \"string\", \"store\": \"yes\"}}}}'\n\ncurl -XPUT 'http://localhost:9200/contacts3/contact3/4bf571e8304e747bb9000081' -d '\n{\"serialized_object\": { \"account_id\": null, \"tags\": [], \"fields\": {\"website\": [], \"dates\": [], \"last_name\": [], \"description\": [], \"title\": [], \"first_name\": [{\"note\": \"\", \"modificator\": \"\", \"value\": \"sergei\", \"sequenc \": 0}], \"phone\": [], \"company_name\": [], \"address\": [], \"email\": [{\"note\": \"\", \"modificator\": \"other\", \"value\": \"sergei@kovbasyuk.com.ua\", \"sequence\": 0}, {\"note\": \"\", \"modificator\": \"home\", \"value\": \"webmans2@gmail.com\", \"sequence\": 1}]}, \"updated\": \"2010-08-30 15:43:06+0000\", \"object_type\": \"contact\", \"avatars\": {}, \"is_account\": false, \"company_id\": \"4bec433c304e745ad3000009\", \"id\": \"4bf571e8304e747bb9000081\", \"owner_id\": \" bec433c304e745ad3000007\"}, \"account_id\": null, \"fields\": {\"website\": [], \"dates\": [], \"last_name\": [], \"description\": [], \"title\": [], \"first_name\": [\"sergei\", \"1ZjHE5vngEUsRvj0J\"], \"phone\": [], \"company_name\": [], \"address\": [], \"email\": [\"sergei@kovbasyuk.com.ua\", \"webmans2@gmail.com\", \"1ZjHE5vngEUsRvj0J\"], \"name\": [\"sergei\", \"1ZjHE5vngEUsRvj0J\"], \"avatars\": {}}, \"company_id\": \"4bec433c304e745ad3000009\", \"is_account\": false, \"id\": \"4bf571e8304e747bb9000081\", \"owner_id\": \"4bec433c304e745ad3000007\", \"updated\": \"2010-08-30 15:43:06+0000\"} '\n\ncurl -XPUT 'http://localhost:9200/contacts3/contact3/4bf571e8304e747bb9000082' -d '\n{\"serialized_object\": { \"account_id\": null, \"tags\": [], \"fields\": {\"website\": [], \"dates\": [], \"last_name\": [], \"description\": [], \"title\": [], \"first_name\": [{\"note\": \"\", \"modificator\": \"\", \"value\": \"sergei\", \"sequenc \": 0}], \"phone\": [], \"company_name\": [], \"address\": [], \"email\": [{\"note\": \"\", \"modificator\": \"other\", \"value\": \"sergei@kovbasyuk.com.ua\", \"sequence\": 0}, {\"note\": \"\", \"modificator\": \"home\", \"value\": \"webmans2@gmail.com\", \"sequence\": 1}]}, \"updated\": \"2010-08-30 15:43:06+0000\", \"object_type\": \"contact\", \"avatars\": null, \"is_account\": false, \"company_id\": \"4bec433c304e745ad3000009\", \"id\": \"4bf571e8304e747bb9000082\", \"owner_id\": \" bec433c304e745ad3000007\"}, \"account_id\": null, \"fields\": {\"website\": [], \"dates\": [], \"last_name\": [], \"description\": [], \"title\": [], \"first_name\": [\"sergei\", \"1ZjHE5vngEUsRvj0J\"], \"phone\": [], \"company_name\": [], \"address\": [], \"email\": [\"sergei@kovbasyuk.com.ua\", \"webmans2@gmail.com\", \"1ZjHE5vngEUsRvj0J\"], \"name\": [\"sergei\", \"1ZjHE5vngEUsRvj0J\"], \"avatars\": null}, \"company_id\": \"4bec433c304e745ad3000009\", \"is_account\": false, \"id\": \"4bf571e8304e747bb9000082\", \"owner_id\": \"4bec433c304e745ad3000007\", \"updated\": \"2010-08-30 15:43:06+0000\"} '\n\nOn last command I get {\"error\":\"ReplicationShardOperationFailedException[[contacts3][1] ]; nested: \"} in console and traceback in logs\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/380499","html_url":"https://github.com/elastic/elasticsearch/issues/341#issuecomment-380499","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/341","id":380499,"node_id":"MDEyOklzc3VlQ29tbWVudDM4MDQ5OQ==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-08-31T10:33:09Z","updated_at":"2010-08-31T10:33:09Z","author_association":"MEMBER","body":"found the problem, writing a test for it and will push a fix shortly\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/380500","html_url":"https://github.com/elastic/elasticsearch/issues/341#issuecomment-380500","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/341","id":380500,"node_id":"MDEyOklzc3VlQ29tbWVudDM4MDUwMA==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-08-31T10:34:00Z","updated_at":"2010-08-31T10:34:00Z","author_association":"MEMBER","body":"Mapper: Failure to handle null valued objects (\"obj1\" : null), closed by a3efa21d718e3f1230a5fdbbc530919e9031df7f.\n","performed_via_github_app":null}]