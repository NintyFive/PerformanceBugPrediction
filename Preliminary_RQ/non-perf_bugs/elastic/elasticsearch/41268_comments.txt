[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/483784095","html_url":"https://github.com/elastic/elasticsearch/issues/41268#issuecomment-483784095","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41268","id":483784095,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4Mzc4NDA5NQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-04-16T18:09:45Z","updated_at":"2019-04-16T18:09:45Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/489963066","html_url":"https://github.com/elastic/elasticsearch/issues/41268#issuecomment-489963066","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41268","id":489963066,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4OTk2MzA2Ng==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2019-05-07T07:15:23Z","updated_at":"2019-05-07T07:15:23Z","author_association":"CONTRIBUTOR","body":"Logs are lost here and no recent failures -> closing","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/496109047","html_url":"https://github.com/elastic/elasticsearch/issues/41268#issuecomment-496109047","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41268","id":496109047,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NjEwOTA0Nw==","user":{"login":"iverase","id":29038686,"node_id":"MDQ6VXNlcjI5MDM4Njg2","avatar_url":"https://avatars1.githubusercontent.com/u/29038686?v=4","gravatar_id":"","url":"https://api.github.com/users/iverase","html_url":"https://github.com/iverase","followers_url":"https://api.github.com/users/iverase/followers","following_url":"https://api.github.com/users/iverase/following{/other_user}","gists_url":"https://api.github.com/users/iverase/gists{/gist_id}","starred_url":"https://api.github.com/users/iverase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iverase/subscriptions","organizations_url":"https://api.github.com/users/iverase/orgs","repos_url":"https://api.github.com/users/iverase/repos","events_url":"https://api.github.com/users/iverase/events{/privacy}","received_events_url":"https://api.github.com/users/iverase/received_events","type":"User","site_admin":false},"created_at":"2019-05-27T07:27:38Z","updated_at":"2019-05-28T01:55:53Z","author_association":"CONTRIBUTOR","body":"This test failed again today in branch 7.2, logs can be found here:\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.2+matrix-java-periodic/ES_BUILD_JAVA=openjdk12,ES_RUNTIME_JAVA=zulu11,nodes=immutable&&linux&&docker/7/console\r\n\r\nThis is the stack trace when test seems to fail:\r\n\r\n```\r\n08:00:13   1> [2019-05-27T15:30:11,861][INFO ][o.e.x.c.IndexFollowingIT ] [testFollowIndex_backlog] --> asserting seq_no_stats between index1 and index2\r\n08:00:13   1> [2019-05-27T15:30:11,887][INFO ][o.e.x.c.a.ShardFollowNodeTask] [follower0] [index2][0] shard follow task has been stopped\r\n08:00:13   1> [2019-05-27T15:30:11,910][INFO ][o.e.x.c.a.ShardFollowNodeTask] [follower1] [index2][1] shard follow task has been stopped\r\n08:00:13   1> [2019-05-27T15:30:11,966][INFO ][o.e.c.m.MetaDataDeleteIndexService] [leader0] [index1/fzvi0S-DR8GBNJ4HNxxiGw] deleting index\r\n08:00:13   1> [2019-05-27T15:30:12,255][INFO ][o.e.c.m.MetaDataDeleteIndexService] [follower0] [index2/VyRPF0jFTk6N1d6aS_VFfA] deleting index\r\n08:00:13   1> [2019-05-27T15:30:12,332][INFO ][o.e.x.c.IndexFollowingIT ] [testFollowIndex_backlog] after test\r\n08:00:13   1> [2019-05-27T15:30:12,336][INFO ][o.e.n.Node               ] [suite] stopping ...\r\n08:00:13   1> [2019-05-27T15:30:12,351][INFO ][o.e.n.Node               ] [suite] stopped\r\n08:00:13   1> [2019-05-27T15:30:12,351][INFO ][o.e.n.Node               ] [suite] closing ...\r\n08:00:13   1> [2019-05-27T15:30:12,353][INFO ][o.e.c.s.ClusterApplierService] [leader1] master node changed {previous [{leader0}{0BOPY_IMT6GWLBs5hS3m7A}{1GFWshYAQO2LNUyZnrCeuA}{127.0.0.1}{127.0.0.1:40639}{xpack.installed=true}], current []}, term: 1, version: 122, reason: becoming candidate: onLeaderFailure\r\n08:00:13   1> [2019-05-27T15:30:12,353][WARN ][o.e.t.RemoteClusterConnection] [follower1] fetching nodes from external cluster [leader_cluster] failed\r\n08:00:13   1> org.elasticsearch.transport.ConnectTransportException: [][127.0.0.1:40639] connect_exception\r\n08:00:13   1> \tat org.elasticsearch.transport.TcpTransport$ChannelsConnectedListener.onFailure(TcpTransport.java:972) ~[elasticsearch-7.2.0-SNAPSHOT.jar:7.2.0-SNAPSHOT]\r\n08:00:13   1> \tat org.elasticsearch.action.ActionListener.lambda$toBiConsumer$3(ActionListener.java:161) ~[elasticsearch-7.2.0-SNAPSHOT.jar:7.2.0-SNAPSHOT]\r\n08:00:13   1> \tat org.elasticsearch.common.concurrent.CompletableContext.lambda$addListener$0(CompletableContext.java:42) ~[elasticsearch-core-7.2.0-SNAPSHOT.jar:7.2.0-SNAPSHOT]\r\n08:00:13   1> \tat java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859) ~[?:?]\r\n08:00:13   1> \tat java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:837) ~[?:?]\r\n08:00:13   1> \tat java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506) ~[?:?]\r\n08:00:13   1> \tat java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088) ~[?:?]\r\n08:00:13   1> \tat org.elasticsearch.common.concurrent.CompletableContext.completeExceptionally(CompletableContext.java:57) ~[elasticsearch-core-7.2.0-SNAPSHOT.jar:7.2.0-SNAPSHOT]\r\n08:00:13   1> \tat org.elasticsearch.nio.SocketChannelContext.connect(SocketChannelContext.java:120) ~[elasticsearch-nio-7.2.0-SNAPSHOT.jar:7.2.0-SNAPSHOT]\r\n08:00:13   1> \tat org.elasticsearch.nio.EventHandler.handleConnect(EventHandler.java:97) ~[elasticsearch-nio-7.2.0-SNAPSHOT.jar:7.2.0-SNAPSHOT]\r\n08:00:13   1> \tat org.elasticsearch.transport.nio.TestEventHandler.handleConnect(TestEventHandler.java:97) ~[framework-7.2.0-SNAPSHOT.jar:7.2.0-SNAPSHOT]\r\n08:00:13   1> \tat org.elasticsearch.nio.NioSelector.attemptConnect(NioSelector.java:405) ~[elasticsearch-nio-7.2.0-SNAPSHOT.jar:7.2.0-SNAPSHOT]\r\n08:00:13   1> \tat org.elasticsearch.nio.NioSelector.setUpNewChannels(NioSelector.java:422) ~[elasticsearch-nio-7.2.0-SNAPSHOT.jar:7.2.0-SNAPSHOT]\r\n08:00:13   1> \tat org.elasticsearch.nio.NioSelector.preSelect(NioSelector.java:261) ~[elasticsearch-nio-7.2.0-SNAPSHOT.jar:7.2.0-SNAPSHOT]\r\n08:00:13   1> \tat org.elasticsearch.nio.NioSelector.singleLoop(NioSelector.java:153) ~[elasticsearch-nio-7.2.0-SNAPSHOT.jar:7.2.0-SNAPSHOT]\r\n08:00:13   1> \tat org.elasticsearch.nio.NioSelector.runLoop(NioSelector.java:129) ~[elasticsearch-nio-7.2.0-SNAPSHOT.jar:7.2.0-SNAPSHOT]\r\n08:00:13   1> \tat java.lang.Thread.run(Thread.java:834) [?:?]\r\n08:00:13   1> Caused by: java.net.ConnectException: Connection refused\r\n08:00:13   1> \tat sun.nio.ch.SocketChannelImpl.checkConnect(Native Method) ~[?:?]\r\n08:00:13   1> \tat sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:779) ~[?:?]\r\n08:00:13   1> \tat org.elasticsearch.nio.SocketChannelContext.connect(SocketChannelContext.java:117) ~[elasticsearch-nio-7.2.0-SNAPSHOT.jar:7.2.0-SNAPSHOT]\r\n08:00:13   1> \t... 8 more\r\n08:00:13   1> [2019-05-27T15:30:12,354][WARN ][o.e.t.RemoteClusterConnection] [follower0] fetching nodes from external cluster [leader_cluster] failed\r\n08:00:13   1> org.elasticsearch.transport.ConnectTransportException: [][127.0.0.1:40639] connect_exception\r\n08:00:13   1> \tat org.elasticsearch.transport.TcpTransport$ChannelsConnectedListener.onFailure(TcpTransport.java:972) ~[elasticsearch-7.2.0-SNAPSHOT.jar:7.2.0-SNAPSHOT]\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/496471867","html_url":"https://github.com/elastic/elasticsearch/issues/41268#issuecomment-496471867","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41268","id":496471867,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NjQ3MTg2Nw==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2019-05-28T11:10:46Z","updated_at":"2019-05-28T11:10:46Z","author_association":"MEMBER","body":"Another one in https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.x+matrix-java-periodic/ES_BUILD_JAVA=openjdk12,ES_RUNTIME_JAVA=zulu12,nodes=immutable&&linux&&docker/201/console\r\n\r\nreproduction line (does not reproduce locally):\r\n\r\n```\r\n./gradlew :x-pack:plugin:ccr:internalClusterTest --tests \"org.elasticsearch.xpack.ccr.IndexFollowingIT.testCloseLeaderIndex\" -Dtests.seed=B5A055715D18E549 -Dtests.security.manager=true -Dtests.locale=sw -Dtests.timezone=Brazil/DeNoronha -Dcompiler.java=12 -Druntime.java=12\r\n```\r\n\r\nerror trace:\r\n\r\n```\r\n[index2/daooU8Z6Tbud__bYXQc_SA] IndexClosedException[closed]\r\n\tat __randomizedtesting.SeedInfo.seed([B5A055715D18E549:FD00D2F4EC50B542]:0)\r\n\tat org.elasticsearch.cluster.metadata.IndexNameExpressionResolver.concreteIndices(IndexNameExpressionResolver.java:234)\r\n\tat org.elasticsearch.cluster.metadata.IndexNameExpressionResolver.concreteIndices(IndexNameExpressionResolver.java:138)\r\n\tat org.elasticsearch.action.search.TransportSearchAction.resolveLocalIndices(TransportSearchAction.java:456)\r\n\tat org.elasticsearch.action.search.TransportSearchAction.executeSearch(TransportSearchAction.java:470)\r\n\tat org.elasticsearch.action.search.TransportSearchAction.executeLocalSearch(TransportSearchAction.java:399)\r\n\tat org.elasticsearch.action.search.TransportSearchAction.lambda$doExecute$3(TransportSearchAction.java:211)\r\n\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:62)\r\n\tat org.elasticsearch.action.search.TransportSearchAction.doExecute(TransportSearchAction.java:239)\r\n\tat org.elasticsearch.action.search.TransportSearchAction.doExecute(TransportSearchAction.java:86)\r\n\tat org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(TransportAction.java:145)\r\n\tat org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:121)\r\n\tat org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:64)\r\n\tat org.elasticsearch.client.node.NodeClient.executeLocally(NodeClient.java:83)\r\n\tat org.elasticsearch.client.node.NodeClient.doExecute(NodeClient.java:72)\r\n\tat org.elasticsearch.client.support.AbstractClient.execute(AbstractClient.java:394)\r\n\tat org.elasticsearch.client.support.AbstractClient.execute(AbstractClient.java:383)\r\n\tat org.elasticsearch.action.ActionRequestBuilder.execute(ActionRequestBuilder.java:45)\r\n\tat org.elasticsearch.action.ActionRequestBuilder.get(ActionRequestBuilder.java:52)\r\n\tat org.elasticsearch.xpack.ccr.IndexFollowingIT.lambda$testCloseLeaderIndex$17(IndexFollowingIT.java:628)\r\n\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:850)\r\n\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:836)\r\n\tat org.elasticsearch.xpack.ccr.IndexFollowingIT.testCloseLeaderIndex(IndexFollowingIT.java:628)\r\n[...]\r\n```\r\n\r\n[Full output from the test failure](https://github.com/elastic/elasticsearch/files/3227293/full_output.txt)\r\n\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/500602554","html_url":"https://github.com/elastic/elasticsearch/issues/41268#issuecomment-500602554","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41268","id":500602554,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDYwMjU1NA==","user":{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false},"created_at":"2019-06-10T21:30:17Z","updated_at":"2019-06-10T21:30:17Z","author_association":"MEMBER","body":"I opened https://github.com/elastic/elasticsearch/pull/43067.","performed_via_github_app":null}]