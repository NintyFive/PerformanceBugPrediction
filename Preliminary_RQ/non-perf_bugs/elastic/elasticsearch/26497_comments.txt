[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/327790793","html_url":"https://github.com/elastic/elasticsearch/issues/26497#issuecomment-327790793","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26497","id":327790793,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzc5MDc5Mw==","user":{"login":"aslamy","id":11768586,"node_id":"MDQ6VXNlcjExNzY4NTg2","avatar_url":"https://avatars3.githubusercontent.com/u/11768586?v=4","gravatar_id":"","url":"https://api.github.com/users/aslamy","html_url":"https://github.com/aslamy","followers_url":"https://api.github.com/users/aslamy/followers","following_url":"https://api.github.com/users/aslamy/following{/other_user}","gists_url":"https://api.github.com/users/aslamy/gists{/gist_id}","starred_url":"https://api.github.com/users/aslamy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aslamy/subscriptions","organizations_url":"https://api.github.com/users/aslamy/orgs","repos_url":"https://api.github.com/users/aslamy/repos","events_url":"https://api.github.com/users/aslamy/events{/privacy}","received_events_url":"https://api.github.com/users/aslamy/received_events","type":"User","site_admin":false},"created_at":"2017-09-07T12:56:21Z","updated_at":"2017-09-07T12:56:58Z","author_association":"NONE","body":"I have synonym token filter like : \"united kingdom , uk => united kingdom , uk\".\r\nWhen I use my analyser then I get wierd tokens:\r\n```\r\n{\r\n  \"analyzer\" : \"custom_analyzer\",\r\n  \"text\" : [\"UK comprises four countries\"]\r\n}\r\n{\r\n\t\"tokens\": [\r\n\t\t{\r\n\t\t\t\"token\": \"united\",\r\n\t\t\t\"start_offset\": 0,\r\n\t\t\t\"end_offset\": 2,\r\n\t\t\t\"type\": \"SYNONYM\",\r\n\t\t\t\"position\": 0\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"token\": \"uk\",\r\n\t\t\t\"start_offset\": 0,\r\n\t\t\t\"end_offset\": 2,\r\n\t\t\t\"type\": \"SYNONYM\",\r\n\t\t\t\"position\": 0\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"token\": \"comprises\",\r\n\t\t\t\"start_offset\": 3,\r\n\t\t\t\"end_offset\": 12,\r\n\t\t\t\"type\": \"<ALPHANUM>\",\r\n\t\t\t\"position\": 1\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"token\": \"kingdom\",\r\n\t\t\t\"start_offset\": 3,\r\n\t\t\t\"end_offset\": 12,\r\n\t\t\t\"type\": \"SYNONYM\",\r\n\t\t\t\"position\": 1\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"token\": \"four\",\r\n\t\t\t\"start_offset\": 13,\r\n\t\t\t\"end_offset\": 17,\r\n\t\t\t\"type\": \"<ALPHANUM>\",\r\n\t\t\t\"position\": 2\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"token\": \"countries\",\r\n\t\t\t\"start_offset\": 18,\r\n\t\t\t\"end_offset\": 27,\r\n\t\t\t\"type\": \"<ALPHANUM>\",\r\n\t\t\t\"position\": 3\r\n\t\t}\r\n\t]\r\n}\r\n```\r\nToken comprises and kingdom has incorrect order.  Could this be the reason that the highlighter does not work properly?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/327797743","html_url":"https://github.com/elastic/elasticsearch/issues/26497#issuecomment-327797743","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26497","id":327797743,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzc5Nzc0Mw==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2017-09-07T13:23:40Z","updated_at":"2017-09-07T13:23:40Z","author_association":"MEMBER","body":"> Could this be the reason that the highlighter does not work properly?\r\n\r\nYes, the default `synonym` filter is not able to handle multi-word synonyms expansion correctly. \r\nIn 5.x a new filter called `synonym_graph` has been added, it works correctly with multi-words synonym expansion:\r\nhttps://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-synonym-graph-tokenfilter.html\r\nIt must be applied at query time only (`search_analyzer`) and fixes issues when highlighting multi-word synonyms.\r\nI'll add a note in the documentation of the `synonym` filter.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/327800175","html_url":"https://github.com/elastic/elasticsearch/issues/26497#issuecomment-327800175","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26497","id":327800175,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzgwMDE3NQ==","user":{"login":"aslamy","id":11768586,"node_id":"MDQ6VXNlcjExNzY4NTg2","avatar_url":"https://avatars3.githubusercontent.com/u/11768586?v=4","gravatar_id":"","url":"https://api.github.com/users/aslamy","html_url":"https://github.com/aslamy","followers_url":"https://api.github.com/users/aslamy/followers","following_url":"https://api.github.com/users/aslamy/following{/other_user}","gists_url":"https://api.github.com/users/aslamy/gists{/gist_id}","starred_url":"https://api.github.com/users/aslamy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aslamy/subscriptions","organizations_url":"https://api.github.com/users/aslamy/orgs","repos_url":"https://api.github.com/users/aslamy/repos","events_url":"https://api.github.com/users/aslamy/events{/privacy}","received_events_url":"https://api.github.com/users/aslamy/received_events","type":"User","site_admin":false},"created_at":"2017-09-07T13:32:20Z","updated_at":"2017-09-07T13:32:20Z","author_association":"NONE","body":"Thank you !","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/352822141","html_url":"https://github.com/elastic/elasticsearch/issues/26497#issuecomment-352822141","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26497","id":352822141,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjgyMjE0MQ==","user":{"login":"weberhofer","id":793251,"node_id":"MDQ6VXNlcjc5MzI1MQ==","avatar_url":"https://avatars0.githubusercontent.com/u/793251?v=4","gravatar_id":"","url":"https://api.github.com/users/weberhofer","html_url":"https://github.com/weberhofer","followers_url":"https://api.github.com/users/weberhofer/followers","following_url":"https://api.github.com/users/weberhofer/following{/other_user}","gists_url":"https://api.github.com/users/weberhofer/gists{/gist_id}","starred_url":"https://api.github.com/users/weberhofer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weberhofer/subscriptions","organizations_url":"https://api.github.com/users/weberhofer/orgs","repos_url":"https://api.github.com/users/weberhofer/repos","events_url":"https://api.github.com/users/weberhofer/events{/privacy}","received_events_url":"https://api.github.com/users/weberhofer/received_events","type":"User","site_admin":false},"created_at":"2017-12-19T17:02:53Z","updated_at":"2017-12-19T17:02:53Z","author_association":"NONE","body":"This issue might be related to and been fixed with #26097 in version 6.1.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/372976627","html_url":"https://github.com/elastic/elasticsearch/issues/26497#issuecomment-372976627","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26497","id":372976627,"node_id":"MDEyOklzc3VlQ29tbWVudDM3Mjk3NjYyNw==","user":{"login":"romseygeek","id":1347065,"node_id":"MDQ6VXNlcjEzNDcwNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/1347065?v=4","gravatar_id":"","url":"https://api.github.com/users/romseygeek","html_url":"https://github.com/romseygeek","followers_url":"https://api.github.com/users/romseygeek/followers","following_url":"https://api.github.com/users/romseygeek/following{/other_user}","gists_url":"https://api.github.com/users/romseygeek/gists{/gist_id}","starred_url":"https://api.github.com/users/romseygeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/romseygeek/subscriptions","organizations_url":"https://api.github.com/users/romseygeek/orgs","repos_url":"https://api.github.com/users/romseygeek/repos","events_url":"https://api.github.com/users/romseygeek/events{/privacy}","received_events_url":"https://api.github.com/users/romseygeek/received_events","type":"User","site_admin":false},"created_at":"2018-03-14T10:38:13Z","updated_at":"2018-03-14T10:38:13Z","author_association":"CONTRIBUTOR","body":"Fixed by #26097","performed_via_github_app":null}]