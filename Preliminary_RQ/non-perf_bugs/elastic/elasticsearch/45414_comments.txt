[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/520090147","html_url":"https://github.com/elastic/elasticsearch/issues/45414#issuecomment-520090147","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45414","id":520090147,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDA5MDE0Nw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-08-09T23:01:17Z","updated_at":"2019-08-09T23:01:17Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/520526081","html_url":"https://github.com/elastic/elasticsearch/issues/45414#issuecomment-520526081","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45414","id":520526081,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDUyNjA4MQ==","user":{"login":"hub-cap","id":613352,"node_id":"MDQ6VXNlcjYxMzM1Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/613352?v=4","gravatar_id":"","url":"https://api.github.com/users/hub-cap","html_url":"https://github.com/hub-cap","followers_url":"https://api.github.com/users/hub-cap/followers","following_url":"https://api.github.com/users/hub-cap/following{/other_user}","gists_url":"https://api.github.com/users/hub-cap/gists{/gist_id}","starred_url":"https://api.github.com/users/hub-cap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hub-cap/subscriptions","organizations_url":"https://api.github.com/users/hub-cap/orgs","repos_url":"https://api.github.com/users/hub-cap/repos","events_url":"https://api.github.com/users/hub-cap/events{/privacy}","received_events_url":"https://api.github.com/users/hub-cap/received_events","type":"User","site_admin":false},"created_at":"2019-08-12T17:48:58Z","updated_at":"2019-08-12T17:48:58Z","author_association":"CONTRIBUTOR","body":"Thank you for the submission. \r\n\r\nWhomever is going to be taking on this work, it will not be a small task. I would like to see client classes created for the request and response, to decouple from the server side classes, as the first step. These classes will (possibly) be leaner than the server side classes as well. The validation should be moved into constructors where possible as well. Then the API will need to be deprecated using the old classes and new methods for the new classes. <3 to whomever would like to take it on :dagger: :boom: ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/522307951","html_url":"https://github.com/elastic/elasticsearch/issues/45414#issuecomment-522307951","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45414","id":522307951,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjMwNzk1MQ==","user":{"login":"jesinity","id":1146901,"node_id":"MDQ6VXNlcjExNDY5MDE=","avatar_url":"https://avatars1.githubusercontent.com/u/1146901?v=4","gravatar_id":"","url":"https://api.github.com/users/jesinity","html_url":"https://github.com/jesinity","followers_url":"https://api.github.com/users/jesinity/followers","following_url":"https://api.github.com/users/jesinity/following{/other_user}","gists_url":"https://api.github.com/users/jesinity/gists{/gist_id}","starred_url":"https://api.github.com/users/jesinity/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jesinity/subscriptions","organizations_url":"https://api.github.com/users/jesinity/orgs","repos_url":"https://api.github.com/users/jesinity/repos","events_url":"https://api.github.com/users/jesinity/events{/privacy}","received_events_url":"https://api.github.com/users/jesinity/received_events","type":"User","site_admin":false},"created_at":"2019-08-18T10:01:53Z","updated_at":"2019-08-18T10:01:53Z","author_association":"CONTRIBUTOR","body":"I never contributed actively to the project bit I think I could Pick It up.\r\n\r\nAbout the approach suggested, you mean that `Request` and `Response` issued by the HLRC should not be those used in the server code base?\r\nIf so I think this approach Is correct.\r\n\r\nLooking to other issues in HLRC such as #41228 and #29184 the approach you suggest seems the only way to decouple the HLRC from server dependencies, as the server requests and responses are tighty bound to core libraries and classes ( such ascfor example `ElasticSearchException`, `ExceptionHelper`, `StreamInput` and `StreamOutput` ).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/524408386","html_url":"https://github.com/elastic/elasticsearch/issues/45414#issuecomment-524408386","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45414","id":524408386,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDQwODM4Ng==","user":{"login":"hub-cap","id":613352,"node_id":"MDQ6VXNlcjYxMzM1Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/613352?v=4","gravatar_id":"","url":"https://api.github.com/users/hub-cap","html_url":"https://github.com/hub-cap","followers_url":"https://api.github.com/users/hub-cap/followers","following_url":"https://api.github.com/users/hub-cap/following{/other_user}","gists_url":"https://api.github.com/users/hub-cap/gists{/gist_id}","starred_url":"https://api.github.com/users/hub-cap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hub-cap/subscriptions","organizations_url":"https://api.github.com/users/hub-cap/orgs","repos_url":"https://api.github.com/users/hub-cap/repos","events_url":"https://api.github.com/users/hub-cap/events{/privacy}","received_events_url":"https://api.github.com/users/hub-cap/received_events","type":"User","site_admin":false},"created_at":"2019-08-23T18:02:07Z","updated_at":"2019-08-23T18:02:07Z","author_association":"CONTRIBUTOR","body":"@jesinity It would be great for you to do. You are correct in that many of those classes do not need to be present in the client. We also sometimes relax the parameters, for instance an enum server side might just be a string client side without strict validation (it helps for backward comparability). Also, if you look at some of the tests, you can see that unless a request has a body, it should not have a toXContent, because its not needed. The tests implement that portion of the code.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/524409902","html_url":"https://github.com/elastic/elasticsearch/issues/45414#issuecomment-524409902","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45414","id":524409902,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDQwOTkwMg==","user":{"login":"hub-cap","id":613352,"node_id":"MDQ6VXNlcjYxMzM1Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/613352?v=4","gravatar_id":"","url":"https://api.github.com/users/hub-cap","html_url":"https://github.com/hub-cap","followers_url":"https://api.github.com/users/hub-cap/followers","following_url":"https://api.github.com/users/hub-cap/following{/other_user}","gists_url":"https://api.github.com/users/hub-cap/gists{/gist_id}","starred_url":"https://api.github.com/users/hub-cap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hub-cap/subscriptions","organizations_url":"https://api.github.com/users/hub-cap/orgs","repos_url":"https://api.github.com/users/hub-cap/repos","events_url":"https://api.github.com/users/hub-cap/events{/privacy}","received_events_url":"https://api.github.com/users/hub-cap/received_events","type":"User","site_admin":false},"created_at":"2019-08-23T18:06:57Z","updated_at":"2019-08-23T18:06:57Z","author_association":"CONTRIBUTOR","body":"A good example of not needing complex objects is the `TaskInfo`. For instance you could just have a `String` for the taskId, instead of a complex object. Im sure there are others, just be weary of anything thats more complex than a primitive, unless its storing an internal object with multiple inner fields","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/525789143","html_url":"https://github.com/elastic/elasticsearch/issues/45414#issuecomment-525789143","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45414","id":525789143,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTc4OTE0Mw==","user":{"login":"hub-cap","id":613352,"node_id":"MDQ6VXNlcjYxMzM1Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/613352?v=4","gravatar_id":"","url":"https://api.github.com/users/hub-cap","html_url":"https://github.com/hub-cap","followers_url":"https://api.github.com/users/hub-cap/followers","following_url":"https://api.github.com/users/hub-cap/following{/other_user}","gists_url":"https://api.github.com/users/hub-cap/gists{/gist_id}","starred_url":"https://api.github.com/users/hub-cap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hub-cap/subscriptions","organizations_url":"https://api.github.com/users/hub-cap/orgs","repos_url":"https://api.github.com/users/hub-cap/repos","events_url":"https://api.github.com/users/hub-cap/events{/privacy}","received_events_url":"https://api.github.com/users/hub-cap/received_events","type":"User","site_admin":false},"created_at":"2019-08-28T15:09:30Z","updated_at":"2019-08-28T15:09:30Z","author_association":"CONTRIBUTOR","body":"@jesinity do you think you will be tackling this soon? Or are you in progress? It seems like there might be a few bugs in this API and I would like to see about getting it sorted soon, if you cannot lend time to it. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/525800171","html_url":"https://github.com/elastic/elasticsearch/issues/45414#issuecomment-525800171","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45414","id":525800171,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTgwMDE3MQ==","user":{"login":"jesinity","id":1146901,"node_id":"MDQ6VXNlcjExNDY5MDE=","avatar_url":"https://avatars1.githubusercontent.com/u/1146901?v=4","gravatar_id":"","url":"https://api.github.com/users/jesinity","html_url":"https://github.com/jesinity","followers_url":"https://api.github.com/users/jesinity/followers","following_url":"https://api.github.com/users/jesinity/following{/other_user}","gists_url":"https://api.github.com/users/jesinity/gists{/gist_id}","starred_url":"https://api.github.com/users/jesinity/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jesinity/subscriptions","organizations_url":"https://api.github.com/users/jesinity/orgs","repos_url":"https://api.github.com/users/jesinity/repos","events_url":"https://api.github.com/users/jesinity/events{/privacy}","received_events_url":"https://api.github.com/users/jesinity/received_events","type":"User","site_admin":false},"created_at":"2019-08-28T15:35:15Z","updated_at":"2019-08-28T15:35:15Z","author_association":"CONTRIBUTOR","body":"yes, I am starting tackling it, I hope I will be able to send a WIP soon.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/525805124","html_url":"https://github.com/elastic/elasticsearch/issues/45414#issuecomment-525805124","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45414","id":525805124,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTgwNTEyNA==","user":{"login":"hub-cap","id":613352,"node_id":"MDQ6VXNlcjYxMzM1Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/613352?v=4","gravatar_id":"","url":"https://api.github.com/users/hub-cap","html_url":"https://github.com/hub-cap","followers_url":"https://api.github.com/users/hub-cap/followers","following_url":"https://api.github.com/users/hub-cap/following{/other_user}","gists_url":"https://api.github.com/users/hub-cap/gists{/gist_id}","starred_url":"https://api.github.com/users/hub-cap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hub-cap/subscriptions","organizations_url":"https://api.github.com/users/hub-cap/orgs","repos_url":"https://api.github.com/users/hub-cap/repos","events_url":"https://api.github.com/users/hub-cap/events{/privacy}","received_events_url":"https://api.github.com/users/hub-cap/received_events","type":"User","site_admin":false},"created_at":"2019-08-28T15:47:19Z","updated_at":"2019-08-28T15:47:19Z","author_association":"CONTRIBUTOR","body":"excellent!!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/532118557","html_url":"https://github.com/elastic/elasticsearch/issues/45414#issuecomment-532118557","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45414","id":532118557,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjExODU1Nw==","user":{"login":"jesinity","id":1146901,"node_id":"MDQ6VXNlcjExNDY5MDE=","avatar_url":"https://avatars1.githubusercontent.com/u/1146901?v=4","gravatar_id":"","url":"https://api.github.com/users/jesinity","html_url":"https://github.com/jesinity","followers_url":"https://api.github.com/users/jesinity/followers","following_url":"https://api.github.com/users/jesinity/following{/other_user}","gists_url":"https://api.github.com/users/jesinity/gists{/gist_id}","starred_url":"https://api.github.com/users/jesinity/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jesinity/subscriptions","organizations_url":"https://api.github.com/users/jesinity/orgs","repos_url":"https://api.github.com/users/jesinity/repos","events_url":"https://api.github.com/users/jesinity/events{/privacy}","received_events_url":"https://api.github.com/users/jesinity/received_events","type":"User","site_admin":false},"created_at":"2019-09-17T08:29:01Z","updated_at":"2019-09-24T11:05:40Z","author_association":"CONTRIBUTOR","body":"Hi @hub-cap , here is a work in progress of this fix:\r\nhttps://github.com/elastic/elasticsearch/compare/master...jesinity:cancel-tasks-fix?expand=1\r\n\r\nSome comments:\r\n\r\n1. I created all client side counterparts for all server side objects involved in this exchange.\r\nI did it also for `ElasticSearchException` and `TaskOperationFailure`. These are shallow copies of server side counterparts: at first I thought to create some common interfaces in the `core` module but then I reverted it back.\r\nI did this way in order to cut down dependencies from server side classes, as I saw there are long term requirements to achieve it. \r\n2. I did not manage to create complex statuses with failures or exceptions, but I went through how the response is generated server side.\r\n3. I did not touch yet the `ListTasksResponse`  to the other calls of the tasks api are still using old classes.\r\n4. I did some unit tests I did not commit yet: some parsing tests are enough for the testing purposes?\r\n5. I left out the parsing of the `status` field, which format changes very much over responses and is issued only if `detailed` parameter is issued to server. \r\n\r\nI did it because I did not find an easy why doing it without falling back again on server side dependencies.\r\nStatus is converted to a raw format wrapping a `BytesReference` that exposes a `Map<String,Object>` functionality: I wonder if it is really something worth to have for the client.\r\nI tried to set thing apart but at least a dependency on Lucene\r\n`org.apache.lucene.util.BytesRef` in `org.elasticsearch.common.bytes.BytesArray` is unavoidable.\r\nIf you want I can add back the dependency on `ObjectParserHelper`, causing a dependency on server side libraries, or address me some other way around to fix the issue.\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/534572020","html_url":"https://github.com/elastic/elasticsearch/issues/45414#issuecomment-534572020","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45414","id":534572020,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNDU3MjAyMA==","user":{"login":"jesinity","id":1146901,"node_id":"MDQ6VXNlcjExNDY5MDE=","avatar_url":"https://avatars1.githubusercontent.com/u/1146901?v=4","gravatar_id":"","url":"https://api.github.com/users/jesinity","html_url":"https://github.com/jesinity","followers_url":"https://api.github.com/users/jesinity/followers","following_url":"https://api.github.com/users/jesinity/following{/other_user}","gists_url":"https://api.github.com/users/jesinity/gists{/gist_id}","starred_url":"https://api.github.com/users/jesinity/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jesinity/subscriptions","organizations_url":"https://api.github.com/users/jesinity/orgs","repos_url":"https://api.github.com/users/jesinity/repos","events_url":"https://api.github.com/users/jesinity/events{/privacy}","received_events_url":"https://api.github.com/users/jesinity/received_events","type":"User","site_admin":false},"created_at":"2019-09-24T14:00:24Z","updated_at":"2019-09-24T14:00:24Z","author_association":"CONTRIBUTOR","body":"I went a bit ahead and opened a pull request","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/535656445","html_url":"https://github.com/elastic/elasticsearch/issues/45414#issuecomment-535656445","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45414","id":535656445,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNTY1NjQ0NQ==","user":{"login":"jesinity","id":1146901,"node_id":"MDQ6VXNlcjExNDY5MDE=","avatar_url":"https://avatars1.githubusercontent.com/u/1146901?v=4","gravatar_id":"","url":"https://api.github.com/users/jesinity","html_url":"https://github.com/jesinity","followers_url":"https://api.github.com/users/jesinity/followers","following_url":"https://api.github.com/users/jesinity/following{/other_user}","gists_url":"https://api.github.com/users/jesinity/gists{/gist_id}","starred_url":"https://api.github.com/users/jesinity/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jesinity/subscriptions","organizations_url":"https://api.github.com/users/jesinity/orgs","repos_url":"https://api.github.com/users/jesinity/repos","events_url":"https://api.github.com/users/jesinity/events{/privacy}","received_events_url":"https://api.github.com/users/jesinity/received_events","type":"User","site_admin":false},"created_at":"2019-09-26T19:40:34Z","updated_at":"2019-09-26T19:40:34Z","author_association":"CONTRIBUTOR","body":"in case when this it is done I think I can tackle the #46062","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/539008404","html_url":"https://github.com/elastic/elasticsearch/issues/45414#issuecomment-539008404","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45414","id":539008404,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTAwODQwNA==","user":{"login":"hub-cap","id":613352,"node_id":"MDQ6VXNlcjYxMzM1Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/613352?v=4","gravatar_id":"","url":"https://api.github.com/users/hub-cap","html_url":"https://github.com/hub-cap","followers_url":"https://api.github.com/users/hub-cap/followers","following_url":"https://api.github.com/users/hub-cap/following{/other_user}","gists_url":"https://api.github.com/users/hub-cap/gists{/gist_id}","starred_url":"https://api.github.com/users/hub-cap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hub-cap/subscriptions","organizations_url":"https://api.github.com/users/hub-cap/orgs","repos_url":"https://api.github.com/users/hub-cap/repos","events_url":"https://api.github.com/users/hub-cap/events{/privacy}","received_events_url":"https://api.github.com/users/hub-cap/received_events","type":"User","site_admin":false},"created_at":"2019-10-07T13:23:02Z","updated_at":"2019-10-07T13:23:02Z","author_association":"CONTRIBUTOR","body":"Thanks and I will be getting to this soon. its been a packed few weeks, but im finally out of the woods and can focus on some OSS stuff and review your stuff @jesinity ","performed_via_github_app":null}]