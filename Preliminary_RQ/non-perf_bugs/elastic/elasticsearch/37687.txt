{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/37687","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37687/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37687/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37687/events","html_url":"https://github.com/elastic/elasticsearch/issues/37687","id":401654539,"node_id":"MDU6SXNzdWU0MDE2NTQ1Mzk=","number":37687,"title":"CI DiscoveryDisruptionIT.testUnicastSinglePingResponseContainsMasterfailure","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"labels":[{"id":881394071,"node_id":"MDU6TGFiZWw4ODEzOTQwNzE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Cluster%20Coordination","name":":Distributed/Cluster Coordination","color":"0e8a16","default":false,"description":"Cluster formation and cluster state publication, including cluster membership and fault detection."},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"assignees":[{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2019-01-22T08:44:00Z","updated_at":"2019-02-02T07:54:56Z","closed_at":"2019-02-02T07:54:56Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"## Example build failure\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+intake/1377/\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+intake/1375\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+intake/1369\r\n\r\n## Reproduction line \r\ndoes not reproduce locally\r\n```\r\n./gradlew :server:integTest -Dtests.seed=E269587FA887C221 -Dtests.class=org.elasticsearch.discovery.DiscoveryDisruptionIT -Dtests.method=\"testUnicastSinglePingResponseContainsMaster\" -Dtests.security.manager=true -Dtests.locale=uk-UA -Dtests.timezone=IET -Dcompiler.java=11 -Druntime.java=8\r\n```\r\n\r\n## Example relevant log:\r\n```\r\n00:07:18 FAILURE 17.3s J7 | DiscoveryDisruptionIT.testUnicastSinglePingResponseContainsMaster <<< FAILURES!\r\n00:07:18    > Throwable #1: java.lang.AssertionError: wrong master on node [node_t0]. cluster_state:\r\n00:07:18    > cluster uuid: NRyFo07tRb-QuuGQrEuyEw\r\n00:07:18    > version: 8\r\n00:07:18    > state uuid: -fgrQ6M5RY6F6y2s-C1PIg\r\n00:07:18    > from_diff: false\r\n00:07:18    > meta data version: 4\r\n00:07:18    >    coordination_metadata:\r\n00:07:18    >       term: 2\r\n00:07:18    >       last_committed_config: VotingConfiguration{i00fSbofRaOfrvZoINn5QA,MmwMKeSKRkyMHssX6pftrA,-9DRkF2gQDynx_Jpx0fqkQ}\r\n00:07:18    >       last_accepted_config: VotingConfiguration{i00fSbofRaOfrvZoINn5QA,MmwMKeSKRkyMHssX6pftrA,-9DRkF2gQDynx_Jpx0fqkQ}\r\n00:07:18    >       voting tombstones: []\r\n00:07:18    > metadata customs:\r\n00:07:18    >    index-graveyard: IndexGraveyard[[]]\r\n00:07:18    > nodes: \r\n00:07:18    >    {node_t2}{-9DRkF2gQDynx_Jpx0fqkQ}{L5K5FyglTWunHVgjNhaRnQ}{127.0.0.1}{127.0.0.1:45712}\r\n00:07:18    >    {node_t3}{MmwMKeSKRkyMHssX6pftrA}{ZAmOn4tYS5SQlv0hKLFskw}{127.0.0.1}{127.0.0.1:38247}, master\r\n00:07:18    >    {node_t1}{B6zx_LS-Sz69HrbcSOIWOg}{SH1j3f9iT32jK21tUbVMzw}{127.0.0.1}{127.0.0.1:33117}\r\n00:07:18    >    {node_t0}{i00fSbofRaOfrvZoINn5QA}{YuI45I7rSQucaiEQPWd1xg}{127.0.0.1}{127.0.0.1:43815}, local\r\n00:07:18    > routing_table (version 1):\r\n00:07:18    > routing_nodes:\r\n00:07:18    > -----node_id[i00fSbofRaOfrvZoINn5QA][V]\r\n00:07:18    > -----node_id[B6zx_LS-Sz69HrbcSOIWOg][V]\r\n00:07:18    > -----node_id[MmwMKeSKRkyMHssX6pftrA][V]\r\n00:07:18    > -----node_id[-9DRkF2gQDynx_Jpx0fqkQ][V]\r\n00:07:18    > ---- unassigned\r\n00:07:18    > Expected: \"node_t2\"\r\n00:07:18    >      but: was \"node_t3\"\r\n00:07:18    > \tat __randomizedtesting.SeedInfo.seed([E269587FA887C221:251557C9F0D5A2CE]:0)\r\n00:07:18    > \tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n00:07:18    > \tat org.elasticsearch.discovery.AbstractDisruptionTestCase.lambda$assertMaster$2(AbstractDisruptionTestCase.java:202)\r\n00:07:18    > \tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:847)\r\n00:07:18    > \tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:821)\r\n00:07:18    > \tat org.elasticsearch.discovery.AbstractDisruptionTestCase.assertMaster(AbstractDisruptionTestCase.java:196)\r\n00:07:18    > \tat org.elasticsearch.discovery.DiscoveryDisruptionIT.testUnicastSinglePingResponseContainsMaster(DiscoveryDisruptionIT.java:128)\r\n00:07:18    > \tat java.lang.Thread.run(Thread.java:748)\r\n00:07:18    > \tSuppressed: java.lang.AssertionError: wrong master on node [node_t0]. cluster_state:\r\n00:07:18    > cluster uuid: NRyFo07tRb-QuuGQrEuyEw\r\n00:07:18    > version: 8\r\n00:07:18    > state uuid: -fgrQ6M5RY6F6y2s-C1PIg\r\n00:07:18    > from_diff: false\r\n00:07:18    > meta data version: 4\r\n00:07:18    >    coordination_metadata:\r\n00:07:18    >       term: 2\r\n00:07:18    >       last_committed_config: VotingConfiguration{i00fSbofRaOfrvZoINn5QA,MmwMKeSKRkyMHssX6pftrA,-9DRkF2gQDynx_Jpx0fqkQ}\r\n00:07:18    >       last_accepted_config: VotingConfiguration{i00fSbofRaOfrvZoINn5QA,MmwMKeSKRkyMHssX6pftrA,-9DRkF2gQDynx_Jpx0fqkQ}\r\n00:07:18    >       voting tombstones: []\r\n00:07:18    > metadata customs:\r\n00:07:18    >    index-graveyard: IndexGraveyard[[]]\r\n00:07:18    > nodes: \r\n00:07:18    >    {node_t2}{-9DRkF2gQDynx_Jpx0fqkQ}{L5K5FyglTWunHVgjNhaRnQ}{127.0.0.1}{127.0.0.1:45712}\r\n00:07:18    >    {node_t3}{MmwMKeSKRkyMHssX6pftrA}{ZAmOn4tYS5SQlv0hKLFskw}{127.0.0.1}{127.0.0.1:38247}, master\r\n00:07:18    >    {node_t1}{B6zx_LS-Sz69HrbcSOIWOg}{SH1j3f9iT32jK21tUbVMzw}{127.0.0.1}{127.0.0.1:33117}\r\n00:07:18    >    {node_t0}{i00fSbofRaOfrvZoINn5QA}{YuI45I7rSQucaiEQPWd1xg}{127.0.0.1}{127.0.0.1:43815}, local\r\n00:07:18    > routing_table (version 1):\r\n00:07:18    > routing_nodes:\r\n00:07:18    > -----node_id[i00fSbofRaOfrvZoINn5QA][V]\r\n00:07:18    > -----node_id[B6zx_LS-Sz69HrbcSOIWOg][V]\r\n00:07:18    > -----node_id[MmwMKeSKRkyMHssX6pftrA][V]\r\n00:07:18    > -----node_id[-9DRkF2gQDynx_Jpx0fqkQ][V]\r\n00:07:18    > ---- unassigned\r\n00:07:18    > Expected: \"node_t2\"\r\n00:07:18    >      but: was \"node_t3\"\r\n00:07:18    > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n00:07:18    > \t\tat org.elasticsearch.discovery.AbstractDisruptionTestCase.lambda$assertMaster$2(AbstractDisruptionTestCase.java:202)\r\n00:07:18    > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:835)\r\n00:07:18    > \t\t... 40 more\r\n00:07:18    > \tSuppressed: java.lang.AssertionError: wrong master on node [node_t0]. cluster_state:\r\n```\r\n\r\n## Frequency\r\n111 / 7 days , 6 last 2 days ","closed_by":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"performed_via_github_app":null}