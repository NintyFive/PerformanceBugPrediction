[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/490372123","html_url":"https://github.com/elastic/elasticsearch/issues/41929#issuecomment-490372123","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41929","id":490372123,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MDM3MjEyMw==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2019-05-08T06:59:12Z","updated_at":"2019-05-08T06:59:12Z","author_association":"MEMBER","body":"When using springboot with \r\nelasticsearch, you need to be explicit with some transitive dependencies as SpringBoot declares a version 6.4... \r\n\r\nBasically you can put this in your `pom.xml`:\r\n\r\n```\r\n<properties>\r\n  <elasticsearch.version>7.0.0<elasticsearch.version>\r\n</properties>\r\n```\r\n\r\nSee documentation here: https://docs.spring.io/spring-boot/docs/current/reference/html/howto-build.html#howto-customize-dependency-versions\r\n\r\nCould you next time ask on discuss.elastic.co instead?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/490372481","html_url":"https://github.com/elastic/elasticsearch/issues/41929#issuecomment-490372481","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41929","id":490372481,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MDM3MjQ4MQ==","user":{"login":"astefan","id":893749,"node_id":"MDQ6VXNlcjg5Mzc0OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/893749?v=4","gravatar_id":"","url":"https://api.github.com/users/astefan","html_url":"https://github.com/astefan","followers_url":"https://api.github.com/users/astefan/followers","following_url":"https://api.github.com/users/astefan/following{/other_user}","gists_url":"https://api.github.com/users/astefan/gists{/gist_id}","starred_url":"https://api.github.com/users/astefan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astefan/subscriptions","organizations_url":"https://api.github.com/users/astefan/orgs","repos_url":"https://api.github.com/users/astefan/repos","events_url":"https://api.github.com/users/astefan/events{/privacy}","received_events_url":"https://api.github.com/users/astefan/received_events","type":"User","site_admin":false},"created_at":"2019-05-08T07:00:34Z","updated_at":"2019-05-08T07:00:34Z","author_association":"CONTRIBUTOR","body":"@VernonG07 I don't think this has anything to do specifically with Elasticsearch. From what I remember, Spring (and Spring Boot) do have ways to define/configure \"destroy\" like behavior for each of its components (beans). And the HLRC makes no exception imo.\r\nHave a look [here](https://medium.com/@sourav.pati09/how-to-use-java-high-level-rest-client-with-spring-boot-to-talk-to-aws-elasticsearch-2b6106f2e2c) for an example - Step 6.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/490485591","html_url":"https://github.com/elastic/elasticsearch/issues/41929#issuecomment-490485591","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41929","id":490485591,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MDQ4NTU5MQ==","user":{"login":"VernonG07","id":11031181,"node_id":"MDQ6VXNlcjExMDMxMTgx","avatar_url":"https://avatars1.githubusercontent.com/u/11031181?v=4","gravatar_id":"","url":"https://api.github.com/users/VernonG07","html_url":"https://github.com/VernonG07","followers_url":"https://api.github.com/users/VernonG07/followers","following_url":"https://api.github.com/users/VernonG07/following{/other_user}","gists_url":"https://api.github.com/users/VernonG07/gists{/gist_id}","starred_url":"https://api.github.com/users/VernonG07/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VernonG07/subscriptions","organizations_url":"https://api.github.com/users/VernonG07/orgs","repos_url":"https://api.github.com/users/VernonG07/repos","events_url":"https://api.github.com/users/VernonG07/events{/privacy}","received_events_url":"https://api.github.com/users/VernonG07/received_events","type":"User","site_admin":false},"created_at":"2019-05-08T13:28:36Z","updated_at":"2019-05-08T20:58:41Z","author_association":"NONE","body":"@astefan I should have mentioned that I also have a @Configuration with a RestHighLevelClient @Bean.  I made sure to close the RestHighLevelClient as well as the LowLevelClient on task completion.  Still doesn't behave as expected.  It also confusing that the exact same configuration for Spring Boot 2.0.x and Spring Cloud Finchley work just fine.  \r\n@dadoonet I have followed your advice and created something on discuss.elastic.co\r\n\r\nUPDATE: looks like it was an Elasticsearch Autoconfig issue that is now included in spring boot 2.1.x","performed_via_github_app":null}]