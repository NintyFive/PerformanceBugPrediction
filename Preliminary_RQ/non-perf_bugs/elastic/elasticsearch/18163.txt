{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/18163","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18163/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18163/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18163/events","html_url":"https://github.com/elastic/elasticsearch/issues/18163","id":153306047,"node_id":"MDU6SXNzdWUxNTMzMDYwNDc=","number":18163,"title":"_cat/fielddata reports node IP address instead of fielddata size of a field called \"ip\".","user":{"login":"GlenRSmith","id":1327920,"node_id":"MDQ6VXNlcjEzMjc5MjA=","avatar_url":"https://avatars3.githubusercontent.com/u/1327920?v=4","gravatar_id":"","url":"https://api.github.com/users/GlenRSmith","html_url":"https://github.com/GlenRSmith","followers_url":"https://api.github.com/users/GlenRSmith/followers","following_url":"https://api.github.com/users/GlenRSmith/following{/other_user}","gists_url":"https://api.github.com/users/GlenRSmith/gists{/gist_id}","starred_url":"https://api.github.com/users/GlenRSmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GlenRSmith/subscriptions","organizations_url":"https://api.github.com/users/GlenRSmith/orgs","repos_url":"https://api.github.com/users/GlenRSmith/repos","events_url":"https://api.github.com/users/GlenRSmith/events{/privacy}","received_events_url":"https://api.github.com/users/GlenRSmith/received_events","type":"User","site_admin":false},"labels":[{"id":165912659,"node_id":"MDU6TGFiZWwxNjU5MTI2NTk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/CAT%20APIs","name":":Core/Features/CAT APIs","color":"0e8a16","default":false,"description":"Text APIs behind /_cat"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2016-05-05T19:28:22Z","updated_at":"2016-05-06T08:38:20Z","closed_at":"2016-05-06T08:38:20Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Elasticsearch version**: 2.3.1\n\n**JVM version**: \n\n> [gsmith@crowley ~ ] > java -version\n> java version \"1.8.0_45\"\n> Java(TM) SE Runtime Environment (build 1.8.0_45-b14)\n> Java HotSpot(TM) 64-Bit Server VM (build 25.45-b02, mixed mode)\n\n**OS version**: OS X 10.10.5\n\n**Description of the problem including expected versus actual behavior**:\n\nResponse to `_cat/fielddata` when there is an actual \"ip\" field in the indexed data reports the IP address of the node in the column where the size of fielddata used by the \"ip\" field should appear.\n\n**Steps to reproduce**:\n\n```\n#0. Delete the index\nDELETE test_field_data\n#1. Create the index with a document:\nPOST test_field_data/test_field_data\n{\"reason\": \"something is off\", \"ip\": \"192.168.1.0\"}\n#2. Flush\nPOST _flush\n#3. Perform a search that loads fielddata\nGET test_field_data/_search\n{\n  \"query\": {\n    \"match_all\": {}\n  },\n  \"aggs\": {\n    \"ip\": {\n      \"terms\": {\n        \"field\": \"ip\",\n        \"size\": 10\n      }\n    },\n    \"reason\": {\n      \"terms\": {\n        \"field\": \"reason\",\n        \"size\": 10\n      }\n    }\n  }\n}\n#4. Inspect the fielddata\nGET _cat/fielddata/ip,reason?v\n```\n\nThe return looks like:\n\n```\nid                     host      ip        node total reason ip        \nFNsjPCVATN-xsg7O0vxIuQ 127.0.0.1 127.0.0.1 only 2.8kb   488b 127.0.0.1 \n```\n\nI have also seen a response from a 3 node cluster, also v 2.3.1, where two of the nodes are reported as shown above, and the third node actually has the fielddata usage reported, both in the correct place and in the column where the node ip address is supposed to appear.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}