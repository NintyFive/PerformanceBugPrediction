{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/22077","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22077/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22077/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22077/events","html_url":"https://github.com/elastic/elasticsearch/issues/22077","id":194616230,"node_id":"MDU6SXNzdWUxOTQ2MTYyMzA=","number":22077,"title":"Fatal error with ingest-attachment plugin","user":{"login":"chrduf","id":7190301,"node_id":"MDQ6VXNlcjcxOTAzMDE=","avatar_url":"https://avatars0.githubusercontent.com/u/7190301?v=4","gravatar_id":"","url":"https://api.github.com/users/chrduf","html_url":"https://github.com/chrduf","followers_url":"https://api.github.com/users/chrduf/followers","following_url":"https://api.github.com/users/chrduf/following{/other_user}","gists_url":"https://api.github.com/users/chrduf/gists{/gist_id}","starred_url":"https://api.github.com/users/chrduf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrduf/subscriptions","organizations_url":"https://api.github.com/users/chrduf/orgs","repos_url":"https://api.github.com/users/chrduf/repos","events_url":"https://api.github.com/users/chrduf/events{/privacy}","received_events_url":"https://api.github.com/users/chrduf/received_events","type":"User","site_admin":false},"labels":[{"id":268963484,"node_id":"MDU6TGFiZWwyNjg5NjM0ODQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Ingest","name":":Core/Features/Ingest","color":"0e8a16","default":false,"description":"Execution or management of Ingest Pipelines"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"assignees":[{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false}],"milestone":null,"comments":7,"created_at":"2016-12-09T14:58:37Z","updated_at":"2018-02-13T20:44:58Z","closed_at":"2017-02-16T15:00:09Z","author_association":"NONE","active_lock_reason":null,"body":"I am getting a fatal error when trying to index the attached stripped down document using the ingest-attachment plugin. This causes my cluster to reboot and does not give me an email notification. It looks to be having a problem with the embedded Visio diagram.\r\n\r\nVersion: 5.1.1 (Elastic Cloud)\r\nClusterId: 7e7501\r\nNode: instance-0000000005\r\nPlugin: ingest-attachment\r\n\r\nLink to problematic doc: https://1drv.ms/w/s!ApTXXtrEV_GGiosenEfoUSk1rRnuYA \r\n\r\nError Information\r\n\r\n```\r\nDec 8 21:42:34 ERROR org.elasticsearch.bootstrap.ElasticsearchUncaughtExceptionHandler i5@z0\r\n```\r\n\r\n```\r\n[2016-12-08T21:42:34,628][ERROR][org.elasticsearch.bootstrap.ElasticsearchUncaughtExceptionHandler] fatal error in thread [elasticsearch[index][T#1]], exiting java.lang.NoClassDefFoundError: com/graphbuilder/curve/Point\r\n at java.lang.Class.getDeclaredConstructors0(Native Method) ~[?:1.8.0_72]\r\n at java.lang.Class.privateGetDeclaredConstructors(Class.java:2671) ~[?:1.8.0_72]\r\n at java.lang.Class.getConstructor0(Class.java:3075) ~[?:1.8.0_72]\r\n at java.lang.Class.getDeclaredConstructor(Class.java:2178) ~[?:1.8.0_72]\r\n at org.apache.poi.xdgf.util.ObjectFactory.put(ObjectFactory.java:34) ~[?:?]\r\n at org.apache.poi.xdgf.usermodel.section.geometry.GeometryRowFactory.(GeometryRowFactory.java:39) ~[?:?]\r\n at org.apache.poi.xdgf.usermodel.section.GeometrySection.(GeometrySection.java:55) ~[?:?]\r\n at org.apache.poi.xdgf.usermodel.XDGFSheet.(XDGFSheet.java:77) ~[?:?]\r\n at org.apache.poi.xdgf.usermodel.XDGFShape.(XDGFShape.java:113) ~[?:?]\r\n at org.apache.poi.xdgf.usermodel.XDGFShape.(XDGFShape.java:107) ~[?:?]\r\n at org.apache.poi.xdgf.usermodel.XDGFBaseContents.onDocumentRead(XDGFBaseContents.java:82) ~[?:?]\r\n at org.apache.poi.xdgf.usermodel.XDGFMasterContents.onDocumentRead(XDGFMasterContents.java:66) ~[?:?]\r\n at org.apache.poi.xdgf.usermodel.XDGFMasters.onDocumentRead(XDGFMasters.java:101) ~[?:?]\r\n at org.apache.poi.xdgf.usermodel.XmlVisioDocument.onDocumentRead(XmlVisioDocument.java:106) ~[?:?]\r\n at org.apache.poi.POIXMLDocument.load(POIXMLDocument.java:190) ~[?:?]\r\n at org.apache.poi.xdgf.usermodel.XmlVisioDocument.(XmlVisioDocument.java:79) ~[?:?]\r\n at org.apache.poi.xdgf.extractor.XDGFVisioExtractor.(XDGFVisioExtractor.java:41) ~[?:?]\r\n at org.apache.poi.extractor.ExtractorFactory.createExtractor(ExtractorFactory.java:207) ~[?:?]\r\n at org.apache.tika.parser.microsoft.ooxml.OOXMLExtractorFactory.parse(OOXMLExtractorFactory.java:86) ~[?:?]\r\n at org.apache.tika.parser.microsoft.ooxml.OOXMLParser.parse(OOXMLParser.java:87) ~[?:?]\r\n at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:280) ~[?:?]\r\n at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:120) ~[?:?]\r\n at org.apache.tika.parser.DelegatingParser.parse(DelegatingParser.java:72) ~[?:?]\r\n at org.apache.tika.extractor.ParsingEmbeddedDocumentExtractor.parseEmbedded(ParsingEmbeddedDocumentExtractor.java:102) ~[?:?]\r\n at org.apache.tika.parser.microsoft.ooxml.AbstractOOXMLExtractor.handleEmbeddedFile(AbstractOOXMLExtractor.java:311) ~[?:?]\r\n at org.apache.tika.parser.microsoft.ooxml.AbstractOOXMLExtractor.handleEmbeddedParts(AbstractOOXMLExtractor.java:202) ~[?:?]\r\n at org.apache.tika.parser.microsoft.ooxml.AbstractOOXMLExtractor.getXHTML(AbstractOOXMLExtractor.java:115) ~[?:?]\r\n at org.apache.tika.parser.microsoft.ooxml.OOXMLExtractorFactory.parse(OOXMLExtractorFactory.java:112) ~[?:?]\r\n at org.apache.tika.parser.microsoft.ooxml.OOXMLParser.parse(OOXMLParser.java:87) ~[?:?]\r\n at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:280) ~[?:?]\r\n at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:120) ~[?:?]\r\n at org.apache.tika.Tika.parseToString(Tika.java:568) ~[?:?]\r\n at org.elasticsearch.ingest.attachment.TikaImpl$1.run(TikaImpl.java:94) ~[?:?]\r\n at org.elasticsearch.ingest.attachment.TikaImpl$1.run(TikaImpl.java:91) ~[?:?]\r\n at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_72]\r\n at org.elasticsearch.ingest.attachment.TikaImpl.parse(TikaImpl.java:91) ~[?:?]\r\n at org.elasticsearch.ingest.attachment.AttachmentProcessor.execute(AttachmentProcessor.java:72) ~[?:?]\r\n at org.elasticsearch.ingest.CompoundProcessor.execute(CompoundProcessor.java:100) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n at org.elasticsearch.ingest.Pipeline.execute(Pipeline.java:58) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n at org.elasticsearch.ingest.PipelineExecutionService.innerExecute(PipelineExecutionService.java:166) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n at org.elasticsearch.ingest.PipelineExecutionService.access$000(PipelineExecutionService.java:41) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n at org.elasticsearch.ingest.PipelineExecutionService$1.doRun(PipelineExecutionService.java:65) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:527) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) ~[elasticsearch-5.1.1.jar:5.1.1]\r\n at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[?:1.8.0_72]\r\n at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[?:1.8.0_72]\r\n at java.lang.Thread.run(Thread.java:745) [?:1.8.0_72] \r\nCaused by: java.lang.ClassNotFoundException: com.graphbuilder.curve.Point\r\n at java.net.URLClassLoader.findClass(URLClassLoader.java:381) ~[?:1.8.0_72]\r\n at java.lang.ClassLoader.loadClass(ClassLoader.java:424) ~[?:1.8.0_72]\r\n at java.net.FactoryURLClassLoader.loadClass(URLClassLoader.java:814) ~[?:1.8.0_72]\r\n at java.lang.ClassLoader.loadClass(ClassLoader.java:357) ~[?:1.8.0_72]\r\n ... 47 more\r\n```\r\n","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}