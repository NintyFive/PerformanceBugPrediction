{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/19954","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19954/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19954/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19954/events","html_url":"https://github.com/elastic/elasticsearch/issues/19954","id":170674373,"node_id":"MDU6SXNzdWUxNzA2NzQzNzM=","number":19954,"title":"Restoring a snapshot on fresh cluster is not happenning","user":{"login":"chaitu0292","id":18278698,"node_id":"MDQ6VXNlcjE4Mjc4Njk4","avatar_url":"https://avatars0.githubusercontent.com/u/18278698?v=4","gravatar_id":"","url":"https://api.github.com/users/chaitu0292","html_url":"https://github.com/chaitu0292","followers_url":"https://api.github.com/users/chaitu0292/followers","following_url":"https://api.github.com/users/chaitu0292/following{/other_user}","gists_url":"https://api.github.com/users/chaitu0292/gists{/gist_id}","starred_url":"https://api.github.com/users/chaitu0292/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chaitu0292/subscriptions","organizations_url":"https://api.github.com/users/chaitu0292/orgs","repos_url":"https://api.github.com/users/chaitu0292/repos","events_url":"https://api.github.com/users/chaitu0292/events{/privacy}","received_events_url":"https://api.github.com/users/chaitu0292/received_events","type":"User","site_admin":false},"labels":[{"id":143077482,"node_id":"MDU6TGFiZWwxNDMwNzc0ODI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Snapshot/Restore","name":":Distributed/Snapshot/Restore","color":"0e8a16","default":false,"description":"Anything directly related to the `_snapshot/*` APIs"},{"id":73544,"node_id":"MDU6TGFiZWw3MzU0NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Enon-issue","name":">non-issue","color":"cfcfcf","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2016-08-11T15:27:46Z","updated_at":"2016-08-16T07:11:34Z","closed_at":"2016-08-11T19:07:46Z","author_association":"NONE","active_lock_reason":null,"body":"[2016-08-11 20:39:48,026][WARN ][cluster.action.shard     ] [masternode] [31_gu_34_s_56_1.365_1][1] received shard failed for target shard [[31_gu_34_s_56_1.365_1][1], node[m3-G4NhDTHm88M1iuGeO0Q], [P], v[59], restoring[Reponame:31_gu_34_s_56_1.365_1_2016-08-11_18_32_14], s[INITIALIZING], a[id=y3umCQy1S92Dl66U-IcWog], unassigned_info[[reason=ALLOCATION_FAILED], at[2016-08-11T15:09:47.994Z], details[failed recovery, failure IndexShardRecoveryException[failed recovery]; nested: IndexShardRestoreFailedException[restore failed]; nested: IndexShardRestoreFailedException[failed to restore snapshot [31_gu_34_s_56_1.365_1_2016-08-11_18_32_14]]; nested: IndexShardRestoreFailedException[failed to read shard snapshot file]; nested: NoSuchFileException[/root/backup/indices/31_gu_34_s_56_1.365_1/1/snap-31_gu_34_s_56_1.365_1_2016-08-11_18_32_14.dat]; ]]], indexUUID [qNnZsg2HTpGE8sowJoNn3A], message [master {masternode}{2YhQdezHRd28ZeI5cmp8Fg}{10.131.75.124}{10.131.75.124:9300}{master=true} marked shard as initializing, but shard is marked as failed, resend shard failure]\n[2016-08-11 20:39:48,036][WARN ][cluster.action.shard     ] [masternode] [31_gu_34_s_56_1.365_1][1] received shard failed for target shard [[31_gu_34_s_56_1.365_1][1], node[m3-G4NhDTHm88M1iuGeO0Q], [P], v[59], restoring[Reponame:31_gu_34_s_56_1.365_1_2016-08-11_18_32_14], s[INITIALIZING], a[id=y3umCQy1S92Dl66U-IcWog], unassigned_info[[reason=ALLOCATION_FAILED], at[2016-08-11T15:09:47.994Z], details[failed recovery, failure IndexShardRecoveryException[failed recovery]; nested: IndexShardRestoreFailedException[restore failed]; nested: IndexShardRestoreFailedException[failed to restore snapshot [31_gu_34_s_56_1.365_1_2016-08-11_18_32_14]]; nested: IndexShardRestoreFailedException[failed to read shard snapshot file]; nested: NoSuchFileException[/root/backup/indices/31_gu_34_s_56_1.365_1/1/snap-31_gu_34_s_56_1.365_1_2016-08-11_18_32_14.dat]; ]]], indexUUID [qNnZsg2HTpGE8sowJoNn3A], message [master {masternode}{2YhQdezHRd28ZeI5cmp8Fg}{10.131.75.124}{10.131.75.124:9300}{master=true} marked shard as initializing, but shard is marked as failed, resend shard failure]\n[2016-08-11 20:39:48,042][WARN ][cluster.action.shard     ] [masternode] [31_gu_34_s_56_1.365_1][0] received shard failed for target shard [[31_gu_34_s_56_1.365_1][0], node[pD9veWpsQdSbjnYg7AuA7w], [P], v[67], restoring[Reponame:31_gu_34_s_56_1.365_1_2016-08-11_18_32_14], s[INITIALIZING], a[id=FXaIPEL3TYmeJ5D9s495tg], unassigned_info[[reason=ALLOCATION_FAILED], at[2016-08-11T15:09:48.021Z], details[failed recovery, failure IndexShardRecoveryException[failed recovery]; nested: IndexShardRestoreFailedException[restore failed]; nested: IndexShardRestoreFailedException[failed to restore snapshot [31_gu_34_s_56_1.365_1_2016-08-11_18_32_14]]; nested: IndexShardRestoreFailedException[failed to read shard snapshot file]; nested: NoSuchFileException[/root/backup/indices/31_gu_34_s_56_1.365_1/0/snap-31_gu_34_s_56_1.365_1_2016-08-11_18_32_14.dat]; ]]], indexUUID [qNnZsg2HTpGE8sowJoNn3A], message [failed recovery], failure [IndexShardRecoveryException[failed recovery]; nested: IndexShardRestoreFailedException[restore failed]; nested: IndexShardRestoreFailedException[failed to restore snapshot [31_gu_34_s_56_1.365_1_2016-08-11_18_32_14]]; nested: IndexShardRestoreFailedException[failed to read shard snapshot file]; nested: NoSuchFileException[/root/backup/indices/31_gu_34_s_56_1.365_1/0/snap-31_gu_34_s_56_1.365_1_2016-08-11_18_32_14.dat]; ]\n[31_gu_34_s_56_1.365_1][[31_gu_34_s_56_1.365_1][0]] IndexShardRecoveryException[failed recovery]; nested: IndexShardRestoreFailedException[restore failed]; nested: IndexShardRestoreFailedException[failed to restore snapshot [31_gu_34_s_56_1.365_1_2016-08-11_18_32_14]]; nested: IndexShardRestoreFailedException[failed to read shard snapshot file]; nested: NoSuchFileException[/root/backup/indices/31_gu_34_s_56_1.365_1/0/snap-31_gu_34_s_56_1.365_1_2016-08-11_18_32_14.dat];\n        at org.elasticsearch.index.shard.StoreRecoveryService$1.run(StoreRecoveryService.java:179)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\nCaused by: [31_gu_34_s_56_1.365_1][[31_gu_34_s_56_1.365_1][0]] IndexShardRestoreFailedException[restore failed]; nested: IndexShardRestoreFailedException[failed to restore snapshot [31_gu_34_s_56_1.365_1_2016-08-11_18_32_14]]; nested: IndexShardRestoreFailedException[failed to read shard snapshot file]; nested: NoSuchFileException[/root/backup/indices/31_gu_34_s_56_1.365_1/0/snap-31_gu_34_s_56_1.365_1_2016-08-11_18_32_14.dat];\n        at org.elasticsearch.index.shard.StoreRecoveryService.restore(StoreRecoveryService.java:321)\n        at org.elasticsearch.index.shard.StoreRecoveryService.access$000(StoreRecoveryService.java:56)\n        at org.elasticsearch.index.shard.StoreRecoveryService$1.run(StoreRecoveryService.java:126)\n        ... 3 more\nCaused by: [31_gu_34_s_56_1.365_1][[31_gu_34_s_56_1.365_1][0]] IndexShardRestoreFailedException[failed to restore snapshot [31_gu_34_s_56_1.365_1_2016-08-11_18_32_14]]; nested: IndexShardRestoreFailedException[failed to read shard snapshot file]; nested: NoSuchFileException[/root/backup/indices/31_gu_34_s_56_1.365_1/0/snap-31_gu_34_s_56_1.365_1_2016-08-11_18_32_14.dat];\n        at org.elasticsearch.index.snapshots.blobstore.BlobStoreIndexShardRepository.restore(BlobStoreIndexShardRepository.java:215)\n        at org.elasticsearch.index.shard.StoreRecoveryService.restore(StoreRecoveryService.java:312)\n        ... 5 more\nCaused by: [31_gu_34_s_56_1.365_1][[31_gu_34_s_56_1.365_1][0]] IndexShardRestoreFailedException[failed to read shard snapshot file]; nested: NoSuchFileException[/root/backup/indices/31_gu_34_s_56_1.365_1/0/snap-31_gu_34_s_56_1.365_1_2016-08-11_18_32_14.dat];\n        at org.elasticsearch.index.snapshots.blobstore.BlobStoreIndexShardRepository$Context.loadSnapshot(BlobStoreIndexShardRepository.java:352)\n        at org.elasticsearch.index.snapshots.blobstore.BlobStoreIndexShardRepository$RestoreContext.restore(BlobStoreIndexShardRepository.java:808)\n        at org.elasticsearch.index.snapshots.blobstore.BlobStoreIndexShardRepository.restore(BlobStoreIndexShardRepository.java:213)\n        ... 6 more\nCaused by: java.nio.file.NoSuchFileException: /root/backup/indices/31_gu_34_s_56_1.365_1/0/snap-31_gu_34_s_56_1.365_1_2016-08-11_18_32_14.dat\n        at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)\n        at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)\n        at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)\n        at sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214)\n        at java.nio.file.Files.newByteChannel(Files.java:361)\n        at java.nio.file.Files.newByteChannel(Files.java:407)\n        at java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:384)\n        at java.nio.file.Files.newInputStream(Files.java:152)\n        at org.elasticsearch.common.blobstore.fs.FsBlobContainer.readBlob(FsBlobContainer.java:89)\n        at org.elasticsearch.repositories.blobstore.ChecksumBlobStoreFormat.readBlob(ChecksumBlobStoreFormat.java:93)\n        at org.elasticsearch.repositories.blobstore.BlobStoreFormat.read(BlobStoreFormat.java:83)\n        at org.elasticsearch.index.snapshots.blobstore.BlobStoreIndexShardRepository$Context.loadSnapshot(BlobStoreIndexShardRepository.java:350)\n        ... 8 more\n","closed_by":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"performed_via_github_app":null}