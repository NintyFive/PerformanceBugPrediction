{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/31778","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31778/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31778/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31778/events","html_url":"https://github.com/elastic/elasticsearch/issues/31778","id":338069842,"node_id":"MDU6SXNzdWUzMzgwNjk4NDI=","number":31778,"title":"Print more details with JsonParseException","user":{"login":"melissachang","id":10929390,"node_id":"MDQ6VXNlcjEwOTI5Mzkw","avatar_url":"https://avatars1.githubusercontent.com/u/10929390?v=4","gravatar_id":"","url":"https://api.github.com/users/melissachang","html_url":"https://github.com/melissachang","followers_url":"https://api.github.com/users/melissachang/followers","following_url":"https://api.github.com/users/melissachang/following{/other_user}","gists_url":"https://api.github.com/users/melissachang/gists{/gist_id}","starred_url":"https://api.github.com/users/melissachang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/melissachang/subscriptions","organizations_url":"https://api.github.com/users/melissachang/orgs","repos_url":"https://api.github.com/users/melissachang/repos","events_url":"https://api.github.com/users/melissachang/events{/privacy}","received_events_url":"https://api.github.com/users/melissachang/received_events","type":"User","site_admin":false},"labels":[{"id":144797810,"node_id":"MDU6TGFiZWwxNDQ3OTc4MTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Core","name":":Core/Infra/Core","color":"0e8a16","default":false,"description":"Core issues without another label"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-07-03T22:08:05Z","updated_at":"2018-07-13T13:53:54Z","closed_at":"2018-07-13T13:53:53Z","author_association":"NONE","active_lock_reason":null,"body":"I am using dynamic field mappings to index a BigQuery table. Some data is missing in the BigQuery table, which is common and supported (in BigQuery). I see this in my Elasticsearch logs:\r\n```\r\nelasticsearch_1    | [2018-07-03T21:58:56,122][WARN ][r.suppressed             ] path: /_bulk, params: {}\r\nelasticsearch_1    | com.fasterxml.jackson.core.JsonParseException: Non-standard token 'NaN': enable JsonParser.Feature.ALLOW_NON_NUMERIC_NUMBERS to allow\r\nelasticsearch_1    |  at [Source: org.elasticsearch.transport.netty4.ByteBufStreamInput@5c758f6f; line: 1, column: 1616]\r\nelasticsearch_1    | \tat com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:1702) ~[jackson-core-2.8.10.jar:2.8.10]\r\nelasticsearch_1    | \tat com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:558) ~[jackson-core-2.8.10.jar:2.8.10]\r\nelasticsearch_1    | \tat com.fasterxml.jackson.core.json.UTF8StreamJsonParser._handleUnexpectedValue(UTF8StreamJsonParser.java:2667) ~[jackson-core-2.8.10.jar:2.8.10]\r\nelasticsearch_1    | \tat com.fasterxml.jackson.core.json.UTF8StreamJsonParser.nextToken(UTF8StreamJsonParser.java:832) ~[jackson-core-2.8.10.jar:2.8.10]\r\nelasticsearch_1    | \tat com.fasterxml.jackson.core.JsonGenerator.copyCurrentStructure(JsonGenerator.java:1813) ~[jackson-core-2.8.10.jar:2.8.10]\r\nelasticsearch_1    | \tat org.elasticsearch.common.xcontent.json.JsonXContentGenerator.copyCurrentStructure(JsonXContentGenerator.java:407) ~[elasticsearch-6.2.2.jar:6.2.2]\r\nelasticsearch_1    | \tat org.elasticsearch.common.xcontent.XContentBuilder.copyCurrentStructure(XContentBuilder.java:1021) ~[elasticsearch-6.2.2.jar:6.2.2]\r\nelasticsearch_1    | \tat org.elasticsearch.action.update.UpdateRequest.fromXContent(UpdateRequest.java:741) ~[elasticsearch-6.2.2.jar:6.2.2]\r\nelasticsearch_1    | \tat org.elasticsearch.action.bulk.BulkRequest.add(BulkRequest.java:433) ~[elasticsearch-6.2.2.jar:6.2.2]\r\nelasticsearch_1    | \tat org.elasticsearch.rest.action.document.RestBulkAction.prepareRequest(RestBulkAction.java:94) ~[elasticsearch-6.2.2.jar:6.2.2]\r\nelasticsearch_1    | \tat org.elasticsearch.rest.BaseRestHandler.handleRequest(BaseRestHandler.java:80) ~[elasticsearch-6.2.2.jar:6.2.2]\r\nelasticsearch_1    | \tat org.elasticsearch.rest.RestController.dispatchRequest(RestController.java:240) [elasticsearch-6.2.2.jar:6.2.2]\r\nelasticsearch_1    | \tat org.elasticsearch.rest.RestController.tryAllHandlers(RestController.java:336) [elasticsearch-6.2.2.jar:6.2.2]\r\nelasticsearch_1    | \tat org.elasticsearch.rest.RestController.dispatchRequest(RestController.java:174) [elasticsearch-6.2.2.jar:6.2.2]\r\nelasticsearch_1    | \tat org.elasticsearch.http.netty4.Netty4HttpServerTransport.dispatchRequest(Netty4HttpServerTransport.java:500) [transport-netty4-6.2.2.jar:6.2.2]\r\nelasticsearch_1    | \tat org.elasticsearch.http.netty4.Netty4HttpRequestHandler.channelRead0(Netty4HttpRequestHandler.java:80) [transport-netty4-6.2.2.jar:6.2.2]\r\n```\r\nI see that the invalid token is NaN. It would be nice to know the relevant document id and field, so I know where to look in the BigQuery table.\r\n\r\n(Maybe this exception is due to #12366)","closed_by":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"performed_via_github_app":null}