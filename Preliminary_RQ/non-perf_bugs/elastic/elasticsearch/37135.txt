{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/37135","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37135/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37135/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37135/events","html_url":"https://github.com/elastic/elasticsearch/issues/37135","id":395849784,"node_id":"MDU6SXNzdWUzOTU4NDk3ODQ=","number":37135,"title":"analysis-icu IcuTokenizerFactory does not compile","user":{"login":"Pyppe","id":503168,"node_id":"MDQ6VXNlcjUwMzE2OA==","avatar_url":"https://avatars0.githubusercontent.com/u/503168?v=4","gravatar_id":"","url":"https://api.github.com/users/Pyppe","html_url":"https://github.com/Pyppe","followers_url":"https://api.github.com/users/Pyppe/followers","following_url":"https://api.github.com/users/Pyppe/following{/other_user}","gists_url":"https://api.github.com/users/Pyppe/gists{/gist_id}","starred_url":"https://api.github.com/users/Pyppe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pyppe/subscriptions","organizations_url":"https://api.github.com/users/Pyppe/orgs","repos_url":"https://api.github.com/users/Pyppe/repos","events_url":"https://api.github.com/users/Pyppe/events{/privacy}","received_events_url":"https://api.github.com/users/Pyppe/received_events","type":"User","site_admin":false},"labels":[{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-01-04T08:46:19Z","updated_at":"2019-01-04T09:17:45Z","closed_at":"2019-01-04T09:17:45Z","author_association":"NONE","active_lock_reason":null,"body":"<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`): `6.5.4`\r\n\r\n**Plugins installed**: [`analysis-icu`]\r\n\r\n**JVM version** (`java -version`): `1.8.0_172`\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): `Darwin Kernel Version 18.2.0` (macOS Mojave 10.14.2)\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n`IcuTokenizerFactory` does not compile\r\n\r\nDISCLAIMER: We've got a custom scala sbt build pipeline for our own elasticsearch plugins, and we also depend on the `analysis-icu` plugin. Thus, I'm not 100% sure this applies to elasticsearch's own gradle build, but as far as I can tell, the problem should be the same regardless of build environment.\r\n\r\n**Provide logs (if relevant)**:\r\n```\r\n[error] org/elasticsearch/index/analysis/IcuTokenizerFactory.java:95:  com.ibm.icu.text.BreakIterator cannot be converted to com.ibm.icu.text.RuleBasedBreakIterator\r\n[error]                             return super.getBreakIterator(script);\r\n```\r\n\r\nNow, the problem is the return type of:\r\n```java\r\n@Override\r\npublic RuleBasedBreakIterator getBreakIterator(int script) {\r\n    if (breakers[script] != null) {\r\n        return (RuleBasedBreakIterator) breakers[script].clone();\r\n    } else {\r\n        return super.getBreakIterator(script);\r\n    }\r\n}\r\n```\r\n\r\nAFAICT, the return type should be kept as the generic `BreakIterator` of parent type.","closed_by":{"login":"Pyppe","id":503168,"node_id":"MDQ6VXNlcjUwMzE2OA==","avatar_url":"https://avatars0.githubusercontent.com/u/503168?v=4","gravatar_id":"","url":"https://api.github.com/users/Pyppe","html_url":"https://github.com/Pyppe","followers_url":"https://api.github.com/users/Pyppe/followers","following_url":"https://api.github.com/users/Pyppe/following{/other_user}","gists_url":"https://api.github.com/users/Pyppe/gists{/gist_id}","starred_url":"https://api.github.com/users/Pyppe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pyppe/subscriptions","organizations_url":"https://api.github.com/users/Pyppe/orgs","repos_url":"https://api.github.com/users/Pyppe/repos","events_url":"https://api.github.com/users/Pyppe/events{/privacy}","received_events_url":"https://api.github.com/users/Pyppe/received_events","type":"User","site_admin":false},"performed_via_github_app":null}