{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/15842","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15842/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15842/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15842/events","html_url":"https://github.com/elastic/elasticsearch/issues/15842","id":125502940,"node_id":"MDU6SXNzdWUxMjU1MDI5NDA=","number":15842,"title":"[Ingest] Move pipelines from .ingest index to cluster state?","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"labels":[{"id":268963484,"node_id":"MDU6TGFiZWwyNjg5NjM0ODQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Ingest","name":":Core/Features/Ingest","color":"0e8a16","default":false,"description":"Execution or management of Ingest Pipelines"},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2016-01-07T22:49:56Z","updated_at":"2016-01-13T22:03:16Z","closed_at":"2016-01-13T22:03:16Z","author_association":"MEMBER","active_lock_reason":null,"body":"Right now the pipelines are stored in the .ingest index, but maybe we can move the pipeline configuration to the cluster state? This does have advantages:\n- The whole configuration management we have to pushes the pipelines to nodes can be removed and instead ingest can rely on cluster state updates.\n- No need to ensure that mapping/settings are applied when the ingest index is created  or manage an index template. Because we are in control what goes into the cluster state via the put and delete pipeline apis.\n\nBeyond the source of the pipeline nothing else is stored (inverted index or docvalues) and the cluster state can hold that too. Also it is likely that there will not be many pipelines (>1000).\n\nBefore this was tricky because how ingest was designed: \n- pipelines changes were propagated asynchronously to other ingest nodes. \n- ingest was a plugin and may not be installed on the elected master node. \n","closed_by":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"performed_via_github_app":null}