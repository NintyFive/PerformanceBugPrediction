[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42470470","html_url":"https://github.com/elastic/elasticsearch/issues/6081#issuecomment-42470470","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6081","id":42470470,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNDcwNDcw","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2014-05-07T19:14:52Z","updated_at":"2014-05-07T19:14:52Z","author_association":"CONTRIBUTOR","body":"Right now it'd be a 625% increase instead of the planned 250% increase.  I think that big of a bump might be too much.  I guess it depends who the defaults are targeted for.  I imagine folks with lots of spindles and/or ssds care enough to tweak the defaults.  That leaves cloud folks and those of us with physical hardware but few spindles.\n\nFor what it is worth I use two standard small hard drives on each of my nodes with software striping raid and iostat reports 10% utilization when they write 10MB/s each.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42484078","html_url":"https://github.com/elastic/elasticsearch/issues/6081#issuecomment-42484078","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6081","id":42484078,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNDg0MDc4","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2014-05-07T21:15:07Z","updated_at":"2014-05-07T21:15:07Z","author_association":"CONTRIBUTOR","body":"I don't understand the logic at this point behind throttling merges at all.\n\nWith #6066 the term 'Throttling merges' really just implies 'Throttling indexing'.\n\nSo why rate-limit indexing to some arbitrary bytes/second? Surely not all users want to make this throughput/latency tradeoff just to tune Pnn search metrics, e.g. some may be doing high ingest and things like analytics instead that are less sensitive to small latency changes in search.\n\nWhy rate-limit indexing more than its already been rate-limited? We are discussing adjusting the dosage for a patient that may no longer need the medicine: perhaps #5882 was the cure.\n\nWhy rate-limit indexing via this indirect, confusing path (via merging). Why not just have the option to rate-limit indexing directly for users that want this?\n\nWhy rate-limit to bytes/second anyway? This is a bad measure, it doesn't adapt to different use cases or hardware.\n\nIt seems pretty expert to make this tradeoff, so maybe it should just be disabled by default?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42530854","html_url":"https://github.com/elastic/elasticsearch/issues/6081#issuecomment-42530854","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6081","id":42530854,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTMwODU0","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-05-08T09:45:40Z","updated_at":"2014-05-08T09:45:40Z","author_association":"CONTRIBUTOR","body":"@rmuir The original idea behind merge throttling was to prevent a 5GB merge (which could be sparked off by a single indexing request) from consuming all resources and killing search, and perhaps even making the box unresponsive.  This was a scenario I saw regularly in production before merge throttling was introduced.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42531136","html_url":"https://github.com/elastic/elasticsearch/issues/6081#issuecomment-42531136","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6081","id":42531136,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTMxMTM2","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2014-05-08T09:49:27Z","updated_at":"2014-05-08T09:49:27Z","author_association":"CONTRIBUTOR","body":"Then maybe searches should be throttled too? After all a badly formed wildcard or rangequery can easily do the same thing.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42531611","html_url":"https://github.com/elastic/elasticsearch/issues/6081#issuecomment-42531611","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6081","id":42531611,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTMxNjEx","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-05-08T09:54:09Z","updated_at":"2014-05-08T09:54:09Z","author_association":"CONTRIBUTOR","body":"Searches are something that the user has control over. Merges are not. Also, there's PR #4586 which wouldn't throttle searches, but would allow the user to timeout long running searches\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42532238","html_url":"https://github.com/elastic/elasticsearch/issues/6081#issuecomment-42532238","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6081","id":42532238,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTMyMjM4","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2014-05-08T09:57:58Z","updated_at":"2014-05-08T09:57:58Z","author_association":"CONTRIBUTOR","body":"The merge policy can be controlled too. Like i said, the math here behind throttling by default to an arbitrary bytes/second makes little sense. \n\nSure for some specific hardware or specific use case, maybe it can make things better, but by default for everyone?\n\nHow can you sure it was a single merge causing the issue for you and not #5882 ? Maybe your hardware just did not have enough i/o concurrency.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42533036","html_url":"https://github.com/elastic/elasticsearch/issues/6081#issuecomment-42533036","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6081","id":42533036,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTMzMDM2","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-05-08T10:06:40Z","updated_at":"2014-05-08T10:06:40Z","author_association":"CONTRIBUTOR","body":"> How can you sure it was a single merge causing the issue for you and not #5882 ? \n\nI had this problem several times and usually the stats output showed only one merge, but this was a long time ago, so no I can't be sure.\n\n> Maybe your hardware just did not have enough i/o concurrency.\n\nOh for sure it didn't!  But I wasn't running on terrible boxes, in fact they were the biggest boxes I had, and certainly bigger than lots of our users are using now.\n\n> Sure for some specific hardware or specific use case, maybe it can make things better, but by default for everyone?\n\nTrade offs.  For people with fast disks, setting merge throttling too low gives them slow performance.  For people with slow disks, setting merge throttling too high can cause nodes to fall out of the cluster.  I'd prefer the defaults to minimise cluster instability.  If you see slow throughput, it's easy enough to change the throttling. If your node is unstable, it can be more difficult to diagnose.\n\nClearly there is no single default that will work for everybody.  We need to provide good example settings for different hardware setups.  Even better would be some stress test tool which would make recommendations based on the user's actual hardware.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42533484","html_url":"https://github.com/elastic/elasticsearch/issues/6081#issuecomment-42533484","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6081","id":42533484,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTMzNDg0","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2014-05-08T10:12:51Z","updated_at":"2014-05-08T10:12:51Z","author_association":"CONTRIBUTOR","body":"> Clearly there is no single default that will work for everybody. We need to provide good example settings for different hardware setups. Even better would be some stress test tool which would make recommendations based on the user's actual hardware.\n\nSure, but why do it in an indirect way (via merging), instead of directly rate-limiting all writes? This is easier for the user to understand, and its whats implied by #6066\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42534064","html_url":"https://github.com/elastic/elasticsearch/issues/6081#issuecomment-42534064","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6081","id":42534064,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTM0MDY0","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-05-08T10:17:02Z","updated_at":"2014-05-08T10:17:02Z","author_association":"CONTRIBUTOR","body":"Fair enough\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42541181","html_url":"https://github.com/elastic/elasticsearch/issues/6081#issuecomment-42541181","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6081","id":42541181,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTQxMTgx","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2014-05-08T11:54:35Z","updated_at":"2014-05-08T11:54:35Z","author_association":"MEMBER","body":"remember also that merge scheduler and policy are _per_ Lucene index, and in ES, we can have several shards on a node, and merge throttling is the only way we have today to control it across all those shards.\n\nWrites are \"rate\" limited already, btw, because we have a bounded thread pool that defaults to the number of cores, you can't have more threads than that. Rate limiting on number of operations feels weird, it needs to happen due to backpressure building.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42543370","html_url":"https://github.com/elastic/elasticsearch/issues/6081#issuecomment-42543370","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6081","id":42543370,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTQzMzcw","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2014-05-08T12:23:06Z","updated_at":"2014-05-08T12:23:06Z","author_association":"CONTRIBUTOR","body":"Search performance is also impacted by the number of segments... today this throttling (combined with disabling lucene's safety) causes segment explosion, so its probably having the exact opposite impact.\n\nKeeping the index in a healthy state will also naturally improve search performance! These are the reasons why I question if anything should happen here by default.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42544428","html_url":"https://github.com/elastic/elasticsearch/issues/6081#issuecomment-42544428","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6081","id":42544428,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTQ0NDI4","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2014-05-08T12:36:00Z","updated_at":"2014-05-08T12:36:00Z","author_association":"CONTRIBUTOR","body":"> Writes are \"rate\" limited already, btw, because we have a bounded thread pool that defaults to the number of cores\n\nYes, thats nice because it adapts to the concurrency of the hardware of the machine and how fast it can process requests. MB/S does not.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42544997","html_url":"https://github.com/elastic/elasticsearch/issues/6081#issuecomment-42544997","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6081","id":42544997,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTQ0OTk3","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-05-08T12:42:26Z","updated_at":"2014-05-08T12:42:58Z","author_association":"CONTRIBUTOR","body":"> So why rate-limit indexing to some arbitrary bytes/second? Surely not all users want to make this throughput/latency tradeoff just to tune Pnn search metrics, e.g. some may be doing high ingest and things like analytics instead that are less sensitive to small latency changes in search.\n\nthe numbers were not set arbitrarily - I did some measurements in a incremental indexing scenario on a real world search index (~1k docs / min update rate) and the 20mb at that point were the setting  that removed the spikes from the response rate. It was targeted to let housekeeping do it's work but don't go crazy with merging even not for a short time at the cost of having more segments. Given that the intention was to let searches go wild and reduce IO consumption for \"segment housekeeping\" I think it's a valid default? I mean I'd not recommend it if you do bulk indexing while not searching at all which is IMO not the main usecase of ES? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42546398","html_url":"https://github.com/elastic/elasticsearch/issues/6081#issuecomment-42546398","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6081","id":42546398,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTQ2Mzk4","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2014-05-08T12:57:55Z","updated_at":"2014-05-08T12:57:55Z","author_association":"CONTRIBUTOR","body":"> the numbers were not set arbitrarily - I did some measurements in a incremental indexing scenario on a real world search index (~1k docs / min update rate) and the 20mb at that point were the setting that removed the spikes from the response rate. It was targeted to let housekeeping do it's work but don't go crazy with merging even not for a short time at the cost of having more segments. Given that the intention was to let searches go wild and reduce IO consumption for \"segment housekeeping\" I think it's a valid default?\n\nIf its a valid default then what was #5902 :)\n\nI think having an arbitrary number will be tricky over time and hard to tune. It would be great if the default was a little smarter and worked better out of box for different configurations.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42859405","html_url":"https://github.com/elastic/elasticsearch/issues/6081#issuecomment-42859405","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6081","id":42859405,"node_id":"MDEyOklzc3VlQ29tbWVudDQyODU5NDA1","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2014-05-12T17:07:34Z","updated_at":"2014-05-12T17:07:34Z","author_association":"CONTRIBUTOR","body":"We agreed to just keep this at 20 MB/sec default for now.\n\nLonger term we can explore other ideas, e.g. if we can somehow ask the OS to do \"ionice\" for us that would really be best.  Failing that, maybe we tie the merge throttle rate to the recent indexing rate, so that if you are indexing at 20 MB/sec maybe you get allowance for 40 MB/sec merges or something.  This way apps doing bulk indexing will let their merges keep up, but apps doing \"trickle\" indexing (just to push updates into the index) and more searching, will lower the merge throttle.  But we can explore this later.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42860932","html_url":"https://github.com/elastic/elasticsearch/issues/6081#issuecomment-42860932","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6081","id":42860932,"node_id":"MDEyOklzc3VlQ29tbWVudDQyODYwOTMy","user":{"login":"otisg","id":332580,"node_id":"MDQ6VXNlcjMzMjU4MA==","avatar_url":"https://avatars2.githubusercontent.com/u/332580?v=4","gravatar_id":"","url":"https://api.github.com/users/otisg","html_url":"https://github.com/otisg","followers_url":"https://api.github.com/users/otisg/followers","following_url":"https://api.github.com/users/otisg/following{/other_user}","gists_url":"https://api.github.com/users/otisg/gists{/gist_id}","starred_url":"https://api.github.com/users/otisg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/otisg/subscriptions","organizations_url":"https://api.github.com/users/otisg/orgs","repos_url":"https://api.github.com/users/otisg/repos","events_url":"https://api.github.com/users/otisg/events{/privacy}","received_events_url":"https://api.github.com/users/otisg/received_events","type":"User","site_admin":false},"created_at":"2014-05-12T17:19:40Z","updated_at":"2014-05-12T17:19:40Z","author_association":"NONE","body":"@mikemccand - something from the past: http://search-lucene.com/m/D7ypz1gT2H91\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42868084","html_url":"https://github.com/elastic/elasticsearch/issues/6081#issuecomment-42868084","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6081","id":42868084,"node_id":"MDEyOklzc3VlQ29tbWVudDQyODY4MDg0","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2014-05-12T18:18:34Z","updated_at":"2014-05-12T18:18:34Z","author_association":"CONTRIBUTOR","body":"@otisg You should go build those changes :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42868303","html_url":"https://github.com/elastic/elasticsearch/issues/6081#issuecomment-42868303","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6081","id":42868303,"node_id":"MDEyOklzc3VlQ29tbWVudDQyODY4MzAz","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2014-05-12T18:20:23Z","updated_at":"2014-05-12T18:20:23Z","author_association":"CONTRIBUTOR","body":"Er, not closed yet ... gotta actually put the default back to 20 MB/sec.\n","performed_via_github_app":null}]