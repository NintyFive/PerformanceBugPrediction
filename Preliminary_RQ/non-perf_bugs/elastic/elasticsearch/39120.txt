{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/39120","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39120/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39120/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39120/events","html_url":"https://github.com/elastic/elasticsearch/issues/39120","id":411974699,"node_id":"MDU6SXNzdWU0MTE5NzQ2OTk=","number":39120,"title":"Update problem in version 6.1: Update API does not work as expected","user":{"login":"masoudjahromi","id":10682311,"node_id":"MDQ6VXNlcjEwNjgyMzEx","avatar_url":"https://avatars1.githubusercontent.com/u/10682311?v=4","gravatar_id":"","url":"https://api.github.com/users/masoudjahromi","html_url":"https://github.com/masoudjahromi","followers_url":"https://api.github.com/users/masoudjahromi/followers","following_url":"https://api.github.com/users/masoudjahromi/following{/other_user}","gists_url":"https://api.github.com/users/masoudjahromi/gists{/gist_id}","starred_url":"https://api.github.com/users/masoudjahromi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/masoudjahromi/subscriptions","organizations_url":"https://api.github.com/users/masoudjahromi/orgs","repos_url":"https://api.github.com/users/masoudjahromi/repos","events_url":"https://api.github.com/users/masoudjahromi/events{/privacy}","received_events_url":"https://api.github.com/users/masoudjahromi/received_events","type":"User","site_admin":false},"labels":[{"id":145572580,"node_id":"MDU6TGFiZWwxNDU1NzI1ODA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/CRUD","name":":Distributed/CRUD","color":"0e8a16","default":false,"description":"A catch all label for issues around indexing, updating and getting a doc by id. Not search."}],"state":"closed","locked":false,"assignee":{"login":"henningandersen","id":33268011,"node_id":"MDQ6VXNlcjMzMjY4MDEx","avatar_url":"https://avatars2.githubusercontent.com/u/33268011?v=4","gravatar_id":"","url":"https://api.github.com/users/henningandersen","html_url":"https://github.com/henningandersen","followers_url":"https://api.github.com/users/henningandersen/followers","following_url":"https://api.github.com/users/henningandersen/following{/other_user}","gists_url":"https://api.github.com/users/henningandersen/gists{/gist_id}","starred_url":"https://api.github.com/users/henningandersen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henningandersen/subscriptions","organizations_url":"https://api.github.com/users/henningandersen/orgs","repos_url":"https://api.github.com/users/henningandersen/repos","events_url":"https://api.github.com/users/henningandersen/events{/privacy}","received_events_url":"https://api.github.com/users/henningandersen/received_events","type":"User","site_admin":false},"assignees":[{"login":"henningandersen","id":33268011,"node_id":"MDQ6VXNlcjMzMjY4MDEx","avatar_url":"https://avatars2.githubusercontent.com/u/33268011?v=4","gravatar_id":"","url":"https://api.github.com/users/henningandersen","html_url":"https://github.com/henningandersen","followers_url":"https://api.github.com/users/henningandersen/followers","following_url":"https://api.github.com/users/henningandersen/following{/other_user}","gists_url":"https://api.github.com/users/henningandersen/gists{/gist_id}","starred_url":"https://api.github.com/users/henningandersen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henningandersen/subscriptions","organizations_url":"https://api.github.com/users/henningandersen/orgs","repos_url":"https://api.github.com/users/henningandersen/repos","events_url":"https://api.github.com/users/henningandersen/events{/privacy}","received_events_url":"https://api.github.com/users/henningandersen/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2019-02-19T15:15:04Z","updated_at":"2019-07-03T19:06:49Z","closed_at":"2019-07-03T15:49:04Z","author_association":"NONE","active_lock_reason":null,"body":"in version 6.1, when I want to update the age field, it deletes the other fields in the index and only age field will be remain. this problem doesn't occur in version 6.0.\r\n\r\n> my package version: version 6.1\r\n\r\n\r\n- $endpoint->getURI()\r\n\r\n\r\n```\r\n/player/player/65152/_update\"\r\n```\r\n\r\n- $endpoint->getBody()\r\n\r\n\r\n```\r\narray:1 [▼\r\n  \"doc\" => array:1 [▼\r\n    \"age\" => 21\r\n  ]\r\n]\r\n```\r\n\r\n```php5\r\n    /**\r\n     * updating a model\r\n     *\r\n     * @param Searchable|BaseModel $model\r\n     */\r\n    public function updated($model)\r\n    {\r\n        if ($model->getDirty()) {\r\n            $partial['doc'] = $model->getDirty();\r\n            $id = $model->getKeyName();\r\n            $this->elasticSearch->update([\r\n                'index' => $model->getSearchIndex(),\r\n                'type'  => $model->getSearchType(),\r\n                'id'    => $model->$id,\r\n                'body'  => $partial,\r\n            ]);\r\n        }\r\n    }\r\n```","closed_by":{"login":"henningandersen","id":33268011,"node_id":"MDQ6VXNlcjMzMjY4MDEx","avatar_url":"https://avatars2.githubusercontent.com/u/33268011?v=4","gravatar_id":"","url":"https://api.github.com/users/henningandersen","html_url":"https://github.com/henningandersen","followers_url":"https://api.github.com/users/henningandersen/followers","following_url":"https://api.github.com/users/henningandersen/following{/other_user}","gists_url":"https://api.github.com/users/henningandersen/gists{/gist_id}","starred_url":"https://api.github.com/users/henningandersen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henningandersen/subscriptions","organizations_url":"https://api.github.com/users/henningandersen/orgs","repos_url":"https://api.github.com/users/henningandersen/repos","events_url":"https://api.github.com/users/henningandersen/events{/privacy}","received_events_url":"https://api.github.com/users/henningandersen/received_events","type":"User","site_admin":false},"performed_via_github_app":null}