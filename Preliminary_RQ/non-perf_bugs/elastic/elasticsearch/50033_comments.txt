[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/564063012","html_url":"https://github.com/elastic/elasticsearch/issues/50033#issuecomment-564063012","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50033","id":564063012,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDA2MzAxMg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-12-10T14:40:33Z","updated_at":"2019-12-10T14:40:33Z","author_association":"COLLABORATOR","body":"Pinging @elastic/ml-core (:ml/Transform)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/566019691","html_url":"https://github.com/elastic/elasticsearch/issues/50033#issuecomment-566019691","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50033","id":566019691,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjAxOTY5MQ==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2019-12-16T11:20:56Z","updated_at":"2019-12-16T11:20:56Z","author_association":"MEMBER","body":"> Similar to the ML plugin, we could use node attributes which are available in cluster state. A special attribute could be set if cluster.remote.connect:false at the start of the node, e.g. as part of x-pack core (all features that require remote aware placement are part of x-pack, ignoring that CCS is a core feature (OSS)).\r\n\r\nFrom my understanding we require the remote cluster to be accessible from any ML node. That's explicit because all `_search` should run within the ML node. We could apply the same logic to transform (and maybe rollup) and introduce a new attribute like [`node.ml`](https://www.elastic.co/guide/en/elasticsearch/reference/current/ml-settings.html#general-ml-settings)  ? Today any node is eligible for a transform task so it would be helpful imo to leave more room for users to configure where they want to run these background tasks rather than picking nodes based on their connectivity with a remote cluster.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/566494618","html_url":"https://github.com/elastic/elasticsearch/issues/50033#issuecomment-566494618","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50033","id":566494618,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjQ5NDYxOA==","user":{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false},"created_at":"2019-12-17T11:05:21Z","updated_at":"2019-12-17T11:05:21Z","author_association":"CONTRIBUTOR","body":"> > Similar to the ML plugin, we could use node attributes which are available in cluster state. A special attribute could be set if cluster.remote.connect:false at the start of the node, e.g. as part of x-pack core (all features that require remote aware placement are part of x-pack, ignoring that CCS is a core feature (OSS)).\r\n> \r\n> From my understanding we require the remote cluster to be accessible from any ML node. That's explicit because all `_search` should run within the ML node. We could apply the same logic to transform (and maybe rollup) and introduce a new attribute like [`node.ml`](https://www.elastic.co/guide/en/elasticsearch/reference/current/ml-settings.html#general-ml-settings) ? \r\n\r\nThe problem described in #46025 is as far as I understand about having more than 1 ML node while some are not allowed to connect to a remote cluster. This is for sure an exotic case and probably even a misconfiguration, however that's what we allow today and we saw such a setup at least once in the wild.\r\n\r\nTransform can run into the same problem, as it potentially runs on more nodes the problem is more likely to happen (but still exotic). The 2nd concern is usability: We can not reliable check when a user previews, updates or creates a transform.\r\n\r\n> Today any node is eligible for a transform task so it would be helpful imo to leave more room for users to configure where they want to run these background tasks rather than picking nodes based on their connectivity with a remote cluster.\r\n\r\nTransform runs _only_ on data nodes. A dedicated node type for background tasks sounds like a good idea, but is not solving the problem, because you would still be able to configure some of those with remote access and some not. Again usability is involved: it's not possible to check whether all \"background task nodes\" have remote access or not.\r\n\r\nTL/DR\r\n\r\nMaking the ml/transform/background node setting mutually exclusive to disabling remote connection(meaning the node refuses to start if you enable ml but disable remote) sounds wrong to me. I guess nobody wants that, just mentioning this possibility.\r\n\r\nMaybe the discussion should be whether `cluster.remote.connect` should be a _node_ setting. Why would a user disable remote connection on single data nodes. I think he would rather like to disable remote completely or allow it on certain node types (probably not easily to implement and requires a lot of work).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/566511128","html_url":"https://github.com/elastic/elasticsearch/issues/50033#issuecomment-566511128","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50033","id":566511128,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjUxMTEyOA==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2019-12-17T11:57:56Z","updated_at":"2019-12-17T11:57:56Z","author_association":"MEMBER","body":"> Transform runs only on data nodes. A dedicated node type for background tasks sounds like a good idea, but is not solving the problem, because you would still be able to configure some of those with remote access and some not. Again usability is involved: it's not possible to check whether all \"background task nodes\" have remote access or not.\r\n\r\nI think that that would be reasonable to require users to configure nodes eligible for transform with remote access. Today it is required on all data nodes since that's where Transform can run but it would be more flexible to tag the node eligible to run these tasks like we do for ml. I don't really like the automatic assignment based on the node setting, this opens the door to more specialization and makes it difficult to achieve good repartition even when you have a lot of nodes.  \r\n\r\n> Maybe the discussion should be whether cluster.remote.connect should be a node setting. Why would a user disable remote connection on single data nodes. I think he would rather like to disable remote completely or allow it on certain node types (probably not easily to implement and requires a lot of work).\r\n\r\nI think it's ok to allow specialization here but the requirement should be propagated to all features that use remote search. Today clients targets specific machine to coordinate the search, they sometimes exclude data nodes and master eligible nodes, we should have the same for transform;\r\nit runs anywhere by default but you can restrict it to specific nodes if you need to.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/573908181","html_url":"https://github.com/elastic/elasticsearch/issues/50033#issuecomment-573908181","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50033","id":573908181,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MzkwODE4MQ==","user":{"login":"nestermn","id":2244152,"node_id":"MDQ6VXNlcjIyNDQxNTI=","avatar_url":"https://avatars2.githubusercontent.com/u/2244152?v=4","gravatar_id":"","url":"https://api.github.com/users/nestermn","html_url":"https://github.com/nestermn","followers_url":"https://api.github.com/users/nestermn/followers","following_url":"https://api.github.com/users/nestermn/following{/other_user}","gists_url":"https://api.github.com/users/nestermn/gists{/gist_id}","starred_url":"https://api.github.com/users/nestermn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nestermn/subscriptions","organizations_url":"https://api.github.com/users/nestermn/orgs","repos_url":"https://api.github.com/users/nestermn/repos","events_url":"https://api.github.com/users/nestermn/events{/privacy}","received_events_url":"https://api.github.com/users/nestermn/received_events","type":"User","site_admin":false},"created_at":"2020-01-13T22:43:03Z","updated_at":"2020-01-13T22:43:03Z","author_association":"NONE","body":"@hendrikmuhs Hi Hendrik, is there any plans to allow CCS indices in transforms in a nearest future? We are looking for this kind of functionality to support KPI processing for Cloud ECE and ESS environments.\r\n\r\ncc: @AlexP-Elastic @suyograo ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/574149365","html_url":"https://github.com/elastic/elasticsearch/issues/50033#issuecomment-574149365","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50033","id":574149365,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NDE0OTM2NQ==","user":{"login":"benwtrent","id":4357155,"node_id":"MDQ6VXNlcjQzNTcxNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/4357155?v=4","gravatar_id":"","url":"https://api.github.com/users/benwtrent","html_url":"https://github.com/benwtrent","followers_url":"https://api.github.com/users/benwtrent/followers","following_url":"https://api.github.com/users/benwtrent/following{/other_user}","gists_url":"https://api.github.com/users/benwtrent/gists{/gist_id}","starred_url":"https://api.github.com/users/benwtrent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benwtrent/subscriptions","organizations_url":"https://api.github.com/users/benwtrent/orgs","repos_url":"https://api.github.com/users/benwtrent/repos","events_url":"https://api.github.com/users/benwtrent/events{/privacy}","received_events_url":"https://api.github.com/users/benwtrent/received_events","type":"User","site_admin":false},"created_at":"2020-01-14T12:22:24Z","updated_at":"2020-01-14T12:22:24Z","author_association":"MEMBER","body":"@nestermn test out the latest 7.x. @hendrikmuhs recently made changes that should be in 7.6 that allows transforms to supportt CCS (reading from remote clusters)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/574158679","html_url":"https://github.com/elastic/elasticsearch/issues/50033#issuecomment-574158679","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50033","id":574158679,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NDE1ODY3OQ==","user":{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false},"created_at":"2020-01-14T12:49:44Z","updated_at":"2020-01-14T12:49:44Z","author_association":"CONTRIBUTOR","body":"@nestermn as @benwtrent already said: `7.6`, tracking issue is #43201","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/574375990","html_url":"https://github.com/elastic/elasticsearch/issues/50033#issuecomment-574375990","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50033","id":574375990,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NDM3NTk5MA==","user":{"login":"nestermn","id":2244152,"node_id":"MDQ6VXNlcjIyNDQxNTI=","avatar_url":"https://avatars2.githubusercontent.com/u/2244152?v=4","gravatar_id":"","url":"https://api.github.com/users/nestermn","html_url":"https://github.com/nestermn","followers_url":"https://api.github.com/users/nestermn/followers","following_url":"https://api.github.com/users/nestermn/following{/other_user}","gists_url":"https://api.github.com/users/nestermn/gists{/gist_id}","starred_url":"https://api.github.com/users/nestermn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nestermn/subscriptions","organizations_url":"https://api.github.com/users/nestermn/orgs","repos_url":"https://api.github.com/users/nestermn/repos","events_url":"https://api.github.com/users/nestermn/events{/privacy}","received_events_url":"https://api.github.com/users/nestermn/received_events","type":"User","site_admin":false},"created_at":"2020-01-14T21:11:48Z","updated_at":"2020-01-14T21:11:48Z","author_association":"NONE","body":"@benwtrent @hendrikmuhs Great to hear. Looking forward to try it","performed_via_github_app":null}]