[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/418046207","html_url":"https://github.com/elastic/elasticsearch/issues/33341#issuecomment-418046207","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33341","id":418046207,"node_id":"MDEyOklzc3VlQ29tbWVudDQxODA0NjIwNw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-09-03T08:49:19Z","updated_at":"2018-09-03T08:49:19Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/418232243","html_url":"https://github.com/elastic/elasticsearch/issues/33341#issuecomment-418232243","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33341","id":418232243,"node_id":"MDEyOklzc3VlQ29tbWVudDQxODIzMjI0Mw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-09-04T03:40:49Z","updated_at":"2018-09-04T03:40:49Z","author_association":"MEMBER","body":"Sorry, I understand it can be painful, but we are simply not going to relax this at all. We have lived with the JAR hell checks for many years now and despite the pain that they can cause, we firmly believe it's best for our project that they be mandatory.\r\n\r\nAlso, depending on the kind of test that you're running, you might be best served by running a standalone integration test (i.e., one that starts a real instance of Elasticsearch and you fire requests at it) instead of an `ESSingleNodeTestCase` or an `ESIntegTestCase`. With this, since you're starting a real node, you would completely avoid the JAR hell issue test side since you would not have to use `ESTestCase` and it's class hierarchy which brings along the conflicting dependencies.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/418232785","html_url":"https://github.com/elastic/elasticsearch/issues/33341#issuecomment-418232785","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33341","id":418232785,"node_id":"MDEyOklzc3VlQ29tbWVudDQxODIzMjc4NQ==","user":{"login":"jmnarloch","id":1581045,"node_id":"MDQ6VXNlcjE1ODEwNDU=","avatar_url":"https://avatars3.githubusercontent.com/u/1581045?v=4","gravatar_id":"","url":"https://api.github.com/users/jmnarloch","html_url":"https://github.com/jmnarloch","followers_url":"https://api.github.com/users/jmnarloch/followers","following_url":"https://api.github.com/users/jmnarloch/following{/other_user}","gists_url":"https://api.github.com/users/jmnarloch/gists{/gist_id}","starred_url":"https://api.github.com/users/jmnarloch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmnarloch/subscriptions","organizations_url":"https://api.github.com/users/jmnarloch/orgs","repos_url":"https://api.github.com/users/jmnarloch/repos","events_url":"https://api.github.com/users/jmnarloch/events{/privacy}","received_events_url":"https://api.github.com/users/jmnarloch/received_events","type":"User","site_admin":false},"created_at":"2018-09-04T03:45:29Z","updated_at":"2018-09-04T03:45:29Z","author_association":"NONE","body":"My other question is, did you manage to run the tests with coverage, I am pretty sure that this isn't working as well, as the same instrumented classes are going to be on the classpath.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/418232892","html_url":"https://github.com/elastic/elasticsearch/issues/33341#issuecomment-418232892","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33341","id":418232892,"node_id":"MDEyOklzc3VlQ29tbWVudDQxODIzMjg5Mg==","user":{"login":"jmnarloch","id":1581045,"node_id":"MDQ6VXNlcjE1ODEwNDU=","avatar_url":"https://avatars3.githubusercontent.com/u/1581045?v=4","gravatar_id":"","url":"https://api.github.com/users/jmnarloch","html_url":"https://github.com/jmnarloch","followers_url":"https://api.github.com/users/jmnarloch/followers","following_url":"https://api.github.com/users/jmnarloch/following{/other_user}","gists_url":"https://api.github.com/users/jmnarloch/gists{/gist_id}","starred_url":"https://api.github.com/users/jmnarloch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmnarloch/subscriptions","organizations_url":"https://api.github.com/users/jmnarloch/orgs","repos_url":"https://api.github.com/users/jmnarloch/repos","events_url":"https://api.github.com/users/jmnarloch/events{/privacy}","received_events_url":"https://api.github.com/users/jmnarloch/received_events","type":"User","site_admin":false},"created_at":"2018-09-04T03:46:16Z","updated_at":"2018-09-04T06:34:59Z","author_association":"NONE","body":"So I don't want to start unnecessary heated discussion, this is not my point. But the original requests it to make possible for the client opt out of it, not disable it by default.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/418233192","html_url":"https://github.com/elastic/elasticsearch/issues/33341#issuecomment-418233192","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33341","id":418233192,"node_id":"MDEyOklzc3VlQ29tbWVudDQxODIzMzE5Mg==","user":{"login":"jmnarloch","id":1581045,"node_id":"MDQ6VXNlcjE1ODEwNDU=","avatar_url":"https://avatars3.githubusercontent.com/u/1581045?v=4","gravatar_id":"","url":"https://api.github.com/users/jmnarloch","html_url":"https://github.com/jmnarloch","followers_url":"https://api.github.com/users/jmnarloch/followers","following_url":"https://api.github.com/users/jmnarloch/following{/other_user}","gists_url":"https://api.github.com/users/jmnarloch/gists{/gist_id}","starred_url":"https://api.github.com/users/jmnarloch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmnarloch/subscriptions","organizations_url":"https://api.github.com/users/jmnarloch/orgs","repos_url":"https://api.github.com/users/jmnarloch/repos","events_url":"https://api.github.com/users/jmnarloch/events{/privacy}","received_events_url":"https://api.github.com/users/jmnarloch/received_events","type":"User","site_admin":false},"created_at":"2018-09-04T03:48:52Z","updated_at":"2018-09-04T03:48:52Z","author_association":"NONE","body":"```\r\nAlso, depending on the kind of test that you're running, you might be best served by running a standalone integration test (i.e., one that starts a real instance of Elasticsearch and you fire requests at it) instead of an ESSingleNodeTestCase or an ESIntegTestCase. With this, since you're starting a real node, you would completely avoid the JAR hell issue test side since you would not have to use ESTestCase and it's class hierarchy which brings along the conflicting dependencies.\r\n```\r\n\r\nThis is exactly what I am doing, my class inherits from ESIntegTestCase, which by itself inherits from  ESTestCase. ESTestCase is responsible for kicking out the Bootstrap which will eventually check the classpath. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/418241966","html_url":"https://github.com/elastic/elasticsearch/issues/33341#issuecomment-418241966","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33341","id":418241966,"node_id":"MDEyOklzc3VlQ29tbWVudDQxODI0MTk2Ng==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2018-09-04T05:03:11Z","updated_at":"2018-09-04T05:03:11Z","author_association":"CONTRIBUTOR","body":"@jmnarloch I think what @jasontedor means is to run elasticsearch by executing the jar, or using the docker images ( I have used the Gradle docker compose plugin to start elasticsearch before running the tests ). We don't know your exact  scenario  so this may or may not work for you. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/418243221","html_url":"https://github.com/elastic/elasticsearch/issues/33341#issuecomment-418243221","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33341","id":418243221,"node_id":"MDEyOklzc3VlQ29tbWVudDQxODI0MzIyMQ==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2018-09-04T05:13:15Z","updated_at":"2018-09-04T05:13:15Z","author_association":"CONTRIBUTOR","body":"@jasontedor as a side note, the jar hell check from  `ESIntegTestCase` may be redundant as we have a Gradle task that does that for the test classpath before running the test, we may actually be able to save some time during testing by not doing it (I did not check how significant). Of course this would be a breaking change since some users of `ESIntegTestCase` will expect the jar hell check to happen. On the other hand, unlike the test check in the test case, the Gradle task, like any other, can be disabled. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/418338246","html_url":"https://github.com/elastic/elasticsearch/issues/33341#issuecomment-418338246","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33341","id":418338246,"node_id":"MDEyOklzc3VlQ29tbWVudDQxODMzODI0Ng==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-09-04T11:50:16Z","updated_at":"2018-09-04T11:50:16Z","author_association":"MEMBER","body":"> This is exactly what I am doing, my class inherits from ESIntegTestCase, which by itself inherits from ESTestCase. ESTestCase is responsible for kicking out the Bootstrap which will eventually check the classpath.\r\n\r\nAs @atorok mentions, this is exactly what I am suggesting that you do not do. Within Elasticsearch, we are disfavoring the use `ESSingleNodeTestCase` and `ESIntegTestCase`. They are really for when we need low-level control of components within Elasticsearch. For all other test use-cases, we prefer to use standalone integration tests where we startup a real cluster of Elasticsearch and use that for testing.","performed_via_github_app":null}]