{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/25981","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25981/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25981/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25981/events","html_url":"https://github.com/elastic/elasticsearch/issues/25981","id":246735268,"node_id":"MDU6SXNzdWUyNDY3MzUyNjg=","number":25981,"title":"Elasticsearch doesn't start inside a UTF-8 cmd.exe on a Windows Server 2016 Core","user":{"login":"ffosselle","id":1826475,"node_id":"MDQ6VXNlcjE4MjY0NzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1826475?v=4","gravatar_id":"","url":"https://api.github.com/users/ffosselle","html_url":"https://github.com/ffosselle","followers_url":"https://api.github.com/users/ffosselle/followers","following_url":"https://api.github.com/users/ffosselle/following{/other_user}","gists_url":"https://api.github.com/users/ffosselle/gists{/gist_id}","starred_url":"https://api.github.com/users/ffosselle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ffosselle/subscriptions","organizations_url":"https://api.github.com/users/ffosselle/orgs","repos_url":"https://api.github.com/users/ffosselle/repos","events_url":"https://api.github.com/users/ffosselle/events{/privacy}","received_events_url":"https://api.github.com/users/ffosselle/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2017-07-31T12:12:54Z","updated_at":"2018-01-29T11:53:18Z","closed_at":"2017-07-31T12:49:11Z","author_association":"NONE","active_lock_reason":null,"body":"Elasticsearch doesn't start inside a UTF-8 cmd.exe on Windows Server 2016 Core instance.\r\n\r\nThis can be easily reproduced on a Windows 10 instance by manually changing the codepage to 65001:\r\n\r\n1) Open a cmd.exe with default code page set to 850. Elasticsearch starts fine.\r\n2) Change the code page to 65001 (Unicode) via the chcp command.  Start Elasticsearch again. This will throw the exception below:\r\n\r\n`2017-07-31 13:51:03,209 main ERROR Unable to inject fields into builder class for plugin type class org.apache.logging.log4j.core.appender.ConsoleAppender, element Console. java.nio.charset.UnsupportedCharsetException: cp65001\r\n        at java.nio.charset.Charset.forName(Charset.java:531)`\r\n\r\nThe exception is thrown by log4j and already reported as ticket:\r\nhttps://issues.apache.org/jira/browse/LOG4J2-1888\r\n\r\nTill this is fixed, I'm wondering if someone knows a work-around? I tried to set the character set via the log4j2.properties file, but no luck yet.\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}