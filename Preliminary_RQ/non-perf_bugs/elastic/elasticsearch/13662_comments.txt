[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/141553259","html_url":"https://github.com/elastic/elasticsearch/issues/13662#issuecomment-141553259","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13662","id":141553259,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MTU1MzI1OQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-09-18T20:06:13Z","updated_at":"2015-09-18T20:06:13Z","author_association":"CONTRIBUTOR","body":"@devlo thanks so much for opening this, can you reproduce this in a simple self contained example?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/141572573","html_url":"https://github.com/elastic/elasticsearch/issues/13662#issuecomment-141572573","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13662","id":141572573,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MTU3MjU3Mw==","user":{"login":"devlo","id":6026315,"node_id":"MDQ6VXNlcjYwMjYzMTU=","avatar_url":"https://avatars1.githubusercontent.com/u/6026315?v=4","gravatar_id":"","url":"https://api.github.com/users/devlo","html_url":"https://github.com/devlo","followers_url":"https://api.github.com/users/devlo/followers","following_url":"https://api.github.com/users/devlo/following{/other_user}","gists_url":"https://api.github.com/users/devlo/gists{/gist_id}","starred_url":"https://api.github.com/users/devlo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devlo/subscriptions","organizations_url":"https://api.github.com/users/devlo/orgs","repos_url":"https://api.github.com/users/devlo/repos","events_url":"https://api.github.com/users/devlo/events{/privacy}","received_events_url":"https://api.github.com/users/devlo/received_events","type":"User","site_admin":false},"created_at":"2015-09-18T21:25:16Z","updated_at":"2015-09-18T21:25:16Z","author_association":"NONE","body":"As i thought it's a cache problem, i've added _cache: false to terms query (i am using node.js driver) and it's returning good results. I will try to make an example.\nProbably has something to do with #5363\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/141666188","html_url":"https://github.com/elastic/elasticsearch/issues/13662#issuecomment-141666188","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13662","id":141666188,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MTY2NjE4OA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-09-19T13:12:10Z","updated_at":"2015-09-19T13:12:10Z","author_association":"CONTRIBUTOR","body":"Hi @devlo \n\nThe `_cache` parameter is no longer supported in 2.0 (it is silently ignored) so I doubt it has anything to do with this.  A recreation would be very helpful indeed.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/141667639","html_url":"https://github.com/elastic/elasticsearch/issues/13662#issuecomment-141667639","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13662","id":141667639,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MTY2NzYzOQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-09-19T13:17:49Z","updated_at":"2015-09-19T13:17:49Z","author_association":"CONTRIBUTOR","body":"This is what I've tried doing to recreate this, but it works as expected:\n\n```\nPOST t/t\n{\n  \"title\": \"One foo bar\",\n  \"cats\": [\"one\",\"two\",\"three\"]\n}\n\nPOST t/t\n{\n  \"title\": \"Two foo bar\",\n  \"cats\": [\"one\",\"two\"]\n}\n\nPOST t/t\n{\n  \"title\": \"Three foo bar\",\n  \"cats\": [\"two\"]\n}\n\nGET _search\n{\n  \"query\": {\n    \"filtered\": {\n      \"query\": {\n        \"query_string\": {\n          \"query\": \"*\"\n        }\n      }, \n      \"filter\": {\n        \"terms\": {\n          \"cats\": [\n            \"one\",\n            \"three\"\n          ]\n        }\n      }\n    }\n  }\n}\n\nGET _search\n{\n  \"query\": {\n    \"filtered\": {\n      \"query\": {\"match\": {\n        \"title\": \"One\"\n      }}, \n      \"filter\": {\n        \"terms\": {\n          \"cats\": [\n            \"one\",\n            \"three\"\n          ]\n        }\n      }\n    }\n  }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/141707343","html_url":"https://github.com/elastic/elasticsearch/issues/13662#issuecomment-141707343","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13662","id":141707343,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MTcwNzM0Mw==","user":{"login":"devlo","id":6026315,"node_id":"MDQ6VXNlcjYwMjYzMTU=","avatar_url":"https://avatars1.githubusercontent.com/u/6026315?v=4","gravatar_id":"","url":"https://api.github.com/users/devlo","html_url":"https://github.com/devlo","followers_url":"https://api.github.com/users/devlo/followers","following_url":"https://api.github.com/users/devlo/following{/other_user}","gists_url":"https://api.github.com/users/devlo/gists{/gist_id}","starred_url":"https://api.github.com/users/devlo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devlo/subscriptions","organizations_url":"https://api.github.com/users/devlo/orgs","repos_url":"https://api.github.com/users/devlo/repos","events_url":"https://api.github.com/users/devlo/events{/privacy}","received_events_url":"https://api.github.com/users/devlo/received_events","type":"User","site_admin":false},"created_at":"2015-09-19T21:06:04Z","updated_at":"2015-09-19T21:06:04Z","author_association":"NONE","body":"Hmmm i can't reproduce it now, i've restarted elasticsearch after that, used _cache: false and i thought it was the issue. But i've removed _cache: false and tried now and everything works as intented. Indeed very wierd behaviour. It's wierd because i had the same issue on local test environment and on remote test server. I've restarted elastic on both. I will observe this as i am working on 2.0 beta anyway.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/145870946","html_url":"https://github.com/elastic/elasticsearch/issues/13662#issuecomment-145870946","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13662","id":145870946,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NTg3MDk0Ng==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-10-06T14:19:39Z","updated_at":"2015-10-06T14:19:39Z","author_association":"CONTRIBUTOR","body":"Looks like a false alarm. Closing.  Feel free to reopen if you can reproduce.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/242735959","html_url":"https://github.com/elastic/elasticsearch/issues/13662#issuecomment-242735959","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13662","id":242735959,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MjczNTk1OQ==","user":{"login":"JulianRooze","id":1694905,"node_id":"MDQ6VXNlcjE2OTQ5MDU=","avatar_url":"https://avatars2.githubusercontent.com/u/1694905?v=4","gravatar_id":"","url":"https://api.github.com/users/JulianRooze","html_url":"https://github.com/JulianRooze","followers_url":"https://api.github.com/users/JulianRooze/followers","following_url":"https://api.github.com/users/JulianRooze/following{/other_user}","gists_url":"https://api.github.com/users/JulianRooze/gists{/gist_id}","starred_url":"https://api.github.com/users/JulianRooze/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JulianRooze/subscriptions","organizations_url":"https://api.github.com/users/JulianRooze/orgs","repos_url":"https://api.github.com/users/JulianRooze/repos","events_url":"https://api.github.com/users/JulianRooze/events{/privacy}","received_events_url":"https://api.github.com/users/JulianRooze/received_events","type":"User","site_admin":false},"created_at":"2016-08-26T13:31:29Z","updated_at":"2016-08-26T13:35:00Z","author_association":"NONE","body":"Hi,\n\nI believe I currently have this same issue (or at least related) and have a reproducible case (at least on my machine and our production cluster :D). I can't post the data publicly, but poke me on Twitter @queryable (or let me know where I can send it to) and I can provide it for you (it's small enough at 9 MB). \n\nI've opened a Stackoverflow question on it here:\n\nhttp://stackoverflow.com/questions/39155676/erratic-search-results-from-elastic-when-sorting-on-a-field\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/242739976","html_url":"https://github.com/elastic/elasticsearch/issues/13662#issuecomment-242739976","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13662","id":242739976,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MjczOTk3Ng==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-08-26T13:47:19Z","updated_at":"2016-08-26T13:47:19Z","author_association":"CONTRIBUTOR","body":"@JulianRooze could you email it to me at clinton at elastic dot co?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/242742918","html_url":"https://github.com/elastic/elasticsearch/issues/13662#issuecomment-242742918","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13662","id":242742918,"node_id":"MDEyOklzc3VlQ29tbWVudDI0Mjc0MjkxOA==","user":{"login":"JulianRooze","id":1694905,"node_id":"MDQ6VXNlcjE2OTQ5MDU=","avatar_url":"https://avatars2.githubusercontent.com/u/1694905?v=4","gravatar_id":"","url":"https://api.github.com/users/JulianRooze","html_url":"https://github.com/JulianRooze","followers_url":"https://api.github.com/users/JulianRooze/followers","following_url":"https://api.github.com/users/JulianRooze/following{/other_user}","gists_url":"https://api.github.com/users/JulianRooze/gists{/gist_id}","starred_url":"https://api.github.com/users/JulianRooze/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JulianRooze/subscriptions","organizations_url":"https://api.github.com/users/JulianRooze/orgs","repos_url":"https://api.github.com/users/JulianRooze/repos","events_url":"https://api.github.com/users/JulianRooze/events{/privacy}","received_events_url":"https://api.github.com/users/JulianRooze/received_events","type":"User","site_admin":false},"created_at":"2016-08-26T13:58:58Z","updated_at":"2016-08-26T13:58:58Z","author_association":"NONE","body":"@clintongormley I've mailed it to you, thanks! \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/255182821","html_url":"https://github.com/elastic/elasticsearch/issues/13662#issuecomment-255182821","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13662","id":255182821,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTE4MjgyMQ==","user":{"login":"JulianRooze","id":1694905,"node_id":"MDQ6VXNlcjE2OTQ5MDU=","avatar_url":"https://avatars2.githubusercontent.com/u/1694905?v=4","gravatar_id":"","url":"https://api.github.com/users/JulianRooze","html_url":"https://github.com/JulianRooze","followers_url":"https://api.github.com/users/JulianRooze/followers","following_url":"https://api.github.com/users/JulianRooze/following{/other_user}","gists_url":"https://api.github.com/users/JulianRooze/gists{/gist_id}","starred_url":"https://api.github.com/users/JulianRooze/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JulianRooze/subscriptions","organizations_url":"https://api.github.com/users/JulianRooze/orgs","repos_url":"https://api.github.com/users/JulianRooze/repos","events_url":"https://api.github.com/users/JulianRooze/events{/privacy}","received_events_url":"https://api.github.com/users/JulianRooze/received_events","type":"User","site_admin":false},"created_at":"2016-10-20T18:06:35Z","updated_at":"2016-10-20T18:06:35Z","author_association":"NONE","body":"@clintongormley Hi Clinton, I was curious about this issue and if you guys have made any progress on it. Last I heard you managed to reproduce the faulty behavior. This is both speaking out of curiosity what the cause behind this weird behavior is and whether I can strip the workaround from our code yet :)\n\nCheers! \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/257943335","html_url":"https://github.com/elastic/elasticsearch/issues/13662#issuecomment-257943335","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13662","id":257943335,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Nzk0MzMzNQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-11-02T17:46:02Z","updated_at":"2016-11-02T17:46:02Z","author_association":"CONTRIBUTOR","body":"Sorry @JulianRooze - this was fixed in #20196\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/257980873","html_url":"https://github.com/elastic/elasticsearch/issues/13662#issuecomment-257980873","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13662","id":257980873,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Nzk4MDg3Mw==","user":{"login":"JulianRooze","id":1694905,"node_id":"MDQ6VXNlcjE2OTQ5MDU=","avatar_url":"https://avatars2.githubusercontent.com/u/1694905?v=4","gravatar_id":"","url":"https://api.github.com/users/JulianRooze","html_url":"https://github.com/JulianRooze","followers_url":"https://api.github.com/users/JulianRooze/followers","following_url":"https://api.github.com/users/JulianRooze/following{/other_user}","gists_url":"https://api.github.com/users/JulianRooze/gists{/gist_id}","starred_url":"https://api.github.com/users/JulianRooze/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JulianRooze/subscriptions","organizations_url":"https://api.github.com/users/JulianRooze/orgs","repos_url":"https://api.github.com/users/JulianRooze/repos","events_url":"https://api.github.com/users/JulianRooze/events{/privacy}","received_events_url":"https://api.github.com/users/JulianRooze/received_events","type":"User","site_admin":false},"created_at":"2016-11-02T19:58:22Z","updated_at":"2016-11-02T19:58:22Z","author_association":"NONE","body":"@clintongormley Great, thanks for letting me know! \n","performed_via_github_app":null}]