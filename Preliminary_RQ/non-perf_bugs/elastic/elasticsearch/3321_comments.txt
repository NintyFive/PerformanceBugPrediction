[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/21291376","html_url":"https://github.com/elastic/elasticsearch/issues/3321#issuecomment-21291376","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3321","id":21291376,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMjkxMzc2","user":{"login":"lmenezes","id":750074,"node_id":"MDQ6VXNlcjc1MDA3NA==","avatar_url":"https://avatars1.githubusercontent.com/u/750074?v=4","gravatar_id":"","url":"https://api.github.com/users/lmenezes","html_url":"https://github.com/lmenezes","followers_url":"https://api.github.com/users/lmenezes/followers","following_url":"https://api.github.com/users/lmenezes/following{/other_user}","gists_url":"https://api.github.com/users/lmenezes/gists{/gist_id}","starred_url":"https://api.github.com/users/lmenezes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmenezes/subscriptions","organizations_url":"https://api.github.com/users/lmenezes/orgs","repos_url":"https://api.github.com/users/lmenezes/repos","events_url":"https://api.github.com/users/lmenezes/events{/privacy}","received_events_url":"https://api.github.com/users/lmenezes/received_events","type":"User","site_admin":false},"created_at":"2013-07-20T10:24:16Z","updated_at":"2013-07-20T10:24:16Z","author_association":"CONTRIBUTOR","body":"this is the same as: https://github.com/elasticsearch/elasticsearch/issues/2462\nI don't really see it being fixed anytime soon(maybe on 1.0 this will be different?). \nProbably it makes sense for you to just have a multi field for this, having a value as an ip and another as string. Then you could use the first for whatever you are currently using, and the second to facet.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/21436282","html_url":"https://github.com/elastic/elasticsearch/issues/3321#issuecomment-21436282","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3321","id":21436282,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNDM2Mjgy","user":{"login":"ralphm","id":116741,"node_id":"MDQ6VXNlcjExNjc0MQ==","avatar_url":"https://avatars1.githubusercontent.com/u/116741?v=4","gravatar_id":"","url":"https://api.github.com/users/ralphm","html_url":"https://github.com/ralphm","followers_url":"https://api.github.com/users/ralphm/followers","following_url":"https://api.github.com/users/ralphm/following{/other_user}","gists_url":"https://api.github.com/users/ralphm/gists{/gist_id}","starred_url":"https://api.github.com/users/ralphm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ralphm/subscriptions","organizations_url":"https://api.github.com/users/ralphm/orgs","repos_url":"https://api.github.com/users/ralphm/repos","events_url":"https://api.github.com/users/ralphm/events{/privacy}","received_events_url":"https://api.github.com/users/ralphm/received_events","type":"User","site_admin":false},"created_at":"2013-07-23T18:39:52Z","updated_at":"2013-07-23T18:39:52Z","author_association":"NONE","body":"@lmenezes how does that help exactly? For facet queries like the above you'd still get facets that have to be processed before presenting them in a UI.\n\nThat said, I'm getting back IP addresses as strings when faceting with a field of type `ip` in a clean test.\n\nHowever, I found that if there are other mappings, where a field by the same name has type `string`, I am getting responses like the following, which don't even look like IP addresses to me:\n\n```\n    \"facets\" : {\n        \"pie\" : {\n            \"_type\" : \"terms\",\n            \"missing\" : 133599,\n            \"total\" : 1683808,\n            \"other\" : 701976,\n            \"terms\" : [ {\n                \"term\" : \"\\\\\\b\",\n                \"count\" : 105238\n            }, {\n                \"term\" : \"X\\u0001\\u0000\",\n                \"count\" : 105238\n            }, {\n                \"term\" : \"T\\u0010\\u0000\",\n                \"count\" : 105238\n            }, {\n                \"term\" : \"P\\u0002\\u0000\\u0000\",\n                \"count\" : 105238\n            }, {\n                \"term\" : \"L \\u0000\\u0000\",\n                \"count\" : 105238\n            }, {\n                \"term\" : \"H\\u0004\\u0000\\u0000\\u0000\",\n                \"count\" : 105238\n            }, {\n                \"term\" : \"D@\\u0000\\u0000\\u0000\",\n                \"count\" : 105238\n            }, {\n                \"term\" : \"@\\b\\u0000\\u0000\\u0000\\u0000\",\n                \"count\" : 105238\n            }, {\n                \"term\" : \"<\\u0001\\u0000\\u0000\\u0000\\u0000\\n\",\n                \"count\" : 70859\n            }, {\n                \"term\" : \"8\\u0010\\u0000\\u0000\\u0000\\u0001&\",\n                \"count\" : 69069\n            } ]\n        }\n    }\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/21437716","html_url":"https://github.com/elastic/elasticsearch/issues/3321#issuecomment-21437716","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3321","id":21437716,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNDM3NzE2","user":{"login":"lmenezes","id":750074,"node_id":"MDQ6VXNlcjc1MDA3NA==","avatar_url":"https://avatars1.githubusercontent.com/u/750074?v=4","gravatar_id":"","url":"https://api.github.com/users/lmenezes","html_url":"https://github.com/lmenezes","followers_url":"https://api.github.com/users/lmenezes/followers","following_url":"https://api.github.com/users/lmenezes/following{/other_user}","gists_url":"https://api.github.com/users/lmenezes/gists{/gist_id}","starred_url":"https://api.github.com/users/lmenezes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmenezes/subscriptions","organizations_url":"https://api.github.com/users/lmenezes/orgs","repos_url":"https://api.github.com/users/lmenezes/repos","events_url":"https://api.github.com/users/lmenezes/events{/privacy}","received_events_url":"https://api.github.com/users/lmenezes/received_events","type":"User","site_admin":false},"created_at":"2013-07-23T19:00:47Z","updated_at":"2013-07-23T19:00:47Z","author_association":"CONTRIBUTOR","body":"@ralphm not really sure what you meant there... but running that:\n\n```\ncurl -XPOST http://localhost:9200/foo\n\ncurl -XPUT http://localhost:9200/foo/bar/_mapping -d '{ \"bar\": { \"properties\": { \"clientip\": { \"type\": \"multi_field\", \"fields\": { \"clientip\": { \"type\": \"ip\" }, \"clientip_facet\": { \"type\": \"string\", \"index\": \"not_analyzed\" } } } } } }'\n\ncurl -XPUT http://localhost:9200/foo/bar/1 -d '{\"clientip\":\"192.168.0.1\"}'\ncurl -XPUT http://localhost:9200/foo/bar/2 -d '{\"clientip\":\"192.168.0.2\"}'\ncurl -XPUT http://localhost:9200/foo/bar/3 -d '{\"clientip\":\"192.168.0.3\"}'\ncurl -XPUT http://localhost:9200/foo/bar/4 -d '{\"clientip\":\"192.168.0.4\"}'\n\ncurl -XGET http://localhost:9200/foo/bar/_search -d '{ \"facets\": { \"pie\": { \"terms\": { \"field\": \"clientip\", \"size\": 10 } } } }'\ncurl -XGET http://localhost:9200/foo/bar/_search -d '{ \"facets\": { \"pie\": { \"terms\": { \"field\": \"clientip_facet\", \"size\": 10 } } } }'\n```\n\nmight give you an idea of what I meant. \nOf course you have to replicate some information here, but I see no better way currently for achieving the same.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/21441072","html_url":"https://github.com/elastic/elasticsearch/issues/3321#issuecomment-21441072","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3321","id":21441072,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNDQxMDcy","user":{"login":"ralphm","id":116741,"node_id":"MDQ6VXNlcjExNjc0MQ==","avatar_url":"https://avatars1.githubusercontent.com/u/116741?v=4","gravatar_id":"","url":"https://api.github.com/users/ralphm","html_url":"https://github.com/ralphm","followers_url":"https://api.github.com/users/ralphm/followers","following_url":"https://api.github.com/users/ralphm/following{/other_user}","gists_url":"https://api.github.com/users/ralphm/gists{/gist_id}","starred_url":"https://api.github.com/users/ralphm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ralphm/subscriptions","organizations_url":"https://api.github.com/users/ralphm/orgs","repos_url":"https://api.github.com/users/ralphm/repos","events_url":"https://api.github.com/users/ralphm/events{/privacy}","received_events_url":"https://api.github.com/users/ralphm/received_events","type":"User","site_admin":false},"created_at":"2013-07-23T19:53:37Z","updated_at":"2013-07-23T19:53:37Z","author_association":"NONE","body":"@lmenezes Ah, yes. I just did the same thing on my own.\n\nInterestingly, I now also see those IPs as integers on my other installation. I'm not entirely sure what the difference is between these two installs. They should be identical.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/27465636","html_url":"https://github.com/elastic/elasticsearch/issues/3321#issuecomment-27465636","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3321","id":27465636,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDY1NjM2","user":{"login":"avleen","id":539525,"node_id":"MDQ6VXNlcjUzOTUyNQ==","avatar_url":"https://avatars1.githubusercontent.com/u/539525?v=4","gravatar_id":"","url":"https://api.github.com/users/avleen","html_url":"https://github.com/avleen","followers_url":"https://api.github.com/users/avleen/followers","following_url":"https://api.github.com/users/avleen/following{/other_user}","gists_url":"https://api.github.com/users/avleen/gists{/gist_id}","starred_url":"https://api.github.com/users/avleen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/avleen/subscriptions","organizations_url":"https://api.github.com/users/avleen/orgs","repos_url":"https://api.github.com/users/avleen/repos","events_url":"https://api.github.com/users/avleen/events{/privacy}","received_events_url":"https://api.github.com/users/avleen/received_events","type":"User","site_admin":false},"created_at":"2013-10-31T06:55:29Z","updated_at":"2013-10-31T06:55:29Z","author_association":"NONE","body":"Just for reference, I found that if you set  `\"index\" : \"not_analyzed\"` on the `ip` field, it doesn't break.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/27499361","html_url":"https://github.com/elastic/elasticsearch/issues/3321#issuecomment-27499361","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3321","id":27499361,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDk5MzYx","user":{"login":"mkaluza","id":991991,"node_id":"MDQ6VXNlcjk5MTk5MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/991991?v=4","gravatar_id":"","url":"https://api.github.com/users/mkaluza","html_url":"https://github.com/mkaluza","followers_url":"https://api.github.com/users/mkaluza/followers","following_url":"https://api.github.com/users/mkaluza/following{/other_user}","gists_url":"https://api.github.com/users/mkaluza/gists{/gist_id}","starred_url":"https://api.github.com/users/mkaluza/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkaluza/subscriptions","organizations_url":"https://api.github.com/users/mkaluza/orgs","repos_url":"https://api.github.com/users/mkaluza/repos","events_url":"https://api.github.com/users/mkaluza/events{/privacy}","received_events_url":"https://api.github.com/users/mkaluza/received_events","type":"User","site_admin":false},"created_at":"2013-10-31T16:08:04Z","updated_at":"2013-10-31T16:08:04Z","author_association":"NONE","body":"Thanks for the tip. Unfortunately I need an index on this field :/\n\n2013/10/31 avleen notifications@github.com\n\n> Just for reference, I found that if you set \"index\" : \"not_analyzed\" on\n> the ip field, it doesn't break.\n> \n> —\n> Reply to this email directly or view it on GitHubhttps://github.com/elasticsearch/elasticsearch/issues/3321#issuecomment-27465636\n> .\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/27500193","html_url":"https://github.com/elastic/elasticsearch/issues/3321#issuecomment-27500193","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3321","id":27500193,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTAwMTkz","user":{"login":"avleen","id":539525,"node_id":"MDQ6VXNlcjUzOTUyNQ==","avatar_url":"https://avatars1.githubusercontent.com/u/539525?v=4","gravatar_id":"","url":"https://api.github.com/users/avleen","html_url":"https://github.com/avleen","followers_url":"https://api.github.com/users/avleen/followers","following_url":"https://api.github.com/users/avleen/following{/other_user}","gists_url":"https://api.github.com/users/avleen/gists{/gist_id}","starred_url":"https://api.github.com/users/avleen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/avleen/subscriptions","organizations_url":"https://api.github.com/users/avleen/orgs","repos_url":"https://api.github.com/users/avleen/repos","events_url":"https://api.github.com/users/avleen/events{/privacy}","received_events_url":"https://api.github.com/users/avleen/received_events","type":"User","site_admin":false},"created_at":"2013-10-31T16:16:00Z","updated_at":"2013-10-31T16:16:00Z","author_association":"NONE","body":"That's fine :-)\n\nNot analysing only means that analyser isn't run against the content of the\nfield. The analyser tokenizes the contacts for doing things like frequency\nsearches of characters in words the field will still be indexed, and you\nwill still be able to do searches against it, including wild card and range\nsearches.\n\nFor a while I was also under the impression that you had to analyse in\norder to index this is simply not the case. In fact, with my input from log\nstash, I make every field not analysed, except for the source field. It\nspeeds up indexing and reduces index size quite noticeably .\nOn 31 Oct 2013 11:09, \"mkaluza\" notifications@github.com wrote:\n\n> Thanks for the tip. Unfortunately I need an index on this field :/\n> \n> 2013/10/31 avleen notifications@github.com\n> \n> > Just for reference, I found that if you set \"index\" : \"not_analyzed\" on\n> > the ip field, it doesn't break.\n> > \n> > —\n> > Reply to this email directly or view it on GitHub<\n> > https://github.com/elasticsearch/elasticsearch/issues/3321#issuecomment-27465636>\n> > \n> > .\n> \n> —\n> Reply to this email directly or view it on GitHubhttps://github.com/elasticsearch/elasticsearch/issues/3321#issuecomment-27499361\n> .\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/28623230","html_url":"https://github.com/elastic/elasticsearch/issues/3321#issuecomment-28623230","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3321","id":28623230,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjIzMjMw","user":{"login":"stonith","id":1230015,"node_id":"MDQ6VXNlcjEyMzAwMTU=","avatar_url":"https://avatars2.githubusercontent.com/u/1230015?v=4","gravatar_id":"","url":"https://api.github.com/users/stonith","html_url":"https://github.com/stonith","followers_url":"https://api.github.com/users/stonith/followers","following_url":"https://api.github.com/users/stonith/following{/other_user}","gists_url":"https://api.github.com/users/stonith/gists{/gist_id}","starred_url":"https://api.github.com/users/stonith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stonith/subscriptions","organizations_url":"https://api.github.com/users/stonith/orgs","repos_url":"https://api.github.com/users/stonith/repos","events_url":"https://api.github.com/users/stonith/events{/privacy}","received_events_url":"https://api.github.com/users/stonith/received_events","type":"User","site_admin":false},"created_at":"2013-11-16T09:42:13Z","updated_at":"2013-11-16T09:56:34Z","author_association":"NONE","body":"@avleen Term facets return ip's for you when your mapping is like: \"clientip\": { \"type\": \"ip\", \"index\": \"not_analyzed\" } ? I'm getting integers.\n\nUPDATE: I just realized that \"index\": \"not_analyzed\" isn't a valid option for type ip: \n\nhttp://www.elasticsearch.org/guide/en/elasticsearch/reference/current/mapping-ip-type.html\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/29877116","html_url":"https://github.com/elastic/elasticsearch/issues/3321#issuecomment-29877116","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3321","id":29877116,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODc3MTE2","user":{"login":"rottenbytes","id":230900,"node_id":"MDQ6VXNlcjIzMDkwMA==","avatar_url":"https://avatars0.githubusercontent.com/u/230900?v=4","gravatar_id":"","url":"https://api.github.com/users/rottenbytes","html_url":"https://github.com/rottenbytes","followers_url":"https://api.github.com/users/rottenbytes/followers","following_url":"https://api.github.com/users/rottenbytes/following{/other_user}","gists_url":"https://api.github.com/users/rottenbytes/gists{/gist_id}","starred_url":"https://api.github.com/users/rottenbytes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rottenbytes/subscriptions","organizations_url":"https://api.github.com/users/rottenbytes/orgs","repos_url":"https://api.github.com/users/rottenbytes/repos","events_url":"https://api.github.com/users/rottenbytes/events{/privacy}","received_events_url":"https://api.github.com/users/rottenbytes/received_events","type":"User","site_admin":false},"created_at":"2013-12-05T07:36:54Z","updated_at":"2013-12-05T07:36:54Z","author_association":"NONE","body":":+1: on this one, it's pretty boring\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/29877733","html_url":"https://github.com/elastic/elasticsearch/issues/3321#issuecomment-29877733","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3321","id":29877733,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODc3NzMz","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2013-12-05T07:51:58Z","updated_at":"2013-12-05T07:51:58Z","author_association":"MEMBER","body":"Heya,\n\nThe advice provided by @lmenezes could really help you guys to deal with this issue: https://github.com/elasticsearch/elasticsearch/issues/3321#issuecomment-21437716\n\nI think we can close this one as #3300 (see IP Range) will fix it.\n\nFeel free to reopen if you don't think so.\n","performed_via_github_app":null}]