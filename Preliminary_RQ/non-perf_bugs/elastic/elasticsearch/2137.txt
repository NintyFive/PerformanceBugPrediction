{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/2137","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2137/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2137/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2137/events","html_url":"https://github.com/elastic/elasticsearch/issues/2137","id":5994116,"node_id":"MDU6SXNzdWU1OTk0MTE2","number":2137,"title":"TooLongFrameException","user":{"login":"jordansissel","id":131818,"node_id":"MDQ6VXNlcjEzMTgxOA==","avatar_url":"https://avatars1.githubusercontent.com/u/131818?v=4","gravatar_id":"","url":"https://api.github.com/users/jordansissel","html_url":"https://github.com/jordansissel","followers_url":"https://api.github.com/users/jordansissel/followers","following_url":"https://api.github.com/users/jordansissel/following{/other_user}","gists_url":"https://api.github.com/users/jordansissel/gists{/gist_id}","starred_url":"https://api.github.com/users/jordansissel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jordansissel/subscriptions","organizations_url":"https://api.github.com/users/jordansissel/orgs","repos_url":"https://api.github.com/users/jordansissel/repos","events_url":"https://api.github.com/users/jordansissel/events{/privacy}","received_events_url":"https://api.github.com/users/jordansissel/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":16,"created_at":"2012-08-02T14:57:24Z","updated_at":"2014-07-08T15:40:17Z","closed_at":"2014-07-08T15:40:17Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"While debugging pipeline stalls in logstash, I found this in elasticsearch's output:\n\n```\n[2012-08-01 18:27:13,778][WARN ][transport.netty          ] [Penance] Exception caught on netty layer [[id: 0x5f315cd6, /127.0.0.1:51889 => /127.0.0.1:9300]]org.elasticsearch.common.netty.handler.codec.frame.TooLongFrameException: transport content length received [1.4gb] exceeded [910.1mb]        \n    at org.elasticsearch.transport.netty.MessageChannelHandler.callDecode(MessageChannelHandler.java:143)        \n    at org.elasticsearch.transport.netty.MessageChannelHandler.messageReceived(MessageChannelHandler.java:101)        \n    at org.elasticsearch.common.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:75)        \n    at org.elasticsearch.common.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:563)        \n    at org.elasticsearch.common.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)        \n    at org.elasticsearch.common.netty.OpenChannelsHandler.handleUpstream(OpenChannelsHandler.java:74)        \n    at org.elasticsearch.common.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:563)        \n    at org.elasticsearch.common.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:558)        \n    at org.elasticsearch.common.netty.channel.Channels.fireMessageReceived(Channels.java:268)        \n    at org.elasticsearch.common.netty.channel.Channels.fireMessageReceived(Channels.java:255)        \n    at org.elasticsearch.common.netty.channel.socket.nio.NioWorker.read(NioWorker.java:91)         \n    at org.elasticsearch.common.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:373)        \n    at org.elasticsearch.common.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:247)        \n    at org.elasticsearch.common.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)          \n    at org.elasticsearch.common.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:102)\n    at org.elasticsearch.common.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)\n    at java.lang.Thread.run(Thread.java:619)\n```\n\nMy config is:\n\n```\n% grep '^[A-z]' config/elasticsearch.yml \nnetwork.bind_host: 127.0.0.1\nnetwork.host: 127.0.0.1\ntransport.tcp.compress: true\nhttp.host: 127.0.0.1\ndiscovery.zen.ping.multicast.enabled: false\nindex.store.compress.stored: true\nindex.store.compress.tv: true\n```\n\nOn a hunch, I'm going to disable transport compression to see if this makes the problem go away. I'll try to reproduce if it happens again.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}