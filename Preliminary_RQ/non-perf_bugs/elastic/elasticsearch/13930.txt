{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/13930","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13930/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13930/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13930/events","html_url":"https://github.com/elastic/elasticsearch/issues/13930","id":109752898,"node_id":"MDU6SXNzdWUxMDk3NTI4OTg=","number":13930,"title":"Switch to gradle build system","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"labels":[{"id":106454670,"node_id":"MDU6TGFiZWwxMDY0NTQ2NzA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Build","name":":Delivery/Build","color":"0e8a16","default":false,"description":"Build or test infrastructure"},{"id":158399402,"node_id":"MDU6TGFiZWwxNTgzOTk0MDI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Meta","name":"Meta","color":"e11d21","default":false,"description":null},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"},{"id":302749677,"node_id":"MDU6TGFiZWwzMDI3NDk2Nzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v2.3.0","name":"v2.3.0","color":"dddddd","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":17,"created_at":"2015-10-05T08:40:08Z","updated_at":"2020-11-11T21:44:08Z","closed_at":"2016-01-28T19:10:09Z","author_association":"MEMBER","active_lock_reason":null,"body":"We currently have a very large maven build system, comprising of 6k lines of xml. While maven parent POMs have been very useful in de-duplicating build logic across elasticsearch and plugins, the rigidity of maven has required us to begin implementing most of our test logic through `maven-antrun-plugin`. Another major problem with multi-module builds is trap: building a module requires explicitly listing an upstream module in order to get a local build of the dependency, or building from a higher level module (which implicitly builds all sub-modules). And finally, the maven model is incapable of decoupling test dependencies from main dependencies, in that tests for module A, cannot depend on module B, which in turn depends on module A (this is _not_ a cycle).\n\nI have a branch which contains elasticsearch switched to using gradle:\nhttps://github.com/elastic/elasticsearch/tree/burn_maven_with_fire\n\nThis is a tracking issue for completing the migration to gradle. The tasks are separated into two groups: those remaining required before pushing to master (as to not completely break development), and those required for the migration to be complete, which must happen before the next release (tentatively 2.2).\n\nRequired for master push:\n- [x] Maven publishing\n- [x] Windows integ test support\n- [x] Setup publishing of buildSrc (ie ES gradle build plugins)\n- [x] Publish \"attach project plugin\" (allows dynamically including a multi-project build inside another build)\n\nRequired for release:\n- [x] Copyright header check\n- [x] Vagrant qa tests\n- [x] Multi node qa tests (#14921)\n- [x] Rpm/deb building complete\n- [ ] Rpm signing\n- [x] Distribution tests\n- [x] Update plugins not in elasticsearch repo to use ES gradle build plugins (mapper attachment: elastic/elasticsearch-mapper-attachments#184)\n- [ ] Document new ES gradle build plugins (for ES plugin authors)\n- [ ] Document building/testing in README/TESTING (this is done except for jacoco reports)\n- [x] integ tests parity: #14464\n\nAddtional nice to haves:\n- [x] Make qa plugins work in eclipse (need to configure custom classpath)\n- [x] Add `run` task for elasticsearch and plugins to replace `run.sh`/`run.bat`: #14451\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}