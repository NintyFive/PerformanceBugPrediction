{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/53887","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53887/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53887/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53887/events","html_url":"https://github.com/elastic/elasticsearch/issues/53887","id":585244734,"node_id":"MDU6SXNzdWU1ODUyNDQ3MzQ=","number":53887,"title":"[CI] DocsClientYamlTestSuiteIT {yaml=reference/search/async-search/submit-async-search-date-histogram-example}  failing","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"assignees":[{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2020-03-20T18:12:04Z","updated_at":"2020-03-23T13:17:54Z","closed_at":"2020-03-23T13:17:54Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"`DocsClientYamlTestSuiteIT.test {yaml=reference/search/async-search/submit-async-search-date-histogram-example}` has been regularly failing since it was added recently.\r\n\r\n```\r\norg.elasticsearch.smoketest.DocsClientYamlTestSuiteIT > test {yaml=reference/search/async-search/submit-async-search-date-histogram-example} FAILED\r\n    java.lang.AssertionError: Failure at [reference/search/async-search:63]: $body didn't match expected value:\r\n                             $body: \r\n           expiration_time_in_millis: same [1585153485758]\r\n                                  id: same [FjlsX1pQMm1qU0ZxYVppU3VIQjlLTHccRVJFbjBIZXVUNHFCMm...]\r\n                          is_partial: same [true]\r\n                          is_running: same [true]\r\n                            response: \r\n                               _shards: \r\n                                  failed: same [0]\r\n                                 skipped: same [0]\r\n                              successful: same [2]\r\n                                   total: same [2]\r\n                                  hits: \r\n                                    hits: same [empty list]\r\n                               max_score: same [null]\r\n                                   total: \r\n                                  relation: expected String [gte] but was String [eq]\r\n                                     value: same [7]\r\n                     num_reduce_phases: expected [0] but not found\r\n                             timed_out: same [false]\r\n                                  took: same [20]\r\n                          aggregations: unexpected but found [{sale_date={buckets=[{key_as_string=2015/01/01 00:00:00, key=1420070400000, doc_count=3}, {key_as_string=2015/01/02 00:00:00, key=1420156800000, doc_count=0}, {key_as_string=2015/01/03 00:00:00, key=1420243200000, doc_count=0}, {key_as_string=2015/01/04 00:00:00, key=1420329600000, doc_count=0}, {key_as_string=2015/01/05 00:00:00, key=1420416000000, doc_count=0}, {key_as_string=2015/01/06 00:00:00, key=1420502400000, doc_count=0}, {key_as_string=2015/01/07 00:00:00, key=1420588800000, doc_count=0}, {key_as_string=2015/01/08 00:00:00, key=1420675200000, doc_count=0}, {key_as_string=2015/01/09 00:00:00, key=1420761600000, doc_count=0}, {key_as_string=2015/01/10 00:00:00, key=1420848000000, doc_count=0}, {key_as_string=2015/01/11 00:00:00, key=1420934400000, doc_count=0}, {key_as_string=2015/01/12 00:00:00, key=1421020800000, doc_count=0}, {key_as_string=2015/01/13 00:00:00, key=1421107200000, doc_count=0}, {key_as_string=2015/01/14 00:00:00, key=1421193600000, doc_count=0}, {key_as_string=2015/01/15 00:00:00, key=1421280000000, doc_count=0}, {key_as_string=2015/01/16 00:00:00, key=1421366400000, doc_count=0}, {key_as_string=2015/01/17 00:00:00, key=1421452800000, doc_count=0}, {key_as_string=2015/01/18 00:00:00, key=1421539200000, doc_count=0}, {key_as_string=2015/01/19 00:00:00, key=1421625600000, doc_count=0}, {key_as_string=2015/01/20 00:00:00, key=1421712000000, doc_count=0}, {key_as_string=2015/01/21 00:00:00, key=1421798400000, doc_count=0}, {key_as_string=2015/01/22 00:00:00, key=1421884800000, doc_count=0}, {key_as_string=2015/01/23 00:00:00, key=1421971200000, doc_count=0}, {key_as_string=2015/01/24 00:00:00, key=1422057600000, doc_count=0}, {key_as_string=2015/01/25 00:00:00, key=1422144000000, doc_count=0}, {key_as_string=2015/01/26 00:00:00, key=1422230400000, doc_count=0}, {key_as_string=2015/01/27 00:00:00, key=1422316800000, doc_count=0}, {key_as_string=2015/01/28 00:00:00, key=1422403200000, doc_count=0}, {key_as_string=2015/01/29 00:00:00, key=1422489600000, doc_count=0}, {key_as_string=2015/01/30 00:00:00, key=1422576000000, doc_count=0}, {key_as_string=2015/01/31 00:00:00, key=1422662400000, doc_count=0}, {key_as_string=2015/02/01 00:00:00, key=1422748800000, doc_count=2}, {key_as_string=2015/02/02 00:00:00, key=1422835200000, doc_count=0}, {key_as_string=2015/02/03 00:00:00, key=1422921600000, doc_count=0}, {key_as_string=2015/02/04 00:00:00, key=1423008000000, doc_count=0}, {key_as_string=2015/02/05 00:00:00, key=1423094400000, doc_count=0}, {key_as_string=2015/02/06 00:00:00, key=1423180800000, doc_count=0}, {key_as_string=2015/02/07 00:00:00, key=1423267200000, doc_count=0}, {key_as_string=2015/02/08 00:00:00, key=1423353600000, doc_count=0}, {key_as_string=2015/02/09 00:00:00, key=1423440000000, doc_count=0}, {key_as_string=2015/02/10 00:00:00, key=1423526400000, doc_count=0}, {key_as_string=2015/02/11 00:00:00, key=1423612800000, doc_count=0}, {key_as_string=2015/02/12 00:00:00, key=1423699200000, doc_count=0}, {key_as_string=2015/02/13 00:00:00, key=1423785600000, doc_count=0}, {key_as_string=2015/02/14 00:00:00, key=1423872000000, doc_count=0}, {key_as_string=2015/02/15 00:00:00, key=1423958400000, doc_count=0}, {key_as_string=2015/02/16 00:00:00, key=1424044800000, doc_count=0}, {key_as_string=2015/02/17 00:00:00, key=1424131200000, doc_count=0}, {key_as_string=2015/02/18 00:00:00, key=1424217600000, doc_count=0}, {key_as_string=2015/02/19 00:00:00, key=1424304000000, doc_count=0}, {key_as_string=2015/02/20 00:00:00, key=1424390400000, doc_count=0}, {key_as_string=2015/02/21 00:00:00, key=1424476800000, doc_count=0}, {key_as_string=2015/02/22 00:00:00, key=1424563200000, doc_count=0}, {key_as_string=2015/02/23 00:00:00, key=1424649600000, doc_count=0}, {key_as_string=2015/02/24 00:00:00, key=1424736000000, doc_count=0}, {key_as_string=2015/02/25 00:00:00, key=1424822400000, doc_count=0}, {key_as_string=2015/02/26 00:00:00, key=1424908800000, doc_count=0}, {key_as_string=2015/02/27 00:00:00, key=1424995200000, doc_count=0}, {key_as_string=2015/02/28 00:00:00, key=1425081600000, doc_count=0}, {key_as_string=2015/03/01 00:00:00, key=1425168000000, doc_count=2}]}}]\r\n                start_time_in_millis: same [1584721485758]\r\n                             version: expected Integer [0] but was Integer [1]\r\n```\r\n\r\nhttps://gradle-enterprise.elastic.co/s/qobww2xln2vp6/tests/jbm2x6tnwtxku-5b4duzugn4e5w\r\n\r\nLooks to be limited to `master` and did not reproduce for me locally.\r\n\r\n\r\n","closed_by":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"performed_via_github_app":null}