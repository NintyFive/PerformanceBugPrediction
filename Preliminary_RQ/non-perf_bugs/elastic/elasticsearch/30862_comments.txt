[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/392082147","html_url":"https://github.com/elastic/elasticsearch/issues/30862#issuecomment-392082147","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30862","id":392082147,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjA4MjE0Nw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-05-25T14:49:24Z","updated_at":"2018-05-25T14:49:24Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search-aggs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/392084254","html_url":"https://github.com/elastic/elasticsearch/issues/30862#issuecomment-392084254","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30862","id":392084254,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjA4NDI1NA==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2018-05-25T14:56:11Z","updated_at":"2018-05-25T14:56:11Z","author_association":"MEMBER","body":"From 6.1.0 we changed the way exists queries work in Elasticsearch so we rarely rely on `_field_names`. See https://github.com/elastic/elasticsearch/pull/26930 and https://github.com/elastic/elasticsearch/pull/27237 for more details but the essence of the change is that if a field has doc_values enabled (or for text fields if norms are enabled), we use a `DocValuesFieldExistsQuery` (or `NormsFieldExistsQuery`) instead of relying on `_field_names`. In fact we now don't even write the field name to `_field_names` if DocValues or norms are enabled to save the indexing overhead. This means that you can no get the functionality of the exists query without the indexing overhead of `_field_names` in most cases.\r\n\r\nIf you perform the exists query on the `message` field instead it should fail because you have disabled `norms` on that field as well as disabling `_field_names`","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/392165369","html_url":"https://github.com/elastic/elasticsearch/issues/30862#issuecomment-392165369","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30862","id":392165369,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjE2NTM2OQ==","user":{"login":"nfsec","id":15172919,"node_id":"MDQ6VXNlcjE1MTcyOTE5","avatar_url":"https://avatars0.githubusercontent.com/u/15172919?v=4","gravatar_id":"","url":"https://api.github.com/users/nfsec","html_url":"https://github.com/nfsec","followers_url":"https://api.github.com/users/nfsec/followers","following_url":"https://api.github.com/users/nfsec/following{/other_user}","gists_url":"https://api.github.com/users/nfsec/gists{/gist_id}","starred_url":"https://api.github.com/users/nfsec/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nfsec/subscriptions","organizations_url":"https://api.github.com/users/nfsec/orgs","repos_url":"https://api.github.com/users/nfsec/repos","events_url":"https://api.github.com/users/nfsec/events{/privacy}","received_events_url":"https://api.github.com/users/nfsec/received_events","type":"User","site_admin":false},"created_at":"2018-05-25T20:03:50Z","updated_at":"2018-05-25T20:03:50Z","author_association":"CONTRIBUTOR","body":"@colings86 Thank you very much for the explanation. Can we please add this to documentation? This is very important information, because it turns out that we do not necessarily giving up `_exists_` queries after disabling `_field_names` as it is written in https://www.elastic.co/guide/en/elasticsearch/reference/6.1/mapping-field-names-field.html. And users are not likely to follow commits on elastic repo - but read documentation.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/393846416","html_url":"https://github.com/elastic/elasticsearch/issues/30862#issuecomment-393846416","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30862","id":393846416,"node_id":"MDEyOklzc3VlQ29tbWVudDM5Mzg0NjQxNg==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2018-06-01T10:56:15Z","updated_at":"2018-06-01T10:56:15Z","author_association":"MEMBER","body":"@nfsec I opened https://github.com/elastic/elasticsearch/pull/31029 to correct the wording fo the docs, thanks for bringing up the suggestion.","performed_via_github_app":null}]