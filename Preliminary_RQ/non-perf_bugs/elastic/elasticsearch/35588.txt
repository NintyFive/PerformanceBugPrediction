{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/35588","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35588/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35588/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35588/events","html_url":"https://github.com/elastic/elasticsearch/issues/35588","id":381157715,"node_id":"MDU6SXNzdWUzODExNTc3MTU=","number":35588,"title":"CI logs are sometimes heavily interleaved","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"labels":[{"id":106454670,"node_id":"MDU6TGFiZWwxMDY0NTQ2NzA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Build","name":":Delivery/Build","color":"0e8a16","default":false,"description":"Build or test infrastructure"},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-11-15T13:20:16Z","updated_at":"2020-11-11T21:50:08Z","closed_at":"2019-07-12T14:01:41Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"For instance, this build's output contains the following text: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.4+matrix-java-periodic/ES_BUILD_JAVA=java10,ES_RUNTIME_JAVA=java8fips,nodes=virtual&&linux/59/console\r\n\r\n```\r\n\tat org.elasticsearch.xpack.security.authc.AuthenticationService$Authenticator.access$000(AuthenticationService.java:159) [x-pack-5.6.14-SNAPSHOT.jar:5.6.14-SNAPSHOT]\r\n\tat org.elasticsearch.xpack.security.authc.AuthenticationService.authenticate(AuthenticationService.java:122) [x-pack-5.6.14-SNAPSHOT.jar:5.6.14-SNAPSHOT]\r\n-----------\r\n\tat org.elasticsearch.xpack.security.transport.ServerTransportFilter$NodeProfile.inbound(ServerTransportFilter.java:146) [x-pack-5.6.14-SNAPSHOT.jar:5.6.14-SNAPSHOT]\r\n* What went wrong:\r\n\tat org.elasticsearch.xpack.security.transport.SecurityServerTransportInterceptor$ProfileSecuredRequestHandler.messageReceived(SecurityServerTransportInterceptor.java:314) [x-pack-5.6.14-SNAPSHOT.jar:5.6.14-SNAPSHOT]\r\nExecution failed for task ':x-pack:qa:full-cluster-restart:with-system-key:v5.6.14-SNAPSHOT#oldClusterTestCluster#node0.stop'.\r\n> Process 'command 'kill'' finished with non-zero exit value 1\r\n\r\n\tat org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:69) [elasticsearch-5.6.14-SNAPSHOT.jar:5.6.14-SNAPSHOT]\r\n\tat org.elasticsearch.transport.TransportService$7.doRun(TransportService.java:662) [elasticsearch-5.6.14-SNAPSHOT.jar:5.6.14-SNAPSHOT]\r\n\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:675) [elasticsearch-5.6.14-SNAPSHOT.jar:5.6.14-SNAPSHOT]\r\n* Try:\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) [elasticsearch-5.6.14-SNAPSHOT.jar:5.6.14-SNAPSHOT]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1135) [?:?]\r\nRun with --stacktrace option to get the stack trace. Run with --debug option to get more log output. Run with --scan to get full insights.\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) [?:?]\r\n\tat java.lang.Thread.run(Thread.java:844) [?:?]\r\n==============================================================================\r\n\r\n[2018-11-14T22:11:36,748][WARN ][o.e.a.a.i.f.TransportShardFlushAction] [node-1] [[testshrink][3]] failed to perform indices:admin/flush[s] on replica [testshrink][3], node[VQE8MrTsSwuxGnne49sQiw], [R], s[STARTED], a[id=a6CYj0ibRBaBqrUbSltgWw]\r\norg.elasticsearch.transport.NodeNotConnectedException: [node-0][127.0.0.1:38552] Node not connected\r\n* Get more help at https://help.gradle.org\r\n\tat org.elasticsearch.transport.TcpTransport.getConnection(TcpTransport.java:640) ~[elasticsearch-5.6.14-SNAPSHOT.jar:5.6.14-SNAPSHOT]\r\n\tat org.elasticsearch.transport.TcpTransport.getConnection(TcpTransport.java:117) ~[elasticsearch-5.6.14-SNAPSHOT.jar:5.6.14-SNAPSHOT]\r\n\r\n\tat org.elasticsearch.transport.TransportService.getConnection(TransportService.java:548) ~[elasticsearch-5.6.14-SNAPSHOT.jar:5.6.14-SNAPSHOT]\r\n\tat org.elasticsearch.transport.TransportService.sendRequest(TransportService.java:524) [elasticsearch-5.6.14-SNAPSHOT.jar:5.6.14-SNAPSHOT]\r\nBUILD FAILED in 2h 22m 25s\r\n\tat org.elasticsearch.action.support.replication.TransportReplicationAction$ReplicasProxy.performOn(TransportReplicationAction.java:1001) [elasticsearch-5.6.14-SNAPSHOT.jar:5.6.14-SNAPSHOT]\r\n\tat org.elasticsearch.action.support.replication.ReplicationOperation.performOnReplica(ReplicationOperation.java:185) [elasticsearch-5.6.14-SNAPSHOT.jar:5.6.14-SNAPSHOT]\r\n\tat org.elasticsearch.action.support.replic\r\n```\r\n\r\nAvoiding this kind of interleaving would, I feel, significantly simplify the task of tracking down the cause of a CI failure. Is there anything we can do to improve this?\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+pull-request/2884/console\r\n\r\nA possibly-related observation is that in the above PR build the existence of the checkstyle violation is reported at the bottom of the build, but the actual violation is many hundreds of lines above, separated by BWC build output logs. It'd be great if these things were in a more obvious order.","closed_by":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"performed_via_github_app":null}