{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/12569","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12569/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12569/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12569/events","html_url":"https://github.com/elastic/elasticsearch/issues/12569","id":98288664,"node_id":"MDU6SXNzdWU5ODI4ODY2NA==","number":12569,"title":"Add implicit discovery.zen.maximum_master_nodes","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"labels":[{"id":160579278,"node_id":"MDU6TGFiZWwxNjA1NzkyNzg=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Discovery-Plugins","name":":Distributed/Discovery-Plugins","color":"0e8a16","default":false,"description":"Anything related to our integration plugins with EC2, GCP and Azure"},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-07-30T23:55:55Z","updated_at":"2015-08-05T10:47:15Z","closed_at":"2015-08-05T10:47:15Z","author_association":"MEMBER","active_lock_reason":null,"body":"We already have support for maintaining quorum of the minimum number of master nodes. It may also be nice to have an inverse setting to limit the expected number of master nodes that can join the cluster.\n\nThis is purely to solve operational misconfigurations, but it can also be implicitly determined by solving for `M` (eligible master nodes) from the quorum equation given `discovery.zen.minimum_master_nodes`.\n\n```\nquorum = (M / 2) + 1\nM = 2 * (quorum - 1)\n```\n\nWe can use this to prevent misconfigurations from becoming a problem by failing for the same reason when quorum is not met.\n\n```\nquorum <= running masters <=  M\n```\n\nrather than just\n\n```\nquorum <= running masters\n```\n\nThis also makes me wonder if we should deprecate `discovery.zen.minimum_master_nodes` in favor of a `discovery.zen.expected_master_nodes` (defaults to 1), similar to `gateway.expected_master_nodes`. Then we can calculate quorum ourselves to avoid confusion (truncation/integer division can sometimes catch people off guard).\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}