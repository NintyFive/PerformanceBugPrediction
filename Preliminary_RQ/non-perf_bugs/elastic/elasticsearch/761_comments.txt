[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/1108634","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-1108634","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":1108634,"node_id":"MDEyOklzc3VlQ29tbWVudDExMDg2MzQ=","user":{"login":"till","id":27003,"node_id":"MDQ6VXNlcjI3MDAz","avatar_url":"https://avatars1.githubusercontent.com/u/27003?v=4","gravatar_id":"","url":"https://api.github.com/users/till","html_url":"https://github.com/till","followers_url":"https://api.github.com/users/till/followers","following_url":"https://api.github.com/users/till/following{/other_user}","gists_url":"https://api.github.com/users/till/gists{/gist_id}","starred_url":"https://api.github.com/users/till/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/till/subscriptions","organizations_url":"https://api.github.com/users/till/orgs","repos_url":"https://api.github.com/users/till/repos","events_url":"https://api.github.com/users/till/events{/privacy}","received_events_url":"https://api.github.com/users/till/received_events","type":"User","site_admin":false},"created_at":"2011-05-05T22:34:30Z","updated_at":"2011-05-05T22:34:30Z","author_association":"NONE","body":"_subscribe_\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/1330447","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-1330447","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":1330447,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMzA0NDc=","user":{"login":"bryangreen","id":575000,"node_id":"MDQ6VXNlcjU3NTAwMA==","avatar_url":"https://avatars2.githubusercontent.com/u/575000?v=4","gravatar_id":"","url":"https://api.github.com/users/bryangreen","html_url":"https://github.com/bryangreen","followers_url":"https://api.github.com/users/bryangreen/followers","following_url":"https://api.github.com/users/bryangreen/following{/other_user}","gists_url":"https://api.github.com/users/bryangreen/gists{/gist_id}","starred_url":"https://api.github.com/users/bryangreen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bryangreen/subscriptions","organizations_url":"https://api.github.com/users/bryangreen/orgs","repos_url":"https://api.github.com/users/bryangreen/repos","events_url":"https://api.github.com/users/bryangreen/events{/privacy}","received_events_url":"https://api.github.com/users/bryangreen/received_events","type":"User","site_admin":false},"created_at":"2011-06-08T22:26:02Z","updated_at":"2011-06-08T22:26:02Z","author_association":"NONE","body":"+1 this would be great\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/1825325","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-1825325","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":1825325,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MjUzMjU=","user":{"login":"mente","id":391997,"node_id":"MDQ6VXNlcjM5MTk5Nw==","avatar_url":"https://avatars2.githubusercontent.com/u/391997?v=4","gravatar_id":"","url":"https://api.github.com/users/mente","html_url":"https://github.com/mente","followers_url":"https://api.github.com/users/mente/followers","following_url":"https://api.github.com/users/mente/following{/other_user}","gists_url":"https://api.github.com/users/mente/gists{/gist_id}","starred_url":"https://api.github.com/users/mente/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mente/subscriptions","organizations_url":"https://api.github.com/users/mente/orgs","repos_url":"https://api.github.com/users/mente/repos","events_url":"https://api.github.com/users/mente/events{/privacy}","received_events_url":"https://api.github.com/users/mente/received_events","type":"User","site_admin":false},"created_at":"2011-08-17T11:01:01Z","updated_at":"2011-08-17T11:01:01Z","author_association":"NONE","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3716217","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-3716217","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":3716217,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MTYyMTc=","user":{"login":"abh","id":16861,"node_id":"MDQ6VXNlcjE2ODYx","avatar_url":"https://avatars0.githubusercontent.com/u/16861?v=4","gravatar_id":"","url":"https://api.github.com/users/abh","html_url":"https://github.com/abh","followers_url":"https://api.github.com/users/abh/followers","following_url":"https://api.github.com/users/abh/following{/other_user}","gists_url":"https://api.github.com/users/abh/gists{/gist_id}","starred_url":"https://api.github.com/users/abh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abh/subscriptions","organizations_url":"https://api.github.com/users/abh/orgs","repos_url":"https://api.github.com/users/abh/repos","events_url":"https://api.github.com/users/abh/events{/privacy}","received_events_url":"https://api.github.com/users/abh/received_events","type":"User","site_admin":false},"created_at":"2012-01-30T08:48:47Z","updated_at":"2012-01-30T08:48:47Z","author_association":"CONTRIBUTOR","body":"I ran into this, too.   Nested documents are a bit too closely tied (specifically that you always get all the nested documents back and not just the matching one(s)) and with parent/child documents I can't get both the matching lower level and the upper level back, either â€“ unless I am missing something.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3803001","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-3803001","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":3803001,"node_id":"MDEyOklzc3VlQ29tbWVudDM4MDMwMDE=","user":{"login":"gjb83","id":402955,"node_id":"MDQ6VXNlcjQwMjk1NQ==","avatar_url":"https://avatars0.githubusercontent.com/u/402955?v=4","gravatar_id":"","url":"https://api.github.com/users/gjb83","html_url":"https://github.com/gjb83","followers_url":"https://api.github.com/users/gjb83/followers","following_url":"https://api.github.com/users/gjb83/following{/other_user}","gists_url":"https://api.github.com/users/gjb83/gists{/gist_id}","starred_url":"https://api.github.com/users/gjb83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gjb83/subscriptions","organizations_url":"https://api.github.com/users/gjb83/orgs","repos_url":"https://api.github.com/users/gjb83/repos","events_url":"https://api.github.com/users/gjb83/events{/privacy}","received_events_url":"https://api.github.com/users/gjb83/received_events","type":"User","site_admin":false},"created_at":"2012-02-03T19:43:55Z","updated_at":"2012-02-03T19:43:55Z","author_association":"NONE","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3890846","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-3890846","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":3890846,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTA4NDY=","user":{"login":"hlian","id":63533,"node_id":"MDQ6VXNlcjYzNTMz","avatar_url":"https://avatars2.githubusercontent.com/u/63533?v=4","gravatar_id":"","url":"https://api.github.com/users/hlian","html_url":"https://github.com/hlian","followers_url":"https://api.github.com/users/hlian/followers","following_url":"https://api.github.com/users/hlian/following{/other_user}","gists_url":"https://api.github.com/users/hlian/gists{/gist_id}","starred_url":"https://api.github.com/users/hlian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hlian/subscriptions","organizations_url":"https://api.github.com/users/hlian/orgs","repos_url":"https://api.github.com/users/hlian/repos","events_url":"https://api.github.com/users/hlian/events{/privacy}","received_events_url":"https://api.github.com/users/hlian/received_events","type":"User","site_admin":false},"created_at":"2012-02-09T16:50:17Z","updated_at":"2012-02-09T16:50:17Z","author_association":"NONE","body":"Lucene 3.6 will support a join query: https://issues.apache.org/jira/browse/LUCENE-3602\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3890881","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-3890881","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":3890881,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTA4ODE=","user":{"login":"kevingessner","id":569461,"node_id":"MDQ6VXNlcjU2OTQ2MQ==","avatar_url":"https://avatars0.githubusercontent.com/u/569461?v=4","gravatar_id":"","url":"https://api.github.com/users/kevingessner","html_url":"https://github.com/kevingessner","followers_url":"https://api.github.com/users/kevingessner/followers","following_url":"https://api.github.com/users/kevingessner/following{/other_user}","gists_url":"https://api.github.com/users/kevingessner/gists{/gist_id}","starred_url":"https://api.github.com/users/kevingessner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevingessner/subscriptions","organizations_url":"https://api.github.com/users/kevingessner/orgs","repos_url":"https://api.github.com/users/kevingessner/repos","events_url":"https://api.github.com/users/kevingessner/events{/privacy}","received_events_url":"https://api.github.com/users/kevingessner/received_events","type":"User","site_admin":false},"created_at":"2012-02-09T16:51:32Z","updated_at":"2012-02-09T16:51:32Z","author_association":"NONE","body":"Lucene 3.6 added query-time joining: https://issues.apache.org/jira/browse/LUCENE-3602\n\nWhat's the timeline for ES using Lucene 3.6, @kimchy?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3929158","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-3929158","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":3929158,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjkxNTg=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2012-02-12T17:09:08Z","updated_at":"2012-02-12T17:09:08Z","author_association":"MEMBER","body":"The join query is not really relevant here. Parent child support is similar to the join aspect, its a matter of returning different data set than what is provided now. Note, there will never be a cross shard join in elasticsearch, so any join will happen within a shard, which the parent-child support does now.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3941860","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-3941860","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":3941860,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NDE4NjA=","user":{"login":"kevingessner","id":569461,"node_id":"MDQ6VXNlcjU2OTQ2MQ==","avatar_url":"https://avatars0.githubusercontent.com/u/569461?v=4","gravatar_id":"","url":"https://api.github.com/users/kevingessner","html_url":"https://github.com/kevingessner","followers_url":"https://api.github.com/users/kevingessner/followers","following_url":"https://api.github.com/users/kevingessner/following{/other_user}","gists_url":"https://api.github.com/users/kevingessner/gists{/gist_id}","starred_url":"https://api.github.com/users/kevingessner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevingessner/subscriptions","organizations_url":"https://api.github.com/users/kevingessner/orgs","repos_url":"https://api.github.com/users/kevingessner/repos","events_url":"https://api.github.com/users/kevingessner/events{/privacy}","received_events_url":"https://api.github.com/users/kevingessner/received_events","type":"User","site_admin":false},"created_at":"2012-02-13T15:27:37Z","updated_at":"2012-02-13T15:27:37Z","author_association":"NONE","body":"@kimchy Sure, makes sense. I don't actually need full join support -- I really need something more like #792 or #1017, to be able to query the parent's field from a search on the child type.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/4447837","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-4447837","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":4447837,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NDc4Mzc=","user":{"login":"dhardy92","id":898473,"node_id":"MDQ6VXNlcjg5ODQ3Mw==","avatar_url":"https://avatars2.githubusercontent.com/u/898473?v=4","gravatar_id":"","url":"https://api.github.com/users/dhardy92","html_url":"https://github.com/dhardy92","followers_url":"https://api.github.com/users/dhardy92/followers","following_url":"https://api.github.com/users/dhardy92/following{/other_user}","gists_url":"https://api.github.com/users/dhardy92/gists{/gist_id}","starred_url":"https://api.github.com/users/dhardy92/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhardy92/subscriptions","organizations_url":"https://api.github.com/users/dhardy92/orgs","repos_url":"https://api.github.com/users/dhardy92/repos","events_url":"https://api.github.com/users/dhardy92/events{/privacy}","received_events_url":"https://api.github.com/users/dhardy92/received_events","type":"User","site_admin":false},"created_at":"2012-03-12T08:50:19Z","updated_at":"2012-03-12T08:50:19Z","author_association":"NONE","body":"[+1]\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6557729","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-6557729","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":6557729,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTc3Mjk=","user":{"login":"Vineeth-Mohan","id":977962,"node_id":"MDQ6VXNlcjk3Nzk2Mg==","avatar_url":"https://avatars3.githubusercontent.com/u/977962?v=4","gravatar_id":"","url":"https://api.github.com/users/Vineeth-Mohan","html_url":"https://github.com/Vineeth-Mohan","followers_url":"https://api.github.com/users/Vineeth-Mohan/followers","following_url":"https://api.github.com/users/Vineeth-Mohan/following{/other_user}","gists_url":"https://api.github.com/users/Vineeth-Mohan/gists{/gist_id}","starred_url":"https://api.github.com/users/Vineeth-Mohan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Vineeth-Mohan/subscriptions","organizations_url":"https://api.github.com/users/Vineeth-Mohan/orgs","repos_url":"https://api.github.com/users/Vineeth-Mohan/repos","events_url":"https://api.github.com/users/Vineeth-Mohan/events{/privacy}","received_events_url":"https://api.github.com/users/Vineeth-Mohan/received_events","type":"User","site_admin":false},"created_at":"2012-06-25T19:49:59Z","updated_at":"2012-06-25T19:49:59Z","author_association":"NONE","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6557784","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-6557784","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":6557784,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTc3ODQ=","user":{"login":"Vineeth-Mohan","id":977962,"node_id":"MDQ6VXNlcjk3Nzk2Mg==","avatar_url":"https://avatars3.githubusercontent.com/u/977962?v=4","gravatar_id":"","url":"https://api.github.com/users/Vineeth-Mohan","html_url":"https://github.com/Vineeth-Mohan","followers_url":"https://api.github.com/users/Vineeth-Mohan/followers","following_url":"https://api.github.com/users/Vineeth-Mohan/following{/other_user}","gists_url":"https://api.github.com/users/Vineeth-Mohan/gists{/gist_id}","starred_url":"https://api.github.com/users/Vineeth-Mohan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Vineeth-Mohan/subscriptions","organizations_url":"https://api.github.com/users/Vineeth-Mohan/orgs","repos_url":"https://api.github.com/users/Vineeth-Mohan/repos","events_url":"https://api.github.com/users/Vineeth-Mohan/events{/privacy}","received_events_url":"https://api.github.com/users/Vineeth-Mohan/received_events","type":"User","site_admin":false},"created_at":"2012-06-25T19:51:35Z","updated_at":"2012-06-25T19:51:35Z","author_association":"NONE","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6761222","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-6761222","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":6761222,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NjEyMjI=","user":{"login":"nickhoffman","id":21668,"node_id":"MDQ6VXNlcjIxNjY4","avatar_url":"https://avatars0.githubusercontent.com/u/21668?v=4","gravatar_id":"","url":"https://api.github.com/users/nickhoffman","html_url":"https://github.com/nickhoffman","followers_url":"https://api.github.com/users/nickhoffman/followers","following_url":"https://api.github.com/users/nickhoffman/following{/other_user}","gists_url":"https://api.github.com/users/nickhoffman/gists{/gist_id}","starred_url":"https://api.github.com/users/nickhoffman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickhoffman/subscriptions","organizations_url":"https://api.github.com/users/nickhoffman/orgs","repos_url":"https://api.github.com/users/nickhoffman/repos","events_url":"https://api.github.com/users/nickhoffman/events{/privacy}","received_events_url":"https://api.github.com/users/nickhoffman/received_events","type":"User","site_admin":false},"created_at":"2012-07-04T14:16:07Z","updated_at":"2012-07-04T14:16:07Z","author_association":"NONE","body":"This would be incredibly useful.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/7572660","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-7572660","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":7572660,"node_id":"MDEyOklzc3VlQ29tbWVudDc1NzI2NjA=","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars3.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false},"created_at":"2012-08-08T01:37:42Z","updated_at":"2012-08-08T01:37:42Z","author_association":"NONE","body":"Any update on this? Would love to have this rather than having to use seperate requests to get the children.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/8975473","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-8975473","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":8975473,"node_id":"MDEyOklzc3VlQ29tbWVudDg5NzU0NzM=","user":{"login":"gjb83","id":402955,"node_id":"MDQ6VXNlcjQwMjk1NQ==","avatar_url":"https://avatars0.githubusercontent.com/u/402955?v=4","gravatar_id":"","url":"https://api.github.com/users/gjb83","html_url":"https://github.com/gjb83","followers_url":"https://api.github.com/users/gjb83/followers","following_url":"https://api.github.com/users/gjb83/following{/other_user}","gists_url":"https://api.github.com/users/gjb83/gists{/gist_id}","starred_url":"https://api.github.com/users/gjb83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gjb83/subscriptions","organizations_url":"https://api.github.com/users/gjb83/orgs","repos_url":"https://api.github.com/users/gjb83/repos","events_url":"https://api.github.com/users/gjb83/events{/privacy}","received_events_url":"https://api.github.com/users/gjb83/received_events","type":"User","site_admin":false},"created_at":"2012-09-28T12:56:01Z","updated_at":"2012-09-28T12:56:01Z","author_association":"NONE","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19187272","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-19187272","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":19187272,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTg3Mjcy","user":{"login":"keir","id":349468,"node_id":"MDQ6VXNlcjM0OTQ2OA==","avatar_url":"https://avatars0.githubusercontent.com/u/349468?v=4","gravatar_id":"","url":"https://api.github.com/users/keir","html_url":"https://github.com/keir","followers_url":"https://api.github.com/users/keir/followers","following_url":"https://api.github.com/users/keir/following{/other_user}","gists_url":"https://api.github.com/users/keir/gists{/gist_id}","starred_url":"https://api.github.com/users/keir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keir/subscriptions","organizations_url":"https://api.github.com/users/keir/orgs","repos_url":"https://api.github.com/users/keir/repos","events_url":"https://api.github.com/users/keir/events{/privacy}","received_events_url":"https://api.github.com/users/keir/received_events","type":"User","site_admin":false},"created_at":"2013-06-10T08:53:54Z","updated_at":"2013-06-10T08:53:54Z","author_association":"NONE","body":"+1 this would be great to have.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/35581206","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-35581206","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":35581206,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTgxMjA2","user":{"login":"mvallebr","id":805457,"node_id":"MDQ6VXNlcjgwNTQ1Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/805457?v=4","gravatar_id":"","url":"https://api.github.com/users/mvallebr","html_url":"https://github.com/mvallebr","followers_url":"https://api.github.com/users/mvallebr/followers","following_url":"https://api.github.com/users/mvallebr/following{/other_user}","gists_url":"https://api.github.com/users/mvallebr/gists{/gist_id}","starred_url":"https://api.github.com/users/mvallebr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvallebr/subscriptions","organizations_url":"https://api.github.com/users/mvallebr/orgs","repos_url":"https://api.github.com/users/mvallebr/repos","events_url":"https://api.github.com/users/mvallebr/events{/privacy}","received_events_url":"https://api.github.com/users/mvallebr/received_events","type":"User","site_admin":false},"created_at":"2014-02-20T02:42:30Z","updated_at":"2014-02-20T02:42:30Z","author_association":"NONE","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/43462137","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-43462137","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":43462137,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDYyMTM3","user":{"login":"isabel12","id":2031820,"node_id":"MDQ6VXNlcjIwMzE4MjA=","avatar_url":"https://avatars1.githubusercontent.com/u/2031820?v=4","gravatar_id":"","url":"https://api.github.com/users/isabel12","html_url":"https://github.com/isabel12","followers_url":"https://api.github.com/users/isabel12/followers","following_url":"https://api.github.com/users/isabel12/following{/other_user}","gists_url":"https://api.github.com/users/isabel12/gists{/gist_id}","starred_url":"https://api.github.com/users/isabel12/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/isabel12/subscriptions","organizations_url":"https://api.github.com/users/isabel12/orgs","repos_url":"https://api.github.com/users/isabel12/repos","events_url":"https://api.github.com/users/isabel12/events{/privacy}","received_events_url":"https://api.github.com/users/isabel12/received_events","type":"User","site_admin":false},"created_at":"2014-05-19T02:38:00Z","updated_at":"2014-05-19T02:38:00Z","author_association":"NONE","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/46299942","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-46299942","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":46299942,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2Mjk5OTQy","user":{"login":"chaitanya24","id":7581123,"node_id":"MDQ6VXNlcjc1ODExMjM=","avatar_url":"https://avatars1.githubusercontent.com/u/7581123?v=4","gravatar_id":"","url":"https://api.github.com/users/chaitanya24","html_url":"https://github.com/chaitanya24","followers_url":"https://api.github.com/users/chaitanya24/followers","following_url":"https://api.github.com/users/chaitanya24/following{/other_user}","gists_url":"https://api.github.com/users/chaitanya24/gists{/gist_id}","starred_url":"https://api.github.com/users/chaitanya24/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chaitanya24/subscriptions","organizations_url":"https://api.github.com/users/chaitanya24/orgs","repos_url":"https://api.github.com/users/chaitanya24/repos","events_url":"https://api.github.com/users/chaitanya24/events{/privacy}","received_events_url":"https://api.github.com/users/chaitanya24/received_events","type":"User","site_admin":false},"created_at":"2014-06-17T12:28:00Z","updated_at":"2014-06-17T12:28:00Z","author_association":"NONE","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/47744852","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-47744852","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":47744852,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzQ0ODUy","user":{"login":"vedharish","id":2497481,"node_id":"MDQ6VXNlcjI0OTc0ODE=","avatar_url":"https://avatars0.githubusercontent.com/u/2497481?v=4","gravatar_id":"","url":"https://api.github.com/users/vedharish","html_url":"https://github.com/vedharish","followers_url":"https://api.github.com/users/vedharish/followers","following_url":"https://api.github.com/users/vedharish/following{/other_user}","gists_url":"https://api.github.com/users/vedharish/gists{/gist_id}","starred_url":"https://api.github.com/users/vedharish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vedharish/subscriptions","organizations_url":"https://api.github.com/users/vedharish/orgs","repos_url":"https://api.github.com/users/vedharish/repos","events_url":"https://api.github.com/users/vedharish/events{/privacy}","received_events_url":"https://api.github.com/users/vedharish/received_events","type":"User","site_admin":false},"created_at":"2014-07-02T07:25:57Z","updated_at":"2014-07-02T07:25:57Z","author_association":"NONE","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/47758158","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-47758158","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":47758158,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzU4MTU4","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-07-02T10:04:20Z","updated_at":"2014-07-02T10:04:20Z","author_association":"CONTRIBUTOR","body":"So what would the response actually look like?  Don't forget that parents and children are separate documents. Presumably you'd want children grouped with parents somehow? A parent may have millions of matching children - how many of those do we return?\n\nThe top_hits aggregation #6124 isn't a good solution for this as you would have to aggregate on parent_id, of which there may be millions in the resultset.\n\nBy far the most efficient way of doing this is in two queries:\n1. retrieve the top 10 parents matching the query\n2. use an msearch to find (eg) the top 10 children for each parent id\n\nWhile this requires two steps, it gives you all the flexibility you need which would otherwise have to be provided by adding new structures to the query dsl and to the response.\n\nAnybody want to flesh out this feature request a bit more?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/51582174","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-51582174","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":51582174,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTgyMTc0","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-08-08T09:43:55Z","updated_at":"2014-08-08T09:43:55Z","author_association":"CONTRIBUTOR","body":"No further feedback. Closing\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52809236","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-52809236","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":52809236,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODA5MjM2","user":{"login":"jason-mccloskey","id":5076542,"node_id":"MDQ6VXNlcjUwNzY1NDI=","avatar_url":"https://avatars2.githubusercontent.com/u/5076542?v=4","gravatar_id":"","url":"https://api.github.com/users/jason-mccloskey","html_url":"https://github.com/jason-mccloskey","followers_url":"https://api.github.com/users/jason-mccloskey/followers","following_url":"https://api.github.com/users/jason-mccloskey/following{/other_user}","gists_url":"https://api.github.com/users/jason-mccloskey/gists{/gist_id}","starred_url":"https://api.github.com/users/jason-mccloskey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jason-mccloskey/subscriptions","organizations_url":"https://api.github.com/users/jason-mccloskey/orgs","repos_url":"https://api.github.com/users/jason-mccloskey/repos","events_url":"https://api.github.com/users/jason-mccloskey/events{/privacy}","received_events_url":"https://api.github.com/users/jason-mccloskey/received_events","type":"User","site_admin":false},"created_at":"2014-08-20T17:08:20Z","updated_at":"2014-08-26T17:05:25Z","author_association":"NONE","body":"Oh, no! This is the exact feature that will help complete my elasticsearch implementation. Let me give a hypothetical use case for this feature that is analogous to what I need to do in my implementation. Please forgive me for any misgivings as I am fairly new to elasticsearch and brand new to commenting on issues in GitHub.\n\nUse Case: I want to be able to populate a grid of events at parks in a given city, and allow filtering based upon whether the event is at a \"safe\" park.\n\n<h2>Mappings</h2>\n\nWe want three types here in a grandparent/parent/child relation.\n\n<h4>City</h4>\n\n``` bash\ncurl -XPUT 'http://localhost:9200/parkinfo/city/_mapping' -d '{ \n    \"city\" : {\n        \"_id\" : { \"path\" : \"cityName\" },\n        \"properties\" : {\n            \"cityName\" : { \"type\" : \"string\" },\n            \"state\" : { \"type\" : \"string\" }\n        }\n    }\n}'\n```\n\n<h4>Park</h4>\n\n``` bash\ncurl -XPUT 'http://localhost:9200/parkinfo/park/_mapping' -d '{ \n    \"park\" : {\n        \"_parent\":{\n            \"type\" :  \"city\"\n        },\n        \"_id\" : { \"path\" : \"parkName\" },\n        \"properties\" : {\n            \"parkName\" : { \"type\" : \"string\" },\n            \"address\" : { \"type\" : \"string\" }\n        }\n    }\n}'\n```\n\n<h4>Park Event</h4>\n\n``` bash\ncurl -XPUT 'http://localhost:9200/parkinfo/park_event/_mapping' -d '{   \n    \"park_event\" : {\n        \"_parent\":{\n            \"type\" :  \"park\"\n        },\n        \"properties\" : {\n            \"eventName\" : { \"type\" : \"string\" },\n            \"eventType\" : { \"type\" : \"string\" },\n            \"time\" : { \"type\" : \"date\" }\n        }\n    }\n}'\n```\n\n<h2>Data</h2>\n\nLet's now consider the data that we'd like to put in this index:\n\n<h4>Cities</h4>\n\n``` bash\ncurl -XPUT 'http://localhost:9200/parkinfo/city/SanDiego?routing=SanDiego' -d '{\n        \"cityName\" : \"SanDiego\",\n        \"state\" : \"California\"\n}'\ncurl -XPUT 'http://localhost:9200/parkinfo/city/LosAngeles?routing=LosAngeles' -d '{\n        \"cityName\" : \"LosAngeles\",\n        \"state\" : \"California\"\n}'\n```\n\n<h4>Parks in San Diego</h4>\n\n``` bash\ncurl -XPUT 'http://localhost:9200/parkinfo/park/Balboa?parent=SanDiego&routing=SanDiego' -d '{\n        \"parkName\" : \"Balboa\",\n        \"address\" : \"1549 El Prado\"\n}'\ncurl -XPUT 'http://localhost:9200/parkinfo/park/Glen?parent=SanDiego&routing=SanDiego' -d '{\n        \"parkName\" : \"Glen\",\n        \"address\" : \"2149 Orinda Dr\"\n}'\ncurl -XPUT 'http://localhost:9200/parkinfo/park/KateSessions?parent=SanDiego&routing=SanDiego' -d '{\n        \"parkName\" : \"KateSessions\",\n        \"address\" : \"5115 Soledad Rd\"\n}'\n```\n\n<h4>Parks in Los Angeles</h4>\n\n``` bash\ncurl -XPUT 'http://localhost:9200/parkinfo/park/48thSt?parent=LosAngeles&routing=LosAngeles' -d '{\n        \"parkName\" : \"48thSt\",\n        \"address\" : \"4800 South Hoover\"\n}'\ncurl -XPUT 'http://localhost:9200/parkinfo/park/Alma?parent=LosAngeles&routing=LosAngeles' -d '{\n        \"parkName\" : \"Alma\",\n        \"address\" : \"21st and Meyler\"\n}'\ncurl -XPUT 'http://localhost:9200/parkinfo/park/Canal?parent=LosAngeles&routing=LosAngeles' -d '{\n        \"parkName\" : \"Canal\",\n        \"address\" : \"200 Linnie Canal and Venice\"\n}'\n```\n\n<h4>Events in Parks in San Diego</h4>\n\n``` bash\ncurl -XPUT 'http://localhost:9200/parkinfo/park_event/1?parent=Balboa&routing=SanDiego' -d '{\n        \"eventName\" : \"Scary Stuff\",\n        \"eventType\" : \"crime\",\n        \"time\" : \"2014-08-15T22:58:00\"\n}'\ncurl -XPUT 'http://localhost:9200/parkinfo/park_event/2?parent=Balboa&routing=SanDiego' -d '{\n        \"eventName\" : \"Bocce Ball Summer 2014\",\n        \"eventType\" : \"tournament\",\n        \"time\" : \"2014-08-25T12:00:00\"\n}'\ncurl -XPUT 'http://localhost:9200/parkinfo/park_event/3?parent=Glen&routing=SanDiego' -d '{\n        \"eventName\" : \"Basketball Summer 2014\",\n        \"eventType\" : \"tournament\",\n        \"time\" : \"2014-08-23T12:00:00\"\n}'\n```\n\n<h4>Events in Parks in Los Angeles</h4>\n\n``` bash\ncurl -XPUT 'http://localhost:9200/parkinfo/park_event/4?parent=48thSt&routing=LosAngeles' -d '{\n        \"eventName\" : \"More Scary Stuff\",\n        \"eventType\" : \"crime\",\n        \"time\" : \"2014-08-15T22:58:00\"\n}'\ncurl -XPUT 'http://localhost:9200/parkinfo/park_event/5?parent=Alma&routing=LosAngeles' -d '{\n        \"eventName\" : \"Really Scary Stuff\",\n        \"eventType\" : \"crime\",\n        \"time\" : \"2014-06-25T23:14:00\"\n}'\ncurl -XPUT 'http://localhost:9200/parkinfo/park_event/6?parent=Canal&routing=LosAngeles' -d '{\n        \"eventName\" : \"Weight Lifting Summer 2014\",\n        \"eventType\" : \"tournament\",\n        \"time\" : \"2014-08-23T12:00:00\"\n}'\n```\n\n<h2>Filtering Stories/Requirements</h2>\n\nAs a user I want to be able to display only events that will occur in the next X days in a grid\n  The grid shall have the columns: city, state, park name, address, event name, event type, time\nAs a user I want to be able to filter for events at safe parks\n  A park will be determined safe if it has no crime event in the past 4 weeks and there have not been crimes at 2 parks in its the city in the past 3 months\n\n<h2>Filtering Implementation</h2>\n\nFor these 2 requirements, we need a filter to keep only safe parks and then a query to display events in the next X days and join together the data from the 3 generations\n\n<h4>Safe Park Filter</h4>\n\nThis filter must do two things, it must exclude if its parent is considered an unsafe park city and it must exclude if the particular park in question is intrinsically unsafe. The preference would be to be able to do this with a single query. Currently I would expect to have to query cities and save the terms, then use a terms lookup filter.\n\nI see return options as being: none, all, matching, #. None would be the default for all children.\n\n``` json\n\"filter\" : {\n    \"bool\" : {\n        \"type\" : \"park\",\n        \"must\" : {\n            \"bool\" : {\n                \"type\" : \"city\",\n                \"return\" : \"none\",\n                \"must_not\" : {\n                    \"has_child\" : {\n                        \"type\" : \"park\",\n                        \"min_children\": 2,\n                        \"return\" : \"all\",\n                        \"filter\" : {\n                            \"must\" : {\n                                \"has_child\" : {\n                                    \"type\" : \"park_event\",\n                                    \"filter\" : {\n                                        \"bool\" : {\n                                            \"must\" : {\n                                                \"term\" : {\n                                                    \"eventType\" : \"crime\"\n                                                    },\n                                                \"range\" : {\n                                                    \"time\" : {\n                                                        \"gte\" : \"2014-05-20\",\n                                                        \"lte\" : \"now\"\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        },\n        \"must_not\" : {\n            \"has_child\" : {\n                \"type\" : \"park_event\",\n                \"filter\" : {\n                    \"bool\" : {\n                        \"must\" : {\n                            \"term\" : {\n                                \"eventType\" : \"crime\"\n                                },\n                            \"range\" : {\n                                \"time\" : {\n                                    \"gte\" : \"2014-07-23\",   \n                                    \"lte\" : \"now\"\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n```\n\nI don't believe that you can list a \"type\" in a bool filter, but I felt it made things much more clear by including it. It also may be required for that sort of functionality.\n\n<h4>Returning the data over the next 5 days</h4>\n\nAs this is to be put into a grid, we would want the data to be denormalized, and perhaps sortable for using from and size. If denormalized is false, it would be an array based return, in the case that people aren't trying to display in a grid.\n\n``` json\n{\n  \"denormalized\" : \"true\"\n  \"filtered\": {\n        \"type\" : \"park\",\n        \"return\" : \"matching\",\n        \"query\": {\n            \"has_parent\" : {\n                \"return\" : \"matching\"\n            }\n            \"has_child\" : {\n                \"return\" : \"matching\"\n                \"range\" : {\n                    \"time\" : {\n                        \"gte\" : \"now\",\n                        \"lte\" : \"2014-08-25\"\n                    }   \n                }\n            }\n        },    \n        \"filter\": \"SafeParkFilter\"\n    }\n}\n```\n\n<h2>Expected Results</h2>\n\n<h4>Safe Parks</h4>\n\nNo parks in Los Angeles should be considered safe because there were multiple parks in LA with crime events in the past 3 months. Balboa Park should also be considered unsafe because of the crime event in the past 4 weeks. This leaves the safe parks as:\nGlen\nKateSessions\n\n<h4>Events at Safe Parks</h4>\n\nGiven that only Glen Park and Kate Sessions Park are safe parks in this scenario, we should only be returning events from those parks which will be held in the next 5 days\n\n| City | State | Park Name | Address | Event Name | Event Type | Time |\n| --- | --- | --- | --- | --- | --- | --- |\n| SanDiego | California | Glen | 2149 Orinda Dr | Basketball Summer 2014 | tournament | 2014-08-23T12:00:00 |\n| SanDiego | California | KateSessions | 5115 Soledad Rd | Bocce Ball Summer 2014 | tournament | 2014-08-25T12:00:00 |\n\nPlease let me know if any of this is unclear or doesn't make sense. This is also likely more than the orignal request, but this feature set would be very powerful and is the gap between what I have currently implemented on my project and the toolset I need to finish.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/53058758","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-53058758","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":53058758,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDU4NzU4","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-08-22T13:17:57Z","updated_at":"2014-08-22T13:17:57Z","author_association":"CONTRIBUTOR","body":"Hi @ILMN-jmccloskey \n\nThanks for the detailed example.  It feels very much like you are trying to use Elasticsearch as a relational DB, which isn't the best way to use it.  I would definitely avoid using grandparent-parent-child relationships as it is very costly, both with joins and the data required to maintain the relationship.\n\nThink about how many times a crime is committed, then how many times your query will run.  A much better approach would be to denormalize your data and to update it when you have new events.  You want your results to be parks, so you should store all the info you need inside the single park document, including the crimes inside that park and the number of crimes for a particular time period in the city where the park is located.\n\nI suggest reading about the various techniques and tradeoffs here: http://www.elasticsearch.org/guide/en/elasticsearch/guide/current/modeling-your-data.html\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/53083224","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-53083224","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":53083224,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDgzMjI0","user":{"login":"jason-mccloskey","id":5076542,"node_id":"MDQ6VXNlcjUwNzY1NDI=","avatar_url":"https://avatars2.githubusercontent.com/u/5076542?v=4","gravatar_id":"","url":"https://api.github.com/users/jason-mccloskey","html_url":"https://github.com/jason-mccloskey","followers_url":"https://api.github.com/users/jason-mccloskey/followers","following_url":"https://api.github.com/users/jason-mccloskey/following{/other_user}","gists_url":"https://api.github.com/users/jason-mccloskey/gists{/gist_id}","starred_url":"https://api.github.com/users/jason-mccloskey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jason-mccloskey/subscriptions","organizations_url":"https://api.github.com/users/jason-mccloskey/orgs","repos_url":"https://api.github.com/users/jason-mccloskey/repos","events_url":"https://api.github.com/users/jason-mccloskey/events{/privacy}","received_events_url":"https://api.github.com/users/jason-mccloskey/received_events","type":"User","site_admin":false},"created_at":"2014-08-22T16:20:34Z","updated_at":"2014-08-22T16:47:52Z","author_association":"NONE","body":"Hi @clintongormley\n\nThanks for responding. I fully agree with you that the example, as given, doesn't lend itself to normalization. I was trying to be breif (ha!) in the data for the example. Imagine that the city, park and park_event all have anywhere from 10 to 50 fields, which should be able to be updated independtely from each other and you are creating many events per month. This isn't the acutal index I am trying to create, only an example for illustrative purposes.\n\nI also am not sure how to fill the requirements of a safe park (2 crimes committed at parks in a particular city within the last 3 months) without the parent/child relationship. It seems to me that this is why the parent/child relationship and min_children were created. Assuming that the example was altered to lend itself to normalization using elasticsearch, are there things that need to be added to demonstrate the value of returning data across documents or perhaps clear up implementation details?\n\nThank you for the link. I will read further to make sure my actual mapping strategy is appropriate for my implementation. Even outside of the number of fields in a type and the ability to update those types independently, it seems to me that I won't be able to look for parks that have some events and not others, or cities that have some events and not others, without a parent/child relationship (**updated: I could if I used use multiple queries). Do you have any suggestions in that regard?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/53089554","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-53089554","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":53089554,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDg5NTU0","user":{"login":"asanderson","id":1292951,"node_id":"MDQ6VXNlcjEyOTI5NTE=","avatar_url":"https://avatars0.githubusercontent.com/u/1292951?v=4","gravatar_id":"","url":"https://api.github.com/users/asanderson","html_url":"https://github.com/asanderson","followers_url":"https://api.github.com/users/asanderson/followers","following_url":"https://api.github.com/users/asanderson/following{/other_user}","gists_url":"https://api.github.com/users/asanderson/gists{/gist_id}","starred_url":"https://api.github.com/users/asanderson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asanderson/subscriptions","organizations_url":"https://api.github.com/users/asanderson/orgs","repos_url":"https://api.github.com/users/asanderson/repos","events_url":"https://api.github.com/users/asanderson/events{/privacy}","received_events_url":"https://api.github.com/users/asanderson/received_events","type":"User","site_admin":false},"created_at":"2014-08-22T17:00:44Z","updated_at":"2014-08-22T17:01:48Z","author_association":"NONE","body":"FWIW, we aggregate data into Elasticsearch from many different disparate sources including unstructured, semi-structured (e.g. XML, RESTful services, etc.), and structured (e.g. relational database records), so our basic schema includes master parent documents (e.g. entities, relationships, etc.), and each of them can have many detail child documents each of which can have dozens and dozens of fields. \n\nWe do not want to update the master documents, since most of our data ingest pattern is just adding additional details.  The performance is more than acceptable.\n\nYes, everyone says not to use Elasticsearch (or Solr) as a relational database replacement, but for data that is primarily write-once/read-many, it is more than an adequate solution as we've proved with Solr and now Elasticsearch.\n\nHowever, without a simple parent/child join capability baked into Elasticseach, it means that every Elasticsearch client must do it the _hard way_, and pull unnecessary data across the network.\n\nJust my $0.02.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54625797","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-54625797","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":54625797,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjI1Nzk3","user":{"login":"kunklejr","id":152878,"node_id":"MDQ6VXNlcjE1Mjg3OA==","avatar_url":"https://avatars1.githubusercontent.com/u/152878?v=4","gravatar_id":"","url":"https://api.github.com/users/kunklejr","html_url":"https://github.com/kunklejr","followers_url":"https://api.github.com/users/kunklejr/followers","following_url":"https://api.github.com/users/kunklejr/following{/other_user}","gists_url":"https://api.github.com/users/kunklejr/gists{/gist_id}","starred_url":"https://api.github.com/users/kunklejr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kunklejr/subscriptions","organizations_url":"https://api.github.com/users/kunklejr/orgs","repos_url":"https://api.github.com/users/kunklejr/repos","events_url":"https://api.github.com/users/kunklejr/events{/privacy}","received_events_url":"https://api.github.com/users/kunklejr/received_events","type":"User","site_admin":false},"created_at":"2014-09-05T13:40:26Z","updated_at":"2014-09-05T13:40:26Z","author_association":"NONE","body":"My situation is similar to @asanderson's. I have a parent document that has one or more child documents containing all the data. They generally don't change but are added all the time. It would be incredibly valuable to search the child documents and get results back in terms of the parent document AND also return the data contained in the children along with the parent.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/61604487","html_url":"https://github.com/elastic/elasticsearch/issues/761#issuecomment-61604487","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/761","id":61604487,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNjA0NDg3","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-11-04T07:51:30Z","updated_at":"2014-11-04T07:51:30Z","author_association":"CONTRIBUTOR","body":"Closing in favour of #8153\n","performed_via_github_app":null}]