{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/39677","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39677/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39677/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39677/events","html_url":"https://github.com/elastic/elasticsearch/issues/39677","id":417142583,"node_id":"MDU6SXNzdWU0MTcxNDI1ODM=","number":39677,"title":"[ML] Calendars API : Inconsistencies in documentation / JSON spec","user":{"login":"codebrain","id":148974,"node_id":"MDQ6VXNlcjE0ODk3NA==","avatar_url":"https://avatars3.githubusercontent.com/u/148974?v=4","gravatar_id":"","url":"https://api.github.com/users/codebrain","html_url":"https://github.com/codebrain","followers_url":"https://api.github.com/users/codebrain/followers","following_url":"https://api.github.com/users/codebrain/following{/other_user}","gists_url":"https://api.github.com/users/codebrain/gists{/gist_id}","starred_url":"https://api.github.com/users/codebrain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codebrain/subscriptions","organizations_url":"https://api.github.com/users/codebrain/orgs","repos_url":"https://api.github.com/users/codebrain/repos","events_url":"https://api.github.com/users/codebrain/events{/privacy}","received_events_url":"https://api.github.com/users/codebrain/received_events","type":"User","site_admin":false},"labels":[{"id":912833043,"node_id":"MDU6TGFiZWw5MTI4MzMwNDM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:ml","name":":ml","color":"0e8a16","default":false,"description":"Machine learning"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-03-05T06:44:02Z","updated_at":"2019-03-11T10:01:02Z","closed_at":"2019-03-11T10:01:02Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"The `ml.getcalendars` API has some issues:\r\n\r\n1. It is not possible to use paging parameters (`from`/`size`) when addressing a single `calendar_id` in the request. Elasticsearch throws a request validation exception. This is unlike the behaviour of `ml.getcategories` which does allow this combination and returns an array with length 1.\r\n\r\n2. The public documentation is incorrect (https://www.elastic.co/guide/en/elasticsearch/reference/current/ml-get-calendar.html), the `from` and `size` parameters need to be nested under a parent `page` object as per the other ML APIs. It is also incomplete in that the `description` body parameter is not mentioned in any of the examples.\r\n\r\n3. The YAML tests are misleading in that they do not use the page object prefix - https://github.com/elastic/elasticsearch/blob/9e8cfbb40d7596eb56151fc8a30234fb336c0a43/x-pack/plugin/src/test/resources/rest-api-spec/test/ml/calendar_crud.yml#L116\r\n\r\n4. The absence of of a `body` description in the JSON spec: https://github.com/elastic/elasticsearch/blob/9e8cfbb40d7596eb56151fc8a30234fb336c0a43/x-pack/plugin/src/test/resources/rest-api-spec/api/ml.get_calendars.json#L27 - a `null` value instead signals our code generator to generate only `GET` verbs, despite the generator being aware of the `POST` verb. It is arguable that this is a weakness in our .NET client generator, so I have patched the JSON locally using our patching mechanism to fix.\r\n","closed_by":{"login":"davidkyle","id":2353640,"node_id":"MDQ6VXNlcjIzNTM2NDA=","avatar_url":"https://avatars1.githubusercontent.com/u/2353640?v=4","gravatar_id":"","url":"https://api.github.com/users/davidkyle","html_url":"https://github.com/davidkyle","followers_url":"https://api.github.com/users/davidkyle/followers","following_url":"https://api.github.com/users/davidkyle/following{/other_user}","gists_url":"https://api.github.com/users/davidkyle/gists{/gist_id}","starred_url":"https://api.github.com/users/davidkyle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidkyle/subscriptions","organizations_url":"https://api.github.com/users/davidkyle/orgs","repos_url":"https://api.github.com/users/davidkyle/repos","events_url":"https://api.github.com/users/davidkyle/events{/privacy}","received_events_url":"https://api.github.com/users/davidkyle/received_events","type":"User","site_admin":false},"performed_via_github_app":null}