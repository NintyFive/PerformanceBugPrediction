[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/480270585","html_url":"https://github.com/elastic/elasticsearch/issues/40898#issuecomment-480270585","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40898","id":480270585,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDI3MDU4NQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-04-05T13:14:10Z","updated_at":"2019-04-05T13:14:10Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/486264391","html_url":"https://github.com/elastic/elasticsearch/issues/40898#issuecomment-486264391","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40898","id":486264391,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NjI2NDM5MQ==","user":{"login":"kiawin","id":1992348,"node_id":"MDQ6VXNlcjE5OTIzNDg=","avatar_url":"https://avatars1.githubusercontent.com/u/1992348?v=4","gravatar_id":"","url":"https://api.github.com/users/kiawin","html_url":"https://github.com/kiawin","followers_url":"https://api.github.com/users/kiawin/followers","following_url":"https://api.github.com/users/kiawin/following{/other_user}","gists_url":"https://api.github.com/users/kiawin/gists{/gist_id}","starred_url":"https://api.github.com/users/kiawin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kiawin/subscriptions","organizations_url":"https://api.github.com/users/kiawin/orgs","repos_url":"https://api.github.com/users/kiawin/repos","events_url":"https://api.github.com/users/kiawin/events{/privacy}","received_events_url":"https://api.github.com/users/kiawin/received_events","type":"User","site_admin":false},"created_at":"2019-04-24T14:25:12Z","updated_at":"2019-04-24T14:25:12Z","author_association":"CONTRIBUTOR","body":"@DaveCTurner Any thought on how much time is considered \"an unreasonably long time\"?\r\n\r\nI can work on this ticket, if that's ok with you :)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/486286139","html_url":"https://github.com/elastic/elasticsearch/issues/40898#issuecomment-486286139","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40898","id":486286139,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NjI4NjEzOQ==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2019-04-24T15:16:37Z","updated_at":"2019-04-24T15:16:37Z","author_association":"CONTRIBUTOR","body":"Great!\r\n\r\nLet's default to 30 seconds, starting from the cluster forming (i.e. the first call to `clusterChanged()` in which `event.state().blocks().hasGlobalBlock(GatewayService.STATE_NOT_RECOVERED_BLOCK)` is false). This time should be configurable via a `Setting.timeSetting` rather than hard-coded.\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/592117388","html_url":"https://github.com/elastic/elasticsearch/issues/40898#issuecomment-592117388","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40898","id":592117388,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjExNzM4OA==","user":{"login":"mariaral","id":19326785,"node_id":"MDQ6VXNlcjE5MzI2Nzg1","avatar_url":"https://avatars3.githubusercontent.com/u/19326785?v=4","gravatar_id":"","url":"https://api.github.com/users/mariaral","html_url":"https://github.com/mariaral","followers_url":"https://api.github.com/users/mariaral/followers","following_url":"https://api.github.com/users/mariaral/following{/other_user}","gists_url":"https://api.github.com/users/mariaral/gists{/gist_id}","starred_url":"https://api.github.com/users/mariaral/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mariaral/subscriptions","organizations_url":"https://api.github.com/users/mariaral/orgs","repos_url":"https://api.github.com/users/mariaral/repos","events_url":"https://api.github.com/users/mariaral/events{/privacy}","received_events_url":"https://api.github.com/users/mariaral/received_events","type":"User","site_admin":false},"created_at":"2020-02-27T18:49:08Z","updated_at":"2020-02-27T18:49:08Z","author_association":"CONTRIBUTOR","body":"Hey @kiawin are you still interested in this issue? If not, I could work on this.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/592143867","html_url":"https://github.com/elastic/elasticsearch/issues/40898#issuecomment-592143867","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40898","id":592143867,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjE0Mzg2Nw==","user":{"login":"kiawin","id":1992348,"node_id":"MDQ6VXNlcjE5OTIzNDg=","avatar_url":"https://avatars1.githubusercontent.com/u/1992348?v=4","gravatar_id":"","url":"https://api.github.com/users/kiawin","html_url":"https://github.com/kiawin","followers_url":"https://api.github.com/users/kiawin/followers","following_url":"https://api.github.com/users/kiawin/following{/other_user}","gists_url":"https://api.github.com/users/kiawin/gists{/gist_id}","starred_url":"https://api.github.com/users/kiawin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kiawin/subscriptions","organizations_url":"https://api.github.com/users/kiawin/orgs","repos_url":"https://api.github.com/users/kiawin/repos","events_url":"https://api.github.com/users/kiawin/events{/privacy}","received_events_url":"https://api.github.com/users/kiawin/received_events","type":"User","site_admin":false},"created_at":"2020-02-27T19:45:44Z","updated_at":"2020-02-27T19:45:44Z","author_association":"CONTRIBUTOR","body":"@mariaral thanks for your interest. please proceed ðŸ˜„","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/596260355","html_url":"https://github.com/elastic/elasticsearch/issues/40898#issuecomment-596260355","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40898","id":596260355,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NjI2MDM1NQ==","user":{"login":"mariaral","id":19326785,"node_id":"MDQ6VXNlcjE5MzI2Nzg1","avatar_url":"https://avatars3.githubusercontent.com/u/19326785?v=4","gravatar_id":"","url":"https://api.github.com/users/mariaral","html_url":"https://github.com/mariaral","followers_url":"https://api.github.com/users/mariaral/followers","following_url":"https://api.github.com/users/mariaral/following{/other_user}","gists_url":"https://api.github.com/users/mariaral/gists{/gist_id}","starred_url":"https://api.github.com/users/mariaral/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mariaral/subscriptions","organizations_url":"https://api.github.com/users/mariaral/orgs","repos_url":"https://api.github.com/users/mariaral/repos","events_url":"https://api.github.com/users/mariaral/events{/privacy}","received_events_url":"https://api.github.com/users/mariaral/received_events","type":"User","site_admin":false},"created_at":"2020-03-08T22:30:06Z","updated_at":"2020-03-08T22:30:06Z","author_association":"CONTRIBUTOR","body":"Hello @DaveCTurner ,\r\nI had a look at this issue and tried to understand the code. I like your idea of waiting a configurable amount of time before warning the users. From what I understand, this cannot be done inside the `resolveBulk` method and we will have to create a `Future` that will check after x seconds if the exporter is set up by the master and prints the warning otherwise. Does this sound reasonable?                                                                                                                                            ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/603230254","html_url":"https://github.com/elastic/elasticsearch/issues/40898#issuecomment-603230254","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40898","id":603230254,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMzIzMDI1NA==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2020-03-24T13:12:44Z","updated_at":"2020-03-24T13:12:44Z","author_association":"CONTRIBUTOR","body":"@marial I think it'd be simpler to record the time at which the cluster forms (i.e. the first time that `clusterChanged()` is called for a cluster state without `GatewayService.STATE_NOT_RECOVERED_BLOCK`) and then only emit the warning if enough time has elapsed after that.\r\n\r\nThe current (relative) time is available in this class from `client.threadPool().relativeTimeInMillis()`.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/603763707","html_url":"https://github.com/elastic/elasticsearch/issues/40898#issuecomment-603763707","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40898","id":603763707,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMzc2MzcwNw==","user":{"login":"mariaral","id":19326785,"node_id":"MDQ6VXNlcjE5MzI2Nzg1","avatar_url":"https://avatars3.githubusercontent.com/u/19326785?v=4","gravatar_id":"","url":"https://api.github.com/users/mariaral","html_url":"https://github.com/mariaral","followers_url":"https://api.github.com/users/mariaral/followers","following_url":"https://api.github.com/users/mariaral/following{/other_user}","gists_url":"https://api.github.com/users/mariaral/gists{/gist_id}","starred_url":"https://api.github.com/users/mariaral/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mariaral/subscriptions","organizations_url":"https://api.github.com/users/mariaral/orgs","repos_url":"https://api.github.com/users/mariaral/repos","events_url":"https://api.github.com/users/mariaral/events{/privacy}","received_events_url":"https://api.github.com/users/mariaral/received_events","type":"User","site_admin":false},"created_at":"2020-03-25T10:30:39Z","updated_at":"2020-03-25T10:30:39Z","author_association":"CONTRIBUTOR","body":"@DaveCTurner thank you for taking a look. I initially tried your suggestion but since the ``resolveBulk()`` is called only at cluster updates, if no more cluster updates happen after 30 seconds (i.e. the nodes have joined the cluster before that time elapses), the warning will not be printed even though the master may not have x-pack installed. Thatâ€™s why I suggested checking this asynchronously. Do you have any other suggestions for that?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/603770044","html_url":"https://github.com/elastic/elasticsearch/issues/40898#issuecomment-603770044","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40898","id":603770044,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMzc3MDA0NA==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2020-03-25T10:44:47Z","updated_at":"2020-03-25T10:44:47Z","author_association":"CONTRIBUTOR","body":"That's not unreasonable, although in practice there'll always be more cluster state updates. Maybe `resolveBulk()` is the wrong place to log this. How about logging this warning in `openBulk()` if `state` is not `RUNNING` and more than 30 seconds have elapsed since the cluster formed?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/603839000","html_url":"https://github.com/elastic/elasticsearch/issues/40898#issuecomment-603839000","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40898","id":603839000,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMzgzOTAwMA==","user":{"login":"mariaral","id":19326785,"node_id":"MDQ6VXNlcjE5MzI2Nzg1","avatar_url":"https://avatars3.githubusercontent.com/u/19326785?v=4","gravatar_id":"","url":"https://api.github.com/users/mariaral","html_url":"https://github.com/mariaral","followers_url":"https://api.github.com/users/mariaral/followers","following_url":"https://api.github.com/users/mariaral/following{/other_user}","gists_url":"https://api.github.com/users/mariaral/gists{/gist_id}","starred_url":"https://api.github.com/users/mariaral/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mariaral/subscriptions","organizations_url":"https://api.github.com/users/mariaral/orgs","repos_url":"https://api.github.com/users/mariaral/repos","events_url":"https://api.github.com/users/mariaral/events{/privacy}","received_events_url":"https://api.github.com/users/mariaral/received_events","type":"User","site_admin":false},"created_at":"2020-03-25T13:28:17Z","updated_at":"2020-03-25T13:28:17Z","author_association":"CONTRIBUTOR","body":"Great suggestion @DaveCTurner! It seems to solve the issue. I will prepare a PR asap.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/604413911","html_url":"https://github.com/elastic/elasticsearch/issues/40898#issuecomment-604413911","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40898","id":604413911,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDQxMzkxMQ==","user":{"login":"mariaral","id":19326785,"node_id":"MDQ6VXNlcjE5MzI2Nzg1","avatar_url":"https://avatars3.githubusercontent.com/u/19326785?v=4","gravatar_id":"","url":"https://api.github.com/users/mariaral","html_url":"https://github.com/mariaral","followers_url":"https://api.github.com/users/mariaral/followers","following_url":"https://api.github.com/users/mariaral/following{/other_user}","gists_url":"https://api.github.com/users/mariaral/gists{/gist_id}","starred_url":"https://api.github.com/users/mariaral/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mariaral/subscriptions","organizations_url":"https://api.github.com/users/mariaral/orgs","repos_url":"https://api.github.com/users/mariaral/repos","events_url":"https://api.github.com/users/mariaral/events{/privacy}","received_events_url":"https://api.github.com/users/mariaral/received_events","type":"User","site_admin":false},"created_at":"2020-03-26T12:52:58Z","updated_at":"2020-03-26T12:52:58Z","author_association":"CONTRIBUTOR","body":"@DaveCTurner I just created a PR. Please take a look.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/617180179","html_url":"https://github.com/elastic/elasticsearch/issues/40898#issuecomment-617180179","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40898","id":617180179,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNzE4MDE3OQ==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2020-04-21T13:29:01Z","updated_at":"2020-04-21T13:29:01Z","author_association":"CONTRIBUTOR","body":"Thanks @mariaral and @danhermann for closing this :grin:","performed_via_github_app":null}]