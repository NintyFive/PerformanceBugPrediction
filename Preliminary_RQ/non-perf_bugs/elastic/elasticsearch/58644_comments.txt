[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/651059905","html_url":"https://github.com/elastic/elasticsearch/issues/58644#issuecomment-651059905","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58644","id":651059905,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTA1OTkwNQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-06-29T11:41:02Z","updated_at":"2020-06-29T11:41:02Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra (:Core/Infra/Build)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/651059924","html_url":"https://github.com/elastic/elasticsearch/issues/58644#issuecomment-651059924","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58644","id":651059924,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTA1OTkyNA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-06-29T11:41:04Z","updated_at":"2020-06-29T11:41:04Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-security (:Security/Security)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/651362905","html_url":"https://github.com/elastic/elasticsearch/issues/58644#issuecomment-651362905","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58644","id":651362905,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTM2MjkwNQ==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2020-06-29T21:00:10Z","updated_at":"2020-06-29T21:00:10Z","author_association":"CONTRIBUTOR","body":"This is tracked upstream in https://bugs.openjdk.java.net/browse/JDK-8248505","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/669610580","html_url":"https://github.com/elastic/elasticsearch/issues/58644#issuecomment-669610580","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58644","id":669610580,"node_id":"MDEyOklzc3VlQ29tbWVudDY2OTYxMDU4MA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2020-08-06T00:18:10Z","updated_at":"2020-08-06T00:18:10Z","author_association":"MEMBER","body":"@jkakavas The upstream JDK bug has been fixed (build 31) and we should be using a newer build (I see at least build 34 in our CI). Can you check if fips will work with jdk15 to close this issue?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/669642711","html_url":"https://github.com/elastic/elasticsearch/issues/58644#issuecomment-669642711","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58644","id":669642711,"node_id":"MDEyOklzc3VlQ29tbWVudDY2OTY0MjcxMQ==","user":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"created_at":"2020-08-06T02:17:15Z","updated_at":"2020-08-06T02:17:15Z","author_association":"CONTRIBUTOR","body":"@ywangd If you get time, do you want to look at this while @jkakavas is out?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/669684328","html_url":"https://github.com/elastic/elasticsearch/issues/58644#issuecomment-669684328","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58644","id":669684328,"node_id":"MDEyOklzc3VlQ29tbWVudDY2OTY4NDMyOA==","user":{"login":"ywangd","id":2344308,"node_id":"MDQ6VXNlcjIzNDQzMDg=","avatar_url":"https://avatars3.githubusercontent.com/u/2344308?v=4","gravatar_id":"","url":"https://api.github.com/users/ywangd","html_url":"https://github.com/ywangd","followers_url":"https://api.github.com/users/ywangd/followers","following_url":"https://api.github.com/users/ywangd/following{/other_user}","gists_url":"https://api.github.com/users/ywangd/gists{/gist_id}","starred_url":"https://api.github.com/users/ywangd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywangd/subscriptions","organizations_url":"https://api.github.com/users/ywangd/orgs","repos_url":"https://api.github.com/users/ywangd/repos","events_url":"https://api.github.com/users/ywangd/events{/privacy}","received_events_url":"https://api.github.com/users/ywangd/received_events","type":"User","site_admin":false},"created_at":"2020-08-06T04:42:18Z","updated_at":"2020-08-06T04:42:18Z","author_association":"MEMBER","body":"@tvernum Yes I'll take a look. Thanks","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/669712734","html_url":"https://github.com/elastic/elasticsearch/issues/58644#issuecomment-669712734","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58644","id":669712734,"node_id":"MDEyOklzc3VlQ29tbWVudDY2OTcxMjczNA==","user":{"login":"ywangd","id":2344308,"node_id":"MDQ6VXNlcjIzNDQzMDg=","avatar_url":"https://avatars3.githubusercontent.com/u/2344308?v=4","gravatar_id":"","url":"https://api.github.com/users/ywangd","html_url":"https://github.com/ywangd","followers_url":"https://api.github.com/users/ywangd/followers","following_url":"https://api.github.com/users/ywangd/following{/other_user}","gists_url":"https://api.github.com/users/ywangd/gists{/gist_id}","starred_url":"https://api.github.com/users/ywangd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywangd/subscriptions","organizations_url":"https://api.github.com/users/ywangd/orgs","repos_url":"https://api.github.com/users/ywangd/repos","events_url":"https://api.github.com/users/ywangd/events{/privacy}","received_events_url":"https://api.github.com/users/ywangd/received_events","type":"User","site_admin":false},"created_at":"2020-08-06T05:38:14Z","updated_at":"2020-08-06T05:38:14Z","author_association":"MEMBER","body":"I can confirm that a previously failed test now passes locally with JDK 15 b33 and FIPS enabled. So I think we are in position to re-enable the tests for JDK 15. However, there are a few issues:\r\n\r\n1. Although the test passed, the Gradle build itself failed because [`fips.gradle`](https://github.com/elastic/elasticsearch/blob/master/gradle/fips.gradle#L29) uses a deprecated Gradle feature. The warning message is something like:\r\n> The configuration :modules:aggs-matrix-stats:extraFipsJars was resolved without accessing the project in a safe manner.  This may happen when a configuration is resolved from a different project. This behaviour has been deprecated and is scheduled to be removed in Gradle 7.0. See https://docs.gradle.org/6.5/userguide/viewing_debugging_dependencies.html#sub:resolving-unsafe-configuration-resolution-errors for more details.\r\n>\r\nI checked the above link briefly, but it is not obvious to me how it can be fixed. @rjernst Could you please help out here? If I specify `--warning-mode none` on the CLI, everything works, but I don't think it's the correct way to fix things :)\r\n\r\n2. The periodic fips [projects](https://elasticsearch-ci.elastic.co/view/Elasticsearch%20master/job/elastic+elasticsearch+master+matrix-java-periodic-fips/) currently always fail on the CI. As far as I can tell, they fail very early on when configuring the projects and complain about\r\n```\r\n18:17:25 FATAL: No such property: openjdk15 for class: groovy.lang.Binding\r\n18:17:25 groovy.lang.MissingPropertyException: No such property: openjdk15 for class: groovy.lang.Binding\r\n18:17:25 \tat groovy.lang.Binding.getVariable(Binding.java:63)\r\n18:17:25 \tat org.jenkinsci.plugins.scriptsecurity.sandbox.groovy.SandboxInterceptor.onGetProperty(SandboxInterceptor.java:270)\r\n18:17:25 \tat org.kohsuke.groovy.sandbox.impl.Checker$7.call(Checker.java:353)\r\n18:17:25 \tat org.kohsuke.groovy.sandbox.impl.Checker.checkedGetProperty(Checker.java:357)\r\n18:17:25 \tat org.kohsuke.groovy.sandbox.impl.Checker$checkedGetProperty.callStatic(Unknown Source)\r\n18:17:25 \tat org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallStatic(CallSiteArray.java:56)\r\n18:17:25 \tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:194)\r\n18:17:25 \tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.callStatic(AbstractCallSite.java:230)\r\n18:17:25 \tat Script1.run(Script1.groovy:2)\r\n18:17:25 \tat org.jenkinsci.plugins.scriptsecurity.sandbox.groovy.GroovySandbox.runScript(GroovySandbox.java:162)\r\n18:17:25 \tat org.jenkinsci.plugins.scriptsecurity.sandbox.groovy.GroovySandbox.run(GroovySandbox.java:269)\r\n18:17:25 \tat hudson.matrix.FilterScript.evaluate(FilterScript.java:45)\r\n18:17:25 \tat hudson.matrix.FilterScript.apply(FilterScript.java:85)\r\n18:17:25 \tat hudson.matrix.Combination.evalGroovyExpression(Combination.java:101)\r\n18:17:25 \tat hudson.matrix.Combination.evalGroovyExpression(Combination.java:91)\r\n18:17:25 \tat hudson.matrix.MatrixProject.rebuildConfigurations(MatrixProject.java:658)\r\n18:17:25 \tat hudson.matrix.MatrixProject.getRunConfiguration(MatrixProject.java:691)\r\n18:17:25 \tat hudson.matrix.MatrixBuild$MatrixBuildExecution.doRun(MatrixBuild.java:370)\r\n18:17:25 \tat hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:504)\r\n18:17:25 \tat hudson.model.Run.execute(Run.java:1880)\r\n18:17:25 \tat hudson.matrix.MatrixBuild.run(MatrixBuild.java:323)\r\n18:17:25 \tat hudson.model.ResourceController.execute(ResourceController.java:97)\r\n18:17:25 \tat hudson.model.Executor.run(Executor.java:428)\r\n```\r\nSo if I understand it correctly, we haven't had any FIPS enabled tests for a while (> 1 month). I compared the configurations with the non-fips projects and I did not find any difference that could cause the problem. So is it hardware (test workers) related?\r\n\r\n3. I don't have permission to edit the configurations. Or are the configurations managed in another code base?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/669776556","html_url":"https://github.com/elastic/elasticsearch/issues/58644#issuecomment-669776556","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58644","id":669776556,"node_id":"MDEyOklzc3VlQ29tbWVudDY2OTc3NjU1Ng==","user":{"login":"ywangd","id":2344308,"node_id":"MDQ6VXNlcjIzNDQzMDg=","avatar_url":"https://avatars3.githubusercontent.com/u/2344308?v=4","gravatar_id":"","url":"https://api.github.com/users/ywangd","html_url":"https://github.com/ywangd","followers_url":"https://api.github.com/users/ywangd/followers","following_url":"https://api.github.com/users/ywangd/following{/other_user}","gists_url":"https://api.github.com/users/ywangd/gists{/gist_id}","starred_url":"https://api.github.com/users/ywangd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywangd/subscriptions","organizations_url":"https://api.github.com/users/ywangd/orgs","repos_url":"https://api.github.com/users/ywangd/repos","events_url":"https://api.github.com/users/ywangd/events{/privacy}","received_events_url":"https://api.github.com/users/ywangd/received_events","type":"User","site_admin":false},"created_at":"2020-08-06T08:01:42Z","updated_at":"2020-08-06T08:01:42Z","author_association":"MEMBER","body":"Linking it here for context: @breskeby raised #60802 to fix the Gradle usage deprecation issue. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/670221976","html_url":"https://github.com/elastic/elasticsearch/issues/58644#issuecomment-670221976","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58644","id":670221976,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDIyMTk3Ng==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2020-08-06T22:27:06Z","updated_at":"2020-08-06T22:27:06Z","author_association":"MEMBER","body":"The error in (2) is due to a misconfiguration when the fips job was disabled. The configuration is indeed in another repro. Now that the tests should work, we will get that re-enabled. Since the original failure mentioned here is now fixed, I'm going to close this issue. Thanks for the help @ywangd and @breskeby.","performed_via_github_app":null}]