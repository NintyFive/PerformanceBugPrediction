{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/43992","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43992/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43992/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43992/events","html_url":"https://github.com/elastic/elasticsearch/issues/43992","id":464357760,"node_id":"MDU6SXNzdWU0NjQzNTc3NjA=","number":43992,"title":"[ML] Continuous data frame should be more robust to new and deleted indices ","user":{"login":"sophiec20","id":4185750,"node_id":"MDQ6VXNlcjQxODU3NTA=","avatar_url":"https://avatars2.githubusercontent.com/u/4185750?v=4","gravatar_id":"","url":"https://api.github.com/users/sophiec20","html_url":"https://github.com/sophiec20","followers_url":"https://api.github.com/users/sophiec20/followers","following_url":"https://api.github.com/users/sophiec20/following{/other_user}","gists_url":"https://api.github.com/users/sophiec20/gists{/gist_id}","starred_url":"https://api.github.com/users/sophiec20/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophiec20/subscriptions","organizations_url":"https://api.github.com/users/sophiec20/orgs","repos_url":"https://api.github.com/users/sophiec20/repos","events_url":"https://api.github.com/users/sophiec20/events{/privacy}","received_events_url":"https://api.github.com/users/sophiec20/received_events","type":"User","site_admin":false},"labels":[{"id":1272783040,"node_id":"MDU6TGFiZWwxMjcyNzgzMDQw","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:ml/Transform","name":":ml/Transform","color":"0e8a16","default":false,"description":"Transform"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":1352927464,"node_id":"MDU6TGFiZWwxMzUyOTI3NDY0","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v7.3.0","name":"v7.3.0","color":"dddddd","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false},"assignees":[{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false}],"milestone":null,"comments":6,"created_at":"2019-07-04T17:45:01Z","updated_at":"2019-07-16T08:56:06Z","closed_at":"2019-07-16T08:56:06Z","author_association":"NONE","active_lock_reason":null,"body":"Found in 7.3.0 `    \"build_hash\" : \"f8fd432\",\r\n    \"build_date\" : \"2019-07-03T15:05:06.452272Z\",`\r\n\r\n3 node cluster.\r\nIndex template for `temp-*` has 3 shards and 1 replica.\r\nNew index `temp-100?` is being created every 12 seconds with a bulk upload of 4000 documents.\r\n\r\nWhen polling `GET _data_frame/transforms/blah*/_stats` periodic checkpoint exceptions occur. These are displayed in the UI transform list as generic server error 500 toast messages, providing the page refresh cycle coincides.\r\n\r\nIndex `temp_1013` has just been created. There is a small window when this index health is yellow. I think it might also be possible that the replica is not yet ready (not sure if health is considered yellow in this case).\r\n\r\n\r\n```\r\n  \"node_failures\": [\r\n    {\r\n      \"type\": \"failed_node_exception\",\r\n      \"reason\": \"Failed to retrieve checkpointing info\",\r\n      \"node_id\": \"qMS4vptxxxkr7baDqqqq\",\r\n      \"caused_by\": {\r\n        \"type\": \"checkpoint_exception\",\r\n        \"reason\": \"checkpoint_exception: Failure during source checkpoint info retrieval\",\r\n        \"caused_by\": {\r\n          \"type\": \"index_not_found_exception\",\r\n          \"reason\": \"no such index [temp_1013]\",\r\n          \"index_uuid\": \"_na_\",\r\n          \"resource.type\": \"index_or_alias\",\r\n          \"resource.id\": \"temp_1013\",\r\n          \"index\": \"temp_1013\"\r\n        }\r\n      }\r\n    },\r\n    {\r\n      \"type\": \"failed_node_exception\",\r\n      \"reason\": \"Failed to retrieve checkpointing info\",\r\n      \"node_id\": \"qMS4vptxxxkr7baDqqqq\",\r\n      \"caused_by\": {\r\n        \"type\": \"checkpoint_exception\",\r\n        \"reason\": \"checkpoint_exception: Failure during source checkpoint info retrieval\",\r\n        \"caused_by\": {\r\n          \"type\": \"null_pointer_exception\",\r\n          \"reason\": null\r\n        }\r\n      }\r\n    }\r\n```\r\n\r\nThe elasticsearch logs contained repeated messages\r\n```\r\n[2019-07-04T17:32:36,894][ERROR][o.e.x.d.t.DataFrameTransformTask] [node3] failure in update check\r\n[2019-07-04T17:33:07,026][ERROR][o.e.x.d.t.DataFrameTransformTask] [node3] failure in update check\r\n[2019-07-04T17:35:59,204][ERROR][o.e.x.d.t.DataFrameTransformTask] [node3] failure in update check\r\n[2019-07-04T17:38:01,976][ERROR][o.e.x.d.t.DataFrameTransformTask] [node3] failure in update check\r\n```\r\n\r\n**Expected behavior**\r\nNew source index creation is likely for continuous data frames. Continuous data frames should be tolerant of this.\r\n\r\n\r\n","closed_by":{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false},"performed_via_github_app":null}