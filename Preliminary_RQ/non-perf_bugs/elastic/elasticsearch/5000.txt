{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/5000","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5000/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5000/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5000/events","html_url":"https://github.com/elastic/elasticsearch/issues/5000","id":26867135,"node_id":"MDU6SXNzdWUyNjg2NzEzNQ==","number":5000,"title":"Very strange behavior of index templates","user":{"login":"abaxanean","id":1536989,"node_id":"MDQ6VXNlcjE1MzY5ODk=","avatar_url":"https://avatars2.githubusercontent.com/u/1536989?v=4","gravatar_id":"","url":"https://api.github.com/users/abaxanean","html_url":"https://github.com/abaxanean","followers_url":"https://api.github.com/users/abaxanean/followers","following_url":"https://api.github.com/users/abaxanean/following{/other_user}","gists_url":"https://api.github.com/users/abaxanean/gists{/gist_id}","starred_url":"https://api.github.com/users/abaxanean/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abaxanean/subscriptions","organizations_url":"https://api.github.com/users/abaxanean/orgs","repos_url":"https://api.github.com/users/abaxanean/repos","events_url":"https://api.github.com/users/abaxanean/events{/privacy}","received_events_url":"https://api.github.com/users/abaxanean/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2014-02-04T08:50:39Z","updated_at":"2014-12-24T19:17:10Z","closed_at":"2014-12-24T19:17:10Z","author_association":"NONE","active_lock_reason":null,"body":"1. Have an index template which matches everything and defines under mappings a \"_default_\" type with some \"dynamic_templates\", e.g.\n   <pre>\n   {\n   \"template_parent\": {\n     \"mapping\": {\n       \"include_in_all\": false,\n       \"index\": \"not_analyzed\"\n     },\n   \"match\": \"parent_*\"\n   }\n   }\n   </pre>\n   Indices, types and their mappings are supposed to be generated dynamically, considering the template.\n2. Index items in parallel from multiple threads on multiple indices (one type per index).\n\nObserved : Indices are dynamically generated but the mapping lack from some of them.\ne.g Items of type 'A' indexed on index 'a' led to the creation of index 'a', the creation of type 'A' on this index, and properties that starts with 'parent_' not being analyzed.\nOn the other hand, Item Type 'B' which must have been generated on index 'b' isn't there at all, the documents themselves are there (/B/_count returns the correct number, /B/b/_count returns 0). The index metadata returned(b/_mapping) also reveals that there is no type 'B' on the index, only the '_default_' type. The documents listed via /b/_search have their _type_ attribute equals to 'B'.\n\nEverything is done from Java Client.\nStart node, put template, insert items in parallel.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}