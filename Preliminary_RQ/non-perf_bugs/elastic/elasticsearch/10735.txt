{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/10735","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10735/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10735/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10735/events","html_url":"https://github.com/elastic/elasticsearch/issues/10735","id":70201710,"node_id":"MDU6SXNzdWU3MDIwMTcxMA==","number":10735,"title":"Integration test failing due to assertion that does not allow calling blocking code from networking threads.","user":{"login":"dr2014","id":8433827,"node_id":"MDQ6VXNlcjg0MzM4Mjc=","avatar_url":"https://avatars2.githubusercontent.com/u/8433827?v=4","gravatar_id":"","url":"https://api.github.com/users/dr2014","html_url":"https://github.com/dr2014","followers_url":"https://api.github.com/users/dr2014/followers","following_url":"https://api.github.com/users/dr2014/following{/other_user}","gists_url":"https://api.github.com/users/dr2014/gists{/gist_id}","starred_url":"https://api.github.com/users/dr2014/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dr2014/subscriptions","organizations_url":"https://api.github.com/users/dr2014/orgs","repos_url":"https://api.github.com/users/dr2014/repos","events_url":"https://api.github.com/users/dr2014/events{/privacy}","received_events_url":"https://api.github.com/users/dr2014/received_events","type":"User","site_admin":false},"labels":[{"id":73544,"node_id":"MDU6TGFiZWw3MzU0NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Enon-issue","name":">non-issue","color":"cfcfcf","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-04-22T18:31:06Z","updated_at":"2015-04-22T18:36:01Z","closed_at":"2015-04-22T18:35:55Z","author_association":"NONE","active_lock_reason":null,"body":"Sample project is available at: https://github.com/dr2014/ES_IntegrationTest_Issue\n\nElasticsearch version: 1.5.1\n\nThe assertion in Transports [https://github.com/elastic/elasticsearch/blob/master/src/main/java/org/elasticsearch/transport/Transports.java#L57] is failing integration test for HTTP requests.\n\nWhat is the correct way to make a blocking call from RestHandler? \n\nStacktrace:\nExpected current thread [Thread[elasticsearch[node_s6][http_server_worker][T#1]{New I/O worker #75},5,SampleTest]] to not be a transport thread. Reason: \njava.lang.AssertionError: Expected current thread [Thread[elasticsearch[node_s6][http_server_worker][T#1]{New I/O worker #75},5,TGRP-SampleTest]] to not be a transport thread. Reason: \n    at org.elasticsearch.transport.Transports.assertNotTransportThread(Transports.java:57)\n    at org.elasticsearch.common.util.concurrent.BaseFuture.get(BaseFuture.java:117)\n    at org.elasticsearch.action.support.AdapterActionFuture.actionGet(AdapterActionFuture.java:45)\n    at plugin.TestRestHandler.handleRequest(TestRestHandler.java:37)\n    at org.elasticsearch.rest.RestController.executeHandler(RestController.java:225)\n    at org.elasticsearch.rest.RestController.dispatchRequest(RestController.java:170)\n    at org.elasticsearch.http.HttpServer.internalDispatchRequest(HttpServer.java:121)\n    at org.elasticsearch.http.HttpServer$Dispatcher.dispatchRequest(HttpServer.java:83)\n    at org.elasticsearch.http.netty.NettyHttpServerTransport.dispatchRequest(NettyHttpServerTransport.java:329)\n","closed_by":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"performed_via_github_app":null}