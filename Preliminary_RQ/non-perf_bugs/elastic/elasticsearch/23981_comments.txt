[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/292639169","html_url":"https://github.com/elastic/elasticsearch/issues/23981#issuecomment-292639169","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23981","id":292639169,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjYzOTE2OQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-04-07T20:08:05Z","updated_at":"2017-04-07T21:10:25Z","author_association":"MEMBER","body":"I know what is happening here and I see a fix, I will open a PR soon. This is an incredibly unfortunate consequence of the fact that when a setting is specified as an array, we break it down into new keys `path.data.0`, `path.data.1`, ..., `path.data.n`, yet the default setting is applied as `path.data` so none of the keys from the array setting override as is done with other default settings.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/292645335","html_url":"https://github.com/elastic/elasticsearch/issues/23981#issuecomment-292645335","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23981","id":292645335,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjY0NTMzNQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-04-07T20:36:59Z","updated_at":"2017-04-07T20:36:59Z","author_association":"MEMBER","body":"This is a *horrifically* bad bug, it appears to have been introduced in 5.3.0, and it means that shards can end up in `/var/lib/elasticsearch` even if a user did not intend for that to be the case because they configured `path.data` as an array but the packaging specifies `default.path.data`. If `/var/lib/elasticsearch` is sitting on the root partition because why not since the user wants the data elsewhere, the user can easily end up with:\r\n - shards not where they wanted them\r\n - the root partition can fill up\r\n\r\nIt gets worse. Let's say that we fix this bug in 5.3.1 and a user migrates from 5.3.0 not aware of the fiasco that is ensuing here. They start up Elasticsearch on 5.3.1, and now their shards are missing! If they're not careful, they are in data loss territory.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/292645944","html_url":"https://github.com/elastic/elasticsearch/issues/23981#issuecomment-292645944","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23981","id":292645944,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjY0NTk0NA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2017-04-07T20:39:48Z","updated_at":"2017-04-07T20:39:48Z","author_association":"CONTRIBUTOR","body":"ðŸ˜­ ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/292686362","html_url":"https://github.com/elastic/elasticsearch/issues/23981#issuecomment-292686362","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23981","id":292686362,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjY4NjM2Mg==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2017-04-08T01:40:28Z","updated_at":"2017-04-08T01:40:28Z","author_association":"CONTRIBUTOR","body":"> Let's say that we fix this bug in 5.3.1 and a user migrates from 5.3.0 not aware of the fiasco that is ensuing here. They start up Elasticsearch on 5.3.1, and now their shards are missing! If they're not careful, they are in data loss territory.\r\n\r\nIf we just fix the config issue and someone upgrades one node at a time they shouldn't lose any data so long as they have replicas. The entire shard will have to recover from the primary, but that is a fairly normal thing. They'd have to manually clean up the shards in accidental data directory. Which isn't horrible, but it isn't great at all.\r\n\r\nWe could do more to try and copy the data or make tool or something.\r\n\r\nMinimally anyone on 5.3 will want to be able to know whether they are effected by this issue before they upgrade so they know what they have to do as part of the upgrade.\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/292686586","html_url":"https://github.com/elastic/elasticsearch/issues/23981#issuecomment-292686586","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23981","id":292686586,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjY4NjU4Ng==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-04-08T01:44:33Z","updated_at":"2017-04-08T01:44:33Z","author_association":"MEMBER","body":"> If we just fix the config issue and someone upgrades one node at a time they shouldn't lose any data so long as they have replicas.\r\n\r\nThat's the problem, we do not have complete control over this.\r\n\r\n> They'd have to manually clean up the shards in accidental data directory. Which isn't horrible, but it isn't great at all.\r\n\r\nYes, if they are aware of the problem and do not panic. Or they do not do something like practice immutable infrastructure.\r\n\r\n> We could do more to try and copy the data or make tool or something.\r\n\r\nYes, but it's quite delicate.\r\n\r\n> Minimally anyone on 5.3 will want to be able to know whether they are effected by this issue before they upgrade so they know what they have to do as part of the upgrade.\r\n\r\nIndeed, and therein lies the rub.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/292686840","html_url":"https://github.com/elastic/elasticsearch/issues/23981#issuecomment-292686840","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23981","id":292686840,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjY4Njg0MA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2017-04-08T01:49:25Z","updated_at":"2017-04-08T01:49:25Z","author_association":"CONTRIBUTOR","body":"Yeah, I just wanted to start talking about this. I certainly don't claim to have answers. I guess I'm fairly sure that the person doing the upgrade is going to want to know if they are effected by this. Lots of people won't and 5.3.0 will just be a normal version for them. For the effected people, even if we handle the whole thing automatically, they are going to need to know.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/292687280","html_url":"https://github.com/elastic/elasticsearch/issues/23981#issuecomment-292687280","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23981","id":292687280,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjY4NzI4MA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-04-08T01:57:34Z","updated_at":"2017-04-08T11:49:25Z","author_association":"MEMBER","body":"> Yeah, I just wanted to start talking about this.\r\n\r\nIndeed, we need more people thinking about this. I discussed some of the complexities with @dakrone earlier in the evening via another channel, and I've been thinking about it all night. Sorry that I haven't taken the time to write my thoughts down yet.\r\n\r\nAnother complexity that I thought of is that the fix for this has to live for the rest of the 5.x series lifecycle because someone can upgrade from 5.3.0 to any future release in the 5.x series.\r\n\r\nAnd yet another complexity that I thought is a situation where someone has their `default.path.data` included as one of the values in `path.data` (assuming multiple `path.data`).\r\n\r\n> For the effected people, even if we handle the whole thing automatically, they are going to need to know.\r\n\r\nI completely agree.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/292687426","html_url":"https://github.com/elastic/elasticsearch/issues/23981#issuecomment-292687426","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23981","id":292687426,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjY4NzQyNg==","user":{"login":"tylerfontaine","id":1923424,"node_id":"MDQ6VXNlcjE5MjM0MjQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1923424?v=4","gravatar_id":"","url":"https://api.github.com/users/tylerfontaine","html_url":"https://github.com/tylerfontaine","followers_url":"https://api.github.com/users/tylerfontaine/followers","following_url":"https://api.github.com/users/tylerfontaine/following{/other_user}","gists_url":"https://api.github.com/users/tylerfontaine/gists{/gist_id}","starred_url":"https://api.github.com/users/tylerfontaine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tylerfontaine/subscriptions","organizations_url":"https://api.github.com/users/tylerfontaine/orgs","repos_url":"https://api.github.com/users/tylerfontaine/repos","events_url":"https://api.github.com/users/tylerfontaine/events{/privacy}","received_events_url":"https://api.github.com/users/tylerfontaine/received_events","type":"User","site_admin":false},"created_at":"2017-04-08T02:00:11Z","updated_at":"2017-04-08T02:00:11Z","author_association":"NONE","body":"Do we have set limitations yet on rolling upgrades to 6.0? Would 5.3.0 ->\n6.0 be allowed? If so, the fix has to carry over there as well.\n\nOn Fri, Apr 7, 2017, 8:58 PM Jason Tedor <notifications@github.com> wrote:\n\n> Yeah, I just wanted to start talking about this.\n>\n> Indeed, I need more people to talk to about this. I discussed some of the\n> complexities with @dakrone <https://github.com/dakrone> earlier in the\n> evening via another channel, and I've been thinking about it all night.\n> Sorry that I haven't taken the time to write my thoughts down yet.\n>\n> Another complexity that I thought of is that the fix for this has to live\n> for the rest of the 5.x series lifecycle because someone can upgrade from\n> 5.3.0 to any future release in the 5.x series.\n>\n> And yet another complexity that I thought is a situation where someone has\n> their default.path.data included as one of the values in path.data\n> (assuming multiple path.data).\n>\n> For the effected people, even if we handle the whole thing automatically,\n> they are going to need to know.\n>\n> I completely agree.\n>\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/elastic/elasticsearch/issues/23981#issuecomment-292687280>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AB1ZYHwbhJ9d1nXtq3sn8vTdcT_x87O0ks5rtumtgaJpZM4M3P2Y>\n> .\n>\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/292687512","html_url":"https://github.com/elastic/elasticsearch/issues/23981#issuecomment-292687512","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23981","id":292687512,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjY4NzUxMg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-04-08T02:01:36Z","updated_at":"2017-04-08T02:04:57Z","author_association":"MEMBER","body":"No, this is absolutely not allowed. You can only rolling restart upgrade from the latest 5.x that is released when 6.0.0 goes GA.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/292687527","html_url":"https://github.com/elastic/elasticsearch/issues/23981#issuecomment-292687527","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23981","id":292687527,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjY4NzUyNw==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2017-04-08T02:01:49Z","updated_at":"2017-04-08T02:01:49Z","author_association":"CONTRIBUTOR","body":"> Do we have set limitations yet on rolling upgrades to 6.0? Would 5.3.0 ->\r\n> 6.0 be allowed? If so, the fix has to carry over there as well.\r\n\r\nWe'll make sure there is a 5.4 and so that doesn't have to happen.\r\n\r\n> And yet another complexity that I thought is a situation where someone has their default.path.data included as one of the values in path.data (assuming multiple path.data).\r\n\r\nSo any detection we have will produce a false positive for them, right?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/292687535","html_url":"https://github.com/elastic/elasticsearch/issues/23981#issuecomment-292687535","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23981","id":292687535,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjY4NzUzNQ==","user":{"login":"tylerfontaine","id":1923424,"node_id":"MDQ6VXNlcjE5MjM0MjQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1923424?v=4","gravatar_id":"","url":"https://api.github.com/users/tylerfontaine","html_url":"https://github.com/tylerfontaine","followers_url":"https://api.github.com/users/tylerfontaine/followers","following_url":"https://api.github.com/users/tylerfontaine/following{/other_user}","gists_url":"https://api.github.com/users/tylerfontaine/gists{/gist_id}","starred_url":"https://api.github.com/users/tylerfontaine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tylerfontaine/subscriptions","organizations_url":"https://api.github.com/users/tylerfontaine/orgs","repos_url":"https://api.github.com/users/tylerfontaine/repos","events_url":"https://api.github.com/users/tylerfontaine/events{/privacy}","received_events_url":"https://api.github.com/users/tylerfontaine/received_events","type":"User","site_admin":false},"created_at":"2017-04-08T02:01:58Z","updated_at":"2017-04-08T02:01:58Z","author_association":"NONE","body":"In fact, full cluster shutdown major version upgrades are even MORE dangerous in this instance. Because all of the shard disappear at the same time. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/292687564","html_url":"https://github.com/elastic/elasticsearch/issues/23981#issuecomment-292687564","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23981","id":292687564,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjY4NzU2NA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-04-08T02:02:23Z","updated_at":"2017-04-08T02:02:23Z","author_association":"MEMBER","body":"> So any detection we have will produce a false positive for them, right?\r\n\r\nI think it has to be smart enough to not produce a false positive for them.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/292687581","html_url":"https://github.com/elastic/elasticsearch/issues/23981#issuecomment-292687581","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23981","id":292687581,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjY4NzU4MQ==","user":{"login":"tylerfontaine","id":1923424,"node_id":"MDQ6VXNlcjE5MjM0MjQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1923424?v=4","gravatar_id":"","url":"https://api.github.com/users/tylerfontaine","html_url":"https://github.com/tylerfontaine","followers_url":"https://api.github.com/users/tylerfontaine/followers","following_url":"https://api.github.com/users/tylerfontaine/following{/other_user}","gists_url":"https://api.github.com/users/tylerfontaine/gists{/gist_id}","starred_url":"https://api.github.com/users/tylerfontaine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tylerfontaine/subscriptions","organizations_url":"https://api.github.com/users/tylerfontaine/orgs","repos_url":"https://api.github.com/users/tylerfontaine/repos","events_url":"https://api.github.com/users/tylerfontaine/events{/privacy}","received_events_url":"https://api.github.com/users/tylerfontaine/received_events","type":"User","site_admin":false},"created_at":"2017-04-08T02:02:51Z","updated_at":"2017-04-08T02:02:51Z","author_association":"NONE","body":"Just because a 5.4 exists, doesn't mean people will be there when they upgrade.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/292687590","html_url":"https://github.com/elastic/elasticsearch/issues/23981#issuecomment-292687590","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23981","id":292687590,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjY4NzU5MA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-04-08T02:03:01Z","updated_at":"2017-04-08T02:04:04Z","author_association":"MEMBER","body":"> In fact, full cluster shutdown major version upgrades are even MORE dangerous in this instance. Because all of the shard disappear at the same time.\r\n\r\nIndeed, that means that we need a fix in 6.x as well, someone could full cluster restart upgrade from 5.3.0.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/292687659","html_url":"https://github.com/elastic/elasticsearch/issues/23981#issuecomment-292687659","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23981","id":292687659,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjY4NzY1OQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2017-04-08T02:04:12Z","updated_at":"2017-04-08T02:04:12Z","author_association":"CONTRIBUTOR","body":"> Just because a 5.4 exists, doesn't mean people will be there when they upgrade.\r\n\r\nRight, sorry. They won't be able to do a rolling upgrade. Just a full cluster restart upgrade.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/292905257","html_url":"https://github.com/elastic/elasticsearch/issues/23981#issuecomment-292905257","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23981","id":292905257,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjkwNTI1Nw==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2017-04-10T10:02:37Z","updated_at":"2017-04-10T10:02:37Z","author_association":"CONTRIBUTOR","body":"I think we should look into removing the default option here. It's too much magic IMO and we can give people a good error message in that case. We can even advice how to copy over stuff to the actual data directories OR do it ourself. We had code for this in 2.x that we can reuse when we moved away from rolling our own software raid.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/292983259","html_url":"https://github.com/elastic/elasticsearch/issues/23981#issuecomment-292983259","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23981","id":292983259,"node_id":"MDEyOklzc3VlQ29tbWVudDI5Mjk4MzI1OQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-04-10T15:22:23Z","updated_at":"2017-04-10T15:22:23Z","author_association":"MEMBER","body":"> I think we should look into removing the default option here.\r\n\r\nToday this is used to support the packaging. I think that we can remove this if we instead ship the elasticsearch.yml with the distribution packaging to include explicit values path.data, path.logs, and path.conf. Sadly, I think that as a result of the situation here, we can not do this until 7.0.0.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/293162215","html_url":"https://github.com/elastic/elasticsearch/issues/23981#issuecomment-293162215","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23981","id":293162215,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzE2MjIxNQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2017-04-11T06:19:53Z","updated_at":"2017-04-11T06:19:53Z","author_association":"CONTRIBUTOR","body":"> Sadly, I think that as a result of the situation here, we can not do this until 7.0.0\r\n\r\nthat is a critical issue, I think we have to find a way to either fix it reliably or we need to drop stuff and I am not hesitating to even do this in a minor if it means dataloss or anything along those lines.","performed_via_github_app":null}]