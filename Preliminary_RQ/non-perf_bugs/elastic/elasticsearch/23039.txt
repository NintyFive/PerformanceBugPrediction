{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/23039","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23039/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23039/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23039/events","html_url":"https://github.com/elastic/elasticsearch/issues/23039","id":206129645,"node_id":"MDU6SXNzdWUyMDYxMjk2NDU=","number":23039,"title":"Update AWS Java SDK to support ECS Task Roles","user":{"login":"hmatland","id":1540159,"node_id":"MDQ6VXNlcjE1NDAxNTk=","avatar_url":"https://avatars1.githubusercontent.com/u/1540159?v=4","gravatar_id":"","url":"https://api.github.com/users/hmatland","html_url":"https://github.com/hmatland","followers_url":"https://api.github.com/users/hmatland/followers","following_url":"https://api.github.com/users/hmatland/following{/other_user}","gists_url":"https://api.github.com/users/hmatland/gists{/gist_id}","starred_url":"https://api.github.com/users/hmatland/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hmatland/subscriptions","organizations_url":"https://api.github.com/users/hmatland/orgs","repos_url":"https://api.github.com/users/hmatland/repos","events_url":"https://api.github.com/users/hmatland/events{/privacy}","received_events_url":"https://api.github.com/users/hmatland/received_events","type":"User","site_admin":false},"labels":[{"id":143077482,"node_id":"MDU6TGFiZWwxNDMwNzc0ODI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Snapshot/Restore","name":":Distributed/Snapshot/Restore","color":"0e8a16","default":false,"description":"Anything directly related to the `_snapshot/*` APIs"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":92913858,"node_id":"MDU6TGFiZWw5MjkxMzg1OA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/good%20first%20issue","name":"good first issue","color":"07569b","default":true,"description":"low hanging fruit"},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2017-02-08T08:39:08Z","updated_at":"2018-02-14T13:56:18Z","closed_at":"2017-09-12T08:34:13Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\nGitHub is reserved for bug reports and feature requests. The best place\r\nto ask a general question is at the Elastic Discourse forums at\r\nhttps://discuss.elastic.co. If you are in fact posting a bug report or\r\na feature request, please include one and only one of the below blocks\r\nin your new issue. Note that whether you're filing a bug report or a\r\nfeature request, ensure that your submission is for an\r\n[OS that we support](https://www.elastic.co/support/matrix#show_os).\r\nBug reports on an OS that we do not support or feature requests\r\nspecific to an OS that we do not support will be closed.\r\n-->\r\n\r\n<!--\r\nIf you are filing a feature request, please remove the above bug\r\nreport block and provide responses for all of the below items.\r\n-->\r\n\r\n**Describe the feature**: Plugin [repository-s3](https://github.com/elastic/elasticsearch/tree/master/plugins/repository-s3) currently use the the AWS Java SDK 1.10.69. Policy management for AWS resources used by Elasticsearch with AWS-plugins running on ECS would improve if the SDK version was upgraded to a newer release.\r\n\r\n*Background:*\r\nI noticed the old version due to lack of newer AWS IAM features. In this specific case:\r\n[Task IAM Roles](http://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-iam-roles.html).\r\nIAM Roles for tasks require 1.11.16 or above.\r\n\r\nIAM Roles for tasks are used as part of deployments to [Amazon EC2 Container Service (ECS)](https://aws.amazon.com/ecs/). Task roles allow specific containers, or set of containers, to run with specific Roles.\r\nTask roles are similar to Instance Roles. In ECS the instances running in the cluster has an Instance role, typically allowing the cluster instances access to various ECS APIs, Log Management and Load-Balancer registration/deregistration. Containers running on the instance also inherits the policies of the Instance role.\r\nIf you wish the container to have access to resources without granting it to every container running in the cluster, you need to either use Task roles, or access keys.\r\n\r\nWe strive to avoid the usage of access keys for applications running on AWS. \r\nBecause of this our current workaround is to set the policies we require on the Instance role.","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}