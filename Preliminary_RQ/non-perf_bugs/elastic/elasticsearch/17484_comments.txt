[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/205201199","html_url":"https://github.com/elastic/elasticsearch/issues/17484#issuecomment-205201199","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17484","id":205201199,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNTIwMTE5OQ==","user":{"login":"Mpdreamz","id":245275,"node_id":"MDQ6VXNlcjI0NTI3NQ==","avatar_url":"https://avatars3.githubusercontent.com/u/245275?v=4","gravatar_id":"","url":"https://api.github.com/users/Mpdreamz","html_url":"https://github.com/Mpdreamz","followers_url":"https://api.github.com/users/Mpdreamz/followers","following_url":"https://api.github.com/users/Mpdreamz/following{/other_user}","gists_url":"https://api.github.com/users/Mpdreamz/gists{/gist_id}","starred_url":"https://api.github.com/users/Mpdreamz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Mpdreamz/subscriptions","organizations_url":"https://api.github.com/users/Mpdreamz/orgs","repos_url":"https://api.github.com/users/Mpdreamz/repos","events_url":"https://api.github.com/users/Mpdreamz/events{/privacy}","received_events_url":"https://api.github.com/users/Mpdreamz/received_events","type":"User","site_admin":false},"created_at":"2016-04-04T08:58:33Z","updated_at":"2016-04-04T08:58:33Z","author_association":"MEMBER","body":"`-Des.plugins.staging=true` always has to be quoted when called from PS.\n\nWithout it the `.plugins.staging=true` will be a `CommandArgument` and the  equals sign will be split on in the opts handling of the bat file itself\n\nCausing this call to java to be constructed:\n\n``` bat\n\"$JAVA_HOME\" -client -Des.path.home=\"$ES_HOME\" \\ \n   \"-Des=.plugins.staging\" -cp \"$ES_HOME/lib/*;\" \\\n   \"org.elasticsearch.plugins.PluginCli\" \\\n   \"install\" \"true\" \"x-pack\"\n```\n\nSending two arguments to install. \n\nFor full reference here is the output of the powershell parsing\n\n``` powershell\nPS ~ [management.automation.psparser]::Tokenize(\n    \"elasticsearch-plugin.bat install -Des.plugins.staging=true x-pack\",\n     [ref]$null)\n\n\nContent     : elasticsearch-plugin.bat\nType        : Command\nStart       : 0\nLength      : 24\nStartLine   : 1\nStartColumn : 1\nEndLine     : 1\nEndColumn   : 25\n\nContent     : install\nType        : CommandArgument\nStart       : 25\nLength      : 7\nStartLine   : 1\nStartColumn : 26\nEndLine     : 1\nEndColumn   : 33\n\nContent     : -Des\nType        : CommandParameter\nStart       : 33\nLength      : 4\nStartLine   : 1\nStartColumn : 34\nEndLine     : 1\nEndColumn   : 38\n\nContent     : .plugins.staging=true\nType        : CommandArgument\nStart       : 37\nLength      : 21\nStartLine   : 1\nStartColumn : 38\nEndLine     : 1\nEndColumn   : 59\n\nContent     : x-pack\nType        : CommandArgument\nStart       : 59\nLength      : 6\nStartLine   : 1\nStartColumn : 60\nEndLine     : 1\nEndColumn   : 66\n```\n\n``` powershell\n\nPS ~ [management.automation.psparser]::Tokenize(\n     'elasticsearch-plugin.bat install \"-Des.plugins.staging=true\" x-pack', \n    [ref]$null)\n\n\nContent     : elasticsearch-plugin.bat\nType        : Command\nStart       : 0\nLength      : 24\nStartLine   : 1\nStartColumn : 1\nEndLine     : 1\nEndColumn   : 25\n\nContent     : install\nType        : CommandArgument\nStart       : 25\nLength      : 7\nStartLine   : 1\nStartColumn : 26\nEndLine     : 1\nEndColumn   : 33\n\nContent     : -Des.plugins.staging=true\nType        : String\nStart       : 33\nLength      : 27\nStartLine   : 1\nStartColumn : 34\nEndLine     : 1\nEndColumn   : 61\n\nContent     : x-pack\nType        : CommandArgument\nStart       : 61\nLength      : 6\nStartLine   : 1\nStartColumn : 62\nEndLine     : 1\nEndColumn   : 68\n```\n","performed_via_github_app":null}]