{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/52429","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52429/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52429/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52429/events","html_url":"https://github.com/elastic/elasticsearch/issues/52429","id":566408824,"node_id":"MDU6SXNzdWU1NjY0MDg4MjQ=","number":52429,"title":"[CI] XPackRestIT \"transform/transforms_stats/Test get continuous transform stats\" failure","user":{"login":"astefan","id":893749,"node_id":"MDQ6VXNlcjg5Mzc0OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/893749?v=4","gravatar_id":"","url":"https://api.github.com/users/astefan","html_url":"https://github.com/astefan","followers_url":"https://api.github.com/users/astefan/followers","following_url":"https://api.github.com/users/astefan/following{/other_user}","gists_url":"https://api.github.com/users/astefan/gists{/gist_id}","starred_url":"https://api.github.com/users/astefan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astefan/subscriptions","organizations_url":"https://api.github.com/users/astefan/orgs","repos_url":"https://api.github.com/users/astefan/repos","events_url":"https://api.github.com/users/astefan/events{/privacy}","received_events_url":"https://api.github.com/users/astefan/received_events","type":"User","site_admin":false},"labels":[{"id":1272783040,"node_id":"MDU6TGFiZWwxMjcyNzgzMDQw","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:ml/Transform","name":":ml/Transform","color":"0e8a16","default":false,"description":"Transform"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false},"assignees":[{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2020-02-17T16:32:06Z","updated_at":"2020-02-19T11:31:19Z","closed_at":"2020-02-19T11:31:19Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"This failure was part of a longer list of failed tasks in XPackRestIT, but this one seems to have been the first failing one and looks legit. For reference, I've also created https://github.com/elastic/elasticsearch/issues/52428. Also, it doesn't reproduce for me.\r\n\r\n```\r\n08:01:28   1> [2020-02-16T23:43:11,666][INFO ][o.e.x.t.r.XPackRestIT    ] [test] [p0=transform/transforms_stats/Test get continuous transform stats] before test\r\n08:01:28   1> [2020-02-16T23:43:13,044][INFO ][o.e.x.t.r.XPackRestIT    ] [test] Stash dump on test failure [{\r\n08:01:28   1>   \"stash\" : {\r\n08:01:28   1>     \"body\" : {\r\n08:01:28   1>       \"count\" : 1,\r\n08:01:28   1>       \"transforms\" : [\r\n08:01:28   1>         {\r\n08:01:28   1>           \"id\" : \"airline-transform-stats-continuous\",\r\n08:01:28   1>           \"state\" : \"started\",\r\n08:01:28   1>           \"node\" : {\r\n08:01:28   1>             \"id\" : \"SMnPdQK0T-SFKbe2hgOQ6Q\",\r\n08:01:28   1>             \"name\" : \"integTest-0\",\r\n08:01:28   1>             \"ephemeral_id\" : \"DhvyWYLlR8qwMGK2ANFG1w\",\r\n08:01:28   1>             \"transport_address\" : \"127.0.0.1:45379\",\r\n08:01:28   1>             \"attributes\" : { }\r\n08:01:28   1>           },\r\n08:01:28   1>           \"stats\" : {\r\n08:01:28   1>             \"pages_processed\" : 1,\r\n08:01:28   1>             \"documents_processed\" : 0,\r\n08:01:28   1>             \"documents_indexed\" : 0,\r\n08:01:28   1>             \"trigger_count\" : 1,\r\n08:01:28   1>             \"index_time_in_ms\" : 0,\r\n08:01:28   1>             \"index_total\" : 0,\r\n08:01:28   1>             \"index_failures\" : 0,\r\n08:01:28   1>             \"search_time_in_ms\" : 2,\r\n08:01:28   1>             \"search_total\" : 1,\r\n08:01:28   1>             \"search_failures\" : 0,\r\n08:01:28   1>             \"exponential_avg_checkpoint_duration_ms\" : 47.0,\r\n08:01:28   1>             \"exponential_avg_documents_indexed\" : 0.0,\r\n08:01:28   1>             \"exponential_avg_documents_processed\" : 0.0\r\n08:01:28   1>           },\r\n08:01:28   1>           \"checkpointing\" : {\r\n08:01:28   1>             \"last\" : {\r\n08:01:28   1>               \"checkpoint\" : 1,\r\n08:01:28   1>               \"timestamp_millis\" : 1581914592903,\r\n08:01:28   1>               \"time_upper_bound_millis\" : 1581914532903\r\n08:01:28   1>             }\r\n08:01:28   1>           }\r\n08:01:28   1>         }\r\n08:01:28   1>       ]\r\n08:01:28   1>     }\r\n08:01:28   1>   }\r\n08:01:28   1> }]\r\n08:01:28   1> [2020-02-16T23:43:23,577][INFO ][o.e.x.t.r.XPackRestIT    ] [test] There are still tasks running after this test that might break subsequent tests [data_frame/transforms[c]].\r\n08:01:28   1> [2020-02-16T23:43:23,578][INFO ][o.e.x.t.r.XPackRestIT    ] [test] [p0=transform/transforms_stats/Test get continuous transform stats] after test\r\n08:01:28   2> REPRODUCE WITH: ./gradlew ':x-pack:plugin:integTestRunner' --tests \"org.elasticsearch.xpack.test.rest.XPackRestIT.test {p0=transform/transforms_stats/Test get continuous transform stats}\" -Dtests.seed=FF7502DFD4FB6063 -Dtests.security.manager=true -Dtests.locale=mt -Dtests.timezone=US/Eastern -Dcompiler.java=13 -Dtests.rest.blacklist=getting_started/10_monitor_cluster_health/*\r\n08:01:28   2> REPRODUCE WITH: ./gradlew ':x-pack:plugin:integTestRunner' --tests \"org.elasticsearch.xpack.test.rest.XPackRestIT.test {p0=transform/transforms_stats/Test get continuous transform stats}\" -Dtests.seed=FF7502DFD4FB6063 -Dtests.security.manager=true -Dtests.locale=mt -Dtests.timezone=US/Eastern -Dcompiler.java=13 -Dtests.rest.blacklist=getting_started/10_monitor_cluster_health/*\r\n08:01:28   2> java.lang.AssertionError: Failure at [transform/transforms_stats:250]: transforms.0.stats.exponential_avg_checkpoint_duration_ms didn't match expected value:\r\n08:01:28     transforms.0.stats.exponential_avg_checkpoint_duration_ms: expected Double [0.0] but was Double [47.0]\r\n08:01:28         at org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.executeSection(ESClientYamlSuiteTestCase.java:405)\r\n08:01:28         at org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.test(ESClientYamlSuiteTestCase.java:382)\r\n08:01:28         at jdk.internal.reflect.GeneratedMethodAccessor12.invoke(Unknown Source)\r\n08:01:28         at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n08:01:28         at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n08:01:28         at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1754)\r\n08:01:28         at com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:942)\r\n08:01:28         at com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:978)\r\n08:01:28         at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:992)\r\n08:01:28         at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\r\n08:01:28         at org.apache.lucene.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:49)\r\n08:01:28         at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45)\r\n08:01:28         at org.apache.lucene.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:48)\r\n08:01:28         at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64)\r\n08:01:28         at org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47)\r\n08:01:28         at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\r\n08:01:28         at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:370)\r\n08:01:28         at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:819)\r\n08:01:28         at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:470)\r\n08:01:28         at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:951)\r\n08:01:28         at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:836)\r\n08:01:28         at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:887)\r\n08:01:28         at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:898)\r\n08:01:28         at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45)\r\n08:01:28         at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\r\n08:01:28         at org.apache.lucene.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:41)\r\n08:01:28         at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)\r\n08:01:28         at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)\r\n08:01:28         at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\r\n08:01:28         at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\r\n08:01:28         at org.apache.lucene.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53)\r\n08:01:28         at org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47)\r\n08:01:28         at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64)\r\n08:01:28         at org.apache.lucene.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:54)\r\n08:01:28         at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\r\n08:01:28         at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:370)\r\n08:01:28         at com.carrotsearch.randomizedtesting.ThreadLeakControl.lambda$forkTimeoutingTask$0(ThreadLeakControl.java:826)\r\n08:01:28         at java.base/java.lang.Thread.run(Thread.java:834)\r\n08:01:28 \r\n08:01:28         Caused by:\r\n08:01:28         java.lang.AssertionError: transforms.0.stats.exponential_avg_checkpoint_duration_ms didn't match expected value:\r\n08:01:28         transforms.0.stats.exponential_avg_checkpoint_duration_ms: expected Double [0.0] but was Double [47.0]\r\n08:01:28             at org.elasticsearch.test.rest.yaml.section.MatchAssertion.doAssert(MatchAssertion.java:93)\r\n08:01:28             at org.elasticsearch.test.rest.yaml.section.Assertion.execute(Assertion.java:76)\r\n08:01:28             at org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.executeSection(ESClientYamlSuiteTestCase.java:398)\r\n08:01:28             ... 37 more\r\n```\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA=java11,nodes=general-purpose/516/console\r\n[7.6.1] https://gradle-enterprise.elastic.co/s/dcsdwsaodnlso\r\n[7.7.0] https://gradle-enterprise.elastic.co/s/aeqrfacqyj24u\r\n[7.6.1] https://gradle-enterprise.elastic.co/s/vrp66sw4c6zyy\r\n[7.7.0] https://gradle-enterprise.elastic.co/s/zpd4kfpizyq7c\r\nhttps://gradle-enterprise.elastic.co/s/frzrlcgeo45j4","closed_by":{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false},"performed_via_github_app":null}