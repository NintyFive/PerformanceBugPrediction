{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/7884","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7884/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7884/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7884/events","html_url":"https://github.com/elastic/elasticsearch/issues/7884","id":43967930,"node_id":"MDU6SXNzdWU0Mzk2NzkzMA==","number":7884,"title":"Provide api to upgrade lucene indexes to current version","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"labels":[{"id":23172,"node_id":"MDU6TGFiZWwyMzE3Mg==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Efeature","name":">feature","color":"006b75","default":false,"description":null},{"id":92913658,"node_id":"MDU6TGFiZWw5MjkxMzY1OA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/blocker","name":"blocker","color":"e11d21","default":false,"description":null},{"id":132222001,"node_id":"MDU6TGFiZWwxMzIyMjIwMDE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v1.4.0","name":"v1.4.0","color":"dddddd","default":false,"description":null},{"id":76184120,"node_id":"MDU6TGFiZWw3NjE4NDEyMA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v2.0.0-beta1","name":"v2.0.0-beta1","color":"dddddd","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2014-09-25T21:11:09Z","updated_at":"2014-10-07T15:13:15Z","closed_at":"2014-10-07T15:13:15Z","author_association":"MEMBER","active_lock_reason":null,"body":"Lucene currently maintains backwards compatibility for reading the current and previous major version's indexes. When ES 2.0 is eventually released with Lucene 5.0, it will no longer support reading 3.x indexes (ES versions prior to 0.90).  Today, when updating to a later version of ES, if the indexes used are static (e.g. time series data that is archived), the index format is not upgraded.  (Only when there are enough updates to the old segments that trigger a merge to occur would they be rewritten). Therefore a user may be running on the newest version of ES, but still have very old Lucene indexes.\n\nThis issue is to add a new _upgrade api, which will force upgrade all index segments that are on versions older than the latest format.\n\nThe API would have the ability to trigger and monitor upgrades.  For example, to check the how much\nof an index is upgraded:\n\n```\nGET /myindex/_upgrade\n{\n    \"myindex\" : {\n        \"size_in_bytes\": 12345678,\n        \"size_to_upgrade_in_bytes\": 50000\n    }\n}\n```\n\nAnd to begin an upgrade:\n\n```\nPOST /myindex/_upgrade\n{\n    \"_shards\": {\n        \"total\": 10,\n        \"successful\": 5,\n        \"failed\":0\n    }\n}\n```\n","closed_by":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"performed_via_github_app":null}