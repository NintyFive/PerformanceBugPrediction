[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/182779383","html_url":"https://github.com/elastic/elasticsearch/issues/16550#issuecomment-182779383","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16550","id":182779383,"node_id":"MDEyOklzc3VlQ29tbWVudDE4Mjc3OTM4Mw==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2016-02-11T09:26:35Z","updated_at":"2016-02-11T09:26:35Z","author_association":"MEMBER","body":"This regression must have sneaked in during the parent/child refactoring that was part of ES 2.0...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/182789757","html_url":"https://github.com/elastic/elasticsearch/issues/16550#issuecomment-182789757","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16550","id":182789757,"node_id":"MDEyOklzc3VlQ29tbWVudDE4Mjc4OTc1Nw==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2016-02-11T10:06:39Z","updated_at":"2016-02-11T10:06:39Z","author_association":"MEMBER","body":"@gpstathis I see you already worked on tests, but I can't a pr or the actual fix. The actual fix should be easy, from the `HasChildQueryBuilder#doToQuery(...)` and `HasParentQueryBuilder#doToQuery(...)` we should pass the `Similarity` from `context#getSearchSimilarity()` to `LateParsingQuery` as an constructor argument, in `LateParsingQuery` the similarity should become a field too. Then in `LateParsingQuery#rewrite()` just pass this similarity to the `IndexSearcher` being created there.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/182909868","html_url":"https://github.com/elastic/elasticsearch/issues/16550#issuecomment-182909868","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16550","id":182909868,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MjkwOTg2OA==","user":{"login":"gpstathis","id":365914,"node_id":"MDQ6VXNlcjM2NTkxNA==","avatar_url":"https://avatars0.githubusercontent.com/u/365914?v=4","gravatar_id":"","url":"https://api.github.com/users/gpstathis","html_url":"https://github.com/gpstathis","followers_url":"https://api.github.com/users/gpstathis/followers","following_url":"https://api.github.com/users/gpstathis/following{/other_user}","gists_url":"https://api.github.com/users/gpstathis/gists{/gist_id}","starred_url":"https://api.github.com/users/gpstathis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gpstathis/subscriptions","organizations_url":"https://api.github.com/users/gpstathis/orgs","repos_url":"https://api.github.com/users/gpstathis/repos","events_url":"https://api.github.com/users/gpstathis/events{/privacy}","received_events_url":"https://api.github.com/users/gpstathis/received_events","type":"User","site_admin":false},"created_at":"2016-02-11T15:18:02Z","updated_at":"2016-02-11T15:18:02Z","author_association":"CONTRIBUTOR","body":"@martijnvg got caught up with #16594 which I stumbled across as I was creating the tests for this one. Let me take a look and see how far I can get today.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/182931952","html_url":"https://github.com/elastic/elasticsearch/issues/16550#issuecomment-182931952","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16550","id":182931952,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MjkzMTk1Mg==","user":{"login":"gpstathis","id":365914,"node_id":"MDQ6VXNlcjM2NTkxNA==","avatar_url":"https://avatars0.githubusercontent.com/u/365914?v=4","gravatar_id":"","url":"https://api.github.com/users/gpstathis","html_url":"https://github.com/gpstathis","followers_url":"https://api.github.com/users/gpstathis/followers","following_url":"https://api.github.com/users/gpstathis/following{/other_user}","gists_url":"https://api.github.com/users/gpstathis/gists{/gist_id}","starred_url":"https://api.github.com/users/gpstathis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gpstathis/subscriptions","organizations_url":"https://api.github.com/users/gpstathis/orgs","repos_url":"https://api.github.com/users/gpstathis/repos","events_url":"https://api.github.com/users/gpstathis/events{/privacy}","received_events_url":"https://api.github.com/users/gpstathis/received_events","type":"User","site_admin":false},"created_at":"2016-02-11T15:57:31Z","updated_at":"2016-02-11T15:57:31Z","author_association":"CONTRIBUTOR","body":"@martijnvg that was easy indeed. `SimilarityIT.testHasChildWithNonDefaultFieldSimilarity()` is passing now. `SimilarityIT.testHasChildWithNonDefaultGlobalSimilarity()` is passing but wrongly so because of #16594. Once that is fixed that unit test should still pass. Will open a PR.\n","performed_via_github_app":null}]