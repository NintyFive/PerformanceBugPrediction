[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/23078043","html_url":"https://github.com/elastic/elasticsearch/issues/3516#issuecomment-23078043","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3516","id":23078043,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMDc4MDQz","user":{"login":"deverton","id":287143,"node_id":"MDQ6VXNlcjI4NzE0Mw==","avatar_url":"https://avatars1.githubusercontent.com/u/287143?v=4","gravatar_id":"","url":"https://api.github.com/users/deverton","html_url":"https://github.com/deverton","followers_url":"https://api.github.com/users/deverton/followers","following_url":"https://api.github.com/users/deverton/following{/other_user}","gists_url":"https://api.github.com/users/deverton/gists{/gist_id}","starred_url":"https://api.github.com/users/deverton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deverton/subscriptions","organizations_url":"https://api.github.com/users/deverton/orgs","repos_url":"https://api.github.com/users/deverton/repos","events_url":"https://api.github.com/users/deverton/events{/privacy}","received_events_url":"https://api.github.com/users/deverton/received_events","type":"User","site_admin":false},"created_at":"2013-08-22T09:27:56Z","updated_at":"2013-08-22T09:29:39Z","author_association":"CONTRIBUTOR","body":"I think we might be seeing the same issue. I posted about it in the [mailing list](https://groups.google.com/forum/m/?hl=en#!topic/elasticsearch/N7_qZxQkUfM)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/23081662","html_url":"https://github.com/elastic/elasticsearch/issues/3516#issuecomment-23081662","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3516","id":23081662,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMDgxNjYy","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2013-08-22T10:47:09Z","updated_at":"2013-08-22T10:47:09Z","author_association":"MEMBER","body":"Keeping track of which parent id is referenced by a child document is tricky. Right now we just simply load all parent ids in memory of the new segments being made searchable during a refresh. If we need to keep track if a parent id is actually used than in a worst case scenario we need to go over all segments that contain child documents and check if a parent id being loaded is actually referenced by a child doc. This can slowdown the refresh significantly.\n\nTo mitigate the high memory usage, it is best to add more nodes to you cluster. The id cache size will then nicely be divided amongst the nodes in the cluster.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/49417568","html_url":"https://github.com/elastic/elasticsearch/issues/3516#issuecomment-49417568","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3516","id":49417568,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NDE3NTY4","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2014-07-18T10:37:14Z","updated_at":"2014-07-18T10:37:14Z","author_association":"MEMBER","body":"Closing this in favor for #6107. Once _parent field has been cut over to doc values the on heap memory size will be 0.\n\nInternally the id_cache has been removed since ES 1.1, and _parent field is now based on field data, also _parent field data is now less wasteful as before ES 1.1 with id cache.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/51238104","html_url":"https://github.com/elastic/elasticsearch/issues/3516#issuecomment-51238104","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3516","id":51238104,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjM4MTA0","user":{"login":"ostersc","id":732556,"node_id":"MDQ6VXNlcjczMjU1Ng==","avatar_url":"https://avatars2.githubusercontent.com/u/732556?v=4","gravatar_id":"","url":"https://api.github.com/users/ostersc","html_url":"https://github.com/ostersc","followers_url":"https://api.github.com/users/ostersc/followers","following_url":"https://api.github.com/users/ostersc/following{/other_user}","gists_url":"https://api.github.com/users/ostersc/gists{/gist_id}","starred_url":"https://api.github.com/users/ostersc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ostersc/subscriptions","organizations_url":"https://api.github.com/users/ostersc/orgs","repos_url":"https://api.github.com/users/ostersc/repos","events_url":"https://api.github.com/users/ostersc/events{/privacy}","received_events_url":"https://api.github.com/users/ostersc/received_events","type":"User","site_admin":false},"created_at":"2014-08-05T18:21:05Z","updated_at":"2014-08-05T18:21:05Z","author_association":"NONE","body":"We are using ES 1.2.1 and are still seeing linear growth of the id_cache as we insert documents which can be parents (even if there are no children in the index).\nCan you confirm the above statement: \"Internally the id_cache has been removed since ES 1.1...\" and give some insight into why this might be the case?\n","performed_via_github_app":null}]