[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/389311390","html_url":"https://github.com/elastic/elasticsearch/issues/30627#issuecomment-389311390","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30627","id":389311390,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTMxMTM5MA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-05-15T20:58:59Z","updated_at":"2018-05-15T20:58:59Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/389500305","html_url":"https://github.com/elastic/elasticsearch/issues/30627#issuecomment-389500305","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30627","id":389500305,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTUwMDMwNQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2018-05-16T12:27:05Z","updated_at":"2018-05-16T12:27:05Z","author_association":"MEMBER","body":"@keithmo Thanks for reporting this issue. Currently only if `upsert` is specified then pipelines are applied. Unfortunately also supporting ingest for `doc_as_upsert` isn't straight forward. Due to the fact that the upsert request is created on the node holding the primary shard and ingest always operates on the coordinating node (the first node that receives a request). With normal upsert the the upsert index request is known at the coordinating node and therefor an ingest pipeline can be applied.\r\n\r\nI'm not sure how to best fix this issue and will mark this issue with a discuss label. \r\nAlso as you may know, update requests don't support ingest too, for the same reason why `doc_as_upsert` doesn't work too.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/406380543","html_url":"https://github.com/elastic/elasticsearch/issues/30627#issuecomment-406380543","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30627","id":406380543,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNjM4MDU0Mw==","user":{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false},"created_at":"2018-07-19T18:59:47Z","updated_at":"2018-07-19T18:59:47Z","author_association":"CONTRIBUTOR","body":"Closing in favor of tracking on https://github.com/elastic/elasticsearch/issues/30724","performed_via_github_app":null}]