[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/465993565","html_url":"https://github.com/elastic/elasticsearch/issues/39237#issuecomment-465993565","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39237","id":465993565,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NTk5MzU2NQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-02-21T13:09:09Z","updated_at":"2019-02-21T13:09:09Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-analytics-geo","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/466040712","html_url":"https://github.com/elastic/elasticsearch/issues/39237#issuecomment-466040712","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39237","id":466040712,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NjA0MDcxMg==","user":{"login":"iverase","id":29038686,"node_id":"MDQ6VXNlcjI5MDM4Njg2","avatar_url":"https://avatars1.githubusercontent.com/u/29038686?v=4","gravatar_id":"","url":"https://api.github.com/users/iverase","html_url":"https://github.com/iverase","followers_url":"https://api.github.com/users/iverase/followers","following_url":"https://api.github.com/users/iverase/following{/other_user}","gists_url":"https://api.github.com/users/iverase/gists{/gist_id}","starred_url":"https://api.github.com/users/iverase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iverase/subscriptions","organizations_url":"https://api.github.com/users/iverase/orgs","repos_url":"https://api.github.com/users/iverase/repos","events_url":"https://api.github.com/users/iverase/events{/privacy}","received_events_url":"https://api.github.com/users/iverase/received_events","type":"User","site_admin":false},"created_at":"2019-02-21T15:24:05Z","updated_at":"2019-02-21T15:31:23Z","author_association":"CONTRIBUTOR","body":"Hi @hudsonb,\r\n\r\nThanks for you interest in Elasticsearch. \r\n\r\nI have tried locally to connect to an index created on version 6.5.1 and everything worked as expected. What do you mean with `upgrade`? \r\n\r\nNote that in version 6.6.0, the default geo_shape strategy was changed and it uses a faster and more precise indexing strategy based on Lucene BKD tree. Unfortunately, this strategy does not support querying by circles yet. \r\n\r\n\r\nIf you are creating a new index and you are interested in the former behaviour, you will need to set up the strategy, for example:\r\n\r\n```\r\ncurl -X PUT \"localhost:9200/example\" -H 'Content-Type: application/json' -d'\r\n{\r\n    \"mappings\": {\r\n        \"doc\": {\r\n            \"properties\": {\r\n                \"location\": {\r\n                    \"type\": \"geo_shape\",\r\n                     \"strategy\" : \"recursive\"\r\n                }\r\n            }\r\n        }\r\n    }\r\n}'\r\n```\r\n\r\nIf this does not solve your issue, could you please add the steps to reproduce it?\r\n\r\nI would like to recommend you to upgrade to version 6.6.1 as it contains some bug fixes.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/466064693","html_url":"https://github.com/elastic/elasticsearch/issues/39237#issuecomment-466064693","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39237","id":466064693,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NjA2NDY5Mw==","user":{"login":"hudsonb","id":1359976,"node_id":"MDQ6VXNlcjEzNTk5NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1359976?v=4","gravatar_id":"","url":"https://api.github.com/users/hudsonb","html_url":"https://github.com/hudsonb","followers_url":"https://api.github.com/users/hudsonb/followers","following_url":"https://api.github.com/users/hudsonb/following{/other_user}","gists_url":"https://api.github.com/users/hudsonb/gists{/gist_id}","starred_url":"https://api.github.com/users/hudsonb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudsonb/subscriptions","organizations_url":"https://api.github.com/users/hudsonb/orgs","repos_url":"https://api.github.com/users/hudsonb/repos","events_url":"https://api.github.com/users/hudsonb/events{/privacy}","received_events_url":"https://api.github.com/users/hudsonb/received_events","type":"User","site_admin":false},"created_at":"2019-02-21T16:24:12Z","updated_at":"2019-02-21T16:24:12Z","author_association":"NONE","body":"Sorry, by upgrading I meant installing elasticsearch 6.6.0, updating our type mappings to take advantage of the faster and more precise BKD trees for geo_shapes, and reindexing our data.\r\n\r\n> Note that in version 6.6.0, the default geo_shape strategy was changed and it uses a faster and more precise indexing strategy based on Lucene BKD tree.\r\n\r\nThis was our primary motivation for upgrading.\r\n\r\n> Unfortunately, this strategy does not support querying by circles yet.\r\n\r\nThis was not mentioned in Breaking Changes so it caught us off guard. The geo_shape query docs do say that they work with GeoJSON shapes, which doesn't have the concept of circle so maybe we should have expected this.\r\n\r\n> If you are creating a new index and you are interested in the former behaviour, you will need to set up the strategy\r\n\r\nBut then we'd lose out on the most exciting feature of 6.6 =). We've worked around the issue by converting circles to polygons, using the polygons for geo_shape queries.\r\n\r\n> I would like to recommend you to upgrade to version 6.6.1 as it contains some bug fixes.\r\n\r\nWill do\r\n\r\n+1 for adding support for circle geo_shape queries to BKD based geo_shapes.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/491554499","html_url":"https://github.com/elastic/elasticsearch/issues/39237#issuecomment-491554499","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39237","id":491554499,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MTU1NDQ5OQ==","user":{"login":"sumpton","id":1545977,"node_id":"MDQ6VXNlcjE1NDU5Nzc=","avatar_url":"https://avatars0.githubusercontent.com/u/1545977?v=4","gravatar_id":"","url":"https://api.github.com/users/sumpton","html_url":"https://github.com/sumpton","followers_url":"https://api.github.com/users/sumpton/followers","following_url":"https://api.github.com/users/sumpton/following{/other_user}","gists_url":"https://api.github.com/users/sumpton/gists{/gist_id}","starred_url":"https://api.github.com/users/sumpton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sumpton/subscriptions","organizations_url":"https://api.github.com/users/sumpton/orgs","repos_url":"https://api.github.com/users/sumpton/repos","events_url":"https://api.github.com/users/sumpton/events{/privacy}","received_events_url":"https://api.github.com/users/sumpton/received_events","type":"User","site_admin":false},"created_at":"2019-05-12T00:38:10Z","updated_at":"2019-05-12T02:43:24Z","author_association":"NONE","body":"@hudsonb is there something on the Internet you could point me to to help me learn how to convert circles to polygons? Our input forms take a location (point) and a radius and was working brilliantly in Elasticsearch.\r\n\r\nWe query both ways for stored circles that contain a point and for points that are contained in the query.\r\n\r\nAre you using something like http://turfjs.org/docs/#circle","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/491780299","html_url":"https://github.com/elastic/elasticsearch/issues/39237#issuecomment-491780299","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39237","id":491780299,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MTc4MDI5OQ==","user":{"login":"hudsonb","id":1359976,"node_id":"MDQ6VXNlcjEzNTk5NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1359976?v=4","gravatar_id":"","url":"https://api.github.com/users/hudsonb","html_url":"https://github.com/hudsonb","followers_url":"https://api.github.com/users/hudsonb/followers","following_url":"https://api.github.com/users/hudsonb/following{/other_user}","gists_url":"https://api.github.com/users/hudsonb/gists{/gist_id}","starred_url":"https://api.github.com/users/hudsonb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudsonb/subscriptions","organizations_url":"https://api.github.com/users/hudsonb/orgs","repos_url":"https://api.github.com/users/hudsonb/repos","events_url":"https://api.github.com/users/hudsonb/events{/privacy}","received_events_url":"https://api.github.com/users/hudsonb/received_events","type":"User","site_admin":false},"created_at":"2019-05-13T11:13:31Z","updated_at":"2019-05-13T11:13:31Z","author_association":"NONE","body":"JTS can generate them for you, see [GeometricShapeFactory.createCircle](https://locationtech.github.io/jts/javadoc/org/locationtech/jts/util/GeometricShapeFactory.html#createCircle--).\r\n\r\nReplicating what Turf.js circle does is fairly easy. I've been porting Turf.js over to Kotlin (unreleased) and have circle implemented if you want to take a look at how it's implemented: https://github.com/hudsonb/turf.kt","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/491915163","html_url":"https://github.com/elastic/elasticsearch/issues/39237#issuecomment-491915163","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39237","id":491915163,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MTkxNTE2Mw==","user":{"login":"sumpton","id":1545977,"node_id":"MDQ6VXNlcjE1NDU5Nzc=","avatar_url":"https://avatars0.githubusercontent.com/u/1545977?v=4","gravatar_id":"","url":"https://api.github.com/users/sumpton","html_url":"https://github.com/sumpton","followers_url":"https://api.github.com/users/sumpton/followers","following_url":"https://api.github.com/users/sumpton/following{/other_user}","gists_url":"https://api.github.com/users/sumpton/gists{/gist_id}","starred_url":"https://api.github.com/users/sumpton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sumpton/subscriptions","organizations_url":"https://api.github.com/users/sumpton/orgs","repos_url":"https://api.github.com/users/sumpton/repos","events_url":"https://api.github.com/users/sumpton/events{/privacy}","received_events_url":"https://api.github.com/users/sumpton/received_events","type":"User","site_admin":false},"created_at":"2019-05-13T17:31:59Z","updated_at":"2019-05-13T17:31:59Z","author_association":"NONE","body":"Thanks for taking the time to help me. I had not looked at Kotlin code before and not think all functions should be \"fun\".\r\n\r\nI am working in Node and Turf is working for me for now.\r\n\r\nI noticed you default to 64 steps. Do you happen to know if query performance in Elasticsearch in affected by the size of the coordinates array? I don't require a very accurate circle, but I don't know how many steps I should use?\r\n\r\nDo you happen to know if the Elasticsearch implementation of circle was actually a polygon?\r\n\r\nI am surprised that the removal of Circle is not a breaking change since it was documented.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/492303356","html_url":"https://github.com/elastic/elasticsearch/issues/39237#issuecomment-492303356","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39237","id":492303356,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MjMwMzM1Ng==","user":{"login":"hudsonb","id":1359976,"node_id":"MDQ6VXNlcjEzNTk5NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1359976?v=4","gravatar_id":"","url":"https://api.github.com/users/hudsonb","html_url":"https://github.com/hudsonb","followers_url":"https://api.github.com/users/hudsonb/followers","following_url":"https://api.github.com/users/hudsonb/following{/other_user}","gists_url":"https://api.github.com/users/hudsonb/gists{/gist_id}","starred_url":"https://api.github.com/users/hudsonb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudsonb/subscriptions","organizations_url":"https://api.github.com/users/hudsonb/orgs","repos_url":"https://api.github.com/users/hudsonb/repos","events_url":"https://api.github.com/users/hudsonb/events{/privacy}","received_events_url":"https://api.github.com/users/hudsonb/received_events","type":"User","site_admin":false},"created_at":"2019-05-14T16:07:22Z","updated_at":"2019-05-14T16:07:39Z","author_association":"NONE","body":"> I am working in Node and Turf is working for me for now.\r\n\r\nSorry I assumed you were on the JVM, yes I'd use turf.js in that case\r\n\r\n> I noticed you default to 64 steps. Do you happen to know if query performance in Elasticsearch in affected by the size of the coordinates array? I don't require a very accurate circle, but I don't know how many steps I should use?\r\n\r\nI can't say I know for sure but I would think at some level it must be. Determining if a polygon contains a point becomes more CPU intensive as the complexity of the polygon increases. I default to 64 simply because that's the default in turf.js. You can use fewer points if you don't need a lot of accuracy, just note that you are decreasing the area of the circle so you may miss some results.\r\n\r\n> Do you happen to know if the Elasticsearch implementation of circle was actually a polygon?\r\n\r\nNot sure, I haven't looked into it.\r\n\r\n> I am surprised that the removal of Circle is not a breaking change since it was documented.\r\n\r\nCaught me off guard for sure!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/492856780","html_url":"https://github.com/elastic/elasticsearch/issues/39237#issuecomment-492856780","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39237","id":492856780,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5Mjg1Njc4MA==","user":{"login":"sumpton","id":1545977,"node_id":"MDQ6VXNlcjE1NDU5Nzc=","avatar_url":"https://avatars0.githubusercontent.com/u/1545977?v=4","gravatar_id":"","url":"https://api.github.com/users/sumpton","html_url":"https://github.com/sumpton","followers_url":"https://api.github.com/users/sumpton/followers","following_url":"https://api.github.com/users/sumpton/following{/other_user}","gists_url":"https://api.github.com/users/sumpton/gists{/gist_id}","starred_url":"https://api.github.com/users/sumpton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sumpton/subscriptions","organizations_url":"https://api.github.com/users/sumpton/orgs","repos_url":"https://api.github.com/users/sumpton/repos","events_url":"https://api.github.com/users/sumpton/events{/privacy}","received_events_url":"https://api.github.com/users/sumpton/received_events","type":"User","site_admin":false},"created_at":"2019-05-15T23:09:01Z","updated_at":"2019-05-15T23:09:01Z","author_association":"NONE","body":"Thank you again @hudsonb. I appreciate your help.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/574245711","html_url":"https://github.com/elastic/elasticsearch/issues/39237#issuecomment-574245711","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39237","id":574245711,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NDI0NTcxMQ==","user":{"login":"lowwa132","id":3715048,"node_id":"MDQ6VXNlcjM3MTUwNDg=","avatar_url":"https://avatars3.githubusercontent.com/u/3715048?v=4","gravatar_id":"","url":"https://api.github.com/users/lowwa132","html_url":"https://github.com/lowwa132","followers_url":"https://api.github.com/users/lowwa132/followers","following_url":"https://api.github.com/users/lowwa132/following{/other_user}","gists_url":"https://api.github.com/users/lowwa132/gists{/gist_id}","starred_url":"https://api.github.com/users/lowwa132/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lowwa132/subscriptions","organizations_url":"https://api.github.com/users/lowwa132/orgs","repos_url":"https://api.github.com/users/lowwa132/repos","events_url":"https://api.github.com/users/lowwa132/events{/privacy}","received_events_url":"https://api.github.com/users/lowwa132/received_events","type":"User","site_admin":false},"created_at":"2020-01-14T16:02:10Z","updated_at":"2020-01-14T16:02:10Z","author_association":"NONE","body":"What's the status of this issue? Is circle back in later version of Elasticsearch, or planned to be?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/654599732","html_url":"https://github.com/elastic/elasticsearch/issues/39237#issuecomment-654599732","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39237","id":654599732,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDU5OTczMg==","user":{"login":"bramford","id":5615898,"node_id":"MDQ6VXNlcjU2MTU4OTg=","avatar_url":"https://avatars3.githubusercontent.com/u/5615898?v=4","gravatar_id":"","url":"https://api.github.com/users/bramford","html_url":"https://github.com/bramford","followers_url":"https://api.github.com/users/bramford/followers","following_url":"https://api.github.com/users/bramford/following{/other_user}","gists_url":"https://api.github.com/users/bramford/gists{/gist_id}","starred_url":"https://api.github.com/users/bramford/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bramford/subscriptions","organizations_url":"https://api.github.com/users/bramford/orgs","repos_url":"https://api.github.com/users/bramford/repos","events_url":"https://api.github.com/users/bramford/events{/privacy}","received_events_url":"https://api.github.com/users/bramford/received_events","type":"User","site_admin":false},"created_at":"2020-07-07T04:56:48Z","updated_at":"2020-07-07T04:56:48Z","author_association":"NONE","body":"@lowwa132 raises a valid question. I'm using ES latest (7.8) and still getting `circle geometry is not supported` on the \"new\" default `geo_shape` indexing strategy (said to be BKD tree).\r\n\r\nThe docs say\r\n> For the default Indexing approach circles should be approximated using a POLYGON\r\n\r\n@iverase Is this just a workaround while we wait for native `Circle` support in the default strategy or is the goal to deprecate the `Circle` type? If we're just waiting, it would be helpful to link the feature request to this issue for transparency.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/654712021","html_url":"https://github.com/elastic/elasticsearch/issues/39237#issuecomment-654712021","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39237","id":654712021,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDcxMjAyMQ==","user":{"login":"iverase","id":29038686,"node_id":"MDQ6VXNlcjI5MDM4Njg2","avatar_url":"https://avatars1.githubusercontent.com/u/29038686?v=4","gravatar_id":"","url":"https://api.github.com/users/iverase","html_url":"https://github.com/iverase","followers_url":"https://api.github.com/users/iverase/followers","following_url":"https://api.github.com/users/iverase/following{/other_user}","gists_url":"https://api.github.com/users/iverase/gists{/gist_id}","starred_url":"https://api.github.com/users/iverase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iverase/subscriptions","organizations_url":"https://api.github.com/users/iverase/orgs","repos_url":"https://api.github.com/users/iverase/repos","events_url":"https://api.github.com/users/iverase/events{/privacy}","received_events_url":"https://api.github.com/users/iverase/received_events","type":"User","site_admin":false},"created_at":"2020-07-07T09:08:35Z","updated_at":"2020-07-07T09:08:35Z","author_association":"CONTRIBUTOR","body":"@bramford we currently only support circles natively at search time. For indexing you need to approximate to a polygon as stated in the docs, we are currently not working in adding it natively. We added a ingest circle processor to help:\r\n\r\nhttps://www.elastic.co/guide/en/elasticsearch/reference/master/ingest-circle-processor.html","performed_via_github_app":null}]