[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/684846032","html_url":"https://github.com/elastic/elasticsearch/issues/61780#issuecomment-684846032","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61780","id":684846032,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDg0NjAzMg==","user":{"login":"jloleysens","id":8155004,"node_id":"MDQ6VXNlcjgxNTUwMDQ=","avatar_url":"https://avatars3.githubusercontent.com/u/8155004?v=4","gravatar_id":"","url":"https://api.github.com/users/jloleysens","html_url":"https://github.com/jloleysens","followers_url":"https://api.github.com/users/jloleysens/followers","following_url":"https://api.github.com/users/jloleysens/following{/other_user}","gists_url":"https://api.github.com/users/jloleysens/gists{/gist_id}","starred_url":"https://api.github.com/users/jloleysens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jloleysens/subscriptions","organizations_url":"https://api.github.com/users/jloleysens/orgs","repos_url":"https://api.github.com/users/jloleysens/repos","events_url":"https://api.github.com/users/jloleysens/events{/privacy}","received_events_url":"https://api.github.com/users/jloleysens/received_events","type":"User","site_admin":false},"created_at":"2020-09-01T13:17:32Z","updated_at":"2020-09-01T13:17:32Z","author_association":"NONE","body":"Hi @rocky1234 ! Would you mind providing more detailed instructions for how to reproduce the issue you are seeing. Would you also please provide the version of ES you are using.\r\n\r\nIt could also be the case that `QueryBuilders.matchQuery` could be the builder you are looking for? ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/684846332","html_url":"https://github.com/elastic/elasticsearch/issues/61780#issuecomment-684846332","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61780","id":684846332,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDg0NjMzMg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-09-01T13:17:58Z","updated_at":"2020-09-01T13:17:58Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features (:Core/Features/Java High Level REST Client)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/684858337","html_url":"https://github.com/elastic/elasticsearch/issues/61780#issuecomment-684858337","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61780","id":684858337,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDg1ODMzNw==","user":{"login":"rocky1234","id":15325069,"node_id":"MDQ6VXNlcjE1MzI1MDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15325069?v=4","gravatar_id":"","url":"https://api.github.com/users/rocky1234","html_url":"https://github.com/rocky1234","followers_url":"https://api.github.com/users/rocky1234/followers","following_url":"https://api.github.com/users/rocky1234/following{/other_user}","gists_url":"https://api.github.com/users/rocky1234/gists{/gist_id}","starred_url":"https://api.github.com/users/rocky1234/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rocky1234/subscriptions","organizations_url":"https://api.github.com/users/rocky1234/orgs","repos_url":"https://api.github.com/users/rocky1234/repos","events_url":"https://api.github.com/users/rocky1234/events{/privacy}","received_events_url":"https://api.github.com/users/rocky1234/received_events","type":"User","site_admin":false},"created_at":"2020-09-01T13:35:53Z","updated_at":"2020-09-01T15:34:58Z","author_association":"NONE","body":"Hi\r\n\r\nI am using ES 7.8 with dependency 7.1.1 in pom.xml with JDK 1.8. I am trying to perform the search on the whole document rather than on specific fields. SO I am not using QueryBuilders.matchQuery or QueryBuilders.multiMatchQuery. This issue occurs when I try to search singular field in my searchbox whereas plural is present in ES. For instance:\r\n\r\nI search: weird\r\nStored in document: weirds\r\n\r\nNo output is shown for it. This is for both the cases:  QueryBuilders.simpleQueryStringQuery(text) and QueryBuilder matchQueryBuilder = QueryBuilders.queryStringQuery(text).fuzziness(Fuzziness.AUTO);\r\n\r\nCode:\r\n\r\n\r\n\t\t\t\t//QueryBuilder matchQueryBuilder = QueryBuilders.simpleQueryStringQuery(text).flags();\r\n\t\t       QueryBuilder matchQueryBuilder = QueryBuilders.queryStringQuery(text).fuzziness(Fuzziness.AUTO);\r\n\t\t\t     \r\n\t\t        SearchSourceBuilder sourceBuilder = new SearchSourceBuilder();\r\n\t\t        sourceBuilder.query(matchQueryBuilder);\r\n\t\t        sourceBuilder.from(0);\r\n\t\t        sourceBuilder.size(5); \t\t\t\t\r\n\t\t        \r\n\t\t        sourceBuilder.timeout(new TimeValue(60, TimeUnit.SECONDS));\r\n\t\t \r\n\t\t        \r\n\t\t        SearchRequest searchRequest = new SearchRequest();\r\n\t\t        searchRequest.source(sourceBuilder);\r\n\t\t\r\n\t\t        \r\n\t\t        SearchResponse searchResponse = client.search(searchRequest,RequestOptions.DEFAULT);\r\n\t\t        for(SearchHit searchHit : searchResponse.getHits().getHits()){\r\n\r\n//Rest of the code\r\n}\r\n\r\nScreenshot of ES:\r\n\r\n![image](https://user-images.githubusercontent.com/15325069/91857868-23494a80-ec86-11ea-81cb-141cdf1645cd.png)\r\n\r\n\r\nPlease let me know if anything else is required","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/685063536","html_url":"https://github.com/elastic/elasticsearch/issues/61780#issuecomment-685063536","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61780","id":685063536,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTA2MzUzNg==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2020-09-01T18:46:19Z","updated_at":"2020-09-01T18:46:19Z","author_association":"MEMBER","body":"Hi @rocky1234 , setting `fuzziness(Fuzziness.AUTO)` in the query string is not enough. This option is to set the implicit distance that should be used when the fuzziness operator (`~`) is used in the query. So if you want to search fuzzy terms with the query_string you'll need to search for `QueryBuilders.queryStringQuery(\"weird~\")`.\r\nSince there is no bug here I hope you don't mind if I close the issue. We reserve github for verified bugs and feature request so if you have any further questions regarding the behavior please open a topic in the [discuss forum](https://discuss.elastic.co/c/elastic-stack/elasticsearch/6).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/685318735","html_url":"https://github.com/elastic/elasticsearch/issues/61780#issuecomment-685318735","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61780","id":685318735,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTMxODczNQ==","user":{"login":"rocky1234","id":15325069,"node_id":"MDQ6VXNlcjE1MzI1MDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15325069?v=4","gravatar_id":"","url":"https://api.github.com/users/rocky1234","html_url":"https://github.com/rocky1234","followers_url":"https://api.github.com/users/rocky1234/followers","following_url":"https://api.github.com/users/rocky1234/following{/other_user}","gists_url":"https://api.github.com/users/rocky1234/gists{/gist_id}","starred_url":"https://api.github.com/users/rocky1234/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rocky1234/subscriptions","organizations_url":"https://api.github.com/users/rocky1234/orgs","repos_url":"https://api.github.com/users/rocky1234/repos","events_url":"https://api.github.com/users/rocky1234/events{/privacy}","received_events_url":"https://api.github.com/users/rocky1234/received_events","type":"User","site_admin":false},"created_at":"2020-09-02T05:56:47Z","updated_at":"2020-09-02T06:26:16Z","author_association":"NONE","body":"Hi @jimczi ,\r\n\r\nAs I have already mentioned:\r\n\r\nIf I use ~ with my term or ~1, it starts searching some other index stored in my local machine again which does not even have that term. And it then throws the error since the other index do not have the fields which current index have. That is the reason I opened the bug.\r\n\r\nFor further testing, best I can do is delete that other index and perform the search on the current index. \r\n\r\nJust an update:\r\nWhen I removed the other index and then searched, it worked fine. But\r\n\r\nQueryBuilder matchQueryBuilder = QueryBuilders.simpleQueryStringQuery(text+\"~\");\r\n\r\nThis query is still searching some other document which does not contain the text and is in the same index\r\n\r\nAnd this is showing the error\r\n\r\nQueryBuilder matchQueryBuilder = QueryBuilders.simpleQueryStringQuery(text+~);","performed_via_github_app":null}]