[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/48728307","html_url":"https://github.com/elastic/elasticsearch/issues/6832#issuecomment-48728307","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6832","id":48728307,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzI4MzA3","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-07-11T13:14:22Z","updated_at":"2014-07-11T13:14:22Z","author_association":"CONTRIBUTOR","body":"Hi @tiran \n\nI've just tested this out by setting a 60 second `discovery.zen.ping_timeout`, starting a node, then resetting the time into the future.  Elasticsearch waited for the full 60 seconds before continuing to elect itself as master. So I don't think that NTP was the issue here.  For some reason, your node didn't get a response from the existing cluster within the default timeout of 3s.\n\nLooking at your logs, you are not setting `ulimit -l` correctly, so your `mlockall` setting is not being applied.  I assume this is the same on your other nodes, so it is quite likely that they weren't responding promptly because of long GCs.  This could be the reason for the timeout being exceeded.\n\nAlso, with a total of 5 nodes (or do you have a total of 6?) you should be setting `minimum_master_nodes` to a majority, ie 3 (or 4 if you have 6 nodes).  If you had had that setting, then your restarted node would continue pinging until it could see enough master-eligible nodes, instead of forming a cluster by itself.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/48728583","html_url":"https://github.com/elastic/elasticsearch/issues/6832#issuecomment-48728583","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6832","id":48728583,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzI4NTgz","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-07-11T13:17:12Z","updated_at":"2014-07-11T13:17:12Z","author_association":"CONTRIBUTOR","body":"If I've misunderstood something here, please feel free to reopen\n","performed_via_github_app":null}]