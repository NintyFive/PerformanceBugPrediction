{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295/events","html_url":"https://github.com/elastic/elasticsearch/issues/30295","id":319155638,"node_id":"MDU6SXNzdWUzMTkxNTU2Mzg=","number":30295,"title":"[CI] Packaging tests fail with connection failure on opensuse and sles","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"labels":[{"id":114977275,"node_id":"MDU6TGFiZWwxMTQ5NzcyNzU=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Packaging","name":":Delivery/Packaging","color":"0e8a16","default":false,"description":"RPM and deb packaging, tar and zip archives, shell and batch scripts"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":39,"created_at":"2018-05-01T09:31:49Z","updated_at":"2020-11-11T21:56:50Z","closed_at":"2019-08-16T17:23:36Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+packaging-tests/2645/console\r\n\r\nREPRODUCE WITH line says:\r\n\r\n```./gradlew :x-pack:qa:vagrant:vagrantOpensuse42#batsPackagingTest -Dtests.seed=7E7AE0563BF3B4A3 ```\r\n\r\nThe main problem seems to be\r\n\r\n```\r\n07:47:13 # Connection failure to: http://127.0.0.1:9200/_xpack/security/user/kibana/_password?pretty failed: Read timed out\r\n```\r\n\r\nUnfortunately I can't find the server logs so can't see any more detail than this. Here's the relevant bit of the CI log:\r\n\r\n```\r\n07:46:01 ok 15 [RPM BOOTSTRAP PASSWORD] stop Elasticsearch\r\n07:47:12 not ok 16 [TAR SETUP PASSWORD] test auto generated passwords\r\n07:47:12 not ok 16 [TAR SETUP PASSWORD] test auto generated passwords\r\n07:47:12 # (in test file /project/build/packaging/bats/tests/30_tar_setup_passwords.bats, line 60)\r\n07:47:12 # (in test file /project/build/packaging/bats/tests/30_tar_setup_passwords.bats, line 60)\r\n07:47:12 #   `false' failed\r\n07:47:12 #   `false' failed\r\n07:47:12 # Unpacking tarball to /tmp/elasticsearch\r\n07:47:12 # checking for bin file elasticsearch-certgen\r\n07:47:12 # checking for bin file elasticsearch-certgen.bat\r\n07:47:12 # checking for bin file elasticsearch-certutil\r\n07:47:12 # checking for bin file elasticsearch-certutil.bat\r\n07:47:12 # checking for bin file elasticsearch-croneval\r\n07:47:12 # checking for bin file elasticsearch-croneval.bat\r\n07:47:12 # checking for bin file elasticsearch-migrate\r\n07:47:12 # checking for bin file elasticsearch-migrate.bat\r\n07:47:12 # checking for bin file elasticsearch-saml-metadata\r\n07:47:12 # checking for bin file elasticsearch-saml-metadata.bat\r\n07:47:12 # checking for bin file elasticsearch-setup-passwords\r\n07:47:12 # checking for bin file elasticsearch-setup-passwords.bat\r\n07:47:12 # checking for bin file elasticsearch-sql-cli\r\n07:47:12 # checking for bin file elasticsearch-sql-cli.bat\r\n07:47:13 # checking for bin file elasticsearch-sql-cli-7.0.0-alpha1-SNAPSHOT.jar\r\n07:47:13 # checking for bin file elasticsearch-syskeygen\r\n07:47:13 # checking for bin file elasticsearch-syskeygen.bat\r\n07:47:13 # checking for bin file elasticsearch-users\r\n07:47:13 # checking for bin file elasticsearch-users.bat\r\n07:47:13 # checking for bin file x-pack-env\r\n07:47:13 # checking for bin file x-pack-env.bat\r\n07:47:13 # checking for bin file x-pack-security-env\r\n07:47:13 # checking for bin file x-pack-security-env.bat\r\n07:47:13 # checking for bin file x-pack-watcher-env\r\n07:47:13 # checking for bin file x-pack-watcher-env.bat\r\n07:47:13 # elasticsearch\r\n07:47:13 # elasticsearch.bat\r\n07:47:13 # elasticsearch-certgen\r\n07:47:13 # elasticsearch-certgen.bat\r\n07:47:13 # elasticsearch-certutil\r\n07:47:13 # elasticsearch-certutil.bat\r\n07:47:13 # elasticsearch-croneval\r\n07:47:13 # elasticsearch-croneval.bat\r\n07:47:13 # elasticsearch-env\r\n07:47:13 # elasticsearch-env.bat\r\n07:47:13 # elasticsearch-keystore\r\n07:47:13 # elasticsearch-keystore.bat\r\n07:47:13 # elasticsearch-migrate\r\n07:47:13 # elasticsearch-migrate.bat\r\n07:47:13 # elasticsearch-plugin\r\n07:47:13 # elasticsearch-plugin.bat\r\n07:47:13 # elasticsearch-saml-metadata\r\n07:47:13 # elasticsearch-saml-metadata.bat\r\n07:47:13 # elasticsearch-service.bat\r\n07:47:13 # elasticsearch-service-mgr.exe\r\n07:47:13 # elasticsearch-service-x64.exe\r\n07:47:13 # elasticsearch-setup-passwords\r\n07:47:13 # elasticsearch-setup-passwords.bat\r\n07:47:13 # elasticsearch-sql-cli\r\n07:47:13 # elasticsearch-sql-cli-7.0.0-alpha1-SNAPSHOT.jar\r\n07:47:13 # elasticsearch-sql-cli.bat\r\n07:47:13 # elasticsearch-syskeygen\r\n07:47:13 # elasticsearch-syskeygen.bat\r\n07:47:13 # Unpacking tarball to /tmp/elasticsearch\r\n07:47:13 # checking for bin file elasticsearch-certgen\r\n07:47:13 # checking for bin file elasticsearch-certgen.bat\r\n07:47:13 # checking for bin file elasticsearch-certutil\r\n07:47:13 # checking for bin file elasticsearch-certutil.bat\r\n07:47:13 # checking for bin file elasticsearch-croneval\r\n07:47:13 # checking for bin file elasticsearch-croneval.bat\r\n07:47:13 # checking for bin file elasticsearch-migrate\r\n07:47:13 # checking for bin file elasticsearch-migrate.bat\r\n07:47:13 # checking for bin file elasticsearch-saml-metadata\r\n07:47:13 # checking for bin file elasticsearch-saml-metadata.bat\r\n07:47:13 # checking for bin file elasticsearch-setup-passwords\r\n07:47:13 # checking for bin file elasticsearch-setup-passwords.bat\r\n07:47:13 # checking for bin file elasticsearch-sql-cli\r\n07:47:13 # checking for bin file elasticsearch-sql-cli.bat\r\n07:47:13 # checking for bin file elasticsearch-sql-cli-7.0.0-alpha1-SNAPSHOT.jar\r\n07:47:13 # checking for bin file elasticsearch-syskeygen\r\n07:47:13 # checking for bin file elasticsearch-syskeygen.bat\r\n07:47:13 # checking for bin file elasticsearch-users\r\n07:47:13 # checking for bin file elasticsearch-users.bat\r\n07:47:13 # checking for bin file x-pack-env\r\n07:47:13 # checking for bin file x-pack-env.bat\r\n07:47:13 # checking for bin file x-pack-security-env\r\n07:47:13 # checking for bin file x-pack-security-env.bat\r\n07:47:13 # checking for bin file x-pack-watcher-env\r\n07:47:13 # checking for bin file x-pack-watcher-env.bat\r\n07:47:13 # elasticsearch\r\n07:47:13 # elasticsearch.bat\r\n07:47:13 # elasticsearch-certgen\r\n07:47:13 # elasticsearch-certgen.bat\r\n07:47:13 # elasticsearch-certutil\r\n07:47:13 # elasticsearch-certutil.bat\r\n07:47:13 # elasticsearch-croneval\r\n07:47:13 # elasticsearch-croneval.bat\r\n07:47:13 # elasticsearch-env\r\n07:47:13 # elasticsearch-env.bat\r\n07:47:13 # elasticsearch-keystore\r\n07:47:13 # elasticsearch-keystore.bat\r\n07:47:13 # elasticsearch-migrate\r\n07:47:13 # elasticsearch-migrate.bat\r\n07:47:13 # elasticsearch-plugin\r\n07:47:13 # elasticsearch-plugin.bat\r\n07:47:13 # elasticsearch-saml-metadata\r\n07:47:13 # elasticsearch-saml-metadata.bat\r\n07:47:13 # elasticsearch-service.bat\r\n07:47:13 # elasticsearch-service-mgr.exe\r\n07:47:13 # elasticsearch-service-x64.exe\r\n07:47:13 # elasticsearch-setup-passwords\r\n07:47:13 # elasticsearch-setup-passwords.bat\r\n07:47:13 # elasticsearch-sql-cli\r\n07:47:13 # elasticsearch-sql-cli-7.0.0-alpha1-SNAPSHOT.jar\r\n07:47:13 # elasticsearch-sql-cli.bat\r\n07:47:13 # elasticsearch-syskeygen\r\n07:47:13 # elasticsearch-syskeygen.bat\r\n07:47:13 # el# el\r\n07:47:13 asticsearch-translog\r\n07:47:13 # elasticsearch-translog.bat\r\n07:47:13 # elasticsearch-users\r\n07:47:13 # elasticsearch-users.bat\r\n07:47:13 # x-pack-env\r\n07:47:13 # x-pack-env.bat\r\n07:47:13 # x-pack-security-env\r\n07:47:13 # x-pack-security-env.bat\r\n07:47:13 # x-pack-watcher-env\r\n07:47:13 # x-pack-watcher-env.bat\r\n07:47:13 # Expected x-pack elasticsearch-setup-passwords tool exit code to be zero\r\n07:47:13 # Initiating the setup of passwords for reserved users elastic,kibana,logstash_system,beats_system.\r\n07:47:13 # The passwords will be randomly generated and printed to the console.\r\n07:47:13 # Please confirm that you would like to continue [y/N]\r\n07:47:13 # \r\n07:47:13 # \r\n07:47:13 # Connection failure to: http://127.0.0.1:9200/_xpack/security/user/kibana/_password?pretty failed: Read timed out\r\n07:47:13 # \r\n07:47:13 # ERROR: Failed to set password for user [kibana].\r\n07:47:13 asticsearch-translog\r\n07:47:13 # elasticsearch-translog.bat\r\n07:47:13 # elasticsearch-users\r\n07:47:13 # elasticsearch-users.bat\r\n07:47:13 # x-pack-env\r\n07:47:13 # x-pack-env.bat\r\n07:47:13 # x-pack-security-env\r\n07:47:13 # x-pack-security-env.bat\r\n07:47:13 # x-pack-watcher-env\r\n07:47:13 # x-pack-watcher-env.bat\r\n07:47:13 # Expected x-pack elasticsearch-setup-passwords tool exit code to be zero\r\n07:47:13 # Initiating the setup of passwords for reserved users elastic,kibana,logstash_system,beats_system.\r\n07:47:13 # The passwords will be randomly generated and printed to the console.\r\n07:47:13 # Please confirm that you would like to continue [y/N]\r\n07:47:13 # \r\n07:47:13 # \r\n07:47:13 # Connection failure to: http://127.0.0.1:9200/_xpack/security/user/kibana/_password?pretty failed: Read timed out\r\n07:47:13 # \r\n07:47:13 # ERROR: Failed to set password for user [kibana].\r\n```\r\n","closed_by":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"performed_via_github_app":null}