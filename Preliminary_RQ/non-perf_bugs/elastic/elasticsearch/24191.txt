{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/24191","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24191/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24191/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24191/events","html_url":"https://github.com/elastic/elasticsearch/issues/24191","id":222770628,"node_id":"MDU6SXNzdWUyMjI3NzA2Mjg=","number":24191,"title":"DiscoveryWithServiceDisruptionsIT.testIsolatedUnicastNodes: failed to reach a stable cluster of [4] nodes","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"labels":[{"id":836504707,"node_id":"MDU6TGFiZWw4MzY1MDQ3MDc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Distributed","name":":Distributed/Distributed","color":"0e8a16","default":false,"description":"A catch all label for anything in the Distributed Area. If you aren't sure, use this one."},{"id":60445228,"node_id":"MDU6TGFiZWw2MDQ0NTIyOA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest","name":">test","color":"5319e7","default":false,"description":"Issues or PRs that are addressing/adding tests"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"assignees":[{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2017-04-19T15:08:05Z","updated_at":"2018-02-13T19:53:42Z","closed_at":"2017-04-24T12:39:51Z","author_association":"MEMBER","active_lock_reason":null,"body":"Example build: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+5.1+multijob-unix-compatibility/os=debian/206/consoleFull\r\n\r\nException trace:\r\n\r\n```\r\nThrowable #1: java.lang.AssertionError: failed to reach a stable cluster of [4] nodes. Tried via [node_t2]. last cluster state:\r\n   > cluster uuid: uCBnqun0Rt6pT9075k3bgQ\r\n   > version: 4\r\n   > state uuid: QbFJ3nVbTPOdsXs8yVJHhw\r\n   > from_diff: false\r\n   > meta data version: 1\r\n   > nodes: \r\n   >    {node_t3}{v6CU-mFHTdKrOjajuwUeNg}{OFA4l360QROJaZcxNIgvbQ}{127.0.0.1}{127.0.0.1:30217}\r\n   >    {node_t2}{HvyZwyynRLqpOG6podHBNQ}{LZIeAY3AQXyGFb6xBUa17Q}{127.0.0.1}{127.0.0.1:30216}, local, master\r\n   >    {node_t1}{iIRj_lzhTjGDo_tsXqHrLw}{xPOVpPyoRvmYHSnEs4ScFA}{127.0.0.1}{127.0.0.1:30215}\r\n   > routing_table (version 1):\r\n   > routing_nodes:\r\n   > -----node_id[iIRj_lzhTjGDo_tsXqHrLw][V]\r\n   > -----node_id[v6CU-mFHTdKrOjajuwUeNg][V]\r\n   > -----node_id[HvyZwyynRLqpOG6podHBNQ][V]\r\n   > ---- unassigned\r\n   > \tat org.elasticsearch.test.ESIntegTestCase.ensureStableCluster(ESIntegTestCase.java:1125)\r\n   > \tat org.elasticsearch.test.ESIntegTestCase.ensureStableCluster(ESIntegTestCase.java:1104)\r\n   > \tat org.elasticsearch.test.ESIntegTestCase.ensureStableCluster(ESIntegTestCase.java:1100)\r\n   > \tat org.elasticsearch.discovery.DiscoveryWithServiceDisruptionsIT.testIsolatedUnicastNodes(DiscoveryWithServiceDisruptionsIT.java:919)\r\n   > \tat java.lang.Thread.run(Thread.java:745)Throwable #2: java.lang.AssertionError: cluster failed to form after disruption was healed\r\n   > \tat org.elasticsearch.test.disruption.NetworkDisruption.ensureNodeCount(NetworkDisruption.java:86)\r\n   > \tat org.elasticsearch.test.disruption.NetworkDisruption.removeAndEnsureHealthy(NetworkDisruption.java:82)\r\n   > \tat org.elasticsearch.test.InternalTestCluster.clearDisruptionScheme(InternalTestCluster.java:1795)\r\n   > \tat org.elasticsearch.test.InternalTestCluster.clearDisruptionScheme(InternalTestCluster.java:1787)\r\n   > \tat org.elasticsearch.test.ESIntegTestCase.clearDisruptionScheme(ESIntegTestCase.java:672)\r\n   > \tat org.elasticsearch.test.ESIntegTestCase.afterInternal(ESIntegTestCase.java:529)\r\n   > \tat org.elasticsearch.test.ESIntegTestCase.after(ESIntegTestCase.java:2004)\r\n   > \tat java.lang.Thread.run(Thread.java:745)\r\n```\r\n\r\n* branch: 5.1\r\n* reproduction line: `gradle :core:integTest -Dtests.seed=5DB24F622A86708D -Dtests.class=org.elasticsearch.discovery.DiscoveryWithServiceDisruptionsIT -Dtests.method=\"testIsolatedUnicastNodes\" -Dtests.security.manager=true -Dtests.locale=en-NZ -Dtests.timezone=Brazil/DeNoronha'`\r\n* reproducability: does not reproduce locally; failed 35 times within the last year in CI\r\n\r\nAttached is the [full build log](https://github.com/elastic/elasticsearch/files/935409/build_log.txt).","closed_by":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"performed_via_github_app":null}