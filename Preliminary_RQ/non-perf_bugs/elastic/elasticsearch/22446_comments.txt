[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/341350702","html_url":"https://github.com/elastic/elasticsearch/issues/22446#issuecomment-341350702","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22446","id":341350702,"node_id":"MDEyOklzc3VlQ29tbWVudDM0MTM1MDcwMg==","user":{"login":"oana-stroie-hs","id":22742894,"node_id":"MDQ6VXNlcjIyNzQyODk0","avatar_url":"https://avatars1.githubusercontent.com/u/22742894?v=4","gravatar_id":"","url":"https://api.github.com/users/oana-stroie-hs","html_url":"https://github.com/oana-stroie-hs","followers_url":"https://api.github.com/users/oana-stroie-hs/followers","following_url":"https://api.github.com/users/oana-stroie-hs/following{/other_user}","gists_url":"https://api.github.com/users/oana-stroie-hs/gists{/gist_id}","starred_url":"https://api.github.com/users/oana-stroie-hs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oana-stroie-hs/subscriptions","organizations_url":"https://api.github.com/users/oana-stroie-hs/orgs","repos_url":"https://api.github.com/users/oana-stroie-hs/repos","events_url":"https://api.github.com/users/oana-stroie-hs/events{/privacy}","received_events_url":"https://api.github.com/users/oana-stroie-hs/received_events","type":"User","site_admin":false},"created_at":"2017-11-02T08:31:09Z","updated_at":"2017-11-02T08:31:09Z","author_association":"NONE","body":"Hi, @eladmena, will this issue be fixed?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/341351718","html_url":"https://github.com/elastic/elasticsearch/issues/22446#issuecomment-341351718","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22446","id":341351718,"node_id":"MDEyOklzc3VlQ29tbWVudDM0MTM1MTcxOA==","user":{"login":"eladmena","id":20152625,"node_id":"MDQ6VXNlcjIwMTUyNjI1","avatar_url":"https://avatars2.githubusercontent.com/u/20152625?v=4","gravatar_id":"","url":"https://api.github.com/users/eladmena","html_url":"https://github.com/eladmena","followers_url":"https://api.github.com/users/eladmena/followers","following_url":"https://api.github.com/users/eladmena/following{/other_user}","gists_url":"https://api.github.com/users/eladmena/gists{/gist_id}","starred_url":"https://api.github.com/users/eladmena/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eladmena/subscriptions","organizations_url":"https://api.github.com/users/eladmena/orgs","repos_url":"https://api.github.com/users/eladmena/repos","events_url":"https://api.github.com/users/eladmena/events{/privacy}","received_events_url":"https://api.github.com/users/eladmena/received_events","type":"User","site_admin":false},"created_at":"2017-11-02T08:35:53Z","updated_at":"2017-12-04T12:21:59Z","author_association":"NONE","body":"This issue is fixed, but pending merge of pull request 27637\r\nhttps://github.com/elastic/elasticsearch/pull/27637","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/348946705","html_url":"https://github.com/elastic/elasticsearch/issues/22446#issuecomment-348946705","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22446","id":348946705,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODk0NjcwNQ==","user":{"login":"eladmena","id":20152625,"node_id":"MDQ6VXNlcjIwMTUyNjI1","avatar_url":"https://avatars2.githubusercontent.com/u/20152625?v=4","gravatar_id":"","url":"https://api.github.com/users/eladmena","html_url":"https://github.com/eladmena","followers_url":"https://api.github.com/users/eladmena/followers","following_url":"https://api.github.com/users/eladmena/following{/other_user}","gists_url":"https://api.github.com/users/eladmena/gists{/gist_id}","starred_url":"https://api.github.com/users/eladmena/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eladmena/subscriptions","organizations_url":"https://api.github.com/users/eladmena/orgs","repos_url":"https://api.github.com/users/eladmena/repos","events_url":"https://api.github.com/users/eladmena/events{/privacy}","received_events_url":"https://api.github.com/users/eladmena/received_events","type":"User","site_admin":false},"created_at":"2017-12-04T12:20:06Z","updated_at":"2017-12-05T07:38:25Z","author_association":"NONE","body":"Ping on that issue.\r\nIt is already implemented, the change is simple, tested (with integration test) and documented.\r\n\r\nCurrently the code marks it to work only for Elasticsearch 7 and by default it is disabled (per template configuration)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/349273681","html_url":"https://github.com/elastic/elasticsearch/issues/22446#issuecomment-349273681","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22446","id":349273681,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTI3MzY4MQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-12-05T11:14:08Z","updated_at":"2017-12-05T11:14:08Z","author_association":"CONTRIBUTOR","body":"Hi @eladmena \r\n\r\nSorry we haven't discussed this issue yet.\r\n\r\nI'm afraid i don't like this idea.  It is hard to reason about for users, and likely to have a lot of edge cases. For instance, doing a wildcard search might cause matching templates to spring into existence.\r\n\r\n Instead, I think that a better solution would be a request time option that says \"fail this indexing request if the index doesn't exist\".  Then the client could take the action of creating the index (which would include the correct alias from the template), and then continue onwards using the alias.\r\n\r\nThis is safe, simple, and easy to reason about.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/349278810","html_url":"https://github.com/elastic/elasticsearch/issues/22446#issuecomment-349278810","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22446","id":349278810,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTI3ODgxMA==","user":{"login":"eladmena","id":20152625,"node_id":"MDQ6VXNlcjIwMTUyNjI1","avatar_url":"https://avatars2.githubusercontent.com/u/20152625?v=4","gravatar_id":"","url":"https://api.github.com/users/eladmena","html_url":"https://github.com/eladmena","followers_url":"https://api.github.com/users/eladmena/followers","following_url":"https://api.github.com/users/eladmena/following{/other_user}","gists_url":"https://api.github.com/users/eladmena/gists{/gist_id}","starred_url":"https://api.github.com/users/eladmena/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eladmena/subscriptions","organizations_url":"https://api.github.com/users/eladmena/orgs","repos_url":"https://api.github.com/users/eladmena/repos","events_url":"https://api.github.com/users/eladmena/events{/privacy}","received_events_url":"https://api.github.com/users/eladmena/received_events","type":"User","site_admin":false},"created_at":"2017-12-05T11:36:45Z","updated_at":"2017-12-05T11:36:45Z","author_association":"NONE","body":"Hey @clintongormley,\r\nThank for your response.\r\n\r\nI think this feature is very useful and without it the index templates feature is incomplete, especially when a lot of best practices are to work with aliases, having this feature gives the user the ability to use the index using aliases from call no. 1, having a single behaviour when using the index, no matter if it exists or not.\r\n\r\nHaving a failure beats the purpose of index templates, now the user will have to create the index on his own and keep track what indices are created and what not (in our application we managed the indices ourselves without using index templates as this feature was missing)\r\n\r\nCan you please elaborate on your concerns? If you'll look on the fix implementation (most of the logic is in _TransportCreateIndexAction.inferIndexNameFromAlias()_) you'll see it only affects index creation, changing the index name only if it can be inferred from the alias of the template, without changing the original request. It also works with date maths and tested using IT to verify it works as needed when turned on and doesn't affect other requests if turned on or not set.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/350272850","html_url":"https://github.com/elastic/elasticsearch/issues/22446#issuecomment-350272850","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22446","id":350272850,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MDI3Mjg1MA==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2017-12-08T14:14:47Z","updated_at":"2017-12-08T14:14:47Z","author_association":"MEMBER","body":"> Can you please elaborate on your concerns\r\n\r\nWe try to fully understand the reasoning for adding features. The interaction between indices, aliases and templates is already complex enough.\r\n\r\nCan you please elaborate on your use case? What is the role of the aliases?  i.e., what's the reason to distinguish between read and write?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/350353890","html_url":"https://github.com/elastic/elasticsearch/issues/22446#issuecomment-350353890","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22446","id":350353890,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MDM1Mzg5MA==","user":{"login":"eladmena","id":20152625,"node_id":"MDQ6VXNlcjIwMTUyNjI1","avatar_url":"https://avatars2.githubusercontent.com/u/20152625?v=4","gravatar_id":"","url":"https://api.github.com/users/eladmena","html_url":"https://github.com/eladmena","followers_url":"https://api.github.com/users/eladmena/followers","following_url":"https://api.github.com/users/eladmena/following{/other_user}","gists_url":"https://api.github.com/users/eladmena/gists{/gist_id}","starred_url":"https://api.github.com/users/eladmena/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eladmena/subscriptions","organizations_url":"https://api.github.com/users/eladmena/orgs","repos_url":"https://api.github.com/users/eladmena/repos","events_url":"https://api.github.com/users/eladmena/events{/privacy}","received_events_url":"https://api.github.com/users/eladmena/received_events","type":"User","site_admin":false},"created_at":"2017-12-08T19:41:33Z","updated_at":"2017-12-08T19:41:33Z","author_association":"NONE","body":"the -read/-write suffix is just an example for aliases names.\r\n\r\nThe idea of this feature (more an enhancement for the index-templates feature) is as follows:\r\nIn case an index-template has aliases in its configuration and the application works with aliases to access indices, then the index template feature doesn't give a complete solution.\r\n\r\nfor example if my template matches \"a*\" and has an alias called **{index}**_-alias_. (which means that when creating an index called **abc** it'll also create an alias called **abc**_-alias_.\r\nIf I'll index (add document) to a non existing index using the (application logic) alias name abc-alias, the index template will treat **abc-alias** as the index name and will create an alias called **abc-alias**_-alias_, not as intended. If ES would have treated the request as create index called **abc** by inferring the index name from the alias name we could have had a uniform behaviour from request no. 1.\r\n\r\nTo workaround this limitation one needs to first create the index using the index name and then access the index using the alias name, however, if this is the case then index template doesn't help (in this case) as one needs a different behaviours in case it is the first call or whether it's subsequent ones, and if that's the case, the first call can be create the index with the mapping you need, and the rest will access the index using the alias.\r\n\r\nHow it affected our app:\r\nwe were population ES using Logstash which got the index name from the app, we wanted to both have a uniform index name per context and also use aliases, it wasn't possible with ES only, our solution was the above workaround, we had to keep a cache of what indices are in ES and if they do not exist create them, and having Logstash always use the alias name.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/350709031","html_url":"https://github.com/elastic/elasticsearch/issues/22446#issuecomment-350709031","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22446","id":350709031,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MDcwOTAzMQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-12-11T12:21:02Z","updated_at":"2017-12-11T12:21:02Z","author_association":"CONTRIBUTOR","body":"I can see how this works for your particular naming scheme, but this is fragile.  Eg, what if I want my alias to be `foo`,  instead of `foo-write`?  Then I have an alias setting of `{{index}}` which matches any index.  Or what if I want my alias to be `{{apache}}` but my index name to be `apache-2017.11.12`?\r\n\r\nThis change adds one narrow bit of functionality which relies on convention to work, and introduces situations where it won't work correctly and will confuse users.  I'm against making this change.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/350717612","html_url":"https://github.com/elastic/elasticsearch/issues/22446#issuecomment-350717612","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22446","id":350717612,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MDcxNzYxMg==","user":{"login":"eladmena","id":20152625,"node_id":"MDQ6VXNlcjIwMTUyNjI1","avatar_url":"https://avatars2.githubusercontent.com/u/20152625?v=4","gravatar_id":"","url":"https://api.github.com/users/eladmena","html_url":"https://github.com/eladmena","followers_url":"https://api.github.com/users/eladmena/followers","following_url":"https://api.github.com/users/eladmena/following{/other_user}","gists_url":"https://api.github.com/users/eladmena/gists{/gist_id}","starred_url":"https://api.github.com/users/eladmena/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eladmena/subscriptions","organizations_url":"https://api.github.com/users/eladmena/orgs","repos_url":"https://api.github.com/users/eladmena/repos","events_url":"https://api.github.com/users/eladmena/events{/privacy}","received_events_url":"https://api.github.com/users/eladmena/received_events","type":"User","site_admin":false},"created_at":"2017-12-11T13:00:10Z","updated_at":"2017-12-11T13:00:10Z","author_association":"NONE","body":"The current implementation of index templates allows to create alias(es) based on the index name, the above enhancement allows to reverse the order that the index name will be inferred from the alias. keeping the same behaviour of index templates.\r\n\r\nIn case you want to change the issue to be **force** derive index name from alias it may be more complicated\r\n\r\n1. Having an index template can have multiple aliases\r\nso one will need to set the \"master\" alias which will the name will be derived from ==> derive the index name ==> derive the other aliases (either from the index/\"master\" alias name)\r\n1. The order of the aliases is not consistent, meaning for the invoking the same request I can get a different order of aliases, so when implementing one needs to make sure the \"master\" alias is called first.\r\n\r\nIn any case I prefer the pull request will be merged and open another issue for the alias --> index name, as those are complementary as it's either index name --> alias name or alias name --> index name","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/350722967","html_url":"https://github.com/elastic/elasticsearch/issues/22446#issuecomment-350722967","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22446","id":350722967,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MDcyMjk2Nw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-12-11T13:24:12Z","updated_at":"2017-12-11T13:24:12Z","author_association":"CONTRIBUTOR","body":"This is my point. It is narrow, complicated, and confusing, and just leads to more changes.  I don't want to merge this PR at all, for these reasons.   Sorry, but this feels like a change we will regret.  I'm -1 on doing this.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/439638907","html_url":"https://github.com/elastic/elasticsearch/issues/22446#issuecomment-439638907","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22446","id":439638907,"node_id":"MDEyOklzc3VlQ29tbWVudDQzOTYzODkwNw==","user":{"login":"MrYueQ","id":14846522,"node_id":"MDQ6VXNlcjE0ODQ2NTIy","avatar_url":"https://avatars2.githubusercontent.com/u/14846522?v=4","gravatar_id":"","url":"https://api.github.com/users/MrYueQ","html_url":"https://github.com/MrYueQ","followers_url":"https://api.github.com/users/MrYueQ/followers","following_url":"https://api.github.com/users/MrYueQ/following{/other_user}","gists_url":"https://api.github.com/users/MrYueQ/gists{/gist_id}","starred_url":"https://api.github.com/users/MrYueQ/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MrYueQ/subscriptions","organizations_url":"https://api.github.com/users/MrYueQ/orgs","repos_url":"https://api.github.com/users/MrYueQ/repos","events_url":"https://api.github.com/users/MrYueQ/events{/privacy}","received_events_url":"https://api.github.com/users/MrYueQ/received_events","type":"User","site_admin":false},"created_at":"2018-11-17T18:47:53Z","updated_at":"2018-11-17T18:47:53Z","author_association":"NONE","body":"I am sorry. My wish help.\r\nThis is a index template setting configuartion.\r\n {\r\n        \"order\": 5,\r\n        \"version\": 60001,\r\n        \"index_patterns\": [\r\n            \"debug*\"\r\n        ],\r\n        \"settings\": {\r\n            \"index\": {\r\n                \"number_of_shards\": \"1\",\r\n                \"number_of_replicas\": \"0\",\r\n                \"refresh_interval\": \"1s\"\r\n            }\r\n        },\r\n        \"mappings\": {\r\n            \"doc\": {\r\n                \"properties\": {\r\n                    \"logLevel\": {\r\n                        \"type\": \"keyword\"\r\n                    },\r\n                    \"hostname\": {\r\n                        \"type\": \"keyword\"\r\n                    },\r\n                    \"application\": {\r\n                        \"type\": \"keyword\"\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        \"aliases\": {\r\n            \"{application}-alias-for-{env}\": {\r\n            \"format\": {\r\n                \"env\": {\r\n                    \"lang\":   \"expression\",\r\n                    \"script\": \"doc['logLevel'].value\"\r\n                },\r\n                \"application\": {\r\n                    \"lang\":   \"expression\",\r\n                    \"script\": \"doc['application'].value\"\r\n                }\r\n            }\r\n        }\r\n        }\r\n    }\r\n\r\n-------------------------------------------------------------\r\nwhen create index, auto create alias ,but result not is I wish","performed_via_github_app":null}]