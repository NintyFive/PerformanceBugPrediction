{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/35586","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35586/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35586/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35586/events","html_url":"https://github.com/elastic/elasticsearch/issues/35586","id":381147278,"node_id":"MDU6SXNzdWUzODExNDcyNzg=","number":35586,"title":"Mount point not found in a kubernetes deployment","user":{"login":"ashishjoshi42","id":45068725,"node_id":"MDQ6VXNlcjQ1MDY4NzI1","avatar_url":"https://avatars3.githubusercontent.com/u/45068725?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishjoshi42","html_url":"https://github.com/ashishjoshi42","followers_url":"https://api.github.com/users/ashishjoshi42/followers","following_url":"https://api.github.com/users/ashishjoshi42/following{/other_user}","gists_url":"https://api.github.com/users/ashishjoshi42/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishjoshi42/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishjoshi42/subscriptions","organizations_url":"https://api.github.com/users/ashishjoshi42/orgs","repos_url":"https://api.github.com/users/ashishjoshi42/repos","events_url":"https://api.github.com/users/ashishjoshi42/events{/privacy}","received_events_url":"https://api.github.com/users/ashishjoshi42/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-11-15T12:50:55Z","updated_at":"2018-11-15T13:11:33Z","closed_at":"2018-11-15T13:11:33Z","author_association":"NONE","active_lock_reason":null,"body":"<!-- Bug report -->\r\n\r\n**Elasticsearch version** : 5.2.2\r\n\r\n\r\n**JVM version** (`java -version`): 1.8\r\n\r\n**k8S version** : 1.11.4\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nI am deploying elasticsearch pod in a kubernetes cluster and facing the **Mount point not found** error.    The logs of the pod startup are given below\r\n\r\n**Logs**:\r\n\r\n-> Downloading repository-s3 from elastic\r\n[=================================================] 100%  \r\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n@     WARNING: plugin requires additional permissions     @\r\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n* java.lang.RuntimePermission accessDeclaredMembers\r\n* java.lang.RuntimePermission getClassLoader\r\n* java.lang.reflect.ReflectPermission suppressAccessChecks\r\nSee http://docs.oracle.com/javase/8/docs/technotes/guides/security/permissions.html\r\nfor descriptions of what these permissions allow and the associated risks.\r\n-> Installed repository-s3\r\n-> Downloading discovery-ec2 from elastic\r\n[=================================================] 100%  \r\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n@     WARNING: plugin requires additional permissions     @\r\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n* java.lang.RuntimePermission accessDeclaredMembers\r\n* java.lang.RuntimePermission getClassLoader\r\nSee http://docs.oracle.com/javase/8/docs/technotes/guides/security/permissions.html\r\nfor descriptions of what these permissions allow and the associated risks.\r\n-> Installed discovery-ec2\r\n[2018-11-15T12:20:35,075][INFO ][o.e.n.Node               ] [elasticsearch-data-0] initializing ...\r\n[2018-11-15T12:20:35,121][WARN ][o.e.b.ElasticsearchUncaughtExceptionHandler] [elasticsearch-data-0] uncaught exception in thread [main]\r\norg.elasticsearch.bootstrap.StartupException: java.lang.IllegalStateException: failed to obtain node locks, tried [[/data/data/myesdb]] with lock id [0]; maybe these locations are not writable or multiple nodes were started without increasing [node.max_local_storage_nodes] (was [1])?\r\n        at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:125) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:112) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.cli.SettingCommand.execute(SettingCommand.java:54) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:122) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.cli.Command.main(Command.java:88) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:89) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:82) ~[elasticsearch-5.2.2.jar:5.2.2]\r\nCaused by: java.lang.IllegalStateException: failed to obtain node locks, tried [[/data/data/myesdb]] with lock id [0]; maybe these locations are not writable or multiple nodes were started without increasing [node.max_local_storage_nodes] (was [1])?\r\n        at org.elasticsearch.env.NodeEnvironment.<init>(NodeEnvironment.java:260) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.node.Node.<init>(Node.java:252) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.node.Node.<init>(Node.java:232) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.bootstrap.Bootstrap$6.<init>(Bootstrap.java:241) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:241) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:333) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:121) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        ... 6 more\r\nCaused by: java.io.IOException: failed to obtain lock on /data/data/nodes/0\r\n        at org.elasticsearch.env.NodeEnvironment.<init>(NodeEnvironment.java:239) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.node.Node.<init>(Node.java:252) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.node.Node.<init>(Node.java:232) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.bootstrap.Bootstrap$6.<init>(Bootstrap.java:241) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:241) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:333) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:121) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        ... 6 more\r\nCaused by: java.io.IOException: Mount point not found\r\n        at sun.nio.fs.LinuxFileStore.findMountEntry(LinuxFileStore.java:91) ~[?:?]\r\n        at sun.nio.fs.UnixFileStore.<init>(UnixFileStore.java:65) ~[?:?]\r\n        at sun.nio.fs.LinuxFileStore.<init>(LinuxFileStore.java:44) ~[?:?]\r\n        at sun.nio.fs.LinuxFileSystemProvider.getFileStore(LinuxFileSystemProvider.java:51) ~[?:?]\r\n        at sun.nio.fs.LinuxFileSystemProvider.getFileStore(LinuxFileSystemProvider.java:39) ~[?:?]\r\n        at sun.nio.fs.UnixFileSystemProvider.getFileStore(UnixFileSystemProvider.java:368) ~[?:?]\r\n        at java.nio.file.Files.getFileStore(Files.java:1461) ~[?:1.8.0_111]\r\n        at org.elasticsearch.env.ESFileStore.getMatchingFileStore(ESFileStore.java:107) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.env.Environment.getFileStore(Environment.java:340) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.env.NodeEnvironment$NodePath.<init>(NodeEnvironment.java:108) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.env.NodeEnvironment.<init>(NodeEnvironment.java:227) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.node.Node.<init>(Node.java:252) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.node.Node.<init>(Node.java:232) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.bootstrap.Bootstrap$6.<init>(Bootstrap.java:241) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:241) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:333) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:121) ~[elasticsearch-5.2.2.jar:5.2.2]\r\n        ... 6 more\r\n\r\n\r\n","closed_by":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"performed_via_github_app":null}