{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/33365","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33365/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33365/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33365/events","html_url":"https://github.com/elastic/elasticsearch/issues/33365","id":356612630,"node_id":"MDU6SXNzdWUzNTY2MTI2MzA=","number":33365,"title":"Problems running via docker-compose","user":{"login":"vgoklani","id":180487,"node_id":"MDQ6VXNlcjE4MDQ4Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/180487?v=4","gravatar_id":"","url":"https://api.github.com/users/vgoklani","html_url":"https://github.com/vgoklani","followers_url":"https://api.github.com/users/vgoklani/followers","following_url":"https://api.github.com/users/vgoklani/following{/other_user}","gists_url":"https://api.github.com/users/vgoklani/gists{/gist_id}","starred_url":"https://api.github.com/users/vgoklani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vgoklani/subscriptions","organizations_url":"https://api.github.com/users/vgoklani/orgs","repos_url":"https://api.github.com/users/vgoklani/repos","events_url":"https://api.github.com/users/vgoklani/events{/privacy}","received_events_url":"https://api.github.com/users/vgoklani/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-09-03T23:25:10Z","updated_at":"2018-09-03T23:29:08Z","closed_at":"2018-09-03T23:29:08Z","author_association":"NONE","active_lock_reason":null,"body":"Hello - could you please review my docker-compose file, as I'm getting a ton of errors.\r\n\r\ndocker-compose file:\r\n\r\n    version: '2'\r\n\r\n    services:\r\n        elasticsearch:\r\n          container_name: elasticsearch\r\n          restart: always\r\n          image: docker.elastic.co/elasticsearch/elasticsearch:6.3.2\r\n          ports:\r\n            - \"127.0.0.1:8200:9200\"\r\n            - \"127.0.0.1:8300:9300\"\r\n          volumes:\r\n            - /opt_docker/data/elasticsearch:/usr/share/elasticsearch/data\r\n            - /opt_docker/log/elasticsearch:/usr/share/elasticsearch/logs\r\n          env_file:\r\n            - ./environment\r\n          environment:\r\n            - client_id=elasticsearch\r\n            - MACHINE_NAME=${HOSTNAME}\r\n            - bootstrap.memory_lock=true\r\n            - \"ES_JAVA_OPTS=-Xms512m -Xmx512m\"\r\n            - discovery.type=single-node\r\n          ulimits:\r\n            memlock:\r\n              soft: -1\r\n              hard: -1\r\n          depends_on:\r\n          mem_limit: 8192m\r\n\r\nerrors:\r\n\r\n\t\t[2018-09-03T23:13:59,324][INFO ][o.e.n.Node               ] [] initializing ...\r\n\t\t[2018-09-03T23:13:59,375][WARN ][o.e.b.ElasticsearchUncaughtExceptionHandler] [] uncaught exception in thread [main]\r\n\t\torg.elasticsearch.bootstrap.StartupException: java.lang.IllegalStateException: Failed to create node environment\r\n\t\t\tat org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:140) ~[elasticsearch-6.3.2.jar:6.3.2]\r\n\t\t\tat org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:127) ~[elasticsearch-6.3.2.jar:6.3.2]\r\n\t\t\tat org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:86) ~[elasticsearch-6.3.2.jar:6.3.2]\r\n\t\t\tat org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124) ~[elasticsearch-cli-6.3.2.jar:6.3.2]\r\n\t\t\tat org.elasticsearch.cli.Command.main(Command.java:90) ~[elasticsearch-cli-6.3.2.jar:6.3.2]\r\n\t\t\tat org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:93) ~[elasticsearch-6.3.2.jar:6.3.2]\r\n\t\t\tat org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:86) ~[elasticsearch-6.3.2.jar:6.3.2]\r\n\t\tCaused by: java.lang.IllegalStateException: Failed to create node environment\r\n\t\t\tat org.elasticsearch.node.Node.<init>(Node.java:273) ~[elasticsearch-6.3.2.jar:6.3.2]\r\n\t\t\tat org.elasticsearch.node.Node.<init>(Node.java:252) ~[elasticsearch-6.3.2.jar:6.3.2]\r\n\t\t\tat org.elasticsearch.bootstrap.Bootstrap$5.<init>(Bootstrap.java:213) ~[elasticsearch-6.3.2.jar:6.3.2]\r\n\t\t\tat org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:213) ~[elasticsearch-6.3.2.jar:6.3.2]\r\n\t\t\tat org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:326) ~[elasticsearch-6.3.2.jar:6.3.2]\r\n\t\t\tat org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:136) ~[elasticsearch-6.3.2.jar:6.3.2]\r\n\t\t\t... 6 more\r\n\t\tCaused by: java.nio.file.AccessDeniedException: /usr/share/elasticsearch/data/nodes\r\n\t\t\tat sun.nio.fs.UnixException.translateToIOException(UnixException.java:90) ~[?:?]\r\n\t\t\tat sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111) ~[?:?]\r\n\t\t\tat sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:116) ~[?:?]\r\n\t\t\tat sun.nio.fs.UnixFileSystemProvider.createDirectory(UnixFileSystemProvider.java:385) ~[?:?]\r\n\t\t\tat java.nio.file.Files.createDirectory(Files.java:682) ~[?:?]\r\n\t\t\tat java.nio.file.Files.createAndCheckIsDirectory(Files.java:789) ~[?:?]\r\n\t\t\tat java.nio.file.Files.createDirectories(Files.java:775) ~[?:?]\r\n\t\t\tat org.elasticsearch.env.NodeEnvironment.<init>(NodeEnvironment.java:203) ~[elasticsearch-6.3.2.jar:6.3.2]\r\n\t\t\tat org.elasticsearch.node.Node.<init>(Node.java:270) ~[elasticsearch-6.3.2.jar:6.3.2]\r\n\t\t\tat org.elasticsearch.node.Node.<init>(Node.java:252) ~[elasticsearch-6.3.2.jar:6.3.2]\r\n\t\t\tat org.elasticsearch.bootstrap.Bootstrap$5.<init>(Bootstrap.java:213) ~[elasticsearch-6.3.2.jar:6.3.2]\r\n\t\t\tat org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:213) ~[elasticsearch-6.3.2.jar:6.3.2]\r\n\t\t\tat org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:326) ~[elasticsearch-6.3.2.jar:6.3.2]\r\n\t\t\tat org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:136) ~[elasticsearch-6.3.2.jar:6.3.2]\r\n\t\t\t... 6 more\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}