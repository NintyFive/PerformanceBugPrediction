[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/374539483","html_url":"https://github.com/elastic/elasticsearch/issues/13780#issuecomment-374539483","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13780","id":374539483,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NDUzOTQ4Mw==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2018-03-20T10:00:01Z","updated_at":"2018-03-20T10:00:01Z","author_association":"CONTRIBUTOR","body":"This is an interesting idea, but since its opening we have not seen enough feedback that it is something we should work on. We prefer to close this issue as a clear indication that we are not going to work on this at this time. We are always open to reconsidering this in the future based on compelling feedback; despite this issue being closed please feel free to leave feedback (including +1s).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/572806575","html_url":"https://github.com/elastic/elasticsearch/issues/13780#issuecomment-572806575","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13780","id":572806575,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjgwNjU3NQ==","user":{"login":"jdcrown","id":36433746,"node_id":"MDQ6VXNlcjM2NDMzNzQ2","avatar_url":"https://avatars3.githubusercontent.com/u/36433746?v=4","gravatar_id":"","url":"https://api.github.com/users/jdcrown","html_url":"https://github.com/jdcrown","followers_url":"https://api.github.com/users/jdcrown/followers","following_url":"https://api.github.com/users/jdcrown/following{/other_user}","gists_url":"https://api.github.com/users/jdcrown/gists{/gist_id}","starred_url":"https://api.github.com/users/jdcrown/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdcrown/subscriptions","organizations_url":"https://api.github.com/users/jdcrown/orgs","repos_url":"https://api.github.com/users/jdcrown/repos","events_url":"https://api.github.com/users/jdcrown/events{/privacy}","received_events_url":"https://api.github.com/users/jdcrown/received_events","type":"User","site_admin":false},"created_at":"2020-01-09T23:37:12Z","updated_at":"2020-01-09T23:37:12Z","author_association":"NONE","body":"This is typically a problem with multiple availability zones and auto balancing evenness when an index has \"auto_expand_replicas: 0-n\" set such as the case with .security. \r\n\r\nSo if i am using a single autoscaling group in AWS that has multiple availability zones, AWS does not guarantee evenness, it's mainly based on availability.  This can wreak havoc on the .security index in this case. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/572918262","html_url":"https://github.com/elastic/elasticsearch/issues/13780#issuecomment-572918262","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13780","id":572918262,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjkxODI2Mg==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2020-01-10T08:00:49Z","updated_at":"2020-01-10T08:00:49Z","author_association":"CONTRIBUTOR","body":"From the [AWS docs](https://docs.aws.amazon.com/autoscaling/ec2/userguide/auto-scaling-benefits.html):\r\n\r\n> Amazon EC2 Auto Scaling attempts to distribute instances evenly between the Availability Zones that are enabled for your Auto Scaling group.\r\n\r\nAlthough there's no _guarantee_ of evenness, an uneven distribution across AZs represents a failure state that should be resolved in due course.\r\n\r\nAdditionally, since 6.5.0 the `.security-*` indices default to `auto_expand_replicas: 0-1` (cf. https://github.com/elastic/elasticsearch/pull/33131). If you have two or more AZs and have allocation awareness enabled then this ensures that there's no more than one copy in each AZ, which should be sufficient (cf. discussion in https://github.com/elastic/elasticsearch/issues/29712). If you are asking for more replicas (i.e. `auto_expand_replicas: 0-n` where `nâ‰¥2`) and struggling to get them all allocated then I suspect you're setting `n` too high.","performed_via_github_app":null}]