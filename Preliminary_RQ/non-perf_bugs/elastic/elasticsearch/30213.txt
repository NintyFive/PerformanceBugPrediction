{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/30213","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30213/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30213/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30213/events","html_url":"https://github.com/elastic/elasticsearch/issues/30213","id":318503952,"node_id":"MDU6SXNzdWUzMTg1MDM5NTI=","number":30213,"title":"Couldn't start the elasticsearch server in kibana development environment","user":{"login":"aaronoah","id":8196440,"node_id":"MDQ6VXNlcjgxOTY0NDA=","avatar_url":"https://avatars1.githubusercontent.com/u/8196440?v=4","gravatar_id":"","url":"https://api.github.com/users/aaronoah","html_url":"https://github.com/aaronoah","followers_url":"https://api.github.com/users/aaronoah/followers","following_url":"https://api.github.com/users/aaronoah/following{/other_user}","gists_url":"https://api.github.com/users/aaronoah/gists{/gist_id}","starred_url":"https://api.github.com/users/aaronoah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aaronoah/subscriptions","organizations_url":"https://api.github.com/users/aaronoah/orgs","repos_url":"https://api.github.com/users/aaronoah/repos","events_url":"https://api.github.com/users/aaronoah/events{/privacy}","received_events_url":"https://api.github.com/users/aaronoah/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-04-27T18:22:02Z","updated_at":"2018-05-06T19:33:32Z","closed_at":"2018-04-27T19:10:14Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"<!--\r\n\r\n** Please read the guidelines below. **\r\n\r\nIssues that do not follow these guidelines are likely to be closed.\r\n\r\n1.  GitHub is reserved for bug reports and feature requests. The best place to\r\n    ask a general question is at the Elastic [forums](https://discuss.elastic.co).\r\n    GitHub is not the place for general questions.\r\n\r\n2.  Is this bug report or feature request for a supported OS? If not, it\r\n    is likely to be closed.  See https://www.elastic.co/support/matrix#show_os\r\n\r\n3.  Please fill out EITHER the feature request block or the bug report block\r\n    below, and delete the other block.\r\n\r\n-->\r\n\r\n<!-- Feature request -->\r\n\r\n**Describe the feature**:\r\n\r\nIn my kibana environment I couldn't start the elasticsearch server.\r\n\r\n<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`): \r\n\r\nVersion: 7.0.0-alpha1-SNAPSHOT, Build: default/tar/80e0e64/2018-04-26T21:18:22.372360Z, JVM: 1.8.0_60\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version** (`java -version`):\r\n\r\njava version \"1.8.0_60\"\r\nJava(TM) SE Runtime Environment (build 1.8.0_60-b27)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.60-b23, mixed mode)\r\n\r\n**OS version** (`uname -a` if on a Unix-like system):\r\n\r\nDarwin MacBook-Pro-3.local 17.5.0 Darwin Kernel Version 17.5.0: Fri Apr 13 19:32:32 PDT 2018; root:xnu-4570.51.2~1/RELEASE_X86_64 x86_64\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nIn kibana project, I try to run `yarn run elasticsearch` and it couldn't start the server and said `Fatal error: Client request error: connect ECONNREFUSED 127.0.0.1:80`\r\n\r\n**Steps to reproduce**:\r\n\r\nPlease include a *minimal* but *complete* recreation of the problem, including\r\n(e.g.) index creation, mappings, settings, query etc.  The easier you make for\r\nus to reproduce it, the more likely that somebody will take the time to look at it.\r\n\r\n 1. clone the kibana repo, install node v8.9.4 and latest yarn\r\n 2. run `yarn kbn bootstrap` to install dependencies\r\n 3. run `yarn run elasticsearch` to run elasticsearch\r\n\r\n**Provide logs (if relevant)**:\r\n\r\nyarn run v1.6.0\r\n$ grunt esvm:dev:keepalive\r\nRunning \"esvm:dev:keepalive\" (esvm) task\r\nstarting up \"dev\" cluster\r\nKeeping elasticsearch alive, to shutdown press command/control+c\r\n(node:15040) [DEP0022] DeprecationWarning: os.tmpDir() is deprecated. Use os.tmpdir() instead.\r\nINFO -  - cluster - Downloading & installing from \"master\" branch.\r\nINFO -  - cluster - Installing plugins\r\nINFO -  - cluster - Starting 1 nodes\r\nINFO - ? - ? - [2018-04-27T13:18:43,531][INFO ][o.e.n.Node               ] [] initializing ...\r\nINFO - oHcyjWO - node_environment - using [1] data paths, mounts [[/ (/dev/disk1s1)]], net usable_space [10.4gb], net total_space [112.8gb], types [apfs]\r\nINFO - oHcyjWO - node_environment - heap size [990.7mb], compressed ordinary object pointers [true]\r\nINFO - oHcyjWO - node - node name derived from node ID [oHcyjWOjTBGfP6s1BLZCFg]; set [node.name] to override\r\nINFO - oHcyjWO - node - version[7.0.0-alpha1-SNAPSHOT], pid[15097], build[default/tar/80e0e64/2018-04-26T21:18:22.372360Z], OS[Mac OS X/10.13.4/x86_64], JVM[Oracle Corporation/Java HotSpot(TM) 64-Bit Server VM/1.8.0_60/25.60-b23]\r\nINFO - oHcyjWO - node - JVM arguments [-Xms1g, -Xmx1g, -XX:+UseConcMarkSweepGC, -XX:CMSInitiatingOccupancyFraction=75, -XX:+UseCMSInitiatingOccupancyOnly, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Djava.io.tmpdir=/var/folders/nv/18gx6kgn75gdt3tn37pg8q1h0000gn/T/elasticsearch.f8sdeHy3, -XX:+HeapDumpOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -XX:+PrintGCDetails, -XX:+PrintGCDateStamps, -XX:+PrintTenuringDistribution, -XX:+PrintGCApplicationStoppedTime, -Xloggc:logs/gc.log, -XX:+UseGCLogFileRotation, -XX:NumberOfGCLogFiles=32, -XX:GCLogFileSize=64m,-Des.path.home=/Users/AaronZhao/Git/kibana/esvm/dev/branch-master, -Des.path.conf=/var/folders/nv/18gx6kgn75gdt3tn37pg8q1h0000gn/T/libesvm-118327-15040-1c3crya.c0sdf, -Des.distribution.flavor=default, -Des.distribution.type=tar]\r\nWARN - oHcyjWO - node - version [7.0.0-alpha1-SNAPSHOT] is a pre-release version of Elasticsearch and is not suitable for production\r\nINFO - oHcyjWO - plugins_service - loaded module [aggs-matrix-stats]\r\nINFO - oHcyjWO - plugins_service - loaded module [analysis-common]\r\nINFO - oHcyjWO - plugins_service - loaded module [ingest-common]\r\nINFO - oHcyjWO - plugins_service - loaded module [lang-expression]\r\nINFO - oHcyjWO - plugins_service - loaded module [lang-mustache]\r\nINFO - oHcyjWO - plugins_service - loaded module [lang-painless]\r\nINFO - oHcyjWO - plugins_service - loaded module [mapper-extras]\r\nINFO - oHcyjWO - plugins_service - loaded module [parent-join]\r\nINFO - oHcyjWO - plugins_service - loaded module [percolator]\r\nINFO - oHcyjWO - plugins_service - loaded module [rank-eval]\r\nINFO - oHcyjWO - plugins_service - loaded module [reindex]\r\nINFO - oHcyjWO - plugins_service - loaded module [repository-url]\r\nINFO - oHcyjWO - plugins_service - loaded module [transport-netty4]\r\nINFO - oHcyjWO - plugins_service - loaded module [x-pack-core]\r\nINFO - oHcyjWO - plugins_service - loaded module [x-pack-deprecation]\r\nINFO - oHcyjWO - plugins_service - loaded module [x-pack-graph]\r\nINFO - oHcyjWO - plugins_service - loaded module [x-pack-logstash]\r\nINFO - oHcyjWO - plugins_service - loaded module [x-pack-ml]\r\nINFO - oHcyjWO - plugins_service - loaded module [x-pack-monitoring]\r\nINFO - oHcyjWO - plugins_service - loaded module [x-pack-rollup]\r\nINFO - oHcyjWO - plugins_service - loaded module [x-pack-security]\r\nINFO - oHcyjWO - plugins_service - loaded module [x-pack-sql]\r\nINFO - oHcyjWO - plugins_service - loaded module [x-pack-upgrade]\r\nINFO - oHcyjWO - plugins_service - loaded module [x-pack-watcher]\r\nINFO - oHcyjWO - plugins_service - no plugins loaded\r\nINFO - oHcyjWO - file_roles_store - parsed [0] roles from file [/var/folders/nv/18gx6kgn75gdt3tn37pg8q1h0000gn/T/libesvm-118327-15040-1c3crya.c0sdf/roles.yml]\r\nINFO - controller/15134 - cpp_log_message_handler - [Main.cc@109] controller (64 bit): Version 7.0.0-alpha1-SNAPSHOT (Build 68586458b2a1f6) Copyright (c) 2018 Elasticsearch BV\r\nINFO - oHcyjWO - discovery_module - using discovery type [zen]\r\nINFO - oHcyjWO - node - initialized\r\nINFO - oHcyjWO - node - starting ...\r\nINFO - oHcyjWO - transport_service - publish_address {127.0.0.1:9300}, bound_addresses {127.0.0.1:9300}\r\nINFO - oHcyjWO - master_service - zen-disco-elected-as-master ([0] nodes joined)[, ], reason: master node changed {previous [], current [{oHcyjWO}{oHcyjWOjTBGfP6s1BLZCFg}{nNLQLvmCR_O4GNWREl-QKQ}{127.0.0.1}{127.0.0.1:9300}{ml.machine_memory=8589934592, ml.max_open_jobs=20, ml.enabled=true}]}\r\nINFO - oHcyjWO - cluster_applier_service - master node changed {previous [], current [{oHcyjWO}{oHcyjWOjTBGfP6s1BLZCFg}{nNLQLvmCR_O4GNWREl-QKQ}{127.0.0.1}{127.0.0.1:9300}{ml.machine_memory=8589934592, ml.max_open_jobs=20, ml.enabled=true}]},reason: apply cluster state (from master [master {oHcyjWO}{oHcyjWOjTBGfP6s1BLZCFg}{nNLQLvmCR_O4GNWREl-QKQ}{127.0.0.1}{127.0.0.1:9300}{ml.machine_memory=8589934592, ml.max_open_jobs=20, ml.enabled=true} committed version [1] source [zen-disco-elected-as-master ([0] nodes joined)[, ]]])\r\nINFO - oHcyjWO - security_netty_4_http_server_transport - publish_address {127.0.0.1:9200}, bound_addresses {127.0.0.1:9200}\r\nINFO - oHcyjWO - node - started\r\nFatal error: Client request error: connect ECONNREFUSED 127.0.0.1:80\r\nerror Command failed with exit code 1.\r\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}