[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/124045516","html_url":"https://github.com/elastic/elasticsearch/issues/12415#issuecomment-124045516","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12415","id":124045516,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNDA0NTUxNg==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-07-23T10:14:38Z","updated_at":"2015-07-23T10:14:38Z","author_association":"MEMBER","body":"@chenryn can you share you cluster state on a gist? you can get it via `GET _cluster/state` . \n\nAlso, can you post the complete logs? you redacted some things for brevity (...(many nodes here)...) but it is important to get a complete picture...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/124082847","html_url":"https://github.com/elastic/elasticsearch/issues/12415#issuecomment-124082847","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12415","id":124082847,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNDA4Mjg0Nw==","user":{"login":"chenryn","id":1219655,"node_id":"MDQ6VXNlcjEyMTk2NTU=","avatar_url":"https://avatars3.githubusercontent.com/u/1219655?v=4","gravatar_id":"","url":"https://api.github.com/users/chenryn","html_url":"https://github.com/chenryn","followers_url":"https://api.github.com/users/chenryn/followers","following_url":"https://api.github.com/users/chenryn/following{/other_user}","gists_url":"https://api.github.com/users/chenryn/gists{/gist_id}","starred_url":"https://api.github.com/users/chenryn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenryn/subscriptions","organizations_url":"https://api.github.com/users/chenryn/orgs","repos_url":"https://api.github.com/users/chenryn/repos","events_url":"https://api.github.com/users/chenryn/events{/privacy}","received_events_url":"https://api.github.com/users/chenryn/received_events","type":"User","site_admin":false},"created_at":"2015-07-23T12:39:59Z","updated_at":"2015-07-23T12:39:59Z","author_association":"NONE","body":"@bleskes I upload cluster state and one circle rejoin logs to https://gist.github.com/chenryn/0aa3ba4742b3741d1f01\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/124453430","html_url":"https://github.com/elastic/elasticsearch/issues/12415#issuecomment-124453430","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12415","id":124453430,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNDQ1MzQzMA==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-07-24T09:20:39Z","updated_at":"2015-07-24T09:20:39Z","author_association":"MEMBER","body":"@chenryn thx. The cluster state in the ES is the same on all nodes except for a little flag indicating witch of the nodes is the local node. Your cluster state misses that flag, which causes the master to publish a new cluster state to itself (which we shouldn't do). This cause it the think there is another master active, responding with telling the other master to stop down. The other master (i.e., the same node) receives the command and steps down only to re-elect it self. \n\nThe biggest question here is how did the node end up not having a local flag set. Do you have any custom plugins installed? Was anything else out of order before this started happening?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/126618180","html_url":"https://github.com/elastic/elasticsearch/issues/12415#issuecomment-126618180","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12415","id":126618180,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNjYxODE4MA==","user":{"login":"chenryn","id":1219655,"node_id":"MDQ6VXNlcjEyMTk2NTU=","avatar_url":"https://avatars3.githubusercontent.com/u/1219655?v=4","gravatar_id":"","url":"https://api.github.com/users/chenryn","html_url":"https://github.com/chenryn","followers_url":"https://api.github.com/users/chenryn/followers","following_url":"https://api.github.com/users/chenryn/following{/other_user}","gists_url":"https://api.github.com/users/chenryn/gists{/gist_id}","starred_url":"https://api.github.com/users/chenryn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenryn/subscriptions","organizations_url":"https://api.github.com/users/chenryn/orgs","repos_url":"https://api.github.com/users/chenryn/repos","events_url":"https://api.github.com/users/chenryn/events{/privacy}","received_events_url":"https://api.github.com/users/chenryn/received_events","type":"User","site_admin":false},"created_at":"2015-07-31T09:14:35Z","updated_at":"2015-07-31T09:14:35Z","author_association":"NONE","body":"No plugin installed. There was one client node died and reboot before the first rejoin happen, the \"10.19.0.96\" in above log.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/126620868","html_url":"https://github.com/elastic/elasticsearch/issues/12415#issuecomment-126620868","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12415","id":126620868,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNjYyMDg2OA==","user":{"login":"chenryn","id":1219655,"node_id":"MDQ6VXNlcjEyMTk2NTU=","avatar_url":"https://avatars3.githubusercontent.com/u/1219655?v=4","gravatar_id":"","url":"https://api.github.com/users/chenryn","html_url":"https://github.com/chenryn","followers_url":"https://api.github.com/users/chenryn/followers","following_url":"https://api.github.com/users/chenryn/following{/other_user}","gists_url":"https://api.github.com/users/chenryn/gists{/gist_id}","starred_url":"https://api.github.com/users/chenryn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenryn/subscriptions","organizations_url":"https://api.github.com/users/chenryn/orgs","repos_url":"https://api.github.com/users/chenryn/repos","events_url":"https://api.github.com/users/chenryn/events{/privacy}","received_events_url":"https://api.github.com/users/chenryn/received_events","type":"User","site_admin":false},"created_at":"2015-07-31T09:25:29Z","updated_at":"2015-07-31T09:25:29Z","author_association":"NONE","body":"btw: what the local flag like? I check the state of another cluster, seems no different of this cluster.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/131687334","html_url":"https://github.com/elastic/elasticsearch/issues/12415#issuecomment-131687334","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12415","id":131687334,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMTY4NzMzNA==","user":{"login":"chenryn","id":1219655,"node_id":"MDQ6VXNlcjEyMTk2NTU=","avatar_url":"https://avatars3.githubusercontent.com/u/1219655?v=4","gravatar_id":"","url":"https://api.github.com/users/chenryn","html_url":"https://github.com/chenryn","followers_url":"https://api.github.com/users/chenryn/followers","following_url":"https://api.github.com/users/chenryn/following{/other_user}","gists_url":"https://api.github.com/users/chenryn/gists{/gist_id}","starred_url":"https://api.github.com/users/chenryn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenryn/subscriptions","organizations_url":"https://api.github.com/users/chenryn/orgs","repos_url":"https://api.github.com/users/chenryn/repos","events_url":"https://api.github.com/users/chenryn/events{/privacy}","received_events_url":"https://api.github.com/users/chenryn/received_events","type":"User","site_admin":false},"created_at":"2015-08-17T05:53:21Z","updated_at":"2015-08-17T05:53:21Z","author_association":"NONE","body":"I got the same problem again:\n\n```\n[2015-08-16 19:05:27,898][WARN ][discovery.zen            ] [10.19.0.100] discovered [[10.19.0.100][DCTdoPzARimCnC3ZAdq2yQ][esnode100.mweibo.bx.sinanode.com][inet[/10.19.0.100:9300]]{max_local_storage_nodes=1, data=false, master=true}] which is also master but with an old\ner cluster_state, telling [[10.19.0.100][DCTdoPzARimCnC3ZAdq2yQ][esnode100.mweibo.bx.sinanode.com][inet[/10.19.0.100:9300]]{max_local_storage_nodes=1, data=false, master=true}] to rejoin the cluster ([via a new cluster state])\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/131800303","html_url":"https://github.com/elastic/elasticsearch/issues/12415#issuecomment-131800303","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12415","id":131800303,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMTgwMDMwMw==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-08-17T12:34:25Z","updated_at":"2015-08-17T12:34:25Z","author_association":"MEMBER","body":"@chenryn sorry for not getting back to you - I was out for two weeks. The flag is something internal and is not serialized to the rest api. You can see it if you connect via the Java API. You say you don't use any plugins. Is there anything else in your deployment that may be unusual? Do you embed ES? Can you reproduce this by any chance with a small setup you can share? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/175059717","html_url":"https://github.com/elastic/elasticsearch/issues/12415#issuecomment-175059717","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12415","id":175059717,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NTA1OTcxNw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-01-26T14:59:52Z","updated_at":"2016-01-26T14:59:52Z","author_association":"CONTRIBUTOR","body":"No more feedback - closing\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/175089368","html_url":"https://github.com/elastic/elasticsearch/issues/12415#issuecomment-175089368","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12415","id":175089368,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NTA4OTM2OA==","user":{"login":"chenryn","id":1219655,"node_id":"MDQ6VXNlcjEyMTk2NTU=","avatar_url":"https://avatars3.githubusercontent.com/u/1219655?v=4","gravatar_id":"","url":"https://api.github.com/users/chenryn","html_url":"https://github.com/chenryn","followers_url":"https://api.github.com/users/chenryn/followers","following_url":"https://api.github.com/users/chenryn/following{/other_user}","gists_url":"https://api.github.com/users/chenryn/gists{/gist_id}","starred_url":"https://api.github.com/users/chenryn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenryn/subscriptions","organizations_url":"https://api.github.com/users/chenryn/orgs","repos_url":"https://api.github.com/users/chenryn/repos","events_url":"https://api.github.com/users/chenryn/events{/privacy}","received_events_url":"https://api.github.com/users/chenryn/received_events","type":"User","site_admin":false},"created_at":"2016-01-26T15:56:36Z","updated_at":"2016-01-26T15:56:36Z","author_association":"NONE","body":"yes, I didn;t reproduce this too.\n","performed_via_github_app":null}]