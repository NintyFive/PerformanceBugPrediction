{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/13459","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13459/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13459/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13459/events","html_url":"https://github.com/elastic/elasticsearch/issues/13459","id":105770455,"node_id":"MDU6SXNzdWUxMDU3NzA0NTU=","number":13459,"title":"[gce] instances don't see each other","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"labels":[{"id":143077482,"node_id":"MDU6TGFiZWwxNDMwNzc0ODI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Snapshot/Restore","name":":Distributed/Snapshot/Restore","color":"0e8a16","default":false,"description":"Anything directly related to the `_snapshot/*` APIs"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2015-09-10T09:38:12Z","updated_at":"2018-02-14T13:49:02Z","closed_at":"2016-08-09T15:42:24Z","author_association":"MEMBER","active_lock_reason":null,"body":"_From @yaraju on July 8, 2015 12:31_\n\nI'm trying out the GCE plugin on ES 1.6.0 with plugin version 2.6.0.\n\nI'm unable to get multicast autodiscovery to work at all.\n\nHere is my [startup script for the instances](https://storage.googleapis.com/prefab-pheonix-365.appspot.com/setup_es_1_6_noauth.sh). (Includes elasticsearch.yml config)\n\nAnd here is the log info when I switch discovery logging to \"TRACE\":\n(NOTE: Logs are of 2nd run where I made a fresh GCloud project with ID: **es-cloud1000**)\n\n```\n[2015-07-08 12:13:45,017][INFO ][node                     ] [Jonathan \"John\" Garrett] version[1.6.0], pid[8724], bu\nild[cdd3ac4/2015-06-09T13:36:34Z]\n[2015-07-08 12:13:45,018][INFO ][node                     ] [Jonathan \"John\" Garrett] initializing ...\n[2015-07-08 12:13:45,055][INFO ][plugins                  ] [Jonathan \"John\" Garrett] loaded [marvel, cloud-gce], sites [marvel, head]\n[2015-07-08 12:13:45,113][INFO ][env                      ] [Jonathan \"John\" Garrett] using [1] data paths, mounts [[/ (/dev/sda1)]], net usable_space [7.8gb], net total_space [9.8gb], types [ext4]\n[2015-07-08 12:13:48,138][DEBUG][discovery.zen.elect      ] [Jonathan \"John\" Garrett] using minimum_master_nodes [-1]\n[2015-07-08 12:13:48,144][DEBUG][discovery.zen.ping.multicast] [Jonathan \"John\" Garrett] using group [224.2.2.4], with port [54328], ttl [3], and address [null]\n[2015-07-08 12:13:48,148][DEBUG][discovery.zen.ping.unicast] [Jonathan \"John\" Garrett] using initial hosts [], with concurrent_connects [10]\n[2015-07-08 12:13:48,149][DEBUG][discovery.gce            ] [Jonathan \"John\" Garrett] using ping.timeout [3s], join.timeout [1m], master_election.filter_client [true], master_election.filter_data [false]\n[2015-07-08 12:13:48,151][DEBUG][discovery.zen.fd         ] [Jonathan \"John\" Garrett] [master] uses ping_interval [1s], ping_timeout [30s], ping_retries [3]\n[2015-07-08 12:13:48,153][DEBUG][discovery.zen.fd         ] [Jonathan \"John\" Garrett] [node  ] uses ping_interval [1s], ping_timeout [30s], ping_retries [3]\n[2015-07-08 12:13:49,196][INFO ][node                     ] [Jonathan \"John\" Garrett] initialized\n[2015-07-08 12:13:49,196][INFO ][node                     ] [Jonathan \"John\" Garrett] starting ...\n[2015-07-08 12:13:49,276][INFO ][transport                ] [Jonathan \"John\" Garrett] bound_address {inet[/0.0.0.0:\n9300]}, publish_address {inet[/10.240.180.235:9300]}\n[2015-07-08 12:13:49,295][INFO ][discovery                ] [Jonathan \"John\" Garrett] dummy/jF69Ngu7Tyu4nYCcsec81g\n[2015-07-08 12:13:49,299][TRACE][discovery.gce            ] [Jonathan \"John\" Garrett] starting to ping\n[2015-07-08 12:13:49,308][TRACE][discovery.zen.ping.multicast] [Jonathan \"John\" Garrett] [1] sending ping request\n[2015-07-08 12:13:49,312][TRACE][discovery.zen.ping.unicast] [Jonathan \"John\" Garrett] [1] connecting to [Jonathan \n\"John\" Garrett][jF69Ngu7Tyu4nYCcsec81g][es-node1.c.escloud-1000.internal][inet[/10.240.180.235:9300]]\n[2015-07-08 12:13:49,344][TRACE][discovery.zen.ping.unicast] [Jonathan \"John\" Garrett] [1] connected to [Jonathan \"\nJohn\" Garrett][jF69Ngu7Tyu4nYCcsec81g][es-node1.c.escloud-1000.internal][inet[/10.240.180.235:9300]]\n[2015-07-08 12:13:49,345][TRACE][discovery.zen.ping.unicast] [Jonathan \"John\" Garrett] [1] sending to [Jonathan \"Jo\nhn\" Garrett][jF69Ngu7Tyu4nYCcsec81g][es-node1.c.escloud-1000.internal][inet[/10.240.180.235:9300]]\n[2015-07-08 12:13:49,372][TRACE][discovery.zen.ping.unicast] [Jonathan \"John\" Garrett] [1] received response from [\nJonathan \"John\" Garrett][jF69Ngu7Tyu4nYCcsec81g][es-node1.c.escloud-1000.internal][inet[/10.240.180.235:9300]]: [pi\nng_response{node [[Jonathan \"John\" Garrett][jF69Ngu7Tyu4nYCcsec81g][es-node1.c.escloud-1000.internal][inet[/10.240.\n180.235:9300]]], id[1], master [null], hasJoinedOnce [false], cluster_name[dummy]}, ping_response{node [[Jonathan \"\nJohn\" Garrett][jF69Ngu7Tyu4nYCcsec81g][es-node1.c.escloud-1000.internal][inet[/10.240.180.235:9300]]], id[2], maste\nr [null], hasJoinedOnce [false], cluster_name[dummy]}]\n[2015-07-08 12:13:50,810][TRACE][discovery.zen.ping.multicast] [Jonathan \"John\" Garrett] [1] sending ping request\n[2015-07-08 12:13:50,812][TRACE][discovery.zen.ping.unicast] [Jonathan \"John\" Garrett] [1] sending to [Jonathan \"Jo\nhn\" Garrett][jF69Ngu7Tyu4nYCcsec81g][es-node1.c.escloud-1000.internal][inet[/10.240.180.235:9300]]\n[2015-07-08 12:13:50,819][TRACE][discovery.zen.ping.unicast] [Jonathan \"John\" Garrett] [1] received response from [\nJonathan \"John\" Garrett][jF69Ngu7Tyu4nYCcsec81g][es-node1.c.escloud-1000.internal][inet[/10.240.180.235:9300]]: [pi\nng_response{node [[Jonathan \"John\" Garrett][jF69Ngu7Tyu4nYCcsec81g][es-node1.c.escloud-1000.internal][inet[/10.240.\n180.235:9300]]], id[1], master [null], hasJoinedOnce [false], cluster_name[dummy]}, ping_response{node [[Jonathan \"\nJohn\" Garrett][jF69Ngu7Tyu4nYCcsec81g][es-node1.c.escloud-1000.internal][inet[/10.240.180.235:9300]]], id[3], maste\nr [null], hasJoinedOnce [false], cluster_name[dummy]}, ping_response{node [[Jonathan \"John\" Garrett][jF69Ngu7Tyu4nY\nCcsec81g][es-node1.c.escloud-1000.internal][inet[/10.240.180.235:9300]]], id[4], master [null], hasJoinedOnce [fals\ne], cluster_name[dummy]}]\n[2015-07-08 12:13:52,313][TRACE][discovery.zen.ping.multicast] [Jonathan \"John\" Garrett] [1] sending last pings\n[2015-07-08 12:13:52,314][TRACE][discovery.zen.ping.multicast] [Jonathan \"John\" Garrett] [1] sending ping request\n[2015-07-08 12:13:52,321][TRACE][discovery.zen.ping.unicast] [Jonathan \"John\" Garrett] [1] sending to [Jonathan \"Jo\nhn\" Garrett][jF69Ngu7Tyu4nYCcsec81g][es-node1.c.escloud-1000.internal][inet[/10.240.180.235:9300]]\n[2015-07-08 12:13:52,328][TRACE][discovery.zen.ping.unicast] [Jonathan \"John\" Garrett] [1] received response from [\nJonathan \"John\" Garrett][jF69Ngu7Tyu4nYCcsec81g][es-node1.c.escloud-1000.internal][inet[/10.240.180.235:9300]]: [pi\nng_response{node [[Jonathan \"John\" Garrett][jF69Ngu7Tyu4nYCcsec81g][es-node1.c.escloud-1000.internal][inet[/10.240.\n180.235:9300]]], id[1], master [null], hasJoinedOnce [false], cluster_name[dummy]}, ping_response{node [[Jonathan \"\nJohn\" Garrett][jF69Ngu7Tyu4nYCcsec81g][es-node1.c.escloud-1000.internal][inet[/10.240.180.235:9300]]], id[3], maste\nr [null], hasJoinedOnce [false], cluster_name[dummy]}, ping_response{node [[Jonathan \"John\" Garrett][jF69Ngu7Tyu4nY\nCcsec81g][es-node1.c.escloud-1000.internal][inet[/10.240.180.235:9300]]], id[5], master [null], hasJoinedOnce [fals\ne], cluster_name[dummy]}, ping_response{node [[Jonathan \"John\" Garrett][jF69Ngu7Tyu4nYCcsec81g][es-node1.c.escloud-\n1000.internal][inet[/10.240.180.235:9300]]], id[6], master [null], hasJoinedOnce [false], cluster_name[dummy]}]\n[2015-07-08 12:13:53,065][TRACE][discovery.gce            ] [Jonathan \"John\" Garrett] full ping responses: {none}\n[2015-07-08 12:13:53,066][DEBUG][discovery.gce            ] [Jonathan \"John\" Garrett] filtered ping responses: (fil\nter_client[true], filter_data[false]) {none}\n[2015-07-08 12:13:53,076][INFO ][cluster.service          ] [Jonathan \"John\" Garrett] new_master [Jonathan \"John\" G\narrett][jF69Ngu7Tyu4nYCcsec81g][es-node1.c.escloud-1000.internal][inet[/10.240.180.235:9300]], reason: zen-disco-jo\nin (elected_as_master)\n[2015-07-08 12:13:53,090][TRACE][discovery.gce            ] [Jonathan \"John\" Garrett] cluster joins counter set to \n[1] (elected as master)\n[2015-07-08 12:13:53,225][INFO ][http                     ] [Jonathan \"John\" Garrett] bound_address {inet[/0.0.0.0:\n9200]}, publish_address {inet[/10.240.180.235:9200]}\n[2015-07-08 12:13:53,229][INFO ][node                     ] [Jonathan \"John\" Garrett] started\n[2015-07-08 12:13:53,367][INFO ][gateway                  ] [Jonathan \"John\" Garrett] recovered [1] indices into cl\nuster_state\n```\n\nPlease let me know if I can provide any additional info.\n\n_Copied from original issue: elastic/elasticsearch-cloud-gce#54_\n","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}