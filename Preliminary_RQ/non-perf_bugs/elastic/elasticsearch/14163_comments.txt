[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148751608","html_url":"https://github.com/elastic/elasticsearch/issues/14163#issuecomment-148751608","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14163","id":148751608,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODc1MTYwOA==","user":{"login":"inqueue","id":6099128,"node_id":"MDQ6VXNlcjYwOTkxMjg=","avatar_url":"https://avatars2.githubusercontent.com/u/6099128?v=4","gravatar_id":"","url":"https://api.github.com/users/inqueue","html_url":"https://github.com/inqueue","followers_url":"https://api.github.com/users/inqueue/followers","following_url":"https://api.github.com/users/inqueue/following{/other_user}","gists_url":"https://api.github.com/users/inqueue/gists{/gist_id}","starred_url":"https://api.github.com/users/inqueue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/inqueue/subscriptions","organizations_url":"https://api.github.com/users/inqueue/orgs","repos_url":"https://api.github.com/users/inqueue/repos","events_url":"https://api.github.com/users/inqueue/events{/privacy}","received_events_url":"https://api.github.com/users/inqueue/received_events","type":"User","site_admin":false},"created_at":"2015-10-16T15:47:51Z","updated_at":"2015-10-16T15:47:51Z","author_association":"MEMBER","body":"FWIW, systemd behaves correctly:\n\n```\n# grep HEAP_SIZE= /etc/sysconfig/elasticsearch\n# Set ES_HEAP_SIZE to 50% of available RAM, but no more than 31g\nES_HEAP_SIZE=80g\n\n# systemctl start elasticsearch.service\n# ^start^status\nsystemctl status elasticsearch.service\nelasticsearch.service - Elasticsearch\n   Loaded: loaded (/usr/lib/systemd/system/elasticsearch.service; enabled)\n   Active: failed (Result: exit-code) since Fri 2015-10-16 11:45:51 EDT; 9s ago\n     Docs: http://www.elastic.co\n  Process: 11224 ExecStart=/usr/share/elasticsearch/bin/elasticsearch -Des.pidfile=$PID_DIR/elasticsearch.pid -Des.default.path.home=$ES_HOME -Des.default.path.logs=$LOG_DIR -Des.default.path.data=$DATA_DIR -Des.default.config=$CONF_FILE -Des.default.path.conf=$CONF_DIR (code=exited, status=1/FAILURE)\n Main PID: 11224 (code=exited, status=1/FAILURE)\n\nOct 16 11:45:51 es-mon.zmb.moc systemd[1]: Starting Elasticsearch...\nOct 16 11:45:51 es-mon.zmb.moc systemd[1]: Started Elasticsearch.\nOct 16 11:45:51 es-mon.zmb.moc elasticsearch[11224]: Java HotSpot(TM) 64-Bit Server VM warning: INFO: os::commit_me...=12)\nOct 16 11:45:51 es-mon.zmb.moc systemd[1]: elasticsearch.service: main process exited, code=exited, status=1/FAILURE\nOct 16 11:45:51 es-mon.zmb.moc systemd[1]: Unit elasticsearch.service entered failed state.\nHint: Some lines were ellipsized, use -l to show in full.\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148837892","html_url":"https://github.com/elastic/elasticsearch/issues/14163#issuecomment-148837892","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14163","id":148837892,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODgzNzg5Mg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2015-10-16T21:11:31Z","updated_at":"2015-10-16T21:11:31Z","author_association":"MEMBER","body":"With an RPM built and installed from #14170, we now see the following behavior on a Centos 6.7 system:\n\n```\n$ cat /etc/redhat-release\nCentOS release 6.7 (Final)\n$ sudo service elasticsearch start\nStarting elasticsearch: Java HotSpot(TM) 64-Bit Server VM warning: INFO: os::commit_memory(0x00007fda5a660000, 85724889088, 0) failed; error='Cannot allocate memory' (errno=12)\n#\n# There is insufficient memory for the Java Runtime Environment to continue.\n# Native memory allocation (mmap) failed to map 85724889088 bytes for committing reserved memory.\n# An error report file with more information is saved as:\n# /tmp/hs_err_pid12673.log\n                                                           [FAILED]\n$ echo $?\n1\n```\n\ninstead of the behavior reported in this issue of printing `[  OK  ]` and returning exit status 0.\n","performed_via_github_app":null}]