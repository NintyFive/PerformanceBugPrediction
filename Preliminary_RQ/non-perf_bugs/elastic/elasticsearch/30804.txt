{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/30804","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30804/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30804/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30804/events","html_url":"https://github.com/elastic/elasticsearch/issues/30804","id":325623355,"node_id":"MDU6SXNzdWUzMjU2MjMzNTU=","number":30804,"title":"MachineLearningTests.testNoAttributes_givenSameAndMlEnabled fails due to trying to directly set node.attr.ml.enabled","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"labels":[{"id":912833043,"node_id":"MDU6TGFiZWw5MTI4MzMwNDM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:ml","name":":ml","color":"0e8a16","default":false,"description":"Machine learning"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"assignees":[{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2018-05-23T09:30:28Z","updated_at":"2018-06-13T14:48:52Z","closed_at":"2018-05-23T09:52:53Z","author_association":"MEMBER","active_lock_reason":null,"body":"Example failure: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.3+intake/100/console\r\n\r\nReproduce command:\r\n```\r\n./gradlew :x-pack:plugin:ml:test -Dtests.seed=1FF9AADB15A8BF2A -Dtests.class=org.elasticsearch.xpack.ml.MachineLearningTests -Dtests.method=\"testNoAttributes_givenSameAndMlEnabled\" -Dtests.security.manager=true -Dtests.locale=hu-HU -Dtests.timezone=Etc/GMT-0\r\n```\r\n\r\nIt looks like this is as a result of the changes made in https://github.com/elastic/elasticsearch/commit/30b004f582fa44d630fe1a910089d0821e6fcc26. @droberts195 is working on a fix for this.\r\n\r\nFailure stack trace:\r\n```\r\n09:10:34 ERROR   0.04s J2 | MachineLearningTests.testNoAttributes_givenSameAndMlEnabled <<< FAILURES!\r\n09:10:34    > Throwable #1: java.lang.IllegalArgumentException: Directly setting [node.attr.ml.enabled] is not permitted - it is reserved for machine learning. If your intention was to customize machine learning, set the [xpack.ml.enabled] setting instead.\r\n09:10:34    > \tat __randomizedtesting.SeedInfo.seed([1FF9AADB15A8BF2A:43DD702474BC0633]:0)\r\n09:10:34   2> NOTE: leaving temporary files on disk at: /var/lib/jenkins/workspace/elastic+elasticsearch+6.3+intake/x-pack/plugin/ml/build/testrun/test/J2/temp/org.elasticsearch.xpack.ml.MachineLearningTests_1FF9AADB15A8BF2A-001\r\n09:10:34   2> NOTE: test params are: codec=Asserting(Lucene70): {}, docValues:{}, maxPointsInLeafNode=1487, maxMBSortInHeap=7.5181168679555945, sim=RandomSimilarity(queryNorm=false): {}, locale=hu-HU, timezone=Etc/GMT-0\r\n09:10:34    > \tat org.elasticsearch.xpack.ml.MachineLearning.reportClashingNodeAttribute(MachineLearning.java:342)\r\n09:10:34   2> NOTE: Linux 4.4.0-1055-aws amd64/Oracle Corporation 1.8.0_162 (64-bit)/cpus=4,threads=1,free=421484672,total=514850816\r\n09:10:34    > \tat org.elasticsearch.xpack.ml.MachineLearning.addMlNodeAttribute(MachineLearning.java:327)\r\n09:10:34   2> NOTE: All tests run in this JVM: [CppLogMessageHandlerTests, NormalizerTests, NameResolverTests, DataLoadParamsTests, CsvParserTests, AuditorTests, JsonDataToProcessWriterTests, CategoryDefinitionTests, ModelPlotConfigWriterTests, TimeRangeTests, CountingInputStreamTests, TransportGetJobsStatsActionTests, FlushAcknowledgementTests, InfluenceTests, DatafeedNodeSelectorTests, NormalizerResultHandlerTests, ConnectiveTests, AutodetectCommunicatorTests, RuleConditionTypeTests, InfluencersQueryBuilderTests, MlDailyManagementServiceTests, TransportStartDatafeedActionTests, ChainTaskExecutorTests, ExpiredResultsRemoverTests, AggregationToJsonProcessorTests, NativeAutodetectProcessTests, DataExtractorFactoryTests, DateFormatDateTransformerTests, DetectorFunctionTests, SearchHitToJsonProcessorTests, BucketNormalizableTests, PartitionScoreTests, NativeControllerTests, MachineLearningFeatureSetTests, MachineLearningTests]\r\n09:10:34    > \tat org.elasticsearch.xpack.ml.MachineLearning.additionalSettings(MachineLearning.java:311)\r\n09:10:34    > \tat org.elasticsearch.xpack.ml.MachineLearningTests.testNoAttributes_givenSameAndMlEnabled(MachineLearningTests.java:49)\r\n09:10:34    > \tat java.lang.Thread.run(Thread.java:748)\r\n```","closed_by":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"performed_via_github_app":null}