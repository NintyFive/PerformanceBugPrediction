{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/47265","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47265/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47265/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47265/events","html_url":"https://github.com/elastic/elasticsearch/issues/47265","id":499793215,"node_id":"MDU6SXNzdWU0OTk3OTMyMTU=","number":47265,"title":"Debian 10 - xpack.ml.enabled: false - elasticsearch does not start","user":{"login":"tstoco","id":5285975,"node_id":"MDQ6VXNlcjUyODU5NzU=","avatar_url":"https://avatars3.githubusercontent.com/u/5285975?v=4","gravatar_id":"","url":"https://api.github.com/users/tstoco","html_url":"https://github.com/tstoco","followers_url":"https://api.github.com/users/tstoco/followers","following_url":"https://api.github.com/users/tstoco/following{/other_user}","gists_url":"https://api.github.com/users/tstoco/gists{/gist_id}","starred_url":"https://api.github.com/users/tstoco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstoco/subscriptions","organizations_url":"https://api.github.com/users/tstoco/orgs","repos_url":"https://api.github.com/users/tstoco/repos","events_url":"https://api.github.com/users/tstoco/events{/privacy}","received_events_url":"https://api.github.com/users/tstoco/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-09-28T16:39:40Z","updated_at":"2019-09-28T16:54:57Z","closed_at":"2019-09-28T16:53:27Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\n\r\n** Please read the guidelines below. **\r\n\r\nIssues that do not follow these guidelines are likely to be closed.\r\n\r\n1.  GitHub is reserved for bug reports and feature requests. The best place to\r\n    ask a general question is at the Elastic [forums](https://discuss.elastic.co).\r\n    GitHub is not the place for general questions.\r\n\r\n2.  Is this bug report or feature request for a supported OS? If not, it\r\n    is likely to be closed.  See https://www.elastic.co/support/matrix#show_os\r\n\r\n3.  Please fill out EITHER the feature request block or the bug report block\r\n    below, and delete the other block.\r\n\r\n-->\r\n\r\n**Describe the feature**:\r\n\r\n<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`): 7.3.2\r\n\r\n**Plugins installed**: N/A default installation \r\n\r\n**JVM version** (`java -version`):\r\n\r\nopenjdk 11.0.4 2019-07-16\r\nOpenJDK Runtime Environment (build 11.0.4+11-post-Debian-1deb10u1)\r\nOpenJDK 64-Bit Server VM (build 11.0.4+11-post-Debian-1deb10u1, mixed mode, sharing)\r\n\r\n**OS version** (`uname -a` if on a Unix-like system):\r\nLinux WS-SVR1-HOME 4.19.0-5-amd64 #1 SMP Debian 4.19.37-5 (2019-06-19) x86_64 GNU/Linux\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nelasticsearch does not start and in the logs it is saying : \r\n\r\nFailure running machine learning native code. This could be due to running on an unsupported OS or distribution, missing OS libraries, or a problem with the temp directory. To bypass this problem by running Elasticsearch without machine learning functionality set [xpack.ml.enabled: false].]\r\n\r\n**Steps to reproduce**:\r\n\r\n1 - Install ElasticSearch as instructed by the official documentation.\r\n2 - Start ElasticSearch using /etc/init.d/elasticsearch start\r\n\r\n**Provide logs (if relevant)**:\r\n```\r\n\r\nroot@WS-SVR1-HOME:/etc/elasticsearch# cat elasticsearch.yml\r\n# ======================== Elasticsearch Configuration =========================\r\n#\r\n# NOTE: Elasticsearch comes with reasonable defaults for most settings.\r\n#       Before you set out to tweak and tune the configuration, make sure you\r\n#       understand what are you trying to accomplish and the consequences.\r\n#\r\n# The primary way of configuring a node is via this file. This template lists\r\n# the most important settings you may want to configure for a production cluster.\r\n#\r\n# Please consult the documentation for further information on configuration options:\r\n# https://www.elastic.co/guide/en/elasticsearch/reference/index.html\r\n#\r\n# ---------------------------------- Cluster -----------------------------------\r\n#\r\n# Use a descriptive name for your cluster:\r\n#\r\n#cluster.name: my-application\r\n#\r\n# ------------------------------------ Node ------------------------------------\r\n#\r\n# Use a descriptive name for the node:\r\n#\r\n#node.name: node-1\r\n#\r\n# Add custom attributes to the node:\r\n#\r\n#node.attr.rack: r1\r\n#\r\n# ----------------------------------- Paths ------------------------------------\r\n#\r\n# Path to directory where to store the data (separate multiple locations by comma):\r\n#\r\npath.data: /var/lib/elasticsearch\r\n#\r\n# Path to log files:\r\n#\r\npath.logs: /var/log/elasticsearch\r\n#\r\n# ----------------------------------- Memory -----------------------------------\r\n#\r\n# Lock the memory on startup:\r\n#\r\n#bootstrap.memory_lock: true\r\n#\r\n# Make sure that the heap size is set to about half the memory available\r\n# on the system and that the owner of the process is allowed to use this\r\n# limit.\r\n#\r\n# Elasticsearch performs poorly when the system is swapping the memory.\r\n#\r\n# ---------------------------------- Network -----------------------------------\r\n#\r\n# Set the bind address to a specific IP (IPv4 or IPv6):\r\n#\r\n#network.host: 192.168.0.1\r\n#\r\n# Set a custom port for HTTP:\r\n#\r\n#http.port: 9200\r\n#\r\n# For more information, consult the network module documentation.\r\n#\r\n# --------------------------------- Discovery ----------------------------------\r\n#\r\n# Pass an initial list of hosts to perform discovery when this node is started:\r\n# The default list of hosts is [\"127.0.0.1\", \"[::1]\"]\r\n#\r\n#discovery.seed_hosts: [\"host1\", \"host2\"]\r\n#\r\n# Bootstrap the cluster using an initial set of master-eligible nodes:\r\n#\r\n#cluster.initial_master_nodes: [\"node-1\", \"node-2\"]\r\n#\r\n# For more information, consult the discovery and cluster formation module documentation.\r\n#\r\n# ---------------------------------- Gateway -----------------------------------\r\n#\r\n# Block initial recovery after a full cluster restart until N nodes are started:\r\n#\r\n#gateway.recover_after_nodes: 3\r\n#\r\n# For more information, consult the gateway module documentation.\r\n#\r\n# ---------------------------------- Various -----------------------------------\r\n#\r\n# Require explicit names when deleting indices:\r\n#\r\n#action.destructive_requires_name: true\r\nbootstrap.memory_lock: true\r\n#cluster.name: fsmonitoring\r\n#discovery:\r\n#    zen:\r\n#        minimum_master_nodes: 1\r\n#        ping.unicast.hosts: backend-plugins:9300\r\nhttp.port: 9200\r\nnetwork.host: 192.168.10.10\r\n#node:\r\n#    data: false\r\n#    ingest: false\r\n#    master: true\r\n#node.name: master\r\n#transport.tcp.port: 9300\r\n\r\n\r\n\r\n\r\n#################################### Paths ####################################\r\n\r\n# Path to directory containing configuration (this file and logging.yml):\r\n\r\nxpack.security.enabled: false\r\n\r\nxpack.watcher.enabled: false\r\n\r\nxpack.ml.enabled: false\r\n\r\nxpack.graph.enabled: false\r\n\r\n```\r\n\r\nelasticsearch logs :\r\n\r\n```\r\n[2019-09-28T14:44:14,259][INFO ][o.e.e.NodeEnvironment    ] [WS-SVR1-HOME] using [1] data paths, mounts [[/ (/dev/sda1)]], net usable_space [10.3gb], net total_space [16.2gb], types [ext4]\r\n[2019-09-28T14:44:14,271][INFO ][o.e.e.NodeEnvironment    ] [WS-SVR1-HOME] heap size [1007.3mb], compressed ordinary object pointers [true]\r\n[2019-09-28T14:44:14,284][INFO ][o.e.n.Node               ] [WS-SVR1-HOME] node name [WS-SVR1-HOME], node ID [N5BhVuxcRg69GLZyREhKFQ], cluster name [elasticsearch]\r\n[2019-09-28T14:44:14,285][INFO ][o.e.n.Node               ] [WS-SVR1-HOME] version[7.3.2], pid[5799], build[default/deb/1c1faf1/2019-09-06T14:40:30.409026Z], OS[Linux/4.19.0-5-amd64/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/12.0.2/12.0.2+10]\r\n[2019-09-28T14:44:14,286][INFO ][o.e.n.Node               ] [WS-SVR1-HOME] JVM home [/usr/share/elasticsearch/jdk]\r\n[2019-09-28T14:44:14,287][INFO ][o.e.n.Node               ] [WS-SVR1-HOME] JVM arguments [-Xms1g, -Xmx1g, -XX:+UseConcMarkSweepGC, -XX:CMSInitiatingOccupancyFraction=75, -XX:+UseCMSInitiatingOccupancyOnly, -Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Djava.io.tmpdir=/tmp/elasticsearch-14455953153394537060, -XX:+HeapDumpOnOutOfMemoryError, -XX:HeapDumpPath=/var/lib/elasticsearch, -XX:ErrorFile=/var/log/elasticsearch/hs_err_pid%p.log, -Xlog:gc*,gc+age=trace,safepoint:file=/var/log/elasticsearch/gc.log:utctime,pid,tags:filecount=32,filesize=64m, -Djava.locale.providers=COMPAT, -Dio.netty.allocator.type=unpooled, -XX:MaxDirectMemorySize=536870912, -Des.path.home=/usr/share/elasticsearch, -Des.path.conf=/etc/elasticsearch, -Des.distribution.flavor=default, -Des.distribution.type=deb, -Des.bundled_jdk=true]\r\n[2019-09-28T14:44:23,657][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [aggs-matrix-stats]\r\n[2019-09-28T14:44:23,660][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [analysis-common]\r\n[2019-09-28T14:44:23,662][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [data-frame]\r\n[2019-09-28T14:44:23,666][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [flattened]\r\n[2019-09-28T14:44:23,666][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [ingest-common]\r\n[2019-09-28T14:44:23,667][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [ingest-geoip]\r\n[2019-09-28T14:44:23,668][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [ingest-user-agent]\r\n[2019-09-28T14:44:23,669][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [lang-expression]\r\n[2019-09-28T14:44:23,672][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [lang-mustache]\r\n[2019-09-28T14:44:23,674][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [lang-painless]\r\n[2019-09-28T14:44:23,676][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [mapper-extras]\r\n[2019-09-28T14:44:23,677][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [parent-join]\r\n[2019-09-28T14:44:23,678][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [percolator]\r\n[2019-09-28T14:44:23,679][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [rank-eval]\r\n[2019-09-28T14:44:23,681][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [reindex]\r\n[2019-09-28T14:44:23,682][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [repository-url]\r\n[2019-09-28T14:44:23,683][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [transport-netty4]\r\n[2019-09-28T14:44:23,683][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [vectors]\r\n[2019-09-28T14:44:23,684][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [x-pack-ccr]\r\n[2019-09-28T14:44:23,687][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [x-pack-core]\r\n[2019-09-28T14:44:23,689][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [x-pack-deprecation]\r\n[2019-09-28T14:44:23,690][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [x-pack-graph]\r\n[2019-09-28T14:44:23,693][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [x-pack-ilm]\r\n[2019-09-28T14:44:23,695][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [x-pack-logstash]\r\n[2019-09-28T14:44:23,698][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [x-pack-ml]\r\n[2019-09-28T14:44:23,699][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [x-pack-monitoring]\r\n[2019-09-28T14:44:23,702][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [x-pack-rollup]\r\n[2019-09-28T14:44:23,703][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [x-pack-security]\r\n[2019-09-28T14:44:23,705][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [x-pack-sql]\r\n[2019-09-28T14:44:23,706][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [x-pack-voting-only-node]\r\n[2019-09-28T14:44:23,706][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] loaded module [x-pack-watcher]\r\n[2019-09-28T14:44:23,710][INFO ][o.e.p.PluginsService     ] [WS-SVR1-HOME] no plugins loaded\r\n[2019-09-28T14:44:43,139][INFO ][o.e.x.s.a.s.FileRolesStore] [WS-SVR1-HOME] parsed [0] roles from file [/etc/elasticsearch/roles.yml]\r\n[2019-09-28T14:44:56,410][ERROR][o.e.b.Bootstrap          ] [WS-SVR1-HOME] Exception\r\norg.elasticsearch.ElasticsearchException: Failure running machine learning native code. This could be due to running on an unsupported OS or distribution, missing OS libraries, or a problem with the temp directory. To bypass this problem by running Elasticsearch without machine learning functionality set [xpack.ml.enabled: false].\r\n        at org.elasticsearch.xpack.ml.MachineLearning.createComponents(MachineLearning.java:497) ~[?:?]\r\n        at org.elasticsearch.node.Node.lambda$new$9(Node.java:457) ~[elasticsearch-7.3.2.jar:7.3.2]\r\n        at java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:271) ~[?:?]\r\n        at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1654) ~[?:?]\r\n        at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484) ~[?:?]\r\n        at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474) ~[?:?]\r\n        at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:913) ~[?:?]\r\n        at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[?:?]\r\n        at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:578) ~[?:?]\r\n        at org.elasticsearch.node.Node.<init>(Node.java:460) ~[elasticsearch-7.3.2.jar:7.3.2]\r\n        at org.elasticsearch.node.Node.<init>(Node.java:258) ~[elasticsearch-7.3.2.jar:7.3.2]\r\n        at org.elasticsearch.bootstrap.Bootstrap$5.<init>(Bootstrap.java:221) ~[elasticsearch-7.3.2.jar:7.3.2]\r\n        at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:221) ~[elasticsearch-7.3.2.jar:7.3.2]\r\n        at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:349) [elasticsearch-7.3.2.jar:7.3.2]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:159) [elasticsearch-7.3.2.jar:7.3.2]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:150) [elasticsearch-7.3.2.jar:7.3.2]\r\n        at org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:86) [elasticsearch-7.3.2.jar:7.3.2]\r\n        at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124) [elasticsearch-cli-7.3.2.jar:7.3.2]\r\n        at org.elasticsearch.cli.Command.main(Command.java:90) [elasticsearch-cli-7.3.2.jar:7.3.2]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:115) [elasticsearch-7.3.2.jar:7.3.2]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:92) [elasticsearch-7.3.2.jar:7.3.2]\r\n[2019-09-28T14:44:56,466][WARN ][o.e.b.ElasticsearchUncaughtExceptionHandler] [WS-SVR1-HOME] uncaught exception in thread [main]\r\norg.elasticsearch.bootstrap.StartupException: ElasticsearchException[Failure running machine learning native code. This could be due to running on an unsupported OS or distribution, missing OS libraries, or a problem with the temp directory. To bypass this problem by running Elasticsearch without machine learning functionality set [xpack.ml.enabled: false].]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:163) ~[elasticsearch-7.3.2.jar:7.3.2]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:150) ~[elasticsearch-7.3.2.jar:7.3.2]\r\n        at org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:86) ~[elasticsearch-7.3.2.jar:7.3.2]\r\n        at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124) ~[elasticsearch-cli-7.3.2.jar:7.3.2]\r\n        at org.elasticsearch.cli.Command.main(Command.java:90) ~[elasticsearch-cli-7.3.2.jar:7.3.2]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:115) ~[elasticsearch-7.3.2.jar:7.3.2]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:92) ~[elasticsearch-7.3.2.jar:7.3.2]\r\nCaused by: org.elasticsearch.ElasticsearchException: Failure running machine learning native code. This could be due to running on an unsupported OS or distribution, missing OS libraries, or a problem with the temp directory. To bypass this problem by running Elasticsearch without machine learning functionality set [xpack.ml.enabled: false].\r\n        at org.elasticsearch.xpack.ml.MachineLearning.createComponents(MachineLearning.java:497) ~[?:?]\r\n        at org.elasticsearch.node.Node.lambda$new$9(Node.java:457) ~[elasticsearch-7.3.2.jar:7.3.2]\r\n        at java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:271) ~[?:?]\r\n        at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1654) ~[?:?]\r\n        at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484) ~[?:?]\r\n        at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474) ~[?:?]\r\n        at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:913) ~[?:?]\r\n        at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[?:?]\r\n        at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:578) ~[?:?]\r\n        at org.elasticsearch.node.Node.<init>(Node.java:460) ~[elasticsearch-7.3.2.jar:7.3.2]\r\n        at org.elasticsearch.node.Node.<init>(Node.java:258) ~[elasticsearch-7.3.2.jar:7.3.2]\r\n        at org.elasticsearch.bootstrap.Bootstrap$5.<init>(Bootstrap.java:221) ~[elasticsearch-7.3.2.jar:7.3.2]\r\n        at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:221) ~[elasticsearch-7.3.2.jar:7.3.2]\r\n        at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:349) ~[elasticsearch-7.3.2.jar:7.3.2]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:159) ~[elasticsearch-7.3.2.jar:7.3.2]\r\n        ... 6 more\r\n\r\n```","closed_by":{"login":"tstoco","id":5285975,"node_id":"MDQ6VXNlcjUyODU5NzU=","avatar_url":"https://avatars3.githubusercontent.com/u/5285975?v=4","gravatar_id":"","url":"https://api.github.com/users/tstoco","html_url":"https://github.com/tstoco","followers_url":"https://api.github.com/users/tstoco/followers","following_url":"https://api.github.com/users/tstoco/following{/other_user}","gists_url":"https://api.github.com/users/tstoco/gists{/gist_id}","starred_url":"https://api.github.com/users/tstoco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstoco/subscriptions","organizations_url":"https://api.github.com/users/tstoco/orgs","repos_url":"https://api.github.com/users/tstoco/repos","events_url":"https://api.github.com/users/tstoco/events{/privacy}","received_events_url":"https://api.github.com/users/tstoco/received_events","type":"User","site_admin":false},"performed_via_github_app":null}