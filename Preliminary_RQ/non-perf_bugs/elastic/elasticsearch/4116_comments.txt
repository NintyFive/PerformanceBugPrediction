[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/27986740","html_url":"https://github.com/elastic/elasticsearch/issues/4116#issuecomment-27986740","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4116","id":27986740,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTg2NzQw","user":{"login":"roytmana","id":2524911,"node_id":"MDQ6VXNlcjI1MjQ5MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2524911?v=4","gravatar_id":"","url":"https://api.github.com/users/roytmana","html_url":"https://github.com/roytmana","followers_url":"https://api.github.com/users/roytmana/followers","following_url":"https://api.github.com/users/roytmana/following{/other_user}","gists_url":"https://api.github.com/users/roytmana/gists{/gist_id}","starred_url":"https://api.github.com/users/roytmana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roytmana/subscriptions","organizations_url":"https://api.github.com/users/roytmana/orgs","repos_url":"https://api.github.com/users/roytmana/repos","events_url":"https://api.github.com/users/roytmana/events{/privacy}","received_events_url":"https://api.github.com/users/roytmana/received_events","type":"User","site_admin":false},"created_at":"2013-11-07T17:29:30Z","updated_at":"2013-11-07T17:29:30Z","author_association":"NONE","body":"Hi @javanna just checked it out and made a build. now more records are highlighted but not all\nalso when I search on some words  bunch of fields get highlighted  from start which has nothing to do with the word I am searching on (but the word in the legitimate field does occur at the start of the field) and the same with another word in the middle it highlight bunch of the fields in the same position.\n\nthe problem I think is because  there are very many fields named \"name\"  in various mappings (for example award.type.name) and they all are lumped together somehow! \n\n```\n\"award\": {\n....\n\"type\": {\n              \"dynamic\": \"true\",\n              \"properties\": {\n                \"id\": {\n                  \"type\": \"integer\",\n                  \"include_in_all\": false\n                },\n                \"name\": {\n                  \"type\": \"multi_field\",\n                  \"path\": \"just_name\",\n                  \"fields\": {\n                    \"name\": {\n                      \"type\": \"string\",\n                      \"index_options\": \"offsets\",\n                      \"boost\": 0.3\n                    },\n                    \"all\": {\n                      \"type\": \"string\",\n                      \"index_options\": \"offsets\",\n                      \"boost\": 0.01\n                    },\n                    \"all_stem\": {\n                      \"type\": \"string\",\n                      \"index_options\": \"offsets\",\n                      \"boost\": 0.01\n                    }\n                  }\n                }\n              }\n            }\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/27998702","html_url":"https://github.com/elastic/elasticsearch/issues/4116#issuecomment-27998702","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4116","id":27998702,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTk4NzAy","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2013-11-07T19:37:09Z","updated_at":"2013-11-07T19:42:55Z","author_association":"MEMBER","body":"I see what you mean, I think it happens using `\"path\":\"just_name\"` for different fields with same name but different path. That leads to having different json fields merged into the same lucene field, but the content that is loaded from the `_source` is only part of it, thus the offsets don't match the field content.\n\nI think the same would happen with the fast vector highlighter too, while with the plain highlighter it doesn't happen because the text is being re-analyzed on-the-fly.\n\nCan you open another issue with a small recreation for it?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/27999514","html_url":"https://github.com/elastic/elasticsearch/issues/4116#issuecomment-27999514","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4116","id":27999514,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTk5NTE0","user":{"login":"roytmana","id":2524911,"node_id":"MDQ6VXNlcjI1MjQ5MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2524911?v=4","gravatar_id":"","url":"https://api.github.com/users/roytmana","html_url":"https://github.com/roytmana","followers_url":"https://api.github.com/users/roytmana/followers","following_url":"https://api.github.com/users/roytmana/following{/other_user}","gists_url":"https://api.github.com/users/roytmana/gists{/gist_id}","starred_url":"https://api.github.com/users/roytmana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roytmana/subscriptions","organizations_url":"https://api.github.com/users/roytmana/orgs","repos_url":"https://api.github.com/users/roytmana/repos","events_url":"https://api.github.com/users/roytmana/events{/privacy}","received_events_url":"https://api.github.com/users/roytmana/received_events","type":"User","site_admin":false},"created_at":"2013-11-07T19:46:12Z","updated_at":"2013-11-07T19:46:12Z","author_association":"NONE","body":"Yes I can but i thought that primary field in multifield mapping gets resolved to full name regardless of  the \"just_name\" option. If so why would there be any name clash? \n\nBTW I posted another issue #4108 which seems to be looking into. With all the traffic it is easy to miss but is rather critical for us, could you possible tell me if it is a fixable bug or a feasible enhancement or it can't be achieved?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/28001152","html_url":"https://github.com/elastic/elasticsearch/issues/4116#issuecomment-28001152","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4116","id":28001152,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDAxMTUy","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2013-11-07T20:05:04Z","updated_at":"2013-11-07T20:05:04Z","author_association":"MEMBER","body":"@roytmana the fact that a field gets resolved doesn't say much about how it is actually indexed. When you use \"just_name\" for different fields with different path but same name, they get merged into the same lucene field. E.g. `obj1.name` and `obj2.name` both get indexed into `name`. If you can open the issue and send a full recreation we'll take it from there.\n","performed_via_github_app":null}]