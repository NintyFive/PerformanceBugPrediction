{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/60115","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/60115/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/60115/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/60115/events","html_url":"https://github.com/elastic/elasticsearch/issues/60115","id":664453035,"node_id":"MDU6SXNzdWU2NjQ0NTMwMzU=","number":60115,"title":"Wrong publish_address format in ipv6 network","user":{"login":"chengyang14","id":64069615,"node_id":"MDQ6VXNlcjY0MDY5NjE1","avatar_url":"https://avatars0.githubusercontent.com/u/64069615?v=4","gravatar_id":"","url":"https://api.github.com/users/chengyang14","html_url":"https://github.com/chengyang14","followers_url":"https://api.github.com/users/chengyang14/followers","following_url":"https://api.github.com/users/chengyang14/following{/other_user}","gists_url":"https://api.github.com/users/chengyang14/gists{/gist_id}","starred_url":"https://api.github.com/users/chengyang14/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chengyang14/subscriptions","organizations_url":"https://api.github.com/users/chengyang14/orgs","repos_url":"https://api.github.com/users/chengyang14/repos","events_url":"https://api.github.com/users/chengyang14/events{/privacy}","received_events_url":"https://api.github.com/users/chengyang14/received_events","type":"User","site_admin":false},"labels":[{"id":146854632,"node_id":"MDU6TGFiZWwxNDY4NTQ2MzI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Network","name":":Distributed/Network","color":"0e8a16","default":false,"description":"Http and internode communication implementations"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":1967496670,"node_id":"MDU6TGFiZWwxOTY3NDk2Njcw","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Distributed","name":"Team:Distributed","color":"fef2c0","default":false,"description":"Meta label for distributed team"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-07-23T12:58:09Z","updated_at":"2020-07-28T06:44:21Z","closed_at":"2020-07-28T06:44:21Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Elasticsearch version (bin/elasticsearch --version): 7.6.0\r\n\r\nOn an ipv6 network, `network.host` is set to `_local`_, and `network.publish_host` is not configured.\r\n\r\nnetwork.host will be  parsed as: \r\n```\r\n\"[::1]:9200\",\r\n\"127.0.0.1:9200\"\r\n```\r\n```\r\nGET /_nodes/http?pretty\r\n```\r\n\r\n```\r\n\"http\": {\r\n  \"bound_address\": [\r\n    \"[::1]:9200\",\r\n    \"127.0.0.1:9200\"\r\n  ],\r\n  \"publish_address\": \"0:0:0:0:0:0:0:1%lo/[::1]:9200\",\r\n```\r\n\r\nIn this scenario, publish_address is better to use `ipï¼šport` format then `hostname/ip:port` because` 0:0:0:0:0:0:0:1%lo` is not an\r\navalible hostname.\r\n\r\nThe rest client sniffer needs to parse publish_address to obtain the IP address, `\"0:0:0:0:0:0:0:1%lo/[::1]:9200\"` will cause sniffing exceptions. \r\n","closed_by":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"performed_via_github_app":null}