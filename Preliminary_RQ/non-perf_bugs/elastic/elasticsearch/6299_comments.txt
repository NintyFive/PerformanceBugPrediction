[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44024931","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44024931","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44024931,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDI0OTMx","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2014-05-23T15:22:02Z","updated_at":"2014-05-23T15:22:02Z","author_association":"CONTRIBUTOR","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44161325","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44161325","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44161325,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTYxMzI1","user":{"login":"Kumen","id":678427,"node_id":"MDQ6VXNlcjY3ODQyNw==","avatar_url":"https://avatars0.githubusercontent.com/u/678427?v=4","gravatar_id":"","url":"https://api.github.com/users/Kumen","html_url":"https://github.com/Kumen","followers_url":"https://api.github.com/users/Kumen/followers","following_url":"https://api.github.com/users/Kumen/following{/other_user}","gists_url":"https://api.github.com/users/Kumen/gists{/gist_id}","starred_url":"https://api.github.com/users/Kumen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kumen/subscriptions","organizations_url":"https://api.github.com/users/Kumen/orgs","repos_url":"https://api.github.com/users/Kumen/repos","events_url":"https://api.github.com/users/Kumen/events{/privacy}","received_events_url":"https://api.github.com/users/Kumen/received_events","type":"User","site_admin":false},"created_at":"2014-05-26T06:41:43Z","updated_at":"2014-05-26T06:41:43Z","author_association":"NONE","body":"pagination for top_hits aggregator, definitely +1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44245801","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44245801","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44245801,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MjQ1ODAx","user":{"login":"artemredkin","id":537556,"node_id":"MDQ6VXNlcjUzNzU1Ng==","avatar_url":"https://avatars3.githubusercontent.com/u/537556?v=4","gravatar_id":"","url":"https://api.github.com/users/artemredkin","html_url":"https://github.com/artemredkin","followers_url":"https://api.github.com/users/artemredkin/followers","following_url":"https://api.github.com/users/artemredkin/following{/other_user}","gists_url":"https://api.github.com/users/artemredkin/gists{/gist_id}","starred_url":"https://api.github.com/users/artemredkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/artemredkin/subscriptions","organizations_url":"https://api.github.com/users/artemredkin/orgs","repos_url":"https://api.github.com/users/artemredkin/repos","events_url":"https://api.github.com/users/artemredkin/events{/privacy}","received_events_url":"https://api.github.com/users/artemredkin/received_events","type":"User","site_admin":false},"created_at":"2014-05-27T08:03:15Z","updated_at":"2014-05-27T08:03:15Z","author_association":"NONE","body":"Judging by commit a989229bcd70888b3cb9e98ab58fb10ef47f62bc, it seem that you added pagination for hits, but what about groups (buckets) themselves? For example, if i group books by book author and search query returns 9 unique authors, can I show first page with 5 authors and next page with other 4 authors?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44246568","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44246568","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44246568,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MjQ2NTY4","user":{"login":"Kumen","id":678427,"node_id":"MDQ6VXNlcjY3ODQyNw==","avatar_url":"https://avatars0.githubusercontent.com/u/678427?v=4","gravatar_id":"","url":"https://api.github.com/users/Kumen","html_url":"https://github.com/Kumen","followers_url":"https://api.github.com/users/Kumen/followers","following_url":"https://api.github.com/users/Kumen/following{/other_user}","gists_url":"https://api.github.com/users/Kumen/gists{/gist_id}","starred_url":"https://api.github.com/users/Kumen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kumen/subscriptions","organizations_url":"https://api.github.com/users/Kumen/orgs","repos_url":"https://api.github.com/users/Kumen/repos","events_url":"https://api.github.com/users/Kumen/events{/privacy}","received_events_url":"https://api.github.com/users/Kumen/received_events","type":"User","site_admin":false},"created_at":"2014-05-27T08:12:58Z","updated_at":"2014-05-27T08:12:58Z","author_association":"NONE","body":"already tested, your assumption is correct. we need pagination support for buckets.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44253718","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44253718","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44253718,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MjUzNzE4","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2014-05-27T09:33:22Z","updated_at":"2014-05-27T09:33:22Z","author_association":"CONTRIBUTOR","body":"Paging is tricky. We might be able to expose it when sorting by term (would it work for you?), but if you are sorting by counts or by sub aggregation, then  https://github.com/elasticsearch/elasticsearch/issues/1305 would make counts wrong and ordering inconsistent across pages.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44254380","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44254380","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44254380,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MjU0Mzgw","user":{"login":"Kumen","id":678427,"node_id":"MDQ6VXNlcjY3ODQyNw==","avatar_url":"https://avatars0.githubusercontent.com/u/678427?v=4","gravatar_id":"","url":"https://api.github.com/users/Kumen","html_url":"https://github.com/Kumen","followers_url":"https://api.github.com/users/Kumen/followers","following_url":"https://api.github.com/users/Kumen/following{/other_user}","gists_url":"https://api.github.com/users/Kumen/gists{/gist_id}","starred_url":"https://api.github.com/users/Kumen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kumen/subscriptions","organizations_url":"https://api.github.com/users/Kumen/orgs","repos_url":"https://api.github.com/users/Kumen/repos","events_url":"https://api.github.com/users/Kumen/events{/privacy}","received_events_url":"https://api.github.com/users/Kumen/received_events","type":"User","site_admin":false},"created_at":"2014-05-27T09:41:09Z","updated_at":"2014-05-27T09:41:09Z","author_association":"NONE","body":"yes, that would work for me. please expose this feature.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44254442","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44254442","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44254442,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MjU0NDQy","user":{"login":"artemredkin","id":537556,"node_id":"MDQ6VXNlcjUzNzU1Ng==","avatar_url":"https://avatars3.githubusercontent.com/u/537556?v=4","gravatar_id":"","url":"https://api.github.com/users/artemredkin","html_url":"https://github.com/artemredkin","followers_url":"https://api.github.com/users/artemredkin/followers","following_url":"https://api.github.com/users/artemredkin/following{/other_user}","gists_url":"https://api.github.com/users/artemredkin/gists{/gist_id}","starred_url":"https://api.github.com/users/artemredkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/artemredkin/subscriptions","organizations_url":"https://api.github.com/users/artemredkin/orgs","repos_url":"https://api.github.com/users/artemredkin/repos","events_url":"https://api.github.com/users/artemredkin/events{/privacy}","received_events_url":"https://api.github.com/users/artemredkin/received_events","type":"User","site_admin":false},"created_at":"2014-05-27T09:41:58Z","updated_at":"2014-05-27T09:41:58Z","author_association":"NONE","body":"I need at least sort by term and sort by docs count. Is approximate count/paging possible?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44255515","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44255515","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44255515,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MjU1NTE1","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2014-05-27T09:54:02Z","updated_at":"2014-05-27T09:54:02Z","author_association":"CONTRIBUTOR","body":"I'm a bit reluctant to add paging support when sorting by counts given that it would give more accurate results on the 1st result of the 2nd page than on the last one of the 1st page. Please also note that the way it would work behind the scenes would not be different from what you could do on client side by first requesting 10 buckets for the 1st page and then 20 for the 2nd page and disregard the first 10 buckets, etc. for subsequent pages.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44256104","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44256104","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44256104,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MjU2MTA0","user":{"login":"artemredkin","id":537556,"node_id":"MDQ6VXNlcjUzNzU1Ng==","avatar_url":"https://avatars3.githubusercontent.com/u/537556?v=4","gravatar_id":"","url":"https://api.github.com/users/artemredkin","html_url":"https://github.com/artemredkin","followers_url":"https://api.github.com/users/artemredkin/followers","following_url":"https://api.github.com/users/artemredkin/following{/other_user}","gists_url":"https://api.github.com/users/artemredkin/gists{/gist_id}","starred_url":"https://api.github.com/users/artemredkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/artemredkin/subscriptions","organizations_url":"https://api.github.com/users/artemredkin/orgs","repos_url":"https://api.github.com/users/artemredkin/repos","events_url":"https://api.github.com/users/artemredkin/events{/privacy}","received_events_url":"https://api.github.com/users/artemredkin/received_events","type":"User","site_admin":false},"created_at":"2014-05-27T10:00:34Z","updated_at":"2014-05-27T10:00:34Z","author_association":"NONE","body":"Yes, it can be implemented on client (in my system it already is, but it's not very efficient). If there is only one way to sort/page buckets, then clients can either decide in runtime which implementation to use (which requires a lot of code and conditions) or implement grouping themselves altogether. Maybe I can help with some experiments to see if it can be done at all?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44257044","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44257044","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44257044,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MjU3MDQ0","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2014-05-27T10:10:38Z","updated_at":"2014-05-27T10:10:38Z","author_association":"CONTRIBUTOR","body":"I think this feature would be easy to implement, what I'm more concerned about here is to expose a feature that would be error-prone. :(\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44257369","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44257369","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44257369,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MjU3MzY5","user":{"login":"Kumen","id":678427,"node_id":"MDQ6VXNlcjY3ODQyNw==","avatar_url":"https://avatars0.githubusercontent.com/u/678427?v=4","gravatar_id":"","url":"https://api.github.com/users/Kumen","html_url":"https://github.com/Kumen","followers_url":"https://api.github.com/users/Kumen/followers","following_url":"https://api.github.com/users/Kumen/following{/other_user}","gists_url":"https://api.github.com/users/Kumen/gists{/gist_id}","starred_url":"https://api.github.com/users/Kumen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kumen/subscriptions","organizations_url":"https://api.github.com/users/Kumen/orgs","repos_url":"https://api.github.com/users/Kumen/repos","events_url":"https://api.github.com/users/Kumen/events{/privacy}","received_events_url":"https://api.github.com/users/Kumen/received_events","type":"User","site_admin":false},"created_at":"2014-05-27T10:14:36Z","updated_at":"2014-05-27T10:18:50Z","author_association":"NONE","body":"In our system it is already implemented. But we have memory issues on requesting all possible buckets, therefore we need a way to effectively navigate through the buckets on server side. i thought it would help to get the buckets paged from the server.\n\nedit: the memory issues are on the elasticsearch server not on the client side\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44260682","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44260682","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44260682,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MjYwNjgy","user":{"login":"artemredkin","id":537556,"node_id":"MDQ6VXNlcjUzNzU1Ng==","avatar_url":"https://avatars3.githubusercontent.com/u/537556?v=4","gravatar_id":"","url":"https://api.github.com/users/artemredkin","html_url":"https://github.com/artemredkin","followers_url":"https://api.github.com/users/artemredkin/followers","following_url":"https://api.github.com/users/artemredkin/following{/other_user}","gists_url":"https://api.github.com/users/artemredkin/gists{/gist_id}","starred_url":"https://api.github.com/users/artemredkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/artemredkin/subscriptions","organizations_url":"https://api.github.com/users/artemredkin/orgs","repos_url":"https://api.github.com/users/artemredkin/repos","events_url":"https://api.github.com/users/artemredkin/events{/privacy}","received_events_url":"https://api.github.com/users/artemredkin/received_events","type":"User","site_admin":false},"created_at":"2014-05-27T10:59:17Z","updated_at":"2014-05-27T10:59:17Z","author_association":"NONE","body":"You already provide at least one feature, that can be inaccurate - cardinality aggregations. Also, from documentation about terms aggregation:\nThe higher the requested size is, the more accurate the results will be, but also, the more expensive it will be to compute the final results (both due to bigger priority queues that are managed on a shard level and due to bigger data transfers between the nodes and the client).\nSo you also have an error-prone feature as well (clients can set size to 0 on high cardinality field and shoot themselves in the foot).\nAnother consideration, even in case of simple solution you proposed (dropping n-1 pages on elasticsearch side) can be advantageous, since we can run elasticsearch on more powerful machines, then our backends.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44315847","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44315847","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44315847,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MzE1ODQ3","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2014-05-27T18:27:42Z","updated_at":"2014-05-27T18:27:42Z","author_association":"CONTRIBUTOR","body":"This feature already has accuracy issues indeed, but in my opinion paging will make it even worse. For example, let's imagine that your top terms are term1, term2, ..., term10. If your page size is 5, it could happen that Elasticsearch returns term1, term2, term3, term4 and term6 on the first page (6 instead of 5 because of inaccuracy), and then term6, term7, term8, term9 and term10 (as expected). So you would have one term that would be completely invisible to your users (term5) and another one that would appear twice (term6). I think this is too confusing.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44316971","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44316971","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44316971,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MzE2OTcx","user":{"login":"artemredkin","id":537556,"node_id":"MDQ6VXNlcjUzNzU1Ng==","avatar_url":"https://avatars3.githubusercontent.com/u/537556?v=4","gravatar_id":"","url":"https://api.github.com/users/artemredkin","html_url":"https://github.com/artemredkin","followers_url":"https://api.github.com/users/artemredkin/followers","following_url":"https://api.github.com/users/artemredkin/following{/other_user}","gists_url":"https://api.github.com/users/artemredkin/gists{/gist_id}","starred_url":"https://api.github.com/users/artemredkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/artemredkin/subscriptions","organizations_url":"https://api.github.com/users/artemredkin/orgs","repos_url":"https://api.github.com/users/artemredkin/repos","events_url":"https://api.github.com/users/artemredkin/events{/privacy}","received_events_url":"https://api.github.com/users/artemredkin/received_events","type":"User","site_admin":false},"created_at":"2014-05-27T18:36:17Z","updated_at":"2014-05-27T18:36:17Z","author_association":"NONE","body":"Too bad, without counts sort this feature is only half useful. Can this issue be re-evaluated as a separate task, connected to the issue #256?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44368600","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44368600","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44368600,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MzY4NjAw","user":{"login":"artemredkin","id":537556,"node_id":"MDQ6VXNlcjUzNzU1Ng==","avatar_url":"https://avatars3.githubusercontent.com/u/537556?v=4","gravatar_id":"","url":"https://api.github.com/users/artemredkin","html_url":"https://github.com/artemredkin","followers_url":"https://api.github.com/users/artemredkin/followers","following_url":"https://api.github.com/users/artemredkin/following{/other_user}","gists_url":"https://api.github.com/users/artemredkin/gists{/gist_id}","starred_url":"https://api.github.com/users/artemredkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/artemredkin/subscriptions","organizations_url":"https://api.github.com/users/artemredkin/orgs","repos_url":"https://api.github.com/users/artemredkin/repos","events_url":"https://api.github.com/users/artemredkin/events{/privacy}","received_events_url":"https://api.github.com/users/artemredkin/received_events","type":"User","site_admin":false},"created_at":"2014-05-28T05:59:50Z","updated_at":"2014-05-28T05:59:50Z","author_association":"NONE","body":"And how about this: you provide java interface for sorter, and through plugin, we can add our own sorters for possibly-innacurate results?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44369832","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44369832","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44369832,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MzY5ODMy","user":{"login":"Kumen","id":678427,"node_id":"MDQ6VXNlcjY3ODQyNw==","avatar_url":"https://avatars0.githubusercontent.com/u/678427?v=4","gravatar_id":"","url":"https://api.github.com/users/Kumen","html_url":"https://github.com/Kumen","followers_url":"https://api.github.com/users/Kumen/followers","following_url":"https://api.github.com/users/Kumen/following{/other_user}","gists_url":"https://api.github.com/users/Kumen/gists{/gist_id}","starred_url":"https://api.github.com/users/Kumen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kumen/subscriptions","organizations_url":"https://api.github.com/users/Kumen/orgs","repos_url":"https://api.github.com/users/Kumen/repos","events_url":"https://api.github.com/users/Kumen/events{/privacy}","received_events_url":"https://api.github.com/users/Kumen/received_events","type":"User","site_admin":false},"created_at":"2014-05-28T06:23:50Z","updated_at":"2014-05-28T06:23:50Z","author_association":"NONE","body":"in my concrete problem. i have million of documents that i want to aggregate by key. the elasticsearch fails at this point. in the worst possible case there are over 200.000 buckets and per bucket about 10 matched documents. i thought a effective way to minimize the memory consumption is it to page through the buckets on server side. is there any other solution except to enlarge the ram capacity ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44375232","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44375232","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44375232,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0Mzc1MjMy","user":{"login":"artemredkin","id":537556,"node_id":"MDQ6VXNlcjUzNzU1Ng==","avatar_url":"https://avatars3.githubusercontent.com/u/537556?v=4","gravatar_id":"","url":"https://api.github.com/users/artemredkin","html_url":"https://github.com/artemredkin","followers_url":"https://api.github.com/users/artemredkin/followers","following_url":"https://api.github.com/users/artemredkin/following{/other_user}","gists_url":"https://api.github.com/users/artemredkin/gists{/gist_id}","starred_url":"https://api.github.com/users/artemredkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/artemredkin/subscriptions","organizations_url":"https://api.github.com/users/artemredkin/orgs","repos_url":"https://api.github.com/users/artemredkin/repos","events_url":"https://api.github.com/users/artemredkin/events{/privacy}","received_events_url":"https://api.github.com/users/artemredkin/received_events","type":"User","site_admin":false},"created_at":"2014-05-28T07:48:26Z","updated_at":"2014-05-28T07:48:26Z","author_association":"NONE","body":"Also, have you seen SolrCloud's implementation of facets? Something like: http://mail-archives.apache.org/mod_mbox/lucene-solr-user/201209.mbox/%3Calpine.DEB.2.02.1209261450570.2316@frisbee%3E\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44382235","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44382235","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44382235,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MzgyMjM1","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2014-05-28T09:14:25Z","updated_at":"2014-05-28T09:14:25Z","author_association":"MEMBER","body":"@artemredkin there is a difference between returning exact counts for specific terms, and guaranteeing total ordering. The first can be done with another round after picking the top N, the second can not.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44382617","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44382617","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44382617,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MzgyNjE3","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2014-05-28T09:18:57Z","updated_at":"2014-05-28T09:18:57Z","author_association":"CONTRIBUTOR","body":"@Kumen memory usage currently depends mostly on your number of buckets, not the size of the page that is requested. If you are not running Elasticsearch 1.2 yet, I would recommend on upgrading as memory usage of the terms aggregation improved significantly in this release.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44383517","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44383517","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44383517,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MzgzNTE3","user":{"login":"Kumen","id":678427,"node_id":"MDQ6VXNlcjY3ODQyNw==","avatar_url":"https://avatars0.githubusercontent.com/u/678427?v=4","gravatar_id":"","url":"https://api.github.com/users/Kumen","html_url":"https://github.com/Kumen","followers_url":"https://api.github.com/users/Kumen/followers","following_url":"https://api.github.com/users/Kumen/following{/other_user}","gists_url":"https://api.github.com/users/Kumen/gists{/gist_id}","starred_url":"https://api.github.com/users/Kumen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kumen/subscriptions","organizations_url":"https://api.github.com/users/Kumen/orgs","repos_url":"https://api.github.com/users/Kumen/repos","events_url":"https://api.github.com/users/Kumen/events{/privacy}","received_events_url":"https://api.github.com/users/Kumen/received_events","type":"User","site_admin":false},"created_at":"2014-05-28T09:29:16Z","updated_at":"2014-05-28T09:29:16Z","author_association":"NONE","body":"I am currently using the version 1.3 (manual build from branch).\nThus i need more memory. \n\nthanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44383997","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44383997","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44383997,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MzgzOTk3","user":{"login":"artemredkin","id":537556,"node_id":"MDQ6VXNlcjUzNzU1Ng==","avatar_url":"https://avatars3.githubusercontent.com/u/537556?v=4","gravatar_id":"","url":"https://api.github.com/users/artemredkin","html_url":"https://github.com/artemredkin","followers_url":"https://api.github.com/users/artemredkin/followers","following_url":"https://api.github.com/users/artemredkin/following{/other_user}","gists_url":"https://api.github.com/users/artemredkin/gists{/gist_id}","starred_url":"https://api.github.com/users/artemredkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/artemredkin/subscriptions","organizations_url":"https://api.github.com/users/artemredkin/orgs","repos_url":"https://api.github.com/users/artemredkin/repos","events_url":"https://api.github.com/users/artemredkin/events{/privacy}","received_events_url":"https://api.github.com/users/artemredkin/received_events","type":"User","site_admin":false},"created_at":"2014-05-28T09:34:57Z","updated_at":"2014-05-28T09:34:57Z","author_association":"NONE","body":"@kimchy I may be horribly wrong here (will do more digging today), but solr's field collapsing works in distributed environment and provides paging/ordering (at least i do not see in their documentation any indication, that it is not supported). Plus, @jpountz pointed to #1305 as a source for ordering problem.\nIn your opinion, can this problem (ordering of groups by count) be solved at all (leveraging cardinatlity agg, for example)? Maybe in later releases?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44384664","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44384664","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44384664,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0Mzg0NjY0","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2014-05-28T09:42:17Z","updated_at":"2014-05-28T09:42:17Z","author_association":"MEMBER","body":"@artemredkin guaranteed total ordering can't be solved (with a 2 way execution) unless all the values are streamed, so by definition, pagination will not be \"exact\", that is the problem. You can say that for the top N (or paginated N), the count for each term will be exact by executing another round, but not the total order of them.\n\nIt is an interesting problem, specifically with the fact that we would love to solve it in a somewhat performant manner. We obviously would love to solve it, if we manage to come up with a way to do it that is :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44388782","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44388782","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44388782,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0Mzg4Nzgy","user":{"login":"artemredkin","id":537556,"node_id":"MDQ6VXNlcjUzNzU1Ng==","avatar_url":"https://avatars3.githubusercontent.com/u/537556?v=4","gravatar_id":"","url":"https://api.github.com/users/artemredkin","html_url":"https://github.com/artemredkin","followers_url":"https://api.github.com/users/artemredkin/followers","following_url":"https://api.github.com/users/artemredkin/following{/other_user}","gists_url":"https://api.github.com/users/artemredkin/gists{/gist_id}","starred_url":"https://api.github.com/users/artemredkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/artemredkin/subscriptions","organizations_url":"https://api.github.com/users/artemredkin/orgs","repos_url":"https://api.github.com/users/artemredkin/repos","events_url":"https://api.github.com/users/artemredkin/events{/privacy}","received_events_url":"https://api.github.com/users/artemredkin/received_events","type":"User","site_admin":false},"created_at":"2014-05-28T10:32:42Z","updated_at":"2014-05-28T10:32:42Z","author_association":"NONE","body":"@kimchy Aren't top N groups exactly what we need for pagination? I was going to implement in on client in 2 hops (it would be 3-way execution, yes?). On first  - get (1.5_size of group page) worth of terms, maybe with cardinality, sorting them, and on second hop - get those terms with top_hits. For second page - get (3_size of group page) worth of terms and so on. Is it wrong :) ? Or just slow for inclusion inside elasticsearch itself?\nAnyway, thanks for explaining things, it would be awesome, it you solve this :).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44638764","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44638764","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44638764,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NjM4NzY0","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2014-05-30T10:56:57Z","updated_at":"2014-05-30T10:56:57Z","author_association":"MEMBER","body":"I didn't mean to stop this discussion by closing this issue... \n\nAdding pagination in the `terms` aggregation is tricky like @kimchy and @jpountz describe and the correctness would depend on the ordering. The correctness of the ordering depends to what `order` the `terms` aggregation is set to. If the `terms` aggregation's `order` is set to `_term` or to specific inner metric aggregations (`min` or `max` metric bucket, but not `avg` metric bucket), the ordering is correct.  \n\nThe 'result grouping' approach in ES relies on the terms aggregation to determine the correct groups and an inner `max` aggregation for ordering of the groups:\nhttp://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-aggregations-bucket-top-hits-aggregation.html#_field_collapse_example\n\nPagination can be simulated by using terms aggregation's `exclude` option. On subsequent search requests the previous emitted term buckets should be added to the exclude option, this way previous seen groups don't end up in the next aggregation response.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44639052","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44639052","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44639052,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NjM5MDUy","user":{"login":"artemredkin","id":537556,"node_id":"MDQ6VXNlcjUzNzU1Ng==","avatar_url":"https://avatars3.githubusercontent.com/u/537556?v=4","gravatar_id":"","url":"https://api.github.com/users/artemredkin","html_url":"https://github.com/artemredkin","followers_url":"https://api.github.com/users/artemredkin/followers","following_url":"https://api.github.com/users/artemredkin/following{/other_user}","gists_url":"https://api.github.com/users/artemredkin/gists{/gist_id}","starred_url":"https://api.github.com/users/artemredkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/artemredkin/subscriptions","organizations_url":"https://api.github.com/users/artemredkin/orgs","repos_url":"https://api.github.com/users/artemredkin/repos","events_url":"https://api.github.com/users/artemredkin/events{/privacy}","received_events_url":"https://api.github.com/users/artemredkin/received_events","type":"User","site_admin":false},"created_at":"2014-05-30T11:01:36Z","updated_at":"2014-05-30T11:01:36Z","author_association":"NONE","body":"Hm,\n\n> or to specific inner metric aggregations\n> does this mean, that I can use 'cardinality' sub-agg to sort term groups?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44643023","html_url":"https://github.com/elastic/elasticsearch/issues/6299#issuecomment-44643023","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6299","id":44643023,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NjQzMDIz","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2014-05-30T11:57:38Z","updated_at":"2014-05-30T11:57:38Z","author_association":"MEMBER","body":"> does this mean, that I can use 'cardinality' sub-agg to sort term groups?\n\nYes, you can sort by a `cardinality` inner metric aggregation, but the ordering of the buckets depend on the accuracy of the `cardinality` aggregation.\n","performed_via_github_app":null}]