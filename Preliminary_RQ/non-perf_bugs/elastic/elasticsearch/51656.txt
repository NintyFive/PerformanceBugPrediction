{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/51656","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51656/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51656/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51656/events","html_url":"https://github.com/elastic/elasticsearch/issues/51656","id":557223629,"node_id":"MDU6SXNzdWU1NTcyMjM2Mjk=","number":51656,"title":"response.Total does not match response.Document.Count() ","user":{"login":"cgstevens","id":11180136,"node_id":"MDQ6VXNlcjExMTgwMTM2","avatar_url":"https://avatars3.githubusercontent.com/u/11180136?v=4","gravatar_id":"","url":"https://api.github.com/users/cgstevens","html_url":"https://github.com/cgstevens","followers_url":"https://api.github.com/users/cgstevens/followers","following_url":"https://api.github.com/users/cgstevens/following{/other_user}","gists_url":"https://api.github.com/users/cgstevens/gists{/gist_id}","starred_url":"https://api.github.com/users/cgstevens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgstevens/subscriptions","organizations_url":"https://api.github.com/users/cgstevens/orgs","repos_url":"https://api.github.com/users/cgstevens/repos","events_url":"https://api.github.com/users/cgstevens/events{/privacy}","received_events_url":"https://api.github.com/users/cgstevens/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-01-30T02:02:59Z","updated_at":"2020-01-30T15:00:43Z","closed_at":"2020-01-30T09:40:03Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**\r\n7.5.0\r\n\r\n**OS version**\r\nOS[Windows 10/10.0/amd64], JVM[AdoptOpenJDK/OpenJDK 64-Bit Server VM/13.0.1/13.0.1+9]\r\n\r\n**Description of the problem**\r\n\r\nresponse.Total only shows 10000 when Document.Count() equals 12000\r\nI would expect response.Total to be 12000 based on the description - Gets the total number of documents matching the search query criteria.\r\n![TotalMismatch](https://user-images.githubusercontent.com/11180136/73413558-0a387f80-42da-11ea-924a-d43a55d9bb4a.jpg)\r\n\r\n\r\n**Steps to reproduce**:\r\n\r\nCreate index.\r\nSet the following on index.  : .Setting(\"max_result_window\", 50000)\r\nPopulate index with 12000 documents.\r\nSearch with Skip = 0, Take = 15000. : Request: {\"from\":0,\"size\":12000}\r\nReturns 12000 documents.  response.Document.Count() == 12000 but response.Total == 10000.\r\nTo provide the correct result I am doing another request which just does the count.  \r\nIs this a bug or am I missing another setting?\r\n\r\nThanks for the help!  I really don't want to do another request just to get the accurate count if I don't have to.\r\n\r\n\r\nvar dummyContacts = new List<Contact>();\r\n            for (int i = 0; i < 12000; i++)\r\n            {\r\n                var contact = new Contact();\r\n                contact.ContactId = Guid.NewGuid();\r\n                contact.Properties[\"FirstName\"] = contact.ContactId.ToString().Substring(0, 12);\r\n                contact.Properties[\"LastName\"] = contact.ContactId.ToString().Substring(12, 12);\r\n\r\n                dummyContacts.Add(contact);\r\n            }\r\n\r\n            // Start clean... delete index and populate with 12,000 dummy contacts.\r\n            Target.BulkAll(dummyContacts, true).Wait();\r\n\r\n\r\nversion[7.5.0], pid[18044], build[default/zip/e9ccaed468e2fac2275a3761849cbee64b39519f/2019-11-26T01:06:52.518245Z], OS[Windows 10/10.0/amd64], JVM[AdoptOpenJDK/OpenJDK 64-Bit Server VM/13.0.1/13.0.1+9]\r\n\r\n","closed_by":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"performed_via_github_app":null}