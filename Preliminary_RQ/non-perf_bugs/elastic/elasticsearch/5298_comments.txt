[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/36409275","html_url":"https://github.com/elastic/elasticsearch/issues/5298#issuecomment-36409275","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5298","id":36409275,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDA5Mjc1","user":{"login":"roytmana","id":2524911,"node_id":"MDQ6VXNlcjI1MjQ5MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2524911?v=4","gravatar_id":"","url":"https://api.github.com/users/roytmana","html_url":"https://github.com/roytmana","followers_url":"https://api.github.com/users/roytmana/followers","following_url":"https://api.github.com/users/roytmana/following{/other_user}","gists_url":"https://api.github.com/users/roytmana/gists{/gist_id}","starred_url":"https://api.github.com/users/roytmana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roytmana/subscriptions","organizations_url":"https://api.github.com/users/roytmana/orgs","repos_url":"https://api.github.com/users/roytmana/repos","events_url":"https://api.github.com/users/roytmana/events{/privacy}","received_events_url":"https://api.github.com/users/roytmana/received_events","type":"User","site_admin":false},"created_at":"2014-03-01T00:35:36Z","updated_at":"2014-03-01T00:35:36Z","author_association":"NONE","body":"I was about to sumitba request on this too.\nImi would suggest that anyvaggregation operating on a field should have missing option. If specified, aggregation should accumulate missing values under that value and honor any nested aggregations within. It should never assume any value like 0 since it may clash with actual keys. \n\nI was planning to show examples of enormous query that is needed for a two lecel aggregation that has to cover all values including missing and other for both levels using missing aggregation.  It can be done but not only the query is huge and highly repetitive the result need to be heavily processed to move second level keys nested under missing agg into the first level buckets.\n\nPlease please do implement missing as an option in all bucketing aggs!\n\nI am not even asking to have an option to also aggregare other - keys that were not used due to size parameter although it would be veru useful :-)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54611852","html_url":"https://github.com/elastic/elasticsearch/issues/5298#issuecomment-54611852","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5298","id":54611852,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjExODUy","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2014-09-05T11:03:44Z","updated_at":"2014-09-05T11:03:44Z","author_association":"CONTRIBUTOR","body":"I agree the behavior feels wrong with the `avg` or `stats` aggregations. Maybe we could support a `missing` option like sorting does.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/102415254","html_url":"https://github.com/elastic/elasticsearch/issues/5298#issuecomment-102415254","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5298","id":102415254,"node_id":"MDEyOklzc3VlQ29tbWVudDEwMjQxNTI1NA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-05-15T14:34:39Z","updated_at":"2015-05-15T14:34:39Z","author_association":"CONTRIBUTOR","body":"Closed through https://github.com/elastic/elasticsearch/pull/11042. Most aggs now have a `missing` option that allows to configure the value to consider when a document has no values.\n","performed_via_github_app":null}]