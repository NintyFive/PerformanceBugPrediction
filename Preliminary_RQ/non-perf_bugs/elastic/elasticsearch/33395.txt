{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/33395","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33395/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33395/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33395/events","html_url":"https://github.com/elastic/elasticsearch/issues/33395","id":356940918,"node_id":"MDU6SXNzdWUzNTY5NDA5MTg=","number":33395,"title":"Multi-Index pattern exclusions do not work on aliases","user":{"login":"costin","id":76245,"node_id":"MDQ6VXNlcjc2MjQ1","avatar_url":"https://avatars3.githubusercontent.com/u/76245?v=4","gravatar_id":"","url":"https://api.github.com/users/costin","html_url":"https://github.com/costin","followers_url":"https://api.github.com/users/costin/followers","following_url":"https://api.github.com/users/costin/following{/other_user}","gists_url":"https://api.github.com/users/costin/gists{/gist_id}","starred_url":"https://api.github.com/users/costin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/costin/subscriptions","organizations_url":"https://api.github.com/users/costin/orgs","repos_url":"https://api.github.com/users/costin/repos","events_url":"https://api.github.com/users/costin/events{/privacy}","received_events_url":"https://api.github.com/users/costin/received_events","type":"User","site_admin":false},"labels":[{"id":163824881,"node_id":"MDU6TGFiZWwxNjM4MjQ4ODE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Indices%20APIs","name":":Core/Features/Indices APIs","color":"0e8a16","default":false,"description":"APIs to create and manage indices"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"assignees":[{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2018-09-04T19:14:55Z","updated_at":"2018-09-09T15:31:02Z","closed_at":"2018-09-09T15:31:02Z","author_association":"MEMBER","active_lock_reason":null,"body":"<!-- Feature request -->\r\n\r\n**Describe the feature**:\r\n\r\nMulti-index exclusion should work for aliases not just aliases.\r\n\r\n<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`): master\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version** (`java -version`): Java 10.0.1+10\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): Win 10\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n[Multi-index](https://www.elastic.co/guide/en/elasticsearch/reference/current/multi-index.html) allows one to specify an enumeration of indices or aliases, wildcards, inclusions and exclusions when selecting an index.\r\nHowever it looks like the exclusion, works only for concrete indices and not for aliases.\r\n\r\n\r\n**Steps to reproduce**:\r\n\r\n 1.\r\nassume there are 3 indices, 2 having 2 different aliases pointing to both of them:\r\n```json\r\nPUT test_index1\r\n{\r\n    \"aliases\" : {\r\n        \"test_alias1\" : {},\r\n        \"test_alias2\" : {}\r\n        }\r\n}\r\n\r\nPUT test_index2\r\n{\r\n    \"aliases\" : {\r\n        \"test_alias1\" : {},\r\n        \"test_alias2\" : {}\r\n        }\r\n}\r\n\r\nPUT test_index_noalias\r\n{\r\n}\r\n\r\nGET /_cat/aliases?v\r\n\r\nalias                  index                     filter routing.index routing.search\r\ntest_alias1         test_index2            -      -             -\r\ntest_alias2         test_index2            -      -             -\r\ntest_alias1         test_index1            -      -             -\r\ntest_alias2         test_index1            -      -             -\r\n```\r\n\r\n 2.\r\nThe following request:\r\n```java\r\n GetAliasesRequest aliasRequest = new GetAliasesRequest()\r\n                    .local(true)\r\n                    .aliases(\"test_alias1\")\r\n                    .indicesOptions(IndicesOptions.lenientExpandOpen());\r\n   \r\n```\r\nReturns `test_alias1`. \r\nIn a similar fashion, using `.aliases(\"test_alias*\")` returns both `test_alias1` and `test_alias2` as expected.\r\n\r\n 3.\r\nHowever setting `.aliases(\"test_alias*\", \"-test_alias1\")` still returns `test_alias1` and `test_alias2`.\r\nThe expectation is only `test_alias2` is returned.\r\n","closed_by":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"performed_via_github_app":null}