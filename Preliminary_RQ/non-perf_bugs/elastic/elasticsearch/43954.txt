{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/43954","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43954/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43954/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43954/events","html_url":"https://github.com/elastic/elasticsearch/issues/43954","id":464013017,"node_id":"MDU6SXNzdWU0NjQwMTMwMTc=","number":43954,"title":"track_total_hits should be Union of boolean and integer","user":{"login":"russcam","id":208231,"node_id":"MDQ6VXNlcjIwODIzMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/208231?v=4","gravatar_id":"","url":"https://api.github.com/users/russcam","html_url":"https://github.com/russcam","followers_url":"https://api.github.com/users/russcam/followers","following_url":"https://api.github.com/users/russcam/following{/other_user}","gists_url":"https://api.github.com/users/russcam/gists{/gist_id}","starred_url":"https://api.github.com/users/russcam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/russcam/subscriptions","organizations_url":"https://api.github.com/users/russcam/orgs","repos_url":"https://api.github.com/users/russcam/repos","events_url":"https://api.github.com/users/russcam/events{/privacy}","received_events_url":"https://api.github.com/users/russcam/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":1967498216,"node_id":"MDU6TGFiZWwxOTY3NDk4MjE2","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Search","name":"Team:Search","color":"fef2c0","default":false,"description":"Meta label for search team"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-07-04T01:07:34Z","updated_at":"2020-07-17T02:44:00Z","closed_at":"2020-07-17T02:43:59Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### Issue\r\n\r\nThe search.json REST API spec in 7.x defines `track_total_hits` as a `boolean`\r\n\r\nhttps://github.com/elastic/elasticsearch/blob/c5930851043522c69613f68b2ac3b8ac3dfbcfbe/rest-api-spec/src/main/resources/rest-api-spec/api/search.json#L162-L165\r\n\r\nThe [documentation indicates however that `track_total_hits` can be a `boolean` or an `integer`](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-track-total-hits.html) i.e. a discriminated union of two different types.\r\n\r\nSince Elasticsearch clients generate code from the REST API specs, `track_total_hits` will be modelled as a `boolean` only. For example\r\n\r\nin elasticsearch-js\r\n\r\nhttps://github.com/elastic/elasticsearch-js/blob/21863965706e0ebfcbe34e0436bf3359579dc834/api/requestParams.d.ts#L1123\r\n\r\nin elasticsearch-net\r\n\r\nhttps://github.com/elastic/elasticsearch-net/blob/69cf48c400bfc774ed16aeb502abd13565d72f3c/src/Nest/Requests.NoNamespace.cs#L2812-L2817\r\n\r\n### Request\r\n\r\n`track_total_hits` should be modelled as a union of `boolean` and `int`. For example,\r\n\r\n```\r\n \"track_total_hits\": { \r\n   \"type\" : \"boolean|integer\", \r\n   \"description\": \"Indicate if the number of documents that match the query should be tracked (true or false), or an integer to accurately track the total hit count that match the query up to\" \r\n },\r\n```\r\n\r\nI propose making this change for 8.x. It would not be feasible to make this change in 7.x because it would break (binary) compatibility of already released, generated client code.","closed_by":{"login":"russcam","id":208231,"node_id":"MDQ6VXNlcjIwODIzMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/208231?v=4","gravatar_id":"","url":"https://api.github.com/users/russcam","html_url":"https://github.com/russcam","followers_url":"https://api.github.com/users/russcam/followers","following_url":"https://api.github.com/users/russcam/following{/other_user}","gists_url":"https://api.github.com/users/russcam/gists{/gist_id}","starred_url":"https://api.github.com/users/russcam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/russcam/subscriptions","organizations_url":"https://api.github.com/users/russcam/orgs","repos_url":"https://api.github.com/users/russcam/repos","events_url":"https://api.github.com/users/russcam/events{/privacy}","received_events_url":"https://api.github.com/users/russcam/received_events","type":"User","site_admin":false},"performed_via_github_app":null}