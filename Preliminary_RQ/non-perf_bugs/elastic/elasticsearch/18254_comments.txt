[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/219884453","html_url":"https://github.com/elastic/elasticsearch/issues/18254#issuecomment-219884453","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18254","id":219884453,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTg4NDQ1Mw==","user":{"login":"camilojd","id":527878,"node_id":"MDQ6VXNlcjUyNzg3OA==","avatar_url":"https://avatars2.githubusercontent.com/u/527878?v=4","gravatar_id":"","url":"https://api.github.com/users/camilojd","html_url":"https://github.com/camilojd","followers_url":"https://api.github.com/users/camilojd/followers","following_url":"https://api.github.com/users/camilojd/following{/other_user}","gists_url":"https://api.github.com/users/camilojd/gists{/gist_id}","starred_url":"https://api.github.com/users/camilojd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/camilojd/subscriptions","organizations_url":"https://api.github.com/users/camilojd/orgs","repos_url":"https://api.github.com/users/camilojd/repos","events_url":"https://api.github.com/users/camilojd/events{/privacy}","received_events_url":"https://api.github.com/users/camilojd/received_events","type":"User","site_admin":false},"created_at":"2016-05-17T23:30:26Z","updated_at":"2016-05-17T23:30:26Z","author_association":"CONTRIBUTOR","body":"I gave it a shot. When querying `_validate`, the operation is performed against an unique random shard as specified by `TransportValidateQueryAction#shards`.\n\nAll possible results are:\n\n```\n\"explanation\" : \"+() #(ConstantScore(_type:tweet))^0.0\"\n\"explanation\" : \"+user:kimchy #(ConstantScore(_type:tweet))^0.0\"\n\"explanation\" : \"+(user:kimchi)^0.8333333 #(ConstantScore(_type:tweet))^0.0\"\n```\n\nThe `+()` is a BooleanQuery with 0 clauses, a result of a query rewrite in an shard with no hits for the original fuzzy query. \n\nI'm now sure if would be worthy to hit all shards and somehow pick the most relevant explanation... or maybe remove irrelevant strings from the description.\n\nThoughts?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/220000864","html_url":"https://github.com/elastic/elasticsearch/issues/18254#issuecomment-220000864","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18254","id":220000864,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMDAwMDg2NA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-05-18T11:38:15Z","updated_at":"2016-05-18T11:38:15Z","author_association":"CONTRIBUTOR","body":"Ah thanks for digging @camilojd - perhaps all that is needed here is some documentation about the rewrite parameter.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/220002304","html_url":"https://github.com/elastic/elasticsearch/issues/18254#issuecomment-220002304","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18254","id":220002304,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMDAwMjMwNA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-05-18T11:45:57Z","updated_at":"2016-05-18T11:45:57Z","author_association":"CONTRIBUTOR","body":"> Ah thanks for digging @camilojd - perhaps all that is needed here is some documentation about the rewrite parameter.\n\nMaybe, but right now the rewrite parameter just picks a shard for the rewrite so you end up with different results. The inconsistency makes it pretty hard to use. If this is just a docs problem then we should document it as \"only useful for multi-term queries if all shards are exactly the same\" or something.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/220006320","html_url":"https://github.com/elastic/elasticsearch/issues/18254#issuecomment-220006320","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18254","id":220006320,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMDAwNjMyMA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-05-18T12:05:31Z","updated_at":"2016-05-18T12:05:31Z","author_association":"CONTRIBUTOR","body":"> \"only useful for multi-term queries if all shards are exactly the same\" or something.\n\njust explaining that it chooses a shard at random should be sufficient.  this reflects the actual query being run on one shard.  it's the same issue as indexing two docs in 5 shards then wondering why relevance is off.  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/288569727","html_url":"https://github.com/elastic/elasticsearch/issues/18254#issuecomment-288569727","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18254","id":288569727,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODU2OTcyNw==","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2017-03-22T23:20:12Z","updated_at":"2017-03-22T23:20:12Z","author_association":"MEMBER","body":"I think we can consider this one done. We have mentioned it in documentation and #23697 makes it possible to get response from all shards if needed. Please feel free to reopen if you don't agree.","performed_via_github_app":null}]