[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/438453925","html_url":"https://github.com/elastic/elasticsearch/issues/35520#issuecomment-438453925","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35520","id":438453925,"node_id":"MDEyOklzc3VlQ29tbWVudDQzODQ1MzkyNQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-11-13T21:58:39Z","updated_at":"2018-11-13T21:58:39Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/439094641","html_url":"https://github.com/elastic/elasticsearch/issues/35520#issuecomment-439094641","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35520","id":439094641,"node_id":"MDEyOklzc3VlQ29tbWVudDQzOTA5NDY0MQ==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2018-11-15T16:09:13Z","updated_at":"2018-11-15T16:09:25Z","author_association":"CONTRIBUTOR","body":"It very much looks like one of the two nodes just vanished. `node-1`'s logs look normal until the end:\r\n\r\n```\r\n[2018-11-13T20:40:29,432][DEBUG][o.e.x.s.a.e.ReservedRealm] [node-1] user [test_user] not found in cache for realm [reserved], proceeding with normal authentication\r\n[2018-11-13T20:40:29,432][DEBUG][o.e.x.s.a.f.FileRealm    ] [node-1] realm [default_file] authenticated user [test_user], with roles [[superuser]]\r\n[2018-11-13T20:40:29,445][DEBUG][o.e.x.s.a.e.ReservedRealm] [node-1] user [test_user] not found in cache for realm [reserved], proceeding with normal authentication\r\n[2018-11-13T20:40:29,445][DEBUG][o.e.x.s.a.f.FileRealm    ] [node-1] realm [default_file] authenticated user [test_user], with roles [[superuser]]\r\n[2018-11-13T20:40:29,462][DEBUG][o.e.x.s.a.e.ReservedRealm] [node-1] user [test_user] not found in cache for realm [reserved], proceeding with normal authentication\r\n[2018-11-13T20:40:29,462][DEBUG][o.e.x.s.a.f.FileRealm    ] [node-1] realm [default_file] authenticated user [test_user], with roles [[superuser]]\r\n[2018-11-13T20:40:29,474][DEBUG][o.e.x.s.a.e.ReservedRealm] [node-1] user [test_user] not found in cache for realm [reserved], proceeding with normal authentication\r\n[2018-11-13T20:40:29,474][DEBUG][o.e.x.s.a.f.FileRealm    ] [node-1] realm [default_file] authenticated user [test_user], with roles [[superuser]]\r\n[2018-11-13T20:40:29,489][DEBUG][o.e.x.s.a.e.ReservedRealm] [node-1] user [test_user] not found in cache for realm [reserved], proceeding with normal authentication\r\n[2018-11-13T20:40:29,489][DEBUG][o.e.x.s.a.f.FileRealm    ] [node-1] realm [default_file] authenticated user [test_user], with roles [[superuser]]\r\n// (END OF FILE)\r\n```\r\n\r\nAt approximately the same time we get `NodeDisconnectedException`s on the other node:\r\n\r\n```\r\n[2018-11-13T20:40:29,577][DEBUG][o.e.c.a.s.ShardStateAction] [node-0] [testshrinkafterupgrade][2] sending [internal:cluster/shard/failure] to [YfNyHp11Stmcv_deOYm3hQ] for shard entry [shard id [[testshrinkafterupgrade][2]], allocation id [MGgoRdWZQFe6tDX0vgk8Hw], primary term [1], message [failed to perform indices:admin/flush[s] on replica [testshrinkafterupgrade][2], node[gwX81RPDTASGiIRET9iwaQ], [R], recovery_source[peer recovery], s[INITIALIZING], a[id=MGgoRdWZQFe6tDX0vgk8Hw], unassigned_info[[reason=INDEX_CREATED], at[2018-11-13T20:40:28.940Z], delayed=false, allocation_status[no_attempt]]], failure [NodeDisconnectedException[[node-1][127.0.0.1:35896][indices:admin/flush[s][r]] disconnected]]]\r\n```\r\n\r\nI think there's no information about why this node failed, but https://github.com/elastic/elasticsearch/issues/35587#issuecomment-439087392 might help here too.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/459833285","html_url":"https://github.com/elastic/elasticsearch/issues/35520#issuecomment-459833285","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35520","id":459833285,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTgzMzI4NQ==","user":{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false},"created_at":"2019-02-01T19:08:10Z","updated_at":"2019-02-01T19:08:10Z","author_association":"CONTRIBUTOR","body":"Closing due to no mentions of re-occurrences of this issue\r\nin current development branches. 6.4 CI was disabled.","performed_via_github_app":null}]