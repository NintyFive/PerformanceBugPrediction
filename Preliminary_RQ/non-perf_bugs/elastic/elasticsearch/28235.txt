{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/28235","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28235/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28235/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28235/events","html_url":"https://github.com/elastic/elasticsearch/issues/28235","id":288802340,"node_id":"MDU6SXNzdWUyODg4MDIzNDA=","number":28235,"title":"Elasticsearch problem every milliseconde ","user":{"login":"adrien-vinet","id":15860162,"node_id":"MDQ6VXNlcjE1ODYwMTYy","avatar_url":"https://avatars2.githubusercontent.com/u/15860162?v=4","gravatar_id":"","url":"https://api.github.com/users/adrien-vinet","html_url":"https://github.com/adrien-vinet","followers_url":"https://api.github.com/users/adrien-vinet/followers","following_url":"https://api.github.com/users/adrien-vinet/following{/other_user}","gists_url":"https://api.github.com/users/adrien-vinet/gists{/gist_id}","starred_url":"https://api.github.com/users/adrien-vinet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adrien-vinet/subscriptions","organizations_url":"https://api.github.com/users/adrien-vinet/orgs","repos_url":"https://api.github.com/users/adrien-vinet/repos","events_url":"https://api.github.com/users/adrien-vinet/events{/privacy}","received_events_url":"https://api.github.com/users/adrien-vinet/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-01-16T06:48:03Z","updated_at":"2018-01-16T07:21:47Z","closed_at":"2018-01-16T07:21:47Z","author_association":"NONE","active_lock_reason":null,"body":"Hello all,\r\n\r\nI contact you because I have a problem with my elasticsearch server.\r\n\r\nMy configuration :\r\n\r\n- Serveur front whit haproxy\r\n- 2 serveurs with elastic search\r\n\r\nMy haproxy configuration :\r\n\r\n```\r\nlisten elasticsearch-cluster\r\n\tbind 127.0.0.1:9200\r\n        option httpchk\r\n        balance roundrobin\r\n    \tserver ipvr5.yoomap 172.16.0.5:9200 check\r\n    \tserver ipvr6.yoomap 172.16.0.6:9200 check backup\r\n```\r\nMy elasticsearch configuration (version 2.4.4) :\r\n\r\n```\r\n# Elasticsearch 2.X configuration for Yoomap\r\ncluster.name: yoomap_preprod_2\r\nhttp.port: 9200\r\nnode.name: s5.yoomap\r\ndiscovery.zen.ping.unicast.hosts: [\"172.16.0.5\", \"172.16.0.6\"]\r\nnetwork.host: [_eth1_]\r\nnetwork.bind_host: [_eth1_]\r\nnode.data: true\r\nnode.master: true\r\nbootstrap.mlockall: true\r\nindex.query.bool.max_clause_count: 4096\r\naction.auto_create_index: false\r\n```\r\n\r\nI have this problem on the log file :\r\n\r\n```\r\n[2018-01-16 07:45:06,244][WARN ][http.netty               ] [s5.yoomap] Caught exception while handling client http traffic, closing connection [id: 0x532248d5, /172.16.0.5:53849 => /172.16.0.5:9200]\r\njava.io.IOException: Connection re-initialized by the correspondent\r\n\tat sun.nio.ch.FileDispatcherImpl.read0(Native Method)\r\n\tat sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:39)\r\n\tat sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)\r\n\tat sun.nio.ch.IOUtil.read(IOUtil.java:192)\r\n\tat sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:384)\r\n\tat org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:64)\r\n\tat org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:108)\r\n\tat org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:337)\r\n\tat org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)\r\n\tat org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)\r\n\tat org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\r\n\tat org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n```\r\n\r\nDo you have a solution to this problem?","closed_by":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"performed_via_github_app":null}