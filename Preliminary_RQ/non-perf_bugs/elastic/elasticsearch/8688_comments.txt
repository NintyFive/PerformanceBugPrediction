[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/71645195","html_url":"https://github.com/elastic/elasticsearch/issues/8688#issuecomment-71645195","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8688","id":71645195,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjQ1MTk1","user":{"login":"elvarb","id":1716457,"node_id":"MDQ6VXNlcjE3MTY0NTc=","avatar_url":"https://avatars2.githubusercontent.com/u/1716457?v=4","gravatar_id":"","url":"https://api.github.com/users/elvarb","html_url":"https://github.com/elvarb","followers_url":"https://api.github.com/users/elvarb/followers","following_url":"https://api.github.com/users/elvarb/following{/other_user}","gists_url":"https://api.github.com/users/elvarb/gists{/gist_id}","starred_url":"https://api.github.com/users/elvarb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elvarb/subscriptions","organizations_url":"https://api.github.com/users/elvarb/orgs","repos_url":"https://api.github.com/users/elvarb/repos","events_url":"https://api.github.com/users/elvarb/events{/privacy}","received_events_url":"https://api.github.com/users/elvarb/received_events","type":"User","site_admin":false},"created_at":"2015-01-27T13:11:36Z","updated_at":"2015-01-27T13:11:36Z","author_association":"NONE","body":"+1 I have issues with this every now and then, worst case when it happens I loose a index, not good.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/73398592","html_url":"https://github.com/elastic/elasticsearch/issues/8688#issuecomment-73398592","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8688","id":73398592,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzk4NTky","user":{"login":"sammcj","id":862951,"node_id":"MDQ6VXNlcjg2Mjk1MQ==","avatar_url":"https://avatars0.githubusercontent.com/u/862951?v=4","gravatar_id":"","url":"https://api.github.com/users/sammcj","html_url":"https://github.com/sammcj","followers_url":"https://api.github.com/users/sammcj/followers","following_url":"https://api.github.com/users/sammcj/following{/other_user}","gists_url":"https://api.github.com/users/sammcj/gists{/gist_id}","starred_url":"https://api.github.com/users/sammcj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sammcj/subscriptions","organizations_url":"https://api.github.com/users/sammcj/orgs","repos_url":"https://api.github.com/users/sammcj/repos","events_url":"https://api.github.com/users/sammcj/events{/privacy}","received_events_url":"https://api.github.com/users/sammcj/received_events","type":"User","site_admin":false},"created_at":"2015-02-08T06:04:14Z","updated_at":"2015-02-08T06:04:14Z","author_association":"NONE","body":"+1 - Pretty sure this is the issue we have every day.\n\nScreenshot: https://twitter.com/s_mcleod/status/560237698758111232\n\n```\nlogstash-2015.02.07/qlMwQhWoRIedLZ5r23eCcw [1]\n{\n    state: INITIALIZING\n    primary: false\n    node: qlMwQhWoRIedLZ5r23eCcw\n    relocating_node: null\n    shard: 1\n    index: logstash-2015.02.07\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/73418951","html_url":"https://github.com/elastic/elasticsearch/issues/8688#issuecomment-73418951","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8688","id":73418951,"node_id":"MDEyOklzc3VlQ29tbWVudDczNDE4OTUx","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2015-02-08T16:47:20Z","updated_at":"2015-02-08T16:47:20Z","author_association":"MEMBER","body":"@sammcj can you post the failure in the logs for the shards being allocated? it might be related, and might not, depends on the actual failure.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/73441487","html_url":"https://github.com/elastic/elasticsearch/issues/8688#issuecomment-73441487","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8688","id":73441487,"node_id":"MDEyOklzc3VlQ29tbWVudDczNDQxNDg3","user":{"login":"sammcj","id":862951,"node_id":"MDQ6VXNlcjg2Mjk1MQ==","avatar_url":"https://avatars0.githubusercontent.com/u/862951?v=4","gravatar_id":"","url":"https://api.github.com/users/sammcj","html_url":"https://github.com/sammcj","followers_url":"https://api.github.com/users/sammcj/followers","following_url":"https://api.github.com/users/sammcj/following{/other_user}","gists_url":"https://api.github.com/users/sammcj/gists{/gist_id}","starred_url":"https://api.github.com/users/sammcj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sammcj/subscriptions","organizations_url":"https://api.github.com/users/sammcj/orgs","repos_url":"https://api.github.com/users/sammcj/repos","events_url":"https://api.github.com/users/sammcj/events{/privacy}","received_events_url":"https://api.github.com/users/sammcj/received_events","type":"User","site_admin":false},"created_at":"2015-02-09T00:05:23Z","updated_at":"2015-02-09T00:05:23Z","author_association":"NONE","body":"@kimchy it looks one of the situations where we've seen this might be caused by the timestamp field in logstash: https://gist.githubusercontent.com/sammcj/66c212311d99a9ca93fe/raw/de99f6ae149745c7b42262d6c2c26c46458e253f/logstash_shard_logs\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/73481865","html_url":"https://github.com/elastic/elasticsearch/issues/8688#issuecomment-73481865","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8688","id":73481865,"node_id":"MDEyOklzc3VlQ29tbWVudDczNDgxODY1","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-02-09T09:50:06Z","updated_at":"2015-02-09T09:50:06Z","author_association":"MEMBER","body":"@sammcj it looks like your are using a timestamp field, which is correctly recognized as a date but has the data in the wrong format:\n\n```\n MapperParsingException[failed to parse [timestamp]]; nested: MapperParsingException[failed to parse date field [Feb  9 11:00:01], tried both date format [dateOptionalTime], and timestamp number with locale []]; nested: IllegalArgumentException[Invalid format: \"Feb  9 11:00:01\"]; ]]\n```\n\nThis shouldn't fail the recovery (as it should not have been accepted by the primary) but I don't see (yet) how async dynamic mapping creation should have caused this failure. Do you use any custom index templates, the _default_ type or dynamic templates?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/73601405","html_url":"https://github.com/elastic/elasticsearch/issues/8688#issuecomment-73601405","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8688","id":73601405,"node_id":"MDEyOklzc3VlQ29tbWVudDczNjAxNDA1","user":{"login":"sammcj","id":862951,"node_id":"MDQ6VXNlcjg2Mjk1MQ==","avatar_url":"https://avatars0.githubusercontent.com/u/862951?v=4","gravatar_id":"","url":"https://api.github.com/users/sammcj","html_url":"https://github.com/sammcj","followers_url":"https://api.github.com/users/sammcj/followers","following_url":"https://api.github.com/users/sammcj/following{/other_user}","gists_url":"https://api.github.com/users/sammcj/gists{/gist_id}","starred_url":"https://api.github.com/users/sammcj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sammcj/subscriptions","organizations_url":"https://api.github.com/users/sammcj/orgs","repos_url":"https://api.github.com/users/sammcj/repos","events_url":"https://api.github.com/users/sammcj/events{/privacy}","received_events_url":"https://api.github.com/users/sammcj/received_events","type":"User","site_admin":false},"created_at":"2015-02-09T22:10:57Z","updated_at":"2015-02-09T22:10:57Z","author_association":"NONE","body":"Hi @bleskes - I could see the error around the date and am going to track down which app is logging it to logstash - I was thinking that this shouldn't cause ES to fail recovery (as you said).\n\nThe index type for logstash is created and managed by logstash itself - as far as our other indexes we just use the default type.\n\nThis sounds like it is unrelated - so I'll log a separate bug for not handling recovery as not to pollute this ticket if required.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/73783685","html_url":"https://github.com/elastic/elasticsearch/issues/8688#issuecomment-73783685","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8688","id":73783685,"node_id":"MDEyOklzc3VlQ29tbWVudDczNzgzNjg1","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-02-10T21:07:04Z","updated_at":"2015-02-10T21:07:04Z","author_association":"MEMBER","body":"> I was thinking that this shouldn't cause ES to fail recovery (as you said).\n\n@sammcj it maybe unrelated. When you say the recovery failed - did you check using `GET _recovery` to see there were no progress at all? (As opposed to being very slow...)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/73992385","html_url":"https://github.com/elastic/elasticsearch/issues/8688#issuecomment-73992385","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8688","id":73992385,"node_id":"MDEyOklzc3VlQ29tbWVudDczOTkyMzg1","user":{"login":"sammcj","id":862951,"node_id":"MDQ6VXNlcjg2Mjk1MQ==","avatar_url":"https://avatars0.githubusercontent.com/u/862951?v=4","gravatar_id":"","url":"https://api.github.com/users/sammcj","html_url":"https://github.com/sammcj","followers_url":"https://api.github.com/users/sammcj/followers","following_url":"https://api.github.com/users/sammcj/following{/other_user}","gists_url":"https://api.github.com/users/sammcj/gists{/gist_id}","starred_url":"https://api.github.com/users/sammcj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sammcj/subscriptions","organizations_url":"https://api.github.com/users/sammcj/orgs","repos_url":"https://api.github.com/users/sammcj/repos","events_url":"https://api.github.com/users/sammcj/events{/privacy}","received_events_url":"https://api.github.com/users/sammcj/received_events","type":"User","site_admin":false},"created_at":"2015-02-12T00:06:43Z","updated_at":"2015-02-12T00:06:43Z","author_association":"NONE","body":"@bleskes  It looks like ES permanently stuck intializing shard 2\n\nIndex Info: https://gist.github.com/sammcj/5128f1479df8754c1bc5\nMetadata: https://gist.github.com/sammcj/a110ee0aa72f003ec45e\n\nResulting in:\n\n```\n{\n  \"cluster_name\" : \"int-elastic-cluster\",\n  \"status\" : \"yellow\",\n  \"timed_out\" : false,\n  \"number_of_nodes\" : 3,\n  \"number_of_data_nodes\" : 3,\n  \"active_primary_shards\" : 79,\n  \"active_shards\" : 155,\n  \"relocating_shards\" : 0,\n  \"initializing_shards\" : 3,\n  \"unassigned_shards\" : 0\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/74120446","html_url":"https://github.com/elastic/elasticsearch/issues/8688#issuecomment-74120446","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8688","id":74120446,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MTIwNDQ2","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-02-12T18:06:27Z","updated_at":"2015-02-12T18:06:27Z","author_association":"MEMBER","body":"@sammcj thx. The index info doesn't show any initializing shard. Can you say which command you used? also , can you post the output of `GET {index_name_here}/_recovery?human&pretty` as well?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/75151354","html_url":"https://github.com/elastic/elasticsearch/issues/8688#issuecomment-75151354","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8688","id":75151354,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MTUxMzU0","user":{"login":"jlintz","id":121029,"node_id":"MDQ6VXNlcjEyMTAyOQ==","avatar_url":"https://avatars3.githubusercontent.com/u/121029?v=4","gravatar_id":"","url":"https://api.github.com/users/jlintz","html_url":"https://github.com/jlintz","followers_url":"https://api.github.com/users/jlintz/followers","following_url":"https://api.github.com/users/jlintz/following{/other_user}","gists_url":"https://api.github.com/users/jlintz/gists{/gist_id}","starred_url":"https://api.github.com/users/jlintz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jlintz/subscriptions","organizations_url":"https://api.github.com/users/jlintz/orgs","repos_url":"https://api.github.com/users/jlintz/repos","events_url":"https://api.github.com/users/jlintz/events{/privacy}","received_events_url":"https://api.github.com/users/jlintz/received_events","type":"User","site_admin":false},"created_at":"2015-02-19T22:22:54Z","updated_at":"2015-02-19T22:22:54Z","author_association":"NONE","body":"I'm seeing this as well on a dynamic field mapping that according to `_mapping` shows as a string but getting errors about it trying to parse it as a date field.  This happens fairly frequently to us as well\n\n`shard-failed ([logstash-nginx_gator-2015.02.19][3], node[Ffuof69PSOaOxxlr4Lkosw], relocating [h9y4GeSnRiWh4fBkdrmqQA], [R], s[RELOCATING]), reason [Failed to perform [bulk/shard] on replica, message [RemoteTransportException[[logstashesfast03-logstash_es][inet[/10.45.4.115:9300]][bulk/shard/replica]]; nested: MapperParsingException[failed to parse [qs_start]]; nested: MapperParsingException[failed to parse date field [2015-02-18 17:00:46], tried both date format [dateOptionalTime], and timestamp number with locale []]; nested: IllegalArgumentException[Invalid format: \"2015-02-18 17:00:46\" is malformed at \" 17:00:46\"]; ]]`\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/125158254","html_url":"https://github.com/elastic/elasticsearch/issues/8688#issuecomment-125158254","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8688","id":125158254,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNTE1ODI1NA==","user":{"login":"garyelephant","id":2291859,"node_id":"MDQ6VXNlcjIyOTE4NTk=","avatar_url":"https://avatars3.githubusercontent.com/u/2291859?v=4","gravatar_id":"","url":"https://api.github.com/users/garyelephant","html_url":"https://github.com/garyelephant","followers_url":"https://api.github.com/users/garyelephant/followers","following_url":"https://api.github.com/users/garyelephant/following{/other_user}","gists_url":"https://api.github.com/users/garyelephant/gists{/gist_id}","starred_url":"https://api.github.com/users/garyelephant/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garyelephant/subscriptions","organizations_url":"https://api.github.com/users/garyelephant/orgs","repos_url":"https://api.github.com/users/garyelephant/repos","events_url":"https://api.github.com/users/garyelephant/events{/privacy}","received_events_url":"https://api.github.com/users/garyelephant/received_events","type":"User","site_admin":false},"created_at":"2015-07-27T10:26:17Z","updated_at":"2015-07-27T10:26:17Z","author_association":"NONE","body":"Does this problem still exists in es1.5.2 ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/125158498","html_url":"https://github.com/elastic/elasticsearch/issues/8688#issuecomment-125158498","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8688","id":125158498,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNTE1ODQ5OA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-07-27T10:27:24Z","updated_at":"2015-07-27T10:27:24Z","author_association":"CONTRIBUTOR","body":"Yes, this fix will be available in 2.0.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252011213","html_url":"https://github.com/elastic/elasticsearch/issues/8688#issuecomment-252011213","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8688","id":252011213,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjAxMTIxMw==","user":{"login":"chenryn","id":1219655,"node_id":"MDQ6VXNlcjEyMTk2NTU=","avatar_url":"https://avatars3.githubusercontent.com/u/1219655?v=4","gravatar_id":"","url":"https://api.github.com/users/chenryn","html_url":"https://github.com/chenryn","followers_url":"https://api.github.com/users/chenryn/followers","following_url":"https://api.github.com/users/chenryn/following{/other_user}","gists_url":"https://api.github.com/users/chenryn/gists{/gist_id}","starred_url":"https://api.github.com/users/chenryn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenryn/subscriptions","organizations_url":"https://api.github.com/users/chenryn/orgs","repos_url":"https://api.github.com/users/chenryn/repos","events_url":"https://api.github.com/users/chenryn/events{/privacy}","received_events_url":"https://api.github.com/users/chenryn/received_events","type":"User","site_admin":false},"created_at":"2016-10-06T16:12:08Z","updated_at":"2016-10-06T16:12:08Z","author_association":"NONE","body":"So, is the `\"dynamic\":\"unsafe\"` options exists now?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252317696","html_url":"https://github.com/elastic/elasticsearch/issues/8688#issuecomment-252317696","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8688","id":252317696,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjMxNzY5Ng==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-10-07T17:52:03Z","updated_at":"2016-10-07T17:52:03Z","author_association":"CONTRIBUTOR","body":"@chenryn no - that was never added.  we're always safe\n","performed_via_github_app":null}]