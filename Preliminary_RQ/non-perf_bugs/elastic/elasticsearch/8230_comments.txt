[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/60552802","html_url":"https://github.com/elastic/elasticsearch/issues/8230#issuecomment-60552802","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8230","id":60552802,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNTUyODAy","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-10-27T05:52:22Z","updated_at":"2014-10-27T05:52:22Z","author_association":"CONTRIBUTOR","body":"is this on a project where you embed ES? If so can you run a clean build this looks pretty much like a stale dev environment.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/60560408","html_url":"https://github.com/elastic/elasticsearch/issues/8230#issuecomment-60560408","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8230","id":60560408,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNTYwNDA4","user":{"login":"oeztuce","id":1223935,"node_id":"MDQ6VXNlcjEyMjM5MzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1223935?v=4","gravatar_id":"","url":"https://api.github.com/users/oeztuce","html_url":"https://github.com/oeztuce","followers_url":"https://api.github.com/users/oeztuce/followers","following_url":"https://api.github.com/users/oeztuce/following{/other_user}","gists_url":"https://api.github.com/users/oeztuce/gists{/gist_id}","starred_url":"https://api.github.com/users/oeztuce/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oeztuce/subscriptions","organizations_url":"https://api.github.com/users/oeztuce/orgs","repos_url":"https://api.github.com/users/oeztuce/repos","events_url":"https://api.github.com/users/oeztuce/events{/privacy}","received_events_url":"https://api.github.com/users/oeztuce/received_events","type":"User","site_admin":false},"created_at":"2014-10-27T08:12:40Z","updated_at":"2014-10-27T08:26:36Z","author_association":"NONE","body":"Yes, this is an embedded ES.\n\nI create ES in the before method of my JUnit-Test.\nfinal NodeBuilder nodeBuilder = NodeBuilder.nodeBuilder();\n        final Builder settingsBuilder = nodeBuilder.settings();\n        settingsBuilder.put(\"network.publish_host\", \"localhost\");\n        settingsBuilder.put(\"network.bind_host\", \"localhost\");\n        final Settings settings = settingsBuilder.build();\n        this.node = nodeBuilder.clusterName(\"mymcluster\").local(false).data(true).settings(settings).node();\n        this.client = this.node.client();\n\nAnd in the productive code i create a TransportClient:\nfinal Settings settings = ImmutableSettings.settingsBuilder().put(\"cluster.name\", \"mycluster\").build();\n        this.client = new TransportClient(settings).addTransportAddress(new InetSocketTransportAddress(\n                elasticSearchHostname, 9300));\n\nIs something wrong with my approach?\n\nError stacktrace:\n2014-10-27 09:19:39,006 [][][][][ WARN]        org.elasticsearch.transport.netty - [Magneto] exception caught on transport layer [[id: 0xc77d65bb, 0.0.0.0/0.0.0.0:56749 :> localhost/127.0.0.1:9300]], closing connection\njava.lang.NoClassDefFoundError: org/elasticsearch/common/netty/channel/socket/nio/NioWorker$RegisterTask\n    at org.elasticsearch.common.netty.channel.socket.nio.NioWorker.createRegisterTask(NioWorker.java:118)\n    at org.elasticsearch.common.netty.channel.socket.nio.AbstractNioSelector.register(AbstractNioSelector.java:104)\n    at org.elasticsearch.common.netty.channel.socket.nio.NioWorker.register(NioWorker.java:36)\n    at org.elasticsearch.common.netty.channel.socket.nio.NioClientBoss.connect(NioClientBoss.java:155)\n    at org.elasticsearch.common.netty.channel.socket.nio.NioClientBoss.processSelectedKeys(NioClientBoss.java:105)\n    at org.elasticsearch.common.netty.channel.socket.nio.NioClientBoss.process(NioClientBoss.java:79)\n    at org.elasticsearch.common.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:318)\n    at org.elasticsearch.common.netty.channel.socket.nio.NioClientBoss.run(NioClientBoss.java:42)\n    at org.elasticsearch.common.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\n    at org.elasticsearch.common.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:744)\nCaused by: java.lang.ClassNotFoundException: org.elasticsearch.common.netty.channel.socket.nio.NioWorker$RegisterTask\n    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1720)\n    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1571)\n    ... 13 more\n","performed_via_github_app":null}]