{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/3916","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3916/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3916/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3916/events","html_url":"https://github.com/elastic/elasticsearch/issues/3916","id":21028529,"node_id":"MDU6SXNzdWUyMTAyODUyOQ==","number":3916,"title":"`ignore_indices=missing` option should be supported on closed indices","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"assignees":[{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2013-10-15T16:39:57Z","updated_at":"2014-02-10T19:58:42Z","closed_at":"2014-02-10T19:58:42Z","author_association":"MEMBER","active_lock_reason":null,"body":"When running a search on an alias which redirect queries to a closed index, search fails:\n\n```\n{\"error\":\"ClusterBlockException[blocked by: [FORBIDDEN/4/index closed];]\",\"status\":403}\n```\n\nAdding `ignore_indices=missing` has no effect here.\n\n``` sh\ncurl -XDELETE 'http://localhost:9200/toto1';echo\ncurl -XDELETE 'http://localhost:9200/toto2';echo\ncurl -XPOST 'http://localhost:9200/toto1/test/1?refresh' -d '{ \"user\" : \"kimchy\" }';echo\ncurl -XPOST 'http://localhost:9200/toto2/test/1?refresh' -d '{ \"user\" : \"kimchy\" }';echo\ncurl -XPOST 'http://localhost:9200/_aliases' -d '{ \"actions\" : [ \n    { \"add\" : { \"index\" : \"toto1\", \"alias\" : \"toto\" } }, \n    { \"add\" : { \"index\" : \"toto2\", \"alias\" : \"toto\" } } \n] }';echo\ncurl -XPOST 'http://localhost:9200/toto2/_close'; echo\n\n# This one should not fail\ncurl -XPOST 'http://localhost:9200/toto/_search?ignore_indices=missing' -d '{ \"query\" : { \"match_all\" : {} } }';echo\n\n# This one should fail\ncurl -XPOST 'http://localhost:9200/toto/_search' -d '{ \"query\" : { \"match_all\" : {} } }';echo\n```\n\nWe should support that option and ignore all closed indices when `ignore_indices=missing` is set.\n","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}