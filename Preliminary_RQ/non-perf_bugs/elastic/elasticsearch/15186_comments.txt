[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/161445689","html_url":"https://github.com/elastic/elasticsearch/issues/15186#issuecomment-161445689","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15186","id":161445689,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTQ0NTY4OQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-12-02T21:54:32Z","updated_at":"2015-12-02T21:54:32Z","author_association":"CONTRIBUTOR","body":"> Master node uses 100% CPU\n\nInteresting. Any chance that you can capture [hot threads](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-hot-threads.html) on the master node to see where this cpu goes?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/161576905","html_url":"https://github.com/elastic/elasticsearch/issues/15186#issuecomment-161576905","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15186","id":161576905,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTU3NjkwNQ==","user":{"login":"mdojwa","id":2542901,"node_id":"MDQ6VXNlcjI1NDI5MDE=","avatar_url":"https://avatars0.githubusercontent.com/u/2542901?v=4","gravatar_id":"","url":"https://api.github.com/users/mdojwa","html_url":"https://github.com/mdojwa","followers_url":"https://api.github.com/users/mdojwa/followers","following_url":"https://api.github.com/users/mdojwa/following{/other_user}","gists_url":"https://api.github.com/users/mdojwa/gists{/gist_id}","starred_url":"https://api.github.com/users/mdojwa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdojwa/subscriptions","organizations_url":"https://api.github.com/users/mdojwa/orgs","repos_url":"https://api.github.com/users/mdojwa/repos","events_url":"https://api.github.com/users/mdojwa/events{/privacy}","received_events_url":"https://api.github.com/users/mdojwa/received_events","type":"User","site_admin":false},"created_at":"2015-12-03T10:03:22Z","updated_at":"2015-12-03T10:03:22Z","author_association":"NONE","body":"Hi, sure.\nHere https://gist.github.com/mdojwa/a54d3c97738836952f83 you will find 5 hot_threads dumps done sequentially while the request deleting aliases was running. The master node was es6-1\n\nI was asked to create this ticket by ES support team. They said: \"...When ES tries to resolve what it needs to do, for each command, it ends up looping over all the aliases each time.\"\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162029698","html_url":"https://github.com/elastic/elasticsearch/issues/15186#issuecomment-162029698","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15186","id":162029698,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MjAyOTY5OA==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2015-12-04T17:33:06Z","updated_at":"2015-12-04T17:33:06Z","author_association":"CONTRIBUTOR","body":"Which API are you using?\n\nCurrently, having an aliases request of the form\n\n```\nPOST /_aliases\n{\n    \"actions\" : [\n        { \"remove\" : { \"index\" : \"test1\", \"alias\" : \"alias1\" } },\n        { \"remove\" : { \"index\" : \"test1\", \"alias\" : \"alias2\" } },\n        { \"remove\" : { \"index\" : \"test1\", \"alias\" : \"alias3\" } },\n        { \"remove\" : { \"index\" : \"test1\", \"alias\" : \"alias4\" } },\n       ...\n    ]\n}\n```\n\nindeed leads to the issue that the alias name is resolved against all alias names for the index for each \"remove\" entry.\n\nWould be nice if you could specify\n\n```\nPOST /_aliases\n{\n    \"actions\" : [\n        { \"remove\" : { \"index\" : \"test1\", \"alias\" : \"alias1,alias2,alias3,alias4,...\" } },\n       ...\n    ]\n}\n```\n\nbut that's currently not possible.\n\nOnly the `_alias` endpoint provides this at the moment:\n\n```\n/{index}/_alias/alias1,alias2,alias3,...\n```\n\nWith that though you might run into request header size limits.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162178369","html_url":"https://github.com/elastic/elasticsearch/issues/15186#issuecomment-162178369","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15186","id":162178369,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MjE3ODM2OQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-12-05T12:34:52Z","updated_at":"2015-12-05T12:34:52Z","author_association":"CONTRIBUTOR","body":"Good thinking @ywelsch \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162211686","html_url":"https://github.com/elastic/elasticsearch/issues/15186#issuecomment-162211686","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15186","id":162211686,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MjIxMTY4Ng==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-12-05T15:15:35Z","updated_at":"2015-12-05T15:15:35Z","author_association":"MEMBER","body":"agreed this would be the simplest now (as opposed to be smarted about executing arbitrary individual actions). Can we also support an array format?\n\n```\nPOST /_aliases\n{\n    \"actions\" : [\n        { \"remove\" : { \"index\" : \"test1\", \"alias\" : [ \"alias1\" ,\"alias2\" ... ] } },\n       ...\n    ]\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162846225","html_url":"https://github.com/elastic/elasticsearch/issues/15186#issuecomment-162846225","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15186","id":162846225,"node_id":"MDEyOklzc3VlQ29tbWVudDE2Mjg0NjIyNQ==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2015-12-08T10:45:32Z","updated_at":"2015-12-08T10:45:32Z","author_association":"CONTRIBUTOR","body":"I have implemented @bleskes's suggestion in #15305 by adding an array syntax for aliases (as well as indices). A minor difference to his suggestion is that I used a different field name (\"aliases\" instead of \"alias\") for the array syntax so that the types (simple value vs array) are not confused. The old syntax is still valid.\n\nAs an example, the following will remove multiple aliases in one go:\n\n```\nPOST /_aliases\n{\n    \"actions\" : [\n        { \"remove\" : { \"index\" : \"test1\", \"aliases\" : [ \"alias1\" ,\"alias2\" ... ] } },\n       ...\n    ]\n}\n```\n\nNote that, using the Java client, specifying multiple aliases was already syntactically possible, but forbidden by a later check. This check has been removed in #15305.\n","performed_via_github_app":null}]