{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/10432","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10432/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10432/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10432/events","html_url":"https://github.com/elastic/elasticsearch/issues/10432","id":66336971,"node_id":"MDU6SXNzdWU2NjMzNjk3MQ==","number":10432,"title":"Elasticsearch does not start due to NoClassDefFoundError with an older Marvel","user":{"login":"acarstoiu","id":9536601,"node_id":"MDQ6VXNlcjk1MzY2MDE=","avatar_url":"https://avatars2.githubusercontent.com/u/9536601?v=4","gravatar_id":"","url":"https://api.github.com/users/acarstoiu","html_url":"https://github.com/acarstoiu","followers_url":"https://api.github.com/users/acarstoiu/followers","following_url":"https://api.github.com/users/acarstoiu/following{/other_user}","gists_url":"https://api.github.com/users/acarstoiu/gists{/gist_id}","starred_url":"https://api.github.com/users/acarstoiu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acarstoiu/subscriptions","organizations_url":"https://api.github.com/users/acarstoiu/orgs","repos_url":"https://api.github.com/users/acarstoiu/repos","events_url":"https://api.github.com/users/acarstoiu/events{/privacy}","received_events_url":"https://api.github.com/users/acarstoiu/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-04-04T16:11:42Z","updated_at":"2015-04-04T16:20:48Z","closed_at":"2015-04-04T16:20:48Z","author_association":"NONE","active_lock_reason":null,"body":"I upgraded Elasticsearch to _1.5.0_ but had the nasty surprise to not be able to start it anymore, due to a class that has disappeared in the meantime:\n\n```\n[2015-04-04 15:46:40,478][ERROR][bootstrap                ] Exception\norg.elasticsearch.common.util.concurrent.ExecutionError: org.elasticsearch.common.util.concurrent.ExecutionError: java.lang.NoClassDefFoundError: Lorg/elasticsearch/indices/InternalI\nndicesService;\n        at org.elasticsearch.common.cache.LocalCache$Segment.get(LocalCache.java:2201)\n        at org.elasticsearch.common.cache.LocalCache.get(LocalCache.java:3937)\n        at org.elasticsearch.common.cache.LocalCache.getOrLoad(LocalCache.java:3941)\n        at org.elasticsearch.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:4824)\n        at org.elasticsearch.common.inject.internal.FailableCache.get(FailableCache.java:51)\n        at org.elasticsearch.common.inject.ConstructorInjectorStore.get(ConstructorInjectorStore.java:50)\n        at org.elasticsearch.common.inject.ConstructorBindingImpl.initialize(ConstructorBindingImpl.java:50)\n        at org.elasticsearch.common.inject.InjectorImpl.initializeBinding(InjectorImpl.java:372)\n        at org.elasticsearch.common.inject.BindingProcessor$1$1.run(BindingProcessor.java:148)\n        at org.elasticsearch.common.inject.BindingProcessor.initializeBindings(BindingProcessor.java:204)\n        at org.elasticsearch.common.inject.InjectorBuilder.initializeStatically(InjectorBuilder.java:119)\n        at org.elasticsearch.common.inject.InjectorBuilder.build(InjectorBuilder.java:102)\n        at org.elasticsearch.common.inject.Guice.createInjector(Guice.java:93)\n        at org.elasticsearch.common.inject.Guice.createInjector(Guice.java:70)\n        at org.elasticsearch.common.inject.ModulesBuilder.createInjector(ModulesBuilder.java:59)\n        at org.elasticsearch.node.internal.InternalNode.<init>(InternalNode.java:203)\n        at org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:159)\n        at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:70)\n        at org.elasticsearch.bootstrap.Bootstrap.main(Bootstrap.java:213)\n        at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:32)\nCaused by: org.elasticsearch.common.util.concurrent.ExecutionError: java.lang.NoClassDefFoundError: Lorg/elasticsearch/indices/InternalIndicesService;\n        at org.elasticsearch.common.cache.LocalCache$Segment.get(LocalCache.java:2201)\n        at org.elasticsearch.common.cache.LocalCache.get(LocalCache.java:3937)\n        at org.elasticsearch.common.cache.LocalCache.getOrLoad(LocalCache.java:3941)\n        at org.elasticsearch.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:4824)\n        at org.elasticsearch.common.inject.internal.FailableCache.get(FailableCache.java:51)\n        at org.elasticsearch.common.inject.MembersInjectorStore.get(MembersInjectorStore.java:68)\n        at org.elasticsearch.common.inject.ConstructorInjectorStore.createConstructor(ConstructorInjectorStore.java:67)\n        at org.elasticsearch.common.inject.ConstructorInjectorStore.access$000(ConstructorInjectorStore.java:29)\n        at org.elasticsearch.common.inject.ConstructorInjectorStore$1.create(ConstructorInjectorStore.java:37)\n        at org.elasticsearch.common.inject.ConstructorInjectorStore$1.create(ConstructorInjectorStore.java:33)\n        at org.elasticsearch.common.inject.internal.FailableCache$1.load(FailableCache.java:39)\n        at org.elasticsearch.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3527)\n        at org.elasticsearch.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2319)\n        at org.elasticsearch.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2282)\n        at org.elasticsearch.common.cache.LocalCache$Segment.get(LocalCache.java:2197)\n        ... 19 more\nCaused by: java.lang.NoClassDefFoundError: Lorg/elasticsearch/indices/InternalIndicesService;\n        at java.lang.Class.getDeclaredFields0(Native Method)\n        at java.lang.Class.privateGetDeclaredFields(Class.java:2499)\n        at java.lang.Class.getDeclaredFields(Class.java:1811)\n        at org.elasticsearch.common.inject.spi.InjectionPoint$Factory$1.getMembers(InjectionPoint.java:378)\n        at org.elasticsearch.common.inject.spi.InjectionPoint$Factory$1.getMembers(InjectionPoint.java:376)\n        at org.elasticsearch.common.inject.spi.InjectionPoint.addInjectorsForMembers(InjectionPoint.java:351)\n        at org.elasticsearch.common.inject.spi.InjectionPoint.addInjectionPoints(InjectionPoint.java:345)\n        at org.elasticsearch.common.inject.spi.InjectionPoint.forInstanceMethodsAndFields(InjectionPoint.java:287)\n        at org.elasticsearch.common.inject.MembersInjectorStore.createWithListeners(MembersInjectorStore.java:80)\n        at org.elasticsearch.common.inject.MembersInjectorStore.access$000(MembersInjectorStore.java:36)\n        at org.elasticsearch.common.inject.MembersInjectorStore$1.create(MembersInjectorStore.java:45)\n        at org.elasticsearch.common.inject.MembersInjectorStore$1.create(MembersInjectorStore.java:41)\n        at org.elasticsearch.common.inject.internal.FailableCache$1.load(FailableCache.java:39)\n        at org.elasticsearch.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3527)\n        at org.elasticsearch.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2319)\n        at org.elasticsearch.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2282)\n        at org.elasticsearch.common.cache.LocalCache$Segment.get(LocalCache.java:2197)\n        ... 33 more\nCaused by: java.lang.ClassNotFoundException: org.elasticsearch.indices.InternalIndicesService\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:425)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:358)\n        ... 50 more\n```\n\nThis is perfectly reproduceable with Marvel 1.2.1. The latest Marvel 1.3.x works well. I'm more interested in knowing **why** than in getting this issue solved.\n#### How come a site plugin (i.e. without a single trace of Java in it) induces a class not found error? Is there a compatibility layer that triggers this?\n","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}