[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/212896635","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-212896635","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":212896635,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMjg5NjYzNQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2016-04-21T12:30:14Z","updated_at":"2016-04-21T12:30:14Z","author_association":"MEMBER","body":"I'm not sure myself too is this needs to be supported, this sound tempting. However I think it is tricky. Ingest is flexible on where it runs if a node isn't ingest it executes elsewhere. This can become tricky with the update api, since it always executes on the node holding the primary. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/213348646","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-213348646","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":213348646,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMzM0ODY0Ng==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2016-04-22T09:19:02Z","updated_at":"2016-04-22T09:19:02Z","author_association":"MEMBER","body":"Discussed during fix it friday and this looks like a useful enhancement, but there are corner cases which would make it very tricky to support this. (index name or routing is changed during ingestion or when a node isn't allowed to run ingest) Therefor I'm closing this issue and we can re-evaluate this at a later time if this is still useful and the technical concerns can fixed easily.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/238596070","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-238596070","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":238596070,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODU5NjA3MA==","user":{"login":"djschny","id":129643,"node_id":"MDQ6VXNlcjEyOTY0Mw==","avatar_url":"https://avatars0.githubusercontent.com/u/129643?v=4","gravatar_id":"","url":"https://api.github.com/users/djschny","html_url":"https://github.com/djschny","followers_url":"https://api.github.com/users/djschny/followers","following_url":"https://api.github.com/users/djschny/following{/other_user}","gists_url":"https://api.github.com/users/djschny/gists{/gist_id}","starred_url":"https://api.github.com/users/djschny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djschny/subscriptions","organizations_url":"https://api.github.com/users/djschny/orgs","repos_url":"https://api.github.com/users/djschny/repos","events_url":"https://api.github.com/users/djschny/events{/privacy}","received_events_url":"https://api.github.com/users/djschny/received_events","type":"User","site_admin":false},"created_at":"2016-08-09T15:46:15Z","updated_at":"2016-09-29T12:28:31Z","author_association":"CONTRIBUTOR","body":"I feel it is very important to support ingest pipelines as part of the update API. Now that _timestamp has been removed, it was suggested that the alternative is to accomplish this with an ingest node pipeline. Without having this on the _update API, it makes for an incomplete solution. For example consider the following pipeline:\n\n```\nPUT _ingest/pipeline/timestamps\n{\n  \"description\": \"Adds createdAt and updatedAt style timestamps\",\n  \"processors\": [\n    {\n      \"set\": {\n        \"field\": \"metadata.timestamp_created\",\n        \"value\": \"{{_ingest.timestamp}}\",\n        \"override\": false\n      }\n    },\n    {\n      \"set\": {\n        \"field\": \"metadata.timestamp_updated\",\n        \"value\": \"{{_ingest.timestamp}}\",\n        \"override\": true\n      }\n    }\n  ]\n}\n```\n\nWhen doing a partial update, we offer no alternative ability to set these timestamps appropriately that I am aware of. A script could probably be used, but resuse and consistency of the pipelines is something that we would want?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/239247646","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-239247646","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":239247646,"node_id":"MDEyOklzc3VlQ29tbWVudDIzOTI0NzY0Ng==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-08-11T18:25:25Z","updated_at":"2016-08-11T18:25:25Z","author_association":"CONTRIBUTOR","body":"That is an interesting idea... although it'd be a lot slower than just using a script (as the document would have to be converted from JSON -> object -> JSON -> object -> JSON). \n\nAs mentioned above, exposing ingest to the update api has some complexity (eg changing _index, _type, _parent, _routing shouldn't be allowed).   That said, update-by-query already exposes ingest.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/239829673","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-239829673","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":239829673,"node_id":"MDEyOklzc3VlQ29tbWVudDIzOTgyOTY3Mw==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2016-08-15T15:17:03Z","updated_at":"2016-08-15T15:17:03Z","author_association":"MEMBER","body":"+1 I think that if don't allow modifying `_index`, `_parent` or `_routing` metadata fields then we can support ingest in the update api and for bulk items in the bulk api.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/250237101","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-250237101","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":250237101,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MDIzNzEwMQ==","user":{"login":"ejsmith","id":282584,"node_id":"MDQ6VXNlcjI4MjU4NA==","avatar_url":"https://avatars1.githubusercontent.com/u/282584?v=4","gravatar_id":"","url":"https://api.github.com/users/ejsmith","html_url":"https://github.com/ejsmith","followers_url":"https://api.github.com/users/ejsmith/followers","following_url":"https://api.github.com/users/ejsmith/following{/other_user}","gists_url":"https://api.github.com/users/ejsmith/gists{/gist_id}","starred_url":"https://api.github.com/users/ejsmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ejsmith/subscriptions","organizations_url":"https://api.github.com/users/ejsmith/orgs","repos_url":"https://api.github.com/users/ejsmith/repos","events_url":"https://api.github.com/users/ejsmith/events{/privacy}","received_events_url":"https://api.github.com/users/ejsmith/received_events","type":"User","site_admin":false},"created_at":"2016-09-28T17:26:21Z","updated_at":"2016-09-28T17:26:21Z","author_association":"NONE","body":"I feel like having a guaranteed timestamp field is critically important for many use cases such as online reindexing. Telling us to use an ingest pipeline, but then having no way to guarantee that those pipelines are run to ensure that the timestamp is updated is not a good solution IMO.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252419923","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-252419923","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":252419923,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjQxOTkyMw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-10-08T11:36:49Z","updated_at":"2016-10-08T11:36:49Z","author_association":"CONTRIBUTOR","body":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-250237101 is a good point, especially given the fact that we've removed `now()` from painless https://github.com/elastic/elasticsearch/pull/20766\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252457897","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-252457897","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":252457897,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjQ1Nzg5Nw==","user":{"login":"ejsmith","id":282584,"node_id":"MDQ6VXNlcjI4MjU4NA==","avatar_url":"https://avatars1.githubusercontent.com/u/282584?v=4","gravatar_id":"","url":"https://api.github.com/users/ejsmith","html_url":"https://github.com/ejsmith","followers_url":"https://api.github.com/users/ejsmith/followers","following_url":"https://api.github.com/users/ejsmith/following{/other_user}","gists_url":"https://api.github.com/users/ejsmith/gists{/gist_id}","starred_url":"https://api.github.com/users/ejsmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ejsmith/subscriptions","organizations_url":"https://api.github.com/users/ejsmith/orgs","repos_url":"https://api.github.com/users/ejsmith/repos","events_url":"https://api.github.com/users/ejsmith/events{/privacy}","received_events_url":"https://api.github.com/users/ejsmith/received_events","type":"User","site_admin":false},"created_at":"2016-10-09T01:20:43Z","updated_at":"2016-10-09T01:20:43Z","author_association":"NONE","body":"I really hope the team reconsiders this decision because I think this is really going to hurt the product.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252544606","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-252544606","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":252544606,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjU0NDYwNg==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2016-10-10T06:32:11Z","updated_at":"2016-10-10T06:32:11Z","author_association":"MEMBER","body":"@ejsmith I think there is consensus about adding support for ingest to the update api. \n\n@clintongormley Lets change the discuss label for an adoptme label?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252616874","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-252616874","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":252616874,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjYxNjg3NA==","user":{"login":"ejsmith","id":282584,"node_id":"MDQ6VXNlcjI4MjU4NA==","avatar_url":"https://avatars1.githubusercontent.com/u/282584?v=4","gravatar_id":"","url":"https://api.github.com/users/ejsmith","html_url":"https://github.com/ejsmith","followers_url":"https://api.github.com/users/ejsmith/followers","following_url":"https://api.github.com/users/ejsmith/following{/other_user}","gists_url":"https://api.github.com/users/ejsmith/gists{/gist_id}","starred_url":"https://api.github.com/users/ejsmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ejsmith/subscriptions","organizations_url":"https://api.github.com/users/ejsmith/orgs","repos_url":"https://api.github.com/users/ejsmith/repos","events_url":"https://api.github.com/users/ejsmith/events{/privacy}","received_events_url":"https://api.github.com/users/ejsmith/received_events","type":"User","site_admin":false},"created_at":"2016-10-10T13:22:03Z","updated_at":"2016-10-10T13:22:03Z","author_association":"NONE","body":"I fail to see how that helps. If it's a setting on the update API that means it's optional and I don't have any way to have a guaranteed timestamp that is reliable.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252659752","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-252659752","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":252659752,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjY1OTc1Mg==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-10-10T15:41:05Z","updated_at":"2016-10-10T15:41:05Z","author_association":"CONTRIBUTOR","body":"@ejsmith I think #20835 should resolve this issue?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252660807","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-252660807","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":252660807,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjY2MDgwNw==","user":{"login":"ejsmith","id":282584,"node_id":"MDQ6VXNlcjI4MjU4NA==","avatar_url":"https://avatars1.githubusercontent.com/u/282584?v=4","gravatar_id":"","url":"https://api.github.com/users/ejsmith","html_url":"https://github.com/ejsmith","followers_url":"https://api.github.com/users/ejsmith/followers","following_url":"https://api.github.com/users/ejsmith/following{/other_user}","gists_url":"https://api.github.com/users/ejsmith/gists{/gist_id}","starred_url":"https://api.github.com/users/ejsmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ejsmith/subscriptions","organizations_url":"https://api.github.com/users/ejsmith/orgs","repos_url":"https://api.github.com/users/ejsmith/repos","events_url":"https://api.github.com/users/ejsmith/events{/privacy}","received_events_url":"https://api.github.com/users/ejsmith/received_events","type":"User","site_admin":false},"created_at":"2016-10-10T15:45:08Z","updated_at":"2016-10-10T15:45:08Z","author_association":"NONE","body":"Again, all of those features don't give me a very basic thing which is a guaranteed timestamp on my documents that I can rely on for things like reindexing and other operations. They are all dependent on everyone playing nice and making sure to set the timestamp.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252661839","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-252661839","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":252661839,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjY2MTgzOQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-10-10T15:49:13Z","updated_at":"2016-10-10T15:49:13Z","author_association":"CONTRIBUTOR","body":"I understand what you mean but we never had such a think as _the reliable_ way of getting a timestamp. The reason why we are moving away from it was it's inconsistency and people had wrong expectations. Now we are trying to provide building blocks to get the desired behavior. They involve work, I understand that but it's the most flexible and contained way of managing expectations.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252662853","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-252662853","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":252662853,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjY2Mjg1Mw==","user":{"login":"ejsmith","id":282584,"node_id":"MDQ6VXNlcjI4MjU4NA==","avatar_url":"https://avatars1.githubusercontent.com/u/282584?v=4","gravatar_id":"","url":"https://api.github.com/users/ejsmith","html_url":"https://github.com/ejsmith","followers_url":"https://api.github.com/users/ejsmith/followers","following_url":"https://api.github.com/users/ejsmith/following{/other_user}","gists_url":"https://api.github.com/users/ejsmith/gists{/gist_id}","starred_url":"https://api.github.com/users/ejsmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ejsmith/subscriptions","organizations_url":"https://api.github.com/users/ejsmith/orgs","repos_url":"https://api.github.com/users/ejsmith/repos","events_url":"https://api.github.com/users/ejsmith/events{/privacy}","received_events_url":"https://api.github.com/users/ejsmith/received_events","type":"User","site_admin":false},"created_at":"2016-10-10T15:53:20Z","updated_at":"2016-10-10T15:53:20Z","author_association":"NONE","body":"So your saying that the timestamp feature isn't reliable?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252664412","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-252664412","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":252664412,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjY2NDQxMg==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-10-10T15:59:36Z","updated_at":"2016-10-10T15:59:36Z","author_association":"CONTRIBUTOR","body":"We had tons of bug related to TTL that caused confusion together with _timestamp. Also if you use an update script and you don't explicitly update `_timestamp` it keeps the original timestamp when it was created. While if you send the document again from the outside (ie. get -> modify -> update) you'd get a new value for `_timestamp`.  Same is true for reindex where stuff would not be preserved. now sometimes you want that, sometimes you don't but it's usecase specific and not really reliable. Either way you turn it it's better to have it addable by a user since we can't do the right thing for everybody.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252674524","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-252674524","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":252674524,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjY3NDUyNA==","user":{"login":"niemyjski","id":1020579,"node_id":"MDQ6VXNlcjEwMjA1Nzk=","avatar_url":"https://avatars3.githubusercontent.com/u/1020579?v=4","gravatar_id":"","url":"https://api.github.com/users/niemyjski","html_url":"https://github.com/niemyjski","followers_url":"https://api.github.com/users/niemyjski/followers","following_url":"https://api.github.com/users/niemyjski/following{/other_user}","gists_url":"https://api.github.com/users/niemyjski/gists{/gist_id}","starred_url":"https://api.github.com/users/niemyjski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niemyjski/subscriptions","organizations_url":"https://api.github.com/users/niemyjski/orgs","repos_url":"https://api.github.com/users/niemyjski/repos","events_url":"https://api.github.com/users/niemyjski/events{/privacy}","received_events_url":"https://api.github.com/users/niemyjski/received_events","type":"User","site_admin":false},"created_at":"2016-10-10T16:40:24Z","updated_at":"2016-10-10T16:40:24Z","author_association":"CONTRIBUTOR","body":"I'd rather have it be updated all the time than never or not having this feature. It caused way more problems by being removed than just leaving it there.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252682050","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-252682050","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":252682050,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjY4MjA1MA==","user":{"login":"ejsmith","id":282584,"node_id":"MDQ6VXNlcjI4MjU4NA==","avatar_url":"https://avatars1.githubusercontent.com/u/282584?v=4","gravatar_id":"","url":"https://api.github.com/users/ejsmith","html_url":"https://github.com/ejsmith","followers_url":"https://api.github.com/users/ejsmith/followers","following_url":"https://api.github.com/users/ejsmith/following{/other_user}","gists_url":"https://api.github.com/users/ejsmith/gists{/gist_id}","starred_url":"https://api.github.com/users/ejsmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ejsmith/subscriptions","organizations_url":"https://api.github.com/users/ejsmith/orgs","repos_url":"https://api.github.com/users/ejsmith/repos","events_url":"https://api.github.com/users/ejsmith/events{/privacy}","received_events_url":"https://api.github.com/users/ejsmith/received_events","type":"User","site_admin":false},"created_at":"2016-10-10T17:12:15Z","updated_at":"2016-10-10T17:12:15Z","author_association":"NONE","body":"I don't care about TTL. That makes perfect sense and can easily be handled by outside code. Reliable timestamp can't be handled reliably from the outside. I understand that there were issues with timestamp in the past, but I guess I don't get why it can't be implemented on the server side. Again, to me it seems like a very critical thing and pretty much every other database system has that functionality. I know you guys aren't specifically a database, but the system very much works like a document database and we need to do reindexing and other bulk operations that very much need to have some sort of reliable way of knowing when documents were updated last.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252720124","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-252720124","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":252720124,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjcyMDEyNA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-10-10T19:20:34Z","updated_at":"2016-10-10T19:20:34Z","author_association":"CONTRIBUTOR","body":"> I'd rather have it be updated all the time than never or not having this feature. It caused way more problems by being removed than just leaving it there.\n\nthis is again how you used it but it's not how it was used by the majority. Majority provided timestamp from the outside and then it's suddenly a simple date field. This is how we should treat it, it was meant for the logging case nothing else. We are discussing X Y problems. You guys want a last_modified timestamp that wasn't what `_timestamp` read the [documentation](https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-timestamp-field.html). I am up for discussing a last modified timestamp that is updated on every change and has clear semantics. That is, if you like it or not a new feature and should not be discussed on this issue. Feel free to open a new issue to add this specific field and we take it from there. @ejsmith @niemyjski WDYT\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252915931","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-252915931","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":252915931,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjkxNTkzMQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T13:27:13Z","updated_at":"2016-10-11T13:27:13Z","author_association":"CONTRIBUTOR","body":"@ejsmith @niemyjski I opened #20859 for this can you please take a look\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/255848520","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-255848520","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":255848520,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTg0ODUyMA==","user":{"login":"niemyjski","id":1020579,"node_id":"MDQ6VXNlcjEwMjA1Nzk=","avatar_url":"https://avatars3.githubusercontent.com/u/1020579?v=4","gravatar_id":"","url":"https://api.github.com/users/niemyjski","html_url":"https://github.com/niemyjski","followers_url":"https://api.github.com/users/niemyjski/followers","following_url":"https://api.github.com/users/niemyjski/following{/other_user}","gists_url":"https://api.github.com/users/niemyjski/gists{/gist_id}","starred_url":"https://api.github.com/users/niemyjski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niemyjski/subscriptions","organizations_url":"https://api.github.com/users/niemyjski/orgs","repos_url":"https://api.github.com/users/niemyjski/repos","events_url":"https://api.github.com/users/niemyjski/events{/privacy}","received_events_url":"https://api.github.com/users/niemyjski/received_events","type":"User","site_admin":false},"created_at":"2016-10-24T19:59:26Z","updated_at":"2016-10-24T19:59:26Z","author_association":"CONTRIBUTOR","body":"I just ran into a case where I needed to use a pipeline as part of the update api to ensure my data is consistent and up-to-date.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/257739740","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-257739740","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":257739740,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NzczOTc0MA==","user":{"login":"niemyjski","id":1020579,"node_id":"MDQ6VXNlcjEwMjA1Nzk=","avatar_url":"https://avatars3.githubusercontent.com/u/1020579?v=4","gravatar_id":"","url":"https://api.github.com/users/niemyjski","html_url":"https://github.com/niemyjski","followers_url":"https://api.github.com/users/niemyjski/followers","following_url":"https://api.github.com/users/niemyjski/following{/other_user}","gists_url":"https://api.github.com/users/niemyjski/gists{/gist_id}","starred_url":"https://api.github.com/users/niemyjski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niemyjski/subscriptions","organizations_url":"https://api.github.com/users/niemyjski/orgs","repos_url":"https://api.github.com/users/niemyjski/repos","events_url":"https://api.github.com/users/niemyjski/events{/privacy}","received_events_url":"https://api.github.com/users/niemyjski/received_events","type":"User","site_admin":false},"created_at":"2016-11-02T00:31:07Z","updated_at":"2016-11-02T00:31:07Z","author_association":"CONTRIBUTOR","body":"Is there any reason the update api doesn't currently support pipelines? This is pretty huge and I'm already running into real world scenarios where I need this.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/283546267","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-283546267","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":283546267,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MzU0NjI2Nw==","user":{"login":"ssunka","id":2323921,"node_id":"MDQ6VXNlcjIzMjM5MjE=","avatar_url":"https://avatars0.githubusercontent.com/u/2323921?v=4","gravatar_id":"","url":"https://api.github.com/users/ssunka","html_url":"https://github.com/ssunka","followers_url":"https://api.github.com/users/ssunka/followers","following_url":"https://api.github.com/users/ssunka/following{/other_user}","gists_url":"https://api.github.com/users/ssunka/gists{/gist_id}","starred_url":"https://api.github.com/users/ssunka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ssunka/subscriptions","organizations_url":"https://api.github.com/users/ssunka/orgs","repos_url":"https://api.github.com/users/ssunka/repos","events_url":"https://api.github.com/users/ssunka/events{/privacy}","received_events_url":"https://api.github.com/users/ssunka/received_events","type":"User","site_admin":false},"created_at":"2017-03-02T03:33:00Z","updated_at":"2017-03-02T03:33:00Z","author_association":"NONE","body":"We really need ingest pipelines to work for update API. Its really a good feature to be considered by Elastic Search experts","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/296604032","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-296604032","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":296604032,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NjYwNDAzMg==","user":{"login":"icode","id":972959,"node_id":"MDQ6VXNlcjk3Mjk1OQ==","avatar_url":"https://avatars0.githubusercontent.com/u/972959?v=4","gravatar_id":"","url":"https://api.github.com/users/icode","html_url":"https://github.com/icode","followers_url":"https://api.github.com/users/icode/followers","following_url":"https://api.github.com/users/icode/following{/other_user}","gists_url":"https://api.github.com/users/icode/gists{/gist_id}","starred_url":"https://api.github.com/users/icode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icode/subscriptions","organizations_url":"https://api.github.com/users/icode/orgs","repos_url":"https://api.github.com/users/icode/repos","events_url":"https://api.github.com/users/icode/events{/privacy}","received_events_url":"https://api.github.com/users/icode/received_events","type":"User","site_admin":false},"created_at":"2017-04-24T10:07:17Z","updated_at":"2017-04-24T10:07:17Z","author_association":"NONE","body":"has not support???????","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/299608113","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-299608113","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":299608113,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTYwODExMw==","user":{"login":"aalkilani","id":3506008,"node_id":"MDQ6VXNlcjM1MDYwMDg=","avatar_url":"https://avatars0.githubusercontent.com/u/3506008?v=4","gravatar_id":"","url":"https://api.github.com/users/aalkilani","html_url":"https://github.com/aalkilani","followers_url":"https://api.github.com/users/aalkilani/followers","following_url":"https://api.github.com/users/aalkilani/following{/other_user}","gists_url":"https://api.github.com/users/aalkilani/gists{/gist_id}","starred_url":"https://api.github.com/users/aalkilani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aalkilani/subscriptions","organizations_url":"https://api.github.com/users/aalkilani/orgs","repos_url":"https://api.github.com/users/aalkilani/repos","events_url":"https://api.github.com/users/aalkilani/events{/privacy}","received_events_url":"https://api.github.com/users/aalkilani/received_events","type":"User","site_admin":false},"created_at":"2017-05-06T01:46:19Z","updated_at":"2017-05-06T01:46:19Z","author_association":"NONE","body":"+1 We're looking to use the Ingest pipeline to support updates from Logstash and get away from using scripts in Logstash where the entire document gets shipped back to LS for every update. With the amount of data we're processing, this is becoming critical for us and may push us away from using ES altogether.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/332388313","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-332388313","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":332388313,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjM4ODMxMw==","user":{"login":"brunosdiniz","id":46286,"node_id":"MDQ6VXNlcjQ2Mjg2","avatar_url":"https://avatars1.githubusercontent.com/u/46286?v=4","gravatar_id":"","url":"https://api.github.com/users/brunosdiniz","html_url":"https://github.com/brunosdiniz","followers_url":"https://api.github.com/users/brunosdiniz/followers","following_url":"https://api.github.com/users/brunosdiniz/following{/other_user}","gists_url":"https://api.github.com/users/brunosdiniz/gists{/gist_id}","starred_url":"https://api.github.com/users/brunosdiniz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brunosdiniz/subscriptions","organizations_url":"https://api.github.com/users/brunosdiniz/orgs","repos_url":"https://api.github.com/users/brunosdiniz/repos","events_url":"https://api.github.com/users/brunosdiniz/events{/privacy}","received_events_url":"https://api.github.com/users/brunosdiniz/received_events","type":"User","site_admin":false},"created_at":"2017-09-27T02:11:24Z","updated_at":"2017-09-27T02:11:24Z","author_association":"NONE","body":"+1 for this enhancement.\r\n\r\nFor the use case of ingest attachment pipelines, how are people currently dealing with updates to documents that have been previously indexed based on binary files?\r\n\r\nIn the scenario I´m exploring the document has an array of attachments, and having to fetch entire documents to be able to change a single attribute (via index api) doesn´t really seem like something one would have to resort to with ES at this stage.\r\n\r\nIs there any good alternative to ingest attachment plugin for those using Logstash that does not involve ingestion pipelines?\r\n\r\nI thought about maybe handling the text extraction in a ruby filter and avoiding the ingestion pipeline altogether, but that seemed to hacky for such a scenario I think might be quite common for the majority of folks.\r\n\r\nAppreciate any insight on this.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/332442211","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-332442211","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":332442211,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjQ0MjIxMQ==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2017-09-27T08:02:38Z","updated_at":"2017-09-27T08:02:38Z","author_association":"MEMBER","body":"@brunosdiniz I'm pretty sure it will happen at some point in LS. LS is moving some part of the code to Java so integrating ingest-attachment as a codec or a filter should be \"easy\" in the future.\r\n\r\nSee https://github.com/elastic/logstash/issues/3815. I started an implementation of this 3 years ago but never went farer than the POC.\r\n\r\nOne thing you can may be use is my open source project named [FSCrawler](https://github.com/dadoonet/fscrawler). It comes with a REST interface which you may call from Logstash with something like this [REST Filter plugin](https://github.com/elastic/logstash/issues/3489) (not merged though so it will require some work I guess).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/353709738","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-353709738","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":353709738,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzcwOTczOA==","user":{"login":"consulthys","id":1280019,"node_id":"MDQ6VXNlcjEyODAwMTk=","avatar_url":"https://avatars2.githubusercontent.com/u/1280019?v=4","gravatar_id":"","url":"https://api.github.com/users/consulthys","html_url":"https://github.com/consulthys","followers_url":"https://api.github.com/users/consulthys/followers","following_url":"https://api.github.com/users/consulthys/following{/other_user}","gists_url":"https://api.github.com/users/consulthys/gists{/gist_id}","starred_url":"https://api.github.com/users/consulthys/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/consulthys/subscriptions","organizations_url":"https://api.github.com/users/consulthys/orgs","repos_url":"https://api.github.com/users/consulthys/repos","events_url":"https://api.github.com/users/consulthys/events{/privacy}","received_events_url":"https://api.github.com/users/consulthys/received_events","type":"User","site_admin":false},"created_at":"2017-12-23T06:18:31Z","updated_at":"2018-01-02T14:35:01Z","author_association":"CONTRIBUTOR","body":"I'm pretty sure there are many real-world use case scenarii which would benefit from having the Update API support ingest pipelines. \r\n\r\nFor instance, I have a very concrete case where documents are coming from a third-party system (which is out of our control). When we index those documents the first time, we send them through an ingest pipeline to apply some transformations (split values, etc) and standardization (field renaming, etc). At a later point in the process, those documents are enriched by various software components under our control (mainly new fields are added). However, those documents are also updated from time to time in the 3rd party system and need to be repulled and re-indexed when that happens. If we simply index the document with the new data again, the current version of the document which contains the additional enriched fields will be erased. Just to illustrate this:\r\n\r\nAt time T, the document coming from the 3rd-party system looks like:\r\n```\r\n{ \r\n     \"field1\": \"data11,data12\",              // raw\r\n     \"field2\": \"data2\"                       // raw\r\n}\r\n```\r\nAt time T+1, after going through an ingest pipeline, it looks like\r\n```\r\n{ \r\n    \"field1_renamed\": [\"data11\", \"data12\"],  // renamed + split\r\n    \"field2_renamed\": \"data2\"                // renamed\r\n}\r\n```\r\nAt time T+2, various processes enrich the document which now looks like\r\n```\r\n{ \r\n     \"field1_renamed\": [\"data11\", \"data12\"], // same\r\n     \"field2_renamed\": \"data2\",              // same\r\n     \"custom_field1\": \"customdata1\",         // custom/enriched\r\n     \"custom_field2\": \"customdata2\"          // custom/enriched\r\n}\r\n```\r\nAt time T+3, the document is updated in the 3rd-party system and now looks like:\r\n```\r\n{ \r\n     \"field1\": \"data3\",                      // raw\r\n     \"field2\": \"data4\"                       // raw\r\n}\r\n```\r\n\r\nAt this point, we need to do two things:\r\n\r\n1. apply the transformations in the ingest pipeline (rename fields, split fields, etc)\r\n2. keep the custom fields that have been created at T+2\r\n\r\ni.e. the new version of the document should look like this:\r\n```\r\n{ \r\n     \"field1_renamed\": \"data3\",              // renamed\r\n     \"field2_renamed\": \"data4\",              // renamed \r\n     \"custom_field1\": \"customdata1\",         // same \r\n     \"custom_field2\": \"customdata2\"          // same\r\n}\r\n```\r\n\r\nI don't think what we're doing above is anything out of the ordinary, I can imagine plenty of use cases along the same lines. Since the Update API doesn't support pipelines, we cannot use them at all and have to reimplement exactly what ingest pipelines do but shove that functionality inside of our software stack to apply the transformation ourselves.\r\n\r\nAnother possibility would boil down to do all this with Logstash (rename fields, etc) + use a ruby filter to apply the diff, but for having implemented it a few times, I think it's a pretty convoluted solution which won't scale well in our case because there are many 3rd party systems and the field renaming is different for each of them (i.e. it's easier to create pipelines for each of them, than different Logstash configs for each of them).\r\n\r\nI've thought of using parent/child docs for this, so that our custom fields would be in a parent document and data from 3rd party systems would be in child documents that can be indexed/overridden as usual (hence pipelines would work), but this setup would make queries overkill afterwards.\r\n\r\nYet another idea would be to have a `_meta` field per document so we can shove our custom fields in there and not override them when indexing a new version, but as far as I know this feature [only exists in my head](https://discuss.elastic.co/t/document-level-metadata/113183). \r\n\r\nIn light of this concrete case, I appreciate if anyone has any thoughts on how to best handle this.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/357661426","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-357661426","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":357661426,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NzY2MTQyNg==","user":{"login":"consulthys","id":1280019,"node_id":"MDQ6VXNlcjEyODAwMTk=","avatar_url":"https://avatars2.githubusercontent.com/u/1280019?v=4","gravatar_id":"","url":"https://api.github.com/users/consulthys","html_url":"https://github.com/consulthys","followers_url":"https://api.github.com/users/consulthys/followers","following_url":"https://api.github.com/users/consulthys/following{/other_user}","gists_url":"https://api.github.com/users/consulthys/gists{/gist_id}","starred_url":"https://api.github.com/users/consulthys/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/consulthys/subscriptions","organizations_url":"https://api.github.com/users/consulthys/orgs","repos_url":"https://api.github.com/users/consulthys/repos","events_url":"https://api.github.com/users/consulthys/events{/privacy}","received_events_url":"https://api.github.com/users/consulthys/received_events","type":"User","site_admin":false},"created_at":"2018-01-15T11:50:48Z","updated_at":"2018-01-15T11:51:10Z","author_association":"CONTRIBUTOR","body":"For those who are interested, I've figured out yet another way to circumvent this. It involves an additional step, but it works and does exactly what I want.\r\n\r\nThe idea is to:\r\n 1. first use the Index API to index the data into a temporary index using the ingestion pipeline (to apply the transformations, renaming, etc)\r\n 2. then to read the data from that temporary index\r\n 3. and finally to use the Update API (doc/script upsert) to update the real index with the transformed data read from the temporary index.\r\n\r\nAgreed, it would be much easier if the Update API would support ingestion pipelines, and I'm still hoping that it will be the case one day.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/372729963","html_url":"https://github.com/elastic/elasticsearch/issues/17895#issuecomment-372729963","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17895","id":372729963,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MjcyOTk2Mw==","user":{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false},"created_at":"2018-03-13T16:31:47Z","updated_at":"2018-03-13T16:31:47Z","author_association":"CONTRIBUTOR","body":"Closing since the performance ramifications of this are too great to consider implementing this functionality and exporting the document (at update time) to a separate ingest node.","performed_via_github_app":null}]