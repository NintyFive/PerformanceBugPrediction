[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/61256849","html_url":"https://github.com/elastic/elasticsearch/issues/8308#issuecomment-61256849","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8308","id":61256849,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMjU2ODQ5","user":{"login":"lukas-vlcek","id":205174,"node_id":"MDQ6VXNlcjIwNTE3NA==","avatar_url":"https://avatars2.githubusercontent.com/u/205174?v=4","gravatar_id":"","url":"https://api.github.com/users/lukas-vlcek","html_url":"https://github.com/lukas-vlcek","followers_url":"https://api.github.com/users/lukas-vlcek/followers","following_url":"https://api.github.com/users/lukas-vlcek/following{/other_user}","gists_url":"https://api.github.com/users/lukas-vlcek/gists{/gist_id}","starred_url":"https://api.github.com/users/lukas-vlcek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukas-vlcek/subscriptions","organizations_url":"https://api.github.com/users/lukas-vlcek/orgs","repos_url":"https://api.github.com/users/lukas-vlcek/repos","events_url":"https://api.github.com/users/lukas-vlcek/events{/privacy}","received_events_url":"https://api.github.com/users/lukas-vlcek/received_events","type":"User","site_admin":false},"created_at":"2014-10-31T13:04:29Z","updated_at":"2014-10-31T13:04:29Z","author_association":"CONTRIBUTOR","body":"I was testing it with ES 1.3.0\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/61265875","html_url":"https://github.com/elastic/elasticsearch/issues/8308#issuecomment-61265875","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8308","id":61265875,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMjY1ODc1","user":{"login":"lukas-vlcek","id":205174,"node_id":"MDQ6VXNlcjIwNTE3NA==","avatar_url":"https://avatars2.githubusercontent.com/u/205174?v=4","gravatar_id":"","url":"https://api.github.com/users/lukas-vlcek","html_url":"https://github.com/lukas-vlcek","followers_url":"https://api.github.com/users/lukas-vlcek/followers","following_url":"https://api.github.com/users/lukas-vlcek/following{/other_user}","gists_url":"https://api.github.com/users/lukas-vlcek/gists{/gist_id}","starred_url":"https://api.github.com/users/lukas-vlcek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukas-vlcek/subscriptions","organizations_url":"https://api.github.com/users/lukas-vlcek/orgs","repos_url":"https://api.github.com/users/lukas-vlcek/repos","events_url":"https://api.github.com/users/lukas-vlcek/events{/privacy}","received_events_url":"https://api.github.com/users/lukas-vlcek/received_events","type":"User","site_admin":false},"created_at":"2014-10-31T14:15:28Z","updated_at":"2014-10-31T14:15:28Z","author_association":"CONTRIBUTOR","body":"@clintongormley thanks for clarifying this. Out of curiosity, does the template example in question work for you?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/61268828","html_url":"https://github.com/elastic/elasticsearch/issues/8308#issuecomment-61268828","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8308","id":61268828,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMjY4ODI4","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-10-31T14:34:29Z","updated_at":"2014-10-31T14:34:29Z","author_association":"CONTRIBUTOR","body":"@lukas-vlcek did you wrap it in a `query` element and pass it as an escaped string?  \n\nI've just pushed another improvement to the docs to include both of the above elements\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/61302925","html_url":"https://github.com/elastic/elasticsearch/issues/8308#issuecomment-61302925","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8308","id":61302925,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzAyOTI1","user":{"login":"lukas-vlcek","id":205174,"node_id":"MDQ6VXNlcjIwNTE3NA==","avatar_url":"https://avatars2.githubusercontent.com/u/205174?v=4","gravatar_id":"","url":"https://api.github.com/users/lukas-vlcek","html_url":"https://github.com/lukas-vlcek","followers_url":"https://api.github.com/users/lukas-vlcek/followers","following_url":"https://api.github.com/users/lukas-vlcek/following{/other_user}","gists_url":"https://api.github.com/users/lukas-vlcek/gists{/gist_id}","starred_url":"https://api.github.com/users/lukas-vlcek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukas-vlcek/subscriptions","organizations_url":"https://api.github.com/users/lukas-vlcek/orgs","repos_url":"https://api.github.com/users/lukas-vlcek/repos","events_url":"https://api.github.com/users/lukas-vlcek/events{/privacy}","received_events_url":"https://api.github.com/users/lukas-vlcek/received_events","type":"User","site_admin":false},"created_at":"2014-10-31T18:06:38Z","updated_at":"2014-10-31T18:06:38Z","author_association":"CONTRIBUTOR","body":"@clintongormley thanks for this, but still I am unable to get search template with section work. Here is trivial recreation https://gist.github.com/lukas-vlcek/56540a7e8206d122d55c\nIs there anything I do wrong? Am I missing some escaping?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/61303916","html_url":"https://github.com/elastic/elasticsearch/issues/8308#issuecomment-61303916","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8308","id":61303916,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzAzOTE2","user":{"login":"lukas-vlcek","id":205174,"node_id":"MDQ6VXNlcjIwNTE3NA==","avatar_url":"https://avatars2.githubusercontent.com/u/205174?v=4","gravatar_id":"","url":"https://api.github.com/users/lukas-vlcek","html_url":"https://github.com/lukas-vlcek","followers_url":"https://api.github.com/users/lukas-vlcek/followers","following_url":"https://api.github.com/users/lukas-vlcek/following{/other_user}","gists_url":"https://api.github.com/users/lukas-vlcek/gists{/gist_id}","starred_url":"https://api.github.com/users/lukas-vlcek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukas-vlcek/subscriptions","organizations_url":"https://api.github.com/users/lukas-vlcek/orgs","repos_url":"https://api.github.com/users/lukas-vlcek/repos","events_url":"https://api.github.com/users/lukas-vlcek/events{/privacy}","received_events_url":"https://api.github.com/users/lukas-vlcek/received_events","type":"User","site_admin":false},"created_at":"2014-10-31T18:12:00Z","updated_at":"2014-10-31T18:12:00Z","author_association":"CONTRIBUTOR","body":"Just in case here is excerpt from server log:\n\n```\n[2014-10-31 19:03:29,575][DEBUG][action.search.type       ] [Jester] [twitter][4], node[ccMkzywSSfi-4ttibpHh9w], [P], s[STARTED]: Failed to execute [org.elasticsearch.action.search.SearchRequest@7de37772] lastShard [true]\norg.elasticsearch.ElasticsearchParseException: Failed to parse template\n    at org.elasticsearch.search.SearchService.parseTemplate(SearchService.java:612)\n    at org.elasticsearch.search.SearchService.createContext(SearchService.java:514)\n    at org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:487)\n    at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:256)\n    at org.elasticsearch.search.action.SearchServiceTransportAction$5.call(SearchServiceTransportAction.java:206)\n    at org.elasticsearch.search.action.SearchServiceTransportAction$5.call(SearchServiceTransportAction.java:203)\n    at org.elasticsearch.search.action.SearchServiceTransportAction$23.run(SearchServiceTransportAction.java:517)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: org.elasticsearch.common.jackson.core.JsonParseException: Unexpected character ('{' (code 123)): was expecting either valid name character (for unquoted name) or double-quote (for quoted) to start field name\n at [Source: [B@438d7c6b; line: 1, column: 4]\n    at org.elasticsearch.common.jackson.core.JsonParser._constructError(JsonParser.java:1419)\n    at org.elasticsearch.common.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:508)\n    at org.elasticsearch.common.jackson.core.base.ParserMinimalBase._reportUnexpectedChar(ParserMinimalBase.java:437)\n    at org.elasticsearch.common.jackson.core.json.UTF8StreamJsonParser._handleOddName(UTF8StreamJsonParser.java:1808)\n    at org.elasticsearch.common.jackson.core.json.UTF8StreamJsonParser._parseName(UTF8StreamJsonParser.java:1496)\n    at org.elasticsearch.common.jackson.core.json.UTF8StreamJsonParser.nextToken(UTF8StreamJsonParser.java:693)\n    at org.elasticsearch.common.xcontent.json.JsonXContentParser.nextToken(JsonXContentParser.java:50)\n    at org.elasticsearch.index.query.TemplateQueryParser.parse(TemplateQueryParser.java:113)\n    at org.elasticsearch.index.query.TemplateQueryParser.parse(TemplateQueryParser.java:103)\n    at org.elasticsearch.search.SearchService.parseTemplate(SearchService.java:605)\n    ... 9 more\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/61370324","html_url":"https://github.com/elastic/elasticsearch/issues/8308#issuecomment-61370324","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8308","id":61370324,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzcwMzI0","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-11-01T14:45:00Z","updated_at":"2014-11-01T14:45:00Z","author_association":"CONTRIBUTOR","body":"@lukas-vlcek I can't get this working either. No idea what is going on here :(\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/61406274","html_url":"https://github.com/elastic/elasticsearch/issues/8308#issuecomment-61406274","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8308","id":61406274,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNDA2Mjc0","user":{"login":"lukas-vlcek","id":205174,"node_id":"MDQ6VXNlcjIwNTE3NA==","avatar_url":"https://avatars2.githubusercontent.com/u/205174?v=4","gravatar_id":"","url":"https://api.github.com/users/lukas-vlcek","html_url":"https://github.com/lukas-vlcek","followers_url":"https://api.github.com/users/lukas-vlcek/followers","following_url":"https://api.github.com/users/lukas-vlcek/following{/other_user}","gists_url":"https://api.github.com/users/lukas-vlcek/gists{/gist_id}","starred_url":"https://api.github.com/users/lukas-vlcek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukas-vlcek/subscriptions","organizations_url":"https://api.github.com/users/lukas-vlcek/orgs","repos_url":"https://api.github.com/users/lukas-vlcek/repos","events_url":"https://api.github.com/users/lukas-vlcek/events{/privacy}","received_events_url":"https://api.github.com/users/lukas-vlcek/received_events","type":"User","site_admin":false},"created_at":"2014-11-02T13:22:30Z","updated_at":"2014-11-02T13:22:30Z","author_association":"CONTRIBUTOR","body":"@clintongormley thanks for look at this. Shall I change the title of this issue and remove the [DOC] part? It is probably not a DOC issue anymore, is it?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/61911879","html_url":"https://github.com/elastic/elasticsearch/issues/8308#issuecomment-61911879","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8308","id":61911879,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTExODc5","user":{"login":"wwken","id":3743589,"node_id":"MDQ6VXNlcjM3NDM1ODk=","avatar_url":"https://avatars3.githubusercontent.com/u/3743589?v=4","gravatar_id":"","url":"https://api.github.com/users/wwken","html_url":"https://github.com/wwken","followers_url":"https://api.github.com/users/wwken/followers","following_url":"https://api.github.com/users/wwken/following{/other_user}","gists_url":"https://api.github.com/users/wwken/gists{/gist_id}","starred_url":"https://api.github.com/users/wwken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwken/subscriptions","organizations_url":"https://api.github.com/users/wwken/orgs","repos_url":"https://api.github.com/users/wwken/repos","events_url":"https://api.github.com/users/wwken/events{/privacy}","received_events_url":"https://api.github.com/users/wwken/received_events","type":"User","site_admin":false},"created_at":"2014-11-06T01:09:38Z","updated_at":"2014-11-06T01:09:38Z","author_association":"CONTRIBUTOR","body":"After looking deep inside the code, I am wondering has this (i.e. the conditional clause thing) been ever working? The root clause is, inside the JsonXContentParser.java:nextToken() method, the parser.nextToken() throws an exception straight out of the box when it encounters the clause like {{#use_size}}.    I guess such clause has not been implemented to be recognized yet.  Notice that the parser is of type org.elasticsearch.common.jackson.core.json.UTF8StreamJsonParser .  \n\nIt looks like we have to override the UTF8StreamJsonParser's nextToken() method and do some look ahead for the conditional clauses.   \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/61955100","html_url":"https://github.com/elastic/elasticsearch/issues/8308#issuecomment-61955100","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8308","id":61955100,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTU1MTAw","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-11-06T10:05:58Z","updated_at":"2014-11-06T10:05:58Z","author_association":"CONTRIBUTOR","body":"@wwken As I understand it, the JSON parser should never see this the `{{#use_size}}`.  The template is passed as a string, not as JSON, so the Mustache should render the template (thus removing the conditionals) to generate JSON which can _then_ be parsed.\n\nThis would be much easier to debug if we had #6821\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/62091740","html_url":"https://github.com/elastic/elasticsearch/issues/8308#issuecomment-62091740","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8308","id":62091740,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDkxNzQw","user":{"login":"wwken","id":3743589,"node_id":"MDQ6VXNlcjM3NDM1ODk=","avatar_url":"https://avatars3.githubusercontent.com/u/3743589?v=4","gravatar_id":"","url":"https://api.github.com/users/wwken","html_url":"https://github.com/wwken","followers_url":"https://api.github.com/users/wwken/followers","following_url":"https://api.github.com/users/wwken/following{/other_user}","gists_url":"https://api.github.com/users/wwken/gists{/gist_id}","starred_url":"https://api.github.com/users/wwken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwken/subscriptions","organizations_url":"https://api.github.com/users/wwken/orgs","repos_url":"https://api.github.com/users/wwken/repos","events_url":"https://api.github.com/users/wwken/events{/privacy}","received_events_url":"https://api.github.com/users/wwken/received_events","type":"User","site_admin":false},"created_at":"2014-11-07T03:40:07Z","updated_at":"2014-11-07T03:40:07Z","author_association":"CONTRIBUTOR","body":" I fixed it.  Please refer to this pull request: https://github.com/elasticsearch/elasticsearch/pull/8376/files\n(P.S. plz ignore the above few links as i messed up checking in some incorrect commit files before by mistake)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/62140799","html_url":"https://github.com/elastic/elasticsearch/issues/8308#issuecomment-62140799","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8308","id":62140799,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMTQwNzk5","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-11-07T13:18:52Z","updated_at":"2014-11-07T13:18:52Z","author_association":"CONTRIBUTOR","body":"thanks @wwken - we'll take a look and get back to you\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/62178716","html_url":"https://github.com/elastic/elasticsearch/issues/8308#issuecomment-62178716","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8308","id":62178716,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMTc4NzE2","user":{"login":"lukas-vlcek","id":205174,"node_id":"MDQ6VXNlcjIwNTE3NA==","avatar_url":"https://avatars2.githubusercontent.com/u/205174?v=4","gravatar_id":"","url":"https://api.github.com/users/lukas-vlcek","html_url":"https://github.com/lukas-vlcek","followers_url":"https://api.github.com/users/lukas-vlcek/followers","following_url":"https://api.github.com/users/lukas-vlcek/following{/other_user}","gists_url":"https://api.github.com/users/lukas-vlcek/gists{/gist_id}","starred_url":"https://api.github.com/users/lukas-vlcek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukas-vlcek/subscriptions","organizations_url":"https://api.github.com/users/lukas-vlcek/orgs","repos_url":"https://api.github.com/users/lukas-vlcek/repos","events_url":"https://api.github.com/users/lukas-vlcek/events{/privacy}","received_events_url":"https://api.github.com/users/lukas-vlcek/received_events","type":"User","site_admin":false},"created_at":"2014-11-07T17:21:43Z","updated_at":"2014-11-07T17:22:19Z","author_association":"CONTRIBUTOR","body":"@clintongormley #8393 is my try to fix this issue. If you find this relevant and to the point then it might make sense to consider renaming this issue again to more general description (I think the main issue here is broken parser logic of TemplateQueryParser in case the template value is a single string token. In other words I think there is more general issue not directly related to conditional clauses only).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/62198175","html_url":"https://github.com/elastic/elasticsearch/issues/8308#issuecomment-62198175","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8308","id":62198175,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMTk4MTc1","user":{"login":"wwken","id":3743589,"node_id":"MDQ6VXNlcjM3NDM1ODk=","avatar_url":"https://avatars3.githubusercontent.com/u/3743589?v=4","gravatar_id":"","url":"https://api.github.com/users/wwken","html_url":"https://github.com/wwken","followers_url":"https://api.github.com/users/wwken/followers","following_url":"https://api.github.com/users/wwken/following{/other_user}","gists_url":"https://api.github.com/users/wwken/gists{/gist_id}","starred_url":"https://api.github.com/users/wwken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwken/subscriptions","organizations_url":"https://api.github.com/users/wwken/orgs","repos_url":"https://api.github.com/users/wwken/repos","events_url":"https://api.github.com/users/wwken/events{/privacy}","received_events_url":"https://api.github.com/users/wwken/received_events","type":"User","site_admin":false},"created_at":"2014-11-07T19:25:23Z","updated_at":"2014-11-07T19:25:23Z","author_association":"CONTRIBUTOR","body":"@lukas-vlcek  I think for sure your solution is better! I have two suggestions on it though (minor, not any important):\n\n1) In this file, https://github.com/lukas-vlcek/elasticsearch/blob/8308/src/main/java/org/elasticsearch/search/SearchService.java, you can omit the lines from 617-635 since they are not needed\n\n2) in this file, https://github.com/lukas-vlcek/elasticsearch/blob/8308/src/main/java/org/elasticsearch/index/query/TemplateQueryParser.java, you can separate the single if in line 113 to two if statements to make it more elegant :)\n\nthanks \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/62305114","html_url":"https://github.com/elastic/elasticsearch/issues/8308#issuecomment-62305114","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8308","id":62305114,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMzA1MTE0","user":{"login":"lukas-vlcek","id":205174,"node_id":"MDQ6VXNlcjIwNTE3NA==","avatar_url":"https://avatars2.githubusercontent.com/u/205174?v=4","gravatar_id":"","url":"https://api.github.com/users/lukas-vlcek","html_url":"https://github.com/lukas-vlcek","followers_url":"https://api.github.com/users/lukas-vlcek/followers","following_url":"https://api.github.com/users/lukas-vlcek/following{/other_user}","gists_url":"https://api.github.com/users/lukas-vlcek/gists{/gist_id}","starred_url":"https://api.github.com/users/lukas-vlcek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukas-vlcek/subscriptions","organizations_url":"https://api.github.com/users/lukas-vlcek/orgs","repos_url":"https://api.github.com/users/lukas-vlcek/repos","events_url":"https://api.github.com/users/lukas-vlcek/events{/privacy}","received_events_url":"https://api.github.com/users/lukas-vlcek/received_events","type":"User","site_admin":false},"created_at":"2014-11-09T14:28:08Z","updated_at":"2014-11-09T14:28:08Z","author_association":"CONTRIBUTOR","body":"@wwken thanks for looking at this. I am going to wait if ES devs give any feedback. May be they will want to fix it in very different approach. Who knows...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/62694654","html_url":"https://github.com/elastic/elasticsearch/issues/8308#issuecomment-62694654","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8308","id":62694654,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNjk0NjU0","user":{"login":"lukas-vlcek","id":205174,"node_id":"MDQ6VXNlcjIwNTE3NA==","avatar_url":"https://avatars2.githubusercontent.com/u/205174?v=4","gravatar_id":"","url":"https://api.github.com/users/lukas-vlcek","html_url":"https://github.com/lukas-vlcek","followers_url":"https://api.github.com/users/lukas-vlcek/followers","following_url":"https://api.github.com/users/lukas-vlcek/following{/other_user}","gists_url":"https://api.github.com/users/lukas-vlcek/gists{/gist_id}","starred_url":"https://api.github.com/users/lukas-vlcek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukas-vlcek/subscriptions","organizations_url":"https://api.github.com/users/lukas-vlcek/orgs","repos_url":"https://api.github.com/users/lukas-vlcek/repos","events_url":"https://api.github.com/users/lukas-vlcek/events{/privacy}","received_events_url":"https://api.github.com/users/lukas-vlcek/received_events","type":"User","site_admin":false},"created_at":"2014-11-12T09:58:31Z","updated_at":"2014-11-12T09:58:31Z","author_association":"CONTRIBUTOR","body":"Bump.\n\nIs there any plan to have this fixed in 1.4? Or even backporting it to 1.3? We would like to make use of Search Templates but this issue is somehow limiting us. How can I help with this?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/114590198","html_url":"https://github.com/elastic/elasticsearch/issues/8308#issuecomment-114590198","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8308","id":114590198,"node_id":"MDEyOklzc3VlQ29tbWVudDExNDU5MDE5OA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-06-23T17:54:59Z","updated_at":"2015-06-23T17:54:59Z","author_association":"CONTRIBUTOR","body":"Closed by #11512\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/114746552","html_url":"https://github.com/elastic/elasticsearch/issues/8308#issuecomment-114746552","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8308","id":114746552,"node_id":"MDEyOklzc3VlQ29tbWVudDExNDc0NjU1Mg==","user":{"login":"lukas-vlcek","id":205174,"node_id":"MDQ6VXNlcjIwNTE3NA==","avatar_url":"https://avatars2.githubusercontent.com/u/205174?v=4","gravatar_id":"","url":"https://api.github.com/users/lukas-vlcek","html_url":"https://github.com/lukas-vlcek","followers_url":"https://api.github.com/users/lukas-vlcek/followers","following_url":"https://api.github.com/users/lukas-vlcek/following{/other_user}","gists_url":"https://api.github.com/users/lukas-vlcek/gists{/gist_id}","starred_url":"https://api.github.com/users/lukas-vlcek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukas-vlcek/subscriptions","organizations_url":"https://api.github.com/users/lukas-vlcek/orgs","repos_url":"https://api.github.com/users/lukas-vlcek/repos","events_url":"https://api.github.com/users/lukas-vlcek/events{/privacy}","received_events_url":"https://api.github.com/users/lukas-vlcek/received_events","type":"User","site_admin":false},"created_at":"2015-06-24T06:32:40Z","updated_at":"2015-06-24T06:32:40Z","author_association":"CONTRIBUTOR","body":"@clintongormley correct, this issue was created before I opened more general PR. Closing...\n","performed_via_github_app":null}]