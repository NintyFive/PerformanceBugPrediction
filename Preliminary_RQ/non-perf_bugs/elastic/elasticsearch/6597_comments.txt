[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/46943109","html_url":"https://github.com/elastic/elasticsearch/issues/6597#issuecomment-46943109","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6597","id":46943109,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTQzMTA5","user":{"login":"ferdynice","id":2369153,"node_id":"MDQ6VXNlcjIzNjkxNTM=","avatar_url":"https://avatars3.githubusercontent.com/u/2369153?v=4","gravatar_id":"","url":"https://api.github.com/users/ferdynice","html_url":"https://github.com/ferdynice","followers_url":"https://api.github.com/users/ferdynice/followers","following_url":"https://api.github.com/users/ferdynice/following{/other_user}","gists_url":"https://api.github.com/users/ferdynice/gists{/gist_id}","starred_url":"https://api.github.com/users/ferdynice/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ferdynice/subscriptions","organizations_url":"https://api.github.com/users/ferdynice/orgs","repos_url":"https://api.github.com/users/ferdynice/repos","events_url":"https://api.github.com/users/ferdynice/events{/privacy}","received_events_url":"https://api.github.com/users/ferdynice/received_events","type":"User","site_admin":false},"created_at":"2014-06-24T08:09:19Z","updated_at":"2014-06-24T08:12:01Z","author_association":"NONE","body":"Afaik even the newest release (1.2.1) is not able to handle it. For example when you start es and one of the drives have some i/o read-only error, it fails inmediately. When you have a lot of disks in a jbod fashion, you can use the trick I use, that is running 1 es node per disk instead per server.\n\nLet's say you have 6 disks therefore 6 data paths, mounted on /mnt/disk?/elastic. You can start es with:\n\n`for i in {1..6}; do elasticsearch-1.2.1/bin/elasticsearch -d --path.data=/mnt/disk$i/elastic --path.logs=elasticsearch-1.2.1/logs/$i --node.name=`hostname -s`_disk$i --node.machine=`hostname -s` --cluster.routing.allocation.awareness.attributes=machine; done`\n\nThe disks that are broken will prevent es from starting, but still you can enjoy some processing on the faulty server because of the remaining disks. The 'node.machine' property with the allocation property makes sure balancing is not messed up. Also obviously you need to reduce the heap as you are running multiple processes.\n\nI'm not sure if this is best practise, it works for me.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/47648109","html_url":"https://github.com/elastic/elasticsearch/issues/6597#issuecomment-47648109","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6597","id":47648109,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjQ4MTA5","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-07-01T12:11:20Z","updated_at":"2014-07-01T12:11:20Z","author_association":"CONTRIBUTOR","body":"@ferdy-galema Note that you should also be setting the number of `processors` in the config file, otherwise each node on the same box will assume that it alone has access to all the cores, and will create too many threads.\n\n@drewrockshard this is something which should be discussed on the mailing list rather than in the issues list\n","performed_via_github_app":null}]