[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/314855435","html_url":"https://github.com/elastic/elasticsearch/issues/25691#issuecomment-314855435","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25691","id":314855435,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNDg1NTQzNQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-07-12T18:24:17Z","updated_at":"2017-07-12T18:24:17Z","author_association":"MEMBER","body":"You've lost your jvm.options file which disables functionality in Log4j 2 that trips the security manager with this permission. Since this is not a bug I'm closing this issue. Please feel free to follow up on the [forum](https://discuss.elastic.co) for additional help if needed.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/314856432","html_url":"https://github.com/elastic/elasticsearch/issues/25691#issuecomment-314856432","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25691","id":314856432,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNDg1NjQzMg==","user":{"login":"JimKeating2","id":24461111,"node_id":"MDQ6VXNlcjI0NDYxMTEx","avatar_url":"https://avatars2.githubusercontent.com/u/24461111?v=4","gravatar_id":"","url":"https://api.github.com/users/JimKeating2","html_url":"https://github.com/JimKeating2","followers_url":"https://api.github.com/users/JimKeating2/followers","following_url":"https://api.github.com/users/JimKeating2/following{/other_user}","gists_url":"https://api.github.com/users/JimKeating2/gists{/gist_id}","starred_url":"https://api.github.com/users/JimKeating2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JimKeating2/subscriptions","organizations_url":"https://api.github.com/users/JimKeating2/orgs","repos_url":"https://api.github.com/users/JimKeating2/repos","events_url":"https://api.github.com/users/JimKeating2/events{/privacy}","received_events_url":"https://api.github.com/users/JimKeating2/received_events","type":"User","site_admin":false},"created_at":"2017-07-12T18:27:57Z","updated_at":"2017-07-12T18:27:57Z","author_association":"NONE","body":"The jvm.options file is still there and has not been changed...","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/314857150","html_url":"https://github.com/elastic/elasticsearch/issues/25691#issuecomment-314857150","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25691","id":314857150,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNDg1NzE1MA==","user":{"login":"JimKeating2","id":24461111,"node_id":"MDQ6VXNlcjI0NDYxMTEx","avatar_url":"https://avatars2.githubusercontent.com/u/24461111?v=4","gravatar_id":"","url":"https://api.github.com/users/JimKeating2","html_url":"https://github.com/JimKeating2","followers_url":"https://api.github.com/users/JimKeating2/followers","following_url":"https://api.github.com/users/JimKeating2/following{/other_user}","gists_url":"https://api.github.com/users/JimKeating2/gists{/gist_id}","starred_url":"https://api.github.com/users/JimKeating2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JimKeating2/subscriptions","organizations_url":"https://api.github.com/users/JimKeating2/orgs","repos_url":"https://api.github.com/users/JimKeating2/repos","events_url":"https://api.github.com/users/JimKeating2/events{/privacy}","received_events_url":"https://api.github.com/users/JimKeating2/received_events","type":"User","site_admin":false},"created_at":"2017-07-12T18:30:44Z","updated_at":"2017-07-12T18:30:44Z","author_association":"NONE","body":"# log4j 2\r\n-Dlog4j.shutdownHookEnabled=false\r\n-Dlog4j2.disable.jmx=true\r\n-Dlog4j.skipJansi=true\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/314861619","html_url":"https://github.com/elastic/elasticsearch/issues/25691#issuecomment-314861619","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25691","id":314861619,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNDg2MTYxOQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-07-12T18:47:26Z","updated_at":"2017-07-12T18:47:26Z","author_association":"MEMBER","body":"Do you see in the startup the JVM options that Elasticsearch was started with, we log them now? If you see those entries there, please let me know (and share the log line) and I will investigate further but right now I remain convinced that Elasticsearch is not being started with the correct jvm.options file.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/314865054","html_url":"https://github.com/elastic/elasticsearch/issues/25691#issuecomment-314865054","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25691","id":314865054,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNDg2NTA1NA==","user":{"login":"JimKeating2","id":24461111,"node_id":"MDQ6VXNlcjI0NDYxMTEx","avatar_url":"https://avatars2.githubusercontent.com/u/24461111?v=4","gravatar_id":"","url":"https://api.github.com/users/JimKeating2","html_url":"https://github.com/JimKeating2","followers_url":"https://api.github.com/users/JimKeating2/followers","following_url":"https://api.github.com/users/JimKeating2/following{/other_user}","gists_url":"https://api.github.com/users/JimKeating2/gists{/gist_id}","starred_url":"https://api.github.com/users/JimKeating2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JimKeating2/subscriptions","organizations_url":"https://api.github.com/users/JimKeating2/orgs","repos_url":"https://api.github.com/users/JimKeating2/repos","events_url":"https://api.github.com/users/JimKeating2/events{/privacy}","received_events_url":"https://api.github.com/users/JimKeating2/received_events","type":"User","site_admin":false},"created_at":"2017-07-12T18:59:28Z","updated_at":"2017-07-12T18:59:28Z","author_association":"NONE","body":"Jason,  Thanks for the response.  I've done an upgrade from 5.4.1 to 5.5 twice now and had the same experience both times.  There is only the one jvm.options file and it has not been edited as it has the same file date that it had before the upgrade.  I had accidentally upgraded Elasticsearch the first time doing an apt-get upgrade command when patching one of our 4 Elasticsearch VMs.  (We had used the apt repository when installing the VMs and had forgot to remove it.)  The Elasticsearch service had the same error and I tried to fix it over a day's time...the next day it automatically removed itself from the cluster.  I rebuilt it with 5.5 and tried to join it to the cluster with no luck.  This morning I shut down the 3 working VMs and snapshotted them and restarted.   I then followed the instructions to do a rolling upgrade but received the same error that I had with the previous VM.  I reverted the snapshots on the 3 VMs a while ago so we could start logging again.  Any suggestions to get a successful upgrade would be appreciated..   BTW...I did submit this to the forum too.  Thanks again!  JK","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/314867069","html_url":"https://github.com/elastic/elasticsearch/issues/25691#issuecomment-314867069","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25691","id":314867069,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNDg2NzA2OQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-07-12T19:06:57Z","updated_at":"2017-07-12T19:06:57Z","author_association":"MEMBER","body":"I want to help you but I think that my question still remains here, what JVM options do you see in the logs on startup on the 5.5.0 node? We have packaging tests that test upgrades from prior versions which pass so we will need something concrete here.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/314903433","html_url":"https://github.com/elastic/elasticsearch/issues/25691#issuecomment-314903433","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25691","id":314903433,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNDkwMzQzMw==","user":{"login":"JimKeating2","id":24461111,"node_id":"MDQ6VXNlcjI0NDYxMTEx","avatar_url":"https://avatars2.githubusercontent.com/u/24461111?v=4","gravatar_id":"","url":"https://api.github.com/users/JimKeating2","html_url":"https://github.com/JimKeating2","followers_url":"https://api.github.com/users/JimKeating2/followers","following_url":"https://api.github.com/users/JimKeating2/following{/other_user}","gists_url":"https://api.github.com/users/JimKeating2/gists{/gist_id}","starred_url":"https://api.github.com/users/JimKeating2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JimKeating2/subscriptions","organizations_url":"https://api.github.com/users/JimKeating2/orgs","repos_url":"https://api.github.com/users/JimKeating2/repos","events_url":"https://api.github.com/users/JimKeating2/events{/privacy}","received_events_url":"https://api.github.com/users/JimKeating2/received_events","type":"User","site_admin":false},"created_at":"2017-07-12T21:32:43Z","updated_at":"2017-07-12T21:32:43Z","author_association":"NONE","body":"Jason,  I don't have time to try another upgrade to 5.5 soon so I'm giving up for now.  I've removed Elastic from my sources list so I can upgrade the server VMs without upgrading Elasticsearch.  I do still think there is a problem with the upgrade...maybe you will see it from others trying to do the same thing.  I reinstalled 5.4.1 from a .deb file on the 4th VM and the cluster is happy again.  Cheers!  JK","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/314906369","html_url":"https://github.com/elastic/elasticsearch/issues/25691#issuecomment-314906369","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25691","id":314906369,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNDkwNjM2OQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-07-12T21:45:06Z","updated_at":"2017-07-12T21:45:06Z","author_association":"MEMBER","body":"Okay, I'm sorry that you ran into trouble and I will be on the look out for other reports.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/315218049","html_url":"https://github.com/elastic/elasticsearch/issues/25691#issuecomment-315218049","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25691","id":315218049,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNTIxODA0OQ==","user":{"login":"timwsuqld","id":6201617,"node_id":"MDQ6VXNlcjYyMDE2MTc=","avatar_url":"https://avatars0.githubusercontent.com/u/6201617?v=4","gravatar_id":"","url":"https://api.github.com/users/timwsuqld","html_url":"https://github.com/timwsuqld","followers_url":"https://api.github.com/users/timwsuqld/followers","following_url":"https://api.github.com/users/timwsuqld/following{/other_user}","gists_url":"https://api.github.com/users/timwsuqld/gists{/gist_id}","starred_url":"https://api.github.com/users/timwsuqld/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timwsuqld/subscriptions","organizations_url":"https://api.github.com/users/timwsuqld/orgs","repos_url":"https://api.github.com/users/timwsuqld/repos","events_url":"https://api.github.com/users/timwsuqld/events{/privacy}","received_events_url":"https://api.github.com/users/timwsuqld/received_events","type":"User","site_admin":false},"created_at":"2017-07-13T22:21:28Z","updated_at":"2017-07-13T22:21:28Z","author_association":"NONE","body":"@jasontedor We are running Ubuntu 16.04, using the ```https://artifacts.elastic.co/packages/5.x/apt stable/main amd64``` repository. Upgrading from 5.4.1 to 5.5 is giving us this error as well.\r\n\r\nWhere does the startup now log the JVM options? This is with the provided packages, no modifications done to jvm.options. Is it possible the 5.5 package has broken how it loads jvm.options?\r\n\r\n```\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]: 2017-07-14 08:19:57,362 main ERROR Could not register mbeans java.security.AccessControlException: access denied (\"javax.management.MBeanTrustPermission\" \"register\")\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at java.security.AccessControlContext.checkPermission(AccessControlContext.java:472)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at java.lang.SecurityManager.checkPermission(SecurityManager.java:585)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.checkMBeanTrustPermission(DefaultMBeanServerInterceptor.java:1848)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:322)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at org.apache.logging.log4j.core.jmx.Server.register(Server.java:389)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at org.apache.logging.log4j.core.jmx.Server.reregisterMBeansAfterReconfigure(Server.java:167)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at org.apache.logging.log4j.core.jmx.Server.reregisterMBeansAfterReconfigure(Server.java:140)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:556)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:261)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:206)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at org.apache.logging.log4j.core.config.Configurator.initialize(Configurator.java:221)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at org.apache.logging.log4j.core.config.Configurator.initialize(Configurator.java:197)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at org.elasticsearch.common.logging.LogConfigurator.configureStatusLogger(LogConfigurator.java:175)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at org.elasticsearch.common.logging.LogConfigurator.configureWithoutConfig(LogConfigurator.java:99)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at org.elasticsearch.cli.Command.main(Command.java:85)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:91)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:84)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]: Exception in thread \"main\" java.lang.IllegalStateException: status logger logged an error before logging was configured\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at org.elasticsearch.common.logging.LogConfigurator.checkErrorListener(LogConfigurator.java:128)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at org.elasticsearch.common.logging.LogConfigurator.configure(LogConfigurator.java:117)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:316)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:123)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:114)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:67)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:122)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at org.elasticsearch.cli.Command.main(Command.java:88)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:91)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]:         at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:84)\r\nJul 14 08:19:57 suq-elasticsearch-1 elasticsearch[2450]: Refer to the log for complete error details.\r\nJul 14 08:19:57 suq-elasticsearch-1 systemd[1]: elasticsearch.service: Main process exited, code=exited, status=1/FAILURE\r\nJul 14 08:19:57 suq-elasticsearch-1 systemd[1]: elasticsearch.service: Unit entered failed state.\r\nJul 14 08:19:57 suq-elasticsearch-1 systemd[1]: elasticsearch.service: Failed with result 'exit-code'.\r\n```\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/315220337","html_url":"https://github.com/elastic/elasticsearch/issues/25691#issuecomment-315220337","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25691","id":315220337,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNTIyMDMzNw==","user":{"login":"timwsuqld","id":6201617,"node_id":"MDQ6VXNlcjYyMDE2MTc=","avatar_url":"https://avatars0.githubusercontent.com/u/6201617?v=4","gravatar_id":"","url":"https://api.github.com/users/timwsuqld","html_url":"https://github.com/timwsuqld","followers_url":"https://api.github.com/users/timwsuqld/followers","following_url":"https://api.github.com/users/timwsuqld/following{/other_user}","gists_url":"https://api.github.com/users/timwsuqld/gists{/gist_id}","starred_url":"https://api.github.com/users/timwsuqld/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timwsuqld/subscriptions","organizations_url":"https://api.github.com/users/timwsuqld/orgs","repos_url":"https://api.github.com/users/timwsuqld/repos","events_url":"https://api.github.com/users/timwsuqld/events{/privacy}","received_events_url":"https://api.github.com/users/timwsuqld/received_events","type":"User","site_admin":false},"created_at":"2017-07-13T22:34:49Z","updated_at":"2017-07-13T22:34:49Z","author_association":"NONE","body":"After further investigation, there was a ```jvm.options.dpkg-dist``` file, indicating that apt thought there was a conflict, and so didn't overwrite the jvm.options with the packaged version. This file appears to have happened in a previous updated, but 5.5 was the first version to throw an error.\r\nOverwriting the jvm.options with the jvm.options.dpkg-dist and everything is working.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/315377582","html_url":"https://github.com/elastic/elasticsearch/issues/25691#issuecomment-315377582","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25691","id":315377582,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNTM3NzU4Mg==","user":{"login":"tinawenqiao","id":15771296,"node_id":"MDQ6VXNlcjE1NzcxMjk2","avatar_url":"https://avatars2.githubusercontent.com/u/15771296?v=4","gravatar_id":"","url":"https://api.github.com/users/tinawenqiao","html_url":"https://github.com/tinawenqiao","followers_url":"https://api.github.com/users/tinawenqiao/followers","following_url":"https://api.github.com/users/tinawenqiao/following{/other_user}","gists_url":"https://api.github.com/users/tinawenqiao/gists{/gist_id}","starred_url":"https://api.github.com/users/tinawenqiao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tinawenqiao/subscriptions","organizations_url":"https://api.github.com/users/tinawenqiao/orgs","repos_url":"https://api.github.com/users/tinawenqiao/repos","events_url":"https://api.github.com/users/tinawenqiao/events{/privacy}","received_events_url":"https://api.github.com/users/tinawenqiao/received_events","type":"User","site_admin":false},"created_at":"2017-07-14T14:43:31Z","updated_at":"2017-07-14T14:43:31Z","author_association":"NONE","body":"@jasontedor Hi,I have the same problem upgrade from 5.4.0 to 5.5. Run the es with supervisor with the following config. And I set the var ENV_MASTER_JVM_OPTIONS in my profile. What should I do?\r\n[program:elkmaster]\r\nenvironment=ES_JVM_OPTIONS=%(ENV_MASTER_JVM_OPTIONS)s\r\ncommand =  /logger/elasticsearch/bin/elasticsearch -Epath.conf=/logger/elasticsearch/configmaster\r\nusername = logger\r\nautostart=true\r\nautorestart=false\r\nstartsecs=3\r\npriority=1000\r\nredirect_stderr=true\r\nstdout_logfile=/logger/elasticsearch/bin/logs/supervisor_master.log\r\n\r\nThe error log:\r\n2017-07-14 22:42:08,247 main ERROR Could not register mbeans java.security.AccessControlException: access denied (\"javax.management.MBeanTrustPermission\" \"register\")\r\n\tat java.security.AccessControlContext.checkPermission(AccessControlContext.java:472)\r\n\tat java.lang.SecurityManager.checkPermission(SecurityManager.java:585)\r\n\tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.checkMBeanTrustPermission(DefaultMBeanServerInterceptor.java:1848)\r\n\tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:322)\r\n\tat com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)\r\n\tat org.apache.logging.log4j.core.jmx.Server.register(Server.java:389)\r\n\tat org.apache.logging.log4j.core.jmx.Server.reregisterMBeansAfterReconfigure(Server.java:167)\r\n\tat org.apache.logging.log4j.core.jmx.Server.reregisterMBeansAfterReconfigure(Server.java:140)\r\n\tat org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:556)\r\n\tat org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:261)\r\n\tat org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:206)\r\n\tat org.apache.logging.log4j.core.config.Configurator.initialize(Configurator.java:221)\r\n\tat org.apache.logging.log4j.core.config.Configurator.initialize(Configurator.java:197)\r\n\tat org.elasticsearch.common.logging.LogConfigurator.configureStatusLogger(LogConfigurator.java:175)\r\n\tat org.elasticsearch.common.logging.LogConfigurator.configureWithoutConfig(LogConfigurator.java:99)\r\n\tat org.elasticsearch.cli.Command.main(Command.java:85)\r\n\tat org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:91)\r\n\tat org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:84)\r\n\r\nException in thread \"main\" java.lang.IllegalStateException: status logger logged an error before logging was configured\r\n\tat org.elasticsearch.common.logging.LogConfigurator.checkErrorListener(LogConfigurator.java:128)\r\n\tat org.elasticsearch.common.logging.LogConfigurator.configure(LogConfigurator.java:117)\r\n\tat org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:316)\r\n\tat org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:123)\r\n\tat org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:114)\r\n\tat org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:67)\r\n\tat org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:122)\r\n\tat org.elasticsearch.cli.Command.main(Command.java:88)\r\n\tat org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:91)\r\n\tat org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:84)\r\nRefer to the log for complete error details.","performed_via_github_app":null}]