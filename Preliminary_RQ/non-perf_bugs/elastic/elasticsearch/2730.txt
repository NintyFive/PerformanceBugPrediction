{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/2730","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2730/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2730/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2730/events","html_url":"https://github.com/elastic/elasticsearch/issues/2730","id":11658370,"node_id":"MDU6SXNzdWUxMTY1ODM3MA==","number":2730,"title":"NoShardAvailableActionException caused by missing value in elasticsearch.yml","user":{"login":"ynux","id":2900374,"node_id":"MDQ6VXNlcjI5MDAzNzQ=","avatar_url":"https://avatars1.githubusercontent.com/u/2900374?v=4","gravatar_id":"","url":"https://api.github.com/users/ynux","html_url":"https://github.com/ynux","followers_url":"https://api.github.com/users/ynux/followers","following_url":"https://api.github.com/users/ynux/following{/other_user}","gists_url":"https://api.github.com/users/ynux/gists{/gist_id}","starred_url":"https://api.github.com/users/ynux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ynux/subscriptions","organizations_url":"https://api.github.com/users/ynux/orgs","repos_url":"https://api.github.com/users/ynux/repos","events_url":"https://api.github.com/users/ynux/events{/privacy}","received_events_url":"https://api.github.com/users/ynux/received_events","type":"User","site_admin":false},"labels":[{"id":144457604,"node_id":"MDU6TGFiZWwxNDQ0NTc2MDQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Settings","name":":Core/Infra/Settings","color":"0e8a16","default":false,"description":"Settings infrastructure and APIs"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":113234020,"node_id":"MDU6TGFiZWwxMTMyMzQwMjA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/stalled","name":"stalled","color":"fef2c0","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2013-03-05T08:56:00Z","updated_at":"2015-09-19T17:36:36Z","closed_at":"2015-09-19T17:36:36Z","author_association":"NONE","active_lock_reason":null,"body":"We created an index and tried to \"curl -PUT\" a document, failed after a timeout with:\n\n```\n{\n    \"error\": \"NoShardAvailableActionException[[test][0] No shard available for [[test][test_AS24Elasticsearch][1]: routing [null]]]\",\n    \"status\": 500\n}\n```\n\nThe reason was this line in the elasticsearch.yml:\n\n```\nindex.search.slowlog.threshold.query.warn: s\n```\n\nWhen reproducing this i found that the elasticsearch.yml has to be broken at startup of the elasticsearch service. \n\nIt produced about 1'000'000 lines in the logfile.\n\nI post this hoping for a more precise error message, an earlier parsing of the elasticsearch.yml or that people running into the same problem will find this post and identify their problem faster.\n\nThe wrong stanza in elasticsearch.yml:\n\n```\nindex.search.slowlog.level: TRACE\nindex.search.slowlog.threshold.query.warn: s\nindex.search.slowlog.threshold.query.info: s\nindex.search.slowlog.threshold.query.debug: s\nindex.search.slowlog.threshold.query.trace: ms\n```\n\n(This kind of mistake is, as you will guess, the result of a beginner meddling with Puppet)\n\nIn the logfile - only the first 82 lines:\n\n```\n[2013-03-05 09:35:10,805][WARN ][indices.cluster          ] [dexxxv001] [sunytest][0] failed to create shard\norg.elasticsearch.index.shard.IndexShardCreationException: [sunytest][0] failed to create shard\n        at org.elasticsearch.index.service.InternalIndexService.createShard(InternalIndexService.java:323)\n        at org.elasticsearch.indices.cluster.IndicesClusterStateService.applyInitializingShard(IndicesClusterStateService.java:561)\n        at org.elasticsearch.indices.cluster.IndicesClusterStateService.applyNewOrUpdatedShards(IndicesClusterStateService.java:526)\n        at org.elasticsearch.indices.cluster.IndicesClusterStateService.clusterChanged(IndicesClusterStateService.java:171)\n        at org.elasticsearch.cluster.service.InternalClusterService$2.run(InternalClusterService.java:315)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n        at java.lang.Thread.run(Thread.java:722)\nCaused by: org.elasticsearch.ElasticSearchParseException: Failed to parse [s]\n        at org.elasticsearch.common.unit.TimeValue.parseTimeValue(TimeValue.java:253)\n        at org.elasticsearch.common.settings.ImmutableSettings.getAsTime(ImmutableSettings.java:191)\n        at org.elasticsearch.index.search.slowlog.ShardSlowLogSearchService.<init>(ShardSlowLogSearchService.java:132)\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:525)\n        at org.elasticsearch.common.inject.DefaultConstructionProxyFactory$1.newInstance(DefaultConstructionProxyFactory.java:54)\n        at org.elasticsearch.common.inject.ConstructorInjector.construct(ConstructorInjector.java:86)\n        at org.elasticsearch.common.inject.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:98)\n        at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:45)\n        at org.elasticsearch.common.inject.InjectorImpl.callInContext(InjectorImpl.java:819)\n        at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:42)\n        at org.elasticsearch.common.inject.Scopes$1$1.get(Scopes.java:56)\n        at org.elasticsearch.common.inject.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:45)\n        at org.elasticsearch.common.inject.SingleParameterInjector.inject(SingleParameterInjector.java:42)\n        at org.elasticsearch.common.inject.SingleParameterInjector.getAll(SingleParameterInjector.java:66)\n        at org.elasticsearch.common.inject.ConstructorInjector.construct(ConstructorInjector.java:85)\n        at org.elasticsearch.common.inject.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:98)\n        at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:45)\n        at org.elasticsearch.common.inject.InjectorImpl.callInContext(InjectorImpl.java:819)\n        at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:42)\n        at org.elasticsearch.common.inject.Scopes$1$1.get(Scopes.java:56)\n        at org.elasticsearch.common.inject.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:45)\n        at org.elasticsearch.common.inject.SingleParameterInjector.inject(SingleParameterInjector.java:42)\n        at org.elasticsearch.common.inject.SingleParameterInjector.getAll(SingleParameterInjector.java:66)\n        at org.elasticsearch.common.inject.ConstructorInjector.construct(ConstructorInjector.java:85)\n        at org.elasticsearch.common.inject.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:98)\n        at org.elasticsearch.common.inject.FactoryProxy.get(FactoryProxy.java:52)\n        at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:45)\n        at org.elasticsearch.common.inject.InjectorImpl.callInContext(InjectorImpl.java:819)\n        at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:42)\n        at org.elasticsearch.common.inject.Scopes$1$1.get(Scopes.java:56)\n        at org.elasticsearch.common.inject.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:45)\n        at org.elasticsearch.common.inject.InjectorBuilder$1.call(InjectorBuilder.java:200)\n        at org.elasticsearch.common.inject.InjectorBuilder$1.call(InjectorBuilder.java:193)\n        at org.elasticsearch.common.inject.InjectorImpl.callInContext(InjectorImpl.java:812)\n        at org.elasticsearch.common.inject.InjectorBuilder.loadEagerSingletons(InjectorBuilder.java:193)\n        at org.elasticsearch.common.inject.InjectorBuilder.injectDynamically(InjectorBuilder.java:175)\n        at org.elasticsearch.common.inject.InjectorBuilder.build(InjectorBuilder.java:110)\n        at org.elasticsearch.common.inject.InjectorImpl.createChildInjector(InjectorImpl.java:129)\n        at org.elasticsearch.common.inject.ModulesBuilder.createChildInjector(ModulesBuilder.java:66)\n        at org.elasticsearch.index.service.InternalIndexService.createShard(InternalIndexService.java:321)\n        ... 7 more\nCaused by: java.lang.NumberFormatException: empty String\n        at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1011)\n        at java.lang.Double.parseDouble(Double.java:540)\n```\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}