[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/51642792","html_url":"https://github.com/elastic/elasticsearch/issues/4272#issuecomment-51642792","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4272","id":51642792,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjQyNzky","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-08-08T18:50:32Z","updated_at":"2014-08-08T18:50:32Z","author_association":"CONTRIBUTOR","body":"Hi @ppearcy \n\nGiven that you're hitting all shards anyway, how does it help using a routing value for part of the query?    The routing just determines to which shards the search request is sent.  If you're trying to limit the impact of the search, just filtering on the client ID (or whatever you use) would help there, as it would be a cached filter.  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/51650092","html_url":"https://github.com/elastic/elasticsearch/issues/4272#issuecomment-51650092","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4272","id":51650092,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjUwMDky","user":{"login":"ppearcy","id":307414,"node_id":"MDQ6VXNlcjMwNzQxNA==","avatar_url":"https://avatars3.githubusercontent.com/u/307414?v=4","gravatar_id":"","url":"https://api.github.com/users/ppearcy","html_url":"https://github.com/ppearcy","followers_url":"https://api.github.com/users/ppearcy/followers","following_url":"https://api.github.com/users/ppearcy/following{/other_user}","gists_url":"https://api.github.com/users/ppearcy/gists{/gist_id}","starred_url":"https://api.github.com/users/ppearcy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppearcy/subscriptions","organizations_url":"https://api.github.com/users/ppearcy/orgs","repos_url":"https://api.github.com/users/ppearcy/repos","events_url":"https://api.github.com/users/ppearcy/events{/privacy}","received_events_url":"https://api.github.com/users/ppearcy/received_events","type":"User","site_admin":false},"created_at":"2014-08-08T19:57:57Z","updated_at":"2014-08-08T19:57:57Z","author_association":"CONTRIBUTOR","body":"I am only hitting all shards on the global index, I want the per tenant one on the private. \n\nTo re-summarize, I have two indexes that tenants submit documents to, a private one and a global one with two different query patterns, the private one is queried most of the time to a single tenant (ie, routing of tenantid + filter of tenantid) and the global is queried most of the time across all tenants.\n\nI have a secondary query pattern, when I want to run a query to return all documents for a given tenant from both indexes, I want to use separate routing parameters per index to allow the query on the private index to span a single shard only while the global index doesn't use routing and just has the tenanantid filter applied across all shards. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/51681886","html_url":"https://github.com/elastic/elasticsearch/issues/4272#issuecomment-51681886","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4272","id":51681886,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjgxODg2","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-08-09T09:21:30Z","updated_at":"2014-08-09T09:21:30Z","author_association":"CONTRIBUTOR","body":"OK -I'll reopen this for more discussion. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54611468","html_url":"https://github.com/elastic/elasticsearch/issues/4272#issuecomment-54611468","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4272","id":54611468,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjExNDY4","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2014-09-05T10:59:54Z","updated_at":"2014-09-05T10:59:54Z","author_association":"CONTRIBUTOR","body":"Would aliases work in your case? An alias can wrap several indices with different per-index routing keys.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54722482","html_url":"https://github.com/elastic/elasticsearch/issues/4272#issuecomment-54722482","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4272","id":54722482,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzIyNDgy","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-09-06T17:52:46Z","updated_at":"2014-09-06T17:52:46Z","author_association":"CONTRIBUTOR","body":"++ @jpountz nice solution\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54844805","html_url":"https://github.com/elastic/elasticsearch/issues/4272#issuecomment-54844805","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4272","id":54844805,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODQ0ODA1","user":{"login":"ppearcy","id":307414,"node_id":"MDQ6VXNlcjMwNzQxNA==","avatar_url":"https://avatars3.githubusercontent.com/u/307414?v=4","gravatar_id":"","url":"https://api.github.com/users/ppearcy","html_url":"https://github.com/ppearcy","followers_url":"https://api.github.com/users/ppearcy/followers","following_url":"https://api.github.com/users/ppearcy/following{/other_user}","gists_url":"https://api.github.com/users/ppearcy/gists{/gist_id}","starred_url":"https://api.github.com/users/ppearcy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppearcy/subscriptions","organizations_url":"https://api.github.com/users/ppearcy/orgs","repos_url":"https://api.github.com/users/ppearcy/repos","events_url":"https://api.github.com/users/ppearcy/events{/privacy}","received_events_url":"https://api.github.com/users/ppearcy/received_events","type":"User","site_admin":false},"created_at":"2014-09-08T16:12:03Z","updated_at":"2014-09-08T16:12:03Z","author_association":"CONTRIBUTOR","body":"It's a good suggestion and viable workaround since it would address the key relevancy and paging concerns by providing a unified result. \n\nHowever, you would end up managing 1000s of aliases (one per routing value) and would either need to have a process to create these or do a lazy creation of them on search failures (or always confirm it exists before running the search). \n\nI still think per index routing settings on the query would be helpful, but won't fuss if this is closed out. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/59487641","html_url":"https://github.com/elastic/elasticsearch/issues/4272#issuecomment-59487641","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4272","id":59487641,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDg3NjQx","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-10-17T09:15:26Z","updated_at":"2014-10-17T09:15:26Z","author_association":"CONTRIBUTOR","body":"Hi @ppearcy \n\nWe've had a long discussion about this, and all solutions other than the suggested one using aliases look really messy.  Given that this is a bit of a corner case, we're going to leave things as they are.\n\nthanks\n","performed_via_github_app":null}]