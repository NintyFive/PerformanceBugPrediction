{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/9130","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9130/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9130/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9130/events","html_url":"https://github.com/elastic/elasticsearch/issues/9130","id":53326717,"node_id":"MDU6SXNzdWU1MzMyNjcxNw==","number":9130,"title":"Marvel eats up Master's heap","user":{"login":"mosiddi","id":2240862,"node_id":"MDQ6VXNlcjIyNDA4NjI=","avatar_url":"https://avatars1.githubusercontent.com/u/2240862?v=4","gravatar_id":"","url":"https://api.github.com/users/mosiddi","html_url":"https://github.com/mosiddi","followers_url":"https://api.github.com/users/mosiddi/followers","following_url":"https://api.github.com/users/mosiddi/following{/other_user}","gists_url":"https://api.github.com/users/mosiddi/gists{/gist_id}","starred_url":"https://api.github.com/users/mosiddi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mosiddi/subscriptions","organizations_url":"https://api.github.com/users/mosiddi/orgs","repos_url":"https://api.github.com/users/mosiddi/repos","events_url":"https://api.github.com/users/mosiddi/events{/privacy}","received_events_url":"https://api.github.com/users/mosiddi/received_events","type":"User","site_admin":false},"labels":[{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2015-01-04T06:11:30Z","updated_at":"2015-01-08T07:21:29Z","closed_at":"2015-01-07T10:09:09Z","author_association":"NONE","active_lock_reason":null,"body":"In one of my experiments, I was trying to see how much admin request load a master can handle before it throws the timeout exceptions.\n\nMy master machine configuration was A2 Azure VM and I had 7 node cluster (3 queries, 3 data and 1 master). I tried very simple experiment - \n\n```\n\"Spawn 1000 create index request to master in different threads and stop all thread on seeing first exception\"\n```\n\nI was able to create ~650 indexes. What I noticed after a few hours was my master's heap had a pattern of growing from 25% to 75% and coming back to 25% every time. There were few failures as well when it was @75%. The call stack was Marvel's exporter and was doing Index Stats.\n\n2 questions - \n1. Does Marvel takes some more stats like index, cluster from master node when compared to other nodes?\n2. How Marvel ensures the heap it is consuming is not eating up too much?\n","closed_by":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"performed_via_github_app":null}