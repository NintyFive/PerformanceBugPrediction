{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/8948","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8948/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8948/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8948/events","html_url":"https://github.com/elastic/elasticsearch/issues/8948","id":51971008,"node_id":"MDU6SXNzdWU1MTk3MTAwOA==","number":8948,"title":"Date range aggregation with different fields","user":{"login":"bakura10","id":1198915,"node_id":"MDQ6VXNlcjExOTg5MTU=","avatar_url":"https://avatars1.githubusercontent.com/u/1198915?v=4","gravatar_id":"","url":"https://api.github.com/users/bakura10","html_url":"https://github.com/bakura10","followers_url":"https://api.github.com/users/bakura10/followers","following_url":"https://api.github.com/users/bakura10/following{/other_user}","gists_url":"https://api.github.com/users/bakura10/gists{/gist_id}","starred_url":"https://api.github.com/users/bakura10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bakura10/subscriptions","organizations_url":"https://api.github.com/users/bakura10/orgs","repos_url":"https://api.github.com/users/bakura10/repos","events_url":"https://api.github.com/users/bakura10/events{/privacy}","received_events_url":"https://api.github.com/users/bakura10/received_events","type":"User","site_admin":false},"labels":[{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2014-12-15T10:38:16Z","updated_at":"2014-12-15T17:06:13Z","closed_at":"2014-12-15T17:06:13Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\n\nI have a use case where my documents have two different dates. To compute the result I want, I need to have different comparaison: the \"from\" value of the range must be executed against one date, while the \"to\" value must be executed against another date on the document. However currently this is not possible. It would be nice if date_range (and also range) would support a syntax like that:\n\n``` json\n{\n   \"aggs\": {\n      \"by_range\": {\n          \"date_range\": {\n             \"from_field\": \"key1\",\n             \"to_field\": \"key2\",\n             \"ranges\": [\n               {to: \"2014-01-01\"},\n               {from: \"2014-01-01\", to: \"2014-02-01\"}\n            ]\n         }\n      }\n  }\n}\n```\n\nFor the first range, only the to would be executed (against \"key2\" date), while for the second range, \"from\" would be executed against \"key1\" and \"to\" against \"key2\" date.\n\nIf there is any way to do that I didn't spot, I'd be glad to hear about it (currently, I'm hacking it by replacing the date_range aggregation by a list of \"filter\" aggregation with two range filter.\n","closed_by":{"login":"bakura10","id":1198915,"node_id":"MDQ6VXNlcjExOTg5MTU=","avatar_url":"https://avatars1.githubusercontent.com/u/1198915?v=4","gravatar_id":"","url":"https://api.github.com/users/bakura10","html_url":"https://github.com/bakura10","followers_url":"https://api.github.com/users/bakura10/followers","following_url":"https://api.github.com/users/bakura10/following{/other_user}","gists_url":"https://api.github.com/users/bakura10/gists{/gist_id}","starred_url":"https://api.github.com/users/bakura10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bakura10/subscriptions","organizations_url":"https://api.github.com/users/bakura10/orgs","repos_url":"https://api.github.com/users/bakura10/repos","events_url":"https://api.github.com/users/bakura10/events{/privacy}","received_events_url":"https://api.github.com/users/bakura10/received_events","type":"User","site_admin":false},"performed_via_github_app":null}