[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/62550443","html_url":"https://github.com/elastic/elasticsearch/issues/8438#issuecomment-62550443","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8438","id":62550443,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNTUwNDQz","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-11-11T14:03:40Z","updated_at":"2014-11-11T14:03:40Z","author_association":"CONTRIBUTOR","body":"> Query is pretty big and I have no idea what's causing it. I don't think that's relevant anyway, IMHO the code should check for nulls and throw a more specific exception, otherwise we clients are left in the dark about what we're doing wrong.\n\nAgreed - can you tell us what you were doing when you saw this error? What does the query/agg look like?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/62555795","html_url":"https://github.com/elastic/elasticsearch/issues/8438#issuecomment-62555795","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8438","id":62555795,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNTU1Nzk1","user":{"login":"mausch","id":95194,"node_id":"MDQ6VXNlcjk1MTk0","avatar_url":"https://avatars1.githubusercontent.com/u/95194?v=4","gravatar_id":"","url":"https://api.github.com/users/mausch","html_url":"https://github.com/mausch","followers_url":"https://api.github.com/users/mausch/followers","following_url":"https://api.github.com/users/mausch/following{/other_user}","gists_url":"https://api.github.com/users/mausch/gists{/gist_id}","starred_url":"https://api.github.com/users/mausch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mausch/subscriptions","organizations_url":"https://api.github.com/users/mausch/orgs","repos_url":"https://api.github.com/users/mausch/repos","events_url":"https://api.github.com/users/mausch/events{/privacy}","received_events_url":"https://api.github.com/users/mausch/received_events","type":"User","site_admin":false},"created_at":"2014-11-11T14:42:49Z","updated_at":"2014-11-11T14:42:49Z","author_association":"NONE","body":"It was mostly simple terms aggs but also one global agg with a filter. IIRC the query itself was that same filter being applied to the global agg.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/62557017","html_url":"https://github.com/elastic/elasticsearch/issues/8438#issuecomment-62557017","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8438","id":62557017,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNTU3MDE3","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-11-11T14:50:54Z","updated_at":"2014-11-11T14:50:54Z","author_association":"CONTRIBUTOR","body":"@mausch could you provide some examples? Clearly we're not seeing this in our testing, so it would be helpful to see what you are doing different.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/62568674","html_url":"https://github.com/elastic/elasticsearch/issues/8438#issuecomment-62568674","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8438","id":62568674,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNTY4Njc0","user":{"login":"mausch","id":95194,"node_id":"MDQ6VXNlcjk1MTk0","avatar_url":"https://avatars1.githubusercontent.com/u/95194?v=4","gravatar_id":"","url":"https://api.github.com/users/mausch","html_url":"https://github.com/mausch","followers_url":"https://api.github.com/users/mausch/followers","following_url":"https://api.github.com/users/mausch/following{/other_user}","gists_url":"https://api.github.com/users/mausch/gists{/gist_id}","starred_url":"https://api.github.com/users/mausch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mausch/subscriptions","organizations_url":"https://api.github.com/users/mausch/orgs","repos_url":"https://api.github.com/users/mausch/repos","events_url":"https://api.github.com/users/mausch/events{/privacy}","received_events_url":"https://api.github.com/users/mausch/received_events","type":"User","site_admin":false},"created_at":"2014-11-11T16:03:02Z","updated_at":"2014-11-11T16:03:02Z","author_association":"NONE","body":"Sorry, I don't have that query any more. But I still insist that it shouldn't matter. I'd run some random-testing tool (e.g. https://github.com/pholser/junit-quickcheck ) on `SearchService.parseSource` and `FilterParser.parse`. No input ever should cause a NPE in my opinion, otherwise it's a bug.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/62571996","html_url":"https://github.com/elastic/elasticsearch/issues/8438#issuecomment-62571996","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8438","id":62571996,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNTcxOTk2","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-11-11T16:22:38Z","updated_at":"2014-11-11T16:22:38Z","author_association":"CONTRIBUTOR","body":"@mausch I agree with you - we don't wilfully leave NPEs in our code. The trick is finding out what is causing it. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/62573900","html_url":"https://github.com/elastic/elasticsearch/issues/8438#issuecomment-62573900","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8438","id":62573900,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNTczOTAw","user":{"login":"vaibhavkulkar","id":7933501,"node_id":"MDQ6VXNlcjc5MzM1MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/7933501?v=4","gravatar_id":"","url":"https://api.github.com/users/vaibhavkulkar","html_url":"https://github.com/vaibhavkulkar","followers_url":"https://api.github.com/users/vaibhavkulkar/followers","following_url":"https://api.github.com/users/vaibhavkulkar/following{/other_user}","gists_url":"https://api.github.com/users/vaibhavkulkar/gists{/gist_id}","starred_url":"https://api.github.com/users/vaibhavkulkar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vaibhavkulkar/subscriptions","organizations_url":"https://api.github.com/users/vaibhavkulkar/orgs","repos_url":"https://api.github.com/users/vaibhavkulkar/repos","events_url":"https://api.github.com/users/vaibhavkulkar/events{/privacy}","received_events_url":"https://api.github.com/users/vaibhavkulkar/received_events","type":"User","site_admin":false},"created_at":"2014-11-11T16:33:20Z","updated_at":"2014-11-11T16:33:20Z","author_association":"NONE","body":"I am new to this community and I think I can fix this one to start with. Has some one already fixed it ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/62576016","html_url":"https://github.com/elastic/elasticsearch/issues/8438#issuecomment-62576016","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8438","id":62576016,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNTc2MDE2","user":{"login":"mausch","id":95194,"node_id":"MDQ6VXNlcjk1MTk0","avatar_url":"https://avatars1.githubusercontent.com/u/95194?v=4","gravatar_id":"","url":"https://api.github.com/users/mausch","html_url":"https://github.com/mausch","followers_url":"https://api.github.com/users/mausch/followers","following_url":"https://api.github.com/users/mausch/following{/other_user}","gists_url":"https://api.github.com/users/mausch/gists{/gist_id}","starred_url":"https://api.github.com/users/mausch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mausch/subscriptions","organizations_url":"https://api.github.com/users/mausch/orgs","repos_url":"https://api.github.com/users/mausch/repos","events_url":"https://api.github.com/users/mausch/events{/privacy}","received_events_url":"https://api.github.com/users/mausch/received_events","type":"User","site_admin":false},"created_at":"2014-11-11T16:45:35Z","updated_at":"2014-11-11T16:45:35Z","author_association":"NONE","body":"@clintongormley Indeed, especially with complex code. Sorry I lost the original query. The only thing I can advice is to start applying randomized testing (if you haven't already, I don't know much about the ES codebase). It's great to find this kind of bugs. IIRC Lucene has started using it a couple of years ago.\n\n@vaibhavkulkar unless there's already some randomized testing in place in the project this isn't trivial to fix.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/62577788","html_url":"https://github.com/elastic/elasticsearch/issues/8438#issuecomment-62577788","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8438","id":62577788,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNTc3Nzg4","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-11-11T16:55:21Z","updated_at":"2014-11-11T16:55:21Z","author_association":"CONTRIBUTOR","body":"can you tell what filters you are using?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/62582373","html_url":"https://github.com/elastic/elasticsearch/issues/8438#issuecomment-62582373","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8438","id":62582373,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNTgyMzcz","user":{"login":"mausch","id":95194,"node_id":"MDQ6VXNlcjk1MTk0","avatar_url":"https://avatars1.githubusercontent.com/u/95194?v=4","gravatar_id":"","url":"https://api.github.com/users/mausch","html_url":"https://github.com/mausch","followers_url":"https://api.github.com/users/mausch/followers","following_url":"https://api.github.com/users/mausch/following{/other_user}","gists_url":"https://api.github.com/users/mausch/gists{/gist_id}","starred_url":"https://api.github.com/users/mausch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mausch/subscriptions","organizations_url":"https://api.github.com/users/mausch/orgs","repos_url":"https://api.github.com/users/mausch/repos","events_url":"https://api.github.com/users/mausch/events{/privacy}","received_events_url":"https://api.github.com/users/mausch/received_events","type":"User","site_admin":false},"created_at":"2014-11-11T17:22:37Z","updated_at":"2014-11-11T17:22:37Z","author_association":"NONE","body":"IIRC it was an And filter with a single terms filter within.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/62590423","html_url":"https://github.com/elastic/elasticsearch/issues/8438#issuecomment-62590423","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8438","id":62590423,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNTkwNDIz","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-11-11T18:11:13Z","updated_at":"2014-11-11T18:11:13Z","author_association":"CONTRIBUTOR","body":"@mausch also, what version of Elasticsearch did you see this on?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/62704004","html_url":"https://github.com/elastic/elasticsearch/issues/8438#issuecomment-62704004","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8438","id":62704004,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNzA0MDA0","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2014-11-12T11:19:11Z","updated_at":"2014-11-12T11:19:11Z","author_association":"MEMBER","body":"The filters aggregation should in at FilterParser.java line 41 check for null. A null value is a valid return value for a filter parser (and for example the `and` filter does this).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/62712964","html_url":"https://github.com/elastic/elasticsearch/issues/8438#issuecomment-62712964","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8438","id":62712964,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNzEyOTY0","user":{"login":"mausch","id":95194,"node_id":"MDQ6VXNlcjk1MTk0","avatar_url":"https://avatars1.githubusercontent.com/u/95194?v=4","gravatar_id":"","url":"https://api.github.com/users/mausch","html_url":"https://github.com/mausch","followers_url":"https://api.github.com/users/mausch/followers","following_url":"https://api.github.com/users/mausch/following{/other_user}","gists_url":"https://api.github.com/users/mausch/gists{/gist_id}","starred_url":"https://api.github.com/users/mausch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mausch/subscriptions","organizations_url":"https://api.github.com/users/mausch/orgs","repos_url":"https://api.github.com/users/mausch/repos","events_url":"https://api.github.com/users/mausch/events{/privacy}","received_events_url":"https://api.github.com/users/mausch/received_events","type":"User","site_admin":false},"created_at":"2014-11-12T12:48:08Z","updated_at":"2014-11-12T12:48:08Z","author_association":"NONE","body":"@clintongormley version 1.3.4\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63253810","html_url":"https://github.com/elastic/elasticsearch/issues/8438#issuecomment-63253810","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8438","id":63253810,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMjUzODEw","user":{"login":"wcong","id":1748926,"node_id":"MDQ6VXNlcjE3NDg5MjY=","avatar_url":"https://avatars3.githubusercontent.com/u/1748926?v=4","gravatar_id":"","url":"https://api.github.com/users/wcong","html_url":"https://github.com/wcong","followers_url":"https://api.github.com/users/wcong/followers","following_url":"https://api.github.com/users/wcong/following{/other_user}","gists_url":"https://api.github.com/users/wcong/gists{/gist_id}","starred_url":"https://api.github.com/users/wcong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wcong/subscriptions","organizations_url":"https://api.github.com/users/wcong/orgs","repos_url":"https://api.github.com/users/wcong/repos","events_url":"https://api.github.com/users/wcong/events{/privacy}","received_events_url":"https://api.github.com/users/wcong/received_events","type":"User","site_admin":false},"created_at":"2014-11-17T02:41:51Z","updated_at":"2014-11-17T02:41:51Z","author_association":"NONE","body":"I found the same NPE.\nthe version is 1.3.2.\nIn my case,it happened when i used FilterAggregation ,but sent no filter.\nIn java client,it looks like this.\n\n``` java\n        FilterBuilder fb = new AndFilterBuilder();\n        FilterAggregationBuilder fab = AggregationBuilders\n                .filter(\"filter\")\n                .filter(fb)\n                .subAggregation(AggregationBuilders.terms(\"brandId\").field(\"brand_id\").size(0))\n                .subAggregation(AggregationBuilders.terms(\"allAttr\").field(\"all_attr\").size(0));\n```\n\nIn http query it looks like this.\n![elasticsearch npe](https://cloud.githubusercontent.com/assets/1748926/5064466/7748cd16-6e44-11e4-9a16-239cd4538f30.png)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63287403","html_url":"https://github.com/elastic/elasticsearch/issues/8438#issuecomment-63287403","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8438","id":63287403,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMjg3NDAz","user":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"created_at":"2014-11-17T10:48:26Z","updated_at":"2014-11-17T10:48:26Z","author_association":"CONTRIBUTOR","body":"@martijnvg I can see where you say check for null but do you believe the correct response is then to throw a parse exception with a friendly message or to process the query using something like a MatchNoDocsFilter?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63287752","html_url":"https://github.com/elastic/elasticsearch/issues/8438#issuecomment-63287752","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8438","id":63287752,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMjg3NzUy","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2014-11-17T10:51:22Z","updated_at":"2014-11-17T10:51:22Z","author_association":"MEMBER","body":"@markharwood I think if a filter parser returns null then the filters agg should interpret this as nothing is going to match, so `MatchNoDocsFilter` should be used.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63288400","html_url":"https://github.com/elastic/elasticsearch/issues/8438#issuecomment-63288400","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8438","id":63288400,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMjg4NDAw","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-11-17T10:57:13Z","updated_at":"2014-11-17T10:57:13Z","author_association":"CONTRIBUTOR","body":"We had the same issue with bool query and what we do there is: \n\n``` Java\n  if (clauses.isEmpty()) {\n    return new MatchAllDocsQuery();\n  }\n```\n\nI think bool filter should be consistent here - I am not sure which one we should change to be honest...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63291403","html_url":"https://github.com/elastic/elasticsearch/issues/8438#issuecomment-63291403","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8438","id":63291403,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMjkxNDAz","user":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"created_at":"2014-11-17T11:24:14Z","updated_at":"2014-11-17T11:24:14Z","author_association":"CONTRIBUTOR","body":"> I am not sure which one we should change to be honest...\n\nTough one. My gut feel on the empty filters array would be that it would mean \"match none\" but if we have a precedent for this on the query side which is \"match all\" then I guess we have these ugly options:\n1) API Inconsistency (query=match all, filter = match none)\n2) Consistently ALL (but empty filters matching all might feel weird)\n3) Consistently NONE ( introduces a backwards compatibility issue here for change in query behaviour)\n4) Parser error (avoids any ambiguity by forcing users to declare logic more explicitly)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63294284","html_url":"https://github.com/elastic/elasticsearch/issues/8438#issuecomment-63294284","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8438","id":63294284,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMjk0Mjg0","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-11-17T11:52:19Z","updated_at":"2014-11-17T11:52:19Z","author_association":"CONTRIBUTOR","body":"The `bool` query change was made to make it easier to build such queries in tools like Kibana, ie they have a placeholder to which clauses can be added, but which doesn't fail if none are added.\n\nIf we don't specify a `query` (eg in `filtered` query) then it defaults to `match_all`.  I think the same logic works for filters here.  We're not specifying leaf filters against any fields, there is just no leaf filter.  I'd lean towards matching ALL.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63311522","html_url":"https://github.com/elastic/elasticsearch/issues/8438#issuecomment-63311522","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8438","id":63311522,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMzExNTIy","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-11-17T14:27:18Z","updated_at":"2014-11-17T14:27:18Z","author_association":"CONTRIBUTOR","body":"+1 for what clint said. I thinks the deal here is `no restrictions` == `match all` so I think translating it to match all it the right thing. I personally think it's not perfectly fine for a filter parser to return `null` btw. I think the actual query/filter parser should handle these cases and return  valid filter instead. @martijnvg what do you think?\n","performed_via_github_app":null}]