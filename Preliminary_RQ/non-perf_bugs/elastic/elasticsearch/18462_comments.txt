[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/220323219","html_url":"https://github.com/elastic/elasticsearch/issues/18462#issuecomment-220323219","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18462","id":220323219,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMDMyMzIxOQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-05-19T13:26:08Z","updated_at":"2016-05-19T13:26:08Z","author_association":"MEMBER","body":"Starting in Elasticsearch 5.0.0, there are bootstrap checks to ensure that common missed settings that would effect a production installation of Elasticsearch are configured. These bootstrap checks are enforced if the node is bound to a non-loopback interface, or if the node publishes to a non-loopback interface. Otherwise, these bootstrap checks appear as warning in the logs (check the logs from when you did not have `network.host` uncommented and you will see a warn-level log message). \n\n```\ninitial heap size [268435456] not equal to maximum heap size [1073741824]; this can cause resize pauses and prevents mlockall from locking the entire heap\n```\n\nTo configure the heap size, you need to modify the `jvm.options` file. This is a new configuration file. There are two lines: `-Xms` and `-Xmx` to set the min and max heap size. These values should be equal, and must be equal if you trip the bootstrap checks.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/220324783","html_url":"https://github.com/elastic/elasticsearch/issues/18462#issuecomment-220324783","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18462","id":220324783,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMDMyNDc4Mw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-05-19T13:32:02Z","updated_at":"2016-05-19T13:32:02Z","author_association":"MEMBER","body":"There is [documentation](https://www.elastic.co/guide/en/elasticsearch/reference/master/heap-size.html) regarding the heap size that expands on my previous [comment](https://github.com/elastic/elasticsearch/issues/18462#issuecomment-220323219) regarding how to set the heap size.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/220331003","html_url":"https://github.com/elastic/elasticsearch/issues/18462#issuecomment-220331003","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18462","id":220331003,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMDMzMTAwMw==","user":{"login":"TonyRode","id":4587307,"node_id":"MDQ6VXNlcjQ1ODczMDc=","avatar_url":"https://avatars1.githubusercontent.com/u/4587307?v=4","gravatar_id":"","url":"https://api.github.com/users/TonyRode","html_url":"https://github.com/TonyRode","followers_url":"https://api.github.com/users/TonyRode/followers","following_url":"https://api.github.com/users/TonyRode/following{/other_user}","gists_url":"https://api.github.com/users/TonyRode/gists{/gist_id}","starred_url":"https://api.github.com/users/TonyRode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TonyRode/subscriptions","organizations_url":"https://api.github.com/users/TonyRode/orgs","repos_url":"https://api.github.com/users/TonyRode/repos","events_url":"https://api.github.com/users/TonyRode/events{/privacy}","received_events_url":"https://api.github.com/users/TonyRode/received_events","type":"User","site_admin":false},"created_at":"2016-05-19T13:54:14Z","updated_at":"2016-05-19T14:11:09Z","author_association":"NONE","body":"Okay thank you sir for the fast answer !\n\nedit: Setting the parameter -Xms to the same value of -Xmx in /etc/elasticsearch/jvm.options solved the problem :) Thanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/220334317","html_url":"https://github.com/elastic/elasticsearch/issues/18462#issuecomment-220334317","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18462","id":220334317,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMDMzNDMxNw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-05-19T14:05:11Z","updated_at":"2016-05-19T14:05:11Z","author_association":"MEMBER","body":"> Okay thank you sir for the fast answer !\n\nYou're very welcome.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/233007126","html_url":"https://github.com/elastic/elasticsearch/issues/18462#issuecomment-233007126","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18462","id":233007126,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMzAwNzEyNg==","user":{"login":"jaredmcqueen","id":3491953,"node_id":"MDQ6VXNlcjM0OTE5NTM=","avatar_url":"https://avatars1.githubusercontent.com/u/3491953?v=4","gravatar_id":"","url":"https://api.github.com/users/jaredmcqueen","html_url":"https://github.com/jaredmcqueen","followers_url":"https://api.github.com/users/jaredmcqueen/followers","following_url":"https://api.github.com/users/jaredmcqueen/following{/other_user}","gists_url":"https://api.github.com/users/jaredmcqueen/gists{/gist_id}","starred_url":"https://api.github.com/users/jaredmcqueen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaredmcqueen/subscriptions","organizations_url":"https://api.github.com/users/jaredmcqueen/orgs","repos_url":"https://api.github.com/users/jaredmcqueen/repos","events_url":"https://api.github.com/users/jaredmcqueen/events{/privacy}","received_events_url":"https://api.github.com/users/jaredmcqueen/received_events","type":"User","site_admin":false},"created_at":"2016-07-15T16:56:13Z","updated_at":"2016-07-15T16:56:13Z","author_association":"CONTRIBUTOR","body":"I'm having the same issue on elasticsearch 5.0.0-alpha4\n\nsetting anything other than `_lo_`, `127.0.0.1`, or `_local_` results in an initial heap size error.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/233008260","html_url":"https://github.com/elastic/elasticsearch/issues/18462#issuecomment-233008260","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18462","id":233008260,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMzAwODI2MA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-07-15T17:00:30Z","updated_at":"2016-07-15T17:00:30Z","author_association":"CONTRIBUTOR","body":"This is only an issue if the error isn't telling you to set -Xms and -Xmx to the same value. @jasontedor already explained what is up in https://github.com/elastic/elasticsearch/issues/18462#issuecomment-220323219\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/233010609","html_url":"https://github.com/elastic/elasticsearch/issues/18462#issuecomment-233010609","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18462","id":233010609,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMzAxMDYwOQ==","user":{"login":"jaredmcqueen","id":3491953,"node_id":"MDQ6VXNlcjM0OTE5NTM=","avatar_url":"https://avatars1.githubusercontent.com/u/3491953?v=4","gravatar_id":"","url":"https://api.github.com/users/jaredmcqueen","html_url":"https://github.com/jaredmcqueen","followers_url":"https://api.github.com/users/jaredmcqueen/followers","following_url":"https://api.github.com/users/jaredmcqueen/following{/other_user}","gists_url":"https://api.github.com/users/jaredmcqueen/gists{/gist_id}","starred_url":"https://api.github.com/users/jaredmcqueen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaredmcqueen/subscriptions","organizations_url":"https://api.github.com/users/jaredmcqueen/orgs","repos_url":"https://api.github.com/users/jaredmcqueen/repos","events_url":"https://api.github.com/users/jaredmcqueen/events{/privacy}","received_events_url":"https://api.github.com/users/jaredmcqueen/received_events","type":"User","site_admin":false},"created_at":"2016-07-15T17:10:13Z","updated_at":"2016-07-15T17:10:13Z","author_association":"CONTRIBUTOR","body":"@nik9000 my jvm.options were set to be the same.\n\nI found a solution though -- I had to do the following to bind anything other than localhost:\n\nrun `sysctl -w vm.max_map_count=262144`\n\nwhy would setting my `vm.max_map_count` allow me to set `network.host`?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/233011869","html_url":"https://github.com/elastic/elasticsearch/issues/18462#issuecomment-233011869","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18462","id":233011869,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMzAxMTg2OQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-07-15T17:15:27Z","updated_at":"2016-07-15T17:15:27Z","author_association":"CONTRIBUTOR","body":"It is another one of the preflight checks. There are a half dozen of them. Things like \"can I write to the data directory\" and \"am I likely to run out of memory mapped files\". If the error message told you the right thing to do then I don't think this is a bug. If it was talking about heap and you had to set max_map_count, then we have a problem.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/233012442","html_url":"https://github.com/elastic/elasticsearch/issues/18462#issuecomment-233012442","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18462","id":233012442,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMzAxMjQ0Mg==","user":{"login":"jaredmcqueen","id":3491953,"node_id":"MDQ6VXNlcjM0OTE5NTM=","avatar_url":"https://avatars1.githubusercontent.com/u/3491953?v=4","gravatar_id":"","url":"https://api.github.com/users/jaredmcqueen","html_url":"https://github.com/jaredmcqueen","followers_url":"https://api.github.com/users/jaredmcqueen/followers","following_url":"https://api.github.com/users/jaredmcqueen/following{/other_user}","gists_url":"https://api.github.com/users/jaredmcqueen/gists{/gist_id}","starred_url":"https://api.github.com/users/jaredmcqueen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaredmcqueen/subscriptions","organizations_url":"https://api.github.com/users/jaredmcqueen/orgs","repos_url":"https://api.github.com/users/jaredmcqueen/repos","events_url":"https://api.github.com/users/jaredmcqueen/events{/privacy}","received_events_url":"https://api.github.com/users/jaredmcqueen/received_events","type":"User","site_admin":false},"created_at":"2016-07-15T17:17:52Z","updated_at":"2016-07-15T17:19:44Z","author_association":"CONTRIBUTOR","body":"@nik9000 yeah I think we have a problem.  The elasticsearch service starts just fine with the line `network.host` commented out, or set to anything that binds to localhost (`_lo_`, `127.0.0.1`, or `_local_`).  If you try to set `network.host` to something other than localhost, it won't start at all, throwing an `initial heap size` error until I set `vm.max_map_count` to 262144.\n\nFYI, using CENTOS 7 minimum build 1511\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/233013255","html_url":"https://github.com/elastic/elasticsearch/issues/18462#issuecomment-233013255","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18462","id":233013255,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMzAxMzI1NQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-07-15T17:21:10Z","updated_at":"2016-07-15T17:21:10Z","author_association":"MEMBER","body":"> it won't start at all, throwing an `initial heap size` error until I set `vm.max_map_count` to 262144.\n\nNote that failing to start if the initial heap size is not equal to the maximum heap size and you're bound to an external interface is intentional. The same thing is true for `vm.max_map_count`. However, what should not be the case is that you get a log message for the initial heap size error if it is in fact equal to the max heap size, and that the actual problem is `vm.max_map_count`.\n\nCan you provide corroborating log messages and relevant configuration and command line parameters?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/233013565","html_url":"https://github.com/elastic/elasticsearch/issues/18462#issuecomment-233013565","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18462","id":233013565,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMzAxMzU2NQ==","user":{"login":"jaredmcqueen","id":3491953,"node_id":"MDQ6VXNlcjM0OTE5NTM=","avatar_url":"https://avatars1.githubusercontent.com/u/3491953?v=4","gravatar_id":"","url":"https://api.github.com/users/jaredmcqueen","html_url":"https://github.com/jaredmcqueen","followers_url":"https://api.github.com/users/jaredmcqueen/followers","following_url":"https://api.github.com/users/jaredmcqueen/following{/other_user}","gists_url":"https://api.github.com/users/jaredmcqueen/gists{/gist_id}","starred_url":"https://api.github.com/users/jaredmcqueen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaredmcqueen/subscriptions","organizations_url":"https://api.github.com/users/jaredmcqueen/orgs","repos_url":"https://api.github.com/users/jaredmcqueen/repos","events_url":"https://api.github.com/users/jaredmcqueen/events{/privacy}","received_events_url":"https://api.github.com/users/jaredmcqueen/received_events","type":"User","site_admin":false},"created_at":"2016-07-15T17:22:27Z","updated_at":"2016-07-15T17:22:27Z","author_association":"CONTRIBUTOR","body":"Sure, I'll build a new VM and step through the process again step by step and post relevant logs and info. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/233024074","html_url":"https://github.com/elastic/elasticsearch/issues/18462#issuecomment-233024074","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18462","id":233024074,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMzAyNDA3NA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-07-15T18:02:43Z","updated_at":"2016-07-15T18:02:43Z","author_association":"MEMBER","body":"> Sure, I'll build a new VM and step through the process again step by step and post relevant logs and info.\n\nThanks.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/233031509","html_url":"https://github.com/elastic/elasticsearch/issues/18462#issuecomment-233031509","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18462","id":233031509,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMzAzMTUwOQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-07-15T18:31:14Z","updated_at":"2016-07-15T18:31:14Z","author_association":"MEMBER","body":"Also, note that it's possible for both heap size configuration and `vm.max_map_count` to be a problem, and you will get an error message for both.\n\n```\n[2016-07-15 13:30:35,878][WARN ][bootstrap                ] [Locust] uncaught exception in thread [main]\norg.elasticsearch.bootstrap.StartupError: java.lang.RuntimeException: bootstrap checks failed\ninitial heap size [268435456] not equal to maximum heap size [2147483648]; this can cause resize pauses and prevents mlockall from locking the entire heap\nmax virtual memory areas vm.max_map_count [65530] likely too low, increase to at least [262144]\n```\n","performed_via_github_app":null}]