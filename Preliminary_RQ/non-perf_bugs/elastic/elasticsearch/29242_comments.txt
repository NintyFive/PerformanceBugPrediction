[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/376090521","html_url":"https://github.com/elastic/elasticsearch/issues/29242#issuecomment-376090521","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29242","id":376090521,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NjA5MDUyMQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-03-26T08:43:51Z","updated_at":"2018-03-26T08:43:51Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search-aggs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/376138164","html_url":"https://github.com/elastic/elasticsearch/issues/29242#issuecomment-376138164","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29242","id":376138164,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NjEzODE2NA==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2018-03-26T11:46:22Z","updated_at":"2018-03-26T11:46:22Z","author_association":"CONTRIBUTOR","body":"See also https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.x+multijob-java-periodic/ESJAVA=java10,ESRUNTIME=java8,nodes=linux/22/console","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/388307952","html_url":"https://github.com/elastic/elasticsearch/issues/29242#issuecomment-388307952","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29242","id":388307952,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODMwNzk1Mg==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2018-05-11T09:10:45Z","updated_at":"2018-05-11T09:10:45Z","author_association":"MEMBER","body":"This looks like its been fixed as it failed for three days in a row (25-27 March 2018) and hasn't failed since. I'll close this for now and hasn't failed since. If this fails again please reopen the issue","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/402629449","html_url":"https://github.com/elastic/elasticsearch/issues/29242#issuecomment-402629449","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29242","id":402629449,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMjYyOTQ0OQ==","user":{"login":"vladimirdolzhenko","id":209440,"node_id":"MDQ6VXNlcjIwOTQ0MA==","avatar_url":"https://avatars0.githubusercontent.com/u/209440?v=4","gravatar_id":"","url":"https://api.github.com/users/vladimirdolzhenko","html_url":"https://github.com/vladimirdolzhenko","followers_url":"https://api.github.com/users/vladimirdolzhenko/followers","following_url":"https://api.github.com/users/vladimirdolzhenko/following{/other_user}","gists_url":"https://api.github.com/users/vladimirdolzhenko/gists{/gist_id}","starred_url":"https://api.github.com/users/vladimirdolzhenko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vladimirdolzhenko/subscriptions","organizations_url":"https://api.github.com/users/vladimirdolzhenko/orgs","repos_url":"https://api.github.com/users/vladimirdolzhenko/repos","events_url":"https://api.github.com/users/vladimirdolzhenko/events{/privacy}","received_events_url":"https://api.github.com/users/vladimirdolzhenko/received_events","type":"User","site_admin":false},"created_at":"2018-07-05T07:23:28Z","updated_at":"2018-07-05T07:23:28Z","author_association":"CONTRIBUTOR","body":"Issue appears again: \r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob-unix-compatibility/os=debian/2536/console\r\n\r\n```\r\n./gradlew :server:test -Dtests.seed=12B50C4C51FB075B -Dtests.class=org.elasticsearch.action.search.SearchAsyncActionTests -Dtests.method=\"testFanOutAndCollect\" -Dtests.security.manager=true -Dtests.locale=ja -Dtests.timezone=America/Argentina/La_Rioja\r\n```\r\n\r\nbut it is not reproducible locally ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/410216200","html_url":"https://github.com/elastic/elasticsearch/issues/29242#issuecomment-410216200","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29242","id":410216200,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMDIxNjIwMA==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2018-08-03T10:43:00Z","updated_at":"2018-08-03T10:49:36Z","author_association":"MEMBER","body":"> (Strange that .toString() returned [] but .isEmpty() returned false)\r\n\r\nThis is very weird because the object in question is a simple `Set<Long>`. Also we remove the contextId from the set in `sendFreeContext()` which is called (not directly) from the `run()` method of the search phase in the test. This is also where we count down the latch so it should no be possible for the test to get past the `latch.await()` with a search phase (and context) still in flight.\r\n\r\nThe only idea I have to progress this is to add a check before we countdown the latch to make sure its not already 0 (i.e. make sure we aren't running something twice) and unmute the test to catch this again.\r\n\r\nWould welcome any ideas others have on this too\r\n\r\nIf you got here because you are on test triage and saw this test fail please ping me on Slack as well as adding the build info here","performed_via_github_app":null}]