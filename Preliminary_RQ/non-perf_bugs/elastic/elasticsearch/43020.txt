{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/43020","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43020/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43020/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43020/events","html_url":"https://github.com/elastic/elasticsearch/issues/43020","id":454006163,"node_id":"MDU6SXNzdWU0NTQwMDYxNjM=","number":43020,"title":"geo_shape orientation always returned as \"LEFT\" or \"RIGHT\"","user":{"login":"russcam","id":208231,"node_id":"MDQ6VXNlcjIwODIzMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/208231?v=4","gravatar_id":"","url":"https://api.github.com/users/russcam","html_url":"https://github.com/russcam","followers_url":"https://api.github.com/users/russcam/followers","following_url":"https://api.github.com/users/russcam/following{/other_user}","gists_url":"https://api.github.com/users/russcam/gists{/gist_id}","starred_url":"https://api.github.com/users/russcam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/russcam/subscriptions","organizations_url":"https://api.github.com/users/russcam/orgs","repos_url":"https://api.github.com/users/russcam/repos","events_url":"https://api.github.com/users/russcam/events{/privacy}","received_events_url":"https://api.github.com/users/russcam/received_events","type":"User","site_admin":false},"labels":[{"id":141079527,"node_id":"MDU6TGFiZWwxNDEwNzk1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Analytics/Geo","name":":Analytics/Geo","color":"0e8a16","default":false,"description":"Indexing, search aggregations of geo points and shapes"},{"id":23715,"node_id":"MDU6TGFiZWwyMzcxNQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Edocs","name":">docs","color":"db755e","default":false,"description":"General docs changes"},{"id":1967499105,"node_id":"MDU6TGFiZWwxOTY3NDk5MTA1","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Analytics","name":"Team:Analytics","color":"fef2c0","default":false,"description":"Meta label for analytics/geo team"},{"id":1967497573,"node_id":"MDU6TGFiZWwxOTY3NDk3NTcz","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Docs","name":"Team:Docs","color":"fef2c0","default":false,"description":"Meta label for docs team"}],"state":"closed","locked":false,"assignee":{"login":"jrodewig","id":40268737,"node_id":"MDQ6VXNlcjQwMjY4NzM3","avatar_url":"https://avatars1.githubusercontent.com/u/40268737?v=4","gravatar_id":"","url":"https://api.github.com/users/jrodewig","html_url":"https://github.com/jrodewig","followers_url":"https://api.github.com/users/jrodewig/followers","following_url":"https://api.github.com/users/jrodewig/following{/other_user}","gists_url":"https://api.github.com/users/jrodewig/gists{/gist_id}","starred_url":"https://api.github.com/users/jrodewig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrodewig/subscriptions","organizations_url":"https://api.github.com/users/jrodewig/orgs","repos_url":"https://api.github.com/users/jrodewig/repos","events_url":"https://api.github.com/users/jrodewig/events{/privacy}","received_events_url":"https://api.github.com/users/jrodewig/received_events","type":"User","site_admin":false},"assignees":[{"login":"jrodewig","id":40268737,"node_id":"MDQ6VXNlcjQwMjY4NzM3","avatar_url":"https://avatars1.githubusercontent.com/u/40268737?v=4","gravatar_id":"","url":"https://api.github.com/users/jrodewig","html_url":"https://github.com/jrodewig","followers_url":"https://api.github.com/users/jrodewig/followers","following_url":"https://api.github.com/users/jrodewig/following{/other_user}","gists_url":"https://api.github.com/users/jrodewig/gists{/gist_id}","starred_url":"https://api.github.com/users/jrodewig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrodewig/subscriptions","organizations_url":"https://api.github.com/users/jrodewig/orgs","repos_url":"https://api.github.com/users/jrodewig/repos","events_url":"https://api.github.com/users/jrodewig/events{/privacy}","received_events_url":"https://api.github.com/users/jrodewig/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2019-06-10T05:41:48Z","updated_at":"2020-11-06T12:37:17Z","closed_at":"2020-11-06T12:37:17Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Relates: #42608\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`): 7.0.0. But have tested as far back as 5.6.15\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version** (`java -version`):\r\n\r\njava version \"1.8.0_201\"\r\nJava(TM) SE Runtime Environment (build 1.8.0_201-b09)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.201-b09, mixed mode)\r\n\r\n**OS version** (`uname -a` if on a Unix-like system):\r\n\r\nWindows 10 Pro 64 bit.\r\n\r\n```\r\n> [System.Environment]::OSVersion.Version\r\n\r\nMajor  Minor  Build  Revision\r\n-----  -----  -----  --------\r\n10     0      17763  0\r\n```\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nThe orientation of a `geo_shape` field datatype mapping is always returned as uppercase `\"LEFT\"` or `\"RIGHT\"`, irrespective of the original accepted input value e.g. \r\n\r\n- `\"cw\"`, `\"clockwise\"`, `\"left\"` (and uppercase variants) for `\"LEFT\"`\r\n- `\"ccw\"`, `\"counterclockwise\"`, `\"right\"` (and uppercase variants) for `\"RIGHT\"`\r\n\r\nA couple of observations:\r\n\r\n1. It may be unexpected to return `\"LEFT\"` or `\"RIGHT\"` when this is not the original input.\r\n2. Using an uppercase value in the response is a little unusual when compared to other enum values returned by Elasticsearch, which are typically snake cased. ~The only other enum value that I am aware of that is uppercase is [`SimpleQueryStringFlag`](https://github.com/elastic/elasticsearch/blob/99f88f15c5febbca2d13b5b5fda27b844153bf1a/server/src/main/java/org/elasticsearch/index/query/SimpleQueryStringFlag.java#L29)~ (there are others). I would have expected the casing of the value in the response to be consistent with other enum values.  \r\n\r\n**Steps to reproduce**:\r\n\r\n 1. Create index with `geo_shape` field mapping and an orientation `cw`\r\n\r\n```json\r\nPUT http://localhost:9200/default_index?pretty=true \r\n{\"mappings\":{\"properties\":{\"geo_shape_field\":{\"orientation\":\"cw\",\"type\":\"geo_shape\"}}}}\r\n```\r\n\r\n 2. Get the index mapping and observe that the `\"orientation\"` value is `LEFT`\r\n\r\n```json\r\nGET http://localhost:9200/default_index/_mapping?pretty=true\r\n\r\n{\r\n  \"default_index\" : {\r\n    \"mappings\" : {\r\n      \"properties\" : {\r\n        \"geo_shape_field\" : {\r\n          \"type\" : \"geo_shape\",\r\n          \"orientation\" : \"LEFT\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n","closed_by":{"login":"jrodewig","id":40268737,"node_id":"MDQ6VXNlcjQwMjY4NzM3","avatar_url":"https://avatars1.githubusercontent.com/u/40268737?v=4","gravatar_id":"","url":"https://api.github.com/users/jrodewig","html_url":"https://github.com/jrodewig","followers_url":"https://api.github.com/users/jrodewig/followers","following_url":"https://api.github.com/users/jrodewig/following{/other_user}","gists_url":"https://api.github.com/users/jrodewig/gists{/gist_id}","starred_url":"https://api.github.com/users/jrodewig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrodewig/subscriptions","organizations_url":"https://api.github.com/users/jrodewig/orgs","repos_url":"https://api.github.com/users/jrodewig/repos","events_url":"https://api.github.com/users/jrodewig/events{/privacy}","received_events_url":"https://api.github.com/users/jrodewig/received_events","type":"User","site_admin":false},"performed_via_github_app":null}