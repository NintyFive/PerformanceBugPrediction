[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/265217574","html_url":"https://github.com/elastic/elasticsearch/issues/21962#issuecomment-265217574","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21962","id":265217574,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTIxNzU3NA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2016-12-06T17:39:21Z","updated_at":"2016-12-06T17:39:21Z","author_association":"CONTRIBUTOR","body":"Due to the fact that data is sharded, we only know the number of actions per thing on the coordinating node. This means that this kind of aggregation would require shards to stream all buckets back to the coordinating node, which is not possible given how aggregations are designed today.\r\n\r\nOne way that these problems are sometimes solved is by building entity-centric indices, with one document per \"thing\" and the sum of the number of actions for this thing as a property. This way, a regular percentiles aggregation can be used to compute the distribution of the number of actions.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/265555127","html_url":"https://github.com/elastic/elasticsearch/issues/21962#issuecomment-265555127","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21962","id":265555127,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTU1NTEyNw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-12-07T19:55:10Z","updated_at":"2016-12-07T19:55:10Z","author_association":"CONTRIBUTOR","body":"It sounds like there is nothing we intend to do here, so will close","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/265922671","html_url":"https://github.com/elastic/elasticsearch/issues/21962#issuecomment-265922671","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21962","id":265922671,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTkyMjY3MQ==","user":{"login":"rcrezende","id":604872,"node_id":"MDQ6VXNlcjYwNDg3Mg==","avatar_url":"https://avatars1.githubusercontent.com/u/604872?v=4","gravatar_id":"","url":"https://api.github.com/users/rcrezende","html_url":"https://github.com/rcrezende","followers_url":"https://api.github.com/users/rcrezende/followers","following_url":"https://api.github.com/users/rcrezende/following{/other_user}","gists_url":"https://api.github.com/users/rcrezende/gists{/gist_id}","starred_url":"https://api.github.com/users/rcrezende/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rcrezende/subscriptions","organizations_url":"https://api.github.com/users/rcrezende/orgs","repos_url":"https://api.github.com/users/rcrezende/repos","events_url":"https://api.github.com/users/rcrezende/events{/privacy}","received_events_url":"https://api.github.com/users/rcrezende/received_events","type":"User","site_admin":false},"created_at":"2016-12-09T03:12:59Z","updated_at":"2016-12-09T03:12:59Z","author_association":"NONE","body":"Well, you could think about an approximation method for estimating such as bootstrapping. In your platform you already have the sampler aggregation so I think you have infrastructure to implement (not an exact method), but close enough. See https://en.wikipedia.org/wiki/Bootstrapping_(statistics)\r\n\r\n","performed_via_github_app":null}]