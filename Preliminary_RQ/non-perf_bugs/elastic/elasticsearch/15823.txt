{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/15823","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15823/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15823/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15823/events","html_url":"https://github.com/elastic/elasticsearch/issues/15823","id":125386341,"node_id":"MDU6SXNzdWUxMjUzODYzNDE=","number":15823,"title":"Ability to retrieve in an aggregations request only pipeline aggs results","user":{"login":"acarstoiu","id":9536601,"node_id":"MDQ6VXNlcjk1MzY2MDE=","avatar_url":"https://avatars2.githubusercontent.com/u/9536601?v=4","gravatar_id":"","url":"https://api.github.com/users/acarstoiu","html_url":"https://github.com/acarstoiu","followers_url":"https://api.github.com/users/acarstoiu/followers","following_url":"https://api.github.com/users/acarstoiu/following{/other_user}","gists_url":"https://api.github.com/users/acarstoiu/gists{/gist_id}","starred_url":"https://api.github.com/users/acarstoiu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acarstoiu/subscriptions","organizations_url":"https://api.github.com/users/acarstoiu/orgs","repos_url":"https://api.github.com/users/acarstoiu/repos","events_url":"https://api.github.com/users/acarstoiu/events{/privacy}","received_events_url":"https://api.github.com/users/acarstoiu/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2016-01-07T12:37:00Z","updated_at":"2016-06-04T03:53:21Z","closed_at":"2016-01-10T11:09:36Z","author_association":"NONE","active_lock_reason":null,"body":"I have explained this matter in several other issues, but it's time to make it a ticket on its own.\nVery often programmers find themselves in the need to post-process the aggregation results computed by _Elasticsearch_. Since October 2015 the pipeline aggregations are officially avaliable to everyone, so a bunch of use cases can now be handled by just crafting a more elaborate search query.\n\nThat's **very good**, but not enough yet, because clients need also to be off-loaded in terms of network traffic and memory. For now, they receive and are forced to load from the network reply the results of +completely uninteresting+, intermediate aggregations.\n\nIdeally, we should have control on the aggregation level whether its results should be returned or not (a `prune` property accepted by all aggregations would be just fine). Alternatively, one could also prune from the results the aggregations used in pipeline aggregations via a search-wide flag called (say) `prunePipelinedAggs` with three possible values:\n- _`false`_: _default_, for backwards compatibility (but I would vote for _`basic`_ as default value)\n- _`basic`_: suppresses only the results of basic aggregations that serve as source data for pipeline aggs; the results of \"unrefined\" aggregations remain untouched, in the reply\n- _`all`_: suppresses the results of all aggregations (both basic and pipeline) that serve as source data for pipeline aggs\n\nWording may vary, but you get the idea. Particularly \"basic\" is not an established term.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}