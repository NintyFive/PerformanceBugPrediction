{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/32019","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32019/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32019/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32019/events","html_url":"https://github.com/elastic/elasticsearch/issues/32019","id":340842111,"node_id":"MDU6SXNzdWUzNDA4NDIxMTE=","number":32019,"title":"Provide ability to have simple calculated \"fields\" for a scalar properties during ingestion","user":{"login":"roytmana","id":2524911,"node_id":"MDQ6VXNlcjI1MjQ5MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2524911?v=4","gravatar_id":"","url":"https://api.github.com/users/roytmana","html_url":"https://github.com/roytmana","followers_url":"https://api.github.com/users/roytmana/followers","following_url":"https://api.github.com/users/roytmana/following{/other_user}","gists_url":"https://api.github.com/users/roytmana/gists{/gist_id}","starred_url":"https://api.github.com/users/roytmana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roytmana/subscriptions","organizations_url":"https://api.github.com/users/roytmana/orgs","repos_url":"https://api.github.com/users/roytmana/repos","events_url":"https://api.github.com/users/roytmana/events{/privacy}","received_events_url":"https://api.github.com/users/roytmana/received_events","type":"User","site_admin":false},"labels":[{"id":141141324,"node_id":"MDU6TGFiZWwxNDExNDEzMjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Analytics/Aggregations","name":":Analytics/Aggregations","color":"0e8a16","default":false,"description":"Aggregations"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-07-13T00:30:02Z","updated_at":"2018-07-13T16:51:38Z","closed_at":"2018-07-13T13:18:33Z","author_association":"NONE","active_lock_reason":null,"body":"When elastic index represents a real world business entity whos JSON representation is important in itself we would not want introduce additional properties that may be needed to make searching or aggregations more performant/simple/useful. \r\n\r\nIt would be very helpful if it were possible to define fields within a given scalar property which are calculated based on property value during indexing using painless or lucene expression script.\r\n\r\nExample below creates a `\"not-zero\"` field on a cost field because in my hypothetical use case it is important to efficiently and simply report on free vs paid items\r\n\r\n```javascript\r\n  \"cost\": {\r\n    \"type\": \"long\",\r\n    \"fields\": {\r\n      \"not_zero\": {\r\n        \"type\": \"boolean\",\r\n        \"script\": {\r\n          \"lang\": \"expression\",\r\n          \"source\": \"value > 0\" //value is the value of the property\r\n        }\r\n      }\r\n    }\r\n  }\r\n```\r\nIdeally script would have two predefined parameters - property value and document being indexed properties of which could be accessible via dot-notation so that more complex computations could be made. But even just the value itself would be very useful for simple transformations\r\n","closed_by":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"performed_via_github_app":null}