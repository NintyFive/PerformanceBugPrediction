{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/53289","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53289/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53289/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53289/events","html_url":"https://github.com/elastic/elasticsearch/issues/53289","id":577992183,"node_id":"MDU6SXNzdWU1Nzc5OTIxODM=","number":53289,"title":"ILM: Add option to disable setting indices to read-only when force merge is executed ","user":{"login":"jakommo","id":6436143,"node_id":"MDQ6VXNlcjY0MzYxNDM=","avatar_url":"https://avatars2.githubusercontent.com/u/6436143?v=4","gravatar_id":"","url":"https://api.github.com/users/jakommo","html_url":"https://github.com/jakommo","followers_url":"https://api.github.com/users/jakommo/followers","following_url":"https://api.github.com/users/jakommo/following{/other_user}","gists_url":"https://api.github.com/users/jakommo/gists{/gist_id}","starred_url":"https://api.github.com/users/jakommo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakommo/subscriptions","organizations_url":"https://api.github.com/users/jakommo/orgs","repos_url":"https://api.github.com/users/jakommo/repos","events_url":"https://api.github.com/users/jakommo/events{/privacy}","received_events_url":"https://api.github.com/users/jakommo/received_events","type":"User","site_admin":false},"labels":[{"id":912828538,"node_id":"MDU6TGFiZWw5MTI4Mjg1Mzg=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/ILM+SLM","name":":Core/Features/ILM+SLM","color":"0e8a16","default":false,"description":"Index and Snapshot lifecycle management"},{"id":1967496097,"node_id":"MDU6TGFiZWwxOTY3NDk2MDk3","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Core/Features","name":"Team:Core/Features","color":"fef2c0","default":false,"description":"Meta label for core/features team"}],"state":"closed","locked":false,"assignee":{"login":"joegallo","id":187034,"node_id":"MDQ6VXNlcjE4NzAzNA==","avatar_url":"https://avatars2.githubusercontent.com/u/187034?v=4","gravatar_id":"","url":"https://api.github.com/users/joegallo","html_url":"https://github.com/joegallo","followers_url":"https://api.github.com/users/joegallo/followers","following_url":"https://api.github.com/users/joegallo/following{/other_user}","gists_url":"https://api.github.com/users/joegallo/gists{/gist_id}","starred_url":"https://api.github.com/users/joegallo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joegallo/subscriptions","organizations_url":"https://api.github.com/users/joegallo/orgs","repos_url":"https://api.github.com/users/joegallo/repos","events_url":"https://api.github.com/users/joegallo/events{/privacy}","received_events_url":"https://api.github.com/users/joegallo/received_events","type":"User","site_admin":false},"assignees":[{"login":"joegallo","id":187034,"node_id":"MDQ6VXNlcjE4NzAzNA==","avatar_url":"https://avatars2.githubusercontent.com/u/187034?v=4","gravatar_id":"","url":"https://api.github.com/users/joegallo","html_url":"https://github.com/joegallo","followers_url":"https://api.github.com/users/joegallo/followers","following_url":"https://api.github.com/users/joegallo/following{/other_user}","gists_url":"https://api.github.com/users/joegallo/gists{/gist_id}","starred_url":"https://api.github.com/users/joegallo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joegallo/subscriptions","organizations_url":"https://api.github.com/users/joegallo/orgs","repos_url":"https://api.github.com/users/joegallo/repos","events_url":"https://api.github.com/users/joegallo/events{/privacy}","received_events_url":"https://api.github.com/users/joegallo/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2020-03-09T15:28:52Z","updated_at":"2020-11-03T09:03:51Z","closed_at":"2020-11-03T09:03:51Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the feature**:\r\nToday, when a [force merge action is executed via ILM](https://www.elastic.co/guide/en/elasticsearch/reference/7.6/_actions.html#ilm-forcemerge-action), it will automatically mark the index read only, to prevent the user from the implications that would come with still writing to this index. \r\nIt totally makes sense to have this as default.\r\n\r\nIn some scenarios, this is causing issues and it would be nice to have a setting to disable this behavior, accepting the potential problems this could cause. \r\n\r\nOne such scenario is with Logstash sending data to indices that got forced merged via ILM and are read-only now.\r\nThis can either be because a user is back filling data or because there is an issue with date parsing etc.\r\nCurrently Logstash will log a warning that the index is read only, but will retry forever (which seems like the correct behavior) and eventually fill up the entire pipeline and block Logstash from processing any events. \r\n\r\nI was talking to users about this and they would much prefer to accept the data into the force merged indices and live with performance implications that come from having the small segments next to the huge segment, than having their Logstash pipeline blocked by this. \r\n\r\nAs for workarounds, I only see something like a cronjob that uses curator or a script to \"un-block\" the indices that got force merges by ILM already. \r\n\r\n","closed_by":{"login":"jakommo","id":6436143,"node_id":"MDQ6VXNlcjY0MzYxNDM=","avatar_url":"https://avatars2.githubusercontent.com/u/6436143?v=4","gravatar_id":"","url":"https://api.github.com/users/jakommo","html_url":"https://github.com/jakommo","followers_url":"https://api.github.com/users/jakommo/followers","following_url":"https://api.github.com/users/jakommo/following{/other_user}","gists_url":"https://api.github.com/users/jakommo/gists{/gist_id}","starred_url":"https://api.github.com/users/jakommo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakommo/subscriptions","organizations_url":"https://api.github.com/users/jakommo/orgs","repos_url":"https://api.github.com/users/jakommo/repos","events_url":"https://api.github.com/users/jakommo/events{/privacy}","received_events_url":"https://api.github.com/users/jakommo/received_events","type":"User","site_admin":false},"performed_via_github_app":null}