[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/65050448","html_url":"https://github.com/elastic/elasticsearch/issues/8719#issuecomment-65050448","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8719","id":65050448,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MDUwNDQ4","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2014-12-01T11:12:39Z","updated_at":"2014-12-01T11:12:39Z","author_association":"CONTRIBUTOR","body":"Which version of Elasticsearch?  Newer versions (that include Lucene >=\n4.9.0) improve this error message...\n\nYou are likely hitting a process limit ... double check that you don't have\na virtual memory limit (ulimit -v) or allocated memory limit (ulimit -m):\nboth should say \"unlimited\".  If you have many, many shards you may be\nhitting a limit on maximum number of per-process maps; see sysctl\nvm.max_map_count if you are on Linux.\n\nMike McCandless\n\nhttp://blog.mikemccandless.com\n\nOn Mon, Dec 1, 2014 at 6:00 AM, balibaba12 notifications@github.com wrote:\n\n> can you help me?\n> \n> This is the error which I got:\n> \n> [2014-12-01 11:20:14,831][INFO ][node ] [Human Torch] started\n> [2014-12-01 11:51:12,002][WARN ][index.engine.internal ] [Human Torch]\n> [bifs_index-2014-07-18][0] failed to flush after setting shard to inactive\n> org.elasticsearch.index.engine.FlushFailedEngineException:\n> [bifs_index-2014-07-18][0] Flush failed\n> at\n> org.elasticsearch.index.engine.internal.InternalEngine.flush(InternalEngine.java:804)\n> \n> at\n> org.elasticsearch.index.engine.internal.InternalEngine.updateIndexingBufferSize(InternalEngine.java:223)\n> \n> at\n> org.elasticsearch.indices.memory.IndexingMemoryController$ShardsIndicesStatusChecker.run(IndexingMemoryController.java:201)\n> \n> at\n> org.elasticsearch.threadpool.ThreadPool$LoggingRunnable.run(ThreadPool.java:437)\n> \n> at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)\n> at\n> java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)\n> at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)\n> at\n> java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)\n> \n> at\n> java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:181)\n> \n> at\n> java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:205)\n> \n> at\n> java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n> \n> at\n> java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n> \n> at java.lang.Thread.run(Thread.java:619)\n> Caused by: java.io.IOException: Map failed\n> at sun.nio.ch.FileChannelImpl.map(FileChannelImpl.java:758)\n> at org.apache.lucene.store.MMapDirectory.map(MMapDirectory.java:283)\n> at\n> org.apache.lucene.store.MMapDirectory$MMapIndexInput.(MMapDirectory.java:228)\n> \n> at org.apache.lucene.store.MMapDirectory.openInput(MMapDirectory.java:195)\n> at\n> org.apache.lucene.store.FilterDirectory.openInput(FilterDirectory.java:80)\n> at\n> org.elasticsearch.index.store.Store$StoreDirectory.openInput(Store.java:473)\n> \n> at\n> org.apache.lucene.codecs.compressing.CompressingStoredFieldsReader.(CompressingStoredFieldsReader.java:130)\n> \n> at\n> org.apache.lucene.codecs.compressing.CompressingStoredFieldsFormat.fieldsReader(CompressingStoredFieldsFormat.java:113)\n> \n> at\n> org.apache.lucene.index.SegmentCoreReaders.(SegmentCoreReaders.java:129)\n> at org.apache.lucene.index.SegmentReader.(SegmentReader.java:96)\n> at\n> org.apache.lucene.index.ReadersAndUpdates.getReader(ReadersAndUpdates.java:141)\n> \n> at\n> org.apache.lucene.index.ReadersAndUpdates.getReadOnlyClone(ReadersAndUpdates.java:235)\n> \n> at\n> org.apache.lucene.index.StandardDirectoryReader.open(StandardDirectoryReader.java:101)\n> \n> at org.apache.lucene.index.IndexWriter.getReader(IndexWriter.java:382)\n> at org.apache.lucene.index.DirectoryReader.open(DirectoryReader.java:111)\n> at org.apache.lucene.search.SearcherManager.(SearcherManager.java:89)\n> at\n> org.elasticsearch.index.engine.internal.InternalEngine.buildSearchManager(InternalEngine.java:1471)\n> \n> at\n> org.elasticsearch.index.engine.internal.InternalEngine.flush(InternalEngine.java:788)\n> \n> ... 12 more\n> Caused by: java.lang.OutOfMemoryError: Map failed\n> at sun.nio.ch.FileChannelImpl.map0(Native Method)\n> at sun.nio.ch.FileChannelImpl.map(FileChannelImpl.java:755)\n> ... 29 more\n> [2014-12-01 11:51:12,819][WARN ][index.engine.internal ] [Human Torch]\n> [bifs_index-2014-07-18][1] failed to flush after setting shard to inactive\n> org.elasticsearch.index.engine.FlushFailedEngineException:\n> [bifs_index-2014-07-18][1] Flush failed\n> at\n> org.elasticsearch.index.engine.internal.InternalEngine.flush(InternalEngine.java:804)\n> \n> at\n> org.elasticsearch.index.engine.internal.InternalEngine.updateIndexingBufferSize(InternalEngine.java:223)\n> \n> at\n> org.elasticsearch.indices.memory.IndexingMemoryController$ShardsIndicesStatusChecker.run(IndexingMemoryController.java:201)\n> \n> at\n> org.elasticsearch.threadpool.ThreadPool$LoggingRunnable.run(ThreadPool.java:437)\n> \n> at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)\n> at\n> java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)\n> at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)\n> at\n> java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)\n> \n> at\n> java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:181)\n> \n> at\n> java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:205)\n> \n> at\n> java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n> \n> at\n> java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n> \n> at java.lang.Thread.run(Thread.java:619)\n> Caused by: java.io.IOException: Map failed\n> at sun.nio.ch.FileChannelImpl.map(FileChannelImpl.java:758)\n> at org.apache.lucene.store.MMapDirectory.map(MMapDirectory.java:283)\n> at\n> org.apache.lucene.store.MMapDirectory$MMapIndexInput.(MMapDirectory.java:228)\n> \n> at org.apache.lucene.store.MMapDirectory.openInput(MMapDirectory.java:195)\n> at\n> org.apache.lucene.store.FilterDirectory.openInput(FilterDirectory.java:80)\n> at\n> org.elasticsearch.index.store.Store$StoreDirectory.openInput(Store.java:473)\n> \n> at\n> org.apache.lucene.codecs.compressing.CompressingStoredFieldsReader.(CompressingStoredFieldsReader.java:130)\n> \n> at\n> org.apache.lucene.codecs.compressing.CompressingStoredFieldsFormat.fieldsReader(CompressingStoredFieldsFormat.java:113)\n> \n> at\n> org.apache.lucene.index.SegmentCoreReaders.(SegmentCoreReaders.java:129)\n> at org.apache.lucene.index.SegmentReader.(SegmentReader.java:96)\n> at\n> org.apache.lucene.index.ReadersAndUpdates.getReader(ReadersAndUpdates.java:141)\n> \n> at\n> org.apache.lucene.index.ReadersAndUpdates.getReadOnlyClone(ReadersAndUpdates.java:235)\n> \n> at\n> org.apache.lucene.index.StandardDirectoryReader.open(StandardDirectoryReader.java:101)\n> \n> at org.apache.lucene.index.IndexWriter.getReader(IndexWriter.java:382)\n> at org.apache.lucene.index.DirectoryReader.open(DirectoryReader.java:111)\n> at org.apache.lucene.search.SearcherManager.(SearcherManager.java:89)\n> at\n> org.elasticsearch.index.engine.internal.InternalEngine.buildSearchManager(InternalEngine.java:1471)\n> \n> at\n> org.elasticsearch.index.engine.internal.InternalEngine.flush(InternalEngine.java:788)\n> \n> ... 12 more\n> Caused by: java.lang.OutOfMemoryError: Map failed\n> at sun.nio.ch.FileChannelImpl.map0(Native Method)\n> at sun.nio.ch.FileChannelImpl.map(FileChannelImpl.java:755)\n> ... 29 mor\n> \n> â€”\n> Reply to this email directly or view it on GitHub\n> https://github.com/elasticsearch/elasticsearch/issues/8719.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/65051646","html_url":"https://github.com/elastic/elasticsearch/issues/8719#issuecomment-65051646","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8719","id":65051646,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MDUxNjQ2","user":{"login":"balibaba12","id":9481145,"node_id":"MDQ6VXNlcjk0ODExNDU=","avatar_url":"https://avatars0.githubusercontent.com/u/9481145?v=4","gravatar_id":"","url":"https://api.github.com/users/balibaba12","html_url":"https://github.com/balibaba12","followers_url":"https://api.github.com/users/balibaba12/followers","following_url":"https://api.github.com/users/balibaba12/following{/other_user}","gists_url":"https://api.github.com/users/balibaba12/gists{/gist_id}","starred_url":"https://api.github.com/users/balibaba12/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/balibaba12/subscriptions","organizations_url":"https://api.github.com/users/balibaba12/orgs","repos_url":"https://api.github.com/users/balibaba12/repos","events_url":"https://api.github.com/users/balibaba12/events{/privacy}","received_events_url":"https://api.github.com/users/balibaba12/received_events","type":"User","site_admin":false},"created_at":"2014-12-01T11:24:45Z","updated_at":"2014-12-01T11:24:45Z","author_association":"NONE","body":"the version is 1.1.2\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/65052030","html_url":"https://github.com/elastic/elasticsearch/issues/8719#issuecomment-65052030","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8719","id":65052030,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MDUyMDMw","user":{"login":"balibaba12","id":9481145,"node_id":"MDQ6VXNlcjk0ODExNDU=","avatar_url":"https://avatars0.githubusercontent.com/u/9481145?v=4","gravatar_id":"","url":"https://api.github.com/users/balibaba12","html_url":"https://github.com/balibaba12","followers_url":"https://api.github.com/users/balibaba12/followers","following_url":"https://api.github.com/users/balibaba12/following{/other_user}","gists_url":"https://api.github.com/users/balibaba12/gists{/gist_id}","starred_url":"https://api.github.com/users/balibaba12/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/balibaba12/subscriptions","organizations_url":"https://api.github.com/users/balibaba12/orgs","repos_url":"https://api.github.com/users/balibaba12/repos","events_url":"https://api.github.com/users/balibaba12/events{/privacy}","received_events_url":"https://api.github.com/users/balibaba12/received_events","type":"User","site_admin":false},"created_at":"2014-12-01T11:28:10Z","updated_at":"2014-12-01T11:28:10Z","author_association":"NONE","body":"i will have a try  tomorrow \nthank you\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/65357037","html_url":"https://github.com/elastic/elasticsearch/issues/8719#issuecomment-65357037","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8719","id":65357037,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzU3MDM3","user":{"login":"balibaba12","id":9481145,"node_id":"MDQ6VXNlcjk0ODExNDU=","avatar_url":"https://avatars0.githubusercontent.com/u/9481145?v=4","gravatar_id":"","url":"https://api.github.com/users/balibaba12","html_url":"https://github.com/balibaba12","followers_url":"https://api.github.com/users/balibaba12/followers","following_url":"https://api.github.com/users/balibaba12/following{/other_user}","gists_url":"https://api.github.com/users/balibaba12/gists{/gist_id}","starred_url":"https://api.github.com/users/balibaba12/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/balibaba12/subscriptions","organizations_url":"https://api.github.com/users/balibaba12/orgs","repos_url":"https://api.github.com/users/balibaba12/repos","events_url":"https://api.github.com/users/balibaba12/events{/privacy}","received_events_url":"https://api.github.com/users/balibaba12/received_events","type":"User","site_admin":false},"created_at":"2014-12-03T05:10:24Z","updated_at":"2014-12-03T05:10:24Z","author_association":"NONE","body":"it dose not work..........\ni have set\nulimit -l unlimted\nulimit -v unlimted\nulimit -m unlimted\n\nbut when i index docs into es, the virtual memory will grow more and more larger,and will hit the swap limit,and the virtual memory  seem to never been freed (if i delete the index,the virtual memory will be freed) \nmy machine is virtual machine suse linux .\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158685226","html_url":"https://github.com/elastic/elasticsearch/issues/8719#issuecomment-158685226","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8719","id":158685226,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODY4NTIyNg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-11-21T22:02:28Z","updated_at":"2015-11-21T22:02:28Z","author_association":"CONTRIBUTOR","body":"Lots has changed in the last year, so I'll close this issue.\n","performed_via_github_app":null}]