[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/613611880","html_url":"https://github.com/elastic/elasticsearch/issues/55175#issuecomment-613611880","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55175","id":613611880,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzYxMTg4MA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-04-14T18:38:08Z","updated_at":"2020-04-14T18:38:08Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features (:Core/Features/ILM+SLM)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/613622328","html_url":"https://github.com/elastic/elasticsearch/issues/55175#issuecomment-613622328","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55175","id":613622328,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzYyMjMyOA==","user":{"login":"SpencerLN","id":6659148,"node_id":"MDQ6VXNlcjY2NTkxNDg=","avatar_url":"https://avatars0.githubusercontent.com/u/6659148?v=4","gravatar_id":"","url":"https://api.github.com/users/SpencerLN","html_url":"https://github.com/SpencerLN","followers_url":"https://api.github.com/users/SpencerLN/followers","following_url":"https://api.github.com/users/SpencerLN/following{/other_user}","gists_url":"https://api.github.com/users/SpencerLN/gists{/gist_id}","starred_url":"https://api.github.com/users/SpencerLN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SpencerLN/subscriptions","organizations_url":"https://api.github.com/users/SpencerLN/orgs","repos_url":"https://api.github.com/users/SpencerLN/repos","events_url":"https://api.github.com/users/SpencerLN/events{/privacy}","received_events_url":"https://api.github.com/users/SpencerLN/received_events","type":"User","site_admin":false},"created_at":"2020-04-14T18:57:44Z","updated_at":"2020-04-14T18:57:44Z","author_association":"NONE","body":"We started seeing this error immediately after upgrading a cluster to 7.7.0, but were not experiencing this on 7.6.2.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/613682808","html_url":"https://github.com/elastic/elasticsearch/issues/55175#issuecomment-613682808","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55175","id":613682808,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzY4MjgwOA==","user":{"login":"gwbrown","id":1522844,"node_id":"MDQ6VXNlcjE1MjI4NDQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1522844?v=4","gravatar_id":"","url":"https://api.github.com/users/gwbrown","html_url":"https://github.com/gwbrown","followers_url":"https://api.github.com/users/gwbrown/followers","following_url":"https://api.github.com/users/gwbrown/following{/other_user}","gists_url":"https://api.github.com/users/gwbrown/gists{/gist_id}","starred_url":"https://api.github.com/users/gwbrown/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gwbrown/subscriptions","organizations_url":"https://api.github.com/users/gwbrown/orgs","repos_url":"https://api.github.com/users/gwbrown/repos","events_url":"https://api.github.com/users/gwbrown/events{/privacy}","received_events_url":"https://api.github.com/users/gwbrown/received_events","type":"User","site_admin":false},"created_at":"2020-04-14T21:09:23Z","updated_at":"2020-04-15T20:14:54Z","author_association":"CONTRIBUTOR","body":"It looks like there's two things going on that cause the difference in behavior in 7.7.0:\r\n1) The bug described in the original issue was fixed in 7.7.0 as part of https://github.com/elastic/elasticsearch/pull/51631. I still want to do a bit more testing here to make sure that issues present in 7.6.2 are fixed by upgrading to 7.7.0, but I've at least verified that the way to trigger the log messages is different in 7.7.0.\r\n2) (**UPDATE**: The following information applies to prerelease builds of 7.7.0 only. The final 7.7.0 release version is **not impacted.**) Now for the bad news. Looks like any index that has finished its policy (i.e. in `completed/completed/completed`) will emit a similar log message every poll interval for every index in the `completed/completed/completed` state. Indices stop progressing through the policy at the last defined phase in 7.7.0 (that was the point of #51631), but for indices which reached the end of their policy in <7.7.0, that adds up to a lot of log spam.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/613708405","html_url":"https://github.com/elastic/elasticsearch/issues/55175#issuecomment-613708405","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55175","id":613708405,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzcwODQwNQ==","user":{"login":"gwbrown","id":1522844,"node_id":"MDQ6VXNlcjE1MjI4NDQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1522844?v=4","gravatar_id":"","url":"https://api.github.com/users/gwbrown","html_url":"https://github.com/gwbrown","followers_url":"https://api.github.com/users/gwbrown/followers","following_url":"https://api.github.com/users/gwbrown/following{/other_user}","gists_url":"https://api.github.com/users/gwbrown/gists{/gist_id}","starred_url":"https://api.github.com/users/gwbrown/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gwbrown/subscriptions","organizations_url":"https://api.github.com/users/gwbrown/orgs","repos_url":"https://api.github.com/users/gwbrown/repos","events_url":"https://api.github.com/users/gwbrown/events{/privacy}","received_events_url":"https://api.github.com/users/gwbrown/received_events","type":"User","site_admin":false},"created_at":"2020-04-14T22:16:06Z","updated_at":"2020-04-14T22:16:06Z","author_association":"CONTRIBUTOR","body":"The bug in 7.7 is being addressed in https://github.com/elastic/elasticsearch/pull/55184.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/614223157","html_url":"https://github.com/elastic/elasticsearch/issues/55175#issuecomment-614223157","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55175","id":614223157,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNDIyMzE1Nw==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2020-04-15T19:03:17Z","updated_at":"2020-04-15T19:03:17Z","author_association":"MEMBER","body":"Since the bug has been resolved for 7.7.0 and won't be backported for branches that aren't getting releases, I'm going to close this for now.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/614256999","html_url":"https://github.com/elastic/elasticsearch/issues/55175#issuecomment-614256999","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55175","id":614256999,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNDI1Njk5OQ==","user":{"login":"gwbrown","id":1522844,"node_id":"MDQ6VXNlcjE1MjI4NDQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1522844?v=4","gravatar_id":"","url":"https://api.github.com/users/gwbrown","html_url":"https://github.com/gwbrown","followers_url":"https://api.github.com/users/gwbrown/followers","following_url":"https://api.github.com/users/gwbrown/following{/other_user}","gists_url":"https://api.github.com/users/gwbrown/gists{/gist_id}","starred_url":"https://api.github.com/users/gwbrown/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gwbrown/subscriptions","organizations_url":"https://api.github.com/users/gwbrown/orgs","repos_url":"https://api.github.com/users/gwbrown/repos","events_url":"https://api.github.com/users/gwbrown/events{/privacy}","received_events_url":"https://api.github.com/users/gwbrown/received_events","type":"User","site_admin":false},"created_at":"2020-04-15T20:13:57Z","updated_at":"2020-04-15T20:13:57Z","author_association":"CONTRIBUTOR","body":"As a follow-up, if you encounter this bug and want to get rid of the log spam, any of these solutions will fix the situation.\r\n1. Upgrade to 7.7.0 or later.\r\n2. Update the policy to include any non-empty phase after the phase in which indices are “stuck” and allow those indices to complete the policy. (e.g. for the messages above, the phase is `warm`, so any non-empty `cold` or `delete` phase would be used).\r\n3. Remove the policy from the impacted indices. This state can only occur when an index has reached the end of the current policy, so this should have minimal side effects.","performed_via_github_app":null}]