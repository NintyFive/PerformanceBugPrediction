{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/43061","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43061/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43061/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43061/events","html_url":"https://github.com/elastic/elasticsearch/issues/43061","id":454291882,"node_id":"MDU6SXNzdWU0NTQyOTE4ODI=","number":43061,"title":"Post-scripts for Continuous Dataframes","user":{"login":"andrewvc","id":131427,"node_id":"MDQ6VXNlcjEzMTQyNw==","avatar_url":"https://avatars2.githubusercontent.com/u/131427?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewvc","html_url":"https://github.com/andrewvc","followers_url":"https://api.github.com/users/andrewvc/followers","following_url":"https://api.github.com/users/andrewvc/following{/other_user}","gists_url":"https://api.github.com/users/andrewvc/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewvc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewvc/subscriptions","organizations_url":"https://api.github.com/users/andrewvc/orgs","repos_url":"https://api.github.com/users/andrewvc/repos","events_url":"https://api.github.com/users/andrewvc/events{/privacy}","received_events_url":"https://api.github.com/users/andrewvc/received_events","type":"User","site_admin":false},"labels":[{"id":1272783040,"node_id":"MDU6TGFiZWwxMjcyNzgzMDQw","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:ml/Transform","name":":ml/Transform","color":"0e8a16","default":false,"description":"Transform"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-06-10T17:58:13Z","updated_at":"2019-06-19T17:58:12Z","closed_at":"2019-06-19T17:58:12Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**TL;DR It would be useful to be able to specify a painless script that can transform docs before indexing when using dataframes**\r\n\r\nContinuous data frames are really powerful for a number of non-ML use cases. They're great \r\nfor turning time series data into entity centric data. We plan on using this feature to build a snapshot of what things look like 'now' for uptime.\r\n\r\nOne limitation of data frames is that the documents that are created reflect the JSON structure of the aggregations used. This is pretty ugly in our use case. What we've wound up doing is writing everything in a [big scripted metric aggregation](https://gist.github.com/andrewvc/2387782ef2a650ee6d596da4169ce7bc) so we can control the exact naming of fields etc. We want these field names to be friendly for all users of the index, and to be ECS compatible as well.\r\n\r\nIf dataframes supported a `post-script` option, we could potentially use more traditional aggregations then simply clean up the output with a simpler painless script. \r\n\r\nAdditionally, even with a scripted_metric aggregation, one may only manipulate results appearing under the scripted metric's namespace. This `post-script` option would let us put fields exactly where we want them.","closed_by":{"login":"benwtrent","id":4357155,"node_id":"MDQ6VXNlcjQzNTcxNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/4357155?v=4","gravatar_id":"","url":"https://api.github.com/users/benwtrent","html_url":"https://github.com/benwtrent","followers_url":"https://api.github.com/users/benwtrent/followers","following_url":"https://api.github.com/users/benwtrent/following{/other_user}","gists_url":"https://api.github.com/users/benwtrent/gists{/gist_id}","starred_url":"https://api.github.com/users/benwtrent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benwtrent/subscriptions","organizations_url":"https://api.github.com/users/benwtrent/orgs","repos_url":"https://api.github.com/users/benwtrent/repos","events_url":"https://api.github.com/users/benwtrent/events{/privacy}","received_events_url":"https://api.github.com/users/benwtrent/received_events","type":"User","site_admin":false},"performed_via_github_app":null}