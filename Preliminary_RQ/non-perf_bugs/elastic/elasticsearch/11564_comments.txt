[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/111503550","html_url":"https://github.com/elastic/elasticsearch/issues/11564#issuecomment-111503550","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11564","id":111503550,"node_id":"MDEyOklzc3VlQ29tbWVudDExMTUwMzU1MA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-06-12T14:04:01Z","updated_at":"2015-06-12T14:04:01Z","author_association":"CONTRIBUTOR","body":"@jaymode please could you take a look\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/165617665","html_url":"https://github.com/elastic/elasticsearch/issues/11564#issuecomment-165617665","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11564","id":165617665,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NTYxNzY2NQ==","user":{"login":"joshuar","id":7401,"node_id":"MDQ6VXNlcjc0MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/7401?v=4","gravatar_id":"","url":"https://api.github.com/users/joshuar","html_url":"https://github.com/joshuar","followers_url":"https://api.github.com/users/joshuar/followers","following_url":"https://api.github.com/users/joshuar/following{/other_user}","gists_url":"https://api.github.com/users/joshuar/gists{/gist_id}","starred_url":"https://api.github.com/users/joshuar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshuar/subscriptions","organizations_url":"https://api.github.com/users/joshuar/orgs","repos_url":"https://api.github.com/users/joshuar/repos","events_url":"https://api.github.com/users/joshuar/events{/privacy}","received_events_url":"https://api.github.com/users/joshuar/received_events","type":"User","site_admin":false},"created_at":"2015-12-17T23:47:41Z","updated_at":"2015-12-17T23:47:41Z","author_association":"MEMBER","body":"Looks to be still a problem on 2.1.  Regression here?  @GlenRSmith and I can confirm this occurs with the 2.1 release archive.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/165618030","html_url":"https://github.com/elastic/elasticsearch/issues/11564#issuecomment-165618030","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11564","id":165618030,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NTYxODAzMA==","user":{"login":"joshuar","id":7401,"node_id":"MDQ6VXNlcjc0MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/7401?v=4","gravatar_id":"","url":"https://api.github.com/users/joshuar","html_url":"https://github.com/joshuar","followers_url":"https://api.github.com/users/joshuar/followers","following_url":"https://api.github.com/users/joshuar/following{/other_user}","gists_url":"https://api.github.com/users/joshuar/gists{/gist_id}","starred_url":"https://api.github.com/users/joshuar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshuar/subscriptions","organizations_url":"https://api.github.com/users/joshuar/orgs","repos_url":"https://api.github.com/users/joshuar/repos","events_url":"https://api.github.com/users/joshuar/events{/privacy}","received_events_url":"https://api.github.com/users/joshuar/received_events","type":"User","site_admin":false},"created_at":"2015-12-17T23:49:53Z","updated_at":"2015-12-17T23:49:53Z","author_association":"MEMBER","body":"It seems to be independent of which config item you want to prompt for:\n\n```\nelasticsearch-2.1.0  bin/elasticsearch\nEnter value for [cluster.name]: foo\nEnter value for [cluster.name]: bar\n[2015-12-18 10:48:50,219][INFO ][node                     ] [Wendell Vaughn] version[2.1.0], pid[21231], build[72cd1f1/2015-11-18T22:40:03Z]\n[2015-12-18 10:48:50,220][INFO ][node                     ] [Wendell Vaughn] initializing ...\n[2015-12-18 10:48:50,280][INFO ][plugins                  ] [Wendell Vaughn] loaded [], sites []\n[2015-12-18 10:48:50,304][INFO ][env                      ] [Wendell Vaughn] using [1] data paths, mounts [[/ (/dev/mapper/fedora_josh--xps13-root)]], net usable_space [79.1gb], net total_space [233.9gb], spins? [no], types [ext4]\n[2015-12-18 10:48:51,761][INFO ][node                     ] [Wendell Vaughn] initialized\n[2015-12-18 10:48:51,762][INFO ][node                     ] [Wendell Vaughn] starting ...\n[2015-12-18 10:48:51,902][INFO ][transport                ] [Wendell Vaughn] publish_address {127.0.0.1:9300}, bound_addresses {127.0.0.1:9300}, {[::1]:9300}\n[2015-12-18 10:48:51,912][INFO ][discovery                ] [Wendell Vaughn] bar/azOFxYXMQ6muCpGOpqvxSw\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/165619714","html_url":"https://github.com/elastic/elasticsearch/issues/11564#issuecomment-165619714","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11564","id":165619714,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NTYxOTcxNA==","user":{"login":"GlenRSmith","id":1327920,"node_id":"MDQ6VXNlcjEzMjc5MjA=","avatar_url":"https://avatars3.githubusercontent.com/u/1327920?v=4","gravatar_id":"","url":"https://api.github.com/users/GlenRSmith","html_url":"https://github.com/GlenRSmith","followers_url":"https://api.github.com/users/GlenRSmith/followers","following_url":"https://api.github.com/users/GlenRSmith/following{/other_user}","gists_url":"https://api.github.com/users/GlenRSmith/gists{/gist_id}","starred_url":"https://api.github.com/users/GlenRSmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GlenRSmith/subscriptions","organizations_url":"https://api.github.com/users/GlenRSmith/orgs","repos_url":"https://api.github.com/users/GlenRSmith/repos","events_url":"https://api.github.com/users/GlenRSmith/events{/privacy}","received_events_url":"https://api.github.com/users/GlenRSmith/received_events","type":"User","site_admin":false},"created_at":"2015-12-18T00:00:40Z","updated_at":"2015-12-18T00:00:40Z","author_association":"CONTRIBUTOR","body":"Just confirmed on 2.1.1.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/165692770","html_url":"https://github.com/elastic/elasticsearch/issues/11564#issuecomment-165692770","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11564","id":165692770,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NTY5Mjc3MA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-12-18T06:52:08Z","updated_at":"2015-12-18T06:52:08Z","author_association":"MEMBER","body":"This is different than the original issue. I think what is happening is we first initialize the settings/environment in bootstrap so that we can eg init logging, but then when bootstrap creates the node, it passes in a fresh Settings, and the Node constructor again initializes settings/environment.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/172642851","html_url":"https://github.com/elastic/elasticsearch/issues/11564#issuecomment-172642851","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11564","id":172642851,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MjY0Mjg1MQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-01-18T20:16:45Z","updated_at":"2016-01-18T20:16:45Z","author_association":"CONTRIBUTOR","body":"@jaymode could you take a look at this please?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/172880737","html_url":"https://github.com/elastic/elasticsearch/issues/11564#issuecomment-172880737","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11564","id":172880737,"node_id":"MDEyOklzc3VlQ29tbWVudDE3Mjg4MDczNw==","user":{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false},"created_at":"2016-01-19T15:07:27Z","updated_at":"2016-01-19T15:07:27Z","author_association":"MEMBER","body":"As @rjernst said, this is a different issue that the original. `BootstrapCLIParser` was added which extends CLITool. CLITool prepares the settings and environment which includes prompting since CLITools are usually run outside of the bootstrap process. This causes the first prompt that is ignored. The second prompt that is used, comes from `Bootstrap`, which is passed to the node.\n\nPart of the issue is that the `BootstrapCLIParser` sets properties that will change the value of settings. I think we can solve this a few different ways:\n1. Pass in empty settings/null environment for this CLITool. If we try to create a valid environment here then we have to prepare the settings to ensure we parse the paths from the settings for our directories\n2. Do not use the `CLITool` infrastructure\n3. Prepare the environment in bootstrap, pass to `BootstrapCLIParser`. Re-prepare the settings/environment, passing in the already prepared settings.\n\n@spinscale @rjernst any thoughts?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/172964786","html_url":"https://github.com/elastic/elasticsearch/issues/11564#issuecomment-172964786","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11564","id":172964786,"node_id":"MDEyOklzc3VlQ29tbWVudDE3Mjk2NDc4Ng==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2016-01-19T19:46:38Z","updated_at":"2016-01-19T19:46:38Z","author_association":"MEMBER","body":"I would say preparing the environment once would be the best option, it will just take some refactoring to pass it through. Running prepare already creates Environment twice (the first time so it can try and load the config file, which might have other paths like plugin path or data path). Really I think we should simply not allow paths to be configured in elasticsearch.yml, instead it should only be through sysprops.  It might be something that could simplify the settings/env prep, to make this a little easier.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/188027362","html_url":"https://github.com/elastic/elasticsearch/issues/11564#issuecomment-188027362","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11564","id":188027362,"node_id":"MDEyOklzc3VlQ29tbWVudDE4ODAyNzM2Mg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-02-24T02:40:12Z","updated_at":"2016-02-24T02:40:12Z","author_association":"MEMBER","body":"I have a fix for this that will come as part of #16579.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/196086272","html_url":"https://github.com/elastic/elasticsearch/issues/11564#issuecomment-196086272","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11564","id":196086272,"node_id":"MDEyOklzc3VlQ29tbWVudDE5NjA4NjI3Mg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-03-14T00:07:24Z","updated_at":"2016-03-14T00:07:24Z","author_association":"MEMBER","body":"Closed by #17024.\n","performed_via_github_app":null}]