[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/387605951","html_url":"https://github.com/elastic/elasticsearch/issues/30469#issuecomment-387605951","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30469","id":387605951,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NzYwNTk1MQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-05-09T03:04:08Z","updated_at":"2018-05-09T03:04:08Z","author_association":"MEMBER","body":"There is a misunderstanding here. The timeout is about how long to wait if the node never replies, and the retry is how many times to retry after a timeout. If the socket breaks though, that's not a timeout, the connection to the node is broken. That's what you're seeing here. This isn't a bug.\r\n\r\nAlso, I notice that your IP address suggest that you're spanning a large geographical area and we do not support that.\r\n\r\nElastic provides a [forum](https://discuss.elastic.co) for asking general questions and instead prefers to use GitHub only for verified bug reports and feature requests. There's an active community there that should be able to help you with your issue. As such, I hope you don't mind that I close this.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/387610891","html_url":"https://github.com/elastic/elasticsearch/issues/30469#issuecomment-387610891","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30469","id":387610891,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NzYxMDg5MQ==","user":{"login":"krshnmr4","id":34561059,"node_id":"MDQ6VXNlcjM0NTYxMDU5","avatar_url":"https://avatars0.githubusercontent.com/u/34561059?v=4","gravatar_id":"","url":"https://api.github.com/users/krshnmr4","html_url":"https://github.com/krshnmr4","followers_url":"https://api.github.com/users/krshnmr4/followers","following_url":"https://api.github.com/users/krshnmr4/following{/other_user}","gists_url":"https://api.github.com/users/krshnmr4/gists{/gist_id}","starred_url":"https://api.github.com/users/krshnmr4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krshnmr4/subscriptions","organizations_url":"https://api.github.com/users/krshnmr4/orgs","repos_url":"https://api.github.com/users/krshnmr4/repos","events_url":"https://api.github.com/users/krshnmr4/events{/privacy}","received_events_url":"https://api.github.com/users/krshnmr4/received_events","type":"User","site_admin":false},"created_at":"2018-05-09T03:41:21Z","updated_at":"2018-05-09T03:49:01Z","author_association":"NONE","body":"@jasontedor That doesn't make sense to me. If you notice the timestamps, there is a 15 minute difference between when the nodes clustered and when they broke out of cluster. \r\nAre you saying that the socket timeout is 15 minutes?\r\n\r\nWhat is the actual utility for zen.discovery.fd.ping_retries and ping_timeout then?  My understanding was that when the nodes cannot communicate to each other, ES fault detection would retry ping_retries number of times and with a timeout of ping_timeout each time. Could you please help clarify?\r\n\r\nAlso, my nodes are right next to each other and in the same LAN. Not geographically separated nor routed in any weird way.\r\n\r\nA few hours back after posting this issue:\r\n\r\n1) I clustered 2 (master+data) nodes\r\n2) Set ping_timeout to 2h and ping_retries to 12000\r\n3) Brought down interface on one of the nodes\r\n\r\nIn 15 minutes, \r\n`[2018-05-09 02:12:29,837][DEBUG][discovery.zen.fd         ] [5.50.50.2] [master] stopping fault detection against master [{5.50.50.1}{Ng9_u-jgSvOBhYV3ZHRGHw}{5.50.50.1}{5.50.50.1:9310}{master=true}], reason [master failure, transport disconnected]\r\n\r\n[2018-05-09 02:12:29,837][INFO ][discovery.zen            ] [5.50.50.2] master_left [{5.50.50.1}{Ng9_u-jgSvOBhYV3ZHRGHw}{5.50.50.1}{5.50.50.1:9310}{master=true}], reason [transport disconnected]\r\n\r\n[2018-05-09 02:12:29,839][WARN ][discovery.zen            ] [5.50.50.2] master left (reason = transport disconnected), current nodes: {{5.50.50.2}{ZYLbzHZSSGiryJbNpUZNTg}{5.50.50.2}{5.50.50.2:9310}{master=true},}\r\n\r\n[2018-05-09 02:12:29,839][INFO ][cluster.service          ] [5.50.50.2] removed {{5.50.50.1}{Ng9_u-jgSvOBhYV3ZHRGHw}{5.50.50.1}{5.50.50.1:9310}{master=true},}, reason: zen-disco-master_failed ({5.50.50.1}{Ng9_u-jgSvOBhYV3ZHRGHw}{5.50.50.1}{5.50.50.1:9310}{master=true})`\r\n","performed_via_github_app":null}]