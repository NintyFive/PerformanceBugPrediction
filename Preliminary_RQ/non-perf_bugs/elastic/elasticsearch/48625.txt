{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/48625","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48625/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48625/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48625/events","html_url":"https://github.com/elastic/elasticsearch/issues/48625","id":513832332,"node_id":"MDU6SXNzdWU1MTM4MzIzMzI=","number":48625,"title":"[CI] RelocationIT.testIndexAndRelocateConcurrently fails on master intake","user":{"login":"mayya-sharipova","id":5738841,"node_id":"MDQ6VXNlcjU3Mzg4NDE=","avatar_url":"https://avatars1.githubusercontent.com/u/5738841?v=4","gravatar_id":"","url":"https://api.github.com/users/mayya-sharipova","html_url":"https://github.com/mayya-sharipova","followers_url":"https://api.github.com/users/mayya-sharipova/followers","following_url":"https://api.github.com/users/mayya-sharipova/following{/other_user}","gists_url":"https://api.github.com/users/mayya-sharipova/gists{/gist_id}","starred_url":"https://api.github.com/users/mayya-sharipova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayya-sharipova/subscriptions","organizations_url":"https://api.github.com/users/mayya-sharipova/orgs","repos_url":"https://api.github.com/users/mayya-sharipova/repos","events_url":"https://api.github.com/users/mayya-sharipova/events{/privacy}","received_events_url":"https://api.github.com/users/mayya-sharipova/received_events","type":"User","site_admin":false},"labels":[{"id":152510590,"node_id":"MDU6TGFiZWwxNTI1MTA1OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Recovery","name":":Distributed/Recovery","color":"0e8a16","default":false,"description":"Anything around constructing a new shard, either from a local or a remote source."},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"},{"id":1194435738,"node_id":"MDU6TGFiZWwxMTk0NDM1NzM4","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v8.0.0","name":"v8.0.0","color":"dddddd","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"assignees":[{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2019-10-29T10:45:48Z","updated_at":"2019-10-29T17:22:19Z","closed_at":"2019-10-29T17:22:19Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"https://gradle-enterprise.elastic.co/s/k63bx3zx5aeg4\r\n\r\nREPRODUCE WITH: ./gradlew ':server:integTest' --tests \"org.elasticsearch.recovery.RelocationIT.testIndexAndRelocateConcurrently\" -Dtests.seed=B205D9E1D369E428 -Dtests.security.manager=true -Dtests.locale=sr-BA -Dtests.timezone=America/Goose_Bay -Dcompiler.java=12 -Druntime.java=11\r\n\r\nThe failure doesn't reproduce for me\r\n\r\nRelevant extract from the console log: \r\n```\r\njava.lang.AssertionError: Unexpected ShardFailures: [[test][3] failed, reason [[test/jPGCBDDYR36D8UlPCUoAYQ][[test][3]] org.elasticsearch.action.support.broadcast.BroadcastShardOperationFailedException:\r\nat org.elasticsearch.action.support.replication.TransportBroadcastReplicationAction.finishAndNotifyListener(TransportBroadcastReplicationAction.java:166)\r\n...\r\n\r\nCaused by: org.elasticsearch.transport.RemoteTransportException: [node_t3][127.0.0.1:33581][indices:admin/refresh[s][r]]\r\n--\r\nCaused by: java.lang.IllegalStateException: store is already closed can't increment refCount current count [0]\r\n...\r\n\r\nExpected: <0>\r\n--\r\nbut: was <1>\r\nat __randomizedtesting.SeedInfo.seed([B205D9E1D369E428:6D34D86CCF6CFB8B]:0)\r\nat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)\r\nat org.elasticsearch.test.hamcrest.ElasticsearchAssertions.assertNoFailures(ElasticsearchAssertions.java:326)\r\nat org.elasticsearch.test.ESIntegTestCase.indexRandom(ESIntegTestCase.java:1367)\r\nat org.elasticsearch.test.ESIntegTestCase.indexRandom(ESIntegTestCase.java:1272)\r\nat org.elasticsearch.test.ESIntegTestCase.indexRandom(ESIntegTestCase.java:1255)\r\nat org.elasticsearch.test.ESIntegTestCase.indexRandom(ESIntegTestCase.java:1231)\r\nat org.elasticsearch.recovery.RelocationIT.testIndexAndRelocateConcurrently(RelocationIT.java:492)\r\n```\r\n\r\n\r\n","closed_by":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"performed_via_github_app":null}