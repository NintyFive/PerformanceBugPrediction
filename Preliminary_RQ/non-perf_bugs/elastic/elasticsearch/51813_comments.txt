[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/581433853","html_url":"https://github.com/elastic/elasticsearch/issues/51813#issuecomment-581433853","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51813","id":581433853,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MTQzMzg1Mw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-02-03T14:14:58Z","updated_at":"2020-02-03T14:14:58Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-analytics-geo (:Analytics/Aggregations)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/589290528","html_url":"https://github.com/elastic/elasticsearch/issues/51813#issuecomment-589290528","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51813","id":589290528,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTI5MDUyOA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-02-20T20:22:39Z","updated_at":"2020-02-20T20:22:39Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-docs (>docs)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/592056966","html_url":"https://github.com/elastic/elasticsearch/issues/51813#issuecomment-592056966","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51813","id":592056966,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjA1Njk2Ng==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2020-02-27T16:40:39Z","updated_at":"2020-02-27T16:40:39Z","author_association":"CONTRIBUTOR","body":"Another question: should top_metrics preserve the type of the metrics or continue to cast them all to `double`? It *does* preserve the type of the sort, but not the metrics.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/592084226","html_url":"https://github.com/elastic/elasticsearch/issues/51813#issuecomment-592084226","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51813","id":592084226,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjA4NDIyNg==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2020-02-27T17:35:54Z","updated_at":"2020-02-27T17:35:54Z","author_association":"MEMBER","body":"Hmmmm.  That's a good question.  \r\n\r\n#### Preserve type\r\n- Most equivalent to top_hits (e.g. you want the original value from the doc), albeit it potentially a little different due to docvalues vs source\r\n\r\n#### Cast to Double\r\n- Plays nice with pipeline aggs\r\n- Consistent with rest of aggs\r\n\r\nPerhaps we could have something similar to \"_as_string\" but for the type?  `foo_as_original_type` or whatever, alongside with the value cast to a double?  Then pipeline aggs could fetch the double value, and consumers of the response could choose?\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/592103392","html_url":"https://github.com/elastic/elasticsearch/issues/51813#issuecomment-592103392","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51813","id":592103392,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjEwMzM5Mg==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2020-02-27T18:18:14Z","updated_at":"2020-02-27T18:18:14Z","author_association":"CONTRIBUTOR","body":"The pipeline agg can fetch the double either way, I think. The trick is whether we preserve the type when we accumulate them and when we render them. Without that, for example, dates will look like millis since epoch. OTOH, no other agg does this. But it *sounds* like a good thing to do.\r\n\r\nI'm happy to wait some on that too, but I figure it'd be nice to decide while we've got the experimental label.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/594917454","html_url":"https://github.com/elastic/elasticsearch/issues/51813#issuecomment-594917454","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51813","id":594917454,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDkxNzQ1NA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2020-03-04T23:03:02Z","updated_at":"2020-03-04T23:03:02Z","author_association":"CONTRIBUTOR","body":"> I'm happy to wait some on that too, but I figure it'd be nice to decide while we've got the experimental label.\r\n\r\nI talked to folks a bit and decided that, yes, I should return variables in their original type. In this case that means preserving their \"formatter\" and deciding between `double` and `long`. I don't support `keyword` fields so there is nothing to do there.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/596591544","html_url":"https://github.com/elastic/elasticsearch/issues/51813#issuecomment-596591544","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51813","id":596591544,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NjU5MTU0NA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2020-03-09T15:13:20Z","updated_at":"2020-03-09T15:13:20Z","author_association":"CONTRIBUTOR","body":"I've opened #53288 for preserving types. If we're good with that I think all that is left for this is for me to take a fresh eye to the docs.","performed_via_github_app":null}]