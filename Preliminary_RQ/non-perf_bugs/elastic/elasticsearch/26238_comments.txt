[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/322820263","html_url":"https://github.com/elastic/elasticsearch/issues/26238#issuecomment-322820263","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26238","id":322820263,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMjgyMDI2Mw==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-08-16T16:05:48Z","updated_at":"2017-08-16T16:05:48Z","author_association":"CONTRIBUTOR","body":"Is my understanding correct that the time went up after you both upgraded and switched from `_scan` to `_search`? If yes, then this is likely due to the fact that scan pulls `num_shards * size` hits per page while `_search` pulls only `size` hits per page. You should get better results by increasing your `size` parameter so that it is on par with what it used to be in practice with `_scan`. Ie. multiply it by the number of shards that you are querying.\r\n\r\nPlease reopen this issue if the recommendation does not fix the problem.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/323118204","html_url":"https://github.com/elastic/elasticsearch/issues/26238#issuecomment-323118204","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26238","id":323118204,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMzExODIwNA==","user":{"login":"GaryTurpin","id":4575785,"node_id":"MDQ6VXNlcjQ1NzU3ODU=","avatar_url":"https://avatars3.githubusercontent.com/u/4575785?v=4","gravatar_id":"","url":"https://api.github.com/users/GaryTurpin","html_url":"https://github.com/GaryTurpin","followers_url":"https://api.github.com/users/GaryTurpin/followers","following_url":"https://api.github.com/users/GaryTurpin/following{/other_user}","gists_url":"https://api.github.com/users/GaryTurpin/gists{/gist_id}","starred_url":"https://api.github.com/users/GaryTurpin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GaryTurpin/subscriptions","organizations_url":"https://api.github.com/users/GaryTurpin/orgs","repos_url":"https://api.github.com/users/GaryTurpin/repos","events_url":"https://api.github.com/users/GaryTurpin/events{/privacy}","received_events_url":"https://api.github.com/users/GaryTurpin/received_events","type":"User","site_admin":false},"created_at":"2017-08-17T16:03:52Z","updated_at":"2017-08-17T16:03:52Z","author_association":"NONE","body":"Your understanding is correct with us changing from `_scan ` to `_search ` when we upgraded to ES 5.4.  We currently have 4 shards and we had the `size` set to 50.  Last night, I changed that `size` from 50 to 1000 and didn't see a difference at all in the average time to scroll through the whole set of docs.  Do you have any other suggestions?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/323122945","html_url":"https://github.com/elastic/elasticsearch/issues/26238#issuecomment-323122945","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26238","id":323122945,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMzEyMjk0NQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-08-17T16:21:03Z","updated_at":"2017-08-17T16:21:03Z","author_association":"CONTRIBUTOR","body":"Can you share the first request that you are issuing that includes the query and sort order?\r\n\r\nIf you can get the nodes hot threads while you are paginating through matches, it might also give us information about the bottleneck.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/323152787","html_url":"https://github.com/elastic/elasticsearch/issues/26238#issuecomment-323152787","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26238","id":323152787,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMzE1Mjc4Nw==","user":{"login":"GaryTurpin","id":4575785,"node_id":"MDQ6VXNlcjQ1NzU3ODU=","avatar_url":"https://avatars3.githubusercontent.com/u/4575785?v=4","gravatar_id":"","url":"https://api.github.com/users/GaryTurpin","html_url":"https://github.com/GaryTurpin","followers_url":"https://api.github.com/users/GaryTurpin/followers","following_url":"https://api.github.com/users/GaryTurpin/following{/other_user}","gists_url":"https://api.github.com/users/GaryTurpin/gists{/gist_id}","starred_url":"https://api.github.com/users/GaryTurpin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GaryTurpin/subscriptions","organizations_url":"https://api.github.com/users/GaryTurpin/orgs","repos_url":"https://api.github.com/users/GaryTurpin/repos","events_url":"https://api.github.com/users/GaryTurpin/events{/privacy}","received_events_url":"https://api.github.com/users/GaryTurpin/received_events","type":"User","site_admin":false},"created_at":"2017-08-17T18:16:35Z","updated_at":"2017-08-17T18:16:35Z","author_association":"NONE","body":"Here it is.\r\n`/_search?scroll=2m\r\n{\"from\":0,\"size\":1000,\"sort\":[{\"_doc\":{}}],\"_source\":{\"includes\":[\"_id\",\"_score\",\"title\",\"posted\",\"provider\",\"city\",\"state\",\"zip\",\"location\",\"description.html\",\"ispremium\",\"company\",\"jobproviderid\",\"featuredstartdate\",\"featuredexpirationdate\",\"careertitleid\",\"geoarea\",\"geoareatype\",\"source\",\"trackingpixelurl\",\"employerid\",\"tagsinternal\",\"industryid\",\"urlhostname\",\"url\"]},\"query\":{\"bool\":{\"must\":[{\"term\":{\"ispremium\":{\"value\":\"true\"}}},{\"terms\":{\"jobproviderid\":[\"1\",\"2\",\"3\",\"10\",\"11\",\"12\",\"18\"]}},{\"terms\":{\"industryid\":[\"1\"]}}]}}}`","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/323169879","html_url":"https://github.com/elastic/elasticsearch/issues/26238#issuecomment-323169879","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26238","id":323169879,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMzE2OTg3OQ==","user":{"login":"GaryTurpin","id":4575785,"node_id":"MDQ6VXNlcjQ1NzU3ODU=","avatar_url":"https://avatars3.githubusercontent.com/u/4575785?v=4","gravatar_id":"","url":"https://api.github.com/users/GaryTurpin","html_url":"https://github.com/GaryTurpin","followers_url":"https://api.github.com/users/GaryTurpin/followers","following_url":"https://api.github.com/users/GaryTurpin/following{/other_user}","gists_url":"https://api.github.com/users/GaryTurpin/gists{/gist_id}","starred_url":"https://api.github.com/users/GaryTurpin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GaryTurpin/subscriptions","organizations_url":"https://api.github.com/users/GaryTurpin/orgs","repos_url":"https://api.github.com/users/GaryTurpin/repos","events_url":"https://api.github.com/users/GaryTurpin/events{/privacy}","received_events_url":"https://api.github.com/users/GaryTurpin/received_events","type":"User","site_admin":false},"created_at":"2017-08-17T19:24:22Z","updated_at":"2017-08-17T19:24:22Z","author_association":"NONE","body":"After looking at this a lot more, it looks like the `took` is roughly what I would expect.  I think the issue may be either in Nest or with the way we use Nest.  Should I create a new issue with Nest and refer them to this issue?  I think it has something with deserialization.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/323181084","html_url":"https://github.com/elastic/elasticsearch/issues/26238#issuecomment-323181084","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26238","id":323181084,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMzE4MTA4NA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2017-08-17T20:12:10Z","updated_at":"2017-08-17T20:12:10Z","author_association":"CONTRIBUTOR","body":"If the issue is on the NEST side I'd create the issue there and close this\none.\n\nOn Thu, Aug 17, 2017 at 3:24 PM GaryTurpin <notifications@github.com> wrote:\n\n> After looking at this a lot more, it looks like the took is roughly what\n> I would expect. I think the issue may be either in Nest or with the way we\n> use Nest. Should I create a new issue with Nest and refer them to this\n> issue? I think it has something with deserialization.\n>\n> —\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/elastic/elasticsearch/issues/26238#issuecomment-323169879>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AANLoiEX8xDbYgvKXy2zN02vG2KZex_Zks5sZJNsgaJpZM4O4--S>\n> .\n>\n","performed_via_github_app":null}]