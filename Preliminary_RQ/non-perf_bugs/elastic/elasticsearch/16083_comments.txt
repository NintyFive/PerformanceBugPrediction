[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/173197718","html_url":"https://github.com/elastic/elasticsearch/issues/16083#issuecomment-173197718","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16083","id":173197718,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MzE5NzcxOA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-01-20T13:05:54Z","updated_at":"2016-01-20T13:05:54Z","author_association":"CONTRIBUTOR","body":"Hi @mobidevadmin \n\nWhile we had issues with bad legacy checksums back in 1.4, the only time I've seen reports like this recently has been from real corruption.  It's always possible that some new bug has been introduced, but I think on balance that the likeliest issue is with the file system/hardware.\n\nCould I suggest migrating to a non-raided, locally mounted filesystem and see if the issue disappears?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/173210064","html_url":"https://github.com/elastic/elasticsearch/issues/16083#issuecomment-173210064","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16083","id":173210064,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MzIxMDA2NA==","user":{"login":"mobidevadmin","id":10165479,"node_id":"MDQ6VXNlcjEwMTY1NDc5","avatar_url":"https://avatars1.githubusercontent.com/u/10165479?v=4","gravatar_id":"","url":"https://api.github.com/users/mobidevadmin","html_url":"https://github.com/mobidevadmin","followers_url":"https://api.github.com/users/mobidevadmin/followers","following_url":"https://api.github.com/users/mobidevadmin/following{/other_user}","gists_url":"https://api.github.com/users/mobidevadmin/gists{/gist_id}","starred_url":"https://api.github.com/users/mobidevadmin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mobidevadmin/subscriptions","organizations_url":"https://api.github.com/users/mobidevadmin/orgs","repos_url":"https://api.github.com/users/mobidevadmin/repos","events_url":"https://api.github.com/users/mobidevadmin/events{/privacy}","received_events_url":"https://api.github.com/users/mobidevadmin/received_events","type":"User","site_admin":false},"created_at":"2016-01-20T13:50:23Z","updated_at":"2016-01-20T13:50:23Z","author_association":"NONE","body":"Hello,\n\nthanks for the response! The migration is possible (and i will most likely go this way) but I have another elasticsearch indices storage on same RAID massive, and it's totally fine, but it's version is 1.7.3. And also other files from same RAID are perfectly fine. Unlike this ELK installation which fails once a day (at night in my case).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/173221300","html_url":"https://github.com/elastic/elasticsearch/issues/16083#issuecomment-173221300","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16083","id":173221300,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MzIyMTMwMA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2016-01-20T14:31:44Z","updated_at":"2016-01-20T14:31:44Z","author_association":"CONTRIBUTOR","body":"For the record, we only added checks that checksums match on merge in 2.0, so it might be that your 1.7 data is corrupted as well but that the corruption has not surfaced yet.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/173222864","html_url":"https://github.com/elastic/elasticsearch/issues/16083#issuecomment-173222864","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16083","id":173222864,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MzIyMjg2NA==","user":{"login":"mobidevadmin","id":10165479,"node_id":"MDQ6VXNlcjEwMTY1NDc5","avatar_url":"https://avatars1.githubusercontent.com/u/10165479?v=4","gravatar_id":"","url":"https://api.github.com/users/mobidevadmin","html_url":"https://github.com/mobidevadmin","followers_url":"https://api.github.com/users/mobidevadmin/followers","following_url":"https://api.github.com/users/mobidevadmin/following{/other_user}","gists_url":"https://api.github.com/users/mobidevadmin/gists{/gist_id}","starred_url":"https://api.github.com/users/mobidevadmin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mobidevadmin/subscriptions","organizations_url":"https://api.github.com/users/mobidevadmin/orgs","repos_url":"https://api.github.com/users/mobidevadmin/repos","events_url":"https://api.github.com/users/mobidevadmin/events{/privacy}","received_events_url":"https://api.github.com/users/mobidevadmin/received_events","type":"User","site_admin":false},"created_at":"2016-01-20T14:38:19Z","updated_at":"2016-01-20T14:38:19Z","author_association":"NONE","body":"Hi @jpountz,\n\nthanks for the info. Sorry for noobie question, is there a way to check elasticsearch 1.7 for such errors manually?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/173228460","html_url":"https://github.com/elastic/elasticsearch/issues/16083#issuecomment-173228460","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16083","id":173228460,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MzIyODQ2MA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2016-01-20T14:58:24Z","updated_at":"2016-01-20T14:58:24Z","author_association":"CONTRIBUTOR","body":"I think the easier way would be to use the lucene jar that is in the lib directory of elasticsearch (lucene-core-4.x.jar) and use it to run the CheckIndex utility. The command should look something like `java -cp /usr/share/elasticsearch/lib/lucene-core-4.10.4.jar -ea:org.apache.lucene... org.apache.lucene.index.CheckIndex $datadir/nodes/0/indices/$index/$shard/index/`. Note that it is a bit tedious as it needs to be run for every shard. It might be slow as well given that this command will not only verify checksums but also make sure that the index can actually be read and that its datastructures are consistent with ach other.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/177843806","html_url":"https://github.com/elastic/elasticsearch/issues/16083#issuecomment-177843806","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16083","id":177843806,"node_id":"MDEyOklzc3VlQ29tbWVudDE3Nzg0MzgwNg==","user":{"login":"Lin-Brian","id":17001482,"node_id":"MDQ6VXNlcjE3MDAxNDgy","avatar_url":"https://avatars0.githubusercontent.com/u/17001482?v=4","gravatar_id":"","url":"https://api.github.com/users/Lin-Brian","html_url":"https://github.com/Lin-Brian","followers_url":"https://api.github.com/users/Lin-Brian/followers","following_url":"https://api.github.com/users/Lin-Brian/following{/other_user}","gists_url":"https://api.github.com/users/Lin-Brian/gists{/gist_id}","starred_url":"https://api.github.com/users/Lin-Brian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Lin-Brian/subscriptions","organizations_url":"https://api.github.com/users/Lin-Brian/orgs","repos_url":"https://api.github.com/users/Lin-Brian/repos","events_url":"https://api.github.com/users/Lin-Brian/events{/privacy}","received_events_url":"https://api.github.com/users/Lin-Brian/received_events","type":"User","site_admin":false},"created_at":"2016-02-01T08:31:49Z","updated_at":"2016-02-01T08:31:49Z","author_association":"NONE","body":"Hi  @jpountz   ,\nAfter I used CheckIndex \nWARNING: 4 broken segments (containing 16202693 documents) detected\nWARNING: would write new segments file, and 16202693 documents would be lost, if -fix were specified\nAnd -fix it\nBut my index status is also Unassigned , cant use cluster.reroute API  \n`nested: ElasticsearchIllegalArgumentException[[allocate] trying to allocate a primary shard [logstash-2015.12.12][1], which is disabled]; \",\"status\":400}`\nHow to enable the index?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/178586260","html_url":"https://github.com/elastic/elasticsearch/issues/16083#issuecomment-178586260","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16083","id":178586260,"node_id":"MDEyOklzc3VlQ29tbWVudDE3ODU4NjI2MA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-02-02T14:04:35Z","updated_at":"2016-02-02T14:04:35Z","author_association":"CONTRIBUTOR","body":"@Lin-Brian your index is corrupt.  Either reindex your documents from source or use the -fix option (and lose the corrupted documents).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/233583009","html_url":"https://github.com/elastic/elasticsearch/issues/16083#issuecomment-233583009","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16083","id":233583009,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMzU4MzAwOQ==","user":{"login":"suiyuan2009","id":5105569,"node_id":"MDQ6VXNlcjUxMDU1Njk=","avatar_url":"https://avatars0.githubusercontent.com/u/5105569?v=4","gravatar_id":"","url":"https://api.github.com/users/suiyuan2009","html_url":"https://github.com/suiyuan2009","followers_url":"https://api.github.com/users/suiyuan2009/followers","following_url":"https://api.github.com/users/suiyuan2009/following{/other_user}","gists_url":"https://api.github.com/users/suiyuan2009/gists{/gist_id}","starred_url":"https://api.github.com/users/suiyuan2009/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/suiyuan2009/subscriptions","organizations_url":"https://api.github.com/users/suiyuan2009/orgs","repos_url":"https://api.github.com/users/suiyuan2009/repos","events_url":"https://api.github.com/users/suiyuan2009/events{/privacy}","received_events_url":"https://api.github.com/users/suiyuan2009/received_events","type":"User","site_admin":false},"created_at":"2016-07-19T09:45:45Z","updated_at":"2016-07-19T09:48:32Z","author_association":"NONE","body":"I use ubuntu to run lucene(not ES), and nfs to mount disk(actually is rocketstor) of macmini. I get this error constantly. @clintongormley any advise? I have already used `org.apache.lucene.index.CheckIndex`, but will still crash after restart program. \n\n```\nException in thread \"main\" org.apache.lucene.store.AlreadyClosedException: this IndexWriter is closed\n        at org.apache.lucene.index.IndexWriter.ensureOpen(IndexWriter.java:724)\n        at org.apache.lucene.index.IndexWriter.ensureOpen(IndexWriter.java:738)\n        at org.apache.lucene.index.IndexWriter.numDocs(IndexWriter.java:1198)\n        at xxxx.xxxxx.search.XxxxxxxxIndexer.close(XxxxxxxxIndexer.java:184)\n        at xxxx.xxxxx.search.ThreadedXxxxxxxxIndexer.close(ThreadedXxxxxxxxIndexer.java:59)\n        at xxxx.xxxxx.search.ThreadedXxxxxxxxIndexer.main(ThreadedXxxxxxxxIndexer.java:136)\n\nCaused by: org.apache.lucene.index.CorruptIndexException: checksum failed (hardware problem?) : expected=51fbdb5c actual=6e964d17 (resource=BufferedChecksumIndexInput(MMapIndexInput(path=\"/mnt/HPT8_56T/xxxxxxxxx-index/index1/_mq.cfs\") [slice=_mq_Lucene50_0.pos]))\n        at org.apache.lucene.codecs.CodecUtil.checkFooter(CodecUtil.java:365)\n        at org.apache.lucene.codecs.CodecUtil.checksumEntireFile(CodecUtil.java:469)\n        at org.apache.lucene.codecs.lucene50.Lucene50PostingsReader.checkIntegrity(Lucene50PostingsReader.java:1286)\n        at org.apache.lucene.codecs.blocktree.BlockTreeTermsReader.checkIntegrity(BlockTreeTermsReader.java:336)\n        at org.apache.lucene.codecs.perfield.PerFieldPostingsFormat$FieldsReader.checkIntegrity(PerFieldPostingsFormat.java:317)\n        at org.apache.lucene.codecs.FieldsConsumer.merge(FieldsConsumer.java:96)\n        at org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:211)\n        at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:96)\n        at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4099)\n        at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3679)\n        at org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMergeScheduler.java:588)\n        at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:626)\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/233591575","html_url":"https://github.com/elastic/elasticsearch/issues/16083#issuecomment-233591575","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16083","id":233591575,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMzU5MTU3NQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-07-19T10:23:57Z","updated_at":"2016-07-19T10:23:57Z","author_association":"CONTRIBUTOR","body":"@suiyuan2009 Please ask questions like these in the forum instead: https://discuss.elastic.co/\n\nThe github issues list is reserved for bug reports and feature requests only.\n\nthanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/233592348","html_url":"https://github.com/elastic/elasticsearch/issues/16083#issuecomment-233592348","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16083","id":233592348,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMzU5MjM0OA==","user":{"login":"suiyuan2009","id":5105569,"node_id":"MDQ6VXNlcjUxMDU1Njk=","avatar_url":"https://avatars0.githubusercontent.com/u/5105569?v=4","gravatar_id":"","url":"https://api.github.com/users/suiyuan2009","html_url":"https://github.com/suiyuan2009","followers_url":"https://api.github.com/users/suiyuan2009/followers","following_url":"https://api.github.com/users/suiyuan2009/following{/other_user}","gists_url":"https://api.github.com/users/suiyuan2009/gists{/gist_id}","starred_url":"https://api.github.com/users/suiyuan2009/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/suiyuan2009/subscriptions","organizations_url":"https://api.github.com/users/suiyuan2009/orgs","repos_url":"https://api.github.com/users/suiyuan2009/repos","events_url":"https://api.github.com/users/suiyuan2009/events{/privacy}","received_events_url":"https://api.github.com/users/suiyuan2009/received_events","type":"User","site_admin":false},"created_at":"2016-07-19T10:27:39Z","updated_at":"2016-07-19T10:27:39Z","author_association":"NONE","body":"@clintongormley thanks, I will move to the forum\n","performed_via_github_app":null}]