{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/51931","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51931/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51931/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51931/events","html_url":"https://github.com/elastic/elasticsearch/issues/51931","id":560308053,"node_id":"MDU6SXNzdWU1NjAzMDgwNTM=","number":51931,"title":"[TEST] reference/mapping/types/date_nanos failing","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"labels":[{"id":146834791,"node_id":"MDU6TGFiZWwxNDY4MzQ3OTE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Scripting","name":":Core/Infra/Scripting","color":"0e8a16","default":false,"description":"Scripting abstractions, Painless, and Mustache"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-02-05T11:23:48Z","updated_at":"2020-02-12T23:54:40Z","closed_at":"2020-02-12T23:54:40Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Build scan (7.6): https://gradle-enterprise.elastic.co/s/f3d6mbfyo554w/tests/jbm2x6tnwtxku-ydwigczazxxf6\r\n\r\n```\r\nREPRODUCE WITH: ./gradlew ':docs:integTestRunner' --tests \"org.elasticsearch.smoketest.DocsClientYamlTestSuiteIT.test {yaml=reference/mapping/types/date_nanos/line_32}\" -Dtests.seed=50B1899A04B6F25D -Dtests.security.manager=true -Dtests.locale=en-AU -Dtests.timezone=PNT -Dcompiler.java=13\r\n```\r\n\r\n```\r\njava.lang.AssertionError: Failure at [reference/mapping/types/date_nanos:58]: expected [2xx] status code but api [raw[method=GET path=my_index/_search]] returned [400 Bad Request] [{\"error\":{\"root_cause\":[{\"type\":\"script_exception\",\"reason\":\"runtime error\",\"script_stack\":[\"doc['date'].date.nanos\",\"           ^---- HERE\"],\"script\":\"doc['date'].date.nanos\",\"lang\":\"painless\",\"stack_trace\":\"ScriptException[runtime error]; nested: IllegalArgumentException[Illegal list shortcut value [date].];\\n\\tat org.elasticsearch.painless.PainlessScript.convertToScriptException(PainlessScript.java:94)\\n\\tat org.elasticsearch.painless.PainlessScript$Script.execute(doc['date'].date.nanos:17)\\n\\tat org.elasticsearch.search.fetch.subphase.ScriptFieldsFetchSubPhase.hitsExecute(ScriptFieldsFetchSubPhase.java:67)\\n\\tat org.elasticsearch.search.fetch.FetchPhase.execute(FetchPhase.java:178)\\n\\tat org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:387)\\n\\tat org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:367)\\n\\tat org.elasticsearch.search.SearchService.lambda$executeQueryPhase$1(SearchService.java:343)\\n\\tat org.elasticsearch.action.ActionListener.lambda$map$2(ActionListener.java:146)\\n\\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:63)\\n\\tat org.elasticsearch.action.ActionRunnable.lambda$supply$0(ActionRunnable.java:58)\\n\\tat org.elasticsearch.action.ActionRunnable$2.doRun(ActionRunnable.java:73)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:44)\\n\\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:692)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\\n\\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\\n\\tat java.lang.Thread.run(Thread.java:748)\\nCaused by: java.lang.IllegalArgumentException: Illegal list shortcut value [date].\\n\\tat org.elasticsearch.painless.Def.lookupGetter(Def.java:392)\\n\\tat org.elasticsearch.painless.DefBootstrap$PIC.lookup(DefBootstrap.java:153)\\n\\tat org.elasticsearch.painless.DefBootstrap$PIC.fallback(DefBootstrap.java:207)\\n\\tat org.elasticsearch.painless.PainlessScript$Script.execute(doc['date'].date.nanos:12)\\n\\t... 16 more\\n\"}],\"type\":\"search_phase_execution_exception\",\"reason\":\"all shards failed\",\"phase\":\"query\",\"grouped\":true,\"failed_shards\":[{\"shard\":0,\"index\":\"my_index\",\"node\":\"hf4_iqIZQiuWYkrd_VbwRg\",\"reason\":{\"type\":\"script_exception\",\"reason\":\"runtime error\",\"script_stack\":[\"doc['date'].date.nanos\",\"           ^---- HERE\"],\"script\":\"doc['date'].date.nanos\",\"lang\":\"painless\",\"caused_by\":{\"type\":\"illegal_argument_exception\",\"reason\":\"Illegal list shortcut value [date].\",\"stack_trace\":\"java.lang.IllegalArgumentException: Illegal list shortcut value [date].\\n\\tat org.elasticsearch.painless.Def.lookupGetter(Def.java:392)\\n\\tat org.elasticsearch.painless.DefBootstrap$PIC.lookup(DefBootstrap.java:153)\\n\\tat org.elasticsearch.painless.DefBootstrap$PIC.fallback(DefBootstrap.java:207)\\n\\tat org.elasticsearch.painless.PainlessScript$Script.execute(doc['date'].date.nanos:12)\\n\\tat org.elasticsearch.search.fetch.subphase.ScriptFieldsFetchSubPhase.hitsExecute(ScriptFieldsFetchSubPhase.java:67)\\n\\tat org.elasticsearch.search.fetch.FetchPhase.execute(FetchPhase.java:178)\\n\\tat org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:387)\\n\\tat org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:367)\\n\\tat org.elasticsearch.search.SearchService.lambda$executeQueryPhase$1(SearchService.java:343)\\n\\tat org.elasticsearch.action.ActionListener.lambda$map$2(ActionListener.java:146)\\n\\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:63)\\n\\tat org.elasticsearch.action.ActionRunnable.lambda$supply$0(ActionRunnable.java:58)\\n\\tat org.elasticsearch.action.ActionRunnable$2.doRun(ActionRunnable.java:73)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:44)\\n\\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:692)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\\n\\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\\n\\tat java.lang.Thread.run(Thread.java:748)\\n\"},\"stack_trace\":\"ScriptException[runtime error]; nested: IllegalArgumentException[Illegal list shortcut value [date].];\\n\\tat org.elasticsearch.painless.PainlessScript.convertToScriptException(PainlessScript.java:94)\\n\\tat org.elasticsearch.painless.PainlessScript$Script.execute(doc['date'].date.nanos:17)\\n\\tat org.elasticsearch.search.fetch.subphase.ScriptFieldsFetchSubPhase.hitsExecute(ScriptFieldsFetchSubPhase.java:67)\\n\\tat org.elasticsearch.search.fetch.FetchPhase.execute(FetchPhase.java:178)\\n\\tat org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:387)\\n\\tat org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:367)\\n\\tat org.elasticsearch.search.SearchService.lambda$executeQueryPhase$1(SearchService.java:343)\\n\\tat org.elasticsearch.action.ActionListener.lambda$map$2(ActionListener.java:146)\\n\\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:63)\\n\\tat org.elasticsearch.action.ActionRunnable.lambda$supply$0(ActionRunnable.java:58)\\n\\tat org.elasticsearch.action.ActionRunnable$2.doRun(ActionRunnable.java:73)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:44)\\n\\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:692)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\\n\\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\\n\\tat java.lang.Thread.run(Thread.java:748)\\nCaused by: java.lang.IllegalArgumentException: Illegal list shortcut value [date].\\n\\tat org.elasticsearch.painless.Def.lookupGetter(Def.java:392)\\n\\tat org.elasticsearch.painless.DefBootstrap$PIC.lookup(DefBootstrap.java:153)\\n\\tat org.elasticsearch.painless.DefBootstrap$PIC.fallback(DefBootstrap.java:207)\\n\\tat org.elasticsearch.painless.PainlessScript$Script.execute(doc['date'].date.nanos:12)\\n\\t... 16 more\\n\"}}],\"stack_trace\":\"Failed to execute phase [query], all shards failed; shardFailures {[hf4_iqIZQiuWYkrd_VbwRg][my_index][0]: RemoteTransportException[[node-0][127.0.0.1:46007][indices:data/read/search[phase/query]]]; nested: ScriptException[runtime error]; nested: IllegalArgumentException[Illegal list shortcut value [date].]; }\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseFailure(AbstractSearchAsyncAction.java:545)\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:306)\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseDone(AbstractSearchAsyncAction.java:574)\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.onShardFailure(AbstractSearchAsyncAction.java:386)\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.access$200(AbstractSearchAsyncAction.java:66)\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction$1.onFailure(AbstractSearchAsyncAction.java:242)\\n\\tat org.elasticsearch.action.search.SearchExecutionStatsCollector.onFailure(SearchExecutionStatsCollector.java:73)\\n\\tat org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:59)\\n\\tat org.elasticsearch.action.search.SearchTransportService$ConnectionCountingHandler.handleException(SearchTransportService.java:423)\\n\\tat org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1118)\\n\\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.processException(TransportService.java:1227)\\n\\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:1201)\\n\\tat org.elasticsearch.transport.TaskTransportChannel.sendResponse(TaskTransportChannel.java:60)\\n\\tat org.elasticsearch.action.support.ChannelActionListener.onFailure(ChannelActionListener.java:56)\\n\\tat org.elasticsearch.action.ActionListener$1.onFailure(ActionListener.java:71)\\n\\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:65)\\n\\tat org.elasticsearch.action.ActionRunnable.lambda$supply$0(ActionRunnable.java:58)\\n\\tat org.elasticsearch.action.ActionRunnable$2.doRun(ActionRunnable.java:73)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:44)\\n\\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:692)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\\n\\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\\n\\tat java.lang.Thread.run(Thread.java:748)\\nCaused by: ScriptException[runtime error]; nested: IllegalArgumentException[Illegal list shortcut value [date].];\\n\\tat org.elasticsearch.painless.PainlessScript.convertToScriptException(PainlessScript.java:94)\\n\\tat org.elasticsearch.painless.PainlessScript$Script.execute(doc['date'].date.nanos:17)\\n\\tat org.elasticsearch.search.fetch.subphase.ScriptFieldsFetchSubPhase.hitsExecute(ScriptFieldsFetchSubPhase.java:67)\\n\\tat org.elasticsearch.search.fetch.FetchPhase.execute(FetchPhase.java:178)\\n\\tat org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:387)\\n\\tat org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:367)\\n\\tat org.elasticsearch.search.SearchService.lambda$executeQueryPhase$1(SearchService.java:343)\\n\\tat org.elasticsearch.action.ActionListener.lambda$map$2(ActionListener.java:146)\\n\\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:63)\\n\\t... 9 more\\nCaused by: java.lang.IllegalArgumentException: Illegal list shortcut value [date].\\n\\tat org.elasticsearch.painless.Def.lookupGetter(Def.java:392)\\n\\tat org.elasticsearch.painless.DefBootstrap$PIC.lookup(DefBootstrap.java:153)\\n\\tat org.elasticsearch.painless.DefBootstrap$PIC.fallback(DefBootstrap.java:207)\\n\\tat org.elasticsearch.painless.PainlessScript$Script.execute(doc['date'].date.nanos:12)\\n\\t... 16 more\\n\"},\"status\":400}]\r\n\r\n\r\n[2020-02-05T03:41:11,784][INFO ][o.e.s.DocsClientYamlTestSuiteIT] [test] Stash dump on test failure [{\r\n  \"stash\" : {\r\n    \"body\" : {\r\n      \"error\" : {\r\n        \"root_cause\" : [\r\n          {\r\n            \"type\" : \"script_exception\",\r\n            \"reason\" : \"runtime error\",\r\n            \"script_stack\" : [\r\n              \"doc['date'].date.nanos\",\r\n              \"           ^---- HERE\"\r\n            ],\r\n            \"script\" : \"doc['date'].date.nanos\",\r\n            \"lang\" : \"painless\",\r\n            \"stack_trace\" : \"ScriptException[runtime error]; nested: IllegalArgumentException[Illegal list shortcut value [date].];\r\n\tat org.elasticsearch.painless.PainlessScript.convertToScriptException(PainlessScript.java:94)\r\n\tat org.elasticsearch.painless.PainlessScript$Script.execute(doc['date'].date.nanos:17)\r\n\tat org.elasticsearch.search.fetch.subphase.ScriptFieldsFetchSubPhase.hitsExecute(ScriptFieldsFetchSubPhase.java:67)\r\n\tat org.elasticsearch.search.fetch.FetchPhase.execute(FetchPhase.java:178)\r\n\tat org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:387)\r\n\tat org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:367)\r\n\tat org.elasticsearch.search.SearchService.lambda$executeQueryPhase$1(SearchService.java:343)\r\n\tat org.elasticsearch.action.ActionListener.lambda$map$2(ActionListener.java:146)\r\n\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:63)\r\n\tat org.elasticsearch.action.ActionRunnable.lambda$supply$0(ActionRunnable.java:58)\r\n\tat org.elasticsearch.action.ActionRunnable$2.doRun(ActionRunnable.java:73)\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\n\tat org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:44)\r\n\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:692)\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: java.lang.IllegalArgumentException: Illegal list shortcut value [date].\r\n\tat org.elasticsearch.painless.Def.lookupGetter(Def.java:392)\r\n\tat org.elasticsearch.painless.DefBootstrap$PIC.lookup(DefBootstrap.java:153)\r\n\tat org.elasticsearch.painless.DefBootstrap$PIC.fallback(DefBootstrap.java:207)\r\n\tat org.elasticsearch.painless.PainlessScript$Script.execute(doc['date'].date.nanos:12)\r\n\t... 16 more\r\n\"\r\n          }\r\n        ],\r\n        \"type\" : \"search_phase_execution_exception\",\r\n        \"reason\" : \"all shards failed\",\r\n        \"phase\" : \"query\",\r\n        \"grouped\" : true,\r\n        \"failed_shards\" : [\r\n          {\r\n            \"shard\" : 0,\r\n            \"index\" : \"my_index\",\r\n            \"node\" : \"hf4_iqIZQiuWYkrd_VbwRg\",\r\n            \"reason\" : {\r\n              \"type\" : \"script_exception\",\r\n              \"reason\" : \"runtime error\",\r\n              \"script_stack\" : [\r\n                \"doc['date'].date.nanos\",\r\n                \"           ^---- HERE\"\r\n              ],\r\n              \"script\" : \"doc['date'].date.nanos\",\r\n              \"lang\" : \"painless\",\r\n              \"caused_by\" : {\r\n                \"type\" : \"illegal_argument_exception\",\r\n                \"reason\" : \"Illegal list shortcut value [date].\",\r\n                \"stack_trace\" : \"java.lang.IllegalArgumentException: Illegal list shortcut value [date].\r\n\tat org.elasticsearch.painless.Def.lookupGetter(Def.java:392)\r\n\tat org.elasticsearch.painless.DefBootstrap$PIC.lookup(DefBootstrap.java:153)\r\n\tat org.elasticsearch.painless.DefBootstrap$PIC.fallback(DefBootstrap.java:207)\r\n\tat org.elasticsearch.painless.PainlessScript$Script.execute(doc['date'].date.nanos:12)\r\n\tat org.elasticsearch.search.fetch.subphase.ScriptFieldsFetchSubPhase.hitsExecute(ScriptFieldsFetchSubPhase.java:67)\r\n\tat org.elasticsearch.search.fetch.FetchPhase.execute(FetchPhase.java:178)\r\n\tat org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:387)\r\n\tat org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:367)\r\n\tat org.elasticsearch.search.SearchService.lambda$executeQueryPhase$1(SearchService.java:343)\r\n\tat org.elasticsearch.action.ActionListener.lambda$map$2(ActionListener.java:146)\r\n\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:63)\r\n\tat org.elasticsearch.action.ActionRunnable.lambda$supply$0(ActionRunnable.java:58)\r\n\tat org.elasticsearch.action.ActionRunnable$2.doRun(ActionRunnable.java:73)\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\n\tat org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:44)\r\n\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:692)\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\"\r\n              },\r\n              \"stack_trace\" : \"ScriptException[runtime error]; nested: IllegalArgumentException[Illegal list shortcut value [date].];\r\n\tat org.elasticsearch.painless.PainlessScript.convertToScriptException(PainlessScript.java:94)\r\n\tat org.elasticsearch.painless.PainlessScript$Script.execute(doc['date'].date.nanos:17)\r\n\tat org.elasticsearch.search.fetch.subphase.ScriptFieldsFetchSubPhase.hitsExecute(ScriptFieldsFetchSubPhase.java:67)\r\n\tat org.elasticsearch.search.fetch.FetchPhase.execute(FetchPhase.java:178)\r\n\tat org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:387)\r\n\tat org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:367)\r\n\tat org.elasticsearch.search.SearchService.lambda$executeQueryPhase$1(SearchService.java:343)\r\n\tat org.elasticsearch.action.ActionListener.lambda$map$2(ActionListener.java:146)\r\n\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:63)\r\n\tat org.elasticsearch.action.ActionRunnable.lambda$supply$0(ActionRunnable.java:58)\r\n\tat org.elasticsearch.action.ActionRunnable$2.doRun(ActionRunnable.java:73)\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\n\tat org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:44)\r\n\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:692)\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: java.lang.IllegalArgumentException: Illegal list shortcut value [date].\r\n\tat org.elasticsearch.painless.Def.lookupGetter(Def.java:392)\r\n\tat org.elasticsearch.painless.DefBootstrap$PIC.lookup(DefBootstrap.java:153)\r\n\tat org.elasticsearch.painless.DefBootstrap$PIC.fallback(DefBootstrap.java:207)\r\n\tat org.elasticsearch.painless.PainlessScript$Script.execute(doc['date'].date.nanos:12)\r\n\t... 16 more\r\n\"\r\n            }\r\n          }\r\n        ],\r\n        \"stack_trace\" : \"Failed to execute phase [query], all shards failed; shardFailures {[hf4_iqIZQiuWYkrd_VbwRg][my_index][0]: RemoteTransportException[[node-0][127.0.0.1:46007][indices:data/read/search[phase/query]]]; nested: ScriptException[runtime error]; nested: IllegalArgumentException[Illegal list shortcut value [date].]; }\r\n\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseFailure(AbstractSearchAsyncAction.java:545)\r\n\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:306)\r\n\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseDone(AbstractSearchAsyncAction.java:574)\r\n\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.onShardFailure(AbstractSearchAsyncAction.java:386)\r\n\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.access$200(AbstractSearchAsyncAction.java:66)\r\n\tat org.elasticsearch.action.search.AbstractSearchAsyncAction$1.onFailure(AbstractSearchAsyncAction.java:242)\r\n\tat org.elasticsearch.action.search.SearchExecutionStatsCollector.onFailure(SearchExecutionStatsCollector.java:73)\r\n\tat org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:59)\r\n\tat org.elasticsearch.action.search.SearchTransportService$ConnectionCountingHandler.handleException(SearchTransportService.java:423)\r\n\tat org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1118)\r\n\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.processException(TransportService.java:1227)\r\n\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:1201)\r\n\tat org.elasticsearch.transport.TaskTransportChannel.sendResponse(TaskTransportChannel.java:60)\r\n\tat org.elasticsearch.action.support.ChannelActionListener.onFailure(ChannelActionListener.java:56)\r\n\tat org.elasticsearch.action.ActionListener$1.onFailure(ActionListener.java:71)\r\n\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:65)\r\n\tat org.elasticsearch.action.ActionRunnable.lambda$supply$0(ActionRunnable.java:58)\r\n\tat org.elasticsearch.action.ActionRunnable$2.doRun(ActionRunnable.java:73)\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\n\tat org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:44)\r\n\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:692)\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: ScriptException[runtime error]; nested: IllegalArgumentException[Illegal list shortcut value [date].];\r\n\tat org.elasticsearch.painless.PainlessScript.convertToScriptException(PainlessScript.java:94)\r\n\tat org.elasticsearch.painless.PainlessScript$Script.execute(doc['date'].date.nanos:17)\r\n\tat org.elasticsearch.search.fetch.subphase.ScriptFieldsFetchSubPhase.hitsExecute(ScriptFieldsFetchSubPhase.java:67)\r\n\tat org.elasticsearch.search.fetch.FetchPhase.execute(FetchPhase.java:178)\r\n\tat org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:387)\r\n\tat org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:367)\r\n\tat org.elasticsearch.search.SearchService.lambda$executeQueryPhase$1(SearchService.java:343)\r\n\tat org.elasticsearch.action.ActionListener.lambda$map$2(ActionListener.java:146)\r\n\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:63)\r\n\t... 9 more\r\nCaused by: java.lang.IllegalArgumentException: Illegal list shortcut value [date].\r\n\tat org.elasticsearch.painless.Def.lookupGetter(Def.java:392)\r\n\tat org.elasticsearch.painless.DefBootstrap$PIC.lookup(DefBootstrap.java:153)\r\n\tat org.elasticsearch.painless.DefBootstrap$PIC.fallback(DefBootstrap.java:207)\r\n\tat org.elasticsearch.painless.PainlessScript$Script.execute(doc['date'].date.nanos:12)\r\n\t... 16 more\r\n\"\r\n      },\r\n      \"status\" : 400\r\n    }\r\n  }\r\n}]\r\n```","closed_by":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"performed_via_github_app":null}