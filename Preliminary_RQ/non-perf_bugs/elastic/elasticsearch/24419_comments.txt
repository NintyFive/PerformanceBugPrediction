[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/298558721","html_url":"https://github.com/elastic/elasticsearch/issues/24419#issuecomment-298558721","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24419","id":298558721,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODU1ODcyMQ==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2017-05-02T08:43:01Z","updated_at":"2017-05-02T08:43:01Z","author_association":"MEMBER","body":"Thanks @dmarkhas !\r\nTemplate validation is difficult to achieve with the current model but we're working on an improvement that should allow more validations when the template is created:\r\nhttps://github.com/elastic/elasticsearch/issues/21105","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/298958462","html_url":"https://github.com/elastic/elasticsearch/issues/24419#issuecomment-298958462","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24419","id":298958462,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODk1ODQ2Mg==","user":{"login":"dmarkhas","id":16191105,"node_id":"MDQ6VXNlcjE2MTkxMTA1","avatar_url":"https://avatars3.githubusercontent.com/u/16191105?v=4","gravatar_id":"","url":"https://api.github.com/users/dmarkhas","html_url":"https://github.com/dmarkhas","followers_url":"https://api.github.com/users/dmarkhas/followers","following_url":"https://api.github.com/users/dmarkhas/following{/other_user}","gists_url":"https://api.github.com/users/dmarkhas/gists{/gist_id}","starred_url":"https://api.github.com/users/dmarkhas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmarkhas/subscriptions","organizations_url":"https://api.github.com/users/dmarkhas/orgs","repos_url":"https://api.github.com/users/dmarkhas/repos","events_url":"https://api.github.com/users/dmarkhas/events{/privacy}","received_events_url":"https://api.github.com/users/dmarkhas/received_events","type":"User","site_admin":false},"created_at":"2017-05-03T16:09:23Z","updated_at":"2017-05-03T16:09:23Z","author_association":"NONE","body":"@jimczi I wasn't aware of the other open issue, but just to clarify the issue here is not related to the validity of the logic of a given template in the context of all other templates that exist, but the fact that it actually accepts invalid values (even invalid types) for some of the fields - a field that should be a string accepts a boolean value, which has no meaning....","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/298975737","html_url":"https://github.com/elastic/elasticsearch/issues/24419#issuecomment-298975737","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24419","id":298975737,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODk3NTczNw==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2017-05-03T17:13:56Z","updated_at":"2017-05-03T17:13:56Z","author_association":"MEMBER","body":"Oh right @dmarkhas, I think this is due to a BWC layer that was added to set the type to `keyword` automatically when `not_analyzed` is set. Though it seems that this option is not removed from the final mapping. @jpountz can you take a look ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/299122975","html_url":"https://github.com/elastic/elasticsearch/issues/24419#issuecomment-299122975","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24419","id":299122975,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTEyMjk3NQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-05-04T08:16:55Z","updated_at":"2017-05-04T08:16:55Z","author_association":"CONTRIBUTOR","body":"Yeah this is a known issue unfortunately, there is a similar bug reported at #17411. I agree we should fix it. The thing that makes validation hard is that in some cases the type of the field is not known until a document is parsed. However in your case, you specify the `match_mapping_type` explicitly, so even if that does not fix the issue entirely, we should probably try to at least validate mappings when an explicit `match_mapping_type` is supplied.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/299126084","html_url":"https://github.com/elastic/elasticsearch/issues/24419#issuecomment-299126084","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24419","id":299126084,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTEyNjA4NA==","user":{"login":"dmarkhas","id":16191105,"node_id":"MDQ6VXNlcjE2MTkxMTA1","avatar_url":"https://avatars3.githubusercontent.com/u/16191105?v=4","gravatar_id":"","url":"https://api.github.com/users/dmarkhas","html_url":"https://github.com/dmarkhas","followers_url":"https://api.github.com/users/dmarkhas/followers","following_url":"https://api.github.com/users/dmarkhas/following{/other_user}","gists_url":"https://api.github.com/users/dmarkhas/gists{/gist_id}","starred_url":"https://api.github.com/users/dmarkhas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmarkhas/subscriptions","organizations_url":"https://api.github.com/users/dmarkhas/orgs","repos_url":"https://api.github.com/users/dmarkhas/repos","events_url":"https://api.github.com/users/dmarkhas/events{/privacy}","received_events_url":"https://api.github.com/users/dmarkhas/received_events","type":"User","site_admin":false},"created_at":"2017-05-04T08:33:23Z","updated_at":"2017-05-04T08:33:23Z","author_association":"NONE","body":"Thanks @jpountz.\r\nI believe the index property can only accept a finite set of values (\"no\",\"not_analyzed\" and \"analyzed\"), so the basic validation that the supplied value is indeed part of that set should be quite simple, no? (forgive me if I'm missing something obvious :) )","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/299127077","html_url":"https://github.com/elastic/elasticsearch/issues/24419#issuecomment-299127077","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24419","id":299127077,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTEyNzA3Nw==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-05-04T08:38:36Z","updated_at":"2017-05-04T08:38:36Z","author_association":"CONTRIBUTOR","body":"@dmarkhas This is correct (actually it is even simpler in 5.x as the only options are true/false) for fields that support the `index` property, but eg. `object` does not support it.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/348305867","html_url":"https://github.com/elastic/elasticsearch/issues/24419#issuecomment-348305867","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24419","id":348305867,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODMwNTg2Nw==","user":{"login":"PhaedrusTheGreek","id":4387023,"node_id":"MDQ6VXNlcjQzODcwMjM=","avatar_url":"https://avatars0.githubusercontent.com/u/4387023?v=4","gravatar_id":"","url":"https://api.github.com/users/PhaedrusTheGreek","html_url":"https://github.com/PhaedrusTheGreek","followers_url":"https://api.github.com/users/PhaedrusTheGreek/followers","following_url":"https://api.github.com/users/PhaedrusTheGreek/following{/other_user}","gists_url":"https://api.github.com/users/PhaedrusTheGreek/gists{/gist_id}","starred_url":"https://api.github.com/users/PhaedrusTheGreek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PhaedrusTheGreek/subscriptions","organizations_url":"https://api.github.com/users/PhaedrusTheGreek/orgs","repos_url":"https://api.github.com/users/PhaedrusTheGreek/repos","events_url":"https://api.github.com/users/PhaedrusTheGreek/events{/privacy}","received_events_url":"https://api.github.com/users/PhaedrusTheGreek/received_events","type":"User","site_admin":false},"created_at":"2017-11-30T20:08:07Z","updated_at":"2017-11-30T20:08:07Z","author_association":"CONTRIBUTOR","body":"6.0 error for reference\r\n\r\n```\r\n{\r\n  \"error\": {\r\n    \"root_cause\": [\r\n      {\r\n        \"type\": \"mapper_parsing_exception\",\r\n        \"reason\": \"failed to parse\"\r\n      }\r\n    ],\r\n    \"type\": \"mapper_parsing_exception\",\r\n    \"reason\": \"failed to parse\",\r\n    \"caused_by\": {\r\n      \"type\": \"illegal_argument_exception\",\r\n      \"reason\": \"Could not convert [<FIELD>.index] to boolean\",\r\n      \"caused_by\": {\r\n        \"type\": \"illegal_argument_exception\",\r\n        \"reason\": \"Failed to parse value [analyzed] as only [true] or [false] are allowed.\"\r\n      }\r\n    }\r\n  },\r\n  \"status\": 400\r\n}\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/348699756","html_url":"https://github.com/elastic/elasticsearch/issues/24419#issuecomment-348699756","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24419","id":348699756,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODY5OTc1Ng==","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2017-12-02T15:37:10Z","updated_at":"2017-12-02T15:37:10Z","author_association":"MEMBER","body":"another issue is, that when upgrading to 6.0, you might accidentally have an old template lying around that then breaks future indexing\r\n\r\n```\r\nPUT _template/foo\r\n{\r\n  \"index_patterns\": [\r\n    \"foo*\"\r\n  ],\r\n  \"mappings\": {\r\n    \"bar\": {\r\n      \"dynamic_templates\": [\r\n        {\r\n          \"notanalyzed\": {\r\n            \"match_mapping_type\": \"string\",\r\n            \"mapping\": {\r\n              \"index\": \"not_analyzed\",\r\n              \"type\": \"string\"\r\n            },\r\n            \"match\": \"*\"\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}\r\n\r\nPUT foo/bar/1\r\n{\r\n  \"bar\" : \"anystring\"\r\n}\r\n```\r\n\r\nreturns\r\n\r\n```\r\n{\r\n  \"error\": {\r\n    \"root_cause\": [\r\n      {\r\n        \"type\": \"mapper_parsing_exception\",\r\n        \"reason\": \"failed to find type parsed [string] for [bar]\"\r\n      }\r\n    ],\r\n    \"type\": \"mapper_parsing_exception\",\r\n    \"reason\": \"failed to find type parsed [string] for [bar]\"\r\n  },\r\n  \"status\": 400\r\n}\r\n```\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/363110637","html_url":"https://github.com/elastic/elasticsearch/issues/24419#issuecomment-363110637","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24419","id":363110637,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzExMDYzNw==","user":{"login":"T3rm1","id":5060247,"node_id":"MDQ6VXNlcjUwNjAyNDc=","avatar_url":"https://avatars0.githubusercontent.com/u/5060247?v=4","gravatar_id":"","url":"https://api.github.com/users/T3rm1","html_url":"https://github.com/T3rm1","followers_url":"https://api.github.com/users/T3rm1/followers","following_url":"https://api.github.com/users/T3rm1/following{/other_user}","gists_url":"https://api.github.com/users/T3rm1/gists{/gist_id}","starred_url":"https://api.github.com/users/T3rm1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/T3rm1/subscriptions","organizations_url":"https://api.github.com/users/T3rm1/orgs","repos_url":"https://api.github.com/users/T3rm1/repos","events_url":"https://api.github.com/users/T3rm1/events{/privacy}","received_events_url":"https://api.github.com/users/T3rm1/received_events","type":"User","site_admin":false},"created_at":"2018-02-05T15:03:04Z","updated_at":"2018-02-05T15:03:53Z","author_association":"NONE","body":"So nobody decided to fix this severe problem (the one spinscale is refering to) before 6.0? For real? This is exactly what is causing hundreds of problems for me now. This should have been a blocker for the release.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/370776300","html_url":"https://github.com/elastic/elasticsearch/issues/24419#issuecomment-370776300","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24419","id":370776300,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MDc3NjMwMA==","user":{"login":"yjhjeys","id":9923544,"node_id":"MDQ6VXNlcjk5MjM1NDQ=","avatar_url":"https://avatars0.githubusercontent.com/u/9923544?v=4","gravatar_id":"","url":"https://api.github.com/users/yjhjeys","html_url":"https://github.com/yjhjeys","followers_url":"https://api.github.com/users/yjhjeys/followers","following_url":"https://api.github.com/users/yjhjeys/following{/other_user}","gists_url":"https://api.github.com/users/yjhjeys/gists{/gist_id}","starred_url":"https://api.github.com/users/yjhjeys/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yjhjeys/subscriptions","organizations_url":"https://api.github.com/users/yjhjeys/orgs","repos_url":"https://api.github.com/users/yjhjeys/repos","events_url":"https://api.github.com/users/yjhjeys/events{/privacy}","received_events_url":"https://api.github.com/users/yjhjeys/received_events","type":"User","site_admin":false},"created_at":"2018-03-06T13:10:52Z","updated_at":"2018-03-06T13:11:20Z","author_association":"NONE","body":"Have you solved this problem?\r\nI have same problem","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/372216235","html_url":"https://github.com/elastic/elasticsearch/issues/24419#issuecomment-372216235","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24419","id":372216235,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MjIxNjIzNQ==","user":{"login":"ReddySrini","id":12495243,"node_id":"MDQ6VXNlcjEyNDk1MjQz","avatar_url":"https://avatars0.githubusercontent.com/u/12495243?v=4","gravatar_id":"","url":"https://api.github.com/users/ReddySrini","html_url":"https://github.com/ReddySrini","followers_url":"https://api.github.com/users/ReddySrini/followers","following_url":"https://api.github.com/users/ReddySrini/following{/other_user}","gists_url":"https://api.github.com/users/ReddySrini/gists{/gist_id}","starred_url":"https://api.github.com/users/ReddySrini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ReddySrini/subscriptions","organizations_url":"https://api.github.com/users/ReddySrini/orgs","repos_url":"https://api.github.com/users/ReddySrini/repos","events_url":"https://api.github.com/users/ReddySrini/events{/privacy}","received_events_url":"https://api.github.com/users/ReddySrini/received_events","type":"User","site_admin":false},"created_at":"2018-03-12T07:31:49Z","updated_at":"2018-03-12T07:31:49Z","author_association":"NONE","body":"Yes even I am facining similar issues with ElasticSearch6.2! ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/435013017","html_url":"https://github.com/elastic/elasticsearch/issues/24419#issuecomment-435013017","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24419","id":435013017,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNTAxMzAxNw==","user":{"login":"nktl","id":17342015,"node_id":"MDQ6VXNlcjE3MzQyMDE1","avatar_url":"https://avatars3.githubusercontent.com/u/17342015?v=4","gravatar_id":"","url":"https://api.github.com/users/nktl","html_url":"https://github.com/nktl","followers_url":"https://api.github.com/users/nktl/followers","following_url":"https://api.github.com/users/nktl/following{/other_user}","gists_url":"https://api.github.com/users/nktl/gists{/gist_id}","starred_url":"https://api.github.com/users/nktl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nktl/subscriptions","organizations_url":"https://api.github.com/users/nktl/orgs","repos_url":"https://api.github.com/users/nktl/repos","events_url":"https://api.github.com/users/nktl/events{/privacy}","received_events_url":"https://api.github.com/users/nktl/received_events","type":"User","site_admin":false},"created_at":"2018-11-01T11:31:05Z","updated_at":"2018-11-01T11:35:29Z","author_association":"NONE","body":"Same issue on Elastic 6.4.....\r\n\r\nRestoring index with dynamic mappings from a snapshot taken by ES 5.x results in a mess where index  mappings contain references to 'invalid 'string' type, preventing any further indexing from working...","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/575653725","html_url":"https://github.com/elastic/elasticsearch/issues/24419#issuecomment-575653725","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24419","id":575653725,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NTY1MzcyNQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2020-01-17T14:43:19Z","updated_at":"2020-01-17T14:43:19Z","author_association":"MEMBER","body":"I think the least that we can do here is check that what has been specified under the `mapping` is valid at the time the index is created. Currently it fails when an index is indexed with an unmapped field and dynamic templates kick in.\r\n\r\nAt the time the index gets created, the index settings are known. So we can try to instantiate dummy field type instances in order to validate the config under the `mapping` key.","performed_via_github_app":null}]