{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/3008","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3008/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3008/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3008/events","html_url":"https://github.com/elastic/elasticsearch/issues/3008","id":14079108,"node_id":"MDU6SXNzdWUxNDA3OTEwOA==","number":3008,"title":"NPE when using java client with DFS_QUERY_THEN_FETCH","user":{"login":"waterdh","id":880484,"node_id":"MDQ6VXNlcjg4MDQ4NA==","avatar_url":"https://avatars1.githubusercontent.com/u/880484?v=4","gravatar_id":"","url":"https://api.github.com/users/waterdh","html_url":"https://github.com/waterdh","followers_url":"https://api.github.com/users/waterdh/followers","following_url":"https://api.github.com/users/waterdh/following{/other_user}","gists_url":"https://api.github.com/users/waterdh/gists{/gist_id}","starred_url":"https://api.github.com/users/waterdh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waterdh/subscriptions","organizations_url":"https://api.github.com/users/waterdh/orgs","repos_url":"https://api.github.com/users/waterdh/repos","events_url":"https://api.github.com/users/waterdh/events{/privacy}","received_events_url":"https://api.github.com/users/waterdh/received_events","type":"User","site_admin":false},"labels":[{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":37906074,"node_id":"MDU6TGFiZWwzNzkwNjA3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.90.1","name":"v0.90.1","color":"DDDDDD","default":false,"description":null},{"id":37906111,"node_id":"MDU6TGFiZWwzNzkwNjExMQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v1.0.0.Beta1","name":"v1.0.0.Beta1","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"assignees":[{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2013-05-08T00:46:11Z","updated_at":"2013-05-14T07:10:42Z","closed_at":"2013-05-14T07:10:42Z","author_association":"NONE","active_lock_reason":null,"body":"here's the request.toString() content, this request works fine with REST API, but not work with java client.\n{\n  \"from\" : 0,\n  \"size\" : 5000,\n  \"query\" : {\n    \"bool\" : {\n      \"must\" : [ {\n        \"match\" : {\n          \"tag\" : {\n            \"query\" : \"Custom\",\n            \"type\" : \"phrase\"\n          }\n        }\n      }, {\n        \"range\" : {\n          \"timestamp\" : {\n            \"from\" : 1367251200000,\n            \"to\" : 1367942400000,\n            \"include_lower\" : true,\n            \"include_upper\" : true\n          }\n        }\n      } ]\n    }\n  },\n  \"explain\" : false,\n  \"fields\" : [ \"tag\", \"buildId\", \"timestamp\", \"day\", \"count\" ],\n  \"sort\" : [ {\n    \"timestamp\" : {\n      \"order\" : \"desc\"\n    }\n  } ]\n}\nbelow is the response:\n{\n  \"took\" : 5,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 5,\n    \"successful\" : 0,\n    \"failed\" : 5,\n    \"failures\" : [ {\n      \"status\" : 500,\n      \"reason\" : \"SendRequestTransportException[[es-node-6][inet[/10.217.41.206:9300]][search/phase/query/id]]; nested: NullPointerException; \"\n    }, {\n      \"status\" : 500,\n      \"reason\" : \"SendRequestTransportException[[es-node-5][inet[/10.8.199.3:9300]][search/phase/query/id]]; nested: NullPointerException; \"\n    }, {\n      \"status\" : 500,\n      \"reason\" : \"SendRequestTransportException[[es-node-5][inet[/10.8.199.3:9300]][search/phase/query/id]]; nested: NullPointerException; \"\n    }, {\n      \"status\" : 500,\n      \"reason\" : \"SendRequestTransportException[[es-node-7][inet[/10.143.135.88:9300]][search/phase/query/id]]; nested: NullPointerException; \"\n    }, {\n      \"status\" : 500,\n      \"reason\" : \"SendRequestTransportException[[es-node-7][inet[/10.143.135.88:9300]][search/phase/query/id]]; nested: NullPointerException; \"\n    } ]\n  },\n  \"hits\" : {\n    \"total\" : 0,\n    \"max_score\" : 0.0,\n    \"hits\" : [ ]\n  }\n}\n","closed_by":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"performed_via_github_app":null}