[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/259725784","html_url":"https://github.com/elastic/elasticsearch/issues/21435#issuecomment-259725784","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21435","id":259725784,"node_id":"MDEyOklzc3VlQ29tbWVudDI1OTcyNTc4NA==","user":{"login":"shivangshah","id":2624839,"node_id":"MDQ6VXNlcjI2MjQ4Mzk=","avatar_url":"https://avatars1.githubusercontent.com/u/2624839?v=4","gravatar_id":"","url":"https://api.github.com/users/shivangshah","html_url":"https://github.com/shivangshah","followers_url":"https://api.github.com/users/shivangshah/followers","following_url":"https://api.github.com/users/shivangshah/following{/other_user}","gists_url":"https://api.github.com/users/shivangshah/gists{/gist_id}","starred_url":"https://api.github.com/users/shivangshah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shivangshah/subscriptions","organizations_url":"https://api.github.com/users/shivangshah/orgs","repos_url":"https://api.github.com/users/shivangshah/repos","events_url":"https://api.github.com/users/shivangshah/events{/privacy}","received_events_url":"https://api.github.com/users/shivangshah/received_events","type":"User","site_admin":false},"created_at":"2016-11-10T15:51:16Z","updated_at":"2016-11-10T15:51:16Z","author_association":"NONE","body":"Here is another follow up. \n\nWe removed the `transport` dependency as `x-pack-transport` brings in `transport` dependency by itself and we started getting this compilation error.\n\n```\n[INFO] -------------------------------------------------------------\n[ERROR] COMPILATION ERROR : \n[INFO] -------------------------------------------------------------\n[ERROR] /home/scmbuild/.jenkins/workspace/ci-company-pr/src/main/java/com/company/config/SearchConfig.java:[35,35] cannot find symbol\n  symbol:   class Netty4Plugin\n  location: package org.elasticsearch.transport\n[INFO] 1 error\n```\n\nThere seems to be some mismatch of runtime (and apparently compile time as well) dependencies. Again, this does not happen on IDE.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/259778682","html_url":"https://github.com/elastic/elasticsearch/issues/21435#issuecomment-259778682","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21435","id":259778682,"node_id":"MDEyOklzc3VlQ29tbWVudDI1OTc3ODY4Mg==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2016-11-10T19:08:16Z","updated_at":"2016-11-10T19:08:16Z","author_association":"MEMBER","body":"@shivangshah The transport client does not deal with any classloading. All of its dependencies should be on the classpath with the client jar itself. It sounds to me like whatever you are using to pull the client jar is not also pulling transitive dependencies (at least that is what the second error you show makes me think). Missing XPackPlugin at runtime seems would seem you are missing jars in the classpath (or rather the classloader you setup with spring).\n\nThis repo is reserved for bug fixes and feature requests for Elasticsearch core.  The best place to ask questions like these is in the forums: https:/discuss.elastic.co/c/x-pack\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/259888076","html_url":"https://github.com/elastic/elasticsearch/issues/21435#issuecomment-259888076","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21435","id":259888076,"node_id":"MDEyOklzc3VlQ29tbWVudDI1OTg4ODA3Ng==","user":{"login":"shivangshah","id":2624839,"node_id":"MDQ6VXNlcjI2MjQ4Mzk=","avatar_url":"https://avatars1.githubusercontent.com/u/2624839?v=4","gravatar_id":"","url":"https://api.github.com/users/shivangshah","html_url":"https://github.com/shivangshah","followers_url":"https://api.github.com/users/shivangshah/followers","following_url":"https://api.github.com/users/shivangshah/following{/other_user}","gists_url":"https://api.github.com/users/shivangshah/gists{/gist_id}","starred_url":"https://api.github.com/users/shivangshah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shivangshah/subscriptions","organizations_url":"https://api.github.com/users/shivangshah/orgs","repos_url":"https://api.github.com/users/shivangshah/repos","events_url":"https://api.github.com/users/shivangshah/events{/privacy}","received_events_url":"https://api.github.com/users/shivangshah/received_events","type":"User","site_admin":false},"created_at":"2016-11-11T06:05:10Z","updated_at":"2016-11-11T06:05:10Z","author_association":"NONE","body":"@rjernst thanks for the reply, I will look into this. I looked at both the jar files (local vs CI) and seems like the one from the CI (the one that giving the above error) is actually missing `x-pack-api-5.0.0.jar` for some reason. So you are probably right, it's not pulling transitive dependencies. Thanks for the insight !\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/262657521","html_url":"https://github.com/elastic/elasticsearch/issues/21435#issuecomment-262657521","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21435","id":262657521,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjY1NzUyMQ==","user":{"login":"igaidai4uk","id":2185483,"node_id":"MDQ6VXNlcjIxODU0ODM=","avatar_url":"https://avatars2.githubusercontent.com/u/2185483?v=4","gravatar_id":"","url":"https://api.github.com/users/igaidai4uk","html_url":"https://github.com/igaidai4uk","followers_url":"https://api.github.com/users/igaidai4uk/followers","following_url":"https://api.github.com/users/igaidai4uk/following{/other_user}","gists_url":"https://api.github.com/users/igaidai4uk/gists{/gist_id}","starred_url":"https://api.github.com/users/igaidai4uk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/igaidai4uk/subscriptions","organizations_url":"https://api.github.com/users/igaidai4uk/orgs","repos_url":"https://api.github.com/users/igaidai4uk/repos","events_url":"https://api.github.com/users/igaidai4uk/events{/privacy}","received_events_url":"https://api.github.com/users/igaidai4uk/received_events","type":"User","site_admin":false},"created_at":"2016-11-23T23:48:49Z","updated_at":"2016-11-23T23:48:49Z","author_association":"NONE","body":"@shivangshah have you figured the issue? I am having the same.\r\nThanks.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/263399748","html_url":"https://github.com/elastic/elasticsearch/issues/21435#issuecomment-263399748","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21435","id":263399748,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzM5OTc0OA==","user":{"login":"shivangshah","id":2624839,"node_id":"MDQ6VXNlcjI2MjQ4Mzk=","avatar_url":"https://avatars1.githubusercontent.com/u/2624839?v=4","gravatar_id":"","url":"https://api.github.com/users/shivangshah","html_url":"https://github.com/shivangshah","followers_url":"https://api.github.com/users/shivangshah/followers","following_url":"https://api.github.com/users/shivangshah/following{/other_user}","gists_url":"https://api.github.com/users/shivangshah/gists{/gist_id}","starred_url":"https://api.github.com/users/shivangshah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shivangshah/subscriptions","organizations_url":"https://api.github.com/users/shivangshah/orgs","repos_url":"https://api.github.com/users/shivangshah/repos","events_url":"https://api.github.com/users/shivangshah/events{/privacy}","received_events_url":"https://api.github.com/users/shivangshah/received_events","type":"User","site_admin":false},"created_at":"2016-11-28T21:27:52Z","updated_at":"2016-11-28T21:27:52Z","author_association":"NONE","body":"@igaidai4uk is your application spring boot based? Are the dependencies being pulled through a proxy (such as nexus?). If so, this is actually a nexus issue. Turned out that the repository proxy setting in nexus for `artifacts.elastic.co` doesn't work correctly for some reason (we actually need to reach out to elastic support for this, but haven't done that yet) and because of that the `x-pack-transport` transitive dependencies are not downloaded. Now because these classes are loaded at runtime, you will not see compilation issues during maven builds/package. You will only see it when you run the application. \r\n\r\nI figured this out by `jar xvf` my actual working spring boot jar with a non working spring boot jar and looked at the lib folder manually, comparing all the jar files. Turns out `x-pack-transport`'s all transitive dependencies were missing. \r\n\r\nI hope this helps.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/272362033","html_url":"https://github.com/elastic/elasticsearch/issues/21435#issuecomment-272362033","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21435","id":272362033,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjM2MjAzMw==","user":{"login":"deepak-bala","id":2056756,"node_id":"MDQ6VXNlcjIwNTY3NTY=","avatar_url":"https://avatars3.githubusercontent.com/u/2056756?v=4","gravatar_id":"","url":"https://api.github.com/users/deepak-bala","html_url":"https://github.com/deepak-bala","followers_url":"https://api.github.com/users/deepak-bala/followers","following_url":"https://api.github.com/users/deepak-bala/following{/other_user}","gists_url":"https://api.github.com/users/deepak-bala/gists{/gist_id}","starred_url":"https://api.github.com/users/deepak-bala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepak-bala/subscriptions","organizations_url":"https://api.github.com/users/deepak-bala/orgs","repos_url":"https://api.github.com/users/deepak-bala/repos","events_url":"https://api.github.com/users/deepak-bala/events{/privacy}","received_events_url":"https://api.github.com/users/deepak-bala/received_events","type":"User","site_admin":false},"created_at":"2017-01-13T05:04:14Z","updated_at":"2017-01-13T05:04:14Z","author_association":"NONE","body":"For those looking at this thread now, the reason this happens is because of this.\r\n\r\n```\r\n[WARNING] The POM for org.elasticsearch.plugin:x-pack-api:jar:5.1.2 is invalid, transitive dependencies (if any) will not be available, enable debug logging for more details\r\n```\r\n\r\nBoth the `x-pack-transport-5.1.2.pom` and `x-pack-api-5.1.2.pom` files from the ES repo have duplicate `licenses` and `developers` XML tags. Remove these tags locally and the transitive dependencies will be downloaded. You'll need to get maven to re-import the jars once you edit these pom files.\r\n\r\nThe following exceptions can occur if these dependencies are not present\r\n\r\n```\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.elasticsearch.client.Client]: Factory method 'esClient' threw exception; nested exception is java.lang.NoClassDefFoundError: org/elasticsearch/xpack/XPackPlugin\r\n```\r\n\r\n```\r\nCaused by: java.lang.RuntimeException: java.lang.ClassNotFoundException: com.unboundid.util.Debug\r\n\r\n```\r\n\r\nRelated threads in discuss.elastic.co\r\n\r\nhttps://discuss.elastic.co/t/error-xpack-class-not-found-exception-in-java/65168/5\r\nhttps://discuss.elastic.co/t/how-to-set-up-elastic-maven-reposiroty/68986","performed_via_github_app":null}]