{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/25523","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25523/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25523/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25523/events","html_url":"https://github.com/elastic/elasticsearch/issues/25523","id":240244465,"node_id":"MDU6SXNzdWUyNDAyNDQ0NjU=","number":25523,"title":"Allow scripted_field value to dynamically recalculate with refresh interval","user":{"login":"jclosure","id":343099,"node_id":"MDQ6VXNlcjM0MzA5OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/343099?v=4","gravatar_id":"","url":"https://api.github.com/users/jclosure","html_url":"https://github.com/jclosure","followers_url":"https://api.github.com/users/jclosure/followers","following_url":"https://api.github.com/users/jclosure/following{/other_user}","gists_url":"https://api.github.com/users/jclosure/gists{/gist_id}","starred_url":"https://api.github.com/users/jclosure/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jclosure/subscriptions","organizations_url":"https://api.github.com/users/jclosure/orgs","repos_url":"https://api.github.com/users/jclosure/repos","events_url":"https://api.github.com/users/jclosure/events{/privacy}","received_events_url":"https://api.github.com/users/jclosure/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-07-03T18:53:21Z","updated_at":"2017-07-03T18:59:11Z","closed_at":"2017-07-03T18:59:11Z","author_association":"NONE","active_lock_reason":null,"body":"<!-- Feature request -->\r\n\r\nIt would be really useful to be able to opt scripted_fields out of request caching.  Here is an example of a scripted_field that produces different output each time the Painless script in it runs.\r\n\r\n**Example**\r\n```java\r\nlong seconds = (new Date().getTime() - doc['@timestamp'].value) / 1000;\r\nlong minutes = seconds / 60;\r\nlong hours = minutes / 60;\r\nlong days = hours / 24;\r\n\r\nlong ss = seconds % 60;\r\nlong mm = minutes % 60;\r\nlong hh = hours % 24;\r\n\r\ndef[] args = new def[] {hh, mm, ss};\r\nif (days == 0) {\r\n  return String.format (\"%02d:%02d:%02d\", args);\r\n} else {\r\n  return \"days: \" + days + \", \" + String.format (\"%02d:%02d:%02d\", args);\r\n}\r\n```\r\n![image](https://user-images.githubusercontent.com/343099/27804645-a4c4833e-5ff5-11e7-9645-6e45fd865b11.png)\r\n\r\nThe *Duration till Now* field's value gets calculated on initial page load.  After that it's cached and  doesn't update each time the automatic refresh happens.  The caching behavior doesn't allow for dynamically recalculating query values.  It would very powerful and a nice user experience to be able to have Painless scripted_fields rerun each time the refresh interval fires.  If possible it would be nice to be able to configure each scripted_field to opt in/out of caching on an individual basis.\r\n\r\n","closed_by":{"login":"jclosure","id":343099,"node_id":"MDQ6VXNlcjM0MzA5OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/343099?v=4","gravatar_id":"","url":"https://api.github.com/users/jclosure","html_url":"https://github.com/jclosure","followers_url":"https://api.github.com/users/jclosure/followers","following_url":"https://api.github.com/users/jclosure/following{/other_user}","gists_url":"https://api.github.com/users/jclosure/gists{/gist_id}","starred_url":"https://api.github.com/users/jclosure/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jclosure/subscriptions","organizations_url":"https://api.github.com/users/jclosure/orgs","repos_url":"https://api.github.com/users/jclosure/repos","events_url":"https://api.github.com/users/jclosure/events{/privacy}","received_events_url":"https://api.github.com/users/jclosure/received_events","type":"User","site_admin":false},"performed_via_github_app":null}