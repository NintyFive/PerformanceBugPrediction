{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/45671","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45671/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45671/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45671/events","html_url":"https://github.com/elastic/elasticsearch/issues/45671","id":481737193,"node_id":"MDU6SXNzdWU0ODE3MzcxOTM=","number":45671,"title":"Unable to use porter2 stemmer","user":{"login":"ferronrsmith","id":159764,"node_id":"MDQ6VXNlcjE1OTc2NA==","avatar_url":"https://avatars2.githubusercontent.com/u/159764?v=4","gravatar_id":"","url":"https://api.github.com/users/ferronrsmith","html_url":"https://github.com/ferronrsmith","followers_url":"https://api.github.com/users/ferronrsmith/followers","following_url":"https://api.github.com/users/ferronrsmith/following{/other_user}","gists_url":"https://api.github.com/users/ferronrsmith/gists{/gist_id}","starred_url":"https://api.github.com/users/ferronrsmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ferronrsmith/subscriptions","organizations_url":"https://api.github.com/users/ferronrsmith/orgs","repos_url":"https://api.github.com/users/ferronrsmith/repos","events_url":"https://api.github.com/users/ferronrsmith/events{/privacy}","received_events_url":"https://api.github.com/users/ferronrsmith/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-08-16T18:45:20Z","updated_at":"2019-08-16T22:40:51Z","closed_at":"2019-08-16T22:40:11Z","author_association":"NONE","active_lock_reason":null,"body":"```json\r\n{\r\n  \"index_patterns\": [\r\n    \"*~rec\"\r\n  ],\r\n  \"order\": 10,\r\n  \"settings\": {\r\n    \"index\": {\r\n      \"analysis\": {\r\n        \"analyzer\": {\r\n          \"search_analyzer\": {\r\n            \"type\": \"custom\",\r\n            \"filter\": [\r\n              \"lowercase\",\r\n              \"asciifolding\"\r\n            ],\r\n            \"char_filter\": [\r\n              \"html_strip\"\r\n            ],\r\n            \"tokenizer\": \"whitespace\"\r\n          },\r\n          \"english_analyzer\": {\r\n            \"type\": \"custom\",\r\n            \"filter\": [\r\n              \"standard\",\r\n              \"lowercase\",\r\n              \"english_possessive_stemmer\"\r\n            ],\r\n            \"tokenizer\": \"standard\"\r\n          },\r\n          \"french_analyzer\": {\r\n            \"type\": \"custom\",\r\n            \"filter\": [\r\n              \"standard\",\r\n              \"lowercase\",\r\n              \"french_stemmer\"\r\n            ],\r\n            \"tokenizer\": \"standard\"\r\n          },\r\n          \"spanish_analyzer\": {\r\n            \"type\": \"custom\",\r\n            \"filter\": [\r\n              \"standard\",\r\n              \"lowercase\",\r\n              \"spanish_stemmer\"\r\n            ],\r\n            \"tokenizer\": \"standard\"\r\n          }\r\n        },\r\n        \"normalizer\": {\r\n          \"lowercase_normalizer\": {\r\n            \"type\": \"custom\",\r\n            \"filter\": [\r\n              \"lowercase\",\r\n              \"asciifolding\"\r\n            ],\r\n            \"char_filter\": []\r\n          }\r\n        },\r\n        \"filter\": {\r\n          \"english_stemmer\": {\r\n            \"type\": \"stemmer\",\r\n            \"name\": \"english\"\r\n          },\r\n          \"english_possessive_stemmer\": {\r\n            \"type\": \"stemmer\",\r\n            \"name\": \"possessive_english\"\r\n          },\r\n          \"english_porter_stemmer,\": {\r\n            \"type\": \"stemmer\",\r\n            \"name\": \"porter2\"\r\n          },\r\n          \"english_lovins_stemmer\": {\r\n            \"type\": \"stemmer\",\r\n            \"name\": \"lovins\"\r\n          },\r\n          \"french_stemmer\": {\r\n            \"type\": \"stemmer\",\r\n            \"name\": \"french\"\r\n          },\r\n          \"spanish_stemmer\": {\r\n            \"type\": \"stemmer\",\r\n            \"name\": \"spanish\"\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  \"mappings\": {\r\n    \"date_detection\": false,\r\n    \"properties\": {\r\n      \"@iat\": {\r\n        \"type\": \"long\"\r\n      },\r\n      \"@uat\": {\r\n        \"type\": \"long\"\r\n      }\r\n    },\r\n    \"dynamic_templates\": [\r\n      {\r\n        \"strings\": {\r\n          \"match\": \"*\",\r\n          \"unmatch\": \"$cc_suggest*\",\r\n          \"match_mapping_type\": \"string\",\r\n          \"mapping\": {\r\n            \"type\": \"text\",\r\n            \"analyzer\": \"standard\",\r\n            \"fields\": {\r\n              \"raw\": {\r\n                \"type\": \"keyword\",\r\n                \"ignore_above\": 256\r\n              },\r\n              \"seo\": {\r\n                \"type\": \"text\",\r\n                \"analyzer\": \"search_analyzer\"\r\n              },\r\n              \"@en\": {\r\n                \"type\": \"text\",\r\n                \"analyzer\": \"english_analyzer\"\r\n              },\r\n              \"@es\": {\r\n                \"type\": \"text\",\r\n                \"analyzer\": \"spanish_analyzer\"\r\n              },\r\n              \"@fr\": {\r\n                \"type\": \"text\",\r\n                \"analyzer\": \"french_analyzer\"\r\n              },\r\n              \"cis\": {\r\n                \"type\": \"keyword\",\r\n                \"ignore_above\": 256,\r\n                \"normalizer\": \"lowercase_normalizer\"\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    ]\r\n  }\r\n}\r\n```\r\n\r\nRan the above configuration file and it registers everything, but when I try run an analysis against `english_porter_stemmer` it fails.\r\n\r\n\r\n```bash\r\ncurl -X POST \\\r\n  'http://localhost:9200/products~rec/_analyze' \\\r\n  -H 'Accept: */*' \\\r\n  -H 'User-Agent: PostmanRuntime/7.16.1' \\\r\n  -H 'cache-control: no-cache' \\\r\n  -d '{\r\n    \"filter\": [\r\n        \"lowercase\",\r\n        \"english_porter_stemmer\"\r\n    ],\r\n    \"tokenizer\": \"standard\",\r\n    \"text\": \"women'\\''s shoes\"\r\n}'\r\n``` \r\n\r\nReturns => \r\n\r\n```json\r\n{\r\n    \"error\": {\r\n        \"root_cause\": [\r\n            {\r\n                \"type\": \"remote_transport_exception\",\r\n                \"reason\": \"[ferron-pc][127.0.0.1:9300][indices:admin/analyze[s]]\"\r\n            }\r\n        ],\r\n        \"type\": \"illegal_argument_exception\",\r\n        \"reason\": \"failed to find filter under [english_porter_stemmer]\"\r\n    },\r\n    \"status\": 400\r\n}\r\n```\r\n\r\nAm I missing something? I used the same code above for version `6.5.x` and it worked. Failed on 7.2.0 & 7.3.0","closed_by":{"login":"ferronrsmith","id":159764,"node_id":"MDQ6VXNlcjE1OTc2NA==","avatar_url":"https://avatars2.githubusercontent.com/u/159764?v=4","gravatar_id":"","url":"https://api.github.com/users/ferronrsmith","html_url":"https://github.com/ferronrsmith","followers_url":"https://api.github.com/users/ferronrsmith/followers","following_url":"https://api.github.com/users/ferronrsmith/following{/other_user}","gists_url":"https://api.github.com/users/ferronrsmith/gists{/gist_id}","starred_url":"https://api.github.com/users/ferronrsmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ferronrsmith/subscriptions","organizations_url":"https://api.github.com/users/ferronrsmith/orgs","repos_url":"https://api.github.com/users/ferronrsmith/repos","events_url":"https://api.github.com/users/ferronrsmith/events{/privacy}","received_events_url":"https://api.github.com/users/ferronrsmith/received_events","type":"User","site_admin":false},"performed_via_github_app":null}