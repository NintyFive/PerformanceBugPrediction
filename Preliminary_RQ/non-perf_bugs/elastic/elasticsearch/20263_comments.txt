[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/243840876","html_url":"https://github.com/elastic/elasticsearch/issues/20263#issuecomment-243840876","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20263","id":243840876,"node_id":"MDEyOklzc3VlQ29tbWVudDI0Mzg0MDg3Ng==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-08-31T17:36:31Z","updated_at":"2016-08-31T17:36:31Z","author_association":"CONTRIBUTOR","body":"Having some way to get messages back to the user from an embedded scripting languages isn't without [precedent](https://www.postgresql.org/docs/9.1/static/plpgsql-errors-and-messages.html). I'd prefer dumping the results to a logger and/or throwing them back at the user.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/243842185","html_url":"https://github.com/elastic/elasticsearch/issues/20263#issuecomment-243842185","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20263","id":243842185,"node_id":"MDEyOklzc3VlQ29tbWVudDI0Mzg0MjE4NQ==","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"created_at":"2016-08-31T17:41:13Z","updated_at":"2016-08-31T17:41:13Z","author_association":"MEMBER","body":"Plus it's will be _extremely_ helpful for debugging Watcher scripts :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/243957260","html_url":"https://github.com/elastic/elasticsearch/issues/20263#issuecomment-243957260","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20263","id":243957260,"node_id":"MDEyOklzc3VlQ29tbWVudDI0Mzk1NzI2MA==","user":{"login":"geekpete","id":2070843,"node_id":"MDQ6VXNlcjIwNzA4NDM=","avatar_url":"https://avatars2.githubusercontent.com/u/2070843?v=4","gravatar_id":"","url":"https://api.github.com/users/geekpete","html_url":"https://github.com/geekpete","followers_url":"https://api.github.com/users/geekpete/followers","following_url":"https://api.github.com/users/geekpete/following{/other_user}","gists_url":"https://api.github.com/users/geekpete/gists{/gist_id}","starred_url":"https://api.github.com/users/geekpete/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/geekpete/subscriptions","organizations_url":"https://api.github.com/users/geekpete/orgs","repos_url":"https://api.github.com/users/geekpete/repos","events_url":"https://api.github.com/users/geekpete/events{/privacy}","received_events_url":"https://api.github.com/users/geekpete/received_events","type":"User","site_admin":false},"created_at":"2016-09-01T02:16:22Z","updated_at":"2016-09-01T02:16:22Z","author_association":"MEMBER","body":"How about provide a logging facility but for safety just log to an elasticsearch index.\n\nThis would allow other cool use cases such as alerting/monitoring on script activity or custom output.\n\nImagine you want to do profiling of a script as part of a larger overall pipeline monitoring effort, this would allow you the granularity of APM type detail from within your script.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/244012347","html_url":"https://github.com/elastic/elasticsearch/issues/20263#issuecomment-244012347","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20263","id":244012347,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDAxMjM0Nw==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-09-01T08:32:50Z","updated_at":"2016-09-01T08:32:50Z","author_association":"CONTRIBUTOR","body":"I don't think the script should do ANY IO whatsoever. I wonder if we should have a size limited logger buffer that we can log out after the script is executed? I also think it should be disabled by default and only enabled if a flag is passed to the script compilation such that we optimize it away in the common case\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/244067239","html_url":"https://github.com/elastic/elasticsearch/issues/20263#issuecomment-244067239","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20263","id":244067239,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDA2NzIzOQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2016-09-01T12:45:01Z","updated_at":"2016-09-01T12:45:01Z","author_association":"MEMBER","body":"I agree we should not do any IO. I think exceptions are the way to go for debugging. They are immediate, and don't require pouring through a log file. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/244074930","html_url":"https://github.com/elastic/elasticsearch/issues/20263#issuecomment-244074930","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20263","id":244074930,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDA3NDkzMA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-09-01T13:15:48Z","updated_at":"2016-09-01T13:15:48Z","author_association":"CONTRIBUTOR","body":"I like the size limited buffer returned to the user. Using a compilation flag to skip it entirely is cool I think as well.\n\nI think this is lower priority than the assert proposal because asserts are so very nice and immediate.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/244103220","html_url":"https://github.com/elastic/elasticsearch/issues/20263#issuecomment-244103220","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20263","id":244103220,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDEwMzIyMA==","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"created_at":"2016-09-01T14:49:38Z","updated_at":"2016-09-01T14:49:38Z","author_association":"MEMBER","body":"> They are immediate, and don't require pouring through a log file.\n\nIn practice, I find that people aren't actually using the log file, so much as the standard out aspect of it as they make attempts at refinement/correction _or_ they're tailing the log to get the same effect.\n\nAs such, I really like the size-limited buffer idea. Perhaps we only expose the logger to scripts that explicitly request it via a request-level parameter?\n\n``` json\n\"script\": {\n  \"inline\": \"logger.info('blah')\",\n  \"lang\": \"painless\",\n  \"logger\": \"true\"\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/244113117","html_url":"https://github.com/elastic/elasticsearch/issues/20263#issuecomment-244113117","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20263","id":244113117,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDExMzExNw==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-09-01T15:19:26Z","updated_at":"2016-09-01T15:19:26Z","author_association":"CONTRIBUTOR","body":"> Perhaps we only expose the logger to scripts that explicitly request it via a request-level parameter?\n\nWe could make it a noop if `\"logger\": false` so people can use the same scripts and not pay the cost when they aren't debugging.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/244145742","html_url":"https://github.com/elastic/elasticsearch/issues/20263#issuecomment-244145742","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20263","id":244145742,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDE0NTc0Mg==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2016-09-01T17:07:47Z","updated_at":"2016-09-01T17:07:47Z","author_association":"CONTRIBUTOR","body":"I lie somewhere between @s1monw and @rjernst positions on this.  I would like to provide a better debug environment for some of the more complex scripts, but at the same time I'm hesitant to allow a user to do any kind of logging even to just a buffer given how easy it is to abuse something like this.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/378022316","html_url":"https://github.com/elastic/elasticsearch/issues/20263#issuecomment-378022316","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20263","id":378022316,"node_id":"MDEyOklzc3VlQ29tbWVudDM3ODAyMjMxNg==","user":{"login":"shivamkrpandey","id":25893484,"node_id":"MDQ6VXNlcjI1ODkzNDg0","avatar_url":"https://avatars3.githubusercontent.com/u/25893484?v=4","gravatar_id":"","url":"https://api.github.com/users/shivamkrpandey","html_url":"https://github.com/shivamkrpandey","followers_url":"https://api.github.com/users/shivamkrpandey/followers","following_url":"https://api.github.com/users/shivamkrpandey/following{/other_user}","gists_url":"https://api.github.com/users/shivamkrpandey/gists{/gist_id}","starred_url":"https://api.github.com/users/shivamkrpandey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shivamkrpandey/subscriptions","organizations_url":"https://api.github.com/users/shivamkrpandey/orgs","repos_url":"https://api.github.com/users/shivamkrpandey/repos","events_url":"https://api.github.com/users/shivamkrpandey/events{/privacy}","received_events_url":"https://api.github.com/users/shivamkrpandey/received_events","type":"User","site_admin":false},"created_at":"2018-04-02T19:42:10Z","updated_at":"2018-04-02T19:42:10Z","author_association":"NONE","body":"I have the below script that I'm trying to execute to update a document. But `Debug.explain()` doesn't seem to be working. Any insights into this would be appreciated. My Elasticsearch version is `5.5.0`.\r\n\r\n```\r\nScript script = new Script(\r\n      Script.DEFAULT_SCRIPT_TYPE,\r\n      Script.DEFAULT_SCRIPT_LANG,\r\n      \"\"\"\r\n            Object details = ctx._source.personDetails;\r\n            Debug.explain(details);   // This is not working\r\n\r\n            // some other code\r\n\r\n            return details;\r\n       \"\"\",\r\n       Collections.emptyMap()\r\n )\r\n\r\nesClient.prepareUpdate(index, type, documentId).setScript(script).get()\r\n```\r\nThanks!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/378032313","html_url":"https://github.com/elastic/elasticsearch/issues/20263#issuecomment-378032313","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20263","id":378032313,"node_id":"MDEyOklzc3VlQ29tbWVudDM3ODAzMjMxMw==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2018-04-02T20:20:32Z","updated_at":"2018-04-02T20:20:32Z","author_association":"MEMBER","body":"@shivamcausecode Please ask questions on [our forum](https://discuss.elastic.co/c/elasticsearch). Closed issues are not normally tracked by developers and your comments can easily be overlooked.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/378128820","html_url":"https://github.com/elastic/elasticsearch/issues/20263#issuecomment-378128820","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20263","id":378128820,"node_id":"MDEyOklzc3VlQ29tbWVudDM3ODEyODgyMA==","user":{"login":"shivamkrpandey","id":25893484,"node_id":"MDQ6VXNlcjI1ODkzNDg0","avatar_url":"https://avatars3.githubusercontent.com/u/25893484?v=4","gravatar_id":"","url":"https://api.github.com/users/shivamkrpandey","html_url":"https://github.com/shivamkrpandey","followers_url":"https://api.github.com/users/shivamkrpandey/followers","following_url":"https://api.github.com/users/shivamkrpandey/following{/other_user}","gists_url":"https://api.github.com/users/shivamkrpandey/gists{/gist_id}","starred_url":"https://api.github.com/users/shivamkrpandey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shivamkrpandey/subscriptions","organizations_url":"https://api.github.com/users/shivamkrpandey/orgs","repos_url":"https://api.github.com/users/shivamkrpandey/repos","events_url":"https://api.github.com/users/shivamkrpandey/events{/privacy}","received_events_url":"https://api.github.com/users/shivamkrpandey/received_events","type":"User","site_admin":false},"created_at":"2018-04-03T05:00:41Z","updated_at":"2018-04-03T05:00:41Z","author_association":"NONE","body":"@rjernst Done, thank you","performed_via_github_app":null}]