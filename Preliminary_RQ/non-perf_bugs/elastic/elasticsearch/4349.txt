{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/4349","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4349/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4349/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4349/events","html_url":"https://github.com/elastic/elasticsearch/issues/4349","id":23796495,"node_id":"MDU6SXNzdWUyMzc5NjQ5NQ==","number":4349,"title":"Make _all payload-based boosting more space efficient","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"labels":[{"id":144797810,"node_id":"MDU6TGFiZWwxNDQ3OTc4MTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Core","name":":Core/Infra/Core","color":"0e8a16","default":false,"description":"Core issues without another label"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2013-12-05T16:02:13Z","updated_at":"2016-11-06T10:59:42Z","closed_at":"2016-11-06T10:59:42Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"When copying content from fields into `_all`, per-field boosts are copied into payloads (when the boost is != 1). These payloads store 4 bytes which are the 4 bytes of the float boost.\n\nIn practice this is quite some overhead since this payload needs to be stored for every occurrence of every term. I think using Lucene's `SmallFloat` utility class to store the boosts in a single-byte (like Lucene does for norms) would be a better trade-off?\n\nAnother option I'm thinking of is trying to improve Lucene to compress payloads: since the postings format is based on blocks, all payloads are stored sequentially, and using lz compression such as lz4 could easily take advantage of the fact that payloads are redundant (if you have only 10 string fields, there are at most 10 unique values of the boost although there are at least 128 positions per block).\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}