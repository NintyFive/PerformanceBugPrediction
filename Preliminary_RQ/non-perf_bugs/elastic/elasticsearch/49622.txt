{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/49622","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49622/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49622/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49622/events","html_url":"https://github.com/elastic/elasticsearch/issues/49622","id":529133419,"node_id":"MDU6SXNzdWU1MjkxMzM0MTk=","number":49622,"title":"Coordinating node stats including search qps and latency","user":{"login":"wangkhc","id":32295978,"node_id":"MDQ6VXNlcjMyMjk1OTc4","avatar_url":"https://avatars1.githubusercontent.com/u/32295978?v=4","gravatar_id":"","url":"https://api.github.com/users/wangkhc","html_url":"https://github.com/wangkhc","followers_url":"https://api.github.com/users/wangkhc/followers","following_url":"https://api.github.com/users/wangkhc/following{/other_user}","gists_url":"https://api.github.com/users/wangkhc/gists{/gist_id}","starred_url":"https://api.github.com/users/wangkhc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangkhc/subscriptions","organizations_url":"https://api.github.com/users/wangkhc/orgs","repos_url":"https://api.github.com/users/wangkhc/repos","events_url":"https://api.github.com/users/wangkhc/events{/privacy}","received_events_url":"https://api.github.com/users/wangkhc/received_events","type":"User","site_admin":false},"labels":[{"id":146836529,"node_id":"MDU6TGFiZWwxNDY4MzY1Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Stats","name":":Core/Features/Stats","color":"0e8a16","default":false,"description":"Statistics tracking and retrieval APIs"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-11-27T05:55:36Z","updated_at":"2019-12-01T03:38:17Z","closed_at":"2019-12-01T03:38:17Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Today we are lack of coordinating node metrics, which is helpful for performance analyzation in many scenario. For example, when a query with heavy aggregation happening on coordinating node, this cost is not being recorded in current query stats (only shard level on data nodes), we cannot track any information happening on coordinating nodes.\r\n\r\nWith coordinating stats recording server-side latency (which is same as \"took\" in search response), this is very helpful for OLAP users to realize that heavy aggregation is happening, and thus can further optimize their use-case.\r\n\r\nBesides, current \"qps\" is kind of confusing as it only reflects shard-level, which is (real_qps * shard_count). Introducing coordinating node search qps can make it clear for end users","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}