[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/121499406","html_url":"https://github.com/elastic/elasticsearch/issues/12135#issuecomment-121499406","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12135","id":121499406,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMTQ5OTQwNg==","user":{"login":"ashishnerkar1","id":8653137,"node_id":"MDQ6VXNlcjg2NTMxMzc=","avatar_url":"https://avatars3.githubusercontent.com/u/8653137?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishnerkar1","html_url":"https://github.com/ashishnerkar1","followers_url":"https://api.github.com/users/ashishnerkar1/followers","following_url":"https://api.github.com/users/ashishnerkar1/following{/other_user}","gists_url":"https://api.github.com/users/ashishnerkar1/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishnerkar1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishnerkar1/subscriptions","organizations_url":"https://api.github.com/users/ashishnerkar1/orgs","repos_url":"https://api.github.com/users/ashishnerkar1/repos","events_url":"https://api.github.com/users/ashishnerkar1/events{/privacy}","received_events_url":"https://api.github.com/users/ashishnerkar1/received_events","type":"User","site_admin":false},"created_at":"2015-07-15T06:00:06Z","updated_at":"2015-07-15T06:00:06Z","author_association":"NONE","body":"Hi All, I am new to ElasticSearch & want to start contributing to this project. I am interested in working on this issue. Can someone point me to appropriate resources & steps to start working on this issue.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/121584454","html_url":"https://github.com/elastic/elasticsearch/issues/12135#issuecomment-121584454","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12135","id":121584454,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMTU4NDQ1NA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-07-15T11:11:00Z","updated_at":"2015-07-15T11:11:00Z","author_association":"CONTRIBUTOR","body":"@ashishnerkar1 read https://github.com/elastic/elasticsearch/blob/master/CONTRIBUTING.md\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/126491258","html_url":"https://github.com/elastic/elasticsearch/issues/12135#issuecomment-126491258","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12135","id":126491258,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNjQ5MTI1OA==","user":{"login":"HarishAtGitHub","id":5524260,"node_id":"MDQ6VXNlcjU1MjQyNjA=","avatar_url":"https://avatars1.githubusercontent.com/u/5524260?v=4","gravatar_id":"","url":"https://api.github.com/users/HarishAtGitHub","html_url":"https://github.com/HarishAtGitHub","followers_url":"https://api.github.com/users/HarishAtGitHub/followers","following_url":"https://api.github.com/users/HarishAtGitHub/following{/other_user}","gists_url":"https://api.github.com/users/HarishAtGitHub/gists{/gist_id}","starred_url":"https://api.github.com/users/HarishAtGitHub/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HarishAtGitHub/subscriptions","organizations_url":"https://api.github.com/users/HarishAtGitHub/orgs","repos_url":"https://api.github.com/users/HarishAtGitHub/repos","events_url":"https://api.github.com/users/HarishAtGitHub/events{/privacy}","received_events_url":"https://api.github.com/users/HarishAtGitHub/received_events","type":"User","site_admin":false},"created_at":"2015-07-30T21:17:36Z","updated_at":"2015-07-30T21:17:51Z","author_association":"CONTRIBUTOR","body":"sorry for the unnecessary noise(created above) due to my commit in other repo (when trying to reproduce the issue)...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/128177134","html_url":"https://github.com/elastic/elasticsearch/issues/12135#issuecomment-128177134","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12135","id":128177134,"node_id":"MDEyOklzc3VlQ29tbWVudDEyODE3NzEzNA==","user":{"login":"xuzha","id":1799964,"node_id":"MDQ6VXNlcjE3OTk5NjQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1799964?v=4","gravatar_id":"","url":"https://api.github.com/users/xuzha","html_url":"https://github.com/xuzha","followers_url":"https://api.github.com/users/xuzha/followers","following_url":"https://api.github.com/users/xuzha/following{/other_user}","gists_url":"https://api.github.com/users/xuzha/gists{/gist_id}","starred_url":"https://api.github.com/users/xuzha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xuzha/subscriptions","organizations_url":"https://api.github.com/users/xuzha/orgs","repos_url":"https://api.github.com/users/xuzha/repos","events_url":"https://api.github.com/users/xuzha/events{/privacy}","received_events_url":"https://api.github.com/users/xuzha/received_events","type":"User","site_admin":false},"created_at":"2015-08-05T23:02:58Z","updated_at":"2015-08-05T23:03:21Z","author_association":"CONTRIBUTOR","body":"Look like we resolved this already.  This is the result:\n\n```\n{\n   \"error\": {\n      \"root_cause\": [],\n      \"type\": \"reduce_search_phase_exception\",\n      \"reason\": \"[reduce] \",\n      \"phase\": \"query\",\n      \"grouped\": true,\n      \"failed_shards\": [],\n      \"caused_by\": {\n         \"type\": \"class_cast_exception\",\n         \"reason\": \"org.elasticsearch.search.aggregations.bucket.terms.LongTerms$Bucket cannot be cast to org.elasticsearch.search.aggregations.bucket.terms.StringTerms$Bucket\"\n      }\n   },\n   \"status\": 503\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/128308665","html_url":"https://github.com/elastic/elasticsearch/issues/12135#issuecomment-128308665","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12135","id":128308665,"node_id":"MDEyOklzc3VlQ29tbWVudDEyODMwODY2NQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-08-06T09:32:58Z","updated_at":"2015-08-06T09:32:58Z","author_association":"CONTRIBUTOR","body":"@xuzha would still be nice to mention the actual field name\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/129990604","html_url":"https://github.com/elastic/elasticsearch/issues/12135#issuecomment-129990604","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12135","id":129990604,"node_id":"MDEyOklzc3VlQ29tbWVudDEyOTk5MDYwNA==","user":{"login":"HarishAtGitHub","id":5524260,"node_id":"MDQ6VXNlcjU1MjQyNjA=","avatar_url":"https://avatars1.githubusercontent.com/u/5524260?v=4","gravatar_id":"","url":"https://api.github.com/users/HarishAtGitHub","html_url":"https://github.com/HarishAtGitHub","followers_url":"https://api.github.com/users/HarishAtGitHub/followers","following_url":"https://api.github.com/users/HarishAtGitHub/following{/other_user}","gists_url":"https://api.github.com/users/HarishAtGitHub/gists{/gist_id}","starred_url":"https://api.github.com/users/HarishAtGitHub/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HarishAtGitHub/subscriptions","organizations_url":"https://api.github.com/users/HarishAtGitHub/orgs","repos_url":"https://api.github.com/users/HarishAtGitHub/repos","events_url":"https://api.github.com/users/HarishAtGitHub/events{/privacy}","received_events_url":"https://api.github.com/users/HarishAtGitHub/received_events","type":"User","site_admin":false},"created_at":"2015-08-11T17:51:31Z","updated_at":"2015-08-11T18:16:10Z","author_association":"CONTRIBUTOR","body":"@clintongormley , I am working on this first elastic search issue of mine . I was not able to exactly do what you asked for but I made the exception little more understandable .\nIs the following ok ?\n\n``` javascript\n{  \n   \"error\":{  \n      \"root_cause\":[  \n\n      ],\n      \"type\":\"reduce_search_phase_exception\",\n      \"reason\":\"[reduce] \",\n      \"phase\":\"query\",\n      \"grouped\":true,\n      \"failed_shards\":[  \n\n      ],\n      \"caused_by\":{  \n            \"type\":\"bucket_type_mis_match_exception\",\n            \"reason\":\"Bucket types are Incompatible\",\n             \"caused_by\":{  \n                      \"type\":\"incomparable_exception\",\n                       \"reason\":\"The Buckets cannot be compared as one is of type LongTerms and the other is of type StringTerms\",\n                                  \"caused_by\":{  \n                                              \"type\":\"class_cast_exception\",\n                                                \"reason\": \"org.elasticsearch.search.aggregations.bucket.terms.LongTerms$Bucket cannot be cast to org.elasticsearch.search.aggregations.bucket.terms.StringTerms$Bucket\"\n            }\n         }\n      }\n   },\n   \"status\":503\n}\n```\n\nI introduced two exceptions IncomparableException.java and BucketTypeMisMatchException.java,\nso as to better understand exceptions instead of just throwing class Cast exception which can be anything.  I threw IncomparableException in StringTerms.java where the comparison takes place and failed.\nand caught the exception at InternalTerms at line : ordered.insertWithOverflow(b); which caused the comparision.\n\nI wanted to achieve the goal \"mention the actual field name\" goal  but I don't know where to get actual field name from as the exception happens in InternalTerms level at which level I don't know how to find the field name.May be I am missing something. \n\nI will debug further to achieve \"mention the actual field name\" goal ..\n\nBefore that can you tell me if the new error message makes it a little bit more readable and understanding ? . I made the exceptions in such a way that at least people who have read the internal reading from https://www.elastic.co/guide/en/elasticsearch/reference/1.6/search-aggregations-bucket-terms-aggregation.html can understand.\n\nPlease correct me if I am wrong .\nI am working to make it perfect ..\n\n[I found that even https://github.com/elastic/elasticsearch/issues/12675 is connected to this as per the basic idea of the issue .]\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/130001766","html_url":"https://github.com/elastic/elasticsearch/issues/12135#issuecomment-130001766","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12135","id":130001766,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMDAwMTc2Ng==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-08-11T18:18:23Z","updated_at":"2015-08-11T18:18:23Z","author_association":"CONTRIBUTOR","body":"@HarishAtGitHub that sounds like progress!  One thing to mention is that we have reduced the number of exceptions in master, so we wouldn't  be keen on adding new ones.  I'm guessing you're developing against 1.7?  Rather target master.  If you want to open a PR to get some feedback about what you've done so far, feel free.  May save some development time.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/130005619","html_url":"https://github.com/elastic/elasticsearch/issues/12135#issuecomment-130005619","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12135","id":130005619,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMDAwNTYxOQ==","user":{"login":"HarishAtGitHub","id":5524260,"node_id":"MDQ6VXNlcjU1MjQyNjA=","avatar_url":"https://avatars1.githubusercontent.com/u/5524260?v=4","gravatar_id":"","url":"https://api.github.com/users/HarishAtGitHub","html_url":"https://github.com/HarishAtGitHub","followers_url":"https://api.github.com/users/HarishAtGitHub/followers","following_url":"https://api.github.com/users/HarishAtGitHub/following{/other_user}","gists_url":"https://api.github.com/users/HarishAtGitHub/gists{/gist_id}","starred_url":"https://api.github.com/users/HarishAtGitHub/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HarishAtGitHub/subscriptions","organizations_url":"https://api.github.com/users/HarishAtGitHub/orgs","repos_url":"https://api.github.com/users/HarishAtGitHub/repos","events_url":"https://api.github.com/users/HarishAtGitHub/events{/privacy}","received_events_url":"https://api.github.com/users/HarishAtGitHub/received_events","type":"User","site_admin":false},"created_at":"2015-08-11T18:31:52Z","updated_at":"2015-08-11T18:34:42Z","author_association":"CONTRIBUTOR","body":"I am working on my [fork](https://github.com/HarishAtGitHub/elasticsearch) which is just 62 commits behind actual master . \nand my build says elasticsearch-2.0.0-beta1-SNAPSHOT . so I think it is almost new ...\nyes I saw many exceptions like [here](https://gist.github.com/HarishAtGitHub/ae7fc8a69563964e2b97)(ya agreed that's a huge number 154) , but I found nothing suited my requirement , so went on with a new one .\nmay be I am wrong, I will revisit and try to live with existing one's if possible .\n\nI will clean up my small work and will open a PR by tomorrow ..\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/130212530","html_url":"https://github.com/elastic/elasticsearch/issues/12135#issuecomment-130212530","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12135","id":130212530,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMDIxMjUzMA==","user":{"login":"HarishAtGitHub","id":5524260,"node_id":"MDQ6VXNlcjU1MjQyNjA=","avatar_url":"https://avatars1.githubusercontent.com/u/5524260?v=4","gravatar_id":"","url":"https://api.github.com/users/HarishAtGitHub","html_url":"https://github.com/HarishAtGitHub","followers_url":"https://api.github.com/users/HarishAtGitHub/followers","following_url":"https://api.github.com/users/HarishAtGitHub/following{/other_user}","gists_url":"https://api.github.com/users/HarishAtGitHub/gists{/gist_id}","starred_url":"https://api.github.com/users/HarishAtGitHub/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HarishAtGitHub/subscriptions","organizations_url":"https://api.github.com/users/HarishAtGitHub/orgs","repos_url":"https://api.github.com/users/HarishAtGitHub/repos","events_url":"https://api.github.com/users/HarishAtGitHub/events{/privacy}","received_events_url":"https://api.github.com/users/HarishAtGitHub/received_events","type":"User","site_admin":false},"created_at":"2015-08-12T08:13:51Z","updated_at":"2015-08-12T08:13:51Z","author_association":"CONTRIBUTOR","body":"@clintongormley as per your suggestion . I have made a pull request https://github.com/elastic/elasticsearch/pull/12821 with a detailed commit log, explaining why I did it like this .\n\nthis is just PATCH-1 . this will be extended so that other terms can also handle the exceptions on comparing the same way ...\n\nPlease let me know if the approach is ok, so that I can continue.\n","performed_via_github_app":null}]