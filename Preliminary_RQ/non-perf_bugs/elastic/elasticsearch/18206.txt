{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/18206","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18206/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18206/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18206/events","html_url":"https://github.com/elastic/elasticsearch/issues/18206","id":153767158,"node_id":"MDU6SXNzdWUxNTM3NjcxNTg=","number":18206,"title":"Support combined highlights with indirect reference to nested fields","user":{"login":"chvndb","id":2583918,"node_id":"MDQ6VXNlcjI1ODM5MTg=","avatar_url":"https://avatars2.githubusercontent.com/u/2583918?v=4","gravatar_id":"","url":"https://api.github.com/users/chvndb","html_url":"https://github.com/chvndb","followers_url":"https://api.github.com/users/chvndb/followers","following_url":"https://api.github.com/users/chvndb/following{/other_user}","gists_url":"https://api.github.com/users/chvndb/gists{/gist_id}","starred_url":"https://api.github.com/users/chvndb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chvndb/subscriptions","organizations_url":"https://api.github.com/users/chvndb/orgs","repos_url":"https://api.github.com/users/chvndb/repos","events_url":"https://api.github.com/users/chvndb/events{/privacy}","received_events_url":"https://api.github.com/users/chvndb/received_events","type":"User","site_admin":false},"labels":[{"id":111549183,"node_id":"MDU6TGFiZWwxMTE1NDkxODM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Highlighting","name":":Search/Highlighting","color":"0e8a16","default":false,"description":"How a query matched a document"},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2016-05-09T12:40:31Z","updated_at":"2016-05-27T09:51:15Z","closed_at":"2016-05-27T09:51:14Z","author_association":"NONE","active_lock_reason":null,"body":"I have a smart-case sensitive indexing setup in place as described in my [question on stackoverflow](http://stackoverflow.com/questions/36960683/smartcase-searches-highlights-with-elasticsearch/36972516) .\n\n**tl;dr**\nI created a smart-case indexing setup that allows the user to perform smart-case partial matching on dynamic text fields. I.e. I do not know up-front what the structure of documents to be ingested wil be. \n\nEverything works, except for the highlighting. I am capable of getting individual highlights back, but not combined as one. The **\"matched_fields\"** option enables the behaviour that I would need, but it requires to know which fields would be highlighted. In our case, we use the wildcard \"*\" to get back the matches. However, this has no meaning in the matched_fields field. \n\n**feature request**\nI would like to be able to write something similar to:\n\n```\n  \"highlight\": {\n    \"number_of_fragments\": 0,\n    \"require_field_match\": false,\n    \"fields\": {\n      \"*\": {\n        \"matched_fields\": [ \"*.case_sensitive\", \"*.case_insensitive\" ]\n      }\n    }\n  }\n```\n\nor\n\n```\n  \"highlight\": {\n    \"number_of_fragments\": 0,\n    \"require_field_match\": false,\n    \"fields\": {\n      \"*\": {\n        \"nested_matched_fields\": [ \"case_sensitive\", \"case_insensitive\" ]\n      }\n    }\n  }\n```\n\nwhich for each field would return a combined highlight created from their nested case_sensitive and case_insensitive fields. In other words, if ingested documents only have two fields: **description** and **title**, then this would translate to:\n\n```\n  \"highlight\": {\n    \"number_of_fragments\": 0,\n    \"require_field_match\": false,\n    \"fields\": {\n      \"title\": {\n        \"matched_fields\": [ \"title\", \"title.case_sensitive\", \"title.case_insensitive\" ]\n      },\n      \"description\": {\n        \"matched_fields\": [ \"description\", \"description.case_sensitive\", \"description.case_insensitive\" ]\n      }\n    }\n  }\n```\n","closed_by":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"performed_via_github_app":null}