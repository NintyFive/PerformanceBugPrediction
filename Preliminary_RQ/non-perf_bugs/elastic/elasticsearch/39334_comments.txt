[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/466941807","html_url":"https://github.com/elastic/elasticsearch/issues/39334#issuecomment-466941807","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39334","id":466941807,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2Njk0MTgwNw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-02-25T09:36:26Z","updated_at":"2019-02-25T09:36:26Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/467891057","html_url":"https://github.com/elastic/elasticsearch/issues/39334#issuecomment-467891057","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39334","id":467891057,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2Nzg5MTA1Nw==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2019-02-27T14:51:31Z","updated_at":"2019-02-27T14:51:31Z","author_association":"CONTRIBUTOR","body":"We discussed this today and it seems like a reasonable change to make. The `INDEX_READ_ONLY_ALLOW_DELETE_BLOCK` was introduced purely to support the `flood_stage` watermark so we don't think there's a need for another kind of block.\r\n\r\nWe are concerned about flapping, i.e., being in a state where the block is added and removed and then added again in a loop, and the solution to this is not to remove the block as soon as the disk usage drops below the watermark itself. We think the block should be removed only when the disk usage is at least 5% below the `flood_stage` watermark _and_ below the `high` watermark.\r\n\r\nMarking this as `help wanted` because we do not anticipate working on this as a priority, but we welcome contributions from the community.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/475212154","html_url":"https://github.com/elastic/elasticsearch/issues/39334#issuecomment-475212154","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39334","id":475212154,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTIxMjE1NA==","user":{"login":"alex101101","id":20016849,"node_id":"MDQ6VXNlcjIwMDE2ODQ5","avatar_url":"https://avatars3.githubusercontent.com/u/20016849?v=4","gravatar_id":"","url":"https://api.github.com/users/alex101101","html_url":"https://github.com/alex101101","followers_url":"https://api.github.com/users/alex101101/followers","following_url":"https://api.github.com/users/alex101101/following{/other_user}","gists_url":"https://api.github.com/users/alex101101/gists{/gist_id}","starred_url":"https://api.github.com/users/alex101101/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alex101101/subscriptions","organizations_url":"https://api.github.com/users/alex101101/orgs","repos_url":"https://api.github.com/users/alex101101/repos","events_url":"https://api.github.com/users/alex101101/events{/privacy}","received_events_url":"https://api.github.com/users/alex101101/received_events","type":"User","site_admin":false},"created_at":"2019-03-21T12:36:45Z","updated_at":"2019-03-21T12:36:45Z","author_association":"CONTRIBUTOR","body":"Hi @DaveCTurner,\r\nCould I look into this?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/475213068","html_url":"https://github.com/elastic/elasticsearch/issues/39334#issuecomment-475213068","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39334","id":475213068,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTIxMzA2OA==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2019-03-21T12:40:09Z","updated_at":"2019-03-21T12:40:09Z","author_association":"CONTRIBUTOR","body":"Sure @alex101101, go ahead.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/475500016","html_url":"https://github.com/elastic/elasticsearch/issues/39334#issuecomment-475500016","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39334","id":475500016,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTUwMDAxNg==","user":{"login":"alex101101","id":20016849,"node_id":"MDQ6VXNlcjIwMDE2ODQ5","avatar_url":"https://avatars3.githubusercontent.com/u/20016849?v=4","gravatar_id":"","url":"https://api.github.com/users/alex101101","html_url":"https://github.com/alex101101","followers_url":"https://api.github.com/users/alex101101/followers","following_url":"https://api.github.com/users/alex101101/following{/other_user}","gists_url":"https://api.github.com/users/alex101101/gists{/gist_id}","starred_url":"https://api.github.com/users/alex101101/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alex101101/subscriptions","organizations_url":"https://api.github.com/users/alex101101/orgs","repos_url":"https://api.github.com/users/alex101101/repos","events_url":"https://api.github.com/users/alex101101/events{/privacy}","received_events_url":"https://api.github.com/users/alex101101/received_events","type":"User","site_admin":false},"created_at":"2019-03-22T05:36:03Z","updated_at":"2019-03-22T05:36:03Z","author_association":"CONTRIBUTOR","body":"Thanks @DaveCTurner, I have just raised a pull request.  Could you please review it when you have time?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/482278799","html_url":"https://github.com/elastic/elasticsearch/issues/39334#issuecomment-482278799","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39334","id":482278799,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MjI3ODc5OQ==","user":{"login":"Bukhtawar","id":12809319,"node_id":"MDQ6VXNlcjEyODA5MzE5","avatar_url":"https://avatars0.githubusercontent.com/u/12809319?v=4","gravatar_id":"","url":"https://api.github.com/users/Bukhtawar","html_url":"https://github.com/Bukhtawar","followers_url":"https://api.github.com/users/Bukhtawar/followers","following_url":"https://api.github.com/users/Bukhtawar/following{/other_user}","gists_url":"https://api.github.com/users/Bukhtawar/gists{/gist_id}","starred_url":"https://api.github.com/users/Bukhtawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bukhtawar/subscriptions","organizations_url":"https://api.github.com/users/Bukhtawar/orgs","repos_url":"https://api.github.com/users/Bukhtawar/repos","events_url":"https://api.github.com/users/Bukhtawar/events{/privacy}","received_events_url":"https://api.github.com/users/Bukhtawar/received_events","type":"User","site_admin":false},"created_at":"2019-04-11T19:46:03Z","updated_at":"2019-04-11T19:46:03Z","author_association":"CONTRIBUTOR","body":"@DaveCTurner would be great if you could spare sometime for the review","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/493327402","html_url":"https://github.com/elastic/elasticsearch/issues/39334#issuecomment-493327402","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39334","id":493327402,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MzMyNzQwMg==","user":{"login":"Bukhtawar","id":12809319,"node_id":"MDQ6VXNlcjEyODA5MzE5","avatar_url":"https://avatars0.githubusercontent.com/u/12809319?v=4","gravatar_id":"","url":"https://api.github.com/users/Bukhtawar","html_url":"https://github.com/Bukhtawar","followers_url":"https://api.github.com/users/Bukhtawar/followers","following_url":"https://api.github.com/users/Bukhtawar/following{/other_user}","gists_url":"https://api.github.com/users/Bukhtawar/gists{/gist_id}","starred_url":"https://api.github.com/users/Bukhtawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bukhtawar/subscriptions","organizations_url":"https://api.github.com/users/Bukhtawar/orgs","repos_url":"https://api.github.com/users/Bukhtawar/repos","events_url":"https://api.github.com/users/Bukhtawar/events{/privacy}","received_events_url":"https://api.github.com/users/Bukhtawar/received_events","type":"User","site_admin":false},"created_at":"2019-05-17T05:42:43Z","updated_at":"2019-05-17T12:27:05Z","author_association":"CONTRIBUTOR","body":"@DaveCTurner can you please review this. Also by \r\n>We think the block should be removed only when the disk usage is at least 5% below the flood_stage watermark and below the high watermark.\r\n\r\nyou mean with low/high/flood at 85/90/95 respectively release should happen at 5% less from 95 i.e below 90(which is also where high disk watermark is)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/493642316","html_url":"https://github.com/elastic/elasticsearch/issues/39334#issuecomment-493642316","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39334","id":493642316,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MzY0MjMxNg==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2019-05-18T02:42:07Z","updated_at":"2019-05-18T02:43:58Z","author_association":"CONTRIBUTOR","body":"> can you please review this \r\n\r\nI'm not wholly sure what you mean by \"this\". If you are talking about #40338, it's better to add comments like this to the PR itself rather than here on this issue.\r\n\r\nAlso I left a review of #40338 three weeks ago and none of my comments have been addressed yet. I have nothing more to add at this time.\r\n\r\n> you mean with low/high/flood at 85/90/95 respectively release should happen at 5% less from 95 i.e below 90(which is also where high disk watermark is)\r\n\r\nThat sounds like a better interpretation than the one proposed in #40338 right now, but only makes sense if the watermarks are given as percentages. If given as absolute values, we'll need to do something else.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/493679734","html_url":"https://github.com/elastic/elasticsearch/issues/39334#issuecomment-493679734","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39334","id":493679734,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MzY3OTczNA==","user":{"login":"Bukhtawar","id":12809319,"node_id":"MDQ6VXNlcjEyODA5MzE5","avatar_url":"https://avatars0.githubusercontent.com/u/12809319?v=4","gravatar_id":"","url":"https://api.github.com/users/Bukhtawar","html_url":"https://github.com/Bukhtawar","followers_url":"https://api.github.com/users/Bukhtawar/followers","following_url":"https://api.github.com/users/Bukhtawar/following{/other_user}","gists_url":"https://api.github.com/users/Bukhtawar/gists{/gist_id}","starred_url":"https://api.github.com/users/Bukhtawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bukhtawar/subscriptions","organizations_url":"https://api.github.com/users/Bukhtawar/orgs","repos_url":"https://api.github.com/users/Bukhtawar/repos","events_url":"https://api.github.com/users/Bukhtawar/events{/privacy}","received_events_url":"https://api.github.com/users/Bukhtawar/received_events","type":"User","site_admin":false},"created_at":"2019-05-18T14:06:55Z","updated_at":"2019-05-19T17:00:03Z","author_association":"CONTRIBUTOR","body":"@alex101101 I can take over the PR to address the comments left by @DaveCTurner.  Please let me know if you wish to continue.\r\nI am not quite sure if we should have the 5% below the flood watermark check for auto-release since in most of the cases threshold below the high water should be good enough.\r\n5% may just be too large for bigger instances(>1Tb). Similarly 5gb might also be too big for smaller instances (<10Gb). In which case customers might need a new setting to get auto-release at par with their existing watermark settings.\r\nIMHO I think a new setting here would only complicate stuffs and most of the times auto-release below the high watermark might suffice(assuming customer has configured them correctly). Setting the watermark very close or configuring the same value for low/high/flood defeats the purpose\r\n@DaveCTurner thoughts?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/494019782","html_url":"https://github.com/elastic/elasticsearch/issues/39334#issuecomment-494019782","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39334","id":494019782,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NDAxOTc4Mg==","user":{"login":"vigyasharma","id":869395,"node_id":"MDQ6VXNlcjg2OTM5NQ==","avatar_url":"https://avatars3.githubusercontent.com/u/869395?v=4","gravatar_id":"","url":"https://api.github.com/users/vigyasharma","html_url":"https://github.com/vigyasharma","followers_url":"https://api.github.com/users/vigyasharma/followers","following_url":"https://api.github.com/users/vigyasharma/following{/other_user}","gists_url":"https://api.github.com/users/vigyasharma/gists{/gist_id}","starred_url":"https://api.github.com/users/vigyasharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vigyasharma/subscriptions","organizations_url":"https://api.github.com/users/vigyasharma/orgs","repos_url":"https://api.github.com/users/vigyasharma/repos","events_url":"https://api.github.com/users/vigyasharma/events{/privacy}","received_events_url":"https://api.github.com/users/vigyasharma/received_events","type":"User","site_admin":false},"created_at":"2019-05-20T14:49:16Z","updated_at":"2019-05-20T14:49:16Z","author_association":"CONTRIBUTOR","body":"+1 for clearing blocks when cluster goes `below high watermark`.\r\n\r\nThis keeps it configurable while also telling users that some reasonable space needs to be cleared. I don't think people would set high watermark very far from flood stage, so it should not delay unblocking by a lot.\r\n\r\nThe default settings anyway provide 5% buffer. And if high watermark is explicitly set too close to flood stage, then it's a conscious risk we've taken.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/494133053","html_url":"https://github.com/elastic/elasticsearch/issues/39334#issuecomment-494133053","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39334","id":494133053,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NDEzMzA1Mw==","user":{"login":"alex101101","id":20016849,"node_id":"MDQ6VXNlcjIwMDE2ODQ5","avatar_url":"https://avatars3.githubusercontent.com/u/20016849?v=4","gravatar_id":"","url":"https://api.github.com/users/alex101101","html_url":"https://github.com/alex101101","followers_url":"https://api.github.com/users/alex101101/followers","following_url":"https://api.github.com/users/alex101101/following{/other_user}","gists_url":"https://api.github.com/users/alex101101/gists{/gist_id}","starred_url":"https://api.github.com/users/alex101101/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alex101101/subscriptions","organizations_url":"https://api.github.com/users/alex101101/orgs","repos_url":"https://api.github.com/users/alex101101/repos","events_url":"https://api.github.com/users/alex101101/events{/privacy}","received_events_url":"https://api.github.com/users/alex101101/received_events","type":"User","site_admin":false},"created_at":"2019-05-20T20:10:55Z","updated_at":"2019-05-20T20:10:55Z","author_association":"CONTRIBUTOR","body":"Hi. Sorry that I haven't been able to revise my original dev, haven't had the time in the last few weeks to properly look into the options. Yes it's definitely fine for you to take over @Bukhtawar, thanks for asking.","performed_via_github_app":null}]