[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/119428806","html_url":"https://github.com/elastic/elasticsearch/issues/12103#issuecomment-119428806","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12103","id":119428806,"node_id":"MDEyOklzc3VlQ29tbWVudDExOTQyODgwNg==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-07-08T04:39:25Z","updated_at":"2015-07-08T04:39:25Z","author_association":"MEMBER","body":"Thanks for reporting @jprante! This seems like a bug. I'm investigating.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/119460562","html_url":"https://github.com/elastic/elasticsearch/issues/12103#issuecomment-119460562","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12103","id":119460562,"node_id":"MDEyOklzc3VlQ29tbWVudDExOTQ2MDU2Mg==","user":{"login":"jprante","id":635745,"node_id":"MDQ6VXNlcjYzNTc0NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/635745?v=4","gravatar_id":"","url":"https://api.github.com/users/jprante","html_url":"https://github.com/jprante","followers_url":"https://api.github.com/users/jprante/followers","following_url":"https://api.github.com/users/jprante/following{/other_user}","gists_url":"https://api.github.com/users/jprante/gists{/gist_id}","starred_url":"https://api.github.com/users/jprante/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jprante/subscriptions","organizations_url":"https://api.github.com/users/jprante/orgs","repos_url":"https://api.github.com/users/jprante/repos","events_url":"https://api.github.com/users/jprante/events{/privacy}","received_events_url":"https://api.github.com/users/jprante/received_events","type":"User","site_admin":false},"created_at":"2015-07-08T06:57:18Z","updated_at":"2015-07-08T06:57:18Z","author_association":"CONTRIBUTOR","body":"I found a solution, in the custom mapper implementation, this change makes the error disappear:\n\nFrom\n\n```\n    @Override\n    public XContentBuilder toXContent(XContentBuilder builder, Params params) throws IOException {\n        builder.startObject(name());\n        builder.field(\"type\", CONTENT_TYPE);\n```\n\nto \n\n```\n    @Override\n    public XContentBuilder toXContent(XContentBuilder builder, Params params) throws IOException {\n        builder.startObject(simpleName());\n        builder.field(\"type\", CONTENT_TYPE);\n        ...\n```\n\nMaybe other (custom) mapper implementations need to serialize to `simpleName()`, too?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/119465424","html_url":"https://github.com/elastic/elasticsearch/issues/12103#issuecomment-119465424","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12103","id":119465424,"node_id":"MDEyOklzc3VlQ29tbWVudDExOTQ2NTQyNA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-07-08T07:11:36Z","updated_at":"2015-07-08T07:11:36Z","author_association":"MEMBER","body":"Ah yes, that would cause the problem! name() now returns the full path, while simpleName() is the immediate field name and intended for serialization as you are now using it. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/119628322","html_url":"https://github.com/elastic/elasticsearch/issues/12103#issuecomment-119628322","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12103","id":119628322,"node_id":"MDEyOklzc3VlQ29tbWVudDExOTYyODMyMg==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-07-08T15:35:56Z","updated_at":"2015-07-08T15:35:56Z","author_association":"CONTRIBUTOR","body":"Closing as the problem looks solved to me.\n","performed_via_github_app":null}]