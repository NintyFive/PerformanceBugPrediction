[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/651053647","html_url":"https://github.com/elastic/elasticsearch/issues/58260#issuecomment-651053647","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58260","id":651053647,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTA1MzY0Nw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-06-29T11:29:59Z","updated_at":"2020-06-29T11:29:59Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed (:Distributed/Snapshot/Restore)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/651993082","html_url":"https://github.com/elastic/elasticsearch/issues/58260#issuecomment-651993082","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58260","id":651993082,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTk5MzA4Mg==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2020-06-30T19:20:14Z","updated_at":"2020-06-30T19:20:14Z","author_association":"MEMBER","body":"A failure similar to this keeps happening on my 7.x branch, the failure from Jenkins is:\r\n\r\n```\r\n13:00:22 org.elasticsearch.xpack.searchablesnapshots.AzureSearchableSnapshotsIT > testStats FAILED\r\n13:00:22     java.net.SocketTimeoutException: 60.000 milliseconds timeout on connection http-outgoing-2 [ACTIVE]\r\n13:00:22         at __randomizedtesting.SeedInfo.seed([62E41241059D1483:F8654BFE6D41DAA0]:0)\r\n13:00:22         at org.elasticsearch.client.RestClient.extractAndWrapCause(RestClient.java:818)\r\n13:00:22         at org.elasticsearch.client.RestClient.performRequest(RestClient.java:250)\r\n13:00:22         at org.elasticsearch.client.RestClient.performRequest(RestClient.java:253)\r\n13:00:22         at org.elasticsearch.client.RestClient.performRequest(RestClient.java:237)\r\n13:00:22         at org.elasticsearch.xpack.searchablesnapshots.AbstractSearchableSnapshotsRestTestCase.registerRepository(AbstractSearchableSnapshotsRestTestCase.java:255)\r\n13:00:22         at org.elasticsearch.xpack.searchablesnapshots.AbstractSearchableSnapshotsRestTestCase.runSearchableSnapshotsTest(AbstractSearchableSnapshotsRestTestCase.java:56)\r\n13:00:22         at org.elasticsearch.xpack.searchablesnapshots.AbstractSearchableSnapshotsRestTestCase.testStats(AbstractSearchableSnapshotsRestTestCase.java:164)\r\n```\r\n\r\nAnd in the ES logs there are the following errors:\r\n\r\n```\r\n[2020-06-30T19:00:24,576][WARN ][r.suppressed             ] [integTest-0] path: _snapshot/repository, params: {repository=repository}\r\norg.elasticsearch.repositories.RepositoryVerificationException: [repository] path [_searchable_snapshots_tests_62E41241059D1483] is not accessible on master node\r\n\tat org.elasticsearch.repositories.blobstore.BlobStoreRepository.startVerification(BlobStoreRepository.java:1165) ~[elasticsearch-7.9.0-SNAPSHOT.jar:7.9.0-SNAPSHOT]\r\n\tat org.elasticsearch.repositories.RepositoriesService$3.doRun(RepositoriesService.java:248) ~[elasticsearch-7.9.0-SNAPSHOT.jar:7.9.0-SNAPSHOT]\r\n\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:710) [elasticsearch-7.9.0-SNAPSHOT.jar:7.9.0-SNAPSHOT]\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) [elasticsearch-7.9.0-SNAPSHOT.jar:7.9.0-SNAPSHOT]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_241]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_241]\r\n\tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_241]\r\nCaused by: java.io.IOException: Can not write blob master.dat\r\n\tat org.elasticsearch.repositories.azure.AzureBlobContainer.writeBlob(AzureBlobContainer.java:116) ~[?:?]\r\n\tat org.elasticsearch.repositories.azure.AzureBlobContainer.writeBlobAtomic(AzureBlobContainer.java:122) ~[?:?]\r\n\tat org.elasticsearch.repositories.blobstore.BlobStoreRepository.startVerification(BlobStoreRepository.java:1160) ~[elasticsearch-7.9.0-SNAPSHOT.jar:7.9.0-SNAPSHOT]\r\n\t... 6 more\r\nCaused by: com.microsoft.azure.storage.StorageException: An unknown failure occurred : Unexpected end of file from server\r\n\tat com.microsoft.azure.storage.StorageException.translateException(StorageException.java:67) ~[?:?]\r\n\tat com.microsoft.azure.storage.core.ExecutionEngine.executeWithRetry(ExecutionEngine.java:220) ~[?:?]\r\n\tat com.microsoft.azure.storage.blob.CloudBlockBlob.uploadFullBlob(CloudBlockBlob.java:1035) ~[?:?]\r\n\tat com.microsoft.azure.storage.blob.CloudBlockBlob.upload(CloudBlockBlob.java:864) ~[?:?]\r\n\tat com.microsoft.azure.storage.blob.CloudBlockBlob.upload(CloudBlockBlob.java:743) ~[?:?]\r\n\tat org.elasticsearch.repositories.azure.AzureBlobStore.lambda$writeBlob$18(AzureBlobStore.java:323) ~[?:?]\r\n\tat org.elasticsearch.repositories.azure.SocketAccess.lambda$doPrivilegedVoidException$0(SocketAccess.java:69) ~[?:?]\r\n\tat java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_241]\r\n\tat org.elasticsearch.repositories.azure.SocketAccess.doPrivilegedVoidException(SocketAccess.java:68) ~[?:?]\r\n\tat org.elasticsearch.repositories.azure.AzureBlobStore.writeBlob(AzureBlobStore.java:322) ~[?:?]\r\n\tat org.elasticsearch.repositories.azure.AzureBlobContainer.writeBlob(AzureBlobContainer.java:114) ~[?:?]\r\n\tat org.elasticsearch.repositories.azure.AzureBlobContainer.writeBlobAtomic(AzureBlobContainer.java:122) ~[?:?]\r\n\tat org.elasticsearch.repositories.blobstore.BlobStoreRepository.startVerification(BlobStoreRepository.java:1160) ~[elasticsearch-7.9.0-SNAPSHOT.jar:7.9.0-SNAPSHOT]\r\n\t... 6 more\r\nCaused by: java.net.SocketException: Unexpected end of file from server\r\n\tat sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:851) ~[?:?]\r\n\tat sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:678) ~[?:?]\r\n\tat sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1593) ~[?:?]\r\n\tat sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1498) ~[?:?]\r\n\tat java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:480) ~[?:1.8.0_241]\r\n\tat com.microsoft.azure.storage.core.ExecutionEngine.executeWithRetry(ExecutionEngine.java:115) ~[?:?]\r\n\tat com.microsoft.azure.storage.blob.CloudBlockBlob.uploadFullBlob(CloudBlockBlob.java:1035) ~[?:?]\r\n\tat com.microsoft.azure.storage.blob.CloudBlockBlob.upload(CloudBlockBlob.java:864) ~[?:?]\r\n\tat com.microsoft.azure.storage.blob.CloudBlockBlob.upload(CloudBlockBlob.java:743) ~[?:?]\r\n\tat org.elasticsearch.repositories.azure.AzureBlobStore.lambda$writeBlob$18(AzureBlobStore.java:323) ~[?:?]\r\n\tat org.elasticsearch.repositories.azure.SocketAccess.lambda$doPrivilegedVoidException$0(SocketAccess.java:69) ~[?:?]\r\n\tat java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_241]\r\n\tat org.elasticsearch.repositories.azure.SocketAccess.doPrivilegedVoidException(SocketAccess.java:68) ~[?:?]\r\n\tat org.elasticsearch.repositories.azure.AzureBlobStore.writeBlob(AzureBlobStore.java:322) ~[?:?]\r\n\tat org.elasticsearch.repositories.azure.AzureBlobContainer.writeBlob(AzureBlobContainer.java:114) ~[?:?]\r\n\tat org.elasticsearch.repositories.azure.AzureBlobContainer.writeBlobAtomic(AzureBlobContainer.java:122) ~[?:?]\r\n\tat org.elasticsearch.repositories.blobstore.BlobStoreRepository.startVerification(BlobStoreRepository.java:1160) ~[elasticsearch-7.9.0-SNAPSHOT.jar:7.9.0-SNAPSHOT]\r\n\t... 6 more\r\n```\r\n\r\nI haven't been able to reproduce it locally however (although it fails every time on my 7.x PR). A build scan is at https://gradle-enterprise.elastic.co/s/zrslbr2ihbsvs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/651998249","html_url":"https://github.com/elastic/elasticsearch/issues/58260#issuecomment-651998249","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58260","id":651998249,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTk5ODI0OQ==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2020-06-30T19:31:09Z","updated_at":"2020-06-30T19:31:09Z","author_association":"MEMBER","body":"I muted this on 7.x","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/652247534","html_url":"https://github.com/elastic/elasticsearch/issues/58260#issuecomment-652247534","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58260","id":652247534,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MjI0NzUzNA==","user":{"login":"breskeby","id":77300,"node_id":"MDQ6VXNlcjc3MzAw","avatar_url":"https://avatars3.githubusercontent.com/u/77300?v=4","gravatar_id":"","url":"https://api.github.com/users/breskeby","html_url":"https://github.com/breskeby","followers_url":"https://api.github.com/users/breskeby/followers","following_url":"https://api.github.com/users/breskeby/following{/other_user}","gists_url":"https://api.github.com/users/breskeby/gists{/gist_id}","starred_url":"https://api.github.com/users/breskeby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/breskeby/subscriptions","organizations_url":"https://api.github.com/users/breskeby/orgs","repos_url":"https://api.github.com/users/breskeby/repos","events_url":"https://api.github.com/users/breskeby/events{/privacy}","received_events_url":"https://api.github.com/users/breskeby/received_events","type":"User","site_admin":false},"created_at":"2020-07-01T07:35:35Z","updated_at":"2020-07-01T07:35:35Z","author_association":"CONTRIBUTOR","body":"I cherry-picked the mute down to 7.8","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/658692396","html_url":"https://github.com/elastic/elasticsearch/issues/58260#issuecomment-658692396","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58260","id":658692396,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODY5MjM5Ng==","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2020-07-15T10:37:39Z","updated_at":"2020-07-15T10:37:39Z","author_association":"MEMBER","body":"The test initially failed because of repository base paths being the same for tests running in parallel: this has been fixed in #58664. Then the test times out because of a deadlock that is now fixed by #59595.\r\n\r\nWith these two changes now merged, I'm going to unmute the test on master and see how it goes. If there's no failures then I'll unmute in all branches. \r\n\r\nPlease do reopen if the test fails again on master.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/659944534","html_url":"https://github.com/elastic/elasticsearch/issues/58260#issuecomment-659944534","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58260","id":659944534,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTk0NDUzNA==","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2020-07-17T08:04:11Z","updated_at":"2020-07-17T08:04:11Z","author_association":"MEMBER","body":"This test has been unmuted on 7.x (#59749), 7.9 (#59752) and 7.8 (#59750).","performed_via_github_app":null}]