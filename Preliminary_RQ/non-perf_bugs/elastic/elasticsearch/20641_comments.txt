[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/249186109","html_url":"https://github.com/elastic/elasticsearch/issues/20641#issuecomment-249186109","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20641","id":249186109,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTE4NjEwOQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-09-23T13:02:09Z","updated_at":"2016-09-23T13:02:09Z","author_association":"CONTRIBUTOR","body":"Hi @LeonardGC \n\nI've tried your recreation several times, and I always get the same mappings:\n\n```\nDELETE t\n\nPUT t\n{\n  \"settings\": {\n    \"analysis\": {\n      \"analyzer\": {\n        \"default\": {\n          \"type\": \"custom\",\n          \"tokenizer\": \"standard\",\n          \"filter\": [\n            \"standard\",\n            \"lowercase\",\n            \"asciifolding\"\n          ]\n        },\n        \"lowercasedRaw\": {\n          \"type\": \"custom\",\n          \"tokenizer\": \"keyword\",\n          \"filter\": [\n            \"lowercase\"\n          ]\n        }\n      }\n    }\n  },\n  \"mappings\": {\n    \"_default_\": {\n      \"dynamic_templates\": [\n        {\n          \"testString\": {\n            \"match_mapping_type\": \"string\",\n            \"match\": \"test\",\n            \"mapping\": {\n              \"type\": \"string\",\n              \"analyzer\": \"lowercasedRaw\",\n              \"index\": \"analyzed\",\n              \"fields\": {\n                \"analyzed\": {\n                  \"type\": \"string\",\n                  \"index\": \"analyzed\",\n                  \"analyzer\": \"default\"\n                }\n              }\n            }\n          }\n        },\n        {\n          \"testString\": {\n            \"match_mapping_type\": \"string\",\n            \"mapping\": {\n              \"analyzer\": \"lowercasedRaw\",\n              \"index\": \"analyzed\",\n              \"type\": \"string\"\n            }\n          }\n        }\n      ]\n    }\n  }\n}\n```\n\nThis request:\n\n```\nPOST t/_bulk\n{\"index\":{\"_type\" : \"log\", \"_id\" : \"1\" } }\n{\"test\":\"testing\"}\n{\"index\":{\"_type\" : \"log\", \"_id\" : \"2\" } }\n{\"group\":\"U2\"}\n\nGET _mapping?filter_path=**.properties\n```\n\nreturns \n\n```\n{\n  \"t\": {\n    \"mappings\": {\n      \"log\": {\n        \"properties\": {\n          \"group\": {\n            \"type\": \"text\",\n            \"analyzer\": \"lowercasedRaw\"\n          },\n          \"test\": {\n            \"type\": \"text\",\n            \"fields\": {\n              \"analyzed\": {\n                \"type\": \"text\"\n              }\n            },\n            \"analyzer\": \"lowercasedRaw\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nand so does     \n\n```\nPOST t/_bulk\n{\"index\":{\"_type\" : \"log\", \"_id\" : \"2\" } }\n{\"group\":\"U2\"}\n{\"index\":{\"_type\" : \"log\", \"_id\" : \"1\" } }\n{\"test\":\"testing\"}\n```\n\n(Obviously I'm deleting the index in between the two tests)    \n\nYou want to try it out again and check?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/249194212","html_url":"https://github.com/elastic/elasticsearch/issues/20641#issuecomment-249194212","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20641","id":249194212,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTE5NDIxMg==","user":{"login":"LeonardGC","id":8624699,"node_id":"MDQ6VXNlcjg2MjQ2OTk=","avatar_url":"https://avatars2.githubusercontent.com/u/8624699?v=4","gravatar_id":"","url":"https://api.github.com/users/LeonardGC","html_url":"https://github.com/LeonardGC","followers_url":"https://api.github.com/users/LeonardGC/followers","following_url":"https://api.github.com/users/LeonardGC/following{/other_user}","gists_url":"https://api.github.com/users/LeonardGC/gists{/gist_id}","starred_url":"https://api.github.com/users/LeonardGC/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LeonardGC/subscriptions","organizations_url":"https://api.github.com/users/LeonardGC/orgs","repos_url":"https://api.github.com/users/LeonardGC/repos","events_url":"https://api.github.com/users/LeonardGC/events{/privacy}","received_events_url":"https://api.github.com/users/LeonardGC/received_events","type":"User","site_admin":false},"created_at":"2016-09-23T13:33:46Z","updated_at":"2016-09-23T13:33:46Z","author_association":"CONTRIBUTOR","body":"Hi @clintongormley \n\nYou are right, I can't duplicate it with my example, BUT, I can replicate it with some small change.\nJust rename the \"testString\" to \"strings\":\n\n```\n{\n  \"settings\": {\n    \"analysis\": {\n      \"analyzer\": {\n        \"default\": {\n          \"type\": \"custom\",\n          \"tokenizer\": \"standard\",\n          \"filter\": [\n            \"standard\",\n            \"lowercase\",\n            \"asciifolding\"\n          ]\n        },\n        \"lowercasedRaw\": {\n          \"type\": \"custom\",\n          \"tokenizer\": \"keyword\",\n          \"filter\": [\n            \"lowercase\"\n          ]\n        }\n      }\n    }\n  },\n  \"mappings\": {\n    \"_default_\": {\n      \"dynamic_templates\": [\n        /* all \"test\" fields have an analyzed subfield added */\n        {\n          \"strings\": {\n            \"match_mapping_type\": \"string\",\n            \"match\" : \"test\",\n            \"mapping\": {\n              \"type\": \"string\",\n              \"analyzer\": \"lowercasedRaw\",\n              \"index\": \"analyzed\",\n              \"fields\": {\n                \"analyzed\": {\n                  \"type\": \"string\",\n                  \"index\": \"analyzed\",\n                  \"analyzer\": \"default\"\n                }\n              }\n            }\n          }\n        },\n        /* string fields are by default analyzed with the lowercasedRaw analyzer */\n        /* NOTICE the duplicate \"strings\" name */\n        {\n          \"strings\": {\n            \"match_mapping_type\": \"string\",\n            \"mapping\": {\n              \"analyzer\": \"lowercasedRaw\",\n              \"index\": \"analyzed\",\n              \"type\": \"string\"\n            }\n          }\n        }\n      ]\n    }\n  }\n}\n```\n\nIs this a reserved name?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/249214688","html_url":"https://github.com/elastic/elasticsearch/issues/20641#issuecomment-249214688","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20641","id":249214688,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTIxNDY4OA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-09-23T14:54:52Z","updated_at":"2016-09-23T14:54:52Z","author_association":"CONTRIBUTOR","body":"I get exactly the same thing as before.  At first I thought it might be the comments but I tried with the comments and it all still works.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/249214815","html_url":"https://github.com/elastic/elasticsearch/issues/20641#issuecomment-249214815","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20641","id":249214815,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTIxNDgxNQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-09-23T14:55:19Z","updated_at":"2016-09-23T14:55:19Z","author_association":"CONTRIBUTOR","body":"Can you paste EXACTLY the steps you are taking to demonstrate the problem?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/249508841","html_url":"https://github.com/elastic/elasticsearch/issues/20641#issuecomment-249508841","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20641","id":249508841,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTUwODg0MQ==","user":{"login":"LeonardGC","id":8624699,"node_id":"MDQ6VXNlcjg2MjQ2OTk=","avatar_url":"https://avatars2.githubusercontent.com/u/8624699?v=4","gravatar_id":"","url":"https://api.github.com/users/LeonardGC","html_url":"https://github.com/LeonardGC","followers_url":"https://api.github.com/users/LeonardGC/followers","following_url":"https://api.github.com/users/LeonardGC/following{/other_user}","gists_url":"https://api.github.com/users/LeonardGC/gists{/gist_id}","starred_url":"https://api.github.com/users/LeonardGC/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LeonardGC/subscriptions","organizations_url":"https://api.github.com/users/LeonardGC/orgs","repos_url":"https://api.github.com/users/LeonardGC/repos","events_url":"https://api.github.com/users/LeonardGC/events{/privacy}","received_events_url":"https://api.github.com/users/LeonardGC/received_events","type":"User","site_admin":false},"created_at":"2016-09-26T08:25:40Z","updated_at":"2016-09-26T08:25:40Z","author_association":"CONTRIBUTOR","body":"@clintongormley \n\nMy deepest apologies. After the weekend I'm also unable to reproduce this. \nI wonder what I have done different though.\nSo false alarm I guess.\n\nSorry for the inconvenience\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252009597","html_url":"https://github.com/elastic/elasticsearch/issues/20641#issuecomment-252009597","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20641","id":252009597,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjAwOTU5Nw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-10-06T16:06:22Z","updated_at":"2016-10-06T16:06:22Z","author_association":"CONTRIBUTOR","body":"thanks for pursuing it @LeonardGC \n","performed_via_github_app":null}]