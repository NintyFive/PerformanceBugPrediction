[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215504898","html_url":"https://github.com/elastic/elasticsearch/issues/17997#issuecomment-215504898","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17997","id":215504898,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTUwNDg5OA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-04-28T17:36:38Z","updated_at":"2016-04-28T17:36:38Z","author_association":"CONTRIBUTOR","body":"@HonzaKral i had similar ideas for the reindex API way back when, but I'm not convinced that this will be enough for practical entity-centric indexing (but would be happy to be proven wrong).\n\nDo you have some practical real-world examples of how you would use this?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/215881355","html_url":"https://github.com/elastic/elasticsearch/issues/17997#issuecomment-215881355","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17997","id":215881355,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNTg4MTM1NQ==","user":{"login":"HonzaKral","id":32132,"node_id":"MDQ6VXNlcjMyMTMy","avatar_url":"https://avatars0.githubusercontent.com/u/32132?v=4","gravatar_id":"","url":"https://api.github.com/users/HonzaKral","html_url":"https://github.com/HonzaKral","followers_url":"https://api.github.com/users/HonzaKral/followers","following_url":"https://api.github.com/users/HonzaKral/following{/other_user}","gists_url":"https://api.github.com/users/HonzaKral/gists{/gist_id}","starred_url":"https://api.github.com/users/HonzaKral/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HonzaKral/subscriptions","organizations_url":"https://api.github.com/users/HonzaKral/orgs","repos_url":"https://api.github.com/users/HonzaKral/repos","events_url":"https://api.github.com/users/HonzaKral/events{/privacy}","received_events_url":"https://api.github.com/users/HonzaKral/received_events","type":"User","site_admin":false},"created_at":"2016-04-29T21:04:12Z","updated_at":"2016-04-29T21:04:12Z","author_association":"MEMBER","body":"My example is web server logs -> web sessions. The update script would go like:\n\n```\nsession.start = min(session.start, event.timestamp)\nsession.end = max(session.end, event.timestamp)\nsession.length = session.end - session.start\nif event.user:\n    session.username = event.user.name\n    session.subscribed = event.user.subscribed\n...\n```\n\nWhere `session` is the aggregated doc and `event` is the single event. This is a fairly simple example that could easily be done and would be very useful in real life.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/216195286","html_url":"https://github.com/elastic/elasticsearch/issues/17997#issuecomment-216195286","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17997","id":216195286,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNjE5NTI4Ng==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-05-02T10:42:33Z","updated_at":"2016-05-02T10:42:33Z","author_association":"CONTRIBUTOR","body":"Makes sense.  It wouldn't be super-simple fitting this into the reindex functionality because reindex gets a document, but the example you provide would actually need to receive the document as a parameter to a script, and it would need to handle upserts as `scripted_upsert`.\n\nI'm wondering if reindex is the right place for this, or if we can think of a better dedicated API which makes this job easier.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/299129712","html_url":"https://github.com/elastic/elasticsearch/issues/17997#issuecomment-299129712","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17997","id":299129712,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTEyOTcxMg==","user":{"login":"dmarkhas","id":16191105,"node_id":"MDQ6VXNlcjE2MTkxMTA1","avatar_url":"https://avatars3.githubusercontent.com/u/16191105?v=4","gravatar_id":"","url":"https://api.github.com/users/dmarkhas","html_url":"https://github.com/dmarkhas","followers_url":"https://api.github.com/users/dmarkhas/followers","following_url":"https://api.github.com/users/dmarkhas/following{/other_user}","gists_url":"https://api.github.com/users/dmarkhas/gists{/gist_id}","starred_url":"https://api.github.com/users/dmarkhas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmarkhas/subscriptions","organizations_url":"https://api.github.com/users/dmarkhas/orgs","repos_url":"https://api.github.com/users/dmarkhas/repos","events_url":"https://api.github.com/users/dmarkhas/events{/privacy}","received_events_url":"https://api.github.com/users/dmarkhas/received_events","type":"User","site_admin":false},"created_at":"2017-05-04T08:52:11Z","updated_at":"2017-05-04T08:52:11Z","author_association":"NONE","body":"Are there any plans to incorporate this in a future release?\r\nWe also have a use case for doing updates with reindex, since we're trying to accomplish something similar to SQL Server merge process.\r\n\r\nWe have an index of raw ingested data, and an index of \"processed\" data where the processing is really just merging the inbound logs by some key (a field or a set of fields).\r\nRight now we have to read the data out of the raw data index (with logstash or Spark or whatever), and write it back in to the processed index with the update API, which is very wasteful (there are some reasons why we can't ingest data directly into the processed index).\r\nIt would be nice if reindex could implement an update functionality, not just overwriting the existing documents.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/299237906","html_url":"https://github.com/elastic/elasticsearch/issues/17997#issuecomment-299237906","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17997","id":299237906,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTIzNzkwNg==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2017-05-04T16:26:59Z","updated_at":"2017-05-04T16:26:59Z","author_association":"CONTRIBUTOR","body":"I'm not planning on working on this, no.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/321781999","html_url":"https://github.com/elastic/elasticsearch/issues/17997#issuecomment-321781999","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17997","id":321781999,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMTc4MTk5OQ==","user":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"created_at":"2017-08-11T10:46:45Z","updated_at":"2017-08-11T10:46:45Z","author_association":"CONTRIBUTOR","body":"There's an added wrinkle to entity-centric updates that makes it unlike a reindex.\r\nIdeally multiple events for the same entity are incorporated into a single update for efficiency's sake. Think of the flurry of weblog events generated by your browser opening this webpage and requests to load html/css/js/images etc. We don't want a one-to-one correlation between logged events and update operations on entities for efficiency's sake.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/334987566","html_url":"https://github.com/elastic/elasticsearch/issues/17997#issuecomment-334987566","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17997","id":334987566,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDk4NzU2Ng==","user":{"login":"shaharmor","id":10861920,"node_id":"MDQ6VXNlcjEwODYxOTIw","avatar_url":"https://avatars3.githubusercontent.com/u/10861920?v=4","gravatar_id":"","url":"https://api.github.com/users/shaharmor","html_url":"https://github.com/shaharmor","followers_url":"https://api.github.com/users/shaharmor/followers","following_url":"https://api.github.com/users/shaharmor/following{/other_user}","gists_url":"https://api.github.com/users/shaharmor/gists{/gist_id}","starred_url":"https://api.github.com/users/shaharmor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shaharmor/subscriptions","organizations_url":"https://api.github.com/users/shaharmor/orgs","repos_url":"https://api.github.com/users/shaharmor/repos","events_url":"https://api.github.com/users/shaharmor/events{/privacy}","received_events_url":"https://api.github.com/users/shaharmor/received_events","type":"User","site_admin":false},"created_at":"2017-10-08T07:01:41Z","updated_at":"2017-10-08T07:01:41Z","author_association":"NONE","body":"We need this as well to create pre-aggregated indices for bigger time intervals.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/482475564","html_url":"https://github.com/elastic/elasticsearch/issues/17997#issuecomment-482475564","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17997","id":482475564,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MjQ3NTU2NA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-04-12T07:50:24Z","updated_at":"2019-04-12T07:50:24Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/508119933","html_url":"https://github.com/elastic/elasticsearch/issues/17997#issuecomment-508119933","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17997","id":508119933,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODExOTkzMw==","user":{"login":"henningandersen","id":33268011,"node_id":"MDQ6VXNlcjMzMjY4MDEx","avatar_url":"https://avatars2.githubusercontent.com/u/33268011?v=4","gravatar_id":"","url":"https://api.github.com/users/henningandersen","html_url":"https://github.com/henningandersen","followers_url":"https://api.github.com/users/henningandersen/followers","following_url":"https://api.github.com/users/henningandersen/following{/other_user}","gists_url":"https://api.github.com/users/henningandersen/gists{/gist_id}","starred_url":"https://api.github.com/users/henningandersen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henningandersen/subscriptions","organizations_url":"https://api.github.com/users/henningandersen/orgs","repos_url":"https://api.github.com/users/henningandersen/repos","events_url":"https://api.github.com/users/henningandersen/events{/privacy}","received_events_url":"https://api.github.com/users/henningandersen/received_events","type":"User","site_admin":false},"created_at":"2019-07-03T14:34:16Z","updated_at":"2019-07-03T14:34:16Z","author_association":"CONTRIBUTOR","body":"The primary purpose of reindex is to copy data from one index to another either for upgrades, mapping/schema changes or migration between clusters. These are all one to one cases which is also the assumption in reindex. Adding aggregation style functionality into the mix should be carefully considered in order to not unnecessarily complicate both the API and the implementation. We currently think this is better handled separately, as described in #40002. That issue addresses entity centric indexing and we suggest to continue the conversation there and will therefore close this issue.","performed_via_github_app":null}]