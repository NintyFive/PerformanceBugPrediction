[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/86865378","html_url":"https://github.com/elastic/elasticsearch/issues/10291#issuecomment-86865378","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10291","id":86865378,"node_id":"MDEyOklzc3VlQ29tbWVudDg2ODY1Mzc4","user":{"login":"zolaahihi","id":3643184,"node_id":"MDQ6VXNlcjM2NDMxODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/3643184?v=4","gravatar_id":"","url":"https://api.github.com/users/zolaahihi","html_url":"https://github.com/zolaahihi","followers_url":"https://api.github.com/users/zolaahihi/followers","following_url":"https://api.github.com/users/zolaahihi/following{/other_user}","gists_url":"https://api.github.com/users/zolaahihi/gists{/gist_id}","starred_url":"https://api.github.com/users/zolaahihi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zolaahihi/subscriptions","organizations_url":"https://api.github.com/users/zolaahihi/orgs","repos_url":"https://api.github.com/users/zolaahihi/repos","events_url":"https://api.github.com/users/zolaahihi/events{/privacy}","received_events_url":"https://api.github.com/users/zolaahihi/received_events","type":"User","site_admin":false},"created_at":"2015-03-27T08:20:29Z","updated_at":"2015-03-27T08:20:29Z","author_association":"NONE","body":"When the ES service started, I try to run, curl 'localhost:9200/_cluster/stats?network=true&transport=true&http=true&thread_pool=true&indices=false&pretty=true'\n\nAnd I get the result:\n      \"open_file_descriptors\" : {\n        \"min\" : 211,\n        \"max\" : 211,\n        \"avg\" : 211\n      }\n\nwhy open_file_descriptors are very large :(\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/86879807","html_url":"https://github.com/elastic/elasticsearch/issues/10291#issuecomment-86879807","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10291","id":86879807,"node_id":"MDEyOklzc3VlQ29tbWVudDg2ODc5ODA3","user":{"login":"zolaahihi","id":3643184,"node_id":"MDQ6VXNlcjM2NDMxODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/3643184?v=4","gravatar_id":"","url":"https://api.github.com/users/zolaahihi","html_url":"https://github.com/zolaahihi","followers_url":"https://api.github.com/users/zolaahihi/followers","following_url":"https://api.github.com/users/zolaahihi/following{/other_user}","gists_url":"https://api.github.com/users/zolaahihi/gists{/gist_id}","starred_url":"https://api.github.com/users/zolaahihi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zolaahihi/subscriptions","organizations_url":"https://api.github.com/users/zolaahihi/orgs","repos_url":"https://api.github.com/users/zolaahihi/repos","events_url":"https://api.github.com/users/zolaahihi/events{/privacy}","received_events_url":"https://api.github.com/users/zolaahihi/received_events","type":"User","site_admin":false},"created_at":"2015-03-27T09:29:09Z","updated_at":"2015-03-27T09:29:09Z","author_association":"NONE","body":"When I switch to version 0.9.x again, here is command \"mpstat -P ALL 1\" response output:\n\n09:27:39     CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest   %idle\n09:27:40     all    0,25    0,00    0,00    0,00    0,00    0,00    0,00    0,00   99,75\n09:27:41     all    0,50    0,00    0,00    0,00    0,00    0,00    0,00    0,00   99,50\n09:27:42     all    0,63    0,00    0,00    0,13    0,00    0,00    0,00    0,00   99,25\n09:27:43     all    0,25    0,00    0,13    0,13    0,00    0,00    0,00    0,00   99,50\n09:27:44     all    0,13    0,00    0,00    0,00    0,00    0,00    0,00    0,00   99,87\n09:27:45     all    1,88    0,00    0,13    0,50    0,00    0,00    0,00    0,00   97,49\n\nwho think that problem is version 1.5 take many CPU?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/87403342","html_url":"https://github.com/elastic/elasticsearch/issues/10291#issuecomment-87403342","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10291","id":87403342,"node_id":"MDEyOklzc3VlQ29tbWVudDg3NDAzMzQy","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-03-29T11:56:04Z","updated_at":"2015-03-29T11:56:04Z","author_association":"CONTRIBUTOR","body":"Hiya\n\nThat network error occurs when the client network connection disconnects, perhaps because you set a request timeout?\n\nIt looks like your Elasticsearch is under severe memory pressure.  You've given it less than one GB of heap, and it needs more to cope with your load.\n\nAlso, you say you had to upgrade ES because of security, but then you have reenabled dynamic scripting, so you are allowing anybody with access to your box to run whatever scripts they want, defeating the point of the upgrade.\n\nThe number of open file descriptors you have is not large at all.  Elasticsearch can easily use many more file handles than you are currently using.\n\nAlso check (look at GET /_nodes) to ensure that mlockall is being applied correctly.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/87403368","html_url":"https://github.com/elastic/elasticsearch/issues/10291#issuecomment-87403368","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10291","id":87403368,"node_id":"MDEyOklzc3VlQ29tbWVudDg3NDAzMzY4","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-03-29T11:56:39Z","updated_at":"2015-03-29T11:56:39Z","author_association":"CONTRIBUTOR","body":"Also you can check what is using all the CPU with the hot threads API, but I think you'll find that it is mostly garbage collection.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/87428564","html_url":"https://github.com/elastic/elasticsearch/issues/10291#issuecomment-87428564","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10291","id":87428564,"node_id":"MDEyOklzc3VlQ29tbWVudDg3NDI4NTY0","user":{"login":"zolaahihi","id":3643184,"node_id":"MDQ6VXNlcjM2NDMxODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/3643184?v=4","gravatar_id":"","url":"https://api.github.com/users/zolaahihi","html_url":"https://github.com/zolaahihi","followers_url":"https://api.github.com/users/zolaahihi/followers","following_url":"https://api.github.com/users/zolaahihi/following{/other_user}","gists_url":"https://api.github.com/users/zolaahihi/gists{/gist_id}","starred_url":"https://api.github.com/users/zolaahihi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zolaahihi/subscriptions","organizations_url":"https://api.github.com/users/zolaahihi/orgs","repos_url":"https://api.github.com/users/zolaahihi/repos","events_url":"https://api.github.com/users/zolaahihi/events{/privacy}","received_events_url":"https://api.github.com/users/zolaahihi/received_events","type":"User","site_admin":false},"created_at":"2015-03-29T15:38:32Z","updated_at":"2015-03-29T15:38:32Z","author_association":"NONE","body":"Hi clintongormley\n\nwhat is the best value of HEAP size should I assign, my server RAM is 4GB (maybe 8GB)\n\ncurrently, the mlockall value is true, is that ok? And what is the hots API.\n\nThank you very much.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/87547121","html_url":"https://github.com/elastic/elasticsearch/issues/10291#issuecomment-87547121","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10291","id":87547121,"node_id":"MDEyOklzc3VlQ29tbWVudDg3NTQ3MTIx","user":{"login":"zolaahihi","id":3643184,"node_id":"MDQ6VXNlcjM2NDMxODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/3643184?v=4","gravatar_id":"","url":"https://api.github.com/users/zolaahihi","html_url":"https://github.com/zolaahihi","followers_url":"https://api.github.com/users/zolaahihi/followers","following_url":"https://api.github.com/users/zolaahihi/following{/other_user}","gists_url":"https://api.github.com/users/zolaahihi/gists{/gist_id}","starred_url":"https://api.github.com/users/zolaahihi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zolaahihi/subscriptions","organizations_url":"https://api.github.com/users/zolaahihi/orgs","repos_url":"https://api.github.com/users/zolaahihi/repos","events_url":"https://api.github.com/users/zolaahihi/events{/privacy}","received_events_url":"https://api.github.com/users/zolaahihi/received_events","type":"User","site_admin":false},"created_at":"2015-03-30T04:56:19Z","updated_at":"2015-03-30T04:56:19Z","author_association":"NONE","body":"Hi guy,\n\nHere is some variables in init script\n\nes_heap_size:  2G\nes_heap_newsize: \nes_min_mem:  512M\nes_max_mem:  1G\nmax_locked_memory: unlimited\n\nI try to add ES_HEAP_SIZE to 2G, and ElasticSearch server run normally for 3 hours, and after that, ES will not response request anymore (like the issue I created).\n\nHere is the lastest log:\n\n[root@ip-10-0-0-230 quydo]# tailf /var/log/elasticsearch/elasticsearch.log  \n[2015-03-30 04:47:41,217][DEBUG][monitor.jvm              ] [Karolina Dean] [gc][old][6235][112] duration [3.5s], collections [1$\n/[4.2s], total [3.5s]/[1.7m], memory [1.6gb]->[1.6gb]/[1.9gb], all_pools {[young] [394.5kb]->[270.9kb]/[266.2mb]}{[survivor] [0b$\n->[0b]/[33.2mb]}{[old] [1.6gb]->[1.6gb]/[1.6gb]}\n[2015-03-30 04:47:47,218][INFO ][monitor.jvm              ] [Karolina Dean] [gc][old][6236][113] duration [5.5s], collections [1$\n/[6s], total [5.5s]/[1.8m], memory [1.6gb]->[1.6gb]/[1.9gb], all_pools {[young] [270.9kb]->[27.3mb]/[266.2mb]}{[survivor] [0b]->$\n0b]/[33.2mb]}{[old] [1.6gb]->[1.6gb]/[1.6gb]}\n[2015-03-30 04:47:53,708][INFO ][monitor.jvm              ] [Karolina Dean] [gc][old][6238][114] duration [5.4s], collections [1$\n/[5.4s], total [5.4s]/[1.9m], memory [1.7gb]->[1.6gb]/[1.9gb], all_pools {[young] [31.9mb]->[167.3kb]/[266.2mb]}{[survivor] [29m$\n]->[0b]/[33.2mb]}{[old] [1.6gb]->[1.6gb]/[1.6gb]}\n[2015-03-30 04:47:58,135][DEBUG][monitor.jvm              ] [Karolina Dean] [gc][old][6239][115] duration [3.4s], collections [1$\n/[4.4s], total [3.4s]/[2m], memory [1.6gb]->[1.6gb]/[1.9gb], all_pools {[young] [167.3kb]->[15.2mb]/[266.2mb]}{[survivor] [0b]->$\n12.1mb]/[33.2mb]}{[old] [1.6gb]->[1.6gb]/[1.6gb]}\n[2015-03-30 04:48:02,313][DEBUG][monitor.jvm              ] [Karolina Dean] [gc][old][6240][116] duration [3.6s], collections [1$\n/[4.1s], total [3.6s]/[2m], memory [1.6gb]->[1.6gb]/[1.9gb], all_pools {[young] [15.2mb]->[1005kb]/[266.2mb]}{[survivor] [12.1mb$\n->[0b]/[33.2mb]}{[old] [1.6gb]->[1.6gb]/[1.6gb]}\n[2015-03-30 04:48:05,667][DEBUG][monitor.jvm              ] [Karolina Dean] [gc][old][6241][117] duration [3.2s], collections [1$\n/[3.3s], total [3.2s]/[2.1m], memory [1.6gb]->[1.6gb]/[1.9gb], all_pools {[young] [1005kb]->[372.4kb]/[266.2mb]}{[survivor] [0b]$\n\n> [0b]/[33.2mb]}{[old] [1.6gb]->[1.6gb]/[1.6gb]}\n> [2015-03-30 04:48:09,417][DEBUG][monitor.jvm              ] [Karolina Dean] [gc][old][6242][118] duration [3.6s], collections [1$\n> /[3.7s], total [3.6s]/[2.2m], memory [1.6gb]->[1.6gb]/[1.9gb], all_pools {[young] [372.4kb]->[45.1kb]/[266.2mb]}{[survivor] [0b]$\n> [0b]/[33.2mb]}{[old] [1.6gb]->[1.6gb]/[1.6gb]}\n> [2015-03-30 04:48:13,156][DEBUG][monitor.jvm              ] [Karolina Dean] [gc][old][6243][119] duration [3.6s], collections [1$\n> /[3.7s], total [3.6s]/[2.2m], memory [1.6gb]->[1.6gb]/[1.9gb], all_pools {[young] [45.1kb]->[410.4kb]/[266.2mb]}{[survivor] [0b]$\n> [0b]/[33.2mb]}{[old] [1.6gb]->[1.6gb]/[1.6gb]}\n> [2015-03-30 04:48:16,903][DEBUG][monitor.jvm              ] [Karolina Dean] [gc][old][6244][120] duration [3.6s], collections [1$\n> /[3.7s], total [3.6s]/[2.3m], memory [1.6gb]->[1.6gb]/[1.9gb], all_pools {[young] [410.4kb]->[501.1kb]/[266.2mb]}{[survivor] [0b$\n> ->[0b]/[33.2mb]}{[old] [1.6gb]->[1.6gb]/[1.6gb]}\n> [2015-03-30 04:48:20,369][DEBUG][monitor.jvm              ] [Karolina Dean] [gc][old][6245][121] duration [3.3s], collections [1]\n> /[3.4s], total [3.3s]/[2.3m], memory [1.6gb]->[1.6gb]/[1.9gb], all_pools {[young] [501.1kb]->[422.1kb]/[266.2mb]}{[survivor] [0b]\n> ->[0b]/[33.2mb]}{[old] [1.6gb]->[1.6gb]/[1.6gb]}\n> [2015-03-30 04:48:23,694][DEBUG][monitor.jvm              ] [Karolina Dean] [gc][old][6246][122] duration [3.2s], collections [1]\n> /[3.3s], total [3.2s]/[2.4m], memory [1.6gb]->[1.6gb]/[1.9gb], all_pools {[young] [422.1kb]->[322.5kb]/[266.2mb]}{[survivor] [0b]\n> ->[0b]/[33.2mb]}{[old] [1.6gb]->[1.6gb]/[1.6gb]}\n\nWhat should I do to solve that problem\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/89764657","html_url":"https://github.com/elastic/elasticsearch/issues/10291#issuecomment-89764657","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10291","id":89764657,"node_id":"MDEyOklzc3VlQ29tbWVudDg5NzY0NjU3","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-04-05T12:44:45Z","updated_at":"2015-04-05T12:44:45Z","author_association":"CONTRIBUTOR","body":"It looks like you need more memory.  Your heap is full.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/126706842","html_url":"https://github.com/elastic/elasticsearch/issues/10291#issuecomment-126706842","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10291","id":126706842,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNjcwNjg0Mg==","user":{"login":"splashx","id":1154133,"node_id":"MDQ6VXNlcjExNTQxMzM=","avatar_url":"https://avatars2.githubusercontent.com/u/1154133?v=4","gravatar_id":"","url":"https://api.github.com/users/splashx","html_url":"https://github.com/splashx","followers_url":"https://api.github.com/users/splashx/followers","following_url":"https://api.github.com/users/splashx/following{/other_user}","gists_url":"https://api.github.com/users/splashx/gists{/gist_id}","starred_url":"https://api.github.com/users/splashx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/splashx/subscriptions","organizations_url":"https://api.github.com/users/splashx/orgs","repos_url":"https://api.github.com/users/splashx/repos","events_url":"https://api.github.com/users/splashx/events{/privacy}","received_events_url":"https://api.github.com/users/splashx/received_events","type":"User","site_admin":false},"created_at":"2015-07-31T14:18:40Z","updated_at":"2015-07-31T14:18:40Z","author_association":"NONE","body":"@clintongormley if the heap is full shouldn't it use disk to store? I thought so if it doesn't have index.store.type set to memory.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/127957275","html_url":"https://github.com/elastic/elasticsearch/issues/10291#issuecomment-127957275","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10291","id":127957275,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNzk1NzI3NQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-08-05T11:14:21Z","updated_at":"2015-08-05T11:14:21Z","author_association":"CONTRIBUTOR","body":"@splashx that would simply kill performance\n","performed_via_github_app":null}]