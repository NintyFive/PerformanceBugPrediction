{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/26653","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26653/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26653/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26653/events","html_url":"https://github.com/elastic/elasticsearch/issues/26653","id":257847142,"node_id":"MDU6SXNzdWUyNTc4NDcxNDI=","number":26653,"title":"Getting java.net.NetPermission with xpack.monitoring.exporters (elasticsearch-6.0.0-beta2)","user":{"login":"jrots","id":195346,"node_id":"MDQ6VXNlcjE5NTM0Ng==","avatar_url":"https://avatars1.githubusercontent.com/u/195346?v=4","gravatar_id":"","url":"https://api.github.com/users/jrots","html_url":"https://github.com/jrots","followers_url":"https://api.github.com/users/jrots/followers","following_url":"https://api.github.com/users/jrots/following{/other_user}","gists_url":"https://api.github.com/users/jrots/gists{/gist_id}","starred_url":"https://api.github.com/users/jrots/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrots/subscriptions","organizations_url":"https://api.github.com/users/jrots/orgs","repos_url":"https://api.github.com/users/jrots/repos","events_url":"https://api.github.com/users/jrots/events{/privacy}","received_events_url":"https://api.github.com/users/jrots/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-09-14T20:30:48Z","updated_at":"2017-09-14T20:36:51Z","closed_at":"2017-09-14T20:36:51Z","author_association":"NONE","active_lock_reason":null,"body":"<!-- Bug report -->\r\nWhen I add \r\n```\r\nxpack.monitoring.exporters:\r\n  id1:\r\n    type: http\r\n    host: [\"http://192.168.14.53:9200\", \"http://192.168.14.54:9200\"]\r\n``` \r\nto my elastic config, I get a `java.net.NetPermission` error.. \r\n`xpack.security.enabled: false` is disabled on the server where I setup the config \r\nand on the receiving elastic search servers (also running elasticsearch-6.0.0-beta2) .. \r\n\r\nCould it be that I need to enable / disable something to avoid these security errors?  \r\nCouldn't not find anything related on google that could pinpoint to a certain setting.. so reporting it here.\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`):\r\nelasticsearch-6.0.0-beta2\r\n\r\n**Plugins installed**: []\r\nx-pack\r\n\r\n**JVM version** (`java -version`):\r\nJava(TM) SE Runtime Environment (build 1.8.0_131-b11)\r\nNo LSB modules are available.\r\n\r\n\r\n**OS version** (`uname -a` if on a Unix-like system):\r\nDistributor ID:\tUbuntu\r\nDescription:\tUbuntu 14.04.5 LTS\r\nRelease:\t14.04\r\nCodename:\ttrusty\r\nLinux elastic30 3.13.0-119-generic # 166-Ubuntu\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\n**Steps to reproduce**:\r\nAdd xpack exporters to the config \r\n```\r\nxpack.monitoring.exporters:\r\n  id1:\r\n    type: http\r\n    host: [\"http://192.168.14.53:9200\", \"http://192.168.14.54:9200\"]\r\n```\r\n\r\n**Provide logs (if relevant)**:\r\n```\r\n[2017-09-14T19:55:28,430][ERROR][o.e.b.Bootstrap          ] [elastic30] Exception\r\njava.security.AccessControlException: access denied (\"java.net.NetPermission\" \"getProxySelector\")\r\n\tat java.security.AccessControlContext.checkPermission(AccessControlContext.java:472) ~[?:1.8.0_131]\r\n\tat java.security.AccessController.checkPermission(AccessController.java:884) ~[?:1.8.0_131]\r\n\tat java.lang.SecurityManager.checkPermission(SecurityManager.java:549) ~[?:1.8.0_131]\r\n\tat java.net.ProxySelector.getDefault(ProxySelector.java:94) ~[?:1.8.0_131]\r\n\tat org.apache.http.impl.nio.client.HttpAsyncClientBuilder.build(HttpAsyncClientBuilder.java:793) ~[?:?]\r\n\tat org.elasticsearch.client.RestClientBuilder$2.run(RestClientBuilder.java:214) ~[?:?]\r\n\tat org.elasticsearch.client.RestClientBuilder$2.run(RestClientBuilder.java:211) ~[?:?]\r\n\tat java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_131]\r\n\tat org.elasticsearch.client.RestClientBuilder.createHttpClient(RestClientBuilder.java:211) ~[?:?]\r\n\tat org.elasticsearch.client.RestClientBuilder.access$000(RestClientBuilder.java:40) ~[?:?]\r\n\tat org.elasticsearch.client.RestClientBuilder$1.run(RestClientBuilder.java:185) ~[?:?]\r\n\tat org.elasticsearch.client.RestClientBuilder$1.run(RestClientBuilder.java:182) ~[?:?]\r\n\tat java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_131]\r\n\tat org.elasticsearch.client.RestClientBuilder.build(RestClientBuilder.java:182) ~[?:?]\r\n\tat org.elasticsearch.xpack.monitoring.exporter.http.HttpExporter.createRestClient(HttpExporter.java:284) ~[?:?]\r\n\tat org.elasticsearch.xpack.monitoring.exporter.http.HttpExporter.<init>(HttpExporter.java:200) ~[?:?]\r\n\tat org.elasticsearch.xpack.monitoring.exporter.http.HttpExporter.<init>(HttpExporter.java:188) ~[?:?]\r\n\tat org.elasticsearch.xpack.monitoring.Monitoring.lambda$createComponents$1(Monitoring.java:126) ~[?:?]\r\n\tat org.elasticsearch.xpack.monitoring.exporter.Exporters.initExporters(Exporters.java:158) ~[?:?]\r\n\tat org.elasticsearch.xpack.monitoring.exporter.Exporters.doStart(Exporters.java:82) ~[?:?]\r\n\tat org.elasticsearch.common.component.AbstractLifecycleComponent.start(AbstractLifecycleComponent.java:66) ~[elasticsearch-6.0.0-beta2.jar:6.0.0-beta2]\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1249) ~[?:1.8.0_131]\r\n\tat java.util.Collections$UnmodifiableCollection.forEach(Collections.java:1080) ~[?:1.8.0_131]\r\n\tat org.elasticsearch.node.Node.start(Node.java:578) ~[elasticsearch-6.0.0-beta2.jar:6.0.0-beta2]\r\n\tat org.elasticsearch.bootstrap.Bootstrap.start(Bootstrap.java:261) ~[elasticsearch-6.0.0-beta2.jar:6.0.0-beta2]\r\n\tat org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:331) [elasticsearch-6.0.0-beta2.jar:6.0.0-beta2]\r\n\tat org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:130) [elasticsearch-6.0.0-beta2.jar:6.0.0-beta2]\r\n\tat org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:121) [elasticsearch-6.0.0-beta2.jar:6.0.0-beta2]\r\n\tat org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:69) [elasticsearch-6.0.0-beta2.jar:6.0.0-beta2]\r\n\tat org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:134) [elasticsearch-6.0.0-beta2.jar:6.0.0-beta2]\r\n\tat org.elasticsearch.cli.Command.main(Command.java:90) [elasticsearch-6.0.0-beta2.jar:6.0.0-beta2]\r\n\tat org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:92) [elasticsearch-6.0.0-beta2.jar:6.0.0-beta2]\r\n\tat org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:85) [elasticsearch-6.0.0-beta2.jar:6.0.0-beta2]\r\n[2017-09-14T19:55:28,446][WARN ][o.e.b.ElasticsearchUncaughtExceptionHandler] [elastic30] uncaught exception in thread [main]\r\norg.elasticsearch.bootstrap.StartupException: java.security.AccessControlException: access denied (\"java.net.NetPermission\" \"getProxySelector\")\r\n```","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}