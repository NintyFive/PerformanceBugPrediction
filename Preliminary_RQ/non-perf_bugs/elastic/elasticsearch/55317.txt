{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/55317","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55317/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55317/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55317/events","html_url":"https://github.com/elastic/elasticsearch/issues/55317","id":601161898,"node_id":"MDU6SXNzdWU2MDExNjE4OTg=","number":55317,"title":"[CI] AssertionError in GoogleCloudStorageBlobContainerRetriesTests testWriteLargeBlob","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"labels":[{"id":143077482,"node_id":"MDU6TGFiZWwxNDMwNzc0ODI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Snapshot/Restore","name":":Distributed/Snapshot/Restore","color":"0e8a16","default":false,"description":"Anything directly related to the `_snapshot/*` APIs"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"assignees":[{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2020-04-16T15:24:35Z","updated_at":"2020-04-17T10:19:52Z","closed_at":"2020-04-17T10:19:51Z","author_association":"MEMBER","active_lock_reason":null,"body":"Failure on 7.7: https://gradle-enterprise.elastic.co/s/6q5voyyn7k3vc\r\n\r\nI couldn't reproduce locally (even leavign out the -Dbuild.snapshot=false):\r\n```\r\n./gradlew ':plugins:repository-gcs:test' --tests \"org.elasticsearch.repositories.gcs.GoogleCloudStorageBlobContainerRetriesTests.testWriteLargeBlob\" \\\r\n  -Dtests.seed=74CA5748F999C5E9 \\\r\n  -Dtests.security.manager=true \\\r\n  -Dbuild.snapshot=false \\\r\n  -Dtests.jvm.argline=\"-Dbuild.snapshot=false\" \\\r\n  -Dtests.locale=ca-ES \\\r\n  -Dtests.timezone=Asia/Tomsk \\\r\n  -Dcompiler.java=14\r\n```\r\n\r\nThere is an AssertionError in the logs like this:\r\n```\r\njava.lang.AssertionError: \r\nExpected: (<15728640> or <7388234>)\r\n     but: was <1949696>\r\n\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18) ~[hamcrest-2.1.jar:2.1]\r\n\tat org.junit.Assert.assertThat(Assert.java:956) ~[junit-4.12.jar:4.12]\r\n\tat org.junit.Assert.assertThat(Assert.java:923) ~[junit-4.12.jar:4.12]\r\n\tat org.elasticsearch.repositories.gcs.GoogleCloudStorageBlobContainerRetriesTests.lambda$testWriteLargeBlob$12(GoogleCloudStorageBlobContainerRetriesTests.java:411) ~[test/:?]\r\n\tat org.elasticsearch.repositories.blobstore.ESMockAPIBasedRepositoryIntegTestCase.lambda$wrap$4(ESMockAPIBasedRepositoryIntegTestCase.java:238) ~[framework-7.7.0.jar:7.7.0]\r\n\tat org.elasticsearch.repositories.gcs.GoogleCloudStorageBlobContainerRetriesTests.lambda$safeHandler$13(GoogleCloudStorageBlobContainerRetriesTests.java:452) ~[test/:?]\r\n\tat com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:79) [?:1.8.0_241]\r\n```\r\n\r\nI found https://github.com/elastic/elasticsearch/issues/52906 but the errors in the log look different so I opted for opening a new issue, please close or continue the investigation in that one if after all the issues seem to be related.","closed_by":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"performed_via_github_app":null}