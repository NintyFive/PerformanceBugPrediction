{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/24485","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24485/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24485/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24485/events","html_url":"https://github.com/elastic/elasticsearch/issues/24485","id":226239853,"node_id":"MDU6SXNzdWUyMjYyMzk4NTM=","number":24485,"title":"Percolate query complains that is not rewritten when upgrading to ES 5.x from 2.x","user":{"login":"alekitto","id":1257206,"node_id":"MDQ6VXNlcjEyNTcyMDY=","avatar_url":"https://avatars1.githubusercontent.com/u/1257206?v=4","gravatar_id":"","url":"https://api.github.com/users/alekitto","html_url":"https://github.com/alekitto","followers_url":"https://api.github.com/users/alekitto/followers","following_url":"https://api.github.com/users/alekitto/following{/other_user}","gists_url":"https://api.github.com/users/alekitto/gists{/gist_id}","starred_url":"https://api.github.com/users/alekitto/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alekitto/subscriptions","organizations_url":"https://api.github.com/users/alekitto/orgs","repos_url":"https://api.github.com/users/alekitto/repos","events_url":"https://api.github.com/users/alekitto/events{/privacy}","received_events_url":"https://api.github.com/users/alekitto/received_events","type":"User","site_admin":false},"labels":[{"id":156502592,"node_id":"MDU6TGFiZWwxNTY1MDI1OTI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Percolator","name":":Search/Percolator","color":"0e8a16","default":false,"description":"Reverse search: find queries that match a document"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"assignees":[{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2017-05-04T10:35:46Z","updated_at":"2017-05-26T13:58:37Z","closed_at":"2017-05-26T13:58:37Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**: 5.0.2 - 5.3.2\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version**: 1.8.0_131\r\n\r\n**OS version**: Ubuntu 14.04\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nI'm trying to migrate a cluster from 2.4.5 to 5.x; executing a `_percolate` query on one of my index results in an internal server error with reason `query must be rewritten first`\r\n\r\n**Steps to reproduce**:\r\nI've created the index on ES2 with these settings:\r\n\r\n```\r\n{\r\n  \"quote_application_user\" : {\r\n    \"settings\" : {\r\n      \"index\" : {\r\n        \"creation_date\" : \"1491213458276\",\r\n        \"number_of_shards\" : \"5\",\r\n        \"number_of_replicas\" : \"1\",\r\n        \"uuid\" : \"wpk9Ct2ZTLew82j0eagwNQ\",\r\n        \"version\" : {\r\n          \"created\" : \"2010299\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nand this mapping:\r\n\r\n```\r\n{\r\n  \"quote_application_user\" : {\r\n    \"mappings\" : {\r\n      \".percolator\" : {\r\n        \"properties\" : {\r\n          \"active\" : {\r\n            \"type\" : \"boolean\"\r\n          },\r\n          \"enabled\" : {\r\n            \"type\" : \"boolean\"\r\n          },\r\n          \"query\" : {\r\n            \"type\" : \"object\",\r\n            \"enabled\" : false\r\n          },\r\n          \"ranking\" : {\r\n            \"type\" : \"float\"\r\n          },\r\n          \"subscription_application_user_id\" : {\r\n            \"type\" : \"string\",\r\n            \"index\" : \"not_analyzed\"\r\n          }\r\n        }\r\n      },\r\n      \"quote\" : {\r\n        \"_meta\" : {\r\n          \"model\" : \"Entity\\\\Quote\"\r\n        },\r\n        \"date_detection\" : false,\r\n        \"properties\" : {\r\n          \"affiliateUser\" : {\r\n            \"type\" : \"integer\"\r\n          },\r\n          \"applicationUser\" : {\r\n            \"properties\" : {\r\n              \"email\" : {\r\n                \"type\" : \"string\",\r\n                \"index\" : \"not_analyzed\"\r\n              },\r\n              \"id\" : {\r\n                \"type\" : \"string\",\r\n                \"index\" : \"not_analyzed\"\r\n              },\r\n              \"phone\" : {\r\n                \"type\" : \"string\",\r\n                \"index\" : \"not_analyzed\"\r\n              }\r\n            }\r\n          },\r\n          \"assignedAt\" : {\r\n            \"type\" : \"date\",\r\n            \"format\" : \"date_time_no_millis\"\r\n          },\r\n          \"bids\" : {\r\n            \"properties\" : {\r\n              \"applicationUser\" : {\r\n                \"properties\" : {\r\n                  \"id\" : {\r\n                    \"type\" : \"string\",\r\n                    \"index\" : \"not_analyzed\"\r\n                  }\r\n                }\r\n              },\r\n              \"auto_bid\" : {\r\n                \"type\" : \"boolean\"\r\n              },\r\n              \"id\" : {\r\n                \"type\" : \"integer\"\r\n              },\r\n              \"refund_status\" : {\r\n                \"type\" : \"integer\"\r\n              }\r\n            }\r\n          },\r\n          \"checked\" : {\r\n            \"type\" : \"boolean\"\r\n          },\r\n          \"contactTimes\" : {\r\n            \"type\" : \"integer\"\r\n          },\r\n          \"contactType\" : {\r\n            \"type\" : \"integer\"\r\n          },\r\n          \"coordinates\" : {\r\n            \"type\" : \"geo_point\"\r\n          },\r\n          \"createdAt\" : {\r\n            \"type\" : \"date\",\r\n            \"format\" : \"date_time_no_millis\"\r\n          },\r\n          \"createdAt_date\" : {\r\n            \"type\" : \"date\",\r\n            \"format\" : \"date\"\r\n          },\r\n          \"expireAt\" : {\r\n            \"type\" : \"date\",\r\n            \"format\" : \"date_time_no_millis\"\r\n          },\r\n          \"locality\" : {\r\n            \"properties\" : {\r\n              \"coordinates\" : {\r\n                \"type\" : \"geo_point\"\r\n              },\r\n              \"id\" : {\r\n                \"type\" : \"integer\"\r\n              },\r\n              \"province\" : {\r\n                \"properties\" : {\r\n                  \"id\" : {\r\n                    \"type\" : \"integer\"\r\n                  }\r\n                }\r\n              },\r\n              \"zip\" : {\r\n                \"type\" : \"string\",\r\n                \"index\" : \"not_analyzed\"\r\n              }\r\n            }\r\n          },\r\n          \"position\" : {\r\n            \"type\" : \"geo_shape\"\r\n          },\r\n          \"price\" : {\r\n            \"type\" : \"float\"\r\n          },\r\n          \"published\" : {\r\n            \"type\" : \"boolean\"\r\n          },\r\n          \"rating\" : {\r\n            \"type\" : \"float\"\r\n          },\r\n          \"service\" : {\r\n            \"properties\" : {\r\n              \"id\" : {\r\n                \"type\" : \"string\",\r\n                \"index\" : \"not_analyzed\"\r\n              }\r\n            }\r\n          },\r\n          \"serviceData\" : {\r\n            \"type\" : \"nested\",\r\n            \"properties\" : {\r\n              \"key\" : {\r\n                \"type\" : \"string\",\r\n                \"index\" : \"not_analyzed\"\r\n              },\r\n              \"label\" : {\r\n                \"type\" : \"string\"\r\n              },\r\n              \"other\" : {\r\n                \"type\" : \"string\"\r\n              },\r\n              \"type\" : {\r\n                \"type\" : \"string\",\r\n                \"index\" : \"not_analyzed\"\r\n              },\r\n              \"value\" : {\r\n                \"type\" : \"string\",\r\n                \"index\" : \"not_analyzed\"\r\n              },\r\n              \"value_as_date\" : {\r\n                \"type\" : \"date\",\r\n                \"format\" : \"date_time_no_millis\"\r\n              }\r\n            }\r\n          },\r\n          \"serviceForm\" : {\r\n            \"properties\" : {\r\n              \"id\" : {\r\n                \"type\" : \"integer\"\r\n              }\r\n            }\r\n          },\r\n          \"status\" : {\r\n            \"properties\" : {\r\n              \"code\" : {\r\n                \"type\" : \"string\",\r\n                \"index\" : \"not_analyzed\"\r\n              },\r\n              \"id\" : {\r\n                \"type\" : \"integer\"\r\n              }\r\n            }\r\n          },\r\n          \"updatedAt\" : {\r\n            \"type\" : \"date\",\r\n            \"format\" : \"date_time_no_millis\"\r\n          },\r\n          \"urgency\" : {\r\n            \"properties\" : {\r\n              \"id\" : {\r\n                \"type\" : \"integer\"\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThis is the indexed document:\r\n\r\n```\r\n{\r\n  \"_index\" : \"quote_application_user\",\r\n  \"_type\" : \"quote\",\r\n  \"_id\" : \"146085\",\r\n  \"_version\" : 3,\r\n  \"found\" : true,\r\n  \"_source\" : {\r\n    \"createdAt\" : \"2017-04-06T07:01:00+00:00\",\r\n    \"updatedAt\" : \"2017-04-06T07:01:12+00:00\",\r\n    \"expireAt\" : \"2017-05-06T07:01:00+00:00\",\r\n    \"assignedAt\" : null,\r\n    \"published\" : true,\r\n    \"checked\" : false,\r\n    \"price\" : 8,\r\n    \"contactType\" : 2,\r\n    \"rating\" : 4,\r\n    \"service\" : {\r\n      \"id\" : 2147\r\n    },\r\n    \"applicationUser\" : {\r\n      \"id\" : \"00000000-0000-0000-0000-000000000001\",\r\n      \"email\" : “xxx@gmail.com\",\r\n      \"phone\" : \"+39*****\"\r\n    },\r\n    \"coordinates\" : [\r\n      12.7245045,\r\n      41.9939694\r\n    ],\r\n    \"position\" : {\r\n      \"type\" : \"point\",\r\n      \"coordinates\" : [\r\n        12.7245045,\r\n        41.9939694\r\n      ]\r\n    },\r\n    \"status\" : {\r\n      \"id\" : 2,\r\n      \"code\" : \"invendita\"\r\n    },\r\n    \"urgency\" : {\r\n      \"id\" : 3\r\n    },\r\n    \"serviceForm\" : {\r\n      \"id\" : 21401\r\n    },\r\n    \"serviceData\" : [\r\n      {\r\n        \"key\" : \"choice_extended1\",\r\n        \"label\" : \"Per quale tipo di evento ti serve?\",\r\n        \"type\" : \"choice_extended\",\r\n        \"value\" : [\r\n          \"key16\"\r\n        ],\r\n        \"other\" : \"casa\"\r\n      },\r\n      {\r\n        \"key\" : \"date1\",\r\n        \"label\" : \"Indica la data dell'evento (anche approssimativa)\",\r\n        \"type\" : \"date\",\r\n        \"value\" : \"2017-04-06\",\r\n        \"value_as_date\" : \"2017-04-06T00:00:00+0000\"\r\n      },\r\n      {\r\n        \"key\" : \"text1\",\r\n        \"label\" : \"Circa quante persone attenderanno l'evento?\",\r\n        \"type\" : \"text\",\r\n        \"value\" : \"5\"\r\n      },\r\n      {\r\n        \"key\" : \"textarea1\",\r\n        \"label\" : \"Descrivi il tipo di struttura che ti serve\",\r\n        \"type\" : \"text\",\r\n        \"value\" : \"Soluzione porticato casa\"\r\n      }\r\n    ],\r\n    \"createdAt_date\" : \"2017-04-06\",\r\n    \"bids\" : [ ],\r\n    \"contactTimes\" : [ ]\r\n  }\r\n}\r\n```\r\n\r\nand this is the query indexed in the percolator:\r\n\r\n```\r\n{\r\n  \"_index\" : \"quote_application_user\",\r\n  \"_type\" : \".percolator\",\r\n  \"_id\" : \"id_1\",\r\n  \"_version\" : 2,\r\n  \"found\" : true,\r\n  \"_source\" : {\r\n    \"query\" : {\r\n      \"bool\" : {\r\n        \"filter\" : [ {\r\n          \"terms\" : {\r\n            \"service.id\" : [ 289, 311, 312, 313, 314, 315, 316, 317, 1976, 1977, 1978, 1980, 1981, 1983, 1985, 1986, 1988, 1990, 1992, 1994, 1996, 1997, 1999, 2000, 2001, 2002, 2004, 2006, 2007, 2008, 2010, 2012, 2013, 2015, 2016, 2018, 2020, 2023, 2024, 2026, 2027, 2029, 2030, 2032, 2033, 2035, 2511, 2005, 2082, 2083, 2084, 2085, 2086, 2087, 2088, 2089, 2090, 2091, 2092, 2093, 2094, 2095, 2096, 2097, 2098, 2099, 2100, 2101, 2102, 2103, 2104, 2105, 2106, 2107, 2108, 2109, 2110, 2111, 2112, 2113, 2114, 2115, 2116, 2117, 2118, 2119, 2120, 2121, 2122, 2123, 2124, 2125, 2126, 2127, 2128, 2129, 2130, 2131, 2132, 2133, 2134, 2135, 2136, 2137, 2138, 2139, 2140, 2142, 2143, 2144, 2145, 2146, 2147, 2154, 2167, 2169, 2171, 2173, 2175, 2177, 2178, 2180, 2182, 2183, 2185, 2187, 2188, 2190, 2205, 2206, 2207, 2208, 2209, 2210, 2211, 2212, 2213, 2214, 2215, 2216, 2217, 2334, 2335, 2336 ]\r\n          }\r\n        }, {\r\n          \"bool\" : {\r\n            \"should\" : [ {\r\n              \"geo_shape\" : {\r\n                \"position\" : {\r\n                  \"indexed_shape\" : {\r\n                    \"id\" : \"AVs5qTCObQYo4fl70pBM\",\r\n                    \"type\" : \"administrative_level_2\",\r\n                    \"index\" : \"geoshapes\",\r\n                    \"path\" : \"polygon\"\r\n                  },\r\n                  \"relation\" : \"intersects\"\r\n                }\r\n              }\r\n            } ]\r\n          }\r\n        } ]\r\n      }\r\n    },\r\n    \"subscription_application_user_id\" : \"00000000-0000-0000-0000-000000000002\"\r\n  }\r\n}\r\n```\r\n\r\nExecuting\r\n`curl -XGET 'http://localhost:9200/quote_application_user/quote/146085/_percolate' -d '{\"query\":{\"term\":{\"subscription_application_user_id\":{\"value\":\"00000000-0000-0000-0000-000000000002\"}}}}'`\r\n\r\nwill return on ES 2.4.5:\r\n`{\"took\":8,\"_shards\":{\"total\":5,\"successful\":5,\"failed\":0},\"total\":1,\"matches\":[{\"_index\":\"quote_application_user\",\"_id\":\"id_1\"}]}`\r\n\r\nand on 5.3.2:\r\n`{\"took\":329,\"_shards\":{\"total\":5,\"successful\":3,\"failed\":2,\"failures\":[{\"shard\":1,\"index\":\"quote_application_user\",\"status\":\"INTERNAL_SERVER_ERROR\",\"reason\":{\"type\":\"unsupported_operation_exception\",\"reason\":\"query must be rewritten first\"}}]},\"total\":0,\"matches\":[]}`\r\n\r\nwhile expecting the same result.\r\nI've tried with 5.0.0 and 5.0.2 version also, with same results.\r\n\r\n**Logs**:\r\nWhen upgrading, the node wrote this into the log:\r\n\r\n```\r\n[2017-05-04T09:57:16,542][WARN ][o.e.c.l.LogConfigurator  ] ignoring unsupported logging configuration file [/etc/elasticsearch/logging.yml], logging is configured via [/etc/elasticsearch/log4j2.p\r\nroperties]\r\n[2017-05-04T09:57:16,744][INFO ][o.e.n.Node               ] [] initializing ...\r\n[2017-05-04T09:57:16,830][INFO ][o.e.e.NodeEnvironment    ] [YBT8YBw] using [1] data paths, mounts [[/ (/dev/sda1)]], net usable_space [26.4gb], net total_space [39.3gb], spins? [possibly], types\r\n[ext4]\r\n[2017-05-04T09:57:16,830][INFO ][o.e.e.NodeEnvironment    ] [YBT8YBw] heap size [2.9gb], compressed ordinary object pointers [true]\r\n[2017-05-04T09:57:16,924][INFO ][o.e.n.Node               ] node name [YBT8YBw] derived from node ID [YBT8YBwDRBu5QYEUbpF7Zw]; set [node.name] to override\r\n[2017-05-04T09:57:16,924][INFO ][o.e.n.Node               ] version[5.3.2], pid[6732], build[3068195/2017-04-24T16:15:59.481Z], OS[Linux/3.13.0-117-generic/amd64], JVM[Oracle Corporation/Java HotS\r\npot(TM) 64-Bit Server VM/1.8.0_131/25.131-b11]\r\n[2017-05-04T09:57:17,676][INFO ][o.e.p.PluginsService     ] [YBT8YBw] loaded module [aggs-matrix-stats]\r\n[2017-05-04T09:57:17,676][INFO ][o.e.p.PluginsService     ] [YBT8YBw] loaded module [ingest-common]\r\n[2017-05-04T09:57:17,676][INFO ][o.e.p.PluginsService     ] [YBT8YBw] loaded module [lang-expression]\r\n[2017-05-04T09:57:17,676][INFO ][o.e.p.PluginsService     ] [YBT8YBw] loaded module [lang-groovy]\r\n[2017-05-04T09:57:17,676][INFO ][o.e.p.PluginsService     ] [YBT8YBw] loaded module [lang-mustache]\r\n[2017-05-04T09:57:17,676][INFO ][o.e.p.PluginsService     ] [YBT8YBw] loaded module [lang-painless]\r\n[2017-05-04T09:57:17,676][INFO ][o.e.p.PluginsService     ] [YBT8YBw] loaded module [percolator]\r\n[2017-05-04T09:57:17,677][INFO ][o.e.p.PluginsService     ] [YBT8YBw] loaded module [reindex]\r\n[2017-05-04T09:57:17,677][INFO ][o.e.p.PluginsService     ] [YBT8YBw] loaded module [transport-netty3]\r\n[2017-05-04T09:57:17,677][INFO ][o.e.p.PluginsService     ] [YBT8YBw] loaded module [transport-netty4]\r\n[2017-05-04T09:57:17,677][INFO ][o.e.p.PluginsService     ] [YBT8YBw] no plugins loaded\r\n[2017-05-04T09:57:19,846][INFO ][o.e.c.u.IndexFolderUpgrader] [geoshapes/LhUFlhVuSVCogo46-O4KPA] upgrading [/var/lib/elasticsearch/elasticsearch/nodes/0/indices/geoshapes] to new naming convention\r\n[2017-05-04T09:57:19,847][INFO ][o.e.c.u.IndexFolderUpgrader] [geoshapes/LhUFlhVuSVCogo46-O4KPA] moved from [/var/lib/elasticsearch/elasticsearch/nodes/0/indices/geoshapes] to [/var/lib/elasticsearch/elasticsearch/nodes/0/indices/LhUFlhVuSVCogo46-O4KPA]\r\n[2017-05-04T09:57:19,885][INFO ][o.e.c.u.IndexFolderUpgrader] [quote_application_user/wpk9Ct2ZTLew82j0eagwNQ] upgrading [/var/lib/elasticsearch/elasticsearch/nodes/0/indices/quote_application_user] to new naming convention\r\n[2017-05-04T09:57:19,885][INFO ][o.e.c.u.IndexFolderUpgrader] [quote_application_user/wpk9Ct2ZTLew82j0eagwNQ] moved from [/var/lib/elasticsearch/elasticsearch/nodes/0/indices/quote_application_user] to [/var/lib/elasticsearch/elasticsearch/nodes/0/indices/wpk9Ct2ZTLew82j0eagwNQ]\r\n[2017-05-04T09:57:20,247][INFO ][o.e.n.Node               ] initialized\r\n[2017-05-04T09:57:20,247][INFO ][o.e.n.Node               ] [YBT8YBw] starting ...\r\n[2017-05-04T09:57:20,484][INFO ][o.e.t.TransportService   ] [YBT8YBw] publish_address {127.0.0.1:9300}, bound_addresses {[::1]:9300}, {127.0.0.1:9300}\r\n[2017-05-04T09:57:23,563][INFO ][o.e.c.s.ClusterService   ] [YBT8YBw] new_master {YBT8YBw}{YBT8YBwDRBu5QYEUbpF7Zw}{jjKMACwFROSwYe-HbgSEdg}{127.0.0.1}{127.0.0.1:9300}, reason: zen-disco-elected-as-master ([0] nodes joined)\r\n[2017-05-04T09:57:23,618][INFO ][o.e.h.n.Netty4HttpServerTransport] [YBT8YBw] publish_address {127.0.0.1:9200}, bound_addresses {[::1]:9200}, {127.0.0.1:9200}\r\n[2017-05-04T09:57:23,621][INFO ][o.e.n.Node               ] [YBT8YBw] started\r\n[2017-05-04T09:57:23,821][INFO ][o.e.g.GatewayService     ] [YBT8YBw] recovered [10] indices into cluster_state\r\n[2017-05-04T09:57:24,287][WARN ][o.e.c.m.MetaDataMappingService] [YBT8YBw] [geoshapes] re-syncing mappings with cluster state because of types [[administrative_level_3, administrative_level_2, administrative_level_1]]\r\n[2017-05-04T09:57:24,532][WARN ][o.e.c.m.MetaDataMappingService] [YBT8YBw] [quote_application_user] re-syncing mappings with cluster state because of types [[quote, .percolator]]\r\n[2017-05-04T09:57:26,009][INFO ][o.e.c.r.a.AllocationService] [YBT8YBw] Cluster health status changed from [RED] to [YELLOW] (reason: [shards started [[quote_application_user][4]] ...]).\r\n```\r\n\r\nAnd when executing the query:\r\n\r\n```\r\n[2017-05-04T10:00:02,021][DEBUG][o.e.a.s.TransportSearchAction] [YBT8YBw] [quote_application_user][1], node[YBT8YBwDRBu5QYEUbpF7Zw], [P], s[STARTED], a[id=b9NIbVDrRfK9ICcds-TYIg]: Failed to execut\r\ne [SearchRequest{searchType=QUERY_THEN_FETCH, indices=[quote_application_user], indicesOptions=IndicesOptions[id=38, ignore_unavailable=false, allow_no_indices=true, expand_wildcards_open=true, ex\r\npand_wildcards_closed=false, allow_alisases_to_multiple_indices=true, forbid_closed_indices=true], types=[], routing='null', preference='null', requestCache=null, scroll=null, source={\r\n  \"query\" : {\r\n    \"bool\" : {\r\n      \"must\" : [\r\n        {\r\n          \"term\" : {\r\n            \"subscription_application_user_id\" : {\r\n              \"value\" : \"00000000-0000-0000-0000-000000000002\",\r\n              \"boost\" : 1.0\r\n            }\r\n          }\r\n        }\r\n      ],\r\n      \"filter\" : [\r\n        {\r\n          \"percolate\" : {\r\n            \"document_type\" : \"quote\",\r\n            \"field\" : \"query\",\r\n            \"document\" : {\r\n              \"createdAt\" : \"2017-04-06T07:01:00+00:00\",\r\n              \"updatedAt\" : \"2017-04-06T07:01:12+00:00\",\r\n              \"expireAt\" : \"2017-05-06T07:01:00+00:00\",\r\n              \"assignedAt\" : null,\r\n              \"published\" : true,\r\n              \"checked\" : false,\r\n              \"price\" : 8,\r\n              \"contactType\" : 2,\r\n              \"rating\" : 4,\r\n              \"service\" : {\r\n                \"id\" : 2147\r\n              },\r\n              \"applicationUser\" : {\r\n                \"id\" : \"00000000-0000-0000-0000-000000000001\",\r\n                \"email\" : “xxx@gmail.com\",\r\n                \"phone\" : \"+39*****”\r\n              },\r\n              \"coordinates\" : [\r\n                12.7245045,\r\n                41.9939694\r\n              ],\r\n              \"position\" : {\r\n                \"type\" : \"point\",\r\n                \"coordinates\" : [\r\n                  12.7245045,\r\n                  41.9939694\r\n                ]\r\n              },\r\n              \"status\" : {\r\n                \"id\" : 2,\r\n                \"code\" : \"invendita\"\r\n              },\r\n              \"urgency\" : {\r\n                \"id\" : 3\r\n              },\r\n              \"serviceForm\" : {\r\n                \"id\" : 21401\r\n              },\r\n              \"serviceData\" : [\r\n                {\r\n                  \"key\" : \"choice_extended1\",\r\n                  \"label\" : \"Per quale tipo di evento ti serve?\",\r\n                  \"type\" : \"choice_extended\",\r\n                  \"value\" : [\r\n                    \"key16\"\r\n                  ],\r\n                  \"other\" : \"casa\"\r\n                },\r\n                {\r\n                  \"key\" : \"date1\",\r\n                  \"label\" : \"Indica la data dell'evento (anche approssimativa)\",\r\n                  \"type\" : \"date\",\r\n                  \"value\" : \"2017-04-06\",\r\n                  \"value_as_date\" : \"2017-04-06T00:00:00+0000\"\r\n                },\r\n                {\r\n                  \"key\" : \"text1\",\r\n                  \"label\" : \"Circa quante persone attenderanno l'evento?\",\r\n                  \"type\" : \"text\",\r\n                  \"value\" : \"5\"\r\n                },\r\n                {\r\n                  \"key\" : \"textarea1\",\r\n                  \"label\" : \"Descrivi il tipo di struttura che ti serve\",\r\n                  \"type\" : \"text\",\r\n                  \"value\" : \"Soluzione porticato casa\"\r\n                }\r\n              ],\r\n              \"createdAt_date\" : \"2017-04-06\",\r\n              \"bids\" : [ ],\r\n              \"contactTimes\" : [ ]\r\n            },\r\n            \"boost\" : 1.0\r\n          }\r\n        }\r\n      ],\r\n      \"disable_coord\" : false,\r\n      \"adjust_pure_negative\" : true,\r\n      \"boost\" : 1.0\r\n    }\r\n  }\r\n}}] lastShard [true]\r\norg.elasticsearch.transport.RemoteTransportException: [YBT8YBw][127.0.0.1:9300][indices:data/read/search[phase/query]]\r\nCaused by: org.elasticsearch.search.query.QueryPhaseExecutionException: Query Failed [Failed to execute main query]\r\n        at org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:423) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:108) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.search.SearchService.loadOrExecuteQueryPhase(SearchService.java:247) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:261) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.action.search.SearchTransportService$6.messageReceived(SearchTransportService.java:331) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.action.search.SearchTransportService$6.messageReceived(SearchTransportService.java:328) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:69) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.transport.TransportService$7.doRun(TransportService.java:618) [elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:638) [elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) [elasticsearch-5.3.2.jar:5.3.2]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:1.8.0_131]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:1.8.0_131]\r\n        at java.lang.Thread.run(Thread.java:748) [?:1.8.0_131]\r\nCaused by: java.lang.UnsupportedOperationException: query must be rewritten first\r\n        at org.elasticsearch.index.query.GeoShapeQueryBuilder.doToQuery(GeoShapeQueryBuilder.java:317) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.index.query.AbstractQueryBuilder.toQuery(AbstractQueryBuilder.java:96) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.index.query.BoolQueryBuilder.addBooleanClauses(BoolQueryBuilder.java:442) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.index.query.BoolQueryBuilder.doToQuery(BoolQueryBuilder.java:418) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.index.query.AbstractQueryBuilder.toQuery(AbstractQueryBuilder.java:96) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.index.query.AbstractQueryBuilder.toFilter(AbstractQueryBuilder.java:118) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.index.query.BoolQueryBuilder.addBooleanClauses(BoolQueryBuilder.java:446) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.index.query.BoolQueryBuilder.doToQuery(BoolQueryBuilder.java:419) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.index.query.AbstractQueryBuilder.toQuery(AbstractQueryBuilder.java:96) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.percolator.PercolatorFieldMapper.toQuery(PercolatorFieldMapper.java:343) ~[?:?]\r\n        at org.elasticsearch.percolator.PercolatorFieldMapper.parseQuery(PercolatorFieldMapper.java:325) ~[?:?]\r\n        at org.elasticsearch.percolator.PercolateQueryBuilder.lambda$null$3(PercolateQueryBuilder.java:547) ~[?:?]\r\n        at org.elasticsearch.percolator.PercolateQuery$1$2.matchDocId(PercolateQuery.java:170) ~[?:?]\r\n        at org.elasticsearch.percolator.PercolateQuery$BaseScorer$1.matches(PercolateQuery.java:256) ~[?:?]\r\n        at org.apache.lucene.search.ConjunctionDISI$ConjunctionTwoPhaseIterator.matches(ConjunctionDISI.java:345) ~[lucene-core-6.4.2.jar:6.4.2 34a975ca3d4bd7fa121340e5bcbf165929e0542f - ishan - 2017-03-01 23:23:13]\r\n        at org.apache.lucene.search.Weight$DefaultBulkScorer.scoreAll(Weight.java:228) ~[lucene-core-6.4.2.jar:6.4.2 34a975ca3d4bd7fa121340e5bcbf165929e0542f - ishan - 2017-03-01 23:23:13]\r\n        at org.apache.lucene.search.Weight$DefaultBulkScorer.score(Weight.java:172) ~[lucene-core-6.4.2.jar:6.4.2 34a975ca3d4bd7fa121340e5bcbf165929e0542f - ishan - 2017-03-01 23:23:13]\r\n        at org.apache.lucene.search.BulkScorer.score(BulkScorer.java:39) ~[lucene-core-6.4.2.jar:6.4.2 34a975ca3d4bd7fa121340e5bcbf165929e0542f - ishan - 2017-03-01 23:23:13]\r\n        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:669) ~[lucene-core-6.4.2.jar:6.4.2 34a975ca3d4bd7fa121340e5bcbf165929e0542f - ishan - 2017-03-01 23:23:13]\r\n        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:473) ~[lucene-core-6.4.2.jar:6.4.2 34a975ca3d4bd7fa121340e5bcbf165929e0542f - ishan - 2017-03-01 23:23:13]\r\n        at org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:397) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:108) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.search.SearchService.loadOrExecuteQueryPhase(SearchService.java:247) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:261) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.action.search.SearchTransportService$6.messageReceived(SearchTransportService.java:331) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.action.search.SearchTransportService$6.messageReceived(SearchTransportService.java:328) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:69) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.transport.TransportService$7.doRun(TransportService.java:618) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:638) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[?:1.8.0_131]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[?:1.8.0_131]\r\n        at java.lang.Thread.run(Thread.java:748) ~[?:1.8.0_131]\r\n[2017-05-04T10:00:02,022][DEBUG][o.e.a.s.TransportSearchAction] [YBT8YBw] [quote_application_user][2], node[YBT8YBwDRBu5QYEUbpF7Zw], [P], s[STARTED], a[id=qvQX4P41S_u-ZXtDLw_R_A]: Failed to execute [SearchRequest{searchType=QUERY_THEN_FETCH, indices=[quote_application_user], indicesOptions=IndicesOptions[id=38, ignore_unavailable=false, allow_no_indices=true, expand_wildcards_open=true, expand_wildcards_closed=false, allow_alisases_to_multiple_indices=true, forbid_closed_indices=true], types=[], routing='null', preference='null', requestCache=null, scroll=null, source={\r\n  \"query\" : {\r\n    \"bool\" : {\r\n      \"must\" : [\r\n        {\r\n          \"term\" : {\r\n            \"subscription_application_user_id\" : {\r\n              \"value\" : \"00000000-0000-0000-0000-000000000002\",\r\n              \"boost\" : 1.0\r\n            }\r\n          }\r\n        }\r\n      ],\r\n      \"filter\" : [\r\n        {\r\n          \"percolate\" : {\r\n            \"document_type\" : \"quote\",\r\n            \"field\" : \"query\",\r\n            \"document\" : {\r\n              \"createdAt\" : \"2017-04-06T07:01:00+00:00\",\r\n              \"updatedAt\" : \"2017-04-06T07:01:12+00:00\",\r\n              \"expireAt\" : \"2017-05-06T07:01:00+00:00\",\r\n              \"assignedAt\" : null,\r\n              \"published\" : true,\r\n              \"checked\" : false,\r\n              \"price\" : 8,\r\n              \"contactType\" : 2,\r\n              \"rating\" : 4,\r\n              \"service\" : {\r\n                \"id\" : 2147\r\n              },\r\n              \"applicationUser\" : {\r\n                \"id\" : \"00000000-0000-0000-0000-000000000001\",\r\n                \"email\" : “xxx@gmail.com\",\r\n                \"phone\" : \"+39*****\"\r\n              },\r\n              \"coordinates\" : [\r\n                12.7245045,\r\n                41.9939694\r\n              ],\r\n              \"position\" : {\r\n                \"type\" : \"point\",\r\n                \"coordinates\" : [\r\n                  12.7245045,\r\n                  41.9939694\r\n                ]\r\n              },\r\n              \"status\" : {\r\n                \"id\" : 2,\r\n                \"code\" : \"invendita\"\r\n              },\r\n              \"urgency\" : {\r\n                \"id\" : 3\r\n              },\r\n              \"serviceForm\" : {\r\n                \"id\" : 21401\r\n              },\r\n              \"serviceData\" : [\r\n                {\r\n                  \"key\" : \"choice_extended1\",\r\n                  \"label\" : \"Per quale tipo di evento ti serve?\",\r\n                  \"type\" : \"choice_extended\",\r\n                  \"value\" : [\r\n                    \"key16\"\r\n                  ],\r\n                  \"other\" : \"casa\"\r\n                },\r\n                {\r\n                  \"key\" : \"date1\",\r\n                  \"label\" : \"Indica la data dell'evento (anche approssimativa)\",\r\n                  \"type\" : \"date\",\r\n                  \"value\" : \"2017-04-06\",\r\n                  \"value_as_date\" : \"2017-04-06T00:00:00+0000\"\r\n                },\r\n                {\r\n                  \"key\" : \"text1\",\r\n                  \"label\" : \"Circa quante persone attenderanno l'evento?\",\r\n                  \"type\" : \"text\",\r\n                  \"value\" : \"5\"\r\n                },\r\n                {\r\n                  \"key\" : \"textarea1\",\r\n                  \"label\" : \"Descrivi il tipo di struttura che ti serve\",\r\n                  \"type\" : \"text\",\r\n                  \"value\" : \"Soluzione porticato casa\"\r\n                }\r\n              ],\r\n              \"createdAt_date\" : \"2017-04-06\",\r\n              \"bids\" : [ ],\r\n              \"contactTimes\" : [ ]\r\n            },\r\n            \"boost\" : 1.0\r\n          }\r\n        }\r\n      ],\r\n      \"disable_coord\" : false,\r\n      \"adjust_pure_negative\" : true,\r\n      \"boost\" : 1.0\r\n    }\r\n  }\r\n}}]\r\norg.elasticsearch.transport.RemoteTransportException: [YBT8YBw][127.0.0.1:9300][indices:data/read/search[phase/query]]\r\nCaused by: org.elasticsearch.search.query.QueryPhaseExecutionException: Query Failed [Failed to execute main query]\r\n        at org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:423) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:108) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.search.SearchService.loadOrExecuteQueryPhase(SearchService.java:247) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:261) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.action.search.SearchTransportService$6.messageReceived(SearchTransportService.java:331) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.action.search.SearchTransportService$6.messageReceived(SearchTransportService.java:328) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:69) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.transport.TransportService$7.doRun(TransportService.java:618) [elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:638) [elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) [elasticsearch-5.3.2.jar:5.3.2]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:1.8.0_131]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:1.8.0_131]\r\n        at java.lang.Thread.run(Thread.java:748) [?:1.8.0_131]\r\nCaused by: java.lang.UnsupportedOperationException: query must be rewritten first\r\n        at org.elasticsearch.index.query.GeoShapeQueryBuilder.doToQuery(GeoShapeQueryBuilder.java:317) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.index.query.AbstractQueryBuilder.toQuery(AbstractQueryBuilder.java:96) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.index.query.BoolQueryBuilder.addBooleanClauses(BoolQueryBuilder.java:442) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.index.query.BoolQueryBuilder.doToQuery(BoolQueryBuilder.java:418) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.index.query.AbstractQueryBuilder.toQuery(AbstractQueryBuilder.java:96) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.index.query.AbstractQueryBuilder.toFilter(AbstractQueryBuilder.java:118) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.index.query.BoolQueryBuilder.addBooleanClauses(BoolQueryBuilder.java:446) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.index.query.BoolQueryBuilder.doToQuery(BoolQueryBuilder.java:419) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.index.query.AbstractQueryBuilder.toQuery(AbstractQueryBuilder.java:96) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.percolator.PercolatorFieldMapper.toQuery(PercolatorFieldMapper.java:343) ~[?:?]\r\n        at org.elasticsearch.percolator.PercolatorFieldMapper.parseQuery(PercolatorFieldMapper.java:325) ~[?:?]\r\n        at org.elasticsearch.percolator.PercolateQueryBuilder.lambda$null$3(PercolateQueryBuilder.java:547) ~[?:?]\r\n        at org.elasticsearch.percolator.PercolateQuery$1$2.matchDocId(PercolateQuery.java:170) ~[?:?]\r\n        at org.elasticsearch.percolator.PercolateQuery$BaseScorer$1.matches(PercolateQuery.java:256) ~[?:?]\r\n        at org.apache.lucene.search.ConjunctionDISI$ConjunctionTwoPhaseIterator.matches(ConjunctionDISI.java:345) ~[lucene-core-6.4.2.jar:6.4.2 34a975ca3d4bd7fa121340e5bcbf165929e0542f - ishan - 2017-03-01 23:23:13]\r\n        at org.apache.lucene.search.Weight$DefaultBulkScorer.scoreAll(Weight.java:228) ~[lucene-core-6.4.2.jar:6.4.2 34a975ca3d4bd7fa121340e5bcbf165929e0542f - ishan - 2017-03-01 23:23:13]\r\n        at org.apache.lucene.search.Weight$DefaultBulkScorer.score(Weight.java:172) ~[lucene-core-6.4.2.jar:6.4.2 34a975ca3d4bd7fa121340e5bcbf165929e0542f - ishan - 2017-03-01 23:23:13]\r\n        at org.apache.lucene.search.BulkScorer.score(BulkScorer.java:39) ~[lucene-core-6.4.2.jar:6.4.2 34a975ca3d4bd7fa121340e5bcbf165929e0542f - ishan - 2017-03-01 23:23:13]\r\n        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:669) ~[lucene-core-6.4.2.jar:6.4.2 34a975ca3d4bd7fa121340e5bcbf165929e0542f - ishan - 2017-03-01 23:23:13]\r\n        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:473) ~[lucene-core-6.4.2.jar:6.4.2 34a975ca3d4bd7fa121340e5bcbf165929e0542f - ishan - 2017-03-01 23:23:13]\r\n        at org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:397) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:108) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.search.SearchService.loadOrExecuteQueryPhase(SearchService.java:247) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:261) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.action.search.SearchTransportService$6.messageReceived(SearchTransportService.java:331) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.action.search.SearchTransportService$6.messageReceived(SearchTransportService.java:328) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:69) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.transport.TransportService$7.doRun(TransportService.java:618) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:638) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) ~[elasticsearch-5.3.2.jar:5.3.2]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[?:1.8.0_131]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[?:1.8.0_131]\r\n        at java.lang.Thread.run(Thread.java:748) ~[?:1.8.0_131]\r\n```\r\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}