{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/539","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/539/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/539/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/539/events","html_url":"https://github.com/elastic/elasticsearch/issues/539","id":439305,"node_id":"MDU6SXNzdWU0MzkzMDU=","number":539,"title":"New facet feature","user":{"login":"Zorkin","id":496918,"node_id":"MDQ6VXNlcjQ5NjkxOA==","avatar_url":"https://avatars2.githubusercontent.com/u/496918?v=4","gravatar_id":"","url":"https://api.github.com/users/Zorkin","html_url":"https://github.com/Zorkin","followers_url":"https://api.github.com/users/Zorkin/followers","following_url":"https://api.github.com/users/Zorkin/following{/other_user}","gists_url":"https://api.github.com/users/Zorkin/gists{/gist_id}","starred_url":"https://api.github.com/users/Zorkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zorkin/subscriptions","organizations_url":"https://api.github.com/users/Zorkin/orgs","repos_url":"https://api.github.com/users/Zorkin/repos","events_url":"https://api.github.com/users/Zorkin/events{/privacy}","received_events_url":"https://api.github.com/users/Zorkin/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2010-11-25T19:31:15Z","updated_at":"2014-05-23T18:22:15Z","closed_at":"2011-03-17T09:31:09Z","author_association":"NONE","active_lock_reason":null,"body":"What I am trying to achieve : \n\nwe have an index with documents that look like : \n{ \n  currency:'USD', \n  product:'toaster', \n  value: 23.4 \n}, \n{ \n  currency:'GBP', \n  product:'toaster', \n  value: 13.4 \n} \n\nI want to produce factes for 'currency' & 'product'  where the value of each term is not a count , its a sum of values. \n\nThe expected result would be something like : \n\nfacets\": { \n                \"currencyFacet\": { \n                        \"_type\": \"terms\", \n                        \"_field\": \"currency\", \n                        \"terms\": [ \n                                { \n                                        \"term\": \"GBP\", \n                                        \"count\": 1, \n                                        \"value\": 13.4 \n                                }, \n                                { \n                                        \"term\": \"USD\", \n                                        \"count\": 1, \n                                        \"value\": 23.4 \n                                } \n} \n                        ] \n                }, \n                \"productFacet\": { \n                        \"_type\": \"terms\", \n                        \"_field\": \"product\", \n                        \"terms\": [ \n                                { \n                                        \"term\": \"toaster\", \n                                        \"count\": 2, \n                                        \"value\":36.8 \n\n                                }, \n] \n                } \n        } \n} \n","closed_by":null,"performed_via_github_app":null}