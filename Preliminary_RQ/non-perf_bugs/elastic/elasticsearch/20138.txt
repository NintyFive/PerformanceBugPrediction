{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/20138","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20138/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20138/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20138/events","html_url":"https://github.com/elastic/elasticsearch/issues/20138","id":172891386,"node_id":"MDU6SXNzdWUxNzI4OTEzODY=","number":20138,"title":"Render endpoint will not display invalid json","user":{"login":"gary-harpaz","id":6260714,"node_id":"MDQ6VXNlcjYyNjA3MTQ=","avatar_url":"https://avatars0.githubusercontent.com/u/6260714?v=4","gravatar_id":"","url":"https://api.github.com/users/gary-harpaz","html_url":"https://github.com/gary-harpaz","followers_url":"https://api.github.com/users/gary-harpaz/followers","following_url":"https://api.github.com/users/gary-harpaz/following{/other_user}","gists_url":"https://api.github.com/users/gary-harpaz/gists{/gist_id}","starred_url":"https://api.github.com/users/gary-harpaz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gary-harpaz/subscriptions","organizations_url":"https://api.github.com/users/gary-harpaz/orgs","repos_url":"https://api.github.com/users/gary-harpaz/repos","events_url":"https://api.github.com/users/gary-harpaz/events{/privacy}","received_events_url":"https://api.github.com/users/gary-harpaz/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"assignees":[{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2016-08-24T08:15:35Z","updated_at":"2018-02-14T13:42:38Z","closed_at":"2017-02-27T14:16:11Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\nGitHub is reserved for bug reports and feature requests. The best place\nto ask a general question is at the Elastic Discourse forums at\nhttps://discuss.elastic.co. If you are in fact posting a bug report or\na feature request, please include one and only one of the below blocks\nin your new issue. Note that whether you're filing a bug report or a\nfeature request, ensure that your submission is for an\n[OS that we support](https://www.elastic.co/support/matrix#show_os).\nBug reports on an OS that we do not support or feature requests\nspecific to an OS that we do not support will be closed.\n-->\n\n<!--\nIf you are filing a bug report, please remove the below feature\nrequest block and provide responses for all of the below items.\n-->\n\n**Elasticsearch version**: 2.3.5\n\n**Description of the problem including expected versus actual behavior**:\nWe are using search templates heavily. Previously I was able to debug json parse errors of my templates using the render endpoint. This is especially important when using conditional clauses which are not valid json, and therefore can not be validated before rendering.  \nIn this version the json parse exception is simply returned by the render endpoint.\n\n**Steps to reproduce**:\n1. Create the following search template. Note the intentional missing comma after {{size}}:\n\ncurl -X POST -H Content-Type: application/json  http://localhost:9200/_search/template/test-template -d {\"template\":\"{\\\"size\\\":\\\"{{size}}\\\"\\\"query\\\":{\\\"match_all\\\":{}}}\"}\n1. Render the template using:\n   curl -XGET \"http://localhost:9200/_render/template\" -d '\n   { \\\n   \"id\" : \"test-template\", \n   \"params\": { \n     \"size\" : \"10\" \n   } \n   }'\n\nThe response is:\n{\n   \"error\": {\n      \"root_cause\": [\n         {\n            \"type\": \"json_parse_exception\",\n            \"reason\": \"Unexpected character ('\\\"' (code 34)): was expecting comma to separate OBJECT entries\\n at [Source: [B@ac52d7b; line: 1, column: 14]\"\n         }\n      ],\n      \"type\": \"json_parse_exception\",\n      \"reason\": \"Unexpected character ('\\\"' (code 34)): was expecting comma to separate OBJECT entries\\n at [Source: [B@ac52d7b; line: 1, column: 14]\"\n   },\n   \"status\": 500\n}\n\nI expect the result to contain the rendered template so that I can debug the syntax error as was available previous versions.\n","closed_by":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"performed_via_github_app":null}