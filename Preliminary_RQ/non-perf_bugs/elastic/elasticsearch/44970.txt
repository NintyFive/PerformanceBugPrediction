{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/44970","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44970/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44970/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44970/events","html_url":"https://github.com/elastic/elasticsearch/issues/44970","id":474134393,"node_id":"MDU6SXNzdWU0NzQxMzQzOTM=","number":44970,"title":"Watcher webhook actions returning 302 response code in 7.2 and above.","user":{"login":"jamesspi","id":20421688,"node_id":"MDQ6VXNlcjIwNDIxNjg4","avatar_url":"https://avatars3.githubusercontent.com/u/20421688?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesspi","html_url":"https://github.com/jamesspi","followers_url":"https://api.github.com/users/jamesspi/followers","following_url":"https://api.github.com/users/jamesspi/following{/other_user}","gists_url":"https://api.github.com/users/jamesspi/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesspi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesspi/subscriptions","organizations_url":"https://api.github.com/users/jamesspi/orgs","repos_url":"https://api.github.com/users/jamesspi/repos","events_url":"https://api.github.com/users/jamesspi/events{/privacy}","received_events_url":"https://api.github.com/users/jamesspi/received_events","type":"User","site_admin":false},"labels":[{"id":912845062,"node_id":"MDU6TGFiZWw5MTI4NDUwNjI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Watcher","name":":Core/Features/Watcher","color":"0e8a16","default":false,"description":""},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":1222918656,"node_id":"MDU6TGFiZWwxMjIyOTE4NjU2","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v7.2.0","name":"v7.2.0","color":"DDDDDD","default":false,"description":""},{"id":1410529450,"node_id":"MDU6TGFiZWwxNDEwNTI5NDUw","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v7.2.1","name":"v7.2.1","color":"dddddd","default":false,"description":""},{"id":1444812438,"node_id":"MDU6TGFiZWwxNDQ0ODEyNDM4","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v7.2.2","name":"v7.2.2","color":"dddddd","default":false,"description":""},{"id":1352927464,"node_id":"MDU6TGFiZWwxMzUyOTI3NDY0","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v7.3.0","name":"v7.3.0","color":"dddddd","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"assignees":[{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false}],"milestone":null,"comments":9,"created_at":"2019-07-29T16:06:21Z","updated_at":"2019-09-24T10:26:01Z","closed_at":"2019-08-30T12:02:24Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version** (`bin/elasticsearch --version`): 7.2, 7.3\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version** (`java -version`): Bundled JDK\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): ESS and Darwin Kernel Version 18.6.0\r\n\r\n**Description of the problem including expected versus actual behavior**: Watcher web hook actions do not return a 200 status code for POST requests.\r\n\r\n**Steps to reproduce**: Execute a watch with a webhook action.\r\n\r\nPlease include a *minimal* but *complete* recreation of the problem, including\r\n(e.g.) index creation, mappings, settings, query etc.  The easier you make for\r\nus to reproduce it, the more likely that somebody will take the time to look at it.\r\n\r\n 1. Create watch with a webhook action.\r\n 2. Force execute watch, or wait for it to trigger\r\n\r\nAs of `7.2`, webhook actions are are returning a `302` http status code for POST requests, as opposed to `200`. After some initial discussions with @jakelandis, there is nothing obvious in the codebase that would cause this.\r\n\r\nThe same exact webhook action in `7.1` and below works fine. All other http clients (tested with curl, wget and postman) all return the expected response. \r\n\r\nThis has been tested (an initially spotted) in ESS, and also on my MBP.","closed_by":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"performed_via_github_app":null}