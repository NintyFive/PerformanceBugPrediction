{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/1219","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1219/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1219/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1219/events","html_url":"https://github.com/elastic/elasticsearch/issues/1219","id":1371197,"node_id":"MDU6SXNzdWUxMzcxMTk3","number":1219,"title":"Allow setting _index and _type with CouchDB river","user":{"login":"akheron","id":70927,"node_id":"MDQ6VXNlcjcwOTI3","avatar_url":"https://avatars3.githubusercontent.com/u/70927?v=4","gravatar_id":"","url":"https://api.github.com/users/akheron","html_url":"https://github.com/akheron","followers_url":"https://api.github.com/users/akheron/followers","following_url":"https://api.github.com/users/akheron/following{/other_user}","gists_url":"https://api.github.com/users/akheron/gists{/gist_id}","starred_url":"https://api.github.com/users/akheron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akheron/subscriptions","organizations_url":"https://api.github.com/users/akheron/orgs","repos_url":"https://api.github.com/users/akheron/repos","events_url":"https://api.github.com/users/akheron/events{/privacy}","received_events_url":"https://api.github.com/users/akheron/received_events","type":"User","site_admin":false},"labels":[{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":135860,"node_id":"MDU6TGFiZWwxMzU4NjA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.17.5","name":"v0.17.5","color":"DDDDDD","default":false,"description":null},{"id":127902,"node_id":"MDU6TGFiZWwxMjc5MDI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.18.0","name":"v0.18.0","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2011-08-09T09:28:00Z","updated_at":"2012-12-14T22:22:20Z","closed_at":"2011-08-09T12:53:24Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Suppose two types of documents are stored in CouchDB. The document types can be detected somehow, e.g. by reading a field's valud. The user wants to index the different document types as different types in a single ElasticSearch index, or in multiple ElasticSearch indices, or both.\n\nCurrently, the only way to do this is to setup two rivers, one for each type, with appropriate filters to filter the corresponding document types from CouchDB. This hits performance, as CouchDB will have to read all documents twice. If there are more than two document types, this gets even worse.\n\nSo I'm suggesting to allow to somehow set the _type and _index values so that the indexing could be accomplished with a single river.\n\nWe will allow for a custom script to set `_type` and `_index` (probably based on the document content), and if set, those values will be used instead of the default ones.\n\nAnd, while we are at it, allow for `_routing` as well.\n","closed_by":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"performed_via_github_app":null}