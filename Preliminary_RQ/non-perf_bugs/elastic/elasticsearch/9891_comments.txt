[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76124562","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-76124562","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":76124562,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MTI0NTYy","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T05:26:45Z","updated_at":"2015-02-26T05:26:45Z","author_association":"MEMBER","body":"Read this: http://www.elasticsearch.org/guide/en/elasticsearch/client/java-api/current/query-dsl-queries.html#geo-shape\n\nYou are missing dependency here.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76125600","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-76125600","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":76125600,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MTI1NjAw","user":{"login":"cooniur","id":3030052,"node_id":"MDQ6VXNlcjMwMzAwNTI=","avatar_url":"https://avatars0.githubusercontent.com/u/3030052?v=4","gravatar_id":"","url":"https://api.github.com/users/cooniur","html_url":"https://github.com/cooniur","followers_url":"https://api.github.com/users/cooniur/followers","following_url":"https://api.github.com/users/cooniur/following{/other_user}","gists_url":"https://api.github.com/users/cooniur/gists{/gist_id}","starred_url":"https://api.github.com/users/cooniur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cooniur/subscriptions","organizations_url":"https://api.github.com/users/cooniur/orgs","repos_url":"https://api.github.com/users/cooniur/repos","events_url":"https://api.github.com/users/cooniur/events{/privacy}","received_events_url":"https://api.github.com/users/cooniur/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T05:42:36Z","updated_at":"2015-02-26T05:42:36Z","author_association":"NONE","body":"Hi @dadoonet ,\n\nThanks for the solution! It works if I add those dependencies.\n\nHowever, the problem is that I don't use any geo related queries in my code. What I use in my code are just queries like aggregations, filters. And actually in the last 4 months I never had this problem, and it suddenly appears today.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76134956","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-76134956","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":76134956,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MTM0OTU2","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T07:42:02Z","updated_at":"2015-02-26T07:42:02Z","author_association":"MEMBER","body":"Interesting. Reopening for more checks.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76142311","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-76142311","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":76142311,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MTQyMzEx","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T08:51:47Z","updated_at":"2015-02-26T08:51:47Z","author_association":"MEMBER","body":"That's super strange. I did not manage to reproduce it.\n\nI have a simple `pom.xml`:\n\n``` xml\n<properties>\n    <elasticsearch.version>1.4.4</elasticsearch.version>\n</properties>\n\n<dependencies>\n    <dependency>\n        <groupId>org.elasticsearch</groupId>\n        <artifactId>elasticsearch</artifactId>\n        <version>${elasticsearch.version}</version>\n        <scope>test</scope>\n    </dependency>\n    <dependency>\n        <groupId>org.codehaus.groovy</groupId>\n        <artifactId>groovy-all</artifactId>\n        <version>2.3.2</version>\n        <classifier>indy</classifier>\n    </dependency>\n\n    <dependency>\n        <groupId>junit</groupId>\n        <artifactId>junit</artifactId>\n        <version>4.11</version>\n        <scope>test</scope>\n    </dependency>\n\n    <dependency>\n        <groupId>log4j</groupId>\n        <artifactId>log4j</artifactId>\n        <version>1.2.17</version>\n        <scope>test</scope>\n    </dependency>\n</dependencies>\n```\n\nAnd a sample code:\n\n``` java\n    @Test\n    public void testDateRange() {\n        AggregationBuilder aggregation =\n                AggregationBuilders\n                        .dateRange(\"agg\")\n                        .field(\"dateOfBirth\")\n                        .format(\"yyyy\")\n                        .addUnboundedTo(\"1950\")             // from -infinity to 1950 (excluded)\n                        .addRange(\"1950\", \"1960\")           // from 1950 to 1960 (excluded)\n                        .addUnboundedFrom(\"1960\");          // from 1960 to +infinity\n\n        SearchResponse sr = client.prepareSearch()\n                .addAggregation(aggregation)\n                .get();\n        logger.info(\"response [{}]\", sr.toString());\n\n        DateRange agg = sr.getAggregations().get(\"agg\");\n\n        // For each entry\n        for (DateRange.Bucket entry : agg.getBuckets()) {\n            String key = entry.getKey();                    // Date range as key\n            DateTime fromAsDate = entry.getFromAsDate();    // Date bucket from as a Date\n            DateTime toAsDate = entry.getToAsDate();        // Date bucket to as a Date\n            long docCount = entry.getDocCount();            // Doc count\n\n            logger.info(\"key [{}], from [{}], to [{}], doc_count [{}]\", key, fromAsDate, toAsDate, docCount);\n        }\n    }\n```\n\nEverything looks correct.\n\nMay it's related to Groovy?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76255620","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-76255620","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":76255620,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MjU1NjIw","user":{"login":"cooniur","id":3030052,"node_id":"MDQ6VXNlcjMwMzAwNTI=","avatar_url":"https://avatars0.githubusercontent.com/u/3030052?v=4","gravatar_id":"","url":"https://api.github.com/users/cooniur","html_url":"https://github.com/cooniur","followers_url":"https://api.github.com/users/cooniur/followers","following_url":"https://api.github.com/users/cooniur/following{/other_user}","gists_url":"https://api.github.com/users/cooniur/gists{/gist_id}","starred_url":"https://api.github.com/users/cooniur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cooniur/subscriptions","organizations_url":"https://api.github.com/users/cooniur/orgs","repos_url":"https://api.github.com/users/cooniur/repos","events_url":"https://api.github.com/users/cooniur/events{/privacy}","received_events_url":"https://api.github.com/users/cooniur/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T19:52:50Z","updated_at":"2015-02-26T19:52:50Z","author_association":"NONE","body":"Hi @dadoonet, thanks for the effort reproducing the issue!\n\nI don't know whether it is related to Groovy and I doubt it's because of groovy because for the past 4 or 5 month this issue never happens.\n\nI'm trying to purge my local Maven repository, purge all remote artifacts in our Artifactory server and rebuild the project to see.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76259538","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-76259538","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":76259538,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MjU5NTM4","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T20:08:22Z","updated_at":"2015-02-26T20:08:22Z","author_association":"MEMBER","body":"It might be depend on your data. If you have a sample mapping and some data I could try to reproduce this in Java.\n\nLet me know how it goes.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76274664","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-76274664","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":76274664,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Mjc0NjY0","user":{"login":"cooniur","id":3030052,"node_id":"MDQ6VXNlcjMwMzAwNTI=","avatar_url":"https://avatars0.githubusercontent.com/u/3030052?v=4","gravatar_id":"","url":"https://api.github.com/users/cooniur","html_url":"https://github.com/cooniur","followers_url":"https://api.github.com/users/cooniur/followers","following_url":"https://api.github.com/users/cooniur/following{/other_user}","gists_url":"https://api.github.com/users/cooniur/gists{/gist_id}","starred_url":"https://api.github.com/users/cooniur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cooniur/subscriptions","organizations_url":"https://api.github.com/users/cooniur/orgs","repos_url":"https://api.github.com/users/cooniur/repos","events_url":"https://api.github.com/users/cooniur/events{/privacy}","received_events_url":"https://api.github.com/users/cooniur/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T21:13:37Z","updated_at":"2015-02-26T21:14:56Z","author_association":"NONE","body":"@dadoonet \nI just setup a clean environment to test Elasticsearch API. Here is what I did.\n\nDependencies:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n    <project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n             xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n             xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n        <modelVersion>4.0.0</modelVersion>\n\n```\n    <groupId>com.tliu.demo</groupId>\n    <artifactId>esclient</artifactId>\n    <version>1.0-SNAPSHOT</version>\n\n    <properties>\n        <java.version>1.8</java.version>\n\n        <plugin.groovy-eclipse-compiler>2.9.0-01</plugin.groovy-eclipse-compiler>\n        <plugin.groovy-eclipse-batch>2.3.4-01</plugin.groovy-eclipse-batch>\n    </properties>\n\n    <dependencies>\n        <dependency>\n            <groupId>org.elasticsearch</groupId>\n            <artifactId>elasticsearch</artifactId>\n            <version>1.4.4</version>\n        </dependency>\n        <dependency>\n            <groupId>org.codehaus.groovy</groupId>\n            <artifactId>groovy-all</artifactId>\n            <version>2.4.1</version>\n        </dependency>\n\n        <dependency>\n            <groupId>org.slf4j</groupId>\n            <artifactId>slf4j-api</artifactId>\n            <version>1.7.10</version>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>ch.qos.logback</groupId>\n            <artifactId>logback-classic</artifactId>\n            <version>1.1.2</version>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>junit</groupId>\n            <artifactId>junit</artifactId>\n            <version>4.12</version>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>org.hamcrest</groupId>\n            <artifactId>hamcrest-all</artifactId>\n            <version>1.3</version>\n        </dependency>\n    </dependencies>\n\n    <build>\n        <finalName>${project.name}</finalName>\n        <plugins>\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-compiler-plugin</artifactId>\n                <version>3.2</version>\n                <configuration>\n                    <source>${java.version}</source>\n                    <target>${java.version}</target>\n                    <compilerId>groovy-eclipse-compiler</compilerId>\n                </configuration>\n                <dependencies>\n                    <!-- Groovy compiler support -->\n                    <dependency>\n                        <groupId>org.codehaus.groovy</groupId>\n                        <artifactId>groovy-eclipse-compiler</artifactId>\n                        <version>${plugin.groovy-eclipse-compiler}</version>\n                    </dependency>\n                    <dependency>\n                        <groupId>org.codehaus.groovy</groupId>\n                        <artifactId>groovy-eclipse-batch</artifactId>\n                        <version>${plugin.groovy-eclipse-batch}</version>\n                    </dependency>\n                </dependencies>\n            </plugin>\n        </plugins>\n    </build>\n</project>\n```\n\n`EsClientFactory.java`: the same class I used in my project.\n\n```\npackage com.tliu.demo.esclient;\n\nimport org.elasticsearch.client.Client;\nimport org.elasticsearch.client.transport.TransportClient;\nimport org.elasticsearch.common.settings.ImmutableSettings;\nimport org.elasticsearch.common.settings.Settings;\nimport org.elasticsearch.common.transport.InetSocketTransportAddress;\n\npublic class EsClientFactory\n{\n    private final Client client;\n\n    public EsClientFactory(String clusterName, String hostname, int port)\n    {\n        Settings settings = ImmutableSettings.settingsBuilder().put(\"cluster.name\", clusterName).build();\n        client = new TransportClient(settings).addTransportAddress(new InetSocketTransportAddress(hostname, port));\n    }\n\n    public Client getClient()\n    {\n        return client;\n    }\n\n    public void shutdown()\n    {\n        client.close();\n    }\n}\n```\n\n`EsClientFactoryTest.java`:\n\npackage com.tliu.demo.esclient\n\n```\nimport org.elasticsearch.action.search.SearchRequestBuilder\nimport org.elasticsearch.action.search.SearchResponse\nimport org.elasticsearch.client.Client\nimport org.elasticsearch.index.query.FilterBuilders\nimport org.elasticsearch.index.query.QueryBuilders\nimport org.junit.Before\nimport org.junit.Test\nimport org.slf4j.Logger\nimport org.slf4j.LoggerFactory\n\npublic class EsClientFactoryTest\n{\n    private final Logger logger = LoggerFactory.getLogger(this.class)\n\n\n    EsClientFactory esClientFactory\n\n    @Before\n    public void before()\n    {\n        esClientFactory = new EsClientFactory(\"elasticsearch\", \"localhost\", 9335)\n    }\n\n    @Test\n    public void test()\n    {\n        Client client = esClientFactory.getClient();\n        SearchRequestBuilder request = client.prepareSearch(\"patient_centric_1\")\n                .setTypes(\"patient_data\")\n                .setQuery(QueryBuilders.filteredQuery(QueryBuilders.matchAllQuery(), FilterBuilders.termFilter(\"_id\", \"100\")))\n\n        logger.debug(\"Request: {}\", request)\n\n        SearchResponse response = request.execute().actionGet()\n\n        logger.debug(\"Response: {}\", response)\n    }\n}\n```\n\nAnd it throws the exception at `.setQuery(QueryBuilders.filteredQuery(QueryBuilders.matchAllQuery(), FilterBuilders.termFilter(\"_id\", \"100\")))`\n\nI checked the `QueryBuilders` source code, it uses `org.elasticsearch.common.geo.builders.ShapeBuilder`, where the `com.vividsolutions.jts.geom.*` was imported. But as you see in my test code, I didn't use the `geoShapeQuery()` method.  \n\nTry to use `QueryBuilders` in your test code.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76275592","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-76275592","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":76275592,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Mjc1NTky","user":{"login":"cooniur","id":3030052,"node_id":"MDQ6VXNlcjMwMzAwNTI=","avatar_url":"https://avatars0.githubusercontent.com/u/3030052?v=4","gravatar_id":"","url":"https://api.github.com/users/cooniur","html_url":"https://github.com/cooniur","followers_url":"https://api.github.com/users/cooniur/followers","following_url":"https://api.github.com/users/cooniur/following{/other_user}","gists_url":"https://api.github.com/users/cooniur/gists{/gist_id}","starred_url":"https://api.github.com/users/cooniur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cooniur/subscriptions","organizations_url":"https://api.github.com/users/cooniur/orgs","repos_url":"https://api.github.com/users/cooniur/repos","events_url":"https://api.github.com/users/cooniur/events{/privacy}","received_events_url":"https://api.github.com/users/cooniur/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T21:18:35Z","updated_at":"2015-02-26T21:18:35Z","author_association":"NONE","body":"@dadoonet \nI just pushed my code to my Github: https://github.com/cooniur/esclient-demo\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76476997","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-76476997","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":76476997,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NDc2OTk3","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2015-02-27T21:40:45Z","updated_at":"2015-02-27T21:40:45Z","author_association":"MEMBER","body":"maybe @nknize can have a look too? Related to #9462 ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/108479949","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-108479949","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":108479949,"node_id":"MDEyOklzc3VlQ29tbWVudDEwODQ3OTk0OQ==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-06-03T15:18:24Z","updated_at":"2015-06-03T15:18:24Z","author_association":"MEMBER","body":"Hey guys.\n\nI was looking at the related mentioned issues and it looks like every issue/PR have been closed now.\nShould we consider this issue as closed as well? \n\n@cooniur Were you able to get your stuff working?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/111031393","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-111031393","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":111031393,"node_id":"MDEyOklzc3VlQ29tbWVudDExMTAzMTM5Mw==","user":{"login":"cooniur","id":3030052,"node_id":"MDQ6VXNlcjMwMzAwNTI=","avatar_url":"https://avatars0.githubusercontent.com/u/3030052?v=4","gravatar_id":"","url":"https://api.github.com/users/cooniur","html_url":"https://github.com/cooniur","followers_url":"https://api.github.com/users/cooniur/followers","following_url":"https://api.github.com/users/cooniur/following{/other_user}","gists_url":"https://api.github.com/users/cooniur/gists{/gist_id}","starred_url":"https://api.github.com/users/cooniur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cooniur/subscriptions","organizations_url":"https://api.github.com/users/cooniur/orgs","repos_url":"https://api.github.com/users/cooniur/repos","events_url":"https://api.github.com/users/cooniur/events{/privacy}","received_events_url":"https://api.github.com/users/cooniur/received_events","type":"User","site_admin":false},"created_at":"2015-06-11T07:43:32Z","updated_at":"2015-06-11T07:43:32Z","author_association":"NONE","body":"Hey @dadoonet , I'd like to test if it's still broken after we upgrade to 1.6. Will let you know the result.\n\nThanks!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/112975757","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-112975757","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":112975757,"node_id":"MDEyOklzc3VlQ29tbWVudDExMjk3NTc1Nw==","user":{"login":"cooniur","id":3030052,"node_id":"MDQ6VXNlcjMwMzAwNTI=","avatar_url":"https://avatars0.githubusercontent.com/u/3030052?v=4","gravatar_id":"","url":"https://api.github.com/users/cooniur","html_url":"https://github.com/cooniur","followers_url":"https://api.github.com/users/cooniur/followers","following_url":"https://api.github.com/users/cooniur/following{/other_user}","gists_url":"https://api.github.com/users/cooniur/gists{/gist_id}","starred_url":"https://api.github.com/users/cooniur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cooniur/subscriptions","organizations_url":"https://api.github.com/users/cooniur/orgs","repos_url":"https://api.github.com/users/cooniur/repos","events_url":"https://api.github.com/users/cooniur/events{/privacy}","received_events_url":"https://api.github.com/users/cooniur/received_events","type":"User","site_admin":false},"created_at":"2015-06-17T23:01:03Z","updated_at":"2015-06-17T23:05:17Z","author_association":"NONE","body":"Hey @dadoonet I did a test and found this issue is still there for me. Both the Java client and the server is on the latest version of ElasticSearch (1.6.0).\n\nHere is the exception I got:\n\n```\nCaused by: java.lang.NoClassDefFoundError: com/vividsolutions/jts/geom/Coordinate\n    at java.lang.Class.getDeclaredMethods0(Native Method)\n    at java.lang.Class.privateGetDeclaredMethods(Class.java:2701)\n    at java.lang.Class.getDeclaredMethods(Class.java:1975)\n    at org.codehaus.groovy.reflection.stdclasses.CachedSAMClass$1.run(CachedSAMClass.java:101)\n    at org.codehaus.groovy.reflection.stdclasses.CachedSAMClass$1.run(CachedSAMClass.java:99)\n    at java.security.AccessController.doPrivileged(Native Method)\n    ...\n    ... 19 common frames omitted\nCaused by: java.lang.ClassNotFoundException: com.vividsolutions.jts.geom.Coordinate\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    ... 101 common frames omitted\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/113037963","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-113037963","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":113037963,"node_id":"MDEyOklzc3VlQ29tbWVudDExMzAzNzk2Mw==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-06-18T04:56:07Z","updated_at":"2015-06-18T04:56:07Z","author_association":"MEMBER","body":"I think you forgot to add optional dependencies ?\n\nWhat is your dependency tree ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/113038608","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-113038608","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":113038608,"node_id":"MDEyOklzc3VlQ29tbWVudDExMzAzODYwOA==","user":{"login":"cooniur","id":3030052,"node_id":"MDQ6VXNlcjMwMzAwNTI=","avatar_url":"https://avatars0.githubusercontent.com/u/3030052?v=4","gravatar_id":"","url":"https://api.github.com/users/cooniur","html_url":"https://github.com/cooniur","followers_url":"https://api.github.com/users/cooniur/followers","following_url":"https://api.github.com/users/cooniur/following{/other_user}","gists_url":"https://api.github.com/users/cooniur/gists{/gist_id}","starred_url":"https://api.github.com/users/cooniur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cooniur/subscriptions","organizations_url":"https://api.github.com/users/cooniur/orgs","repos_url":"https://api.github.com/users/cooniur/repos","events_url":"https://api.github.com/users/cooniur/events{/privacy}","received_events_url":"https://api.github.com/users/cooniur/received_events","type":"User","site_admin":false},"created_at":"2015-06-18T05:02:34Z","updated_at":"2015-06-18T05:02:34Z","author_association":"NONE","body":"@dadoonet As I mentioned before (quoted below), if I add the geo dependency `com.vividsolutions:jts`, the problem will solve. However, the thing is I don't use any geo related queries in the code.\n\n> on February 25\n> Hi @dadoonet ,\n> \n> Thanks for the solution! It works if I add those dependencies.\n> \n> However, the problem is that I don't use any geo related queries in my code. What I use in my code are just queries like aggregations, filters. And actually in the last 4 months I never had this problem, and it suddenly appears today.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/113040014","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-113040014","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":113040014,"node_id":"MDEyOklzc3VlQ29tbWVudDExMzA0MDAxNA==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-06-18T05:08:45Z","updated_at":"2015-06-18T05:08:45Z","author_association":"MEMBER","body":"Do you have the full stack trace?\nI'm pretty sure I got the same error when writing tests for lang plugins.\n\nMay be we should mark this dep as not optional anymore ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/113061178","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-113061178","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":113061178,"node_id":"MDEyOklzc3VlQ29tbWVudDExMzA2MTE3OA==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-06-18T07:23:43Z","updated_at":"2015-06-18T07:23:43Z","author_association":"MEMBER","body":"I can confirm I just saw this issue again in azure tests. The full stack trace is the one you already provided. Nothing more than that. :( Looking at this.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/113062260","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-113062260","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":113062260,"node_id":"MDEyOklzc3VlQ29tbWVudDExMzA2MjI2MA==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-06-18T07:30:57Z","updated_at":"2015-06-18T07:30:57Z","author_association":"MEMBER","body":"@cooniur Any chance you are running your tests from IntelliJ and not from the command line? \n\nI mean I can reproduce the issue when running tests from IntelliJ but not with `mvn test`.\n\nCould you check please?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/113062403","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-113062403","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":113062403,"node_id":"MDEyOklzc3VlQ29tbWVudDExMzA2MjQwMw==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-06-18T07:32:04Z","updated_at":"2015-06-18T07:32:04Z","author_association":"MEMBER","body":"BTW, the full stack trace is:\n\n```\nException in thread \"main\" java.lang.NoClassDefFoundError: com/vividsolutions/jts/geom/Geometry\n    at java.lang.Class.getDeclaredMethods0(Native Method)\n    at java.lang.Class.privateGetDeclaredMethods(Class.java:2570)\n    at java.lang.Class.getMethod0(Class.java:2813)\n    at java.lang.Class.getMethod(Class.java:1663)\n    at org.junit.internal.builders.SuiteMethodBuilder.hasSuiteMethod(SuiteMethodBuilder.java:18)\n    at com.intellij.junit4.JUnit46ClassesRequestBuilder.collectWrappedRunners(JUnit46ClassesRequestBuilder.java:79)\n    at com.intellij.junit4.JUnit46ClassesRequestBuilder.getClassesRequest(JUnit46ClassesRequestBuilder.java:51)\n    at com.intellij.junit4.JUnit4TestRunnerUtil.buildRequest(JUnit4TestRunnerUtil.java:91)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:39)\n    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:212)\n    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:68)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:606)\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:140)\nCaused by: java.lang.ClassNotFoundException: com.vividsolutions.jts.geom.Geometry\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:425)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:358)\n    ... 16 more\n```\n\nThere is a specific IntelliJ Runner which might cause such an issue... ???\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/113066641","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-113066641","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":113066641,"node_id":"MDEyOklzc3VlQ29tbWVudDExMzA2NjY0MQ==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-06-18T07:52:42Z","updated_at":"2015-06-18T07:52:42Z","author_association":"MEMBER","body":"For information, I just opened an issue here: https://youtrack.jetbrains.com/issue/IDEA-141605\nThat said @cooniur, you might not be hitting the same...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/113073293","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-113073293","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":113073293,"node_id":"MDEyOklzc3VlQ29tbWVudDExMzA3MzI5Mw==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-06-18T08:22:23Z","updated_at":"2015-06-18T08:22:23Z","author_association":"MEMBER","body":"Interesting. When I check `Search for tests: in single module` I don't get this issue anymore.\nWhich makes sense to me. Might be a nice workaround.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/113232539","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-113232539","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":113232539,"node_id":"MDEyOklzc3VlQ29tbWVudDExMzIzMjUzOQ==","user":{"login":"cooniur","id":3030052,"node_id":"MDQ6VXNlcjMwMzAwNTI=","avatar_url":"https://avatars0.githubusercontent.com/u/3030052?v=4","gravatar_id":"","url":"https://api.github.com/users/cooniur","html_url":"https://github.com/cooniur","followers_url":"https://api.github.com/users/cooniur/followers","following_url":"https://api.github.com/users/cooniur/following{/other_user}","gists_url":"https://api.github.com/users/cooniur/gists{/gist_id}","starred_url":"https://api.github.com/users/cooniur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cooniur/subscriptions","organizations_url":"https://api.github.com/users/cooniur/orgs","repos_url":"https://api.github.com/users/cooniur/repos","events_url":"https://api.github.com/users/cooniur/events{/privacy}","received_events_url":"https://api.github.com/users/cooniur/received_events","type":"User","site_admin":false},"created_at":"2015-06-18T17:43:46Z","updated_at":"2015-06-18T17:46:01Z","author_association":"NONE","body":"@dadoonet I tested running my project from terminal by executing `java -jar myproject.jar` (note this is not mvn test), but still got the same exception. If I run the project in IntelliJ, I get the same exceptions too.\n\nThe project is a Spring Boot project. Spring Boot version is 1.2.4.RELEASE. Groovy 2.4.3 is used via dependency `org.codehaus.groovy:groovy-all`. My environment is Mac Yosemite 10.10.3.\n\nA full stack trace is attached below.\n\n```\norg.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[org.apache.camel.component.file.GenericFileMessage@52ad6815]\n    at org.apache.camel.util.ObjectHelper.wrapCamelExecutionException(ObjectHelper.java:1635)\n    at org.apache.camel.impl.DefaultExchange.setException(DefaultExchange.java:308)\n    at org.apache.camel.component.bean.MethodInfo$1.proceed(MethodInfo.java:254)\n    at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:171)\n    at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:77)\n    at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:448)\n    at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:191)\n    at org.apache.camel.processor.Pipeline.process(Pipeline.java:118)\n    at org.apache.camel.processor.Pipeline.process(Pipeline.java:80)\n    at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:191)\n    at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:435)\n    at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:211)\n    at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:175)\n    at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:174)\n    at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:101)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: java.lang.NoClassDefFoundError: com/vividsolutions/jts/geom/Coordinate\n    at java.lang.Class.getDeclaredMethods0(Native Method)\n    at java.lang.Class.privateGetDeclaredMethods(Class.java:2701)\n    at java.lang.Class.getDeclaredMethods(Class.java:1975)\n    at org.codehaus.groovy.reflection.stdclasses.CachedSAMClass$1.run(CachedSAMClass.java:101)\n    at org.codehaus.groovy.reflection.stdclasses.CachedSAMClass$1.run(CachedSAMClass.java:99)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at org.codehaus.groovy.reflection.stdclasses.CachedSAMClass.getDeclaredMethods(CachedSAMClass.java:99)\n    at org.codehaus.groovy.reflection.stdclasses.CachedSAMClass.getAbstractMethods(CachedSAMClass.java:117)\n    at org.codehaus.groovy.reflection.stdclasses.CachedSAMClass.getSAMMethod(CachedSAMClass.java:183)\n    at org.codehaus.groovy.reflection.ClassInfo.isSAM(ClassInfo.java:356)\n    at org.codehaus.groovy.reflection.ClassInfo.createCachedClass(ClassInfo.java:346)\n    at org.codehaus.groovy.reflection.ClassInfo.access$700(ClassInfo.java:38)\n    at org.codehaus.groovy.reflection.ClassInfo$LazyCachedClassRef.initValue(ClassInfo.java:494)\n    at org.codehaus.groovy.reflection.ClassInfo$LazyCachedClassRef.initValue(ClassInfo.java:485)\n    at org.codehaus.groovy.util.LazyReference.getLocked(LazyReference.java:46)\n    at org.codehaus.groovy.util.LazyReference.get(LazyReference.java:33)\n    at org.codehaus.groovy.reflection.ClassInfo.getCachedClass(ClassInfo.java:108)\n    at org.codehaus.groovy.reflection.ReflectionCache.getCachedClass(ReflectionCache.java:107)\n    at org.codehaus.groovy.reflection.ParameterTypes.getParametersTypes0(ParameterTypes.java:78)\n    at org.codehaus.groovy.reflection.ParameterTypes.getParameterTypes(ParameterTypes.java:64)\n    at org.codehaus.groovy.reflection.CachedMethod.compareToCachedMethod(CachedMethod.java:155)\n    at org.codehaus.groovy.reflection.CachedMethod.compareTo(CachedMethod.java:137)\n    at java.util.ComparableTimSort.binarySort(ComparableTimSort.java:258)\n    at java.util.ComparableTimSort.sort(ComparableTimSort.java:203)\n    at java.util.Arrays.sort(Arrays.java:1246)\n    at org.codehaus.groovy.reflection.CachedClass$3.initValue(CachedClass.java:119)\n    at org.codehaus.groovy.reflection.CachedClass$3.initValue(CachedClass.java:81)\n    at org.codehaus.groovy.util.LazyReference.getLocked(LazyReference.java:46)\n    at org.codehaus.groovy.util.LazyReference.get(LazyReference.java:33)\n    at org.codehaus.groovy.reflection.CachedClass.getMethods(CachedClass.java:257)\n    at groovy.lang.MetaClassImpl.populateMethods(MetaClassImpl.java:362)\n    at groovy.lang.MetaClassImpl.fillMethodIndex(MetaClassImpl.java:341)\n    at groovy.lang.MetaClassImpl.initialize(MetaClassImpl.java:3261)\n    at org.codehaus.groovy.reflection.ClassInfo.getMetaClassUnderLock(ClassInfo.java:251)\n    at org.codehaus.groovy.reflection.ClassInfo.getMetaClass(ClassInfo.java:282)\n    at org.codehaus.groovy.runtime.metaclass.MetaClassRegistryImpl.getMetaClass(MetaClassRegistryImpl.java:255)\n    at org.codehaus.groovy.runtime.InvokerHelper.getMetaClass(InvokerHelper.java:872)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.createCallStaticSite(CallSiteArray.java:72)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.createCallSite(CallSiteArray.java:159)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:110)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:114)\n    (omitted 3)\n    at sun.reflect.GeneratedMethodAccessor386.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)\n    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:324)\n    at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:382)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1016)\n    at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.callCurrent(PogoMetaClassSite.java:66)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:179)\n    (omitted 1)\n    at sun.reflect.GeneratedMethodAccessor385.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)\n    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:324)\n    at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:292)\n    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1016)\n    at groovy.lang.Closure.call(Closure.java:423)\n    at org.codehaus.groovy.runtime.ConvertedClosure.invokeCustom(ConvertedClosure.java:51)\n    at org.codehaus.groovy.runtime.ConversionHandler.invoke(ConversionHandler.java:103)\n    at com.sun.proxy.$Proxy171.accept(Unknown Source)\n    at java.util.HashMap$KeySpliterator.forEachRemaining(HashMap.java:1540)\n    at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:580)\n    at sun.reflect.GeneratedMethodAccessor309.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite$PojoCachedMethodSiteNoUnwrap.invoke(PojoMetaMethodSite.java:210)\n    at org.codehaus.groovy.runtime.callsite.PojoMetaMethodSite.call(PojoMetaMethodSite.java:53)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:122)\n    (omitted 3)\n    at sun.reflect.GeneratedMethodAccessor383.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at org.apache.camel.component.bean.MethodInfo.invoke(MethodInfo.java:408)\n    at org.apache.camel.component.bean.MethodInfo$1.doProceed(MethodInfo.java:279)\n    at org.apache.camel.component.bean.MethodInfo$1.proceed(MethodInfo.java:252)\n    ... 19 common frames omitted\nCaused by: java.lang.ClassNotFoundException: com.vividsolutions.jts.geom.Coordinate\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n    at org.springframework.boot.loader.LaunchedURLClassLoader.doLoadClass(LaunchedURLClassLoader.java:170)\n    at org.springframework.boot.loader.LaunchedURLClassLoader.loadClass(LaunchedURLClassLoader.java:136)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    ... 102 common frames omitted\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/113246787","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-113246787","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":113246787,"node_id":"MDEyOklzc3VlQ29tbWVudDExMzI0Njc4Nw==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-06-18T18:20:24Z","updated_at":"2015-06-18T18:20:24Z","author_association":"MEMBER","body":"It sounds like you are using Camel/Groovy and this is causing an issue because of reflection.\nI'm not sure we need to fix something in Elasticsearch code base.\n\nThe work around looks ok to me so add this lib and mustache to your project and it should be fine.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/113252592","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-113252592","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":113252592,"node_id":"MDEyOklzc3VlQ29tbWVudDExMzI1MjU5Mg==","user":{"login":"cooniur","id":3030052,"node_id":"MDQ6VXNlcjMwMzAwNTI=","avatar_url":"https://avatars0.githubusercontent.com/u/3030052?v=4","gravatar_id":"","url":"https://api.github.com/users/cooniur","html_url":"https://github.com/cooniur","followers_url":"https://api.github.com/users/cooniur/followers","following_url":"https://api.github.com/users/cooniur/following{/other_user}","gists_url":"https://api.github.com/users/cooniur/gists{/gist_id}","starred_url":"https://api.github.com/users/cooniur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cooniur/subscriptions","organizations_url":"https://api.github.com/users/cooniur/orgs","repos_url":"https://api.github.com/users/cooniur/repos","events_url":"https://api.github.com/users/cooniur/events{/privacy}","received_events_url":"https://api.github.com/users/cooniur/received_events","type":"User","site_admin":false},"created_at":"2015-06-18T18:36:11Z","updated_at":"2015-06-18T18:36:11Z","author_association":"NONE","body":"@dadoonet Yeah, it looks like Groovy is the culprit. I checked our project's commit log. This issue happened after Groovy was upgraded from 2.3.x to 2.4.0.\n\nBut I'll do more test with another pure Java project to see if the problem is also there. I'll put the report here after I'm done.\n\nThanks!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/113276432","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-113276432","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":113276432,"node_id":"MDEyOklzc3VlQ29tbWVudDExMzI3NjQzMg==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-06-18T20:12:50Z","updated_at":"2015-06-18T20:12:50Z","author_association":"MEMBER","body":"So I'm closing this for now. Feel free to reopen if you think something could be fixed on our end but I doubt it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/146710161","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-146710161","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":146710161,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NjcxMDE2MQ==","user":{"login":"cooniur","id":3030052,"node_id":"MDQ6VXNlcjMwMzAwNTI=","avatar_url":"https://avatars0.githubusercontent.com/u/3030052?v=4","gravatar_id":"","url":"https://api.github.com/users/cooniur","html_url":"https://github.com/cooniur","followers_url":"https://api.github.com/users/cooniur/followers","following_url":"https://api.github.com/users/cooniur/following{/other_user}","gists_url":"https://api.github.com/users/cooniur/gists{/gist_id}","starred_url":"https://api.github.com/users/cooniur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cooniur/subscriptions","organizations_url":"https://api.github.com/users/cooniur/orgs","repos_url":"https://api.github.com/users/cooniur/repos","events_url":"https://api.github.com/users/cooniur/events{/privacy}","received_events_url":"https://api.github.com/users/cooniur/received_events","type":"User","site_admin":false},"created_at":"2015-10-08T22:52:19Z","updated_at":"2015-10-08T22:52:19Z","author_association":"NONE","body":"Hey @dadoonet \nI think now I can say for sure that this is related to Groovy. It looks like that Groovy will try to fetch the non-existent class by reflection, causing the `NoClassFoundException` eventually.\n\nHow can we solve this problem?\n\nThanks!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/146731560","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-146731560","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":146731560,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NjczMTU2MA==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-10-09T01:23:01Z","updated_at":"2015-10-09T01:23:01Z","author_association":"MEMBER","body":"@pickypg any idea?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/149920476","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-149920476","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":149920476,"node_id":"MDEyOklzc3VlQ29tbWVudDE0OTkyMDQ3Ng==","user":{"login":"luigibertolucci","id":7593848,"node_id":"MDQ6VXNlcjc1OTM4NDg=","avatar_url":"https://avatars0.githubusercontent.com/u/7593848?v=4","gravatar_id":"","url":"https://api.github.com/users/luigibertolucci","html_url":"https://github.com/luigibertolucci","followers_url":"https://api.github.com/users/luigibertolucci/followers","following_url":"https://api.github.com/users/luigibertolucci/following{/other_user}","gists_url":"https://api.github.com/users/luigibertolucci/gists{/gist_id}","starred_url":"https://api.github.com/users/luigibertolucci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luigibertolucci/subscriptions","organizations_url":"https://api.github.com/users/luigibertolucci/orgs","repos_url":"https://api.github.com/users/luigibertolucci/repos","events_url":"https://api.github.com/users/luigibertolucci/events{/privacy}","received_events_url":"https://api.github.com/users/luigibertolucci/received_events","type":"User","site_admin":false},"created_at":"2015-10-21T14:50:41Z","updated_at":"2015-10-21T14:50:41Z","author_association":"NONE","body":"Hey @dadoonet , @cooniur .\nI just ran into this same issue. Is there any workaround/solution?\n\nCheers!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/150105236","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-150105236","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":150105236,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MDEwNTIzNg==","user":{"login":"cooniur","id":3030052,"node_id":"MDQ6VXNlcjMwMzAwNTI=","avatar_url":"https://avatars0.githubusercontent.com/u/3030052?v=4","gravatar_id":"","url":"https://api.github.com/users/cooniur","html_url":"https://github.com/cooniur","followers_url":"https://api.github.com/users/cooniur/followers","following_url":"https://api.github.com/users/cooniur/following{/other_user}","gists_url":"https://api.github.com/users/cooniur/gists{/gist_id}","starred_url":"https://api.github.com/users/cooniur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cooniur/subscriptions","organizations_url":"https://api.github.com/users/cooniur/orgs","repos_url":"https://api.github.com/users/cooniur/repos","events_url":"https://api.github.com/users/cooniur/events{/privacy}","received_events_url":"https://api.github.com/users/cooniur/received_events","type":"User","site_admin":false},"created_at":"2015-10-22T04:47:41Z","updated_at":"2015-10-22T04:47:41Z","author_association":"NONE","body":"@luigibertolucci \nHey, the solution is add this dependency to your project (assuming you were using Maven):\n\n```\n<dependency>\n    <groupId>com.vividsolutions</groupId>\n    <artifactId>jts</artifactId>\n    <version>1.13</version>\n</dependency>\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/150295184","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-150295184","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":150295184,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MDI5NTE4NA==","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"created_at":"2015-10-22T17:17:38Z","updated_at":"2015-10-22T17:18:03Z","author_association":"MEMBER","body":"@dadoonet Sorry, I was on vacation two weeks ago. :)\n\nI believe that this is just Groovy being naive about its MetaClass generation. My only real recommendation is to try to use the invokedynamic version of Groovy, which will be faster, and hopefully bypass the naive generation.\n\nPerhaps even better, maybe you can switch over to using the equivalent Elasticsearch Groovy (http://github.com/elastic/elasticsearch-groovy) client instead of depending on Elasticsearch directly, which adds Groovy-friendly variants to the client methods like:\n\n``` groovy\nSearchResponse response = client.search {\n  indices \"patient_centric_1\"\n  types \"patient_data\"\n  source {\n    query {\n      filtered {\n        filter {\n          term {\n            _id = \"100\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/188129173","html_url":"https://github.com/elastic/elasticsearch/issues/9891#issuecomment-188129173","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9891","id":188129173,"node_id":"MDEyOklzc3VlQ29tbWVudDE4ODEyOTE3Mw==","user":{"login":"janbols","id":1818153,"node_id":"MDQ6VXNlcjE4MTgxNTM=","avatar_url":"https://avatars2.githubusercontent.com/u/1818153?v=4","gravatar_id":"","url":"https://api.github.com/users/janbols","html_url":"https://github.com/janbols","followers_url":"https://api.github.com/users/janbols/followers","following_url":"https://api.github.com/users/janbols/following{/other_user}","gists_url":"https://api.github.com/users/janbols/gists{/gist_id}","starred_url":"https://api.github.com/users/janbols/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janbols/subscriptions","organizations_url":"https://api.github.com/users/janbols/orgs","repos_url":"https://api.github.com/users/janbols/repos","events_url":"https://api.github.com/users/janbols/events{/privacy}","received_events_url":"https://api.github.com/users/janbols/received_events","type":"User","site_admin":false},"created_at":"2016-02-24T07:47:21Z","updated_at":"2016-02-24T07:47:21Z","author_association":"NONE","body":"I don't have the issue anymore when upgrdagin groovy version from 2.4.4 to 2.4.6\n","performed_via_github_app":null}]