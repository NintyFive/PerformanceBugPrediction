[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/324863355","html_url":"https://github.com/elastic/elasticsearch/issues/26378#issuecomment-324863355","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26378","id":324863355,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNDg2MzM1NQ==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2017-08-25T09:02:02Z","updated_at":"2017-08-25T09:02:12Z","author_association":"MEMBER","body":"There is a connection failure to one node during the tests. The two documents missing may come from that node, that would explain why the scroll only sees 9 out of 11 documents:\r\n\r\n`````\r\n[2017-08-25T06:54:52,071][WARN ][o.e.c.NodeConnectionsService] [node_s1] failed to connect to node {node_s0}{nf4GnuydSP66xJDkBMJJaA}{KyOvUcWnRdGzRF_t6IAlng}{127.0.0.1}{127.0.0.1:9440} (tried [1] times)\r\n  1> org.elasticsearch.transport.ConnectTransportException: [node_s0][127.0.0.1:9440] general node connection failure\r\n  1> \tat org.elasticsearch.transport.TcpTransport.openConnection(TcpTransport.java:609) ~[main/:?]\r\n  1> \tat org.elasticsearch.transport.TcpTransport.connectToNode(TcpTransport.java:495) ~[main/:?]\r\n  1> \tat org.elasticsearch.transport.TransportService.connectToNode(TransportService.java:325) ~[main/:?]\r\n  1> \tat org.elasticsearch.transport.TransportService.connectToNode(TransportService.java:312) ~[main/:?]\r\n  1> \tat org.elasticsearch.cluster.NodeConnectionsService.validateAndConnectIfNeeded(NodeConnectionsService.java:154) ~[main/:?]\r\n  1> \tat org.elasticsearch.cluster.NodeConnectionsService$1.doRun(NodeConnectionsService.java:107) ~[main/:?]\r\n  1> \tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:638) ~[main/:?]\r\n  1> \tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) ~[main/:?]\r\n  1> \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_144]\r\n  1> \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_144]\r\n`````\r\n\r\nI'll monitor the tests for some days and close it if it does not reproduce.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/340765583","html_url":"https://github.com/elastic/elasticsearch/issues/26378#issuecomment-340765583","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26378","id":340765583,"node_id":"MDEyOklzc3VlQ29tbWVudDM0MDc2NTU4Mw==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2017-10-31T13:42:02Z","updated_at":"2017-10-31T13:42:02Z","author_association":"MEMBER","body":"Did not reproduced since August so closing this as non-issue","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/347549046","html_url":"https://github.com/elastic/elasticsearch/issues/26378#issuecomment-347549046","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26378","id":347549046,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzU0OTA0Ng==","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2017-11-28T14:56:57Z","updated_at":"2017-11-28T14:56:57Z","author_association":"MEMBER","body":"Just failed in 5.6 https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+5.6+multijob-windows-compatibility/381/console","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/347557907","html_url":"https://github.com/elastic/elasticsearch/issues/26378#issuecomment-347557907","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26378","id":347557907,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzU1NzkwNw==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2017-11-28T15:24:04Z","updated_at":"2017-11-28T15:24:04Z","author_association":"MEMBER","body":"Thanks @imotov , I think that the scroll timeouts during the execution of the test. I raised the scroll timeout to 1 minute (500ms was too low and could fail on some shard if the machine is slow):\r\nhttps://github.com/elastic/elasticsearch/commit/37653c9dca1bf59574c9bdddaadc378c7d1f6337\r\nI'll reopen if this reproduces with this new commit","performed_via_github_app":null}]