{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/9344","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9344/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9344/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9344/events","html_url":"https://github.com/elastic/elasticsearch/issues/9344","id":54688726,"node_id":"MDU6SXNzdWU1NDY4ODcyNg==","number":9344,"title":"Relocating shards runs forever","user":{"login":"murugan-sundararaj","id":8253766,"node_id":"MDQ6VXNlcjgyNTM3NjY=","avatar_url":"https://avatars0.githubusercontent.com/u/8253766?v=4","gravatar_id":"","url":"https://api.github.com/users/murugan-sundararaj","html_url":"https://github.com/murugan-sundararaj","followers_url":"https://api.github.com/users/murugan-sundararaj/followers","following_url":"https://api.github.com/users/murugan-sundararaj/following{/other_user}","gists_url":"https://api.github.com/users/murugan-sundararaj/gists{/gist_id}","starred_url":"https://api.github.com/users/murugan-sundararaj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/murugan-sundararaj/subscriptions","organizations_url":"https://api.github.com/users/murugan-sundararaj/orgs","repos_url":"https://api.github.com/users/murugan-sundararaj/repos","events_url":"https://api.github.com/users/murugan-sundararaj/events{/privacy}","received_events_url":"https://api.github.com/users/murugan-sundararaj/received_events","type":"User","site_admin":false},"labels":[{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2015-01-18T07:04:05Z","updated_at":"2015-06-29T12:38:16Z","closed_at":"2015-02-28T05:19:55Z","author_association":"NONE","active_lock_reason":null,"body":"We are using elasticsearch 1.3.0. Here is the cluster config\n5 master only nodes\n2 data only nodes\n1 master and data node\n\nThe cluster state was green. The 2 \"data only nodes\" disk got full and cluster state went to red. I freed up the disk space and brought the cluster state to yellow. But there were two shards relocating and never completed for the whole day. And the marvel index creation (for the next day) started failing at this point and the cluster state went to red again. \n\n[2015-01-18 12:02:15,272][ERROR][marvel.agent.exporter    ] [es-data-node-2.com] create failure (index:[.marvel-2015.01.18] type: [shard_event]): UnavailableShardsException[[.marvel-2015.01.18][0] [1] shardIt, [0] active : Timeout waiting for [1m], request: org.elasticsearch.action.bulk.BulkShardRequest@98f690]\n\nI was left with no option but to restart the cluster. After restart, the cluster state became green and any relocating shards completed fast.\n\nPlease let me know what could have triggered such problem and how to solve it in future.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}