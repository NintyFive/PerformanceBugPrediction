[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/233370884","html_url":"https://github.com/elastic/elasticsearch/issues/19479#issuecomment-233370884","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19479","id":233370884,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMzM3MDg4NA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2016-07-18T15:51:55Z","updated_at":"2016-07-18T15:51:55Z","author_association":"CONTRIBUTOR","body":"Why would it increase the probability of conflict?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/233373076","html_url":"https://github.com/elastic/elasticsearch/issues/19479#issuecomment-233373076","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19479","id":233373076,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMzM3MzA3Ng==","user":{"login":"hao5ang","id":4319331,"node_id":"MDQ6VXNlcjQzMTkzMzE=","avatar_url":"https://avatars1.githubusercontent.com/u/4319331?v=4","gravatar_id":"","url":"https://api.github.com/users/hao5ang","html_url":"https://github.com/hao5ang","followers_url":"https://api.github.com/users/hao5ang/followers","following_url":"https://api.github.com/users/hao5ang/following{/other_user}","gists_url":"https://api.github.com/users/hao5ang/gists{/gist_id}","starred_url":"https://api.github.com/users/hao5ang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hao5ang/subscriptions","organizations_url":"https://api.github.com/users/hao5ang/orgs","repos_url":"https://api.github.com/users/hao5ang/repos","events_url":"https://api.github.com/users/hao5ang/events{/privacy}","received_events_url":"https://api.github.com/users/hao5ang/received_events","type":"User","site_admin":false},"created_at":"2016-07-18T15:58:52Z","updated_at":"2016-07-18T15:58:52Z","author_association":"NONE","body":"Mac address is unique, but the munged address is random. We have possibility of 1/2^48 to conflict if we deploy 2 nodes.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/233386504","html_url":"https://github.com/elastic/elasticsearch/issues/19479#issuecomment-233386504","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19479","id":233386504,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMzM4NjUwNA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2016-07-18T16:45:48Z","updated_at":"2016-07-18T16:45:48Z","author_association":"CONTRIBUTOR","body":"This is true. We need to xor the mac address so that two nodes that are started on the same physical machine do not generate the same identifiers (since they would see the same mac address). 1/2^48 is a very low probability but it is true that as more nodes get added to the cluster, the probability of collisions increases quickly. For instance, in the case of a 1000 nodes cluster, the probability of a collision is ~2*10^-9.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/233392952","html_url":"https://github.com/elastic/elasticsearch/issues/19479#issuecomment-233392952","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19479","id":233392952,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMzM5Mjk1Mg==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2016-07-18T17:08:47Z","updated_at":"2016-07-18T17:08:47Z","author_association":"CONTRIBUTOR","body":"After discussing it a bit with @mikemccand , the current probability is probably low enough to be acceptable, especially given that ids need to be unique per index, so `min(num_nodes, number_of_replicas)` (the number of distinct nodes that hold a shard of the same index) is more relevant that the number of nodes here. Eg. the probability is ~1.6*10^-13 for 10 shards.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/233517621","html_url":"https://github.com/elastic/elasticsearch/issues/19479#issuecomment-233517621","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19479","id":233517621,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMzUxNzYyMQ==","user":{"login":"hao5ang","id":4319331,"node_id":"MDQ6VXNlcjQzMTkzMzE=","avatar_url":"https://avatars1.githubusercontent.com/u/4319331?v=4","gravatar_id":"","url":"https://api.github.com/users/hao5ang","html_url":"https://github.com/hao5ang","followers_url":"https://api.github.com/users/hao5ang/followers","following_url":"https://api.github.com/users/hao5ang/following{/other_user}","gists_url":"https://api.github.com/users/hao5ang/gists{/gist_id}","starred_url":"https://api.github.com/users/hao5ang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hao5ang/subscriptions","organizations_url":"https://api.github.com/users/hao5ang/orgs","repos_url":"https://api.github.com/users/hao5ang/repos","events_url":"https://api.github.com/users/hao5ang/events{/privacy}","received_events_url":"https://api.github.com/users/hao5ang/received_events","type":"User","site_admin":false},"created_at":"2016-07-19T03:00:13Z","updated_at":"2016-07-19T03:00:13Z","author_association":"NONE","body":"Yes, the probability is really low. I think we can also just use random bytes directly because the munged mac address has no relationship with the mac address.\n","performed_via_github_app":null}]