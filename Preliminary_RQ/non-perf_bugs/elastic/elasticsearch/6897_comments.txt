[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/49283711","html_url":"https://github.com/elastic/elasticsearch/issues/6897#issuecomment-49283711","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6897","id":49283711,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MjgzNzEx","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-07-17T09:32:34Z","updated_at":"2014-07-17T09:33:07Z","author_association":"CONTRIBUTOR","body":"Hi @julianhille \n\nYou have a couple of bugs in your script.  The `ids` filter that you specify is invalid, and the `_uid` field should be `{type}#{id}`, ie `bug#1`\n\nHere is the corrected script below:\n\n```\nDELETE /_all \n\n# configure the mapping of the bug type in the test index\nPUT /test/bug/_mapping\n{\n  \"bug\": {\n    \"_id\": {\n      \"path\": \"id\"\n    },\n    \"properties\": {\n      \"id\": {\n        \"type\": \"integer\",\n        \"index\": \"not_analyzed\",\n        \"omit_norms\": true\n      }\n    }\n  }\n}\n\n# Index a single percolator with terms filter on id\nPUT /test/.percolator/terms_filter\n{\n  \"query\": {\n    \"filtered\": {\n      \"filter\": {\n        \"terms\": {\n          \"values\": [1,2,3]\n        }\n      },\n      \"query\": {\n        \"match_all\": {}\n      }\n    }\n  },\n  \"type\": \"bug\"\n}\n\n# Index a single percolator with ids filter\nPUT /test/.percolator/ids_filter\n{\n  \"query\": {\n    \"filtered\": {\n      \"filter\": {\n        \"ids\": {\n          \"values\": [1,2,3]\n        }\n      },\n      \"query\": {\n        \"match_all\": {}\n      }\n    }\n  },\n  \"type\": \"bug\"\n}\n```\n\nThis matches the `terms_filter`, but not the `ids_filter`\n\n```\nGET /test/bug/_percolate?pretty\n{\n  \"doc\": {\n    \"id\": \"1\"\n  }\n}\n```\n\nThis matches the `ids_filter`\n\n```\nGET /test/bug/_percolate?pretty\n{\n  \"doc\": {\n    \"_id\": \"1\"\n  }\n} \n```\n\nThis matches the `ids_filter`\n\n```\nGET /test/bug/_percolate?pretty\n{\n  \"doc\": {\n    \"_uid\": \"bug#1\"\n  }\n}\n```\n\nSo the only thing missing is that the `_id` hasn't been extracted from the `id` field in the document.  Given that we're considering deprecating extracting IDs from documents (see #6730) I'm wondering whether we should fix this...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/49286369","html_url":"https://github.com/elastic/elasticsearch/issues/6897#issuecomment-49286369","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6897","id":49286369,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5Mjg2MzY5","user":{"login":"julianhille","id":741067,"node_id":"MDQ6VXNlcjc0MTA2Nw==","avatar_url":"https://avatars1.githubusercontent.com/u/741067?v=4","gravatar_id":"","url":"https://api.github.com/users/julianhille","html_url":"https://github.com/julianhille","followers_url":"https://api.github.com/users/julianhille/followers","following_url":"https://api.github.com/users/julianhille/following{/other_user}","gists_url":"https://api.github.com/users/julianhille/gists{/gist_id}","starred_url":"https://api.github.com/users/julianhille/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianhille/subscriptions","organizations_url":"https://api.github.com/users/julianhille/orgs","repos_url":"https://api.github.com/users/julianhille/repos","events_url":"https://api.github.com/users/julianhille/events{/privacy}","received_events_url":"https://api.github.com/users/julianhille/received_events","type":"User","site_admin":false},"created_at":"2014-07-17T09:55:26Z","updated_at":"2014-07-17T09:55:26Z","author_association":"NONE","body":"updated the gist but still does not match the ids filter in any way.\nI don't know if this should be fixed, but it should be at least be mentioned on any documentation page (percolator / ids filter).\n\nFixed your typo in the terms filter percolator.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/49289392","html_url":"https://github.com/elastic/elasticsearch/issues/6897#issuecomment-49289392","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6897","id":49289392,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5Mjg5Mzky","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-07-17T10:23:31Z","updated_at":"2014-07-17T10:23:31Z","author_association":"CONTRIBUTOR","body":"> Fixed your typo in the terms filter percolator.\n\nah yes, that was a copy and paste reformat of the array :)\n\nYou have another typo in your script:\n\n```\n# Index a single percolator with ids filter\ncurl -X PUT ES_HOST/$ES_INDEX/test/.percolator/ids_filter -s -o /dev/null -d '\n```\n\nShould be `$ES_HOST`\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/49291221","html_url":"https://github.com/elastic/elasticsearch/issues/6897#issuecomment-49291221","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6897","id":49291221,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MjkxMjIx","user":{"login":"julianhille","id":741067,"node_id":"MDQ6VXNlcjc0MTA2Nw==","avatar_url":"https://avatars1.githubusercontent.com/u/741067?v=4","gravatar_id":"","url":"https://api.github.com/users/julianhille","html_url":"https://github.com/julianhille","followers_url":"https://api.github.com/users/julianhille/followers","following_url":"https://api.github.com/users/julianhille/following{/other_user}","gists_url":"https://api.github.com/users/julianhille/gists{/gist_id}","starred_url":"https://api.github.com/users/julianhille/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianhille/subscriptions","organizations_url":"https://api.github.com/users/julianhille/orgs","repos_url":"https://api.github.com/users/julianhille/repos","events_url":"https://api.github.com/users/julianhille/events{/privacy}","received_events_url":"https://api.github.com/users/julianhille/received_events","type":"User","site_admin":false},"created_at":"2014-07-17T10:45:32Z","updated_at":"2014-07-17T10:45:32Z","author_association":"NONE","body":"forgot to update that. locally its with a $ damn.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/49291554","html_url":"https://github.com/elastic/elasticsearch/issues/6897#issuecomment-49291554","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6897","id":49291554,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MjkxNTU0","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-07-17T10:49:34Z","updated_at":"2014-07-17T10:49:34Z","author_association":"CONTRIBUTOR","body":"Right, next error in the script (in the same line)\n\n> curl -X PUT ES_HOST/$ES_INDEX/test/.percolator/ids_filter -s -o /dev/null -d '\n\nYou have `$ES_INDEX/test` - this throws an error, and is the reason your script fails\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/49292633","html_url":"https://github.com/elastic/elasticsearch/issues/6897#issuecomment-49292633","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6897","id":49292633,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MjkyNjMz","user":{"login":"julianhille","id":741067,"node_id":"MDQ6VXNlcjc0MTA2Nw==","avatar_url":"https://avatars1.githubusercontent.com/u/741067?v=4","gravatar_id":"","url":"https://api.github.com/users/julianhille","html_url":"https://github.com/julianhille","followers_url":"https://api.github.com/users/julianhille/followers","following_url":"https://api.github.com/users/julianhille/following{/other_user}","gists_url":"https://api.github.com/users/julianhille/gists{/gist_id}","starred_url":"https://api.github.com/users/julianhille/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianhille/subscriptions","organizations_url":"https://api.github.com/users/julianhille/orgs","repos_url":"https://api.github.com/users/julianhille/repos","events_url":"https://api.github.com/users/julianhille/events{/privacy}","received_events_url":"https://api.github.com/users/julianhille/received_events","type":"User","site_admin":false},"created_at":"2014-07-17T11:02:50Z","updated_at":"2014-07-17T11:02:50Z","author_association":"NONE","body":"copy and pasted too much from you. corrected. now works. perfectly. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/53095602","html_url":"https://github.com/elastic/elasticsearch/issues/6897#issuecomment-53095602","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6897","id":53095602,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDk1NjAy","user":{"login":"OlegYch","id":268312,"node_id":"MDQ6VXNlcjI2ODMxMg==","avatar_url":"https://avatars1.githubusercontent.com/u/268312?v=4","gravatar_id":"","url":"https://api.github.com/users/OlegYch","html_url":"https://github.com/OlegYch","followers_url":"https://api.github.com/users/OlegYch/followers","following_url":"https://api.github.com/users/OlegYch/following{/other_user}","gists_url":"https://api.github.com/users/OlegYch/gists{/gist_id}","starred_url":"https://api.github.com/users/OlegYch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlegYch/subscriptions","organizations_url":"https://api.github.com/users/OlegYch/orgs","repos_url":"https://api.github.com/users/OlegYch/repos","events_url":"https://api.github.com/users/OlegYch/events{/privacy}","received_events_url":"https://api.github.com/users/OlegYch/received_events","type":"User","site_admin":false},"created_at":"2014-08-22T17:46:43Z","updated_at":"2014-08-22T17:46:43Z","author_association":"NONE","body":"hm, why is it not of any usage? i use ids filter in percolators and would be sad if you remove it\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/61240323","html_url":"https://github.com/elastic/elasticsearch/issues/6897#issuecomment-61240323","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6897","id":61240323,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMjQwMzIz","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-10-31T10:06:51Z","updated_at":"2014-10-31T10:06:51Z","author_association":"CONTRIBUTOR","body":"I agree that the `ids` filter should not be removed.  However, this ticket does raise an interesting question regarding the possibility of removing the `path` parameter from the `_id` field.\n\nThe example above works because the `_id` or `_uid` is passed in the body of the document.  If we remove the `path` parameter, this may no longer work.  Also need to check whether, when percolating an indexed document, do we make the `_id` and other metadata fields available?\n\n@martijnvg any ideas about this?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64780980","html_url":"https://github.com/elastic/elasticsearch/issues/6897#issuecomment-64780980","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6897","id":64780980,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NzgwOTgw","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-11-27T11:50:51Z","updated_at":"2014-11-27T11:50:51Z","author_association":"CONTRIBUTOR","body":"Closed in favour of #6730\n","performed_via_github_app":null}]