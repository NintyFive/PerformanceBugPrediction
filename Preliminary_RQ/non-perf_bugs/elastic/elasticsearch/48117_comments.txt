[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542620667","html_url":"https://github.com/elastic/elasticsearch/issues/48117#issuecomment-542620667","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48117","id":542620667,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjYyMDY2Nw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-10-16T09:45:04Z","updated_at":"2019-10-16T09:45:04Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search (:Search/SQL)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542748268","html_url":"https://github.com/elastic/elasticsearch/issues/48117#issuecomment-542748268","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48117","id":542748268,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Mjc0ODI2OA==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2019-10-16T15:08:06Z","updated_at":"2019-10-17T20:00:50Z","author_association":"CONTRIBUTOR","body":"A similar thing just happened in https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob-unix-compatibility/os=fedora-29&&immutable/331/consoleText, but with the first failure in `CliSecurityIT.testDescribeWorksAsAdmin`:\r\n\r\n```\r\norg.elasticsearch.xpack.sql.qa.security.CliSecurityIT > testDescribeWorksAsAdmin FAILED\r\n    java.lang.AssertionError: Not all logs matched. Unmatched logs:\r\n    {node.id=BJdMYjtfSFuMQ2iRWRU7ZQ, origin.type=local_node, user.name=_system, type=audit, user.realm=__fallback, request.id=0jizkzmWSMu_hiIUMokTow, event.action=access_denied, indices=[.enrich-*], request.name=GetIndexRequest, origin.address=127.0.0.1:38837, event.type=transport, action=indices:admin/get, timestamp=2019-10-16T14:47:41,446+0000, user.roles=[_system]}\r\nREPRODUCE WITH: ./gradlew ':x-pack:plugin:sql:qa:security:with-ssl:integTestRunner' --tests \"org.elasticsearch.xpack.sql.qa.security.CliSecurityIT.testDescribeWorksAsAdmin\" -Dtests.seed=175A48A4015214B5 -Dtests.security.manager=true -Dtests.locale=mr -Dtests.timezone=Pacific/Auckland -Dcompiler.java=12 -Druntime.java=11\r\n\r\norg.elasticsearch.xpack.sql.qa.security.CliSecurityIT > testDescribeWithNoAccess FAILED\r\n    java.lang.AssertionError: Previous test had an audit-related failure. All subsequent audit related assertions are bogus because we can't guarantee that we fully cleaned up after the last test.\r\nREPRODUCE WITH: ./gradlew ':x-pack:plugin:sql:qa:security:with-ssl:integTestRunner' --tests \"org.elasticsearch.xpack.sql.qa.security.CliSecurityIT.testDescribeWithNoAccess\" -Dtests.seed=175A48A4015214B5 -Dtests.security.manager=true -Dtests.locale=mr -Dtests.timezone=Pacific/Auckland -Dcompiler.java=12 -Druntime.java=11\r\n\r\norg.elasticsearch.xpack.sql.qa.security.CliSecurityIT > testQueryStringSingleFieldGrantedWrongRequested FAILED\r\n    java.lang.AssertionError: Previous test had an audit-related failure. All subsequent audit related assertions are bogus because we can't guarantee that we fully cleaned up after the last test.\r\nREPRODUCE WITH: ./gradlew ':x-pack:plugin:sql:qa:security:with-ssl:integTestRunner' --tests \"org.elasticsearch.xpack.sql.qa.security.CliSecurityIT.testQueryStringSingleFieldGrantedWrongRequested\" -Dtests.seed=175A48A4015214B5 -Dtests.security.manager=true -Dtests.locale=mr -Dtests.timezone=Pacific/Auckland -Dcompiler.java=12 -Druntime.java=11\r\n\r\norg.elasticsearch.xpack.sql.qa.security.CliSecurityIT > testShowTablesWithNoAccess FAILED\r\n    java.lang.AssertionError: Previous test had an audit-related failure. All subsequent audit related assertions are bogus because we can't guarantee that we fully cleaned up after the last test.\r\nREPRODUCE WITH: ./gradlew ':x-pack:plugin:sql:qa:security:with-ssl:integTestRunner' --tests \"org.elasticsearch.xpack.sql.qa.security.CliSecurityIT.testShowTablesWithNoAccess\" -Dtests.seed=175A48A4015214B5 -Dtests.security.manager=true -Dtests.locale=mr -Dtests.timezone=Pacific/Auckland -Dcompiler.java=12 -Druntime.java=11\r\n\r\norg.elasticsearch.xpack.sql.qa.security.CliSecurityIT > testQuerySingleFieldExcepted FAILED\r\n    java.lang.AssertionError: Previous test had an audit-related failure. All subsequent audit related assertions are bogus because we can't guarantee that we fully cleaned up after the last test.\r\nREPRODUCE WITH: ./gradlew ':x-pack:plugin:sql:qa:security:with-ssl:integTestRunner' --tests \"org.elasticsearch.xpack.sql.qa.security.CliSecurityIT.testQuerySingleFieldExcepted\" -Dtests.seed=175A48A4015214B5 -Dtests.security.manager=true -Dtests.locale=mr -Dtests.timezone=Pacific/Auckland -Dcompiler.java=12 -Druntime.java=11\r\n```\r\n\r\nAlso in https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob-unix-compatibility/os=opensuse-42-3&&immutable/331/consoleText, but with the first failure in `JdbcSecurityIT.testShowTablesWorksAsFullAccess`:\r\n\r\n```\r\norg.elasticsearch.xpack.sql.qa.security.JdbcSecurityIT > testShowTablesWorksAsFullAccess FAILED\r\n    java.lang.AssertionError: Not all logs matched. Unmatched logs:\r\n    {node.id=r2dkCn6YQxuQmWolA1lplw, origin.type=local_node, user.name=_system, type=audit, user.realm=__fallback, request.id=jDTBCEbSTE2TNDw05C2XYA, event.action=access_denied, indices=[.enrich-*], request.name=GetIndexRequest, origin.address=127.0.0.1:43094, event.type=transport, action=indices:admin/get, timestamp=2019-10-16T14:48:20,977+0000, user.roles=[_system]}\r\nREPRODUCE WITH: ./gradlew ':x-pack:plugin:sql:qa:security:with-ssl:integTestRunner' --tests \"org.elasticsearch.xpack.sql.qa.security.JdbcSecurityIT.testShowTablesWorksAsFullAccess\" -Dtests.seed=7E72C9E408941EA4 -Dtests.security.manager=true -Dtests.locale=hi-IN -Dtests.timezone=Australia/Lindeman -Dcompiler.java=12 -Druntime.java=11\r\n\r\norg.elasticsearch.xpack.sql.qa.security.JdbcSecurityIT > testScrollWithSingleFieldExcepted FAILED\r\n    java.lang.AssertionError: Previous test had an audit-related failure. All subsequent audit related assertions are bogus because we can't guarantee that we fully cleaned up after the last test.\r\nREPRODUCE WITH: ./gradlew ':x-pack:plugin:sql:qa:security:with-ssl:integTestRunner' --tests \"org.elasticsearch.xpack.sql.qa.security.JdbcSecurityIT.testScrollWithSingleFieldExcepted\" -Dtests.seed=7E72C9E408941EA4 -Dtests.security.manager=true -Dtests.locale=hi-IN -Dtests.timezone=Australia/Lindeman -Dcompiler.java=12 -Druntime.java=11\r\n```\r\n\r\nSo it seems that to silence this class of failure the entirety of both `CliSecurityIT` and `JdbcSecurityIT` would need to be muted.  What do you think @matriv?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/543324988","html_url":"https://github.com/elastic/elasticsearch/issues/48117#issuecomment-543324988","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48117","id":543324988,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MzMyNDk4OA==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2019-10-17T19:25:37Z","updated_at":"2019-10-17T19:25:49Z","author_association":"CONTRIBUTOR","body":"There are a number of these builds that fail with assertion errors in basically the entire `CliSecurityIT` suite. There doesn't seem to be a consistent pattern in terms of job configuration or platform.\r\n\r\nhttps://gradle-enterprise.elastic.co/s/h5t5objanvhpk/tests/failed\r\nhttps://gradle-enterprise.elastic.co/s/6tzhbqmzbfpaq/tests/failed\r\nhttps://gradle-enterprise.elastic.co/s/6fxzvikol63cu/tests/failed\r\nhttps://gradle-enterprise.elastic.co/s/677gidbftg3hy/tests/failed\r\nhttps://gradle-enterprise.elastic.co/s/dtjepark7fozu/tests/failed\r\nhttps://gradle-enterprise.elastic.co/s/4pmzwlh5zshgq/tests/failed\r\nhttps://gradle-enterprise.elastic.co/s/5hg5j2537sdnm/tests/failed\r\nhttps://gradle-enterprise.elastic.co/s/qljxa73qplxbo/tests/failed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/543336679","html_url":"https://github.com/elastic/elasticsearch/issues/48117#issuecomment-543336679","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48117","id":543336679,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MzMzNjY3OQ==","user":{"login":"astefan","id":893749,"node_id":"MDQ6VXNlcjg5Mzc0OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/893749?v=4","gravatar_id":"","url":"https://api.github.com/users/astefan","html_url":"https://github.com/astefan","followers_url":"https://api.github.com/users/astefan/followers","following_url":"https://api.github.com/users/astefan/following{/other_user}","gists_url":"https://api.github.com/users/astefan/gists{/gist_id}","starred_url":"https://api.github.com/users/astefan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astefan/subscriptions","organizations_url":"https://api.github.com/users/astefan/orgs","repos_url":"https://api.github.com/users/astefan/repos","events_url":"https://api.github.com/users/astefan/events{/privacy}","received_events_url":"https://api.github.com/users/astefan/received_events","type":"User","site_admin":false},"created_at":"2019-10-17T19:57:13Z","updated_at":"2019-10-17T19:57:13Z","author_association":"CONTRIBUTOR","body":"It seems that all these failures have to do with an audit log that involves the [newly added enrich processor](https://github.com/elastic/elasticsearch/pull/48039) index... and the timing seems to match as well.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/543338799","html_url":"https://github.com/elastic/elasticsearch/issues/48117#issuecomment-543338799","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48117","id":543338799,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MzMzODc5OQ==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2019-10-17T20:02:55Z","updated_at":"2019-10-17T20:02:55Z","author_association":"CONTRIBUTOR","body":"@elastic/es-core-features ☝️thoughts? ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/543537697","html_url":"https://github.com/elastic/elasticsearch/issues/48117#issuecomment-543537697","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48117","id":543537697,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MzUzNzY5Nw==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-10-18T06:24:40Z","updated_at":"2019-10-18T06:24:40Z","author_association":"CONTRIBUTOR","body":"this led to even more failures, I muted the suite in a340795a0fb ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/543855321","html_url":"https://github.com/elastic/elasticsearch/issues/48117#issuecomment-543855321","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48117","id":543855321,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Mzg1NTMyMQ==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2019-10-18T17:40:21Z","updated_at":"2019-10-18T17:40:21Z","author_association":"CONTRIBUTOR","body":"> this led to even more failures, I muted the suite in a340795\r\n\r\nThis is failing in `7.x` as well. Should we mute there too?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/543965904","html_url":"https://github.com/elastic/elasticsearch/issues/48117#issuecomment-543965904","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48117","id":543965904,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Mzk2NTkwNA==","user":{"login":"astefan","id":893749,"node_id":"MDQ6VXNlcjg5Mzc0OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/893749?v=4","gravatar_id":"","url":"https://api.github.com/users/astefan","html_url":"https://github.com/astefan","followers_url":"https://api.github.com/users/astefan/followers","following_url":"https://api.github.com/users/astefan/following{/other_user}","gists_url":"https://api.github.com/users/astefan/gists{/gist_id}","starred_url":"https://api.github.com/users/astefan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astefan/subscriptions","organizations_url":"https://api.github.com/users/astefan/orgs","repos_url":"https://api.github.com/users/astefan/repos","events_url":"https://api.github.com/users/astefan/events{/privacy}","received_events_url":"https://api.github.com/users/astefan/received_events","type":"User","site_admin":false},"created_at":"2019-10-18T21:47:17Z","updated_at":"2019-10-18T21:47:17Z","author_association":"CONTRIBUTOR","body":"https://github.com/elastic/elasticsearch/pull/48098 might be related","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/544407579","html_url":"https://github.com/elastic/elasticsearch/issues/48117#issuecomment-544407579","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48117","id":544407579,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDQwNzU3OQ==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-10-21T08:30:02Z","updated_at":"2019-10-21T08:30:02Z","author_association":"CONTRIBUTOR","body":"Muted in `7.x` too fe265f0308e","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/544438002","html_url":"https://github.com/elastic/elasticsearch/issues/48117#issuecomment-544438002","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48117","id":544438002,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDQzODAwMg==","user":{"login":"iverase","id":29038686,"node_id":"MDQ6VXNlcjI5MDM4Njg2","avatar_url":"https://avatars1.githubusercontent.com/u/29038686?v=4","gravatar_id":"","url":"https://api.github.com/users/iverase","html_url":"https://github.com/iverase","followers_url":"https://api.github.com/users/iverase/followers","following_url":"https://api.github.com/users/iverase/following{/other_user}","gists_url":"https://api.github.com/users/iverase/gists{/gist_id}","starred_url":"https://api.github.com/users/iverase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iverase/subscriptions","organizations_url":"https://api.github.com/users/iverase/orgs","repos_url":"https://api.github.com/users/iverase/repos","events_url":"https://api.github.com/users/iverase/events{/privacy}","received_events_url":"https://api.github.com/users/iverase/received_events","type":"User","site_admin":false},"created_at":"2019-10-21T09:47:23Z","updated_at":"2019-10-21T09:47:23Z","author_association":"CONTRIBUTOR","body":"I am muting 7.5 as well","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/544562384","html_url":"https://github.com/elastic/elasticsearch/issues/48117#issuecomment-544562384","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48117","id":544562384,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NDU2MjM4NA==","user":{"login":"astefan","id":893749,"node_id":"MDQ6VXNlcjg5Mzc0OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/893749?v=4","gravatar_id":"","url":"https://api.github.com/users/astefan","html_url":"https://github.com/astefan","followers_url":"https://api.github.com/users/astefan/followers","following_url":"https://api.github.com/users/astefan/following{/other_user}","gists_url":"https://api.github.com/users/astefan/gists{/gist_id}","starred_url":"https://api.github.com/users/astefan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astefan/subscriptions","organizations_url":"https://api.github.com/users/astefan/orgs","repos_url":"https://api.github.com/users/astefan/repos","events_url":"https://api.github.com/users/astefan/events{/privacy}","received_events_url":"https://api.github.com/users/astefan/received_events","type":"User","site_admin":false},"created_at":"2019-10-21T15:15:26Z","updated_at":"2019-10-21T15:15:26Z","author_association":"CONTRIBUTOR","body":"@jbaiera could https://github.com/elastic/elasticsearch/pull/48098 be the fix for these failures here? What happens with sql tests in this specific issue is that some unexpected audit log entry resembling `{node.id=r2dkCn6YQxuQmWolA1lplw, origin.type=local_node, user.name=_system, type=audit, user.realm=__fallback, request.id=jDTBCEbSTE2TNDw05C2XYA, event.action=access_denied, indices=[.enrich-*], request.name=GetIndexRequest, origin.address=127.0.0.1:43094, event.type=transport, action=indices:admin/get, timestamp=2019-10-16T14:48:20,977+0000, user.roles=[_system]}` is messing up the expectation. These seem to have been showing up first almost a week ago.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/546369036","html_url":"https://github.com/elastic/elasticsearch/issues/48117#issuecomment-546369036","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48117","id":546369036,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjM2OTAzNg==","user":{"login":"jbaiera","id":875779,"node_id":"MDQ6VXNlcjg3NTc3OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/875779?v=4","gravatar_id":"","url":"https://api.github.com/users/jbaiera","html_url":"https://github.com/jbaiera","followers_url":"https://api.github.com/users/jbaiera/followers","following_url":"https://api.github.com/users/jbaiera/following{/other_user}","gists_url":"https://api.github.com/users/jbaiera/gists{/gist_id}","starred_url":"https://api.github.com/users/jbaiera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbaiera/subscriptions","organizations_url":"https://api.github.com/users/jbaiera/orgs","repos_url":"https://api.github.com/users/jbaiera/repos","events_url":"https://api.github.com/users/jbaiera/events{/privacy}","received_events_url":"https://api.github.com/users/jbaiera/received_events","type":"User","site_admin":false},"created_at":"2019-10-25T14:07:23Z","updated_at":"2019-10-25T14:07:23Z","author_association":"CONTRIBUTOR","body":"I think the reason for that log line was that the background maintenance task for enrich was failing when running with security. The authentication failure was making it to the audit log. Now that it's fixed, the log message should be gone","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/546998421","html_url":"https://github.com/elastic/elasticsearch/issues/48117#issuecomment-546998421","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48117","id":546998421,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Njk5ODQyMQ==","user":{"login":"matriv","id":5058131,"node_id":"MDQ6VXNlcjUwNTgxMzE=","avatar_url":"https://avatars1.githubusercontent.com/u/5058131?v=4","gravatar_id":"","url":"https://api.github.com/users/matriv","html_url":"https://github.com/matriv","followers_url":"https://api.github.com/users/matriv/followers","following_url":"https://api.github.com/users/matriv/following{/other_user}","gists_url":"https://api.github.com/users/matriv/gists{/gist_id}","starred_url":"https://api.github.com/users/matriv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matriv/subscriptions","organizations_url":"https://api.github.com/users/matriv/orgs","repos_url":"https://api.github.com/users/matriv/repos","events_url":"https://api.github.com/users/matriv/events{/privacy}","received_events_url":"https://api.github.com/users/matriv/received_events","type":"User","site_admin":false},"created_at":"2019-10-28T15:22:35Z","updated_at":"2019-10-28T15:22:35Z","author_association":"CONTRIBUTOR","body":"Re-enabled:\r\n`master` : 470362361ffce794a6a12ce7a81a8029ec7d54de\r\n`7.x` : 124f6d098b11942b470477b7acb82e50a2ae6e64\r\n`7.5` : 10513425f4f5120e804360c28cfa1623208cb1fd\r\n\r\nMany thanks @jbaiera and @astefan for chasing this!","performed_via_github_app":null}]