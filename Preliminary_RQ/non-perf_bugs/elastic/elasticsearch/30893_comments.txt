[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/392331879","html_url":"https://github.com/elastic/elasticsearch/issues/30893#issuecomment-392331879","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30893","id":392331879,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjMzMTg3OQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-05-27T13:40:59Z","updated_at":"2018-05-27T13:40:59Z","author_association":"MEMBER","body":"> \"type\": \"illegal_argument_exception\", \"reason\": \"persistent setting [search.remote.tier-1.initial_connect_timeout], not recognized\"\r\n\r\nThe problem here is that there is no per remote-cluster setting called `intial_connect_timeout`. You will get a similar error message if you try to add such a setting to the configuration file:\r\n\r\n```\r\nCaused by: java.lang.IllegalArgumentException: unknown setting [search.remote.tier-1.initial_connect_timeout] did you mean [search.remote.initial_connect_timeout]?\r\n\tat org.elasticsearch.common.settings.AbstractScopedSettings.validate(AbstractScopedSettings.java:344) ~[elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n\tat org.elasticsearch.common.settings.AbstractScopedSettings.validate(AbstractScopedSettings.java:308) ~[elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n\tat org.elasticsearch.common.settings.AbstractScopedSettings.validate(AbstractScopedSettings.java:282) ~[elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n\tat org.elasticsearch.common.settings.SettingsModule.<init>(SettingsModule.java:135) ~[elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n\tat org.elasticsearch.node.Node.<init>(Node.java:339) ~[elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n\tat org.elasticsearch.node.Node.<init>(Node.java:252) ~[elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n\tat org.elasticsearch.bootstrap.Bootstrap$5.<init>(Bootstrap.java:212) ~[elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n\tat org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:212) ~[elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n\tat org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:323) ~[elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n\tat org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:136) ~[elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n\t... 6 more\r\n```\r\n\r\nIf you think the [docs](https://www.elastic.co/guide/en/elasticsearch/reference/6.2/modules-cross-cluster-search.html#cross-cluster-search-settings) are not clear on this point, we are open to the feedback, yet contrast the documentation for `search.remote.initial_connect_timeout` versus `search.remote.${cluster_alias}.skip_unavailable` with the latter indicating that it is a per remote-cluster setting.\r\n\r\nDo note that this setting is indeed not dynamic however I think it is fine as a static setting, given that it is not per remote-cluster.\r\n\r\n> Eat your popcorn and enjoy the error message.\r\n\r\nComments like this are unhelpful and unnecessary.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/392332696","html_url":"https://github.com/elastic/elasticsearch/issues/30893#issuecomment-392332696","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30893","id":392332696,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjMzMjY5Ng==","user":{"login":"redlus","id":7827282,"node_id":"MDQ6VXNlcjc4MjcyODI=","avatar_url":"https://avatars3.githubusercontent.com/u/7827282?v=4","gravatar_id":"","url":"https://api.github.com/users/redlus","html_url":"https://github.com/redlus","followers_url":"https://api.github.com/users/redlus/followers","following_url":"https://api.github.com/users/redlus/following{/other_user}","gists_url":"https://api.github.com/users/redlus/gists{/gist_id}","starred_url":"https://api.github.com/users/redlus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/redlus/subscriptions","organizations_url":"https://api.github.com/users/redlus/orgs","repos_url":"https://api.github.com/users/redlus/repos","events_url":"https://api.github.com/users/redlus/events{/privacy}","received_events_url":"https://api.github.com/users/redlus/received_events","type":"User","site_admin":false},"created_at":"2018-05-27T13:54:30Z","updated_at":"2018-05-27T13:54:30Z","author_association":"NONE","body":"@jasontedor \r\nI've only written the requests and response when inserting the setting at the cluster level, but this happens on every level. E.g. on 'search.remote' level:\r\n`{\r\n    \"persistent\": {\r\n        \"search\": {\r\n            \"remote\": {\r\n                \"tier-2\": {\r\n                    \"seeds\": \"192.168.0.47:9300\"\r\n                },\r\n                \"tier-1\": {\r\n                    \"seeds\": \"192.168.0.45:9300\"\r\n                },\r\n                \"initial_connect_timeout\": \"60s\"\r\n            }\r\n        }\r\n    }\r\n}`\r\n\r\nResponse:\r\n`{\r\n    \"error\": {\r\n        \"root_cause\": [\r\n            {\r\n                \"type\": \"remote_transport_exception\",\r\n                \"reason\": \"[elasticmaster1][192.168.0.42:9300][cluster:admin/settings/update]\"\r\n            }\r\n        ],\r\n        \"type\": \"illegal_argument_exception\",\r\n        \"reason\": \"persistent setting [search.remote.initial_connect_timeout], not dynamically updateable\"\r\n    },\r\n    \"status\": 400\r\n}`\r\n\r\nOn 'search' level:\r\n`{\r\n    \"persistent\": {\r\n        \"search\": {\r\n            \"remote\": {\r\n                \"tier-2\": {\r\n                    \"seeds\": \"192.168.0.47:9300\"\r\n                },\r\n                \"tier-1\": {\r\n                    \"seeds\": \"192.168.0.45:9300\"\r\n                }\r\n            },\r\n            \"initial_connect_timeout\": \"60s\"\r\n        }\r\n    }\r\n}`\r\n\r\nResponse:\r\n`{\r\n    \"error\": {\r\n        \"root_cause\": [\r\n            {\r\n                \"type\": \"remote_transport_exception\",\r\n                \"reason\": \"[elasticmaster1][192.168.0.42:9300][cluster:admin/settings/update]\"\r\n            }\r\n        ],\r\n        \"type\": \"illegal_argument_exception\",\r\n        \"reason\": \"persistent setting [search.initial_connect_timeout], not recognized\"\r\n    },\r\n    \"status\": 400\r\n}`\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/392333350","html_url":"https://github.com/elastic/elasticsearch/issues/30893#issuecomment-392333350","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30893","id":392333350,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjMzMzM1MA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-05-27T14:04:16Z","updated_at":"2018-05-27T14:04:16Z","author_association":"MEMBER","body":"As I said:\r\n\r\n>Do note that this setting is indeed not dynamic however I think it is fine as a static setting, given that it is not per remote-cluster.\r\n\r\nYou have to set this statically in the configuration file.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/392380699","html_url":"https://github.com/elastic/elasticsearch/issues/30893#issuecomment-392380699","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30893","id":392380699,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjM4MDY5OQ==","user":{"login":"redlus","id":7827282,"node_id":"MDQ6VXNlcjc4MjcyODI=","avatar_url":"https://avatars3.githubusercontent.com/u/7827282?v=4","gravatar_id":"","url":"https://api.github.com/users/redlus","html_url":"https://github.com/redlus","followers_url":"https://api.github.com/users/redlus/followers","following_url":"https://api.github.com/users/redlus/following{/other_user}","gists_url":"https://api.github.com/users/redlus/gists{/gist_id}","starred_url":"https://api.github.com/users/redlus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/redlus/subscriptions","organizations_url":"https://api.github.com/users/redlus/orgs","repos_url":"https://api.github.com/users/redlus/repos","events_url":"https://api.github.com/users/redlus/events{/privacy}","received_events_url":"https://api.github.com/users/redlus/received_events","type":"User","site_admin":false},"created_at":"2018-05-27T22:07:41Z","updated_at":"2018-05-27T22:07:41Z","author_association":"NONE","body":"@jasontedor \r\nI felt the emphasis was needed after your reference of what is and what is not a per-cluster setting:\r\n> contrast the documentation for search.remote.initial_connect_timeout versus search.remote.${cluster_alias}.skip_unavailable with the latter indicating that it is a per remote-cluster setting.\r\n\r\nIn any case, stating all these settings in one [section](https://www.elastic.co/guide/en/elasticsearch/reference/6.2/modules-cross-cluster-search.html#cross-cluster-search-settings) without noting which is static and which is not is confusing IMHO (especially given that the cluster setting API is mentioned as an alternative to the elasticsearch.yml option) -\r\n> The equivalent example using the cluster settings API to add remote clusters to all nodes in the cluster would look like the following\r\n\r\nMore importantly, I hold the belief that almost any setting which can become dynamic should definitely have this option. Too many times we find outselves needing to perform a rolling restart of large elasticsearch clusters just to activate a feature or fine-tune one that has already been activated using a rolling-restart. This time I'm referring to this issue (and setting) - #30687.","performed_via_github_app":null}]