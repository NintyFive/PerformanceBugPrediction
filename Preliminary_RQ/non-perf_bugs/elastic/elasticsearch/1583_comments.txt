[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3378087","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-3378087","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":3378087,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzgwODc=","user":{"login":"n0rthwood","id":863836,"node_id":"MDQ6VXNlcjg2MzgzNg==","avatar_url":"https://avatars3.githubusercontent.com/u/863836?v=4","gravatar_id":"","url":"https://api.github.com/users/n0rthwood","html_url":"https://github.com/n0rthwood","followers_url":"https://api.github.com/users/n0rthwood/followers","following_url":"https://api.github.com/users/n0rthwood/following{/other_user}","gists_url":"https://api.github.com/users/n0rthwood/gists{/gist_id}","starred_url":"https://api.github.com/users/n0rthwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n0rthwood/subscriptions","organizations_url":"https://api.github.com/users/n0rthwood/orgs","repos_url":"https://api.github.com/users/n0rthwood/repos","events_url":"https://api.github.com/users/n0rthwood/events{/privacy}","received_events_url":"https://api.github.com/users/n0rthwood/received_events","type":"User","site_admin":false},"created_at":"2012-01-05T23:07:37Z","updated_at":"2012-01-05T23:19:06Z","author_association":"NONE","body":"Thank you so much on this update. assume this is still in trunk and will be released0.19.0?\nalso, if i have a nested document , updating it can also be expressed in the script i assume:\nsomething like :\nwith array and netsted object supported ?\nctx._source.classification=[{\"cid\"=10,\"cvalue\"=20},{\"cid\"=20,\"cvalue\"=30}]\n\nalso, may i ask where is this script reference, I checked though the documentation, but it seems (http://www.elasticsearch.org/guide/reference/modules/scripting.html) it didn't mention this kind of gramma, i.e. refering to a document as ctx and assign value to it. is there more to come?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3383295","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-3383295","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":3383295,"node_id":"MDEyOklzc3VlQ29tbWVudDMzODMyOTU=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2012-01-06T11:11:34Z","updated_at":"2012-01-06T11:11:34Z","author_association":"MEMBER","body":"@n0rthwood yea, it will be part of the next release. The grammer in the scripting part relates to search, not for this one. its mainly a set of hashes and lists (json), stored under `ctx._source`. You can change it however you want, either using `mvel` (the default) or using one of the plugin scripting langs (including javascript).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3396874","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-3396874","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":3396874,"node_id":"MDEyOklzc3VlQ29tbWVudDMzOTY4NzQ=","user":{"login":"medcl","id":64487,"node_id":"MDQ6VXNlcjY0NDg3","avatar_url":"https://avatars0.githubusercontent.com/u/64487?v=4","gravatar_id":"","url":"https://api.github.com/users/medcl","html_url":"https://github.com/medcl","followers_url":"https://api.github.com/users/medcl/followers","following_url":"https://api.github.com/users/medcl/following{/other_user}","gists_url":"https://api.github.com/users/medcl/gists{/gist_id}","starred_url":"https://api.github.com/users/medcl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/medcl/subscriptions","organizations_url":"https://api.github.com/users/medcl/orgs","repos_url":"https://api.github.com/users/medcl/repos","events_url":"https://api.github.com/users/medcl/events{/privacy}","received_events_url":"https://api.github.com/users/medcl/received_events","type":"User","site_admin":false},"created_at":"2012-01-07T17:22:32Z","updated_at":"2012-01-07T17:22:32Z","author_association":"MEMBER","body":"very happy to see this feature,my poor paritalupdate plugin can be retired now~\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3431502","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-3431502","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":3431502,"node_id":"MDEyOklzc3VlQ29tbWVudDM0MzE1MDI=","user":{"login":"monken","id":46471,"node_id":"MDQ6VXNlcjQ2NDcx","avatar_url":"https://avatars2.githubusercontent.com/u/46471?v=4","gravatar_id":"","url":"https://api.github.com/users/monken","html_url":"https://github.com/monken","followers_url":"https://api.github.com/users/monken/followers","following_url":"https://api.github.com/users/monken/following{/other_user}","gists_url":"https://api.github.com/users/monken/gists{/gist_id}","starred_url":"https://api.github.com/users/monken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monken/subscriptions","organizations_url":"https://api.github.com/users/monken/orgs","repos_url":"https://api.github.com/users/monken/repos","events_url":"https://api.github.com/users/monken/events{/privacy}","received_events_url":"https://api.github.com/users/monken/received_events","type":"User","site_admin":false},"created_at":"2012-01-10T15:43:15Z","updated_at":"2012-01-10T16:37:11Z","author_association":"NONE","body":"Great feature (I think you can close #426)\n\nOne thing I miss:\nWoud it be possible to call update on a scroll id? That would allow to update a number of documents in ES instead of pulling them to the client and push the update for each document.\n\nProposed API:\n\n```\ncurl -XPOST 'http://localhost:9200/_search/update?scroll_id=c2Nhbjs...WUc1'\n-d '{\"script\":\"...\",\"params\": ... }'\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3433874","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-3433874","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":3433874,"node_id":"MDEyOklzc3VlQ29tbWVudDM0MzM4NzQ=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2012-01-10T17:56:55Z","updated_at":"2012-01-10T17:56:55Z","author_association":"MEMBER","body":"@monken thats basically \"update by query\", no need to provide a scroll id, just provide the query to use. Its much harder to do, and will come with a lot of caveats (i.e. the query update might fail in the middle of the operation and only be partially completed).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3434003","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-3434003","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":3434003,"node_id":"MDEyOklzc3VlQ29tbWVudDM0MzQwMDM=","user":{"login":"monken","id":46471,"node_id":"MDQ6VXNlcjQ2NDcx","avatar_url":"https://avatars2.githubusercontent.com/u/46471?v=4","gravatar_id":"","url":"https://api.github.com/users/monken","html_url":"https://github.com/monken","followers_url":"https://api.github.com/users/monken/followers","following_url":"https://api.github.com/users/monken/following{/other_user}","gists_url":"https://api.github.com/users/monken/gists{/gist_id}","starred_url":"https://api.github.com/users/monken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monken/subscriptions","organizations_url":"https://api.github.com/users/monken/orgs","repos_url":"https://api.github.com/users/monken/repos","events_url":"https://api.github.com/users/monken/events{/privacy}","received_events_url":"https://api.github.com/users/monken/received_events","type":"User","site_admin":false},"created_at":"2012-01-10T18:04:06Z","updated_at":"2012-01-10T18:04:06Z","author_association":"NONE","body":"@kimchy is \"update by query\" already implemented? I couldn't find it.\nI was just worried about the syntax because you have to provide both the query and the update script in the request body. How would they live next to each other?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3434107","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-3434107","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":3434107,"node_id":"MDEyOklzc3VlQ29tbWVudDM0MzQxMDc=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2012-01-10T18:10:34Z","updated_at":"2012-01-10T18:10:34Z","author_association":"MEMBER","body":"@monken no, its not implemented. The structure should be simple, the query under `query`, and script under `script`.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3434140","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-3434140","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":3434140,"node_id":"MDEyOklzc3VlQ29tbWVudDM0MzQxNDA=","user":{"login":"monken","id":46471,"node_id":"MDQ6VXNlcjQ2NDcx","avatar_url":"https://avatars2.githubusercontent.com/u/46471?v=4","gravatar_id":"","url":"https://api.github.com/users/monken","html_url":"https://github.com/monken","followers_url":"https://api.github.com/users/monken/followers","following_url":"https://api.github.com/users/monken/following{/other_user}","gists_url":"https://api.github.com/users/monken/gists{/gist_id}","starred_url":"https://api.github.com/users/monken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monken/subscriptions","organizations_url":"https://api.github.com/users/monken/orgs","repos_url":"https://api.github.com/users/monken/repos","events_url":"https://api.github.com/users/monken/events{/privacy}","received_events_url":"https://api.github.com/users/monken/received_events","type":"User","site_admin":false},"created_at":"2012-01-10T18:12:16Z","updated_at":"2012-01-10T18:12:16Z","author_association":"NONE","body":"@kimchy should I open a new ticket for this request?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3450884","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-3450884","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":3450884,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTA4ODQ=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2012-01-11T18:15:26Z","updated_at":"2012-01-11T18:15:26Z","author_association":"MEMBER","body":"@monken yea, open one, though I am still not sure how to best implement it. It going to come with a lot of caveats. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3469124","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-3469124","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":3469124,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjkxMjQ=","user":{"login":"monken","id":46471,"node_id":"MDQ6VXNlcjQ2NDcx","avatar_url":"https://avatars2.githubusercontent.com/u/46471?v=4","gravatar_id":"","url":"https://api.github.com/users/monken","html_url":"https://github.com/monken","followers_url":"https://api.github.com/users/monken/followers","following_url":"https://api.github.com/users/monken/following{/other_user}","gists_url":"https://api.github.com/users/monken/gists{/gist_id}","starred_url":"https://api.github.com/users/monken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monken/subscriptions","organizations_url":"https://api.github.com/users/monken/orgs","repos_url":"https://api.github.com/users/monken/repos","events_url":"https://api.github.com/users/monken/events{/privacy}","received_events_url":"https://api.github.com/users/monken/received_events","type":"User","site_admin":false},"created_at":"2012-01-12T19:38:53Z","updated_at":"2012-01-12T19:38:53Z","author_association":"NONE","body":"@kimchy I bet you'll figure something out :-)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3471306","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-3471306","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":3471306,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzEzMDY=","user":{"login":"folke","id":292349,"node_id":"MDQ6VXNlcjI5MjM0OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/292349?v=4","gravatar_id":"","url":"https://api.github.com/users/folke","html_url":"https://github.com/folke","followers_url":"https://api.github.com/users/folke/followers","following_url":"https://api.github.com/users/folke/following{/other_user}","gists_url":"https://api.github.com/users/folke/gists{/gist_id}","starred_url":"https://api.github.com/users/folke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/folke/subscriptions","organizations_url":"https://api.github.com/users/folke/orgs","repos_url":"https://api.github.com/users/folke/repos","events_url":"https://api.github.com/users/folke/events{/privacy}","received_events_url":"https://api.github.com/users/folke/received_events","type":"User","site_admin":false},"created_at":"2012-01-12T21:57:34Z","updated_at":"2012-01-12T21:57:34Z","author_association":"NONE","body":"Awesome! :-)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3609376","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-3609376","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":3609376,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MDkzNzY=","user":{"login":"seyyedi","id":721328,"node_id":"MDQ6VXNlcjcyMTMyOA==","avatar_url":"https://avatars1.githubusercontent.com/u/721328?v=4","gravatar_id":"","url":"https://api.github.com/users/seyyedi","html_url":"https://github.com/seyyedi","followers_url":"https://api.github.com/users/seyyedi/followers","following_url":"https://api.github.com/users/seyyedi/following{/other_user}","gists_url":"https://api.github.com/users/seyyedi/gists{/gist_id}","starred_url":"https://api.github.com/users/seyyedi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seyyedi/subscriptions","organizations_url":"https://api.github.com/users/seyyedi/orgs","repos_url":"https://api.github.com/users/seyyedi/repos","events_url":"https://api.github.com/users/seyyedi/events{/privacy}","received_events_url":"https://api.github.com/users/seyyedi/received_events","type":"User","site_admin":false},"created_at":"2012-01-23T05:18:34Z","updated_at":"2012-01-23T13:35:18Z","author_association":"NONE","body":"@kimchy can the update action be used in bulk? I would have expected something along the lines of \n\n{ \"update\" : { \"_index\" : \"main\", \"_type\" : \"visits\", \"_id\" : \"21\" } }\n{ \"script\" : \"ctx._source.count += i\", \"params\": { \"i\" : 3 } }\n\nbut i can't get it to work (with current version in trunk). Is there any inherent problem with update/bulk or am i using the wrong syntax or is it just too early? :-)\n\nAwesome feature by the way!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3614451","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-3614451","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":3614451,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MTQ0NTE=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2012-01-23T14:22:10Z","updated_at":"2012-01-23T14:22:10Z","author_association":"MEMBER","body":"@seyyedi No, it can't be used in bulk (but nice imaginative format for it :) ). I supposed there is an option to support it in bulk, but I was thinking that if we have the update by query (which we still don't) then it will be less needed. Though, I guess it has its uses.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3688334","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-3688334","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":3688334,"node_id":"MDEyOklzc3VlQ29tbWVudDM2ODgzMzQ=","user":{"login":"rolyv","id":1385127,"node_id":"MDQ6VXNlcjEzODUxMjc=","avatar_url":"https://avatars3.githubusercontent.com/u/1385127?v=4","gravatar_id":"","url":"https://api.github.com/users/rolyv","html_url":"https://github.com/rolyv","followers_url":"https://api.github.com/users/rolyv/followers","following_url":"https://api.github.com/users/rolyv/following{/other_user}","gists_url":"https://api.github.com/users/rolyv/gists{/gist_id}","starred_url":"https://api.github.com/users/rolyv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rolyv/subscriptions","organizations_url":"https://api.github.com/users/rolyv/orgs","repos_url":"https://api.github.com/users/rolyv/repos","events_url":"https://api.github.com/users/rolyv/events{/privacy}","received_events_url":"https://api.github.com/users/rolyv/received_events","type":"User","site_admin":false},"created_at":"2012-01-27T15:26:02Z","updated_at":"2012-01-27T15:26:02Z","author_association":"NONE","body":"Can you update a document's TTL and Timestamp?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3699125","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-3699125","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":3699125,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTkxMjU=","user":{"login":"Paikan","id":822586,"node_id":"MDQ6VXNlcjgyMjU4Ng==","avatar_url":"https://avatars2.githubusercontent.com/u/822586?v=4","gravatar_id":"","url":"https://api.github.com/users/Paikan","html_url":"https://github.com/Paikan","followers_url":"https://api.github.com/users/Paikan/followers","following_url":"https://api.github.com/users/Paikan/following{/other_user}","gists_url":"https://api.github.com/users/Paikan/gists{/gist_id}","starred_url":"https://api.github.com/users/Paikan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Paikan/subscriptions","organizations_url":"https://api.github.com/users/Paikan/orgs","repos_url":"https://api.github.com/users/Paikan/repos","events_url":"https://api.github.com/users/Paikan/events{/privacy}","received_events_url":"https://api.github.com/users/Paikan/received_events","type":"User","site_admin":false},"created_at":"2012-01-28T08:49:31Z","updated_at":"2012-01-28T08:49:31Z","author_association":"CONTRIBUTOR","body":"@rolyv yes you can update TTL and Timestamp on master branch.\n\nYou can use ctx._ttl and ctx._timestamp in your script.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3851705","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-3851705","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":3851705,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NTE3MDU=","user":{"login":"Alex-Ikanow","id":851950,"node_id":"MDQ6VXNlcjg1MTk1MA==","avatar_url":"https://avatars2.githubusercontent.com/u/851950?v=4","gravatar_id":"","url":"https://api.github.com/users/Alex-Ikanow","html_url":"https://github.com/Alex-Ikanow","followers_url":"https://api.github.com/users/Alex-Ikanow/followers","following_url":"https://api.github.com/users/Alex-Ikanow/following{/other_user}","gists_url":"https://api.github.com/users/Alex-Ikanow/gists{/gist_id}","starred_url":"https://api.github.com/users/Alex-Ikanow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Alex-Ikanow/subscriptions","organizations_url":"https://api.github.com/users/Alex-Ikanow/orgs","repos_url":"https://api.github.com/users/Alex-Ikanow/repos","events_url":"https://api.github.com/users/Alex-Ikanow/events{/privacy}","received_events_url":"https://api.github.com/users/Alex-Ikanow/received_events","type":"User","site_admin":false},"created_at":"2012-02-07T17:03:19Z","updated_at":"2012-02-07T17:03:19Z","author_association":"NONE","body":"Nice new feature! Is there any way this could be (theoretically modified to be) used to update just a nested object, while leaving the \"parent\" document alone? \n\nEg in my use case I have documents with a large full text index, and many nested sub-objects that have a smallish number of indexed fields. \n\nAny given sub-object has (numeric) attributes that change every few hours, but I don't want to re-index the entire document (store in MongoDB), so at the moment I just discard that attribute and try to combine them as best I can in the application layer.\n\nIf I could \"just\" modify (numeric) fields inside specified nested sub-objects (eg all sub-objects matching a query), without touching the \"parent\" document, that would remove my last MongoDB-elasticsearch synchronization issue.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3927400","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-3927400","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":3927400,"node_id":"MDEyOklzc3VlQ29tbWVudDM5Mjc0MDA=","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars3.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false},"created_at":"2012-02-12T12:12:01Z","updated_at":"2012-02-12T12:12:01Z","author_association":"NONE","body":"Thanks for the great feature! Is it possible to update stored field if the `_source` is disabled? I tried `ctx.fields`, `ctx._fields`, `ctx['...']` to no avail...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3929074","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-3929074","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":3929074,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjkwNzQ=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2012-02-12T16:56:27Z","updated_at":"2012-02-12T16:56:27Z","author_association":"MEMBER","body":"@msayapin no, this only works when _source is enabled, otherwise, we can't reindex the doc. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/4344277","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-4344277","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":4344277,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDQyNzc=","user":{"login":"gzsombor","id":66230,"node_id":"MDQ6VXNlcjY2MjMw","avatar_url":"https://avatars0.githubusercontent.com/u/66230?v=4","gravatar_id":"","url":"https://api.github.com/users/gzsombor","html_url":"https://github.com/gzsombor","followers_url":"https://api.github.com/users/gzsombor/followers","following_url":"https://api.github.com/users/gzsombor/following{/other_user}","gists_url":"https://api.github.com/users/gzsombor/gists{/gist_id}","starred_url":"https://api.github.com/users/gzsombor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gzsombor/subscriptions","organizations_url":"https://api.github.com/users/gzsombor/orgs","repos_url":"https://api.github.com/users/gzsombor/repos","events_url":"https://api.github.com/users/gzsombor/events{/privacy}","received_events_url":"https://api.github.com/users/gzsombor/received_events","type":"User","site_admin":false},"created_at":"2012-03-06T13:31:47Z","updated_at":"2012-03-06T13:31:47Z","author_association":"NONE","body":"Is it documented anywhere, what variables can a script access ? The documentation briefly mentions ctx._ttl, and ctx._timestamp : http://www.elasticsearch.org/guide/reference/api/update.html but it's not clear, what is the type of this variables (string, number or timestamp? ) And how to enable / disable __source_ ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/4344442","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-4344442","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":4344442,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDQ0NDI=","user":{"login":"Paikan","id":822586,"node_id":"MDQ6VXNlcjgyMjU4Ng==","avatar_url":"https://avatars2.githubusercontent.com/u/822586?v=4","gravatar_id":"","url":"https://api.github.com/users/Paikan","html_url":"https://github.com/Paikan","followers_url":"https://api.github.com/users/Paikan/followers","following_url":"https://api.github.com/users/Paikan/following{/other_user}","gists_url":"https://api.github.com/users/Paikan/gists{/gist_id}","starred_url":"https://api.github.com/users/Paikan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Paikan/subscriptions","organizations_url":"https://api.github.com/users/Paikan/orgs","repos_url":"https://api.github.com/users/Paikan/repos","events_url":"https://api.github.com/users/Paikan/events{/privacy}","received_events_url":"https://api.github.com/users/Paikan/received_events","type":"User","site_admin":false},"created_at":"2012-03-06T13:44:07Z","updated_at":"2012-03-06T13:44:07Z","author_association":"CONTRIBUTOR","body":"@gzsombor the _ttl can be a number or a string representing a TimeValue like \"1d\". The _timestamp is a String wich can be a timestamp or use configured date format. You can check http://www.elasticsearch.org/guide/reference/mapping/timestamp-field.html and http://www.elasticsearch.org/guide/reference/mapping/ttl-field.html for more information.\n\nThe _source is enabled by default. Have a look here http://www.elasticsearch.org/guide/reference/mapping/source-field.html to disable it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/30143526","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-30143526","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":30143526,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTQzNTI2","user":{"login":"alex-in2","id":2108612,"node_id":"MDQ6VXNlcjIxMDg2MTI=","avatar_url":"https://avatars2.githubusercontent.com/u/2108612?v=4","gravatar_id":"","url":"https://api.github.com/users/alex-in2","html_url":"https://github.com/alex-in2","followers_url":"https://api.github.com/users/alex-in2/followers","following_url":"https://api.github.com/users/alex-in2/following{/other_user}","gists_url":"https://api.github.com/users/alex-in2/gists{/gist_id}","starred_url":"https://api.github.com/users/alex-in2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alex-in2/subscriptions","organizations_url":"https://api.github.com/users/alex-in2/orgs","repos_url":"https://api.github.com/users/alex-in2/repos","events_url":"https://api.github.com/users/alex-in2/events{/privacy}","received_events_url":"https://api.github.com/users/alex-in2/received_events","type":"User","site_admin":false},"created_at":"2013-12-09T15:56:58Z","updated_at":"2013-12-09T16:18:17Z","author_association":"NONE","body":"Is it possible to use _version in conditions ? \n\nlike \n\nif(ctx._version == 1)\n{\nctx._source.field1 = 'some value'\n}\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/330405696","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-330405696","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":330405696,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDQwNTY5Ng==","user":{"login":"bigtoerag","id":16235967,"node_id":"MDQ6VXNlcjE2MjM1OTY3","avatar_url":"https://avatars2.githubusercontent.com/u/16235967?v=4","gravatar_id":"","url":"https://api.github.com/users/bigtoerag","html_url":"https://github.com/bigtoerag","followers_url":"https://api.github.com/users/bigtoerag/followers","following_url":"https://api.github.com/users/bigtoerag/following{/other_user}","gists_url":"https://api.github.com/users/bigtoerag/gists{/gist_id}","starred_url":"https://api.github.com/users/bigtoerag/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bigtoerag/subscriptions","organizations_url":"https://api.github.com/users/bigtoerag/orgs","repos_url":"https://api.github.com/users/bigtoerag/repos","events_url":"https://api.github.com/users/bigtoerag/events{/privacy}","received_events_url":"https://api.github.com/users/bigtoerag/received_events","type":"User","site_admin":false},"created_at":"2017-09-19T01:58:07Z","updated_at":"2017-09-19T02:07:27Z","author_association":"NONE","body":"I have a issue with remove based on the above logic but using the kibana dev tools interface rather than curl:\r\n\r\nThis works:\r\n`POST metricbeat-2017.09.18/_update_by_query?conflicts=proceed\r\n{\r\n  \"script\": {\r\n    \"inline\": \"ctx._source.tags.add(params.tag)\",\r\n    \"lang\": \"painless\",\r\n    \"params\" : {\r\n            \"tag\" : \"green\"\r\n        }\r\n  },\r\n   \"query\" : {\r\n  \"term\" : {\r\n      \"type\" : \"metricsets\"\r\n  }\r\n }\r\n}`\r\n\r\nBut this doesnt:\r\n`POST metricbeat-2017.09.18/_update_by_query?conflicts=proceed\r\n{\r\n  \"script\": {\r\n    \"inline\": \"ctx._source.tags.remove(params.tag)\",\r\n    \"lang\": \"painless\",\r\n    \"params\" : {\r\n            \"tag\" : \"green\"\r\n        }\r\n  },\r\n   \"query\" : {\r\n  \"term\" : {\r\n      \"type\" : \"metricsets\"\r\n  }\r\n }\r\n}`\r\n\r\n\r\nThe error thrown back seems like a syntax issue:\r\n`{\r\n  \"error\": {\r\n    \"root_cause\": [\r\n      {\r\n        \"type\": \"script_exception\",\r\n        \"reason\": \"runtime error\",\r\n        \"script_stack\": [\r\n          \"ctx._source.tags.remove(params.tag)\",\r\n          \"                              ^---- HERE\"\r\n        ],\r\n        \"script\": \"ctx._source.tags.remove(params.tag)\",\r\n        \"lang\": \"painless\"\r\n      }\r\n    ],\r\n    \"type\": \"script_exception\",\r\n    \"reason\": \"runtime error\",\r\n    \"script_stack\": [\r\n      \"ctx._source.tags.remove(params.tag)\",\r\n      \"                              ^---- HERE\"\r\n    ],\r\n    \"script\": \"ctx._source.tags.remove(params.tag)\",\r\n    \"lang\": \"painless\",\r\n    \"caused_by\": {\r\n      \"type\": \"class_cast_exception\",\r\n      \"reason\": \"java.lang.String cannot be cast to java.lang.Number\"\r\n    }\r\n  },\r\n  \"status\": 500\r\n}`\r\n\r\nWhat is the correct way to remove if this is the way to add?  Does it not support remove or delete this way?\r\n\r\n\r\nEDIT:  More abstract searching came up with a hit for painless not having the remove method due to some stuff I dont understand.\r\nhttps://github.com/elastic/elasticsearch/issues/21375\r\n\r\nSo i tried this and it worked for the added tag and any other tag match:\r\n`POST metricbeat-2017.09.18/_update_by_query\r\n{\r\n  \"script\": {\r\n    \"inline\": \"ctx._source.tags.removeAll(Collections.singleton(params.tag))\",\r\n    \"lang\": \"painless\",\r\n    \"params\" : {\r\n            \"tag\" : \"green\"\r\n        }\r\n  },\r\n   \"query\" : {\r\n  \"term\" : {\r\n      \"type\" : \"metricsets\"\r\n  }\r\n }\r\n}`","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/373093873","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-373093873","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":373093873,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MzA5Mzg3Mw==","user":{"login":"rezende7","id":36630980,"node_id":"MDQ6VXNlcjM2NjMwOTgw","avatar_url":"https://avatars3.githubusercontent.com/u/36630980?v=4","gravatar_id":"","url":"https://api.github.com/users/rezende7","html_url":"https://github.com/rezende7","followers_url":"https://api.github.com/users/rezende7/followers","following_url":"https://api.github.com/users/rezende7/following{/other_user}","gists_url":"https://api.github.com/users/rezende7/gists{/gist_id}","starred_url":"https://api.github.com/users/rezende7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rezende7/subscriptions","organizations_url":"https://api.github.com/users/rezende7/orgs","repos_url":"https://api.github.com/users/rezende7/repos","events_url":"https://api.github.com/users/rezende7/events{/privacy}","received_events_url":"https://api.github.com/users/rezende7/received_events","type":"User","site_admin":false},"created_at":"2018-03-14T16:50:06Z","updated_at":"2018-03-14T16:50:06Z","author_association":"NONE","body":"How can I change the type of a field?\r\ne.g. : CloseDate is a date type, but in my index it is like long.\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/395489270","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-395489270","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":395489270,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTQ4OTI3MA==","user":{"login":"reswob10","id":1158116,"node_id":"MDQ6VXNlcjExNTgxMTY=","avatar_url":"https://avatars2.githubusercontent.com/u/1158116?v=4","gravatar_id":"","url":"https://api.github.com/users/reswob10","html_url":"https://github.com/reswob10","followers_url":"https://api.github.com/users/reswob10/followers","following_url":"https://api.github.com/users/reswob10/following{/other_user}","gists_url":"https://api.github.com/users/reswob10/gists{/gist_id}","starred_url":"https://api.github.com/users/reswob10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reswob10/subscriptions","organizations_url":"https://api.github.com/users/reswob10/orgs","repos_url":"https://api.github.com/users/reswob10/repos","events_url":"https://api.github.com/users/reswob10/events{/privacy}","received_events_url":"https://api.github.com/users/reswob10/received_events","type":"User","site_admin":false},"created_at":"2018-06-07T16:47:22Z","updated_at":"2018-06-07T17:22:45Z","author_association":"NONE","body":"Question: I'm using the syntax above to try to remove a tag (via Kibana dev tools tab):\r\n\r\nPOST logstash-*/_update_by_query\r\n{\r\n\"query\" : {\r\n\"match\" : { \"tags\": \"GREEN\" }\r\n},\r\n\"script\":{\"inline\":\"ctx._source.tags.removeALL(Collections.singleton(params.tag))\",\"lang\":\"painless\",\"params\": {\"tag\":\"NEWTAG\"}}\r\n}\r\n\r\nBut when I run this, I get the following error:\r\n\r\n```\r\n\"type\": \"script_exception:,\r\n\"reason\":\"runtime error\",\r\n\"script_stack\": [\r\n   \"ctx._source.tags.removeALL(Collections.singleton(params.tag))\",\r\n\"                                                         ^---- HERE\"\r\n],\r\n\"script\":\"ctx._source.tags.removeALL(Collections.singleton(params.tag))\",\r\n\"lang\":\"painless\",\r\n\"caused_by\": {\r\n\"type\":\"illegal_argument_exception\",\r\n\"reason\": \"Unable to find dynamic method [removeALL] with [1] arguments for class [java.util.ArrayList].\"\r\n}\r\n},\r\n\"status\":500\r\n}\r\n```\r\n\r\nI haven't googled this yet, but as I do, I was wondering if anyone know what this meant.\r\n\r\nThanks....","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/395490561","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-395490561","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":395490561,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTQ5MDU2MQ==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2018-06-07T16:52:01Z","updated_at":"2018-06-07T16:52:01Z","author_association":"MEMBER","body":"Better to ask on discuss.elastic.co.\r\n\r\nBut may be it should be removeAll ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/395497968","html_url":"https://github.com/elastic/elasticsearch/issues/1583#issuecomment-395497968","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1583","id":395497968,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTQ5Nzk2OA==","user":{"login":"reswob10","id":1158116,"node_id":"MDQ6VXNlcjExNTgxMTY=","avatar_url":"https://avatars2.githubusercontent.com/u/1158116?v=4","gravatar_id":"","url":"https://api.github.com/users/reswob10","html_url":"https://github.com/reswob10","followers_url":"https://api.github.com/users/reswob10/followers","following_url":"https://api.github.com/users/reswob10/following{/other_user}","gists_url":"https://api.github.com/users/reswob10/gists{/gist_id}","starred_url":"https://api.github.com/users/reswob10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reswob10/subscriptions","organizations_url":"https://api.github.com/users/reswob10/orgs","repos_url":"https://api.github.com/users/reswob10/repos","events_url":"https://api.github.com/users/reswob10/events{/privacy}","received_events_url":"https://api.github.com/users/reswob10/received_events","type":"User","site_admin":false},"created_at":"2018-06-07T17:16:11Z","updated_at":"2018-06-07T17:16:11Z","author_association":"NONE","body":"Will ask there...\r\n\r\nThanks\r\n","performed_via_github_app":null}]