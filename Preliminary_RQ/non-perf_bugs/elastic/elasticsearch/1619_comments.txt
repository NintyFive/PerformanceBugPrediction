[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3544108","html_url":"https://github.com/elastic/elasticsearch/issues/1619#issuecomment-3544108","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1619","id":3544108,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDQxMDg=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2012-01-18T11:08:11Z","updated_at":"2012-01-18T11:08:11Z","author_association":"MEMBER","body":"Remove mapping is only being called when you actually do `curl -XDELETE localhost:9200/index/type`, or you execute a delete mapping Java API. There is no other way to do it. Do you delete data in your indexing code? Also, what do you mean a new index being referenced? Can you share your indexing code?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3551225","html_url":"https://github.com/elastic/elasticsearch/issues/1619#issuecomment-3551225","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1619","id":3551225,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTEyMjU=","user":{"login":"abdollar","id":84642,"node_id":"MDQ6VXNlcjg0NjQy","avatar_url":"https://avatars0.githubusercontent.com/u/84642?v=4","gravatar_id":"","url":"https://api.github.com/users/abdollar","html_url":"https://github.com/abdollar","followers_url":"https://api.github.com/users/abdollar/followers","following_url":"https://api.github.com/users/abdollar/following{/other_user}","gists_url":"https://api.github.com/users/abdollar/gists{/gist_id}","starred_url":"https://api.github.com/users/abdollar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abdollar/subscriptions","organizations_url":"https://api.github.com/users/abdollar/orgs","repos_url":"https://api.github.com/users/abdollar/repos","events_url":"https://api.github.com/users/abdollar/events{/privacy}","received_events_url":"https://api.github.com/users/abdollar/received_events","type":"User","site_admin":false},"created_at":"2012-01-18T18:59:44Z","updated_at":"2012-01-18T18:59:44Z","author_association":"NONE","body":"I do not delete data in my indexing code. Its just performing inserts. The application that performs the inserts is an http server written in go.\n\nIf I do call delete explicitly I can see it happen in the logs : like so\n\n[2012-01-18 01:40:35,920][INFO ][cluster.metadata         ] [Tag] [users] deleting index\n\nHowever, I am not seeing this. I am seeing this\n\n[2012-01-18 00:11:32,057][INFO ][cluster.metadata         ] [Tag] [[users]] remove_mapping [user]\n[2012-01-18 00:11:32,110][INFO ][cluster.metadata         ] [Tag] [users] update_mapping [user](dynamic)\n[2012-01-18 00:11:32,500][INFO ][cluster.metadata         ] [Tag] [users] update_mapping [user](dynamic)\n[2012-01-18 00:11:32,779][INFO ][cluster.metadata         ] [Tag] [users] update_mapping [user](dynamic)\n[2012-01-18 00:23:23,058][INFO ][cluster.metadata         ] [Tag] [users] update_mapping [user]\n[2012-01-18 00:24:59,086][INFO ][cluster.metadata         ] [Tag] [[users]] remove_mapping [user]\n[2012-01-18 00:24:59,106][INFO ][cluster.metadata         ] [Tag] [users] update_mapping [user](dynamic)\n[2012-01-18 00:24:59,442][INFO ][cluster.metadata         ] [Tag] [users] update_mapping [user](dynamic)\n[2012-01-18 00:24:59,734][INFO ][cluster.metadata         ] [Tag] [users] update_mapping [user](dynamic)\n[2012-01-18 00:40:11,283][INFO ][cluster.metadata         ] [Tag] [[users]] remove_mapping [user]\n[2012-01-18 00:40:11,306][INFO ][cluster.metadata         ] [Tag] [users] update_mapping [user](dynamic)\n[2012-01-18 00:40:11,683][INFO ][cluster.metadata         ] [Tag] [users] update_mapping [user](dynamic)\n[2012-01-18 00:40:12,460][INFO ][cluster.metadata         ] [Tag] [users] update_mapping [user](dynamic)\n[2012-01-18 00:54:25,358][INFO ][cluster.metadata         ] [Tag] [users] update_mapping [user]\n[2012-01-18 00:56:26,375][INFO ][cluster.metadata         ] [Tag] [[users]] remove_mapping [user]\n[2012-01-18 00:56:26,389][INFO ][cluster.metadata         ] [Tag] [users] update_mapping [user](dynamic)\n[2012-01-18 00:56:26,770][INFO ][cluster.metadata         ] [Tag] [users] update_mapping [user](dynamic)\n[2012-01-18 00:56:27,054][INFO ][cluster.metadata         ] [Tag] [users] update_mapping [user](dynamic)\n[2012-01-18 01:01:26,416][INFO ][cluster.metadata         ] [Tag] [users] update_mapping [user]\n[2012-01-18 01:06:29,784][INFO ][cluster.metadata         ] [Tag] [[users]] remove_mapping [user]\n[2012-01-18 01:06:29,808][INFO ][cluster.metadata         ] [Tag] [users] update_mapping [user](dynamic)\n[2012-01-18 01:06:30,150][INFO ][cluster.metadata         ] [Tag] [users] update_mapping [user](dynamic)\n[2012-01-18 01:06:30,420][INFO ][cluster.metadata         ] [Tag] [users] update_mapping [user](dynamic)\n\nEach time remove mapping is called it seems the old index is deleted and a new index is created.\n\nIf I change the code in the http server from using 4 cpus and change it to use 1 cpu - the problem goes away - as in I dont see remove_mapping getting called and index keeps getting bigger.\n\nIn go I do this to force it to use 1 cpu.\n\nruntime.GOMAXPROCS(4) \nto \nruntime.GOMAXPROCS(1)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3552108","html_url":"https://github.com/elastic/elasticsearch/issues/1619#issuecomment-3552108","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1619","id":3552108,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTIxMDg=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2012-01-18T19:54:41Z","updated_at":"2012-01-18T19:54:41Z","author_association":"MEMBER","body":"I am not talking about deleting an index, but deleting a mapping. In your case, for an index called `users`, and a mapping type called `user`, someone called `curl -XDELETE localhost:9200/users/user`. Thats the only code base that can cause this logging message to appear. Its not called as part of the indexing process...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3552481","html_url":"https://github.com/elastic/elasticsearch/issues/1619#issuecomment-3552481","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1619","id":3552481,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTI0ODE=","user":{"login":"abdollar","id":84642,"node_id":"MDQ6VXNlcjg0NjQy","avatar_url":"https://avatars0.githubusercontent.com/u/84642?v=4","gravatar_id":"","url":"https://api.github.com/users/abdollar","html_url":"https://github.com/abdollar","followers_url":"https://api.github.com/users/abdollar/followers","following_url":"https://api.github.com/users/abdollar/following{/other_user}","gists_url":"https://api.github.com/users/abdollar/gists{/gist_id}","starred_url":"https://api.github.com/users/abdollar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abdollar/subscriptions","organizations_url":"https://api.github.com/users/abdollar/orgs","repos_url":"https://api.github.com/users/abdollar/repos","events_url":"https://api.github.com/users/abdollar/events{/privacy}","received_events_url":"https://api.github.com/users/abdollar/received_events","type":"User","site_admin":false},"created_at":"2012-01-18T20:24:08Z","updated_at":"2012-01-18T20:24:08Z","author_association":"NONE","body":"Hmm - Thats strange. From my understanding there are no DELETE requests going to elasticsearch - just PUT requests\n\nI will see if I can reproduce this with a simpler example.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3552745","html_url":"https://github.com/elastic/elasticsearch/issues/1619#issuecomment-3552745","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1619","id":3552745,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTI3NDU=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2012-01-18T20:41:31Z","updated_at":"2012-01-18T20:41:31Z","author_association":"MEMBER","body":"Here is a custom build: http://dl.dropbox.com/u/2136051/elasticsearch-0.18.8-SNAPSHOT.zip that logs when delete mapping is called, can you run it with it and see if you see the log. The logging is INFO level and states: \"<------ DELETE MAPPING CALLED!\".\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3554643","html_url":"https://github.com/elastic/elasticsearch/issues/1619#issuecomment-3554643","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1619","id":3554643,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTQ2NDM=","user":{"login":"abdollar","id":84642,"node_id":"MDQ6VXNlcjg0NjQy","avatar_url":"https://avatars0.githubusercontent.com/u/84642?v=4","gravatar_id":"","url":"https://api.github.com/users/abdollar","html_url":"https://github.com/abdollar","followers_url":"https://api.github.com/users/abdollar/followers","following_url":"https://api.github.com/users/abdollar/following{/other_user}","gists_url":"https://api.github.com/users/abdollar/gists{/gist_id}","starred_url":"https://api.github.com/users/abdollar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abdollar/subscriptions","organizations_url":"https://api.github.com/users/abdollar/orgs","repos_url":"https://api.github.com/users/abdollar/repos","events_url":"https://api.github.com/users/abdollar/events{/privacy}","received_events_url":"https://api.github.com/users/abdollar/received_events","type":"User","site_admin":false},"created_at":"2012-01-18T22:45:50Z","updated_at":"2012-01-18T22:45:50Z","author_association":"NONE","body":"OK. I updated all the nodes on the cluster to the custom build - elasticsearch-0.18.8-SNAPSHOT.zip \nReset the concurrency to 4.\nSo far I don't see any log messages at all related to mappings.\nIt'll take around 3 days to ingest everything at the current rate.\nI'll keep an eye on the index size and logs and will keep you posted.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3559014","html_url":"https://github.com/elastic/elasticsearch/issues/1619#issuecomment-3559014","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1619","id":3559014,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTkwMTQ=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2012-01-19T07:27:35Z","updated_at":"2012-01-19T07:27:35Z","author_association":"MEMBER","body":"I assume that you don't see the `remove_mapping [user]` message as well?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3571553","html_url":"https://github.com/elastic/elasticsearch/issues/1619#issuecomment-3571553","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1619","id":3571553,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NzE1NTM=","user":{"login":"abdollar","id":84642,"node_id":"MDQ6VXNlcjg0NjQy","avatar_url":"https://avatars0.githubusercontent.com/u/84642?v=4","gravatar_id":"","url":"https://api.github.com/users/abdollar","html_url":"https://github.com/abdollar","followers_url":"https://api.github.com/users/abdollar/followers","following_url":"https://api.github.com/users/abdollar/following{/other_user}","gists_url":"https://api.github.com/users/abdollar/gists{/gist_id}","starred_url":"https://api.github.com/users/abdollar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abdollar/subscriptions","organizations_url":"https://api.github.com/users/abdollar/orgs","repos_url":"https://api.github.com/users/abdollar/repos","events_url":"https://api.github.com/users/abdollar/events{/privacy}","received_events_url":"https://api.github.com/users/abdollar/received_events","type":"User","site_admin":false},"created_at":"2012-01-19T18:24:28Z","updated_at":"2012-01-19T18:24:28Z","author_association":"NONE","body":"Yep. I don't see any log messages related to mappings. I don't see the remove_mapping message. It's been running happily for quite some time now - as in the index is growing and if I search for id:1 I can still see it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3571616","html_url":"https://github.com/elastic/elasticsearch/issues/1619#issuecomment-3571616","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1619","id":3571616,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NzE2MTY=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2012-01-19T18:27:42Z","updated_at":"2012-01-19T18:27:42Z","author_association":"MEMBER","body":"Maybe its the 0.18.5 version? Thats weird, since there wasn't a problem like that. Well, if it works, you can run with 0.18.7 since the 0.18.8 snap you have has almost no changes on top of it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/3588841","html_url":"https://github.com/elastic/elasticsearch/issues/1619#issuecomment-3588841","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1619","id":3588841,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODg4NDE=","user":{"login":"abdollar","id":84642,"node_id":"MDQ6VXNlcjg0NjQy","avatar_url":"https://avatars0.githubusercontent.com/u/84642?v=4","gravatar_id":"","url":"https://api.github.com/users/abdollar","html_url":"https://github.com/abdollar","followers_url":"https://api.github.com/users/abdollar/followers","following_url":"https://api.github.com/users/abdollar/following{/other_user}","gists_url":"https://api.github.com/users/abdollar/gists{/gist_id}","starred_url":"https://api.github.com/users/abdollar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abdollar/subscriptions","organizations_url":"https://api.github.com/users/abdollar/orgs","repos_url":"https://api.github.com/users/abdollar/repos","events_url":"https://api.github.com/users/abdollar/events{/privacy}","received_events_url":"https://api.github.com/users/abdollar/received_events","type":"User","site_admin":false},"created_at":"2012-01-20T19:16:08Z","updated_at":"2012-01-20T19:16:08Z","author_association":"NONE","body":"Thanks. Currently at 15 million records and climbing. I don't see any issues. Closing \n","performed_via_github_app":null}]