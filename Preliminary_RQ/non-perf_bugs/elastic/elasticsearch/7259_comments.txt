[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52071622","html_url":"https://github.com/elastic/elasticsearch/issues/7259#issuecomment-52071622","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7259","id":52071622,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDcxNjIy","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-08-13T16:16:14Z","updated_at":"2014-08-13T16:16:14Z","author_association":"CONTRIBUTOR","body":"This is likely a problem with these clients not being able to send a body with a DELETE request.  You could try passing the body as the `source` query string parameter instead.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52079002","html_url":"https://github.com/elastic/elasticsearch/issues/7259#issuecomment-52079002","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7259","id":52079002,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDc5MDAy","user":{"login":"dan-s1","id":8440116,"node_id":"MDQ6VXNlcjg0NDAxMTY=","avatar_url":"https://avatars1.githubusercontent.com/u/8440116?v=4","gravatar_id":"","url":"https://api.github.com/users/dan-s1","html_url":"https://github.com/dan-s1","followers_url":"https://api.github.com/users/dan-s1/followers","following_url":"https://api.github.com/users/dan-s1/following{/other_user}","gists_url":"https://api.github.com/users/dan-s1/gists{/gist_id}","starred_url":"https://api.github.com/users/dan-s1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dan-s1/subscriptions","organizations_url":"https://api.github.com/users/dan-s1/orgs","repos_url":"https://api.github.com/users/dan-s1/repos","events_url":"https://api.github.com/users/dan-s1/events{/privacy}","received_events_url":"https://api.github.com/users/dan-s1/received_events","type":"User","site_admin":false},"created_at":"2014-08-13T17:10:22Z","updated_at":"2014-08-13T17:10:22Z","author_association":"NONE","body":"Can you please provide an example using the query I have above?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52080683","html_url":"https://github.com/elastic/elasticsearch/issues/7259#issuecomment-52080683","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7259","id":52080683,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDgwNjgz","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-08-13T17:22:47Z","updated_at":"2014-08-13T17:22:47Z","author_association":"CONTRIBUTOR","body":"```\ncurl -XDELETE 'http://localhost:9200/myindex/_query?source=%7B%22query%22%3A%7B%22range%22%3A%7B%22timestamp%22%3A%7B%22lt%22%3A%22now-1440h%22%7D%7D%7D%7D'\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52084728","html_url":"https://github.com/elastic/elasticsearch/issues/7259#issuecomment-52084728","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7259","id":52084728,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDg0NzI4","user":{"login":"dan-s1","id":8440116,"node_id":"MDQ6VXNlcjg0NDAxMTY=","avatar_url":"https://avatars1.githubusercontent.com/u/8440116?v=4","gravatar_id":"","url":"https://api.github.com/users/dan-s1","html_url":"https://github.com/dan-s1","followers_url":"https://api.github.com/users/dan-s1/followers","following_url":"https://api.github.com/users/dan-s1/following{/other_user}","gists_url":"https://api.github.com/users/dan-s1/gists{/gist_id}","starred_url":"https://api.github.com/users/dan-s1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dan-s1/subscriptions","organizations_url":"https://api.github.com/users/dan-s1/orgs","repos_url":"https://api.github.com/users/dan-s1/repos","events_url":"https://api.github.com/users/dan-s1/events{/privacy}","received_events_url":"https://api.github.com/users/dan-s1/received_events","type":"User","site_admin":false},"created_at":"2014-08-13T17:51:55Z","updated_at":"2014-08-13T17:51:55Z","author_association":"NONE","body":"That still did not work in those clients. \nWhat I am surprised with your original response is that I can get ElasticSearch Head to delete when I submit a query_string query using a range for example:\n\n{\n  \"query\":\n  {\n       \"query_string\":\n       {\n         \"query\":\"dt:[\\\"2014-05-14T00:00:00+0000\\\" TO \\\"2014-06-13T00:00:00+0000\\\"]\"\n       }\n  }\n}\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52085773","html_url":"https://github.com/elastic/elasticsearch/issues/7259#issuecomment-52085773","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7259","id":52085773,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDg1Nzcz","user":{"login":"dan-s1","id":8440116,"node_id":"MDQ6VXNlcjg0NDAxMTY=","avatar_url":"https://avatars1.githubusercontent.com/u/8440116?v=4","gravatar_id":"","url":"https://api.github.com/users/dan-s1","html_url":"https://github.com/dan-s1","followers_url":"https://api.github.com/users/dan-s1/followers","following_url":"https://api.github.com/users/dan-s1/following{/other_user}","gists_url":"https://api.github.com/users/dan-s1/gists{/gist_id}","starred_url":"https://api.github.com/users/dan-s1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dan-s1/subscriptions","organizations_url":"https://api.github.com/users/dan-s1/orgs","repos_url":"https://api.github.com/users/dan-s1/repos","events_url":"https://api.github.com/users/dan-s1/events{/privacy}","received_events_url":"https://api.github.com/users/dan-s1/received_events","type":"User","site_admin":false},"created_at":"2014-08-13T17:59:22Z","updated_at":"2014-08-13T17:59:22Z","author_association":"NONE","body":"I also can use these clients to delete with match_all and ids queries in the body.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52091565","html_url":"https://github.com/elastic/elasticsearch/issues/7259#issuecomment-52091565","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7259","id":52091565,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDkxNTY1","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-08-13T18:40:47Z","updated_at":"2014-08-13T18:40:47Z","author_association":"CONTRIBUTOR","body":"In which case you probably don't have any data in the `_timestamp` field.  Either way this is not a bug. The best place to ask for help with questions like this is in the google groups forum: https://groups.google.com/forum/#!forum/elasticsearch\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52092183","html_url":"https://github.com/elastic/elasticsearch/issues/7259#issuecomment-52092183","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7259","id":52092183,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDkyMTgz","user":{"login":"dan-s1","id":8440116,"node_id":"MDQ6VXNlcjg0NDAxMTY=","avatar_url":"https://avatars1.githubusercontent.com/u/8440116?v=4","gravatar_id":"","url":"https://api.github.com/users/dan-s1","html_url":"https://github.com/dan-s1","followers_url":"https://api.github.com/users/dan-s1/followers","following_url":"https://api.github.com/users/dan-s1/following{/other_user}","gists_url":"https://api.github.com/users/dan-s1/gists{/gist_id}","starred_url":"https://api.github.com/users/dan-s1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dan-s1/subscriptions","organizations_url":"https://api.github.com/users/dan-s1/orgs","repos_url":"https://api.github.com/users/dan-s1/repos","events_url":"https://api.github.com/users/dan-s1/events{/privacy}","received_events_url":"https://api.github.com/users/dan-s1/received_events","type":"User","site_admin":false},"created_at":"2014-08-13T18:45:05Z","updated_at":"2014-08-13T18:45:05Z","author_association":"NONE","body":"Actually we have data in the _timestamp field as _timestamp is enabled in our mapping file and sorry for the typo before but this query worked:\n{\n\"query\":\n{\n\"query_string\":\n{\n\"query\":\"_timestamp:[\\\"2014-05-14T00:00:00+0000\\\" TO \\\"2014-06-13T00:00:00+0000\\\"]\"\n}\n}\n}\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52092377","html_url":"https://github.com/elastic/elasticsearch/issues/7259#issuecomment-52092377","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7259","id":52092377,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDkyMzc3","user":{"login":"dan-s1","id":8440116,"node_id":"MDQ6VXNlcjg0NDAxMTY=","avatar_url":"https://avatars1.githubusercontent.com/u/8440116?v=4","gravatar_id":"","url":"https://api.github.com/users/dan-s1","html_url":"https://github.com/dan-s1","followers_url":"https://api.github.com/users/dan-s1/followers","following_url":"https://api.github.com/users/dan-s1/following{/other_user}","gists_url":"https://api.github.com/users/dan-s1/gists{/gist_id}","starred_url":"https://api.github.com/users/dan-s1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dan-s1/subscriptions","organizations_url":"https://api.github.com/users/dan-s1/orgs","repos_url":"https://api.github.com/users/dan-s1/repos","events_url":"https://api.github.com/users/dan-s1/events{/privacy}","received_events_url":"https://api.github.com/users/dan-s1/received_events","type":"User","site_admin":false},"created_at":"2014-08-13T18:46:22Z","updated_at":"2014-08-13T18:46:22Z","author_association":"NONE","body":"and this did not:\n{\n\"query\" :\n{\n\"range\" :\n{\n\"_timestamp\" :\n{\n\"lt\" : \"now-1440h\"\n}\n}\n}\n\n}\n\nwhich would indicate something in the Delete by Query API does not accept all queries.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52093921","html_url":"https://github.com/elastic/elasticsearch/issues/7259#issuecomment-52093921","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7259","id":52093921,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDkzOTIx","user":{"login":"dan-s1","id":8440116,"node_id":"MDQ6VXNlcjg0NDAxMTY=","avatar_url":"https://avatars1.githubusercontent.com/u/8440116?v=4","gravatar_id":"","url":"https://api.github.com/users/dan-s1","html_url":"https://github.com/dan-s1","followers_url":"https://api.github.com/users/dan-s1/followers","following_url":"https://api.github.com/users/dan-s1/following{/other_user}","gists_url":"https://api.github.com/users/dan-s1/gists{/gist_id}","starred_url":"https://api.github.com/users/dan-s1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dan-s1/subscriptions","organizations_url":"https://api.github.com/users/dan-s1/orgs","repos_url":"https://api.github.com/users/dan-s1/repos","events_url":"https://api.github.com/users/dan-s1/events{/privacy}","received_events_url":"https://api.github.com/users/dan-s1/received_events","type":"User","site_admin":false},"created_at":"2014-08-13T18:57:45Z","updated_at":"2014-08-13T18:57:45Z","author_association":"NONE","body":"Also one more thing. I ran the same query against a field named ingestDate which is a defined as a dateOptionalTime type in the mapping file and it always has a value and the range query in a search returned 333 documents but with delete on query it failed. The query is below:\n\n{\n\"query\" :\n{\n\"range\" :\n{\n\"ingestDate\" :\n{\n\"lt\" : \"now-1440h\"\n}\n}\n}\n\n}\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52097344","html_url":"https://github.com/elastic/elasticsearch/issues/7259#issuecomment-52097344","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7259","id":52097344,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDk3MzQ0","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-08-13T19:23:04Z","updated_at":"2014-08-13T19:23:14Z","author_association":"CONTRIBUTOR","body":"This works for me:\n\n```\nPUT /test \n{\n  \"mappings\": {\n    \"test\": {\n      \"_timestamp\": {\n        \"format\": \"yyyy-MM-dd\",\n        \"enabled\": true\n      }\n    }\n  }\n}\nPUT /test/test/1?timestamp=2015-01-01\n{}\n\nPUT /test/test/2?timestamp=2014-01-01\n{}\n\nPUT /test/test/3?timestamp=2013-01-01\n{}\n```\n\nThis search returns the 2nd and 3rd docs:\n\n```\nGET /_search\n{\n  \"query\": {\n    \"range\": {\n      \"_timestamp\": {\n        \"lt\": \"now-1440h\"\n      }\n    }\n  }\n}\n\nDELETE /test/_query \n{\n  \"query\": {\n    \"range\": {\n      \"_timestamp\": {\n        \"lt\": \"now-1440h\"\n      }\n    }\n  }\n}\n```\n\nThis returns only the first doc:\n\n```\nGET /_search\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52107093","html_url":"https://github.com/elastic/elasticsearch/issues/7259#issuecomment-52107093","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7259","id":52107093,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTA3MDkz","user":{"login":"rahst12","id":4392617,"node_id":"MDQ6VXNlcjQzOTI2MTc=","avatar_url":"https://avatars3.githubusercontent.com/u/4392617?v=4","gravatar_id":"","url":"https://api.github.com/users/rahst12","html_url":"https://github.com/rahst12","followers_url":"https://api.github.com/users/rahst12/followers","following_url":"https://api.github.com/users/rahst12/following{/other_user}","gists_url":"https://api.github.com/users/rahst12/gists{/gist_id}","starred_url":"https://api.github.com/users/rahst12/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rahst12/subscriptions","organizations_url":"https://api.github.com/users/rahst12/orgs","repos_url":"https://api.github.com/users/rahst12/repos","events_url":"https://api.github.com/users/rahst12/events{/privacy}","received_events_url":"https://api.github.com/users/rahst12/received_events","type":"User","site_admin":false},"created_at":"2014-08-13T20:37:07Z","updated_at":"2014-08-13T20:37:07Z","author_association":"NONE","body":"@clintongormley What version of elasticsearch are you testing with?  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52159160","html_url":"https://github.com/elastic/elasticsearch/issues/7259#issuecomment-52159160","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7259","id":52159160,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTU5MTYw","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-08-14T08:59:46Z","updated_at":"2014-08-14T08:59:46Z","author_association":"CONTRIBUTOR","body":"Originally on master - I went back and tested this on 1.3.1, 1.2.1 and 1.1.2.... turns out this was indeed broken in the 1.1.x branch!\n\nLooks like it was fixed by #5540\n","performed_via_github_app":null}]