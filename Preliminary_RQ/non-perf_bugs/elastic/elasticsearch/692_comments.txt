[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/1331101","html_url":"https://github.com/elastic/elasticsearch/issues/692#issuecomment-1331101","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/692","id":1331101,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMzExMDE=","user":{"login":"raff","id":53832,"node_id":"MDQ6VXNlcjUzODMy","avatar_url":"https://avatars3.githubusercontent.com/u/53832?v=4","gravatar_id":"","url":"https://api.github.com/users/raff","html_url":"https://github.com/raff","followers_url":"https://api.github.com/users/raff/followers","following_url":"https://api.github.com/users/raff/following{/other_user}","gists_url":"https://api.github.com/users/raff/gists{/gist_id}","starred_url":"https://api.github.com/users/raff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raff/subscriptions","organizations_url":"https://api.github.com/users/raff/orgs","repos_url":"https://api.github.com/users/raff/repos","events_url":"https://api.github.com/users/raff/events{/privacy}","received_events_url":"https://api.github.com/users/raff/received_events","type":"User","site_admin":false},"created_at":"2011-06-09T00:32:00Z","updated_at":"2011-06-09T00:32:00Z","author_association":"NONE","body":"I would actually prefer if an invalid search pattern would return a client error (like a 400 Bad Request) instead of a 500 Internal Server Error. Then the client could display a meaningful error to the user.\n\nOf course _count should return the same error as _search :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19734777","html_url":"https://github.com/elastic/elasticsearch/issues/692#issuecomment-19734777","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/692","id":19734777,"node_id":"MDEyOklzc3VlQ29tbWVudDE5NzM0Nzc3","user":{"login":"pabluk","id":161046,"node_id":"MDQ6VXNlcjE2MTA0Ng==","avatar_url":"https://avatars3.githubusercontent.com/u/161046?v=4","gravatar_id":"","url":"https://api.github.com/users/pabluk","html_url":"https://github.com/pabluk","followers_url":"https://api.github.com/users/pabluk/followers","following_url":"https://api.github.com/users/pabluk/following{/other_user}","gists_url":"https://api.github.com/users/pabluk/gists{/gist_id}","starred_url":"https://api.github.com/users/pabluk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pabluk/subscriptions","organizations_url":"https://api.github.com/users/pabluk/orgs","repos_url":"https://api.github.com/users/pabluk/repos","events_url":"https://api.github.com/users/pabluk/events{/privacy}","received_events_url":"https://api.github.com/users/pabluk/received_events","type":"User","site_admin":false},"created_at":"2013-06-20T07:23:04Z","updated_at":"2013-06-24T10:20:50Z","author_association":"NONE","body":"+1 to keep the same behavior with an invalid query made on \"_search\" or \"_count\".\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19895451","html_url":"https://github.com/elastic/elasticsearch/issues/692#issuecomment-19895451","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/692","id":19895451,"node_id":"MDEyOklzc3VlQ29tbWVudDE5ODk1NDUx","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2013-06-24T08:49:18Z","updated_at":"2013-06-24T08:49:18Z","author_association":"MEMBER","body":"Just verified, it still exists in 0.90.1, I will fix it in order to be consistent and not return a 200 OK in the count response headers even if we send an error in the response body\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/20110139","html_url":"https://github.com/elastic/elasticsearch/issues/692#issuecomment-20110139","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/692","id":20110139,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMTEwMTM5","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2013-06-27T10:34:59Z","updated_at":"2013-06-27T10:34:59Z","author_association":"MEMBER","body":"The search and the count implementation differs, because the `SearchRequest` inherits from `ActionRequest`, where the `CountRequest` inherits from `BroadcoastOperationRequest`.\n\nThe `TransportBroadcastOperationAction` casts every occuring exception into a `BroadcastShardOperationFailedException` - when the count request returns with a count response, a `BroadcastShardOperationFailedException` (which now contains the query parsing exception) is only marked as a shard failure instead of a query parsing failure.\n\nThis is **why** the two implementations differ. Next step is to think about, how to unify it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/20110200","html_url":"https://github.com/elastic/elasticsearch/issues/692#issuecomment-20110200","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/692","id":20110200,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMTEwMjAw","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2013-06-27T10:36:33Z","updated_at":"2013-06-27T10:36:33Z","author_association":"MEMBER","body":"@raff an aside, can you share the sample of where an invalid query in a search request returns 500? We should fix it to return 400, we might missed something...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/20114267","html_url":"https://github.com/elastic/elasticsearch/issues/692#issuecomment-20114267","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/692","id":20114267,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMTE0MjY3","user":{"login":"pabluk","id":161046,"node_id":"MDQ6VXNlcjE2MTA0Ng==","avatar_url":"https://avatars3.githubusercontent.com/u/161046?v=4","gravatar_id":"","url":"https://api.github.com/users/pabluk","html_url":"https://github.com/pabluk","followers_url":"https://api.github.com/users/pabluk/followers","following_url":"https://api.github.com/users/pabluk/following{/other_user}","gists_url":"https://api.github.com/users/pabluk/gists{/gist_id}","starred_url":"https://api.github.com/users/pabluk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pabluk/subscriptions","organizations_url":"https://api.github.com/users/pabluk/orgs","repos_url":"https://api.github.com/users/pabluk/repos","events_url":"https://api.github.com/users/pabluk/events{/privacy}","received_events_url":"https://api.github.com/users/pabluk/received_events","type":"User","site_admin":false},"created_at":"2013-06-27T12:17:21Z","updated_at":"2013-06-27T12:24:57Z","author_association":"NONE","body":"Here an example of an invalid query that returns 500 using `_search`\n\n``` bash\n$ curl -v -XGET 'http://localhost:9200/twitter/tweet/_search?q=OR+OR'\n> GET /twitter/tweet/_search?q=OR+OR HTTP/1.1\n> User-Agent: curl/7.22.0 (x86_64-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3\n> Host: localhost:9200\n> Accept: */*\n> \n< HTTP/1.1 500 Internal Server Error\n< Content-Type: application/json; charset=UTF-8\n< Content-Length: 5795\n< \n```\n\nJSON response\n\n``` json\n{\n    \"error\": \"SearchPhaseExecutionException[Failed to execute phase [query], total failure; shardFailures {[s4MQ1vnkS5egTRBd7DS3NA][twitter][4]: RemoteTransportException[[Cypher][inet[/192.168.0.127:9300]][search/phase/query]]; nested: SearchParseException[[twitter][4]: from[-1],size[-1]: Parse Failure [Failed to parse source [{\\\"query\\\":{\\\"query_string\\\":{\\\"query\\\":\\\"OR OR\\\",\\\"lowercase_expanded_terms\\\":true,\\\"analyze_wildcard\\\":false}}}]]]; nested: QueryParsingException[[twitter] Failed to parse query [OR OR]]; nested: ParseException[Cannot parse 'OR OR': Encountered \\\" <OR> \\\"OR \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    <BAREOPER> ...\\n    \\\"(\\\" ...\\n    \\\"*\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    <REGEXPTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"*\\\" ...\\n    ]; nested: ParseException[Encountered \\\" <OR> \\\"OR \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    <BAREOPER> ...\\n    \\\"(\\\" ...\\n    \\\"*\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    <REGEXPTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"*\\\" ...\\n    ]; }{[s4MQ1vnkS5egTRBd7DS3NA][twitter][2]: RemoteTransportException[[Cypher][inet[/192.168.0.127:9300]][search/phase/query]]; nested: SearchParseException[[twitter][2]: from[-1],size[-1]: Parse Failure [Failed to parse source [{\\\"query\\\":{\\\"query_string\\\":{\\\"query\\\":\\\"OR OR\\\",\\\"lowercase_expanded_terms\\\":true,\\\"analyze_wildcard\\\":false}}}]]]; nested: QueryParsingException[[twitter] Failed to parse query [OR OR]]; nested: ParseException[Cannot parse 'OR OR': Encountered \\\" <OR> \\\"OR \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    <BAREOPER> ...\\n    \\\"(\\\" ...\\n    \\\"*\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    <REGEXPTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"*\\\" ...\\n    ]; nested: ParseException[Encountered \\\" <OR> \\\"OR \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    <BAREOPER> ...\\n    \\\"(\\\" ...\\n    \\\"*\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    <REGEXPTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"*\\\" ...\\n    ]; }{[RW38JhZITs6UhzMj8W_wZQ][twitter][3]: SearchParseException[[twitter][3]: from[-1],size[-1]: Parse Failure [Failed to parse source [{\\\"query\\\":{\\\"query_string\\\":{\\\"query\\\":\\\"OR OR\\\",\\\"lowercase_expanded_terms\\\":true,\\\"analyze_wildcard\\\":false}}}]]]; nested: QueryParsingException[[twitter] Failed to parse query [OR OR]]; nested: ParseException[Cannot parse 'OR OR': Encountered \\\" <OR> \\\"OR \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    <BAREOPER> ...\\n    \\\"(\\\" ...\\n    \\\"*\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    <REGEXPTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"*\\\" ...\\n    ]; nested: ParseException[Encountered \\\" <OR> \\\"OR \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    <BAREOPER> ...\\n    \\\"(\\\" ...\\n    \\\"*\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    <REGEXPTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"*\\\" ...\\n    ]; }{[RW38JhZITs6UhzMj8W_wZQ][twitter][1]: SearchParseException[[twitter][1]: from[-1],size[-1]: Parse Failure [Failed to parse source [{\\\"query\\\":{\\\"query_string\\\":{\\\"query\\\":\\\"OR OR\\\",\\\"lowercase_expanded_terms\\\":true,\\\"analyze_wildcard\\\":false}}}]]]; nested: QueryParsingException[[twitter] Failed to parse query [OR OR]]; nested: ParseException[Cannot parse 'OR OR': Encountered \\\" <OR> \\\"OR \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    <BAREOPER> ...\\n    \\\"(\\\" ...\\n    \\\"*\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    <REGEXPTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"*\\\" ...\\n    ]; nested: ParseException[Encountered \\\" <OR> \\\"OR \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    <BAREOPER> ...\\n    \\\"(\\\" ...\\n    \\\"*\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    <REGEXPTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"*\\\" ...\\n    ]; }{[RW38JhZITs6UhzMj8W_wZQ][twitter][0]: SearchParseException[[twitter][0]: from[-1],size[-1]: Parse Failure [Failed to parse source [{\\\"query\\\":{\\\"query_string\\\":{\\\"query\\\":\\\"OR OR\\\",\\\"lowercase_expanded_terms\\\":true,\\\"analyze_wildcard\\\":false}}}]]]; nested: QueryParsingException[[twitter] Failed to parse query [OR OR]]; nested: ParseException[Cannot parse 'OR OR': Encountered \\\" <OR> \\\"OR \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    <BAREOPER> ...\\n    \\\"(\\\" ...\\n    \\\"*\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    <REGEXPTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"*\\\" ...\\n    ]; nested: ParseException[Encountered \\\" <OR> \\\"OR \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    <BAREOPER> ...\\n    \\\"(\\\" ...\\n    \\\"*\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    <REGEXPTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"*\\\" ...\\n    ]; }]\", \n    \"status\": 500\n}\n```\n\nand the same query using `_count`\n\n``` bash\n$ curl -v -XGET 'http://localhost:9200/twitter/tweet/_count?q=OR+OR'\n> GET /twitter/tweet/_count?q=OR+OR HTTP/1.1\n> User-Agent: curl/7.22.0 (x86_64-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3\n> Host: localhost:9200\n> Accept: */*\n> \n< HTTP/1.1 200 OK\n< Content-Type: application/json; charset=UTF-8\n< Content-Length: 5037\n< \n```\n\nJSON response\n\n``` json\n{\n    \"_shards\": {\n        \"failed\": 5, \n        \"failures\": [\n            {\n                \"index\": \"twitter\", \n                \"reason\": \"BroadcastShardOperationFailedException[[twitter][3] ]; nested: RemoteTransportException[[Cypher][inet[/192.168.0.127:9300]][count/s]]; nested: QueryParsingException[[twitter] Failed to parse query [OR OR]]; nested: ParseException[Cannot parse 'OR OR': Encountered \\\" <OR> \\\"OR \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    <BAREOPER> ...\\n    \\\"(\\\" ...\\n    \\\"*\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    <REGEXPTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"*\\\" ...\\n    ]; nested: ParseException[Encountered \\\" <OR> \\\"OR \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    <BAREOPER> ...\\n    \\\"(\\\" ...\\n    \\\"*\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    <REGEXPTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"*\\\" ...\\n    ]; \", \n                \"shard\": 3\n            }, \n            {\n                \"index\": \"twitter\", \n                \"reason\": \"BroadcastShardOperationFailedException[[twitter][2] ]; nested: QueryParsingException[[twitter] Failed to parse query [OR OR]]; nested: ParseException[Cannot parse 'OR OR': Encountered \\\" <OR> \\\"OR \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    <BAREOPER> ...\\n    \\\"(\\\" ...\\n    \\\"*\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    <REGEXPTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"*\\\" ...\\n    ]; nested: ParseException[Encountered \\\" <OR> \\\"OR \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    <BAREOPER> ...\\n    \\\"(\\\" ...\\n    \\\"*\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    <REGEXPTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"*\\\" ...\\n    ]; \", \n                \"shard\": 2\n            }, \n            {\n                \"index\": \"twitter\", \n                \"reason\": \"BroadcastShardOperationFailedException[[twitter][4] ]; nested: QueryParsingException[[twitter] Failed to parse query [OR OR]]; nested: ParseException[Cannot parse 'OR OR': Encountered \\\" <OR> \\\"OR \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    <BAREOPER> ...\\n    \\\"(\\\" ...\\n    \\\"*\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    <REGEXPTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"*\\\" ...\\n    ]; nested: ParseException[Encountered \\\" <OR> \\\"OR \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    <BAREOPER> ...\\n    \\\"(\\\" ...\\n    \\\"*\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    <REGEXPTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"*\\\" ...\\n    ]; \", \n                \"shard\": 4\n            }, \n            {\n                \"index\": \"twitter\", \n                \"reason\": \"BroadcastShardOperationFailedException[[twitter][1] ]; nested: RemoteTransportException[[Cypher][inet[/192.168.0.127:9300]][count/s]]; nested: QueryParsingException[[twitter] Failed to parse query [OR OR]]; nested: ParseException[Cannot parse 'OR OR': Encountered \\\" <OR> \\\"OR \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    <BAREOPER> ...\\n    \\\"(\\\" ...\\n    \\\"*\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    <REGEXPTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"*\\\" ...\\n    ]; nested: ParseException[Encountered \\\" <OR> \\\"OR \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    <BAREOPER> ...\\n    \\\"(\\\" ...\\n    \\\"*\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    <REGEXPTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"*\\\" ...\\n    ]; \", \n                \"shard\": 1\n            }, \n            {\n                \"index\": \"twitter\", \n                \"reason\": \"BroadcastShardOperationFailedException[[twitter][0] ]; nested: RemoteTransportException[[Cypher][inet[/192.168.0.127:9300]][count/s]]; nested: QueryParsingException[[twitter] Failed to parse query [OR OR]]; nested: ParseException[Cannot parse 'OR OR': Encountered \\\" <OR> \\\"OR \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    <BAREOPER> ...\\n    \\\"(\\\" ...\\n    \\\"*\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    <REGEXPTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"*\\\" ...\\n    ]; nested: ParseException[Encountered \\\" <OR> \\\"OR \\\"\\\" at line 1, column 0.\\nWas expecting one of:\\n    <NOT> ...\\n    \\\"+\\\" ...\\n    \\\"-\\\" ...\\n    <BAREOPER> ...\\n    \\\"(\\\" ...\\n    \\\"*\\\" ...\\n    <QUOTED> ...\\n    <TERM> ...\\n    <PREFIXTERM> ...\\n    <WILDTERM> ...\\n    <REGEXPTERM> ...\\n    \\\"[\\\" ...\\n    \\\"{\\\" ...\\n    <NUMBER> ...\\n    <TERM> ...\\n    \\\"*\\\" ...\\n    ]; \", \n                \"shard\": 0\n            }\n        ], \n        \"successful\": 0, \n        \"total\": 5\n    }, \n    \"count\": 0\n}\n```\n\nI'm using elasticsearch 0.90.2 with the default configuration settings and java 1.6\n\n``` bash\n$ java -version\njava version \"1.6.0_27\"\nOpenJDK Runtime Environment (IcedTea6 1.12.5) (6b27-1.12.5-0ubuntu0.12.04.1)\nOpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode)\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/48327082","html_url":"https://github.com/elastic/elasticsearch/issues/692#issuecomment-48327082","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/692","id":48327082,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MzI3MDgy","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-07-08T12:02:34Z","updated_at":"2014-07-08T12:02:34Z","author_association":"CONTRIBUTOR","body":"This has been fixed.  Both _search and _count now return 400 bad request.\n","performed_via_github_app":null}]