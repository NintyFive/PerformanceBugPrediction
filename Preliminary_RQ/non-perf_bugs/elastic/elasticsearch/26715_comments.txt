[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/330807556","html_url":"https://github.com/elastic/elasticsearch/issues/26715#issuecomment-330807556","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26715","id":330807556,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDgwNzU1Ng==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2017-09-20T10:08:32Z","updated_at":"2017-09-20T10:08:32Z","author_association":"MEMBER","body":"This is not how the `collate` option works. The doc says that `collate` checks each suggestion against the specified query to prune suggestions for which no matching docs exist in the index:\r\nhttps://www.elastic.co/guide/en/elasticsearch/reference/current/search-suggesters-phrase.html\r\nIn your example one document matches the query so `collate_match` is set to true. \r\nThe `phrase_suggester` is not document-based, suggestions are build from the term dictionary and they are not associated with a specific document. \r\nRegarding your issue, you could use a different field `title_active` and set this field for active documents only.\r\n\r\n\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/330861824","html_url":"https://github.com/elastic/elasticsearch/issues/26715#issuecomment-330861824","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26715","id":330861824,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDg2MTgyNA==","user":{"login":"bencrouse","id":165111,"node_id":"MDQ6VXNlcjE2NTExMQ==","avatar_url":"https://avatars2.githubusercontent.com/u/165111?v=4","gravatar_id":"","url":"https://api.github.com/users/bencrouse","html_url":"https://github.com/bencrouse","followers_url":"https://api.github.com/users/bencrouse/followers","following_url":"https://api.github.com/users/bencrouse/following{/other_user}","gists_url":"https://api.github.com/users/bencrouse/gists{/gist_id}","starred_url":"https://api.github.com/users/bencrouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bencrouse/subscriptions","organizations_url":"https://api.github.com/users/bencrouse/orgs","repos_url":"https://api.github.com/users/bencrouse/repos","events_url":"https://api.github.com/users/bencrouse/events{/privacy}","received_events_url":"https://api.github.com/users/bencrouse/received_events","type":"User","site_admin":false},"created_at":"2017-09-20T14:04:08Z","updated_at":"2017-09-20T14:04:08Z","author_association":"NONE","body":"Thanks for your reply @jimczi - that solution sounds good to me.\r\n\r\nI'm still confused by what the intent of the collate feature is then. I read that yesterday and thought this would be what's intended there because of \"Checks each suggestion against the specified query to prune suggestions for which no matching docs exist in the index\". I took this to mean that for each suggestion, the query provided would be run and the `collate_match` would be based on whether any documents matched that query. I'm having a tough time imagining what else it would do.\r\n\r\nI'd appreciate some clarification just for my own understanding, but your solution is easy and reasonable so thanks a lot for your time.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/330874240","html_url":"https://github.com/elastic/elasticsearch/issues/26715#issuecomment-330874240","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26715","id":330874240,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDg3NDI0MA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2017-09-20T14:43:54Z","updated_at":"2017-09-20T14:43:54Z","author_association":"CONTRIBUTOR","body":"@bencrouse this feature is really there to ensure that you don't provide a _spellchecked_ suggestion to your users that would then return 0 documents. Lets say you have a search box on a website and somebody types in a query. this query string would be turned into an elasticsearch query and executed. With the collate option we try to mimic this behavior to ensure you only get a suggestion back if it would match at least one document given you collate query. I hope this makes more sense?!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/330925617","html_url":"https://github.com/elastic/elasticsearch/issues/26715#issuecomment-330925617","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26715","id":330925617,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDkyNTYxNw==","user":{"login":"bencrouse","id":165111,"node_id":"MDQ6VXNlcjE2NTExMQ==","avatar_url":"https://avatars2.githubusercontent.com/u/165111?v=4","gravatar_id":"","url":"https://api.github.com/users/bencrouse","html_url":"https://github.com/bencrouse","followers_url":"https://api.github.com/users/bencrouse/followers","following_url":"https://api.github.com/users/bencrouse/following{/other_user}","gists_url":"https://api.github.com/users/bencrouse/gists{/gist_id}","starred_url":"https://api.github.com/users/bencrouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bencrouse/subscriptions","organizations_url":"https://api.github.com/users/bencrouse/orgs","repos_url":"https://api.github.com/users/bencrouse/repos","events_url":"https://api.github.com/users/bencrouse/events{/privacy}","received_events_url":"https://api.github.com/users/bencrouse/received_events","type":"User","site_admin":false},"created_at":"2017-09-20T17:37:12Z","updated_at":"2017-09-20T17:37:12Z","author_association":"NONE","body":"ok, I get it now, I totally misunderstood. I can use it for exactly what I need! thanks for your time and patience @jimczi and @s1monw ","performed_via_github_app":null}]