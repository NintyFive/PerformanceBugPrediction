{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/25905","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25905/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25905/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25905/events","html_url":"https://github.com/elastic/elasticsearch/issues/25905","id":245692272,"node_id":"MDU6SXNzdWUyNDU2OTIyNzI=","number":25905,"title":"Time range query without “TO” results in exception","user":{"login":"fe7ch","id":12269066,"node_id":"MDQ6VXNlcjEyMjY5MDY2","avatar_url":"https://avatars3.githubusercontent.com/u/12269066?v=4","gravatar_id":"","url":"https://api.github.com/users/fe7ch","html_url":"https://github.com/fe7ch","followers_url":"https://api.github.com/users/fe7ch/followers","following_url":"https://api.github.com/users/fe7ch/following{/other_user}","gists_url":"https://api.github.com/users/fe7ch/gists{/gist_id}","starred_url":"https://api.github.com/users/fe7ch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fe7ch/subscriptions","organizations_url":"https://api.github.com/users/fe7ch/orgs","repos_url":"https://api.github.com/users/fe7ch/repos","events_url":"https://api.github.com/users/fe7ch/events{/privacy}","received_events_url":"https://api.github.com/users/fe7ch/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":30486044,"node_id":"MDU6TGFiZWwzMDQ4NjA0NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eregression","name":">regression","color":"d7e102","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"assignees":[{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2017-07-26T11:35:24Z","updated_at":"2018-02-14T13:28:44Z","closed_at":"2017-07-26T12:15:07Z","author_association":"NONE","active_lock_reason":null,"body":"<!-- Bug report -->\r\n\r\n**Elasticsearch version**: 5.5.0\r\n\r\n**Plugins installed**: [ x-pack ]\r\n\r\n**JVM version** (`java -version`): `1.8.0_131/25.131-b11`\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): `Linux elk2 4.4.0-83-generic #106-Ubuntu SMP Mon Jun 26 17:54:43 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux`\r\n\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nSince Elasticsearch 5.2 to 5.4.0 (I haven't checked other versions, but these were installed on my server) I was able to use the following statement in my queries:\r\n\r\n`timestamp: [now-2d now]`\r\n\r\nIt worked just fine. When I've upgraded to 5.5.0 it stopped working and now throws an exception (https://pastebin.com/6XxifrMW1) saying I must put \"TO\" between \"now-2d\" and \"now\".\r\n\r\nI've checked release notes for 5.5 and failed to find anything that could explain the change in behavior.\r\n\r\nSo there is a regression or lack of documentation in ES 5.5.0\r\n\r\nAn issue confirmed by David Pilato: https://discuss.elastic.co/t/time-range-query-without-to/94578\r\n\r\n**Steps to reproduce**:\r\n\r\nPlease include a *minimal* but *complete* recreation of the problem, including\r\n(e.g.) index creation, mappings, settings, query etc.  The easier you make for\r\nus to reproduce it, the more likely that somebody will take the time to look at it.\r\n\r\n 1. Create an index\r\n 2. Fill it with documents that has a time based field (like timestamp)\r\n 3. Make a query:\r\n\"query\": {\r\n    \"query_string\": {\r\n        \"query\": \"timestamp: [now-1d now]\"\r\n   }\r\n}\r\n  4. ES will throw an exception\r\n\r\n**Provide logs (if relevant)**:\r\n\r\nhttps://pastebin.com/6XxifrMW1","closed_by":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"performed_via_github_app":null}