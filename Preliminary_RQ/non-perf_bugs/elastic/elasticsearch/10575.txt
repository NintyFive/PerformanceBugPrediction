{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/10575","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10575/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10575/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10575/events","html_url":"https://github.com/elastic/elasticsearch/issues/10575","id":68145791,"node_id":"MDU6SXNzdWU2ODE0NTc5MQ==","number":10575,"title":"Use suggester will throw some errors！","user":{"login":"janryWang","id":4060976,"node_id":"MDQ6VXNlcjQwNjA5NzY=","avatar_url":"https://avatars0.githubusercontent.com/u/4060976?v=4","gravatar_id":"","url":"https://api.github.com/users/janryWang","html_url":"https://github.com/janryWang","followers_url":"https://api.github.com/users/janryWang/followers","following_url":"https://api.github.com/users/janryWang/following{/other_user}","gists_url":"https://api.github.com/users/janryWang/gists{/gist_id}","starred_url":"https://api.github.com/users/janryWang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janryWang/subscriptions","organizations_url":"https://api.github.com/users/janryWang/orgs","repos_url":"https://api.github.com/users/janryWang/repos","events_url":"https://api.github.com/users/janryWang/events{/privacy}","received_events_url":"https://api.github.com/users/janryWang/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2015-04-13T17:08:55Z","updated_at":"2015-04-13T19:33:19Z","closed_at":"2015-04-13T17:20:11Z","author_association":"NONE","active_lock_reason":null,"body":"This is my index's metadata.\n\n```\n{\n    \"state\": \"open\",\n    \"settings\": {\n        \"index\": {\n            \"creation_date\": \"1428906895254\",\n            \"uuid\": \"4MHyTCKrRdmPJWRikbWHsw\",\n            \"number_of_replicas\": \"1\",\n            \"number_of_shards\": \"5\",\n            \"version\": {\n                \"created\": \"1040299\"\n            }\n        }\n    },\n    \"mappings\": {\n        \"post\": {\n            \"properties\": {\n                \"content\": {\n                    \"properties\": {\n                        \"extended\": {\n                            \"type\": \"string\"\n                        },\n                        \"brief\": {\n                            \"type\": \"string\"\n                        }\n                    }\n                },\n                \"title\": {\n                    \"type\": \"string\"\n                },\n                \"views\": {\n                    \"type\": \"long\"\n                },\n                \"likes\": {\n                    \"type\": \"long\"\n                },\n                \"areas\": {\n                    \"type\": \"string\"\n                },\n                \"published\": {\n                    \"format\": \"dateOptionalTime\",\n                    \"type\": \"date\"\n                },\n                \"comments\": {\n                    \"type\": \"long\"\n                }\n            }\n        }\n    },\n    \"aliases\": []\n}\n\n```\n\nThis is my request\n\n```\ncurl -XPOST http://localhost:9200/posts/_suggest -d '\n\n{\n  \"mysuggest\":{\n     \"text\":\"hello world\",\n     \"completion\":{\n        \"field\":\"title\"\n     }\n  }\n}\n\n'\n\n```\n\nThis is response.\n\n```\n{\n    \"_shards\": {\n        \"total\": 5,\n        \"successful\": 0,\n        \"failed\": 5,\n        \"failures\": [\n            {\n                \"index\": \"posts\",\n                \"shard\": 0,\n                \"reason\": \"BroadcastShardOperationFailedException[[posts][0] ]; nested: ElasticsearchException[failed to execute suggest]; nested: ClassCastException[org.elasticsearch.index.mapper.core.StringFieldMapper cannot be cast to org.elasticsearch.index.mapper.core.CompletionFieldMapper]; \"\n            }\n            ,\n            {\n                \"index\": \"posts\",\n                \"shard\": 1,\n                \"reason\": \"BroadcastShardOperationFailedException[[posts][1] ]; nested: ElasticsearchException[failed to execute suggest]; nested: ClassCastException[org.elasticsearch.index.mapper.core.StringFieldMapper cannot be cast to org.elasticsearch.index.mapper.core.CompletionFieldMapper]; \"\n            }\n            ,\n            {\n                \"index\": \"posts\",\n                \"shard\": 2,\n                \"reason\": \"BroadcastShardOperationFailedException[[posts][2] ]; nested: ElasticsearchException[failed to execute suggest]; nested: ClassCastException[org.elasticsearch.index.mapper.core.StringFieldMapper cannot be cast to org.elasticsearch.index.mapper.core.CompletionFieldMapper]; \"\n            }\n            ,\n            {\n                \"index\": \"posts\",\n                \"shard\": 3,\n                \"reason\": \"BroadcastShardOperationFailedException[[posts][3] ]; nested: ElasticsearchException[failed to execute suggest]; nested: ClassCastException[org.elasticsearch.index.mapper.core.StringFieldMapper cannot be cast to org.elasticsearch.index.mapper.core.CompletionFieldMapper]; \"\n            }\n            ,\n            {\n                \"index\": \"posts\",\n                \"shard\": 4,\n                \"reason\": \"BroadcastShardOperationFailedException[[posts][4] ]; nested: ElasticsearchException[failed to execute suggest]; nested: ClassCastException[org.elasticsearch.index.mapper.core.StringFieldMapper cannot be cast to org.elasticsearch.index.mapper.core.CompletionFieldMapper]; \"\n            }\n        ]\n    }\n}\n\n```\n\nI really can not find any way to solve this problem, please help me, I am very grateful！\n","closed_by":{"login":"areek","id":753679,"node_id":"MDQ6VXNlcjc1MzY3OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/753679?v=4","gravatar_id":"","url":"https://api.github.com/users/areek","html_url":"https://github.com/areek","followers_url":"https://api.github.com/users/areek/followers","following_url":"https://api.github.com/users/areek/following{/other_user}","gists_url":"https://api.github.com/users/areek/gists{/gist_id}","starred_url":"https://api.github.com/users/areek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/areek/subscriptions","organizations_url":"https://api.github.com/users/areek/orgs","repos_url":"https://api.github.com/users/areek/repos","events_url":"https://api.github.com/users/areek/events{/privacy}","received_events_url":"https://api.github.com/users/areek/received_events","type":"User","site_admin":false},"performed_via_github_app":null}