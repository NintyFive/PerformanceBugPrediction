{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/4788","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4788/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4788/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4788/events","html_url":"https://github.com/elastic/elasticsearch/issues/4788","id":25821737,"node_id":"MDU6SXNzdWUyNTgyMTczNw==","number":4788,"title":"NullPointerException (NPE) in completion suggester requests","user":{"login":"timbunce","id":62403,"node_id":"MDQ6VXNlcjYyNDAz","avatar_url":"https://avatars2.githubusercontent.com/u/62403?v=4","gravatar_id":"","url":"https://api.github.com/users/timbunce","html_url":"https://github.com/timbunce","followers_url":"https://api.github.com/users/timbunce/followers","following_url":"https://api.github.com/users/timbunce/following{/other_user}","gists_url":"https://api.github.com/users/timbunce/gists{/gist_id}","starred_url":"https://api.github.com/users/timbunce/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timbunce/subscriptions","organizations_url":"https://api.github.com/users/timbunce/orgs","repos_url":"https://api.github.com/users/timbunce/repos","events_url":"https://api.github.com/users/timbunce/events{/privacy}","received_events_url":"https://api.github.com/users/timbunce/received_events","type":"User","site_admin":false},"labels":[{"id":146833729,"node_id":"MDU6TGFiZWwxNDY4MzM3Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Suggesters","name":":Search/Suggesters","color":"0e8a16","default":false,"description":"\"Did you mean\" and suggestions as you type"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":77772642,"node_id":"MDU6TGFiZWw3Nzc3MjY0Mg==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.90.12","name":"v0.90.12","color":"DDDDDD","default":false,"description":null},{"id":76575635,"node_id":"MDU6TGFiZWw3NjU3NTYzNQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v1.0.0.RC2","name":"v1.0.0.RC2","color":"DDDDDD","default":false,"description":null},{"id":75962075,"node_id":"MDU6TGFiZWw3NTk2MjA3NQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v1.1.0","name":"v1.1.0","color":"DDDDDD","default":false,"description":null},{"id":76184120,"node_id":"MDU6TGFiZWw3NjE4NDEyMA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v2.0.0-beta1","name":"v2.0.0-beta1","color":"dddddd","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2014-01-17T17:13:38Z","updated_at":"2015-06-07T23:46:14Z","closed_at":"2014-01-31T20:17:02Z","author_association":"NONE","active_lock_reason":null,"body":"I've been getting sporadic NullPointerException's when executing completion suggester requests for some time and with several recent versions of ES (0.90.{8,9,10}). They're hard to reproduce. Here's an example:\n\n```\n[2014-01-17 11:08:22,577][DEBUG][action.suggest           ] [tbunce-mls-tim] [mls_fts_140117_094546][1], node[IKnJF62HSKe71A0Rr5s1tw], [P], s[STARTED]: Failed to execute [[[mls_fts]], suggestSource[{\"GROUP\":{\"text\":\"0 health-check\",\"completion\":{\"field\":\"mls_area_group_name_suggest\"}},\"ZIP\":{\"text\":\"0 health-check\",\"completion\":{\"field\":\"address_zip_suggest\"}},\"AREA\":{\"text\":\"0 health-check\",\"completion\":{\"field\":\"mls_area_name_suggest\"}},\"MLS#\":{\"text\":\"0 health-check\",\"completion\":{\"field\":\"mls_num_suggest\"}}}]]\n    org.elasticsearch.ElasticSearchException: failed to execute suggest\n    at org.elasticsearch.action.suggest.TransportSuggestAction.shardOperation(TransportSuggestAction.java:167)\n    at org.elasticsearch.action.suggest.TransportSuggestAction.shardOperation(TransportSuggestAction.java:60)\n    at org.elasticsearch.action.support.broadcast.TransportBroadcastOperationAction$AsyncBroadcastAction$2.run(TransportBroadcastOperationAction.java:225)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at java.lang.Thread.run(Unknown Source)\nCaused by: java.lang.NullPointerException\n```\n\nThey seem to only occur if data is being loaded at the same time.\n","closed_by":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"performed_via_github_app":null}