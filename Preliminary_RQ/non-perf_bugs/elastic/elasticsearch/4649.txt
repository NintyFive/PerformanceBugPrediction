{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/4649","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4649/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4649/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4649/events","html_url":"https://github.com/elastic/elasticsearch/issues/4649","id":25210007,"node_id":"MDU6SXNzdWUyNTIxMDAwNw==","number":4649,"title":"Conditional highlighting","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2014-01-08T01:17:17Z","updated_at":"2014-05-22T14:52:34Z","closed_at":"2014-05-22T14:52:34Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"I highlight two fields but only use the highlighting from one of them if there aren't matches in the first field.  I think it'd be cool not to highlight the second field at all if there is a match in the first field.  Mostly I like this idea because that second field is typically much much larger than the first field and takes some time to highlight.\n\n``` js\n      \"fields\": {\n         \"summary\": {\n            \"number_of_fragments\": 1,\n            \"fragment_size\": 100,\n            \"no_match_size\": 100\n         },\n         \"contents\": {\n            \"number_of_fragments\": 1,\n            \"fragment_size\": 100,\n            \"unless\": [\"text\"]\n         }\n     }\n```\n\nor\n\n``` js\n      \"fields\": {\n         \"summary\": {\n            \"number_of_fragments\": 1,\n            \"fragment_size\": 100,\n            \"no_match_size\": 100,\n            \"when_no_match\": {\n               \"contents\": {\n                  \"number_of_fragments\": 1,\n                  \"fragment_size\": 100,\n                  \"unless\": [\"summary\"]\n               }\n            }\n         }\n     }\n```\n\nNote that I really only need that no match snippet from the first field if there aren't matches in either field but it felt simpler to declare it on the first field.\n\nI'll happy to implement this but would some thoughts on my proposed api.\n","closed_by":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"performed_via_github_app":null}