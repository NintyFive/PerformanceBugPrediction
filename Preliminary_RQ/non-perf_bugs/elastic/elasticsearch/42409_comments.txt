[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/494980945","html_url":"https://github.com/elastic/elasticsearch/issues/42409#issuecomment-494980945","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42409","id":494980945,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NDk4MDk0NQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-05-22T21:29:43Z","updated_at":"2019-05-22T21:29:43Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/499587589","html_url":"https://github.com/elastic/elasticsearch/issues/42409#issuecomment-499587589","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42409","id":499587589,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5OTU4NzU4OQ==","user":{"login":"jakelandis","id":976291,"node_id":"MDQ6VXNlcjk3NjI5MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/976291?v=4","gravatar_id":"","url":"https://api.github.com/users/jakelandis","html_url":"https://github.com/jakelandis","followers_url":"https://api.github.com/users/jakelandis/followers","following_url":"https://api.github.com/users/jakelandis/following{/other_user}","gists_url":"https://api.github.com/users/jakelandis/gists{/gist_id}","starred_url":"https://api.github.com/users/jakelandis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakelandis/subscriptions","organizations_url":"https://api.github.com/users/jakelandis/orgs","repos_url":"https://api.github.com/users/jakelandis/repos","events_url":"https://api.github.com/users/jakelandis/events{/privacy}","received_events_url":"https://api.github.com/users/jakelandis/received_events","type":"User","site_admin":false},"created_at":"2019-06-06T17:18:18Z","updated_at":"2019-06-06T17:18:18Z","author_association":"CONTRIBUTOR","body":"All tests in SmokeTestWatcherWithSecurityIT failed. It is likely that all share the same root cause.\r\n\r\n```\r\nTest Result (6 failures / +6)\r\n    org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testSearchInputWithInsufficientPrivileges\r\n    org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testIndexActionHasPermissions\r\n    org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testIndexActionInsufficientPrivileges\r\n    org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testSearchTransformHasPermissions\r\n    org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testSearchTransformInsufficientPermissions\r\n    org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testSearchInputHasPermissions\r\n```\r\n\r\n<details>\r\n<summary>Relevant Failure with repro lines:</summary>\r\n<pre>\r\n10:45:18 org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT > testSearchInputWithInsufficientPrivileges FAILED\r\n10:45:18     org.elasticsearch.client.ResponseException: method [POST], host [http://[::1]:45978], URI [/.watcher-history-*/_search?rest_total_hits_as_int=true], status line [HTTP/1.1 503 Service Unavailable]\r\n10:45:18     {\"error\":{\"root_cause\":[],\"type\":\"search_phase_execution_exception\",\"reason\":\"all shards failed\",\"phase\":\"query\",\"grouped\":true,\"failed_shards\":[]},\"status\":503}\r\n10:45:18         at __randomizedtesting.SeedInfo.seed([3AF36076A4C37A27:959B3C83AD12D929]:0)\r\n10:45:18         at org.elasticsearch.client.RestClient.convertResponse(RestClient.java:253)\r\n10:45:18         at org.elasticsearch.client.RestClient.performRequest(RestClient.java:231)\r\n10:45:18         at org.elasticsearch.client.RestClient.performRequest(RestClient.java:205)\r\n10:45:18         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.lambda$getWatchHistoryEntry$4(SmokeTestWatcherWithSecurityIT.java:326)\r\n10:45:18         at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:850)\r\n10:45:18         at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:836)\r\n10:45:18         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.getWatchHistoryEntry(SmokeTestWatcherWithSecurityIT.java:306)\r\n10:45:18         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.getWatchHistoryEntry(SmokeTestWatcherWithSecurityIT.java:301)\r\n10:45:18         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testSearchInputWithInsufficientPrivileges(SmokeTestWatcherWithSecurityIT.java:182)\r\n10:45:29 REPRODUCE WITH: ./gradlew :x-pack:qa:smoke-test-watcher-with-security:integTestRunner --tests \"org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testSearchInputWithInsufficientPrivileges\" -Dtests.seed=3AF36076A4C37A27 -Dtests.security.manager=true -Dtests.locale=nl-BQ -Dtests.timezone=Asia/Bishkek -Dcompiler.java=12 -Druntime.java=11\r\n10:45:29 \r\n10:45:29 org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT > testIndexActionHasPermissions FAILED\r\n10:45:29     java.lang.AssertionError: \r\n10:45:29     Expected: is a value equal to or greater than <1>\r\n10:45:29          but: <0> was less than <1>\r\n10:45:29         at __randomizedtesting.SeedInfo.seed([3AF36076A4C37A27:1F46402E52F9591E]:0)\r\n10:45:29         at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)\r\n10:45:29         at org.junit.Assert.assertThat(Assert.java:956)\r\n10:45:29         at org.junit.Assert.assertThat(Assert.java:923)\r\n10:45:29         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.lambda$getWatchHistoryEntry$4(SmokeTestWatcherWithSecurityIT.java:329)\r\n10:45:29         at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:862)\r\n10:45:29         at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:836)\r\n10:45:29         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.getWatchHistoryEntry(SmokeTestWatcherWithSecurityIT.java:306)\r\n10:45:29         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testIndexActionHasPermissions(SmokeTestWatcherWithSecurityIT.java:259)\r\n10:45:40 REPRODUCE WITH: ./gradlew :x-pack:qa:smoke-test-watcher-with-security:integTestRunner --tests \"org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testIndexActionHasPermissions\" -Dtests.seed=3AF36076A4C37A27 -Dtests.security.manager=true -Dtests.locale=nl-BQ -Dtests.timezone=Asia/Bishkek -Dcompiler.java=12 -Druntime.java=11\r\n10:45:40 \r\n10:45:40 org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT > testIndexActionInsufficientPrivileges FAILED\r\n10:45:40     java.lang.AssertionError: \r\n10:45:40     Expected: is a value equal to or greater than <1>\r\n10:45:40          but: <0> was less than <1>\r\n10:45:40         at __randomizedtesting.SeedInfo.seed([3AF36076A4C37A27:204F346B78395B47]:0)\r\n10:45:40         at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)\r\n10:45:40         at org.junit.Assert.assertThat(Assert.java:956)\r\n10:45:40         at org.junit.Assert.assertThat(Assert.java:923)\r\n10:45:40         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.lambda$getWatchHistoryEntry$4(SmokeTestWatcherWithSecurityIT.java:329)\r\n10:45:40         at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:862)\r\n10:45:40         at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:836)\r\n10:45:40         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.getWatchHistoryEntry(SmokeTestWatcherWithSecurityIT.java:306)\r\n10:45:40         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testIndexActionInsufficientPrivileges(SmokeTestWatcherWithSecurityIT.java:282)\r\n10:45:51 REPRODUCE WITH: ./gradlew :x-pack:qa:smoke-test-watcher-with-security:integTestRunner --tests \"org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testIndexActionInsufficientPrivileges\" -Dtests.seed=3AF36076A4C37A27 -Dtests.security.manager=true -Dtests.locale=nl-BQ -Dtests.timezone=Asia/Bishkek -Dcompiler.java=12 -Druntime.java=11\r\n10:45:51 \r\n10:45:51 org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT > testSearchTransformHasPermissions FAILED\r\n10:45:51     java.lang.AssertionError: \r\n10:45:51     Expected: is a value equal to or greater than <1>\r\n10:45:51          but: <0> was less than <1>\r\n10:45:51         at __randomizedtesting.SeedInfo.seed([3AF36076A4C37A27:138387687DCC68CA]:0)\r\n10:45:51         at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)\r\n10:45:51         at org.junit.Assert.assertThat(Assert.java:956)\r\n10:45:51         at org.junit.Assert.assertThat(Assert.java:923)\r\n10:45:51         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.lambda$getWatchHistoryEntry$4(SmokeTestWatcherWithSecurityIT.java:329)\r\n10:45:51         at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:862)\r\n10:45:51         at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:836)\r\n10:45:51         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.getWatchHistoryEntry(SmokeTestWatcherWithSecurityIT.java:306)\r\n10:45:51         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testSearchTransformHasPermissions(SmokeTestWatcherWithSecurityIT.java:210)\r\n10:46:01 REPRODUCE WITH: ./gradlew :x-pack:qa:smoke-test-watcher-with-security:integTestRunner --tests \"org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testSearchTransformHasPermissions\" -Dtests.seed=3AF36076A4C37A27 -Dtests.security.manager=true -Dtests.locale=nl-BQ -Dtests.timezone=Asia/Bishkek -Dcompiler.java=12 -Druntime.java=11\r\n10:46:01 \r\n10:46:01 org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT > testSearchTransformInsufficientPermissions FAILED\r\n10:46:01     java.lang.AssertionError: \r\n10:46:01     Expected: is a value equal to or greater than <1>\r\n10:46:01          but: <0> was less than <1>\r\n10:46:01         at __randomizedtesting.SeedInfo.seed([3AF36076A4C37A27:A786648885C87DCA]:0)\r\n10:46:01         at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)\r\n10:46:01         at org.junit.Assert.assertThat(Assert.java:956)\r\n10:46:01         at org.junit.Assert.assertThat(Assert.java:923)\r\n10:46:01         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.lambda$getWatchHistoryEntry$4(SmokeTestWatcherWithSecurityIT.java:329)\r\n10:46:01         at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:862)\r\n10:46:01         at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:836)\r\n10:46:01         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.getWatchHistoryEntry(SmokeTestWatcherWithSecurityIT.java:306)\r\n10:46:01         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.getWatchHistoryEntry(SmokeTestWatcherWithSecurityIT.java:301)\r\n10:46:01         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testSearchTransformInsufficientPermissions(SmokeTestWatcherWithSecurityIT.java:239)\r\n10:46:12 REPRODUCE WITH: ./gradlew :x-pack:qa:smoke-test-watcher-with-security:integTestRunner --tests \"org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testSearchTransformInsufficientPermissions\" -Dtests.seed=3AF36076A4C37A27 -Dtests.security.manager=true -Dtests.locale=nl-BQ -Dtests.timezone=Asia/Bishkek -Dcompiler.java=12 -Druntime.java=11\r\n10:46:12 \r\n10:46:12 org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT > testSearchInputHasPermissions FAILED\r\n10:46:12     java.lang.AssertionError: \r\n10:46:12     Expected: is a value equal to or greater than <1>\r\n10:46:12          but: <0> was less than <1>\r\n10:46:12         at __randomizedtesting.SeedInfo.seed([3AF36076A4C37A27:4822DFE1A9577852]:0)\r\n10:46:12         at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)\r\n10:46:12         at org.junit.Assert.assertThat(Assert.java:956)\r\n10:46:12         at org.junit.Assert.assertThat(Assert.java:923)\r\n10:46:12         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.lambda$getWatchHistoryEntry$4(SmokeTestWatcherWithSecurityIT.java:329)\r\n10:46:12         at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:862)\r\n10:46:12         at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:836)\r\n10:46:12         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.getWatchHistoryEntry(SmokeTestWatcherWithSecurityIT.java:306)\r\n10:46:12         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testSearchInputHasPermissions(SmokeTestWatcherWithSecurityIT.java:158)\r\n10:46:12 REPRODUCE WITH: ./gradlew :x-pack:qa:smoke-test-watcher-with-security:integTestRunner --tests \"org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testSearchInputHasPermissions\" -Dtests.seed=3AF36076A4C37A27 -Dtests.security.manager=true -Dtests.locale=nl-BQ -Dtests.timezone=Asia/Bishkek -Dcompiler.java=12 -Druntime.java=11\r\n10:46:12 \r\n10:46:12 Suite: Test class org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT\r\n10:46:12   1> [2019-06-06T21:45:13,833][INFO ][o.e.s.SmokeTestWatcherWithSecurityIT] [testSearchInputWithInsufficientPrivileges] before test\r\n10:46:12   1> [2019-06-06T21:45:13,838][INFO ][o.e.s.SmokeTestWatcherWithSecurityIT] [testSearchInputWithInsufficientPrivileges] initializing REST clients against [http://[::1]:45978]\r\n10:46:12   1> [2019-06-06T21:45:18,712][INFO ][o.e.s.SmokeTestWatcherWithSecurityIT] [testSearchInputWithInsufficientPrivileges] There are still tasks running after this test that might break subsequent tests [indices:data/write/bulk, indices:data/write/bulk[s]].\r\n10:46:12   1> [2019-06-06T21:45:18,713][INFO ][o.e.s.SmokeTestWatcherWithSecurityIT] [testSearchInputWithInsufficientPrivileges] after test\r\n10:46:12   2> REPRODUCE WITH: ./gradlew :x-pack:qa:smoke-test-watcher-with-security:integTestRunner --tests \"org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testSearchInputWithInsufficientPrivileges\" -Dtests.seed=3AF36076A4C37A27 -Dtests.security.manager=true -Dtests.locale=nl-BQ -Dtests.timezone=Asia/Bishkek -Dcompiler.java=12 -Druntime.java=11\r\n10:46:12   2> org.elasticsearch.client.ResponseException: method [POST], host [http://[::1]:45978], URI [/.watcher-history-*/_search?rest_total_hits_as_int=true], status line [HTTP/1.1 503 Service Unavailable]\r\n10:46:12     {\"error\":{\"root_cause\":[],\"type\":\"search_phase_execution_exception\",\"reason\":\"all shards failed\",\"phase\":\"query\",\"grouped\":true,\"failed_shards\":[]},\"status\":503}\r\n10:46:12         at __randomizedtesting.SeedInfo.seed([3AF36076A4C37A27:959B3C83AD12D929]:0)\r\n10:46:12         at org.elasticsearch.client.RestClient.convertResponse(RestClient.java:253)\r\n10:46:12         at org.elasticsearch.client.RestClient.performRequest(RestClient.java:231)\r\n10:46:12         at org.elasticsearch.client.RestClient.performRequest(RestClient.java:205)\r\n10:46:12         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.lambda$getWatchHistoryEntry$4(SmokeTestWatcherWithSecurityIT.java:326)\r\n10:46:12         at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:850)\r\n10:46:12         at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:836)\r\n10:46:12         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.getWatchHistoryEntry(SmokeTestWatcherWithSecurityIT.java:306)\r\n10:46:12         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.getWatchHistoryEntry(SmokeTestWatcherWithSecurityIT.java:301)\r\n10:46:12         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testSearchInputWithInsufficientPrivileges(SmokeTestWatcherWithSecurityIT.java:182)\r\n10:46:12   1> [2019-06-06T21:45:18,748][INFO ][o.e.s.SmokeTestWatcherWithSecurityIT] [testIndexActionHasPermissions] before test\r\n10:46:12   1> [2019-06-06T21:45:29,504][INFO ][o.e.s.SmokeTestWatcherWithSecurityIT] [testIndexActionHasPermissions] There are still tasks running after this test that might break subsequent tests [indices:data/write/bulk, indices:data/write/bulk[s]].\r\n10:46:12   1> [2019-06-06T21:45:29,505][INFO ][o.e.s.SmokeTestWatcherWithSecurityIT] [testIndexActionHasPermissions] after test\r\n10:46:12   2> REPRODUCE WITH: ./gradlew :x-pack:qa:smoke-test-watcher-with-security:integTestRunner --tests \"org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testIndexActionHasPermissions\" -Dtests.seed=3AF36076A4C37A27 -Dtests.security.manager=true -Dtests.locale=nl-BQ -Dtests.timezone=Asia/Bishkek -Dcompiler.java=12 -Druntime.java=11\r\n10:46:12   2> java.lang.AssertionError: \r\n10:46:12     Expected: is a value equal to or greater than <1>\r\n10:46:12          but: <0> was less than <1>\r\n10:46:12         at __randomizedtesting.SeedInfo.seed([3AF36076A4C37A27:1F46402E52F9591E]:0)\r\n10:46:12         at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)\r\n10:46:12         at org.junit.Assert.assertThat(Assert.java:956)\r\n10:46:12         at org.junit.Assert.assertThat(Assert.java:923)\r\n10:46:12         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.lambda$getWatchHistoryEntry$4(SmokeTestWatcherWithSecurityIT.java:329)\r\n10:46:12         at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:862)\r\n10:46:12         at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:836)\r\n10:46:12         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.getWatchHistoryEntry(SmokeTestWatcherWithSecurityIT.java:306)\r\n10:46:12         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testIndexActionHasPermissions(SmokeTestWatcherWithSecurityIT.java:259)\r\n10:46:12   1> [2019-06-06T21:45:29,532][INFO ][o.e.s.SmokeTestWatcherWithSecurityIT] [testIndexActionInsufficientPrivileges] before test\r\n10:46:12   1> [2019-06-06T21:45:40,309][INFO ][o.e.s.SmokeTestWatcherWithSecurityIT] [testIndexActionInsufficientPrivileges] There are still tasks running after this test that might break subsequent tests [indices:data/write/bulk, indices:data/write/bulk[s]].\r\n10:46:12   1> [2019-06-06T21:45:40,310][INFO ][o.e.s.SmokeTestWatcherWithSecurityIT] [testIndexActionInsufficientPrivileges] after test\r\n10:46:12   2> REPRODUCE WITH: ./gradlew :x-pack:qa:smoke-test-watcher-with-security:integTestRunner --tests \"org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testIndexActionInsufficientPrivileges\" -Dtests.seed=3AF36076A4C37A27 -Dtests.security.manager=true -Dtests.locale=nl-BQ -Dtests.timezone=Asia/Bishkek -Dcompiler.java=12 -Druntime.java=11\r\n10:46:12   2> java.lang.AssertionError: \r\n10:46:12     Expected: is a value equal to or greater than <1>\r\n10:46:12          but: <0> was less than <1>\r\n10:46:12         at __randomizedtesting.SeedInfo.seed([3AF36076A4C37A27:204F346B78395B47]:0)\r\n10:46:12         at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)\r\n10:46:12         at org.junit.Assert.assertThat(Assert.java:956)\r\n10:46:12         at org.junit.Assert.assertThat(Assert.java:923)\r\n10:46:12         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.lambda$getWatchHistoryEntry$4(SmokeTestWatcherWithSecurityIT.java:329)\r\n10:46:12         at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:862)\r\n10:46:12         at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:836)\r\n10:46:12         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.getWatchHistoryEntry(SmokeTestWatcherWithSecurityIT.java:306)\r\n10:46:12         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testIndexActionInsufficientPrivileges(SmokeTestWatcherWithSecurityIT.java:282)\r\n10:46:12   1> [2019-06-06T21:45:40,331][INFO ][o.e.s.SmokeTestWatcherWithSecurityIT] [testSearchTransformHasPermissions] before test\r\n10:46:12   1> [2019-06-06T21:45:51,016][INFO ][o.e.s.SmokeTestWatcherWithSecurityIT] [testSearchTransformHasPermissions] There are still tasks running after this test that might break subsequent tests [indices:data/write/bulk, indices:data/write/bulk[s]].\r\n10:46:12   1> [2019-06-06T21:45:51,017][INFO ][o.e.s.SmokeTestWatcherWithSecurityIT] [testSearchTransformHasPermissions] after test\r\n10:46:12   2> REPRODUCE WITH: ./gradlew :x-pack:qa:smoke-test-watcher-with-security:integTestRunner --tests \"org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testSearchTransformHasPermissions\" -Dtests.seed=3AF36076A4C37A27 -Dtests.security.manager=true -Dtests.locale=nl-BQ -Dtests.timezone=Asia/Bishkek -Dcompiler.java=12 -Druntime.java=11\r\n10:46:12   2> java.lang.AssertionError: \r\n10:46:12     Expected: is a value equal to or greater than <1>\r\n10:46:12          but: <0> was less than <1>\r\n10:46:12         at __randomizedtesting.SeedInfo.seed([3AF36076A4C37A27:138387687DCC68CA]:0)\r\n10:46:12         at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)\r\n10:46:12         at org.junit.Assert.assertThat(Assert.java:956)\r\n10:46:12         at org.junit.Assert.assertThat(Assert.java:923)\r\n10:46:12         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.lambda$getWatchHistoryEntry$4(SmokeTestWatcherWithSecurityIT.java:329)\r\n10:46:12         at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:862)\r\n10:46:12         at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:836)\r\n10:46:12         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.getWatchHistoryEntry(SmokeTestWatcherWithSecurityIT.java:306)\r\n10:46:12         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testSearchTransformHasPermissions(SmokeTestWatcherWithSecurityIT.java:210)\r\n10:46:12   1> [2019-06-06T21:45:51,041][INFO ][o.e.s.SmokeTestWatcherWithSecurityIT] [testSearchTransformInsufficientPermissions] before test\r\n10:46:12   1> [2019-06-06T21:46:01,747][INFO ][o.e.s.SmokeTestWatcherWithSecurityIT] [testSearchTransformInsufficientPermissions] There are still tasks running after this test that might break subsequent tests [indices:data/write/bulk, indices:data/write/bulk[s]].\r\n10:46:12   1> [2019-06-06T21:46:01,747][INFO ][o.e.s.SmokeTestWatcherWithSecurityIT] [testSearchTransformInsufficientPermissions] after test\r\n10:46:12   2> REPRODUCE WITH: ./gradlew :x-pack:qa:smoke-test-watcher-with-security:integTestRunner --tests \"org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testSearchTransformInsufficientPermissions\" -Dtests.seed=3AF36076A4C37A27 -Dtests.security.manager=true -Dtests.locale=nl-BQ -Dtests.timezone=Asia/Bishkek -Dcompiler.java=12 -Druntime.java=11\r\n10:46:12   2> java.lang.AssertionError: \r\n10:46:12     Expected: is a value equal to or greater than <1>\r\n10:46:12          but: <0> was less than <1>\r\n10:46:12         at __randomizedtesting.SeedInfo.seed([3AF36076A4C37A27:A786648885C87DCA]:0)\r\n10:46:12         at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)\r\n10:46:12         at org.junit.Assert.assertThat(Assert.java:956)\r\n10:46:12         at org.junit.Assert.assertThat(Assert.java:923)\r\n10:46:12         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.lambda$getWatchHistoryEntry$4(SmokeTestWatcherWithSecurityIT.java:329)\r\n10:46:12         at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:862)\r\n10:46:12         at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:836)\r\n10:46:12         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.getWatchHistoryEntry(SmokeTestWatcherWithSecurityIT.java:306)\r\n10:46:12         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.getWatchHistoryEntry(SmokeTestWatcherWithSecurityIT.java:301)\r\n10:46:12         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testSearchTransformInsufficientPermissions(SmokeTestWatcherWithSecurityIT.java:239)\r\n10:46:12   1> [2019-06-06T21:46:01,768][INFO ][o.e.s.SmokeTestWatcherWithSecurityIT] [testSearchInputHasPermissions] before test\r\n10:46:12   1> [2019-06-06T21:46:12,464][INFO ][o.e.s.SmokeTestWatcherWithSecurityIT] [testSearchInputHasPermissions] There are still tasks running after this test that might break subsequent tests [indices:data/write/bulk, indices:data/write/bulk[s]].\r\n10:46:12   1> [2019-06-06T21:46:12,465][INFO ][o.e.s.SmokeTestWatcherWithSecurityIT] [testSearchInputHasPermissions] after test\r\n10:46:12   2> REPRODUCE WITH: ./gradlew :x-pack:qa:smoke-test-watcher-with-security:integTestRunner --tests \"org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testSearchInputHasPermissions\" -Dtests.seed=3AF36076A4C37A27 -Dtests.security.manager=true -Dtests.locale=nl-BQ -Dtests.timezone=Asia/Bishkek -Dcompiler.java=12 -Druntime.java=11\r\n10:46:12   2> java.lang.AssertionError: \r\n10:46:12     Expected: is a value equal to or greater than <1>\r\n10:46:12          but: <0> was less than <1>\r\n10:46:12         at __randomizedtesting.SeedInfo.seed([3AF36076A4C37A27:4822DFE1A9577852]:0)\r\n10:46:12         at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)\r\n10:46:12         at org.junit.Assert.assertThat(Assert.java:956)\r\n10:46:12         at org.junit.Assert.assertThat(Assert.java:923)\r\n10:46:12         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.lambda$getWatchHistoryEntry$4(SmokeTestWatcherWithSecurityIT.java:329)\r\n10:46:12         at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:862)\r\n10:46:12         at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:836)\r\n10:46:12         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.getWatchHistoryEntry(SmokeTestWatcherWithSecurityIT.java:306)\r\n10:46:12         at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testSearchInputHasPermissions(SmokeTestWatcherWithSecurityIT.java:158)\r\n10:46:12   2> NOTE: leaving temporary files on disk at: /var/lib/jenkins/workspace/elastic+elasticsearch+master+intake/x-pack/qa/smoke-test-watcher-with-security/build/testrun/integTestRunner/temp/org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT_3AF36076A4C37A27-001\r\n10:46:12   2> NOTE: test params are: codec=Lucene80, sim=Asserting(org.apache.lucene.search.similarities.AssertingSimilarity@53309619), locale=nl-BQ, timezone=Asia/Bishkek\r\n10:46:12   2> NOTE: Linux 3.10.0-957.12.2.el7.x86_64 amd64/Oracle Corporation 11.0.3 (64-bit)/cpus=16,threads=1,free=426557952,total=536870912\r\n10:46:12   2> NOTE: All tests run in this JVM: [SmokeTestWatcherWithSecurityClientYamlTestSuiteIT, SmokeTestWatcherWithSecurityIT]\r\n10:46:12 \r\n10:46:12 66 tests completed, 6 failed\r\n10:46:12 \r\n10:46:12 Tests with failures:\r\n10:46:12  - org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testSearchInputWithInsufficientPrivileges\r\n10:46:12  - org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testIndexActionHasPermissions\r\n10:46:12  - org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testIndexActionInsufficientPrivileges\r\n10:46:12  - org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testSearchTransformHasPermissions\r\n10:46:12  - org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testSearchTransformInsufficientPermissions\r\n10:46:12  - org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testSearchInputHasPermissions\r\n</pre>\r\n</details>\r\n\r\nJenkins build: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+intake/37\r\nGradle build: https://scans.gradle.com/s/ab6f6mtnx5wvq\r\nLogs: https://storage.cloud.google.com/elasticsearch-ci-artifacts/jobs/elastic+elasticsearch+master+intake/37/log-files.tar.gz\r\nRelevant logs: [relevant_logs.tar.gz](https://github.com/elastic/elasticsearch/files/3262721/relevant_logs.tar.gz)\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/500867502","html_url":"https://github.com/elastic/elasticsearch/issues/42409#issuecomment-500867502","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42409","id":500867502,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDg2NzUwMg==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2019-06-11T14:29:22Z","updated_at":"2019-06-11T14:29:22Z","author_association":"CONTRIBUTOR","body":"In https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+intake/110/console just one test failed, but it's the same as one of the failures in https://github.com/elastic/elasticsearch/issues/42409#issuecomment-499587589 and failed with the exact same reason as the first failure in https://github.com/elastic/elasticsearch/issues/42409#issuecomment-499587589.\r\n\r\nThe failure is:\r\n\r\n```\r\norg.elasticsearch.client.ResponseException: method [POST], host [http://[::1]:43041], URI [/.watcher-history-*/_search?rest_total_hits_as_int=true], status line [HTTP/1.1 503 Service Unavailable]\r\n{\"error\":{\"root_cause\":[],\"type\":\"search_phase_execution_exception\",\"reason\":\"all shards failed\",\"phase\":\"query\",\"grouped\":true,\"failed_shards\":[]},\"status\":503}\r\n\tat __randomizedtesting.SeedInfo.seed([73CA3AF4F90C540D:69766EE925F6756D]:0)\r\n\tat org.elasticsearch.client.RestClient.convertResponse(RestClient.java:253)\r\n\tat org.elasticsearch.client.RestClient.performRequest(RestClient.java:231)\r\n\tat org.elasticsearch.client.RestClient.performRequest(RestClient.java:205)\r\n\tat org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.lambda$getWatchHistoryEntry$4(SmokeTestWatcherWithSecurityIT.java:326)\r\n\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:850)\r\n\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:836)\r\n\tat org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.getWatchHistoryEntry(SmokeTestWatcherWithSecurityIT.java:306)\r\n\tat org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testIndexActionInsufficientPrivileges(SmokeTestWatcherWithSecurityIT.java:282)\r\n```\r\n\r\nAt the time this happened the corresponding error in the server side log was:\r\n\r\n```\r\n[2019-06-11T13:59:08,130][INFO ][o.e.c.m.MetaDataCreateIndexService] [node-0] [my_test_index] creating index, cause [auto(bulk api)], templates [], shards [1]/[1], mappings []\r\n[2019-06-11T13:59:08,593][INFO ][o.e.c.m.MetaDataMappingService] [node-0] [my_test_index/MWObuPVBTcC-nxbj8SRzUQ] create_mapping [_doc]\r\n[2019-06-11T13:59:08,837][INFO ][o.e.c.m.MetaDataCreateIndexService] [node-0] [index_not_allowed_to_read] creating index, cause [auto(bulk api)], templates [], shards [1]/[1], mappings []\r\n[2019-06-11T13:59:08,981][INFO ][o.e.c.m.MetaDataMappingService] [node-0] [index_not_allowed_to_read/t8g7ay5HTrGHyDj0TAgzAg] create_mapping [_doc]\r\n[2019-06-11T13:59:09,232][INFO ][o.e.c.m.MetaDataCreateIndexService] [node-0] [.watches] creating index, cause [auto(bulk api)], templates [.watches], shards [1]/[0], mappings [_doc]\r\n[2019-06-11T13:59:09,370][INFO ][o.e.x.w.WatcherService   ] [node-0] reloading watcher, reason [new local watcher shard allocation ids], cancelled [0] queued tasks\r\n[2019-06-11T13:59:09,392][DEBUG][o.e.x.w.WatcherIndexingListener] [node-0] adding watch [FbxatmpquAmnjMGcegxg] to trigger service\r\n[2019-06-11T13:59:09,473][DEBUG][o.e.x.w.WatcherService   ] [node-0] watch service has been reloaded, reason [new local watcher shard allocation ids]\r\n[2019-06-11T13:59:10,502][DEBUG][o.e.x.w.t.s.e.TickerScheduleTriggerEngine] [node-0] triggered job [FbxatmpquAmnjMGcegxg] at [2019-06-11T13:59:10.502Z] (scheduled time was [2019-06-11T13:59:10.394Z])\r\n[2019-06-11T13:59:10,572][INFO ][o.e.c.m.MetaDataCreateIndexService] [node-0] [.triggered_watches] creating index, cause [auto(bulk api)], templates [.triggered_watches], shards [1]/[1], mappings [_doc]\r\n[2019-06-11T13:59:10,576][INFO ][o.e.c.r.a.AllocationService] [node-0] updating number_of_replicas to [0] for indices [.triggered_watches]\r\n[2019-06-11T13:59:11,560][DEBUG][o.e.x.w.t.s.e.TickerScheduleTriggerEngine] [node-0] triggered job [FbxatmpquAmnjMGcegxg] at [2019-06-11T13:59:11.560Z] (scheduled time was [2019-06-11T13:59:11.394Z])\r\n[2019-06-11T13:59:11,607][DEBUG][o.e.x.w.e.ExecutionService] [node-0] executing watch [FbxatmpquAmnjMGcegxg]\r\n[2019-06-11T13:59:11,643][INFO ][o.e.c.m.MetaDataCreateIndexService] [node-0] [.watcher-history-9-2019.06.11] creating index, cause [auto(bulk api)], templates [.watch-history-no-ilm-9], shards [1]/[0], mappings [doc]\r\n[2019-06-11T13:59:11,630][ERROR][o.e.x.w.a.i.IndexActionFactory] [node-0] failed to execute action [FbxatmpquAmnjMGcegxg/index]\r\norg.elasticsearch.ElasticsearchSecurityException: action [indices:data/write/bulk[s]] is unauthorized for user [watcher_manager]\r\n...\r\n...very long stack trace...\r\n...\r\n[2019-06-11T13:59:11,703][DEBUG][o.e.x.w.WatcherIndexingListener] [node-0] adding watch [FbxatmpquAmnjMGcegxg] to trigger service\r\n[2019-06-11T13:59:11,735][DEBUG][o.e.a.s.TransportSearchAction] [node-0] All shards failed for phase: [query]\r\n[2019-06-11T13:59:11,737][WARN ][r.suppressed             ] [node-0] path: /.watcher-history-*/_search, params: {rest_total_hits_as_int=true, index=.watcher-history-*}\r\norg.elasticsearch.action.search.SearchPhaseExecutionException: all shards failed\r\n    at org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseFailure(AbstractSearchAsyncAction.java:296) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n    at org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:139) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n    at org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseDone(AbstractSearchAsyncAction.java:259) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n    at org.elasticsearch.action.search.InitialSearchPhase.onShardFailure(InitialSearchPhase.java:105) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n    at org.elasticsearch.action.search.InitialSearchPhase$2.onFailure(InitialSearchPhase.java:273) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n    at org.elasticsearch.action.search.SearchExecutionStatsCollector.onFailure(SearchExecutionStatsCollector.java:73) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n    at org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:59) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n    at org.elasticsearch.action.search.SearchTransportService$ConnectionCountingHandler.handleException(SearchTransportService.java:441) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n    at org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1101) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n    at org.elasticsearch.transport.TransportService$DirectResponseChannel.processException(TransportService.java:1213) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n    at org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:1187) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n    at org.elasticsearch.transport.TaskTransportChannel.sendResponse(TaskTransportChannel.java:60) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n    at org.elasticsearch.action.support.ChannelActionListener.onFailure(ChannelActionListener.java:56) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n    at org.elasticsearch.action.ActionListener$1.onFailure(ActionListener.java:70) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n    at org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:64) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n    at org.elasticsearch.search.SearchService$2.doRun(SearchService.java:1052) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n    at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n    at org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:44) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n    at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:757) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n    at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]\r\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]\r\n    at java.lang.Thread.run(Thread.java:834) [?:?]\r\n[2019-06-11T13:59:11,802][INFO ][o.e.x.w.WatcherService   ] [node-0] stopping watch service, reason [watcher manually marked to shutdown by cluster state update]\r\n[2019-06-11T13:59:11,856][INFO ][o.e.c.m.MetaDataDeleteIndexService] [node-0] [my_test_index/MWObuPVBTcC-nxbj8SRzUQ] deleting index\r\n[2019-06-11T13:59:11,987][INFO ][o.e.c.m.MetaDataMappingService] [node-0] [.watcher-history-9-2019.06.11/uLPXpq2YSmadsCt7RdBAoQ] update_mapping [doc]\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/506665687","html_url":"https://github.com/elastic/elasticsearch/issues/42409#issuecomment-506665687","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42409","id":506665687,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNjY2NTY4Nw==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-06-28T09:16:48Z","updated_at":"2019-06-28T09:16:48Z","author_association":"CONTRIBUTOR","body":"I'we been working on running the build with more parallelism enabled which has unfortunately caused more (I believe) timing related failures such as this one: https://scans.gradle.com/s/m44sa6oyftyue/tests/6ej7h6toy4af6-6g5rmtb4agtbo ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/506757894","html_url":"https://github.com/elastic/elasticsearch/issues/42409#issuecomment-506757894","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42409","id":506757894,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNjc1Nzg5NA==","user":{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false},"created_at":"2019-06-28T14:38:22Z","updated_at":"2019-06-28T14:38:22Z","author_association":"CONTRIBUTOR","body":"more failures:\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob-unix-compatibility/os=oraclelinux-6/95/consoleFull","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/506911084","html_url":"https://github.com/elastic/elasticsearch/issues/42409#issuecomment-506911084","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42409","id":506911084,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNjkxMTA4NA==","user":{"login":"jakelandis","id":976291,"node_id":"MDQ6VXNlcjk3NjI5MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/976291?v=4","gravatar_id":"","url":"https://api.github.com/users/jakelandis","html_url":"https://github.com/jakelandis","followers_url":"https://api.github.com/users/jakelandis/followers","following_url":"https://api.github.com/users/jakelandis/following{/other_user}","gists_url":"https://api.github.com/users/jakelandis/gists{/gist_id}","starred_url":"https://api.github.com/users/jakelandis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakelandis/subscriptions","organizations_url":"https://api.github.com/users/jakelandis/orgs","repos_url":"https://api.github.com/users/jakelandis/repos","events_url":"https://api.github.com/users/jakelandis/events{/privacy}","received_events_url":"https://api.github.com/users/jakelandis/received_events","type":"User","site_admin":false},"created_at":"2019-06-29T00:24:08Z","updated_at":"2019-06-29T00:24:08Z","author_association":"CONTRIBUTOR","body":"I spent some time today looking at these failures on the CI nodes with @atorok pending parallelism. I can see the box is working extremely hard and things are slower, but still could not find any relationship between load and these tests. I did find one issue : https://github.com/elastic/elasticsearch/pull/43781 which I think will help with the majority of the problems for SmokeTestWatcherWithSecurityIT (non yaml tests). ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/507888761","html_url":"https://github.com/elastic/elasticsearch/issues/42409#issuecomment-507888761","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42409","id":507888761,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNzg4ODc2MQ==","user":{"login":"jakelandis","id":976291,"node_id":"MDQ6VXNlcjk3NjI5MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/976291?v=4","gravatar_id":"","url":"https://api.github.com/users/jakelandis","html_url":"https://github.com/jakelandis","followers_url":"https://api.github.com/users/jakelandis/followers","following_url":"https://api.github.com/users/jakelandis/following{/other_user}","gists_url":"https://api.github.com/users/jakelandis/gists{/gist_id}","starred_url":"https://api.github.com/users/jakelandis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakelandis/subscriptions","organizations_url":"https://api.github.com/users/jakelandis/orgs","repos_url":"https://api.github.com/users/jakelandis/repos","events_url":"https://api.github.com/users/jakelandis/events{/privacy}","received_events_url":"https://api.github.com/users/jakelandis/received_events","type":"User","site_admin":false},"created_at":"2019-07-03T00:10:04Z","updated_at":"2019-07-03T00:10:04Z","author_association":"CONTRIBUTOR","body":"I'm also hopeful that https://github.com/elastic/elasticsearch/pull/43888 will address the issue noted in https://scans.gradle.com/s/m44sa6oyftyue/tests/6ej7h6toy4af6-6g5rmtb4agtbo it may also be the cause for other non-reproducible failures too. \r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/514143680","html_url":"https://github.com/elastic/elasticsearch/issues/42409#issuecomment-514143680","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42409","id":514143680,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDE0MzY4MA==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2019-07-23T10:03:22Z","updated_at":"2019-07-23T10:04:38Z","author_association":"CONTRIBUTOR","body":"Adding this here instead of opening a new issue: \r\nI got https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.8+bwc-tests/185/console with testWatchCrudApis and testWatcherStats failing from WatchBackwardsCompatibilityIT. Both have been failing quite often \r\nhttps://build-stats.elastic.co/app/kibana#/discover?_g=(refreshInterval:(pause:!t,value:0),time:(from:now-30d,mode:quick,to:now))&_a=(columns:!(_source),index:e58bf320-7efd-11e8-bf69-63c8ef516157,interval:auto,query:(language:lucene,query:'testWatchCrudApis%20OR%20testWatcherStats'),sort:!(time,desc)) and usually at the same runs in 6.8. Maybe we missed backporting one of the fixes above to 6.8 ? \r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/514635786","html_url":"https://github.com/elastic/elasticsearch/issues/42409#issuecomment-514635786","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42409","id":514635786,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDYzNTc4Ng==","user":{"login":"dimitris-athanasiou","id":9351617,"node_id":"MDQ6VXNlcjkzNTE2MTc=","avatar_url":"https://avatars3.githubusercontent.com/u/9351617?v=4","gravatar_id":"","url":"https://api.github.com/users/dimitris-athanasiou","html_url":"https://github.com/dimitris-athanasiou","followers_url":"https://api.github.com/users/dimitris-athanasiou/followers","following_url":"https://api.github.com/users/dimitris-athanasiou/following{/other_user}","gists_url":"https://api.github.com/users/dimitris-athanasiou/gists{/gist_id}","starred_url":"https://api.github.com/users/dimitris-athanasiou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dimitris-athanasiou/subscriptions","organizations_url":"https://api.github.com/users/dimitris-athanasiou/orgs","repos_url":"https://api.github.com/users/dimitris-athanasiou/repos","events_url":"https://api.github.com/users/dimitris-athanasiou/events{/privacy}","received_events_url":"https://api.github.com/users/dimitris-athanasiou/received_events","type":"User","site_admin":false},"created_at":"2019-07-24T13:38:23Z","updated_at":"2019-07-24T13:38:23Z","author_association":"CONTRIBUTOR","body":"I also got `testWatchCrudApis` failure like Giannis mentioned above in `6.8`. I raised https://github.com/elastic/elasticsearch/issues/44814. Feel free to close if you prefer tracking it just here.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/515608075","html_url":"https://github.com/elastic/elasticsearch/issues/42409#issuecomment-515608075","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42409","id":515608075,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTYwODA3NQ==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2019-07-26T21:42:27Z","updated_at":"2019-07-26T21:42:27Z","author_association":"CONTRIBUTOR","body":"Some more:\r\nhttps://scans.gradle.com/s/2mvg5zzkvrscw/console-log","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/516462350","html_url":"https://github.com/elastic/elasticsearch/issues/42409#issuecomment-516462350","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42409","id":516462350,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjQ2MjM1MA==","user":{"login":"davidkyle","id":2353640,"node_id":"MDQ6VXNlcjIzNTM2NDA=","avatar_url":"https://avatars1.githubusercontent.com/u/2353640?v=4","gravatar_id":"","url":"https://api.github.com/users/davidkyle","html_url":"https://github.com/davidkyle","followers_url":"https://api.github.com/users/davidkyle/followers","following_url":"https://api.github.com/users/davidkyle/following{/other_user}","gists_url":"https://api.github.com/users/davidkyle/gists{/gist_id}","starred_url":"https://api.github.com/users/davidkyle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidkyle/subscriptions","organizations_url":"https://api.github.com/users/davidkyle/orgs","repos_url":"https://api.github.com/users/davidkyle/repos","events_url":"https://api.github.com/users/davidkyle/events{/privacy}","received_events_url":"https://api.github.com/users/davidkyle/received_events","type":"User","site_admin":false},"created_at":"2019-07-30T15:09:42Z","updated_at":"2019-07-30T15:09:42Z","author_association":"MEMBER","body":"I added #43988 (WatcherRestIT failure) to the top comment ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/539181833","html_url":"https://github.com/elastic/elasticsearch/issues/42409#issuecomment-539181833","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42409","id":539181833,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTE4MTgzMw==","user":{"login":"jakelandis","id":976291,"node_id":"MDQ6VXNlcjk3NjI5MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/976291?v=4","gravatar_id":"","url":"https://api.github.com/users/jakelandis","html_url":"https://github.com/jakelandis","followers_url":"https://api.github.com/users/jakelandis/followers","following_url":"https://api.github.com/users/jakelandis/following{/other_user}","gists_url":"https://api.github.com/users/jakelandis/gists{/gist_id}","starred_url":"https://api.github.com/users/jakelandis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakelandis/subscriptions","organizations_url":"https://api.github.com/users/jakelandis/orgs","repos_url":"https://api.github.com/users/jakelandis/repos","events_url":"https://api.github.com/users/jakelandis/events{/privacy}","received_events_url":"https://api.github.com/users/jakelandis/received_events","type":"User","site_admin":false},"created_at":"2019-10-07T20:07:25Z","updated_at":"2019-10-07T20:07:25Z","author_association":"CONTRIBUTOR","body":"Closing this issue out since I believe that this meta issue is causing more noise then value and has outlived it's usefulness. We can address the test failures one by one. ","performed_via_github_app":null}]