[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66615541","html_url":"https://github.com/elastic/elasticsearch/issues/8881#issuecomment-66615541","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8881","id":66615541,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NjE1NTQx","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-12-11T13:01:11Z","updated_at":"2014-12-11T13:01:11Z","author_association":"CONTRIBUTOR","body":"Hi @bluelu \n\nIt would be useful to see what is in the heap dump, so that we can see what needs limiting.  Could you have a look, or put the heapdump somewhere that we can take a look?\n\nthanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66795900","html_url":"https://github.com/elastic/elasticsearch/issues/8881#issuecomment-66795900","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8881","id":66795900,"node_id":"MDEyOklzc3VlQ29tbWVudDY2Nzk1OTAw","user":{"login":"miccon","id":455015,"node_id":"MDQ6VXNlcjQ1NTAxNQ==","avatar_url":"https://avatars3.githubusercontent.com/u/455015?v=4","gravatar_id":"","url":"https://api.github.com/users/miccon","html_url":"https://github.com/miccon","followers_url":"https://api.github.com/users/miccon/followers","following_url":"https://api.github.com/users/miccon/following{/other_user}","gists_url":"https://api.github.com/users/miccon/gists{/gist_id}","starred_url":"https://api.github.com/users/miccon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/miccon/subscriptions","organizations_url":"https://api.github.com/users/miccon/orgs","repos_url":"https://api.github.com/users/miccon/repos","events_url":"https://api.github.com/users/miccon/events{/privacy}","received_events_url":"https://api.github.com/users/miccon/received_events","type":"User","site_admin":false},"created_at":"2014-12-12T16:26:23Z","updated_at":"2014-12-12T16:26:23Z","author_association":"NONE","body":"@clintongormley Thanks for looking into this.\nI parsed the heapdump, although as I don't know exactly what to look for so I'm not sure how much it helps, but anyway here is what I found out so far:\n\nTotal heap is 10GB.\nTransportService.clientHandlers -> 9.8GB retained heap\n\n73228 TransportService.RequestHolder\n-- 70935 TransportBroadcastOperationAction$AsyncBroadcastAction$2\n-- 1459 PublishClusterStateAction$1\n-- 833 TransportService$TimeoutHandler\n-- 662 DiscoveryNode\n...\n\nPosting the heapdump here is somewhat difficult as its 10GB and I would have to check what private information might be in there. If you tell me some classes to look for, or what instances to copy over, I would be happy to post more information here.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66996441","html_url":"https://github.com/elastic/elasticsearch/issues/8881#issuecomment-66996441","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8881","id":66996441,"node_id":"MDEyOklzc3VlQ29tbWVudDY2OTk2NDQx","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2014-12-15T13:53:11Z","updated_at":"2014-12-15T13:53:11Z","author_association":"MEMBER","body":"@miccon these are a lot of pending requests. In your heap dump, can you sample a couple of the `TransportBroadcastOperationAction$AsyncBroadcastAction$2` objects and get the value of `TransportBroadcastOperationAction.transportShardAction` field? this will tell us what request it is.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/67003650","html_url":"https://github.com/elastic/elasticsearch/issues/8881#issuecomment-67003650","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8881","id":67003650,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDAzNjUw","user":{"login":"miccon","id":455015,"node_id":"MDQ6VXNlcjQ1NTAxNQ==","avatar_url":"https://avatars3.githubusercontent.com/u/455015?v=4","gravatar_id":"","url":"https://api.github.com/users/miccon","html_url":"https://github.com/miccon","followers_url":"https://api.github.com/users/miccon/followers","following_url":"https://api.github.com/users/miccon/following{/other_user}","gists_url":"https://api.github.com/users/miccon/gists{/gist_id}","starred_url":"https://api.github.com/users/miccon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/miccon/subscriptions","organizations_url":"https://api.github.com/users/miccon/orgs","repos_url":"https://api.github.com/users/miccon/repos","events_url":"https://api.github.com/users/miccon/events{/privacy}","received_events_url":"https://api.github.com/users/miccon/received_events","type":"User","site_admin":false},"created_at":"2014-12-15T14:46:37Z","updated_at":"2014-12-15T14:46:37Z","author_association":"NONE","body":"Running\n\n```\nSELECT toString(b.this$1.this$0.transportShardAction) FROM org.elasticsearch.action.support.broadcast.TransportBroadcastOperationAction$AsyncBroadcastAction$2 b\n```\n\ngives:\n\n```\n71533 indices:monitor/stats[s]\nTotal: 71,533 entries\n```\n\nSo all the hanging requests seem to be the same.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/67006601","html_url":"https://github.com/elastic/elasticsearch/issues/8881#issuecomment-67006601","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8881","id":67006601,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDA2NjAx","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2014-12-15T15:05:36Z","updated_at":"2014-12-15T15:05:36Z","author_association":"MEMBER","body":"those are all Indices Stats request then. So the question because why you have so many in flight. They presumably take too long to complete, but 71K of them is a high number. Can you explain that from your perspective? do you have anything that keeps hitting the cluster without waiting for the previous response to complete?  Also, you shouldn't make any such request through the master. Just leave it be to be a master :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76510811","html_url":"https://github.com/elastic/elasticsearch/issues/8881#issuecomment-76510811","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8881","id":76510811,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTEwODEx","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-02-28T04:59:03Z","updated_at":"2015-02-28T04:59:03Z","author_association":"CONTRIBUTOR","body":"@miccon any more news here?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76678158","html_url":"https://github.com/elastic/elasticsearch/issues/8881#issuecomment-76678158","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8881","id":76678158,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Njc4MTU4","user":{"login":"miccon","id":455015,"node_id":"MDQ6VXNlcjQ1NTAxNQ==","avatar_url":"https://avatars3.githubusercontent.com/u/455015?v=4","gravatar_id":"","url":"https://api.github.com/users/miccon","html_url":"https://github.com/miccon","followers_url":"https://api.github.com/users/miccon/followers","following_url":"https://api.github.com/users/miccon/following{/other_user}","gists_url":"https://api.github.com/users/miccon/gists{/gist_id}","starred_url":"https://api.github.com/users/miccon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/miccon/subscriptions","organizations_url":"https://api.github.com/users/miccon/orgs","repos_url":"https://api.github.com/users/miccon/repos","events_url":"https://api.github.com/users/miccon/events{/privacy}","received_events_url":"https://api.github.com/users/miccon/received_events","type":"User","site_admin":false},"created_at":"2015-03-02T09:05:46Z","updated_at":"2015-03-02T09:05:46Z","author_association":"NONE","body":"@clintongormley no news to report here. The issue did not reappear on our cluster.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76686590","html_url":"https://github.com/elastic/elasticsearch/issues/8881#issuecomment-76686590","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8881","id":76686590,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Njg2NTkw","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-03-02T10:11:35Z","updated_at":"2015-03-02T10:11:35Z","author_association":"CONTRIBUTOR","body":"thanks @miccon - I'll close this issue for now then\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/566400246","html_url":"https://github.com/elastic/elasticsearch/issues/8881#issuecomment-566400246","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8881","id":566400246,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjQwMDI0Ng==","user":{"login":"njustyq","id":34452367,"node_id":"MDQ6VXNlcjM0NDUyMzY3","avatar_url":"https://avatars2.githubusercontent.com/u/34452367?v=4","gravatar_id":"","url":"https://api.github.com/users/njustyq","html_url":"https://github.com/njustyq","followers_url":"https://api.github.com/users/njustyq/followers","following_url":"https://api.github.com/users/njustyq/following{/other_user}","gists_url":"https://api.github.com/users/njustyq/gists{/gist_id}","starred_url":"https://api.github.com/users/njustyq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/njustyq/subscriptions","organizations_url":"https://api.github.com/users/njustyq/orgs","repos_url":"https://api.github.com/users/njustyq/repos","events_url":"https://api.github.com/users/njustyq/events{/privacy}","received_events_url":"https://api.github.com/users/njustyq/received_events","type":"User","site_admin":false},"created_at":"2019-12-17T06:23:27Z","updated_at":"2019-12-17T06:23:27Z","author_association":"NONE","body":"@clintongormley @bleskes @miccon would you please check it out for me? \r\n#50241","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/566434261","html_url":"https://github.com/elastic/elasticsearch/issues/8881#issuecomment-566434261","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8881","id":566434261,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjQzNDI2MQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2019-12-17T08:19:43Z","updated_at":"2019-12-17T08:19:43Z","author_association":"CONTRIBUTOR","body":"@njustyq don't ping people like that - it is rude","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/566527700","html_url":"https://github.com/elastic/elasticsearch/issues/8881#issuecomment-566527700","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8881","id":566527700,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjUyNzcwMA==","user":{"login":"njustyq","id":34452367,"node_id":"MDQ6VXNlcjM0NDUyMzY3","avatar_url":"https://avatars2.githubusercontent.com/u/34452367?v=4","gravatar_id":"","url":"https://api.github.com/users/njustyq","html_url":"https://github.com/njustyq","followers_url":"https://api.github.com/users/njustyq/followers","following_url":"https://api.github.com/users/njustyq/following{/other_user}","gists_url":"https://api.github.com/users/njustyq/gists{/gist_id}","starred_url":"https://api.github.com/users/njustyq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/njustyq/subscriptions","organizations_url":"https://api.github.com/users/njustyq/orgs","repos_url":"https://api.github.com/users/njustyq/repos","events_url":"https://api.github.com/users/njustyq/events{/privacy}","received_events_url":"https://api.github.com/users/njustyq/received_events","type":"User","site_admin":false},"created_at":"2019-12-17T12:48:44Z","updated_at":"2019-12-17T12:48:44Z","author_association":"NONE","body":"> @njustyq don't ping people like that - it is rude\r\nsorryï¼Œi'm just a little anxious... \r\n","performed_via_github_app":null}]