{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/19913","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19913/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19913/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19913/events","html_url":"https://github.com/elastic/elasticsearch/issues/19913","id":170406227,"node_id":"MDU6SXNzdWUxNzA0MDYyMjc=","number":19913,"title":"Optimize the case when `_version` is never specified / always 0","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"labels":[{"id":836542781,"node_id":"MDU6TGFiZWw4MzY1NDI3ODE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Engine","name":":Distributed/Engine","color":"0e8a16","default":false,"description":"Anything around managing Lucene and the Translog in an open shard."},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":14,"created_at":"2016-08-10T12:35:55Z","updated_at":"2018-03-16T02:04:05Z","closed_at":"2018-03-16T02:04:05Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"@rmuir had this clever idea: because of how we compress things, Lucene's codec knows when a given doc values field is always constant, and we could use this to know that `_version` is always 0, and do sizable optimizations like skip the per-doc `_uid` lookup during indexing, don't record version in the live version map (though we still use it for e.g. real-time get, see #19787 and #19813).\n\nThis could be a nice solution because it wouldn't require any configuration on the user's part to state that they will not use optimistic concurrency features: the engine would just notice and be more efficient in this very common case.  And if users do use optimistic concurrency features, it would be slower.\n\nBut one problem here is the engine automatically increments the version each time a `_uid` is re-indexed: can we stop doing this auto-increment?\n","closed_by":{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false},"performed_via_github_app":null}