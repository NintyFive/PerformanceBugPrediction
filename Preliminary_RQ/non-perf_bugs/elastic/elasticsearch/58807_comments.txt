[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/652282571","html_url":"https://github.com/elastic/elasticsearch/issues/58807#issuecomment-652282571","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58807","id":652282571,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MjI4MjU3MQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-07-01T08:44:31Z","updated_at":"2020-07-01T08:44:31Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-security (:Security/Security)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/652282585","html_url":"https://github.com/elastic/elasticsearch/issues/58807#issuecomment-652282585","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58807","id":652282585,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MjI4MjU4NQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-07-01T08:44:33Z","updated_at":"2020-07-01T08:44:33Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features (:Core/Features/Features)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/652400348","html_url":"https://github.com/elastic/elasticsearch/issues/58807#issuecomment-652400348","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58807","id":652400348,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MjQwMDM0OA==","user":{"login":"ywangd","id":2344308,"node_id":"MDQ6VXNlcjIzNDQzMDg=","avatar_url":"https://avatars3.githubusercontent.com/u/2344308?v=4","gravatar_id":"","url":"https://api.github.com/users/ywangd","html_url":"https://github.com/ywangd","followers_url":"https://api.github.com/users/ywangd/followers","following_url":"https://api.github.com/users/ywangd/following{/other_user}","gists_url":"https://api.github.com/users/ywangd/gists{/gist_id}","starred_url":"https://api.github.com/users/ywangd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywangd/subscriptions","organizations_url":"https://api.github.com/users/ywangd/orgs","repos_url":"https://api.github.com/users/ywangd/repos","events_url":"https://api.github.com/users/ywangd/events{/privacy}","received_events_url":"https://api.github.com/users/ywangd/received_events","type":"User","site_admin":false},"created_at":"2020-07-01T12:53:29Z","updated_at":"2020-07-01T12:53:29Z","author_association":"MEMBER","body":"I wonder whether this can be fixed in a similar way as #56028 \r\nCan someone who understand `default_shards` feature and/or composable templates please take a look?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/652467651","html_url":"https://github.com/elastic/elasticsearch/issues/58807#issuecomment-652467651","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58807","id":652467651,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MjQ2NzY1MQ==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2020-07-01T14:54:29Z","updated_at":"2020-07-01T14:54:29Z","author_association":"MEMBER","body":"I believe this is a duplicate of #58258. I will take a look.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/654863832","html_url":"https://github.com/elastic/elasticsearch/issues/58807#issuecomment-654863832","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58807","id":654863832,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDg2MzgzMg==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2020-07-07T13:34:32Z","updated_at":"2020-07-07T13:34:32Z","author_association":"MEMBER","body":"I think this failure from today looks related: https://gradle-enterprise.elastic.co/s/7nqywhqy2fu7s","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/655737641","html_url":"https://github.com/elastic/elasticsearch/issues/58807#issuecomment-655737641","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58807","id":655737641,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTczNzY0MQ==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2020-07-08T20:24:45Z","updated_at":"2020-07-08T20:24:45Z","author_association":"MEMBER","body":"Fixed in #59242 ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/655974841","html_url":"https://github.com/elastic/elasticsearch/issues/58807#issuecomment-655974841","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58807","id":655974841,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTk3NDg0MQ==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2020-07-09T08:05:19Z","updated_at":"2020-07-09T08:08:38Z","author_association":"MEMBER","body":"We just had [another build](https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.x+multijob-unix-compatibility/os=debian-9&&immutable/87/) ([build scan](https://gradle-enterprise.elastic.co/s/2urbo4eaoudwu)) which included the fix in https://github.com/elastic/elasticsearch/pull/59242, fail with the following error:\r\n\r\n```\r\n00:47:03     org.elasticsearch.client.WarningFailureException: method [PUT], host [http://127.0.0.1:38707], URI [token_backwards_compatibility_it/_doc/old_cluster_token1], status line [HTTP/1.1 201 Created]\r\n00:47:03     Warnings: [index [token_backwards_compatibility_it] matches multiple legacy templates [gen-tokens-old-cluster-template, global], composable templates will only match a single template]\r\n00:47:03     {\"_index\":\"token_backwards_compatibility_it\",\"_type\":\"_doc\",\"_id\":\"old_cluster_token1\",\"_version\":1,\"result\":\"created\",\"_shards\":{\"total\":2,\"successful\":1,\"failed\":0},\"_seq_no\":0,\"_primary_term\":1}\r\n00:47:03         at __randomizedtesting.SeedInfo.seed([308BF3657CF96962:4BF6F89CCEB5F320]:0)\r\n00:47:03         at org.elasticsearch.client.RestClient.convertResponse(RestClient.java:289)\r\n00:47:03         at org.elasticsearch.client.RestClient.performRequest(RestClient.java:263)\r\n00:47:03         at org.elasticsearch.client.RestClient.performRequest(RestClient.java:237)\r\n```\r\n\r\nThe reproduction line:\r\n\r\n```\r\n./gradlew ':x-pack:qa:rolling-upgrade:v7.8.1#oldClusterTest' --tests \"org.elasticsearch.upgrades.TokenBackwardsCompatibilityIT.testGeneratingTokensInOldCluster\" \\\r\n  -Dtests.seed=308BF3657CF96962 \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=ja \\\r\n  -Dtests.timezone=Etc/UCT \\\r\n  -Druntime.java=8\r\n```\r\n\r\ndid not reproduce locally.\r\n\r\n@dakrone can you please have a look?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/665067181","html_url":"https://github.com/elastic/elasticsearch/issues/58807#issuecomment-665067181","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58807","id":665067181,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NTA2NzE4MQ==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2020-07-28T14:17:10Z","updated_at":"2020-07-28T14:17:10Z","author_association":"MEMBER","body":"Looks to have failed again on 7.9.  I'm going to mute these in 7.8/7.9/7.x\r\n\r\n[Build scan](https://gradle-enterprise.elastic.co/s/26qixrwtcjcqg) ([log](https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.9+multijob+fast+bwc/155/console))\r\n\r\n```\r\nREPRODUCE WITH: ./gradlew ':x-pack:qa:rolling-upgrade:v7.8.2#oldClusterTest' --tests \"org.elasticsearch.upgrades.TokenBackwardsCompatibilityIT.testRefreshingTokensInOldCluster\" \\\r\n  -Dtests.seed=85781588022A9353 \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=is \\\r\n  -Dtests.timezone=Pacific/Apia \\\r\n  -Druntime.java=8\r\n\r\nREPRODUCE WITH: ./gradlew ':x-pack:qa:rolling-upgrade:v7.8.2#oldClusterTest' --tests \"org.elasticsearch.upgrades.TokenBackwardsCompatibilityIT.testRefreshingTokensInOldCluster\" \\\r\n  -Dtests.seed=85781588022A9353 \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=is \\\r\n  -Dtests.timezone=Pacific/Apia \\\r\n  -Druntime.java=8\r\n\r\nREPRODUCE WITH: ./gradlew ':x-pack:qa:rolling-upgrade:v7.8.2#oldClusterTest' --tests \"org.elasticsearch.upgrades.IndexingIT.testIndexing\" \\\r\n  -Dtests.seed=85781588022A9353 \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=hu-HU \\\r\n  -Dtests.timezone=Europe/Amsterdam \\\r\n  -Druntime.java=8\r\n\r\nREPRODUCE WITH: ./gradlew ':x-pack:qa:rolling-upgrade:v7.8.2#oldClusterTest' --tests \"org.elasticsearch.upgrades.IndexingIT.testIndexing\" \\\r\n  -Dtests.seed=85781588022A9353 \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=hu-HU \\\r\n  -Dtests.timezone=Europe/Amsterdam \\\r\n  -Druntime.java=8\r\n```\r\n\r\n\r\n```\r\n10:02:49 org.elasticsearch.upgrades.TokenBackwardsCompatibilityIT > testRefreshingTokensInOldCluster FAILED\r\n10:02:49     org.elasticsearch.client.WarningFailureException: method [PUT], host [http://[::1]:42565], URI [token_backwards_compatibility_it/_doc/old_cluster_token3], status line [HTTP/1.1 201 Created]\r\n10:02:49     Warnings: [index [token_backwards_compatibility_it] matches multiple legacy templates [global, refresh-tokens-old-cluster-template], composable templates will only match a single template]\r\n10:02:49     {\"_index\":\"token_backwards_compatibility_it\",\"_type\":\"_doc\",\"_id\":\"old_cluster_token3\",\"_version\":1,\"result\":\"created\",\"_shards\":{\"total\":2,\"successful\":2,\"failed\":0},\"_seq_no\":0,\"_primary_term\":1}\r\n10:02:49         at __randomizedtesting.SeedInfo.seed([85781588022A9353:A235F0229072377]:0)\r\n10:02:49         at org.elasticsearch.client.RestClient.convertResponse(RestClient.java:298)\r\n10:02:49         at org.elasticsearch.client.RestClient.performRequest(RestClient.java:272)\r\n10:02:49         at org.elasticsearch.client.RestClient.performRequest(RestClient.java:246)\r\n10:02:49         at org.elasticsearch.upgrades.TokenBackwardsCompatibilityIT.storeTokens(TokenBackwardsCompatibilityIT.java:408)\r\n10:02:49         at org.elasticsearch.upgrades.TokenBackwardsCompatibilityIT.testRefreshingTokensInOldCluster(TokenBackwardsCompatibilityIT.java:134)\r\n\r\n\r\n\r\n10:02:57 org.elasticsearch.upgrades.IndexingIT > testIndexing FAILED\r\n10:02:57     org.elasticsearch.client.WarningFailureException: method [PUT], host [http://127.0.0.1:40709], URI [/test_index], status line [HTTP/1.1 200 OK]\r\n10:02:57     Warnings: [index [test_index] matches multiple legacy templates [global, xpack-prevent-bwc-deprecation-template], composable templates will only match a single template]\r\n10:02:57     {\"acknowledged\":true,\"shards_acknowledged\":true,\"index\":\"test_index\"}\r\n10:02:57         at __randomizedtesting.SeedInfo.seed([85781588022A9353:61A25A81245FD0D8]:0)\r\n10:02:57         at org.elasticsearch.client.RestClient.convertResponse(RestClient.java:298)\r\n10:02:57         at org.elasticsearch.client.RestClient.performRequest(RestClient.java:272)\r\n10:02:57         at org.elasticsearch.client.RestClient.performRequest(RestClient.java:246)\r\n10:02:57         at org.elasticsearch.upgrades.IndexingIT.testIndexing(IndexingIT.java:77)\r\n10:02:57 REPRODUCE WITH: ./gradlew ':x-pack:qa:rolling-upgrade:v7.8.2#oldClusterTest' --tests \"\r\n```\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/667446004","html_url":"https://github.com/elastic/elasticsearch/issues/58807#issuecomment-667446004","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58807","id":667446004,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NzQ0NjAwNA==","user":{"login":"danhermann","id":22777892,"node_id":"MDQ6VXNlcjIyNzc3ODky","avatar_url":"https://avatars0.githubusercontent.com/u/22777892?v=4","gravatar_id":"","url":"https://api.github.com/users/danhermann","html_url":"https://github.com/danhermann","followers_url":"https://api.github.com/users/danhermann/followers","following_url":"https://api.github.com/users/danhermann/following{/other_user}","gists_url":"https://api.github.com/users/danhermann/gists{/gist_id}","starred_url":"https://api.github.com/users/danhermann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danhermann/subscriptions","organizations_url":"https://api.github.com/users/danhermann/orgs","repos_url":"https://api.github.com/users/danhermann/repos","events_url":"https://api.github.com/users/danhermann/events{/privacy}","received_events_url":"https://api.github.com/users/danhermann/received_events","type":"User","site_admin":false},"created_at":"2020-08-01T01:22:09Z","updated_at":"2020-08-01T01:22:09Z","author_association":"MEMBER","body":"Should be fixed by https://github.com/elastic/elasticsearch/pull/60427","performed_via_github_app":null}]