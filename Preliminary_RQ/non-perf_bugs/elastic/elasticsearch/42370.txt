{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/42370","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42370/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42370/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42370/events","html_url":"https://github.com/elastic/elasticsearch/issues/42370","id":447179575,"node_id":"MDU6SXNzdWU0NDcxNzk1NzU=","number":42370,"title":"[CI] Time out while starting cluster for rest test","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"labels":[{"id":106454670,"node_id":"MDU6TGFiZWwxMDY0NTQ2NzA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Build","name":":Delivery/Build","color":"0e8a16","default":false,"description":"Build or test infrastructure"},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"},{"id":1222918656,"node_id":"MDU6TGFiZWwxMjIyOTE4NjU2","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v7.2.0","name":"v7.2.0","color":"DDDDDD","default":false,"description":""},{"id":1524022086,"node_id":"MDU6TGFiZWwxNTI0MDIyMDg2","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v7.5.0","name":"v7.5.0","color":"dddddd","default":false,"description":""},{"id":1194435738,"node_id":"MDU6TGFiZWwxMTk0NDM1NzM4","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v8.0.0","name":"v8.0.0","color":"dddddd","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":14,"created_at":"2019-05-22T14:44:34Z","updated_at":"2020-11-11T21:48:57Z","closed_at":"2019-09-12T13:19:28Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"## Example build failure\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob-unix-compatibility/os=amazon/435/\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.x+multijob-unix-compatibility/os=amazon/211/\r\nbut works on `6.8`\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.7+multijob-unix-compatibility/os=amazon/\r\n\r\n## Reproduction line \r\ndoes not reproduce locally, different clusters fail with a timeout.\r\n\r\n## Example relevant log:\r\nServer log just shows:\r\n```\r\n[2019-05-22T13:18:42,474][INFO ][o.e.e.NodeEnvironment    ] [node-0] using [1] data paths, mounts [[/ (/dev/xvda1)]], net usable_space [1.1tb], net total_space [1.8tb], types [xfs]\r\n[2019-05-22T13:18:42,478][INFO ][o.e.e.NodeEnvironment    ] [node-0] heap size [494.9mb], compressed ordinary object pointers [true]\r\n[2019-05-22T13:18:42,481][INFO ][o.e.n.Node               ] [node-0] node name [node-0], node ID [pEndK1onR0eDgS8UfCkJsA], cluster name [qa_multi-cluster-search_mixedClusterTestCluster]\r\n[2019-05-22T13:18:42,481][INFO ][o.e.n.Node               ] [node-0] version[8.0.0-SNAPSHOT], pid[963907], build[oss/tar/e572214/2019-05-22T11:23:27.120471Z], OS[Linux/4.14.72-73.55.amzn2.x86_64/amd64], JVM[Oracle Corporation/Java HotSpot(TM) 64-Bit Server VM/11.0.3/11.0.3+12-LTS]\r\n[2019-05-22T13:18:42,482][INFO ][o.e.n.Node               ] [node-0] JVM home [/var/lib/jenkins/.java/oracle-11.0.3+12-linux]\r\n[2019-05-22T13:18:42,482][INFO ][o.e.n.Node               ] [node-0] JVM arguments [-Xms1g, -Xmx1g, -XX:+UseConcMarkSweepGC, -XX:CMSInitiatingOccupancyFraction=75, -XX:+UseCMSInitiatingOccupancyOnly, -Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Djava.io.tmpdir=/tmp/elasticsearch-8194876038063769255, -XX:+HeapDumpOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,pid,tags:filecount=32,filesize=64m, -Djava.locale.providers=COMPAT, -Xms512m, -Xmx512m, -ea, -esa, -Dio.netty.allocator.type=unpooled, -XX:MaxDirectMemorySize=268435456, -Des.path.home=/var/lib/jenkins/workspace/elastic+elasticsearch+master+multijob-unix-compatibility/os/amazon/qa/multi-cluster-search/build/cluster/mixedClusterTestCluster node0/elasticsearch-8.0.0-SNAPSHOT, -Des.path.conf=/var/lib/jenkins/workspace/elastic+elasticsearch+master+multijob-unix-compatibility/os/amazon/qa/multi-cluster-search/build/cluster/mixedClusterTestCluster node0/elasticsearch-8.0.0-SNAPSHOT/config, -Des.distribution.flavor=oss, -Des.distribution.type=tar, -Des.bundled_jdk=true]\r\n[2019-05-22T13:18:42,483][WARN ][o.e.n.Node               ] [node-0] version [8.0.0-SNAPSHOT] is a pre-release version of Elasticsearch and is not suitable for production\r\n[2019-05-22T13:18:43,229][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [aggs-matrix-stats]\r\n[2019-05-22T13:18:43,230][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [analysis-common]\r\n[2019-05-22T13:18:43,230][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [ingest-common]\r\n[2019-05-22T13:18:43,230][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [ingest-geoip]\r\n[2019-05-22T13:18:43,230][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [ingest-user-agent]\r\n[2019-05-22T13:18:43,231][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [lang-expression]\r\n[2019-05-22T13:18:43,231][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [lang-mustache]\r\n[2019-05-22T13:18:43,231][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [lang-painless]\r\n[2019-05-22T13:18:43,231][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [mapper-extras]\r\n[2019-05-22T13:18:43,232][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [parent-join]\r\n[2019-05-22T13:18:43,232][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [percolator]\r\n[2019-05-22T13:18:43,232][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [rank-eval]\r\n[2019-05-22T13:18:43,232][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [reindex]\r\n[2019-05-22T13:18:43,233][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [repository-url]\r\n[2019-05-22T13:18:43,233][INFO ][o.e.p.PluginsService     ] [node-0] loaded module [transport-netty4]\r\n[2019-05-22T13:18:43,234][INFO ][o.e.p.PluginsService     ] [node-0] no plugins loaded\r\n```\r\n \r\n```\r\n16:18:02 > Task :qa:multi-cluster-search:mixedClusterTestCluster#start\r\n16:18:02 > Task :qa:multi-cluster-search:mixedClusterTestCluster#init UP-TO-DATE\r\n16:18:32 > Task :qa:multi-cluster-search:mixedClusterTestCluster#wait\r\n16:18:42 > Task :qa:multi-cluster-search:mixedClusterTestCluster#wait FAILED\r\n16:18:43 > Task :qa:multi-cluster-search:remoteClusterTestCluster#node1.stop\r\n16:18:43 > Task :qa:multi-cluster-search:remoteClusterTestCluster#node0.stop\r\n16:18:43 > Task :qa:multi-cluster-search:mixedClusterTestCluster#stop\r\n16:18:43 \r\n16:18:43 FAILURE: Build failed with an exception.\r\n16:18:43 \r\n16:18:43 * What went wrong:\r\n16:18:43 Execution failed for task ':qa:multi-cluster-search:mixedClusterTestCluster#wait'.\r\n16:18:43 > Failed to locate seed node transport file [/var/lib/jenkins/workspace/elastic+elasticsearch+master+multijob-unix-compatibility/os/amazon/qa/multi-cluster-search/build/cluster/mixedClusterTestCluster node0/elasticsearch-8.0.0-SNAPSHOT/logs/transport.ports]: timed out waiting for it to be created after 40 seconds\r\n16:18:43 \r\n```\r\n\r\nIt looks like it takes really long for the first message to show up in the log. \r\n\r\nI checked the CI workers, but nothing stands out and `6.8` works. \r\n\r\n\r\n\r\n","closed_by":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"performed_via_github_app":null}