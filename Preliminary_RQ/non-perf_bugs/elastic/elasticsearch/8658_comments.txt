[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64449246","html_url":"https://github.com/elastic/elasticsearch/issues/8658#issuecomment-64449246","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8658","id":64449246,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NDQ5MjQ2","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-11-25T18:41:38Z","updated_at":"2014-11-25T18:41:38Z","author_association":"CONTRIBUTOR","body":"Hi @makam\n\nCould you provide more details about your use case and where you'd like to use this rewrite method? Most queries which use rewrite already have a `max_expansions` parameter which do exactly what you describe.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64818036","html_url":"https://github.com/elastic/elasticsearch/issues/8658#issuecomment-64818036","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8658","id":64818036,"node_id":"MDEyOklzc3VlQ29tbWVudDY0ODE4MDM2","user":{"login":"makam","id":525407,"node_id":"MDQ6VXNlcjUyNTQwNw==","avatar_url":"https://avatars2.githubusercontent.com/u/525407?v=4","gravatar_id":"","url":"https://api.github.com/users/makam","html_url":"https://github.com/makam","followers_url":"https://api.github.com/users/makam/followers","following_url":"https://api.github.com/users/makam/following{/other_user}","gists_url":"https://api.github.com/users/makam/gists{/gist_id}","starred_url":"https://api.github.com/users/makam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/makam/subscriptions","organizations_url":"https://api.github.com/users/makam/orgs","repos_url":"https://api.github.com/users/makam/repos","events_url":"https://api.github.com/users/makam/events{/privacy}","received_events_url":"https://api.github.com/users/makam/received_events","type":"User","site_admin":false},"created_at":"2014-11-27T17:56:15Z","updated_at":"2014-11-27T17:56:15Z","author_association":"NONE","body":"So basically my use case:\nI have written my custom plugins for highlighter. In the highlighter, i end up doing a rewrite so that i can extract the terms and highlight it my way. I currently use top_terms_boost_100. But this is quite slow as  explained in the original post. So i'd like to use a rewrite method which directly gives me the first 100 terms that got matched.\n\nAnd you just mentioned that most queries have max_expansions. Its just the fuzzy and match_phrase which have max_expansions right? And each of them have a custom implementation of rewrite (neither of them use the standard rewrite method i.e MultiTermQuery.Rewrite). Am i missing some point here? Is there an inbuilt solution that i can leverage in my plugin?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64892115","html_url":"https://github.com/elastic/elasticsearch/issues/8658#issuecomment-64892115","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8658","id":64892115,"node_id":"MDEyOklzc3VlQ29tbWVudDY0ODkyMTE1","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-11-28T13:07:55Z","updated_at":"2014-11-28T13:07:55Z","author_association":"CONTRIBUTOR","body":"Hi @makam \n\nSorry if I'm being a bit slow here, but I'm struggling to follow exactly what you're doing.  Are you talking about expanding fuzzy/wildcard/prefix/regex terms in the query for highlighting purposes? \n\nYou say \"gives me the first 100 terms that got matched\". What do you mean by \"matched\" here? Matched in the term dictionary or matched by the query?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64915895","html_url":"https://github.com/elastic/elasticsearch/issues/8658#issuecomment-64915895","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8658","id":64915895,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTE1ODk1","user":{"login":"makam","id":525407,"node_id":"MDQ6VXNlcjUyNTQwNw==","avatar_url":"https://avatars2.githubusercontent.com/u/525407?v=4","gravatar_id":"","url":"https://api.github.com/users/makam","html_url":"https://github.com/makam","followers_url":"https://api.github.com/users/makam/followers","following_url":"https://api.github.com/users/makam/following{/other_user}","gists_url":"https://api.github.com/users/makam/gists{/gist_id}","starred_url":"https://api.github.com/users/makam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/makam/subscriptions","organizations_url":"https://api.github.com/users/makam/orgs","repos_url":"https://api.github.com/users/makam/repos","events_url":"https://api.github.com/users/makam/events{/privacy}","received_events_url":"https://api.github.com/users/makam/received_events","type":"User","site_admin":false},"created_at":"2014-11-28T17:31:06Z","updated_at":"2014-11-28T17:31:06Z","author_association":"NONE","body":"Thanks for being patient... I'l re-explain the use case.\nI have a custom highlighter which returns the offset details of the matched hit instead of returning snippets for every hit in a document. To get the offset data for a wildcard query, i first rewrite the query using top_terms_100 to extract the terms out of it, and then find the occurrences of these 100 words in the documents being returned. \nNow i want better performance. So i would prefer using some other rewrite method which again gives me only 100 words (possible expansions of wildcard term), but slightly faster. To be precise, return the first 100 terms that match the wildcard automaton instead of evaluating every word. \n\nRegarding your two questions,\nYes, i am expanding wildcard/prefix terms in the query for highlighting purpose.\nAnd I meant 100 terms in the term dictionary.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64916780","html_url":"https://github.com/elastic/elasticsearch/issues/8658#issuecomment-64916780","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8658","id":64916780,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTE2Nzgw","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-11-28T17:43:46Z","updated_at":"2014-11-28T17:43:46Z","author_association":"CONTRIBUTOR","body":"@makam ok - i understand perfectly now :) thanks\n\nI'll put this issue up for discussion, but if you'd be interested in sending a PR it may speed things along.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/263062126","html_url":"https://github.com/elastic/elasticsearch/issues/8658#issuecomment-263062126","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8658","id":263062126,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzA2MjEyNg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-11-26T12:57:14Z","updated_at":"2016-11-26T12:57:14Z","author_association":"CONTRIBUTOR","body":"Two years have passed since this issue was opened and it hasn't gained traction.  I'm hoping you figured out a way to do this yourself.  If not, you may want to look at the new unified highlighter (#21621) which seems to handle wildcards etc efficiently.  Perhaps there are clues to be gained there about how to implement this.\r\n\r\nIf you still feel that this rewrite method should be provided, feel free to reopen.","performed_via_github_app":null}]