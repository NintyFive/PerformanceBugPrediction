[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/288278912","html_url":"https://github.com/elastic/elasticsearch/issues/23681#issuecomment-288278912","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23681","id":288278912,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODI3ODkxMg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-03-22T02:22:45Z","updated_at":"2017-03-22T02:26:51Z","author_association":"MEMBER","body":"The reason that we are okay with removing template inheritance is due to the assumption that a cluster is expected to have a reasonable number of templates and in cases where a cluster does have a large number of templates, they would have to be programmatically managed. Given this assumption, I do not see the need to add default index settings. If there a reasonable number of templates, the default index settings can be applied to every template, and in cases where a cluster does have a large number of templates, they can programmatically added to every template.\r\n\r\nSecondly, we try to maintain a philosophy that there should be one way to do things, and this goes against that philosophy as now settings could be added to a template, or set via these default settings.\r\n\r\nFinally, I'm concerned about a long tail of requests to add a default index setting for every index setting and we end up with overhead of supporting a large number of default index settings.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/288455516","html_url":"https://github.com/elastic/elasticsearch/issues/23681#issuecomment-288455516","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23681","id":288455516,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODQ1NTUxNg==","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"created_at":"2017-03-22T16:24:39Z","updated_at":"2017-03-22T16:24:39Z","author_association":"MEMBER","body":"I think that's an unrealistic assumption (naturally, since I wrote the issue). We see time and time again that advanced users often setup the clusters, but then less advanced users will come in and create the mappings for their own purposes.\r\n\r\nIn such a case, the newer user is less likely to properly handle sharding -- if they even consider it -- and that  is exactly what the \"global\" template solved. An advanced user will hopefully go back and fix said template, but it's probably too late at that point.\r\n\r\nI do agree that it's a slippery slope to create the long tail problem, but there aren't really many index settings that can impact the cluster other than the sharding (compression level and refresh-related settings mostly only impact the index). If we do go down this path, the long tail can be cut off by asking: does it impact the cluster or primarily just the index.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/288470057","html_url":"https://github.com/elastic/elasticsearch/issues/23681#issuecomment-288470057","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23681","id":288470057,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODQ3MDA1Nw==","user":{"login":"inqueue","id":6099128,"node_id":"MDQ6VXNlcjYwOTkxMjg=","avatar_url":"https://avatars2.githubusercontent.com/u/6099128?v=4","gravatar_id":"","url":"https://api.github.com/users/inqueue","html_url":"https://github.com/inqueue","followers_url":"https://api.github.com/users/inqueue/followers","following_url":"https://api.github.com/users/inqueue/following{/other_user}","gists_url":"https://api.github.com/users/inqueue/gists{/gist_id}","starred_url":"https://api.github.com/users/inqueue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/inqueue/subscriptions","organizations_url":"https://api.github.com/users/inqueue/orgs","repos_url":"https://api.github.com/users/inqueue/repos","events_url":"https://api.github.com/users/inqueue/events{/privacy}","received_events_url":"https://api.github.com/users/inqueue/received_events","type":"User","site_admin":false},"created_at":"2017-03-22T17:09:01Z","updated_at":"2017-03-22T17:09:01Z","author_association":"MEMBER","body":"Additionally for the newer user, and perhaps one with a bit more awareness, having previously configured `index.number_of_shards` and `index.number_of_replicas` in `elasticsearch.yml` (pre-5.x), the use of a \"default\" (`*`) index template for these settings was an understood and accepted change. With inheritance removed, we'll need to re-inform those we have helped keep shard counts down with default index templates-- if only we knew inheritance was going away when index settings were removed!\r\n\r\nDynamic cluster update settings for `number_of_shards` would be a welcome add, especially if the default number of shards is to remain at 5. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/289025075","html_url":"https://github.com/elastic/elasticsearch/issues/23681#issuecomment-289025075","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23681","id":289025075,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTAyNTA3NQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-03-24T13:40:39Z","updated_at":"2017-03-24T13:40:39Z","author_association":"MEMBER","body":"We discussed this during Fix-it-Friday and agree that we should not add this. In addition to the thoughts laid out above, this is effectively a path to implementing template inheritance via a backdoor through the cluster settings.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/289566839","html_url":"https://github.com/elastic/elasticsearch/issues/23681#issuecomment-289566839","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23681","id":289566839,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTU2NjgzOQ==","user":{"login":"djschny","id":129643,"node_id":"MDQ6VXNlcjEyOTY0Mw==","avatar_url":"https://avatars0.githubusercontent.com/u/129643?v=4","gravatar_id":"","url":"https://api.github.com/users/djschny","html_url":"https://github.com/djschny","followers_url":"https://api.github.com/users/djschny/followers","following_url":"https://api.github.com/users/djschny/following{/other_user}","gists_url":"https://api.github.com/users/djschny/gists{/gist_id}","starred_url":"https://api.github.com/users/djschny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djschny/subscriptions","organizations_url":"https://api.github.com/users/djschny/orgs","repos_url":"https://api.github.com/users/djschny/repos","events_url":"https://api.github.com/users/djschny/events{/privacy}","received_events_url":"https://api.github.com/users/djschny/received_events","type":"User","site_admin":false},"created_at":"2017-03-27T19:56:19Z","updated_at":"2017-03-27T19:56:19Z","author_association":"CONTRIBUTOR","body":"In looking at the [original issue and rationales](https://github.com/elastic/elasticsearch/issues/21105) for removing template inheritance, it seems most of the issues are around complexity in the mapping and analysis sections of them. Most of the examples around defaults in this issue appear to revolve around index settings that do not introduce the complexities of analysis and mappings. With `_all` removed in v6.x for new indices it removes the need for one of the most popular mappings/analysis related global default.\r\n\r\nI bring this topic up because by limiting the scope to the popular requested defaults here, seems to provide much value without introducing the complexities that were the drivers for the removal of template inheritance.\r\n\r\nFor anyone building an application with ES, the defaults can managed by the application much easier, but for folks using tools like Beats/Logstash, templates essentially are the only way to go outside of introducing custom code. In these situations having defaults for things like shard counts, can go a long way into simplifying the management of templates.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/289690220","html_url":"https://github.com/elastic/elasticsearch/issues/23681#issuecomment-289690220","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23681","id":289690220,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTY5MDIyMA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-03-28T07:45:22Z","updated_at":"2017-03-28T07:45:22Z","author_association":"CONTRIBUTOR","body":"> by limiting the scope to the popular requested defaults here, \r\n\r\nIt never ends there. If you expose defaults like this, then soon we'll have requests for exposing refresh interval, shard routing, etc etc.  Do these get copied into the custom index settings or do they remain in the cluster state? What happens if the cluster state values change?  This adds complexity and action at a distance. \r\n\r\n> for folks using tools like Beats/Logstash, templates essentially are the only way to go outside of introducing custom code\r\n\r\nYou have a single valid template which contains all the info you need in one place.  That is simple and predictable.  No magic.\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/289879804","html_url":"https://github.com/elastic/elasticsearch/issues/23681#issuecomment-289879804","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23681","id":289879804,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTg3OTgwNA==","user":{"login":"djschny","id":129643,"node_id":"MDQ6VXNlcjEyOTY0Mw==","avatar_url":"https://avatars0.githubusercontent.com/u/129643?v=4","gravatar_id":"","url":"https://api.github.com/users/djschny","html_url":"https://github.com/djschny","followers_url":"https://api.github.com/users/djschny/followers","following_url":"https://api.github.com/users/djschny/following{/other_user}","gists_url":"https://api.github.com/users/djschny/gists{/gist_id}","starred_url":"https://api.github.com/users/djschny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djschny/subscriptions","organizations_url":"https://api.github.com/users/djschny/orgs","repos_url":"https://api.github.com/users/djschny/repos","events_url":"https://api.github.com/users/djschny/events{/privacy}","received_events_url":"https://api.github.com/users/djschny/received_events","type":"User","site_admin":false},"created_at":"2017-03-28T19:33:07Z","updated_at":"2017-03-28T19:33:07Z","author_association":"CONTRIBUTOR","body":"> You have a single valid template which contains all the info you need in one place. That is simple and predictable. No magic.\r\n\r\nWould you mind elaborating how this is possible for non-trivial log ingestion? For example, when ingesting different kinds of logs (security, network, app, DB, etc.) into the same cluster usually these go into separate index patters. For example:\r\n\r\n* logs-**app**-YYYY.MM.DD\r\n* logs-**network**-YYYY.MM.DD\r\n* logs-**security**-YYYY.MM.DD\r\n\r\nEach of those will different mappings, shard settings, etc because their document structure and volume and performance requirements vary. This would require three different templates. Excuse my ignorance but I am not aware of how that is possible with a single valid template.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/290020674","html_url":"https://github.com/elastic/elasticsearch/issues/23681#issuecomment-290020674","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23681","id":290020674,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDAyMDY3NA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-03-29T08:30:30Z","updated_at":"2017-03-29T08:30:30Z","author_association":"CONTRIBUTOR","body":"> This would require three different templates. \r\n\r\nCorrect\r\n\r\n> Excuse my ignorance but I am not aware of how that is possible with a single valid template.\r\n\r\nI meant a single valid template per use case.  That's only three templates, not thousands.","performed_via_github_app":null}]