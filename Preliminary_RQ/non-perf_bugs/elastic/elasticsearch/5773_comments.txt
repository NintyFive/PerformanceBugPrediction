[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/40235690","html_url":"https://github.com/elastic/elasticsearch/issues/5773#issuecomment-40235690","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5773","id":40235690,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMjM1Njkw","user":{"login":"marcuswr","id":6935249,"node_id":"MDQ6VXNlcjY5MzUyNDk=","avatar_url":"https://avatars1.githubusercontent.com/u/6935249?v=4","gravatar_id":"","url":"https://api.github.com/users/marcuswr","html_url":"https://github.com/marcuswr","followers_url":"https://api.github.com/users/marcuswr/followers","following_url":"https://api.github.com/users/marcuswr/following{/other_user}","gists_url":"https://api.github.com/users/marcuswr/gists{/gist_id}","starred_url":"https://api.github.com/users/marcuswr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcuswr/subscriptions","organizations_url":"https://api.github.com/users/marcuswr/orgs","repos_url":"https://api.github.com/users/marcuswr/repos","events_url":"https://api.github.com/users/marcuswr/events{/privacy}","received_events_url":"https://api.github.com/users/marcuswr/received_events","type":"User","site_admin":false},"created_at":"2014-04-11T18:02:27Z","updated_at":"2014-04-14T04:31:49Z","author_association":"NONE","body":"Checked additional versions of elastic search:\nelasticsearch-0.20.4       PASSED\nelasticsearch-0.90.13     PASSED\nelasticsearch-1.0.0.RC1 FAILED\nelasticsearch-1.0.2         FAILED\nelasticsearch-1.1.0         FAILED\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/40257412","html_url":"https://github.com/elastic/elasticsearch/issues/5773#issuecomment-40257412","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5773","id":40257412,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMjU3NDEy","user":{"login":"marcuswr","id":6935249,"node_id":"MDQ6VXNlcjY5MzUyNDk=","avatar_url":"https://avatars1.githubusercontent.com/u/6935249?v=4","gravatar_id":"","url":"https://api.github.com/users/marcuswr","html_url":"https://github.com/marcuswr","followers_url":"https://api.github.com/users/marcuswr/followers","following_url":"https://api.github.com/users/marcuswr/following{/other_user}","gists_url":"https://api.github.com/users/marcuswr/gists{/gist_id}","starred_url":"https://api.github.com/users/marcuswr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcuswr/subscriptions","organizations_url":"https://api.github.com/users/marcuswr/orgs","repos_url":"https://api.github.com/users/marcuswr/repos","events_url":"https://api.github.com/users/marcuswr/events{/privacy}","received_events_url":"https://api.github.com/users/marcuswr/received_events","type":"User","site_admin":false},"created_at":"2014-04-11T21:58:08Z","updated_at":"2014-04-11T21:58:08Z","author_association":"NONE","body":"Here is a small test case which triggers the issue in v1.1.0\n\nimport org.elasticsearch.common.geo.builders.ShapeBuilder;\nimport org.elasticsearch.common.xcontent.XContentParser;\nimport org.elasticsearch.common.xcontent.json.JsonXContent;\n\npublic class Test {\n    public static void main(String[] args) throws Exception {\n\n```\n    String geoJson = \"{ \\\"type\\\": \\\"Polygon\\\",\\\"coordinates\\\": [[[-85.0018514,37.1311314],[-85.0016645,37.1315293],[-85.0016246,37.1317069],[-85.0016526,37.1318183],[-85.0017119,37.1319196],[-85.0019371,37.1321182],[-85.0019972,37.1322115],[-85.0019942,37.1323234],[-85.0019543,37.1324336],[-85.001906,37.1324985],[-85.001834,37.1325497],[-85.0016965,37.1325907],[-85.0016011,37.1325873],[-85.0014816,37.1325353],[-85.0011755,37.1323509],[-85.000955,37.1322802],[-85.0006241,37.1322529],[-85.0000002,37.1322307],[-84.9994,37.1323001],[-84.999109,37.1322864],[-84.998934,37.1322415],[-84.9988639,37.1321888],[-84.9987841,37.1320944],[-84.9987208,37.131954],[-84.998736,37.1316611],[-84.9988091,37.131334],[-84.9989283,37.1311337],[-84.9991943,37.1309198],[-84.9993573,37.1308459],[-84.9995888,37.1307924],[-84.9998746,37.130806],[-85.0000002,37.1308358],[-85.0004984,37.1310658],[-85.0008008,37.1311625],[-85.0009461,37.1311684],[-85.0011373,37.1311515],[-85.0016455,37.1310491],[-85.0018514,37.1311314]],[[-85.0000002,37.1317672],[-85.0001983,37.1317538],[-85.0003378,37.1317582],[-85.0004697,37.131792],[-85.0008048,37.1319439],[-85.0009342,37.1319838],[-85.0010184,37.1319463],[-85.0010618,37.13184],[-85.0010057,37.1315102],[-85.000977,37.1314403],[-85.0009182,37.1313793],[-85.0005366,37.1312209],[-85.000224,37.1311466],[-85.000087,37.1311356],[-85.0000002,37.1311433],[-84.9995021,37.1312336],[-84.9993308,37.1312859],[-84.9992567,37.1313252],[-84.9991868,37.1314277],[-84.9991593,37.1315381],[-84.9991841,37.1316527],[-84.9992329,37.1317117],[-84.9993527,37.1317788],[-84.9994931,37.1318061],[-84.9996815,37.1317979],[-85.0000002,37.1317672]]]}\";\n\n    XContentParser parser = JsonXContent.jsonXContent.createParser(geoJson);                                                                                                                                    \n   parser.nextToken();\n    ShapeBuilder.parse(parser).build();\n}\n```\n\n}\n\n// stack trace\nException in thread \"main\" java.lang.ArrayIndexOutOfBoundsException: -1\n    at org.elasticsearch.common.geo.builders.BasePolygonBuilder.assign(BasePolygonBuilder.java:366)\n    at org.elasticsearch.common.geo.builders.BasePolygonBuilder.compose(BasePolygonBuilder.java:347)\n    at org.elasticsearch.common.geo.builders.BasePolygonBuilder.coordinates(BasePolygonBuilder.java:146)\n    at org.elasticsearch.common.geo.builders.BasePolygonBuilder.buildGeometry(BasePolygonBuilder.java:175)\n    at org.elasticsearch.common.geo.builders.BasePolygonBuilder.build(BasePolygonBuilder.java:151)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/40342030","html_url":"https://github.com/elastic/elasticsearch/issues/5773#issuecomment-40342030","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5773","id":40342030,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMzQyMDMw","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2014-04-14T08:08:07Z","updated_at":"2014-04-14T08:08:07Z","author_association":"MEMBER","body":"Hey.\n\nyou can also use the github geo json feature as well to visualize this, see https://gist.github.com/spinscale/9cc6ba24bff03cca2be5\n\nthere has been a huge geo refactoring going on between those affected versions, will check for a regression there.\n\nDo you have any other data where this happens with, or is it just this single polygon?\n\nThanks a lot for all your input!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/40344859","html_url":"https://github.com/elastic/elasticsearch/issues/5773#issuecomment-40344859","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5773","id":40344859,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMzQ0ODU5","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2014-04-14T08:49:34Z","updated_at":"2014-04-14T08:49:34Z","author_association":"MEMBER","body":"I updated my geojson gist above and added a test with a simple polygon (rectangle with hole, which is a rectangle as well), which works... need to investigate\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/40372849","html_url":"https://github.com/elastic/elasticsearch/issues/5773#issuecomment-40372849","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5773","id":40372849,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMzcyODQ5","user":{"login":"marcuswr","id":6935249,"node_id":"MDQ6VXNlcjY5MzUyNDk=","avatar_url":"https://avatars1.githubusercontent.com/u/6935249?v=4","gravatar_id":"","url":"https://api.github.com/users/marcuswr","html_url":"https://github.com/marcuswr","followers_url":"https://api.github.com/users/marcuswr/followers","following_url":"https://api.github.com/users/marcuswr/following{/other_user}","gists_url":"https://api.github.com/users/marcuswr/gists{/gist_id}","starred_url":"https://api.github.com/users/marcuswr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcuswr/subscriptions","organizations_url":"https://api.github.com/users/marcuswr/orgs","repos_url":"https://api.github.com/users/marcuswr/repos","events_url":"https://api.github.com/users/marcuswr/events{/privacy}","received_events_url":"https://api.github.com/users/marcuswr/received_events","type":"User","site_admin":false},"created_at":"2014-04-14T14:38:49Z","updated_at":"2014-04-14T14:38:49Z","author_association":"NONE","body":"I have several thousand polygons that result in this error.  I have not\npulled them all out of the logs yet, I will hopefully have time to do that\ntoday.\n\nOn Mon, Apr 14, 2014 at 1:08 AM, Alexander Reelsen <notifications@github.com\n\n> wrote:\n> \n> Hey.\n> \n> you can also use the github geo json feature as well to visualize this,\n> see https://gist.github.com/spinscale/9cc6ba24bff03cca2be5\n> \n> there has been a huge geo refactoring going on between those affected\n> versions, will check for a regression there.\n> \n> Do you have any other data where this happens with, or is it just this\n> single polygon?\n> \n> Thanks a lot for all your input!\n> \n> —\n> Reply to this email directly or view it on GitHubhttps://github.com/elasticsearch/elasticsearch/issues/5773#issuecomment-40342030\n> .\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/40374176","html_url":"https://github.com/elastic/elasticsearch/issues/5773#issuecomment-40374176","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5773","id":40374176,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMzc0MTc2","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2014-04-14T14:49:52Z","updated_at":"2014-04-14T14:49:52Z","author_association":"MEMBER","body":"I'd highly appreciate it, if you could test with the PR referenced above... it solves this problem, but maybe you could check if I introduced side effects (one just came to mind, which i need to check)...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/40411275","html_url":"https://github.com/elastic/elasticsearch/issues/5773#issuecomment-40411275","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5773","id":40411275,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNDExMjc1","user":{"login":"marcuswr","id":6935249,"node_id":"MDQ6VXNlcjY5MzUyNDk=","avatar_url":"https://avatars1.githubusercontent.com/u/6935249?v=4","gravatar_id":"","url":"https://api.github.com/users/marcuswr","html_url":"https://github.com/marcuswr","followers_url":"https://api.github.com/users/marcuswr/followers","following_url":"https://api.github.com/users/marcuswr/following{/other_user}","gists_url":"https://api.github.com/users/marcuswr/gists{/gist_id}","starred_url":"https://api.github.com/users/marcuswr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcuswr/subscriptions","organizations_url":"https://api.github.com/users/marcuswr/orgs","repos_url":"https://api.github.com/users/marcuswr/repos","events_url":"https://api.github.com/users/marcuswr/events{/privacy}","received_events_url":"https://api.github.com/users/marcuswr/received_events","type":"User","site_admin":false},"created_at":"2014-04-14T20:03:46Z","updated_at":"2014-04-16T20:58:40Z","author_association":"NONE","body":"I have put up a file containing 15k+ polygons which had the same\nArrayIndexOutOfBoundsException against ES1.0+.  It is available at\nhttps://github.com/marcuswr/elasticsearch-polygon-data.git\n\nAdditionally, the gist at https://gist.github.com/marcuswr/493406918e0a9edeb509  contains a set of polygons which still fail against the patched version (same IndexOutOfBoundsException)\n\nOn Mon, Apr 14, 2014 at 7:50 AM, Alexander Reelsen <notifications@github.com\n\n> wrote:\n> \n> I'd highly appreciate it, if you could test with the PR referenced\n> above... it solves this problem, but maybe you could check if I introduced\n> side effects (one just came to mind, which i need to check)...\n> \n> —\n> Reply to this email directly or view it on GitHubhttps://github.com/elasticsearch/elasticsearch/issues/5773#issuecomment-40374176\n> .\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/40426177","html_url":"https://github.com/elastic/elasticsearch/issues/5773#issuecomment-40426177","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5773","id":40426177,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNDI2MTc3","user":{"login":"marcuswr","id":6935249,"node_id":"MDQ6VXNlcjY5MzUyNDk=","avatar_url":"https://avatars1.githubusercontent.com/u/6935249?v=4","gravatar_id":"","url":"https://api.github.com/users/marcuswr","html_url":"https://github.com/marcuswr","followers_url":"https://api.github.com/users/marcuswr/followers","following_url":"https://api.github.com/users/marcuswr/following{/other_user}","gists_url":"https://api.github.com/users/marcuswr/gists{/gist_id}","starred_url":"https://api.github.com/users/marcuswr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcuswr/subscriptions","organizations_url":"https://api.github.com/users/marcuswr/orgs","repos_url":"https://api.github.com/users/marcuswr/repos","events_url":"https://api.github.com/users/marcuswr/events{/privacy}","received_events_url":"https://api.github.com/users/marcuswr/received_events","type":"User","site_admin":false},"created_at":"2014-04-14T22:31:07Z","updated_at":"2014-04-14T22:31:07Z","author_association":"NONE","body":"I have added another file to the repository, with the subset of polygons,\nwhich still failed to ingest, after the patch was applied.\nhttps://github.com/marcuswr/elasticsearch-polygon-data/blob/master/patch_errors.geojson\n\nOn Mon, Apr 14, 2014 at 1:03 PM, Marcus Richardson\nmrichardson@climate.comwrote:\n\n> I have put up a file containing 15k+ polygons which had the same\n> ArrayIndexOutOfBoundsException against ES1.0+.  It is available at\n> https://github.com/marcuswr/elasticsearch-polygon-data.git\n> \n> Additionally, I have pulled down your fix locally (your branch of master,\n> and I used your patch against es 1.1).  I am able to insert some polygons\n> but\n> not all (I have not tried all of them).  I also cloned your gist to:\n> https://gist.github.com/marcuswr/493406918e0a9edeb509  The third\n> (test.geojson) renders correctly in the gist, however, does not work for me\n> against either patched version.  The 4th file (test1.geojson) does work in\n> both versions.\n> \n> On Mon, Apr 14, 2014 at 7:50 AM, Alexander Reelsen <\n> notifications@github.com> wrote:\n> \n> > I'd highly appreciate it, if you could test with the PR referenced\n> > above... it solves this problem, but maybe you could check if I introduced\n> > side effects (one just came to mind, which i need to check)...\n> > \n> > —\n> > Reply to this email directly or view it on GitHubhttps://github.com/elasticsearch/elasticsearch/issues/5773#issuecomment-40374176\n> > .\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/40893418","html_url":"https://github.com/elastic/elasticsearch/issues/5773#issuecomment-40893418","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5773","id":40893418,"node_id":"MDEyOklzc3VlQ29tbWVudDQwODkzNDE4","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2014-04-20T11:56:07Z","updated_at":"2014-04-20T11:56:07Z","author_association":"MEMBER","body":"thanks a lot for all the data, I will test with the other polygons as soon as possible (travelling a bit the next days, but will try to check ASAP).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/41741379","html_url":"https://github.com/elastic/elasticsearch/issues/5773#issuecomment-41741379","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5773","id":41741379,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNzQxMzc5","user":{"login":"marcuswr","id":6935249,"node_id":"MDQ6VXNlcjY5MzUyNDk=","avatar_url":"https://avatars1.githubusercontent.com/u/6935249?v=4","gravatar_id":"","url":"https://api.github.com/users/marcuswr","html_url":"https://github.com/marcuswr","followers_url":"https://api.github.com/users/marcuswr/followers","following_url":"https://api.github.com/users/marcuswr/following{/other_user}","gists_url":"https://api.github.com/users/marcuswr/gists{/gist_id}","starred_url":"https://api.github.com/users/marcuswr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcuswr/subscriptions","organizations_url":"https://api.github.com/users/marcuswr/orgs","repos_url":"https://api.github.com/users/marcuswr/repos","events_url":"https://api.github.com/users/marcuswr/events{/privacy}","received_events_url":"https://api.github.com/users/marcuswr/received_events","type":"User","site_admin":false},"created_at":"2014-04-29T22:42:11Z","updated_at":"2014-04-29T22:42:11Z","author_association":"NONE","body":"@spinscale wondering if you had a chance to look at this?  We are looking to do a major elastic search upgrade, but will not be able to without a fix.  Please let me know if there is anything I can do to assist.  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/41804246","html_url":"https://github.com/elastic/elasticsearch/issues/5773#issuecomment-41804246","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5773","id":41804246,"node_id":"MDEyOklzc3VlQ29tbWVudDQxODA0MjQ2","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2014-04-30T14:40:23Z","updated_at":"2014-04-30T14:40:23Z","author_association":"MEMBER","body":"sorry, did not yet have the time to check out all the other polygons you supplied due to traveling\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42620125","html_url":"https://github.com/elastic/elasticsearch/issues/5773#issuecomment-42620125","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5773","id":42620125,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNjIwMTI1","user":{"login":"marcuswr","id":6935249,"node_id":"MDQ6VXNlcjY5MzUyNDk=","avatar_url":"https://avatars1.githubusercontent.com/u/6935249?v=4","gravatar_id":"","url":"https://api.github.com/users/marcuswr","html_url":"https://github.com/marcuswr","followers_url":"https://api.github.com/users/marcuswr/followers","following_url":"https://api.github.com/users/marcuswr/following{/other_user}","gists_url":"https://api.github.com/users/marcuswr/gists{/gist_id}","starred_url":"https://api.github.com/users/marcuswr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcuswr/subscriptions","organizations_url":"https://api.github.com/users/marcuswr/orgs","repos_url":"https://api.github.com/users/marcuswr/repos","events_url":"https://api.github.com/users/marcuswr/events{/privacy}","received_events_url":"https://api.github.com/users/marcuswr/received_events","type":"User","site_admin":false},"created_at":"2014-05-08T23:50:20Z","updated_at":"2014-05-08T23:50:20Z","author_association":"NONE","body":"These polygons fail to ingest when the point in the hole (the first point in the LineString, or the leftmost point in the patched version https://github.com/elasticsearch/elasticsearch/pull/5796) has the same x coordinate (starting or ending) as 2 or more line segments of the shell.\nI have created another gist (https://gist.github.com/marcuswr/e0490b4f6e25b344e779) with simplified polygons which demonstrate this problem (hole_aligned.geojson, hole_aligned_simple.geojson).  These will fail on the patched version.  Changing the order of the coordinates in the hole so the leftmost coordinate is first and last (repeated), should result in it failing in both patched and non-patched).  There are additional polygons shown which touch or cross the dateline (the dateline hole should be removed from these polygons -> convert to multi-polygon).\nThese failures only occur when fixdateline = true.\n\nAdditionally, could you tell me why there is special handling of the ear in ShapeBuilder.intersections?\n                     if (Double.compare(p1.x, dateline) == Double.compare(edges[i].next.next.coordinate.x, dateline)) {\n                         // Ignore the ear\n\nAlso Double.compare is not guaranteed to return -1, 0, 1  I'm not sure what the equality is testing for.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42644902","html_url":"https://github.com/elastic/elasticsearch/issues/5773#issuecomment-42644902","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5773","id":42644902,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNjQ0OTAy","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2014-05-09T08:42:43Z","updated_at":"2014-05-09T08:42:43Z","author_association":"MEMBER","body":"thanks a lot for testing and debugging, your comments make a lot of sense, I will close the PR\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/43637871","html_url":"https://github.com/elastic/elasticsearch/issues/5773#issuecomment-43637871","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5773","id":43637871,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNjM3ODcx","user":{"login":"olimcc","id":842983,"node_id":"MDQ6VXNlcjg0Mjk4Mw==","avatar_url":"https://avatars0.githubusercontent.com/u/842983?v=4","gravatar_id":"","url":"https://api.github.com/users/olimcc","html_url":"https://github.com/olimcc","followers_url":"https://api.github.com/users/olimcc/followers","following_url":"https://api.github.com/users/olimcc/following{/other_user}","gists_url":"https://api.github.com/users/olimcc/gists{/gist_id}","starred_url":"https://api.github.com/users/olimcc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olimcc/subscriptions","organizations_url":"https://api.github.com/users/olimcc/orgs","repos_url":"https://api.github.com/users/olimcc/repos","events_url":"https://api.github.com/users/olimcc/events{/privacy}","received_events_url":"https://api.github.com/users/olimcc/received_events","type":"User","site_admin":false},"created_at":"2014-05-20T15:02:54Z","updated_at":"2014-05-20T15:02:54Z","author_association":"NONE","body":"Hey @spinscale sorry to bug, but do you think you could glance at this PR and at least indicate if ES would move forward with it? If so, we (I work with Marcus) can proceed locally as the finer details of the PR are worked out.\n","performed_via_github_app":null}]