[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/142487529","html_url":"https://github.com/elastic/elasticsearch/issues/12500#issuecomment-142487529","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12500","id":142487529,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MjQ4NzUyOQ==","user":{"login":"geekpete","id":2070843,"node_id":"MDQ6VXNlcjIwNzA4NDM=","avatar_url":"https://avatars2.githubusercontent.com/u/2070843?v=4","gravatar_id":"","url":"https://api.github.com/users/geekpete","html_url":"https://github.com/geekpete","followers_url":"https://api.github.com/users/geekpete/followers","following_url":"https://api.github.com/users/geekpete/following{/other_user}","gists_url":"https://api.github.com/users/geekpete/gists{/gist_id}","starred_url":"https://api.github.com/users/geekpete/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/geekpete/subscriptions","organizations_url":"https://api.github.com/users/geekpete/orgs","repos_url":"https://api.github.com/users/geekpete/repos","events_url":"https://api.github.com/users/geekpete/events{/privacy}","received_events_url":"https://api.github.com/users/geekpete/received_events","type":"User","site_admin":false},"created_at":"2015-09-23T04:35:17Z","updated_at":"2015-09-23T04:35:17Z","author_association":"MEMBER","body":"Almost needs a migration tool to move snapshots from s3 to glacier and back, where it tarballs and gzips (or some other method to create fewer or one file for glacier) then transfers to glacier. Then the reverse to \"put it back\" for restoration of the snapshot. \n\nWould be nicer to be a full plugin or be supported in the aws plugin,etc.\n\nWould also be nice if this could be very parallel.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148681731","html_url":"https://github.com/elastic/elasticsearch/issues/12500#issuecomment-148681731","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12500","id":148681731,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODY4MTczMQ==","user":{"login":"CliveJL","id":12729326,"node_id":"MDQ6VXNlcjEyNzI5MzI2","avatar_url":"https://avatars0.githubusercontent.com/u/12729326?v=4","gravatar_id":"","url":"https://api.github.com/users/CliveJL","html_url":"https://github.com/CliveJL","followers_url":"https://api.github.com/users/CliveJL/followers","following_url":"https://api.github.com/users/CliveJL/following{/other_user}","gists_url":"https://api.github.com/users/CliveJL/gists{/gist_id}","starred_url":"https://api.github.com/users/CliveJL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CliveJL/subscriptions","organizations_url":"https://api.github.com/users/CliveJL/orgs","repos_url":"https://api.github.com/users/CliveJL/repos","events_url":"https://api.github.com/users/CliveJL/events{/privacy}","received_events_url":"https://api.github.com/users/CliveJL/received_events","type":"User","site_admin":false},"created_at":"2015-10-16T10:51:59Z","updated_at":"2015-10-16T10:51:59Z","author_association":"NONE","body":"I have been successfully archiving ES Snapshots to Glacier using an S3 Bucket Lifecycle policy for some time now. This Lifecycle policy archives the S3 objects in the **\"indices/\" path only**. This covers all the large snapshot data files. The much smaller snapshot metadata files, in the \"root\" of the Bucket, **always remains in S3's Standard storage class**, so they can be read immediately without causing errors for actions such as displaying snapshot data, for example the Curator \"show snapshots\" command.\n\nOn the odd occasion when I've needed to restore an index from a snapshot, I've used the AWS CLI tools (aws s3 & aws s3api) to restore the data file(s) from Glacier first, waited a few hours, and then use the ES API to restore the index(es) into the ES cluster. This process is a little long-winded but works.\n\nOne issue I have just come across is trying to delete snapshots that are no longer required. The Curator tool is using the DELETE snapshot call to the ES API, and this is throwing an error due to the storage class of the S3 object (presumably the Glaciered \"indices/*\" files).\n\nIt would be great to have the handling of Glaciered snapshots by Elasticsearch done transparently.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/160642123","html_url":"https://github.com/elastic/elasticsearch/issues/12500#issuecomment-160642123","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12500","id":160642123,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MDY0MjEyMw==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-11-30T14:16:05Z","updated_at":"2015-11-30T14:16:05Z","author_association":"MEMBER","body":"See also discussion in #13656 \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/217320709","html_url":"https://github.com/elastic/elasticsearch/issues/12500#issuecomment-217320709","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12500","id":217320709,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNzMyMDcwOQ==","user":{"login":"geekpete","id":2070843,"node_id":"MDQ6VXNlcjIwNzA4NDM=","avatar_url":"https://avatars2.githubusercontent.com/u/2070843?v=4","gravatar_id":"","url":"https://api.github.com/users/geekpete","html_url":"https://github.com/geekpete","followers_url":"https://api.github.com/users/geekpete/followers","following_url":"https://api.github.com/users/geekpete/following{/other_user}","gists_url":"https://api.github.com/users/geekpete/gists{/gist_id}","starred_url":"https://api.github.com/users/geekpete/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/geekpete/subscriptions","organizations_url":"https://api.github.com/users/geekpete/orgs","repos_url":"https://api.github.com/users/geekpete/repos","events_url":"https://api.github.com/users/geekpete/events{/privacy}","received_events_url":"https://api.github.com/users/geekpete/received_events","type":"User","site_admin":false},"created_at":"2016-05-06T00:51:56Z","updated_at":"2016-05-06T00:58:30Z","author_association":"MEMBER","body":"Also to note is the new Infrequent Access storage class for S3 that Amazon now has.\nThis isn't as restrictive as Glacier, doesn't save you quite as much in cost but is still a very reduced cost compared to leaving it as is in S3. Which might make the glacier storage class slightly more special use case for only long term archival rather than pure cost saving now if much of your data may be ok to be set to Infrequent Access.\n\nhttps://aws.amazon.com/s3/storage-classes/\n\nActually [this ticket mentioned by dadoonet](https://github.com/elastic/elasticsearch/pull/13656) has had a pull request merged and might have solved it:\nhttps://github.com/elastic/elasticsearch-cloud-aws/pull/243\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/375013311","html_url":"https://github.com/elastic/elasticsearch/issues/12500#issuecomment-375013311","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12500","id":375013311,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NTAxMzMxMQ==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2018-03-21T16:48:02Z","updated_at":"2018-03-21T16:48:02Z","author_association":"CONTRIBUTOR","body":"@geekpete The S3 plugin supports the `storage_class` setting that can be set to `STANDARD_IA` for the infrequent access storage.\r\nWe explicitly forbid the `GLACIER` storage class, as writing a snapshot currently also potentially involves reading a lot of metadata files (low retrieval time, high costs). As such, I'm closing this issue. Please feel free to comment or +1 here if you want to add your point of view.","performed_via_github_app":null}]