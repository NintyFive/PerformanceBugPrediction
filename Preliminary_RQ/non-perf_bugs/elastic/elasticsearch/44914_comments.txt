[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/515539388","html_url":"https://github.com/elastic/elasticsearch/issues/44914#issuecomment-515539388","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44914","id":515539388,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTUzOTM4OA==","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"created_at":"2019-07-26T17:39:39Z","updated_at":"2019-07-26T17:39:39Z","author_association":"MEMBER","body":"/cc @pcsanwald","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/515542621","html_url":"https://github.com/elastic/elasticsearch/issues/44914#issuecomment-515542621","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44914","id":515542621,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTU0MjYyMQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-07-26T17:49:41Z","updated_at":"2019-07-26T17:49:41Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-analytics-geo","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/515544407","html_url":"https://github.com/elastic/elasticsearch/issues/44914#issuecomment-515544407","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44914","id":515544407,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTU0NDQwNw==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2019-07-26T17:55:07Z","updated_at":"2019-07-26T17:55:07Z","author_association":"MEMBER","body":"@igoristic Do you have a stack trace or error from Elasticsearch when it fails to work with the bucket script?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/515545587","html_url":"https://github.com/elastic/elasticsearch/issues/44914#issuecomment-515545587","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44914","id":515545587,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTU0NTU4Nw==","user":{"login":"pcsanwald","id":163306,"node_id":"MDQ6VXNlcjE2MzMwNg==","avatar_url":"https://avatars1.githubusercontent.com/u/163306?v=4","gravatar_id":"","url":"https://api.github.com/users/pcsanwald","html_url":"https://github.com/pcsanwald","followers_url":"https://api.github.com/users/pcsanwald/followers","following_url":"https://api.github.com/users/pcsanwald/following{/other_user}","gists_url":"https://api.github.com/users/pcsanwald/gists{/gist_id}","starred_url":"https://api.github.com/users/pcsanwald/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pcsanwald/subscriptions","organizations_url":"https://api.github.com/users/pcsanwald/orgs","repos_url":"https://api.github.com/users/pcsanwald/repos","events_url":"https://api.github.com/users/pcsanwald/events{/privacy}","received_events_url":"https://api.github.com/users/pcsanwald/received_events","type":"User","site_admin":false},"created_at":"2019-07-26T17:58:56Z","updated_at":"2019-07-26T17:58:56Z","author_association":"CONTRIBUTOR","body":"@polyfractal I've been looking into this a bit already, so I assigned to me. working with @pickypg, I do have access to a cluster where we can repro this error.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/515552015","html_url":"https://github.com/elastic/elasticsearch/issues/44914#issuecomment-515552015","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44914","id":515552015,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTU1MjAxNQ==","user":{"login":"igoristic","id":27822304,"node_id":"MDQ6VXNlcjI3ODIyMzA0","avatar_url":"https://avatars2.githubusercontent.com/u/27822304?v=4","gravatar_id":"","url":"https://api.github.com/users/igoristic","html_url":"https://github.com/igoristic","followers_url":"https://api.github.com/users/igoristic/followers","following_url":"https://api.github.com/users/igoristic/following{/other_user}","gists_url":"https://api.github.com/users/igoristic/gists{/gist_id}","starred_url":"https://api.github.com/users/igoristic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/igoristic/subscriptions","organizations_url":"https://api.github.com/users/igoristic/orgs","repos_url":"https://api.github.com/users/igoristic/repos","events_url":"https://api.github.com/users/igoristic/events{/privacy}","received_events_url":"https://api.github.com/users/igoristic/received_events","type":"User","site_admin":false},"created_at":"2019-07-26T18:19:35Z","updated_at":"2019-07-26T18:19:35Z","author_association":"NONE","body":"> Do you have a stack trace or error from Elasticsearch when it fails to work with the bucket script? \r\n```json\r\n{\r\n  \"error\": {\r\n    \"root_cause\": [],\r\n    \"type\": \"search_phase_execution_exception\",\r\n    \"reason\": \"\",\r\n    \"phase\": \"fetch\",\r\n    \"grouped\": true,\r\n    \"failed_shards\": [],\r\n    \"caused_by\": {\r\n      \"type\": \"unsupported_operation_exception\",\r\n      \"reason\": \"Not supported\"\r\n    }\r\n  },\r\n  \"status\": 500\r\n}\r\n```\r\nES output:\r\n```\r\npath: /.monitoring-logstash-6-*,.monitoring-logstash-7-*/_search, params: {pretty=, index=.monitoring-logstash-6-*,.monitoring-logstash-7-*}\r\n   │      org.elasticsearch.action.search.SearchPhaseExecutionException: \r\n   │            at org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseFailure(AbstractSearchAsyncAction.java:305) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n   │            at org.elasticsearch.action.search.FetchSearchPhase$1.onFailure(FetchSearchPhase.java:91) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n   │            at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:39) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n   │            at org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:44) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n   │            at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:769) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n   │            at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) [elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n   │            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]\r\n   │            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]\r\n   │            at java.lang.Thread.run(Thread.java:835) [?:?]\r\n   │      Caused by: java.lang.UnsupportedOperationException: Not supported\r\n   │            at org.elasticsearch.search.aggregations.pipeline.InternalSimpleValue.doReduce(InternalSimpleValue.java:80) ~[elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n   │            at org.elasticsearch.search.aggregations.pipeline.InternalSimpleValue.doReduce(InternalSimpleValue.java:34) ~[elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n   │            at org.elasticsearch.search.aggregations.InternalAggregation.reduce(InternalAggregation.java:135) ~[elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n   │            at org.elasticsearch.search.aggregations.InternalAggregations.reduce(InternalAggregations.java:123) ~[elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n   │            at org.elasticsearch.search.aggregations.bucket.terms.InternalTerms$Bucket.reduce(InternalTerms.java:142) ~[elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n   │            at org.elasticsearch.search.aggregations.bucket.terms.InternalTerms.doReduce(InternalTerms.java:286) ~[elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n   │            at org.elasticsearch.search.aggregations.InternalAggregation.reduce(InternalAggregation.java:135) ~[elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n   │            at org.elasticsearch.search.aggregations.InternalAggregations.reduce(InternalAggregations.java:123) ~[elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n   │            at org.elasticsearch.search.aggregations.bucket.InternalSingleBucketAggregation.doReduce(InternalSingleBucketAggregation.java:108) ~[elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n   │            at org.elasticsearch.search.aggregations.InternalAggregation.reduce(InternalAggregation.java:135) ~[elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n   │            at org.elasticsearch.search.aggregations.InternalAggregations.reduce(InternalAggregations.java:123) ~[elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n   │            at org.elasticsearch.search.aggregations.bucket.histogram.InternalAutoDateHistogram$Bucket.reduce(InternalAutoDateHistogram.java:131) ~[elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n   │            at org.elasticsearch.search.aggregations.bucket.histogram.InternalAutoDateHistogram.mergeBuckets(InternalAutoDateHistogram.java:394) ~[elasticsearch-8.0.0-SNAPSHOT.jar:8.0.0-SNAPSHOT]\r\n```\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/517333166","html_url":"https://github.com/elastic/elasticsearch/issues/44914#issuecomment-517333166","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44914","id":517333166,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzMzMzE2Ng==","user":{"login":"cachedout","id":111616,"node_id":"MDQ6VXNlcjExMTYxNg==","avatar_url":"https://avatars3.githubusercontent.com/u/111616?v=4","gravatar_id":"","url":"https://api.github.com/users/cachedout","html_url":"https://github.com/cachedout","followers_url":"https://api.github.com/users/cachedout/followers","following_url":"https://api.github.com/users/cachedout/following{/other_user}","gists_url":"https://api.github.com/users/cachedout/gists{/gist_id}","starred_url":"https://api.github.com/users/cachedout/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cachedout/subscriptions","organizations_url":"https://api.github.com/users/cachedout/orgs","repos_url":"https://api.github.com/users/cachedout/repos","events_url":"https://api.github.com/users/cachedout/events{/privacy}","received_events_url":"https://api.github.com/users/cachedout/received_events","type":"User","site_admin":false},"created_at":"2019-08-01T15:19:11Z","updated_at":"2019-08-01T15:19:11Z","author_association":"CONTRIBUTOR","body":"Hi @pcsanwald. Any updates on this? This bug is a blocker for a high-priority bug in the Stack Monitoring application that causes it to become unusable under certain conditions and we're hoping to try to get a fix pushed quickly. We're happy to do whatever we can to help. :)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/519155021","html_url":"https://github.com/elastic/elasticsearch/issues/44914#issuecomment-519155021","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44914","id":519155021,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTE1NTAyMQ==","user":{"login":"nknize","id":830187,"node_id":"MDQ6VXNlcjgzMDE4Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/830187?v=4","gravatar_id":"","url":"https://api.github.com/users/nknize","html_url":"https://github.com/nknize","followers_url":"https://api.github.com/users/nknize/followers","following_url":"https://api.github.com/users/nknize/following{/other_user}","gists_url":"https://api.github.com/users/nknize/gists{/gist_id}","starred_url":"https://api.github.com/users/nknize/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nknize/subscriptions","organizations_url":"https://api.github.com/users/nknize/orgs","repos_url":"https://api.github.com/users/nknize/repos","events_url":"https://api.github.com/users/nknize/events{/privacy}","received_events_url":"https://api.github.com/users/nknize/received_events","type":"User","site_admin":false},"created_at":"2019-08-07T15:45:03Z","updated_at":"2019-08-07T15:45:03Z","author_association":"CONTRIBUTOR","body":"@cachedout do you have a link to an issue for the high priority bug that's blocking you? Or is it the [kibana bug](https://github.com/elastic/kibana/issues/37246) referenced in this issue above?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/519155241","html_url":"https://github.com/elastic/elasticsearch/issues/44914#issuecomment-519155241","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44914","id":519155241,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTE1NTI0MQ==","user":{"login":"pcsanwald","id":163306,"node_id":"MDQ6VXNlcjE2MzMwNg==","avatar_url":"https://avatars1.githubusercontent.com/u/163306?v=4","gravatar_id":"","url":"https://api.github.com/users/pcsanwald","html_url":"https://github.com/pcsanwald","followers_url":"https://api.github.com/users/pcsanwald/followers","following_url":"https://api.github.com/users/pcsanwald/following{/other_user}","gists_url":"https://api.github.com/users/pcsanwald/gists{/gist_id}","starred_url":"https://api.github.com/users/pcsanwald/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pcsanwald/subscriptions","organizations_url":"https://api.github.com/users/pcsanwald/orgs","repos_url":"https://api.github.com/users/pcsanwald/repos","events_url":"https://api.github.com/users/pcsanwald/events{/privacy}","received_events_url":"https://api.github.com/users/pcsanwald/received_events","type":"User","site_admin":false},"created_at":"2019-08-07T15:45:35Z","updated_at":"2019-08-07T15:45:35Z","author_association":"CONTRIBUTOR","body":"@cachedout apologies for the late response. We're discussing how to deal with this, it's due to some of the specifics of pipeline aggs. It's not a trivial fix, @polyfractal will be looking into this.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/519247629","html_url":"https://github.com/elastic/elasticsearch/issues/44914#issuecomment-519247629","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44914","id":519247629,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTI0NzYyOQ==","user":{"login":"cachedout","id":111616,"node_id":"MDQ6VXNlcjExMTYxNg==","avatar_url":"https://avatars3.githubusercontent.com/u/111616?v=4","gravatar_id":"","url":"https://api.github.com/users/cachedout","html_url":"https://github.com/cachedout","followers_url":"https://api.github.com/users/cachedout/followers","following_url":"https://api.github.com/users/cachedout/following{/other_user}","gists_url":"https://api.github.com/users/cachedout/gists{/gist_id}","starred_url":"https://api.github.com/users/cachedout/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cachedout/subscriptions","organizations_url":"https://api.github.com/users/cachedout/orgs","repos_url":"https://api.github.com/users/cachedout/repos","events_url":"https://api.github.com/users/cachedout/events{/privacy}","received_events_url":"https://api.github.com/users/cachedout/received_events","type":"User","site_admin":false},"created_at":"2019-08-07T20:01:15Z","updated_at":"2019-08-07T20:01:15Z","author_association":"CONTRIBUTOR","body":"@pcsanwald Thank you for the update.\r\n\r\n@nknize Yes, it is the issue you linked to. @igoristic can help provide more context as well.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/519547677","html_url":"https://github.com/elastic/elasticsearch/issues/44914#issuecomment-519547677","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44914","id":519547677,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTU0NzY3Nw==","user":{"login":"igoristic","id":27822304,"node_id":"MDQ6VXNlcjI3ODIyMzA0","avatar_url":"https://avatars2.githubusercontent.com/u/27822304?v=4","gravatar_id":"","url":"https://api.github.com/users/igoristic","html_url":"https://github.com/igoristic","followers_url":"https://api.github.com/users/igoristic/followers","following_url":"https://api.github.com/users/igoristic/following{/other_user}","gists_url":"https://api.github.com/users/igoristic/gists{/gist_id}","starred_url":"https://api.github.com/users/igoristic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/igoristic/subscriptions","organizations_url":"https://api.github.com/users/igoristic/orgs","repos_url":"https://api.github.com/users/igoristic/repos","events_url":"https://api.github.com/users/igoristic/events{/privacy}","received_events_url":"https://api.github.com/users/igoristic/received_events","type":"User","site_admin":false},"created_at":"2019-08-08T14:40:05Z","updated_at":"2019-08-08T14:50:24Z","author_association":"NONE","body":"@nknize Yeah, it's the issue you linked to, and this issue is already affecting some customers in live productions.\r\n\r\nThe `auto_date_histogram` feature/fix will help us fix two issues:\r\n- Max bucket error `too_many_buckets_exception`\r\n- OOM because of pipeline aggs using `date_histogram`\r\n\r\nelastic/kibana#37246","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/520537031","html_url":"https://github.com/elastic/elasticsearch/issues/44914#issuecomment-520537031","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44914","id":520537031,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDUzNzAzMQ==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2019-08-12T18:17:05Z","updated_at":"2019-08-12T18:17:05Z","author_association":"MEMBER","body":"Just merged #45359, which should resolve this issue. :)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/520595429","html_url":"https://github.com/elastic/elasticsearch/issues/44914#issuecomment-520595429","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44914","id":520595429,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDU5NTQyOQ==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2019-08-12T21:06:18Z","updated_at":"2019-08-12T21:06:18Z","author_association":"MEMBER","body":"False alarm, sorry. :(  The bugfix is mostly correct I think, but there is a failing test that makes me think it isn't fully fixed yet.  I'm going to revert the commit and try again, will keep this thread updated.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/523488320","html_url":"https://github.com/elastic/elasticsearch/issues/44914#issuecomment-523488320","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44914","id":523488320,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMzQ4ODMyMA==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2019-08-21T14:42:02Z","updated_at":"2019-08-21T14:42:02Z","author_association":"MEMBER","body":"I have opened a new PR to fix this issue (which I thought I had reopened, but apparently not).  Will update again when the new PR merges :)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/562306135","html_url":"https://github.com/elastic/elasticsearch/issues/44914#issuecomment-562306135","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44914","id":562306135,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MjMwNjEzNQ==","user":{"login":"pcsanwald","id":163306,"node_id":"MDQ6VXNlcjE2MzMwNg==","avatar_url":"https://avatars1.githubusercontent.com/u/163306?v=4","gravatar_id":"","url":"https://api.github.com/users/pcsanwald","html_url":"https://github.com/pcsanwald","followers_url":"https://api.github.com/users/pcsanwald/followers","following_url":"https://api.github.com/users/pcsanwald/following{/other_user}","gists_url":"https://api.github.com/users/pcsanwald/gists{/gist_id}","starred_url":"https://api.github.com/users/pcsanwald/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pcsanwald/subscriptions","organizations_url":"https://api.github.com/users/pcsanwald/orgs","repos_url":"https://api.github.com/users/pcsanwald/repos","events_url":"https://api.github.com/users/pcsanwald/events{/privacy}","received_events_url":"https://api.github.com/users/pcsanwald/received_events","type":"User","site_admin":false},"created_at":"2019-12-05T20:34:41Z","updated_at":"2019-12-05T20:34:41Z","author_association":"CONTRIBUTOR","body":"accidentally closed this one, thanks @pickypg for the catch. apologies\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/562320546","html_url":"https://github.com/elastic/elasticsearch/issues/44914#issuecomment-562320546","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44914","id":562320546,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MjMyMDU0Ng==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2019-12-05T21:13:17Z","updated_at":"2019-12-05T21:13:17Z","author_association":"MEMBER","body":"Luckily, I just merged #45796 so we can go ahead and close again :)\r\n\r\n(So sorry for the delay on this, the PR got LGTM but it fell through the cracks and I never merged it :sob: )","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/564161902","html_url":"https://github.com/elastic/elasticsearch/issues/44914#issuecomment-564161902","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44914","id":564161902,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDE2MTkwMg==","user":{"login":"chrisronline","id":56682,"node_id":"MDQ6VXNlcjU2Njgy","avatar_url":"https://avatars1.githubusercontent.com/u/56682?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisronline","html_url":"https://github.com/chrisronline","followers_url":"https://api.github.com/users/chrisronline/followers","following_url":"https://api.github.com/users/chrisronline/following{/other_user}","gists_url":"https://api.github.com/users/chrisronline/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisronline/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisronline/subscriptions","organizations_url":"https://api.github.com/users/chrisronline/orgs","repos_url":"https://api.github.com/users/chrisronline/repos","events_url":"https://api.github.com/users/chrisronline/events{/privacy}","received_events_url":"https://api.github.com/users/chrisronline/received_events","type":"User","site_admin":false},"created_at":"2019-12-10T18:13:11Z","updated_at":"2019-12-10T22:09:07Z","author_association":"CONTRIBUTOR","body":"Hey @polyfractal,\r\n\r\nI'm seeing some unexpected behavior that I think is related to this PR.\r\n\r\nIt seems that `bucket_script` aggregations isn't working properly with the `nested` aggregation.\r\n\r\nSee this example here: https://gist.github.com/chrisronline/836dbbdb594d5848538e412236f32147\r\n\r\nFor 7.5 and below, the output is:\r\n```\r\n{\r\n  \"aggregations\" : {\r\n    \"date_histo\" : {\r\n      \"buckets\" : [\r\n        {\r\n          \"in_nested\" : {\r\n            \"types\" : {\r\n              \"buckets\" : [\r\n                {\r\n                  \"bs_value\" : {\r\n                    \"value\" : 1.0\r\n                  }\r\n                }\r\n              ]\r\n            }\r\n          },\r\n          \"high_level_bs_value\" : {\r\n            \"value\" : 0.0\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nFor 7.6 and above, the output is:\r\n```\r\n{\r\n  \"aggregations\" : {\r\n    \"date_histo\" : {\r\n      \"buckets\" : [\r\n        {\r\n          \"high_level_bs_value\" : {\r\n            \"value\" : 0.0\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nIs this intended? (As a side note for @elastic/stack-monitoring folks, this is causing this failure: https://github.com/elastic/kibana/issues/52470)","performed_via_github_app":null}]