[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64046327","html_url":"https://github.com/elastic/elasticsearch/issues/8603#issuecomment-64046327","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8603","id":64046327,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MDQ2MzI3","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2014-11-21T22:12:26Z","updated_at":"2014-11-21T22:12:26Z","author_association":"CONTRIBUTOR","body":"one idea i had here was to configure more fine-grained integration with infostream.\n\nrather than just setting `lucene.iw` to TRACE, maybe if we could set `lucene.iw.ifd`, then it would filter by \"ifd\" infostream component. this would give us the ability to have a default that tells us the important stuff (maybe deleting files and merges, for example).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64050360","html_url":"https://github.com/elastic/elasticsearch/issues/8603#issuecomment-64050360","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8603","id":64050360,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MDUwMzYw","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2014-11-21T22:48:15Z","updated_at":"2014-11-21T22:48:15Z","author_association":"CONTRIBUTOR","body":"> one idea i had here was to configure more fine-grained integration with infostream.\n\n+1, that's a nice idea.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64380329","html_url":"https://github.com/elastic/elasticsearch/issues/8603#issuecomment-64380329","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8603","id":64380329,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MzgwMzI5","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2014-11-25T10:36:24Z","updated_at":"2014-11-25T10:36:24Z","author_association":"CONTRIBUTOR","body":"Work in progress: https://github.com/mikemccand/elasticsearch/tree/log_file_deletes\n\nI think ideally for this to be effective as a \"why is this index file missing on corruption\", we need to have file deleting logged by default?  This may be too noisy though...\n\nAs a start, I broke out a separate \"lucene.iw.ifd\", but then I'm not sure how to handle other places in ES that delete files.  E.g. I added a \"logger.info\" in RecoveryTarget.CleanFilesRequestHandler, but then you can't easily turn it off w/o turning off all INFO level logging for RecoveryTarget.\n\nMaybe we should be logging down inside Directory?  E.g. we'd wrap the shard's Directory instance, and in its deleteFile, go log the delete to a new logger?  And I suppose also fix all file deletion outside of Lucene's Directory (i.e. direct calls to Files.delete) to tell this new logger as well...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64383803","html_url":"https://github.com/elastic/elasticsearch/issues/8603#issuecomment-64383803","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8603","id":64383803,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MzgzODAz","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2014-11-25T11:02:14Z","updated_at":"2014-11-25T11:02:14Z","author_association":"CONTRIBUTOR","body":"Related: I fixed a couple places in Lucene (IndexWriter) that Rob found, which were logging unnecessarily and causing tons of output, at least in the \"many shards\" case ... we'll get that on next Lucene upgrade.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64598683","html_url":"https://github.com/elastic/elasticsearch/issues/8603#issuecomment-64598683","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8603","id":64598683,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTk4Njgz","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2014-11-26T12:41:16Z","updated_at":"2014-11-26T12:41:16Z","author_association":"CONTRIBUTOR","body":"> Maybe we should be logging down inside Directory? E.g. we'd wrap the shard's Directory instance, and in its deleteFile, go log the delete to a new logger? And I suppose also fix all file deletion outside of Lucene's Directory (i.e. direct calls to Files.delete) to tell this new logger as well...\n\nis it useful to just log that a file was deleted? If you are debugging a missing file, you dont need a log file to tell you this!!!! its having the right amount of context around _why_ it was deleted that is important. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64602478","html_url":"https://github.com/elastic/elasticsearch/issues/8603#issuecomment-64602478","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8603","id":64602478,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NjAyNDc4","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2014-11-26T13:16:37Z","updated_at":"2014-11-26T13:16:37Z","author_association":"CONTRIBUTOR","body":"> is it useful to just log that a file was deleted? \n\nI think it is useful to know that it was Directory.deleteFile that did the deleting, vs. e.g. Files.delete elsewhere, or vs. something outside of ES doing the deletions?\n\nWe do also get context from lucene.iw.ifd (it was Lucene that deleted), and 2 places in ES that seemed to delete Lucene index files (I added separate logging).\n","performed_via_github_app":null}]