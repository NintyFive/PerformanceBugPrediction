[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/24320271","html_url":"https://github.com/elastic/elasticsearch/issues/3672#issuecomment-24320271","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3672","id":24320271,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzIwMjcx","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2013-09-12T13:46:20Z","updated_at":"2013-09-12T13:46:20Z","author_association":"MEMBER","body":"Similar to #2078 . True, when you order by count, the items with the same count could be better ordered. This happens simply because the same sort direction is applied to the terms too when the count is the same. Here is an example:\n\n```\n\"order\" : \"count\" (aka order count descending)\na10 (100)  \nz1 (1)\na1 (1)\n```\n\n```\n\"order\" : \"reverse_count\" (aka order count ascending)\na1 (1)\nz1 (1)\na10 (100)  \n```\n\nI agree this is not great but it happens as we support a single order option. It would probably be better to always sort alphabetically ascending when the count is the same. Or even better being able to combine different sorting strategies together as mentioned in #2078. As a side note, this is going to be improved with the new aggregations module (issue #3300).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/24348401","html_url":"https://github.com/elastic/elasticsearch/issues/3672#issuecomment-24348401","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3672","id":24348401,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzQ4NDAx","user":{"login":"CodingFabian","id":176132,"node_id":"MDQ6VXNlcjE3NjEzMg==","avatar_url":"https://avatars1.githubusercontent.com/u/176132?v=4","gravatar_id":"","url":"https://api.github.com/users/CodingFabian","html_url":"https://github.com/CodingFabian","followers_url":"https://api.github.com/users/CodingFabian/followers","following_url":"https://api.github.com/users/CodingFabian/following{/other_user}","gists_url":"https://api.github.com/users/CodingFabian/gists{/gist_id}","starred_url":"https://api.github.com/users/CodingFabian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CodingFabian/subscriptions","organizations_url":"https://api.github.com/users/CodingFabian/orgs","repos_url":"https://api.github.com/users/CodingFabian/repos","events_url":"https://api.github.com/users/CodingFabian/events{/privacy}","received_events_url":"https://api.github.com/users/CodingFabian/received_events","type":"User","site_admin":false},"created_at":"2013-09-12T19:22:43Z","updated_at":"2013-09-12T19:22:43Z","author_association":"NONE","body":"Hi Luca,\nI would be happy with getting unsorted facets. then i sort them myself. This would save some computing time on your end if i could ask for \"order\" : \"unsorted\"\n\nI would be happy with that.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/24351620","html_url":"https://github.com/elastic/elasticsearch/issues/3672#issuecomment-24351620","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3672","id":24351620,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzUxNjIw","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2013-09-12T20:08:20Z","updated_at":"2013-09-12T20:08:20Z","author_association":"MEMBER","body":"Hi Fabian,\nsorting is not just about showing the buckets in a certain order. In a distributed environment the terms are collected on each shard. Only the top ones (based on how you decided to order them) are returned to the node that will actually do the reduce, so that only \"the top of the top ones\" are effectively returned, again based on how you decided to order them. If you order by count, you can see the issue that you reported when the count is the same for some entries, but the entries that get returned will still be the ones with higher count. Removing the sorting at all would lead to get random facet entries back, is that what you mean?\n\nI think this makes sense only if you are actually retrieving all the possible facet entries specifying a high `size` parameter. Is there anything I'm missing?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/24361572","html_url":"https://github.com/elastic/elasticsearch/issues/3672#issuecomment-24361572","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3672","id":24361572,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzYxNTcy","user":{"login":"CodingFabian","id":176132,"node_id":"MDQ6VXNlcjE3NjEzMg==","avatar_url":"https://avatars1.githubusercontent.com/u/176132?v=4","gravatar_id":"","url":"https://api.github.com/users/CodingFabian","html_url":"https://github.com/CodingFabian","followers_url":"https://api.github.com/users/CodingFabian/followers","following_url":"https://api.github.com/users/CodingFabian/following{/other_user}","gists_url":"https://api.github.com/users/CodingFabian/gists{/gist_id}","starred_url":"https://api.github.com/users/CodingFabian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CodingFabian/subscriptions","organizations_url":"https://api.github.com/users/CodingFabian/orgs","repos_url":"https://api.github.com/users/CodingFabian/repos","events_url":"https://api.github.com/users/CodingFabian/events{/privacy}","received_events_url":"https://api.github.com/users/CodingFabian/received_events","type":"User","site_admin":false},"created_at":"2013-09-12T22:42:23Z","updated_at":"2013-09-12T22:42:23Z","author_association":"NONE","body":"oh yeah, I missed that bit. but perhaps thats not a good enough usecase to be supported.\nI guess i will go with just accepting the current count order and anyway resort it.\nyou may close this as duplicate if you desire :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/24393259","html_url":"https://github.com/elastic/elasticsearch/issues/3672#issuecomment-24393259","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3672","id":24393259,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzkzMjU5","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2013-09-13T13:11:51Z","updated_at":"2013-09-13T13:11:51Z","author_association":"MEMBER","body":"Thanks for your feedback! I would close this one and suggest to move this discussion about sorting entries to the aggregations issue (#3300).\n","performed_via_github_app":null}]