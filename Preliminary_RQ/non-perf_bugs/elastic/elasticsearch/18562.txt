{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/18562","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18562/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18562/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18562/events","html_url":"https://github.com/elastic/elasticsearch/issues/18562","id":156654882,"node_id":"MDU6SXNzdWUxNTY2NTQ4ODI=","number":18562,"title":"error message for heap size bootstrap check does not guide user","user":{"login":"djschny","id":129643,"node_id":"MDQ6VXNlcjEyOTY0Mw==","avatar_url":"https://avatars0.githubusercontent.com/u/129643?v=4","gravatar_id":"","url":"https://api.github.com/users/djschny","html_url":"https://github.com/djschny","followers_url":"https://api.github.com/users/djschny/followers","following_url":"https://api.github.com/users/djschny/following{/other_user}","gists_url":"https://api.github.com/users/djschny/gists{/gist_id}","starred_url":"https://api.github.com/users/djschny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djschny/subscriptions","organizations_url":"https://api.github.com/users/djschny/orgs","repos_url":"https://api.github.com/users/djschny/repos","events_url":"https://api.github.com/users/djschny/events{/privacy}","received_events_url":"https://api.github.com/users/djschny/received_events","type":"User","site_admin":false},"labels":[{"id":144797810,"node_id":"MDU6TGFiZWwxNDQ3OTc4MTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Core","name":":Core/Infra/Core","color":"0e8a16","default":false,"description":"Core issues without another label"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2016-05-25T03:19:13Z","updated_at":"2018-02-13T19:37:04Z","closed_at":"2016-05-27T22:46:30Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Elasticsearch version**: 5.0.0-alpha3 internal RC 1\n\n**JVM version**: 1.8.0_74-b02\n\n**OS version**: OSX 10.11.4\n\n**Description of the problem including expected versus actual behavior**: \nAfter binding elasticsearch to a public facing network interface the bootstrap checks kick in. They are great and usually very directly and immediately allow the user to know what setting to set immediately. For example with the `discovery.zen.minimum_master_nodes`. However the heap size check states there is a problem but does not guide the user towards an example command line argument or property to set to remediate the problem as clear as the other bootstrap checks do. Not the end of the world, but definitely I think some quick wording could help remediate and provide a better user experience.\n\n**Steps to reproduce**:\n1. Startup elasticsearch binding to `0.0.0.0`\n2. Notice the message for heap size does not directly guide the user on how to set them to be the same.\n\n**Provide logs (if relevant)**:\n\n```\ndjschny:elasticsearch-5.0.0-alpha3 djschny$ bin/elasticsearch -E network.host=0.0.0.0 -E discovery.zen.minimum_master_nodes=1\n[2016-05-24 21:49:34,540][INFO ][node                     ] [Jim Hammond] version[5.0.0-alpha3], pid[43525], build[b3a8c54/2016-05-24T18:55:09.209Z]\n[2016-05-24 21:49:34,541][INFO ][node                     ] [Jim Hammond] initializing ...\n[2016-05-24 21:49:35,141][INFO ][plugins                  ] [Jim Hammond] modules [percolator, lang-mustache, lang-painless, ingest-grok, reindex, lang-expression, lang-groovy], plugins []\n[2016-05-24 21:49:35,172][INFO ][env                      ] [Jim Hammond] using [1] data paths, mounts [[/ (/dev/disk1)]], net usable_space [148.2gb], net total_space [464.7gb], spins? [unknown], types [hfs]\n[2016-05-24 21:49:35,172][INFO ][env                      ] [Jim Hammond] heap size [1.9gb], compressed ordinary object pointers [true]\n[2016-05-24 21:49:37,310][INFO ][node                     ] [Jim Hammond] initialized\n[2016-05-24 21:49:37,311][INFO ][node                     ] [Jim Hammond] starting ...\n[2016-05-24 21:49:37,388][INFO ][transport                ] [Jim Hammond] publish_address {192.168.43.85:9300}, bound_addresses {[::]:9300}\nException in thread \"main\" java.lang.RuntimeException: bootstrap checks failed\ninitial heap size [268435456] not equal to maximum heap size [2147483648]; this can cause resize pauses and prevents mlockall from locking the entire heap\n    at org.elasticsearch.bootstrap.BootstrapCheck.check(BootstrapCheck.java:125)\n    at org.elasticsearch.bootstrap.BootstrapCheck.check(BootstrapCheck.java:85)\n    at org.elasticsearch.bootstrap.BootstrapCheck.check(BootstrapCheck.java:65)\n    at org.elasticsearch.bootstrap.Bootstrap$5.validateNodeBeforeAcceptingRequests(Bootstrap.java:183)\n    at org.elasticsearch.node.Node.start(Node.java:323)\n    at org.elasticsearch.bootstrap.Bootstrap.start(Bootstrap.java:198)\n    at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:257)\n    at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:96)\n    at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:91)\n    at org.elasticsearch.cli.SettingCommand.execute(SettingCommand.java:54)\n    at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:91)\n    at org.elasticsearch.cli.Command.main(Command.java:53)\n    at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:70)\n    at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:63)\nRefer to the log for complete error details.\n```\n\nUltimately I did the following to make this work:\n\n`ES_JAVA_OPTS=\"-Xms1024m -Xmx1024m\" bin/elasticsearch -E network.host=0.0.0.0 -E discovery.zen.minimum_master_nodes=1`\n\nSo perhaps guidance towards the `ES_JAVA_OPTS` example I think would go a long way. Once again minor in regards to technical, but I believe huge in regards to getting to a running state quicker.\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}