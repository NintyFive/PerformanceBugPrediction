[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/182498625","html_url":"https://github.com/elastic/elasticsearch/issues/16583#issuecomment-182498625","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16583","id":182498625,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MjQ5ODYyNQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2016-02-10T17:45:43Z","updated_at":"2016-02-10T17:45:43Z","author_association":"MEMBER","body":"This works fine for me (with a simple match all query). Can you give a recreation (putting documents and running the two queries)? Do you see the same problem when using a simple query like `match_all`?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/182504255","html_url":"https://github.com/elastic/elasticsearch/issues/16583#issuecomment-182504255","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16583","id":182504255,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MjUwNDI1NQ==","user":{"login":"ryanmcilmoyl","id":10815,"node_id":"MDQ6VXNlcjEwODE1","avatar_url":"https://avatars3.githubusercontent.com/u/10815?v=4","gravatar_id":"","url":"https://api.github.com/users/ryanmcilmoyl","html_url":"https://github.com/ryanmcilmoyl","followers_url":"https://api.github.com/users/ryanmcilmoyl/followers","following_url":"https://api.github.com/users/ryanmcilmoyl/following{/other_user}","gists_url":"https://api.github.com/users/ryanmcilmoyl/gists{/gist_id}","starred_url":"https://api.github.com/users/ryanmcilmoyl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryanmcilmoyl/subscriptions","organizations_url":"https://api.github.com/users/ryanmcilmoyl/orgs","repos_url":"https://api.github.com/users/ryanmcilmoyl/repos","events_url":"https://api.github.com/users/ryanmcilmoyl/events{/privacy}","received_events_url":"https://api.github.com/users/ryanmcilmoyl/received_events","type":"User","site_admin":false},"created_at":"2016-02-10T17:58:40Z","updated_at":"2016-02-10T17:58:40Z","author_association":"NONE","body":"Just tested with match_all, works as expected.  Also works when just doing the `bool` query, without the `function_score`.  Seems to be the combination of the 2.\n\nI'll build out a test case and post it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/182877423","html_url":"https://github.com/elastic/elasticsearch/issues/16583#issuecomment-182877423","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16583","id":182877423,"node_id":"MDEyOklzc3VlQ29tbWVudDE4Mjg3NzQyMw==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2016-02-11T14:04:34Z","updated_at":"2016-02-11T14:04:34Z","author_association":"MEMBER","body":"I was able to reproduce this. The query is malformed, the first must clause ends up closing the whole bool query (one too many curly brackets). Our parsers should throw an error though instead of going ahead. As a result, the second bool query replaces the previous query as part of the function score, and size gets ignored. I will work on making parsing stricter so that an error is thrown instead.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/182916932","html_url":"https://github.com/elastic/elasticsearch/issues/16583#issuecomment-182916932","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16583","id":182916932,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MjkxNjkzMg==","user":{"login":"ryanmcilmoyl","id":10815,"node_id":"MDQ6VXNlcjEwODE1","avatar_url":"https://avatars3.githubusercontent.com/u/10815?v=4","gravatar_id":"","url":"https://api.github.com/users/ryanmcilmoyl","html_url":"https://github.com/ryanmcilmoyl","followers_url":"https://api.github.com/users/ryanmcilmoyl/followers","following_url":"https://api.github.com/users/ryanmcilmoyl/following{/other_user}","gists_url":"https://api.github.com/users/ryanmcilmoyl/gists{/gist_id}","starred_url":"https://api.github.com/users/ryanmcilmoyl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryanmcilmoyl/subscriptions","organizations_url":"https://api.github.com/users/ryanmcilmoyl/orgs","repos_url":"https://api.github.com/users/ryanmcilmoyl/repos","events_url":"https://api.github.com/users/ryanmcilmoyl/events{/privacy}","received_events_url":"https://api.github.com/users/ryanmcilmoyl/received_events","type":"User","site_admin":false},"created_at":"2016-02-11T15:29:06Z","updated_at":"2016-02-11T15:29:06Z","author_association":"NONE","body":"Ha, so I was doing something wrong in there :).  \n\nThanks for checking that out!\n","performed_via_github_app":null}]