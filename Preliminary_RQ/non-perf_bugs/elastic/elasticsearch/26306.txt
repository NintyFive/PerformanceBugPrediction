{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/26306","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26306/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26306/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26306/events","html_url":"https://github.com/elastic/elasticsearch/issues/26306","id":251613108,"node_id":"MDU6SXNzdWUyNTE2MTMxMDg=","number":26306,"title":"failure using Windows junctions for data dir","user":{"login":"jmlucjav","id":1813237,"node_id":"MDQ6VXNlcjE4MTMyMzc=","avatar_url":"https://avatars0.githubusercontent.com/u/1813237?v=4","gravatar_id":"","url":"https://api.github.com/users/jmlucjav","html_url":"https://github.com/jmlucjav","followers_url":"https://api.github.com/users/jmlucjav/followers","following_url":"https://api.github.com/users/jmlucjav/following{/other_user}","gists_url":"https://api.github.com/users/jmlucjav/gists{/gist_id}","starred_url":"https://api.github.com/users/jmlucjav/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmlucjav/subscriptions","organizations_url":"https://api.github.com/users/jmlucjav/orgs","repos_url":"https://api.github.com/users/jmlucjav/repos","events_url":"https://api.github.com/users/jmlucjav/events{/privacy}","received_events_url":"https://api.github.com/users/jmlucjav/received_events","type":"User","site_admin":false},"labels":[{"id":114977275,"node_id":"MDU6TGFiZWwxMTQ5NzcyNzU=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Packaging","name":":Delivery/Packaging","color":"0e8a16","default":false,"description":"RPM and deb packaging, tar and zip archives, shell and batch scripts"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2017-08-21T10:18:15Z","updated_at":"2020-11-11T21:57:17Z","closed_at":"2017-08-21T13:57:30Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version** \r\nVersion: 6.0.0-beta1-SNAPSHOT, Build: Unknown/2017-08-13T15:13:28.500Z, JVM: 1.8.0_102\r\n\r\n**JVM version**\r\njava version \"1.8.0_102\"\r\nJava(TM) SE Runtime Environment (build 1.8.0_102-b14)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.102-b14, mixed mode)\r\n\r\n**OS version**\r\nwin10, 64b\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nIf you use windows junctions to make the data/logs dirs point to other directories, ES fails to start\r\n\r\n**Steps to reproduce**:\r\n\r\n1. create the target dirs, and setup junctions, in %ES_HOME%, run:\r\n```\r\nmkdir D:\\es\\logs\r\nmkdir D:\\es\\data\r\nmklink /J logs D:\\es\\logs\r\nmklink /J data D:\\es\\data\r\n```\r\n\r\n2. start ES\r\n```\r\n[2017-08-21T12:16:21,329][INFO ][o.e.n.Node               ] [] initializing ...\r\n[2017-08-21T12:16:21,349][WARN ][o.e.b.ElasticsearchUncaughtExceptionHandler] [] uncaught exception in thread [main]\r\norg.elasticsearch.bootstrap.StartupException: java.security.AccessControlException: access denied (\"java.io.FilePermission\" \"D:\\es\\data\\nodes\\0\" \"write\")\r\n        at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:125) ~[elasticsearch-6.0.0-beta1-SNAPSHOT.jar:6.0.0-beta1-SNAPSHOT]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:112) ~[elasticsearch-6.0.0-beta1-SNAPSHOT.jar:6.0.0-beta1-SNAPSHOT]\r\n        at org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:69) ~[elasticsearch-6.0.0-beta1-SNAPSHOT.jar:6.0.0-beta1-SNAPSHOT]\r\n        at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:122) ~[elasticsearch-6.0.0-beta1-SNAPSHOT.jar:6.0.0-beta1-SNAPSHOT]\r\n        at org.elasticsearch.cli.Command.main(Command.java:88) ~[elasticsearch-6.0.0-beta1-SNAPSHOT.jar:6.0.0-beta1-SNAPSHOT]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:92) ~[elasticsearch-6.0.0-beta1-SNAPSHOT.jar:6.0.0-beta1-SNAPSHOT]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:85) ~[elasticsearch-6.0.0-beta1-SNAPSHOT.jar:6.0.0-beta1-SNAPSHOT]\r\nCaused by: java.security.AccessControlException: access denied (\"java.io.FilePermission\" \"D:\\es\\data\\nodes\\0\" \"write\")\r\n        at java.security.AccessControlContext.checkPermission(AccessControlContext.java:472) ~[?:1.8.0_102]\r\n        at java.security.AccessController.checkPermission(AccessController.java:884) ~[?:1.8.0_102]\r\n        at java.lang.SecurityManager.checkPermission(SecurityManager.java:549) ~[?:1.8.0_102]\r\n        at java.lang.SecurityManager.checkWrite(SecurityManager.java:979) ~[?:1.8.0_102]\r\n        at sun.nio.fs.WindowsPath.checkWrite(WindowsPath.java:799) ~[?:?]\r\n        at sun.nio.fs.WindowsFileSystemProvider.createDirectory(WindowsFileSystemProvider.java:491) ~[?:?]\r\n        at java.nio.file.Files.createDirectory(Files.java:674) ~[?:1.8.0_102]\r\n        at java.nio.file.Files.createAndCheckIsDirectory(Files.java:781) ~[?:1.8.0_102]\r\n        at java.nio.file.Files.createDirectories(Files.java:727) ~[?:1.8.0_102]\r\n        at org.apache.lucene.store.NativeFSLockFactory.obtainFSLock(NativeFSLockFactory.java:92) ~[lucene-core-7.0.0-snapshot-00142c9.jar:7.0.0-snapshot-00142c9 00142c921322a92de5007be2a114893aaa072498 - jpountz - 2017-07-11 09:24:13]\r\n        at org.apache.lucene.store.FSLockFactory.obtainLock(FSLockFactory.java:41) ~[lucene-core-7.0.0-snapshot-00142c9.jar:7.0.0-snapshot-00142c9 00142c921322a92de5007be2a114893aaa072498 - jpountz - 2017-07-11 09:24:13]\r\n        at org.apache.lucene.store.BaseDirectory.obtainLock(BaseDirectory.java:45) ~[lucene-core-7.0.0-snapshot-00142c9.jar:7.0.0-snapshot-00142c9 00142c921322a92de5007be2a114893aaa072498 - jpountz - 2017-07-11 09:24:13]\r\n        at org.elasticsearch.env.NodeEnvironment.<init>(NodeEnvironment.java:209) ~[elasticsearch-6.0.0-beta1-SNAPSHOT.jar:6.0.0-beta1-SNAPSHOT]\r\n        at org.elasticsearch.node.Node.<init>(Node.java:260) ~[elasticsearch-6.0.0-beta1-SNAPSHOT.jar:6.0.0-beta1-SNAPSHOT]\r\n        at org.elasticsearch.node.Node.<init>(Node.java:242) ~[elasticsearch-6.0.0-beta1-SNAPSHOT.jar:6.0.0-beta1-SNAPSHOT]\r\n        at org.elasticsearch.bootstrap.Bootstrap$5.<init>(Bootstrap.java:213) ~[elasticsearch-6.0.0-beta1-SNAPSHOT.jar:6.0.0-beta1-SNAPSHOT]\r\n        at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:213) ~[elasticsearch-6.0.0-beta1-SNAPSHOT.jar:6.0.0-beta1-SNAPSHOT]\r\n        at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:322) ~[elasticsearch-6.0.0-beta1-SNAPSHOT.jar:6.0.0-beta1-SNAPSHOT]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:121) ~[elasticsearch-6.0.0-beta1-SNAPSHOT.jar:6.0.0-beta1-SNAPSHOT]\r\n        ... 6 more\r\n```\r\n\r\nThe dir d:\\es\\data\\nodes\\0\\ has been created, but it is empty.","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}