{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/10494","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10494/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10494/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10494/events","html_url":"https://github.com/elastic/elasticsearch/issues/10494","id":67190315,"node_id":"MDU6SXNzdWU2NzE5MDMxNQ==","number":10494,"title":"NullPointerException for some shards when the _name field is set for a query","user":{"login":"Asimov4","id":897911,"node_id":"MDQ6VXNlcjg5NzkxMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/897911?v=4","gravatar_id":"","url":"https://api.github.com/users/Asimov4","html_url":"https://github.com/Asimov4","followers_url":"https://api.github.com/users/Asimov4/followers","following_url":"https://api.github.com/users/Asimov4/following{/other_user}","gists_url":"https://api.github.com/users/Asimov4/gists{/gist_id}","starred_url":"https://api.github.com/users/Asimov4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Asimov4/subscriptions","organizations_url":"https://api.github.com/users/Asimov4/orgs","repos_url":"https://api.github.com/users/Asimov4/repos","events_url":"https://api.github.com/users/Asimov4/events{/privacy}","received_events_url":"https://api.github.com/users/Asimov4/received_events","type":"User","site_admin":false},"labels":[{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2015-04-08T18:30:11Z","updated_at":"2015-08-27T07:48:11Z","closed_at":"2015-08-26T19:25:26Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Here's the query:\n\n```\n{\n    \"query\": {\n        \"filtered\": {\n            \"query\": {\n                \"bool\": {\n                    \"should\": [\n                        {\n                            \"query_string\": {\n                                \"query\": \"someField1:(someValue1 OR someValue2) AND someField2:(someValue3 OR someValue4)\",\n                                _name:\"test\"\n                            }\n                        }\n                    ]\n                }\n            },\n            \"filter\": {\n                \"bool\": {\n                    \"must\": [\n                        {\n                            \"match_all\": {}\n                        }\n                    ]\n                }\n            }\n        }\n    }\n}\n```\n\nHere's the response:\n\n```\n{\n  \"took\": 5,\n  \"timed_out\": false,\n  \"_shards\": {\n    \"total\": 6,\n    \"successful\": 4,\n    \"failed\": 2,\n    \"failures\": [\n      {\n        \"index\": \"my_index\",\n        \"shard\": 1,\n        \"status\": 500,\n        \"reason\": \"RemoteTransportException[[elasticsearch-node][inet[/0.0.0.0:9300]][indices:data/read/search[phase/fetch/id]]]; nested: NullPointerException; \"\n      },\n      {\n        \"index\": \"my_index\",\n        \"shard\": 2,\n        \"status\": 500,\n        \"reason\": \"RemoteTransportException[[elasticsearch-node][inet[/0.0.0.0:9300]][indices:data/read/search[phase/fetch/id]]]; nested: NullPointerException; \"\n      }\n    ]\n  }\n}\n```\n\nThere are no shard failures when I remove the _name attribute for my query.\n","closed_by":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"performed_via_github_app":null}