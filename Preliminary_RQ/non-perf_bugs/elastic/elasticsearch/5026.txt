{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/5026","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5026/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5026/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5026/events","html_url":"https://github.com/elastic/elasticsearch/issues/5026","id":26993236,"node_id":"MDU6SXNzdWUyNjk5MzIzNg==","number":5026,"title":"Radius attribute for circle shape is actually diameter!","user":{"login":"ogerman","id":331821,"node_id":"MDQ6VXNlcjMzMTgyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/331821?v=4","gravatar_id":"","url":"https://api.github.com/users/ogerman","html_url":"https://github.com/ogerman","followers_url":"https://api.github.com/users/ogerman/followers","following_url":"https://api.github.com/users/ogerman/following{/other_user}","gists_url":"https://api.github.com/users/ogerman/gists{/gist_id}","starred_url":"https://api.github.com/users/ogerman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ogerman/subscriptions","organizations_url":"https://api.github.com/users/ogerman/orgs","repos_url":"https://api.github.com/users/ogerman/repos","events_url":"https://api.github.com/users/ogerman/events{/privacy}","received_events_url":"https://api.github.com/users/ogerman/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2014-02-05T20:12:45Z","updated_at":"2014-11-05T16:55:05Z","closed_at":"2014-11-05T16:55:05Z","author_association":"NONE","active_lock_reason":null,"body":"this query\n\n``` json\n{\n  \"query\": {\n    \"filtered\": {\n      \"filter\": {\n        \"geo_shape\": {\n          \"location\": {\n            \"shape\": {\n              \"type\": \"Circle\",\n              \"coordinates\": [\n                37.55079142636748,\n                55.522330826005124\n              ],\n              \"radius\": 20040000\n            }\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nwould't give any error, even diameter of this circle (r*2) > 40075 km (equator length)\n\nbut this query\n\n``` json\n{\n  \"query\": {\n    \"filtered\": {\n      \"filter\": {\n        \"geo_shape\": {\n          \"location\": {\n            \"shape\": {\n              \"type\": \"Circle\",\n              \"coordinates\": [\n                37.55079142636748,\n                55.522330826005124\n              ],\n              \"radius\": 40080000\n            }\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nwill\n\n```\nInvalidShapeException[distance must be <= 180; got 180.0223829375521];\n```\n\nwhile the actual  radius is > 360\n\nmoreover, https://github.com/geojson/geojson-spec/wiki/Proposal---Circles-and-Ellipses-Geoms says that radius default unit is kilometer.\n","closed_by":{"login":"ogerman","id":331821,"node_id":"MDQ6VXNlcjMzMTgyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/331821?v=4","gravatar_id":"","url":"https://api.github.com/users/ogerman","html_url":"https://github.com/ogerman","followers_url":"https://api.github.com/users/ogerman/followers","following_url":"https://api.github.com/users/ogerman/following{/other_user}","gists_url":"https://api.github.com/users/ogerman/gists{/gist_id}","starred_url":"https://api.github.com/users/ogerman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ogerman/subscriptions","organizations_url":"https://api.github.com/users/ogerman/orgs","repos_url":"https://api.github.com/users/ogerman/repos","events_url":"https://api.github.com/users/ogerman/events{/privacy}","received_events_url":"https://api.github.com/users/ogerman/received_events","type":"User","site_admin":false},"performed_via_github_app":null}