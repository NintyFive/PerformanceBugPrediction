{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/55524","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55524/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55524/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55524/events","html_url":"https://github.com/elastic/elasticsearch/issues/55524","id":603939908,"node_id":"MDU6SXNzdWU2MDM5Mzk5MDg=","number":55524,"title":"[CI] SSLReloadDuringStartupIntegTests.testReloadDuringStartup reproducibly fails in 7.x","user":{"login":"iverase","id":29038686,"node_id":"MDQ6VXNlcjI5MDM4Njg2","avatar_url":"https://avatars1.githubusercontent.com/u/29038686?v=4","gravatar_id":"","url":"https://api.github.com/users/iverase","html_url":"https://github.com/iverase","followers_url":"https://api.github.com/users/iverase/followers","following_url":"https://api.github.com/users/iverase/following{/other_user}","gists_url":"https://api.github.com/users/iverase/gists{/gist_id}","starred_url":"https://api.github.com/users/iverase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iverase/subscriptions","organizations_url":"https://api.github.com/users/iverase/orgs","repos_url":"https://api.github.com/users/iverase/repos","events_url":"https://api.github.com/users/iverase/events{/privacy}","received_events_url":"https://api.github.com/users/iverase/received_events","type":"User","site_admin":false},"labels":[{"id":912838879,"node_id":"MDU6TGFiZWw5MTI4Mzg4Nzk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Security/Security","name":":Security/Security","color":"0e8a16","default":false,"description":"Security issues without another label"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false},"assignees":[{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2020-04-21T11:56:53Z","updated_at":"2020-04-24T03:36:56Z","closed_at":"2020-04-24T03:36:56Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":" This test fails in 7.x, for example:\r\n\r\n```\r\n./gradlew ':x-pack:plugin:security:test' --tests \"org.elasticsearch.xpack.ssl.SSLReloadDuringStartupIntegTests.testReloadDuringStartup\"   -Dtests.seed=AA29F22B124B878B   -Dtests.security.manager=true   -Dtests.locale=ar-EG   -Dtests.timezone=America/Port-au-Prince   -Dcompiler.java=14\r\n```\r\n\r\nThe same seed does not fail in master.\r\n\r\nThe error looks like: \r\n\r\n```\r\n NoNodeAvailableException[None of the configured nodes are available: [{#transport#-1}{omeByUOxSW-wdvqjemUkDg}{127.0.0.1}{127.0.0.1:59635}]]\r\n        at __randomizedtesting.SeedInfo.seed([AA29F22B124B878B:71FBCC66E5FC800F]:0)\r\n        at org.elasticsearch.client.transport.TransportClientNodesService.ensureNodesAreAvailable(TransportClientNodesService.java:352)\r\n        at org.elasticsearch.client.transport.TransportClientNodesService.execute(TransportClientNodesService.java:248)\r\n        at org.elasticsearch.client.transport.TransportProxyClient.execute(TransportProxyClient.java:57)\r\n        at org.elasticsearch.client.transport.TransportClient.doExecute(TransportClient.java:396)\r\n        at org.elasticsearch.client.support.AbstractClient.execute(AbstractClient.java:399)\r\n```\r\n\r\nBut I think the real error comes from here:\r\n\r\n\r\n```\r\n  1> Caused by: java.security.SignatureException: Signature length not correct: got 512 but was expecting 256\r\n  1>    at sun.security.rsa.RSASignature.engineVerify(RSASignature.java:212) ~[?:?]\r\n  1>    at java.security.Signature$Delegate.engineVerify(Signature.java:1415) ~[?:?]\r\n  1>    at java.security.Signature.verify(Signature.java:789) ~[?:?]\r\n  1>    at sun.security.x509.X509CertImpl.verify(X509CertImpl.java:449) ~[?:?]\r\n  1>    at sun.security.provider.certpath.BasicChecker.verifySignature(BasicChecker.java:166) ~[?:?]\r\n  1>    at sun.security.provider.certpath.BasicChecker.check(BasicChecker.java:147) ~[?:?]\r\n  1>    at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:125) ~[?:?]\r\n  1>    at sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:237) ~[?:?]\r\n  1>    at sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:145) ~[?:?]\r\n  1>    at sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:84) ~[?:?]\r\n  1>    at java.security.cert.CertPathValidator.validate(CertPathValidator.java:309) ~[?:?]\r\n  1>    at sun.security.validator.PKIXValidator.doValidate(PKIXValidator.java:364) ~[?:?]\r\n  1>    at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:275) ~[?:?]\r\n  1>    at sun.security.validator.Validator.validate(Validator.java:264) ~[?:?]\r\n  1>    at sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:285) ~[?:?]\r\n  1>    at sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:144) ~[?:?]\r\n  1>    at org.elasticsearch.common.ssl.DiagnosticTrustManager.checkServerTrusted(DiagnosticTrustManager.java:110) ~[elasticsearch-ssl-config-7.8.0-SNAPSHOT.jar:7.8.0-SNAPSHOT]\r\n  1>    at sun.security.ssl.CertificateMessage$T13CertificateConsumer.checkServerCerts(CertificateMessage.java:1318) ~[?:?]\r\n  1>    at sun.security.ssl.CertificateMessage$T13CertificateConsumer.onConsumeCertificate(CertificateMessage.java:1215) ~[?:?]\r\n  1>    at sun.security.ssl.CertificateMessage$T13CertificateConsumer.consume(CertificateMessage.java:1158) ~[?:?]\r\n  1>    at sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:396) ~[?:?]\r\n  1>    at sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:444) ~[?:?]\r\n  1>    at sun.security.ssl.SSLEngineImpl$DelegatedTask$DelegatedAction.run(SSLEngineImpl.java:1260) ~[?:?]\r\n  1>    at sun.security.ssl.SSLEngineImpl$DelegatedTask$DelegatedAction.run(SSLEngineImpl.java:1247) ~[?:?]\r\n  1>    at java.security.AccessController.doPrivileged(AccessController.java:691) ~[?:?]\r\n  1>    at sun.security.ssl.SSLEngineImpl$DelegatedTask.run(SSLEngineImpl.java:1192) ~[?:?]\r\n\r\n```\r\n\r\nhttps://gradle-enterprise.elastic.co/s/6d3jvqd2ro7wm\r\nhttps://gradle-enterprise.elastic.co/s/yn5ia46i5ni4s\r\nhttps://gradle-enterprise.elastic.co/s/7w4phbbuikw26\r\n\r\n\r\n\r\n\r\n","closed_by":{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false},"performed_via_github_app":null}