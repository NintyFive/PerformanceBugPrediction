{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/23498","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23498/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23498/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23498/events","html_url":"https://github.com/elastic/elasticsearch/issues/23498","id":212382470,"node_id":"MDU6SXNzdWUyMTIzODI0NzA=","number":23498,"title":"Installation from deb fails on Ubuntu 16.04","user":{"login":"Uninen","id":43100,"node_id":"MDQ6VXNlcjQzMTAw","avatar_url":"https://avatars1.githubusercontent.com/u/43100?v=4","gravatar_id":"","url":"https://api.github.com/users/Uninen","html_url":"https://github.com/Uninen","followers_url":"https://api.github.com/users/Uninen/followers","following_url":"https://api.github.com/users/Uninen/following{/other_user}","gists_url":"https://api.github.com/users/Uninen/gists{/gist_id}","starred_url":"https://api.github.com/users/Uninen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Uninen/subscriptions","organizations_url":"https://api.github.com/users/Uninen/orgs","repos_url":"https://api.github.com/users/Uninen/repos","events_url":"https://api.github.com/users/Uninen/events{/privacy}","received_events_url":"https://api.github.com/users/Uninen/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-03-07T09:57:25Z","updated_at":"2017-03-10T16:38:41Z","closed_at":"2017-03-07T13:58:52Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**:\r\n\r\n5.2.2\r\n\r\n**Plugins installed**: []\r\n\r\n[]\r\n\r\n**JVM version**:\r\n\r\nopenjdk version \"1.8.0_121\"\r\nOpenJDK Runtime Environment (build 1.8.0_121-8u121-b13-0ubuntu1.16.04.2-b13)\r\nOpenJDK 64-Bit Server VM (build 25.121-b13, mixed mode)\r\n\r\n**OS version**:\r\n\r\nUbuntu 16.04\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nInstallation gives an error and while binaries are installed, for example /etc/elasticsearch has only script folder but no files.\r\n\r\n`Preparing to unpack .../elasticsearch_5.2.2_all.deb ...\r\nUnpacking elasticsearch (5.2.2) ...\r\nProcessing triggers for systemd (229-4ubuntu16) ...\r\nProcessing triggers for ureadahead (0.100.0-19) ...\r\nSetting up elasticsearch (5.2.2) ...\r\nCouldn't write '1' to 'kernel/yama/ptrace_scope', ignoring: No such file or directory\r\n`\r\n\r\n**Steps to reproduce**:\r\n 1. follow instructions at https://www.elastic.co/guide/en/elasticsearch/reference/current/deb.html\r\n 2. sudo apt get install elasticsearch\r\n\r\n**Provide logs (if relevant)**:\r\n\r\nservice status displays this message:\r\n\r\n`root@controller:/etc/default# service elasticsearch status\r\n‚óè elasticsearch.service - Elasticsearch\r\n   Loaded: loaded (/usr/lib/systemd/system/elasticsearch.service; disabled; vendor preset: enabled)\r\n   Active: failed (Result: exit-code) since ti 2017-03-07 11:53:13 EET; 2s ago\r\n     Docs: http://www.elastic.co\r\n  Process: 16199 ExecStart=/usr/share/elasticsearch/bin/elasticsearch -p ${PID_DIR}/elasticsearch.pid --quiet -Edefault.path.logs=${LOG_DIR} -Edefault.p\r\n  Process: 16183 ExecStartPre=/usr/share/elasticsearch/bin/elasticsearch-systemd-pre-exec (code=exited, status=0/SUCCESS)\r\n Main PID: 16199 (code=exited, status=78)\r\n\r\nmaalis 07 11:53:12 controller elasticsearch[16199]:         at org.apache.logging.log4j.core.config.Configurator.initialize(Configurator.java:197)\r\nmaalis 07 11:53:12 controller elasticsearch[16199]:         at org.elasticsearch.common.logging.LogConfigurator.configureStatusLogger(LogConfigurator.ja\r\nmaalis 07 11:53:12 controller elasticsearch[16199]:         at org.elasticsearch.common.logging.LogConfigurator.configureWithoutConfig(LogConfigurator.j\r\nmaalis 07 11:53:12 controller elasticsearch[16199]:         at org.elasticsearch.cli.Command.main(Command.java:85)\r\nmaalis 07 11:53:12 controller elasticsearch[16199]:         at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:89)\r\nmaalis 07 11:53:12 controller elasticsearch[16199]:         at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:82)\r\nmaalis 07 11:53:13 controller elasticsearch[16199]: ERROR: no log4j2.properties found; tried [/etc/elasticsearch] and its subdirectories\r\nmaalis 07 11:53:13 controller systemd[1]: elasticsearch.service: Main process exited, code=exited, status=78/n/a\r\nmaalis 07 11:53:13 controller systemd[1]: elasticsearch.service: Unit entered failed state.\r\nmaalis 07 11:53:13 controller systemd[1]: elasticsearch.service: Failed with result 'exit-code'.\r\n`\r\n\r\n/var/log/elasticsearch is empty.\r\n\r\nThere was an (really) old elasticsearch install on the server at some point but it was uninstalled years ago, if it makes a difference.","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}