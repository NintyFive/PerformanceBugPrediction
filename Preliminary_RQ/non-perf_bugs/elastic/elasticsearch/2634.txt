{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/2634","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2634/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2634/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2634/events","html_url":"https://github.com/elastic/elasticsearch/issues/2634","id":10777595,"node_id":"MDU6SXNzdWUxMDc3NzU5NQ==","number":2634,"title":"Allow sorting by multi-valued fields ","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"labels":[{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":17100279,"node_id":"MDU6TGFiZWwxNzEwMDI3OQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.90.0.Beta1","name":"v0.90.0.Beta1","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2013-02-08T12:29:06Z","updated_at":"2013-03-12T21:42:41Z","closed_at":"2013-02-08T12:30:30Z","author_association":"MEMBER","active_lock_reason":null,"body":"Add sorting support for fields that have multiple values per document (For example: string array or double array).\nBy default when sorting on a multi-valued field the lowest or highest value will be picked from the field values depending on the sort order.\n\nIt is possible to define what value should be picked when a document has multiple values in a field via the `sort_mode` option. The following options can be specified:\n- `min` - Pick the lowest value.\n- `max` - Pick the highest value.\n- `sum` - Use the sum of all values as sort value.\n- `avg` - Use the average of all values as sort value.\n## Example usage\n\n```\ncurl -XPOST 'localhost:9200/_search' -d '{\n   \"query\" : {\n    ...\n   },\n   \"sort\" : [\n      {\"price\" : {\"order\" : \"asc\", \"sort_mode\" : \"avg\"}}\n   ]\n}'\n```\n\nIn the above example the field price has multiple prices per document. In this case the result hits will be sort by price ascending based on the average price per document.\n","closed_by":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"performed_via_github_app":null}