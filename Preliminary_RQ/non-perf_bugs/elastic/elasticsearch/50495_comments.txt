[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/569082967","html_url":"https://github.com/elastic/elasticsearch/issues/50495#issuecomment-569082967","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50495","id":569082967,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTA4Mjk2Nw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-12-26T16:14:22Z","updated_at":"2019-12-26T16:14:22Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-analytics-geo (:Analytics/Geo)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/569083130","html_url":"https://github.com/elastic/elasticsearch/issues/50495#issuecomment-569083130","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50495","id":569083130,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTA4MzEzMA==","user":{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false},"created_at":"2019-12-26T16:15:31Z","updated_at":"2019-12-26T16:15:31Z","author_association":"MEMBER","body":"@nknize @iverase Can you please take a look? ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/570168306","html_url":"https://github.com/elastic/elasticsearch/issues/50495#issuecomment-570168306","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50495","id":570168306,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDE2ODMwNg==","user":{"login":"toby-jn","id":32616473,"node_id":"MDQ6VXNlcjMyNjE2NDcz","avatar_url":"https://avatars1.githubusercontent.com/u/32616473?v=4","gravatar_id":"","url":"https://api.github.com/users/toby-jn","html_url":"https://github.com/toby-jn","followers_url":"https://api.github.com/users/toby-jn/followers","following_url":"https://api.github.com/users/toby-jn/following{/other_user}","gists_url":"https://api.github.com/users/toby-jn/gists{/gist_id}","starred_url":"https://api.github.com/users/toby-jn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toby-jn/subscriptions","organizations_url":"https://api.github.com/users/toby-jn/orgs","repos_url":"https://api.github.com/users/toby-jn/repos","events_url":"https://api.github.com/users/toby-jn/events{/privacy}","received_events_url":"https://api.github.com/users/toby-jn/received_events","type":"User","site_admin":false},"created_at":"2020-01-02T10:25:42Z","updated_at":"2020-01-02T10:25:42Z","author_association":"NONE","body":"Since first posting this we've now started seeing these on a second cluster and are also seeing a different backtrace from merge failures that I think is related:\r\n```\r\n{\"type\": \"server\", \"timestamp\": \"2020-01-02T09:14:42,067Z\", \"level\": \"WARN\", \"component\": \"o.e.i.e.Engine\", \"cluster.name\": \"elasticsearch\", \"node.name\": \"elasticsearch-0\", \"message\": \" [v27.tcpevent-shrink-000191][0] failed engine [merge failed]\", \"cluster.uuid\": \"Wk2FFMJbQGKUAPPeZjek2w\", \"node.id\": \"45jcOptdTjqnA_fG1punmg\" , \r\n\"stacktrace\": [\"org.apache.lucene.index.MergePolicy$MergeException: java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 16\",\r\n\"at org.elasticsearch.index.engine.InternalEngine$EngineMergeScheduler$2.doRun(InternalEngine.java:2389) [elasticsearch-7.4.1.jar:7.4.1]\",\r\n\"at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:773) [elasticsearch-7.4.1.jar:7.4.1]\",\r\n\"at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) [elasticsearch-7.4.1.jar:7.4.1]\",\r\n\"at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]\",\r\n\"at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]\",\r\n\"at java.lang.Thread.run(Thread.java:830) [?:?]\",\r\n\"Caused by: java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 16\",\r\n\"at java.util.Arrays.rangeCheck(Arrays.java:124) ~[?:?]\",\r\n\"at java.util.Arrays.compareUnsigned(Arrays.java:6126) ~[?:?]\",\r\n\"at org.apache.lucene.util.bkd.BKDWriter$BKDMergeQueue.lessThan(BKDWriter.java:356) ~[lucene-core-8.2.0.jar:8.2.0 31d7ec7bbfdcd2c4cc61d9d35e962165410b65fe - ivera - 2019-07-19 15:05:56]\",\r\n\"at org.apache.lucene.util.bkd.BKDWriter$BKDMergeQueue.lessThan(BKDWriter.java:344) ~[lucene-core-8.2.0.jar:8.2.0 31d7ec7bbfdcd2c4cc61d9d35e962165410b65fe - ivera - 2019-07-19 15:05:56]\",\r\n\"at org.apache.lucene.util.PriorityQueue.upHeap(PriorityQueue.java:254) ~[lucene-core-8.2.0.jar:8.2.0 31d7ec7bbfdcd2c4cc61d9d35e962165410b65fe - ivera - 2019-07-19 15:05:56]\",\r\n\"at org.apache.lucene.util.PriorityQueue.add(PriorityQueue.java:131) ~[lucene-core-8.2.0.jar:8.2.0 31d7ec7bbfdcd2c4cc61d9d35e962165410b65fe - ivera - 2019-07-19 15:05:56]\",\r\n\"at org.apache.lucene.util.bkd.BKDWriter.merge(BKDWriter.java:487) ~[lucene-core-8.2.0.jar:8.2.0 31d7ec7bbfdcd2c4cc61d9d35e962165410b65fe - ivera - 2019-07-19 15:05:56]\",\r\n\"at org.apache.lucene.codecs.lucene60.Lucene60PointsWriter.merge(Lucene60PointsWriter.java:213) ~[lucene-core-8.2.0.jar:8.2.0 31d7ec7bbfdcd2c4cc61d9d35e962165410b65fe - ivera - 2019-07-19 15:05:56]\",\r\n\"at org.apache.lucene.index.SegmentMerger.mergePoints(SegmentMerger.java:202) ~[lucene-core-8.2.0.jar:8.2.0 31d7ec7bbfdcd2c4cc61d9d35e962165410b65fe - ivera - 2019-07-19 15:05:56]\",\r\n\"at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:162) ~[lucene-core-8.2.0.jar:8.2.0 31d7ec7bbfdcd2c4cc61d9d35e962165410b65fe - ivera - 2019-07-19 15:05:56]\",\r\n\"at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4462) ~[lucene-core-8.2.0.jar:8.2.0 31d7ec7bbfdcd2c4cc61d9d35e962165410b65fe - ivera - 2019-07-19 15:05:56]\",\r\n\"at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:4056) ~[lucene-core-8.2.0.jar:8.2.0 31d7ec7bbfdcd2c4cc61d9d35e962165410b65fe - ivera - 2019-07-19 15:05:56]\",\r\n\"at org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMergeScheduler.java:625) ~[lucene-core-8.2.0.jar:8.2.0 31d7ec7bbfdcd2c4cc61d9d35e962165410b65fe - ivera - 2019-07-19 15:05:56]\",\r\n\"at org.elasticsearch.index.engine.ElasticsearchConcurrentMergeScheduler.doMerge(ElasticsearchConcurrentMergeScheduler.java:101) ~[elasticsearch-7.4.1.jar:7.4.1]\",\r\n\"at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:662) ~[lucene-core-8.2.0.jar:8.2.0 31d7ec7bbfdcd2c4cc61d9d35e962165410b65fe - ivera - 2019-07-19 15:05:56]\"] }\r\n```\r\n\r\nCan open a separate issue for this, but both cases look to be caused by some state in BKDWriter getting corrupted.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/570193241","html_url":"https://github.com/elastic/elasticsearch/issues/50495#issuecomment-570193241","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50495","id":570193241,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDE5MzI0MQ==","user":{"login":"iverase","id":29038686,"node_id":"MDQ6VXNlcjI5MDM4Njg2","avatar_url":"https://avatars1.githubusercontent.com/u/29038686?v=4","gravatar_id":"","url":"https://api.github.com/users/iverase","html_url":"https://github.com/iverase","followers_url":"https://api.github.com/users/iverase/followers","following_url":"https://api.github.com/users/iverase/following{/other_user}","gists_url":"https://api.github.com/users/iverase/gists{/gist_id}","starred_url":"https://api.github.com/users/iverase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iverase/subscriptions","organizations_url":"https://api.github.com/users/iverase/orgs","repos_url":"https://api.github.com/users/iverase/repos","events_url":"https://api.github.com/users/iverase/events{/privacy}","received_events_url":"https://api.github.com/users/iverase/received_events","type":"User","site_admin":false},"created_at":"2020-01-02T12:24:38Z","updated_at":"2020-01-02T12:24:38Z","author_association":"CONTRIBUTOR","body":"Hi @toby-jn,\r\n\r\nI don't think we need a separate issue as I think they are related as well. Would it be possible to share the mapping of the index that is failing? ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/570208169","html_url":"https://github.com/elastic/elasticsearch/issues/50495#issuecomment-570208169","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50495","id":570208169,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDIwODE2OQ==","user":{"login":"iverase","id":29038686,"node_id":"MDQ6VXNlcjI5MDM4Njg2","avatar_url":"https://avatars1.githubusercontent.com/u/29038686?v=4","gravatar_id":"","url":"https://api.github.com/users/iverase","html_url":"https://github.com/iverase","followers_url":"https://api.github.com/users/iverase/followers","following_url":"https://api.github.com/users/iverase/following{/other_user}","gists_url":"https://api.github.com/users/iverase/gists{/gist_id}","starred_url":"https://api.github.com/users/iverase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iverase/subscriptions","organizations_url":"https://api.github.com/users/iverase/orgs","repos_url":"https://api.github.com/users/iverase/repos","events_url":"https://api.github.com/users/iverase/events{/privacy}","received_events_url":"https://api.github.com/users/iverase/received_events","type":"User","site_admin":false},"created_at":"2020-01-02T13:32:58Z","updated_at":"2020-01-02T13:32:58Z","author_association":"CONTRIBUTOR","body":"In addition I have one more question, I see the name of the indices are something like `v27.tcpevent-shrink-000191`, have they been created using the shrink index API?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/570217915","html_url":"https://github.com/elastic/elasticsearch/issues/50495#issuecomment-570217915","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50495","id":570217915,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDIxNzkxNQ==","user":{"login":"toby-jn","id":32616473,"node_id":"MDQ6VXNlcjMyNjE2NDcz","avatar_url":"https://avatars1.githubusercontent.com/u/32616473?v=4","gravatar_id":"","url":"https://api.github.com/users/toby-jn","html_url":"https://github.com/toby-jn","followers_url":"https://api.github.com/users/toby-jn/followers","following_url":"https://api.github.com/users/toby-jn/following{/other_user}","gists_url":"https://api.github.com/users/toby-jn/gists{/gist_id}","starred_url":"https://api.github.com/users/toby-jn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toby-jn/subscriptions","organizations_url":"https://api.github.com/users/toby-jn/orgs","repos_url":"https://api.github.com/users/toby-jn/repos","events_url":"https://api.github.com/users/toby-jn/events{/privacy}","received_events_url":"https://api.github.com/users/toby-jn/received_events","type":"User","site_admin":false},"created_at":"2020-01-02T14:10:20Z","updated_at":"2020-01-02T14:44:41Z","author_association":"NONE","body":"Hi, thanks for taking a look.\r\n\r\nI've attached mappings for the two index templates we've seen this issue on:\r\n\r\n[v27.agentprocessfileevent-mapping.txt](https://github.com/elastic/elasticsearch/files/4016067/v27.agentprocessfileevent-mapping.txt)\r\n[v27.tcpevent-mapping.txt](https://github.com/elastic/elasticsearch/files/4016068/v27.tcpevent-mapping.txt)\r\n\r\nWe use the rollover API to manage our time based indexing and use the shrink API and forcemerge when they are ~15 GB. A job runs to periodically delete by query on documents older than our retention and I believe these merges are the automated scheduled merges clearing the deleted documents.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/570222887","html_url":"https://github.com/elastic/elasticsearch/issues/50495#issuecomment-570222887","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50495","id":570222887,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDIyMjg4Nw==","user":{"login":"toby-jn","id":32616473,"node_id":"MDQ6VXNlcjMyNjE2NDcz","avatar_url":"https://avatars1.githubusercontent.com/u/32616473?v=4","gravatar_id":"","url":"https://api.github.com/users/toby-jn","html_url":"https://github.com/toby-jn","followers_url":"https://api.github.com/users/toby-jn/followers","following_url":"https://api.github.com/users/toby-jn/following{/other_user}","gists_url":"https://api.github.com/users/toby-jn/gists{/gist_id}","starred_url":"https://api.github.com/users/toby-jn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toby-jn/subscriptions","organizations_url":"https://api.github.com/users/toby-jn/orgs","repos_url":"https://api.github.com/users/toby-jn/repos","events_url":"https://api.github.com/users/toby-jn/events{/privacy}","received_events_url":"https://api.github.com/users/toby-jn/received_events","type":"User","site_admin":false},"created_at":"2020-01-02T14:27:21Z","updated_at":"2020-01-02T14:31:38Z","author_association":"NONE","body":"I've been collecting some statistics on failures.. so far we've had 494 errors since `2019-12-24T10:31:41`, 145 of the totalPointCount error, and 349 of the index out of range. Across each index we've seen:\r\n```\r\nindex   totalPoint      indexBounds\r\nv27.agentprocessfileevent-shrink-000269 2       0\r\nv27.agentprocessfileevent-shrink-000270 2       0\r\nv27.agentprocessfileevent-shrink-000272 104     0\r\nv27.agentprocessfileevent-shrink-000278 1       0\r\nv27.agentprocessfileevent-shrink-000286 4       0\r\nv27.tcpevent-shrink-000185      2       142\r\nv27.tcpevent-shrink-000188      13      0\r\nv27.tcpevent-shrink-000190      17      118\r\nv27.tcpevent-shrink-000191      0       86\r\nv27.tcpevent-shrink-000201      0       1\r\nv27.tcpevent-shrink-000204      0       1\r\nv27.tcpevent-shrink-000206      0       1\r\n```\r\n\r\nCluster has a total of 233 indices, 98 of these are `v27.agentprocessfileevent-shrink` and 77 are `v27.tcpevent-shrink`","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/570239195","html_url":"https://github.com/elastic/elasticsearch/issues/50495#issuecomment-570239195","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50495","id":570239195,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDIzOTE5NQ==","user":{"login":"iverase","id":29038686,"node_id":"MDQ6VXNlcjI5MDM4Njg2","avatar_url":"https://avatars1.githubusercontent.com/u/29038686?v=4","gravatar_id":"","url":"https://api.github.com/users/iverase","html_url":"https://github.com/iverase","followers_url":"https://api.github.com/users/iverase/followers","following_url":"https://api.github.com/users/iverase/following{/other_user}","gists_url":"https://api.github.com/users/iverase/gists{/gist_id}","starred_url":"https://api.github.com/users/iverase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iverase/subscriptions","organizations_url":"https://api.github.com/users/iverase/orgs","repos_url":"https://api.github.com/users/iverase/repos","events_url":"https://api.github.com/users/iverase/events{/privacy}","received_events_url":"https://api.github.com/users/iverase/received_events","type":"User","site_admin":false},"created_at":"2020-01-02T15:21:55Z","updated_at":"2020-01-03T10:58:41Z","author_association":"CONTRIBUTOR","body":"Thank you for this information, it puts more light to the issue. \r\n\r\nA last question is regarding the issue appearing on December 24th. I would expect that some change would have happened in your cluster or operational procedures around that time. Do you recall any of these around that time?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/570256306","html_url":"https://github.com/elastic/elasticsearch/issues/50495#issuecomment-570256306","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50495","id":570256306,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDI1NjMwNg==","user":{"login":"toby-jn","id":32616473,"node_id":"MDQ6VXNlcjMyNjE2NDcz","avatar_url":"https://avatars1.githubusercontent.com/u/32616473?v=4","gravatar_id":"","url":"https://api.github.com/users/toby-jn","html_url":"https://github.com/toby-jn","followers_url":"https://api.github.com/users/toby-jn/followers","following_url":"https://api.github.com/users/toby-jn/following{/other_user}","gists_url":"https://api.github.com/users/toby-jn/gists{/gist_id}","starred_url":"https://api.github.com/users/toby-jn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toby-jn/subscriptions","organizations_url":"https://api.github.com/users/toby-jn/orgs","repos_url":"https://api.github.com/users/toby-jn/repos","events_url":"https://api.github.com/users/toby-jn/events{/privacy}","received_events_url":"https://api.github.com/users/toby-jn/received_events","type":"User","site_admin":false},"created_at":"2020-01-02T16:14:56Z","updated_at":"2020-01-02T16:14:56Z","author_association":"NONE","body":"There were no changes specifically on that day, and the most recent operational updates were made 5 days earlier (we added a node attribute that required a rolling cluster restart of ES, but not other changes).\r\n\r\nIt looks like this timing corresponds to around 24 days after when we upgraded to ES7 so the affected indices are all nearing the end of their retention duration I would expect they would see a lot of delete by query and so will see more merge activity, it's possible we're just starting to see the effects of this? This cluster had previously been running ES 6.5.4, but all indices we've had this issue with were created in ES7","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/572518099","html_url":"https://github.com/elastic/elasticsearch/issues/50495#issuecomment-572518099","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50495","id":572518099,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjUxODA5OQ==","user":{"login":"toby-jn","id":32616473,"node_id":"MDQ6VXNlcjMyNjE2NDcz","avatar_url":"https://avatars1.githubusercontent.com/u/32616473?v=4","gravatar_id":"","url":"https://api.github.com/users/toby-jn","html_url":"https://github.com/toby-jn","followers_url":"https://api.github.com/users/toby-jn/followers","following_url":"https://api.github.com/users/toby-jn/following{/other_user}","gists_url":"https://api.github.com/users/toby-jn/gists{/gist_id}","starred_url":"https://api.github.com/users/toby-jn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toby-jn/subscriptions","organizations_url":"https://api.github.com/users/toby-jn/orgs","repos_url":"https://api.github.com/users/toby-jn/repos","events_url":"https://api.github.com/users/toby-jn/events{/privacy}","received_events_url":"https://api.github.com/users/toby-jn/received_events","type":"User","site_admin":false},"created_at":"2020-01-09T11:22:09Z","updated_at":"2020-01-09T11:22:09Z","author_association":"NONE","body":"@iverase appreciate there isn't a fix for this yet, but do you have any information about what may be causing it, or just some more insight as to what the problem could be? We're running a set of cron jobs currently retrying failed shard allocation every minute, however this isn't a great solution long term and if there's other operational changes we can make to mitigate this we would like to try them. We're seeing around 20-30 merge failures per day on our cluster and are concerned about potential side effects or other underlying issues here.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/572558547","html_url":"https://github.com/elastic/elasticsearch/issues/50495#issuecomment-572558547","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50495","id":572558547,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjU1ODU0Nw==","user":{"login":"iverase","id":29038686,"node_id":"MDQ6VXNlcjI5MDM4Njg2","avatar_url":"https://avatars1.githubusercontent.com/u/29038686?v=4","gravatar_id":"","url":"https://api.github.com/users/iverase","html_url":"https://github.com/iverase","followers_url":"https://api.github.com/users/iverase/followers","following_url":"https://api.github.com/users/iverase/following{/other_user}","gists_url":"https://api.github.com/users/iverase/gists{/gist_id}","starred_url":"https://api.github.com/users/iverase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iverase/subscriptions","organizations_url":"https://api.github.com/users/iverase/orgs","repos_url":"https://api.github.com/users/iverase/repos","events_url":"https://api.github.com/users/iverase/events{/privacy}","received_events_url":"https://api.github.com/users/iverase/received_events","type":"User","site_admin":false},"created_at":"2020-01-09T13:22:11Z","updated_at":"2020-01-09T13:22:11Z","author_association":"CONTRIBUTOR","body":"@toby-jn I have not been able to reproduce your issue so I am still clueless of what it is the issue here. \r\n\r\nOne thing you could do for me is to use the Lucene jar in the lib directory and run the CheckIndex utility. The command should look like:\r\n\r\n```\r\n java -cp /usr/share/elasticsearch/lib/lucene-core-x.x.x.jar -ea:org.apache.lucene... org.apache.lucene.index.CheckIndex $datadir/nodes/0/indices/$index/$shard/index/\r\n```\r\n\r\nNote that it is a bit tedious as it needs to be run for every shard. It might be slow as well given that this command will not only verify checksums but also make sure that the index can actually be read and that its datastructures are consistent with each other.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/572576194","html_url":"https://github.com/elastic/elasticsearch/issues/50495#issuecomment-572576194","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50495","id":572576194,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjU3NjE5NA==","user":{"login":"toby-jn","id":32616473,"node_id":"MDQ6VXNlcjMyNjE2NDcz","avatar_url":"https://avatars1.githubusercontent.com/u/32616473?v=4","gravatar_id":"","url":"https://api.github.com/users/toby-jn","html_url":"https://github.com/toby-jn","followers_url":"https://api.github.com/users/toby-jn/followers","following_url":"https://api.github.com/users/toby-jn/following{/other_user}","gists_url":"https://api.github.com/users/toby-jn/gists{/gist_id}","starred_url":"https://api.github.com/users/toby-jn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toby-jn/subscriptions","organizations_url":"https://api.github.com/users/toby-jn/orgs","repos_url":"https://api.github.com/users/toby-jn/repos","events_url":"https://api.github.com/users/toby-jn/events{/privacy}","received_events_url":"https://api.github.com/users/toby-jn/received_events","type":"User","site_admin":false},"created_at":"2020-01-09T14:06:36Z","updated_at":"2020-01-09T14:06:36Z","author_association":"NONE","body":"Looks like this needs to be run with ES stopped, so we'll try and schedule some downtime for it. One thing I did notice on first of the indices we've seen this error on that I checked; the primary had merged to a single segment, however the replica still had a lot of segments:\r\n```\r\n/_cat/segments/v27.agentprocessfileevent-shrink-000320?v\r\n\r\nindex                                   shard prirep ip           segment generation docs.count docs.deleted    size size.memory committed searchable version compound\r\nv27.agentprocessfileevent-shrink-000320 0     p      10.64.132.33 _2b             83   50020427       263771    15gb    23305350 true      true       8.2.0   false\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _0               0    1530101            0 430.8mb      820161 true      true       8.2.0   false\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _1               1    1131920         9530 358.2mb      621306 true      true       8.2.0   false\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _2               2    1865342        10383 551.2mb     1019448 true      true       8.2.0   false\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _3               3     334343         2796  82.6mb      184944 true      true       8.2.0   true\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _4               4    1352885        12572 438.5mb      732877 true      true       8.2.0   false\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _5               5    1744796        14466 531.6mb      970092 true      true       8.2.0   false\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _6               6    1309300        11270 427.1mb      711871 true      true       8.2.0   false\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _7               7     231449         1172  75.4mb      111788 true      true       8.2.0   true\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _8               8    1341299        13828 444.9mb      733269 true      true       8.2.0   false\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _9               9    1277097         2104 418.1mb      700411 true      true       8.2.0   true\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _a              10    1226868         8399 404.3mb      670473 true      true       8.2.0   false\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _b              11    1107346            0 367.1mb      591807 true      true       8.2.0   true\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _c              12     190765            0  61.9mb      107388 true      true       8.2.0   true\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _d              13    1222114            0 396.5mb      655998 true      true       8.2.0   true\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _e              14      37285            0  13.1mb       30790 true      true       8.2.0   true\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _i              18      93730            0    31mb       67511 true      true       8.2.0   true\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _j              19     179249            0  57.6mb      109188 true      true       8.2.0   true\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _p              25   13848729        73512   4.2gb     7208905 true      true       8.2.0   false\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _q              26    1950571        13377 561.6mb     1046458 true      true       8.2.0   false\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _r              27      39600          291  12.7mb       30358 true      true       8.2.0   true\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _s              28      78983            0    12mb       51500 true      true       8.2.0   true\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _t              29      35413            0  14.1mb       31012 true      true       8.2.0   true\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _16             42       9444            0   3.4mb       16027 true      true       8.2.0   true\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _17             43       8722            0   3.1mb       15591 true      true       8.2.0   true\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _1b             47    1928557         1806   530mb     1019366 true      true       8.2.0   false\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _1c             48    1360571         9524 442.7mb      777892 true      true       8.2.0   false\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _1d             49    1914889        17285 562.2mb     1024724 true      true       8.2.0   false\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _1e             50     363154         2062  88.3mb      193942 true      true       8.2.0   true\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _1f             51    1323353        15192 431.4mb      724082 true      true       8.2.0   false\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _1g             52    1678005        13021 507.9mb      927195 true      true       8.2.0   false\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _1h             53     277047         1938  91.2mb      128091 true      true       8.2.0   true\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _1i             54    1484407        15361 501.3mb      830046 true      true       8.2.0   false\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _1j             55    1439894        11555 483.5mb      786604 true      true       8.2.0   false\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _1k             56    1375682         2327 458.2mb      754077 true      true       8.2.0   false\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _1l             57    1246844            0 416.5mb      681799 true      true       8.2.0   true\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _1m             58    1426232            0 458.6mb      784492 true      true       8.2.0   true\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _1n             59     196784            0  62.2mb      111545 true      true       8.2.0   true\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _1o             60      98496            0    34mb       70240 true      true       8.2.0   true\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _27             79     205235            0  64.7mb      123124 true      true       8.3.0   true\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _28             80      47493            0  17.8mb       38116 true      true       8.3.0   true\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _29             81    1496837            0 478.6mb      702562 true      true       8.3.0   true\r\nv27.agentprocessfileevent-shrink-000320 0     r      10.64.128.46 _2a             82       9596          735   3.8mb       16803 true      true       8.3.0   true\r\n```\r\nThis may be completely normal, and makes some sense given the errors we're seeing, but does seem unusual (and perhaps explains why forcing retry and restarting nodes sometimes seems to fix the problem).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/572578454","html_url":"https://github.com/elastic/elasticsearch/issues/50495#issuecomment-572578454","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50495","id":572578454,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjU3ODQ1NA==","user":{"login":"iverase","id":29038686,"node_id":"MDQ6VXNlcjI5MDM4Njg2","avatar_url":"https://avatars1.githubusercontent.com/u/29038686?v=4","gravatar_id":"","url":"https://api.github.com/users/iverase","html_url":"https://github.com/iverase","followers_url":"https://api.github.com/users/iverase/followers","following_url":"https://api.github.com/users/iverase/following{/other_user}","gists_url":"https://api.github.com/users/iverase/gists{/gist_id}","starred_url":"https://api.github.com/users/iverase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iverase/subscriptions","organizations_url":"https://api.github.com/users/iverase/orgs","repos_url":"https://api.github.com/users/iverase/repos","events_url":"https://api.github.com/users/iverase/events{/privacy}","received_events_url":"https://api.github.com/users/iverase/received_events","type":"User","site_admin":false},"created_at":"2020-01-09T14:12:34Z","updated_at":"2020-01-09T14:12:34Z","author_association":"CONTRIBUTOR","body":"I don't think that is normal and I was not using replicas when trying to reproduce it. I will try this next. If this is common for the failing indexes, you might want to regenerate the replicas by setting number of replicas to 0 and then set it back to the desire number of replicas.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/572581386","html_url":"https://github.com/elastic/elasticsearch/issues/50495#issuecomment-572581386","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50495","id":572581386,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjU4MTM4Ng==","user":{"login":"iverase","id":29038686,"node_id":"MDQ6VXNlcjI5MDM4Njg2","avatar_url":"https://avatars1.githubusercontent.com/u/29038686?v=4","gravatar_id":"","url":"https://api.github.com/users/iverase","html_url":"https://github.com/iverase","followers_url":"https://api.github.com/users/iverase/followers","following_url":"https://api.github.com/users/iverase/following{/other_user}","gists_url":"https://api.github.com/users/iverase/gists{/gist_id}","starred_url":"https://api.github.com/users/iverase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iverase/subscriptions","organizations_url":"https://api.github.com/users/iverase/orgs","repos_url":"https://api.github.com/users/iverase/repos","events_url":"https://api.github.com/users/iverase/events{/privacy}","received_events_url":"https://api.github.com/users/iverase/received_events","type":"User","site_admin":false},"created_at":"2020-01-09T14:19:24Z","updated_at":"2020-01-09T14:19:24Z","author_association":"CONTRIBUTOR","body":"Another interesting information is that it seems there is some segments created with Lucene version 8.2.0 and others with 8.3.0.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/572595028","html_url":"https://github.com/elastic/elasticsearch/issues/50495#issuecomment-572595028","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50495","id":572595028,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjU5NTAyOA==","user":{"login":"iverase","id":29038686,"node_id":"MDQ6VXNlcjI5MDM4Njg2","avatar_url":"https://avatars1.githubusercontent.com/u/29038686?v=4","gravatar_id":"","url":"https://api.github.com/users/iverase","html_url":"https://github.com/iverase","followers_url":"https://api.github.com/users/iverase/followers","following_url":"https://api.github.com/users/iverase/following{/other_user}","gists_url":"https://api.github.com/users/iverase/gists{/gist_id}","starred_url":"https://api.github.com/users/iverase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iverase/subscriptions","organizations_url":"https://api.github.com/users/iverase/orgs","repos_url":"https://api.github.com/users/iverase/repos","events_url":"https://api.github.com/users/iverase/events{/privacy}","received_events_url":"https://api.github.com/users/iverase/received_events","type":"User","site_admin":false},"created_at":"2020-01-09T14:50:23Z","updated_at":"2020-01-09T14:50:23Z","author_association":"CONTRIBUTOR","body":"At the beginning of the issue you said you are running on elasticsearch 7.4.1 which uses lucene 8.2.0. Have you upgraded ES in the meanwhile? (lucene 8.3.0 was introduced in elasticsearch 7.5.0)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/572597462","html_url":"https://github.com/elastic/elasticsearch/issues/50495#issuecomment-572597462","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50495","id":572597462,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjU5NzQ2Mg==","user":{"login":"toby-jn","id":32616473,"node_id":"MDQ6VXNlcjMyNjE2NDcz","avatar_url":"https://avatars1.githubusercontent.com/u/32616473?v=4","gravatar_id":"","url":"https://api.github.com/users/toby-jn","html_url":"https://github.com/toby-jn","followers_url":"https://api.github.com/users/toby-jn/followers","following_url":"https://api.github.com/users/toby-jn/following{/other_user}","gists_url":"https://api.github.com/users/toby-jn/gists{/gist_id}","starred_url":"https://api.github.com/users/toby-jn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toby-jn/subscriptions","organizations_url":"https://api.github.com/users/toby-jn/orgs","repos_url":"https://api.github.com/users/toby-jn/repos","events_url":"https://api.github.com/users/toby-jn/events{/privacy}","received_events_url":"https://api.github.com/users/toby-jn/received_events","type":"User","site_admin":false},"created_at":"2020-01-09T14:55:37Z","updated_at":"2020-01-09T14:55:37Z","author_association":"NONE","body":"Yes, we upgraded to ES 7.5.0 last week to pick up the fix for #47719, because index shrink was setting max retries to 1 when we were hitting these merge failures it was not retrying the allocation so we were regularly seeing indices go red. We were definitely seeing these issues before the 7.5.0 upgrade though","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/572608984","html_url":"https://github.com/elastic/elasticsearch/issues/50495#issuecomment-572608984","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50495","id":572608984,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjYwODk4NA==","user":{"login":"toby-jn","id":32616473,"node_id":"MDQ6VXNlcjMyNjE2NDcz","avatar_url":"https://avatars1.githubusercontent.com/u/32616473?v=4","gravatar_id":"","url":"https://api.github.com/users/toby-jn","html_url":"https://github.com/toby-jn","followers_url":"https://api.github.com/users/toby-jn/followers","following_url":"https://api.github.com/users/toby-jn/following{/other_user}","gists_url":"https://api.github.com/users/toby-jn/gists{/gist_id}","starred_url":"https://api.github.com/users/toby-jn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toby-jn/subscriptions","organizations_url":"https://api.github.com/users/toby-jn/orgs","repos_url":"https://api.github.com/users/toby-jn/repos","events_url":"https://api.github.com/users/toby-jn/events{/privacy}","received_events_url":"https://api.github.com/users/toby-jn/received_events","type":"User","site_admin":false},"created_at":"2020-01-09T15:21:54Z","updated_at":"2020-01-09T15:21:54Z","author_association":"NONE","body":"I made a copy of the segment files for that shard (the replica for v27.agentprocessfileevent-shrink-000320 which had previously had a merge failure), deleted the lock file and ran CheckIndex on that: \r\n[checkindex.txt](https://github.com/elastic/elasticsearch/files/4041077/checkindex.txt)\r\n\r\nDoesn't seem to have any issues :(","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/572933469","html_url":"https://github.com/elastic/elasticsearch/issues/50495#issuecomment-572933469","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50495","id":572933469,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjkzMzQ2OQ==","user":{"login":"iverase","id":29038686,"node_id":"MDQ6VXNlcjI5MDM4Njg2","avatar_url":"https://avatars1.githubusercontent.com/u/29038686?v=4","gravatar_id":"","url":"https://api.github.com/users/iverase","html_url":"https://github.com/iverase","followers_url":"https://api.github.com/users/iverase/followers","following_url":"https://api.github.com/users/iverase/following{/other_user}","gists_url":"https://api.github.com/users/iverase/gists{/gist_id}","starred_url":"https://api.github.com/users/iverase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iverase/subscriptions","organizations_url":"https://api.github.com/users/iverase/orgs","repos_url":"https://api.github.com/users/iverase/repos","events_url":"https://api.github.com/users/iverase/events{/privacy}","received_events_url":"https://api.github.com/users/iverase/received_events","type":"User","site_admin":false},"created_at":"2020-01-10T08:46:43Z","updated_at":"2020-01-10T08:46:43Z","author_association":"CONTRIBUTOR","body":"@toby-jn just to discard a problem with a node, I can see the two error posted above come from the same node: `45jcOptdTjqnA_fG1punmg` so I am wondering if the errors are always happening in the same node. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/572976205","html_url":"https://github.com/elastic/elasticsearch/issues/50495#issuecomment-572976205","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50495","id":572976205,"node_id":"MDEyOklzc3VlQ29tbWVudDU3Mjk3NjIwNQ==","user":{"login":"toby-jn","id":32616473,"node_id":"MDQ6VXNlcjMyNjE2NDcz","avatar_url":"https://avatars1.githubusercontent.com/u/32616473?v=4","gravatar_id":"","url":"https://api.github.com/users/toby-jn","html_url":"https://github.com/toby-jn","followers_url":"https://api.github.com/users/toby-jn/followers","following_url":"https://api.github.com/users/toby-jn/following{/other_user}","gists_url":"https://api.github.com/users/toby-jn/gists{/gist_id}","starred_url":"https://api.github.com/users/toby-jn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toby-jn/subscriptions","organizations_url":"https://api.github.com/users/toby-jn/orgs","repos_url":"https://api.github.com/users/toby-jn/repos","events_url":"https://api.github.com/users/toby-jn/events{/privacy}","received_events_url":"https://api.github.com/users/toby-jn/received_events","type":"User","site_admin":false},"created_at":"2020-01-10T10:20:57Z","updated_at":"2020-01-10T10:20:57Z","author_association":"NONE","body":"I think this was just a coincidence, we've seen these failures on multiple nodes on multiple independent (but identically configured) clusters","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/574692088","html_url":"https://github.com/elastic/elasticsearch/issues/50495#issuecomment-574692088","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50495","id":574692088,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NDY5MjA4OA==","user":{"login":"toby-jn","id":32616473,"node_id":"MDQ6VXNlcjMyNjE2NDcz","avatar_url":"https://avatars1.githubusercontent.com/u/32616473?v=4","gravatar_id":"","url":"https://api.github.com/users/toby-jn","html_url":"https://github.com/toby-jn","followers_url":"https://api.github.com/users/toby-jn/followers","following_url":"https://api.github.com/users/toby-jn/following{/other_user}","gists_url":"https://api.github.com/users/toby-jn/gists{/gist_id}","starred_url":"https://api.github.com/users/toby-jn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toby-jn/subscriptions","organizations_url":"https://api.github.com/users/toby-jn/orgs","repos_url":"https://api.github.com/users/toby-jn/repos","events_url":"https://api.github.com/users/toby-jn/events{/privacy}","received_events_url":"https://api.github.com/users/toby-jn/received_events","type":"User","site_admin":false},"created_at":"2020-01-15T14:47:24Z","updated_at":"2020-01-15T14:47:24Z","author_association":"NONE","body":"This seems to be happening during merges on indices where we've done a lot of delete by query. I've tried reproducing this on a test cluster, doing lots of merging and delete by query in a loop, but not seen any issues, we have seen this on a couple of our test stacks that are specifically testing our retention jobs, so if there's anything else we can do to debug this we have an environment where we can sometimes reproduce it. We can try running those with additional logging or special builds if needed.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/575059725","html_url":"https://github.com/elastic/elasticsearch/issues/50495#issuecomment-575059725","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50495","id":575059725,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NTA1OTcyNQ==","user":{"login":"iverase","id":29038686,"node_id":"MDQ6VXNlcjI5MDM4Njg2","avatar_url":"https://avatars1.githubusercontent.com/u/29038686?v=4","gravatar_id":"","url":"https://api.github.com/users/iverase","html_url":"https://github.com/iverase","followers_url":"https://api.github.com/users/iverase/followers","following_url":"https://api.github.com/users/iverase/following{/other_user}","gists_url":"https://api.github.com/users/iverase/gists{/gist_id}","starred_url":"https://api.github.com/users/iverase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iverase/subscriptions","organizations_url":"https://api.github.com/users/iverase/orgs","repos_url":"https://api.github.com/users/iverase/repos","events_url":"https://api.github.com/users/iverase/events{/privacy}","received_events_url":"https://api.github.com/users/iverase/received_events","type":"User","site_admin":false},"created_at":"2020-01-16T09:21:56Z","updated_at":"2020-01-16T09:21:56Z","author_association":"CONTRIBUTOR","body":"If you have an environment where you can reproduce the issue, we would like to ask you to try to reproduce it using a different JVM so we can discard a problem at that level.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/582838916","html_url":"https://github.com/elastic/elasticsearch/issues/50495#issuecomment-582838916","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50495","id":582838916,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MjgzODkxNg==","user":{"login":"toby-jn","id":32616473,"node_id":"MDQ6VXNlcjMyNjE2NDcz","avatar_url":"https://avatars1.githubusercontent.com/u/32616473?v=4","gravatar_id":"","url":"https://api.github.com/users/toby-jn","html_url":"https://github.com/toby-jn","followers_url":"https://api.github.com/users/toby-jn/followers","following_url":"https://api.github.com/users/toby-jn/following{/other_user}","gists_url":"https://api.github.com/users/toby-jn/gists{/gist_id}","starred_url":"https://api.github.com/users/toby-jn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toby-jn/subscriptions","organizations_url":"https://api.github.com/users/toby-jn/orgs","repos_url":"https://api.github.com/users/toby-jn/repos","events_url":"https://api.github.com/users/toby-jn/events{/privacy}","received_events_url":"https://api.github.com/users/toby-jn/received_events","type":"User","site_admin":false},"created_at":"2020-02-06T10:32:34Z","updated_at":"2020-02-06T10:32:34Z","author_association":"NONE","body":"Sorry for the delay in doing this, took some setting up on our end... tried with JDK 12 and still see the errors unfortunately.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/616577241","html_url":"https://github.com/elastic/elasticsearch/issues/50495#issuecomment-616577241","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50495","id":616577241,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNjU3NzI0MQ==","user":{"login":"toby-jn","id":32616473,"node_id":"MDQ6VXNlcjMyNjE2NDcz","avatar_url":"https://avatars1.githubusercontent.com/u/32616473?v=4","gravatar_id":"","url":"https://api.github.com/users/toby-jn","html_url":"https://github.com/toby-jn","followers_url":"https://api.github.com/users/toby-jn/followers","following_url":"https://api.github.com/users/toby-jn/following{/other_user}","gists_url":"https://api.github.com/users/toby-jn/gists{/gist_id}","starred_url":"https://api.github.com/users/toby-jn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toby-jn/subscriptions","organizations_url":"https://api.github.com/users/toby-jn/orgs","repos_url":"https://api.github.com/users/toby-jn/repos","events_url":"https://api.github.com/users/toby-jn/events{/privacy}","received_events_url":"https://api.github.com/users/toby-jn/received_events","type":"User","site_admin":false},"created_at":"2020-04-20T14:07:10Z","updated_at":"2020-04-20T14:07:10Z","author_association":"NONE","body":"still seeing these a lot, but have been running some cron tasks to automatically go and fix up these errors when we see them.. seen this issue is making it into the 7.7 release: https://issues.apache.org/jira/browse/LUCENE-9300 is this a possible cause of the issue?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/616596552","html_url":"https://github.com/elastic/elasticsearch/issues/50495#issuecomment-616596552","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50495","id":616596552,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNjU5NjU1Mg==","user":{"login":"iverase","id":29038686,"node_id":"MDQ6VXNlcjI5MDM4Njg2","avatar_url":"https://avatars1.githubusercontent.com/u/29038686?v=4","gravatar_id":"","url":"https://api.github.com/users/iverase","html_url":"https://github.com/iverase","followers_url":"https://api.github.com/users/iverase/followers","following_url":"https://api.github.com/users/iverase/following{/other_user}","gists_url":"https://api.github.com/users/iverase/gists{/gist_id}","starred_url":"https://api.github.com/users/iverase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iverase/subscriptions","organizations_url":"https://api.github.com/users/iverase/orgs","repos_url":"https://api.github.com/users/iverase/repos","events_url":"https://api.github.com/users/iverase/events{/privacy}","received_events_url":"https://api.github.com/users/iverase/received_events","type":"User","site_admin":false},"created_at":"2020-04-20T14:38:43Z","updated_at":"2020-04-20T14:39:27Z","author_association":"CONTRIBUTOR","body":"Hi @toby-jn ,\r\n\r\nYes, indeed is the cause of what you are seeing. The issue has been fixed in Lucene and release as part of Lucene 8.5.1. Our development branches have been updated to that Lucene version (https://github.com/elastic/elasticsearch/pull/55229), so it should be part of the 7.7 release.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/628700825","html_url":"https://github.com/elastic/elasticsearch/issues/50495#issuecomment-628700825","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50495","id":628700825,"node_id":"MDEyOklzc3VlQ29tbWVudDYyODcwMDgyNQ==","user":{"login":"iverase","id":29038686,"node_id":"MDQ6VXNlcjI5MDM4Njg2","avatar_url":"https://avatars1.githubusercontent.com/u/29038686?v=4","gravatar_id":"","url":"https://api.github.com/users/iverase","html_url":"https://github.com/iverase","followers_url":"https://api.github.com/users/iverase/followers","following_url":"https://api.github.com/users/iverase/following{/other_user}","gists_url":"https://api.github.com/users/iverase/gists{/gist_id}","starred_url":"https://api.github.com/users/iverase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iverase/subscriptions","organizations_url":"https://api.github.com/users/iverase/orgs","repos_url":"https://api.github.com/users/iverase/repos","events_url":"https://api.github.com/users/iverase/events{/privacy}","received_events_url":"https://api.github.com/users/iverase/received_events","type":"User","site_admin":false},"created_at":"2020-05-14T15:13:32Z","updated_at":"2020-05-14T15:13:32Z","author_association":"CONTRIBUTOR","body":"I am closing this issue as it should be fixed in Elasticsearch 7.7. Please feel free to reopen it if you still experience the issue.","performed_via_github_app":null}]