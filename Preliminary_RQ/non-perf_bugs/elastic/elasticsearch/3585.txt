{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/3585","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3585/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3585/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3585/events","html_url":"https://github.com/elastic/elasticsearch/issues/3585","id":18619521,"node_id":"MDU6SXNzdWUxODYxOTUyMQ==","number":3585,"title":"Count and Search API status codes are inconsistent (count does not return 400)","user":{"login":"garron","id":707662,"node_id":"MDQ6VXNlcjcwNzY2Mg==","avatar_url":"https://avatars0.githubusercontent.com/u/707662?v=4","gravatar_id":"","url":"https://api.github.com/users/garron","html_url":"https://github.com/garron","followers_url":"https://api.github.com/users/garron/followers","following_url":"https://api.github.com/users/garron/following{/other_user}","gists_url":"https://api.github.com/users/garron/gists{/gist_id}","starred_url":"https://api.github.com/users/garron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garron/subscriptions","organizations_url":"https://api.github.com/users/garron/orgs","repos_url":"https://api.github.com/users/garron/repos","events_url":"https://api.github.com/users/garron/events{/privacy}","received_events_url":"https://api.github.com/users/garron/received_events","type":"User","site_admin":false},"labels":[{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":37906111,"node_id":"MDU6TGFiZWwzNzkwNjExMQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v1.0.0.Beta1","name":"v1.0.0.Beta1","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"assignees":[{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2013-08-27T16:48:19Z","updated_at":"2013-08-28T18:33:25Z","closed_at":"2013-08-28T18:33:25Z","author_association":"NONE","active_lock_reason":null,"body":"I've got a query that produces a 400 when performing a search. However, when I use the same query to perform a count, a 200 status is returned.\n\nhttps://gist.github.com/garron/6346888\n\nThe output from this gist is:\n\n{\"ok\":true,\"_index\":\"myindex\",\"_type\":\"mydoc\",\"_id\":\"5kngTmpeR5GtJg6Vu46tUw\",\"_version\":1}\\n\nCount using a good query\n200\nSearch using a good query\n200\nCount using a bad query\n200\nSearch using a bad query\n400\n\nIf you take out the \"-o /dev/null\", you can see that both the search and count produce errors in the \"bad query\" case, but the count API still returns a 200.\n","closed_by":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"performed_via_github_app":null}