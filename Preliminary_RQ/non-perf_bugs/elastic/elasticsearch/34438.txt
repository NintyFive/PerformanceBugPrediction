{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/34438","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34438/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34438/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34438/events","html_url":"https://github.com/elastic/elasticsearch/issues/34438","id":369996227,"node_id":"MDU6SXNzdWUzNjk5OTYyMjc=","number":34438,"title":"question: ES response size limitations | 502 bad gateway","user":{"login":"omurbekjk","id":8253376,"node_id":"MDQ6VXNlcjgyNTMzNzY=","avatar_url":"https://avatars2.githubusercontent.com/u/8253376?v=4","gravatar_id":"","url":"https://api.github.com/users/omurbekjk","html_url":"https://github.com/omurbekjk","followers_url":"https://api.github.com/users/omurbekjk/followers","following_url":"https://api.github.com/users/omurbekjk/following{/other_user}","gists_url":"https://api.github.com/users/omurbekjk/gists{/gist_id}","starred_url":"https://api.github.com/users/omurbekjk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/omurbekjk/subscriptions","organizations_url":"https://api.github.com/users/omurbekjk/orgs","repos_url":"https://api.github.com/users/omurbekjk/repos","events_url":"https://api.github.com/users/omurbekjk/events{/privacy}","received_events_url":"https://api.github.com/users/omurbekjk/received_events","type":"User","site_admin":false},"labels":[{"id":141141324,"node_id":"MDU6TGFiZWwxNDExNDEzMjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Analytics/Aggregations","name":":Analytics/Aggregations","color":"0e8a16","default":false,"description":"Aggregations"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-10-15T04:39:53Z","updated_at":"2018-10-15T08:00:26Z","closed_at":"2018-10-15T08:00:26Z","author_association":"NONE","active_lock_reason":null,"body":"We have large data in ES, we send request with the size limit: 1,000 and we do pagination to get remaining results.\r\nSometimes we get 502 bad gateway, hard to debug what went wrong.\r\nI assumed if the response size is too large maybe the server is failing to serve it.\r\nAlso we do aggregation with the size limit: 10 000.\r\n\r\n1. What is the recommended size for es query and aggregation?\r\n2. How should we handle aggregation queries when we do pagination?\r\n","closed_by":{"login":"vladimirdolzhenko","id":209440,"node_id":"MDQ6VXNlcjIwOTQ0MA==","avatar_url":"https://avatars0.githubusercontent.com/u/209440?v=4","gravatar_id":"","url":"https://api.github.com/users/vladimirdolzhenko","html_url":"https://github.com/vladimirdolzhenko","followers_url":"https://api.github.com/users/vladimirdolzhenko/followers","following_url":"https://api.github.com/users/vladimirdolzhenko/following{/other_user}","gists_url":"https://api.github.com/users/vladimirdolzhenko/gists{/gist_id}","starred_url":"https://api.github.com/users/vladimirdolzhenko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vladimirdolzhenko/subscriptions","organizations_url":"https://api.github.com/users/vladimirdolzhenko/orgs","repos_url":"https://api.github.com/users/vladimirdolzhenko/repos","events_url":"https://api.github.com/users/vladimirdolzhenko/events{/privacy}","received_events_url":"https://api.github.com/users/vladimirdolzhenko/received_events","type":"User","site_admin":false},"performed_via_github_app":null}