{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/12734","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12734/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12734/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12734/events","html_url":"https://github.com/elastic/elasticsearch/issues/12734","id":99713911,"node_id":"MDU6SXNzdWU5OTcxMzkxMQ==","number":12734,"title":"Batch up cluster state events spawning from fault detection failures","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"labels":[{"id":836504707,"node_id":"MDU6TGFiZWw4MzY1MDQ3MDc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Distributed","name":":Distributed/Distributed","color":"0e8a16","default":false,"description":"A catch all label for anything in the Distributed Area. If you aren't sure, use this one."},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-08-07T19:34:20Z","updated_at":"2018-02-13T19:56:39Z","closed_at":"2016-01-26T18:15:17Z","author_association":"MEMBER","active_lock_reason":null,"body":"Have a scenario where a large number of new nodes were added to a 1.4.1 cluster (allocation disabled so no data is allocated to them yet) but the networking rules have not yet been set up yet (?).  This is causing fault detection pings to fail against all of these nodes.  As a resulting the pending task list was showing 70+ immediate tasks like the following (with one being executed):\n\n```\n    {\n      \"insert_order\": 3524021,\n      \"priority\": \"IMMEDIATE\",\n      \"source\": \"zen-disco-node_failed([data76][weK5x8_yT6O7CWuRaDpNGQ][data76][inet[/10.130.0.19:9300]]{master=false}), reason failed to ping, tried [3] times, each with maximum [30s] timeout\",\n      \"executing\": true,\n      \"time_in_queue_millis\": 72182,\n      \"time_in_queue\": \"1.2m\"\n    }\n```\n\nThis causes other cluster state event tasks like put mapping, etc.. to fail due to a timeout.\n\nDiscussed briefly with @kimchy .  He noted that we should batch up the node-removals-due-to-ping-failures tasks.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}