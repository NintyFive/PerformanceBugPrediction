{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/17446","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17446/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17446/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17446/events","html_url":"https://github.com/elastic/elasticsearch/issues/17446","id":144893027,"node_id":"MDU6SXNzdWUxNDQ4OTMwMjc=","number":17446,"title":"Change upgrade API to reindex-in-place","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"labels":[{"id":145572580,"node_id":"MDU6TGFiZWwxNDU1NzI1ODA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/CRUD","name":":Distributed/CRUD","color":"0e8a16","default":false,"description":"A catch all label for issues around indexing, updating and getting a doc by id. Not search."},{"id":23172,"node_id":"MDU6TGFiZWwyMzE3Mg==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Efeature","name":">feature","color":"006b75","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2016-03-31T12:57:33Z","updated_at":"2018-03-20T14:22:51Z","closed_at":"2018-03-20T14:22:50Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"The upgrade API in its current form will not help users to migrate indices created in Elasticsearch 1.x to 5.x.\n\nThe upgrade API rewrites an index in the latest Lucene format, but it still retains the original data structures that were used when the index was first created. For instance:\n- Doc-values on numeric fields used to use BinaryDocValues, but now use dedicated NumericDocValues.\n- The parent-child feature has been completely rewritten to use a new data structure.\n- Geo-point fields now require doc values and the Lucene index where, previously, they relied on in-memory calculations.\n\nWe should change the upgrade API to reindex-in-place, that is:\n- Create `.my_index`using the mapping and settings from `my_index`\n- Reindex the data in `my_index` to `.my_index`\n- Atomically delete `my_index` and rename `.my_index` to `my_index`\n\nThis would work only on a read-only index (at least for now).  It depends on:\n- [ ] The ability to rename an index #17426 \n- [ ] The ability to retrieve a reindex job's status after completion #16911 \n","closed_by":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"performed_via_github_app":null}