{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/4006","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4006/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4006/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4006/events","html_url":"https://github.com/elastic/elasticsearch/issues/4006","id":21791529,"node_id":"MDU6SXNzdWUyMTc5MTUyOQ==","number":4006,"title":"mget API - document the support for fields parameter in URL, add support for fields parameter in request body","user":{"login":"apidruchny","id":1816354,"node_id":"MDQ6VXNlcjE4MTYzNTQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1816354?v=4","gravatar_id":"","url":"https://api.github.com/users/apidruchny","html_url":"https://github.com/apidruchny","followers_url":"https://api.github.com/users/apidruchny/followers","following_url":"https://api.github.com/users/apidruchny/following{/other_user}","gists_url":"https://api.github.com/users/apidruchny/gists{/gist_id}","starred_url":"https://api.github.com/users/apidruchny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apidruchny/subscriptions","organizations_url":"https://api.github.com/users/apidruchny/orgs","repos_url":"https://api.github.com/users/apidruchny/repos","events_url":"https://api.github.com/users/apidruchny/events{/privacy}","received_events_url":"https://api.github.com/users/apidruchny/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"assignees":[{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2013-10-29T22:03:59Z","updated_at":"2014-11-08T12:56:01Z","closed_at":"2014-11-08T12:56:01Z","author_association":"NONE","active_lock_reason":null,"body":"The documentation for mget API only specifies that the fields parameter can be specified per document to get. But I tried and am using the un-documented feature of specifying the fields parameter in the URL. It would be good to make it a documented feature. It would also be good to support the fields parameter in the request body, as a top-level element. The motivation is that there is a limit on the URL size (4K as far as I remember) and a big field list may hit the limit. I had this problem in practice. It is also not best to repeat the same big field list for each document to get, and actually impossible at all if the ids element is used. Please see the reproduction below:\n\n```\ncurl -XDELETE \"http://localhost:9200/test/\"; echo\ncurl -XPUT \"http://localhost:9200/test/\" -d'{\n   \"settings\": {\n      \"number_of_replicas\": 0,\n      \"number_of_shards\": 5\n   }\n}'; echo\n\ncurl -XPUT 'http://localhost:9200/test/order/1-1' -d '{\n   \"productName\":\"doc 1\",\n   \"quantity\":1\n}'; echo\ncurl -XPUT 'http://localhost:9200/test/order/1-2' -d '{\n   \"productName\":\"doc 2\",\n   \"quantity\":20\n}'; echo\ncurl -XPUT 'http://localhost:9200/test/order/1-3?refresh=true' -d '{\n   \"productName\":\"doc 3\",\n   \"quantity\":5\n}'; echo\n\n# This works, returns 3 docs with productName field only\ncurl -XPOST 'http://localhost:9200/test/order/_mget?pretty=true&fields=productName' -d '{\n   \"ids\" : [ \"1-1\", \"1-2\", \"1-3\" ]\n}'; echo\n\n# Fields parameter is ignored. This returns 3 docs with _source field\ncurl -XPOST 'http://localhost:9200/test/order/_mget?pretty=true' -d '{\n   \"fields\" : [ \"productName\" ],\n   \"ids\" : [ \"1-1\", \"1-2\", \"1-3\" ]\n}'; echo\n```\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}