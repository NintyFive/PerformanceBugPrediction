{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/14441","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14441/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14441/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14441/events","html_url":"https://github.com/elastic/elasticsearch/issues/14441","id":114624793,"node_id":"MDU6SXNzdWUxMTQ2MjQ3OTM=","number":14441,"title":"Unicast hostname failing to resolve blocks cluster from starting","user":{"login":"wkruse","id":3473199,"node_id":"MDQ6VXNlcjM0NzMxOTk=","avatar_url":"https://avatars3.githubusercontent.com/u/3473199?v=4","gravatar_id":"","url":"https://api.github.com/users/wkruse","html_url":"https://github.com/wkruse","followers_url":"https://api.github.com/users/wkruse/followers","following_url":"https://api.github.com/users/wkruse/following{/other_user}","gists_url":"https://api.github.com/users/wkruse/gists{/gist_id}","starred_url":"https://api.github.com/users/wkruse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wkruse/subscriptions","organizations_url":"https://api.github.com/users/wkruse/orgs","repos_url":"https://api.github.com/users/wkruse/repos","events_url":"https://api.github.com/users/wkruse/events{/privacy}","received_events_url":"https://api.github.com/users/wkruse/received_events","type":"User","site_admin":false},"labels":[{"id":146854632,"node_id":"MDU6TGFiZWwxNDY4NTQ2MzI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Network","name":":Distributed/Network","color":"0e8a16","default":false,"description":"Http and internode communication implementations"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":92913658,"node_id":"MDU6TGFiZWw5MjkxMzY1OA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/blocker","name":"blocker","color":"e11d21","default":false,"description":null},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null},{"id":408109539,"node_id":"MDU6TGFiZWw0MDgxMDk1Mzk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v5.1.1","name":"v5.1.1","color":"dddddd","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"assignees":[{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false}],"milestone":null,"comments":38,"created_at":"2015-11-02T16:04:17Z","updated_at":"2017-11-11T13:29:55Z","closed_at":"2016-11-22T19:17:04Z","author_association":"NONE","active_lock_reason":null,"body":"Hi folks,\n\nthere seems to be a regression from **1.7.3** to **2.0.0** regarding the `gateway.recover_after_time` setting.\n\n``` bash\ndocker run --name=\"elasticsearch\" -p 9200:9200 -p 9300:9300 -e \"SERVICE_ID=$hostname\" -e \"SERVICE_NAME=elasticsearch\" elasticsearch:2.0.0 -Des.index.number_of_shards=3 -Des.index.number_of_replicas=2 -Des.gateway.recover_after_nodes=2 -Des.gateway.expected_nodes=3 -Des.gateway.recover_after_time=5m -Des.discovery.zen.ping.multicast.enabled=false -Des.discovery.zen.ping.unicast.hosts=\"01.elasticsearch,02.elasticsearch,03.elasticsearch\" -Des.cluster.name=\"logging-test\" -Des.network.publish_host=\"${PUBLIC_IP}\"\n```\n\nI run Elasticsearch on three nodes (Docker hosts). The DNS names are not immediatly available. In **1.7.3** the cluster stabilizes after a couple of minutes. In **2.0.0** the container crashes directly.\n\n``` java\nException in thread \"main\" java.lang.IllegalArgumentException: Failed to resolve address for [02.elasticsearch]\nLikely root cause: java.net.UnknownHostException: 02.elasticsearch: unknown error\nat java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)\nat java.net.InetAddress$2.lookupAllHostAddr(InetAddress.java:928)\nat java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1323)\nat java.net.InetAddress.getAllByName0(InetAddress.java:1276)\nat java.net.InetAddress.getAllByName(InetAddress.java:1192)\nat java.net.InetAddress.getAllByName(InetAddress.java:1126)\nat org.elasticsearch.transport.netty.NettyTransport.parse(NettyTransport.java:668)\nat org.elasticsearch.transport.netty.NettyTransport.addressesFromString(NettyTransport.java:620)\nat org.elasticsearch.transport.TransportService.addressesFromString(TransportService.java:398)\nat org.elasticsearch.discovery.zen.ping.unicast.UnicastZenPing.<init>(UnicastZenPing.java:141)\nat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\nat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\nat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\nat java.lang.reflect.Constructor.newInstance(Constructor.java:422)\nat <<<guice>>>\nat org.elasticsearch.node.Node.<init>(Node.java:198)\nat org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:145)\nat org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:170)\nat org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:270)\nat org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:35)\n```\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}