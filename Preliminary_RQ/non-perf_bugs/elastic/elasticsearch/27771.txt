{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/27771","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27771/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27771/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27771/events","html_url":"https://github.com/elastic/elasticsearch/issues/27771","id":281353974,"node_id":"MDU6SXNzdWUyODEzNTM5NzQ=","number":27771,"title":"Term vectors / artifical documents example doesn't work","user":{"login":"DavidNemeskey","id":690386,"node_id":"MDQ6VXNlcjY5MDM4Ng==","avatar_url":"https://avatars3.githubusercontent.com/u/690386?v=4","gravatar_id":"","url":"https://api.github.com/users/DavidNemeskey","html_url":"https://github.com/DavidNemeskey","followers_url":"https://api.github.com/users/DavidNemeskey/followers","following_url":"https://api.github.com/users/DavidNemeskey/following{/other_user}","gists_url":"https://api.github.com/users/DavidNemeskey/gists{/gist_id}","starred_url":"https://api.github.com/users/DavidNemeskey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DavidNemeskey/subscriptions","organizations_url":"https://api.github.com/users/DavidNemeskey/orgs","repos_url":"https://api.github.com/users/DavidNemeskey/repos","events_url":"https://api.github.com/users/DavidNemeskey/events{/privacy}","received_events_url":"https://api.github.com/users/DavidNemeskey/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2017-12-12T11:43:24Z","updated_at":"2017-12-12T15:01:27Z","closed_at":"2017-12-12T14:44:52Z","author_association":"NONE","active_lock_reason":null,"body":"<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`):\r\nVersion: 6.0.1, Build: 601be4a/2017-12-04T09:29:09.525Z, JVM: 1.8.0_151\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version** (`java -version`):\r\nopenjdk version \"1.8.0_151\"\r\nOpenJDK Runtime Environment (build 1.8.0_151-8u151-b12-0ubuntu0.16.04.2-b12)\r\nOpenJDK 64-Bit Server VM (build 25.151-b12, mixed mode)\r\n\r\n**OS version** (`uname -a` if on a Unix-like system):\r\n4.10.0-38-generic #42~16.04.1-Ubuntu SMP Tue Oct 10 16:32:20 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nThe [\"artifical documents\" example](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-termvectors.html#docs-termvectors-artificial-doc) in the term vectors API doesn't work. Neither does the one below.\r\n\r\nI get the following error message:\r\n```JSON\r\n{\r\n  \"error\" : {\r\n    \"root_cause\" : [\r\n      {\r\n        \"type\" : \"illegal_state_exception\",\r\n        \"reason\" : \"Something is wrong with the field statistics of the term vector request: Values are \\nsum_doc_freq 0\\ndoc_count 0\\nsum_ttf 0\"\r\n      }\r\n    ],\r\n    \"type\" : \"illegal_state_exception\",\r\n    \"reason\" : \"Something is wrong with the field statistics of the term vector request: Values are \\nsum_doc_freq 0\\ndoc_count 0\\nsum_ttf 0\"\r\n  },\r\n  \"status\" : 500\r\n}\r\n```\r\n\r\n**Steps to reproduce**:\r\n\r\nJust follow the commands on the linked page.\r\n\r\n**Provide logs (if relevant)**:\r\n```\r\n[2017-12-12T12:35:52,493][WARN ][r.suppressed             ] path: /twitter/tweet/_termvectors, params: {pretty=, index=twitter, type=tweet}\r\njava.lang.IllegalStateException: Something is wrong with the field statistics of the term vector request: Values are \r\nsum_doc_freq 0\r\ndoc_count 0\r\nsum_ttf 0\r\n\tat org.elasticsearch.action.termvectors.TermVectorsResponse.buildFieldStatistics(TermVectorsResponse.java:322) ~[elasticsearch-6.0.1.jar:6.0.1]\r\n\tat org.elasticsearch.action.termvectors.TermVectorsResponse.buildField(TermVectorsResponse.java:205) ~[elasticsearch-6.0.1.jar:6.0.1]\r\n\tat org.elasticsearch.action.termvectors.TermVectorsResponse.toXContent(TermVectorsResponse.java:192) ~[elasticsearch-6.0.1.jar:6.0.1]\r\n\tat org.elasticsearch.rest.action.RestToXContentListener.buildResponse(RestToXContentListener.java:47) ~[elasticsearch-6.0.1.jar:6.0.1]\r\n\tat org.elasticsearch.rest.action.RestToXContentListener.buildResponse(RestToXContentListener.java:42) ~[elasticsearch-6.0.1.jar:6.0.1]\r\n\tat org.elasticsearch.rest.action.RestToXContentListener.buildResponse(RestToXContentListener.java:34) ~[elasticsearch-6.0.1.jar:6.0.1]\r\n\tat org.elasticsearch.rest.action.RestResponseListener.processResponse(RestResponseListener.java:37) ~[elasticsearch-6.0.1.jar:6.0.1]\r\n\tat org.elasticsearch.rest.action.RestActionListener.onResponse(RestActionListener.java:47) [elasticsearch-6.0.1.jar:6.0.1]\r\n\tat org.elasticsearch.action.support.TransportAction$1.onResponse(TransportAction.java:85) [elasticsearch-6.0.1.jar:6.0.1]\r\n\tat org.elasticsearch.action.support.TransportAction$1.onResponse(TransportAction.java:81) [elasticsearch-6.0.1.jar:6.0.1]\r\n\tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$AsyncSingleAction$2.handleResponse(TransportSingleShardAction.java:247) [elasticsearch-6.0.1.jar:6.0.1]\r\n\tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$AsyncSingleAction$2.handleResponse(TransportSingleShardAction.java:233) [elasticsearch-6.0.1.jar:6.0.1]\r\n\tat org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleResponse(TransportService.java:1062) [elasticsearch-6.0.1.jar:6.0.1]\r\n\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.processResponse(TransportService.java:1136) [elasticsearch-6.0.1.jar:6.0.1]\r\n\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:1126) [elasticsearch-6.0.1.jar:6.0.1]\r\n\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:1115) [elasticsearch-6.0.1.jar:6.0.1]\r\n\tat org.elasticsearch.transport.DelegatingTransportChannel.sendResponse(DelegatingTransportChannel.java:60) [elasticsearch-6.0.1.jar:6.0.1]\r\n\tat org.elasticsearch.transport.RequestHandlerRegistry$TransportChannelWrapper.sendResponse(RequestHandlerRegistry.java:108) [elasticsearch-6.0.1.jar:6.0.1]\r\n\tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$ShardTransportHandler.messageReceived(TransportSingleShardAction.java:295) [elasticsearch-6.0.1.jar:6.0.1]\r\n\tat org.elasticsearch.action.support.single.shard.TransportSingleShardAction$ShardTransportHandler.messageReceived(TransportSingleShardAction.java:287) [elasticsearch-6.0.1.jar:6.0.1]\r\n\tat org.elasticsearch.transport.TransportRequestHandler.messageReceived(TransportRequestHandler.java:30) [elasticsearch-6.0.1.jar:6.0.1]\r\n\tat org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:66) [elasticsearch-6.0.1.jar:6.0.1]\r\n\tat org.elasticsearch.transport.TransportService$7.doRun(TransportService.java:659) [elasticsearch-6.0.1.jar:6.0.1]\r\n\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:638) [elasticsearch-6.0.1.jar:6.0.1]\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) [elasticsearch-6.0.1.jar:6.0.1]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_151]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_151]\r\n\tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_151]\r\n```","closed_by":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"performed_via_github_app":null}