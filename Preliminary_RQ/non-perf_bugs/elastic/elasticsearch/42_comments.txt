[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/144851","html_url":"https://github.com/elastic/elasticsearch/issues/42#issuecomment-144851","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42","id":144851,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NDg1MQ==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-02-25T18:13:40Z","updated_at":"2010-03-02T18:08:37Z","author_association":"MEMBER","body":"API implemented. Can be accessed through `/_cluster/health` or `/_cluster/health/{index}` (index can be a list indices as well, or _all). Parameters include:\n- _level_: can be one of `cluster`, `indices` or `shards`, controls the details level of the health information returned. Defaults to `cluster`.\n- _waitForStatus_: one of `green`, `yellow`, or `red`. Will wait (until the timeout provided) until the status of the cluster changes to the one provided. By default, will not wait for any status.\n- _waitForRelocatingShards_: A number controlling to how many relocating shards to wait. Usually will be 0 to indicate to wait till all relocation have happened. Defaults to not wait.\n- _timeout_: A time based parameter controlling how long to wait if one of the waitForXXX are provided. Defaults to `30s`.\n\nThe status can be one of green, yellow or red. On the shard level, a red status indicates that the shard nothing allocated in the cluster, yellow means that the primary shard is allocated, and green means that all shards are allocated. The index level status is the controlled by the worst shard status. The cluster status is controlled by the worst index status.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148754","html_url":"https://github.com/elastic/elasticsearch/issues/42#issuecomment-148754","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42","id":148754,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODc1NA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2010-03-02T17:28:05Z","updated_at":"2010-03-02T18:26:34Z","author_association":"CONTRIBUTOR","body":"Ahh, the URL is `/_cluster/health` or `/_cluster/health/$indices`\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148788","html_url":"https://github.com/elastic/elasticsearch/issues/42#issuecomment-148788","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42","id":148788,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODc4OA==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-03-02T18:09:27Z","updated_at":"2010-03-02T18:09:27Z","author_association":"MEMBER","body":"Yes..., markdown formatting... . Fixed.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148889","html_url":"https://github.com/elastic/elasticsearch/issues/42#issuecomment-148889","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42","id":148889,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODg4OQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2010-03-02T19:41:28Z","updated_at":"2010-03-02T19:41:28Z","author_association":"CONTRIBUTOR","body":"Hmm, in running my test suite, I add a `flush_index(); sleep 1` every now and again, to allow the cluster to catch up.\n\nI've tried replacing it with a `waitForStatus: \"green\"`, and i get various errors. It seems that waiting for green isn't sufficient to ensure that actions like deleting or creating indices have settled down sufficiently to allow another similar action.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148912","html_url":"https://github.com/elastic/elasticsearch/issues/42#issuecomment-148912","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42","id":148912,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODkxMg==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-03-02T20:01:03Z","updated_at":"2010-03-02T20:01:03Z","author_association":"MEMBER","body":"Can you paste a sample script that recreates this?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/150391","html_url":"https://github.com/elastic/elasticsearch/issues/42#issuecomment-150391","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42","id":150391,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MDM5MQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2010-03-04T12:58:21Z","updated_at":"2010-03-04T12:58:21Z","author_association":"CONTRIBUTOR","body":"Start three servers and then run this script\n\n```\n#!/bin/bash\ncurl -XPUT 'http://127.0.0.2:9200/es_test_1/test/1?pretty=true'  -d '\n{\n   \"num\" : \"foo\",\n   \"text\" : \"123\"\n}\n'\n# {\n#    \"ok\" : true,\n#    \"_index\" : \"es_test_1\",\n#    \"_id\" : \"1\",\n#    \"_type\" : \"test\"\n# }\n\n\ncurl -XGET 'http://127.0.0.2:9200/_cluster/health?waitForStatus=green&pretty=true' \n# {\n#    \"activeShards\" : 20,\n#    \"activePrimaryShards\" : 10,\n#    \"relocatingShards\" : 0,\n#    \"status\" : \"green\",\n#    \"timedOut\" : false\n# }\n\n\ncurl -XGET 'http://127.0.0.2:9200/es_test_1/test/1?pretty=true' \n# {\n#    \"error\" : \"NullPointerException[null]\"\n# }\n```\n\nThe second time you run it, it works correctly, presumably because the cluster has had time to create the index properly\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/150392","html_url":"https://github.com/elastic/elasticsearch/issues/42#issuecomment-150392","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42","id":150392,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MDM5Mg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2010-03-04T13:00:44Z","updated_at":"2010-03-04T13:00:44Z","author_association":"CONTRIBUTOR","body":"Also, it'd be nice if `waitForStatus='yellow'` would return if the status is `green`.  ie wait-until-status-is-at-least\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/150396","html_url":"https://github.com/elastic/elasticsearch/issues/42#issuecomment-150396","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42","id":150396,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MDM5Ng==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-03-04T13:09:46Z","updated_at":"2010-03-04T13:09:46Z","author_association":"MEMBER","body":"Fixed the waitForStatus to wait for at least the given status. Will check on the script soon.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/150414","html_url":"https://github.com/elastic/elasticsearch/issues/42#issuecomment-150414","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42","id":150414,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MDQxNA==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-03-04T13:36:03Z","updated_at":"2010-03-04T13:36:03Z","author_association":"MEMBER","body":"pushed a fix for the null pointer exception, it works well now. Note, because of the near real time search, you will get a NOT FOUND http response when you run it, it will get after ~1 second.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/150439","html_url":"https://github.com/elastic/elasticsearch/issues/42#issuecomment-150439","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42","id":150439,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MDQzOQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2010-03-04T14:20:27Z","updated_at":"2010-03-04T14:20:27Z","author_association":"CONTRIBUTOR","body":"Both of those fixes work ++\n","performed_via_github_app":null}]