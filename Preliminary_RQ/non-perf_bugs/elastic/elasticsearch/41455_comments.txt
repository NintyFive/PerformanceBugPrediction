[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/485920112","html_url":"https://github.com/elastic/elasticsearch/issues/41455#issuecomment-485920112","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41455","id":485920112,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTkyMDExMg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-04-23T18:25:45Z","updated_at":"2019-04-23T18:25:45Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/486085335","html_url":"https://github.com/elastic/elasticsearch/issues/41455#issuecomment-486085335","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41455","id":486085335,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NjA4NTMzNQ==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2019-04-24T06:25:06Z","updated_at":"2019-04-24T06:25:06Z","author_association":"MEMBER","body":"I tracked this down. The failure when using an incorrect account ID is coming from the fact that the account ID is part of the URI that Azure is requesting. If it doesn't exist, Azure retries the request like any other DNS failure.\r\n\r\nI'm closing this and would suggest not fixing it. I don't think we want to adjust the timeout here for the verify request as it would make it more likely that a just created repository would fail as well.\r\nThis is not optimal in terms of it taking up to 60s for the put repo request to fail, but the error eventually returned is fine imo:\r\n\r\n```\r\ncurl -X PUT \"localhost:9200/_snapshot/my_backup2\" -H 'Content-Type: application/json' -d'\r\n{\r\n    \"type\": \"azure\", \"container\": \"elasticsearch-ci-thirdparty\"\r\n}\r\n'\r\n{\"error\":{\"root_cause\":[{\"type\":\"repository_verification_exception\",\"reason\":\"[my_backup2] path  is not accessible on master node\"}],\"type\":\"repository_verification_exception\",\"reason\":\"[my_backup2] path  is not accessible on master node\",\"caused_by\":{\"type\":\"i_o_exception\",\"reason\":\"Can not write blob master.dat\",\"caused_by\":{\"type\":\"storage_exception\",\"reason\":\"\",\"caused_by\":{\"type\":\"unknown_host_exception\",\"reason\":\"9aef1b43-3a47-4196-990c-9fed04fb1e28.blob.core.windows.net\"}}}},\"status\":500}\r\n```\r\n\r\n","performed_via_github_app":null}]