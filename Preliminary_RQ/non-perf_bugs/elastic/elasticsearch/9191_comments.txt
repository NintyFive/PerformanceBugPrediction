[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69338005","html_url":"https://github.com/elastic/elasticsearch/issues/9191#issuecomment-69338005","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9191","id":69338005,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MzM4MDA1","user":{"login":"hoannv","id":1846777,"node_id":"MDQ6VXNlcjE4NDY3Nzc=","avatar_url":"https://avatars2.githubusercontent.com/u/1846777?v=4","gravatar_id":"","url":"https://api.github.com/users/hoannv","html_url":"https://github.com/hoannv","followers_url":"https://api.github.com/users/hoannv/followers","following_url":"https://api.github.com/users/hoannv/following{/other_user}","gists_url":"https://api.github.com/users/hoannv/gists{/gist_id}","starred_url":"https://api.github.com/users/hoannv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoannv/subscriptions","organizations_url":"https://api.github.com/users/hoannv/orgs","repos_url":"https://api.github.com/users/hoannv/repos","events_url":"https://api.github.com/users/hoannv/events{/privacy}","received_events_url":"https://api.github.com/users/hoannv/received_events","type":"User","site_admin":false},"created_at":"2015-01-09T14:08:18Z","updated_at":"2015-01-09T14:27:22Z","author_association":"NONE","body":"I had same issue from yesterday. Elasticsearch version: 1.3.7\n\n```\nschool:\n    mappings:\n       name: ~\n       shortName: ~\n       city: ~\n       address: ~\n       description: ~\n       rankingTotal: { type : integer }\n```\n\nWhere I order by rankingTotal, it throws below error.\n\n```\nSearchPhaseExecutionException[Failed to execute phase [query_fetch], all shards failed; shardFailures {[l2T3o59-S5GXM3CRgQlomw][abcxyz][0]: QueryPhaseExecutionException[[abcxyz][0]: query[filtered(+((name:boston^4.0 | shortName:boston | city:boston^2.0 | address:boston | description:boston | area.title:boston | area.shortTitle:boston | area.parent.title:boston | area.parent.shortTitle:boston) ToParentBlockJoinQuery (filtered((topSchools.speciality.title:boston | topSchools.speciality.prefixTitle:boston | topSchools.speciality.suffixTitle:boston | topSchools.speciality.shortTitle:boston | topSchools.speciality.shortDescription:boston))->cache(_type:__topSchools)) ToParentBlockJoinQuery (filtered(profiles.content:boston)->cache(_type:__profiles))))->cache(_type:school)],from[0],size[10],sort[,,]: Query Failed [Failed to execute main query]]; nested: ElasticsearchException[java.lang.NumberFormatException: Invalid shift value in prefixCoded bytes (is encoded value really an INT?)]; nested: UncheckedExecutionException[java.lang.NumberFormatException: Invalid shift value in prefixCoded bytes (is encoded value really an INT?)]; nested: NumberFormatException[Invalid shift value in prefixCoded bytes (is encoded value really an INT?)]; }]\n```\n\nBut it's working fine when I remove order by rankingtotal\n\nAnd it's very strange that when ordering by ranking total, sometime it works and sometime it doesn't work. I faced this problem twice. But I didn't know why it's fixed.\n\nNow it happens again.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69378273","html_url":"https://github.com/elastic/elasticsearch/issues/9191#issuecomment-69378273","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9191","id":69378273,"node_id":"MDEyOklzc3VlQ29tbWVudDY5Mzc4Mjcz","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-01-09T18:41:20Z","updated_at":"2015-01-09T18:41:20Z","author_association":"MEMBER","body":"@hero007asd or @Hoannv can you give more details about your setup? It would be helpful to see the query you are running, and perhaps a couple simplified documents that will reproduce the issue?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69439082","html_url":"https://github.com/elastic/elasticsearch/issues/9191#issuecomment-69439082","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9191","id":69439082,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDM5MDgy","user":{"login":"hoannv","id":1846777,"node_id":"MDQ6VXNlcjE4NDY3Nzc=","avatar_url":"https://avatars2.githubusercontent.com/u/1846777?v=4","gravatar_id":"","url":"https://api.github.com/users/hoannv","html_url":"https://github.com/hoannv","followers_url":"https://api.github.com/users/hoannv/followers","following_url":"https://api.github.com/users/hoannv/following{/other_user}","gists_url":"https://api.github.com/users/hoannv/gists{/gist_id}","starred_url":"https://api.github.com/users/hoannv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoannv/subscriptions","organizations_url":"https://api.github.com/users/hoannv/orgs","repos_url":"https://api.github.com/users/hoannv/repos","events_url":"https://api.github.com/users/hoannv/events{/privacy}","received_events_url":"https://api.github.com/users/hoannv/received_events","type":"User","site_admin":false},"created_at":"2015-01-10T04:03:08Z","updated_at":"2015-01-10T07:43:42Z","author_association":"NONE","body":"I attached one simplified document which is returned after query.\n\nQuery has sort by three fields as following:\n\n```\n  'sort' => \n    array (size=3)\n      'rankingExclude' => \n        array (size=1)\n          'order' => string 'asc' (length=3)\n      '_score' => \n        array (size=1)\n          'order' => string 'desc' (length=4)\n      'rankingTotal' => \n        array (size=1)\n          'order' => string 'asc' (length=3)\n```\n\nThe following is one simplified document\n\n```\n    array (size=6)\n      '_index' => string 'mba' (length=7)\n      '_type' => string 'school' (length=6)\n      '_id' => string '1017' (length=4)\n      '_score' => float 3.737905\n      '_source' => \n        array (size=1)\n          'rankingTotal' => int 108\n      'sort' => \n        array (size=3)\n          0 => string 'false' (length=5)\n          1 => float 3.737905\n          2 => 994323212134343423\n```\n\nI don't know why: \n- document  has 'rankingTotal' => int 108\n- but the third parameter of 'sort by rankingTotal' is a long value '2 => 994323212134343423'\n\nWhen I removed sort by rankingTotal, it's working properly.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69446978","html_url":"https://github.com/elastic/elasticsearch/issues/9191#issuecomment-69446978","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9191","id":69446978,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDQ2OTc4","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-01-10T07:19:14Z","updated_at":"2015-01-10T07:19:14Z","author_association":"MEMBER","body":"@Hoannv I still don't understand.  Could you give me:\n1. Example documents (the full source, as json, not within query results)?\n2. The actual query you are running (preferrable as json)?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69447758","html_url":"https://github.com/elastic/elasticsearch/issues/9191#issuecomment-69447758","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9191","id":69447758,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDQ3NzU4","user":{"login":"hoannv","id":1846777,"node_id":"MDQ6VXNlcjE4NDY3Nzc=","avatar_url":"https://avatars2.githubusercontent.com/u/1846777?v=4","gravatar_id":"","url":"https://api.github.com/users/hoannv","html_url":"https://github.com/hoannv","followers_url":"https://api.github.com/users/hoannv/followers","following_url":"https://api.github.com/users/hoannv/following{/other_user}","gists_url":"https://api.github.com/users/hoannv/gists{/gist_id}","starred_url":"https://api.github.com/users/hoannv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoannv/subscriptions","organizations_url":"https://api.github.com/users/hoannv/orgs","repos_url":"https://api.github.com/users/hoannv/repos","events_url":"https://api.github.com/users/hoannv/events{/privacy}","received_events_url":"https://api.github.com/users/hoannv/received_events","type":"User","site_admin":false},"created_at":"2015-01-10T07:56:18Z","updated_at":"2015-01-10T07:56:18Z","author_association":"NONE","body":"I'm using FOSElasticaBundle for my project. Here are what you asked.\n\nExample document:\n\n```\n{\"_index\":\"mba\",\"_type\":\"school\",\"_id\":\"2\",\"_version\":32,\"found\":true,\"_source\":{\"name\":\"Samford University - Brock School of Business\",\"shortName\":\"Samford - Brock\",\"city\":\"Birmingham\",\"address\":\"800 Lakeshore Drive\",\"description\":null,\"rankingTotal\":1042,\"rankingExclude\":false,\"rankings\":[],\"accreditations\":[{\"id\":1}],\"area\":{\"id\":16,\"title\":\"Alabama\",\"shortTitle\":\"AL\",\"parent\":{\"id\":15,\"title\":\"United States\",\"shortTitle\":\"USA\"}},\"programs\":[{\"languages\":[{\"id\":1}],\"averageGmat\":0,\"concentrations\":[{\"id\":1},{\"id\":14}],\"programType\":{\"id\":13}},{\"languages\":[{\"id\":1}],\"averageGmat\":0,\"concentrations\":[{\"id\":14},{\"id\":19}],\"programType\":{\"id\":13}},{\"languages\":[{\"id\":1}],\"averageGmat\":0,\"concentrations\":[{\"id\":14}],\"programType\":{\"id\":13}},{\"languages\":[{\"id\":1}],\"averageGmat\":0,\"concentrations\":[{\"id\":1},{\"id\":12},{\"id\":14},{\"id\":21},{\"id\":33},{\"id\":36}],\"programType\":{\"id\":2}},{\"languages\":[{\"id\":1}],\"averageGmat\":null,\"concentrations\":[{\"id\":14},{\"id\":15}],\"programType\":{\"id\":13}}],\"topSchools\":[],\"profiles\":[]}}\n```\n\nAnd query\n\n```\n{\"sort\":{\"rankingExclude\":{\"order\":\"asc\"},\"_score\":{\"order\":\"desc\"},\"rankingTotal\":{\"order\":\"asc\"}},\"query\":{\"bool\":{\"must\":[{\"bool\":{\"should\":[{\"query_string\":{\"query\":\"Boston\",\"fields\":[\"name^4\",\"shortName\",\"city^2\",\"address\",\"description\",\"area.title\",\"area.shortTitle\",\"area.parent.title\",\"area.parent.shortTitle\"],\"default_operator\":\"AND\"}},{\"nested\":{\"path\":\"topSchools\",\"query\":{\"query_string\":{\"query\":\"Boston\",\"fields\":[\"topSchools.speciality.title\",\"topSchools.speciality.prefixTitle\",\"topSchools.speciality.suffixTitle\",\"topSchools.speciality.shortTitle\",\"topSchools.speciality.shortDescription\"],\"default_operator\":\"AND\"}}}},{\"nested\":{\"path\":\"profiles\",\"query\":{\"query_string\":{\"query\":\"Boston\",\"fields\":[\"profiles.content\"],\"default_operator\":\"AND\"}}}}]}}]}}}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69814103","html_url":"https://github.com/elastic/elasticsearch/issues/9191#issuecomment-69814103","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9191","id":69814103,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODE0MTAz","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-01-13T20:31:11Z","updated_at":"2015-01-13T20:31:11Z","author_association":"CONTRIBUTOR","body":"Hi @hero007asd \n\nDo you have another field called `rankingTotal` in a different type in the same index? Also, do you create your mappings explicitly or are you relying on dynamic mapping?\n\nEither way, it sounds like you have two versions of the `rankingTotal` field which are mapped differently.  When you try to load the fielddata to sort on this field, it expects one datatype, then suddenly encounters a different datatype, hence the exception.\n\nThis will be fixed by https://github.com/elasticsearch/elasticsearch/issues/8870\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69862635","html_url":"https://github.com/elastic/elasticsearch/issues/9191#issuecomment-69862635","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9191","id":69862635,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODYyNjM1","user":{"login":"hoannv","id":1846777,"node_id":"MDQ6VXNlcjE4NDY3Nzc=","avatar_url":"https://avatars2.githubusercontent.com/u/1846777?v=4","gravatar_id":"","url":"https://api.github.com/users/hoannv","html_url":"https://github.com/hoannv","followers_url":"https://api.github.com/users/hoannv/followers","following_url":"https://api.github.com/users/hoannv/following{/other_user}","gists_url":"https://api.github.com/users/hoannv/gists{/gist_id}","starred_url":"https://api.github.com/users/hoannv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoannv/subscriptions","organizations_url":"https://api.github.com/users/hoannv/orgs","repos_url":"https://api.github.com/users/hoannv/repos","events_url":"https://api.github.com/users/hoannv/events{/privacy}","received_events_url":"https://api.github.com/users/hoannv/received_events","type":"User","site_admin":false},"created_at":"2015-01-14T03:09:24Z","updated_at":"2015-01-14T03:09:24Z","author_association":"NONE","body":"@clintongormley: no, there is only one rankingTotal in mapping\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/70150665","html_url":"https://github.com/elastic/elasticsearch/issues/9191#issuecomment-70150665","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9191","id":70150665,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMTUwNjY1","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-01-15T19:57:19Z","updated_at":"2015-01-15T19:57:19Z","author_association":"CONTRIBUTOR","body":"@hero007asd and do you rely on dynamic mapping or do you set the mapping specifically?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/77151238","html_url":"https://github.com/elastic/elasticsearch/issues/9191#issuecomment-77151238","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9191","id":77151238,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTUxMjM4","user":{"login":"dibeesh","id":8565773,"node_id":"MDQ6VXNlcjg1NjU3NzM=","avatar_url":"https://avatars2.githubusercontent.com/u/8565773?v=4","gravatar_id":"","url":"https://api.github.com/users/dibeesh","html_url":"https://github.com/dibeesh","followers_url":"https://api.github.com/users/dibeesh/followers","following_url":"https://api.github.com/users/dibeesh/following{/other_user}","gists_url":"https://api.github.com/users/dibeesh/gists{/gist_id}","starred_url":"https://api.github.com/users/dibeesh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dibeesh/subscriptions","organizations_url":"https://api.github.com/users/dibeesh/orgs","repos_url":"https://api.github.com/users/dibeesh/repos","events_url":"https://api.github.com/users/dibeesh/events{/privacy}","received_events_url":"https://api.github.com/users/dibeesh/received_events","type":"User","site_admin":false},"created_at":"2015-03-04T12:44:14Z","updated_at":"2015-03-04T12:44:14Z","author_association":"NONE","body":"@hero007asd , @clintongormley @rjernst Any update on this. Am also facing the same problem when sorting an integer parameter Elastic search 1.3.7\nMapping \n{\n   \"outboxprov1\": {\n      \"mappings\": {\n         \"deleted_user\": {\n            \"properties\": {\n               \"status\": {\n                  \"type\": \"integer\"\n               }\n            }\n         }\n      }\n   }\n}\nQuery \nPOST /outboxprov1/deleted_user/_search\n{\n  \"sort\": [\n    {\n      \"status\": {\n        \"order\": \"desc\"\n      }\n    }\n  ], \n   \"query\": {\n      \"match_all\": {\n      }\n   }\n}\nError \n\n{\n   \"error\": \"SearchPhaseExecutionException[Failed to execute phase [query], all shards failed; shardFailures {[0kPf5NYmRlC15ov89wjQ2g][outboxprov1][0]: QueryPhaseExecutionException[[outboxprov1][0]: query[ConstantScore(cache(_type:user))],from[0],size[10],sort[<custom:\\\"user_type\\\": org.elasticsearch.index.fielddata.fieldcomparator.LongValuesComparatorSource@1e9a2f49>!]: Query Failed [Failed to execute main query]]; nested: ElasticsearchException[java.lang.NumberFormatException: Invalid shift value in prefixCoded bytes (is encoded value really an INT?)]; nested: UncheckedExecutionException[java.lang.NumberFormatException: Invalid shift value in prefixCoded bytes (is encoded value really an INT?)]; nested: NumberFormatException[Invalid shift value in prefixCoded bytes (is encoded value really an INT?)]; }{[0kPf5NYmRlC15ov89wjQ2g][outboxprov1][1]: QueryPhaseExecutionException[[outboxprov1][1]: query[ConstantScore(cache(_type:user))],from[0],size[10],sort[<custom:\\\"user_type\\\": org.elasticsearch.index.fielddata.fieldcomparator.LongValuesComparatorSource@2e5a1ec5>!]: Query Failed [Failed to execute main query]]; nested: ElasticsearchException[java.lang.NumberFormatException: Invalid shift value in prefixCoded bytes (is encoded value really an INT?)]; nested: UncheckedExecutionException[java.lang.NumberFormatException: Invalid shift value in prefixCoded bytes (is encoded value really an INT?)]; nested: NumberFormatException[Invalid shift value in prefixCoded bytes (is encoded value really an INT?)]; }{[0kPf5NYmRlC15ov89wjQ2g][outboxprov1][2]: QueryPhaseExecutionException[[outboxprov1][2]: query[ConstantScore(cache(_type:user))],from[0],size[10],sort[<custom:\\\"user_type\\\": org.elasticsearch.index.fielddata.fieldcomparator.LongValuesComparatorSource@4e1d82e2>!]: Query Failed [Failed to execute main query]]; nested: ElasticsearchException[java.lang.NumberFormatException: Invalid shift value in prefixCoded bytes (is encoded value really an INT?)]; nested: UncheckedExecutionException[java.lang.NumberFormatException: Invalid shift value in prefixCoded bytes (is encoded value really an INT?)]; nested: NumberFormatException[Invalid shift value in prefixCoded bytes (is encoded value really an INT?)]; }{[0kPf5NYmRlC15ov89wjQ2g][outboxprov1][3]: QueryPhaseExecutionException[[outboxprov1][3]: query[ConstantScore(cache(_type:user))],from[0],size[10],sort[<custom:\\\"user_type\\\": org.elasticsearch.index.fielddata.fieldcomparator.LongValuesComparatorSource@7c2ff1fb>!]: Query Failed [Failed to execute main query]]; nested: ElasticsearchException[java.lang.NumberFormatException: Invalid shift value in prefixCoded bytes (is encoded value really an INT?)]; nested: UncheckedExecutionException[java.lang.NumberFormatException: Invalid shift value in prefixCoded bytes (is encoded value really an INT?)]; nested: NumberFormatException[Invalid shift value in prefixCoded bytes (is encoded value really an INT?)]; }{[0kPf5NYmRlC15ov89wjQ2g][outboxprov1][4]: QueryPhaseExecutionException[[outboxprov1][4]: query[ConstantScore(cache(_type:user))],from[0],size[10],sort[<custom:\\\"user_type\\\": org.elasticsearch.index.fielddata.fieldcomparator.LongValuesComparatorSource@6c31a161>!]: Query Failed [Failed to execute main query]]; nested: ElasticsearchException[java.lang.NumberFormatException: Invalid shift value in prefixCoded bytes (is encoded value really an INT?)]; nested: UncheckedExecutionException[java.lang.NumberFormatException: Invalid shift value in prefixCoded bytes (is encoded value really an INT?)]; nested: NumberFormatException[Invalid shift value in prefixCoded bytes (is encoded value really an INT?)]; }]\",\n   \"status\": 500\n}\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/77784022","html_url":"https://github.com/elastic/elasticsearch/issues/9191#issuecomment-77784022","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9191","id":77784022,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Nzg0MDIy","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-03-09T00:16:56Z","updated_at":"2015-03-09T00:16:56Z","author_association":"CONTRIBUTOR","body":"@dibeesh @Hoannv this is likely caused by relying on dynamic mapping, and a field is being added with different mappings on different shards.  When the shard with the \"wrong\" mapping is moved to another node, the official mapping is applied, which doesn't reflect the data written to disk.\n\nYou can work around this by creating your mappings manually before indexing.  This issue will be resolved by #8688\n","performed_via_github_app":null}]