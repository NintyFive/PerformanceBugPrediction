[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/274883042","html_url":"https://github.com/elastic/elasticsearch/issues/22771#issuecomment-274883042","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22771","id":274883042,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDg4MzA0Mg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-01-24T17:56:23Z","updated_at":"2017-01-24T17:56:23Z","author_association":"MEMBER","body":"I think it would suffice to just randomize the version upgrading from amongst all released versions.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/274884041","html_url":"https://github.com/elastic/elasticsearch/issues/22771#issuecomment-274884041","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22771","id":274884041,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDg4NDA0MQ==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2017-01-24T17:59:52Z","updated_at":"2017-01-24T18:02:20Z","author_association":"CONTRIBUTOR","body":"I'm not a big fan of the randomization there simply because I want to know on the first pass through if one of the versions has a bug.  I think it's quite difficult to debug if I only happen to get lucky and actually hit the failing test.\r\n\r\nI do concede that having that many tests may slow down the build quite a bit, though, and maybe you can just check them all locally if you're doing things that have bwc issues.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/274886177","html_url":"https://github.com/elastic/elasticsearch/issues/22771#issuecomment-274886177","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22771","id":274886177,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDg4NjE3Nw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-01-24T18:07:39Z","updated_at":"2017-01-24T18:07:39Z","author_association":"MEMBER","body":"I think that running them all would be entirely too time consuming. We use randomization for upgrades in the packaging tests, I think it's a safe strategy with sufficiently many CI runs.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/274886941","html_url":"https://github.com/elastic/elasticsearch/issues/22771#issuecomment-274886941","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22771","id":274886941,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDg4Njk0MQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-01-24T18:10:19Z","updated_at":"2017-01-24T18:10:19Z","author_association":"MEMBER","body":"And there is a way to run with a specific version if you really do want to test all combinations locally.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/274887471","html_url":"https://github.com/elastic/elasticsearch/issues/22771#issuecomment-274887471","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22771","id":274887471,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDg4NzQ3MQ==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2017-01-24T18:12:08Z","updated_at":"2017-01-24T18:12:08Z","author_association":"CONTRIBUTOR","body":"With sufficient runs I agree it's safe, it's just a bummer to have all tests pass locally through a single run and then end up breaking something in master.  But given that we don't do very many bwc changes I'm happy to concede to randomization here to save time.  The tests in general are already slow enough :)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/274889743","html_url":"https://github.com/elastic/elasticsearch/issues/22771#issuecomment-274889743","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22771","id":274889743,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDg4OTc0Mw==","user":{"login":"abeyad","id":1631297,"node_id":"MDQ6VXNlcjE2MzEyOTc=","avatar_url":"https://avatars2.githubusercontent.com/u/1631297?v=4","gravatar_id":"","url":"https://api.github.com/users/abeyad","html_url":"https://github.com/abeyad","followers_url":"https://api.github.com/users/abeyad/followers","following_url":"https://api.github.com/users/abeyad/following{/other_user}","gists_url":"https://api.github.com/users/abeyad/gists{/gist_id}","starred_url":"https://api.github.com/users/abeyad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abeyad/subscriptions","organizations_url":"https://api.github.com/users/abeyad/orgs","repos_url":"https://api.github.com/users/abeyad/repos","events_url":"https://api.github.com/users/abeyad/events{/privacy}","received_events_url":"https://api.github.com/users/abeyad/received_events","type":"User","site_admin":false},"created_at":"2017-01-24T18:20:05Z","updated_at":"2017-01-24T18:20:05Z","author_association":"CONTRIBUTOR","body":"A current run on my macbook pro takes about 25 seconds (just the tests themselves).  It could add up quite a bit if there are many minor versions of the same major version.  So randomization is probably the right way to go here.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/274889896","html_url":"https://github.com/elastic/elasticsearch/issues/22771#issuecomment-274889896","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22771","id":274889896,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDg4OTg5Ng==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-01-24T18:20:38Z","updated_at":"2017-01-24T18:20:38Z","author_association":"MEMBER","body":"> With sufficient runs I agree it's safe, it's just a bummer to have all tests pass locally through a single run and then end up breaking something in master.\r\n\r\nWith randomized tests and the matrix of configurations that we test, there's really no avoiding this. All we can do is gain more confidence with each CI run that our changes are safe.\r\n\r\n> The tests in general are already slow enough :)\r\n\r\nYeah, that's what I want to avoid, adding even more time to them. :smile:","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/274908435","html_url":"https://github.com/elastic/elasticsearch/issues/22771#issuecomment-274908435","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22771","id":274908435,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDkwODQzNQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2017-01-24T19:22:32Z","updated_at":"2017-01-24T19:23:08Z","author_association":"MEMBER","body":"I don't think this would be adding too much time, vs the pain that is caused when backcompat breaks (builds breaking for hours or days while someone figures out why it started breaking).  And the total number of variations is not as large as the initial comment suggested.  In 5.x (ie, 5.3 right now), there is no reason to test 5.0 -> 5.1 or 5.1 -> 5.2. For a given branch, we should be testing rolling upgrade from the previously released minor versions (the latest bugfix of that minor) to the current version.  So for current 5.x, that means testing 5.0 -> 5.3, 5.1 -> 5.3 and 5.2 -> 5.3.  The 5.2 -> 5.3 is a little tricky since 5.2 is not yet released, but still doable with snapshots.  The key here is that we need a place to test the transition. When a feature is added/removed let's say in 5.2, and we want a specific rolling upgrade test for that from 5.2 to 5.3, we can't just stuff it in the tests that would be (randomly) run against 5.0 -> 5.3 or 5.1 -> 5.3.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/274917942","html_url":"https://github.com/elastic/elasticsearch/issues/22771#issuecomment-274917942","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22771","id":274917942,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDkxNzk0Mg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-01-24T19:50:22Z","updated_at":"2017-01-24T19:50:22Z","author_association":"MEMBER","body":"> For a given branch, we should be testing rolling upgrade from the previously released minor versions (the latest bugfix of that minor) to the current version.\r\n\r\nI don't think this is sufficient. For every branch, I think that we should be testing upgrades from all releases below that branch (so on 5.2.0, we'd test 5.0.0, 5.0.1, 5.0.2, 5.1.1, 5.1.2 all to 5.2.0).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/274918506","html_url":"https://github.com/elastic/elasticsearch/issues/22771#issuecomment-274918506","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22771","id":274918506,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDkxODUwNg==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2017-01-24T19:52:02Z","updated_at":"2017-01-24T19:52:02Z","author_association":"MEMBER","body":"We could randomize within a minor. But the important part of my statement before is we need a place for tests which cannot work in rolling upgrades from any version.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/274919187","html_url":"https://github.com/elastic/elasticsearch/issues/22771#issuecomment-274919187","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22771","id":274919187,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDkxOTE4Nw==","user":{"login":"abeyad","id":1631297,"node_id":"MDQ6VXNlcjE2MzEyOTc=","avatar_url":"https://avatars2.githubusercontent.com/u/1631297?v=4","gravatar_id":"","url":"https://api.github.com/users/abeyad","html_url":"https://github.com/abeyad","followers_url":"https://api.github.com/users/abeyad/followers","following_url":"https://api.github.com/users/abeyad/following{/other_user}","gists_url":"https://api.github.com/users/abeyad/gists{/gist_id}","starred_url":"https://api.github.com/users/abeyad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abeyad/subscriptions","organizations_url":"https://api.github.com/users/abeyad/orgs","repos_url":"https://api.github.com/users/abeyad/repos","events_url":"https://api.github.com/users/abeyad/events{/privacy}","received_events_url":"https://api.github.com/users/abeyad/received_events","type":"User","site_admin":false},"created_at":"2017-01-24T19:53:55Z","updated_at":"2017-01-24T19:53:55Z","author_association":"CONTRIBUTOR","body":"> But the important part of my statement before is we need a place for tests which cannot work in rolling upgrades from any version.\r\n\r\nDon't we use the skip sections for this?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/274920951","html_url":"https://github.com/elastic/elasticsearch/issues/22771#issuecomment-274920951","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22771","id":274920951,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDkyMDk1MQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2017-01-24T19:59:26Z","updated_at":"2017-01-24T19:59:26Z","author_association":"MEMBER","body":"> Don't we use the skip sections for this?\r\n\r\nWe could. But I prefer explicit. This is why the static index bwc tests exist (and are always run) for every version. No surprises.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/383878243","html_url":"https://github.com/elastic/elasticsearch/issues/22771#issuecomment-383878243","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22771","id":383878243,"node_id":"MDEyOklzc3VlQ29tbWVudDM4Mzg3ODI0Mw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-04-24T10:09:28Z","updated_at":"2018-04-24T10:09:28Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/390517655","html_url":"https://github.com/elastic/elasticsearch/issues/22771#issuecomment-390517655","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22771","id":390517655,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDUxNzY1NQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2018-05-20T22:26:51Z","updated_at":"2018-05-20T22:26:51Z","author_association":"MEMBER","body":"Our backcompat tests have changed considerably since this issue was created. We now test rolling upgrade from all compatible versions to the current version, so I am closing this issue.","performed_via_github_app":null}]