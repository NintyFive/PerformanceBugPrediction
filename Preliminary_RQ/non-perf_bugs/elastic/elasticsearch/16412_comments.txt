[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/183266703","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-183266703","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":183266703,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MzI2NjcwMw==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2016-02-12T10:41:17Z","updated_at":"2016-02-12T10:41:17Z","author_association":"MEMBER","body":"The DNS cache of a Java process is handled by  the property `networkaddress.cache.ttl`. Quoting [Oracle Docs](http://docs.oracle.com/javase/8/docs/technotes/guides/net/properties.html):\n\n> Specified in java.security to indicate the caching policy for successful name lookups from the name service.. The value is specified as integer to indicate the number of seconds to cache the successful lookup.\n> \n> A value of -1 indicates \"cache forever\". The default behavior is to cache forever when a security manager is installed, and to cache for an implementation specific period of time, when a security manager is not installed.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/183312337","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-183312337","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":183312337,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MzMxMjMzNw==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2016-02-12T12:52:53Z","updated_at":"2016-02-12T12:58:19Z","author_association":"MEMBER","body":"As per the [Oracle documentation on policy files](http://docs.oracle.com/javase/8/docs/technotes/guides/security/PolicyFiles.html) the above-mentioned property (and maybe also the related property `networkaddress.cache.negative.ttl` (for failed DNS lookups)) have to be specified in a file called `java.security`. This file is located in `$JRE_HOME/lib/security` and the settings there are system-wide.\n\nIt is possible to provide an application-specific `java.security` file that overrides the system-wide defaults by adding the system property `-Djava.security.properties=$CUSTOM_SECURITY_FILE` and specifying application-specific overrides there _but_ this is only possible if the property `security.overridePropertiesFile` is set to `true` in `$JRE_HOME/lib/security/java.security` (the default is `true`). So in case an administrator disables this, we won't be able to override the system-wide setting.\n\nI wonder whether we should just point users to the Oracle documentation on how to change the DNS cache lifetime system-wide because I am not sure whether they want to configure different (Java) DNS cache lifetimes for different applications on the same machine anyway. Wdyt @clintongormley?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/183647335","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-183647335","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":183647335,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MzY0NzMzNQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-02-13T11:31:55Z","updated_at":"2016-02-13T11:31:55Z","author_association":"CONTRIBUTOR","body":"@danielmitterdorfer I'd be happy with just adding this documentation.  Is there anything we need to change code-wise as well? Or perhaps just adding tests to ensure that the documented solution works?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/183668315","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-183668315","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":183668315,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MzY2ODMxNQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-02-13T13:49:44Z","updated_at":"2016-02-13T13:49:44Z","author_association":"CONTRIBUTOR","body":"Also related to https://github.com/elastic/elasticsearch/issues/10337 and https://github.com/logstash-plugins/logstash-output-elasticsearch/issues/131 and https://github.com/elastic/elasticsearch/pull/11256\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/183702579","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-183702579","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":183702579,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MzcwMjU3OQ==","user":{"login":"miah","id":49856,"node_id":"MDQ6VXNlcjQ5ODU2","avatar_url":"https://avatars1.githubusercontent.com/u/49856?v=4","gravatar_id":"","url":"https://api.github.com/users/miah","html_url":"https://github.com/miah","followers_url":"https://api.github.com/users/miah/followers","following_url":"https://api.github.com/users/miah/following{/other_user}","gists_url":"https://api.github.com/users/miah/gists{/gist_id}","starred_url":"https://api.github.com/users/miah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/miah/subscriptions","organizations_url":"https://api.github.com/users/miah/orgs","repos_url":"https://api.github.com/users/miah/repos","events_url":"https://api.github.com/users/miah/events{/privacy}","received_events_url":"https://api.github.com/users/miah/received_events","type":"User","site_admin":false},"created_at":"2016-02-13T16:54:46Z","updated_at":"2016-02-13T16:54:46Z","author_association":"NONE","body":"We run all our jvms with this configuration. We also only pass hostnames to\nES via command arguments at startup. When we roll out new instances on aws\nES never refreshes the hosts IPs via DNS lookups.\n\nWould appreciate if somebody else could verify that it works as expected\nbecause it doesn't seem to in our environment.\nOn Feb 13, 2016 3:33 AM, \"Clinton Gormley\" notifications@github.com wrote:\n\n> @danielmitterdorfer https://github.com/danielmitterdorfer I'd be happy\n> with just adding this documentation. Is there anything we need to change\n> code-wise as well? Or perhaps just adding tests to ensure that the\n> documented solution works?\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/elastic/elasticsearch/issues/16412#issuecomment-183647335\n> .\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/184199164","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-184199164","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":184199164,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDE5OTE2NA==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2016-02-15T13:09:07Z","updated_at":"2016-02-15T13:09:07Z","author_association":"MEMBER","body":"@clintongormley I would just point users to the Oracle documentation and not add any tests for two reasons:\n1. This is a configuration that is purely related to the JVM and nothing of this is Elasticsearch specific\n2. It is a global change so the JDK configuration has to change in _every_ environment where the tests are run.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/184209640","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-184209640","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":184209640,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDIwOTY0MA==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2016-02-15T13:30:54Z","updated_at":"2016-02-15T13:31:26Z","author_association":"MEMBER","body":"@miah I have created a small demo program to verify that everything works as expected ([source code as gist](https://gist.github.com/danielmitterdorfer/4897b330a2cf21ebcf04)). In addition, I've set these values in my `java.security` in the JRE/lib directory:\n\n```\nnetworkaddress.cache.ttl=10\nnetworkaddress.cache.negative.ttl=-1\n```\n\nWhen you look at the demo source code, you'll see that we query for one existing host (\"www.google.com\") and for one non-existing one (\"www.this-does-not-exist.io\"). My expectation is that we see DNS requests every 10 seconds for the existing host and only one for the non-existing one when we periodically clear the OS DNS cache.\n\nWhen you invoke the demo program as described in the gist and open tcpdump (I did `sudo tcpdump -vvv -s 0 -l -n port 53`) and periodically clear the DNS cache (depending on your OS) you'll see the expected behavior (my environment is Mac OS X 10.11):\n\nOutput from the application:\n\n```\n14:04:10\nwww.google.com => 173.194.39.18\n14:04:15\nwww.google.com => 173.194.39.18\n14:04:20\nwww.google.com => 173.194.39.18\n14:04:25\nwww.google.com => 173.194.39.18\n14:04:30\nwww.google.com => 173.194.39.18\n14:04:35\nwww.google.com => 173.194.39.18\n```\n\nOutput from tcpdump:\n\n```\ntcpdump: data link type PKTAP\ntcpdump: listening on pktap, link-type PKTAP (Packet Tap), capture size 262144 bytes\n14:04:10.592232 IP (tos 0x0, ttl 255, id 64876, offset 0, flags [none], proto UDP (17), length 60)\n    192.168.1.103.60113 > 192.168.1.1.53: [udp sum ok] 60929+ A? www.google.com. (32)\n14:04:10.592301 IP (tos 0x0, ttl 255, id 6814, offset 0, flags [none], proto UDP (17), length 60)\n    192.168.1.103.58959 > 192.168.1.1.53: [udp sum ok] 36807+ AAAA? www.google.com. (32)\n14:04:10.624765 IP (tos 0x0, ttl 64, id 0, offset 0, flags [DF], proto UDP (17), length 140)\n    192.168.1.1.53 > 192.168.1.103.60113: [udp sum ok] 60929 q: A? www.google.com. 5/0/0 www.google.com. [4m48s] A 173.194.39.20, www.google.com. [4m48s] A 173.194.39.18, www.google.com. [4m48s] A 173.194.39.17, www.google.com. [4m48s] A 173.194.39.16, www.google.com. [4m48s] A 173.194.39.19 (112)\n14:04:10.625961 IP (tos 0x0, ttl 64, id 0, offset 0, flags [DF], proto UDP (17), length 88)\n    192.168.1.1.53 > 192.168.1.103.58959: [udp sum ok] 36807 q: AAAA? www.google.com. 1/0/0 www.google.com. [4m54s] AAAA 2a00:1450:4005:800::1010 (60)\n14:04:10.695845 IP (tos 0x0, ttl 255, id 17766, offset 0, flags [none], proto UDP (17), length 72)\n    192.168.1.103.49957 > 192.168.1.1.53: [udp sum ok] 27956+ A? www.this-does-not-exist.io. (44)\n14:04:10.695942 IP (tos 0x0, ttl 255, id 63692, offset 0, flags [none], proto UDP (17), length 72)\n    192.168.1.103.51379 > 192.168.1.1.53: [udp sum ok] 47751+ AAAA? www.this-does-not-exist.io. (44)\n14:04:10.727572 IP (tos 0x0, ttl 64, id 0, offset 0, flags [DF], proto UDP (17), length 141)\n    192.168.1.1.53 > 192.168.1.103.49957: [udp sum ok] 27956 NXDomain q: A? www.this-does-not-exist.io. 0/1/0 ns: io. [19m14s] SOA ns1.communitydns.net. nicadmin.nic.io. 1455538915 3600 1800 3600000 3600 (113)\n14:04:10.728133 IP (tos 0x0, ttl 64, id 0, offset 0, flags [DF], proto UDP (17), length 141)\n    192.168.1.1.53 > 192.168.1.103.51379: [udp sum ok] 47751 NXDomain q: AAAA? www.this-does-not-exist.io. 0/1/0 ns: io. [19m14s] SOA ns1.communitydns.net. nicadmin.nic.io. 1455538915 3600 1800 3600000 3600 (113)\n14:04:20.733510 IP (tos 0x0, ttl 255, id 51420, offset 0, flags [none], proto UDP (17), length 60)\n    192.168.1.103.58825 > 192.168.1.1.53: [udp sum ok] 11803+ A? www.google.com. (32)\n14:04:20.733566 IP (tos 0x0, ttl 255, id 13172, offset 0, flags [none], proto UDP (17), length 60)\n    192.168.1.103.60441 > 192.168.1.1.53: [udp sum ok] 14292+ AAAA? www.google.com. (32)\n14:04:20.737039 IP (tos 0x0, ttl 64, id 0, offset 0, flags [DF], proto UDP (17), length 140)\n    192.168.1.1.53 > 192.168.1.103.58825: [udp sum ok] 11803 q: A? www.google.com. 5/0/0 www.google.com. [4m38s] A 173.194.39.19, www.google.com. [4m38s] A 173.194.39.16, www.google.com. [4m38s] A 173.194.39.17, www.google.com. [4m38s] A 173.194.39.18, www.google.com. [4m38s] A 173.194.39.20 (112)\n14:04:20.737435 IP (tos 0x0, ttl 64, id 0, offset 0, flags [DF], proto UDP (17), length 88)\n    192.168.1.1.53 > 192.168.1.103.60441: [udp sum ok] 14292 q: AAAA? www.google.com. 1/0/0 www.google.com. [4m44s] AAAA 2a00:1450:4005:800::1010 (60)\n14:04:30.748453 IP (tos 0x0, ttl 255, id 17598, offset 0, flags [none], proto UDP (17), length 60)\n    192.168.1.103.55087 > 192.168.1.1.53: [udp sum ok] 1167+ A? www.google.com. (32)\n14:04:30.748806 IP (tos 0x0, ttl 255, id 29531, offset 0, flags [none], proto UDP (17), length 60)\n    192.168.1.103.60394 > 192.168.1.1.53: [udp sum ok] 60974+ AAAA? www.google.com. (32)\n14:04:30.754529 IP (tos 0x0, ttl 64, id 0, offset 0, flags [DF], proto UDP (17), length 140)\n    192.168.1.1.53 > 192.168.1.103.55087: [udp sum ok] 1167 q: A? www.google.com. 5/0/0 www.google.com. [4m28s] A 173.194.39.20, www.google.com. [4m28s] A 173.194.39.19, www.google.com. [4m28s] A 173.194.39.16, www.google.com. [4m28s] A 173.194.39.17, www.google.com. [4m28s] A 173.194.39.18 (112)\n14:04:30.754533 IP (tos 0x0, ttl 64, id 0, offset 0, flags [DF], proto UDP (17), length 88)\n    192.168.1.1.53 > 192.168.1.103.60394: [udp sum ok] 60974 q: AAAA? www.google.com. 1/0/0 www.google.com. [4m34s] AAAA 2a00:1450:4005:800::1010 (60)\n```\n\nYou see that we query only once for \"www.this-does-not-exist.io\" but every 10 seconds for \"www.google.com\". Similarly, you should also see only one DNS request for \"google.com\" when you set `networkaddress.cache.ttl=-1` in java.security.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/184211154","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-184211154","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":184211154,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDIxMTE1NA==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2016-02-15T13:36:15Z","updated_at":"2016-02-15T13:36:15Z","author_association":"MEMBER","body":"@miah One more thing: Note that the program runs with the security manager enabled. The JDK implementation behaves differently whether or not a security manager is enabled (see also my comment above with the link to the Oracle docs). As Elasticsearch 3.0 will make security mandatory (#16176) it is a sensible assumption that we assume here too that a security manager is enabled.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/188657674","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-188657674","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":188657674,"node_id":"MDEyOklzc3VlQ29tbWVudDE4ODY1NzY3NA==","user":{"login":"alexbrasetvik","id":43624,"node_id":"MDQ6VXNlcjQzNjI0","avatar_url":"https://avatars0.githubusercontent.com/u/43624?v=4","gravatar_id":"","url":"https://api.github.com/users/alexbrasetvik","html_url":"https://github.com/alexbrasetvik","followers_url":"https://api.github.com/users/alexbrasetvik/followers","following_url":"https://api.github.com/users/alexbrasetvik/following{/other_user}","gists_url":"https://api.github.com/users/alexbrasetvik/gists{/gist_id}","starred_url":"https://api.github.com/users/alexbrasetvik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexbrasetvik/subscriptions","organizations_url":"https://api.github.com/users/alexbrasetvik/orgs","repos_url":"https://api.github.com/users/alexbrasetvik/repos","events_url":"https://api.github.com/users/alexbrasetvik/events{/privacy}","received_events_url":"https://api.github.com/users/alexbrasetvik/received_events","type":"User","site_admin":false},"created_at":"2016-02-25T07:48:22Z","updated_at":"2016-02-25T07:48:22Z","author_association":"CONTRIBUTOR","body":"It would also be nice if the transport client could do the lookups when it connects, instead of just when the client object is created, as IPs can change e.g. when going through a load balancer.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/188780650","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-188780650","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":188780650,"node_id":"MDEyOklzc3VlQ29tbWVudDE4ODc4MDY1MA==","user":{"login":"beiske","id":98256,"node_id":"MDQ6VXNlcjk4MjU2","avatar_url":"https://avatars2.githubusercontent.com/u/98256?v=4","gravatar_id":"","url":"https://api.github.com/users/beiske","html_url":"https://github.com/beiske","followers_url":"https://api.github.com/users/beiske/followers","following_url":"https://api.github.com/users/beiske/following{/other_user}","gists_url":"https://api.github.com/users/beiske/gists{/gist_id}","starred_url":"https://api.github.com/users/beiske/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/beiske/subscriptions","organizations_url":"https://api.github.com/users/beiske/orgs","repos_url":"https://api.github.com/users/beiske/repos","events_url":"https://api.github.com/users/beiske/events{/privacy}","received_events_url":"https://api.github.com/users/beiske/received_events","type":"User","site_admin":false},"created_at":"2016-02-25T13:13:37Z","updated_at":"2016-02-25T13:13:37Z","author_association":"MEMBER","body":"Despite keeping the hostname an InetAdress will never attempt to resolve the ip after it has been created. I think this is a source of confusion for many using the transport client. It is particularly important when connecting to the cloud service. Due to the load balancers even a single node cluster has multiple ip adresses and they may change at any point in time.\n\n@clintongormley Is this issue also relevant for the transport client or should we make a separate issue?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/189196583","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-189196583","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":189196583,"node_id":"MDEyOklzc3VlQ29tbWVudDE4OTE5NjU4Mw==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2016-02-26T09:50:48Z","updated_at":"2016-02-26T09:50:48Z","author_association":"MEMBER","body":"@alexbrasetvik, @beiske: I don't know what @clintongormley thinks about your idea but I think it would be better to create a new ticket for the transport client topic.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/208336380","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-208336380","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":208336380,"node_id":"MDEyOklzc3VlQ29tbWVudDIwODMzNjM4MA==","user":{"login":"lifeofguenter","id":241073,"node_id":"MDQ6VXNlcjI0MTA3Mw==","avatar_url":"https://avatars0.githubusercontent.com/u/241073?v=4","gravatar_id":"","url":"https://api.github.com/users/lifeofguenter","html_url":"https://github.com/lifeofguenter","followers_url":"https://api.github.com/users/lifeofguenter/followers","following_url":"https://api.github.com/users/lifeofguenter/following{/other_user}","gists_url":"https://api.github.com/users/lifeofguenter/gists{/gist_id}","starred_url":"https://api.github.com/users/lifeofguenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lifeofguenter/subscriptions","organizations_url":"https://api.github.com/users/lifeofguenter/orgs","repos_url":"https://api.github.com/users/lifeofguenter/repos","events_url":"https://api.github.com/users/lifeofguenter/events{/privacy}","received_events_url":"https://api.github.com/users/lifeofguenter/received_events","type":"User","site_admin":false},"created_at":"2016-04-11T13:17:34Z","updated_at":"2016-04-11T13:17:34Z","author_association":"NONE","body":"What's the status on this? This causes problems with AWS ElasticSearch service.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/208364401","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-208364401","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":208364401,"node_id":"MDEyOklzc3VlQ29tbWVudDIwODM2NDQwMQ==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2016-04-11T14:07:57Z","updated_at":"2016-04-11T14:07:57Z","author_association":"MEMBER","body":"@lifeofguenter The topic discussed in this ticket has nothing to do with Elasticsearch per se. It is a pure JVM level setting so (in the scope of this ticket) we will not change any code but maybe just add documentation on how to change this setting in Elasticsearch.\n\nJust to be sure: by \"AWS ElasticSearch service\" you refer to Amazon's service and _not_ our Elasticsearch cloud offering (called [Elastic Cloud](http://cloud.elastic.co/)), right? We have no additional insight on Amazon's offering and I am afraid you will also not be able to change a JVM level setting there. I fear this has to be addressed by Amazon (as it is a JVM level setting that we cannot change from within the application).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/208369219","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-208369219","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":208369219,"node_id":"MDEyOklzc3VlQ29tbWVudDIwODM2OTIxOQ==","user":{"login":"lifeofguenter","id":241073,"node_id":"MDQ6VXNlcjI0MTA3Mw==","avatar_url":"https://avatars0.githubusercontent.com/u/241073?v=4","gravatar_id":"","url":"https://api.github.com/users/lifeofguenter","html_url":"https://github.com/lifeofguenter","followers_url":"https://api.github.com/users/lifeofguenter/followers","following_url":"https://api.github.com/users/lifeofguenter/following{/other_user}","gists_url":"https://api.github.com/users/lifeofguenter/gists{/gist_id}","starred_url":"https://api.github.com/users/lifeofguenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lifeofguenter/subscriptions","organizations_url":"https://api.github.com/users/lifeofguenter/orgs","repos_url":"https://api.github.com/users/lifeofguenter/repos","events_url":"https://api.github.com/users/lifeofguenter/events{/privacy}","received_events_url":"https://api.github.com/users/lifeofguenter/received_events","type":"User","site_admin":false},"created_at":"2016-04-11T14:18:29Z","updated_at":"2016-04-11T14:31:42Z","author_association":"NONE","body":"I did the following changes (ubuntu 14.04) in `/usr/lib/jvm/jdk-8-oracle-x64/jre/lib/security/java.security`:\n\n```\nnetworkaddress.cache.ttl=60\nnetworkaddress.cache.negative.ttl=10\n```\n\nBut that somehow did not do the trick?\n\nYes, I am referring to: https://aws.amazon.com/elasticsearch-service/ - however we are running logstash as per: http://www.lifeofguenter.de/2016/01/elk-aws-elasticbeanstalk-laravel.html - which is hosted on our \"own\" EC2 instance, thus we are able to do changes, and thats also the link that currently complaints if the dns record to ElasticSearch changes.\n\n**UPDATE: sorry my problems are most probably unrelated!**\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/214482130","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-214482130","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":214482130,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNDQ4MjEzMA==","user":{"login":"miah","id":49856,"node_id":"MDQ6VXNlcjQ5ODU2","avatar_url":"https://avatars1.githubusercontent.com/u/49856?v=4","gravatar_id":"","url":"https://api.github.com/users/miah","html_url":"https://github.com/miah","followers_url":"https://api.github.com/users/miah/followers","following_url":"https://api.github.com/users/miah/following{/other_user}","gists_url":"https://api.github.com/users/miah/gists{/gist_id}","starred_url":"https://api.github.com/users/miah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/miah/subscriptions","organizations_url":"https://api.github.com/users/miah/orgs","repos_url":"https://api.github.com/users/miah/repos","events_url":"https://api.github.com/users/miah/events{/privacy}","received_events_url":"https://api.github.com/users/miah/received_events","type":"User","site_admin":false},"created_at":"2016-04-25T19:07:04Z","updated_at":"2016-04-25T19:18:29Z","author_association":"NONE","body":"Still have this issue...\n\nIf I replace masters, I need to reboot every node in the cluster otherwise it never detects the IP changes.\n\nI have a DNS TTL of 6 minutes. I replaced my master servers, and 20 minutes later elasticsearch is still trying to connect to the old IP's. I have the java.security changes in place. Elasticsearch is configured to connect to a round-robin dns entry for the master nodes.\n\n```\nservices 16207 17.0 63.3 35426032 9753368 ?    Sl   Apr05 4911:31 /usr/lib/jvm/java-8-oracle/bin/java --http.port 9200 \n--transport.tcp.port 9300 \n--cluster.name=logsearch-dev \n--cluster.routing.allocation.allow_rebalance=always --cluster.routing.allocation.cluster_concurrent_rebalance=2 \n--cluster.routing.allocation.node_concurrent_recoveries=2 --cluster.routing.allocation.node_initial_primaries_recoveries=12 \n--cluster.routing.allocation.enable=all \n--node.name=logsearch-data-5.dev.bs.com\n--node.master=false \n--node.data=true \n--node.auto_attributes=true  \n--discovery.zen.minimum_master_nodes=2 \n--discovery.zen.ping.multicast.enabled=false \n--discovery.zen.ping.unicast.hosts=app.logsearch-master.dev.bs.com \n--discovery.zen.ping_timeout=10s \n--discovery.zen.fd.ping_interval=1s \n--discovery.zen.fd.ping_timeout=60s \n--discovery.zen.fd.ping_retries=3\n```\n\n```\ngrep cache /usr/lib/jvm/java-8-oracle/jre/lib/security/java.security\n# The Java-level namelookup cache policy for successful lookups:\n# any positive value: the number of seconds to cache an address for\n# zero: do not cache\n# is to cache for 30 seconds.\nnetworkaddress.cache.ttl=0\n# The Java-level namelookup cache policy for failed lookups:\n# any negative value: cache forever\n# any positive value: the number of seconds to cache negative lookup results\n# zero: do not cache\nnetworkaddress.cache.negative.ttl=0\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/214484986","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-214484986","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":214484986,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNDQ4NDk4Ng==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-04-25T19:12:28Z","updated_at":"2016-04-25T19:17:10Z","author_association":"MEMBER","body":"@clintongormley @danielmitterdorfer I don't think it's correct that today setting the DNS cache properties at the JVM level is going to resolve the problems being reported here. The underlying reason is that [we do hostname lookup during initialization of unicast zen ping and never do lookups again](https://github.com/elastic/elasticsearch/blob/2f6405ee277ec64269dd13fdfbd8445f96b4516d/core/src/main/java/org/elasticsearch/discovery/zen/ping/unicast/UnicastZenPing.java#L163-L175). This is currently a _deliberate_ choice.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/214487240","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-214487240","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":214487240,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNDQ4NzI0MA==","user":{"login":"miah","id":49856,"node_id":"MDQ6VXNlcjQ5ODU2","avatar_url":"https://avatars1.githubusercontent.com/u/49856?v=4","gravatar_id":"","url":"https://api.github.com/users/miah","html_url":"https://github.com/miah","followers_url":"https://api.github.com/users/miah/followers","following_url":"https://api.github.com/users/miah/following{/other_user}","gists_url":"https://api.github.com/users/miah/gists{/gist_id}","starred_url":"https://api.github.com/users/miah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/miah/subscriptions","organizations_url":"https://api.github.com/users/miah/orgs","repos_url":"https://api.github.com/users/miah/repos","events_url":"https://api.github.com/users/miah/events{/privacy}","received_events_url":"https://api.github.com/users/miah/received_events","type":"User","site_admin":false},"created_at":"2016-04-25T19:17:18Z","updated_at":"2016-04-25T19:17:18Z","author_association":"NONE","body":"@jasontedor That definitely seems to be the case.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/219057758","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-219057758","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":219057758,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTA1Nzc1OA==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2016-05-13T14:23:29Z","updated_at":"2016-05-13T14:23:29Z","author_association":"MEMBER","body":"@jasontedor Agreed. In that case the DNS cache settings will not help. As you explicitly mention that this is a deliberate choice, does it make sense to close this ticket then (and maybe document the decision or at least its consequences)?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/219212917","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-219212917","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":219212917,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTIxMjkxNw==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-05-14T10:27:17Z","updated_at":"2016-05-14T10:27:17Z","author_association":"MEMBER","body":"> This is currently a deliberate choice.\n\nI think it's OK to re-resolve the configured unicast host list when pinging. We don't do it often (only on master loss/initialization ) and we also ping all ips of last known nodes on top of it. \n\nMy only concern is that DNS resolution timeout/failure should not block the pinging or delay it (remember we do it on master loss and we block writes until pinging is done). This means implementing this can be tricky code wise (that code is already hairy)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/219214113","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-219214113","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":219214113,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTIxNDExMw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-05-14T10:57:54Z","updated_at":"2016-05-14T10:57:54Z","author_association":"MEMBER","body":"> I think it's OK to re-resolve the configured unicast host list when pinging.\n\nI do too, I'm only explaining why the DNS cache settings here did and do nothing. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/220060601","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-220060601","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":220060601,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMDA2MDYwMQ==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2016-05-18T15:19:29Z","updated_at":"2016-05-18T15:19:29Z","author_association":"MEMBER","body":"So this sounds to me we should remove the \"Discuss\" label and add \"AdoptMe\" instead.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252242856","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-252242856","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":252242856,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjI0Mjg1Ng==","user":{"login":"thxmasj","id":3448852,"node_id":"MDQ6VXNlcjM0NDg4NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/3448852?v=4","gravatar_id":"","url":"https://api.github.com/users/thxmasj","html_url":"https://github.com/thxmasj","followers_url":"https://api.github.com/users/thxmasj/followers","following_url":"https://api.github.com/users/thxmasj/following{/other_user}","gists_url":"https://api.github.com/users/thxmasj/gists{/gist_id}","starred_url":"https://api.github.com/users/thxmasj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thxmasj/subscriptions","organizations_url":"https://api.github.com/users/thxmasj/orgs","repos_url":"https://api.github.com/users/thxmasj/repos","events_url":"https://api.github.com/users/thxmasj/events{/privacy}","received_events_url":"https://api.github.com/users/thxmasj/received_events","type":"User","site_admin":false},"created_at":"2016-10-07T12:45:36Z","updated_at":"2016-10-07T12:45:36Z","author_association":"NONE","body":"Any good workarounds for this? I have a similar problem running on Docker with swarm mode, where the master/gossip nodes are runnig as a service and the data nodes point to the service name. As Docker uses DNS for the discovery this is a problem there as well.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252910702","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-252910702","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":252910702,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjkxMDcwMg==","user":{"login":"Nils-Magnus","id":1684438,"node_id":"MDQ6VXNlcjE2ODQ0Mzg=","avatar_url":"https://avatars2.githubusercontent.com/u/1684438?v=4","gravatar_id":"","url":"https://api.github.com/users/Nils-Magnus","html_url":"https://github.com/Nils-Magnus","followers_url":"https://api.github.com/users/Nils-Magnus/followers","following_url":"https://api.github.com/users/Nils-Magnus/following{/other_user}","gists_url":"https://api.github.com/users/Nils-Magnus/gists{/gist_id}","starred_url":"https://api.github.com/users/Nils-Magnus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Nils-Magnus/subscriptions","organizations_url":"https://api.github.com/users/Nils-Magnus/orgs","repos_url":"https://api.github.com/users/Nils-Magnus/repos","events_url":"https://api.github.com/users/Nils-Magnus/events{/privacy}","received_events_url":"https://api.github.com/users/Nils-Magnus/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T13:05:14Z","updated_at":"2016-10-11T13:05:14Z","author_association":"NONE","body":"@thxmasj I provide the full list (as reported by Docker) explicitly. That mitigates, but does not resolve the problem.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/262418058","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-262418058","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":262418058,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjQxODA1OA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-11-23T01:53:25Z","updated_at":"2016-11-23T01:53:25Z","author_association":"MEMBER","body":"This is now addressed in the forthcoming 5.1.0 (no date, sorry). If you are in an environment where DNS changes are a thing, you will have to adjust the JVM DNS cache settings in your system security policy. Please consult the Zen discovery docs for details. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/268859006","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-268859006","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":268859006,"node_id":"MDEyOklzc3VlQ29tbWVudDI2ODg1OTAwNg==","user":{"login":"dustinschultz","id":1161240,"node_id":"MDQ6VXNlcjExNjEyNDA=","avatar_url":"https://avatars2.githubusercontent.com/u/1161240?v=4","gravatar_id":"","url":"https://api.github.com/users/dustinschultz","html_url":"https://github.com/dustinschultz","followers_url":"https://api.github.com/users/dustinschultz/followers","following_url":"https://api.github.com/users/dustinschultz/following{/other_user}","gists_url":"https://api.github.com/users/dustinschultz/gists{/gist_id}","starred_url":"https://api.github.com/users/dustinschultz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dustinschultz/subscriptions","organizations_url":"https://api.github.com/users/dustinschultz/orgs","repos_url":"https://api.github.com/users/dustinschultz/repos","events_url":"https://api.github.com/users/dustinschultz/events{/privacy}","received_events_url":"https://api.github.com/users/dustinschultz/received_events","type":"User","site_admin":false},"created_at":"2016-12-22T18:19:48Z","updated_at":"2016-12-22T18:19:48Z","author_association":"NONE","body":"Has anyone tried enabling `client.transport.sniff=true` as a workaround? Curious if this would work around the issue.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/286603600","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-286603600","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":286603600,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjYwMzYwMA==","user":{"login":"devulapalli8","id":25373057,"node_id":"MDQ6VXNlcjI1MzczMDU3","avatar_url":"https://avatars3.githubusercontent.com/u/25373057?v=4","gravatar_id":"","url":"https://api.github.com/users/devulapalli8","html_url":"https://github.com/devulapalli8","followers_url":"https://api.github.com/users/devulapalli8/followers","following_url":"https://api.github.com/users/devulapalli8/following{/other_user}","gists_url":"https://api.github.com/users/devulapalli8/gists{/gist_id}","starred_url":"https://api.github.com/users/devulapalli8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devulapalli8/subscriptions","organizations_url":"https://api.github.com/users/devulapalli8/orgs","repos_url":"https://api.github.com/users/devulapalli8/repos","events_url":"https://api.github.com/users/devulapalli8/events{/privacy}","received_events_url":"https://api.github.com/users/devulapalli8/received_events","type":"User","site_admin":false},"created_at":"2017-03-15T00:23:25Z","updated_at":"2017-03-15T00:23:25Z","author_association":"NONE","body":"is there any update on this issue ? whats the fix","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/286603966","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-286603966","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":286603966,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjYwMzk2Ng==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-03-15T00:25:34Z","updated_at":"2017-03-15T00:25:39Z","author_association":"MEMBER","body":"> is there any update on this issue ? whats the fix\r\n\r\nYes, it's addressed starting in Elasticsearch 5.1.1. You can read about this in the [zen discovery docs](https://www.elastic.co/guide/en/elasticsearch/reference/5.2/modules-discovery-zen.html#unicast).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/286604837","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-286604837","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":286604837,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjYwNDgzNw==","user":{"login":"devulapalli8","id":25373057,"node_id":"MDQ6VXNlcjI1MzczMDU3","avatar_url":"https://avatars3.githubusercontent.com/u/25373057?v=4","gravatar_id":"","url":"https://api.github.com/users/devulapalli8","html_url":"https://github.com/devulapalli8","followers_url":"https://api.github.com/users/devulapalli8/followers","following_url":"https://api.github.com/users/devulapalli8/following{/other_user}","gists_url":"https://api.github.com/users/devulapalli8/gists{/gist_id}","starred_url":"https://api.github.com/users/devulapalli8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devulapalli8/subscriptions","organizations_url":"https://api.github.com/users/devulapalli8/orgs","repos_url":"https://api.github.com/users/devulapalli8/repos","events_url":"https://api.github.com/users/devulapalli8/events{/privacy}","received_events_url":"https://api.github.com/users/devulapalli8/received_events","type":"User","site_admin":false},"created_at":"2017-03-15T00:30:55Z","updated_at":"2017-03-15T00:30:55Z","author_association":"NONE","body":"Thanks for quick reply. I'm using ES 2.1 version , when one of ES instances is rebuilt then its throwing NoRouteToHostException. to resolve the issue its forcing me rebuild dependent applications which connects to ES as client.  client.transport.sniff=true will enable to discover the new nodes added to the ES cluster. Is there workaround for ES2.1 version \r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/286605267","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-286605267","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":286605267,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjYwNTI2Nw==","user":{"login":"devulapalli8","id":25373057,"node_id":"MDQ6VXNlcjI1MzczMDU3","avatar_url":"https://avatars3.githubusercontent.com/u/25373057?v=4","gravatar_id":"","url":"https://api.github.com/users/devulapalli8","html_url":"https://github.com/devulapalli8","followers_url":"https://api.github.com/users/devulapalli8/followers","following_url":"https://api.github.com/users/devulapalli8/following{/other_user}","gists_url":"https://api.github.com/users/devulapalli8/gists{/gist_id}","starred_url":"https://api.github.com/users/devulapalli8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devulapalli8/subscriptions","organizations_url":"https://api.github.com/users/devulapalli8/orgs","repos_url":"https://api.github.com/users/devulapalli8/repos","events_url":"https://api.github.com/users/devulapalli8/events{/privacy}","received_events_url":"https://api.github.com/users/devulapalli8/received_events","type":"User","site_admin":false},"created_at":"2017-03-15T00:33:49Z","updated_at":"2017-03-15T00:33:49Z","author_association":"NONE","body":"As mentioned in the document , I still set networkaddress.cache.ttl=0 in java.security but it didnt resolve the issue since when i ping the new ES instance its resolved with new IP address as expected so I dont think its DNS caching issue.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/286630482","html_url":"https://github.com/elastic/elasticsearch/issues/16412#issuecomment-286630482","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16412","id":286630482,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjYzMDQ4Mg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-03-15T03:25:25Z","updated_at":"2017-03-15T03:25:25Z","author_association":"MEMBER","body":"It's not addressed in the 2.x series, there is nothing you can do there. It's only resolved since 5.1.1.","performed_via_github_app":null}]