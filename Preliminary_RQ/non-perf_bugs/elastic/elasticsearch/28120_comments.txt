[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/358982376","html_url":"https://github.com/elastic/elasticsearch/issues/28120#issuecomment-358982376","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28120","id":358982376,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODk4MjM3Ng==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2018-01-19T14:35:10Z","updated_at":"2018-01-19T14:35:10Z","author_association":"CONTRIBUTOR","body":"Can you give more details about your use-case? Is there any reason why the `_search` API would not work?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/359209195","html_url":"https://github.com/elastic/elasticsearch/issues/28120#issuecomment-359209195","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28120","id":359209195,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTIwOTE5NQ==","user":{"login":"yehosef","id":149253,"node_id":"MDQ6VXNlcjE0OTI1Mw==","avatar_url":"https://avatars0.githubusercontent.com/u/149253?v=4","gravatar_id":"","url":"https://api.github.com/users/yehosef","html_url":"https://github.com/yehosef","followers_url":"https://api.github.com/users/yehosef/followers","following_url":"https://api.github.com/users/yehosef/following{/other_user}","gists_url":"https://api.github.com/users/yehosef/gists{/gist_id}","starred_url":"https://api.github.com/users/yehosef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yehosef/subscriptions","organizations_url":"https://api.github.com/users/yehosef/orgs","repos_url":"https://api.github.com/users/yehosef/repos","events_url":"https://api.github.com/users/yehosef/events{/privacy}","received_events_url":"https://api.github.com/users/yehosef/received_events","type":"User","site_admin":false},"created_at":"2018-01-20T23:05:27Z","updated_at":"2018-01-20T23:05:27Z","author_association":"NONE","body":"I went into more detail in the forums at https://discuss.elastic.co/t/is-there-a-way-to-specify-routing-all-or-similar-for-get-requests/115439.  \r\n\r\nBasically my specific use case is that I have a parent-child relationship (stories and comments) and I don't know the id of the parent when requesting the child (which is common/normal).  Until now I had the documents stored not as parent-child and I'm using the Document API.  As I started planning the move to parent-child, I realized I wouldn't be able to us it for GET of a child when all I have is it's ID because I don't know the parent's id, and hence the routing param.\r\n\r\nWhile I can use the search API, you could make the same argument of why you should have a Document API at all - you can use the search API.   Since there is already a Document API and you already support specifying routing (and multiple routing ids), I'm just asking/suggesting that this be extended to support all the shards with a single command, routing=* (or similar - all_shards=true.. etc).\r\n\r\nHere's the one problem I can see that could come from this.  It's possible to have multiple documents with the same ID on different shards.  Someone using the document API presumably wouldn't be doing this on purpose, but it could happen.  Since the document ID only supports one result, you have to decide how to handle this.  \r\n\r\nThe best solution (I think) would be the throw an error that the request expects one results and more than one was found.  Then it would be clear there is a problem and the person could use the search API to find the problem documents and correct them.\r\n\r\nBut what currently happens is that one of the results is returned and the other ignored (I created a test case with two documents with the same ID and different routing params.  If I do an ID search, I get both results.  If I do a document request with both routing options, I sometimes get one of the results, sometimes neither, depending on the order of the routing params (I can explain the test if you want.. but it's not hard to imagine and create.)  This is less than ideal because really something went wrong and I'm not noticing it.\r\n\r\nLet me know if you have other questions.  Thanks.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/359209433","html_url":"https://github.com/elastic/elasticsearch/issues/28120#issuecomment-359209433","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28120","id":359209433,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTIwOTQzMw==","user":{"login":"yehosef","id":149253,"node_id":"MDQ6VXNlcjE0OTI1Mw==","avatar_url":"https://avatars0.githubusercontent.com/u/149253?v=4","gravatar_id":"","url":"https://api.github.com/users/yehosef","html_url":"https://github.com/yehosef","followers_url":"https://api.github.com/users/yehosef/followers","following_url":"https://api.github.com/users/yehosef/following{/other_user}","gists_url":"https://api.github.com/users/yehosef/gists{/gist_id}","starred_url":"https://api.github.com/users/yehosef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yehosef/subscriptions","organizations_url":"https://api.github.com/users/yehosef/orgs","repos_url":"https://api.github.com/users/yehosef/repos","events_url":"https://api.github.com/users/yehosef/events{/privacy}","received_events_url":"https://api.github.com/users/yehosef/received_events","type":"User","site_admin":false},"created_at":"2018-01-20T23:09:28Z","updated_at":"2018-01-20T23:09:28Z","author_association":"NONE","body":"I don't think what I'm asking for is any big/major change.  You already support multiple routing id and I could, knowing the number of shards I have, experiment and find routing params to hit all the shards.  But that's hacky and shouldn't be needed, IMO.\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/390934438","html_url":"https://github.com/elastic/elasticsearch/issues/28120#issuecomment-390934438","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28120","id":390934438,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDkzNDQzOA==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2018-05-22T09:59:26Z","updated_at":"2018-05-22T09:59:26Z","author_association":"MEMBER","body":"> You already support multiple routing id \r\n\r\nCan you elaborate on where you see this?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/390946890","html_url":"https://github.com/elastic/elasticsearch/issues/28120#issuecomment-390946890","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28120","id":390946890,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDk0Njg5MA==","user":{"login":"yehosef","id":149253,"node_id":"MDQ6VXNlcjE0OTI1Mw==","avatar_url":"https://avatars0.githubusercontent.com/u/149253?v=4","gravatar_id":"","url":"https://api.github.com/users/yehosef","html_url":"https://github.com/yehosef","followers_url":"https://api.github.com/users/yehosef/followers","following_url":"https://api.github.com/users/yehosef/following{/other_user}","gists_url":"https://api.github.com/users/yehosef/gists{/gist_id}","starred_url":"https://api.github.com/users/yehosef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yehosef/subscriptions","organizations_url":"https://api.github.com/users/yehosef/orgs","repos_url":"https://api.github.com/users/yehosef/repos","events_url":"https://api.github.com/users/yehosef/events{/privacy}","received_events_url":"https://api.github.com/users/yehosef/received_events","type":"User","site_admin":false},"created_at":"2018-05-22T10:47:16Z","updated_at":"2018-05-22T10:47:16Z","author_association":"NONE","body":"I thought I saw it, but after checking it, perhaps it was a mistake.  I was trying ?routing=1,2 or things like that.  Sometimes it would work, which I thought it was using multiple routing params.  I realize now it was just using \"1,2\" as the routing string to hash.  \r\n\r\nSo it might not be the same thing or as easy.  The way I solved it for now is to use a \"?q=id:123\" query.  The problem is that it gives a results array instead of single and I had to change my code to accommodate that structure instead of a single result.  It would also be helpful if there was a query string param that could get the first result and return it as a simple result instead of like a result set (with timing, total count, etc..)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/390969225","html_url":"https://github.com/elastic/elasticsearch/issues/28120#issuecomment-390969225","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28120","id":390969225,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDk2OTIyNQ==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2018-05-22T12:18:30Z","updated_at":"2018-05-22T12:18:30Z","author_association":"MEMBER","body":"ok. Thanks for responding quickly. I believe that adding multi-routing values to the GET API will make it more complicated than needed. It has elegance in its simplicity and is geared toward retrieval of docs which have a known place. Otherwise a fall back to `_search` makes sense (search is optimized to support multiple routing values).\r\n\r\n>  It would also be helpful if there was a query string param that could get the first result and return it as a simple result instead of like a result set \r\n\r\nI see how that will be useful for you. I think it's better to cover it using a utility method in the application code rather than making the ES API more complicated. \r\n\r\nI'm going to close this as I feel the use cased has been properly hashed out.","performed_via_github_app":null}]