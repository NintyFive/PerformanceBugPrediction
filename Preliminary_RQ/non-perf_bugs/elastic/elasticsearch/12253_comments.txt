[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/121585854","html_url":"https://github.com/elastic/elasticsearch/issues/12253#issuecomment-121585854","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12253","id":121585854,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMTU4NTg1NA==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-07-15T11:22:51Z","updated_at":"2015-07-15T11:22:51Z","author_association":"MEMBER","body":"I'm not sure exactly what you mean, but the testing infra will indeed randomly add a _default_ mapping. See https://github.com/elastic/elasticsearch/blob/master/core/src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java#L369 for the decision and  https://github.com/elastic/elasticsearch/blob/master/core/src/test/java/org/elasticsearch/test/ElasticsearchIntegrationTest.java#L450 for logging of it. \n\nthe randomDynamicTemplates parameter to the ClusterScope annotation allows you to turn off the random behavior , giving you the option to add what ever template/default mapping you want.\n\nDoes this answer you question?\n\nOut of curiosity  - what does it matter to you if the `_default_` mapping is added?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/121604513","html_url":"https://github.com/elastic/elasticsearch/issues/12253#issuecomment-121604513","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12253","id":121604513,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMTYwNDUxMw==","user":{"login":"mikerott","id":857712,"node_id":"MDQ6VXNlcjg1NzcxMg==","avatar_url":"https://avatars2.githubusercontent.com/u/857712?v=4","gravatar_id":"","url":"https://api.github.com/users/mikerott","html_url":"https://github.com/mikerott","followers_url":"https://api.github.com/users/mikerott/followers","following_url":"https://api.github.com/users/mikerott/following{/other_user}","gists_url":"https://api.github.com/users/mikerott/gists{/gist_id}","starred_url":"https://api.github.com/users/mikerott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikerott/subscriptions","organizations_url":"https://api.github.com/users/mikerott/orgs","repos_url":"https://api.github.com/users/mikerott/repos","events_url":"https://api.github.com/users/mikerott/events{/privacy}","received_events_url":"https://api.github.com/users/mikerott/received_events","type":"User","site_admin":false},"created_at":"2015-07-15T12:45:46Z","updated_at":"2015-07-15T12:45:58Z","author_association":"NONE","body":"That parameter does (mostly) answer my question.  I was also curious about how to print out the decisions RandomizedTest makes, but I can find that some other time.\n\nAs for the parameter, yes that helps!  I guess I missed all the params for ClusterScope annotation.\n\nAs for why it matters, it's actually not such a big deal, except that we want strict control over the mappings that are created into ES, and in 1.1.1 everything was perfectly deterministic.  In 1.5.2, it _appeared_ initially like some nondeterministic behavior.  Of course, it ultimately just came down to the (intentional) randomized behavior of the tests.\n\nI think all is well now.  Thank you for the help!\n","performed_via_github_app":null}]