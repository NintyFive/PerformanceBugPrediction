[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54273026","html_url":"https://github.com/elastic/elasticsearch/issues/7431#issuecomment-54273026","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7431","id":54273026,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjczMDI2","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2014-09-03T09:37:47Z","updated_at":"2014-09-03T09:37:47Z","author_association":"CONTRIBUTOR","body":"@MosheZada  I think I understand the bug: If you intepret the double bits of `0.5` as a long, you get `4602678819172646912`, which is the value that you get in the aggregation. So something somewhere must be interpreting double bits as long bits.\n\nCan you tell us more about the version of Elasticsearch that you are using and how you configure mappings (are you using dynamic mappings or do you configure them explicitely)?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54529844","html_url":"https://github.com/elastic/elasticsearch/issues/7431#issuecomment-54529844","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7431","id":54529844,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTI5ODQ0","user":{"login":"moshe","id":7490448,"node_id":"MDQ6VXNlcjc0OTA0NDg=","avatar_url":"https://avatars1.githubusercontent.com/u/7490448?v=4","gravatar_id":"","url":"https://api.github.com/users/moshe","html_url":"https://github.com/moshe","followers_url":"https://api.github.com/users/moshe/followers","following_url":"https://api.github.com/users/moshe/following{/other_user}","gists_url":"https://api.github.com/users/moshe/gists{/gist_id}","starred_url":"https://api.github.com/users/moshe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/moshe/subscriptions","organizations_url":"https://api.github.com/users/moshe/orgs","repos_url":"https://api.github.com/users/moshe/repos","events_url":"https://api.github.com/users/moshe/events{/privacy}","received_events_url":"https://api.github.com/users/moshe/received_events","type":"User","site_admin":false},"created_at":"2014-09-04T19:15:50Z","updated_at":"2014-09-04T19:15:50Z","author_association":"NONE","body":"I found the cause of the problem,\nour logstash used the basic mapping template - that caused elasticsearch guess the type of the metric field (no type specified by default).\nmost of the times the new index created with metric as double but in sometimes with metric as long.\nso i forced metric field to be double by adding:\n\n``` json\n       {\n         \"metric_to_double\" : {\n           \"match\" : \"metric\",\n           \"match_mapping_type\" : \"long\",\n           \"mapping\" : {\n             \"type\" : \"double\"\n           }\n```\n\nto the _default_ section in the logstash template \nThank you all for making such awesome product :+1: \n","performed_via_github_app":null}]