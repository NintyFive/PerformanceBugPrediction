[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/118638358","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-118638358","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":118638358,"node_id":"MDEyOklzc3VlQ29tbWVudDExODYzODM1OA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-07-05T17:01:56Z","updated_at":"2015-07-05T17:01:56Z","author_association":"CONTRIBUTOR","body":"It looks up the type of filesystem I think to determine whether it is an SSD or not, as that changes the default number of merge threads.\n\n@mikemccand any ideas here?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/118674772","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-118674772","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":118674772,"node_id":"MDEyOklzc3VlQ29tbWVudDExODY3NDc3Mg==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-07-05T22:58:02Z","updated_at":"2015-07-05T22:58:02Z","author_association":"CONTRIBUTOR","body":"For 1.x we use this for for diagnostics (log filesystem type, mount point, free space for each path.data on node init) and from JmxFsProbe (pulling \"fs\" node stats).  This was done in #10502 and #10527 ...\n\nIn 2.0 we also log the spins detection (SSD or not).  Currently ES does not default merge schedule defaults according to spins; rather, we always use aggressive settings (more than one merge thread).  I'm not sure we should change to Lucene's defaults... that could be a sudden change on ES users upgrading.\n\nBefore, JmxFsProbe would only call Files.getFileStore API when you asked for fs stats (and sigar wasn't used), so you wouldn't hit this unless you pulled fs stats w/o sigar, but now we cache the FileStore on init instead.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/119216568","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-119216568","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":119216568,"node_id":"MDEyOklzc3VlQ29tbWVudDExOTIxNjU2OA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-07-07T14:12:15Z","updated_at":"2015-07-07T14:12:15Z","author_association":"CONTRIBUTOR","body":"@mikemccand so what should we do in this case (freebsd jail) where there is not fstab?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/119233187","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-119233187","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":119233187,"node_id":"MDEyOklzc3VlQ29tbWVudDExOTIzMzE4Nw==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-07-07T15:07:16Z","updated_at":"2015-07-07T15:07:16Z","author_association":"CONTRIBUTOR","body":"@peikk0 Can you configure your jail to include an fstab?  I don't have much experience with jails in FreeBSD but on some quick googling it seems like this is possible, e.g. https://forums.freebsd.org/threads/jail-conf.34741/\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/119238124","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-119238124","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":119238124,"node_id":"MDEyOklzc3VlQ29tbWVudDExOTIzODEyNA==","user":{"login":"peikk0","id":1555947,"node_id":"MDQ6VXNlcjE1NTU5NDc=","avatar_url":"https://avatars1.githubusercontent.com/u/1555947?v=4","gravatar_id":"","url":"https://api.github.com/users/peikk0","html_url":"https://github.com/peikk0","followers_url":"https://api.github.com/users/peikk0/followers","following_url":"https://api.github.com/users/peikk0/following{/other_user}","gists_url":"https://api.github.com/users/peikk0/gists{/gist_id}","starred_url":"https://api.github.com/users/peikk0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peikk0/subscriptions","organizations_url":"https://api.github.com/users/peikk0/orgs","repos_url":"https://api.github.com/users/peikk0/repos","events_url":"https://api.github.com/users/peikk0/events{/privacy}","received_events_url":"https://api.github.com/users/peikk0/received_events","type":"User","site_admin":false},"created_at":"2015-07-07T15:24:23Z","updated_at":"2015-07-07T15:24:23Z","author_association":"NONE","body":"Those fstab are used by the host and are not visible inside the jail. Jails are not allowed to mount anything by default anyway and don't have access to devices, or else it could compromise the host and other jails.\n\nAnyways, even if I create a fake fstab in the jail, it still won't start:\n\n```\nyavin ~ # mount\ncorellia/usr/jails/mon on / (zfs, local, noatime, nfsv4acls)\nyavin ~ # cat /etc/fstab\ncorellia/usr/jails/mon / zfs noauto 0 0\nyavin ~ # service elasticsearch console\n[2015-07-07 17:19:02,750][INFO ][node                     ] [Mantra] version[1.6.0], pid[3165], build[cdd3ac4/2015-06-09T13:36:34Z]\n[2015-07-07 17:19:02,750][INFO ][node                     ] [Mantra] initializing ...\n[2015-07-07 17:19:02,754][INFO ][plugins                  ] [Mantra] loaded [], sites []\n{1.6.0}: Initialization Failed ...\n- ElasticsearchIllegalStateException[Failed to obtain node lock, is the following location writable?: [/var/db/elasticsearch/mon]]\n        IOException[failed to obtain lock on /var/db/elasticsearch/mon/nodes/49]\n                IOException[Mount point not found in fstab]\n```\n\nIMO, a proper fix would be to catch the exception and use a safe default in this case.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/119238614","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-119238614","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":119238614,"node_id":"MDEyOklzc3VlQ29tbWVudDExOTIzODYxNA==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2015-07-07T15:26:21Z","updated_at":"2015-07-07T15:26:21Z","author_association":"CONTRIBUTOR","body":"I don't think thats necessarily safe. Its abnormal that you cannot retrieve information from the filestore. I don't think we should hide the error condition.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/119239422","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-119239422","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":119239422,"node_id":"MDEyOklzc3VlQ29tbWVudDExOTIzOTQyMg==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2015-07-07T15:29:26Z","updated_at":"2015-07-07T15:29:26Z","author_association":"CONTRIBUTOR","body":"also keep in mind, I think the filestore is used to know the amount of disk space.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/119241520","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-119241520","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":119241520,"node_id":"MDEyOklzc3VlQ29tbWVudDExOTI0MTUyMA==","user":{"login":"peikk0","id":1555947,"node_id":"MDQ6VXNlcjE1NTU5NDc=","avatar_url":"https://avatars1.githubusercontent.com/u/1555947?v=4","gravatar_id":"","url":"https://api.github.com/users/peikk0","html_url":"https://github.com/peikk0","followers_url":"https://api.github.com/users/peikk0/followers","following_url":"https://api.github.com/users/peikk0/following{/other_user}","gists_url":"https://api.github.com/users/peikk0/gists{/gist_id}","starred_url":"https://api.github.com/users/peikk0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peikk0/subscriptions","organizations_url":"https://api.github.com/users/peikk0/orgs","repos_url":"https://api.github.com/users/peikk0/repos","events_url":"https://api.github.com/users/peikk0/events{/privacy}","received_events_url":"https://api.github.com/users/peikk0/received_events","type":"User","site_admin":false},"created_at":"2015-07-07T15:37:11Z","updated_at":"2015-07-07T15:37:11Z","author_association":"NONE","body":"/etc/fstab is not a reliable source anyway, it defines what should be mounted, but not what actually is. How about simply using the output of `mount`? Or something equivalent (no /proc/mounts on FreeBSD either, or /proc/ at all).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/119241960","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-119241960","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":119241960,"node_id":"MDEyOklzc3VlQ29tbWVudDExOTI0MTk2MA==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2015-07-07T15:39:01Z","updated_at":"2015-07-07T15:39:01Z","author_association":"CONTRIBUTOR","body":"Those are issues to take up with the bsd port of the openjdk IMO. we are just using the only way in java to do it, and thats to call Files.getFileStore\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/120318379","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-120318379","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":120318379,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMDMxODM3OQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-07-10T09:29:53Z","updated_at":"2015-07-10T09:29:53Z","author_association":"CONTRIBUTOR","body":"It sounds like this configuration can't be supported - we need access to this info, and we rely on Java to provide it.  \n\nClosing\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/146791007","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-146791007","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":146791007,"node_id":"MDEyOklzc3VlQ29tbWVudDE0Njc5MTAwNw==","user":{"login":"djneades","id":4183286,"node_id":"MDQ6VXNlcjQxODMyODY=","avatar_url":"https://avatars0.githubusercontent.com/u/4183286?v=4","gravatar_id":"","url":"https://api.github.com/users/djneades","html_url":"https://github.com/djneades","followers_url":"https://api.github.com/users/djneades/followers","following_url":"https://api.github.com/users/djneades/following{/other_user}","gists_url":"https://api.github.com/users/djneades/gists{/gist_id}","starred_url":"https://api.github.com/users/djneades/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djneades/subscriptions","organizations_url":"https://api.github.com/users/djneades/orgs","repos_url":"https://api.github.com/users/djneades/repos","events_url":"https://api.github.com/users/djneades/events{/privacy}","received_events_url":"https://api.github.com/users/djneades/received_events","type":"User","site_admin":false},"created_at":"2015-10-09T08:03:51Z","updated_at":"2015-10-09T08:03:51Z","author_association":"NONE","body":"I just ran into this problem – it’s exceedingly unhelpful behaviour for those of us wishing to jail elasticsearch.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/146829653","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-146829653","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":146829653,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NjgyOTY1Mw==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2015-10-09T10:33:19Z","updated_at":"2015-10-09T10:33:19Z","author_association":"CONTRIBUTOR","body":"You need to open issues with oracle about it. There is nothing we can do.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/146830807","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-146830807","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":146830807,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NjgzMDgwNw==","user":{"login":"peikk0","id":1555947,"node_id":"MDQ6VXNlcjE1NTU5NDc=","avatar_url":"https://avatars1.githubusercontent.com/u/1555947?v=4","gravatar_id":"","url":"https://api.github.com/users/peikk0","html_url":"https://github.com/peikk0","followers_url":"https://api.github.com/users/peikk0/followers","following_url":"https://api.github.com/users/peikk0/following{/other_user}","gists_url":"https://api.github.com/users/peikk0/gists{/gist_id}","starred_url":"https://api.github.com/users/peikk0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peikk0/subscriptions","organizations_url":"https://api.github.com/users/peikk0/orgs","repos_url":"https://api.github.com/users/peikk0/repos","events_url":"https://api.github.com/users/peikk0/events{/privacy}","received_events_url":"https://api.github.com/users/peikk0/received_events","type":"User","site_admin":false},"created_at":"2015-10-09T10:40:08Z","updated_at":"2015-10-09T10:40:08Z","author_association":"NONE","body":"I've read it works fine with OpenJDK 8, I haven't tried it yet though.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/146831826","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-146831826","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":146831826,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NjgzMTgyNg==","user":{"login":"djneades","id":4183286,"node_id":"MDQ6VXNlcjQxODMyODY=","avatar_url":"https://avatars0.githubusercontent.com/u/4183286?v=4","gravatar_id":"","url":"https://api.github.com/users/djneades","html_url":"https://github.com/djneades","followers_url":"https://api.github.com/users/djneades/followers","following_url":"https://api.github.com/users/djneades/following{/other_user}","gists_url":"https://api.github.com/users/djneades/gists{/gist_id}","starred_url":"https://api.github.com/users/djneades/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djneades/subscriptions","organizations_url":"https://api.github.com/users/djneades/orgs","repos_url":"https://api.github.com/users/djneades/repos","events_url":"https://api.github.com/users/djneades/events{/privacy}","received_events_url":"https://api.github.com/users/djneades/received_events","type":"User","site_admin":false},"created_at":"2015-10-09T10:48:02Z","updated_at":"2015-10-09T10:48:02Z","author_association":"NONE","body":"@peikk0, thank you for the pointer. Unfortunately, that doesn’t seem to be the case, at least in my configuration (I have a data directory nullfs mounted into the jail’s directory hierarchy). I have OpenJDK8 installed (and uninstalled OpenJDK7 just to make sure that JDK 8 is being used), but I still encounter the problem.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/146840836","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-146840836","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":146840836,"node_id":"MDEyOklzc3VlQ29tbWVudDE0Njg0MDgzNg==","user":{"login":"djneades","id":4183286,"node_id":"MDQ6VXNlcjQxODMyODY=","avatar_url":"https://avatars0.githubusercontent.com/u/4183286?v=4","gravatar_id":"","url":"https://api.github.com/users/djneades","html_url":"https://github.com/djneades","followers_url":"https://api.github.com/users/djneades/followers","following_url":"https://api.github.com/users/djneades/following{/other_user}","gists_url":"https://api.github.com/users/djneades/gists{/gist_id}","starred_url":"https://api.github.com/users/djneades/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djneades/subscriptions","organizations_url":"https://api.github.com/users/djneades/orgs","repos_url":"https://api.github.com/users/djneades/repos","events_url":"https://api.github.com/users/djneades/events{/privacy}","received_events_url":"https://api.github.com/users/djneades/received_events","type":"User","site_admin":false},"created_at":"2015-10-09T11:43:21Z","updated_at":"2015-10-09T11:43:21Z","author_association":"NONE","body":"Having investigated this a little further, it seems that setting the jail’s `enforce_statfs` property to `1` allows Elasticsearch to obtain the information it needs (at least when running with OpenJDK 8). From the jail (8) man page:\n\n```\nenforce_statfs\n             This determines what information processes in a jail are able to\n             get about mount points.  It affects the behaviour of the follow‐\n             ing syscalls: statfs(2), fstatfs(2), getfsstat(2), and\n             fhstatfs(2) (as well as similar compatibility syscalls).  When\n             set to 0, all mount points are available without any restric‐\n             tions.  When set to 1, only mount points below the jail's chroot\n             directory are visible.  In addition to that, the path to the\n             jail's chroot directory is removed from the front of their path‐\n             names.  When set to 2 (default), above syscalls can operate only\n             on a mount-point where the jail's chroot directory is located.\n```\n\nPerhaps this information will be useful to anyone else who encounters this issue.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/146842279","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-146842279","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":146842279,"node_id":"MDEyOklzc3VlQ29tbWVudDE0Njg0MjI3OQ==","user":{"login":"peikk0","id":1555947,"node_id":"MDQ6VXNlcjE1NTU5NDc=","avatar_url":"https://avatars1.githubusercontent.com/u/1555947?v=4","gravatar_id":"","url":"https://api.github.com/users/peikk0","html_url":"https://github.com/peikk0","followers_url":"https://api.github.com/users/peikk0/followers","following_url":"https://api.github.com/users/peikk0/following{/other_user}","gists_url":"https://api.github.com/users/peikk0/gists{/gist_id}","starred_url":"https://api.github.com/users/peikk0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peikk0/subscriptions","organizations_url":"https://api.github.com/users/peikk0/orgs","repos_url":"https://api.github.com/users/peikk0/repos","events_url":"https://api.github.com/users/peikk0/events{/privacy}","received_events_url":"https://api.github.com/users/peikk0/received_events","type":"User","site_admin":false},"created_at":"2015-10-09T11:54:11Z","updated_at":"2015-10-09T11:54:11Z","author_association":"NONE","body":"Good catch! I just tried it and it works with OpenJDK 7 too!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/146843657","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-146843657","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":146843657,"node_id":"MDEyOklzc3VlQ29tbWVudDE0Njg0MzY1Nw==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2015-10-09T11:58:12Z","updated_at":"2015-10-09T11:58:12Z","author_association":"CONTRIBUTOR","body":"Nice solution! I think we should return this information in the error if we hit exception trying to pull the filestores on freebsd. I will take care of it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/146878487","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-146878487","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":146878487,"node_id":"MDEyOklzc3VlQ29tbWVudDE0Njg3ODQ4Nw==","user":{"login":"djneades","id":4183286,"node_id":"MDQ6VXNlcjQxODMyODY=","avatar_url":"https://avatars0.githubusercontent.com/u/4183286?v=4","gravatar_id":"","url":"https://api.github.com/users/djneades","html_url":"https://github.com/djneades","followers_url":"https://api.github.com/users/djneades/followers","following_url":"https://api.github.com/users/djneades/following{/other_user}","gists_url":"https://api.github.com/users/djneades/gists{/gist_id}","starred_url":"https://api.github.com/users/djneades/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djneades/subscriptions","organizations_url":"https://api.github.com/users/djneades/orgs","repos_url":"https://api.github.com/users/djneades/repos","events_url":"https://api.github.com/users/djneades/events{/privacy}","received_events_url":"https://api.github.com/users/djneades/received_events","type":"User","site_admin":false},"created_at":"2015-10-09T13:56:17Z","updated_at":"2015-10-09T13:56:17Z","author_association":"NONE","body":"@peikk0, thank you for the confirmation, that’s good to know.\n\n@rmuir, an informational message would no doubt be very helpful, good call!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/152455392","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-152455392","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":152455392,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MjQ1NTM5Mg==","user":{"login":"marcoc610","id":6916378,"node_id":"MDQ6VXNlcjY5MTYzNzg=","avatar_url":"https://avatars2.githubusercontent.com/u/6916378?v=4","gravatar_id":"","url":"https://api.github.com/users/marcoc610","html_url":"https://github.com/marcoc610","followers_url":"https://api.github.com/users/marcoc610/followers","following_url":"https://api.github.com/users/marcoc610/following{/other_user}","gists_url":"https://api.github.com/users/marcoc610/gists{/gist_id}","starred_url":"https://api.github.com/users/marcoc610/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcoc610/subscriptions","organizations_url":"https://api.github.com/users/marcoc610/orgs","repos_url":"https://api.github.com/users/marcoc610/repos","events_url":"https://api.github.com/users/marcoc610/events{/privacy}","received_events_url":"https://api.github.com/users/marcoc610/received_events","type":"User","site_admin":false},"created_at":"2015-10-30T08:07:11Z","updated_at":"2015-10-30T08:18:49Z","author_association":"NONE","body":"I have experienced the same problem on Linux (so no jails, no chroot) when the path.data is in a BTRFS subvolume that is not mounted.\nActually I think that it is more a java issue, but I wonder if there is any workaround for btrfs subvolumes too... And, yes, there is one: mounting the subvolumes explicitly solved the issue for me.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/211779181","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-211779181","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":211779181,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMTc3OTE4MQ==","user":{"login":"hydrapolic","id":3277373,"node_id":"MDQ6VXNlcjMyNzczNzM=","avatar_url":"https://avatars2.githubusercontent.com/u/3277373?v=4","gravatar_id":"","url":"https://api.github.com/users/hydrapolic","html_url":"https://github.com/hydrapolic","followers_url":"https://api.github.com/users/hydrapolic/followers","following_url":"https://api.github.com/users/hydrapolic/following{/other_user}","gists_url":"https://api.github.com/users/hydrapolic/gists{/gist_id}","starred_url":"https://api.github.com/users/hydrapolic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hydrapolic/subscriptions","organizations_url":"https://api.github.com/users/hydrapolic/orgs","repos_url":"https://api.github.com/users/hydrapolic/repos","events_url":"https://api.github.com/users/hydrapolic/events{/privacy}","received_events_url":"https://api.github.com/users/hydrapolic/received_events","type":"User","site_admin":false},"created_at":"2016-04-19T07:44:11Z","updated_at":"2016-04-19T07:44:11Z","author_association":"NONE","body":"This is still an issue on Linux.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/285421492","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-285421492","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":285421492,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTQyMTQ5Mg==","user":{"login":"remram44","id":426784,"node_id":"MDQ6VXNlcjQyNjc4NA==","avatar_url":"https://avatars3.githubusercontent.com/u/426784?v=4","gravatar_id":"","url":"https://api.github.com/users/remram44","html_url":"https://github.com/remram44","followers_url":"https://api.github.com/users/remram44/followers","following_url":"https://api.github.com/users/remram44/following{/other_user}","gists_url":"https://api.github.com/users/remram44/gists{/gist_id}","starred_url":"https://api.github.com/users/remram44/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/remram44/subscriptions","organizations_url":"https://api.github.com/users/remram44/orgs","repos_url":"https://api.github.com/users/remram44/repos","events_url":"https://api.github.com/users/remram44/events{/privacy}","received_events_url":"https://api.github.com/users/remram44/received_events","type":"User","site_admin":false},"created_at":"2017-03-09T17:30:33Z","updated_at":"2017-03-09T17:30:33Z","author_association":"NONE","body":"I am running into this on Linux. I don't think it is right for elasticsearch to go through that much magic to determine if locking should work. At the very least, I'd expect it to at least *try* to lock rather than exiting with an error \"Failed to obtain node lock\" although the conditions are right.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/285437570","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-285437570","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":285437570,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTQzNzU3MA==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2017-03-09T18:28:44Z","updated_at":"2017-03-09T18:28:44Z","author_association":"MEMBER","body":"@remram44 are you running this on linux with no virtualization? without an `/etc/fstab` file? Maybe you can give us more information about your setup.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/285444674","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-285444674","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":285444674,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTQ0NDY3NA==","user":{"login":"remram44","id":426784,"node_id":"MDQ6VXNlcjQyNjc4NA==","avatar_url":"https://avatars3.githubusercontent.com/u/426784?v=4","gravatar_id":"","url":"https://api.github.com/users/remram44","html_url":"https://github.com/remram44","followers_url":"https://api.github.com/users/remram44/followers","following_url":"https://api.github.com/users/remram44/following{/other_user}","gists_url":"https://api.github.com/users/remram44/gists{/gist_id}","starred_url":"https://api.github.com/users/remram44/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/remram44/subscriptions","organizations_url":"https://api.github.com/users/remram44/orgs","repos_url":"https://api.github.com/users/remram44/repos","events_url":"https://api.github.com/users/remram44/events{/privacy}","received_events_url":"https://api.github.com/users/remram44/received_events","type":"User","site_admin":false},"created_at":"2017-03-09T18:54:01Z","updated_at":"2017-03-09T18:54:01Z","author_association":"NONE","body":"I'm running from a chroot, so there is no entry in `/proc/mounts` for `/`. Adding some fstab with fake info gives out `ElasticsearchIllegalStateException[Failed to obtain node lock, is the following location writable?: [/var/lib/elasticsearch/elasticsearch]]`","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/285444988","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-285444988","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":285444988,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTQ0NDk4OA==","user":{"login":"remram44","id":426784,"node_id":"MDQ6VXNlcjQyNjc4NA==","avatar_url":"https://avatars3.githubusercontent.com/u/426784?v=4","gravatar_id":"","url":"https://api.github.com/users/remram44","html_url":"https://github.com/remram44","followers_url":"https://api.github.com/users/remram44/followers","following_url":"https://api.github.com/users/remram44/following{/other_user}","gists_url":"https://api.github.com/users/remram44/gists{/gist_id}","starred_url":"https://api.github.com/users/remram44/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/remram44/subscriptions","organizations_url":"https://api.github.com/users/remram44/orgs","repos_url":"https://api.github.com/users/remram44/repos","events_url":"https://api.github.com/users/remram44/events{/privacy}","received_events_url":"https://api.github.com/users/remram44/received_events","type":"User","site_admin":false},"created_at":"2017-03-09T18:55:10Z","updated_at":"2017-03-09T18:55:10Z","author_association":"NONE","body":"Moving the directory I chroot, creating an empty dir where it was and mounting the new location to the old with `mount -o bind`, I can get elasticsearch to start. Tell me again why you need elasticsearch's root to be its own filesystem? Surely if the rest of the world can lock files without it, elasticsearch can manage? Why add so much magic when it will only break things?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/285452452","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-285452452","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":285452452,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTQ1MjQ1Mg==","user":{"login":"remram44","id":426784,"node_id":"MDQ6VXNlcjQyNjc4NA==","avatar_url":"https://avatars3.githubusercontent.com/u/426784?v=4","gravatar_id":"","url":"https://api.github.com/users/remram44","html_url":"https://github.com/remram44","followers_url":"https://api.github.com/users/remram44/followers","following_url":"https://api.github.com/users/remram44/following{/other_user}","gists_url":"https://api.github.com/users/remram44/gists{/gist_id}","starred_url":"https://api.github.com/users/remram44/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/remram44/subscriptions","organizations_url":"https://api.github.com/users/remram44/orgs","repos_url":"https://api.github.com/users/remram44/repos","events_url":"https://api.github.com/users/remram44/events{/privacy}","received_events_url":"https://api.github.com/users/remram44/received_events","type":"User","site_admin":false},"created_at":"2017-03-09T19:21:49Z","updated_at":"2017-03-09T19:21:49Z","author_association":"NONE","body":"[strace log](https://gist.github.com/remram44/1102e9b37f07c058e88e27cf36ff5c7e)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/388741666","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-388741666","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":388741666,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODc0MTY2Ng==","user":{"login":"samimb","id":4834107,"node_id":"MDQ6VXNlcjQ4MzQxMDc=","avatar_url":"https://avatars2.githubusercontent.com/u/4834107?v=4","gravatar_id":"","url":"https://api.github.com/users/samimb","html_url":"https://github.com/samimb","followers_url":"https://api.github.com/users/samimb/followers","following_url":"https://api.github.com/users/samimb/following{/other_user}","gists_url":"https://api.github.com/users/samimb/gists{/gist_id}","starred_url":"https://api.github.com/users/samimb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samimb/subscriptions","organizations_url":"https://api.github.com/users/samimb/orgs","repos_url":"https://api.github.com/users/samimb/repos","events_url":"https://api.github.com/users/samimb/events{/privacy}","received_events_url":"https://api.github.com/users/samimb/received_events","type":"User","site_admin":false},"created_at":"2018-05-14T08:43:53Z","updated_at":"2018-05-14T08:43:53Z","author_association":"NONE","body":"Was this ever solved? I'm trying to setup elastic in an iocage with Version: 6.2.4, Build: ccec39f/2018-04-12T20:37:28.497551Z, JVM: 1.8.0_162\r\n\r\nThe iocage is running directly on an SSD with /var/db/elasticsearch mounted as nullfs from the host on a mechanical drive.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/525305340","html_url":"https://github.com/elastic/elasticsearch/issues/12018#issuecomment-525305340","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12018","id":525305340,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTMwNTM0MA==","user":{"login":"renormalist","id":36725,"node_id":"MDQ6VXNlcjM2NzI1","avatar_url":"https://avatars1.githubusercontent.com/u/36725?v=4","gravatar_id":"","url":"https://api.github.com/users/renormalist","html_url":"https://github.com/renormalist","followers_url":"https://api.github.com/users/renormalist/followers","following_url":"https://api.github.com/users/renormalist/following{/other_user}","gists_url":"https://api.github.com/users/renormalist/gists{/gist_id}","starred_url":"https://api.github.com/users/renormalist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/renormalist/subscriptions","organizations_url":"https://api.github.com/users/renormalist/orgs","repos_url":"https://api.github.com/users/renormalist/repos","events_url":"https://api.github.com/users/renormalist/events{/privacy}","received_events_url":"https://api.github.com/users/renormalist/received_events","type":"User","site_admin":false},"created_at":"2019-08-27T13:38:10Z","updated_at":"2019-08-27T13:38:10Z","author_association":"NONE","body":"In my world with elasticsearch 7.3.1 I still need to apply above bind-mount workaround from @remram44. ","performed_via_github_app":null}]