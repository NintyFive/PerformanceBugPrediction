[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/233068872","html_url":"https://github.com/elastic/elasticsearch/issues/19458#issuecomment-233068872","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19458","id":233068872,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMzA2ODg3Mg==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-07-15T21:01:26Z","updated_at":"2016-07-15T21:01:26Z","author_association":"CONTRIBUTOR","body":"It told you why it isn't starting:\n- initial heap size [268435456] not equal to maximum heap size [2147483648]; this can cause resize pauses and prevents mlockall from locking the entire heap\n- please set [discovery.zen.minimum_master_nodes] to a majority of the number of master eligible nodes in your cluster\n- max virtual memory areas vm.max_map_count [65530] likely too low, increase to at least [262144]\n\nIt doesn't check these things if you bind to localhost because it assumes that you aren't running it in production. If you are running in production these are the minimum changes that we recommend.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/233068949","html_url":"https://github.com/elastic/elasticsearch/issues/19458#issuecomment-233068949","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19458","id":233068949,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMzA2ODk0OQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-07-15T21:01:48Z","updated_at":"2016-07-15T21:01:48Z","author_association":"MEMBER","body":"Since you're binding to an external interface, the Elasticsearch [bootstrap checks](https://www.elastic.co/guide/en/elasticsearch/reference/master/bootstrap-checks.html) are enforced. In particular, you're failing three checks:\n\n```\ninitial heap size [268435456] not equal to maximum heap size [2147483648]; this can cause resize pauses and prevents mlockall from locking the entire heap\nplease set [discovery.zen.minimum_master_nodes] to a majority of the number of master eligible nodes in your cluster\nmax virtual memory areas vm.max_map_count [65530] likely too low, increase to at least [262144]\n```\n\nThese are all documented in the [bootstrap check](https://www.elastic.co/guide/en/elasticsearch/reference/master/bootstrap-checks.html) docs.\n\nYou'll need to set the initial heap size equal to your desired max heap size, configure `discovery.zen.minimum_master_nodes`, and set `vm.max_map_count` to at least 262144.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/233075365","html_url":"https://github.com/elastic/elasticsearch/issues/19458#issuecomment-233075365","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19458","id":233075365,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMzA3NTM2NQ==","user":{"login":"naisanza","id":1614425,"node_id":"MDQ6VXNlcjE2MTQ0MjU=","avatar_url":"https://avatars1.githubusercontent.com/u/1614425?v=4","gravatar_id":"","url":"https://api.github.com/users/naisanza","html_url":"https://github.com/naisanza","followers_url":"https://api.github.com/users/naisanza/followers","following_url":"https://api.github.com/users/naisanza/following{/other_user}","gists_url":"https://api.github.com/users/naisanza/gists{/gist_id}","starred_url":"https://api.github.com/users/naisanza/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/naisanza/subscriptions","organizations_url":"https://api.github.com/users/naisanza/orgs","repos_url":"https://api.github.com/users/naisanza/repos","events_url":"https://api.github.com/users/naisanza/events{/privacy}","received_events_url":"https://api.github.com/users/naisanza/received_events","type":"User","site_admin":false},"created_at":"2016-07-15T21:33:49Z","updated_at":"2016-07-15T21:33:49Z","author_association":"NONE","body":"@nik9000 @jasontedor going through resolving the bootstrap tests one-by-one, with `bootstrap.memory_lock: true` set in the config, should you still be encountering the `initial heap size not equal to maximum heap size` error?\n\nI'm still getting that error\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/233075775","html_url":"https://github.com/elastic/elasticsearch/issues/19458#issuecomment-233075775","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19458","id":233075775,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMzA3NTc3NQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-07-15T21:36:09Z","updated_at":"2016-07-15T21:36:09Z","author_association":"MEMBER","body":"The setting `bootstrap.memory_lock` has nothing to do with setting the heap size. It's in the docs that I linked to. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/233096119","html_url":"https://github.com/elastic/elasticsearch/issues/19458#issuecomment-233096119","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19458","id":233096119,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMzA5NjExOQ==","user":{"login":"naisanza","id":1614425,"node_id":"MDQ6VXNlcjE2MTQ0MjU=","avatar_url":"https://avatars1.githubusercontent.com/u/1614425?v=4","gravatar_id":"","url":"https://api.github.com/users/naisanza","html_url":"https://github.com/naisanza","followers_url":"https://api.github.com/users/naisanza/followers","following_url":"https://api.github.com/users/naisanza/following{/other_user}","gists_url":"https://api.github.com/users/naisanza/gists{/gist_id}","starred_url":"https://api.github.com/users/naisanza/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/naisanza/subscriptions","organizations_url":"https://api.github.com/users/naisanza/orgs","repos_url":"https://api.github.com/users/naisanza/repos","events_url":"https://api.github.com/users/naisanza/events{/privacy}","received_events_url":"https://api.github.com/users/naisanza/received_events","type":"User","site_admin":false},"created_at":"2016-07-16T00:12:08Z","updated_at":"2016-07-16T00:12:08Z","author_association":"NONE","body":"@jasontedor that's where I got it from\n\nhttps://www.elastic.co/guide/en/elasticsearch/reference/master/_heap_size_check.html\n\n> Heap size check\n> If a JVM is started with unequal initial and max heap size, it can be prone to pauses as the JVM heap is resized during system usage. To avoid these resize pauses, itâ€™s best to start the JVM with the initial heap size equal to the maximum heap size. Additionally, if **bootstrap.memory_lock** is **enabled**, the JVM will lock the initial size of the heap on startup. If the initial heap size is not equal to the maximum heap size, after a resize it will not be the case that all of the JVM heap is locked in memory. To pass the heap size check, you must configure the heap size.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/233098163","html_url":"https://github.com/elastic/elasticsearch/issues/19458#issuecomment-233098163","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19458","id":233098163,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMzA5ODE2Mw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-07-16T00:38:44Z","updated_at":"2016-07-16T00:38:44Z","author_association":"MEMBER","body":"That is telling you the advantage of setting the initial heap size to the desired maximum heap size. If you follow the last link on that page it will take you directly to how to set the heap size:\n\n> To pass the heap size check, you must configure the [heap size](https://www.elastic.co/guide/en/elasticsearch/reference/master/heap-size.html).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/236394166","html_url":"https://github.com/elastic/elasticsearch/issues/19458#issuecomment-236394166","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19458","id":236394166,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNjM5NDE2Ng==","user":{"login":"naisanza","id":1614425,"node_id":"MDQ6VXNlcjE2MTQ0MjU=","avatar_url":"https://avatars1.githubusercontent.com/u/1614425?v=4","gravatar_id":"","url":"https://api.github.com/users/naisanza","html_url":"https://github.com/naisanza","followers_url":"https://api.github.com/users/naisanza/followers","following_url":"https://api.github.com/users/naisanza/following{/other_user}","gists_url":"https://api.github.com/users/naisanza/gists{/gist_id}","starred_url":"https://api.github.com/users/naisanza/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/naisanza/subscriptions","organizations_url":"https://api.github.com/users/naisanza/orgs","repos_url":"https://api.github.com/users/naisanza/repos","events_url":"https://api.github.com/users/naisanza/events{/privacy}","received_events_url":"https://api.github.com/users/naisanza/received_events","type":"User","site_admin":false},"created_at":"2016-07-30T22:48:54Z","updated_at":"2016-07-30T22:48:54Z","author_association":"NONE","body":"Solved the vm.max_map_count https://github.com/lxc/lxd/issues/2206#issuecomment-236393880\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/236805572","html_url":"https://github.com/elastic/elasticsearch/issues/19458#issuecomment-236805572","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19458","id":236805572,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNjgwNTU3Mg==","user":{"login":"naisanza","id":1614425,"node_id":"MDQ6VXNlcjE2MTQ0MjU=","avatar_url":"https://avatars1.githubusercontent.com/u/1614425?v=4","gravatar_id":"","url":"https://api.github.com/users/naisanza","html_url":"https://github.com/naisanza","followers_url":"https://api.github.com/users/naisanza/followers","following_url":"https://api.github.com/users/naisanza/following{/other_user}","gists_url":"https://api.github.com/users/naisanza/gists{/gist_id}","starred_url":"https://api.github.com/users/naisanza/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/naisanza/subscriptions","organizations_url":"https://api.github.com/users/naisanza/orgs","repos_url":"https://api.github.com/users/naisanza/repos","events_url":"https://api.github.com/users/naisanza/events{/privacy}","received_events_url":"https://api.github.com/users/naisanza/received_events","type":"User","site_admin":false},"created_at":"2016-08-02T05:49:11Z","updated_at":"2016-08-02T05:49:11Z","author_association":"NONE","body":"Working elasticsearch.yml:\n\n```\ncluster.name: beta\nnetwork.host: _site_\ndiscovery.zen.minimum_master_nodes: 1\n```\n\nWorking elasticsearch launch parameters:\n`ES_JAVA_OPTS='-Xms2048m -Xmx2048m' elasticsearch`\n\nIt works now\n","performed_via_github_app":null}]