{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/9808","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9808/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9808/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9808/events","html_url":"https://github.com/elastic/elasticsearch/issues/9808","id":58549836,"node_id":"MDU6SXNzdWU1ODU0OTgzNg==","number":9808,"title":"Suggestion needed for handling renames","user":{"login":"satishmallik","id":8112171,"node_id":"MDQ6VXNlcjgxMTIxNzE=","avatar_url":"https://avatars2.githubusercontent.com/u/8112171?v=4","gravatar_id":"","url":"https://api.github.com/users/satishmallik","html_url":"https://github.com/satishmallik","followers_url":"https://api.github.com/users/satishmallik/followers","following_url":"https://api.github.com/users/satishmallik/following{/other_user}","gists_url":"https://api.github.com/users/satishmallik/gists{/gist_id}","starred_url":"https://api.github.com/users/satishmallik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satishmallik/subscriptions","organizations_url":"https://api.github.com/users/satishmallik/orgs","repos_url":"https://api.github.com/users/satishmallik/repos","events_url":"https://api.github.com/users/satishmallik/events{/privacy}","received_events_url":"https://api.github.com/users/satishmallik/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-02-23T07:04:12Z","updated_at":"2015-02-23T07:08:31Z","closed_at":"2015-02-23T07:08:31Z","author_association":"NONE","active_lock_reason":null,"body":"I have following requirements,\nFor every project that I index has 2 values\n1) Id: Each project has a unique ID\n2) Name: Name of the project. But Name of the project can change.\n\nFor every project, we index a document with different attributes. Say each document in index will have an Attribute A1 with different values. Each attribute has an Id and Name. Name again can change.\n\nOveall index would look like\nProjectName ProjectGUID A1Name A1Id File\nP1                 P1ID             T1     T1-ID        f11\nP1                 P1ID             T1     T1-ID        f12\nP1                 P1ID             T1     T1-ID        f13\nP1                 P1ID             T2     T2-ID        f21\n.\n.\n\npost rename of T2 to T3 index will look like,\nP1                 P1ID             T3     T2-ID        f21\n\nSo Name has changed but not Id.\n\nDuring query I aggregate on different attributes. \n\nProblem:\n1) User always queries with Project name.\n2) During displaying results I want to display results based upon different attributes. Say for attribute A1 with name T1 3 documents exist. For T2 5 documents exist.\n\nIf I index document with name query is very simple. But as we support renames, any rename means indexing whole project.\nSo another option is to store ids in documents and store id to name map separately. For project rename we can use Alias with id as filter. For aggregations, one of the options I could see is term lookup filters. But I need to \n1) read about aggregating on term lookup rather than term itself \n2) cost associated with term lookup.\n\nAre any other alternatives available with elasticsearch? I believe this should be a common problem. Any suggestions,\n","closed_by":{"login":"markwalkom","id":3184718,"node_id":"MDQ6VXNlcjMxODQ3MTg=","avatar_url":"https://avatars0.githubusercontent.com/u/3184718?v=4","gravatar_id":"","url":"https://api.github.com/users/markwalkom","html_url":"https://github.com/markwalkom","followers_url":"https://api.github.com/users/markwalkom/followers","following_url":"https://api.github.com/users/markwalkom/following{/other_user}","gists_url":"https://api.github.com/users/markwalkom/gists{/gist_id}","starred_url":"https://api.github.com/users/markwalkom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markwalkom/subscriptions","organizations_url":"https://api.github.com/users/markwalkom/orgs","repos_url":"https://api.github.com/users/markwalkom/repos","events_url":"https://api.github.com/users/markwalkom/events{/privacy}","received_events_url":"https://api.github.com/users/markwalkom/received_events","type":"User","site_admin":false},"performed_via_github_app":null}