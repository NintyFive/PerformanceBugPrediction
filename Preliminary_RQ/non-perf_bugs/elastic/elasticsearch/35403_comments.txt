[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/437240794","html_url":"https://github.com/elastic/elasticsearch/issues/35403#issuecomment-437240794","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35403","id":437240794,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNzI0MDc5NA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-11-09T03:47:21Z","updated_at":"2018-11-09T03:47:21Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/437388050","html_url":"https://github.com/elastic/elasticsearch/issues/35403#issuecomment-437388050","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35403","id":437388050,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNzM4ODA1MA==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2018-11-09T15:09:45Z","updated_at":"2018-11-09T15:09:45Z","author_association":"MEMBER","body":"This test tests that ccr keeps following a leader index; while a node holding the primary shard of the follower index is restarted. After the restart we expect that the follower index gets back into a green state, but that doesn't happen. The replicas (used to be primaries) are unable to recover from the primary shards:\r\n\r\n```\r\n1> cluster uuid: o2L8nhvHQL-wy93CmcS5Ag\r\n  1> version: 16\r\n  1> state uuid: j9PkPvfbQc68EBzg6VChnA\r\n  1> from_diff: false\r\n  1> meta data version: 10\r\n  1>    [follower-index/vTH2BwSvRTSC4CrI_oFbMA]: v[6], mv[1], sv[1]\r\n  1>       0: p_term [2], isa_ids [Iqbazc8iQ9-6RR12ZZhtkg]\r\n  1> metadata customs:\r\n  1>    persistent_tasks: {\"last_allocation_id\":1,\"tasks\":[{\"id\":\"vTH2BwSvRTSC4CrI_oFbMA-0\",\"task\":{\"xpack/ccr/shard_follow_task\":{\"params\":{\"remote_cluster\":\"leader_c\r\nluster\",\"follow_shard_index\":\"follower-index\",\"follow_shard_index_uuid\":\"vTH2BwSvRTSC4CrI_oFbMA\",\"follow_shard_shard\":0,\"leader_shard_index\":\"leader-index\",\"leader_sha\r\nrd_index_uuid\":\"LOXtlSQRRIecv-2pJuHHlg\",\"leader_shard_shard\":0,\"max_read_request_operation_count\":1455,\"max_read_request_size\":\"1461kb\",\"max_outstanding_read_requests\"\r\n:4,\"max_write_request_operation_count\":1908,\"max_write_request_size\":\"1259kb\",\"max_outstanding_write_requests\":1,\"max_write_buffer_count\":2147483647,\"max_write_buffer_\r\nsize\":\"512mb\",\"max_retry_delay\":\"10ms\",\"read_poll_timeout\":\"10ms\",\"headers\":{}}}},\"allocation_id\":1,\"assignment\":{\"executor_node\":\"vtkxFTkwTReEy-_pIHq1aQ\",\"explanation\r\n\":\"\"}}]}   index-graveyard: IndexGraveyard[[]]\r\n  1> nodes: \r\n  1>    {followerm0}{ceKigf_eS6q1bSD9PjeF9Q}{KLsjQTBSTwmmfO68Xs3SSw}{127.0.0.1}{127.0.0.1:44381}{xpack.installed=true}, master\r\n  1>    {followerd6}{EzmV_EamS9CrPbyDEdvQNw}{VbOh7rGgSWCn2_6QJL0SzQ}{127.0.0.1}{127.0.0.1:34535}{xpack.installed=true}\r\n  1>    {followerm5}{V9A0dTNNQpaja-ayVER8Wg}{VyMKmg2yR8azsg4_aNaLFA}{127.0.0.1}{127.0.0.1:46385}{xpack.installed=true}\r\n  1>    {followerm1}{nD4QckFISemqngHgWPU4NA}{C_BFOjUxTC6USqa0pXO9dA}{127.0.0.1}{127.0.0.1:34775}{xpack.installed=true}\r\n  1>    {followerd3}{PlW87Mz-R7qy3LrIOT4BMg}{HHktN4lsTiS58tQq0oUk-w}{127.0.0.1}{127.0.0.1:37717}{xpack.installed=true}\r\n  1>    {followerm2}{f1SK4fs1RO6x1TrcGbFF9Q}{io86LtElTC-_2bJ-K2mfvw}{127.0.0.1}{127.0.0.1:35559}{xpack.installed=true}\r\n  1>    {followerd4}{vtkxFTkwTReEy-_pIHq1aQ}{48GVEgaPTji2rBhbHbJQIA}{127.0.0.1}{127.0.0.1:40783}{xpack.installed=true}\r\n  1> routing_table (version 7):\r\n  1> -- index [[follower-index/vTH2BwSvRTSC4CrI_oFbMA]]\r\n  1> ----shard_id [follower-index][0]\r\n  1> --------[follower-index][0], node[PlW87Mz-R7qy3LrIOT4BMg], [R], recovery_source[peer recovery], s[INITIALIZING], a[id=ksgilEsJToy6WtU0qNPM0Q], unassigned_info[[re\r\nason=NODE_LEFT], at[2018-11-09T03:13:19.536Z], delayed=true, details[node_left[PlW87Mz-R7qy3LrIOT4BMg]], allocation_status[no_attempt]]\r\n  1> --------[follower-index][0], node[EzmV_EamS9CrPbyDEdvQNw], [P], s[STARTED], a[id=Iqbazc8iQ9-6RR12ZZhtkg]\r\n  1> routing_nodes:\r\n  1> -----node_id[PlW87Mz-R7qy3LrIOT4BMg][V]\r\n  1> --------[follower-index][0], node[PlW87Mz-R7qy3LrIOT4BMg], [R], recovery_source[peer recovery], s[INITIALIZING], a[id=ksgilEsJToy6WtU0qNPM0Q], unassigned_info[[re\r\nason=NODE_LEFT], at[2018-11-09T03:13:19.536Z], delayed=true, details[node_left[PlW87Mz-R7qy3LrIOT4BMg]], allocation_status[no_attempt]]\r\n  1> -----node_id[EzmV_EamS9CrPbyDEdvQNw][V]\r\n  1> --------[follower-index][0], node[EzmV_EamS9CrPbyDEdvQNw], [P], s[STARTED], a[id=Iqbazc8iQ9-6RR12ZZhtkg]\r\n  1> -----node_id[vtkxFTkwTReEy-_pIHq1aQ][V]\r\n  1> ---- unassigned\r\n  1> tasks: (0):\r\n```\r\n\r\nNot sure why these replica shards are not able to recover.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/442050752","html_url":"https://github.com/elastic/elasticsearch/issues/35403#issuecomment-442050752","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35403","id":442050752,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MjA1MDc1Mg==","user":{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false},"created_at":"2018-11-27T13:04:13Z","updated_at":"2018-11-27T13:04:13Z","author_association":"CONTRIBUTOR","body":"similar issue: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.x+matrix-java-periodic/ES_BUILD_JAVA=java11,ES_RUNTIME_JAVA=java11,nodes=virtual&&linux/84/consoleFull","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/442971557","html_url":"https://github.com/elastic/elasticsearch/issues/35403#issuecomment-442971557","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35403","id":442971557,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0Mjk3MTU1Nw==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2018-11-29T19:55:59Z","updated_at":"2018-11-29T19:55:59Z","author_association":"MEMBER","body":"Also: \r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.x+multijob-unix-compatibility/os=fedora/87/console\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.x+multijob-unix-compatibility/os=sles/87/console\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/443154490","html_url":"https://github.com/elastic/elasticsearch/issues/35403#issuecomment-443154490","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35403","id":443154490,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MzE1NDQ5MA==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2018-11-30T10:05:41Z","updated_at":"2018-11-30T10:05:41Z","author_association":"MEMBER","body":"I pushed a fix for this test failure. Turns out it was a test issue. Due to delayed allocation the replica shards never allocated in time. I will close this issue if I have confirmed that these tests have stopped failing.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/443672674","html_url":"https://github.com/elastic/elasticsearch/issues/35403#issuecomment-443672674","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35403","id":443672674,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MzY3MjY3NA==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2018-12-03T11:07:03Z","updated_at":"2018-12-03T11:07:03Z","author_association":"MEMBER","body":"Closing, this test hasn't failed since above change was pushed.","performed_via_github_app":null}]