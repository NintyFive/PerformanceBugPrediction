{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/43464","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43464/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43464/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43464/events","html_url":"https://github.com/elastic/elasticsearch/issues/43464","id":459004225,"node_id":"MDU6SXNzdWU0NTkwMDQyMjU=","number":43464,"title":"[CI] MultiSearchRequestTests.testEmptyFirstLineX failures","user":{"login":"astefan","id":893749,"node_id":"MDQ6VXNlcjg5Mzc0OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/893749?v=4","gravatar_id":"","url":"https://api.github.com/users/astefan","html_url":"https://github.com/astefan","followers_url":"https://api.github.com/users/astefan/followers","following_url":"https://api.github.com/users/astefan/following{/other_user}","gists_url":"https://api.github.com/users/astefan/gists{/gist_id}","starred_url":"https://api.github.com/users/astefan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astefan/subscriptions","organizations_url":"https://api.github.com/users/astefan/orgs","repos_url":"https://api.github.com/users/astefan/repos","events_url":"https://api.github.com/users/astefan/events{/privacy}","received_events_url":"https://api.github.com/users/astefan/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"assignees":[{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2019-06-21T04:37:30Z","updated_at":"2019-07-10T12:17:27Z","closed_at":"2019-07-10T12:17:27Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"These two reproduce for me.\r\n\r\n`gradlew :server:test --tests \"org.elasticsearch.action.search.MultiSearchRequestTests.testEmptyFirstLine2\" -Dtests.seed=D340C78210D0FC2D -Dtests.security.manager=true -Dtests.locale=sv -Dtests.timezone=America/Grand_Turk -Dcompiler.java=12 -Druntime.java=8`\r\n\r\n`gradlew :server:test --tests \"org.elasticsearch.action.search.MultiSearchRequestTests.testEmptyFirstLine1\" -Dtests.seed=D340C78210D0FC2D -Dtests.security.manager=true -Dtests.locale=sv -Dtests.timezone=America/Grand_Turk -Dcompiler.java=12 -Druntime.java=8`\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.2+multijob-windows-compatibility/32/console\r\n\r\nErrors:\r\n\r\n```\r\n Suite: Test class org.elasticsearch.action.search.MultiSearchRequestTests\r\n08:12:18  org.elasticsearch.action.search.MultiSearchRequestTests > testEmptyFirstLine2 FAILED\r\n08:12:18      java.lang.IllegalArgumentException: key [query] is not supported in the metadata section\r\n08:12:18    2> REPRODUCE WITH: gradlew :server:test --tests \"org.elasticsearch.action.search.MultiSearchRequestTests.testEmptyFirstLine2\" -Dtests.seed=D340C78210D0FC2D -Dtests.security.manager=true -Dtests.locale=sv -Dtests.timezone=America/Grand_Turk -Dcompiler.java=12 -Druntime.java=8  2> \r\n08:12:18          at __randomizedtesting.SeedInfo.seed([D340C78210D0FC2D:807E8991489FC104]:0)\r\n08:12:18    2> java.lang.IllegalArgumentException: key [query] is not supported in the metadata section\r\n08:12:18          at org.elasticsearch.action.search.MultiSearchRequest.readMultiLineFormat(MultiSearchRequest.java:255)\r\n08:12:18          at __randomizedtesting.SeedInfo.seed([D340C78210D0FC2D:807E8991489FC104]:0)\r\n08:12:18          at org.elasticsearch.rest.action.search.RestMultiSearchAction.parseMultiLineRequest(RestMultiSearchAction.java:156)\r\n08:12:18          at org.elasticsearch.action.search.MultiSearchRequest.readMultiLineFormat(MultiSearchRequest.java:255)\r\n08:12:18          at org.elasticsearch.rest.action.search.RestMultiSearchAction.parseMultiLineRequest(RestMultiSearchAction.java:156)\r\n08:12:18          at org.elasticsearch.action.search.MultiSearchRequestTests.parseMultiSearchRequest(MultiSearchRequestTests.java:263)\r\n08:12:18          at org.elasticsearch.action.search.MultiSearchRequestTests.parseMultiSearchRequest(MultiSearchRequestTests.java:263)\r\n08:12:18          at org.elasticsearch.action.search.MultiSearchRequestTests.testEmptyFirstLine2(MultiSearchRequestTests.java:202)\r\n08:12:18  \r\n08:12:18          at org.elasticsearch.action.search.MultiSearchRequestTests.testEmptyFirstLine2(MultiSearchRequestTests.java:202)\r\n08:12:18  org.elasticsearch.action.search.MultiSearchRequestTests > testEmptyFirstLine1 FAILED\r\n08:12:18    2> REPRODUCE WITH: gradlew :server:test --tests \"org.elasticsearch.action.search.MultiSearchRequestTests.testEmptyFirstLine1\" -Dtests.seed=D340C78210D0FC2D -Dtests.security.manager=true -Dtests.locale=sv -Dtests.timezone=America/Grand_Turk -Dcompiler.java=12 -Druntime.java=8  2> \r\n08:12:18      ParsingException[Expected [START_OBJECT] but found [null]]\r\n08:12:18    2> ParsingException[Expected [START_OBJECT] but found [null]]\r\n08:12:18          at __randomizedtesting.SeedInfo.seed([D340C78210D0FC2D:57CE6758EA6EE5D3]:0)\r\n08:12:18          at org.elasticsearch.search.builder.SearchSourceBuilder.parseXContent(SearchSourceBuilder.java:1052)\r\n08:12:18          at org.elasticsearch.search.builder.SearchSourceBuilder.fromXContent(SearchSourceBuilder.java:124)\r\n08:12:18          at __randomizedtesting.SeedInfo.seed([D340C78210D0FC2D:57CE6758EA6EE5D3]:0)\r\n08:12:18          at org.elasticsearch.action.search.MultiSearchRequestTests.lambda$parseMultiSearchRequest$3(MultiSearchRequestTests.java:265)\r\n08:12:18          at org.elasticsearch.search.builder.SearchSourceBuilder.parseXContent(SearchSourceBuilder.java:1052)\r\n08:12:18          at org.elasticsearch.search.builder.SearchSourceBuilder.fromXContent(SearchSourceBuilder.java:124)\r\n08:12:18          at org.elasticsearch.action.search.MultiSearchRequest.readMultiLineFormat(MultiSearchRequest.java:274)\r\n08:12:18          at org.elasticsearch.action.search.MultiSearchRequestTests.lambda$parseMultiSearchRequest$3(MultiSearchRequestTests.java:265)\r\n08:12:18          at org.elasticsearch.action.search.MultiSearchRequest.readMultiLineFormat(MultiSearchRequest.java:274)\r\n08:12:18          at org.elasticsearch.rest.action.search.RestMultiSearchAction.parseMultiLineRequest(RestMultiSearchAction.java:156)\r\n08:12:18          at org.elasticsearch.action.search.MultiSearchRequestTests.parseMultiSearchRequest(MultiSearchRequestTests.java:263)\r\n08:12:18          at org.elasticsearch.action.search.MultiSearchRequestTests.testEmptyFirstLine1(MultiSearchRequestTests.java:191)\r\n08:12:18          at org.elasticsearch.rest.action.search.RestMultiSearchAction.parseMultiLineRequest(RestMultiSearchAction.java:156)\r\n08:12:18          at org.elasticsearch.action.search.MultiSearchRequestTests.parseMultiSearchRequest(MultiSearchRequestTests.java:263)\r\n```","closed_by":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"performed_via_github_app":null}