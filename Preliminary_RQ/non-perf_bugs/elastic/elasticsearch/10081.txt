{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/10081","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10081/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10081/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10081/events","html_url":"https://github.com/elastic/elasticsearch/issues/10081","id":61130740,"node_id":"MDU6SXNzdWU2MTEzMDc0MA==","number":10081,"title":"Switching from Facets to Aggregations problems in Elastic Search","user":{"login":"parasb","id":11458703,"node_id":"MDQ6VXNlcjExNDU4NzAz","avatar_url":"https://avatars1.githubusercontent.com/u/11458703?v=4","gravatar_id":"","url":"https://api.github.com/users/parasb","html_url":"https://github.com/parasb","followers_url":"https://api.github.com/users/parasb/followers","following_url":"https://api.github.com/users/parasb/following{/other_user}","gists_url":"https://api.github.com/users/parasb/gists{/gist_id}","starred_url":"https://api.github.com/users/parasb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/parasb/subscriptions","organizations_url":"https://api.github.com/users/parasb/orgs","repos_url":"https://api.github.com/users/parasb/repos","events_url":"https://api.github.com/users/parasb/events{/privacy}","received_events_url":"https://api.github.com/users/parasb/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-03-13T16:44:57Z","updated_at":"2015-03-13T17:21:31Z","closed_at":"2015-03-13T17:21:31Z","author_association":"NONE","active_lock_reason":null,"body":"We were using facets in elastic search. But since they are deprecated now, We are trying to use aggregations now. The code snippet for both the approaches are \n\nhttps://gist.github.com/parasb/751baf0fca2a7682a8d1\n\nRefering the code snippet for facets,  we pass 2 IMEIs in should array of facet 0, it returns the result corresponding to those IMEIs in facet 0 & we pass 1 IMEI in should array of facet 1, it returns the result corresponding to that IMEI in facet 1. So, we get the aggregated results of those multiple fquery search in the corresponding facet.\n\nBut while using aggregation, we pass all the IMEIs in the should array and get the response as per IMEI. I need to aggregate multiple IMEIs in multiple buckets. for eg: 2 IMEI in one bucket and another 1 IMEI in different bucket (similar to 2 IMEIs in 0 facet & 1 IMEI in first facet).\n\nDoes Elastic Search aggregation provide a way to do this? \n","closed_by":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"performed_via_github_app":null}