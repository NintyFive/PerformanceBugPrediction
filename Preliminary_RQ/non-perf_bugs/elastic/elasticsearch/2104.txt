{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/2104","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2104/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2104/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2104/events","html_url":"https://github.com/elastic/elasticsearch/issues/2104","id":5658396,"node_id":"MDU6SXNzdWU1NjU4Mzk2","number":2104,"title":"multiple filters in facet_filter","user":{"login":"quodt","id":232511,"node_id":"MDQ6VXNlcjIzMjUxMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/232511?v=4","gravatar_id":"","url":"https://api.github.com/users/quodt","html_url":"https://github.com/quodt","followers_url":"https://api.github.com/users/quodt/followers","following_url":"https://api.github.com/users/quodt/following{/other_user}","gists_url":"https://api.github.com/users/quodt/gists{/gist_id}","starred_url":"https://api.github.com/users/quodt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/quodt/subscriptions","organizations_url":"https://api.github.com/users/quodt/orgs","repos_url":"https://api.github.com/users/quodt/repos","events_url":"https://api.github.com/users/quodt/events{/privacy}","received_events_url":"https://api.github.com/users/quodt/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2012-07-17T08:15:02Z","updated_at":"2012-07-17T13:12:41Z","closed_at":"2012-07-17T13:12:41Z","author_association":"NONE","active_lock_reason":null,"body":"using multiple filters nested in an \"and\" filter for 'facet_filter' results in a SearchPhaseExecutionException. The error is: Parse Failure [No facet type found for [numeric_range]]\n\n``` json\n{\n  \"fields\": [\n    \"*\"\n  ],\n  \"facets\": {\n    \"facet_name\": {\n      \"statistical\": {\n        \"fields\": [\n          \"twto\"\n        ],\n        \"facet_filter\": {\n          \"and\": [\n            {\n              \"exists\": {\n                \"field\": \"twto\"\n              }\n            },\n            {\n              \"numeric_range\": {\n                \"ts\": {\n                  \"lt\": 1309471199999\n                }\n              }\n            }\n          ]\n        }\n      }\n    }\n  },\n  \"query\": {\n    \"match_all\": {}\n  },\n  \"from\": 0,\n  \"size\": 0\n}\n```\n\nIt doesn't matter what type of facet or what type of filters i'm using.\n\nusing the same expression as 'filter' the query works fine.\n\n``` json\n{\n  \"fields\": [\n    \"*\"\n  ],\n  \"filter\": {\n    \"and\": [\n      {\n        \"exists\": {\n          \"field\": \"twto\"\n        }\n      },\n      {\n        \"numeric_range\": {\n          \"ts\": {\n            \"lt\": 1341093600001,\n            \"gte\": 1309471199999\n          }\n        }\n      }\n    ]\n  },\n  \"from\": 0,\n  \"size\": 0\n}\n```\n","closed_by":{"login":"quodt","id":232511,"node_id":"MDQ6VXNlcjIzMjUxMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/232511?v=4","gravatar_id":"","url":"https://api.github.com/users/quodt","html_url":"https://github.com/quodt","followers_url":"https://api.github.com/users/quodt/followers","following_url":"https://api.github.com/users/quodt/following{/other_user}","gists_url":"https://api.github.com/users/quodt/gists{/gist_id}","starred_url":"https://api.github.com/users/quodt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/quodt/subscriptions","organizations_url":"https://api.github.com/users/quodt/orgs","repos_url":"https://api.github.com/users/quodt/repos","events_url":"https://api.github.com/users/quodt/events{/privacy}","received_events_url":"https://api.github.com/users/quodt/received_events","type":"User","site_admin":false},"performed_via_github_app":null}