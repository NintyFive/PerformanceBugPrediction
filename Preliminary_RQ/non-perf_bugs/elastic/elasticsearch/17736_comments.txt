[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/209827231","html_url":"https://github.com/elastic/elasticsearch/issues/17736#issuecomment-209827231","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17736","id":209827231,"node_id":"MDEyOklzc3VlQ29tbWVudDIwOTgyNzIzMQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-04-14T08:30:57Z","updated_at":"2016-04-14T08:30:57Z","author_association":"CONTRIBUTOR","body":"Hi @aliakb \n\nI'm afraid you haven't given nearly enough information here.  I've tried to reproduce this and failed.  here's what I tried:\n\n```\nDELETE *\n\nPOST t/t/_bulk\n{\"index\": {}}\n{\"text\": \"foo bar construction baz document\"}\n{\"index\": {}}\n{\"text\": \"foo bar construction document baz\"}\n{\"index\": {}}\n{\"text\": \"foo bar construction baz document\"}\n{\"index\": {}}\n{\"text\": \"foo bar construction document baz\"}\n{\"index\": {}}\n{\"text\": \"foo bar construction baz document\"}\n{\"index\": {}}\n{\"text\": \"foo bar construction document baz\"}\n{\"index\": {}}\n{\"text\": \"foo bar construction baz document\"}\n{\"index\": {}}\n{\"text\": \"foo bar construction document baz\"}\n{\"index\": {}}\n{\"text\": \"foo bar construction baz document\"}\n{\"index\": {}}\n{\"text\": \"foo bar construction document baz\"}\n{\"index\": {}}\n{\"text\": \"foo bar construction baz document\"}\n{\"index\": {}}\n{\"text\": \"foo bar construction document baz\"}\n\nGET _search?search_type=count\n{\n  \"query\": {\n    \"match\": {\n      \"_all\": {\n        \"query\": \"construction document\",\n        \"type\": \"phrase_prefix\"\n      }\n    }\n  }\n}\n\nGET _search?search_type=count\n{\n  \"query\": {\n    \"filtered\": {\n      \"query\": {\n        \"match_all\": {}\n      },\n      \"filter\": {\n        \"query\": {\n          \"match\": {\n            \"_all\": {\n              \"query\": \"construction document\",\n              \"type\": \"phrase_prefix\"\n            }\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nBoth queries produce the same results.  I don't know which of your queries is correct and which incorrect, if you get consistent results when running the queries multiples times (maybe you're seeing a different number of docs on different shards?), etc.\n\nAlso, 1.3.2 is really old and won't be seeing any further releases.  I'm going to close this ticket, but if you manage to recreate the problem on a newer version, please open a new issue with the recreation\n\nthanks\n","performed_via_github_app":null}]