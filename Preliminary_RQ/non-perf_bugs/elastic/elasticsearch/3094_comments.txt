[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18468310","html_url":"https://github.com/elastic/elasticsearch/issues/3094#issuecomment-18468310","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3094","id":18468310,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDY4MzEw","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-05-26T19:35:23Z","updated_at":"2013-05-26T19:35:23Z","author_association":"CONTRIBUTOR","body":"hey connie,  thanks for opening the issue! First of all I can't reproduce the problem on my mac but I will try a icetea JVM tomorrow. While doing this can I ask you to try to track down what exactly raises the issue ie. can you run the script without this part: \n\n```\nif(doc['targeting.keys'] == null || doc['targeting.keys'].values.length == 0)\n      return true;\n```\n\nthis should not be needed anyway since we return an `empty` instance anyway instead of `null` then go on and remove the body of the loop ie:\n\n```\nforeach (kv : doc['targeting.keys'].values) {\n\n}\nreturn true;\n```\n\njust to figure out where I need to look closer :) can you report this back to me? The exception is pretty odd since it usually only happens if something is entirely wrong ie. you try to access a protected field from a class in the same package but located in a different jar. Not sure what causes this here in this script but I can miss the illegal access so I'd love to hear back what you can find out.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18485436","html_url":"https://github.com/elastic/elasticsearch/issues/3094#issuecomment-18485436","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3094","id":18485436,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDg1NDM2","user":{"login":"connieyang","id":810950,"node_id":"MDQ6VXNlcjgxMDk1MA==","avatar_url":"https://avatars0.githubusercontent.com/u/810950?v=4","gravatar_id":"","url":"https://api.github.com/users/connieyang","html_url":"https://github.com/connieyang","followers_url":"https://api.github.com/users/connieyang/followers","following_url":"https://api.github.com/users/connieyang/following{/other_user}","gists_url":"https://api.github.com/users/connieyang/gists{/gist_id}","starred_url":"https://api.github.com/users/connieyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/connieyang/subscriptions","organizations_url":"https://api.github.com/users/connieyang/orgs","repos_url":"https://api.github.com/users/connieyang/repos","events_url":"https://api.github.com/users/connieyang/events{/privacy}","received_events_url":"https://api.github.com/users/connieyang/received_events","type":"User","site_admin":false},"created_at":"2013-05-27T07:13:36Z","updated_at":"2013-05-27T07:13:36Z","author_association":"NONE","body":"Sure.  We can give that a try.\n\nYou are right that this issue didn't exist on mac.  We didn't discover this issue until we rolled this feature to our QA environment where icetea JVM is used.\n\nCould this be a class loader issue?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18488124","html_url":"https://github.com/elastic/elasticsearch/issues/3094#issuecomment-18488124","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3094","id":18488124,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDg4MTI0","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-05-27T08:35:02Z","updated_at":"2013-05-27T08:35:02Z","author_association":"CONTRIBUTOR","body":"I ran this on 1.6 and 1.7 IceTea versions with no luck reproducing the issue. Is it possible that you have 2 ES jars in the classpath somehow?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18507871","html_url":"https://github.com/elastic/elasticsearch/issues/3094#issuecomment-18507871","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3094","id":18507871,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NTA3ODcx","user":{"login":"connieyang","id":810950,"node_id":"MDQ6VXNlcjgxMDk1MA==","avatar_url":"https://avatars0.githubusercontent.com/u/810950?v=4","gravatar_id":"","url":"https://api.github.com/users/connieyang","html_url":"https://github.com/connieyang","followers_url":"https://api.github.com/users/connieyang/followers","following_url":"https://api.github.com/users/connieyang/following{/other_user}","gists_url":"https://api.github.com/users/connieyang/gists{/gist_id}","starred_url":"https://api.github.com/users/connieyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/connieyang/subscriptions","organizations_url":"https://api.github.com/users/connieyang/orgs","repos_url":"https://api.github.com/users/connieyang/repos","events_url":"https://api.github.com/users/connieyang/events{/privacy}","received_events_url":"https://api.github.com/users/connieyang/received_events","type":"User","site_admin":false},"created_at":"2013-05-27T17:18:01Z","updated_at":"2013-05-27T18:02:01Z","author_association":"NONE","body":"I can double check, but our ES installation is based on the 0.90 release zip file + JSW + the Head plugin +the paramedics plugin.  We have not added or introduced any new libraries in the installation.\n\nJust want to double check, you ran the test with JIT enabled and MVEL in its compiled or accelerated mode, which should be the default,  right?  Also, this issue does not occur immediately, it takes a few queries for this to happen.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18704119","html_url":"https://github.com/elastic/elasticsearch/issues/3094#issuecomment-18704119","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3094","id":18704119,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NzA0MTE5","user":{"login":"saibaskaran","id":4491108,"node_id":"MDQ6VXNlcjQ0OTExMDg=","avatar_url":"https://avatars3.githubusercontent.com/u/4491108?v=4","gravatar_id":"","url":"https://api.github.com/users/saibaskaran","html_url":"https://github.com/saibaskaran","followers_url":"https://api.github.com/users/saibaskaran/followers","following_url":"https://api.github.com/users/saibaskaran/following{/other_user}","gists_url":"https://api.github.com/users/saibaskaran/gists{/gist_id}","starred_url":"https://api.github.com/users/saibaskaran/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saibaskaran/subscriptions","organizations_url":"https://api.github.com/users/saibaskaran/orgs","repos_url":"https://api.github.com/users/saibaskaran/repos","events_url":"https://api.github.com/users/saibaskaran/events{/privacy}","received_events_url":"https://api.github.com/users/saibaskaran/received_events","type":"User","site_admin":false},"created_at":"2013-05-30T19:57:27Z","updated_at":"2013-05-30T19:57:27Z","author_association":"NONE","body":"Hi,\n    I had the same issue and when I replaced .length with .size() it worked. I am not sure why. Please try that and let me know if it solves the issue. Thanks,\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18716046","html_url":"https://github.com/elastic/elasticsearch/issues/3094#issuecomment-18716046","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3094","id":18716046,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NzE2MDQ2","user":{"login":"connieyang","id":810950,"node_id":"MDQ6VXNlcjgxMDk1MA==","avatar_url":"https://avatars0.githubusercontent.com/u/810950?v=4","gravatar_id":"","url":"https://api.github.com/users/connieyang","html_url":"https://github.com/connieyang","followers_url":"https://api.github.com/users/connieyang/followers","following_url":"https://api.github.com/users/connieyang/following{/other_user}","gists_url":"https://api.github.com/users/connieyang/gists{/gist_id}","starred_url":"https://api.github.com/users/connieyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/connieyang/subscriptions","organizations_url":"https://api.github.com/users/connieyang/orgs","repos_url":"https://api.github.com/users/connieyang/repos","events_url":"https://api.github.com/users/connieyang/events{/privacy}","received_events_url":"https://api.github.com/users/connieyang/received_events","type":"User","site_admin":false},"created_at":"2013-05-30T23:58:26Z","updated_at":"2013-05-30T23:58:26Z","author_association":"NONE","body":"Hmm, the documentation seems to indicates that it's an array and hence we used .length.\n\nAs suggested in the earlier thread, we removed the null and empty check seems to address the problem.  However, I just want to point out that the above script works (aka no IllegelAccessError) during the first 10 minutes of our load and performance run (with 200 concurrent users running in 200 loops).  We started seeing the IllegalAccessError after that.  This seems to suggest a GIT related issue.\n\nThanks for your reply.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18728626","html_url":"https://github.com/elastic/elasticsearch/issues/3094#issuecomment-18728626","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3094","id":18728626,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NzI4NjI2","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-05-31T07:32:44Z","updated_at":"2013-05-31T07:32:44Z","author_association":"CONTRIBUTOR","body":"I guess this is due to the fact that length is a member variable of the returned iterable and not a method while size() is one. I think we should also add length() which can be addressed as values.length to help jit a bit here? this seems very odd though but I guess that is a mvel problem?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/23018843","html_url":"https://github.com/elastic/elasticsearch/issues/3094#issuecomment-23018843","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3094","id":23018843,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMDE4ODQz","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-08-21T13:59:36Z","updated_at":"2013-08-21T13:59:36Z","author_association":"CONTRIBUTOR","body":"moving out - seems like a JIT issue for some reason - can't really fix this\n","performed_via_github_app":null}]