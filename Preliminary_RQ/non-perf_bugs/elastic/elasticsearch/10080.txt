{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/10080","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10080/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10080/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10080/events","html_url":"https://github.com/elastic/elasticsearch/issues/10080","id":61117729,"node_id":"MDU6SXNzdWU2MTExNzcyOQ==","number":10080,"title":"Indices statistics reports -1 memory usage for percolator of index","user":{"login":"hydrogen18","id":130230,"node_id":"MDQ6VXNlcjEzMDIzMA==","avatar_url":"https://avatars3.githubusercontent.com/u/130230?v=4","gravatar_id":"","url":"https://api.github.com/users/hydrogen18","html_url":"https://github.com/hydrogen18","followers_url":"https://api.github.com/users/hydrogen18/followers","following_url":"https://api.github.com/users/hydrogen18/following{/other_user}","gists_url":"https://api.github.com/users/hydrogen18/gists{/gist_id}","starred_url":"https://api.github.com/users/hydrogen18/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hydrogen18/subscriptions","organizations_url":"https://api.github.com/users/hydrogen18/orgs","repos_url":"https://api.github.com/users/hydrogen18/repos","events_url":"https://api.github.com/users/hydrogen18/events{/privacy}","received_events_url":"https://api.github.com/users/hydrogen18/received_events","type":"User","site_admin":false},"labels":[{"id":156502592,"node_id":"MDU6TGFiZWwxNTY1MDI1OTI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Percolator","name":":Search/Percolator","color":"0e8a16","default":false,"description":"Reverse search: find queries that match a document"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2015-03-13T16:11:14Z","updated_at":"2015-04-26T14:28:28Z","closed_at":"2015-04-26T14:28:26Z","author_association":"NONE","active_lock_reason":null,"body":"I am trying to gauge how much memory is used by the percolator on an index. I noticed that the statistics report for each index a 'percolate' value. I am using the `elasticsearch-ruby` client to query the Elasticsearch cluster.\n\n```\n[18] pry(main)> client.indices.stats['indices']['posts_20150311084808']['total']['percolate']\n=> {\"total\"=>15,\n \"time_in_millis\"=>282,\n \"current\"=>0,\n \"memory_size_in_bytes\"=>-1,\n \"memory_size\"=>\"-1b\",\n \"queries\"=>15178}\n[19] pry(main)> client.indices.stats['indices']['posts_20150311084808']['primaries']['percolate']\n=> {\"total\"=>15,\n \"time_in_millis\"=>282,\n \"current\"=>0,\n \"memory_size_in_bytes\"=>-1,\n \"memory_size\"=>\"-1b\",\n \"queries\"=>15178}\n[20] pry(main)> \n```\n\nAs you can see I get back `-1`  as the size. I have ~15000 queries so I would expect this to be non-zero. Is this just not implemented, or does it have a special meaning?\n\nHere is what aptitude has to say about the Elasticsearch version I am running \n\n```\n aptitude show elasticsearch\nPackage: elasticsearch                   \nNew: yes\nState: installed\nAutomatically installed: no\nVersion: 1.4.2\nPriority: optional\nSection: web\nMaintainer: Elasticsearch Team <info@elasticsearch.com>\nArchitecture: all\nUncompressed Size: 30.2 M\nDepends: libc6, adduser\nDescription: Open Source, Distributed, RESTful Search Engine\n Elasticsearch is a distributed RESTful search engine built for the cloud. \n\n Features include: \n\n + Distributed and Highly Available Search Engine. \n * Each index is fully sharded with a configurable number of shards. \n * Each shard can have one or more replicas. \n * Read / Search operations performed on either one of the replica shard. \n + Multi Tenant with Multi Types. \n * Support for more than one index. \n * Support for more than one type per index. \n * Index level configuration (number of shards, index storage, ...). \n + Various set of APIs \n * HTTP RESTful API \n * Native Java API. \n * All APIs perform automatic node operation rerouting. \n + Document oriented \n * No need for upfront schema definition. \n * Schema can be defined per type for customization of the indexing process. \n + Reliable, Asynchronous Write Behind for long term persistency. + (Near) Real Time Search. + Built on top of Lucene \n * Each shard is a fully functional Lucene index \n * All the power of Lucene easily exposed through simple configuration/plugins. \n + Per operation consistency \n * Single document level operations are atomic, consistent, isolated and durable. \n + Open Source under the Apache License, version 2 (\"ALv2\").\nHomepage: http://www.elasticsearch.org/\n\n```\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}