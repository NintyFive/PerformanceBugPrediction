[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/280676383","html_url":"https://github.com/elastic/elasticsearch/issues/23188#issuecomment-280676383","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23188","id":280676383,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDY3NjM4Mw==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2017-02-17T15:14:31Z","updated_at":"2017-02-17T15:14:31Z","author_association":"MEMBER","body":"Queries can be provided as Strings using `WrapperQueryBuilder`. That only works for the query section of a search request though. If json search requests have to be sent, I would recommend to use the low-level REST client rather than the java api. The latter uses the binary transport layer to send the request over to the nodes, hence parsing doesn't happen, what is sent is the binary representation of the requests.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/424389266","html_url":"https://github.com/elastic/elasticsearch/issues/23188#issuecomment-424389266","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23188","id":424389266,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNDM4OTI2Ng==","user":{"login":"mongoDynamo","id":38298138,"node_id":"MDQ6VXNlcjM4Mjk4MTM4","avatar_url":"https://avatars1.githubusercontent.com/u/38298138?v=4","gravatar_id":"","url":"https://api.github.com/users/mongoDynamo","html_url":"https://github.com/mongoDynamo","followers_url":"https://api.github.com/users/mongoDynamo/followers","following_url":"https://api.github.com/users/mongoDynamo/following{/other_user}","gists_url":"https://api.github.com/users/mongoDynamo/gists{/gist_id}","starred_url":"https://api.github.com/users/mongoDynamo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mongoDynamo/subscriptions","organizations_url":"https://api.github.com/users/mongoDynamo/orgs","repos_url":"https://api.github.com/users/mongoDynamo/repos","events_url":"https://api.github.com/users/mongoDynamo/events{/privacy}","received_events_url":"https://api.github.com/users/mongoDynamo/received_events","type":"User","site_admin":false},"created_at":"2018-09-25T15:25:50Z","updated_at":"2018-09-25T15:32:09Z","author_association":"NONE","body":"> Queries can be provided as Strings using `WrapperQueryBuilder`. That only works for the query section of a search request though. If json search requests have to be sent, I would recommend to use the low-level REST client rather than the java api. The latter uses the binary transport layer to send the request over to the nodes, hence parsing doesn't happen, what is sent is the binary representation of the requests.\r\n\r\n@javanna Can you still provide a plain JSON string query? The WrapperQueryBuilder converts the queryString to base64 encoded, which isn't working for me, since the request being sent isn't handling that base64 string, any way to send the query without encoding it?\r\n\r\nFor example : \r\n\r\n\"query\" : {\r\n    \"wrapper\" : {\r\n      \"query\" : \"Im1hdGNoIiA6IHsicGVyc29uX3NraWxscyIgOiAiamF2YSJ9\" (Dont want this encoded)\r\n    }\r\n  },\r\n\r\nI know it may seem odd to want a plain string query, but the Java API is restrictive compared to the plain JSOn query. \r\n\r\nFor sample this match query : \"match\" : {\r\n\t\t\t\"field\" : \"info\"\r\n\t\t}\r\n\r\nWill substring match and get desired responses, such as 'info', 'more info', 'some info'\r\n\r\nBut the Java API doesn't work the same way, if I wanted to do this query I would need to use the wild card query or regexp query, which I'm assuming has worse performance than the above query; not sure there's 0 info detailing the differences between the JSON match queries and Java queries.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/535396942","html_url":"https://github.com/elastic/elasticsearch/issues/23188#issuecomment-535396942","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23188","id":535396942,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNTM5Njk0Mg==","user":{"login":"zhouhuakang","id":8558081,"node_id":"MDQ6VXNlcjg1NTgwODE=","avatar_url":"https://avatars1.githubusercontent.com/u/8558081?v=4","gravatar_id":"","url":"https://api.github.com/users/zhouhuakang","html_url":"https://github.com/zhouhuakang","followers_url":"https://api.github.com/users/zhouhuakang/followers","following_url":"https://api.github.com/users/zhouhuakang/following{/other_user}","gists_url":"https://api.github.com/users/zhouhuakang/gists{/gist_id}","starred_url":"https://api.github.com/users/zhouhuakang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhouhuakang/subscriptions","organizations_url":"https://api.github.com/users/zhouhuakang/orgs","repos_url":"https://api.github.com/users/zhouhuakang/repos","events_url":"https://api.github.com/users/zhouhuakang/events{/privacy}","received_events_url":"https://api.github.com/users/zhouhuakang/received_events","type":"User","site_admin":false},"created_at":"2019-09-26T08:24:11Z","updated_at":"2019-09-26T08:24:11Z","author_association":"NONE","body":"I also need to send the raw json query string to es.how?low level rest client? @mongoDynamo","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/535528953","html_url":"https://github.com/elastic/elasticsearch/issues/23188#issuecomment-535528953","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23188","id":535528953,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNTUyODk1Mw==","user":{"login":"mongoDynamo","id":38298138,"node_id":"MDQ6VXNlcjM4Mjk4MTM4","avatar_url":"https://avatars1.githubusercontent.com/u/38298138?v=4","gravatar_id":"","url":"https://api.github.com/users/mongoDynamo","html_url":"https://github.com/mongoDynamo","followers_url":"https://api.github.com/users/mongoDynamo/followers","following_url":"https://api.github.com/users/mongoDynamo/following{/other_user}","gists_url":"https://api.github.com/users/mongoDynamo/gists{/gist_id}","starred_url":"https://api.github.com/users/mongoDynamo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mongoDynamo/subscriptions","organizations_url":"https://api.github.com/users/mongoDynamo/orgs","repos_url":"https://api.github.com/users/mongoDynamo/repos","events_url":"https://api.github.com/users/mongoDynamo/events{/privacy}","received_events_url":"https://api.github.com/users/mongoDynamo/received_events","type":"User","site_admin":false},"created_at":"2019-09-26T14:27:17Z","updated_at":"2019-09-26T14:27:17Z","author_association":"NONE","body":"@zhouhuakang You can convert the high level client to low level like this : https://pastebin.com/9d9kGVeE\r\n\r\nThen if you still want to use the functionality of the highlevel client, you can convert the low level response to a SearchResponse (used by high level client) : https://pastebin.com/Lkvz8ELh\r\n\r\nI gave up on this approach though as its hard to see what the performance implications are, also its annoying doing a work around for something that used to be supported. \r\n\r\nSince ES doesn't support this, I would recommend maybe using this as a learning or testing item, but not sure if it would be good as permanent implementation. ","performed_via_github_app":null}]