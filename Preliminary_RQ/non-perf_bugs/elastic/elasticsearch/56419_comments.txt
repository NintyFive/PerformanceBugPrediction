[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/625809297","html_url":"https://github.com/elastic/elasticsearch/issues/56419#issuecomment-625809297","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56419","id":625809297,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNTgwOTI5Nw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-05-08T13:13:18Z","updated_at":"2020-05-08T13:13:18Z","author_association":"COLLABORATOR","body":"Pinging @elastic/ml-core (:ml)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/631985333","html_url":"https://github.com/elastic/elasticsearch/issues/56419#issuecomment-631985333","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56419","id":631985333,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMTk4NTMzMw==","user":{"login":"sophiec20","id":4185750,"node_id":"MDQ6VXNlcjQxODU3NTA=","avatar_url":"https://avatars2.githubusercontent.com/u/4185750?v=4","gravatar_id":"","url":"https://api.github.com/users/sophiec20","html_url":"https://github.com/sophiec20","followers_url":"https://api.github.com/users/sophiec20/followers","following_url":"https://api.github.com/users/sophiec20/following{/other_user}","gists_url":"https://api.github.com/users/sophiec20/gists{/gist_id}","starred_url":"https://api.github.com/users/sophiec20/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sophiec20/subscriptions","organizations_url":"https://api.github.com/users/sophiec20/orgs","repos_url":"https://api.github.com/users/sophiec20/repos","events_url":"https://api.github.com/users/sophiec20/events{/privacy}","received_events_url":"https://api.github.com/users/sophiec20/received_events","type":"User","site_admin":false},"created_at":"2020-05-21T09:29:47Z","updated_at":"2020-05-21T09:29:47Z","author_association":"NONE","body":"Please confirm if this mitigation is correct. Error seen when attempting to delete forecast job indicates it `needs to be either FAILED or FINISHED to be deleted`.\r\n\r\nProvided there are no hanging processes or threads, the impact is forecast docs in the results index, which is undesirable especially for large forecasts. \r\n\r\nAgree that force closing the anomaly detection job should also ensure forecast jobs are cleaned up. Suggest we also have a force delete for forecasts for consistency.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/632059737","html_url":"https://github.com/elastic/elasticsearch/issues/56419#issuecomment-632059737","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56419","id":632059737,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMjA1OTczNw==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2020-05-21T12:31:16Z","updated_at":"2020-05-21T12:31:16Z","author_association":"CONTRIBUTOR","body":"> When a ml job is force closed the native process gets terminated without waiting for unfinished forecasts\r\n\r\nThe same thing also happens when a node running a forecast leaves the cluster for any reason.  (Power failure, bug, planned upgrade - any reason.)\r\n\r\nWe should probably check for and clean up forecast statuses in the persistent task assignment.  When a job is getting assigned to a new node we know that any forecasts that were in progress on the old node have failed.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/634558842","html_url":"https://github.com/elastic/elasticsearch/issues/56419#issuecomment-634558842","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56419","id":634558842,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNDU1ODg0Mg==","user":{"login":"dimitris-athanasiou","id":9351617,"node_id":"MDQ6VXNlcjkzNTE2MTc=","avatar_url":"https://avatars3.githubusercontent.com/u/9351617?v=4","gravatar_id":"","url":"https://api.github.com/users/dimitris-athanasiou","html_url":"https://github.com/dimitris-athanasiou","followers_url":"https://api.github.com/users/dimitris-athanasiou/followers","following_url":"https://api.github.com/users/dimitris-athanasiou/following{/other_user}","gists_url":"https://api.github.com/users/dimitris-athanasiou/gists{/gist_id}","starred_url":"https://api.github.com/users/dimitris-athanasiou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dimitris-athanasiou/subscriptions","organizations_url":"https://api.github.com/users/dimitris-athanasiou/orgs","repos_url":"https://api.github.com/users/dimitris-athanasiou/repos","events_url":"https://api.github.com/users/dimitris-athanasiou/events{/privacy}","received_events_url":"https://api.github.com/users/dimitris-athanasiou/received_events","type":"User","site_admin":false},"created_at":"2020-05-27T10:01:10Z","updated_at":"2020-05-27T10:01:10Z","author_association":"CONTRIBUTOR","body":"While #57152 allows for such incomplete forecasts to be deleted, should we still mark such forecasts as failed on force-close/task allocation?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/634560336","html_url":"https://github.com/elastic/elasticsearch/issues/56419#issuecomment-634560336","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56419","id":634560336,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNDU2MDMzNg==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2020-05-27T10:04:15Z","updated_at":"2020-05-27T10:04:27Z","author_association":"CONTRIBUTOR","body":"> should we still mark such forecasts as failed on force-close/task allocation?\r\n\r\nI think we should.  #57143 is supposed to do that (although I haven't reviewed it).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/635144414","html_url":"https://github.com/elastic/elasticsearch/issues/56419#issuecomment-635144414","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56419","id":635144414,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNTE0NDQxNA==","user":{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false},"created_at":"2020-05-28T06:52:38Z","updated_at":"2020-05-28T06:52:38Z","author_association":"CONTRIBUTOR","body":"Good point about not being able to delete forecasts using the UI for this case. I updated the mitigation with a DBQ.","performed_via_github_app":null}]