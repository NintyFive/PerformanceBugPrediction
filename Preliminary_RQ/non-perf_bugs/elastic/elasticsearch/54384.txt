{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/54384","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54384/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54384/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54384/events","html_url":"https://github.com/elastic/elasticsearch/issues/54384","id":589801986,"node_id":"MDU6SXNzdWU1ODk4MDE5ODY=","number":54384,"title":"[BUG] Problem to set path.logs on elasticsearch docker image","user":{"login":"georgesouzafarias","id":4741919,"node_id":"MDQ6VXNlcjQ3NDE5MTk=","avatar_url":"https://avatars1.githubusercontent.com/u/4741919?v=4","gravatar_id":"","url":"https://api.github.com/users/georgesouzafarias","html_url":"https://github.com/georgesouzafarias","followers_url":"https://api.github.com/users/georgesouzafarias/followers","following_url":"https://api.github.com/users/georgesouzafarias/following{/other_user}","gists_url":"https://api.github.com/users/georgesouzafarias/gists{/gist_id}","starred_url":"https://api.github.com/users/georgesouzafarias/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/georgesouzafarias/subscriptions","organizations_url":"https://api.github.com/users/georgesouzafarias/orgs","repos_url":"https://api.github.com/users/georgesouzafarias/repos","events_url":"https://api.github.com/users/georgesouzafarias/events{/privacy}","received_events_url":"https://api.github.com/users/georgesouzafarias/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-03-29T14:15:57Z","updated_at":"2020-04-02T11:42:24Z","closed_at":"2020-04-02T11:41:54Z","author_association":"NONE","active_lock_reason":null,"body":"<!-- Bug report -->\r\n\r\n**Elasticsearch version** : 7.6.1\r\n\r\n**JVM version** : openjdk version \"13.0.2\" 2020-01-14\r\n\r\n**OS version** : Linux master1 3.10.0-1062.18.1.el7.x86_64 #1 SMP Wed Mar 18 11:05:28 PDT 2020 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n**Description**:\r\n\r\nGreetings,\r\n\r\nI am building an elasticsearch cluster with 3 masters, each host running imagem elasticsearch:7.6.1 on docker standalone.\r\n\r\nEverything looks good, but I am having a problem when I try to set up path.logs. I would like to bind the elasticsearch logs of the container to dir /var/log/elasticsearch of the host, my idea with that, is collecting this logs with filebeat and/or debug in the future.\r\n\r\nI have tried all kind of configuration and the elasticsearch does not generate any log, the only one is gc.log configured in log4j2.properties.\r\n\r\nThanks in advance.\r\n\r\n**_cat/nodes**\r\n\r\n```\r\n192.168.0.14 13 97  2 0.13 0.49 0.49 dim - Master2\r\n192.168.0.13 20 96 10 0.95 0.99 0.79 dim * Master1\r\n192.168.0.15 21 96  1 0.30 0.27 0.28 dim - Master3\r\n```\r\n\r\n**docker info**\r\n\r\n```\r\nClient:\r\n Debug Mode: false\r\n\r\nServer:\r\n Containers: 3\r\n  Running: 1\r\n  Paused: 0\r\n  Stopped: 2\r\n Images: 5\r\n Server Version: 19.03.1-ol\r\n Storage Driver: overlay2\r\n  Backing Filesystem: xfs\r\n  Supports d_type: true\r\n  Native Overlay Diff: true\r\n Logging Driver: json-file\r\n Cgroup Driver: cgroupfs\r\n Plugins:\r\n  Volume: local\r\n  Network: bridge host ipvlan macvlan null overlay\r\n  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog\r\n Swarm: inactive\r\n Runtimes: runc\r\n Default Runtime: runc\r\n Init Binary: docker-init\r\n containerd version: c4446665cb9c30056f4998ed953e6d4ff22c7c39\r\n runc version: 4bb1fe4ace1a32d3676bb98f5d3b6a4e32bf6c58\r\n init version: fec3683\r\n Security Options:\r\n  seccomp\r\n   Profile: default\r\n Kernel Version: 3.10.0-1062.18.1.el7.x86_64\r\n Operating System: Oracle Linux Server 7.7\r\n OSType: linux\r\n Architecture: x86_64\r\n CPUs: 8\r\n Total Memory: 10.858GiB\r\n Name: master1\r\n ID: GXGT:VR57:DQ2K:BPIB:ZGUG:TDPH:JIUE:VGFK:NSTD:MV4V:454R:YKVR\r\n Docker Root Dir: /var/lib/docker\r\n Debug Mode: false\r\n Registry: https://index.docker.io/v1/\r\n Labels:\r\n Experimental: false\r\n Insecure Registries:\r\n  127.0.0.0/8\r\n Live Restore Enabled: false\r\n\r\nRegistries:\r\n```\r\n\r\n**Systemd Daemon**\r\n\r\n**/etc/systemd/system/elasticsearch.service**\r\n\r\n```\r\n[Unit]\r\nDescription=elasticsearch Container\r\nAfter=docker.service\r\nRequires=docker.service\r\n\r\n[Service]\r\nTimeoutStartSec=0\r\nRestart=always\r\nExecStartPre=-/usr/bin/docker stop elasticsearch\r\nExecStartPre=-/usr/bin/docker rm elasticsearch\r\nExecStartPre=/usr/bin/docker pull elasticsearch:7.6.1\r\nExecStart= /usr/bin/docker run --rm --name elasticsearch --ulimit memlock=-1:-1 --label co.elastic.logs/module=elasticsearch \\\r\n--network host --env-file /etc/elasticsearch/elasticsearch.env -v /etc/elasticsearch/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml \\\r\n-v /data:/usr/share/elasticsearch/data -v /var/log/elasticsearch/:/usr/share/elasticsearch/logs elasticsearch:7.6.1\r\n\r\n[Install]\r\nWantedBy=multi-user.target\r\n```\r\n\r\n**/etc/elasticsearch/elasticsearch.env**\r\n\r\n``` ES_JAVA_OPTS=-Xms1975m -Xmx1975m ```\r\n\r\n**/etc/elasticsearch/elasticsearch.yml**\r\n\r\n```\r\ncluster.name: my_cluster\r\n\r\n# ------------------------------------ Node ------------------------------------\r\nnode.name: Master1\r\n\r\n#Server Roles\r\nnode.master: true\r\nnode.ml: false\r\nnode.data: false\r\n\r\n# ----------------------------------- Paths ------------------------------------\r\n\r\npath:\r\n  logs: /usr/share/elasticsearch/logs\r\n  data: /usr/share/elasticsearch/data\r\n\r\n# ----------------------------------- Network ------------------------------------\r\n\r\n# Set the bind address to a specific IP (IPv4 or IPv6):\r\nnetwork.host: {IP}\r\nhttp.host: {IP}\r\nhttp.publish_host: {IP}\r\nhttp.port: 9200\r\n\r\n# --------------------------------- Discovery ----------------------------------\r\n\r\ndiscovery.seed_hosts: [master1, master2, master3]\r\ncluster.initial_master_nodes: [master1, master2, master3]\r\ndiscovery.zen.minimum_master_nodes: 1\r\n\r\n# --------------------------------- Security ----------------------------------\r\nxpack.security.enabled: false\r\nxpack.security.transport.ssl.enabled: false\r\n\r\n```\r\n\r\n**ls -l /var/log/elasticsearch/**\r\n\r\n```\r\n-rw-rw-r--. 1 1000 0   6493 Mar 29 00:16 gc.log\r\n-rw-rw-r--. 1 1000 0   1471 Mar 29 00:16 gc.log.00\r\n-rw-rw-r--. 1 1000 0   6137 Mar 29 00:16 gc.log.01\r\n```","closed_by":{"login":"matriv","id":5058131,"node_id":"MDQ6VXNlcjUwNTgxMzE=","avatar_url":"https://avatars1.githubusercontent.com/u/5058131?v=4","gravatar_id":"","url":"https://api.github.com/users/matriv","html_url":"https://github.com/matriv","followers_url":"https://api.github.com/users/matriv/followers","following_url":"https://api.github.com/users/matriv/following{/other_user}","gists_url":"https://api.github.com/users/matriv/gists{/gist_id}","starred_url":"https://api.github.com/users/matriv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matriv/subscriptions","organizations_url":"https://api.github.com/users/matriv/orgs","repos_url":"https://api.github.com/users/matriv/repos","events_url":"https://api.github.com/users/matriv/events{/privacy}","received_events_url":"https://api.github.com/users/matriv/received_events","type":"User","site_admin":false},"performed_via_github_app":null}