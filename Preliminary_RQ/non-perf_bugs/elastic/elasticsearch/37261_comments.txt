[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/452667326","html_url":"https://github.com/elastic/elasticsearch/issues/37261#issuecomment-452667326","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37261","id":452667326,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjY2NzMyNg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-01-09T11:40:13Z","updated_at":"2019-01-09T11:40:13Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/452667731","html_url":"https://github.com/elastic/elasticsearch/issues/37261#issuecomment-452667731","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37261","id":452667731,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjY2NzczMQ==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-01-09T11:41:49Z","updated_at":"2019-01-09T11:47:19Z","author_association":"CONTRIBUTOR","body":"Test muted in 7ff846ffb24 ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/452690496","html_url":"https://github.com/elastic/elasticsearch/issues/37261#issuecomment-452690496","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37261","id":452690496,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjY5MDQ5Ng==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-01-09T13:08:58Z","updated_at":"2019-01-09T13:08:58Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/452705746","html_url":"https://github.com/elastic/elasticsearch/issues/37261#issuecomment-452705746","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37261","id":452705746,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjcwNTc0Ng==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-01-09T14:00:01Z","updated_at":"2019-01-09T14:00:01Z","author_association":"CONTRIBUTOR","body":"another occurrence: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+intake/1131/console","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/452840700","html_url":"https://github.com/elastic/elasticsearch/issues/37261#issuecomment-452840700","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37261","id":452840700,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1Mjg0MDcwMA==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2019-01-09T20:13:18Z","updated_at":"2019-01-09T20:13:18Z","author_association":"MEMBER","body":"This is really tricky. It looks like these runs are all freakishly slow. \r\nThey fail after ~ 30s in all the cases posted here and other tests in the logs either fail as well or are extremely slow too (Coordinator tests take ~15s on my local box but took 70s+ in these runs for example).\r\nThe fact that we even get to ~30s in this test is interesting (takes ~3s on my local box with the seed here) because it means we are waiting for multiple seconds on this [busy assert](https://github.com/elastic/elasticsearch/blob/master/server/src/test/java/org/elasticsearch/index/shard/RefreshListenersTests.java#L284) overall.\r\nMaybe the fact that we're running 8 JVMs on 16 cores is coming around to bite us here? This test, for example, is running 1 completely hot thread + the main test thread that's pretty hot too. Given that we're also running only 512MB heap for the JVMs in these tests it seems possible that with GC in the mix we could get some pretty long blocks, doesn't it? ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/453137172","html_url":"https://github.com/elastic/elasticsearch/issues/37261#issuecomment-453137172","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37261","id":453137172,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzEzNzE3Mg==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2019-01-10T15:31:20Z","updated_at":"2019-01-10T15:31:20Z","author_association":"MEMBER","body":"=> In light of the above, I'd vote to close this issue.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/453404773","html_url":"https://github.com/elastic/elasticsearch/issues/37261#issuecomment-453404773","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37261","id":453404773,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzQwNDc3Mw==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-01-11T07:17:17Z","updated_at":"2019-01-11T07:17:17Z","author_association":"CONTRIBUTOR","body":"The change to run more JVMs for the tests went in at least one moth before this started to fail,  and it does so on a range of different type of workers. \r\nWe had 7 failures on the 7th , then one on 19th and 20th in December, and now in January 9 on th 8th and 20 on the 9th when I muted the test ( I muted the test on that day).  \r\n\r\nI tried to reproduce it locally by generating artificial load of different types with `stress` and was still unable to do so.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/453408857","html_url":"https://github.com/elastic/elasticsearch/issues/37261#issuecomment-453408857","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37261","id":453408857,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzQwODg1Nw==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2019-01-11T07:31:31Z","updated_at":"2019-01-11T07:31:31Z","author_association":"MEMBER","body":"@atorok yea it's probably not the parallelism in isolation. The thing is, the fact that this test in particular randomly failed on one day makes me suspicious of the infra because it's using a lot of CPU + GC (from the Lucene writer that is called in a hot loop) + it's pretty vulnerable to GC pauses as well.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/453444830","html_url":"https://github.com/elastic/elasticsearch/issues/37261#issuecomment-453444830","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37261","id":453444830,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzQ0NDgzMA==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2019-01-11T09:16:48Z","updated_at":"2019-01-11T09:16:48Z","author_association":"CONTRIBUTOR","body":"I've pushed 3a929c7aeac to see if that fixes the issue.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/454019211","html_url":"https://github.com/elastic/elasticsearch/issues/37261#issuecomment-454019211","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37261","id":454019211,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDAxOTIxMQ==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2019-01-14T14:16:48Z","updated_at":"2019-01-14T14:16:48Z","author_association":"CONTRIBUTOR","body":"Looks like there were no more failures. Backporting the fix and closing this.","performed_via_github_app":null}]