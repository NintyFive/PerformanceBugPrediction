[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/153917135","html_url":"https://github.com/elastic/elasticsearch/issues/14453#issuecomment-153917135","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14453","id":153917135,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MzkxNzEzNQ==","user":{"login":"joshuar","id":7401,"node_id":"MDQ6VXNlcjc0MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/7401?v=4","gravatar_id":"","url":"https://api.github.com/users/joshuar","html_url":"https://github.com/joshuar","followers_url":"https://api.github.com/users/joshuar/followers","following_url":"https://api.github.com/users/joshuar/following{/other_user}","gists_url":"https://api.github.com/users/joshuar/gists{/gist_id}","starred_url":"https://api.github.com/users/joshuar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshuar/subscriptions","organizations_url":"https://api.github.com/users/joshuar/orgs","repos_url":"https://api.github.com/users/joshuar/repos","events_url":"https://api.github.com/users/joshuar/events{/privacy}","received_events_url":"https://api.github.com/users/joshuar/received_events","type":"User","site_admin":false},"created_at":"2015-11-05T00:44:23Z","updated_at":"2015-11-05T00:44:23Z","author_association":"MEMBER","body":"The value of HOME used when creating the elasticsearch user should probably be set to something other than /home/elasticsearch that exists and has executable permissions for the elasticsearch user.\n\nIn the interim, you can just set HOME to something else, like `HOME=/` to get your cron jobs running again.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/153930961","html_url":"https://github.com/elastic/elasticsearch/issues/14453#issuecomment-153930961","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14453","id":153930961,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MzkzMDk2MQ==","user":{"login":"packplusplus","id":1477148,"node_id":"MDQ6VXNlcjE0NzcxNDg=","avatar_url":"https://avatars2.githubusercontent.com/u/1477148?v=4","gravatar_id":"","url":"https://api.github.com/users/packplusplus","html_url":"https://github.com/packplusplus","followers_url":"https://api.github.com/users/packplusplus/followers","following_url":"https://api.github.com/users/packplusplus/following{/other_user}","gists_url":"https://api.github.com/users/packplusplus/gists{/gist_id}","starred_url":"https://api.github.com/users/packplusplus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/packplusplus/subscriptions","organizations_url":"https://api.github.com/users/packplusplus/orgs","repos_url":"https://api.github.com/users/packplusplus/repos","events_url":"https://api.github.com/users/packplusplus/events{/privacy}","received_events_url":"https://api.github.com/users/packplusplus/received_events","type":"User","site_admin":false},"created_at":"2015-11-05T02:12:30Z","updated_at":"2015-11-05T02:12:30Z","author_association":"NONE","body":"I just have the puppet role create /home/elasticseach. Its a packaging bug, creating a user with the wrong home directory set. Either create the home directory, or like you said,  set home to /var/lib/elasticsearch or whatever.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154885442","html_url":"https://github.com/elastic/elasticsearch/issues/14453#issuecomment-154885442","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14453","id":154885442,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDg4NTQ0Mg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-11-08T23:10:08Z","updated_at":"2015-11-08T23:10:08Z","author_association":"CONTRIBUTOR","body":"On 2.0 it doesn't look like we're setting the home directory, no? https://github.com/elastic/elasticsearch/blob/2.0/distribution/src/main/packaging/scripts/preinst#L67\n\nIs this user not a hangover from a previous installation?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154885751","html_url":"https://github.com/elastic/elasticsearch/issues/14453#issuecomment-154885751","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14453","id":154885751,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDg4NTc1MQ==","user":{"login":"joshuar","id":7401,"node_id":"MDQ6VXNlcjc0MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/7401?v=4","gravatar_id":"","url":"https://api.github.com/users/joshuar","html_url":"https://github.com/joshuar","followers_url":"https://api.github.com/users/joshuar/followers","following_url":"https://api.github.com/users/joshuar/following{/other_user}","gists_url":"https://api.github.com/users/joshuar/gists{/gist_id}","starred_url":"https://api.github.com/users/joshuar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshuar/subscriptions","organizations_url":"https://api.github.com/users/joshuar/orgs","repos_url":"https://api.github.com/users/joshuar/repos","events_url":"https://api.github.com/users/joshuar/events{/privacy}","received_events_url":"https://api.github.com/users/joshuar/received_events","type":"User","site_admin":false},"created_at":"2015-11-08T23:15:34Z","updated_at":"2015-11-08T23:15:34Z","author_association":"MEMBER","body":"If we don't set the home directory, I think it defaults to whatever the base home directory is in /etc/default/useradd plus the username.  So usually this ends up being `/home/username`, even for system users.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/155516996","html_url":"https://github.com/elastic/elasticsearch/issues/14453#issuecomment-155516996","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14453","id":155516996,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NTUxNjk5Ng==","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"created_at":"2015-11-10T18:08:29Z","updated_at":"2015-11-10T18:08:29Z","author_association":"MEMBER","body":"@clintongormley I don't think that the file has changed since 1.6 at least https://github.com/elastic/elasticsearch/blob/1.6/src/packaging/common/scripts/preinst#L67\n\nBefore that, it was using the specific scripts: https://github.com/elastic/elasticsearch/blob/1.4/src/rpm/scripts/preinstall\n\n---\n\nI went ahead and installed ES 1.4.3, 1.7.3, and ES 2.0.0 (in reverse order) onto a CentOS 7 VM via `yum`. None of them created a `/home/elasticsearch` entry. I cannot find where we may have created it at some point. Perhaps we never did?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/155578266","html_url":"https://github.com/elastic/elasticsearch/issues/14453#issuecomment-155578266","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14453","id":155578266,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NTU3ODI2Ng==","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2015-11-10T21:52:33Z","updated_at":"2015-11-10T21:52:33Z","author_association":"MEMBER","body":"> @clintongormley I don't think that the file has changed since 1.6 at least https://github.com/elastic/elasticsearch/blob/1.6/src/packaging/common/scripts/preinst#L67\n\nIn ES 1.6 an effort has been made to unify the behaviour of package & install scripts among the different Linux distributions and I think the change has been made at this time. Elasticsearch does not need any home directory to work so it is not created by the scripts. \n\nDepending of the distribution, `su -` does a bunch of things and among them it tries to change directory to user's home which does not exist... You're not forced to `su -` in order to run a cron job.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/155591394","html_url":"https://github.com/elastic/elasticsearch/issues/14453#issuecomment-155591394","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14453","id":155591394,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NTU5MTM5NA==","user":{"login":"packplusplus","id":1477148,"node_id":"MDQ6VXNlcjE0NzcxNDg=","avatar_url":"https://avatars2.githubusercontent.com/u/1477148?v=4","gravatar_id":"","url":"https://api.github.com/users/packplusplus","html_url":"https://github.com/packplusplus","followers_url":"https://api.github.com/users/packplusplus/followers","following_url":"https://api.github.com/users/packplusplus/following{/other_user}","gists_url":"https://api.github.com/users/packplusplus/gists{/gist_id}","starred_url":"https://api.github.com/users/packplusplus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/packplusplus/subscriptions","organizations_url":"https://api.github.com/users/packplusplus/orgs","repos_url":"https://api.github.com/users/packplusplus/repos","events_url":"https://api.github.com/users/packplusplus/events{/privacy}","received_events_url":"https://api.github.com/users/packplusplus/received_events","type":"User","site_admin":false},"created_at":"2015-11-10T22:43:03Z","updated_at":"2015-11-10T22:43:03Z","author_association":"NONE","body":"I don't know what the original version of ES was installed on that cluster, but somewhere along the line /home/elasticsearch was created. It was a cron job failing on a redeploy that kicked out the message. \n\nIf it's not expected to create it, then I guess it's not a bug. If I look at most other \"system type\" users in RHEL/CentOS they normally set the homedir to / in the passwd file, or in the case of some services that store a lot of data, their var dir. Debian seems to just create a /home/USER dir for non data storing services. \n\nTLDR; Seems weird to create a user with a home directory that doesn't exist. I'd vote either create the dir (to be consistent with debian), or point it to / to be consistent RHEL. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/230950325","html_url":"https://github.com/elastic/elasticsearch/issues/14453#issuecomment-230950325","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14453","id":230950325,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMDk1MDMyNQ==","user":{"login":"twigbranch","id":476769,"node_id":"MDQ6VXNlcjQ3Njc2OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/476769?v=4","gravatar_id":"","url":"https://api.github.com/users/twigbranch","html_url":"https://github.com/twigbranch","followers_url":"https://api.github.com/users/twigbranch/followers","following_url":"https://api.github.com/users/twigbranch/following{/other_user}","gists_url":"https://api.github.com/users/twigbranch/gists{/gist_id}","starred_url":"https://api.github.com/users/twigbranch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/twigbranch/subscriptions","organizations_url":"https://api.github.com/users/twigbranch/orgs","repos_url":"https://api.github.com/users/twigbranch/repos","events_url":"https://api.github.com/users/twigbranch/events{/privacy}","received_events_url":"https://api.github.com/users/twigbranch/received_events","type":"User","site_admin":false},"created_at":"2016-07-07T00:54:25Z","updated_at":"2016-07-07T00:54:25Z","author_association":"NONE","body":"/home/elasticsearch is also useful to house .java.policy files as discussed here: https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-scripting-security.html#_customising_the_classloader_whitelist\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/248574265","html_url":"https://github.com/elastic/elasticsearch/issues/14453#issuecomment-248574265","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14453","id":248574265,"node_id":"MDEyOklzc3VlQ29tbWVudDI0ODU3NDI2NQ==","user":{"login":"JakeFromTheDark","id":11073197,"node_id":"MDQ6VXNlcjExMDczMTk3","avatar_url":"https://avatars1.githubusercontent.com/u/11073197?v=4","gravatar_id":"","url":"https://api.github.com/users/JakeFromTheDark","html_url":"https://github.com/JakeFromTheDark","followers_url":"https://api.github.com/users/JakeFromTheDark/followers","following_url":"https://api.github.com/users/JakeFromTheDark/following{/other_user}","gists_url":"https://api.github.com/users/JakeFromTheDark/gists{/gist_id}","starred_url":"https://api.github.com/users/JakeFromTheDark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JakeFromTheDark/subscriptions","organizations_url":"https://api.github.com/users/JakeFromTheDark/orgs","repos_url":"https://api.github.com/users/JakeFromTheDark/repos","events_url":"https://api.github.com/users/JakeFromTheDark/events{/privacy}","received_events_url":"https://api.github.com/users/JakeFromTheDark/received_events","type":"User","site_admin":false},"created_at":"2016-09-21T10:38:19Z","updated_at":"2016-09-21T10:38:29Z","author_association":"NONE","body":"Just extend the `useradd` command by `-d /usr/share/elasticsearch`, please.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/256576280","html_url":"https://github.com/elastic/elasticsearch/issues/14453#issuecomment-256576280","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14453","id":256576280,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjU3NjI4MA==","user":{"login":"pawelan","id":20192455,"node_id":"MDQ6VXNlcjIwMTkyNDU1","avatar_url":"https://avatars3.githubusercontent.com/u/20192455?v=4","gravatar_id":"","url":"https://api.github.com/users/pawelan","html_url":"https://github.com/pawelan","followers_url":"https://api.github.com/users/pawelan/followers","following_url":"https://api.github.com/users/pawelan/following{/other_user}","gists_url":"https://api.github.com/users/pawelan/gists{/gist_id}","starred_url":"https://api.github.com/users/pawelan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pawelan/subscriptions","organizations_url":"https://api.github.com/users/pawelan/orgs","repos_url":"https://api.github.com/users/pawelan/repos","events_url":"https://api.github.com/users/pawelan/events{/privacy}","received_events_url":"https://api.github.com/users/pawelan/received_events","type":"User","site_admin":false},"created_at":"2016-10-27T08:12:08Z","updated_at":"2016-10-27T08:12:08Z","author_association":"NONE","body":"Guys are you planning first anniversary celebration because it is almost 1 year old!?\nI have checked latest version 5.0.0 rpm and it is still making mess in user configuration.\nIs this one liner fix so time consuming?\n\nThe bug #20599 which was closed as duplicate was actually better titled because the problem is not that home directory is not being created but because the correct one is undefined during user creation in rpm. JakeFromTheDark solution is correct. The other is similar but with /var/lib/elasticsearch set as home dir.\n\nPretty please with a sugar on top fix it :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/399941011","html_url":"https://github.com/elastic/elasticsearch/issues/14453#issuecomment-399941011","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14453","id":399941011,"node_id":"MDEyOklzc3VlQ29tbWVudDM5OTk0MTAxMQ==","user":{"login":"prupert","id":171170,"node_id":"MDQ6VXNlcjE3MTE3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/171170?v=4","gravatar_id":"","url":"https://api.github.com/users/prupert","html_url":"https://github.com/prupert","followers_url":"https://api.github.com/users/prupert/followers","following_url":"https://api.github.com/users/prupert/following{/other_user}","gists_url":"https://api.github.com/users/prupert/gists{/gist_id}","starred_url":"https://api.github.com/users/prupert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prupert/subscriptions","organizations_url":"https://api.github.com/users/prupert/orgs","repos_url":"https://api.github.com/users/prupert/repos","events_url":"https://api.github.com/users/prupert/events{/privacy}","received_events_url":"https://api.github.com/users/prupert/received_events","type":"User","site_admin":false},"created_at":"2018-06-25T12:53:01Z","updated_at":"2018-06-25T12:53:01Z","author_association":"NONE","body":"The issue is still prevalent in Elasticsearch 6.x where the `elasticsearch` user is created with a non-existing home directory `/home/elasticsearch`. \r\n\r\nConfirmed with package `elasticsearch-6.3.0-1.noarch` on CentOS 7. Please re-open this issue. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/399971989","html_url":"https://github.com/elastic/elasticsearch/issues/14453#issuecomment-399971989","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14453","id":399971989,"node_id":"MDEyOklzc3VlQ29tbWVudDM5OTk3MTk4OQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2018-06-25T14:29:03Z","updated_at":"2018-06-25T14:29:03Z","author_association":"MEMBER","body":"@prupert It was an intentional decision to explicitly *not* create the home dir, as `elasticsearch` is a system user. Please don't run cron with the `elasticsearch` user. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/399977246","html_url":"https://github.com/elastic/elasticsearch/issues/14453#issuecomment-399977246","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14453","id":399977246,"node_id":"MDEyOklzc3VlQ29tbWVudDM5OTk3NzI0Ng==","user":{"login":"prupert","id":171170,"node_id":"MDQ6VXNlcjE3MTE3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/171170?v=4","gravatar_id":"","url":"https://api.github.com/users/prupert","html_url":"https://github.com/prupert","followers_url":"https://api.github.com/users/prupert/followers","following_url":"https://api.github.com/users/prupert/following{/other_user}","gists_url":"https://api.github.com/users/prupert/gists{/gist_id}","starred_url":"https://api.github.com/users/prupert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prupert/subscriptions","organizations_url":"https://api.github.com/users/prupert/orgs","repos_url":"https://api.github.com/users/prupert/repos","events_url":"https://api.github.com/users/prupert/events{/privacy}","received_events_url":"https://api.github.com/users/prupert/received_events","type":"User","site_admin":false},"created_at":"2018-06-25T14:44:33Z","updated_at":"2018-06-25T14:47:30Z","author_association":"NONE","body":"Although I'm not sure setting an invalid home directory is the _right way_ to prevent/nudge users not to run cron with the `elasticsearch` user, I do understand now why you wouldn't want that happening. \r\n\r\nThank you for your reply. I will discontinue using the `elasticsearch` user for our `curator` cron jobs. ","performed_via_github_app":null}]