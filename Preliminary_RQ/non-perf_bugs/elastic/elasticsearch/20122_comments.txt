[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241720841","html_url":"https://github.com/elastic/elasticsearch/issues/20122#issuecomment-241720841","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20122","id":241720841,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTcyMDg0MQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2016-08-23T12:55:07Z","updated_at":"2016-08-23T12:55:07Z","author_association":"CONTRIBUTOR","body":"I like that it would make the change of default language less trappy and help debug slow queries since we would figure out the script language being used by just looking at the query instead of having to ask what the `script.default_lang` is.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241729189","html_url":"https://github.com/elastic/elasticsearch/issues/20122#issuecomment-241729189","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20122","id":241729189,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTcyOTE4OQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-08-23T13:25:44Z","updated_at":"2016-08-23T13:25:44Z","author_association":"CONTRIBUTOR","body":"I also think that being more verbose here and explicit is actually not just desirable i think it's also required. Think of a percolator query that has a script in it (I am not saying you should do that) - with a default language that is mutable we might fail the execution after upgrade. I also think it's very very trappy to have it as a node level setting that can be different per node.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241814632","html_url":"https://github.com/elastic/elasticsearch/issues/20122#issuecomment-241814632","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20122","id":241814632,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTgxNDYzMg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-08-23T17:43:58Z","updated_at":"2016-08-23T17:43:58Z","author_association":"CONTRIBUTOR","body":"I'm +1 on doing this.  Should we perhaps then leave `groovy` as the default value for existing scripts in percolator and watcher, for bwc?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241821241","html_url":"https://github.com/elastic/elasticsearch/issues/20122#issuecomment-241821241","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20122","id":241821241,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTgyMTI0MQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2016-08-23T18:04:47Z","updated_at":"2016-08-23T18:04:47Z","author_association":"MEMBER","body":"If we make it required, why would there be a default?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241822099","html_url":"https://github.com/elastic/elasticsearch/issues/20122#issuecomment-241822099","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20122","id":241822099,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTgyMjA5OQ==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2016-08-23T18:07:39Z","updated_at":"2016-08-23T18:07:39Z","author_association":"CONTRIBUTOR","body":"Please don't make groovy a default to anything. \n\nRemember how it resulted in remote execution simply by being on the classpath at all? We should push it out to plugins, then out of here completely, as soon as possible.\n\nits large, its slow, its trappy, its insecure, its good-for-nothing.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241822837","html_url":"https://github.com/elastic/elasticsearch/issues/20122#issuecomment-241822837","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20122","id":241822837,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTgyMjgzNw==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2016-08-23T18:10:09Z","updated_at":"2016-08-23T18:10:09Z","author_association":"CONTRIBUTOR","body":"I am -1 to this issue myself, because it only tends to lead us back towards groovy. Lets just have painless as the default.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241826245","html_url":"https://github.com/elastic/elasticsearch/issues/20122#issuecomment-241826245","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20122","id":241826245,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTgyNjI0NQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-08-23T18:20:27Z","updated_at":"2016-08-23T18:20:27Z","author_association":"CONTRIBUTOR","body":"> If we make it required, why would there be a default?\n\nI mean that we should remove the node-level default scripting language setting, but then only for existing scripts in watcher and the percolator that don't specify a language (in other words are already using groovy), we allow those to continue using groovy.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241826880","html_url":"https://github.com/elastic/elasticsearch/issues/20122#issuecomment-241826880","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20122","id":241826880,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTgyNjg4MA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2016-08-23T18:22:36Z","updated_at":"2016-08-23T18:22:36Z","author_association":"MEMBER","body":"> we allow those to continue using groovy.\n\nThat defeats all the work that was done to add groovy features to painless to make migration seamless. If the user must manually do some work to change to painless, they won't, and they will still be hit by trappy performance issues and insecurity.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241827179","html_url":"https://github.com/elastic/elasticsearch/issues/20122#issuecomment-241827179","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20122","id":241827179,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTgyNzE3OQ==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2016-08-23T18:23:37Z","updated_at":"2016-08-23T18:23:37Z","author_association":"CONTRIBUTOR","body":"Since we agreed to clarify, my -1 is a veto. My technical justifications are already public as CVEs.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241828783","html_url":"https://github.com/elastic/elasticsearch/issues/20122#issuecomment-241828783","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20122","id":241828783,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTgyODc4Mw==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2016-08-23T18:28:32Z","updated_at":"2016-08-23T18:28:32Z","author_association":"CONTRIBUTOR","body":"We have worked very hard to make a embedded language that makes sense for a search engine that can be used remotely without getting root-kitted, Groovy is the exact opposite of those things.  Why would we switch it back to be the default again?  Anyone upgrading to 5.0 is going to have some work to do if they have any complexities in their settings unrelated to scripting, so scripting would be another thing they have to upgrade appropriately.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241832803","html_url":"https://github.com/elastic/elasticsearch/issues/20122#issuecomment-241832803","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20122","id":241832803,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTgzMjgwMw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-08-23T18:39:25Z","updated_at":"2016-08-23T18:39:25Z","author_association":"CONTRIBUTOR","body":"> Why would we switch it back to be the default again? \n\nI am talking only about scripts which already exist in the index, and which don't specify a language.  They are already in groovy, so the user either has to reindex them to add the `lang` or rewrite them after upgrading.  ONLY for these existing scripts would I consider the default to be groovy.  All other scripts would require a `lang` parameter.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241834494","html_url":"https://github.com/elastic/elasticsearch/issues/20122#issuecomment-241834494","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20122","id":241834494,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTgzNDQ5NA==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2016-08-23T18:43:28Z","updated_at":"2016-08-23T18:43:28Z","author_association":"CONTRIBUTOR","body":"But for those users when upgrading they can just switch the default lang parameter to Groovy, I thought that was sort of the compromised work around here as we specified in the migration docs.  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241835830","html_url":"https://github.com/elastic/elasticsearch/issues/20122#issuecomment-241835830","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20122","id":241835830,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTgzNTgzMA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2016-08-23T18:46:49Z","updated_at":"2016-08-23T18:46:49Z","author_association":"MEMBER","body":"All the work to make painless more inline with groovy was done explicitly to allow easier upgrading. If a script only uses features of groovy which are also in painless, then there is no work necessary if we continue having a default (but there is a lot of benefit, both in performance and security, which was the point of developing painless in the first place). If we remove having a default, then they must make a choice, but that choice will tend to be \"just put in `groovy`\" because that is what the default was before (and hence Robert's disinclination I believe). I'm inclined to think we should only remove the default once groovy is gone, to further dissuade users from falling into the trap-in-a-box called groovy.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241844916","html_url":"https://github.com/elastic/elasticsearch/issues/20122#issuecomment-241844916","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20122","id":241844916,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTg0NDkxNg==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-08-23T19:14:39Z","updated_at":"2016-08-23T19:14:39Z","author_association":"CONTRIBUTOR","body":"several aspects:\n- this is orthogonal to the default changing from groovy to painless\n- don't take things personal as if anybody questioned the move to painless, nobody did\n- we have a real problem that is with scripts that have no explicit lang set in the percolator / watcher and we need to fix it. \n- the default settings is trappy as hell as it needs to be per node and consistent. WE NEED TO FIX THIS.\n- if we do anything here, what we do is up in the air but it's unrelated to the default change. \n\nwe all calm down here we are discussing options, we have found some real issues here that are entirely unrelated to groovy, painless, javascript, haskell whatever. We can name options for BWC even if they are named groovy. By no means its anything we decided or even consider to put in a PR at this point but lets brainstorm what we do. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241846138","html_url":"https://github.com/elastic/elasticsearch/issues/20122#issuecomment-241846138","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20122","id":241846138,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTg0NjEzOA==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2016-08-23T19:19:03Z","updated_at":"2016-08-23T19:19:03Z","author_association":"CONTRIBUTOR","body":"Its not orthogonal at all.\n\nits both linked from and created by the issue to change the default. Also it continues the trend of making it impossible to fix _anything_ here, even if that thing causes remote execution vulnerabilities, has slow performance traps, doesnt matter.\n\nAs I said, I'm -1 to the issue. That means I will work very very very hard to prevent it. At least as hard as you guys are working against us to fix these issues. Two can play at this game.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241849104","html_url":"https://github.com/elastic/elasticsearch/issues/20122#issuecomment-241849104","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20122","id":241849104,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTg0OTEwNA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2016-08-23T19:29:41Z","updated_at":"2016-08-23T19:29:41Z","author_association":"MEMBER","body":"> the default settings is trappy as hell as it needs to be per node and consistent. WE NEED TO FIX THIS.\n\nI agree with this, the default lang setting needs to be a cluster setting, not a node setting. I can work on a PR for that.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241862560","html_url":"https://github.com/elastic/elasticsearch/issues/20122#issuecomment-241862560","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20122","id":241862560,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTg2MjU2MA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-08-23T20:16:36Z","updated_at":"2016-08-23T20:16:36Z","author_association":"CONTRIBUTOR","body":"> As I said, I'm -1 to the issue. That means I will work very very very hard to prevent it. At least as hard as you guys are working against us to fix these issues. Two can play at this game.\n\nthis is not a game and I am not playing with you. Find somebody else.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241872316","html_url":"https://github.com/elastic/elasticsearch/issues/20122#issuecomment-241872316","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20122","id":241872316,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTg3MjMxNg==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2016-08-23T20:44:03Z","updated_at":"2016-08-23T20:44:03Z","author_association":"CONTRIBUTOR","body":"It sure seems like one, that's why elasticsearch was repeatedly remote-CVE'd.\n\nWhat should have happened is, nearly immediately this crazy broken feature should have been dropped, falling back to only what was safe (expressions). \n\nInstead, various attempts were made to preserve it at all costs: a sandbox was added but that was easily foiled (CVE-2015-1427), then it was \"disabled\" but that also did not prevent the problems (CVE-2015-5377), users could be hacked simply by it being on the classpath.\n\nBesides those issues (which should have been enough), there are constantly performance issues around the thing among other problems. \n\nThis is the penultimate broken feature. We should have simply replaced it with expressions ASAP (https://github.com/elastic/elasticsearch/issues/10491), but instead it seemed we had to move mountains before we could remove the broken feature.\n\nAnd move mountains @jdconrad did! Yet still here we are, despite all that work, unable to do the right thing.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241925440","html_url":"https://github.com/elastic/elasticsearch/issues/20122#issuecomment-241925440","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20122","id":241925440,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTkyNTQ0MA==","user":{"login":"eskibars","id":2246002,"node_id":"MDQ6VXNlcjIyNDYwMDI=","avatar_url":"https://avatars0.githubusercontent.com/u/2246002?v=4","gravatar_id":"","url":"https://api.github.com/users/eskibars","html_url":"https://github.com/eskibars","followers_url":"https://api.github.com/users/eskibars/followers","following_url":"https://api.github.com/users/eskibars/following{/other_user}","gists_url":"https://api.github.com/users/eskibars/gists{/gist_id}","starred_url":"https://api.github.com/users/eskibars/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eskibars/subscriptions","organizations_url":"https://api.github.com/users/eskibars/orgs","repos_url":"https://api.github.com/users/eskibars/repos","events_url":"https://api.github.com/users/eskibars/events{/privacy}","received_events_url":"https://api.github.com/users/eskibars/received_events","type":"User","site_admin":false},"created_at":"2016-08-24T00:40:14Z","updated_at":"2016-08-24T00:40:14Z","author_association":"CONTRIBUTOR","body":"Maybe I'm missing something, but I don't understand how _only_ switching the default language does anything but make things more trappy.  You had a script that used to work in groovy and now it suddenly doesn't.  Or maybe it does...  Or worst possible, maybe it works 99% of the time because we didn't make 100% feature and syntax parity a design specification of Painless (not that we should have!) and some operational divergence is only hit in the script e.g. 1 out of a million docs.  For those reasons, even if Painless looks and feels like Groovy the vast majority of the time, switching existing Groovy scripts behind the scenes to execute in Painless seems super trappy to me unless we could somehow essentially guarantee exactly the same results.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241927708","html_url":"https://github.com/elastic/elasticsearch/issues/20122#issuecomment-241927708","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20122","id":241927708,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTkyNzcwOA==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2016-08-24T00:56:14Z","updated_at":"2016-08-24T00:56:14Z","author_association":"CONTRIBUTOR","body":"So we are stuck with groovy forever now because bad decisions were made in the past and despite our software still being insanely immature, we'd like to pretend our company is so big that we cant fix such things? Screw that. I wont let it happen. Follow the cve links i provided and start to educate yourself on the technicals. Unauthenticated remote code execution is the worst of the worst and we let it happen time and time again, because of folks that are clueless o the security issues at hand.\n\nStop fighting me here, the technicals are cleqr and that is what we must do. You cant not have authentication and support features like this too without serious work. Browser companies and shockwave and java applets and all of it tell how that story goes. It never works out. \n\nIm not concerned about the end user experience whatsoever here. The situation is dire and the only alternative i see to painless is removing this scripting stuff completely.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/244337340","html_url":"https://github.com/elastic/elasticsearch/issues/20122#issuecomment-244337340","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20122","id":244337340,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDMzNzM0MA==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2016-09-02T10:11:23Z","updated_at":"2016-09-02T16:53:59Z","author_association":"MEMBER","body":"This was discussed during fixitfriday and came up with the following:\n- Upon storing / serialising the script the language is always going to be persisted. (even if the default language is used)\n- The `lang` parameter is not going to be required upon creation of the script, and will always default to `painless` (hardcoded). The `script.default_lang` setting will disappear.\n- The legacy default lang for already stored scripts (for example in percolator query) is going to be groovy. This would actually help upgrading to ES 5 and this default for already stored scripts will be removed later. For these scripts the default can be configured via `script.legacy.default_lang` setting and defaults groovy.\n","performed_via_github_app":null}]