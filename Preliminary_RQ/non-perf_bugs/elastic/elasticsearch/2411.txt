{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/2411","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2411/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2411/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2411/events","html_url":"https://github.com/elastic/elasticsearch/issues/2411","id":8371223,"node_id":"MDU6SXNzdWU4MzcxMjIz","number":2411,"title":"Expose Lucene's codec api","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"labels":[{"id":23172,"node_id":"MDU6TGFiZWwyMzE3Mg==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Efeature","name":">feature","color":"006b75","default":false,"description":null},{"id":17100279,"node_id":"MDU6TGFiZWwxNzEwMDI3OQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.90.0.Beta1","name":"v0.90.0.Beta1","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2012-11-14T22:29:26Z","updated_at":"2013-02-17T13:29:12Z","closed_at":"2012-11-14T22:54:33Z","author_association":"MEMBER","active_lock_reason":null,"body":"This issue adds the option to configure a `PostingsFormat` and assign it to a field in the mapping. This feature is very expert and in almost all cases Elasticsearch's defaults will suite your needs.\n## Configuring a postingsformat per field\n\nThere're several default postings formats configured by default which can be used in your mapping:\n- `pulsing` - A postings format that encodes the postinglist for terms with low document frequency in the term directory.\n- `direct` - A codec that wraps the default postings format during write time, but loads the terms and postinglists into memory directly in memory during read time as raw arrays. This postings format is exceptional memory intensive, but can give a substantial increase in search performance.\n- `memory` - A codec that loads and stores terms and postinglists in memory using a FST. Acts like a cached postingslist.\n- `bloom_default` - Maintains a bloom filter for the indexed terms, which is stored to disk and builds on top of the `default` postings format. This postings format is useful for low document frequency terms and offers a fail fast for seeks to terms that don't exist. \n- `bloom_pulsing` - Similar to the `bloom_default` postings format, but builds on top of the `pulsing` postings format.\n- `default` - The default postings format. The default if none is specified.\n\nOn all fields it possible to configure a `postings_format` attribute. Example mapping:\n\n```\n{\n  \"person\" : {\n     \"properties\" : {\n         \"second_person_id\" : {\"type\" : \"string\", \"postings_format\" : \"pulsing\"}\n     }\n  }\n}\n```\n## Configuring a custom postingsformat\n\nIt is possible the instantiate custom postingsformats. This can be specified via the index settings. \n\n```\n{\n   \"codec\" : {\n      \"postings_format\" : {\n         \"my_format\" : {\n            \"type\" : \"pulsing\"\n            \"freq_cut_off\" : \"5\"\n         } \n      }\n   }\n}\n```\n\nIn the above example the `freq_cut_off` is set the 5 (defaults to 1). This tells the pulsing postings format to inline the postinglist of terms with a document frequency lower or equal to 5 in the term dictionary.\n\nNote: when we doc this, we need to properly doc and expose all the configuration options for all codecs.\n","closed_by":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"performed_via_github_app":null}