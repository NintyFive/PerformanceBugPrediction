[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/99579209","html_url":"https://github.com/elastic/elasticsearch/issues/4360#issuecomment-99579209","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4360","id":99579209,"node_id":"MDEyOklzc3VlQ29tbWVudDk5NTc5MjA5","user":{"login":"vedil","id":2587405,"node_id":"MDQ6VXNlcjI1ODc0MDU=","avatar_url":"https://avatars0.githubusercontent.com/u/2587405?v=4","gravatar_id":"","url":"https://api.github.com/users/vedil","html_url":"https://github.com/vedil","followers_url":"https://api.github.com/users/vedil/followers","following_url":"https://api.github.com/users/vedil/following{/other_user}","gists_url":"https://api.github.com/users/vedil/gists{/gist_id}","starred_url":"https://api.github.com/users/vedil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vedil/subscriptions","organizations_url":"https://api.github.com/users/vedil/orgs","repos_url":"https://api.github.com/users/vedil/repos","events_url":"https://api.github.com/users/vedil/events{/privacy}","received_events_url":"https://api.github.com/users/vedil/received_events","type":"User","site_admin":false},"created_at":"2015-05-06T19:20:26Z","updated_at":"2015-05-06T19:20:26Z","author_association":"NONE","body":"I was stuck with similar issue and thought i need SortBuilder that could take a json, but i figured SearchRequestBuilder.setExtraSource would be sufficient for me.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148031954","html_url":"https://github.com/elastic/elasticsearch/issues/4360#issuecomment-148031954","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4360","id":148031954,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODAzMTk1NA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-10-14T12:22:28Z","updated_at":"2015-10-14T12:22:28Z","author_association":"CONTRIBUTOR","body":"Just discussed this with the people who have been working on the query refactoring, who are of the opinion that we shouldn't be passing JSON in the Java API. They're also considering removing wrapperQuery, so I'm going to close this one.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148040367","html_url":"https://github.com/elastic/elasticsearch/issues/4360#issuecomment-148040367","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4360","id":148040367,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODA0MDM2Nw==","user":{"login":"hudsonb","id":1359976,"node_id":"MDQ6VXNlcjEzNTk5NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1359976?v=4","gravatar_id":"","url":"https://api.github.com/users/hudsonb","html_url":"https://github.com/hudsonb","followers_url":"https://api.github.com/users/hudsonb/followers","following_url":"https://api.github.com/users/hudsonb/following{/other_user}","gists_url":"https://api.github.com/users/hudsonb/gists{/gist_id}","starred_url":"https://api.github.com/users/hudsonb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudsonb/subscriptions","organizations_url":"https://api.github.com/users/hudsonb/orgs","repos_url":"https://api.github.com/users/hudsonb/repos","events_url":"https://api.github.com/users/hudsonb/events{/privacy}","received_events_url":"https://api.github.com/users/hudsonb/received_events","type":"User","site_admin":false},"created_at":"2015-10-14T12:50:46Z","updated_at":"2015-10-14T12:50:46Z","author_association":"NONE","body":"So there would be no way to go from JSON to QueryBuilder? I rely heavily on this currently.\n\nI have a thick client which generates the queries in JSON, these JSON queries are sent through a web service which then uses the wrapperQuery to combine the query (using bool query) with some other clauses that are added by the server.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148042090","html_url":"https://github.com/elastic/elasticsearch/issues/4360#issuecomment-148042090","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4360","id":148042090,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODA0MjA5MA==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2015-10-14T12:59:08Z","updated_at":"2015-10-14T12:59:08Z","author_association":"MEMBER","body":"I think it would make more sense to send a json request through REST rather than using the java api for that. The idea is that the java api uses the transport layer (binary protocol), so you should be specifying java objects and no parsing should be involved. On the other hand the REST layer does parse queries into java objects. Makes sense?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148054504","html_url":"https://github.com/elastic/elasticsearch/issues/4360#issuecomment-148054504","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4360","id":148054504,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODA1NDUwNA==","user":{"login":"hudsonb","id":1359976,"node_id":"MDQ6VXNlcjEzNTk5NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1359976?v=4","gravatar_id":"","url":"https://api.github.com/users/hudsonb","html_url":"https://github.com/hudsonb","followers_url":"https://api.github.com/users/hudsonb/followers","following_url":"https://api.github.com/users/hudsonb/following{/other_user}","gists_url":"https://api.github.com/users/hudsonb/gists{/gist_id}","starred_url":"https://api.github.com/users/hudsonb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudsonb/subscriptions","organizations_url":"https://api.github.com/users/hudsonb/orgs","repos_url":"https://api.github.com/users/hudsonb/repos","events_url":"https://api.github.com/users/hudsonb/events{/privacy}","received_events_url":"https://api.github.com/users/hudsonb/received_events","type":"User","site_admin":false},"created_at":"2015-10-14T13:46:55Z","updated_at":"2015-10-14T13:47:23Z","author_association":"NONE","body":"From the client we couldn't because we don't expose elasticsearch directly.\n\nFrom the service we could, but we make heavy use of the Java API there - the query is just one piece that happens to be JSON since its generated by the client and sent to the service as JSON.\n\nFor example as part of one service call we do something like this:\n\n```\nHistogramBuilder histogram = histogram(\"h\")\n                                                 .field(field)\n                                                 .interval(interval)\n                                                 .minDocCount(minCount);\n\nclient.prepareSearch(alias)\n        .setSearchType(SearchType.COUNT)\n        .setTypes(eventType)\n        .setQuery(filteredQuery(query, wrapperFilter(request.getFilter()))\n        .addAggregation(histogram)\n        .execute();\n```\n\nThe only use of straight JSON is in the wrapperFilter call, where we get the JSON filter spec from the request sent by the client.\n","performed_via_github_app":null}]