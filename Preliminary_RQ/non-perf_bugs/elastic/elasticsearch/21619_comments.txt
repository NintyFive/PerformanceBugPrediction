[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/261717335","html_url":"https://github.com/elastic/elasticsearch/issues/21619#issuecomment-261717335","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21619","id":261717335,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTcxNzMzNQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-11-19T14:35:25Z","updated_at":"2016-11-19T14:35:25Z","author_association":"CONTRIBUTOR","body":"@colings86 @polyfractal any thoughts?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/261879124","html_url":"https://github.com/elastic/elasticsearch/issues/21619#issuecomment-261879124","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21619","id":261879124,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTg3OTEyNA==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2016-11-21T08:53:29Z","updated_at":"2016-11-21T08:53:29Z","author_association":"MEMBER","body":"I have tried to reproduce this using the below steps without success. Could you post the responses you see (in a gist if necessary) so I can see exactly what you are seeing?\r\n\r\n```\r\nDELETE test\r\n\r\nPUT test\r\n{\r\n    \"mappings\": {\r\n        \"doc\": {\r\n            \"properties\": {\r\n                \"date\": {\r\n                    \"type\": \"date\"\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nPOST test/doc/1\r\n{\r\n    \"date\" : \"2016-11-15\",\r\n    \"i\": 1\r\n}\r\n\r\nPOST test/doc/2\r\n{\r\n    \"date\" : \"2016-11-14\",\r\n    \"i\": 1\r\n}\r\n\r\nPOST test/doc/3\r\n{\r\n    \"date\" : \"2016-11-13\",\r\n    \"i\": 1\r\n}\r\n\r\nPOST test/doc/4\r\n{\r\n    \"date\" : \"2016-11-12\",\r\n    \"i\": 1\r\n}\r\n\r\nPOST test/doc/5\r\n{\r\n    \"date\" : \"2016-11-11\",\r\n    \"i\": 1\r\n}\r\n\r\nPOST test/doc/6\r\n{\r\n    \"date\" : \"2016-11-10\",\r\n    \"i\": 1\r\n}\r\n\r\nPOST test/_search\r\n{\r\n   \"query\": {\r\n      \"bool\": {\r\n         \"should\": [\r\n            {\r\n               \"bool\": {\r\n                  \"must\": [\r\n                     {\r\n                        \"range\": {\r\n                           \"date\": {\r\n                              \"lt\": \"now-1d\"\r\n                           }\r\n                        }\r\n                     }\r\n                  ]\r\n               }\r\n            }\r\n         ]\r\n      }\r\n   },\r\n   \"size\": 0,\r\n   \"aggs\": {\r\n      \"histo\": {\r\n         \"date_histogram\": {\r\n            \"field\": \"date\",\r\n            \"interval\": \"day\"\r\n         },\r\n         \"aggs\": {\r\n            \"dates_stats\": {\r\n               \"stats\": {\r\n                  \"field\": \"date\"\r\n               }\r\n            },\r\n            \"cumulative\": {\r\n               \"cumulative_sum\": {\r\n                  \"buckets_path\": \"dates_stats.count\"\r\n               }\r\n            }\r\n         }\r\n      }\r\n   }\r\n}\r\n\r\nPOST test/_search\r\n{\r\n   \"query\": {\r\n      \"bool\": {\r\n         \"should\": [\r\n            {\r\n               \"bool\": {\r\n                  \"must\": [\r\n                     {\r\n                        \"range\": {\r\n                           \"date\": {\r\n                              \"lt\": \"now-2d\"\r\n                           }\r\n                        }\r\n                     }\r\n                  ]\r\n               }\r\n            }\r\n         ]\r\n      }\r\n   },\r\n   \"size\": 0,\r\n   \"aggs\": {\r\n      \"histo\": {\r\n         \"date_histogram\": {\r\n            \"field\": \"date\",\r\n            \"interval\": \"day\"\r\n         },\r\n         \"aggs\": {\r\n            \"dates_stats\": {\r\n               \"stats\": {\r\n                  \"field\": \"date\"\r\n               }\r\n            },\r\n            \"cumulative\": {\r\n               \"cumulative_sum\": {\r\n                  \"buckets_path\": \"dates_stats.count\"\r\n               }\r\n            }\r\n         }\r\n      }\r\n   }\r\n}\r\n```\r\n\r\nBoth of the search requests give the same expected output:\r\n```\r\n{\r\n   \"took\": 2,\r\n   \"timed_out\": false,\r\n   \"_shards\": {\r\n      \"total\": 5,\r\n      \"successful\": 5,\r\n      \"failed\": 0\r\n   },\r\n   \"hits\": {\r\n      \"total\": 6,\r\n      \"max_score\": 0,\r\n      \"hits\": []\r\n   },\r\n   \"aggregations\": {\r\n      \"histo\": {\r\n         \"buckets\": [\r\n            {\r\n               \"key_as_string\": \"2016-11-10T00:00:00.000Z\",\r\n               \"key\": 1478736000000,\r\n               \"doc_count\": 1,\r\n               \"dates_stats\": {\r\n                  \"count\": 1,\r\n                  \"min\": 1478736000000,\r\n                  \"max\": 1478736000000,\r\n                  \"avg\": 1478736000000,\r\n                  \"sum\": 1478736000000,\r\n                  \"min_as_string\": \"2016-11-10T00:00:00.000Z\",\r\n                  \"max_as_string\": \"2016-11-10T00:00:00.000Z\",\r\n                  \"avg_as_string\": \"2016-11-10T00:00:00.000Z\",\r\n                  \"sum_as_string\": \"2016-11-10T00:00:00.000Z\"\r\n               },\r\n               \"cumulative\": {\r\n                  \"value\": 1\r\n               }\r\n            },\r\n            {\r\n               \"key_as_string\": \"2016-11-11T00:00:00.000Z\",\r\n               \"key\": 1478822400000,\r\n               \"doc_count\": 1,\r\n               \"dates_stats\": {\r\n                  \"count\": 1,\r\n                  \"min\": 1478822400000,\r\n                  \"max\": 1478822400000,\r\n                  \"avg\": 1478822400000,\r\n                  \"sum\": 1478822400000,\r\n                  \"min_as_string\": \"2016-11-11T00:00:00.000Z\",\r\n                  \"max_as_string\": \"2016-11-11T00:00:00.000Z\",\r\n                  \"avg_as_string\": \"2016-11-11T00:00:00.000Z\",\r\n                  \"sum_as_string\": \"2016-11-11T00:00:00.000Z\"\r\n               },\r\n               \"cumulative\": {\r\n                  \"value\": 2\r\n               }\r\n            },\r\n            {\r\n               \"key_as_string\": \"2016-11-12T00:00:00.000Z\",\r\n               \"key\": 1478908800000,\r\n               \"doc_count\": 1,\r\n               \"dates_stats\": {\r\n                  \"count\": 1,\r\n                  \"min\": 1478908800000,\r\n                  \"max\": 1478908800000,\r\n                  \"avg\": 1478908800000,\r\n                  \"sum\": 1478908800000,\r\n                  \"min_as_string\": \"2016-11-12T00:00:00.000Z\",\r\n                  \"max_as_string\": \"2016-11-12T00:00:00.000Z\",\r\n                  \"avg_as_string\": \"2016-11-12T00:00:00.000Z\",\r\n                  \"sum_as_string\": \"2016-11-12T00:00:00.000Z\"\r\n               },\r\n               \"cumulative\": {\r\n                  \"value\": 3\r\n               }\r\n            },\r\n            {\r\n               \"key_as_string\": \"2016-11-13T00:00:00.000Z\",\r\n               \"key\": 1478995200000,\r\n               \"doc_count\": 1,\r\n               \"dates_stats\": {\r\n                  \"count\": 1,\r\n                  \"min\": 1478995200000,\r\n                  \"max\": 1478995200000,\r\n                  \"avg\": 1478995200000,\r\n                  \"sum\": 1478995200000,\r\n                  \"min_as_string\": \"2016-11-13T00:00:00.000Z\",\r\n                  \"max_as_string\": \"2016-11-13T00:00:00.000Z\",\r\n                  \"avg_as_string\": \"2016-11-13T00:00:00.000Z\",\r\n                  \"sum_as_string\": \"2016-11-13T00:00:00.000Z\"\r\n               },\r\n               \"cumulative\": {\r\n                  \"value\": 4\r\n               }\r\n            },\r\n            {\r\n               \"key_as_string\": \"2016-11-14T00:00:00.000Z\",\r\n               \"key\": 1479081600000,\r\n               \"doc_count\": 1,\r\n               \"dates_stats\": {\r\n                  \"count\": 1,\r\n                  \"min\": 1479081600000,\r\n                  \"max\": 1479081600000,\r\n                  \"avg\": 1479081600000,\r\n                  \"sum\": 1479081600000,\r\n                  \"min_as_string\": \"2016-11-14T00:00:00.000Z\",\r\n                  \"max_as_string\": \"2016-11-14T00:00:00.000Z\",\r\n                  \"avg_as_string\": \"2016-11-14T00:00:00.000Z\",\r\n                  \"sum_as_string\": \"2016-11-14T00:00:00.000Z\"\r\n               },\r\n               \"cumulative\": {\r\n                  \"value\": 5\r\n               }\r\n            },\r\n            {\r\n               \"key_as_string\": \"2016-11-15T00:00:00.000Z\",\r\n               \"key\": 1479168000000,\r\n               \"doc_count\": 1,\r\n               \"dates_stats\": {\r\n                  \"count\": 1,\r\n                  \"min\": 1479168000000,\r\n                  \"max\": 1479168000000,\r\n                  \"avg\": 1479168000000,\r\n                  \"sum\": 1479168000000,\r\n                  \"min_as_string\": \"2016-11-15T00:00:00.000Z\",\r\n                  \"max_as_string\": \"2016-11-15T00:00:00.000Z\",\r\n                  \"avg_as_string\": \"2016-11-15T00:00:00.000Z\",\r\n                  \"sum_as_string\": \"2016-11-15T00:00:00.000Z\"\r\n               },\r\n               \"cumulative\": {\r\n                  \"value\": 6\r\n               }\r\n            }\r\n         ]\r\n      }\r\n   }\r\n}\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/290721136","html_url":"https://github.com/elastic/elasticsearch/issues/21619#issuecomment-290721136","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21619","id":290721136,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDcyMTEzNg==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2017-03-31T14:05:17Z","updated_at":"2017-03-31T14:05:17Z","author_association":"MEMBER","body":"No Further feedback","performed_via_github_app":null}]