[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/164828754","html_url":"https://github.com/elastic/elasticsearch/issues/15445#issuecomment-164828754","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15445","id":164828754,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NDgyODc1NA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2015-12-15T17:05:38Z","updated_at":"2015-12-15T17:16:23Z","author_association":"MEMBER","body":"This isn't specific to Elasticsearch; for the HotSpot JVM, if a maximum heap size is set, it _must_ be all digits unless the final character is `k`, `K`, `m`, `M`, `g`, `G`, `t`, or `T` (which will just serve as the obvious multipliers for the preceding digits). This also applies to the minimum heap size and the thread stack size settings. The JVM will fail to startup if this is violated.\n\nIn my mind, the root issue here (from the linked issue elastic/puppet-elasticsearch#522) is how poorly startup failures are reported. In general, there is a lot of room for improvement for the handling of startup failures related to how the Elasticsearch process is daemonized. With improved daemonization and reporting of startup failures, the failure here could be more readily apparent.\n\nI do not think that we should get in the business of trying to validate JVM parameters before passing to the JVM; that would just be a maintenance headache.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/164835340","html_url":"https://github.com/elastic/elasticsearch/issues/15445#issuecomment-164835340","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15445","id":164835340,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NDgzNTM0MA==","user":{"login":"electrical","id":271677,"node_id":"MDQ6VXNlcjI3MTY3Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/271677?v=4","gravatar_id":"","url":"https://api.github.com/users/electrical","html_url":"https://github.com/electrical","followers_url":"https://api.github.com/users/electrical/followers","following_url":"https://api.github.com/users/electrical/following{/other_user}","gists_url":"https://api.github.com/users/electrical/gists{/gist_id}","starred_url":"https://api.github.com/users/electrical/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/electrical/subscriptions","organizations_url":"https://api.github.com/users/electrical/orgs","repos_url":"https://api.github.com/users/electrical/repos","events_url":"https://api.github.com/users/electrical/events{/privacy}","received_events_url":"https://api.github.com/users/electrical/received_events","type":"User","site_admin":false},"created_at":"2015-12-15T17:31:04Z","updated_at":"2015-12-15T17:31:04Z","author_association":"CONTRIBUTOR","body":"The user saw [here](https://www.elastic.co/guide/en/elasticsearch/guide/current/heap-sizing.html) refering 30.5G so he tried that, which failed.\nPerhaps we should modify that to 30G to avoid confusion as well?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/164842355","html_url":"https://github.com/elastic/elasticsearch/issues/15445#issuecomment-164842355","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15445","id":164842355,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NDg0MjM1NQ==","user":{"login":"TinLe","id":465041,"node_id":"MDQ6VXNlcjQ2NTA0MQ==","avatar_url":"https://avatars1.githubusercontent.com/u/465041?v=4","gravatar_id":"","url":"https://api.github.com/users/TinLe","html_url":"https://github.com/TinLe","followers_url":"https://api.github.com/users/TinLe/followers","following_url":"https://api.github.com/users/TinLe/following{/other_user}","gists_url":"https://api.github.com/users/TinLe/gists{/gist_id}","starred_url":"https://api.github.com/users/TinLe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TinLe/subscriptions","organizations_url":"https://api.github.com/users/TinLe/orgs","repos_url":"https://api.github.com/users/TinLe/repos","events_url":"https://api.github.com/users/TinLe/events{/privacy}","received_events_url":"https://api.github.com/users/TinLe/received_events","type":"User","site_admin":false},"created_at":"2015-12-15T18:00:52Z","updated_at":"2015-12-15T18:00:52Z","author_association":"NONE","body":"Or convert it to M.  E.g. 30.5G = 31232M\n\n:-)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/164850904","html_url":"https://github.com/elastic/elasticsearch/issues/15445#issuecomment-164850904","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15445","id":164850904,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NDg1MDkwNA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2015-12-15T18:37:35Z","updated_at":"2015-12-15T18:44:43Z","author_association":"MEMBER","body":"> The user saw [here](https://www.elastic.co/guide/en/elasticsearch/guide/current/heap-sizing.html) refering 30.5G so he tried that, which failed.\n> Perhaps we should modify that to 30G to avoid confusion as well?\n\nI can see the confusion and agree that we should provide different guidance here, but do note that there is no example where `30.5g` is actually passed a command-line argument.\n\nEven though there are no explicit command-line examples there, I'm not sure why we even say `30.5g` as using `31g` will _usually_ get `UseCompressedOops` to be true. However, I think we should avoid giving explicit examples because the values that permit `UseCompressedOops` vary from JVM to JVM. For example:\n\n```\n13:43:32 [jason:~] $ uname -mprsv\nDarwin 15.2.0 Darwin Kernel Version 15.2.0: Fri Nov 13 19:56:56 PST 2015; root:xnu-3248.20.55~2/RELEASE_X86_64 x86_64 i386\n13:43:33 [jason:~] $ JAVA_HOME=`/usr/libexec/java_home -v 1.7` java -Xmx32600m -XX:+PrintFlagsFinal 2> /dev/null | grep UseCompressedOops\n     bool UseCompressedOops                        := true            {lp64_product}      \n13:43:35 [jason:~] $ JAVA_HOME=`/usr/libexec/java_home -v 1.7` java -Xmx32766m -XX:+PrintFlagsFinal 2> /dev/null | grep UseCompressedOops\n     bool UseCompressedOops                         = false           {lp64_product}      \n13:43:38 [jason:~] $ JAVA_HOME=`/usr/libexec/java_home -v 1.8` java -Xmx32766m -XX:+PrintFlagsFinal 2> /dev/null | grep UseCompressedOops\n     bool UseCompressedOops                        := true                                {lp64_product}\n13:43:40 [jason:~] $ JAVA_HOME=`/usr/libexec/java_home -v 1.8` java -Xmx32767m -XX:+PrintFlagsFinal 2> /dev/null | grep UseCompressedOops\n     bool UseCompressedOops                         = false                               {lp64_product}\n```\n\nIn particular, note that `-Xmx32766m` gives `UseCompressedOops` being `false` on one JVM, but `true` on another.\n\nI opened elastic/elasticsearch-definitive-guide#455.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/165745167","html_url":"https://github.com/elastic/elasticsearch/issues/15445#issuecomment-165745167","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15445","id":165745167,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NTc0NTE2Nw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-12-18T10:45:45Z","updated_at":"2015-12-18T10:45:45Z","author_association":"CONTRIBUTOR","body":"We should improve our documentation to show using integers for heap sizing, and add a section explaining what happens when the heap is < 4gb, < ~26gb, etc, and how to figure out what the boundary is for compressed oops\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/372575744","html_url":"https://github.com/elastic/elasticsearch/issues/15445#issuecomment-372575744","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15445","id":372575744,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MjU3NTc0NA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2018-03-13T07:48:31Z","updated_at":"2018-03-13T07:48:31Z","author_association":"MEMBER","body":"I'm closing this as it looks like it fixed already. There are currently no float values, and eg 26GB is mentioned (zero based compressed oops).","performed_via_github_app":null}]