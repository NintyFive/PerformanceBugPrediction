{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/36469","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36469/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36469/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36469/events","html_url":"https://github.com/elastic/elasticsearch/issues/36469","id":389667974,"node_id":"MDU6SXNzdWUzODk2Njc5NzQ=","number":36469,"title":"[CI] MixedClusterClientYamlTestSuiteIT explain/11_basic_with_types/Explain body without query element failure","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"labels":[{"id":141145460,"node_id":"MDU6TGFiZWwxNDExNDU0NjA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Mapping","name":":Search/Mapping","color":"0e8a16","default":false,"description":"How fields should be indexed"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false},"assignees":[{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2018-12-11T09:28:52Z","updated_at":"2018-12-11T19:15:00Z","closed_at":"2018-12-11T19:14:59Z","author_association":"MEMBER","active_lock_reason":null,"body":"Build log: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+intake/666/console\r\n\r\nReproduces with: `./gradlew :qa:mixed-cluster:v6.6.0#mixedClusterTestRunner -Dtests.seed=D39E8465F0EDD878 -Dtests.class=org.elasticsearch.backwards.MixedClusterClientYamlTestSuiteIT -Dtests.method=\"test {p0=explain/11_basic_with_types/Explain body without query element}\" -Dtests.security.manager=true -Dtests.locale=en-CA -Dtests.timezone=America/Fort_Nelson -Dcompiler.java=11 -Druntime.java=8`\r\n\r\nRelevant build log:\r\n\r\n```\r\n1> [2018-12-10T21:40:45,702][INFO ][o.e.b.MixedClusterClientYamlTestSuiteIT] [test] [p0=explain/11_basic_with_types/Explain body without query element] before test\r\n  1> [2018-12-10T21:40:45,882][WARN ][o.e.c.RestClient         ] [[I/O dispatcher 2]] request [PUT http://[::1]:41496/test_1?error_trace=true] returned 1 warnings: [29\r\n9 Elasticsearch-6.6.0-SNAPSHOT-32344e7 \"the default number of shards will change from [5] to [1] in 7.0.0; if you wish to continue using the default of [5] shards, you\r\n must manage this on the create index request or with an index template\" \"Tue, 11 Dec 2018 04:40:45 GMT\"]\r\n  1> [2018-12-10T21:40:45,990][INFO ][o.e.b.MixedClusterClientYamlTestSuiteIT] [test] Stash dump on test failure [{\r\n  1>   \"stash\" : {\r\n  1>     \"body\" : {\r\n  1>       \"_index\" : \"test_1\",\r\n  1>       \"_type\" : \"_explain\",\r\n  1>       \"_id\" : \"id_1\",\r\n  1>       \"found\" : false\r\n  1>     }\r\n  1>   }\r\n  1> }]\r\n  1> [2018-12-10T21:40:46,057][INFO ][o.e.b.MixedClusterClientYamlTestSuiteIT] [test] [p0=explain/11_basic_with_types/Explain body without query element] after test\r\nFAILURE 0.36s | MixedClusterClientYamlTestSuiteIT.test {p0=explain/11_basic_with_types/Explain body without query element} <<< FAILURES!\r\n   > Throwable #1: java.lang.AssertionError: Failure at [explain/11_basic_with_types:58]: expected [400] status code but api [explain] returned [404 Not Found] [{\"_index\":\"test_1\",\"_type\":\"_explain\",\"_id\":\"id_1\",\"found\":false}]\r\n   > Expected: <400>\r\n   >      but: was <404>\r\n   >    at __randomizedtesting.SeedInfo.seed([D39E8465F0EDD878:5BCABBBF5E11B580]:0)\r\n   >    at org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.executeSection(ESClientYamlSuiteTestCase.java:407)\r\n   >    at org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.test(ESClientYamlSuiteTestCase.java:384)\r\n   >    at java.lang.Thread.run(Thread.java:748)\r\n   > Caused by: java.lang.AssertionError: expected [400] status code but api [explain] returned [404 Not Found] [{\"_index\":\"test_1\",\"_type\":\"_explain\",\"_id\":\"id_1\",\"found\":false}]\r\n   > Expected: <400>\r\n   >      but: was <404>\r\n   >    at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   >    at org.elasticsearch.test.rest.yaml.section.DoSection.assertStatusCode(DoSection.java:345)\r\n   >    at org.elasticsearch.test.rest.yaml.section.DoSection.execute(DoSection.java:263)\r\n   >    at org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.executeSection(ESClientYamlSuiteTestCase.java:400)\r\n   >    ... 37 more\r\n```\r\n\r\nRelated PR: #35611","closed_by":{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false},"performed_via_github_app":null}