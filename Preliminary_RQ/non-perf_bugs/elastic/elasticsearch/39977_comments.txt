[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/472155244","html_url":"https://github.com/elastic/elasticsearch/issues/39977#issuecomment-472155244","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39977","id":472155244,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjE1NTI0NA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-03-12T19:51:00Z","updated_at":"2019-03-12T19:51:00Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/472313638","html_url":"https://github.com/elastic/elasticsearch/issues/39977#issuecomment-472313638","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39977","id":472313638,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjMxMzYzOA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-03-13T07:42:35Z","updated_at":"2019-03-13T07:42:35Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/472534906","html_url":"https://github.com/elastic/elasticsearch/issues/39977#issuecomment-472534906","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39977","id":472534906,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjUzNDkwNg==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-03-13T17:51:59Z","updated_at":"2019-03-13T17:51:59Z","author_association":"CONTRIBUTOR","body":"@elasticdog this is happening because our ubuntu image now has vagrant and we are picking that up but it's apparently not working.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/472596635","html_url":"https://github.com/elastic/elasticsearch/issues/39977#issuecomment-472596635","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39977","id":472596635,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjU5NjYzNQ==","user":{"login":"elasticdog","id":4742,"node_id":"MDQ6VXNlcjQ3NDI=","avatar_url":"https://avatars3.githubusercontent.com/u/4742?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticdog","html_url":"https://github.com/elasticdog","followers_url":"https://api.github.com/users/elasticdog/followers","following_url":"https://api.github.com/users/elasticdog/following{/other_user}","gists_url":"https://api.github.com/users/elasticdog/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticdog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticdog/subscriptions","organizations_url":"https://api.github.com/users/elasticdog/orgs","repos_url":"https://api.github.com/users/elasticdog/repos","events_url":"https://api.github.com/users/elasticdog/events{/privacy}","received_events_url":"https://api.github.com/users/elasticdog/received_events","type":"User","site_admin":false},"created_at":"2019-03-13T20:40:50Z","updated_at":"2019-03-13T20:40:50Z","author_association":"MEMBER","body":"@atorok that is interesting...both VirtualBox and Vagrant were added into the Ubuntu 18.04 image to test nested virtualization, specifically I've been looking at running the packaging tests in GCP. The general gist is that it works, but is very slow. I've not experienced any direct failures after bringing up a VM like is shown in the output here, but would expect more of our images to have VirtualBox/Vagrant installed moving forward if we can figure out where the performance hit comes from.\r\n\r\nI'm open to suggestions on the approach you'd like to take here to prevent unexpected runs.\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/473175371","html_url":"https://github.com/elastic/elasticsearch/issues/39977#issuecomment-473175371","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39977","id":473175371,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MzE3NTM3MQ==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-03-15T06:36:56Z","updated_at":"2019-03-15T06:36:56Z","author_association":"CONTRIBUTOR","body":"@elasticdog I'we been thinking about having a way to label images as \"experiemntal\"/ \"beta\" etc. to allow for experimentation in a way that limits the overall impact without putting a lot of burden on the team and infrastructure, so it should be something simple, setting up a separate image build or some complex versioning scheme would not help us. \r\n\r\nI think we should add a \"stable\" label and require it for critical  jobs that pick from a pool of workers like intake and PR builds. Then when we do something like this, we could remove the \"stable\" label from Ubuntu 18.04 so it will no longer be used for those jobs, and add a job that runs only on this platform. It may be a bit of overkill for this situation, but I imagine there will be others we will want to try in the future, like adding more cores once we better palatalize the build and changes in general that require some experimentation to get right. \r\n\r\nIn the mean time, we have been migrating away from Vagrant based test fixtures, this is the last one, and we are inching towards having a setup that would allow us to run packaging tests against GCP with each running on it's own VM to make them much faster. If we adapt the build to make it easier to do so we would still need packer 2.0 based images to do so. I think that won't be too hard  to port from the existing ones, probably the more time consuming bit is to also generate identical VirtualBox images. \r\nVMX might give us some benefits right now, but on the long term I think running the tests in GCP VMs  is what we should aim for.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/473178669","html_url":"https://github.com/elastic/elasticsearch/issues/39977#issuecomment-473178669","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39977","id":473178669,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MzE3ODY2OQ==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-03-15T06:54:33Z","updated_at":"2019-03-15T06:54:33Z","author_association":"CONTRIBUTOR","body":"This would be fixed by #34095","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/473307814","html_url":"https://github.com/elastic/elasticsearch/issues/39977#issuecomment-473307814","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39977","id":473307814,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MzMwNzgxNA==","user":{"login":"elasticdog","id":4742,"node_id":"MDQ6VXNlcjQ3NDI=","avatar_url":"https://avatars3.githubusercontent.com/u/4742?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticdog","html_url":"https://github.com/elasticdog","followers_url":"https://api.github.com/users/elasticdog/followers","following_url":"https://api.github.com/users/elasticdog/following{/other_user}","gists_url":"https://api.github.com/users/elasticdog/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticdog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticdog/subscriptions","organizations_url":"https://api.github.com/users/elasticdog/orgs","repos_url":"https://api.github.com/users/elasticdog/repos","events_url":"https://api.github.com/users/elasticdog/events{/privacy}","received_events_url":"https://api.github.com/users/elasticdog/received_events","type":"User","site_admin":false},"created_at":"2019-03-15T14:30:12Z","updated_at":"2019-03-15T14:35:30Z","author_association":"MEMBER","body":"I definitely agree that it would be good to come up with some mechanism to have experimental images without affecting the regular ones. It can be tricky to balance our own Packer build times and complexity, but I'll think about how we can introduce things like this more cleanly (I hadn't expected there to be any side effects to having this software baked into the images).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/474089697","html_url":"https://github.com/elastic/elasticsearch/issues/39977#issuecomment-474089697","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39977","id":474089697,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDA4OTY5Nw==","user":{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false},"created_at":"2019-03-18T20:34:02Z","updated_at":"2019-03-18T20:34:02Z","author_association":"MEMBER","body":"Another failure on 7.x, https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.x+periodic/226/console","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/474372054","html_url":"https://github.com/elastic/elasticsearch/issues/39977#issuecomment-474372054","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39977","id":474372054,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDM3MjA1NA==","user":{"login":"romseygeek","id":1347065,"node_id":"MDQ6VXNlcjEzNDcwNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/1347065?v=4","gravatar_id":"","url":"https://api.github.com/users/romseygeek","html_url":"https://github.com/romseygeek","followers_url":"https://api.github.com/users/romseygeek/followers","following_url":"https://api.github.com/users/romseygeek/following{/other_user}","gists_url":"https://api.github.com/users/romseygeek/gists{/gist_id}","starred_url":"https://api.github.com/users/romseygeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/romseygeek/subscriptions","organizations_url":"https://api.github.com/users/romseygeek/orgs","repos_url":"https://api.github.com/users/romseygeek/repos","events_url":"https://api.github.com/users/romseygeek/events{/privacy}","received_events_url":"https://api.github.com/users/romseygeek/received_events","type":"User","site_admin":false},"created_at":"2019-03-19T13:35:06Z","updated_at":"2019-03-19T13:35:06Z","author_association":"CONTRIBUTOR","body":"Another in 7x: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.x+intake/632/console","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/515907003","html_url":"https://github.com/elastic/elasticsearch/issues/39977#issuecomment-515907003","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39977","id":515907003,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTkwNzAwMw==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2019-07-29T08:56:58Z","updated_at":"2019-07-29T08:56:58Z","author_association":"CONTRIBUTOR","body":"More recent failure of this (not sure if related, or a different failure):\r\n\r\n```\r\n:test:fixtures:krb5kdc-fixture:composeUp FAILED\r\nBuilding peppa\r\nBuilding hdfs\r\nRecreating 276cd8b2e6fb66d48075e05cd8bd231c_krb5kdc-fixture__peppa_1 ... \r\nRecreating 276cd8b2e6fb66d48075e05cd8bd231c_krb5kdc-fixture__hdfs_1  ... \r\nRecreating 276cd8b2e6fb66d48075e05cd8bd231c_krb5kdc-fixture__peppa_1 ... error\r\n\r\nERROR: for 276cd8b2e6fb66d48075e05cd8bd231c_krb5kdc-fixture__peppa_1  Cannot start service peppa: unable to remount dir as readonly: device or resource busy\r\nRecreating 276cd8b2e6fb66d48075e05cd8bd231c_krb5kdc-fixture__hdfs_1  ... done\r\n\r\nERROR: for peppa  Cannot start service peppa: unable to remount dir as readonly: device or resource busy\r\nEncountered errors while bringing up the project.\r\nStopping 276cd8b2e6fb66d48075e05cd8bd231c_krb5kdc-fixture__hdfs_1 ... \r\nStopping 276cd8b2e6fb66d48075e05cd8bd231c_krb5kdc-fixture__hdfs_1 ... done\r\nRemoving 276cd8b2e6fb66d48075e05cd8bd231c_krb5kdc-fixture__hdfs_1               ... \r\nRemoving 276cd8b2e6fb66d48075e05cd8bd231c_krb5kdc-fixture__peppa_1              ... \r\nRemoving a75dff4beb91_276cd8b2e6fb66d48075e05cd8bd231c_krb5kdc-fixture__peppa_1 ... \r\nRemoving 276cd8b2e6fb66d48075e05cd8bd231c_krb5kdc-fixture__peppa_1              ... done\r\nRemoving a75dff4beb91_276cd8b2e6fb66d48075e05cd8bd231c_krb5kdc-fixture__peppa_1 ... done\r\nRemoving 276cd8b2e6fb66d48075e05cd8bd231c_krb5kdc-fixture__hdfs_1               ... done\r\nRemoving network 276cd8b2e6fb66d48075e05cd8bd231c_krb5kdc-fixture__default\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task ':test:fixtures:krb5kdc-fixture:composeUp'.\r\n> Exit-code 1 when calling /usr/local/bin/docker-compose, stdout: N/A\r\n```\r\n\r\nBuild scan: https://gradle.com/s/zhozfy4xnifjs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/528322912","html_url":"https://github.com/elastic/elasticsearch/issues/39977#issuecomment-528322912","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39977","id":528322912,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODMyMjkxMg==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-09-05T11:37:23Z","updated_at":"2019-09-05T11:37:23Z","author_association":"CONTRIBUTOR","body":"We switched to docker based fixtures so this is no longer applicable ","performed_via_github_app":null}]