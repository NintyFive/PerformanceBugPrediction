[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/312094690","html_url":"https://github.com/elastic/elasticsearch/issues/25350#issuecomment-312094690","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25350","id":312094690,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjA5NDY5MA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2017-06-29T20:29:23Z","updated_at":"2017-06-29T20:29:23Z","author_association":"MEMBER","body":"This looks like a bug in how similarities are registered. Currently they are added inside `Plugin.onIndexModule`. But this is too late when the node is starting up with existing similarites in index settings.\r\n\r\nI think we should move similarities out to a pull based plugin interface, and have the index get a registry of similarity impls. @s1monw wdyt?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/325533150","html_url":"https://github.com/elastic/elasticsearch/issues/25350#issuecomment-325533150","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25350","id":325533150,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNTUzMzE1MA==","user":{"login":"seekely","id":913863,"node_id":"MDQ6VXNlcjkxMzg2Mw==","avatar_url":"https://avatars3.githubusercontent.com/u/913863?v=4","gravatar_id":"","url":"https://api.github.com/users/seekely","html_url":"https://github.com/seekely","followers_url":"https://api.github.com/users/seekely/followers","following_url":"https://api.github.com/users/seekely/following{/other_user}","gists_url":"https://api.github.com/users/seekely/gists{/gist_id}","starred_url":"https://api.github.com/users/seekely/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seekely/subscriptions","organizations_url":"https://api.github.com/users/seekely/orgs","repos_url":"https://api.github.com/users/seekely/repos","events_url":"https://api.github.com/users/seekely/events{/privacy}","received_events_url":"https://api.github.com/users/seekely/received_events","type":"User","site_admin":false},"created_at":"2017-08-29T02:04:14Z","updated_at":"2017-08-29T02:05:06Z","author_association":"NONE","body":"We ran into the same issue when trying to upgrade from 2.3 to 5.2 (both in place and from snapshot).  We were thinking of patching and building ourselves, but a proper fix did not look very straight forward to our unfamiliar eyes since the similarities are not loaded until an IndexService is created and that looked a little tough to just mock/fake in this scenario.  ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/327238405","html_url":"https://github.com/elastic/elasticsearch/issues/25350#issuecomment-327238405","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25350","id":327238405,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzIzODQwNQ==","user":{"login":"xabbu42","id":98500,"node_id":"MDQ6VXNlcjk4NTAw","avatar_url":"https://avatars3.githubusercontent.com/u/98500?v=4","gravatar_id":"","url":"https://api.github.com/users/xabbu42","html_url":"https://github.com/xabbu42","followers_url":"https://api.github.com/users/xabbu42/followers","following_url":"https://api.github.com/users/xabbu42/following{/other_user}","gists_url":"https://api.github.com/users/xabbu42/gists{/gist_id}","starred_url":"https://api.github.com/users/xabbu42/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xabbu42/subscriptions","organizations_url":"https://api.github.com/users/xabbu42/orgs","repos_url":"https://api.github.com/users/xabbu42/repos","events_url":"https://api.github.com/users/xabbu42/events{/privacy}","received_events_url":"https://api.github.com/users/xabbu42/received_events","type":"User","site_admin":false},"created_at":"2017-09-05T16:56:33Z","updated_at":"2017-09-05T16:56:33Z","author_association":"CONTRIBUTOR","body":"I was also planning to try a patch myself using a similar workaround as is already done with analyzers in checkMappingsCompatibility. But the comments of rjernst suggest that the problem is more complex and so I'm waiting on further input before trying anything myself.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/327666606","html_url":"https://github.com/elastic/elasticsearch/issues/25350#issuecomment-327666606","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25350","id":327666606,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzY2NjYwNg==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2017-09-07T02:37:00Z","updated_at":"2017-09-07T02:37:00Z","author_association":"MEMBER","body":"@xabbu42 I think your idea of using a similar workaround as we do with analyzers is the correct solution. My earlier comment was missing some context and would be something nice to have, but is a separate issue.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/329516937","html_url":"https://github.com/elastic/elasticsearch/issues/25350#issuecomment-329516937","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25350","id":329516937,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTUxNjkzNw==","user":{"login":"pweerd","id":1112783,"node_id":"MDQ6VXNlcjExMTI3ODM=","avatar_url":"https://avatars0.githubusercontent.com/u/1112783?v=4","gravatar_id":"","url":"https://api.github.com/users/pweerd","html_url":"https://github.com/pweerd","followers_url":"https://api.github.com/users/pweerd/followers","following_url":"https://api.github.com/users/pweerd/following{/other_user}","gists_url":"https://api.github.com/users/pweerd/gists{/gist_id}","starred_url":"https://api.github.com/users/pweerd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pweerd/subscriptions","organizations_url":"https://api.github.com/users/pweerd/orgs","repos_url":"https://api.github.com/users/pweerd/repos","events_url":"https://api.github.com/users/pweerd/events{/privacy}","received_events_url":"https://api.github.com/users/pweerd/received_events","type":"User","site_admin":false},"created_at":"2017-09-14T15:22:35Z","updated_at":"2017-09-14T15:22:35Z","author_association":"NONE","body":"In general, I would advocate a settings that allows an index with a problematic custom similarity to be loaded anyway (with kind of a no-op similarity). This enables us to manipulate the index-definition afterwards.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/366401494","html_url":"https://github.com/elastic/elasticsearch/issues/25350#issuecomment-366401494","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25350","id":366401494,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjQwMTQ5NA==","user":{"login":"thomas11","id":12074,"node_id":"MDQ6VXNlcjEyMDc0","avatar_url":"https://avatars0.githubusercontent.com/u/12074?v=4","gravatar_id":"","url":"https://api.github.com/users/thomas11","html_url":"https://github.com/thomas11","followers_url":"https://api.github.com/users/thomas11/followers","following_url":"https://api.github.com/users/thomas11/following{/other_user}","gists_url":"https://api.github.com/users/thomas11/gists{/gist_id}","starred_url":"https://api.github.com/users/thomas11/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thomas11/subscriptions","organizations_url":"https://api.github.com/users/thomas11/orgs","repos_url":"https://api.github.com/users/thomas11/repos","events_url":"https://api.github.com/users/thomas11/events{/privacy}","received_events_url":"https://api.github.com/users/thomas11/received_events","type":"User","site_admin":false},"created_at":"2018-02-17T01:05:30Z","updated_at":"2018-02-17T01:05:30Z","author_association":"CONTRIBUTOR","body":"@rjernst I'd like to have this fix in the 5.x branch as well. I've ported it and it works for me locally. Can I open a PR?","performed_via_github_app":null}]