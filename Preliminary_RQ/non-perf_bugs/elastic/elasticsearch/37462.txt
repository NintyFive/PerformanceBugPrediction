{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/37462","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37462/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37462/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37462/events","html_url":"https://github.com/elastic/elasticsearch/issues/37462","id":399264423,"node_id":"MDU6SXNzdWUzOTkyNjQ0MjM=","number":37462,"title":"[CI] InternalTestClusterTests.testDifferentRolesMaintainPathOnRestart failure in master","user":{"login":"matriv","id":5058131,"node_id":"MDQ6VXNlcjUwNTgxMzE=","avatar_url":"https://avatars1.githubusercontent.com/u/5058131?v=4","gravatar_id":"","url":"https://api.github.com/users/matriv","html_url":"https://github.com/matriv","followers_url":"https://api.github.com/users/matriv/followers","following_url":"https://api.github.com/users/matriv/following{/other_user}","gists_url":"https://api.github.com/users/matriv/gists{/gist_id}","starred_url":"https://api.github.com/users/matriv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matriv/subscriptions","organizations_url":"https://api.github.com/users/matriv/orgs","repos_url":"https://api.github.com/users/matriv/repos","events_url":"https://api.github.com/users/matriv/events{/privacy}","received_events_url":"https://api.github.com/users/matriv/received_events","type":"User","site_admin":false},"labels":[{"id":881394071,"node_id":"MDU6TGFiZWw4ODEzOTQwNzE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Cluster%20Coordination","name":":Distributed/Cluster Coordination","color":"0e8a16","default":false,"description":"Cluster formation and cluster state publication, including cluster membership and fault detection."},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"assignees":[{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false}],"milestone":null,"comments":9,"created_at":"2019-01-15T09:49:55Z","updated_at":"2019-05-07T13:55:31Z","closed_at":"2019-05-07T13:55:31Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Log: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+intake/1273/consoleFull\r\nReproduced locally with:\r\n```\r\n./gradlew :test:framework:unitTest -Dtests.seed=431709D857335600\\\r\n-Dtests.class=org.elasticsearch.test.test.InternalTestClusterTests \\\r\n-Dtests.method=\"testDifferentRolesMaintainPathOnRestart\" \\\r\n-Dtests.security.manager=true \\\r\n-Dtests.locale=ja-JP \\\r\n-Dtests.timezone=Europe/Zagreb \\\r\n-Dcompiler.java=11 -Druntime.java=8\r\n```\r\n(maybe needs to run a few iterations...)\r\n\r\nFrom local console:\r\n```\r\nERROR   36.3s | InternalTestClusterTests.testDifferentRolesMaintainPathOnRestart <<< FAILURES!\r\n   > Throwable #1: java.lang.IllegalStateException: cluster failed to form with expected nodes [{d1}{vQj9SDp4SSytaQKFOBgpuw}{UheL3S_gQqmtJDn_4vJygw}{127.0.0.1}{127.0.0.1:64519}, {m3}{OAdzjyj2QX2TRScnKvSgGg}{W1HerG1cSMGFpO9z5zL0nA}{127.0.0.1}{127.0.0.1:64522}, {c0}{HFBEKTvPTuivc6kj6p9jWA}{T7o5UO1bSbi8DNLHUfpXKA}{127.0.0.1}{127.0.0.1:64516}, {d2}{HRwBysDhSWC9JeljyWIP8Q}{Aa5z2JHlQ9uVyhhMgQW4DQ}{127.0.0.1}{127.0.0.1:64517}, {m4}{KAt4eG1ORqaOH46A5Ptn0A}{I-deMwVNSCGbxZhyS4LbCA}{127.0.0.1}{127.0.0.1:64523}] and actual nodes nodes:\r\n   >    {d2}{HRwBysDhSWC9JeljyWIP8Q}{Aa5z2JHlQ9uVyhhMgQW4DQ}{127.0.0.1}{127.0.0.1:64517}\r\n   >    {m4}{KAt4eG1ORqaOH46A5Ptn0A}{I-deMwVNSCGbxZhyS4LbCA}{127.0.0.1}{127.0.0.1:64523}, local, master\r\n   >    at __randomizedtesting.SeedInfo.seed([431709D857335600:685839B7C408A5F5]:0)\r\n   >    at org.elasticsearch.test.InternalTestCluster.validateClusterFormed(InternalTestCluster.java:1181)\r\n   >    at org.elasticsearch.test.InternalTestCluster.validateClusterFormed(InternalTestCluster.java:1156)\r\n   >    at org.elasticsearch.test.InternalTestCluster.fullRestart(InternalTestCluster.java:1846)\r\n   >    at org.elasticsearch.test.InternalTestCluster.fullRestart(InternalTestCluster.java:1705)\r\n   >    at org.elasticsearch.test.test.InternalTestClusterTests.testDifferentRolesMaintainPathOnRestart(InternalTestClusterTests.java:478)\r\n   >    at java.lang.Thread.run(Thread.java:748)\r\n  2> NOTE: leaving temporary files on disk at: /Users/matriv/elastic/elasticsearch/test/framework/build/testrun/unitTest/J0/temp/org.elasticsearch.test.test.InternalTestClusterTests_431709D857335600-001\r\n  2> NOTE: test params are: codec=Asserting(Lucene80): {}, docValues:{}, maxPointsInLeafNode=1204, maxMBSortInHeap=6.077152004808969, sim=Asserting(org.apache.lucene.search.similarities.AssertingSimilarity@3a327e1c), locale=ja-JP, timezone=Europe/Zagreb\r\n  2> NOTE: Mac OS X 10.14.2 x86_64/Oracle Corporation 1.8.0_181 (64-bit)/cpus=12,threads=1,free=409719016,total=514850816\r\n  2> NOTE: All tests run in this JVM: [InternalTestClusterTests]\r\nCompleted [1/1] in 38.21s, 1 test, 1 error <<< FAILURES!\r\n```\r\nMaybe relates to this change: https://github.com/elastic/elasticsearch/pull/36977 ?","closed_by":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"performed_via_github_app":null}