{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/4938","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4938/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4938/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4938/events","html_url":"https://github.com/elastic/elasticsearch/issues/4938","id":26516943,"node_id":"MDU6SXNzdWUyNjUxNjk0Mw==","number":4938,"title":"RemoteTransportException when calling /cluster/pending_tasks during cluster startup/shard recovery","user":{"login":"oemebamo","id":907308,"node_id":"MDQ6VXNlcjkwNzMwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/907308?v=4","gravatar_id":"","url":"https://api.github.com/users/oemebamo","html_url":"https://github.com/oemebamo","followers_url":"https://api.github.com/users/oemebamo/followers","following_url":"https://api.github.com/users/oemebamo/following{/other_user}","gists_url":"https://api.github.com/users/oemebamo/gists{/gist_id}","starred_url":"https://api.github.com/users/oemebamo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oemebamo/subscriptions","organizations_url":"https://api.github.com/users/oemebamo/orgs","repos_url":"https://api.github.com/users/oemebamo/repos","events_url":"https://api.github.com/users/oemebamo/events{/privacy}","received_events_url":"https://api.github.com/users/oemebamo/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2014-01-29T12:36:54Z","updated_at":"2015-02-27T20:32:51Z","closed_at":"2014-07-23T13:52:44Z","author_association":"NONE","active_lock_reason":null,"body":"Yesterday we upgraded our Elasticsearch production cluster to 0.9.10 (from 0.9.7). One of the endpoints we monitor during this process is the `/cluster/pending_tasks` endpoint to see which tasks are waiting to be executed, and how big the queue is.\nHowever during the whole recovery of the cluster (from the moment all nodes were up and joined the cluster, until the moment all indices were again assigned), we received the following error:\n\n```\nRemoteTransportException[\n    Failed to deserialize response of type [\n        org.elasticsearch.action.admin.cluster.tasks.PendingClusterTasksResponse\n    ]\n]; nested: TransportSerializationException[\n    Failed to deserialize response of type [\n        org.elasticsearch.action.admin.cluster.tasks.PendingClusterTasksResponse\n    ]\n]; nested: ElasticSearchIllegalArgumentException[\n    can't find priority for [\n        -61\n    ]\n];\n```\n\n```\nArgumentException[can't find priority for [-61]];\n```\n\nSome time after the cluster state went back to green, the endpoint stopped giving that error. (Returning zero pending tasks.)\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}