{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/30839","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30839/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30839/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30839/events","html_url":"https://github.com/elastic/elasticsearch/issues/30839","id":326125368,"node_id":"MDU6SXNzdWUzMjYxMjUzNjg=","number":30839,"title":"Ranking Evaluation API: Support for ratings to be provided as query instead of documents only","user":{"login":"svola","id":1832934,"node_id":"MDQ6VXNlcjE4MzI5MzQ=","avatar_url":"https://avatars2.githubusercontent.com/u/1832934?v=4","gravatar_id":"","url":"https://api.github.com/users/svola","html_url":"https://github.com/svola","followers_url":"https://api.github.com/users/svola/followers","following_url":"https://api.github.com/users/svola/following{/other_user}","gists_url":"https://api.github.com/users/svola/gists{/gist_id}","starred_url":"https://api.github.com/users/svola/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/svola/subscriptions","organizations_url":"https://api.github.com/users/svola/orgs","repos_url":"https://api.github.com/users/svola/repos","events_url":"https://api.github.com/users/svola/events{/privacy}","received_events_url":"https://api.github.com/users/svola/received_events","type":"User","site_admin":false},"labels":[{"id":418189364,"node_id":"MDU6TGFiZWw0MTgxODkzNjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Ranking","name":":Search/Ranking","color":"0e8a16","default":false,"description":"Scoring, rescoring, rank evaluation."},{"id":23172,"node_id":"MDU6TGFiZWwyMzE3Mg==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Efeature","name":">feature","color":"006b75","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"assignees":[{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2018-05-24T13:36:22Z","updated_at":"2019-04-04T16:09:17Z","closed_at":"2019-04-04T16:09:17Z","author_association":"NONE","active_lock_reason":null,"body":"The Ranking Evaluation API introduced in Elasticsearch version 6.2 currently only supports ratings to be provided as a single document identified by `_index`, and `_id` with a `rating`.\r\n\r\nhttps://www.elastic.co/guide/en/elasticsearch/reference/6.2/search-rank-eval.html\r\n\r\n     \"ratings\": [ \r\n             { \"_index\": \"my_index\", \"_id\": \"doc1\", \"rating\": 0 },\r\n             { \"_index\": \"my_index\", \"_id\": \"doc2\", \"rating\": 3},\r\n             { \"_index\": \"my_index\", \"_id\": \"doc3\", \"rating\": 1 }\r\n     ]\r\n\r\nIt would be nice at least from a feature perspective to being able to provide a query instead of a single rated document. \r\nThis would allow for more documents to match and to semi-automatically create more testdata which is usually one of the most tedious parts/blocker in evaluation. \r\n\r\nExample:\r\n\r\n    {\r\n       \"ratings\":[\r\n          {\r\n             \"query\":{\r\n                \"more_like_this\":{\r\n                   \"fields\":[ \"title\", \"description\" ],\r\n                   \"like\":[{ \"_index\":\"my_index\",  \"_type\":\"doc\", \"_id\":\"doc2\"}]\r\n                }\r\n             },\r\n             \"rating\":3\r\n          }\r\n       ]\r\n    } \r\n\r\n","closed_by":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"performed_via_github_app":null}