{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/291","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/291/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/291/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/291/events","html_url":"https://github.com/elastic/elasticsearch/issues/291","id":267288,"node_id":"MDU6SXNzdWUyNjcyODg=","number":291,"title":"49 empty indexes with same field mappings won't start up","user":{"login":"ppearcy","id":307414,"node_id":"MDQ6VXNlcjMwNzQxNA==","avatar_url":"https://avatars3.githubusercontent.com/u/307414?v=4","gravatar_id":"","url":"https://api.github.com/users/ppearcy","html_url":"https://github.com/ppearcy","followers_url":"https://api.github.com/users/ppearcy/followers","following_url":"https://api.github.com/users/ppearcy/following{/other_user}","gists_url":"https://api.github.com/users/ppearcy/gists{/gist_id}","starred_url":"https://api.github.com/users/ppearcy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppearcy/subscriptions","organizations_url":"https://api.github.com/users/ppearcy/orgs","repos_url":"https://api.github.com/users/ppearcy/repos","events_url":"https://api.github.com/users/ppearcy/events{/privacy}","received_events_url":"https://api.github.com/users/ppearcy/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2010-08-03T05:17:13Z","updated_at":"2010-08-04T07:11:41Z","closed_at":"2010-08-04T07:11:41Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"This is reproducible on 0.9 and 0.9.1 snapshot. I am using a single node.\n\nRun this test file:\nhttp://gist.github.com/505870\n\nIt's not quite runnable as is but can be easily executed with a few lines of your chosen scripting language. It consists of alternating path and JSON against the path. First creates 49 indexes and then applies a single mapping to all of them. \n\nAfter this is shutdown the cluster and bring it back up. After 30 seconds the the service responds with a green status. After about 15 more minutes it goes red with a shard count of zero and gets stuck there. The whole time the CPU is churning and it seems to be repeatedly applying the mappings.\n\nI was able to reproduce with fewer indexes,  ~15, and this occurs 100% of the time.\n\nMy ES config file looks like:\n\ngateway:\n  type: fs\n  fs:\n    location: /data/elasticsearch/\n\nindex:\n  analysis :\n    analyzer :\n      piped :\n        type: pattern\n        lowercase: true\n        pattern: ||;\n        stopwords: []\n\npath:\n  logs: /data/elasticsearch/logs/\n\nPlease let me know if there are any questions or need anything else.\n\nThanks!\nPaul\n","closed_by":null,"performed_via_github_app":null}