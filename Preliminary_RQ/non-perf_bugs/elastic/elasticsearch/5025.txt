{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/5025","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5025/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5025/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5025/events","html_url":"https://github.com/elastic/elasticsearch/issues/5025","id":26993003,"node_id":"MDU6SXNzdWUyNjk5MzAwMw==","number":5025,"title":"Cluster API command to rebuild a shard in place","user":{"login":"seang-es","id":6352850,"node_id":"MDQ6VXNlcjYzNTI4NTA=","avatar_url":"https://avatars1.githubusercontent.com/u/6352850?v=4","gravatar_id":"","url":"https://api.github.com/users/seang-es","html_url":"https://github.com/seang-es","followers_url":"https://api.github.com/users/seang-es/followers","following_url":"https://api.github.com/users/seang-es/following{/other_user}","gists_url":"https://api.github.com/users/seang-es/gists{/gist_id}","starred_url":"https://api.github.com/users/seang-es/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seang-es/subscriptions","organizations_url":"https://api.github.com/users/seang-es/orgs","repos_url":"https://api.github.com/users/seang-es/repos","events_url":"https://api.github.com/users/seang-es/events{/privacy}","received_events_url":"https://api.github.com/users/seang-es/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2014-02-05T20:09:11Z","updated_at":"2015-03-10T18:37:10Z","closed_at":"2014-02-08T01:21:26Z","author_association":"NONE","active_lock_reason":null,"body":"It would be useful to have the ability to command a node to rebuild an existing replica shard in place, deleting the local copy and re-initializing it from the master.  The same effect can currently be obtained by moving the replica to another host and moving it back, but rebuilding in place would be simpler.  This probably makes the most sense as a 'rebuild' or 'resync' option under the _cluster/reroute command.\n\nEDIT:  The cancel command can be used to tear down an existing replica and force a rebuild somewhere else in the cluster.  This is not clearly specified in the reference docs.  I suggest rewording the following:\nCancel allocation of a shard (or recovery). Accepts index and shard for index name and shard number, and node for the node to cancel the shard allocation on. It also accepts allow_primary flag to explicitly specify that it is allowed to cancel allocation for a primary shard.\nto read:\nCancel allocation of a shard (or recovery). Accepts index and shard for index name and shard number, and node for the node to cancel the shard allocation on. It also accepts allow_primary flag to explicitly specify that it is allowed to cancel allocation for a primary shard.  This can be used to force resynchronization of existing replicas from the primary shard by cancelling them and allowing them to be reinitialized through the standard reallocation process.\n","closed_by":{"login":"seang-es","id":6352850,"node_id":"MDQ6VXNlcjYzNTI4NTA=","avatar_url":"https://avatars1.githubusercontent.com/u/6352850?v=4","gravatar_id":"","url":"https://api.github.com/users/seang-es","html_url":"https://github.com/seang-es","followers_url":"https://api.github.com/users/seang-es/followers","following_url":"https://api.github.com/users/seang-es/following{/other_user}","gists_url":"https://api.github.com/users/seang-es/gists{/gist_id}","starred_url":"https://api.github.com/users/seang-es/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seang-es/subscriptions","organizations_url":"https://api.github.com/users/seang-es/orgs","repos_url":"https://api.github.com/users/seang-es/repos","events_url":"https://api.github.com/users/seang-es/events{/privacy}","received_events_url":"https://api.github.com/users/seang-es/received_events","type":"User","site_admin":false},"performed_via_github_app":null}