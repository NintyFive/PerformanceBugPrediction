{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/40248","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40248/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40248/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40248/events","html_url":"https://github.com/elastic/elasticsearch/issues/40248","id":423182061,"node_id":"MDU6SXNzdWU0MjMxODIwNjE=","number":40248,"title":"Resolving queried indices runs in quadratic time with the number of queried indices","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-03-20T10:43:44Z","updated_at":"2019-04-03T14:54:22Z","closed_at":"2019-04-03T14:54:22Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Say you run a request against the index pattern `index-*`. First we resolve `index-*` to a list of concrete indices. But then we do work on each index that runs in linear time with the number of matched expressions, such as `IndexNameExpressionResolver#filteringAliases` which figures out whether some matched concrete indices require filtering because they were matched through an alias.\r\n\r\nWhen querying lots of indices at once, this can become the main bottleneck of query execution. This is especially harmful now that Kibana queries entire index patterns such as `logstash-*` and relies on Elasticsearch's `can_match` phase to do the filtering of indices that don't have matches.\r\n\r\n\r\n","closed_by":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"performed_via_github_app":null}