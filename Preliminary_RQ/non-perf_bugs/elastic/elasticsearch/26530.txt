{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/26530","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26530/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26530/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26530/events","html_url":"https://github.com/elastic/elasticsearch/issues/26530","id":255856484,"node_id":"MDU6SXNzdWUyNTU4NTY0ODQ=","number":26530,"title":"ReplicationTask$Status.toXContent throws \"Can not start an object, expecting field name (context: Object)\" exception","user":{"login":"floragunn","id":11678154,"node_id":"MDQ6VXNlcjExNjc4MTU0","avatar_url":"https://avatars3.githubusercontent.com/u/11678154?v=4","gravatar_id":"","url":"https://api.github.com/users/floragunn","html_url":"https://github.com/floragunn","followers_url":"https://api.github.com/users/floragunn/followers","following_url":"https://api.github.com/users/floragunn/following{/other_user}","gists_url":"https://api.github.com/users/floragunn/gists{/gist_id}","starred_url":"https://api.github.com/users/floragunn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/floragunn/subscriptions","organizations_url":"https://api.github.com/users/floragunn/orgs","repos_url":"https://api.github.com/users/floragunn/repos","events_url":"https://api.github.com/users/floragunn/events{/privacy}","received_events_url":"https://api.github.com/users/floragunn/received_events","type":"User","site_admin":false},"labels":[{"id":356863226,"node_id":"MDU6TGFiZWwzNTY4NjMyMjY=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Pioneer%20Program","name":"Pioneer Program","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2017-09-07T08:31:12Z","updated_at":"2017-09-07T09:47:26Z","closed_at":"2017-09-07T09:47:26Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version** (`bin/elasticsearch --version`): \r\n6.0.0-beta2\r\n\r\n**Plugins installed**: \r\nnone\r\n\r\n**JVM version** (`java -version`):\r\njava version \"1.8.0_121\"\r\nJava(TM) SE Runtime Environment (build 1.8.0_121-b13)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.121-b13, mixed mode)\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): \r\nMac OS X x86_64 10.10.5\r\n14.5.0 Darwin Kernel Version 14.5.0: Sun Jun  4 21:40:08 PDT 2017; root:xnu-2782.70.3~1/RELEASE_X86_64 x86_64\r\n\r\n**Description of the problem including expected versus actual behavior**: `ReplicationTask$Status.toXContent` should produce valid Xcontent and not throw an `com.fasterxml.jackson.core.JsonGenerationException`. \r\n\r\n**Steps to reproduce**:\r\nExecute Task.getStatus() on a `indices:data/write/bulk[s]` task, for example create a an ActionFilter and write something like this:\r\n\r\n<pre>\r\n@Override\r\n    public <Request extends ActionRequest, Response extends ActionResponse> void apply(Task task, String action, Request request,\r\n            ActionListener<Response> listener, ActionFilterChain<Request, Response> chain) {\r\n        \r\n        System.out.println(\"Task \"+task.getAction()+\"#\"+task.getType()+\"#\"+task.getStatus()+\"#\"+task.getParentTaskId());\r\n        ...\r\n</pre>\r\n\r\n**Provide logs (if relevant)**:\r\n\r\n<pre>\r\nError building toString out of XContent: com.fasterxml.jackson.core.JsonGenerationException: Can not start an object, expecting field name (context: Object)\r\n\tat com.fasterxml.jackson.core.JsonGenerator._reportError(JsonGenerator.java:1897)\r\n\tat com.fasterxml.jackson.core.json.JsonGeneratorImpl._reportCantWriteValueExpectName(JsonGeneratorImpl.java:244)\r\n\tat com.fasterxml.jackson.core.json.UTF8JsonGenerator._verifyValueWrite(UTF8JsonGenerator.java:1027)\r\n\tat com.fasterxml.jackson.core.json.UTF8JsonGenerator.writeStartObject(UTF8JsonGenerator.java:313)\r\n\tat org.elasticsearch.common.xcontent.json.JsonXContentGenerator.writeStartObject(JsonXContentGenerator.java:156)\r\n\tat org.elasticsearch.common.xcontent.XContentBuilder.startObject(XContentBuilder.java:217)\r\n\tat org.elasticsearch.action.support.replication.ReplicationTask$Status.toXContent(ReplicationTask.java:82)\r\n\tat org.elasticsearch.common.Strings.toString(Strings.java:803)\r\n\tat org.elasticsearch.action.support.replication.ReplicationTask$Status.toString(ReplicationTask.java:95)\r\n...\r\n</pre>","closed_by":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"performed_via_github_app":null}