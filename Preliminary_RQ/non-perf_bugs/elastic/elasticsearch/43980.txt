{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/43980","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43980/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43980/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43980/events","html_url":"https://github.com/elastic/elasticsearch/issues/43980","id":464262603,"node_id":"MDU6SXNzdWU0NjQyNjI2MDM=","number":43980,"title":"Elasticsearch 7.2.0 | Windows | Basic Plan | Elasticsearch service doesn't start when x-pack.security.enabled=true","user":{"login":"andrewjames0304","id":30902454,"node_id":"MDQ6VXNlcjMwOTAyNDU0","avatar_url":"https://avatars3.githubusercontent.com/u/30902454?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewjames0304","html_url":"https://github.com/andrewjames0304","followers_url":"https://api.github.com/users/andrewjames0304/followers","following_url":"https://api.github.com/users/andrewjames0304/following{/other_user}","gists_url":"https://api.github.com/users/andrewjames0304/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewjames0304/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewjames0304/subscriptions","organizations_url":"https://api.github.com/users/andrewjames0304/orgs","repos_url":"https://api.github.com/users/andrewjames0304/repos","events_url":"https://api.github.com/users/andrewjames0304/events{/privacy}","received_events_url":"https://api.github.com/users/andrewjames0304/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2019-07-04T13:18:14Z","updated_at":"2019-07-08T11:57:43Z","closed_at":"2019-07-04T14:28:22Z","author_association":"NONE","active_lock_reason":null,"body":"Elasticsearch Version: 7.2.0\r\nJava Version: 12\r\nOS: Windows\r\nEnvironment: Development / Local\r\n\r\nElasticsearch service stops running when I added the line \"xpack.security.enabled:true\" in the YAML file.\r\nSteps followed:\r\n\r\n1. Stopped Elasticsearch and Kibana.\r\n2. Added the line: \"xpack.security.enabled:true\" and \"discovery.type: single-node\" in Elasticsearch.YML\r\n3. Started the service. \r\n4. Error -> \"Windows could not start the Elasticsearch 7.2.0 on Local Computer. If this is a non-Microsoft service, contact the service vendor, and refer to service-specific error code 1.\"\r\n\r\nElasticsearch Logs:\r\n`[2019-07-04T12:22:37,265][INFO ][o.e.e.NodeEnvironment    ] [node-1] using [1] data paths, mounts [[New Volume (D:)]], net usable_space [125.3gb], net total_space [249.9gb], types [NTFS]\r\n[2019-07-04T12:22:37,267][INFO ][o.e.e.NodeEnvironment    ] [node-1] heap size [989.8mb], compressed ordinary object pointers [true]\r\n[2019-07-04T12:22:37,367][INFO ][o.e.n.Node               ] [node-1] node name [node-1], node ID [Ioj86wl5QcGDZWefBIqLKQ], cluster name [my-application]\r\n[2019-07-04T12:22:37,368][INFO ][o.e.n.Node               ] [node-1] version[7.2.0], pid[456180], build[default/zip/508c38a/2019-06-20T15:54:18.811730Z], OS[Windows Server 2012 R2/6.3/amd64], JVM[Oracle Corporation/Java HotSpot(TM) 64-Bit Server VM/1.8.0_211/25.211-b12]\r\n[2019-07-04T12:22:37,369][INFO ][o.e.n.Node               ] [node-1] JVM home [C:\\Program Files\\Java\\jdk1.8.0_211\\jre]\r\n[2019-07-04T12:22:37,369][INFO ][o.e.n.Node               ] [node-1] JVM arguments [-Xms1g, -Xmx1g, -XX:+UseConcMarkSweepGC, -XX:CMSInitiatingOccupancyFraction=75, -XX:+UseCMSInitiatingOccupancyOnly, -Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Djava.io.tmpdir=, -XX:+HeapDumpOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -XX:+PrintGCDetails, -XX:+PrintGCDateStamps, -XX:+PrintTenuringDistribution, -XX:+PrintGCApplicationStoppedTime, -Xloggc:logs/gc.log, -XX:+UseGCLogFileRotation, -XX:NumberOfGCLogFiles=32, -XX:GCLogFileSize=64m, -Dio.netty.allocator.type=unpooled, -XX:MaxDirectMemorySize=536870912, -Delasticsearch, -Des.path.home=D:\\Elasticsearch\\elasticsearch-7.2.0-windows-x86_64\\elasticsearch-7.2.0, -Des.path.conf=D:\\Elasticsearch\\elasticsearch-7.2.0-windows-x86_64\\elasticsearch-7.2.0\\config, -Des.distribution.flavor=default, -Des.distribution.type=zip, -Des.bundled_jdk=true, exit, abort, -Xms1024m, -Xmx1024m, -Xss1024k]\r\n[2019-07-04T12:22:40,263][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [aggs-matrix-stats]\r\n[2019-07-04T12:22:40,264][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [analysis-common]\r\n[2019-07-04T12:22:40,264][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [data-frame]\r\n[2019-07-04T12:22:40,264][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [ingest-common]\r\n[2019-07-04T12:22:40,265][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [ingest-geoip]\r\n[2019-07-04T12:22:40,265][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [ingest-user-agent]\r\n[2019-07-04T12:22:40,265][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [lang-expression]\r\n[2019-07-04T12:22:40,265][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [lang-mustache]\r\n[2019-07-04T12:22:40,266][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [lang-painless]\r\n[2019-07-04T12:22:40,266][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [mapper-extras]\r\n[2019-07-04T12:22:40,266][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [parent-join]\r\n[2019-07-04T12:22:40,266][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [percolator]\r\n[2019-07-04T12:22:40,267][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [rank-eval]\r\n[2019-07-04T12:22:40,267][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [reindex]\r\n[2019-07-04T12:22:40,267][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [repository-url]\r\n[2019-07-04T12:22:40,267][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [transport-netty4]\r\n[2019-07-04T12:22:40,268][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [x-pack-ccr]\r\n[2019-07-04T12:22:40,268][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [x-pack-core]\r\n[2019-07-04T12:22:40,268][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [x-pack-deprecation]\r\n[2019-07-04T12:22:40,269][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [x-pack-graph]\r\n[2019-07-04T12:22:40,269][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [x-pack-ilm]\r\n[2019-07-04T12:22:40,269][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [x-pack-logstash]\r\n[2019-07-04T12:22:40,269][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [x-pack-ml]\r\n[2019-07-04T12:22:40,270][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [x-pack-monitoring]\r\n[2019-07-04T12:22:40,270][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [x-pack-rollup]\r\n[2019-07-04T12:22:40,270][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [x-pack-security]\r\n[2019-07-04T12:22:40,270][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [x-pack-sql]\r\n[2019-07-04T12:22:40,271][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [x-pack-watcher]\r\n[2019-07-04T12:22:40,271][INFO ][o.e.p.PluginsService     ] [node-1] no plugins loaded\r\n[2019-07-04T12:22:40,995][WARN ][i.n.u.i.PlatformDependent] [node-1] Failed to get the temporary directory; falling back to: C:\\Windows\\Temp\r\n[2019-07-04T12:22:45,592][INFO ][o.e.x.s.a.s.FileRolesStore] [node-1] parsed [0] roles from file [D:\\Elasticsearch\\elasticsearch-7.2.0-windows-x86_64\\elasticsearch-7.2.0\\config\\roles.yml]\r\n[2019-07-04T12:22:46,562][INFO ][o.e.x.m.p.l.CppLogMessageHandler] [node-1] [controller/454612] [Main.cc@110] controller (64 bit): Version 7.2.0 (Build 65aefcbfce449b) Copyright (c) 2019 Elasticsearch BV\r\n[2019-07-04T12:22:47,212][DEBUG][o.e.a.ActionModule       ] [node-1] Using REST wrapper from plugin org.elasticsearch.xpack.security.Security\r\n[2019-07-04T12:22:47,275][WARN ][i.n.u.i.PlatformDependent] [node-1] Failed to get the temporary directory; falling back to: C:\\Windows\\Temp\r\n[2019-07-04T12:22:47,741][INFO ][o.e.d.DiscoveryModule    ] [node-1] using discovery type [zen] and seed hosts providers [settings]\r\n[2019-07-04T12:22:48,940][INFO ][o.e.n.Node               ] [node-1] initialized\r\n[2019-07-04T12:22:48,941][INFO ][o.e.n.Node               ] [node-1] starting ...\r\n[2019-07-04T12:22:49,284][INFO ][o.e.t.TransportService   ] [node-1] publish_address {127.0.0.1:9300}, bound_addresses {127.0.0.1:9300}, {[::1]:9300}\r\n[2019-07-04T12:22:49,332][WARN ][o.e.b.BootstrapChecks    ] [node-1] the default discovery settings are unsuitable for production use; at least one of [discovery.seed_hosts, discovery.seed_providers, cluster.initial_master_nodes] must be configured\r\n[2019-07-04T12:22:49,338][INFO ][o.e.c.c.Coordinator      ] [node-1] cluster UUID [jXDzyHaWQaS5vO5REGc3gw]\r\n[2019-07-04T12:22:49,354][INFO ][o.e.c.c.ClusterBootstrapService] [node-1] no discovery configuration found, will perform best-effort cluster bootstrapping after [3s] unless existing master is discovered\r\n[2019-07-04T12:22:49,477][INFO ][o.e.c.s.MasterService    ] [node-1] elected-as-master ([1] nodes joined)[{node-1}{Ioj86wl5QcGDZWefBIqLKQ}{cJk6iZ6nQg2Uhf-dPptITQ}{127.0.0.1}{127.0.0.1:9300}{ml.machine_memory=65497841664, xpack.installed=true, ml.max_open_jobs=20} elect leader, _BECOME_MASTER_TASK_, _FINISH_ELECTION_], term: 6, version: 56, reason: master node changed {previous [], current [{node-1}{Ioj86wl5QcGDZWefBIqLKQ}{cJk6iZ6nQg2Uhf-dPptITQ}{127.0.0.1}{127.0.0.1:9300}{ml.machine_memory=65497841664, xpack.installed=true, ml.max_open_jobs=20}]}\r\n[2019-07-04T12:22:49,564][INFO ][o.e.c.s.ClusterApplierService] [node-1] master node changed {previous [], current [{node-1}{Ioj86wl5QcGDZWefBIqLKQ}{cJk6iZ6nQg2Uhf-dPptITQ}{127.0.0.1}{127.0.0.1:9300}{ml.machine_memory=65497841664, xpack.installed=true, ml.max_open_jobs=20}]}, term: 6, version: 56, reason: Publication{term=6, version=56}\r\n[2019-07-04T12:22:49,705][INFO ][o.e.c.s.ClusterSettings  ] [node-1] updating [xpack.monitoring.collection.enabled] from [false] to [true]\r\n[2019-07-04T12:22:49,719][INFO ][o.e.h.AbstractHttpServerTransport] [node-1] publish_address {127.0.0.1:9200}, bound_addresses {127.0.0.1:9200}, {[::1]:9200}\r\n[2019-07-04T12:22:49,719][INFO ][o.e.n.Node               ] [node-1] started\r\n[2019-07-04T12:22:49,949][INFO ][o.e.l.LicenseService     ] [node-1] license [e1b30741-72db-4ffe-83a1-f8b18cd0509a] mode [basic] - valid\r\n[2019-07-04T12:22:49,959][INFO ][o.e.g.GatewayService     ] [node-1] recovered [4] indices into cluster_state\r\n[2019-07-04T12:22:50,753][INFO ][o.e.c.r.a.AllocationService] [node-1] Cluster health status changed from [RED] to [GREEN] (reason: [shards started [[.monitoring-kibana-7-2019.07.04][0], [.kibana_1][0], [.monitoring-es-7-2019.07.04][0]] ...]).\r\n[2019-07-04T12:24:24,602][INFO ][o.e.n.Node               ] [node-1] stopping ...\r\n[2019-07-04T12:24:24,617][INFO ][o.e.x.w.WatcherService   ] [node-1] stopping watch service, reason [shutdown initiated]\r\n[2019-07-04T12:24:24,934][INFO ][o.e.x.m.p.l.CppLogMessageHandler] [node-1] [controller/454612] [Main.cc@150] Ml controller exiting\r\n[2019-07-04T12:24:24,935][INFO ][o.e.x.m.p.NativeController] [node-1] Native controller process has stopped - no new native processes can be started\r\n[2019-07-04T12:24:25,180][INFO ][o.e.n.Node               ] [node-1] stopped\r\n[2019-07-04T12:24:25,181][INFO ][o.e.n.Node               ] [node-1] closing ...\r\n[2019-07-04T12:24:25,196][INFO ][o.e.n.Node               ] [node-1] closed\r\n`\r\nDid I trigger the Production mode by invoking the discovery field?\r\n","closed_by":{"login":"henningandersen","id":33268011,"node_id":"MDQ6VXNlcjMzMjY4MDEx","avatar_url":"https://avatars2.githubusercontent.com/u/33268011?v=4","gravatar_id":"","url":"https://api.github.com/users/henningandersen","html_url":"https://github.com/henningandersen","followers_url":"https://api.github.com/users/henningandersen/followers","following_url":"https://api.github.com/users/henningandersen/following{/other_user}","gists_url":"https://api.github.com/users/henningandersen/gists{/gist_id}","starred_url":"https://api.github.com/users/henningandersen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henningandersen/subscriptions","organizations_url":"https://api.github.com/users/henningandersen/orgs","repos_url":"https://api.github.com/users/henningandersen/repos","events_url":"https://api.github.com/users/henningandersen/events{/privacy}","received_events_url":"https://api.github.com/users/henningandersen/received_events","type":"User","site_admin":false},"performed_via_github_app":null}