{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/19635","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19635/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19635/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19635/events","html_url":"https://github.com/elastic/elasticsearch/issues/19635","id":167963501,"node_id":"MDU6SXNzdWUxNjc5NjM1MDE=","number":19635,"title":"Make snapshots save in new directory","user":{"login":"shaharmor","id":10861920,"node_id":"MDQ6VXNlcjEwODYxOTIw","avatar_url":"https://avatars3.githubusercontent.com/u/10861920?v=4","gravatar_id":"","url":"https://api.github.com/users/shaharmor","html_url":"https://github.com/shaharmor","followers_url":"https://api.github.com/users/shaharmor/followers","following_url":"https://api.github.com/users/shaharmor/following{/other_user}","gists_url":"https://api.github.com/users/shaharmor/gists{/gist_id}","starred_url":"https://api.github.com/users/shaharmor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shaharmor/subscriptions","organizations_url":"https://api.github.com/users/shaharmor/orgs","repos_url":"https://api.github.com/users/shaharmor/repos","events_url":"https://api.github.com/users/shaharmor/events{/privacy}","received_events_url":"https://api.github.com/users/shaharmor/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2016-07-27T21:41:10Z","updated_at":"2016-07-27T21:58:14Z","closed_at":"2016-07-27T21:58:14Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the feature**:\nWhen taking a snapshot, the files are saved to the `location` defined in the repository settings.\nIf another snapshot is being taken right after the first one, it will be saved to the same directory as the first one, mixing the files together (Possibly overriding some of them?).\n\nIt would be nice if each snapshot would be saved to a new directory. It can be possible to either set the name in the snapshot command or maybe use a timestamp of some sort.\n\nSo when running:\n\n``` bash\n# create repository\ncurl -XPUT 'http://localhost:9200/_snapshot/my_backup' -d '{\n    \"type\": \"fs\",\n    \"settings\": {\n        \"location\": \"/mount/backups/my_backup\",\n        \"compress\": true\n    }\n}'\n\n# create snapshot\ncurl -XPUT 'http://localhost:9200/_snapshot/my_backup/my_snapshot' -d '{\n  \"indices\": \"index_1,index_2\",\n  \"ignore_unavailable\": \"true\",\n  \"include_global_state\": false\n}'\n```\n\nIt will be saved to `/mount/backups/my_backup/my_snapshot/` instead of `/mount/backups/my_backup/` directly.\n","closed_by":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"performed_via_github_app":null}