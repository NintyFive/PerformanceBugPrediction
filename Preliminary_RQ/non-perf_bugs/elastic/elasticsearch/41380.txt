{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/41380","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41380/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41380/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41380/events","html_url":"https://github.com/elastic/elasticsearch/issues/41380","id":435221632,"node_id":"MDU6SXNzdWU0MzUyMjE2MzI=","number":41380,"title":"integ-test-zip:integTestRunner is unable to run individual/suites of yaml tests","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"labels":[{"id":106454670,"node_id":"MDU6TGFiZWwxMDY0NTQ2NzA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Build","name":":Delivery/Build","color":"0e8a16","default":false,"description":"Build or test infrastructure"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"}],"state":"closed","locked":false,"assignee":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"assignees":[{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false}],"milestone":null,"comments":9,"created_at":"2019-04-19T15:51:59Z","updated_at":"2020-11-11T21:49:07Z","closed_at":"2019-12-11T22:19:27Z","author_association":"MEMBER","active_lock_reason":null,"body":"It seems `:distribution:archives:integ-test-zip:integTestRunner` is unable execute specific YAML tests or \"suites\" of yaml tests when using the `--tests` syntax.  E.g. trying to run this command (from a failure repro line) or the entire `search.aggregations` suite:\r\n\r\n```\r\n./gradlew :distribution:archives:integ-test-zip:integTestRunner --tests \"org.elasticsearch.test.rest.IntegTestZipClientYamlTestSuiteIT.test {p0=search.aggregation/Simple Composite aggregation}\" -Dtests.seed=87CCC23B63F5ABF7 -Dtests.security.manager=true -Dtests.locale=saq -Dtests.timezone=Pacific/Chatham -Dcompiler.java=12 -Druntime.java=11\r\n```\r\n```\r\n./gradlew :distribution:archives:integ-test-zip:integTestRunner --tests \"org.elasticsearch.test.rest.IntegTestZipClientYamlTestSuiteIT.test {p0=search.aggregation/*}\" -Dtests.seed=87CCC23B63F5ABF7 -Dtests.security.manager=true -Dtests.locale=saq -Dtests.timezone=Pacific/Chatham -Dcompiler.java=12 -Druntime.java=11\r\n```\r\nBoth fail with an exception:\r\n\r\n```\r\nExecution failed for task ':distribution:archives:integ-test-zip:integTestRunner'.\r\n> No tests found for given includes: [**/*IT.class](include rules) [**/*$*.class](exclude rules) [org.elasticsearch.test.rest.IntegTestZipClientYamlTestSuiteIT.test {p0=search.aggregation/*}](--tests filter)\r\n```\r\n\r\nThis appears to be at least partially isolated to the `:distribution:archives:integ-test-zip:integTestRunner` tests, since a similar test run with `:x-pack:plugin:integTestRunner` works fine:\r\n\r\n```\r\n./gradlew :x-pack:plugin:integTestRunner --tests \"org.elasticsearch.xpack.test.rest.XPackRestIT.test {p0=rollup/*}\" -Dtests.seed=CE14E0490F1C442F -Dtests.security.manager=true -Dtests.locale=af-ZA -Dtests.timezone=Europe/Zurich -Dcompiler.java=12 -Druntime.java=11 -Dtests.rest.blacklist=getting_started/10_monitor_cluster_health/*\r\n```\r\n\r\nThis is all on master, btw.","closed_by":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"performed_via_github_app":null}