{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/54396","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54396/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54396/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54396/events","html_url":"https://github.com/elastic/elasticsearch/issues/54396","id":590092012,"node_id":"MDU6SXNzdWU1OTAwOTIwMTI=","number":54396,"title":"[CI] Aggregation mixed cluster failure","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"labels":[{"id":141141324,"node_id":"MDU6TGFiZWwxNDExNDEzMjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Analytics/Aggregations","name":":Analytics/Aggregations","color":"0e8a16","default":false,"description":"Aggregations"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"assignees":[{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false}],"milestone":null,"comments":6,"created_at":"2020-03-30T08:26:48Z","updated_at":"2020-03-30T15:37:39Z","closed_at":"2020-03-30T15:37:39Z","author_association":"MEMBER","active_lock_reason":null,"body":"A serialization failure, because of an unknown named writeable in `MixedClusterClientYamlTestSuiteIT test {p0=search.aggregation/330_auto_date_histogram/basic}`\r\n\r\nFailure:\r\n\r\n```\r\n[2020-03-30T14:31:28,724][INFO ][o.e.b.MixedClusterClientYamlTestSuiteIT] [test] Stash dump on test failure [{\r\n  \"stash\" : {\r\n    \"body\" : {\r\n      \"error\" : {\r\n        \"root_cause\" : [\r\n          {\r\n            \"type\" : \"illegal_argument_exception\",\r\n            \"reason\" : \"Unknown NamedWriteable [org.elasticsearch.search.aggregations.PipelineAggregationBuilder][]\",\r\n            \"stack_trace\" : \"org.elasticsearch.ElasticsearchException$1: Unknown NamedWriteable [org.elasticsearch.search.aggregations.PipelineAggregationBuilder][]\r\n\tat org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:644)\r\n\tat org.elasticsearch.action.search.SearchPhaseExecutionException.guessRootCauses(SearchPhaseExecutionException.java:167)\r\n\tat org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:626)\r\n\tat org.elasticsearch.ElasticsearchException.generateFailureXContent(ElasticsearchException.java:572)\r\n\tat org.elasticsearch.rest.BytesRestResponse.build(BytesRestResponse.java:138)\r\n\tat org.elasticsearch.rest.BytesRestResponse.<init>(BytesRestResponse.java:96)\r\n\tat org.elasticsearch.rest.BytesRestResponse.<init>(BytesRestResponse.java:91)\r\n    ...\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\nCaused by: java.lang.IllegalArgumentException: Unknown NamedWriteable [org.elasticsearch.search.aggregations.PipelineAggregationBuilder][]\r\n\tat org.elasticsearch.common.io.stream.NamedWriteableRegistry.getReader(NamedWriteableRegistry.java:112)\r\n\tat org.elasticsearch.common.io.stream.NamedWriteableAwareStreamInput.readNamedWriteable(NamedWriteableAwareStreamInput.java:45)\r\n\tat org.elasticsearch.common.io.stream.NamedWriteableAwareStreamInput.readNamedWriteable(NamedWriteableAwareStreamInput.java:39)\r\n\tat org.elasticsearch.search.aggregations.AggregatorFactories$Builder.<init>(AggregatorFactories.java:257)\r\n\tat org.elasticsearch.common.io.stream.StreamInput.readOptionalWriteable(StreamInput.java:989)\r\n\tat org.elasticsearch.search.builder.SearchSourceBuilder.<init>(SearchSourceBuilder.java:204)\r\n\tat org.elasticsearch.common.io.stream.StreamInput.readOptionalWriteable(StreamInput.java:989)\r\n\tat org.elasticsearch.search.internal.ShardSearchRequest.<init>(ShardSearchRequest.java:167)\r\n\tat org.elasticsearch.transport.RequestHandlerRegistry.newRequest(RequestHandlerRegistry.java:56)\r\n\tat org.elasticsearch.transport.InboundHandler.handleRequest(InboundHandler.java:187)\r\n\tat org.elasticsearch.transport.InboundHandler.messageReceived(InboundHandler.java:130)\r\n\tat org.elasticsearch.transport.InboundHandler.inboundMessage(InboundHandler.java:107)\r\n\tat org.elasticsearch.transport.TcpTransport.inboundMessage(TcpTransport.java:681)\r\n\tat org.elasticsearch.transport.InboundPipeline.forwardFragments(InboundPipeline.java:136)\r\n\tat org.elasticsearch.transport.InboundPipeline.handleBytes(InboundPipeline.java:110)\r\n\tat org.elasticsearch.transport.netty4.Netty4MessageChannelHandler.channelRead(Netty4MessageChannelHandler.java:68)\r\n```\r\n\r\nBuild url: https://gradle-enterprise.elastic.co/s/wdpjhc2oh534q/tests/77udqutc4yt34-blndfefc2cef2\r\n\r\nReproduce line: `./gradlew ':qa:mixed-cluster:v7.8.0#mixedClusterTest' --tests \"org.elasticsearch.backwards.MixedClusterClientYamlTestSuiteIT\" -Dtests.method=\"test {p0=search.aggregation/330_auto_date_histogram/basic}\" -Dtests.seed=2DD4185E797F2251 -Dtests.security.manager=true -Dtests.locale=he -Dtests.timezone=Asia/Ujung_Pandang -Dcompiler.java=13`\r\n\r\nThis does not reproduce for me locally.","closed_by":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"performed_via_github_app":null}