[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/516798591","html_url":"https://github.com/elastic/elasticsearch/issues/45034#issuecomment-516798591","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45034","id":516798591,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjc5ODU5MQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-07-31T10:48:58Z","updated_at":"2019-07-31T10:48:58Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/516822637","html_url":"https://github.com/elastic/elasticsearch/issues/45034#issuecomment-516822637","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45034","id":516822637,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjgyMjYzNw==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-07-31T12:14:18Z","updated_at":"2019-07-31T12:14:18Z","author_association":"CONTRIBUTOR","body":"This is an oversight in that we made docker mandatory for building artifacts and optional for running tests only, so if you run `assemble` it will fail that it's required but running `check` will skip the docker based tests and thus will also avoid building the distribution so it will run to completion. \r\n\r\nThe recommendation is to build only a specific distribution of interest.   ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/518014772","html_url":"https://github.com/elastic/elasticsearch/issues/45034#issuecomment-518014772","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45034","id":518014772,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODAxNDc3Mg==","user":{"login":"fayak","id":11300056,"node_id":"MDQ6VXNlcjExMzAwMDU2","avatar_url":"https://avatars3.githubusercontent.com/u/11300056?v=4","gravatar_id":"","url":"https://api.github.com/users/fayak","html_url":"https://github.com/fayak","followers_url":"https://api.github.com/users/fayak/followers","following_url":"https://api.github.com/users/fayak/following{/other_user}","gists_url":"https://api.github.com/users/fayak/gists{/gist_id}","starred_url":"https://api.github.com/users/fayak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fayak/subscriptions","organizations_url":"https://api.github.com/users/fayak/orgs","repos_url":"https://api.github.com/users/fayak/repos","events_url":"https://api.github.com/users/fayak/events{/privacy}","received_events_url":"https://api.github.com/users/fayak/received_events","type":"User","site_admin":false},"created_at":"2019-08-04T15:54:31Z","updated_at":"2019-08-04T15:54:31Z","author_association":"NONE","body":"> The recommendation is to build only a specific distribution of interest.\r\n\r\nWhat is the best approach to do so ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/518108873","html_url":"https://github.com/elastic/elasticsearch/issues/45034#issuecomment-518108873","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45034","id":518108873,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODEwODg3Mw==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-08-05T06:50:52Z","updated_at":"2019-08-05T06:50:52Z","author_association":"CONTRIBUTOR","body":"@fayak for example: \r\n```\r\n./gradlew -p  distribution/archives/no-jdk-linux-tar assemble\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/518243786","html_url":"https://github.com/elastic/elasticsearch/issues/45034#issuecomment-518243786","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45034","id":518243786,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODI0Mzc4Ng==","user":{"login":"fayak","id":11300056,"node_id":"MDQ6VXNlcjExMzAwMDU2","avatar_url":"https://avatars3.githubusercontent.com/u/11300056?v=4","gravatar_id":"","url":"https://api.github.com/users/fayak","html_url":"https://github.com/fayak","followers_url":"https://api.github.com/users/fayak/followers","following_url":"https://api.github.com/users/fayak/following{/other_user}","gists_url":"https://api.github.com/users/fayak/gists{/gist_id}","starred_url":"https://api.github.com/users/fayak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fayak/subscriptions","organizations_url":"https://api.github.com/users/fayak/orgs","repos_url":"https://api.github.com/users/fayak/repos","events_url":"https://api.github.com/users/fayak/events{/privacy}","received_events_url":"https://api.github.com/users/fayak/received_events","type":"User","site_admin":false},"created_at":"2019-08-05T13:54:22Z","updated_at":"2019-08-05T13:54:22Z","author_association":"NONE","body":"Thanks ! Is there a list of (or a documentation somewhere) of all possible build options/attributes ? I've found few things around, but nothing really clear unfortunately :/","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/518264139","html_url":"https://github.com/elastic/elasticsearch/issues/45034#issuecomment-518264139","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45034","id":518264139,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODI2NDEzOQ==","user":{"login":"williamrandolph","id":3253644,"node_id":"MDQ6VXNlcjMyNTM2NDQ=","avatar_url":"https://avatars3.githubusercontent.com/u/3253644?v=4","gravatar_id":"","url":"https://api.github.com/users/williamrandolph","html_url":"https://github.com/williamrandolph","followers_url":"https://api.github.com/users/williamrandolph/followers","following_url":"https://api.github.com/users/williamrandolph/following{/other_user}","gists_url":"https://api.github.com/users/williamrandolph/gists{/gist_id}","starred_url":"https://api.github.com/users/williamrandolph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/williamrandolph/subscriptions","organizations_url":"https://api.github.com/users/williamrandolph/orgs","repos_url":"https://api.github.com/users/williamrandolph/repos","events_url":"https://api.github.com/users/williamrandolph/events{/privacy}","received_events_url":"https://api.github.com/users/williamrandolph/received_events","type":"User","site_admin":false},"created_at":"2019-08-05T14:44:42Z","updated_at":"2019-08-05T14:44:42Z","author_association":"CONTRIBUTOR","body":"@fayak I have found `./gradlew tasks` and `./gradlew tasks --all` to be helpful in finding the names of Gradle tasks. The second one has a lot of output, so you may want to `grep` for \"distribution\" or \"assemble\" to find just the possible distributions you can build.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/518286682","html_url":"https://github.com/elastic/elasticsearch/issues/45034#issuecomment-518286682","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45034","id":518286682,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODI4NjY4Mg==","user":{"login":"fayak","id":11300056,"node_id":"MDQ6VXNlcjExMzAwMDU2","avatar_url":"https://avatars3.githubusercontent.com/u/11300056?v=4","gravatar_id":"","url":"https://api.github.com/users/fayak","html_url":"https://github.com/fayak","followers_url":"https://api.github.com/users/fayak/followers","following_url":"https://api.github.com/users/fayak/following{/other_user}","gists_url":"https://api.github.com/users/fayak/gists{/gist_id}","starred_url":"https://api.github.com/users/fayak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fayak/subscriptions","organizations_url":"https://api.github.com/users/fayak/orgs","repos_url":"https://api.github.com/users/fayak/repos","events_url":"https://api.github.com/users/fayak/events{/privacy}","received_events_url":"https://api.github.com/users/fayak/received_events","type":"User","site_admin":false},"created_at":"2019-08-05T15:40:24Z","updated_at":"2019-08-05T15:40:24Z","author_association":"NONE","body":"Thanks !\r\nI don't know how helpful it can be, but here's the Dockerfile and entrypoint.sh I use to build a custom version of elasticsearch:\r\nDockerfile:\r\n```\r\nFROM openjdk:12-jdk-alpine\r\n\r\nRUN apk update && apk add git tree docker py-pip python-dev libffi-dev openssl-dev gcc libc-dev make && rm -rf /var/cache/apk/*\r\n\r\nRUN pip install docker-compose\r\n\r\nCOPY resources/<modified files> /srv\r\nCOPY resources/entrypoint.sh /srv\r\n\r\nCMD /srv/entrypoint.sh\r\n```\r\n\r\n```\r\n#!/bin/sh\r\n\r\nif [ -z ${ES_VERSION+x} ]; then\r\n    ES_VERSION=\"v7.3.0\"\r\n    echo \"Variable ES_VERSION is unset. Setting is to ${ES_VERSION}\"\r\nelse\r\n    echo \"Version to compile: ${ES_VERSION}\"\r\nfi\r\n\r\ncd /srv || exit 1\r\n\r\ngit clone https://github.com/elastic/elasticsearch || exit 1\r\ncd elasticsearch || exit 1\r\ngit checkout $ES_VERSION\r\n\r\nfor <custom resources>\r\nfind <path> -name <custom resource> -exec cp /srv/<custom> {} \\;\r\ndone\r\n\r\n./gradlew :distribution:docker:assemble --parallel || exit 1\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/598418026","html_url":"https://github.com/elastic/elasticsearch/issues/45034#issuecomment-598418026","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45034","id":598418026,"node_id":"MDEyOklzc3VlQ29tbWVudDU5ODQxODAyNg==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2020-03-12T21:05:44Z","updated_at":"2020-03-12T21:05:44Z","author_association":"CONTRIBUTOR","body":"This issue is no longer applicable after the Docker support logic refactor. This property has been removed, and we no longer display it in the error message. Attempting to run the Docker build tasks will continue to fail if Docker is not available on the system. The recommended approach, as mentioned above, is to run the task specific to the distribution you require. This also has the benefit of being _much_ faster than running `./gradlew assemble` which builds all flavors of all distributions which is almost never what a user actually desires.","performed_via_github_app":null}]