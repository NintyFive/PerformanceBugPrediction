{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/23569","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23569/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23569/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23569/events","html_url":"https://github.com/elastic/elasticsearch/issues/23569","id":213886848,"node_id":"MDU6SXNzdWUyMTM4ODY4NDg=","number":23569,"title":"ElasticSearch on Docker Swarm Bound or publish to a non-loopback or non-local address strap check fail.","user":{"login":"rommik","id":5719781,"node_id":"MDQ6VXNlcjU3MTk3ODE=","avatar_url":"https://avatars3.githubusercontent.com/u/5719781?v=4","gravatar_id":"","url":"https://api.github.com/users/rommik","html_url":"https://github.com/rommik","followers_url":"https://api.github.com/users/rommik/followers","following_url":"https://api.github.com/users/rommik/following{/other_user}","gists_url":"https://api.github.com/users/rommik/gists{/gist_id}","starred_url":"https://api.github.com/users/rommik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rommik/subscriptions","organizations_url":"https://api.github.com/users/rommik/orgs","repos_url":"https://api.github.com/users/rommik/repos","events_url":"https://api.github.com/users/rommik/events{/privacy}","received_events_url":"https://api.github.com/users/rommik/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-03-13T20:25:46Z","updated_at":"2017-03-13T23:55:53Z","closed_at":"2017-03-13T21:08:04Z","author_association":"NONE","active_lock_reason":null,"body":"I'm trying to setup ElasticSearch and Kibana on Docker Swarm. Nothing fancy, just two services linked by a common overlay network. However, ElasticSearch fails to run and I get the following error in the logs:\r\n\r\n{\"log\":\"[2017-03-13T20:21:24,770][WARN ][i.n.u.i.MacAddressUtil   ] Failed to find a usable hardware address from the network interfaces; using random bytes:\r\n e7:ea:87:86:44:61:22:b0\\n\",\"stream\":\"stdout\",\"time\":\"2017-03-13T20:21:24.771125868Z\"}\r\n{\"log\":\"[2017-03-13T20:21:24,888][INFO ][o.e.t.TransportService   ] [hiKddpp] publish_address {10.0.50.2:9300}, bound_addresses {[::]:9300}\\n\",\"stream\":\"stdo\r\nut\",\"time\":\"2017-03-13T20:21:24.889167419Z\"}\r\n{\"log\":\"[2017-03-13T20:21:24,901][INFO ][o.e.b.BootstrapChecks    ] [hiKddpp] bound or publishing to a non-loopback or non-link-local address, enforcing boot\r\nstrap checks\\n\",\"stream\":\"stdout\",\"time\":\"2017-03-13T20:21:24.901545734Z\"}\r\n\r\nWhat is the reason for the strap check to fail?\r\n\r\nexample of my swarm stack file:\r\n\r\nversion: '3'\r\nservices:\r\n  elasticsearch:\r\n    image: docker.elastic.co/elasticsearch/elasticsearch:5.2.2\r\n    volumes:\r\n      - elasticData:/usr/share/elasticsearch/data\r\n    networks:\r\n      monitoring:\r\n    deploy:\r\n      placement:\r\n         constraints:\r\n           - node.hostname == swarm-node-monitor\r\n  kibana:\r\n    image: docker.elastic.co/kibana/kibana:5.2.1\r\n    environment:\r\n     - ELASTICSEARCH.URL=http://elasticsearch:9200\r\n    networks:\r\n      monitoring:\r\n      proxy:\r\n    deploy:\r\n      placement:\r\n         constraints:\r\n           - node.hostname == swarm-node-monitor\r\n      labels:\r\n        - com.df.notify=true\r\n        - com.df.distribute=true\r\n        - com.df.serviceDomain=kibana.my-domain.com\r\n        - com.df.servicePath=/\r\n        - com.df.port=5601\r\n        - com.df.httpsOnly=true\r\nvolumes:\r\n   elasticData:\r\n     driver: local\r\n\r\nnetworks:\r\n  proxy:\r\n    external: true\r\n  monitoring:\r\n    driver: overlay\r\n    external: false\r\n\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}