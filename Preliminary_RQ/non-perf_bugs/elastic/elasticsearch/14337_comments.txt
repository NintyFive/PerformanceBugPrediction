[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/176952080","html_url":"https://github.com/elastic/elasticsearch/issues/14337#issuecomment-176952080","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14337","id":176952080,"node_id":"MDEyOklzc3VlQ29tbWVudDE3Njk1MjA4MA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-01-29T20:20:41Z","updated_at":"2016-01-29T20:20:41Z","author_association":"CONTRIBUTOR","body":"Hi @briner \n\nDid you manage to resolve this issue?  One thing that is curious is that you failed to obtain a lock on `/srv/elasticsearch/lunielkes/nodes/49` which implies that you were running 50 nodes on this box?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/179060453","html_url":"https://github.com/elastic/elasticsearch/issues/14337#issuecomment-179060453","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14337","id":179060453,"node_id":"MDEyOklzc3VlQ29tbWVudDE3OTA2MDQ1Mw==","user":{"login":"briner","id":338372,"node_id":"MDQ6VXNlcjMzODM3Mg==","avatar_url":"https://avatars1.githubusercontent.com/u/338372?v=4","gravatar_id":"","url":"https://api.github.com/users/briner","html_url":"https://github.com/briner","followers_url":"https://api.github.com/users/briner/followers","following_url":"https://api.github.com/users/briner/following{/other_user}","gists_url":"https://api.github.com/users/briner/gists{/gist_id}","starred_url":"https://api.github.com/users/briner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/briner/subscriptions","organizations_url":"https://api.github.com/users/briner/orgs","repos_url":"https://api.github.com/users/briner/repos","events_url":"https://api.github.com/users/briner/events{/privacy}","received_events_url":"https://api.github.com/users/briner/received_events","type":"User","site_admin":false},"created_at":"2016-02-03T07:20:08Z","updated_at":"2016-02-03T07:20:08Z","author_association":"NONE","body":"Hi @clintongormley,\nI did remove btrfs and use instead a ext4 filesystem.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/183766101","html_url":"https://github.com/elastic/elasticsearch/issues/14337#issuecomment-183766101","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14337","id":183766101,"node_id":"MDEyOklzc3VlQ29tbWVudDE4Mzc2NjEwMQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-02-13T22:24:34Z","updated_at":"2016-02-13T22:24:34Z","author_association":"CONTRIBUTOR","body":"Thanks @briner - not sure we have enough info to take this any further.  Closing\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/187280904","html_url":"https://github.com/elastic/elasticsearch/issues/14337#issuecomment-187280904","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14337","id":187280904,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NzI4MDkwNA==","user":{"login":"torrancew","id":235666,"node_id":"MDQ6VXNlcjIzNTY2Ng==","avatar_url":"https://avatars0.githubusercontent.com/u/235666?v=4","gravatar_id":"","url":"https://api.github.com/users/torrancew","html_url":"https://github.com/torrancew","followers_url":"https://api.github.com/users/torrancew/followers","following_url":"https://api.github.com/users/torrancew/following{/other_user}","gists_url":"https://api.github.com/users/torrancew/gists{/gist_id}","starred_url":"https://api.github.com/users/torrancew/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/torrancew/subscriptions","organizations_url":"https://api.github.com/users/torrancew/orgs","repos_url":"https://api.github.com/users/torrancew/repos","events_url":"https://api.github.com/users/torrancew/events{/privacy}","received_events_url":"https://api.github.com/users/torrancew/received_events","type":"User","site_admin":false},"created_at":"2016-02-22T17:31:18Z","updated_at":"2016-02-22T17:31:18Z","author_association":"NONE","body":"FYI I was able to reproduce this issue precisely. As far as I know, I'm only running a single node on this box, via systemd. However, all attempts to run it, interactively, via the systemd unit, etc, result in precisely the error the OP received. In my case, /var is a BTRFS subvolume, and my data path is /var/lib/elasticsearch/data.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/187287879","html_url":"https://github.com/elastic/elasticsearch/issues/14337#issuecomment-187287879","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14337","id":187287879,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NzI4Nzg3OQ==","user":{"login":"torrancew","id":235666,"node_id":"MDQ6VXNlcjIzNTY2Ng==","avatar_url":"https://avatars0.githubusercontent.com/u/235666?v=4","gravatar_id":"","url":"https://api.github.com/users/torrancew","html_url":"https://github.com/torrancew","followers_url":"https://api.github.com/users/torrancew/followers","following_url":"https://api.github.com/users/torrancew/following{/other_user}","gists_url":"https://api.github.com/users/torrancew/gists{/gist_id}","starred_url":"https://api.github.com/users/torrancew/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/torrancew/subscriptions","organizations_url":"https://api.github.com/users/torrancew/orgs","repos_url":"https://api.github.com/users/torrancew/repos","events_url":"https://api.github.com/users/torrancew/events{/privacy}","received_events_url":"https://api.github.com/users/torrancew/received_events","type":"User","site_admin":false},"created_at":"2016-02-22T17:46:12Z","updated_at":"2016-02-22T18:58:19Z","author_association":"NONE","body":"I have found at least one workaround so far: mounting the subvolume directly. In my case, I was able to mount the subvolume at exactly its original path, which is either **really** hacky or **really** elegant, depending on your perspective.\n\nExample:\n\n```\n[sysadmin@caribou ~]$ sudo journalctl -u elasticsearch -f\nFeb 22 07:58:37 caribou systemd[1]: Started Elasticsearch.\nFeb 22 07:58:41 caribou elasticsearch[5140]: [2016-02-22 07:58:41,401][WARN ][bootstrap                ] unable to install syscall filter: seccomp unavailable: 'arm' architecture unsupported\nFeb 22 07:58:43 caribou elasticsearch[5140]: [2016-02-22 07:58:43,324][INFO ][node                     ] [caribou] version[2.2.0], pid[5140], build[8ff36d1/2016-01-27T13:32:39Z]\nFeb 22 07:58:43 caribou elasticsearch[5140]: [2016-02-22 07:58:43,325][INFO ][node                     ] [caribou] initializing ...\nFeb 22 07:58:47 caribou elasticsearch[5140]: [2016-02-22 07:58:47,183][INFO ][plugins                  ] [caribou] modules [lang-expression, lang-groovy], plugins [], sites []\nFeb 22 07:58:47 caribou elasticsearch[5140]: Exception in thread \"main\" java.lang.IllegalStateException: Failed to obtain node lock, is the following location writable?: [/srv/elasticsearch/elk]\nFeb 22 07:58:47 caribou elasticsearch[5140]: Likely root cause: java.io.IOException: Mount point not found\nFeb 22 07:58:47 caribou elasticsearch[5140]: at sun.nio.fs.LinuxFileStore.findMountEntry(LinuxFileStore.java:91)\nFeb 22 07:58:47 caribou elasticsearch[5140]: at sun.nio.fs.UnixFileStore.<init>(UnixFileStore.java:65)\nFeb 22 07:58:47 caribou elasticsearch[5140]: at sun.nio.fs.LinuxFileStore.<init>(LinuxFileStore.java:44)\nFeb 22 07:58:47 caribou elasticsearch[5140]: at sun.nio.fs.LinuxFileSystemProvider.getFileStore(LinuxFileSystemProvider.java:51)\nFeb 22 07:58:47 caribou elasticsearch[5140]: at sun.nio.fs.LinuxFileSystemProvider.getFileStore(LinuxFileSystemProvider.java:39)\nFeb 22 07:58:47 caribou elasticsearch[5140]: at sun.nio.fs.UnixFileSystemProvider.getFileStore(UnixFileSystemProvider.java:368)\nFeb 22 07:58:47 caribou elasticsearch[5140]: at java.nio.file.Files.getFileStore(Files.java:1461)\nFeb 22 07:58:47 caribou systemd[1]: elasticsearch.service: Main process exited, code=exited, status=1/FAILURE\nFeb 22 07:58:47 caribou systemd[1]: elasticsearch.service: Unit entered failed state.\nFeb 22 07:58:47 caribou systemd[1]: elasticsearch.service: Failed with result 'exit-code'.\nFeb 22 07:58:47 caribou systemd[1]: elasticsearch.service: Service hold-off time over, scheduling restart.\nFeb 22 07:58:47 caribou systemd[1]: Stopped Elasticsearch.\n```\n\n```\n[sysadmin@caribou ~]$ df -h | grep /srv\n[sysadmin@caribou ~]$ sudo btrfs subvolume list /\nID 257 gen 768 top level 5 path home\nID 258 gen 787 top level 5 path usr\nID 259 gen 53 top level 258 path usr/local\nID 260 gen 787 top level 5 path var\nID 261 gen 782 top level 5 path opt\nID 262 gen 766 top level 5 path srv\nID 264 gen 19 top level 260 path var/lib/machines\n[sysadmin@caribou ~]$ sudo mount -t btrfs -o subvolid=262,ssd,discard,space_cache,compress=lzo /dev/mmcblk0p2 /srv\n[sysadmin@caribou ~]$ df -h | grep /srv\n/dev/mmcblk0p2   30G  1.9G   28G   7% /srv\n```\n\n```\n[sysadmin@caribou ~]$ sudo systemctl start elasticsearch\n[sysadmin@caribou ~]$ sudo journalctl -u elasticsearch -f\nFeb 22 18:55:15 caribou systemd[1]: Started Elasticsearch.\nFeb 22 18:55:19 caribou elasticsearch[7316]: [2016-02-22 18:55:19,582][WARN ][bootstrap                ] unable to install syscall filter: seccomp unavailable: 'arm' architecture unsupported\nFeb 22 18:55:21 caribou elasticsearch[7316]: [2016-02-22 18:55:21,526][INFO ][node                     ] [caribou] version[2.2.0], pid[7316], build[8ff36d1/2016-01-27T13:32:39Z]\nFeb 22 18:55:21 caribou elasticsearch[7316]: [2016-02-22 18:55:21,527][INFO ][node                     ] [caribou] initializing ...\nFeb 22 18:55:25 caribou elasticsearch[7316]: [2016-02-22 18:55:25,420][INFO ][plugins                  ] [caribou] modules [lang-expression, lang-groovy], plugins [], sites []\nFeb 22 18:55:25 caribou elasticsearch[7316]: [2016-02-22 18:55:25,568][INFO ][env                      ] [caribou] using [1] data paths, mounts [[/srv (/dev/mmcblk0p2)]], net usable_space [27gb], net total_space [29.2gb], spins? [no], types [btrfs]\nFeb 22 18:55:25 caribou elasticsearch[7316]: [2016-02-22 18:55:25,569][INFO ][env                      ] [caribou] heap size [123.7mb], compressed ordinary object pointers [unknown]\nFeb 22 18:55:38 caribou elasticsearch[7316]: [2016-02-22 18:55:38,263][INFO ][node                     ] [caribou] initialized\nFeb 22 18:55:38 caribou elasticsearch[7316]: [2016-02-22 18:55:38,264][INFO ][node                     ] [caribou] starting ...\nFeb 22 18:55:38 caribou elasticsearch[7316]: [2016-02-22 18:55:38,693][INFO ][transport                ] [caribou] publish_address {127.0.0.1:9300}, bound_addresses {[::1]:9300}, {127.0.0.1:9300}\nFeb 22 18:55:38 caribou elasticsearch[7316]: [2016-02-22 18:55:38,753][INFO ][discovery                ] [caribou] elk/XZf5Q2LFTjaFA3wu3JEfUQ\nFeb 22 18:55:41 caribou elasticsearch[7316]: [2016-02-22 18:55:41,997][INFO ][cluster.service          ] [caribou] new_master {caribou}{XZf5Q2LFTjaFA3wu3JEfUQ}{127.0.0.1}{127.0.0.1:9300}{type=raspi2}, reason: zen-disco-join(elected_as_master, [0] joins received)\nFeb 22 18:55:42 caribou elasticsearch[7316]: [2016-02-22 18:55:42,102][INFO ][http                     ] [caribou] publish_address {127.0.0.1:9200}, bound_addresses {[::1]:9200}, {127.0.0.1:9200}\nFeb 22 18:55:42 caribou elasticsearch[7316]: [2016-02-22 18:55:42,105][INFO ][node                     ] [caribou] started\nFeb 22 18:55:42 caribou elasticsearch[7316]: [2016-02-22 18:55:42,303][INFO ][gateway                  ] [caribou] recovered [0] indices into cluster_state\n```\n\n**Update:**\nAdded example of problem and workaround\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/288635461","html_url":"https://github.com/elastic/elasticsearch/issues/14337#issuecomment-288635461","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14337","id":288635461,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODYzNTQ2MQ==","user":{"login":"TJC","id":43905,"node_id":"MDQ6VXNlcjQzOTA1","avatar_url":"https://avatars2.githubusercontent.com/u/43905?v=4","gravatar_id":"","url":"https://api.github.com/users/TJC","html_url":"https://github.com/TJC","followers_url":"https://api.github.com/users/TJC/followers","following_url":"https://api.github.com/users/TJC/following{/other_user}","gists_url":"https://api.github.com/users/TJC/gists{/gist_id}","starred_url":"https://api.github.com/users/TJC/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TJC/subscriptions","organizations_url":"https://api.github.com/users/TJC/orgs","repos_url":"https://api.github.com/users/TJC/repos","events_url":"https://api.github.com/users/TJC/events{/privacy}","received_events_url":"https://api.github.com/users/TJC/received_events","type":"User","site_admin":false},"created_at":"2017-03-23T07:11:55Z","updated_at":"2017-03-23T07:11:55Z","author_association":"NONE","body":"Can we re-open this? It's still an issue.","performed_via_github_app":null}]