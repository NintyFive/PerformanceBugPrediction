[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/423550682","html_url":"https://github.com/elastic/elasticsearch/issues/33948#issuecomment-423550682","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33948","id":423550682,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMzU1MDY4Mg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-09-21T14:27:35Z","updated_at":"2018-09-21T14:27:35Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/659923170","html_url":"https://github.com/elastic/elasticsearch/issues/33948#issuecomment-659923170","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33948","id":659923170,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTkyMzE3MA==","user":{"login":"geekpete","id":2070843,"node_id":"MDQ6VXNlcjIwNzA4NDM=","avatar_url":"https://avatars2.githubusercontent.com/u/2070843?v=4","gravatar_id":"","url":"https://api.github.com/users/geekpete","html_url":"https://github.com/geekpete","followers_url":"https://api.github.com/users/geekpete/followers","following_url":"https://api.github.com/users/geekpete/following{/other_user}","gists_url":"https://api.github.com/users/geekpete/gists{/gist_id}","starred_url":"https://api.github.com/users/geekpete/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/geekpete/subscriptions","organizations_url":"https://api.github.com/users/geekpete/orgs","repos_url":"https://api.github.com/users/geekpete/repos","events_url":"https://api.github.com/users/geekpete/events{/privacy}","received_events_url":"https://api.github.com/users/geekpete/received_events","type":"User","site_admin":false},"created_at":"2020-07-17T07:33:15Z","updated_at":"2020-07-17T07:46:05Z","author_association":"MEMBER","body":"Is this feature still relevant with the recent code changes to how snapshots work?\r\nIs there any risk to large storage capacity wastage or inadvertently creating a vast amount of unnecessary objects if a bucket is used for snapshots without realising versioning is enabled for it?\r\nOr are the objects that will see frequent versions created mostly smaller metadata files?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/659940219","html_url":"https://github.com/elastic/elasticsearch/issues/33948#issuecomment-659940219","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33948","id":659940219,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTk0MDIxOQ==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2020-07-17T07:56:34Z","updated_at":"2020-07-17T07:56:34Z","author_association":"MEMBER","body":"> Is there any risk to large storage capacity wastage or inadvertently creating a vast amount of unnecessary objects if a bucket is used for snapshots without realising versioning is enabled for it?\r\n\r\nWe don't really do any overwrites any more. The only thing that is still annoying about versioning is that deletes might not work out and you need to configure a reasonable delete retention policy maybe so that your repo does not grow forever.\r\n\r\n> Or are the objects that will see frequent versions created mostly smaller metadata files?\r\n\r\nWe only ever overwrite one blob, the `/index.latest` blob at the repository root and it's 8 bytes in size only.\r\n\r\n-> I would close this issue for at least two reasons:\r\n\r\n1. Enabling versioning does not break the repository functionality. If a user enables it, they must have a reason for doing so (effectively always some weird compliance thing) -> why make their life harder by forcing them to set another setting :) (also if we did this it would be annoying for BwC)\r\n2. We can't reliably detect whether versioning is enabled or disabled anyway. We could detect it when creating the repository but then the user could still enable versioning on the bucket later and we probably don't want to do the check for whether or not versioning is activated on every snapshot (we could but then if someone activates versioning for whatever reason something like SLM will just quietly break in the background which might not be great).\r\n\r\nSeems this isn't really worth it?","performed_via_github_app":null}]