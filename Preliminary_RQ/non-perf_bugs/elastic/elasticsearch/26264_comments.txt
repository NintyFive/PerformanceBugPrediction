[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/323668358","html_url":"https://github.com/elastic/elasticsearch/issues/26264#issuecomment-323668358","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26264","id":323668358,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMzY2ODM1OA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-08-21T07:33:10Z","updated_at":"2017-08-21T07:33:10Z","author_association":"CONTRIBUTOR","body":"This is the expected behaviour:\r\n - Query 1 finds all documents that have one nested document or more that do not have a value for `nested_field.name`\r\n - Query 2 finds all documents that have one nested document or more that have a value for `nested_field.name`\r\n - Query 3 finds all documents whose none of the nested documents have a value for `nested_field.name`\r\n\r\nThe inverse of query 2 is indeed query 3, not query 1.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/326067734","html_url":"https://github.com/elastic/elasticsearch/issues/26264#issuecomment-326067734","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26264","id":326067734,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNjA2NzczNA==","user":{"login":"elasticsearcher","id":11278594,"node_id":"MDQ6VXNlcjExMjc4NTk0","avatar_url":"https://avatars1.githubusercontent.com/u/11278594?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticsearcher","html_url":"https://github.com/elasticsearcher","followers_url":"https://api.github.com/users/elasticsearcher/followers","following_url":"https://api.github.com/users/elasticsearcher/following{/other_user}","gists_url":"https://api.github.com/users/elasticsearcher/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticsearcher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticsearcher/subscriptions","organizations_url":"https://api.github.com/users/elasticsearcher/orgs","repos_url":"https://api.github.com/users/elasticsearcher/repos","events_url":"https://api.github.com/users/elasticsearcher/events{/privacy}","received_events_url":"https://api.github.com/users/elasticsearcher/received_events","type":"User","site_admin":false},"created_at":"2017-08-30T17:48:43Z","updated_at":"2017-08-30T17:48:43Z","author_association":"NONE","body":"@jpountz Thanks for the explanation, this makes sense. I overlooked the fact that a document must have a nested document in the first place for the \"must_not\" clause to apply.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/407327272","html_url":"https://github.com/elastic/elasticsearch/issues/26264#issuecomment-407327272","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26264","id":407327272,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzMyNzI3Mg==","user":{"login":"zhugw","id":4953871,"node_id":"MDQ6VXNlcjQ5NTM4NzE=","avatar_url":"https://avatars0.githubusercontent.com/u/4953871?v=4","gravatar_id":"","url":"https://api.github.com/users/zhugw","html_url":"https://github.com/zhugw","followers_url":"https://api.github.com/users/zhugw/followers","following_url":"https://api.github.com/users/zhugw/following{/other_user}","gists_url":"https://api.github.com/users/zhugw/gists{/gist_id}","starred_url":"https://api.github.com/users/zhugw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhugw/subscriptions","organizations_url":"https://api.github.com/users/zhugw/orgs","repos_url":"https://api.github.com/users/zhugw/repos","events_url":"https://api.github.com/users/zhugw/events{/privacy}","received_events_url":"https://api.github.com/users/zhugw/received_events","type":"User","site_admin":false},"created_at":"2018-07-24T08:35:35Z","updated_at":"2018-07-24T08:35:35Z","author_association":"NONE","body":"Solved a[ similar problem](https://stackoverflow.com/questions/51480217/why-dosnt-must-not-work-when-i-query-on-the-indicest-hat-do-not-contain-the-t) of mine","performed_via_github_app":null}]