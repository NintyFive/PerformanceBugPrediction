[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/541205651","html_url":"https://github.com/elastic/elasticsearch/issues/47953#issuecomment-541205651","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47953","id":541205651,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTIwNTY1MQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-10-11T20:04:53Z","updated_at":"2019-10-11T20:04:53Z","author_association":"COLLABORATOR","body":"Pinging @elastic/ml-core (:ml)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/541211947","html_url":"https://github.com/elastic/elasticsearch/issues/47953#issuecomment-541211947","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47953","id":541211947,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTIxMTk0Nw==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2019-10-11T20:25:55Z","updated_at":"2019-10-11T21:55:38Z","author_association":"CONTRIBUTOR","body":"`A problem occurred starting process 'command 'C:\\Users\\jenkins\\.java\\openjdk12\\bin\\java.exe` is the cause here. The fact it was trying to do a check on some ML source at the time is a fluke.\r\n\r\nThe worker had 32 CPUs. Does that mean it was doing 32 checks in parallel, each in a separate JVM? Certainly there are lots of very similar timestamps on the check tasks that are listed in the console log.\r\n\r\nMaybe on Windows the parallelism needs scaling back a little or the workers need more memory on Windows?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/541212136","html_url":"https://github.com/elastic/elasticsearch/issues/47953#issuecomment-541212136","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47953","id":541212136,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTIxMjEzNg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-10-11T20:26:29Z","updated_at":"2019-10-11T20:26:29Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra (:Core/Infra/Build)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542200355","html_url":"https://github.com/elastic/elasticsearch/issues/47953#issuecomment-542200355","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47953","id":542200355,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjIwMDM1NQ==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-10-15T13:03:15Z","updated_at":"2019-10-15T13:03:15Z","author_association":"CONTRIBUTOR","body":"Here's a scan: https://gradle-enterprise.elastic.co/s/4dnt4bscjqldo \r\nThe root  cause: \r\n```\r\nCaused by: java.io.IOException: CreateProcess error=206, The filename or extension is too long\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542215269","html_url":"https://github.com/elastic/elasticsearch/issues/47953#issuecomment-542215269","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47953","id":542215269,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjIxNTI2OQ==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2019-10-15T13:36:21Z","updated_at":"2019-10-15T13:36:21Z","author_association":"CONTRIBUTOR","body":"The associated stack trace might also be useful because it shows which component doesn't like long path names - it's `net.rubygrapefruit.platform.internal.DefaultProcessLauncher`:\r\n\r\n```\r\nat net.rubygrapefruit.platform.internal.DefaultProcessLauncher.start(DefaultProcessLauncher.java:25)\r\nat net.rubygrapefruit.platform.internal.WindowsProcessLauncher.start(WindowsProcessLauncher.java:22)\r\nat net.rubygrapefruit.platform.internal.WrapperProcessLauncher.start(WrapperProcessLauncher.java:36)\r\nat org.gradle.process.internal.ExecHandleRunner.startProcess(ExecHandleRunner.java:98)\r\nat org.gradle.process.internal.ExecHandleRunner.run(ExecHandleRunner.java:71)\r\nat org.gradle.internal.operations.CurrentBuildOperationPreservingRunnable.run(CurrentBuildOperationPreservingRunnable.java:42)\r\nat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\nat org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\r\nat org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56)\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542219865","html_url":"https://github.com/elastic/elasticsearch/issues/47953#issuecomment-542219865","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47953","id":542219865,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjIxOTg2NQ==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2019-10-15T13:46:03Z","updated_at":"2019-10-15T13:46:03Z","author_association":"CONTRIBUTOR","body":"A similar problem was worked around in the Elasticsearch code by getting the short (8.3) path before passing it to the `ProcessBuilder` - see #25344.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542225672","html_url":"https://github.com/elastic/elasticsearch/issues/47953#issuecomment-542225672","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47953","id":542225672,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjIyNTY3Mg==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-10-15T13:57:47Z","updated_at":"2019-10-15T13:57:47Z","author_association":"CONTRIBUTOR","body":"I think the error is a bit misleading, as the path is rather short here `C:\\Users\\jenkins\\.java\\openjdk12\\bin\\java.exe`. \r\nI think it's the command line length that gets exceeded because the classpath is too long.\r\nWe could pass it as as the `CLASSPATH` env var instead, but looking at some issues Gradle should already be doing it ... ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542441710","html_url":"https://github.com/elastic/elasticsearch/issues/47953#issuecomment-542441710","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47953","id":542441710,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjQ0MTcxMA==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2019-10-15T23:08:55Z","updated_at":"2019-10-15T23:08:55Z","author_association":"CONTRIBUTOR","body":"> I think it's the command line length that gets exceeded because the classpath is too long.\r\n\r\nI believe you are correct:\r\n\r\n```\r\nCannot run program \"C:\\Users\\jenkins\\.java\\openjdk12\\bin\\java.exe\" (in directory \"C:\\Users\\jenkins\\workspace\\elastic+elasticsearch+master+multijob-windows-compatibility\\os\\windows-2012-r2\\x-pack\\plugin\\ml\"): CreateProcess error=206, The filename or extension is too long\r\n```\r\n\r\n> We could pass it as as the CLASSPATH env var instead, but looking at some issues Gradle should already be doing it ...\r\n\r\nI don't think using `CLASSPATH` is a long-term solution:\r\n\r\n> All environment variables must live together in a single environment block, which itself has a limit of 32767 characters.\r\n\r\nThat said, this might be good enough for now, as I believe the current command line limit is 8k characters so perhaps that will solve the problem temporarily until Gradle 6.0 which has a [permanent fix for this](https://docs.gradle.org/release-nightly/release-notes.html#usability-improvements).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542442209","html_url":"https://github.com/elastic/elasticsearch/issues/47953#issuecomment-542442209","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47953","id":542442209,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjQ0MjIwOQ==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2019-10-15T23:11:12Z","updated_at":"2019-10-15T23:11:49Z","author_association":"CONTRIBUTOR","body":"> Gradle should already be doing it ...\r\n\r\nFor clarification, Gradle does not already do this. The only scenario in which Gradle circumvents OS command line length limits is for worker processes (like test workers, or the worker API using process isolation) where the classpath is passed via `stdin`. Things like `project.javaexec()` just use `-cp` just as you would in the CLI.","performed_via_github_app":null}]