{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/19942","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19942/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19942/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19942/events","html_url":"https://github.com/elastic/elasticsearch/issues/19942","id":170600806,"node_id":"MDU6SXNzdWUxNzA2MDA4MDY=","number":19942,"title":"Highlighting does not seem to work in 2.3.4","user":{"login":"EugenyPavlenko","id":1785921,"node_id":"MDQ6VXNlcjE3ODU5MjE=","avatar_url":"https://avatars2.githubusercontent.com/u/1785921?v=4","gravatar_id":"","url":"https://api.github.com/users/EugenyPavlenko","html_url":"https://github.com/EugenyPavlenko","followers_url":"https://api.github.com/users/EugenyPavlenko/followers","following_url":"https://api.github.com/users/EugenyPavlenko/following{/other_user}","gists_url":"https://api.github.com/users/EugenyPavlenko/gists{/gist_id}","starred_url":"https://api.github.com/users/EugenyPavlenko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EugenyPavlenko/subscriptions","organizations_url":"https://api.github.com/users/EugenyPavlenko/orgs","repos_url":"https://api.github.com/users/EugenyPavlenko/repos","events_url":"https://api.github.com/users/EugenyPavlenko/events{/privacy}","received_events_url":"https://api.github.com/users/EugenyPavlenko/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2016-08-11T09:09:31Z","updated_at":"2016-08-18T10:54:18Z","closed_at":"2016-08-11T13:47:48Z","author_association":"NONE","active_lock_reason":null,"body":"Hello!\n\nMy ES version:\n\n```\ncurl 'localhost:9200'\n{\n  \"name\" : \"Rune\",\n  \"cluster_name\" : \"elasticsearch\",\n  \"version\" : {\n    \"number\" : \"2.3.4\",\n    \"build_hash\" : \"e455fd0c13dceca8dbbdbb1665d068ae55dabe3f\",\n    \"build_timestamp\" : \"2016-06-30T11:24:31Z\",\n    \"build_snapshot\" : false,\n    \"lucene_version\" : \"5.5.0\"\n  },\n  \"tagline\" : \"You Know, for Search\"\n}\n\n```\n\nSearch query posted via **PHP** ES library (your):\n\n```\nArray\n(\n    [index] => myindex_en03\n    [type] => products\n    [body] => Array\n        (\n            [query] => Array\n                (\n                    [query_string] => Array\n                        (\n                            [query] => 1333\n                        )\n\n                )\n\n            [highlight] => Array\n                (\n                    [pre_tags] => <em>\n                    [post_tags] => </em>\n                    [fields] => Array\n                        (\n                            [title] => stdClass Object\n                                (\n                                )\n\n                            [shortDescr] => stdClass Object\n                                (\n                                )\n\n                        )\n\n                )\n\n        )\n\n)\n\n```\n\nThat is index settings:\n\n``` php\n$params = [\n                'index' => $this->curIndexName,\n                'body' => [\n                    'mappings' => [\n                        'objects' => [\n                            'properties' => [\n                                //\"title\" => [\n                                //  \"type\" => \"string\",\n                                //  \"store\" => true \n                                //],\n                                'applications3-0' => [\n                                    'type' => 'string',\n                                    'index' => 'not_analyzed'\n                                ],\n                                'applications3-123' => [                \n                                    'type' => 'string',\n                                    'index' => 'not_analyzed'\n                                ],\n                                'applications3-1' => [\n                                    'type' => 'string',\n                                    'index' => 'not_analyzed'\n                                ],\n                                'applications3-2' => [\n                                    'type' => 'string',\n                                    'index' => 'not_analyzed'\n                                ],\n                                'applications3-3' => [\n                                    'type' => 'string',\n                                    'index' => 'not_analyzed'\n                                ],\n                                'applications3-4' => [\n                                    'type' => 'string',\n                                    'index' => 'not_analyzed'\n                                ],\n                                'applications3-5' => [\n                                    'type' => 'string',\n                                    'index' => 'not_analyzed'\n                                ],\n                                'functions' => [\n                                    'type' => 'string',\n                                    'index' => 'not_analyzed'\n                                ],\n                                'benefits' => [\n                                    'type' => 'string',\n                                    'index' => 'not_analyzed'\n                                ]\n                            ]\n                        ]\n                    ]\n                ]\n            ];\n```\n\nAs a result:\n1) I do not have any ES errors\n2) I do have normal response, having correct hits returned, based on \"query_string\"\n3) **BUT I do not have \"highlight\" key (clause) returned whatsoever!**\n\nAccording to documentation:\n\n> In order to perform highlighting, the actual content of the field is required. If the field in question is stored (has store set to true in the mapping) it will be used, otherwise, the actual _source will be loaded and the relevant field will be extracted from it.\n\nSo, I am not obliged to have \"store: true\" on each field?\n\nBut, also, I tried to set store: true in mappings (you see this code is commented out in my code snippet above), but the result was the same like now.\n\nI got tired to fight with hightlight (to get it returned), can somebody tell me what I am doing wrong? The must be some easy mistake...\n","closed_by":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"performed_via_github_app":null}