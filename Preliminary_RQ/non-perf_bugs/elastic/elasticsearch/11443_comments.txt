[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/108041827","html_url":"https://github.com/elastic/elasticsearch/issues/11443#issuecomment-108041827","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11443","id":108041827,"node_id":"MDEyOklzc3VlQ29tbWVudDEwODA0MTgyNw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-06-02T18:20:24Z","updated_at":"2015-06-02T18:20:24Z","author_association":"CONTRIBUTOR","body":"Hi @yanjunh \n\nThis feels like the wrong approach.  Why would we index field `foo-bar-123` and reject `foo-bar-124`?  Why index the first field at all, if you're just going to throw away the next field arbitrarily?\n\nI'm afraid the proposed solution is not a solution at all. Instead, you need to change how you're indexing the data, or how you're adding fields.  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/108048420","html_url":"https://github.com/elastic/elasticsearch/issues/11443#issuecomment-108048420","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11443","id":108048420,"node_id":"MDEyOklzc3VlQ29tbWVudDEwODA0ODQyMA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2015-06-02T18:38:51Z","updated_at":"2015-06-02T18:38:51Z","author_association":"CONTRIBUTOR","body":"I think the idea is to catch mistakes and prevent the cluster from becoming unstable.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/108049692","html_url":"https://github.com/elastic/elasticsearch/issues/11443#issuecomment-108049692","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11443","id":108049692,"node_id":"MDEyOklzc3VlQ29tbWVudDEwODA0OTY5Mg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-06-02T18:42:10Z","updated_at":"2015-06-02T18:42:10Z","author_association":"CONTRIBUTOR","body":"@nik9000 sure, but this is still the wrong solution. we're not going to add a setting which arbitrarily rejects fields if X many fields still exist.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/108051916","html_url":"https://github.com/elastic/elasticsearch/issues/11443#issuecomment-108051916","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11443","id":108051916,"node_id":"MDEyOklzc3VlQ29tbWVudDEwODA1MTkxNg==","user":{"login":"yanjunh","id":1834562,"node_id":"MDQ6VXNlcjE4MzQ1NjI=","avatar_url":"https://avatars2.githubusercontent.com/u/1834562?v=4","gravatar_id":"","url":"https://api.github.com/users/yanjunh","html_url":"https://github.com/yanjunh","followers_url":"https://api.github.com/users/yanjunh/followers","following_url":"https://api.github.com/users/yanjunh/following{/other_user}","gists_url":"https://api.github.com/users/yanjunh/gists{/gist_id}","starred_url":"https://api.github.com/users/yanjunh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanjunh/subscriptions","organizations_url":"https://api.github.com/users/yanjunh/orgs","repos_url":"https://api.github.com/users/yanjunh/repos","events_url":"https://api.github.com/users/yanjunh/events{/privacy}","received_events_url":"https://api.github.com/users/yanjunh/received_events","type":"User","site_admin":false},"created_at":"2015-06-02T18:49:05Z","updated_at":"2015-06-02T18:49:05Z","author_association":"CONTRIBUTOR","body":"@clintongormley We have been telling developers about the limitation but we can't prevent them from producing unfriendly data. Thought about detecting it on when data flow through Logstash but that's not a good place. What's the recommended way to guard against unbounded mapping growth?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/108053709","html_url":"https://github.com/elastic/elasticsearch/issues/11443#issuecomment-108053709","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11443","id":108053709,"node_id":"MDEyOklzc3VlQ29tbWVudDEwODA1MzcwOQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2015-06-02T18:53:22Z","updated_at":"2015-06-02T18:53:22Z","author_association":"CONTRIBUTOR","body":"> What's the recommended way to guard against unbounded mapping growth?\n\nStrong language.\n\nSeriously though, for my use case I turn mapping to non-dynamic and only add fields \"intentionally\" but that's not always possible.\n\nAlso - I imagine this is something you could catch in code review and by giving all developers their own instance to test against. But I'm still for adding some extra defence against it to Elasticsearch.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/108056269","html_url":"https://github.com/elastic/elasticsearch/issues/11443#issuecomment-108056269","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11443","id":108056269,"node_id":"MDEyOklzc3VlQ29tbWVudDEwODA1NjI2OQ==","user":{"login":"yanjunh","id":1834562,"node_id":"MDQ6VXNlcjE4MzQ1NjI=","avatar_url":"https://avatars2.githubusercontent.com/u/1834562?v=4","gravatar_id":"","url":"https://api.github.com/users/yanjunh","html_url":"https://github.com/yanjunh","followers_url":"https://api.github.com/users/yanjunh/followers","following_url":"https://api.github.com/users/yanjunh/following{/other_user}","gists_url":"https://api.github.com/users/yanjunh/gists{/gist_id}","starred_url":"https://api.github.com/users/yanjunh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanjunh/subscriptions","organizations_url":"https://api.github.com/users/yanjunh/orgs","repos_url":"https://api.github.com/users/yanjunh/repos","events_url":"https://api.github.com/users/yanjunh/events{/privacy}","received_events_url":"https://api.github.com/users/yanjunh/received_events","type":"User","site_admin":false},"created_at":"2015-06-02T18:58:08Z","updated_at":"2015-06-02T18:58:08Z","author_association":"CONTRIBUTOR","body":"@nik9000 Forgive my wording\nWe have no control on what people log. So far I can only set alerts when problem happens. Even so it's often too late because the data are coming in so fast. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/108058983","html_url":"https://github.com/elastic/elasticsearch/issues/11443#issuecomment-108058983","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11443","id":108058983,"node_id":"MDEyOklzc3VlQ29tbWVudDEwODA1ODk4Mw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-06-02T19:05:55Z","updated_at":"2015-06-02T19:05:55Z","author_association":"CONTRIBUTOR","body":"@yanjunh I'll reopen the issue for further discussion.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/108272290","html_url":"https://github.com/elastic/elasticsearch/issues/11443#issuecomment-108272290","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11443","id":108272290,"node_id":"MDEyOklzc3VlQ29tbWVudDEwODI3MjI5MA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-06-03T09:42:10Z","updated_at":"2015-06-03T09:42:10Z","author_association":"CONTRIBUTOR","body":"Going from `dynamic:true` to `dynamic:false` is not an option in my opinion. If you index the same set of documents twice, you would get different mappings depending on the order in which documents have been indexed.\n\nI would be open to discuss switching from `dynamic:true` to `dynamic:strict` however, so that the cause of the issue would be propagated to the client which is indexing the document. I can see value in admins being able to protect against client-side bugs and/or enforce consumers of elasticsearch to follow some good practices.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/108323720","html_url":"https://github.com/elastic/elasticsearch/issues/11443#issuecomment-108323720","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11443","id":108323720,"node_id":"MDEyOklzc3VlQ29tbWVudDEwODMyMzcyMA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2015-06-03T11:38:58Z","updated_at":"2015-06-03T11:38:58Z","author_association":"CONTRIBUTOR","body":"> I would be open to discuss switching from dynamic:true to dynamic:strict however, so that the cause of the issue would be propagated to the client which is indexing the document.\n\nIf dynamic:strict rejects the document then I'm +1 on that. So long as the setting is dynamically update-able then it shouldn't prevent people from doing this if they want - just get in their way and remind them its a bad idea.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/108447385","html_url":"https://github.com/elastic/elasticsearch/issues/11443#issuecomment-108447385","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11443","id":108447385,"node_id":"MDEyOklzc3VlQ29tbWVudDEwODQ0NzM4NQ==","user":{"login":"yanjunh","id":1834562,"node_id":"MDQ6VXNlcjE4MzQ1NjI=","avatar_url":"https://avatars2.githubusercontent.com/u/1834562?v=4","gravatar_id":"","url":"https://api.github.com/users/yanjunh","html_url":"https://github.com/yanjunh","followers_url":"https://api.github.com/users/yanjunh/followers","following_url":"https://api.github.com/users/yanjunh/following{/other_user}","gists_url":"https://api.github.com/users/yanjunh/gists{/gist_id}","starred_url":"https://api.github.com/users/yanjunh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanjunh/subscriptions","organizations_url":"https://api.github.com/users/yanjunh/orgs","repos_url":"https://api.github.com/users/yanjunh/repos","events_url":"https://api.github.com/users/yanjunh/events{/privacy}","received_events_url":"https://api.github.com/users/yanjunh/received_events","type":"User","site_admin":false},"created_at":"2015-06-03T14:18:25Z","updated_at":"2015-06-03T14:18:25Z","author_association":"CONTRIBUTOR","body":"I agree with dynamic:strict. My original thought is to keep the good part of the document and just drop the bad field. Dropping whole document might be a better idea. That will force the data producers to structure their data in the right way. The data consumers can then effectively  search and aggregate on the right structured data. In either approach, being able to protect the search cluster from bad data can be very useful.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/124045331","html_url":"https://github.com/elastic/elasticsearch/issues/11443#issuecomment-124045331","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11443","id":124045331,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNDA0NTMzMQ==","user":{"login":"segalziv","id":9026326,"node_id":"MDQ6VXNlcjkwMjYzMjY=","avatar_url":"https://avatars1.githubusercontent.com/u/9026326?v=4","gravatar_id":"","url":"https://api.github.com/users/segalziv","html_url":"https://github.com/segalziv","followers_url":"https://api.github.com/users/segalziv/followers","following_url":"https://api.github.com/users/segalziv/following{/other_user}","gists_url":"https://api.github.com/users/segalziv/gists{/gist_id}","starred_url":"https://api.github.com/users/segalziv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/segalziv/subscriptions","organizations_url":"https://api.github.com/users/segalziv/orgs","repos_url":"https://api.github.com/users/segalziv/repos","events_url":"https://api.github.com/users/segalziv/events{/privacy}","received_events_url":"https://api.github.com/users/segalziv/received_events","type":"User","site_admin":false},"created_at":"2015-07-23T10:13:49Z","updated_at":"2015-07-23T10:15:17Z","author_association":"NONE","body":"+1 for setting a limit on the number of (dynamic) fields, and moving to dynamic:false when that limit is reached. \n\nI'm also trying to protect elasticsearch from becoming unstable due to too many fields.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/156794726","html_url":"https://github.com/elastic/elasticsearch/issues/11443#issuecomment-156794726","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11443","id":156794726,"node_id":"MDEyOklzc3VlQ29tbWVudDE1Njc5NDcyNg==","user":{"login":"breml","id":6205217,"node_id":"MDQ6VXNlcjYyMDUyMTc=","avatar_url":"https://avatars1.githubusercontent.com/u/6205217?v=4","gravatar_id":"","url":"https://api.github.com/users/breml","html_url":"https://github.com/breml","followers_url":"https://api.github.com/users/breml/followers","following_url":"https://api.github.com/users/breml/following{/other_user}","gists_url":"https://api.github.com/users/breml/gists{/gist_id}","starred_url":"https://api.github.com/users/breml/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/breml/subscriptions","organizations_url":"https://api.github.com/users/breml/orgs","repos_url":"https://api.github.com/users/breml/repos","events_url":"https://api.github.com/users/breml/events{/privacy}","received_events_url":"https://api.github.com/users/breml/received_events","type":"User","site_admin":false},"created_at":"2015-11-15T09:42:56Z","updated_at":"2015-11-15T09:42:56Z","author_association":"CONTRIBUTOR","body":"We use a custom analyzer to mark dynamically added fields, which allows us to monitor the count of added fields. More explanation in the following blog post:  https://breml.github.io/blog/2015/10/28/tagging-of-dynamically-added-fields-in-elasticsearch/\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/169468727","html_url":"https://github.com/elastic/elasticsearch/issues/11443#issuecomment-169468727","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11443","id":169468727,"node_id":"MDEyOklzc3VlQ29tbWVudDE2OTQ2ODcyNw==","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"created_at":"2016-01-06T21:28:58Z","updated_at":"2016-01-06T21:28:58Z","author_association":"MEMBER","body":"+1 on providing an option for the safeguard.  Another use case is key value logging and using the LS KV filter with dynamic mappings so that these fields are automatically extracted and generated.  Having a limit the user can set can help prevent unintentional explosion in mappings when someone decides to use UUIDs as keys, etc..\n","performed_via_github_app":null}]