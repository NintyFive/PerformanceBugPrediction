{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/43376","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43376/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43376/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43376/events","html_url":"https://github.com/elastic/elasticsearch/issues/43376","id":458055254,"node_id":"MDU6SXNzdWU0NTgwNTUyNTQ=","number":43376,"title":"7.1.1 : Geoip module : database_file  is not configurable","user":{"login":"gboddin","id":4395092,"node_id":"MDQ6VXNlcjQzOTUwOTI=","avatar_url":"https://avatars1.githubusercontent.com/u/4395092?v=4","gravatar_id":"","url":"https://api.github.com/users/gboddin","html_url":"https://github.com/gboddin","followers_url":"https://api.github.com/users/gboddin/followers","following_url":"https://api.github.com/users/gboddin/following{/other_user}","gists_url":"https://api.github.com/users/gboddin/gists{/gist_id}","starred_url":"https://api.github.com/users/gboddin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gboddin/subscriptions","organizations_url":"https://api.github.com/users/gboddin/orgs","repos_url":"https://api.github.com/users/gboddin/repos","events_url":"https://api.github.com/users/gboddin/events{/privacy}","received_events_url":"https://api.github.com/users/gboddin/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"assignees":[{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false}],"milestone":null,"comments":7,"created_at":"2019-06-19T14:41:22Z","updated_at":"2019-06-20T11:14:47Z","closed_at":"2019-06-19T17:25:03Z","author_association":"NONE","active_lock_reason":null,"body":"While trying to create a pipeline with custom mmdb files ( aka GeoIP2-City.mmdb ) it fails :\r\n\r\nSo from https://www.elastic.co/guide/en/elasticsearch/reference/7.1/geoip-processor.html#geoip-processor we're doing a : \r\n\r\n```\r\nPUT _ingest/pipeline/geoloc\r\n{\r\n  \"processors\": [\r\n    {\r\n      \"geoip\": {\r\n        \"field\": \"xForwardedFor\",\r\n        \"target_field\": \"xForwardedForGeo\",\r\n        \"ignore_missing\": true,\r\n        \"database_file\": \"GeoIP2-City.mmdb\"\r\n      }\r\n    },\r\n    {\r\n      \"geoip\": {\r\n        \"field\": \"ipAddress\",\r\n        \"target_field\": \"ipAddressGeo\",\r\n        \"ignore_missing\": true,\r\n        \"database_file\": \"GeoIP2-City.mmdb\"\r\n      }\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nReturns :\r\n\r\n```\r\n{\r\n  \"error\": {\r\n    \"root_cause\": [\r\n      {\r\n        \"type\": \"parse_exception\",\r\n        \"reason\": \"[database_file] database file [GeoIP2-City.mmdb] doesn't exist\",\r\n        \"processor_type\": \"geoip\",\r\n        \"property_name\": \"database_file\"\r\n      }\r\n    ],\r\n    \"type\": \"parse_exception\",\r\n    \"reason\": \"[database_file] database file [GeoIP2-City.mmdb] doesn't exist\",\r\n    \"processor_type\": \"geoip\",\r\n    \"property_name\": \"database_file\"\r\n  },\r\n  \"status\": 400\r\n}\r\n```\r\n\r\nSo far we've been trying to put the mmdb files in : \r\n\r\n/usr/share/elasticsearch/config/ingest-geoip ( as per the doc )\r\n/usr/share/elasticsearch\r\n/etc/elasticsearch/config/ingest-geoip\r\n/etc/elasticsearch\r\n\r\nWe've also been trying a mysterious settings mention in the code : https://github.com/elastic/elasticsearch/blob/7.1/modules/ingest-geoip/src/main/java/org/elasticsearch/ingest/geoip/IngestGeoIpPlugin.java#L90 which is not recognized by the nodes ...\r\n\r\nSo far no luck in using other db than the provided ones.\r\n\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}