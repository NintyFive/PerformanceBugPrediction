{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/34842","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34842/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34842/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34842/events","html_url":"https://github.com/elastic/elasticsearch/issues/34842","id":373814737,"node_id":"MDU6SXNzdWUzNzM4MTQ3Mzc=","number":34842,"title":"difference in ingesting object via standard syntax[{}] against dot[.] seperated syntax","user":{"login":"sebastianTC","id":44459429,"node_id":"MDQ6VXNlcjQ0NDU5NDI5","avatar_url":"https://avatars2.githubusercontent.com/u/44459429?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastianTC","html_url":"https://github.com/sebastianTC","followers_url":"https://api.github.com/users/sebastianTC/followers","following_url":"https://api.github.com/users/sebastianTC/following{/other_user}","gists_url":"https://api.github.com/users/sebastianTC/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastianTC/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastianTC/subscriptions","organizations_url":"https://api.github.com/users/sebastianTC/orgs","repos_url":"https://api.github.com/users/sebastianTC/repos","events_url":"https://api.github.com/users/sebastianTC/events{/privacy}","received_events_url":"https://api.github.com/users/sebastianTC/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-10-25T07:45:28Z","updated_at":"2018-10-25T12:39:09Z","closed_at":"2018-10-25T12:39:09Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\n\r\n** Please read the guidelines below. **\r\n\r\nIssues that do not follow these guidelines are likely to be closed.\r\n\r\n1.  GitHub is reserved for bug reports and feature requests. The best place to\r\n    ask a general question is at the Elastic [forums](https://discuss.elastic.co).\r\n    GitHub is not the place for general questions.\r\n\r\n2.  Is this bug report or feature request for a supported OS? If not, it\r\n    is likely to be closed.  See https://www.elastic.co/support/matrix#show_os\r\n\r\n3.  Please fill out EITHER the feature request block or the bug report block\r\n    below, and delete the other block.\r\n\r\n-->\r\n\r\n<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`): \r\n6.4.2\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version** (`java -version`):\r\nJava x64 8.0.1910.12\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): \r\nWindows 7 and Debian 9.5\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n**Expected:**\r\nWhen autocreating a index via posting a object in the following too cases there shouldn't be any difference after getting the data back via GET command:\r\n\r\ncase 1:\r\n`POST /test1/_doc/test1\r\n{\r\n  \"testobject\":{\r\n    \"testproperty\":\"testvalue\"\r\n  }\r\n}`\r\n\r\ncase 2:\r\n`POST /test2/_doc/test2\r\n{\r\n  \"testobject.testproperty\":\"testvalue\"\r\n}`\r\n\r\n**What happenes:**\r\nThe same mapping is generated. This is fine.:\r\n\r\ncase 1:\r\n`{\r\n  \"test1\": {\r\n    \"mappings\": {\r\n      \"_doc\": {\r\n        \"properties\": {\r\n          \"testobject\": {\r\n            \"properties\": {\r\n              \"testproperty\": {\r\n                \"type\": \"text\",\r\n                \"fields\": {\r\n                  \"keyword\": {\r\n                    \"type\": \"keyword\",\r\n                    \"ignore_above\": 256\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}`\r\n\r\ncase 2:\r\n`{\r\n  \"test2\": {\r\n    \"mappings\": {\r\n      \"_doc\": {\r\n        \"properties\": {\r\n          \"testobject\": {\r\n            \"properties\": {\r\n              \"testproperty\": {\r\n                \"type\": \"text\",\r\n                \"fields\": {\r\n                  \"keyword\": {\r\n                    \"type\": \"keyword\",\r\n                    \"ignore_above\": 256\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}`\r\n\r\nThe data which I see after requesting via GET is different in both cases:\r\n\r\ncase 1 correctly as object: \r\n`{\r\n  \"_index\": \"test1\",\r\n  \"_type\": \"_doc\",\r\n  \"_id\": \"test1\",\r\n  \"_version\": 1,\r\n  \"found\": true,\r\n  \"_source\": {\r\n    \"testobject\": {\r\n      \"testproperty\": \"testvalue\"\r\n    }\r\n  }\r\n}`\r\n\r\ncase 2 in dot separated syntax:\r\n`{\r\n  \"_index\": \"test2\",\r\n  \"_type\": \"_doc\",\r\n  \"_id\": \"test2\",\r\n  \"_version\": 2,\r\n  \"found\": true,\r\n  \"_source\": {\r\n    \"testobject.testproperty\": \"testvalue\"\r\n  }\r\n}`\r\n\r\nWhere does the dot syntax come from, when the mapping is the same?\r\n\r\n**Steps to reproduce**:\r\n 1. Open Kibana Dev Tools/Console\r\n\r\n 2. Send `POST /test1/_doc/test1\r\n{\r\n  \"testobject\":{\r\n    \"testproperty\":\"testvalue\"\r\n  }\r\n}`\r\n 3. Send `POST /test2/_doc/test2\r\n{\r\n  \"testobject.testproperty\":\"testvalue\"\r\n}\r\n`\r\n 4. Check the mappings with `GET /test1/_mapping/_doc/` and `GET /test1/_mapping/_doc/`\r\n     They should be the same.\r\n 5. Request the save data with `GET /test1/_doc/test1` and `GET /test2/_doc/test2`\r\n     They will be in a different syntax.\r\n\r\n**Provide logs (if relevant)**:\r\n\r\n","closed_by":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"performed_via_github_app":null}