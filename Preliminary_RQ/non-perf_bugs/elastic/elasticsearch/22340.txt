{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/22340","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22340/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22340/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22340/events","html_url":"https://github.com/elastic/elasticsearch/issues/22340","id":197385925,"node_id":"MDU6SXNzdWUxOTczODU5MjU=","number":22340,"title":"Elasticsearch 5 can't be installed in LXC","user":{"login":"divanikus","id":3438036,"node_id":"MDQ6VXNlcjM0MzgwMzY=","avatar_url":"https://avatars2.githubusercontent.com/u/3438036?v=4","gravatar_id":"","url":"https://api.github.com/users/divanikus","html_url":"https://github.com/divanikus","followers_url":"https://api.github.com/users/divanikus/followers","following_url":"https://api.github.com/users/divanikus/following{/other_user}","gists_url":"https://api.github.com/users/divanikus/gists{/gist_id}","starred_url":"https://api.github.com/users/divanikus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/divanikus/subscriptions","organizations_url":"https://api.github.com/users/divanikus/orgs","repos_url":"https://api.github.com/users/divanikus/repos","events_url":"https://api.github.com/users/divanikus/events{/privacy}","received_events_url":"https://api.github.com/users/divanikus/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2016-12-23T15:21:16Z","updated_at":"2017-06-20T15:08:45Z","closed_at":"2016-12-23T15:32:15Z","author_association":"NONE","active_lock_reason":null,"body":"I'm trying to install elasticsearch 5.0.2 inside a priveleged LXC container. Install process fails with\r\n`Failed to write '262144' to '/proc/sys/vm/max_map_count': Read-only file system`\r\n\r\n**Elasticsearch version**: 5.0.x\r\n\r\n**JVM version**: 8u111\r\n\r\n**OS version**: Debian 8.6\r\n\r\nInstalling using dpkg fails with mentioned error. Can't be fixed with apt-get -f install. Package manager remains in failed state. Only option is to remove /usr/lib/sysctl.d/elasticsearch.conf and try to reconfigure package.\r\nError appears even if /proc/sys/vm/max_map_count is already set to 262144 (on the host system).\r\n\r\n**Steps to reproduce**:\r\n 1. Spin up a debian LXC container lxc-create -n debian -t debian -- -r jessie\r\n 2. Install java\r\n 3. dpkg -i elasticsearch-5.0.2.deb\r\n**Provide logs (if relevant)**:\r\n\r\nReading package lists... Done\r\nBuilding dependency tree\r\nReading state information... Done\r\n0 upgraded, 0 newly installed, 0 to remove and 5 not upgraded.\r\n1 not fully installed or removed.\r\nAfter this operation, 0 B of additional disk space will be used.\r\nSetting up elasticsearch (5.0.2) ...\r\nFailed to write '262144' to '/proc/sys/vm/max_map_count': Read-only file system\r\ndpkg: error processing package elasticsearch (--configure):\r\n subprocess installed post-installation script returned error exit status 1\r\nErrors were encountered while processing:\r\n elasticsearch\r\nE: Sub-process /usr/bin/dpkg returned an error code\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}