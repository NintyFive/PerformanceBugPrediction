{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/31860","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31860/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31860/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31860/events","html_url":"https://github.com/elastic/elasticsearch/issues/31860","id":338923550,"node_id":"MDU6SXNzdWUzMzg5MjM1NTA=","number":31860,"title":"SQL: Suggesting a different approach to error messages","user":{"login":"astefan","id":893749,"node_id":"MDQ6VXNlcjg5Mzc0OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/893749?v=4","gravatar_id":"","url":"https://api.github.com/users/astefan","html_url":"https://github.com/astefan","followers_url":"https://api.github.com/users/astefan/followers","following_url":"https://api.github.com/users/astefan/following{/other_user}","gists_url":"https://api.github.com/users/astefan/gists{/gist_id}","starred_url":"https://api.github.com/users/astefan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astefan/subscriptions","organizations_url":"https://api.github.com/users/astefan/orgs","repos_url":"https://api.github.com/users/astefan/repos","events_url":"https://api.github.com/users/astefan/events{/privacy}","received_events_url":"https://api.github.com/users/astefan/received_events","type":"User","site_admin":false},"labels":[{"id":912794284,"node_id":"MDU6TGFiZWw5MTI3OTQyODQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Query%20Languages/SQL","name":":Query Languages/SQL","color":"0e8a16","default":false,"description":"SQL querying"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-07-06T12:38:11Z","updated_at":"2019-05-09T15:48:22Z","closed_at":"2019-05-09T15:48:22Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"At the moment, a limitation in the functionality of ES SQL due to how Elasticserach is able to support such functionality, is presented to the user as an error message that says **\"Cannot ......, expected.....\"** which loosely implies that the query is maybe wrong (which, in this case, is not wrong from SQL world point-of-view).\r\n\r\nExample: `SELECT SPACE(\"languages\") s, COUNT(*) count FROM \"test_emp\" WHERE \"languages\" IS NOT NULL GROUP BY SPACE(\"languages\") ORDER BY COUNT(*);`\r\n\r\nThis one prints the following error message:\r\n```\r\nBad request [Found 1 problem(s)\r\nline 1:178: Cannot order by non-grouped column [COUNT(1)], expected [SPACE(languages)]]\r\n```\r\n\r\nBut, ordering by count is not possible because the composite aggregation used behind the scene cannot sort by the size of the buckets (which is the count itself from sql). Maybe the error message could be clearer about this, mentioning somehow that this thing is unsupported: `Ordering by non-grouped columns [COUNT(1)] is unsupported, expected [SPACE()]`. This makes it less confusing by stating that this specific query configuration is un-supported (which is in fact true).","closed_by":{"login":"matriv","id":5058131,"node_id":"MDQ6VXNlcjUwNTgxMzE=","avatar_url":"https://avatars1.githubusercontent.com/u/5058131?v=4","gravatar_id":"","url":"https://api.github.com/users/matriv","html_url":"https://github.com/matriv","followers_url":"https://api.github.com/users/matriv/followers","following_url":"https://api.github.com/users/matriv/following{/other_user}","gists_url":"https://api.github.com/users/matriv/gists{/gist_id}","starred_url":"https://api.github.com/users/matriv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matriv/subscriptions","organizations_url":"https://api.github.com/users/matriv/orgs","repos_url":"https://api.github.com/users/matriv/repos","events_url":"https://api.github.com/users/matriv/events{/privacy}","received_events_url":"https://api.github.com/users/matriv/received_events","type":"User","site_admin":false},"performed_via_github_app":null}