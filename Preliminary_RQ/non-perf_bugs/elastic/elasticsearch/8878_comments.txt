[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66581731","html_url":"https://github.com/elastic/elasticsearch/issues/8878#issuecomment-66581731","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8878","id":66581731,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NTgxNzMx","user":{"login":"johtani","id":1142449,"node_id":"MDQ6VXNlcjExNDI0NDk=","avatar_url":"https://avatars0.githubusercontent.com/u/1142449?v=4","gravatar_id":"","url":"https://api.github.com/users/johtani","html_url":"https://github.com/johtani","followers_url":"https://api.github.com/users/johtani/followers","following_url":"https://api.github.com/users/johtani/following{/other_user}","gists_url":"https://api.github.com/users/johtani/gists{/gist_id}","starred_url":"https://api.github.com/users/johtani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/johtani/subscriptions","organizations_url":"https://api.github.com/users/johtani/orgs","repos_url":"https://api.github.com/users/johtani/repos","events_url":"https://api.github.com/users/johtani/events{/privacy}","received_events_url":"https://api.github.com/users/johtani/received_events","type":"User","site_admin":false},"created_at":"2014-12-11T07:21:20Z","updated_at":"2014-12-11T13:52:00Z","author_association":"CONTRIBUTOR","body":"@clintongormley question.\n\nNow, the API allow to use `tokenizer`, `char_filters`, `token_filters`/`filters` params.\nThis ticket means that we can include these params to JSON, don't it?\n\nOr should we add a analysys settings?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66663806","html_url":"https://github.com/elastic/elasticsearch/issues/8878#issuecomment-66663806","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8878","id":66663806,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NjYzODA2","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-12-11T18:22:25Z","updated_at":"2014-12-11T18:22:25Z","author_association":"CONTRIBUTOR","body":"@johtani Hmm at first I thought we should be able to specify an `analysis` section in the same way that we would in the index settings:\n\n```\nPOST /_analyze\n{\n  \"test\": \"Text to analyze\",\n  \"analyzer\": \"my_analyzer\",\n  \"analysis\": {\n    \"analyzer\": {\n      \"my_analyzer\": {\n        \"tokenizer\": \"standard\",\n        \"filter\": [\n          \"lowercase\",\n          \"my_stop\"\n        ]\n      }\n    },\n    \"filter\": {\n      \"my_stop\": {\n        \"type\": \"stop\",\n        \"stopwords\": [\n          \"and\",\n          \"the\"\n        ]\n      }\n    }\n  }\n}\n```\n\nNow I'm not so sure.  May be easier to specify all the parts inline, without names, eg:\n\n```\nPOST /_analyze\n{\n  \"text\": \"Text to analyze\",\n  \"tokenizer\": \"standard\",\n  \"filters\": [\n    \"lowercase\",\n    {\n      \"type\": \"stop\",\n      \"stopwords\": [\n        \"and\",\n        \"the\"\n      ]\n    }\n  ]\n}\n```\n\nWhich do you prefer?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66739334","html_url":"https://github.com/elastic/elasticsearch/issues/8878#issuecomment-66739334","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8878","id":66739334,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NzM5MzM0","user":{"login":"johtani","id":1142449,"node_id":"MDQ6VXNlcjExNDI0NDk=","avatar_url":"https://avatars0.githubusercontent.com/u/1142449?v=4","gravatar_id":"","url":"https://api.github.com/users/johtani","html_url":"https://github.com/johtani","followers_url":"https://api.github.com/users/johtani/followers","following_url":"https://api.github.com/users/johtani/following{/other_user}","gists_url":"https://api.github.com/users/johtani/gists{/gist_id}","starred_url":"https://api.github.com/users/johtani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/johtani/subscriptions","organizations_url":"https://api.github.com/users/johtani/orgs","repos_url":"https://api.github.com/users/johtani/repos","events_url":"https://api.github.com/users/johtani/events{/privacy}","received_events_url":"https://api.github.com/users/johtani/received_events","type":"User","site_admin":false},"created_at":"2014-12-12T07:09:18Z","updated_at":"2014-12-12T07:09:18Z","author_association":"CONTRIBUTOR","body":"I prefer first, because it is easy to copy to settings or templates.\n\nAnd for backward compatibility, we keep these properties, `tokenizer`/`char_filters`/`token_filters`/`filters`.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66740313","html_url":"https://github.com/elastic/elasticsearch/issues/8878#issuecomment-66740313","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8878","id":66740313,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NzQwMzEz","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2014-12-12T07:26:20Z","updated_at":"2014-12-12T07:26:20Z","author_association":"MEMBER","body":"I personally think the second is much cleaner.  Why wouldn't it still be copy/past from settings or templates, just from a different level (ie within an analyzer definition)?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66987753","html_url":"https://github.com/elastic/elasticsearch/issues/8878#issuecomment-66987753","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8878","id":66987753,"node_id":"MDEyOklzc3VlQ29tbWVudDY2OTg3NzUz","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-12-15T12:31:36Z","updated_at":"2014-12-15T12:31:36Z","author_association":"CONTRIBUTOR","body":"I agree with @rjernst - the first is just too verbose. With the second, it is easier to see what you are doing, i think.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/67814355","html_url":"https://github.com/elastic/elasticsearch/issues/8878#issuecomment-67814355","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8878","id":67814355,"node_id":"MDEyOklzc3VlQ29tbWVudDY3ODE0MzU1","user":{"login":"johtani","id":1142449,"node_id":"MDQ6VXNlcjExNDI0NDk=","avatar_url":"https://avatars0.githubusercontent.com/u/1142449?v=4","gravatar_id":"","url":"https://api.github.com/users/johtani","html_url":"https://github.com/johtani","followers_url":"https://api.github.com/users/johtani/followers","following_url":"https://api.github.com/users/johtani/following{/other_user}","gists_url":"https://api.github.com/users/johtani/gists{/gist_id}","starred_url":"https://api.github.com/users/johtani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/johtani/subscriptions","organizations_url":"https://api.github.com/users/johtani/orgs","repos_url":"https://api.github.com/users/johtani/repos","events_url":"https://api.github.com/users/johtani/events{/privacy}","received_events_url":"https://api.github.com/users/johtani/received_events","type":"User","site_admin":false},"created_at":"2014-12-22T08:50:33Z","updated_at":"2014-12-22T08:51:13Z","author_association":"CONTRIBUTOR","body":"OK. I will develop the second.\n\nAnd I think this Issue related #8961\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/68060247","html_url":"https://github.com/elastic/elasticsearch/issues/8878#issuecomment-68060247","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8878","id":68060247,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDYwMjQ3","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-12-24T15:57:56Z","updated_at":"2014-12-24T15:57:56Z","author_association":"CONTRIBUTOR","body":"Also see https://github.com/elasticsearch/elasticsearch/issues/3023\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/144382124","html_url":"https://github.com/elastic/elasticsearch/issues/8878#issuecomment-144382124","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8878","id":144382124,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NDM4MjEyNA==","user":{"login":"johtani","id":1142449,"node_id":"MDQ6VXNlcjExNDI0NDk=","avatar_url":"https://avatars0.githubusercontent.com/u/1142449?v=4","gravatar_id":"","url":"https://api.github.com/users/johtani","html_url":"https://github.com/johtani","followers_url":"https://api.github.com/users/johtani/followers","following_url":"https://api.github.com/users/johtani/following{/other_user}","gists_url":"https://api.github.com/users/johtani/gists{/gist_id}","starred_url":"https://api.github.com/users/johtani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/johtani/subscriptions","organizations_url":"https://api.github.com/users/johtani/orgs","repos_url":"https://api.github.com/users/johtani/repos","events_url":"https://api.github.com/users/johtani/events{/privacy}","received_events_url":"https://api.github.com/users/johtani/received_events","type":"User","site_admin":false},"created_at":"2015-09-30T12:30:25Z","updated_at":"2015-09-30T12:30:25Z","author_association":"CONTRIBUTOR","body":"I try to implement this, however it is hard to get any TokenFilter/Tokenizer/CharFilterFactory without IndexService.\nimplementing this needs to re-factor AnalysisModule I think...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/152223282","html_url":"https://github.com/elastic/elasticsearch/issues/8878#issuecomment-152223282","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8878","id":152223282,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MjIyMzI4Mg==","user":{"login":"johtani","id":1142449,"node_id":"MDQ6VXNlcjExNDI0NDk=","avatar_url":"https://avatars0.githubusercontent.com/u/1142449?v=4","gravatar_id":"","url":"https://api.github.com/users/johtani","html_url":"https://github.com/johtani","followers_url":"https://api.github.com/users/johtani/followers","following_url":"https://api.github.com/users/johtani/following{/other_user}","gists_url":"https://api.github.com/users/johtani/gists{/gist_id}","starred_url":"https://api.github.com/users/johtani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/johtani/subscriptions","organizations_url":"https://api.github.com/users/johtani/orgs","repos_url":"https://api.github.com/users/johtani/repos","events_url":"https://api.github.com/users/johtani/events{/privacy}","received_events_url":"https://api.github.com/users/johtani/received_events","type":"User","site_admin":false},"created_at":"2015-10-29T15:53:59Z","updated_at":"2015-10-29T15:53:59Z","author_association":"CONTRIBUTOR","body":"#14355 and #8961 are related to this\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/263608739","html_url":"https://github.com/elastic/elasticsearch/issues/8878#issuecomment-263608739","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8878","id":263608739,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzYwODczOQ==","user":{"login":"celesteking","id":748075,"node_id":"MDQ6VXNlcjc0ODA3NQ==","avatar_url":"https://avatars3.githubusercontent.com/u/748075?v=4","gravatar_id":"","url":"https://api.github.com/users/celesteking","html_url":"https://github.com/celesteking","followers_url":"https://api.github.com/users/celesteking/followers","following_url":"https://api.github.com/users/celesteking/following{/other_user}","gists_url":"https://api.github.com/users/celesteking/gists{/gist_id}","starred_url":"https://api.github.com/users/celesteking/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/celesteking/subscriptions","organizations_url":"https://api.github.com/users/celesteking/orgs","repos_url":"https://api.github.com/users/celesteking/repos","events_url":"https://api.github.com/users/celesteking/events{/privacy}","received_events_url":"https://api.github.com/users/celesteking/received_events","type":"User","site_admin":false},"created_at":"2016-11-29T15:51:39Z","updated_at":"2016-11-29T15:51:39Z","author_association":"NONE","body":"This was a very bad decision, to separate _analyze API from index settings API.\r\n\r\nI can't find a way to make this work in /_analyze:\r\n```\r\n    \"analysis\": {\r\n      \"analyzer\": {\r\n        \"my_analyzer\": {\r\n          \"tokenizer\": \"my_tokenizer\"\r\n        }\r\n      },\r\n      \"tokenizer\": {\r\n        \"my_tokenizer\": {\r\n          \"type\": \"pattern\",\r\n          \"pattern\": \",\"\r\n        }\r\n      }\r\n```\r\n\r\nThe whole point of _anazlye, is to try YOUR OWN custom analyzer, not the one that's defined in the book. Becaues the one in book is already known to work and explained in details.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/263652717","html_url":"https://github.com/elastic/elasticsearch/issues/8878#issuecomment-263652717","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8878","id":263652717,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzY1MjcxNw==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2016-11-29T18:18:28Z","updated_at":"2016-11-29T18:18:51Z","author_association":"MEMBER","body":"> This was a very bad decision, to separate _analyze API from index settings API.\r\n\r\nI am not sure I follow, this issue refers to an improvement, an addition that allows to include tokenizers etc. as part of the request body of the analyze api. What was the bad decision exactly?\r\n\r\nYou can test your tokenizer by defining it as an anonymous tokenizer, you don't have to create an analyzer for it:\r\n\r\n```\r\ncurl -XGET localhost:9202/_analyze -d '{    \r\n  \"text\" : \"test1,test2\",\r\n  \"tokenizer\": {\r\n    \"type\": \"pattern\",\r\n    \"pattern\": \",\"\r\n  }\r\n}\r\n'\r\n```\r\n\r\nThe analyzer can only be a string, referring to an existing analyzer, but the nice thing is that you can create an anonymous analyzer on the fly by just combining an anonymous tokenizer and anonymous token filters. Hope this clarifies things for you.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/263658232","html_url":"https://github.com/elastic/elasticsearch/issues/8878#issuecomment-263658232","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8878","id":263658232,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzY1ODIzMg==","user":{"login":"celesteking","id":748075,"node_id":"MDQ6VXNlcjc0ODA3NQ==","avatar_url":"https://avatars3.githubusercontent.com/u/748075?v=4","gravatar_id":"","url":"https://api.github.com/users/celesteking","html_url":"https://github.com/celesteking","followers_url":"https://api.github.com/users/celesteking/followers","following_url":"https://api.github.com/users/celesteking/following{/other_user}","gists_url":"https://api.github.com/users/celesteking/gists{/gist_id}","starred_url":"https://api.github.com/users/celesteking/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/celesteking/subscriptions","organizations_url":"https://api.github.com/users/celesteking/orgs","repos_url":"https://api.github.com/users/celesteking/repos","events_url":"https://api.github.com/users/celesteking/events{/privacy}","received_events_url":"https://api.github.com/users/celesteking/received_events","type":"User","site_admin":false},"created_at":"2016-11-29T18:38:23Z","updated_at":"2016-11-29T18:38:23Z","author_association":"NONE","body":"Decision to choose 2) over 1) in  https://github.com/elastic/elasticsearch/issues/8878#issuecomment-66663806 \r\n\r\nYour query is the first thing I tried, it fails:\r\n```\r\n{\r\n  \"error\": {\r\n    \"root_cause\": [\r\n      {\r\n        \"type\": \"illegal_argument_exception\",\r\n        \"reason\": \"Unknown parameter [tokenizer] in request body or parameter is of the wrong type[START_OBJECT] \"\r\n      }\r\n    ],\r\n    \"type\": \"illegal_argument_exception\",\r\n    \"reason\": \"Unknown parameter [tokenizer] in request body or parameter is of the wrong type[START_OBJECT] \"\r\n  },\r\n  \"status\": 400\r\n}\r\n```\r\n\r\nAlso, whole doc is wrong https://www.elastic.co/guide/en/elasticsearch/reference/2.4/indices-analyze.html -- the method should be POST not GET. \r\nGET requests should not contain a body, according to REST guides.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/263659847","html_url":"https://github.com/elastic/elasticsearch/issues/8878#issuecomment-263659847","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8878","id":263659847,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzY1OTg0Nw==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2016-11-29T18:44:14Z","updated_at":"2016-11-29T18:44:34Z","author_association":"MEMBER","body":"@celesteking which version are you running against? I have tried it before posting it against 5.0.1 and it worked fine.\r\n\r\n> Also, whole doc is wrong https://www.elastic.co/guide/en/elasticsearch/reference/2.4/indices-analyze.html -- the method should be POST not GET.\r\nGET requests should not contain a body, according to REST guides.\r\n\r\nYes that is a big debate in IT, we went for supporting body with GET requests, hence that is no mistake in our docs.\r\n\r\nYou are welcome. ","performed_via_github_app":null}]