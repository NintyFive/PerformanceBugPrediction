{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/9850","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9850/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9850/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9850/events","html_url":"https://github.com/elastic/elasticsearch/issues/9850","id":58768344,"node_id":"MDU6SXNzdWU1ODc2ODM0NA==","number":9850,"title":"Elasticsearch converting float numbers when aggregating","user":{"login":"ap0091","id":9735723,"node_id":"MDQ6VXNlcjk3MzU3MjM=","avatar_url":"https://avatars3.githubusercontent.com/u/9735723?v=4","gravatar_id":"","url":"https://api.github.com/users/ap0091","html_url":"https://github.com/ap0091","followers_url":"https://api.github.com/users/ap0091/followers","following_url":"https://api.github.com/users/ap0091/following{/other_user}","gists_url":"https://api.github.com/users/ap0091/gists{/gist_id}","starred_url":"https://api.github.com/users/ap0091/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ap0091/subscriptions","organizations_url":"https://api.github.com/users/ap0091/orgs","repos_url":"https://api.github.com/users/ap0091/repos","events_url":"https://api.github.com/users/ap0091/events{/privacy}","received_events_url":"https://api.github.com/users/ap0091/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-02-24T17:01:51Z","updated_at":"2015-02-24T17:10:38Z","closed_at":"2015-02-24T17:10:38Z","author_association":"NONE","active_lock_reason":null,"body":"Hello,\nI have a index with multiple documents and  columns.\nTwo of my columns are order number and status code.\nI am trying to identify all unique ordernumbers and find the highest status code within that same order_number.\nFor example: \nOrder Number : 123 has 5 documents each with different status codes (1, 2, 3.4,5,7)\nOrder Number : 125 has 3 documents each with different status codes (3,6,3.3)\n\nI have noticed that when I have a decimal number, the value gets converted to random number. For exmaple:\nIf a status code was 3350.2, it would get converted to 3350.199951171875\n\nAggs part of the query looks like:\n      \"aggs\" : {\n        \"keys\" : \n            {\n                \"terms\" : { \"field\" : \"ol.ORDER_LINE_KEY\", \"size\": 2500},\n                \"aggs\" : {\n                    \"max\" : { \"max\" : { \"field\" : \"ol.STATUS_CODE\" } }\n                }\n            }\n        }\n    }\n\nIn ES_Head, the status code appears to be correct, it only seems to messup when doing aggs.\n","closed_by":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"performed_via_github_app":null}