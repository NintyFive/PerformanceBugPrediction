{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/3781","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3781/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3781/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3781/events","html_url":"https://github.com/elastic/elasticsearch/issues/3781","id":20054880,"node_id":"MDU6SXNzdWUyMDA1NDg4MA==","number":3781,"title":"Random startup / connection failures","user":{"login":"markoa","id":8651,"node_id":"MDQ6VXNlcjg2NTE=","avatar_url":"https://avatars1.githubusercontent.com/u/8651?v=4","gravatar_id":"","url":"https://api.github.com/users/markoa","html_url":"https://github.com/markoa","followers_url":"https://api.github.com/users/markoa/followers","following_url":"https://api.github.com/users/markoa/following{/other_user}","gists_url":"https://api.github.com/users/markoa/gists{/gist_id}","starred_url":"https://api.github.com/users/markoa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markoa/subscriptions","organizations_url":"https://api.github.com/users/markoa/orgs","repos_url":"https://api.github.com/users/markoa/repos","events_url":"https://api.github.com/users/markoa/events{/privacy}","received_events_url":"https://api.github.com/users/markoa/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"assignees":[{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false}],"milestone":null,"comments":6,"created_at":"2013-09-25T16:49:17Z","updated_at":"2014-08-08T17:36:49Z","closed_at":"2014-08-08T17:36:49Z","author_association":"NONE","active_lock_reason":null,"body":"Hello,\n\nElasticsearch has been part of [Semaphore](https://semaphoreapp.com)'s CI build platform since January 2013. Over time and with all versions (we're currently [running](http://docs.semaphoreapp.com/version-information) 0.90.2 inside Ubuntu 12.04 LXC containers) our users randomly get connection errors such as:\n\n```\nSkipping index creation, cannot connect to Elasticsearch\n(The original exception was: #<Errno::ECONNREFUSED: Connection refused - connect(2)>)\n```\n\nUser who's log I'm getting this from is running Tire 0.5.8.\n\nThis is how we set up Elasticsearch:\n\n```\ncd /tmp\nwget http://download.elasticsearch.org/elasticsearch/elasticsearch/elasticsearch-0.90.2.tar.gz -O elasticsearch.tar.gz\ntar -xf elasticsearch.tar.gz\nrm elasticsearch.tar.gz\nmv elasticsearch-* elasticsearch\nmv elasticsearch /usr/local/share\ncurl -L https://github.com/elasticsearch/elasticsearch-servicewrapper/tarball/master | tar -xz\nmv *servicewrapper*/service /usr/local/share/elasticsearch/bin/\nrm -Rf *servicewrapper*\n/usr/local/share/elasticsearch/bin/service/elasticsearch install\nln -s `readlink -f /usr/local/share/elasticsearch/bin/service/elasticsearch` /usr/local/bin/rcelasticsearch\nservice elasticsearch start\n```\n\nIn some cases we've even told users to run another `sudo service elasticsearch stop/start` themselves before the build, and even though the output of that looks good, the problem may still happen.\n\nI'd really love to get some clue into why this is happenning. I would appreciate any help.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}