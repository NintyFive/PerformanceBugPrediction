[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/456106238","html_url":"https://github.com/elastic/elasticsearch/issues/37664#issuecomment-456106238","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37664","id":456106238,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjEwNjIzOA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-01-21T15:11:56Z","updated_at":"2019-01-21T15:11:56Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/456128883","html_url":"https://github.com/elastic/elasticsearch/issues/37664#issuecomment-456128883","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37664","id":456128883,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjEyODg4Mw==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2019-01-21T16:22:28Z","updated_at":"2019-01-21T16:22:28Z","author_association":"CONTRIBUTOR","body":"I suspect this kind of issue became more common as a result of #27116: because we never fail opening segments, it is possible that the accounting circuit breaker ends up using all memory of the parent circuit breaker, preventing any new allocations.\r\n\r\nI haven't thought about it much yet but I wonder whether we could have allocation rules based on memory usage of segments similarly to what we are already doing with disk usage already?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/456607363","html_url":"https://github.com/elastic/elasticsearch/issues/37664#issuecomment-456607363","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37664","id":456607363,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjYwNzM2Mw==","user":{"login":"hpandeycodeit","id":21266105,"node_id":"MDQ6VXNlcjIxMjY2MTA1","avatar_url":"https://avatars3.githubusercontent.com/u/21266105?v=4","gravatar_id":"","url":"https://api.github.com/users/hpandeycodeit","html_url":"https://github.com/hpandeycodeit","followers_url":"https://api.github.com/users/hpandeycodeit/followers","following_url":"https://api.github.com/users/hpandeycodeit/following{/other_user}","gists_url":"https://api.github.com/users/hpandeycodeit/gists{/gist_id}","starred_url":"https://api.github.com/users/hpandeycodeit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hpandeycodeit/subscriptions","organizations_url":"https://api.github.com/users/hpandeycodeit/orgs","repos_url":"https://api.github.com/users/hpandeycodeit/repos","events_url":"https://api.github.com/users/hpandeycodeit/events{/privacy}","received_events_url":"https://api.github.com/users/hpandeycodeit/received_events","type":"User","site_admin":false},"created_at":"2019-01-22T23:35:21Z","updated_at":"2019-01-22T23:35:21Z","author_association":"NONE","body":"@colings86 I can work on this one. Correct me if I am wrong, this file needs to be updated \r\n```\r\ndocs/reference/modules/indices/circuit_breaker.asciidoc \r\n```\r\n\r\nIs there an exact text that needs to be put in? ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/456845647","html_url":"https://github.com/elastic/elasticsearch/issues/37664#issuecomment-456845647","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37664","id":456845647,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1Njg0NTY0Nw==","user":{"login":"MorrieAtElastic","id":28967808,"node_id":"MDQ6VXNlcjI4OTY3ODA4","avatar_url":"https://avatars1.githubusercontent.com/u/28967808?v=4","gravatar_id":"","url":"https://api.github.com/users/MorrieAtElastic","html_url":"https://github.com/MorrieAtElastic","followers_url":"https://api.github.com/users/MorrieAtElastic/followers","following_url":"https://api.github.com/users/MorrieAtElastic/following{/other_user}","gists_url":"https://api.github.com/users/MorrieAtElastic/gists{/gist_id}","starred_url":"https://api.github.com/users/MorrieAtElastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MorrieAtElastic/subscriptions","organizations_url":"https://api.github.com/users/MorrieAtElastic/orgs","repos_url":"https://api.github.com/users/MorrieAtElastic/repos","events_url":"https://api.github.com/users/MorrieAtElastic/events{/privacy}","received_events_url":"https://api.github.com/users/MorrieAtElastic/received_events","type":"User","site_admin":false},"created_at":"2019-01-23T15:30:36Z","updated_at":"2019-01-23T15:30:54Z","author_association":"CONTRIBUTOR","body":"Suggested wording: \r\n\r\n\"\r\n**Operating Limits of Elasticsearch Clusters**\r\nEvery Elasticsearch cluster has a limit to the amount of data it can store. When this limit is exceeded, the cluster will become inoperable and every attempted data operation will fail with some kind of circuit-breaker exception. This is not just a question of having so much data stored on disk that every query becomes unacceptably slow: when the operational limit is exceeded, the cluster will be unable to perform any kind of query, ingestion or indexing operation. Every attempted user operation - and also many administrative operations will fail with circuit-breaker exceptions.\r\n\r\nEssentially the operating limit is reached when the amount of indexed data causes various internal data mapping structures to consume so much of the node’s memory that any additional operation would cause the node’s Java Virtual Machine (JVM) to crash with an out- of-memory condition. Circuit-breakers are tripped to prevent the JVM from reaching the out-of-memory point. When the cluster’s operating limit is reached every single attempted operation trips at least one circuit breaker , causing the operation to fail with a circuit-breaker exception. The elasticsearch logs may show thousands of circuit-breaking exceptions generated in a short period of time.\r\n\r\nThe exact size of each  cluster’s operational limit depends on several factors including the amount of RAM allocated to each node’s JVM, the amount of data stored in the cluster, the nature of index document keys, the number of shards in each index, the amount of field data mapped to fields in an index, and other factors. There is no way to exactly calculate a given cluster’s operational limit. As a general approximation: for nodes with 30 gigabyte (gb) JVM’s, a cluster’s operating limit will come at some point greater than 10 terabytes (tb) of indexed data per node. \r\n\r\nCustomers with clusters having terabytes of data per node - and where the total index load is growing -  should be especially aware that they may be approaching their cluster's operating limit. They may wish to check the value of various circuit breakers through node statistics calls. \r\n\"\r\n\r\n-we may also wish to show examples of circuit breaker, storage , field data , segments and other values which can be obtained through node-statistics calls. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/547106297","html_url":"https://github.com/elastic/elasticsearch/issues/37664#issuecomment-547106297","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37664","id":547106297,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzEwNjI5Nw==","user":{"login":"wchrisdean","id":53786748,"node_id":"MDQ6VXNlcjUzNzg2NzQ4","avatar_url":"https://avatars2.githubusercontent.com/u/53786748?v=4","gravatar_id":"","url":"https://api.github.com/users/wchrisdean","html_url":"https://github.com/wchrisdean","followers_url":"https://api.github.com/users/wchrisdean/followers","following_url":"https://api.github.com/users/wchrisdean/following{/other_user}","gists_url":"https://api.github.com/users/wchrisdean/gists{/gist_id}","starred_url":"https://api.github.com/users/wchrisdean/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wchrisdean/subscriptions","organizations_url":"https://api.github.com/users/wchrisdean/orgs","repos_url":"https://api.github.com/users/wchrisdean/repos","events_url":"https://api.github.com/users/wchrisdean/events{/privacy}","received_events_url":"https://api.github.com/users/wchrisdean/received_events","type":"User","site_admin":false},"created_at":"2019-10-28T19:22:42Z","updated_at":"2019-10-28T19:22:42Z","author_association":"CONTRIBUTOR","body":"[doc issue triage]","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/564635130","html_url":"https://github.com/elastic/elasticsearch/issues/37664#issuecomment-564635130","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37664","id":564635130,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDYzNTEzMA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2019-12-11T16:53:55Z","updated_at":"2019-12-11T16:53:55Z","author_association":"MEMBER","body":"I don't think we should add any documentation along these lines. I think it's too vague and not actionable for users. I think it's understood that every system has finite capacity, and we try to expose to users in various stats endpoints some of the ways in which capacity can fill up (exposing queue depths, rejected executions, circuit breaker stats, memory usage, etc.) and also to push back on users when they are exceeding capacity. We advocate through various blog posts sound architectures where we advocate scaling horizontally at the cluster level rather than vertically (i.e., multiple not large clusters versus a single large cluster). If there are specific places where we aren't exposing the right information, then we can consider additions to Elasticsearch in those regards, but documentation along the lines of what is suggested here I don't think is going to be useful to our users.","performed_via_github_app":null}]