{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/11075","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11075/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11075/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11075/events","html_url":"https://github.com/elastic/elasticsearch/issues/11075","id":74617279,"node_id":"MDU6SXNzdWU3NDYxNzI3OQ==","number":11075,"title":"bulk index connection timeout caused by readtimeout error","user":{"login":"fantastao","id":5363437,"node_id":"MDQ6VXNlcjUzNjM0Mzc=","avatar_url":"https://avatars2.githubusercontent.com/u/5363437?v=4","gravatar_id":"","url":"https://api.github.com/users/fantastao","html_url":"https://github.com/fantastao","followers_url":"https://api.github.com/users/fantastao/followers","following_url":"https://api.github.com/users/fantastao/following{/other_user}","gists_url":"https://api.github.com/users/fantastao/gists{/gist_id}","starred_url":"https://api.github.com/users/fantastao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fantastao/subscriptions","organizations_url":"https://api.github.com/users/fantastao/orgs","repos_url":"https://api.github.com/users/fantastao/repos","events_url":"https://api.github.com/users/fantastao/events{/privacy}","received_events_url":"https://api.github.com/users/fantastao/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-05-09T07:58:01Z","updated_at":"2015-05-09T11:09:10Z","closed_at":"2015-05-09T11:09:10Z","author_association":"NONE","active_lock_reason":null,"body":"In my case,I am trying to use bulk indexing for a large amount of documents.\n\n```\ndef bulk_index():\n    chunk = []\n    for count, doc in enumerate(doc_generator()):\n        id = doc.get('_id')\n        chunk.append({\n            'index': {\n                '_id': id\n            }\n        })\n        chunk.append(doc)\n        if (count + 1) % 10000 == 0:\n            assert len(chunk) == 20000\n            res = es.bulk(index='weibo', doc_type='user', body=chunk)\n            assert res['errors'] is False\n            chunk = []\n    print 'docs total count: %s' % (count + 1)\n```\n\n```\nTraceback (most recent call last):\n  File \"es_index.py\", line 63, in <module>\n    bulk_index()\n  File \"es_index.py\", line 16, in _\n    rv = func(*args, **kwargs)\n  File \"es_index.py\", line 53, in bulk_index\n    res = es.bulk(index='weibo', doc_type='user', body=chunk)\n  File \"/usr/local/lib/python2.7/dist-packages/elasticsearch/client/utils.py\", line 68, in _wrapped\n    return func(*args, params=params, **kwargs)\n  File \"/usr/local/lib/python2.7/dist-packages/elasticsearch/client/__init__.py\", line 711, in bulk\n    params=params, body=self._bulk_body(body))\n  File \"/usr/local/lib/python2.7/dist-packages/elasticsearch/transport.py\", line 307, in perform_request\n    status, headers, data = connection.perform_request(method, url, params, body, ignore=ignore, timeout=timeout)\n  File \"/usr/local/lib/python2.7/dist-packages/elasticsearch/connection/http_urllib3.py\", line 79, in perform_request\n    raise ConnectionTimeout('TIMEOUT', str(e), e)\nelasticsearch.exceptions.ConnectionTimeout: ConnectionTimeout caused by - ReadTimeoutError(HTTPConnectionPool(host='localhost', port=9200): Read timed out. (read timeout=10))\n```\n\nMy `elasticsearch.yml`is just like:\n\n```\nindex.analysis.analyzer.default.type : \"ik\"\nindex.store.type: mmapfs\nindices.memory.index_buffer_size: 30%\nindex.translog.flush_threshold_ops: 50000\nrefresh_interval: 30s\n```\n","closed_by":{"login":"markwalkom","id":3184718,"node_id":"MDQ6VXNlcjMxODQ3MTg=","avatar_url":"https://avatars0.githubusercontent.com/u/3184718?v=4","gravatar_id":"","url":"https://api.github.com/users/markwalkom","html_url":"https://github.com/markwalkom","followers_url":"https://api.github.com/users/markwalkom/followers","following_url":"https://api.github.com/users/markwalkom/following{/other_user}","gists_url":"https://api.github.com/users/markwalkom/gists{/gist_id}","starred_url":"https://api.github.com/users/markwalkom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markwalkom/subscriptions","organizations_url":"https://api.github.com/users/markwalkom/orgs","repos_url":"https://api.github.com/users/markwalkom/repos","events_url":"https://api.github.com/users/markwalkom/events{/privacy}","received_events_url":"https://api.github.com/users/markwalkom/received_events","type":"User","site_admin":false},"performed_via_github_app":null}