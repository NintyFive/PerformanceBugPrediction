{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/29403","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29403/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29403/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29403/events","html_url":"https://github.com/elastic/elasticsearch/issues/29403","id":311740165,"node_id":"MDU6SXNzdWUzMTE3NDAxNjU=","number":29403,"title":"QueryStringQueryBuilder equals == true when query is not equal","user":{"login":"jecstarinnovations","id":34766963,"node_id":"MDQ6VXNlcjM0NzY2OTYz","avatar_url":"https://avatars0.githubusercontent.com/u/34766963?v=4","gravatar_id":"","url":"https://api.github.com/users/jecstarinnovations","html_url":"https://github.com/jecstarinnovations","followers_url":"https://api.github.com/users/jecstarinnovations/followers","following_url":"https://api.github.com/users/jecstarinnovations/following{/other_user}","gists_url":"https://api.github.com/users/jecstarinnovations/gists{/gist_id}","starred_url":"https://api.github.com/users/jecstarinnovations/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jecstarinnovations/subscriptions","organizations_url":"https://api.github.com/users/jecstarinnovations/orgs","repos_url":"https://api.github.com/users/jecstarinnovations/repos","events_url":"https://api.github.com/users/jecstarinnovations/events{/privacy}","received_events_url":"https://api.github.com/users/jecstarinnovations/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"assignees":[{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2018-04-05T19:30:37Z","updated_at":"2018-04-06T10:47:56Z","closed_at":"2018-04-06T10:45:35Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version** (`bin/elasticsearch --version`): 6.2.3\r\n\r\n**Plugins installed**: [] D.N.A.\r\n\r\n**JVM version** (`java -version`): openjdk version \"1.8.0_161\"\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): Linux jecstar-laptop 4.15.13-300.fc27.x86_64 #1 SMP Mon Mar 26 19:06:57 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n**Description of the problem including expected versus actual behavior**: The doEquals() method in the org.elasticsearch.index.query.QueryStringQueryBuilder is not working properly. When two different instances with different queries are compared by the equals method everything works as expected (equals() == false). \r\nWhen adding an equal timezone id to both instances of the QueryStringQueryBuilder, the equals() method will return true despite the query values are not equal. This is caused because parenthesis are missing around the statement at line 928. \r\n\r\n**Steps to reproduce**:\r\nFor a complete example see the attached gradle project.\r\n[querystringquerybug.tar.gz](https://github.com/elastic/elasticsearch/files/1881442/querystringquerybug.tar.gz)\r\n \r\n\r\n**Provide logs (if relevant)**: D.N.A.\r\n\r\n","closed_by":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"performed_via_github_app":null}