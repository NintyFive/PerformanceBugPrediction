{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/49556","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49556/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49556/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49556/events","html_url":"https://github.com/elastic/elasticsearch/issues/49556","id":528194821,"node_id":"MDU6SXNzdWU1MjgxOTQ4MjE=","number":49556,"title":"SQL: aliased FLOOR and CEIL functions fail with NPE","user":{"login":"astefan","id":893749,"node_id":"MDQ6VXNlcjg5Mzc0OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/893749?v=4","gravatar_id":"","url":"https://api.github.com/users/astefan","html_url":"https://github.com/astefan","followers_url":"https://api.github.com/users/astefan/followers","following_url":"https://api.github.com/users/astefan/following{/other_user}","gists_url":"https://api.github.com/users/astefan/gists{/gist_id}","starred_url":"https://api.github.com/users/astefan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astefan/subscriptions","organizations_url":"https://api.github.com/users/astefan/orgs","repos_url":"https://api.github.com/users/astefan/repos","events_url":"https://api.github.com/users/astefan/events{/privacy}","received_events_url":"https://api.github.com/users/astefan/received_events","type":"User","site_admin":false},"labels":[{"id":912794284,"node_id":"MDU6TGFiZWw5MTI3OTQyODQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Query%20Languages/SQL","name":":Query Languages/SQL","color":"0e8a16","default":false,"description":"SQL querying"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"astefan","id":893749,"node_id":"MDQ6VXNlcjg5Mzc0OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/893749?v=4","gravatar_id":"","url":"https://api.github.com/users/astefan","html_url":"https://github.com/astefan","followers_url":"https://api.github.com/users/astefan/followers","following_url":"https://api.github.com/users/astefan/following{/other_user}","gists_url":"https://api.github.com/users/astefan/gists{/gist_id}","starred_url":"https://api.github.com/users/astefan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astefan/subscriptions","organizations_url":"https://api.github.com/users/astefan/orgs","repos_url":"https://api.github.com/users/astefan/repos","events_url":"https://api.github.com/users/astefan/events{/privacy}","received_events_url":"https://api.github.com/users/astefan/received_events","type":"User","site_admin":false},"assignees":[{"login":"astefan","id":893749,"node_id":"MDQ6VXNlcjg5Mzc0OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/893749?v=4","gravatar_id":"","url":"https://api.github.com/users/astefan","html_url":"https://github.com/astefan","followers_url":"https://api.github.com/users/astefan/followers","following_url":"https://api.github.com/users/astefan/following{/other_user}","gists_url":"https://api.github.com/users/astefan/gists{/gist_id}","starred_url":"https://api.github.com/users/astefan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astefan/subscriptions","organizations_url":"https://api.github.com/users/astefan/orgs","repos_url":"https://api.github.com/users/astefan/repos","events_url":"https://api.github.com/users/astefan/events{/privacy}","received_events_url":"https://api.github.com/users/astefan/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2019-11-25T16:24:31Z","updated_at":"2019-12-03T14:25:36Z","closed_at":"2019-12-02T14:04:28Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"`SELECT FLOOR(CAST(NULL AS DOUBLE)) AS x FROM test_emp`\r\n\r\nresults in \r\n\r\n```\r\njava.lang.NullPointerException: null\r\n        at org.elasticsearch.xpack.sql.expression.function.scalar.math.Floor.fold(Floor.java:36) ~[?:?]\r\n        at org.elasticsearch.xpack.sql.expression.NamedExpression.asPipe(NamedExpression.java:56) ~[?:?]\r\n        at org.elasticsearch.xpack.sql.expression.function.scalar.ScalarFunction.toAttribute(ScalarFunction.java:39) ~[?:?]\r\n        at org.elasticsearch.xpack.sql.expression.function.scalar.ScalarFunction.toAttribute(ScalarFunction.java:23) ~[?:?]\r\n        at org.elasticsearch.xpack.sql.expression.Expressions.attribute(Expressions.java:150) ~[?:?]\r\n        at org.elasticsearch.xpack.sql.expression.Alias.createAttribute(Alias.java:109) ~[?:?]\r\n        at org.elasticsearch.xpack.sql.expression.Alias.toAttribute(Alias.java:95) ~[?:?]\r\n        at org.elasticsearch.xpack.sql.optimizer.Optimizer$ReplaceFoldableAttributes.lambda$rule$0(Optimizer.java:1143) ~[?:?]\r\n        at org.elasticsearch.xpack.sql.tree.Node.lambda$forEachDown$1(Node.java:74) ~[?:?]\r\n        at org.elasticsearch.xpack.sql.tree.Node.forEachDown(Node.java:66) ~[?:?]\r\n        at org.elasticsearch.xpack.sql.tree.Node.forEachDown(Node.java:72) ~[?:?]\r\n        at org.elasticsearch.xpack.sql.optimizer.Optimizer$ReplaceFoldableAttributes.rule(Optimizer.java:1139) ~[?:?]\r\n        at org.elasticsearch.xpack.sql.optimizer.Optimizer$ReplaceFoldableAttributes.apply(Optimizer.java:1130) ~[?:?]\r\n        at org.elasticsearch.xpack.sql.optimizer.Optimizer$ReplaceFoldableAttributes.apply(Optimizer.java:1126) ~[?:?]\r\n        at org.elasticsearch.xpack.sql.rule.RuleExecutor$Transformation.<init>(RuleExecutor.java:82) ~[?:?]\r\n        at org.elasticsearch.xpack.sql.rule.RuleExecutor.executeWithInfo(RuleExecutor.java:158) ~[?:?]\r\n        at org.elasticsearch.xpack.sql.rule.RuleExecutor.execute(RuleExecutor.java:130) ~[?:?]\r\n        at org.elasticsearch.xpack.sql.optimizer.Optimizer.optimize(Optimizer.java:122) ~[?:?]\r\n        at org.elasticsearch.xpack.sql.session.SqlSession.lambda$optimizedPlan$3(SqlSession.java:156) ~[?:?]\r\n```","closed_by":{"login":"astefan","id":893749,"node_id":"MDQ6VXNlcjg5Mzc0OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/893749?v=4","gravatar_id":"","url":"https://api.github.com/users/astefan","html_url":"https://github.com/astefan","followers_url":"https://api.github.com/users/astefan/followers","following_url":"https://api.github.com/users/astefan/following{/other_user}","gists_url":"https://api.github.com/users/astefan/gists{/gist_id}","starred_url":"https://api.github.com/users/astefan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astefan/subscriptions","organizations_url":"https://api.github.com/users/astefan/orgs","repos_url":"https://api.github.com/users/astefan/repos","events_url":"https://api.github.com/users/astefan/events{/privacy}","received_events_url":"https://api.github.com/users/astefan/received_events","type":"User","site_admin":false},"performed_via_github_app":null}