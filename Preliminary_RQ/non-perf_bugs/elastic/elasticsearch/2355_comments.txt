[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/9734602","html_url":"https://github.com/elastic/elasticsearch/issues/2355#issuecomment-9734602","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2355","id":9734602,"node_id":"MDEyOklzc3VlQ29tbWVudDk3MzQ2MDI=","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2012-10-24T10:24:42Z","updated_at":"2012-10-24T10:24:42Z","author_association":"CONTRIBUTOR","body":"I don't follow. You _should_ use the `filtered` query rather than the `filter` parameter.  Otherwise you score all of your docs before filtering them.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/9734701","html_url":"https://github.com/elastic/elasticsearch/issues/2355#issuecomment-9734701","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2355","id":9734701,"node_id":"MDEyOklzc3VlQ29tbWVudDk3MzQ3MDE=","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2012-10-24T10:29:48Z","updated_at":"2012-10-24T10:29:48Z","author_association":"CONTRIBUTOR","body":"The `filter` parameter is specifically for filtering results AFTER facets have been calculated - that's the only time you should use it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/9745127","html_url":"https://github.com/elastic/elasticsearch/issues/2355#issuecomment-9745127","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2355","id":9745127,"node_id":"MDEyOklzc3VlQ29tbWVudDk3NDUxMjc=","user":{"login":"joshdevins","id":181622,"node_id":"MDQ6VXNlcjE4MTYyMg==","avatar_url":"https://avatars2.githubusercontent.com/u/181622?v=4","gravatar_id":"","url":"https://api.github.com/users/joshdevins","html_url":"https://github.com/joshdevins","followers_url":"https://api.github.com/users/joshdevins/followers","following_url":"https://api.github.com/users/joshdevins/following{/other_user}","gists_url":"https://api.github.com/users/joshdevins/gists{/gist_id}","starred_url":"https://api.github.com/users/joshdevins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshdevins/subscriptions","organizations_url":"https://api.github.com/users/joshdevins/orgs","repos_url":"https://api.github.com/users/joshdevins/repos","events_url":"https://api.github.com/users/joshdevins/events{/privacy}","received_events_url":"https://api.github.com/users/joshdevins/received_events","type":"User","site_admin":false},"created_at":"2012-10-24T16:01:27Z","updated_at":"2012-10-24T16:02:26Z","author_association":"MEMBER","body":"The point is that the default documentation for filters is also doing a filtered query. This is misleading and makes it look like you should or always have to do a filtered query, which is just not true and depends heavily on the types of queries. There are times when it makes sense to execute the query, score and then filter after, such as when the query itself always returns a small subset of documents. Maybe @s1monw can explain better, we discussed in person last week.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/9769289","html_url":"https://github.com/elastic/elasticsearch/issues/2355#issuecomment-9769289","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2355","id":9769289,"node_id":"MDEyOklzc3VlQ29tbWVudDk3NjkyODk=","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2012-10-25T08:13:21Z","updated_at":"2012-10-25T08:13:21Z","author_association":"CONTRIBUTOR","body":"Fair enough, but given that most people copy and paste to learn, I'd say it is better to show them the general best practice, and to discuss other techniques elsewhere.  Just presenting a different way of doing it won't explain why or when you should use other techniques.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/9769765","html_url":"https://github.com/elastic/elasticsearch/issues/2355#issuecomment-9769765","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2355","id":9769765,"node_id":"MDEyOklzc3VlQ29tbWVudDk3Njk3NjU=","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2012-10-25T08:32:23Z","updated_at":"2012-10-25T08:39:18Z","author_association":"CONTRIBUTOR","body":"I think the general advice here is to put up a better documentation. I actually agree with josh in his example that if you use filter here IMO. @clintongormley the score assumption is not correct. What happens here is that if you use `filtered` query you execute the filter first and then do the query processing on a per document basis (we call it leap-frog approach or zigzag join) if you use `filter` instead  you first execute the query and for each hit in the query you ask the filter if it is ok to score it - if not get the next doc from the query. in general its about doing the cheaper execution first.  in this example you have a daterange + a prefix query which is way more expensive than the simple term query.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19051580","html_url":"https://github.com/elastic/elasticsearch/issues/2355#issuecomment-19051580","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2355","id":19051580,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MDUxNTgw","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2013-06-06T15:06:52Z","updated_at":"2013-06-06T15:06:52Z","author_association":"MEMBER","body":"Moving this to the documentation repo https://github.com/elasticsearch/elasticsearch.github.com/issues/439\n","performed_via_github_app":null}]