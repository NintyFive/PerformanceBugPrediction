{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/52864","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52864/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52864/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52864/events","html_url":"https://github.com/elastic/elasticsearch/issues/52864","id":571778303,"node_id":"MDU6SXNzdWU1NzE3NzgzMDM=","number":52864,"title":"ElasticsearchNodesSniffer complains about  \"unknown role [ml]\"","user":{"login":"bobbyi","id":775553,"node_id":"MDQ6VXNlcjc3NTU1Mw==","avatar_url":"https://avatars3.githubusercontent.com/u/775553?v=4","gravatar_id":"","url":"https://api.github.com/users/bobbyi","html_url":"https://github.com/bobbyi","followers_url":"https://api.github.com/users/bobbyi/followers","following_url":"https://api.github.com/users/bobbyi/following{/other_user}","gists_url":"https://api.github.com/users/bobbyi/gists{/gist_id}","starred_url":"https://api.github.com/users/bobbyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bobbyi/subscriptions","organizations_url":"https://api.github.com/users/bobbyi/orgs","repos_url":"https://api.github.com/users/bobbyi/repos","events_url":"https://api.github.com/users/bobbyi/events{/privacy}","received_events_url":"https://api.github.com/users/bobbyi/received_events","type":"User","site_admin":false},"labels":[{"id":493198109,"node_id":"MDU6TGFiZWw0OTMxOTgxMDk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Java%20High%20Level%20REST%20Client","name":":Core/Features/Java High Level REST Client","color":"0e8a16","default":false,"description":"Expressive Java Client for Elasticsearch"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-02-27T02:24:26Z","updated_at":"2020-02-27T20:25:53Z","closed_at":"2020-02-27T20:25:53Z","author_association":"NONE","active_lock_reason":null,"body":"We have an API server using version 7.5.1 of the elasticsearch-rest-high-level-client and elasticsearch-rest-client-sniffer Java libraries, which matches the version of ES used on our cluster. It is working fine, but our application log ends up filled with messages saying\r\n`WARN o.e.c.s.ElasticsearchNodesSniffer - unknown role [ml] on node <name>`\r\n\r\nI asked about this on the official Elastic forum and was told by David Turner\r\n(an Elastic Team Member) that this behavior is a bug and I should file it here. Specifically, he says \"The ElasticsearchNodesSniffer only knows about the three core roles... IOW it was not updated when node roles became pluggable\", and points to the code here:\r\n\r\nhttps://github.com/elastic/elasticsearch/blob/bbbdf949a9d63dbc795ce8dd7dbd529d5f40b98b/client/sniffer/src/main/java/org/elasticsearch/client/sniff/ElasticsearchNodesSniffer.java#L209-L222\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}