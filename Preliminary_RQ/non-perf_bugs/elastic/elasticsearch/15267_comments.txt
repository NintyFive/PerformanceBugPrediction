[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162534602","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-162534602","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":162534602,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MjUzNDYwMg==","user":{"login":"mirnujAtom","id":16191069,"node_id":"MDQ6VXNlcjE2MTkxMDY5","avatar_url":"https://avatars3.githubusercontent.com/u/16191069?v=4","gravatar_id":"","url":"https://api.github.com/users/mirnujAtom","html_url":"https://github.com/mirnujAtom","followers_url":"https://api.github.com/users/mirnujAtom/followers","following_url":"https://api.github.com/users/mirnujAtom/following{/other_user}","gists_url":"https://api.github.com/users/mirnujAtom/gists{/gist_id}","starred_url":"https://api.github.com/users/mirnujAtom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mirnujAtom/subscriptions","organizations_url":"https://api.github.com/users/mirnujAtom/orgs","repos_url":"https://api.github.com/users/mirnujAtom/repos","events_url":"https://api.github.com/users/mirnujAtom/events{/privacy}","received_events_url":"https://api.github.com/users/mirnujAtom/received_events","type":"User","site_admin":false},"created_at":"2015-12-07T14:14:55Z","updated_at":"2015-12-07T15:13:41Z","author_association":"NONE","body":"Having the same issue: kibana 4.3, elasticsearch 2.1.0\nOn a testing server it works fine, the only difference I see is java version, 1.8.0_40 on testing and 1.8.0_65 on a problem one.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/163323635","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-163323635","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":163323635,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MzMyMzYzNQ==","user":{"login":"Isabaellchen","id":564671,"node_id":"MDQ6VXNlcjU2NDY3MQ==","avatar_url":"https://avatars1.githubusercontent.com/u/564671?v=4","gravatar_id":"","url":"https://api.github.com/users/Isabaellchen","html_url":"https://github.com/Isabaellchen","followers_url":"https://api.github.com/users/Isabaellchen/followers","following_url":"https://api.github.com/users/Isabaellchen/following{/other_user}","gists_url":"https://api.github.com/users/Isabaellchen/gists{/gist_id}","starred_url":"https://api.github.com/users/Isabaellchen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Isabaellchen/subscriptions","organizations_url":"https://api.github.com/users/Isabaellchen/orgs","repos_url":"https://api.github.com/users/Isabaellchen/repos","events_url":"https://api.github.com/users/Isabaellchen/events{/privacy}","received_events_url":"https://api.github.com/users/Isabaellchen/received_events","type":"User","site_admin":false},"created_at":"2015-12-09T16:57:00Z","updated_at":"2015-12-09T17:12:20Z","author_association":"NONE","body":"Same here, had to re-index with the same data twice, because a shutdown caused my translogs to be corrupted, now, the second time, i get \"Field data loading is forbidden on timestamp\" when i want to do anything in kibana... Had this error before on other fields, which i circled around by using raw fields. Maybe i am managing my data in an undesired way (different indeces for different parts of our architecture each split by date again, yes templates are present and i can use raw fields as well as geoip data, so this shouldnt be a problem). Standalone usage btw. on java 1.8.0_45\n\n```\n[2015-12-09 16:26:42,037][DEBUG][action.search.type       ] [White Tiger] [apache-inter-2015.11.28][2], node[kxW8JOWWQSCBtblWQkggKA], [P], v[2], s[STARTED], a[id=6WMOShhmQ9eeY9wKDH9FVA]: Failed to execute [org.elasticsearch.action.search.SearchRequest@4737155a] lastShard [true]\nRemoteTransportException[[White Tiger][127.0.0.1:9300][indices:data/read/search[phase/query]]]; nested: SearchParseException[failed to parse search source [{\"size\":500,\"sort\":[{\"timestamp\":{\"order\":\"desc\",\"unmapped_type\":\"boolean\"}}],\"query\":{\"filtered\":{\"query\":{\"query_string\":{\"analyze_wildcard\":true,\"query\":\"*\"}},\"filter\":{\"bool\":{\"must\":[{\"range\":{\"@timestamp\":{\"gte\":1446332400000,\"lte\":1448924399999,\"format\":\"epoch_millis\"}}}],\"must_not\":[]}}}},\"highlight\":{\"pre_tags\":[\"@kibana-highlighted-field@\"],\"post_tags\":[\"@/kibana-highlighted-field@\"],\"fields\":{\"*\":{}},\"require_field_match\":false,\"fragment_size\":2147483647},\"aggs\":{\"2\":{\"date_histogram\":{\"field\":\"@timestamp\",\"interval\":\"12h\",\"time_zone\":\"Europe/Berlin\",\"min_doc_count\":0,\"extended_bounds\":{\"min\":1446332400000,\"max\":1448924399999}}}},\"fields\":[\"*\",\"_source\"],\"script_fields\":{},\"fielddata_fields\":[\"@timestamp\",\"parameters.kw_termin\"]}]]; nested: IllegalStateException[Field data loading is forbidden on timestamp];\nCaused by: SearchParseException[failed to parse search source [{\"size\":500,\"sort\":[{\"timestamp\":{\"order\":\"desc\",\"unmapped_type\":\"boolean\"}}],\"query\":{\"filtered\":{\"query\":{\"query_string\":{\"analyze_wildcard\":true,\"query\":\"*\"}},\"filter\":{\"bool\":{\"must\":[{\"range\":{\"@timestamp\":{\"gte\":1446332400000,\"lte\":1448924399999,\"format\":\"epoch_millis\"}}}],\"must_not\":[]}}}},\"highlight\":{\"pre_tags\":[\"@kibana-highlighted-field@\"],\"post_tags\":[\"@/kibana-highlighted-field@\"],\"fields\":{\"*\":{}},\"require_field_match\":false,\"fragment_size\":2147483647},\"aggs\":{\"2\":{\"date_histogram\":{\"field\":\"@timestamp\",\"interval\":\"12h\",\"time_zone\":\"Europe/Berlin\",\"min_doc_count\":0,\"extended_bounds\":{\"min\":1446332400000,\"max\":1448924399999}}}},\"fields\":[\"*\",\"_source\"],\"script_fields\":{},\"fielddata_fields\":[\"@timestamp\",\"parameters.kw_termin\"]}]]; nested: IllegalStateException[Field data loading is forbidden on timestamp];\n    at org.elasticsearch.search.SearchService.parseSource(SearchService.java:848)\n    at org.elasticsearch.search.SearchService.createContext(SearchService.java:651)\n    at org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:617)\n    at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:368)\n    at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:368)\n    at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:365)\n    at org.elasticsearch.transport.TransportService$4.doRun(TransportService.java:350)\n    at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: java.lang.IllegalStateException: Field data loading is forbidden on timestamp\n    at org.elasticsearch.index.fielddata.plain.DisabledIndexFieldData.fail(DisabledIndexFieldData.java:68)\n    at org.elasticsearch.index.fielddata.plain.DisabledIndexFieldData.comparatorSource(DisabledIndexFieldData.java:64)\n    at org.elasticsearch.search.sort.SortParseElement.addSortField(SortParseElement.java:255)\n    at org.elasticsearch.search.sort.SortParseElement.addCompoundSortField(SortParseElement.java:189)\n    at org.elasticsearch.search.sort.SortParseElement.parse(SortParseElement.java:87)\n    at org.elasticsearch.search.SearchService.parseSource(SearchService.java:831)\n    ... 10 more\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/163474772","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-163474772","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":163474772,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MzQ3NDc3Mg==","user":{"login":"alexzhuustc","id":1658550,"node_id":"MDQ6VXNlcjE2NTg1NTA=","avatar_url":"https://avatars2.githubusercontent.com/u/1658550?v=4","gravatar_id":"","url":"https://api.github.com/users/alexzhuustc","html_url":"https://github.com/alexzhuustc","followers_url":"https://api.github.com/users/alexzhuustc/followers","following_url":"https://api.github.com/users/alexzhuustc/following{/other_user}","gists_url":"https://api.github.com/users/alexzhuustc/gists{/gist_id}","starred_url":"https://api.github.com/users/alexzhuustc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexzhuustc/subscriptions","organizations_url":"https://api.github.com/users/alexzhuustc/orgs","repos_url":"https://api.github.com/users/alexzhuustc/repos","events_url":"https://api.github.com/users/alexzhuustc/events{/privacy}","received_events_url":"https://api.github.com/users/alexzhuustc/received_events","type":"User","site_admin":false},"created_at":"2015-12-10T03:28:23Z","updated_at":"2015-12-10T03:28:23Z","author_association":"NONE","body":"I have the same issue. \nlogstash-2.1.0-1.noarch\nelasticsearch-2.1.0-1.noarch\nkibana-4.3.0-linux-x64\n\nJust a simplest sample data set.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/163528170","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-163528170","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":163528170,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MzUyODE3MA==","user":{"login":"cybacolt","id":730769,"node_id":"MDQ6VXNlcjczMDc2OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/730769?v=4","gravatar_id":"","url":"https://api.github.com/users/cybacolt","html_url":"https://github.com/cybacolt","followers_url":"https://api.github.com/users/cybacolt/followers","following_url":"https://api.github.com/users/cybacolt/following{/other_user}","gists_url":"https://api.github.com/users/cybacolt/gists{/gist_id}","starred_url":"https://api.github.com/users/cybacolt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cybacolt/subscriptions","organizations_url":"https://api.github.com/users/cybacolt/orgs","repos_url":"https://api.github.com/users/cybacolt/repos","events_url":"https://api.github.com/users/cybacolt/events{/privacy}","received_events_url":"https://api.github.com/users/cybacolt/received_events","type":"User","site_admin":false},"created_at":"2015-12-10T08:01:23Z","updated_at":"2015-12-10T08:01:23Z","author_association":"NONE","body":"same issue here:\nUbuntu 14.04\nlogstash 2.1.0-1\nelasticsearch 2.1.0\nKibana 4.3.0 build 9369\n\ni've also tried restarting all services and reindexing on elasticsearch. permissions on /var/lib/elasticsearch look fine.\n\ni'll try rolling elastic back to an earlier version shortly.\n\n**Kibana error:**\n\n```\nError: Request to Elasticsearch failed: {\"error\":{\"root_cause\":[{\"type\":\"exception\",\"reason\":\"java.lang.IllegalStateException: Field data loading is forbidden on message\"}],\"type\":\"search_phase_execution_exception\",\"reason\":\"all shards failed\",\"phase\":\"query\",\"grouped\":true,\"failed_shards\":[{\"shard\":0,\"index\":\"logstash-2015.12.10\",\"node\":\"wRLwuXSsSv2M0sKnxPR56g\",\"reason\":{\"type\":\"exception\",\"reason\":\"java.lang.IllegalStateException: Field data loading is forbidden on message\",\"caused_by\":{\"type\":\"unchecked_execution_exception\",\"reason\":\"java.lang.IllegalStateException: Field data loading is forbidden on message\",\"caused_by\":{\"type\":\"illegal_state_exception\",\"reason\":\"Field data loading is forbidden on message\"}}}}]}}\n    at http://xxxxx/bundles/kibana.bundle.js:78760:39\n    at Function.Promise.try (http://xxxxx/bundles/commons.bundle.js:60967:23)\n    at http://xxxxx/bundles/commons.bundle.js:60936:31\n    at Array.map (native)\n    at Function.Promise.map (http://xxxxx/bundles/commons.bundle.js:60935:31)\n    at callResponseHandlers (http://xxxxx/bundles/kibana.bundle.js:78732:23)\n    at http://xxxxx/bundles/kibana.bundle.js:78239:17\n    at processQueue (http://xxxxx/bundles/commons.bundle.js:42339:29)\n    at http://xxxxx/bundles/commons.bundle.js:42355:28\n    at Scope.$eval (http://xxxxx/bundles/commons.bundle.js:43583:29)\n```\n\n**elasticsearch log error:**\n\n```\n        ... 22 more\n[2015-12-10 14:06:32,799][DEBUG][action.search.type       ] [Brother Voodoo] All shards failed for phase: [query]\nRemoteTransportException[[Brother Voodoo][localhost/127.0.0.1:9300][indices:data/read/search[phase/query]]]; nested: QueryPhaseExecutionException[Query Failed [Failed to execute main query]]; nested: ElasticsearchException[java.lang.IllegalStateException: Field data loading is forbidden on message]; nested: UncheckedExecutionException[java.lang.IllegalStateException: Field data loading is forbidden on message]; nested: IllegalStateException[Field data loading is forbidden on message];\nCaused by: QueryPhaseExecutionException[Query Failed [Failed to execute main query]]; nested: ElasticsearchException[java.lang.IllegalStateException: Field data loading is forbidden on message]; nested: UncheckedExecutionException[java.lang.IllegalStateException: Field data loading is forbidden on message]; nested: IllegalStateException[Field data loading is forbidden on message];\n        at org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:343)\n        at org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:106)\n        at org.elasticsearch.search.SearchService.loadOrExecuteQueryPhase(SearchService.java:363)\n        at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:375)\n        at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:368)\n        at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:365)\n        at org.elasticsearch.transport.TransportService$4.doRun(TransportService.java:350)\n        at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\nCaused by: ElasticsearchException[java.lang.IllegalStateException: Field data loading is forbidden on message]; nested: UncheckedExecutionException[java.lang.IllegalStateException: Field data loading is forbidden on message]; nested: IllegalStateException[Field data loading is forbidden on message];\n        at org.elasticsearch.index.fielddata.plain.AbstractIndexFieldData.load(AbstractIndexFieldData.java:82)\n        at org.elasticsearch.search.aggregations.support.ValuesSource$Bytes$FieldData.bytesValues(ValuesSource.java:195)\n        at org.elasticsearch.search.aggregations.bucket.terms.StringTermsAggregator.getLeafCollector(StringTermsAggregator.java:73)\n        at org.elasticsearch.search.aggregations.AggregatorBase.getLeafCollector(AggregatorBase.java:132)\n        at org.elasticsearch.search.aggregations.AggregatorBase.getLeafCollector(AggregatorBase.java:38)\n        at org.apache.lucene.search.MultiCollector.getLeafCollector(MultiCollector.java:117)\n        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:763)\n        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:486)\n        at org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:324)\n        ... 10 more\nCaused by: com.google.common.util.concurrent.UncheckedExecutionException: java.lang.IllegalStateException: Field data loading is forbidden on message\n        at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2203)\n        at com.google.common.cache.LocalCache.get(LocalCache.java:3937)\n        at com.google.common.cache.LocalCache$LocalManualCache.get(LocalCache.java:4739)\n        at org.elasticsearch.indices.fielddata.cache.IndicesFieldDataCache$IndexFieldCache.load(IndicesFieldDataCache.java:156)\n        at org.elasticsearch.index.fielddata.plain.AbstractIndexFieldData.load(AbstractIndexFieldData.java:76)\n        ... 18 more\nCaused by: java.lang.IllegalStateException: Field data loading is forbidden on message\n        at org.elasticsearch.index.fielddata.plain.DisabledIndexFieldData.fail(DisabledIndexFieldData.java:68)\n        at org.elasticsearch.index.fielddata.plain.DisabledIndexFieldData.loadDirect(DisabledIndexFieldData.java:54)\n        at org.elasticsearch.indices.fielddata.cache.IndicesFieldDataCache$IndexFieldCache$1.call(IndicesFieldDataCache.java:163)\n        at org.elasticsearch.indices.fielddata.cache.IndicesFieldDataCache$IndexFieldCache$1.call(IndicesFieldDataCache.java:156)\n        at com.google.common.cache.LocalCache$LocalManualCache$1.load(LocalCache.java:4742)\n        at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3527)\n        at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2319)\n        at com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2282)\n        at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2197)\n        ... 22 more\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/163534485","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-163534485","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":163534485,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MzUzNDQ4NQ==","user":{"login":"cybacolt","id":730769,"node_id":"MDQ6VXNlcjczMDc2OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/730769?v=4","gravatar_id":"","url":"https://api.github.com/users/cybacolt","html_url":"https://github.com/cybacolt","followers_url":"https://api.github.com/users/cybacolt/followers","following_url":"https://api.github.com/users/cybacolt/following{/other_user}","gists_url":"https://api.github.com/users/cybacolt/gists{/gist_id}","starred_url":"https://api.github.com/users/cybacolt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cybacolt/subscriptions","organizations_url":"https://api.github.com/users/cybacolt/orgs","repos_url":"https://api.github.com/users/cybacolt/repos","events_url":"https://api.github.com/users/cybacolt/events{/privacy}","received_events_url":"https://api.github.com/users/cybacolt/received_events","type":"User","site_admin":false},"created_at":"2015-12-10T08:41:49Z","updated_at":"2015-12-10T08:42:05Z","author_association":"NONE","body":"this seems to have had a good outcome (visualizations are working, at least atm)... be aware this will wipe all previous index data:\n\n```\nservice elasticsearch stop\nservice logstash stop\napt-cache remove elasticsearch\nmv /var/lib/elasticsearch /var/lib/elasticsearch.back\napt-get install elasticsearch=2.0.1\nservice elasticsearch restart\nservice logstash restart\n```\n\nthen repeat these steps to reinstall 2.1.0 with the good 2.0.1 `/var/lib/elasticsearch` contents.\n\nperhaps i'd broken my indexes somehow... not sure... eitherway, its working atm.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/163552996","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-163552996","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":163552996,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MzU1Mjk5Ng==","user":{"login":"parberge","id":5441497,"node_id":"MDQ6VXNlcjU0NDE0OTc=","avatar_url":"https://avatars2.githubusercontent.com/u/5441497?v=4","gravatar_id":"","url":"https://api.github.com/users/parberge","html_url":"https://github.com/parberge","followers_url":"https://api.github.com/users/parberge/followers","following_url":"https://api.github.com/users/parberge/following{/other_user}","gists_url":"https://api.github.com/users/parberge/gists{/gist_id}","starred_url":"https://api.github.com/users/parberge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/parberge/subscriptions","organizations_url":"https://api.github.com/users/parberge/orgs","repos_url":"https://api.github.com/users/parberge/repos","events_url":"https://api.github.com/users/parberge/events{/privacy}","received_events_url":"https://api.github.com/users/parberge/received_events","type":"User","site_admin":false},"created_at":"2015-12-10T09:38:46Z","updated_at":"2015-12-10T11:01:40Z","author_association":"NONE","body":"I have the same issue:\ncentos7\nlogstash-2.1.1-1.noarch\nelasticsearch-2.1.0-1.noarch\nkibana 4.3.0 Build 9369\n\nEDIT: Like @mirnujAtom I also use java 1.8.0_65\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/163555676","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-163555676","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":163555676,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MzU1NTY3Ng==","user":{"login":"Isabaellchen","id":564671,"node_id":"MDQ6VXNlcjU2NDY3MQ==","avatar_url":"https://avatars1.githubusercontent.com/u/564671?v=4","gravatar_id":"","url":"https://api.github.com/users/Isabaellchen","html_url":"https://github.com/Isabaellchen","followers_url":"https://api.github.com/users/Isabaellchen/followers","following_url":"https://api.github.com/users/Isabaellchen/following{/other_user}","gists_url":"https://api.github.com/users/Isabaellchen/gists{/gist_id}","starred_url":"https://api.github.com/users/Isabaellchen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Isabaellchen/subscriptions","organizations_url":"https://api.github.com/users/Isabaellchen/orgs","repos_url":"https://api.github.com/users/Isabaellchen/repos","events_url":"https://api.github.com/users/Isabaellchen/events{/privacy}","received_events_url":"https://api.github.com/users/Isabaellchen/received_events","type":"User","site_admin":false},"created_at":"2015-12-10T09:41:53Z","updated_at":"2015-12-10T09:50:00Z","author_association":"NONE","body":"@cybacolt\nWhat do you mean with \"the good 2.0.1 `/var/lib/elasticsearch` content\"? I am using a downloaded binary package. Is that stuff cached somewhere outside of my unzipped folder? `/var/lib/elasticsearch` does not exist here.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/163560659","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-163560659","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":163560659,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MzU2MDY1OQ==","user":{"login":"mirnujAtom","id":16191069,"node_id":"MDQ6VXNlcjE2MTkxMDY5","avatar_url":"https://avatars3.githubusercontent.com/u/16191069?v=4","gravatar_id":"","url":"https://api.github.com/users/mirnujAtom","html_url":"https://github.com/mirnujAtom","followers_url":"https://api.github.com/users/mirnujAtom/followers","following_url":"https://api.github.com/users/mirnujAtom/following{/other_user}","gists_url":"https://api.github.com/users/mirnujAtom/gists{/gist_id}","starred_url":"https://api.github.com/users/mirnujAtom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mirnujAtom/subscriptions","organizations_url":"https://api.github.com/users/mirnujAtom/orgs","repos_url":"https://api.github.com/users/mirnujAtom/repos","events_url":"https://api.github.com/users/mirnujAtom/events{/privacy}","received_events_url":"https://api.github.com/users/mirnujAtom/received_events","type":"User","site_admin":false},"created_at":"2015-12-10T09:56:09Z","updated_at":"2015-12-10T09:56:09Z","author_association":"NONE","body":"Fixed my problem with similar to what @cybacolt suggested - moved /var/lib/elasticsearch from a working server (which was upgraded from 2.0 to 2.1) and dropped all data it used to have.\nLooks like there is an issue if you do a fresh install of elastic2.1\n\n@Isabaellchen there is a variable called  path.data: in elasticsearch.yml, check where does it refer to in your configuration.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/163657397","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-163657397","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":163657397,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MzY1NzM5Nw==","user":{"login":"PhaedrusTheGreek","id":4387023,"node_id":"MDQ6VXNlcjQzODcwMjM=","avatar_url":"https://avatars0.githubusercontent.com/u/4387023?v=4","gravatar_id":"","url":"https://api.github.com/users/PhaedrusTheGreek","html_url":"https://github.com/PhaedrusTheGreek","followers_url":"https://api.github.com/users/PhaedrusTheGreek/followers","following_url":"https://api.github.com/users/PhaedrusTheGreek/following{/other_user}","gists_url":"https://api.github.com/users/PhaedrusTheGreek/gists{/gist_id}","starred_url":"https://api.github.com/users/PhaedrusTheGreek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PhaedrusTheGreek/subscriptions","organizations_url":"https://api.github.com/users/PhaedrusTheGreek/orgs","repos_url":"https://api.github.com/users/PhaedrusTheGreek/repos","events_url":"https://api.github.com/users/PhaedrusTheGreek/events{/privacy}","received_events_url":"https://api.github.com/users/PhaedrusTheGreek/received_events","type":"User","site_admin":false},"created_at":"2015-12-10T15:24:28Z","updated_at":"2015-12-10T18:13:20Z","author_association":"CONTRIBUTOR","body":"The problem happens when `\"fielddata\" : { \"format\" : \"disabled\" }` is set in a field's mapping, which is the default as of Logstash 2.1, due to [this issue](https://github.com/logstash-plugins/logstash-output-elasticsearch/issues/308).\n\nCommon Variations of this error:\n- Field data loading is forbidden on type\n- Field data loading is forbidden on path\n- Field data loading is forbidden on host\n\nIn default Logstash 2.1 with Kibana 4.3+, it may come down to the fact that you have visualizing on an analyzed field. \n\n![screen shot 2015-12-10 at 10 11 22 am](https://cloud.githubusercontent.com/assets/4387023/11718946/6b0f727a-9f26-11e5-9237-a03e8bf0b446.png)\n\nRunning an aggregation on an analyzed field will produce the same error:\n\n```\nGET logstash-2015.12.10/_search\n{\n   \"size\": 0, \n   \"aggregations\": {\n      \"the_test\": {\n         \"terms\": {\n            \"field\": \"host\"\n         }\n      }\n   }\n}\n```\n\nOne should be able to solve the problem by using the `.raw` version of the field instead.\n\nWiping the /var/lib/elasticsearch directory also deletes the [index templates](https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-templates.html) which are installed by Logstash, so that might explain why previous comments were able to workaround by doing this.  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/163668079","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-163668079","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":163668079,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MzY2ODA3OQ==","user":{"login":"Isabaellchen","id":564671,"node_id":"MDQ6VXNlcjU2NDY3MQ==","avatar_url":"https://avatars1.githubusercontent.com/u/564671?v=4","gravatar_id":"","url":"https://api.github.com/users/Isabaellchen","html_url":"https://github.com/Isabaellchen","followers_url":"https://api.github.com/users/Isabaellchen/followers","following_url":"https://api.github.com/users/Isabaellchen/following{/other_user}","gists_url":"https://api.github.com/users/Isabaellchen/gists{/gist_id}","starred_url":"https://api.github.com/users/Isabaellchen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Isabaellchen/subscriptions","organizations_url":"https://api.github.com/users/Isabaellchen/orgs","repos_url":"https://api.github.com/users/Isabaellchen/repos","events_url":"https://api.github.com/users/Isabaellchen/events{/privacy}","received_events_url":"https://api.github.com/users/Isabaellchen/received_events","type":"User","site_admin":false},"created_at":"2015-12-10T15:54:15Z","updated_at":"2015-12-10T15:54:48Z","author_association":"NONE","body":"As stated above, i received the error on the timestamp field, rendering kibana completely infunctional until i reindexed. Also, i had the same data indexed before, without receiving this error, until my translogs got corrupted and i had to start from scratch.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/163706762","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-163706762","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":163706762,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MzcwNjc2Mg==","user":{"login":"PhaedrusTheGreek","id":4387023,"node_id":"MDQ6VXNlcjQzODcwMjM=","avatar_url":"https://avatars0.githubusercontent.com/u/4387023?v=4","gravatar_id":"","url":"https://api.github.com/users/PhaedrusTheGreek","html_url":"https://github.com/PhaedrusTheGreek","followers_url":"https://api.github.com/users/PhaedrusTheGreek/followers","following_url":"https://api.github.com/users/PhaedrusTheGreek/following{/other_user}","gists_url":"https://api.github.com/users/PhaedrusTheGreek/gists{/gist_id}","starred_url":"https://api.github.com/users/PhaedrusTheGreek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PhaedrusTheGreek/subscriptions","organizations_url":"https://api.github.com/users/PhaedrusTheGreek/orgs","repos_url":"https://api.github.com/users/PhaedrusTheGreek/repos","events_url":"https://api.github.com/users/PhaedrusTheGreek/events{/privacy}","received_events_url":"https://api.github.com/users/PhaedrusTheGreek/received_events","type":"User","site_admin":false},"created_at":"2015-12-10T18:14:30Z","updated_at":"2015-12-10T18:14:30Z","author_association":"CONTRIBUTOR","body":"@Isabaellchen are you using Logstash?  I'm wondering because Logstash uses the @timestamp field, whereas your error shows just _timestamp_ (without the @ symbol).   Did your timestamp field's mapping happen to have `\"fielddata\" : { \"format\" : \"disabled\" }` set ?  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/163845815","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-163845815","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":163845815,"node_id":"MDEyOklzc3VlQ29tbWVudDE2Mzg0NTgxNQ==","user":{"login":"Raggyman","id":12683054,"node_id":"MDQ6VXNlcjEyNjgzMDU0","avatar_url":"https://avatars1.githubusercontent.com/u/12683054?v=4","gravatar_id":"","url":"https://api.github.com/users/Raggyman","html_url":"https://github.com/Raggyman","followers_url":"https://api.github.com/users/Raggyman/followers","following_url":"https://api.github.com/users/Raggyman/following{/other_user}","gists_url":"https://api.github.com/users/Raggyman/gists{/gist_id}","starred_url":"https://api.github.com/users/Raggyman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Raggyman/subscriptions","organizations_url":"https://api.github.com/users/Raggyman/orgs","repos_url":"https://api.github.com/users/Raggyman/repos","events_url":"https://api.github.com/users/Raggyman/events{/privacy}","received_events_url":"https://api.github.com/users/Raggyman/received_events","type":"User","site_admin":false},"created_at":"2015-12-11T05:39:10Z","updated_at":"2015-12-11T05:39:10Z","author_association":"NONE","body":"A similar things happen if the field is a string.  In my case I have JSON that is inserted and when trying to get a unique count it fails.  This is with all the latest production versions.  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/163869891","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-163869891","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":163869891,"node_id":"MDEyOklzc3VlQ29tbWVudDE2Mzg2OTg5MQ==","user":{"login":"vianer","id":12438753,"node_id":"MDQ6VXNlcjEyNDM4NzUz","avatar_url":"https://avatars1.githubusercontent.com/u/12438753?v=4","gravatar_id":"","url":"https://api.github.com/users/vianer","html_url":"https://github.com/vianer","followers_url":"https://api.github.com/users/vianer/followers","following_url":"https://api.github.com/users/vianer/following{/other_user}","gists_url":"https://api.github.com/users/vianer/gists{/gist_id}","starred_url":"https://api.github.com/users/vianer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vianer/subscriptions","organizations_url":"https://api.github.com/users/vianer/orgs","repos_url":"https://api.github.com/users/vianer/repos","events_url":"https://api.github.com/users/vianer/events{/privacy}","received_events_url":"https://api.github.com/users/vianer/received_events","type":"User","site_admin":false},"created_at":"2015-12-11T08:03:18Z","updated_at":"2015-12-11T08:05:40Z","author_association":"NONE","body":"thanks @PhaedrusTheGreek  ,through using the .raw version of the field instead,i solution the problem.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/163891572","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-163891572","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":163891572,"node_id":"MDEyOklzc3VlQ29tbWVudDE2Mzg5MTU3Mg==","user":{"login":"Isabaellchen","id":564671,"node_id":"MDQ6VXNlcjU2NDY3MQ==","avatar_url":"https://avatars1.githubusercontent.com/u/564671?v=4","gravatar_id":"","url":"https://api.github.com/users/Isabaellchen","html_url":"https://github.com/Isabaellchen","followers_url":"https://api.github.com/users/Isabaellchen/followers","following_url":"https://api.github.com/users/Isabaellchen/following{/other_user}","gists_url":"https://api.github.com/users/Isabaellchen/gists{/gist_id}","starred_url":"https://api.github.com/users/Isabaellchen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Isabaellchen/subscriptions","organizations_url":"https://api.github.com/users/Isabaellchen/orgs","repos_url":"https://api.github.com/users/Isabaellchen/repos","events_url":"https://api.github.com/users/Isabaellchen/events{/privacy}","received_events_url":"https://api.github.com/users/Isabaellchen/received_events","type":"User","site_admin":false},"created_at":"2015-12-11T09:47:36Z","updated_at":"2015-12-11T09:48:51Z","author_association":"NONE","body":"@PhaedrusTheGreek \nThanks for your reply. Yes i am using logstash.\nSince i am reading jboss files, i generated the timestamp from the filename and the logline, thus creating an extra timestamp field to be parsed by the date filter. Maybe i accidentally chose that field for my indeces on accident, i can not check that anymore. `\"fielddata\" : { \"format\" : \"disabled\" }` however, was not set in my template.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/163894259","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-163894259","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":163894259,"node_id":"MDEyOklzc3VlQ29tbWVudDE2Mzg5NDI1OQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-12-11T09:55:59Z","updated_at":"2015-12-11T09:55:59Z","author_association":"CONTRIBUTOR","body":"This is not a bug.  It is a safeguard.  The logstash template now disables fielddata loading where it makes sense, eg see https://github.com/logstash-plugins/logstash-output-elasticsearch/blob/master/lib/logstash/outputs/elasticsearch/elasticsearch-template.json#L15\n\nYou get this message when you try to sort or run aggregations or scripts on analyzed fields.  Fulfilling this request would cause massive amounts of memory usage on your cluster, and it almost certainly isn't what you want anyway, eg `Field data loading is forbidden on path\"`... You don't want to aggregate on the analyzed field `path`, you want to aggregate on the not analyzed field `path.raw`, which uses doc values not heap memory.\n\nThis is by design.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/171287264","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-171287264","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":171287264,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTI4NzI2NA==","user":{"login":"yodog","id":2393347,"node_id":"MDQ6VXNlcjIzOTMzNDc=","avatar_url":"https://avatars2.githubusercontent.com/u/2393347?v=4","gravatar_id":"","url":"https://api.github.com/users/yodog","html_url":"https://github.com/yodog","followers_url":"https://api.github.com/users/yodog/followers","following_url":"https://api.github.com/users/yodog/following{/other_user}","gists_url":"https://api.github.com/users/yodog/gists{/gist_id}","starred_url":"https://api.github.com/users/yodog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yodog/subscriptions","organizations_url":"https://api.github.com/users/yodog/orgs","repos_url":"https://api.github.com/users/yodog/repos","events_url":"https://api.github.com/users/yodog/events{/privacy}","received_events_url":"https://api.github.com/users/yodog/received_events","type":"User","site_admin":false},"created_at":"2016-01-13T13:18:09Z","updated_at":"2016-01-13T13:18:09Z","author_association":"NONE","body":"the good old 'its not a bug, its a feature' :)\n\nbut seriously, this kind of change breaks the application to the point where we have to reindex our data.\n\nbesides the 'breaking changes' section, where else should i look before updating?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/173314953","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-173314953","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":173314953,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MzMxNDk1Mw==","user":{"login":"argais","id":8986004,"node_id":"MDQ6VXNlcjg5ODYwMDQ=","avatar_url":"https://avatars3.githubusercontent.com/u/8986004?v=4","gravatar_id":"","url":"https://api.github.com/users/argais","html_url":"https://github.com/argais","followers_url":"https://api.github.com/users/argais/followers","following_url":"https://api.github.com/users/argais/following{/other_user}","gists_url":"https://api.github.com/users/argais/gists{/gist_id}","starred_url":"https://api.github.com/users/argais/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/argais/subscriptions","organizations_url":"https://api.github.com/users/argais/orgs","repos_url":"https://api.github.com/users/argais/repos","events_url":"https://api.github.com/users/argais/events{/privacy}","received_events_url":"https://api.github.com/users/argais/received_events","type":"User","site_admin":false},"created_at":"2016-01-20T18:24:52Z","updated_at":"2016-01-20T18:24:52Z","author_association":"NONE","body":"Now how do we turn off this safeguard so we can keep using the solutions we had in place before without changing them?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/173577963","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-173577963","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":173577963,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MzU3Nzk2Mw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-01-21T14:02:37Z","updated_at":"2016-01-21T14:02:37Z","author_association":"CONTRIBUTOR","body":"@argais you can do it by updating the mapping for string fields as follows:\n\n```\nPUT my_index/_mapping/my_type\n{\n  \"properties\": {\n    \"text\": {\n      \"type\": \"string\",\n      \"fielddata\": {\n        \"format\": \"paged_bytes\"\n      }\n    }\n  }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/173919272","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-173919272","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":173919272,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MzkxOTI3Mg==","user":{"login":"dkirrane","id":1280116,"node_id":"MDQ6VXNlcjEyODAxMTY=","avatar_url":"https://avatars3.githubusercontent.com/u/1280116?v=4","gravatar_id":"","url":"https://api.github.com/users/dkirrane","html_url":"https://github.com/dkirrane","followers_url":"https://api.github.com/users/dkirrane/followers","following_url":"https://api.github.com/users/dkirrane/following{/other_user}","gists_url":"https://api.github.com/users/dkirrane/gists{/gist_id}","starred_url":"https://api.github.com/users/dkirrane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkirrane/subscriptions","organizations_url":"https://api.github.com/users/dkirrane/orgs","repos_url":"https://api.github.com/users/dkirrane/repos","events_url":"https://api.github.com/users/dkirrane/events{/privacy}","received_events_url":"https://api.github.com/users/dkirrane/received_events","type":"User","site_admin":false},"created_at":"2016-01-22T13:21:29Z","updated_at":"2016-01-22T13:21:29Z","author_association":"NONE","body":"This is happening when I sort on a column in the Kibana Discover page.\nAnd there are no raw fields to add to the table. I can add `path` field for instance but not `path.raw`\nSo anytime I sort of `path` I get this exception\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/175966840","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-175966840","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":175966840,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NTk2Njg0MA==","user":{"login":"xamox","id":492564,"node_id":"MDQ6VXNlcjQ5MjU2NA==","avatar_url":"https://avatars1.githubusercontent.com/u/492564?v=4","gravatar_id":"","url":"https://api.github.com/users/xamox","html_url":"https://github.com/xamox","followers_url":"https://api.github.com/users/xamox/followers","following_url":"https://api.github.com/users/xamox/following{/other_user}","gists_url":"https://api.github.com/users/xamox/gists{/gist_id}","starred_url":"https://api.github.com/users/xamox/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xamox/subscriptions","organizations_url":"https://api.github.com/users/xamox/orgs","repos_url":"https://api.github.com/users/xamox/repos","events_url":"https://api.github.com/users/xamox/events{/privacy}","received_events_url":"https://api.github.com/users/xamox/received_events","type":"User","site_admin":false},"created_at":"2016-01-28T04:26:26Z","updated_at":"2016-01-28T04:26:45Z","author_association":"NONE","body":"I am also getting this using:\nOfficial docker image Elasticsearch 2.1 as well as official docker image 2.1. And Kibana 4.3.1.  \n\nI'm just testing with basic example from here:\nhttps://www.elastic.co/guide/en/logstash/current/advanced-pipeline.html\n\nFull error:\n\n```\nError: Request to Elasticsearch failed: {\"error\":{\"root_cause\":[{\"type\":\"illegal_state_exception\",\"reason\":\"Field data loading is forbidden on timestamp\"}],\"type\":\"search_phase_execution_exception\",\"reason\":\"all shards failed\",\"phase\":\"query\",\"grouped\":true,\"failed_shards\":[{\"shard\":0,\"index\":\"logstash-2016.01.28\",\"node\":\"X3VNkMLlTgOuY0w1BGYTzA\",\"reason\":{\"type\":\"illegal_state_exception\",\"reason\":\"Field data loading is forbidden on timestamp\"}}]}}\n    at http://localhost:5601/bundles/kibana.bundle.js:89030:39\n    at Function.Promise.try (http://localhost:5601/bundles/commons.bundle.js:63741:23)\n    at http://localhost:5601/bundles/commons.bundle.js:63710:31\n    at Array.map (native)\n    at Function.Promise.map (http://localhost:5601/bundles/commons.bundle.js:63709:31)\n    at callResponseHandlers (http://localhost:5601/bundles/kibana.bundle.js:89002:23)\n    at http://localhost:5601/bundles/kibana.bundle.js:88507:17\n    at processQueue (http://localhost:5601/bundles/commons.bundle.js:41837:29)\n    at http://localhost:5601/bundles/commons.bundle.js:41853:28\n    at Scope.$eval (http://localhost:5601/bundles/commons.bundle.js:43081:29)\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/180025956","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-180025956","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":180025956,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MDAyNTk1Ng==","user":{"login":"wdtmatt","id":10468699,"node_id":"MDQ6VXNlcjEwNDY4Njk5","avatar_url":"https://avatars1.githubusercontent.com/u/10468699?v=4","gravatar_id":"","url":"https://api.github.com/users/wdtmatt","html_url":"https://github.com/wdtmatt","followers_url":"https://api.github.com/users/wdtmatt/followers","following_url":"https://api.github.com/users/wdtmatt/following{/other_user}","gists_url":"https://api.github.com/users/wdtmatt/gists{/gist_id}","starred_url":"https://api.github.com/users/wdtmatt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wdtmatt/subscriptions","organizations_url":"https://api.github.com/users/wdtmatt/orgs","repos_url":"https://api.github.com/users/wdtmatt/repos","events_url":"https://api.github.com/users/wdtmatt/events{/privacy}","received_events_url":"https://api.github.com/users/wdtmatt/received_events","type":"User","site_admin":false},"created_at":"2016-02-04T20:05:16Z","updated_at":"2016-02-04T20:10:04Z","author_association":"NONE","body":"So in the use case below, what would be the appropriate solution with this new feature?    \n\nI'm using logstash to parse web logs.   I use kv to capture all the query strings, which in one case is a comma separated list which gets stored as string in elasticsearch, eg layers.raw:\"w,x,y,z\"    The results for each log entry could be any combination of w,x,y,z or all of them.      I was building my vizualization off the analyzed field \"layers\", because I could get a count of each call of w.   That is no longer possible with this issue.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/181509450","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-181509450","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":181509450,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MTUwOTQ1MA==","user":{"login":"soichih","id":923896,"node_id":"MDQ6VXNlcjkyMzg5Ng==","avatar_url":"https://avatars3.githubusercontent.com/u/923896?v=4","gravatar_id":"","url":"https://api.github.com/users/soichih","html_url":"https://github.com/soichih","followers_url":"https://api.github.com/users/soichih/followers","following_url":"https://api.github.com/users/soichih/following{/other_user}","gists_url":"https://api.github.com/users/soichih/gists{/gist_id}","starred_url":"https://api.github.com/users/soichih/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/soichih/subscriptions","organizations_url":"https://api.github.com/users/soichih/orgs","repos_url":"https://api.github.com/users/soichih/repos","events_url":"https://api.github.com/users/soichih/events{/privacy}","received_events_url":"https://api.github.com/users/soichih/received_events","type":"User","site_admin":false},"created_at":"2016-02-08T18:22:43Z","updated_at":"2016-02-08T18:22:43Z","author_association":"NONE","body":"I've been hit by this issue for the last couple of weeks, and I still can't figure out what exactly I need to do to fix it.. I don't know what \"field data\" is for one thing.\n\nAm I correct to assume that, I am doing something wrong with the way I am feeding the data? Is there something I need to do on my filter?\n\nInterestingly, I am not having this problem on an ELK instance where I am loading data from AMQP (input:rabbimq, output:elasticsearch on my logstash) without any filter. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/183746431","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-183746431","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":183746431,"node_id":"MDEyOklzc3VlQ29tbWVudDE4Mzc0NjQzMQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-02-13T20:11:01Z","updated_at":"2016-02-13T20:11:01Z","author_association":"CONTRIBUTOR","body":"OK, to explain what all this means...  Analyzed string fields are for full text search.  Not-analyzed string fields are for concrete values eg HTTP method, URI, status code, etc.  Typically these fields are used for filtering (rather than full text search) and are often used in aggregations.\n\nIt seldom makes sense to aggregate on an analyzed string field, eg an analyzed string field containing \"Quick brown fox\" indexes the terms \"quick\", \"brown\", and \"fox\", and a terms aggregation on this field would aggregate on each of these terms (instead of the full \"Quick brown fox\", which is probably what you wanted).\n\nOn top of that, not_analyzed strings can use \"doc_values\", ie their values get stored on a disk in a way that they can be looked up for each document in a very efficient way while running aggregations.  Analyzed strings do not support doc values.  If you try to aggregate on an analyzed string, it reads the full index, \"uninverts the values\", and stores the result in memory.  This can use an ENORMOUS amount of memory and even crash your server.  You don't want to do this.\n\nThe change in https://github.com/logstash-plugins/logstash-output-elasticsearch/issues/309 means that:\n1. You can no longer run aggregations on the analyzed `message` field.\n2. All dynamically added strings are added with two forms: `name` (an analyzed string field to be used for full text search but not for aggregations) and `name.raw` which can be used for filtering and aggregations.\n\nSo, instead of aggregating on field `foo`,  try aggregation on `foo.raw` instead.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/184110213","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-184110213","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":184110213,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDExMDIxMw==","user":{"login":"installboy","id":2035086,"node_id":"MDQ6VXNlcjIwMzUwODY=","avatar_url":"https://avatars2.githubusercontent.com/u/2035086?v=4","gravatar_id":"","url":"https://api.github.com/users/installboy","html_url":"https://github.com/installboy","followers_url":"https://api.github.com/users/installboy/followers","following_url":"https://api.github.com/users/installboy/following{/other_user}","gists_url":"https://api.github.com/users/installboy/gists{/gist_id}","starred_url":"https://api.github.com/users/installboy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/installboy/subscriptions","organizations_url":"https://api.github.com/users/installboy/orgs","repos_url":"https://api.github.com/users/installboy/repos","events_url":"https://api.github.com/users/installboy/events{/privacy}","received_events_url":"https://api.github.com/users/installboy/received_events","type":"User","site_admin":false},"created_at":"2016-02-15T08:30:29Z","updated_at":"2016-02-15T08:30:29Z","author_association":"NONE","body":"That makes sense this far. But is it intended, that the *.raw field is empty, althoug it is dynamically created?\n\nI am just starting out with ELK and doing some tests with the syslog input plugin. It imports the data, but won't let me visualize it. Now your explanation makes sense to me, but the *.raw fields are all empty on my side. Wouldn't it make sense to dynamically add the data to the fields? Or am I missing something?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/184189206","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-184189206","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":184189206,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDE4OTIwNg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-02-15T12:37:53Z","updated_at":"2016-02-15T12:37:53Z","author_association":"CONTRIBUTOR","body":"@installboy the `.raw` field won't be added to the document `_source`, as it is just a duplicate of the main field. But the whole value will be indexed and stored as doc values (depending on how the field is mapped), and so can be used to search for the whole term (not for full text search) and can be used in aggregations.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/184294462","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-184294462","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":184294462,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDI5NDQ2Mg==","user":{"login":"soichih","id":923896,"node_id":"MDQ6VXNlcjkyMzg5Ng==","avatar_url":"https://avatars3.githubusercontent.com/u/923896?v=4","gravatar_id":"","url":"https://api.github.com/users/soichih","html_url":"https://github.com/soichih","followers_url":"https://api.github.com/users/soichih/followers","following_url":"https://api.github.com/users/soichih/following{/other_user}","gists_url":"https://api.github.com/users/soichih/gists{/gist_id}","starred_url":"https://api.github.com/users/soichih/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/soichih/subscriptions","organizations_url":"https://api.github.com/users/soichih/orgs","repos_url":"https://api.github.com/users/soichih/repos","events_url":"https://api.github.com/users/soichih/events{/privacy}","received_events_url":"https://api.github.com/users/soichih/received_events","type":"User","site_admin":false},"created_at":"2016-02-15T16:45:31Z","updated_at":"2016-02-15T16:45:31Z","author_association":"NONE","body":"@clintongormley Thanks for the explanation. \n\nIs there anyway to make Kibana use \"host.raw\" (for example) field instead of \"host\" when user tries to visualize (or \"aggregate\") analyzed field? Right now, Kibana doesn't even show \"host.raw\" under \"Available Fields\" list, so I didn't know I should've used that field instead.\n\nCurrently, In order to visualize the hostname, our user needs to do following.\n\n1) Click Visualize bar under quick count view for \"host\" field.\n2) Dismiss \"Error Visualize: java.lang.IllegalStateException\"\n3) Copy & Paste the URL to a text editor, and replace \"host\" with \"host.raw\".\n4) Reload page with the new URL.\n\nObviously.. having to ask all of our users to this is not an option. \n\nI feel that the better approach is to tell ElasticSearch to use non-analyzed field for fields like \"host\". If it is, is there a documentation on how to do this?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/185246791","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-185246791","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":185246791,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NTI0Njc5MQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-02-17T15:14:02Z","updated_at":"2016-02-17T15:14:02Z","author_association":"CONTRIBUTOR","body":"@rashidkpc see https://github.com/elastic/elasticsearch/issues/15267#issuecomment-184294462\n\ni was under the (possibly mistaken?) impression that Kibana automatically selected the `.raw` field if available, but this appears not to be the case here?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/188390242","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-188390242","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":188390242,"node_id":"MDEyOklzc3VlQ29tbWVudDE4ODM5MDI0Mg==","user":{"login":"kmoe","id":5575356,"node_id":"MDQ6VXNlcjU1NzUzNTY=","avatar_url":"https://avatars2.githubusercontent.com/u/5575356?v=4","gravatar_id":"","url":"https://api.github.com/users/kmoe","html_url":"https://github.com/kmoe","followers_url":"https://api.github.com/users/kmoe/followers","following_url":"https://api.github.com/users/kmoe/following{/other_user}","gists_url":"https://api.github.com/users/kmoe/gists{/gist_id}","starred_url":"https://api.github.com/users/kmoe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kmoe/subscriptions","organizations_url":"https://api.github.com/users/kmoe/orgs","repos_url":"https://api.github.com/users/kmoe/repos","events_url":"https://api.github.com/users/kmoe/events{/privacy}","received_events_url":"https://api.github.com/users/kmoe/received_events","type":"User","site_admin":false},"created_at":"2016-02-24T18:21:23Z","updated_at":"2016-02-24T18:21:23Z","author_association":"NONE","body":"@clintongormley it doesn't for me - in fact, I get a `Could not locate that index-pattern-field (id: level.raw)` when I try to use the `.raw` version of `level`. Is there any reason why the `.raw` fields might be missing?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/188832969","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-188832969","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":188832969,"node_id":"MDEyOklzc3VlQ29tbWVudDE4ODgzMjk2OQ==","user":{"login":"soichih","id":923896,"node_id":"MDQ6VXNlcjkyMzg5Ng==","avatar_url":"https://avatars3.githubusercontent.com/u/923896?v=4","gravatar_id":"","url":"https://api.github.com/users/soichih","html_url":"https://github.com/soichih","followers_url":"https://api.github.com/users/soichih/followers","following_url":"https://api.github.com/users/soichih/following{/other_user}","gists_url":"https://api.github.com/users/soichih/gists{/gist_id}","starred_url":"https://api.github.com/users/soichih/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/soichih/subscriptions","organizations_url":"https://api.github.com/users/soichih/orgs","repos_url":"https://api.github.com/users/soichih/repos","events_url":"https://api.github.com/users/soichih/events{/privacy}","received_events_url":"https://api.github.com/users/soichih/received_events","type":"User","site_admin":false},"created_at":"2016-02-25T15:18:03Z","updated_at":"2016-02-25T15:18:07Z","author_association":"NONE","body":"> Kibana automatically selected the .raw field\n\nNot for me either. But if it did, it would solve this issue for me. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/188860397","html_url":"https://github.com/elastic/elasticsearch/issues/15267#issuecomment-188860397","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15267","id":188860397,"node_id":"MDEyOklzc3VlQ29tbWVudDE4ODg2MDM5Nw==","user":{"login":"kmoe","id":5575356,"node_id":"MDQ6VXNlcjU1NzUzNTY=","avatar_url":"https://avatars2.githubusercontent.com/u/5575356?v=4","gravatar_id":"","url":"https://api.github.com/users/kmoe","html_url":"https://github.com/kmoe","followers_url":"https://api.github.com/users/kmoe/followers","following_url":"https://api.github.com/users/kmoe/following{/other_user}","gists_url":"https://api.github.com/users/kmoe/gists{/gist_id}","starred_url":"https://api.github.com/users/kmoe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kmoe/subscriptions","organizations_url":"https://api.github.com/users/kmoe/orgs","repos_url":"https://api.github.com/users/kmoe/repos","events_url":"https://api.github.com/users/kmoe/events{/privacy}","received_events_url":"https://api.github.com/users/kmoe/received_events","type":"User","site_admin":false},"created_at":"2016-02-25T16:18:51Z","updated_at":"2016-02-25T16:18:51Z","author_association":"NONE","body":"The fix for me turned out to be to regenerate the index pattern. This can be done in the Kibana GUI by going to Settings, deleting the index pattern, and recreating it with default settings. The `.raw` fields then appeared.\nOf course, be careful not to lose your data!\n","performed_via_github_app":null}]