{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/10301","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10301/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10301/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10301/events","html_url":"https://github.com/elastic/elasticsearch/issues/10301","id":64889806,"node_id":"MDU6SXNzdWU2NDg4OTgwNg==","number":10301,"title":"Add non existing settings in cluster settings in  elasticsearch","user":{"login":"shorman88","id":7731747,"node_id":"MDQ6VXNlcjc3MzE3NDc=","avatar_url":"https://avatars2.githubusercontent.com/u/7731747?v=4","gravatar_id":"","url":"https://api.github.com/users/shorman88","html_url":"https://github.com/shorman88","followers_url":"https://api.github.com/users/shorman88/followers","following_url":"https://api.github.com/users/shorman88/following{/other_user}","gists_url":"https://api.github.com/users/shorman88/gists{/gist_id}","starred_url":"https://api.github.com/users/shorman88/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shorman88/subscriptions","organizations_url":"https://api.github.com/users/shorman88/orgs","repos_url":"https://api.github.com/users/shorman88/repos","events_url":"https://api.github.com/users/shorman88/events{/privacy}","received_events_url":"https://api.github.com/users/shorman88/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-03-28T02:43:48Z","updated_at":"2015-03-29T10:45:35Z","closed_at":"2015-03-29T10:45:35Z","author_association":"NONE","active_lock_reason":null,"body":"Hi there,\n\nRecently i have built elasticsearch with fluentd and Kibana and all is working fine, but we are facing high cpu load while performing search caused by java.\n\nI have 60 GB Ram and 16 processors and each processor has 2 cores.\n\nES_HEAP_SIZE=32g\n-find below more details\n\n curl \"localhost:9200/_cat/thread_pool?v&h=search.rejected\"\nsearch.rejected\n            387\n\ncurl \"localhost:9200/_cat/thread_pool?v&h=index.rejected\"\nindex.rejected\n             0\n- snapshot from elasticsearch.log\n\n[DEBUG][action.search.type       ] [Hulk 2099] [logstash-2015.03.14][4], node[qxcAN3lURs65Lf1GMhB_qg], [P], s[STARTED]: Failed to execute [org.elasticsearch.action.search.SearchRequest@7c71025f] lastShard [true]\norg.elasticsearch.common.util.concurrent.EsRejectedExecutionException: rejected execution (queue capacity 1000) on org.elasticsearch.search.action.SearchServiceTransportAction$23@1d7c9f0f\n        at org.elasticsearch.common.util.concurrent.EsAbortPolicy.rejectedExecution(EsAbortPolicy.java:62)\n        at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:821)\n        at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1372)\n        at org.elasticsearch.search.action.SearchServiceTransportAction.execute(SearchServiceTransportAction.java:551)\n        at org.elasticsearch.search.action.SearchServiceTransportAction.sendExecuteQuery(SearchServiceTransportAction.java:228)\n        at org.elasticsearch.action.search.type.TransportSearchCountAction$AsyncAction.sendExecuteFirstPhase(TransportSearchCountAction.java:71)\n        at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction.performFirstPhase(TransportSearchTypeAction.java:171)\n\nNow i read that i have to update the threadpool settings in ES and i have now \n curl -XGET localhost:9200/_cluster/settings?pretty\n{\n  \"persistent\" : { },\n  \"transient\" : { }\n}\n\ni'm trying to update the settings with the below commands \n\ncurl -XPUT localhost:9200/_cluster/settings -d '{\n\n\"threadpool\" : {\n  \"index\": {\n    \"type\": \"fixed\",\n    \"size\": 32,\n    \"queue_size\": 1000\n  },\n  \"bulk\": {\n    \"type\": \"fixed\",\n    \"size\": 32,\n    \"queue_size\": 1000\n  },\n  \"search\": {\n    \"type\": \"fixed\",\n    \"size\": 96,\n    \"queue_size\": 1000\n }\n}\n}'\n\nbut i keep getting {\"error\":\"ActionRequestValidationException[Validation Failed: 1: no settings to update;]\",\"status\":400}\n\nWhat's wrong with this command? is it the right solution for my issue ?\n\nPlease advise\n\nThanks.\n\nAyman\n","closed_by":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"performed_via_github_app":null}