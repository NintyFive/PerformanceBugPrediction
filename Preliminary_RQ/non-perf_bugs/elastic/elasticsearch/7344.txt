{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/7344","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7344/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7344/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7344/events","html_url":"https://github.com/elastic/elasticsearch/issues/7344","id":40644203,"node_id":"MDU6SXNzdWU0MDY0NDIwMw==","number":7344,"title":"random FileNotFoundExceptions when performing a snapshot","user":{"login":"OlegYch","id":268312,"node_id":"MDQ6VXNlcjI2ODMxMg==","avatar_url":"https://avatars1.githubusercontent.com/u/268312?v=4","gravatar_id":"","url":"https://api.github.com/users/OlegYch","html_url":"https://github.com/OlegYch","followers_url":"https://api.github.com/users/OlegYch/followers","following_url":"https://api.github.com/users/OlegYch/following{/other_user}","gists_url":"https://api.github.com/users/OlegYch/gists{/gist_id}","starred_url":"https://api.github.com/users/OlegYch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OlegYch/subscriptions","organizations_url":"https://api.github.com/users/OlegYch/orgs","repos_url":"https://api.github.com/users/OlegYch/repos","events_url":"https://api.github.com/users/OlegYch/events{/privacy}","received_events_url":"https://api.github.com/users/OlegYch/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"assignees":[{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false}],"milestone":null,"comments":9,"created_at":"2014-08-19T22:28:11Z","updated_at":"2014-08-20T15:50:22Z","closed_at":"2014-08-20T15:50:22Z","author_association":"NONE","active_lock_reason":null,"body":"i had a 1.2.2 cluster of 6 nodes with an nfs folder on one of the servers shared between all of them\nwhen trying to do a snapshot i'm getting exceptions like\n\n```\nCreateSnapshotResponse[snapshotInfo=SnapshotInfo[name=2014-08-11-16-31-04,state=PARTIAL,reason=<null>,indices=Object[][{my_idx3,my_idx2}],\nstartTime=1407774870154,endTime=1407775114709,totalShards=17,successfulShards=14,\nshardFailures=Object[][{\n[my_idx2][4] failed, reason [IndexShardSnapshotFailedException[[my_idx2][4] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx2/4/__0 (No such file or directory)]; ],\n[my_idx2][3] failed, reason [IndexShardSnapshotFailedException[[my_idx2][3] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx2/3/__0 (No such file or directory)]; ],\n[my_idx3][0] failed, reason [IndexShardSnapshotFailedException[[my_idx3][0] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx3/0/__0 (No such file or directory)]; ]}]],\nheaders=<null>,remoteAddress=inet[masternode/redacted:9300]]\n```\n\nthis only happens for some shards, others are snapshotted fine and i was able to restore them succesfully\nafter upgrade to 1.3.1 one of the indexes did not exhibit the problem anymore but the other one continued\nsince the upgrade i've created a few more indexes and now i'm getting same errors for them:\n\n```\nCreateSnapshotResponse[snapshotInfo=SnapshotInfo[name=2014-08-19-00-57-20,state=PARTIAL,reason=<null>,indices=Object[][{my_idx3,my_idx_redacted_7,my_idx_redacted_7,my_idx_redacted_7,my_idx_redacted_7,my_idx_redacted_7,my_idx_redacted_7,my_idx_redacted_7}],startTime=1408410040861,endTime=1408410112552,totalShards=96,successfulShards=64,shardFailures=Object[][\n{[my_idx_redacted_7][0] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][0] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/0/__0 (No such file or directory)]; ],\n[my_idx_redacted_7][1] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][1] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/1/__0 (No such file or directory)]; ],\n[my_idx_redacted_7][6] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][6] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/6/__0 (No such file or directory)]; ],\n[my_idx_redacted_7][7] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][7] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/7/__0 (No such file or directory)]; ],\n[my_idx_redacted_7][0] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][0] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/0/__0 (No such file or directory)]; ],\n[my_idx_redacted_7][1] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][1] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/1/__0 (No such file or directory)]; ],\n[my_idx_redacted_7][6] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][6] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/6/__0 (No such file or directory)]; ],\n[my_idx_redacted_7][8] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][8] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/8/__0 (No such file or directory)]; ],\n[my_idx_redacted_7][7] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][7] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/7/__0 (No such file or directory)]; ],\n[my_idx_redacted_7][6] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][6] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/6/__0 (No such file or directory)]; ],\n[my_idx_redacted_7][2] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][2] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/2/__2 (No such file or directory)]; ],\n[my_idx_redacted_7][0] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][0] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/0/__0 (No such file or directory)]; ],\n[my_idx_redacted_7][6] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][6] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/6/__0 (No such file or directory)]; ],\n[my_idx_redacted_7][0] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][0] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/0/__0 (No such file or directory)]; ],\n[my_idx_redacted_7][2] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][2] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/2/__0 (No such file or directory)]; ],\n[my_idx_redacted_7][10] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][10] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/10/__2 (No such file or directory)]; ],\n[my_idx_redacted_7][9] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][9] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/9/__0 (No such file or directory)]; ]\n,[my_idx_redacted_7][3] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][3] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/3/__1 (No such file or directory)]; ],\n[my_idx_redacted_7][0] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][0] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/0/__0 (No such file or directory)]; ],\n[my_idx_redacted_7][4] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][4] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/4/__2 (No such file or directory)]; ],\n[my_idx_redacted_7][8] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][8] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/8/__0 (No such file or directory)]; ],\n[my_idx_redacted_7][3] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][3] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/3/__1 (No such file or directory)]; ],\n[my_idx_redacted_7][4] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][4] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/4/__3 (No such file or directory)]; ],\n[my_idx_redacted_7][0] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][0] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/0/__2 (No such file or directory)]; ],\n[my_idx_redacted_7][8] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][8] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/8/__1 (No such file or directory)]; ],\n[my_idx_redacted_7][10] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][10] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/10/__0 (No such file or directory)]; ],\n[my_idx3][7] failed, reason [IndexShardSnapshotFailedException[[my_idx3][7] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx3/7/__0 (No such file or directory)]; ],\n[my_idx3][0] failed, reason [IndexShardSnapshotFailedException[[my_idx3][0] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx3/0/__0 (No such file or directory)]; ],\n[my_idx_redacted_7][2] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][2] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/2/__0 (No such file or directory)]; ],\n[my_idx_redacted_7][0] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][0] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/0/__0 (No such file or directory)]; ],\n[my_idx_redacted_7][6] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][6] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/6/__0 (No such file or directory)]; ],\n[my_idx_redacted_7][8] failed, reason [IndexShardSnapshotFailedException[[my_idx_redacted_7][8] Failed to perform snapshot (index files)]; nested: FileNotFoundException[/home/shared_dir/indices/my_idx_redacted_7/8/__0 (No such file or directory)]; ]}]],\nheaders=<null>,remoteAddress=inet[redacted/redacted:9300]]\n```\n","closed_by":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"performed_via_github_app":null}