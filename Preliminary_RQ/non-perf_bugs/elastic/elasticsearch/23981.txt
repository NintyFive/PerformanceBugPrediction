{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/23981","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23981/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23981/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23981/events","html_url":"https://github.com/elastic/elasticsearch/issues/23981","id":220295369,"node_id":"MDU6SXNzdWUyMjAyOTUzNjk=","number":23981,"title":"default.path.data included as a data path when path.data configured as yaml array","user":{"login":"tylerfontaine","id":1923424,"node_id":"MDQ6VXNlcjE5MjM0MjQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1923424?v=4","gravatar_id":"","url":"https://api.github.com/users/tylerfontaine","html_url":"https://github.com/tylerfontaine","followers_url":"https://api.github.com/users/tylerfontaine/followers","following_url":"https://api.github.com/users/tylerfontaine/following{/other_user}","gists_url":"https://api.github.com/users/tylerfontaine/gists{/gist_id}","starred_url":"https://api.github.com/users/tylerfontaine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tylerfontaine/subscriptions","organizations_url":"https://api.github.com/users/tylerfontaine/orgs","repos_url":"https://api.github.com/users/tylerfontaine/repos","events_url":"https://api.github.com/users/tylerfontaine/events{/privacy}","received_events_url":"https://api.github.com/users/tylerfontaine/received_events","type":"User","site_admin":false},"labels":[{"id":144457604,"node_id":"MDU6TGFiZWwxNDQ0NTc2MDQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Settings","name":":Core/Infra/Settings","color":"0e8a16","default":false,"description":"Settings infrastructure and APIs"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":92913730,"node_id":"MDU6TGFiZWw5MjkxMzczMA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/critical","name":"critical","color":"eb6420","default":false,"description":null},{"id":511906923,"node_id":"MDU6TGFiZWw1MTE5MDY5MjM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v5.3.0","name":"v5.3.0","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"assignees":[{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false}],"milestone":null,"comments":18,"created_at":"2017-04-07T18:39:42Z","updated_at":"2017-04-17T11:03:47Z","closed_at":"2017-04-17T11:03:47Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**: 5.3.0\r\n\r\n**OS version**: Tried in Centos 7 and OS X, though I suspect it doesn't matter.\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nWhen using multiple data paths, or even specifying just a single data path as an array in yaml, elasticearch includes whatever is passed to it as default.path.data, such as when installed via RPM or DEB packages, from the systemd unit OR the init.d script, since you set this when you execute the es binary:\r\n\r\n`-Edefault.path.data=${DATA_DIR}`\r\n\r\n**Steps to reproduce**:\r\nRepro:\r\n\r\nSet this in the elasticsearch.yml\r\n\r\n```\r\npath.data:\r\n- \"/some/datapath1\"\r\n```\r\n\r\nrun this:\r\n\r\n`bin/elasticsearch -Edefault.path.data=\"/some/datapath2\"`\r\n\r\nAnd elasticsearch will start configured with both data paths.\r\n\r\n**Provide logs (if relevant)**:\r\n\r\n\r\n```\r\n[2017-04-07T13:30:49,987][INFO ][o.e.e.NodeEnvironment    ] [jCWIeyS] using [2] data paths, mounts [[/ (/dev/disk1)]], net usable_space [198.8gb], net total_space [464.7gb], spins? [unknown], types [hfs]\r\n```\r\n\r\nThis also happens when you use this array format:\r\n\r\n`path.data: [\"/some/datapath1\"]`\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}