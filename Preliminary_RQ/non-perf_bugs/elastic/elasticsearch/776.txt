{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/776","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/776/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/776/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/776/events","html_url":"https://github.com/elastic/elasticsearch/issues/776","id":667968,"node_id":"MDU6SXNzdWU2Njc5Njg=","number":776,"title":"Versioning: Add a new version_type parameter, with a new type - `external`","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"labels":[{"id":23172,"node_id":"MDU6TGFiZWwyMzE3Mg==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Efeature","name":">feature","color":"006b75","default":false,"description":null},{"id":76649,"node_id":"MDU6TGFiZWw3NjY0OQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.16.0","name":"v0.16.0","color":"ededed","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2011-03-12T18:34:52Z","updated_at":"2011-05-21T09:15:03Z","closed_at":"2011-03-13T02:42:09Z","author_association":"MEMBER","active_lock_reason":null,"body":"Add a new `version_type` parameter, supporting a new versioning behavior. The current versioning behavior is called `internal`, the new one named `external`.\n\nThe `external` version type allows to provide an external _numeric_ version value (that might be maintained by an external system, like optimistic locking logic in a database). \n\nWhen provided, by setting the `version` value and the `version_type`  to `external`, the check will be if the provided version is greater than the current document version. If so, it will be set as the document version value and the document will be indexed. If the current document version is higher than the provided version, a version conflict will be returned / thrown.\n\nThis means that async indexing as a result of operations done against the database can use the database versioning scheme and there is no need to maintain strict ordering in the async indexing process.\n\nOr even the simple case of updating the db, and then indexing into elasticsearch is now simplified since if the indexing gets out of order, the external versioning can be used to make sure only the latest version is indexed.\n","closed_by":null,"performed_via_github_app":null}