[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/234572488","html_url":"https://github.com/elastic/elasticsearch/issues/19549#issuecomment-234572488","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19549","id":234572488,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNDU3MjQ4OA==","user":{"login":"abeyad","id":1631297,"node_id":"MDQ6VXNlcjE2MzEyOTc=","avatar_url":"https://avatars2.githubusercontent.com/u/1631297?v=4","gravatar_id":"","url":"https://api.github.com/users/abeyad","html_url":"https://github.com/abeyad","followers_url":"https://api.github.com/users/abeyad/followers","following_url":"https://api.github.com/users/abeyad/following{/other_user}","gists_url":"https://api.github.com/users/abeyad/gists{/gist_id}","starred_url":"https://api.github.com/users/abeyad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abeyad/subscriptions","organizations_url":"https://api.github.com/users/abeyad/orgs","repos_url":"https://api.github.com/users/abeyad/repos","events_url":"https://api.github.com/users/abeyad/events{/privacy}","received_events_url":"https://api.github.com/users/abeyad/received_events","type":"User","site_admin":false},"created_at":"2016-07-22T15:18:12Z","updated_at":"2016-07-22T15:18:12Z","author_association":"CONTRIBUTOR","body":"Its not clear what you mean by frozen state?  RED means the cluster can't handle any write operations because primary shards are missing.  If you delete your data directory, this will naturally be the case.  \n\nClosing as this is not a bug.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/234621158","html_url":"https://github.com/elastic/elasticsearch/issues/19549#issuecomment-234621158","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19549","id":234621158,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNDYyMTE1OA==","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2016-07-22T18:32:06Z","updated_at":"2016-07-22T18:32:06Z","author_association":"MEMBER","body":"@Rajind I wasn't able to reproduce this issue the way you described it. When I wipe out entire data directory and restart the node, I get a clean cluster in GREEN state. You are probably wiping out the index directory not entire data directory, which causes elasticsearch to think that index should exist when it actually doesn't, therefore shards are missing and as a result you get RED state. The solution here would be to delete the entire data directory when server is stopped and then start it again.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/234832624","html_url":"https://github.com/elastic/elasticsearch/issues/19549#issuecomment-234832624","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19549","id":234832624,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNDgzMjYyNA==","user":{"login":"Rajind","id":5234766,"node_id":"MDQ6VXNlcjUyMzQ3NjY=","avatar_url":"https://avatars0.githubusercontent.com/u/5234766?v=4","gravatar_id":"","url":"https://api.github.com/users/Rajind","html_url":"https://github.com/Rajind","followers_url":"https://api.github.com/users/Rajind/followers","following_url":"https://api.github.com/users/Rajind/following{/other_user}","gists_url":"https://api.github.com/users/Rajind/gists{/gist_id}","starred_url":"https://api.github.com/users/Rajind/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rajind/subscriptions","organizations_url":"https://api.github.com/users/Rajind/orgs","repos_url":"https://api.github.com/users/Rajind/repos","events_url":"https://api.github.com/users/Rajind/events{/privacy}","received_events_url":"https://api.github.com/users/Rajind/received_events","type":"User","site_admin":false},"created_at":"2016-07-25T04:14:46Z","updated_at":"2016-07-25T04:14:46Z","author_association":"NONE","body":"@imotov: Thanks for the reply. I assume you tried deleting the data directory while elasticsearch is running. I am deleting the directory which is given to the elasticsearch configuration as \"path.data\". Is is same as index directory ? If not where would be the index directory when running elasticsearch embedded ? \n\nThe scenario I saw is that first when I delete data directory when elasticsearch is running the folder is empty. but when elasticsearch shuts down it writes some files to that dir and probably those files might be related to the index i suppose. And when I start elasticsearch again the index is there but no data. So recovery fails. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/235770763","html_url":"https://github.com/elastic/elasticsearch/issues/19549#issuecomment-235770763","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19549","id":235770763,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNTc3MDc2Mw==","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2016-07-28T01:23:23Z","updated_at":"2016-07-28T01:23:23Z","author_association":"MEMBER","body":"> I am deleting the directory which is given to the elasticsearch configuration as \"path.data\". Is is same as index directory ?\n\nYes, it is the same directory. I just tried it with non-default data directory and couldn't reproduce it either.\n\n> The scenario I saw is that first when I delete data directory when elasticsearch is running the folder is empty. but when elasticsearch shuts down it writes some files to that dir and probably those files might be related to the index i suppose. \n\nWhen you delete the data directory while elasticsearch is running it doesn't actually recreate this directory. So, when you start elasticsearch again it creates an empty directory and starts fine. You can download elasticsearch and try to reproduce it yourself. You will see what I mean. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/236520235","html_url":"https://github.com/elastic/elasticsearch/issues/19549#issuecomment-236520235","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19549","id":236520235,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNjUyMDIzNQ==","user":{"login":"Rajind","id":5234766,"node_id":"MDQ6VXNlcjUyMzQ3NjY=","avatar_url":"https://avatars0.githubusercontent.com/u/5234766?v=4","gravatar_id":"","url":"https://api.github.com/users/Rajind","html_url":"https://github.com/Rajind","followers_url":"https://api.github.com/users/Rajind/followers","following_url":"https://api.github.com/users/Rajind/following{/other_user}","gists_url":"https://api.github.com/users/Rajind/gists{/gist_id}","starred_url":"https://api.github.com/users/Rajind/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rajind/subscriptions","organizations_url":"https://api.github.com/users/Rajind/orgs","repos_url":"https://api.github.com/users/Rajind/repos","events_url":"https://api.github.com/users/Rajind/events{/privacy}","received_events_url":"https://api.github.com/users/Rajind/received_events","type":"User","site_admin":false},"created_at":"2016-08-01T08:31:41Z","updated_at":"2016-08-01T08:31:41Z","author_association":"NONE","body":"@imotov I still experience the same scenario. Do you think what I observe has something to do with BulkProcessor trying to publish while the data directory is deleted ? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/238118316","html_url":"https://github.com/elastic/elasticsearch/issues/19549#issuecomment-238118316","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19549","id":238118316,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODExODMxNg==","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2016-08-08T00:14:42Z","updated_at":"2016-08-08T00:14:42Z","author_association":"MEMBER","body":"@Rajind did you try reproducing it outside of your application with non-embedded mode? When you run elasticsearch in an embedded mode a lot of things can happen inside your application that are very hard to reproduce for us unless we know what exactly your application is doing. So, unless you can help us reproducing it without your application code involved, I am not really sure we can do something about it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/238443344","html_url":"https://github.com/elastic/elasticsearch/issues/19549#issuecomment-238443344","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19549","id":238443344,"node_id":"MDEyOklzc3VlQ29tbWVudDIzODQ0MzM0NA==","user":{"login":"Rajind","id":5234766,"node_id":"MDQ6VXNlcjUyMzQ3NjY=","avatar_url":"https://avatars0.githubusercontent.com/u/5234766?v=4","gravatar_id":"","url":"https://api.github.com/users/Rajind","html_url":"https://github.com/Rajind","followers_url":"https://api.github.com/users/Rajind/followers","following_url":"https://api.github.com/users/Rajind/following{/other_user}","gists_url":"https://api.github.com/users/Rajind/gists{/gist_id}","starred_url":"https://api.github.com/users/Rajind/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rajind/subscriptions","organizations_url":"https://api.github.com/users/Rajind/orgs","repos_url":"https://api.github.com/users/Rajind/repos","events_url":"https://api.github.com/users/Rajind/events{/privacy}","received_events_url":"https://api.github.com/users/Rajind/received_events","type":"User","site_admin":false},"created_at":"2016-08-09T03:23:53Z","updated_at":"2016-08-09T03:23:53Z","author_association":"NONE","body":"@imotov I will try to reproduce it with a sample code with an standalone node and get back to you. Thanks. \n","performed_via_github_app":null}]