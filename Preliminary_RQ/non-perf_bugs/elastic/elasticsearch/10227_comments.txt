[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/85201422","html_url":"https://github.com/elastic/elasticsearch/issues/10227#issuecomment-85201422","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10227","id":85201422,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MjAxNDIy","user":{"login":"nknize","id":830187,"node_id":"MDQ6VXNlcjgzMDE4Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/830187?v=4","gravatar_id":"","url":"https://api.github.com/users/nknize","html_url":"https://github.com/nknize","followers_url":"https://api.github.com/users/nknize/followers","following_url":"https://api.github.com/users/nknize/following{/other_user}","gists_url":"https://api.github.com/users/nknize/gists{/gist_id}","starred_url":"https://api.github.com/users/nknize/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nknize/subscriptions","organizations_url":"https://api.github.com/users/nknize/orgs","repos_url":"https://api.github.com/users/nknize/repos","events_url":"https://api.github.com/users/nknize/events{/privacy}","received_events_url":"https://api.github.com/users/nknize/received_events","type":"User","site_admin":false},"created_at":"2015-03-23T21:17:19Z","updated_at":"2015-03-23T21:17:19Z","author_association":"CONTRIBUTOR","body":"/cc @colings86 @clintongormley @rjernst @tschaub\n\nNote: In addition to permitting \"invalid\" polygons, this option (aside from being 'opt in') goes against the \"prevent users from 'hurting' themselves\" philosophy.  Its low hanging fruit but I open this issue for quick feedback before bringing it in.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/85206070","html_url":"https://github.com/elastic/elasticsearch/issues/10227#issuecomment-85206070","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10227","id":85206070,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MjA2MDcw","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-03-23T21:30:41Z","updated_at":"2015-03-23T21:30:41Z","author_association":"MEMBER","body":"Is there a real need for this, or is it laziness? Are there any performance benefits to the \"old\" way if you don't have holes? Is it just saving the user from having to sort their points and supply them in a deterministic order when the poly is \"simple\"?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/85248836","html_url":"https://github.com/elastic/elasticsearch/issues/10227#issuecomment-85248836","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10227","id":85248836,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MjQ4ODM2","user":{"login":"tschaub","id":41094,"node_id":"MDQ6VXNlcjQxMDk0","avatar_url":"https://avatars0.githubusercontent.com/u/41094?v=4","gravatar_id":"","url":"https://api.github.com/users/tschaub","html_url":"https://github.com/tschaub","followers_url":"https://api.github.com/users/tschaub/followers","following_url":"https://api.github.com/users/tschaub/following{/other_user}","gists_url":"https://api.github.com/users/tschaub/gists{/gist_id}","starred_url":"https://api.github.com/users/tschaub/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tschaub/subscriptions","organizations_url":"https://api.github.com/users/tschaub/orgs","repos_url":"https://api.github.com/users/tschaub/repos","events_url":"https://api.github.com/users/tschaub/events{/privacy}","received_events_url":"https://api.github.com/users/tschaub/received_events","type":"User","site_admin":false},"created_at":"2015-03-23T23:47:04Z","updated_at":"2015-03-23T23:47:04Z","author_association":"NONE","body":"Thanks for your willingness to work on this @nknize.  @rjernst - you're right to assume this can mostly be explained away as laziness - see https://trac.osgeo.org/gdal/ticket/2310.  We're serializing geometries as GeoJSON without first checking or enforcing any winding order.  This was working with Elasticsearch < 1.4.3.  Now it doesn't work for polygons that have interior rings and also span > 180 degrees longitude.  I'll confirm this now, but it struck me initially that the heuristic about dateline crossing was only being applied when determining if an interior ring was within an exterior ring, and _not_ when performing an intersects query.  I'll do some more testing to determine where it looks like the right hand rule is being assumed.\n\nI think what we'll do for now is update things to always create geometries following the right-hand rule.  And then we'll decide what to do with geometries we accept from clients (before sending to Elasticsearch).\n\nSo, thanks again for considering the `orientation: ignore` property.  I'll update the clients that we control and the other places we construct geometries to always use the right-hand rule.  We've added text to the proposed GeoJSON IETF draft encouraging people to do the same (see geojson/draft-geojson#43), so maybe things will get better over time.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162244634","html_url":"https://github.com/elastic/elasticsearch/issues/10227#issuecomment-162244634","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10227","id":162244634,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MjI0NDYzNA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-12-05T20:52:00Z","updated_at":"2015-12-05T20:52:00Z","author_association":"CONTRIBUTOR","body":"@nknize Is this still relevant or can it be closed?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162327276","html_url":"https://github.com/elastic/elasticsearch/issues/10227#issuecomment-162327276","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10227","id":162327276,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MjMyNzI3Ng==","user":{"login":"nknize","id":830187,"node_id":"MDQ6VXNlcjgzMDE4Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/830187?v=4","gravatar_id":"","url":"https://api.github.com/users/nknize","html_url":"https://github.com/nknize","followers_url":"https://api.github.com/users/nknize/followers","following_url":"https://api.github.com/users/nknize/following{/other_user}","gists_url":"https://api.github.com/users/nknize/gists{/gist_id}","starred_url":"https://api.github.com/users/nknize/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nknize/subscriptions","organizations_url":"https://api.github.com/users/nknize/orgs","repos_url":"https://api.github.com/users/nknize/repos","events_url":"https://api.github.com/users/nknize/events{/privacy}","received_events_url":"https://api.github.com/users/nknize/received_events","type":"User","site_admin":false},"created_at":"2015-12-06T16:31:07Z","updated_at":"2015-12-06T16:31:07Z","author_association":"CONTRIBUTOR","body":"Closing this issue. As discussed in #12325 we need to require OGC/ISO compliance. There are already separate tools that fix bad (non-compliant) data and adding this option/leniency just invites trouble in the long run.\n","performed_via_github_app":null}]