{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/443","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/443/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/443/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/443/events","html_url":"https://github.com/elastic/elasticsearch/issues/443","id":375332,"node_id":"MDU6SXNzdWUzNzUzMzI=","number":443,"title":"Merge mapping fails if original mapping does not have a index_analyzer","user":{"login":"dbenson","id":366175,"node_id":"MDQ6VXNlcjM2NjE3NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/366175?v=4","gravatar_id":"","url":"https://api.github.com/users/dbenson","html_url":"https://github.com/dbenson","followers_url":"https://api.github.com/users/dbenson/followers","following_url":"https://api.github.com/users/dbenson/following{/other_user}","gists_url":"https://api.github.com/users/dbenson/gists{/gist_id}","starred_url":"https://api.github.com/users/dbenson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbenson/subscriptions","organizations_url":"https://api.github.com/users/dbenson/orgs","repos_url":"https://api.github.com/users/dbenson/repos","events_url":"https://api.github.com/users/dbenson/events{/privacy}","received_events_url":"https://api.github.com/users/dbenson/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2010-10-21T19:49:58Z","updated_at":"2014-07-08T11:47:42Z","closed_at":"2014-07-08T11:47:42Z","author_association":"NONE","active_lock_reason":null,"body":"If an index field mapping does not have an index_analyzer, during a mapping update which sets an analyzer, the mapping merge will fail. This seems like a change which should be permissable.\n\nCurrent field mapping\nsubject: {\nomit_term_freq_and_positions: false\nindex_name: \"subject\"\nindex: \"no\"\nomit_norms: true\nstore: \"no\"\nboost: 1\nterm_vector: \"no\"\ntype: \"string\"\n}\n\nUpdated mapping:\n\n\"subject\":{\n\"type\":\"string\"\n\"analyzer\":\"fulltext_tokenizer\"                // local custom mapping, used elsewhere\n\"omit_norms\":true\n\"term_vector\":\"yes\"\n}\n\nCasues a MergeMapping failure\nMerge failed with failures {[mapper [subject] has different index values, mapper [subject] has different term_vector values, mapper [subject] has different index_analyzer, mapper [subject] has different search_analyzer]} \n\nCaused by: org.elasticsearch.transport.RemoteTransportException: [DM-ADSEARCHD102.dev.local][inet[/10.2.20.160:9300]][indices/mapping/put]\nCaused by: org.elasticsearch.index.mapper.MergeMappingException: Merge failed with failures {[mapper [subject] has different index values, mapper [subject] has different term_vector values, mapper [subject] has different index_analyzer, mapper [subject] has different search_analyzer, mapper [primarywsodcompany] has different index_analyzer, mapper [primarywsodcompany] has different search_analyzer, mapper [primarywsodissue] has different index_analyzer, mapper [primarywsodissue] has different search_analyzer]}\n    at org.elasticsearch.cluster.metadata.MetaDataMappingService$3.execute(MetaDataMappingService.java:164)\n    at org.elasticsearch.cluster.service.InternalClusterService$2.run(InternalClusterService.java:154)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:619)\n\nOccurs in 0.11 and 0.12\n\nThanks,\n\nDavid\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}