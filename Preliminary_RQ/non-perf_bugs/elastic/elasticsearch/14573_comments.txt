[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/155037224","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-155037224","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":155037224,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NTAzNzIyNA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-11-09T11:36:07Z","updated_at":"2015-11-09T11:36:07Z","author_association":"CONTRIBUTOR","body":"You're specifying the custom config file location incorrectly.  \n\nSee https://www.elastic.co/guide/en/elasticsearch/reference/current/breaking_20_setting_changes.html#_custom_config_file\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/155157461","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-155157461","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":155157461,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NTE1NzQ2MQ==","user":{"login":"kt97679","id":3466350,"node_id":"MDQ6VXNlcjM0NjYzNTA=","avatar_url":"https://avatars3.githubusercontent.com/u/3466350?v=4","gravatar_id":"","url":"https://api.github.com/users/kt97679","html_url":"https://github.com/kt97679","followers_url":"https://api.github.com/users/kt97679/followers","following_url":"https://api.github.com/users/kt97679/following{/other_user}","gists_url":"https://api.github.com/users/kt97679/gists{/gist_id}","starred_url":"https://api.github.com/users/kt97679/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kt97679/subscriptions","organizations_url":"https://api.github.com/users/kt97679/orgs","repos_url":"https://api.github.com/users/kt97679/repos","events_url":"https://api.github.com/users/kt97679/events{/privacy}","received_events_url":"https://api.github.com/users/kt97679/received_events","type":"User","site_admin":false},"created_at":"2015-11-09T19:05:07Z","updated_at":"2015-11-09T19:13:33Z","author_association":"NONE","body":"Hi @clintongormley , thanks for quick response. As you can see from the description I've provided I was using option -Ddefault.path.conf. I tried again same command with option --path.conf. There was no exception because of config access issue, but I had to specify also --path.data and --path.logs because for some reason those settings were ignored in the config I've provided. In my config I also specify nonstandard ports to use and those settings are also not used. Any advise what can be wrong?\n\nThanks,\nKirill.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/155164496","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-155164496","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":155164496,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NTE2NDQ5Ng==","user":{"login":"kt97679","id":3466350,"node_id":"MDQ6VXNlcjM0NjYzNTA=","avatar_url":"https://avatars3.githubusercontent.com/u/3466350?v=4","gravatar_id":"","url":"https://api.github.com/users/kt97679","html_url":"https://github.com/kt97679","followers_url":"https://api.github.com/users/kt97679/followers","following_url":"https://api.github.com/users/kt97679/following{/other_user}","gists_url":"https://api.github.com/users/kt97679/gists{/gist_id}","starred_url":"https://api.github.com/users/kt97679/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kt97679/subscriptions","organizations_url":"https://api.github.com/users/kt97679/orgs","repos_url":"https://api.github.com/users/kt97679/repos","events_url":"https://api.github.com/users/kt97679/events{/privacy}","received_events_url":"https://api.github.com/users/kt97679/received_events","type":"User","site_admin":false},"created_at":"2015-11-09T19:23:19Z","updated_at":"2015-11-09T19:23:19Z","author_association":"NONE","body":"Looks like config is ignored completely. If I specify all options via command line I still get exception like above:\n\n<pre>\n# sudo -u elasticsearch /usr/share/elasticsearch/bin/elasticsearch --path.conf=/etc/tribe-elasticsearch/ --path.logs=/var/log/elasticsearch --path.data=/var/lib/elasticsearch/ --transport.tcp.port=9301 --http.port=9201 --network.host=0.0.0.0 --tribels.cluster.name=logstash-data --tribe.els.discovery.zen.ping.multicast.enabled=false --tribe.els.discovery.zen.ping.unicast.hosts=[\"10.128.69.48\",\"10.128.75.237\"]                                                                                                              \nlog4j:WARN No appenders could be found for logger (bootstrap).\nlog4j:WARN Please initialize the log4j system properly.\nlog4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\nException in thread \"main\" java.security.AccessControlException: access denied (\"java.io.FilePermission\" \"/usr/share/elasticsearch/config/elasticsearch.yml\" \"read\")\n        at java.security.AccessControlContext.checkPermission(AccessControlContext.java:457)\n        at java.security.AccessController.checkPermission(AccessController.java:884)\n        at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)\n        at java.lang.SecurityManager.checkRead(SecurityManager.java:888)\n        at sun.nio.fs.UnixPath.checkRead(UnixPath.java:795)\n        at sun.nio.fs.UnixFileSystemProvider.checkAccess(UnixFileSystemProvider.java:290)\n        at java.nio.file.Files.exists(Files.java:2385)\n        at org.elasticsearch.node.internal.InternalSettingsPreparer.prepareEnvironment(InternalSettingsPreparer.java:87)\n        at org.elasticsearch.node.Node.<init>(Node.java:128)\n        at org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:145)\n        at org.elasticsearch.tribe.TribeService.<init>(TribeService.java:136)\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:422)\n        at <<<guice>>>\n        at org.elasticsearch.node.Node.<init>(Node.java:198)\n        at org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:145)\n        at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:170)\n        at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:270)\n        at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:35)\n</pre>\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157363763","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-157363763","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":157363763,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NzM2Mzc2Mw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-11-17T12:55:24Z","updated_at":"2015-11-17T12:55:24Z","author_association":"CONTRIBUTOR","body":"Thanks for persisting.  I've managed to replicate this and it is indeed a bug.\n\nWhen the tribe node attempts to instantiate a node for the tribe service, it checks for access to the config directory, but that setting is no longer available to it and so it defaults to checking for path.home.\n\nThis can be replicated with a simple config file, saved as `foo/elasticsearch.yml`:\n\n```\nnode.name: foo\n\ntribe:\n    foo:\n        cluster.name: bar\n```\n\nStart elasticsearch as:\n\n```\n./elasticsearch-2.0.0/bin/elasticsearch --path.conf foo/\n```\n\nAnd it fails with:\n\n```\n[2015-11-17 13:54:47,763][INFO ][node                     ] [foo] version[2.0.0], pid[5940], build[de54438/2015-10-22T08:09:48Z]\n[2015-11-17 13:54:47,763][INFO ][node                     ] [foo] initializing ...\n[2015-11-17 13:54:47,836][INFO ][plugins                  ] [foo] loaded [], sites []\nException in thread \"main\" java.security.AccessControlException: access denied (\"java.io.FilePermission\" \"/Users/clinton/workspace/servers/elasticsearch-2.0.0/config/elasticsearch.yml\" \"read\")\n  at java.security.AccessControlContext.checkPermission(AccessControlContext.java:472)\n  at java.security.AccessController.checkPermission(AccessController.java:884)\n  at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)\n  at java.lang.SecurityManager.checkRead(SecurityManager.java:888)\n  at sun.nio.fs.UnixPath.checkRead(UnixPath.java:795)\n  at sun.nio.fs.UnixFileSystemProvider.checkAccess(UnixFileSystemProvider.java:290)\n  at java.nio.file.Files.exists(Files.java:2385)\n  at org.elasticsearch.node.internal.InternalSettingsPreparer.prepareEnvironment(InternalSettingsPreparer.java:87)\n  at org.elasticsearch.node.Node.<init>(Node.java:128)\n  at org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:145)\n  at org.elasticsearch.tribe.TribeService.<init>(TribeService.java:136)\n  at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n  at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n  at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n  at java.lang.reflect.Constructor.newInstance(Constructor.java:422)\n  at <<<guice>>>\n  at org.elasticsearch.node.Node.<init>(Node.java:198)\n  at org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:145)\n  at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:170)\n  at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:270)\n  at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:35)\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157365004","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-157365004","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":157365004,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NzM2NTAwNA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-11-17T13:02:57Z","updated_at":"2015-11-17T13:02:57Z","author_association":"CONTRIBUTOR","body":"@javanna could you take a look at this please?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157463650","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-157463650","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":157463650,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NzQ2MzY1MA==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2015-11-17T18:36:50Z","updated_at":"2015-11-17T18:36:50Z","author_association":"MEMBER","body":"I had a look at this. Only selected settings are forwarded to the inner tribe clients from the tribe node. `path.home` is one of them but `path.conf` is not. That said, if I remember correctly the tribe clients shouldn't read from configuration file (and sysprops) but only inherit a few settings from the parent node (like it happens in `TribeService`), something that we had enforced with #9721. I think something got lost with #13383 where `loadConfigSettings` was removed, which was our way to prevent loading anything from the config file. With that set to `false` I believe we wouldn't even check for the existence of the file, thus we wouldn't need any permission for that. At this point it seems to me that we would have to forward `path.conf` to the tribe clients just because we are going to check for its existence at some point although we have nothing to load from it (otherwise we check for path.home that we have no permissions for)? I think I'd need @rjernst to verify if what I explained makes any sense, it might be that I overlooked something.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157510683","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-157510683","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":157510683,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NzUxMDY4Mw==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-11-17T21:21:02Z","updated_at":"2015-11-17T21:21:02Z","author_association":"MEMBER","body":"If I understand the tribe node correctly, it is no different than any other client node (well, creating multiple client nodes internally). So to me, it should be passing along any settings it needs to configure the node (including `path.conf`).  However, I'm not sure what this has to do with the transport client? The transport client by definition now does not use the config file settings (and the stack trace shown above indicates the exception was from building a node, not a transport client).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157798793","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-157798793","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":157798793,"node_id":"MDEyOklzc3VlQ29tbWVudDE1Nzc5ODc5Mw==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2015-11-18T17:50:54Z","updated_at":"2015-11-18T17:50:54Z","author_association":"MEMBER","body":"> However, I'm not sure what this has to do with the transport client?\n\n@rjernst it doesn't have to do directly with the transport client, but the inner tribe nodes have a similar requirement when it comes to loading from config file. They should not be reading out of the config file but only inherit some selected settings from their \"parent\" node (the actual tribe node), and that is why we were previously setting `loadConfigSettings` to `false`, which is now removed though. If my analysis is correct security manager barfs because we check if the config file exists while creating inner client nodes as part of `TribeService`, but we shouldn't need to read from that file at that point anyway. I could forward  the `path.conf` setting to the client nodes too, but I feel it is not the right fix given that we should not be reading from that file nor check if it exists. Not sure what the right fix is though.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158072847","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-158072847","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":158072847,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODA3Mjg0Nw==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2015-11-19T14:28:21Z","updated_at":"2015-11-19T14:28:21Z","author_association":"MEMBER","body":"I looked deeper, I can confirm this is not just a problem around passing in the right `path.conf` to the inner nodes. The inner client nodes must not read from the main configuration file, something that was fixed in #9721. The option to not load from config settings for a node was though removed with #13383. I had expected `TribeUnitTests` to fail after that change but it doesn't unfortunately. If you try setting for instance `transport.tcp.port` in the configuration file, the tribe node will get that port, but the inner nodes will try to get that one too and will fail. The inner nodes should only get some selected settings from their parent node but never read from config file or system properties.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158087609","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-158087609","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":158087609,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODA4NzYwOQ==","user":{"login":"ESamir","id":9035864,"node_id":"MDQ6VXNlcjkwMzU4NjQ=","avatar_url":"https://avatars1.githubusercontent.com/u/9035864?v=4","gravatar_id":"","url":"https://api.github.com/users/ESamir","html_url":"https://github.com/ESamir","followers_url":"https://api.github.com/users/ESamir/followers","following_url":"https://api.github.com/users/ESamir/following{/other_user}","gists_url":"https://api.github.com/users/ESamir/gists{/gist_id}","starred_url":"https://api.github.com/users/ESamir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ESamir/subscriptions","organizations_url":"https://api.github.com/users/ESamir/orgs","repos_url":"https://api.github.com/users/ESamir/repos","events_url":"https://api.github.com/users/ESamir/events{/privacy}","received_events_url":"https://api.github.com/users/ESamir/received_events","type":"User","site_admin":false},"created_at":"2015-11-19T15:21:35Z","updated_at":"2015-11-19T15:37:49Z","author_association":"NONE","body":"+1\nRemoving the path.conf did not resolve the issue \n\nthe config used \n\n```\nbootstrap:\n  mlockall: true\ncluster:\n  name: tribe.elk.h2.com\ndiscovery:\n  zen:\n    minimum_master_nodes: 2\n    ping:\n      unicast:\n        hosts:\n             - h2-clt01\n             - h2-clt02\n             - h2-clt03\nnetwork:\n  host: h2-clt01\nnode:\n  data: false\n  master: true\n  name: h2-ct01-h2-ct01\npath:\n  data: /data/h2-ct01\ntribe:\n  h2:\n    cluster:\n      name: elk.h2.com\n    discovery:\n      zen:\n        ping:\n          unicast:\n            hosts:\n                 - h2-cm01\n                 - h2-cm02\n                 - h2-cm03\n  h3:\n    cluster:\n      name: elk.h3.com\n    discovery:\n      zen:\n        ping:\n          unicast:\n            hosts:\n                 - h3-cm01\n                 - h3-cm02\n                 - h3-cm03\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158094212","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-158094212","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":158094212,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODA5NDIxMg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-11-19T15:42:04Z","updated_at":"2015-11-19T15:42:04Z","author_association":"CONTRIBUTOR","body":"There is a workaround for this bug.  Assuming your tribe config directory is `/etc/tribe/`:\n\n```\ncd /etc\ncp -a /etc/tribe /etc/tribe-client\necho \"\" > /etc/tribe-client/elasticsearch.yml\nchown -R elasticsearch /etc/tribe-client\n```\n\nThen edit  `/etc/tribe/elasticsearch.yml` and specify a `path.conf` for each tribe cluster, eg:\n\n```\n# arbitrary config\ntransport.tcp.port: 9301\nhttp.port: 9201\nnetwork.host: 0.0.0.0\npath.data: /var/lib/elasticsearch/\npath.logs: /var/log/elasticsearch/\n\ntribe:\n    kibana:\n        path.conf: /etc/tribe-client  ### ADD THIS LINE\n        cluster.name: logstash-kibana\n        discovery.zen.ping.multicast.enabled: false\n        discovery.zen.ping.unicast.hosts: [\"127.0.0.1\"]\n    els:\n        path.conf: /etc/tribe-client  ### ADD THIS LINE\n        cluster.name: logstash-data\n        discovery.zen.ping.multicast.enabled: false\n        discovery.zen.ping.unicast.hosts: [\"10.128.69.48\", \"10.128.75.237\"]\n```\n\nThen start elasticsearch as:\n\n```\n./bin/elasticsearch --path.conf /etc/tribe\n```\n\nThe tribe node will use `/etc/tribe/` as its config directory.  Then the tribe node starts a node client for each cluster, and will use `/etc/tribe-client` as its config directory, but `/etc/tribe-client/elasticsearch.yml` is empty, so no settings will be loaded.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158107977","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-158107977","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":158107977,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODEwNzk3Nw==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2015-11-19T16:24:43Z","updated_at":"2015-11-19T23:57:58Z","author_association":"MEMBER","body":"Workaround above works, the only caveat is that depending on where the additional empty configuration file is located, we might not have the permissions to read from it. I think it should work if we simply add an empty configuration file under the tribe node config and point right to it, not only specifying its parent directory but the complete path that includes the filename:\n\n```\ntribe.t1.path.conf: /path/to/config/tribe.yml\ntribe.t2.path.conf: /path/to/config/tribe.yml\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158134081","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-158134081","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":158134081,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODEzNDA4MQ==","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"created_at":"2015-11-19T17:48:42Z","updated_at":"2015-11-19T17:48:42Z","author_association":"MEMBER","body":"Ran into this last night when attempting to set up a tribe node on 2.0.  This will also affect users who attempt to set a custom transport.tcp.port for the tribe node.  In this case, setting a custom transport.tcp.port for the tribe node causes a misleading `BindException[Address already in use];` exception when the port specified is not actually already in use.\n\n```\ncluster.name: elasticsearch_2_0_0_tribe_cluster\nnetwork.host: 127.0.0.1\ntransport.tcp.port: 11111\nnode.name: tribe_cluster_node1\ntribe:\n  t1:\n    cluster.name: elasticsearch_2_0_0_cluster1\n  t2:\n    cluster.name: elasticsearch_2_0_0_cluster2\n```\n\nSettings for the 2 clusters:\n\n```\ncluster.name: elasticsearch_2_0_0_cluster2\nnetwork.host: 127.0.0.1\ntransport.tcp.port: 9301\nhttp.port: 9201\nnode.name: cluster2_node1\n```\n\nand \n\n```\ncluster.name: elasticsearch_2_0_0_cluster1\nnetwork.host: 127.0.0.1\ntransport.tcp.port: 9300\nhttp.port: 9200\nnode.name: cluster1_node1\n```\n\nThe problem is that the tribe node will not start up as long as I have the transport.tcp.port: 11111 in place.  If I don't set a custom transport port for the tribe node, it starts up fine and can connect with the 2 clusters.\n\nThe following is the error that shows up when I attempt to set transport.tcp.port for the tribe node.  Note that prior to starting the tribe node, I used lsof to confirm that there's no process on the machine using port 11111 (and it doesn't matter what port I set it to, as long as transport.tcp.port is set for the tribe node, it will throw the same bind exception).\n\n```\n[2015-11-19 01:09:12,816][DEBUG][discovery.zen.elect      ] [tribe_cluster_node1/t1] using minimum_master_nodes [-1]\n\n[2015-11-19 01:09:12,816][DEBUG][discovery.zen.ping.unicast] [tribe_cluster_node1/t1] using initial hosts [127.0.0.1, [::1]], with concurrent_connects [10]\n\n[2015-11-19 01:09:12,817][DEBUG][discovery.zen            ] [tribe_cluster_node1/t1] using ping.timeout [3s], join.timeout [1m], master_election.filter_client [true], master_election.filter_data [false]\n\n[2015-11-19 01:09:12,817][DEBUG][discovery.zen.fd         ] [tribe_cluster_node1/t1] [master] uses ping_interval [1s], ping_timeout [30s], ping_retries [3]\n\n[2015-11-19 01:09:12,817][DEBUG][discovery.zen.fd         ] [tribe_cluster_node1/t1] [node  ] uses ping_interval [1s], ping_timeout [30s], ping_retries [3]\n\n[2015-11-19 01:09:12,820][DEBUG][script                   ] [tribe_cluster_node1/t1] using script cache with max_size [100], expire [null]\n\n[2015-11-19 01:09:12,853][DEBUG][cluster.routing.allocation.decider] [tribe_cluster_node1/t1] using [cluster.routing.allocation.allow_rebalance] with [indices_all_active]\n\n[2015-11-19 01:09:12,853][DEBUG][cluster.routing.allocation.decider] [tribe_cluster_node1/t1] using [cluster_concurrent_rebalance] with [2]\n\n[2015-11-19 01:09:12,854][DEBUG][cluster.routing.allocation.decider] [tribe_cluster_node1/t1] using node_concurrent_recoveries [2], node_initial_primaries_recoveries [4]\n\n[2015-11-19 01:09:12,855][DEBUG][gateway                  ] [tribe_cluster_node1/t1] using initial_shards [quorum]\n\n[2015-11-19 01:09:12,885][DEBUG][indices.recovery         ] [tribe_cluster_node1/t1] using max_bytes_per_sec[40mb], concurrent_streams [3], file_chunk_size [512kb], translog_size [512kb], translog_ops [1000], and compress [true]\n\n[2015-11-19 01:09:12,886][DEBUG][indices.store            ] [tribe_cluster_node1/t1] using indices.store.throttle.type [NONE], with index.store.throttle.max_bytes_per_sec [10gb]\n\n[2015-11-19 01:09:12,886][DEBUG][indices.memory           ] [tribe_cluster_node1/t1] using indexing buffer size [99mb], with indices.memory.min_shard_index_buffer_size [4mb], indices.memory.max_shard_index_buffer_size [512mb], indices.memory.shard_inactive_time [5m], indices.memory.interval [30s]\n\n[2015-11-19 01:09:12,887][DEBUG][indices.cache.query      ] [tribe_cluster_node1/t1] using [node] query cache with size [10%], actual_size [99mb], max filter count [1000]\n\n[2015-11-19 01:09:12,887][DEBUG][indices.fielddata.cache  ] [tribe_cluster_node1/t1] using size [-1] [-1b], expire [null]\n\n[2015-11-19 01:09:12,897][INFO ][node                     ] [tribe_cluster_node1/t1] initialized\n\n[2015-11-19 01:09:12,906][INFO ][node                     ] [tribe_cluster_node1] initialized\n\n[2015-11-19 01:09:12,907][INFO ][node                     ] [tribe_cluster_node1] starting ...\n\n[2015-11-19 01:09:12,924][DEBUG][netty.channel.socket.nio.SelectorUtil] Using select timeout of 500\n\n[2015-11-19 01:09:12,924][DEBUG][netty.channel.socket.nio.SelectorUtil] Epoll-bug workaround enabled = false\n\n[2015-11-19 01:09:12,947][DEBUG][transport.netty          ] [tribe_cluster_node1] using profile[default], worker_count[8], port[11111], bind_host[null], publish_host[null], compress[false], connect_timeout[30s], connections_per_node[2/3/6/1/1], receive_predictor[512kb->512kb]\n\n[2015-11-19 01:09:12,957][DEBUG][transport.netty          ] [tribe_cluster_node1] binding server bootstrap to: 127.0.0.1\n\n[2015-11-19 01:09:12,985][DEBUG][transport.netty          ] [tribe_cluster_node1] Bound profile [default] to address {127.0.0.1:11111}\n\n[2015-11-19 01:09:12,986][INFO ][transport                ] [tribe_cluster_node1] publish_address {127.0.0.1:11111}, bound_addresses {127.0.0.1:11111}\n\n[2015-11-19 01:09:12,993][DEBUG][discovery.local          ] [tribe_cluster_node1] Connected to cluster [Cluster [elasticsearch_2_0_0_tribe_cluster]]\n\n[2015-11-19 01:09:12,996][INFO ][discovery                ] [tribe_cluster_node1] elasticsearch_2_0_0_tribe_cluster/baK4hDMwRiaKGS5D8ivYng\n\n[2015-11-19 01:09:12,996][WARN ][discovery                ] [tribe_cluster_node1] waited for 0s and no initial state was set by the discovery\n\n[2015-11-19 01:09:12,996][DEBUG][gateway                  ] [tribe_cluster_node1] can't wait on start for (possibly) reading state from gateway, will do it asynchronously\n\n[2015-11-19 01:09:13,010][DEBUG][http.netty               ] [tribe_cluster_node1] Bound http to address {127.0.0.1:22222}\n\n[2015-11-19 01:09:13,011][INFO ][http                     ] [tribe_cluster_node1] publish_address {127.0.0.1:22222}, bound_addresses {127.0.0.1:22222}\n\n[2015-11-19 01:09:13,011][INFO ][node                     ] [tribe_cluster_node1/t2] starting ...\n\n[2015-11-19 01:09:13,016][DEBUG][transport.netty          ] [tribe_cluster_node1/t2] using profile[default], worker_count[8], port[11111], bind_host[null], publish_host[null], compress[false], connect_timeout[30s], connections_per_node[2/3/6/1/1], receive_predictor[512kb->512kb]\n\n[2015-11-19 01:09:13,022][DEBUG][transport.netty          ] [tribe_cluster_node1/t2] binding server bootstrap to: 127.0.0.1\n\n[2015-11-19 01:09:13,039][INFO ][node                     ] [tribe_cluster_node1/t2] stopping ...\n\n[2015-11-19 01:09:13,041][INFO ][node                     ] [tribe_cluster_node1/t2] stopped\n\n[2015-11-19 01:09:13,042][INFO ][node                     ] [tribe_cluster_node1/t2] closing ...\n\n[2015-11-19 01:09:13,048][INFO ][node                     ] [tribe_cluster_node1/t2] closed\n\n[2015-11-19 01:09:13,048][INFO ][node                     ] [tribe_cluster_node1/t1] closing ...\n\n[2015-11-19 01:09:13,052][INFO ][node                     ] [tribe_cluster_node1/t1] closed\n\nException in thread \"main\" BindTransportException[Failed to bind to [11111]]; nested: ChannelException[Failed to bind to: /127.0.0.1:11111]; nested: BindException[Address already in use];\n\nLikely root cause: java.net.BindException: Address already in use\n\nat sun.nio.ch.Net.bind0(Native Method)\n\nat sun.nio.ch.Net.bind(Net.java:444)\n\nat sun.nio.ch.Net.bind(Net.java:436)\n\nat sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:214)\n\nat sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:74)\n\nat org.jboss.netty.channel.socket.nio.NioServerBoss$RegisterTask.run(NioServerBoss.java:193)\n\nat org.jboss.netty.channel.socket.nio.AbstractNioSelector.processTaskQueue(AbstractNioSelector.java:391)\n\nat org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:315)\n\nat org.jboss.netty.channel.socket.nio.NioServerBoss.run(NioServerBoss.java:42)\n\nat org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\n\nat org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)\n\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\nat java.lang.Thread.run(Thread.java:745)\n\nRefer to the log for complete error details.\n\n[2015-11-19 01:09:13,058][INFO ][node                     ] [tribe_cluster_node1] stopping ...\n\n[2015-11-19 01:09:13,064][INFO ][node                     ] [tribe_cluster_node1] stopped\n\n[2015-11-19 01:09:13,064][INFO ][node                     ] [tribe_cluster_node1] closing ...\n\n[2015-11-19 01:09:13,066][INFO ][node                     ] [tribe_cluster_node1] closed\n```\n\nNote that I cannot reproduce this on 1.7.2.  On 1.7.2, I can set up a custom transport.tcp.port for the tribe node and it will start up fine.  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158231737","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-158231737","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":158231737,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODIzMTczNw==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2015-11-19T23:21:47Z","updated_at":"2015-11-19T23:21:47Z","author_association":"MEMBER","body":"@ppf2 this happens because the tribe node process will start three nodes, the first one will get the configured port, and the second will try to get the same one as it reads from the same configuration file. The workaround provided by Clint above should work till we fix this properly.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158235829","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-158235829","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":158235829,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODIzNTgyOQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-11-19T23:44:40Z","updated_at":"2015-11-19T23:44:40Z","author_association":"MEMBER","body":"@javanna I am going to explore having the tribe node have its own subclass of Node which can customize this single behavior (how to get the node's settings). I don't think we should add back this general purpose flag as we need to keep the tons of ways Nodes can be configured to a minimum.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158238947","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-158238947","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":158238947,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODIzODk0Nw==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2015-11-20T00:03:33Z","updated_at":"2015-11-20T00:03:33Z","author_association":"MEMBER","body":"@rjernst thanks that sounds good to me. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158238954","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-158238954","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":158238954,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODIzODk1NA==","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"created_at":"2015-11-20T00:03:35Z","updated_at":"2015-11-20T00:03:35Z","author_association":"MEMBER","body":"Confirmed that the workaround works to prevent the BindTransportException error, thx!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158242498","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-158242498","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":158242498,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODI0MjQ5OA==","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"created_at":"2015-11-20T00:27:10Z","updated_at":"2015-11-20T00:27:10Z","author_association":"MEMBER","body":"@rjernst Do we have a sense of whether the fix will make it to the upcoming 2.1 release? Or will it likely be after 2.1 (i.e. use the workaround until a later 2.x release)?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158248522","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-158248522","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":158248522,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODI0ODUyMg==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-11-20T01:10:11Z","updated_at":"2015-11-20T01:10:11Z","author_association":"MEMBER","body":"@ppf2 Definitely after 2.1. I would not want to destabilize 2.1 with a refactoring like this. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158248822","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-158248822","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":158248822,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODI0ODgyMg==","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"created_at":"2015-11-20T01:12:15Z","updated_at":"2015-11-20T01:12:15Z","author_association":"MEMBER","body":"@rjernst sounds good, thx!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/161229225","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-161229225","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":161229225,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTIyOTIyNQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-12-02T09:12:57Z","updated_at":"2015-12-02T09:12:57Z","author_association":"CONTRIBUTOR","body":"This requires some fairly extensive changes, so we will target this for 2.2.  In the meantime, we should document the workaround in the 2.1 docs.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162757384","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-162757384","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":162757384,"node_id":"MDEyOklzc3VlQ29tbWVudDE2Mjc1NzM4NA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-12-08T04:22:34Z","updated_at":"2015-12-08T04:22:34Z","author_association":"MEMBER","body":"I opened a PR to fix this here: #15300.\n\nNote that I was able to do the fix simply enough that I think it will be ok to backport to 2.1.x\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/163207391","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-163207391","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":163207391,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MzIwNzM5MQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-12-09T12:15:45Z","updated_at":"2015-12-09T12:15:45Z","author_association":"CONTRIBUTOR","body":"thanks @rjernst \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/163465900","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-163465900","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":163465900,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MzQ2NTkwMA==","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"created_at":"2015-12-10T02:26:47Z","updated_at":"2015-12-10T02:26:47Z","author_association":"MEMBER","body":"Thanks @rjernst !\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/164200558","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-164200558","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":164200558,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NDIwMDU1OA==","user":{"login":"lb425","id":2752044,"node_id":"MDQ6VXNlcjI3NTIwNDQ=","avatar_url":"https://avatars3.githubusercontent.com/u/2752044?v=4","gravatar_id":"","url":"https://api.github.com/users/lb425","html_url":"https://github.com/lb425","followers_url":"https://api.github.com/users/lb425/followers","following_url":"https://api.github.com/users/lb425/following{/other_user}","gists_url":"https://api.github.com/users/lb425/gists{/gist_id}","starred_url":"https://api.github.com/users/lb425/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lb425/subscriptions","organizations_url":"https://api.github.com/users/lb425/orgs","repos_url":"https://api.github.com/users/lb425/repos","events_url":"https://api.github.com/users/lb425/events{/privacy}","received_events_url":"https://api.github.com/users/lb425/received_events","type":"User","site_admin":false},"created_at":"2015-12-12T23:02:06Z","updated_at":"2015-12-13T01:37:13Z","author_association":"NONE","body":"I'm late to the party but thought this might be useful for anyone coming across this. I found that the dummy config file isn't needed to work around the issue. Instead for creating a new directory (/etc/tribe-client in the example) path.conf can reference the current configuration directory.\n\nUsing the above example where the config directory was /etc/tribe\n\n# arbitrary config\n\ntransport.tcp.port: 9301\nhttp.port: 9201\nnetwork.host: 0.0.0.0\npath.data: /var/lib/elasticsearch/\npath.logs: /var/log/elasticsearch/\n\ntribe:\n    kibana:\n        path.conf: /etc/tribe  #\n        cluster.name: logstash-kibana\n        discovery.zen.ping.multicast.enabled: false\n        discovery.zen.ping.unicast.hosts: [\"127.0.0.1\"]\n    els:\n        path.conf: /etc/tribe  #\n        cluster.name: logstash-data\n        discovery.zen.ping.multicast.enabled: false\n        discovery.zen.ping.unicast.hosts: [\"10.128.69.48\", \"10.128.75.237\"]\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/166465839","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-166465839","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":166465839,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NjQ2NTgzOQ==","user":{"login":"kt97679","id":3466350,"node_id":"MDQ6VXNlcjM0NjYzNTA=","avatar_url":"https://avatars3.githubusercontent.com/u/3466350?v=4","gravatar_id":"","url":"https://api.github.com/users/kt97679","html_url":"https://github.com/kt97679","followers_url":"https://api.github.com/users/kt97679/followers","following_url":"https://api.github.com/users/kt97679/following{/other_user}","gists_url":"https://api.github.com/users/kt97679/gists{/gist_id}","starred_url":"https://api.github.com/users/kt97679/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kt97679/subscriptions","organizations_url":"https://api.github.com/users/kt97679/orgs","repos_url":"https://api.github.com/users/kt97679/repos","events_url":"https://api.github.com/users/kt97679/events{/privacy}","received_events_url":"https://api.github.com/users/kt97679/received_events","type":"User","site_admin":false},"created_at":"2015-12-22T00:25:55Z","updated_at":"2015-12-22T04:35:25Z","author_association":"NONE","body":"Is this fixed in 2.1.1?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/167976115","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-167976115","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":167976115,"node_id":"MDEyOklzc3VlQ29tbWVudDE2Nzk3NjExNQ==","user":{"login":"thn-dev","id":421116,"node_id":"MDQ6VXNlcjQyMTExNg==","avatar_url":"https://avatars0.githubusercontent.com/u/421116?v=4","gravatar_id":"","url":"https://api.github.com/users/thn-dev","html_url":"https://github.com/thn-dev","followers_url":"https://api.github.com/users/thn-dev/followers","following_url":"https://api.github.com/users/thn-dev/following{/other_user}","gists_url":"https://api.github.com/users/thn-dev/gists{/gist_id}","starred_url":"https://api.github.com/users/thn-dev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thn-dev/subscriptions","organizations_url":"https://api.github.com/users/thn-dev/orgs","repos_url":"https://api.github.com/users/thn-dev/repos","events_url":"https://api.github.com/users/thn-dev/events{/privacy}","received_events_url":"https://api.github.com/users/thn-dev/received_events","type":"User","site_admin":false},"created_at":"2015-12-30T10:50:28Z","updated_at":"2015-12-30T10:50:28Z","author_association":"NONE","body":"With v2.1.1, I still have to specify path.conf and I used the valid path as mentioned above by lb425. In my case, I also had to specify path.plugins for similar reason. Otherwise, I kept getting AccessControlException error.\n\nI did not have to specify both path.conf and path.plugins when I was using v1.7.3\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/168202787","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-168202787","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":168202787,"node_id":"MDEyOklzc3VlQ29tbWVudDE2ODIwMjc4Nw==","user":{"login":"thn-dev","id":421116,"node_id":"MDQ6VXNlcjQyMTExNg==","avatar_url":"https://avatars0.githubusercontent.com/u/421116?v=4","gravatar_id":"","url":"https://api.github.com/users/thn-dev","html_url":"https://github.com/thn-dev","followers_url":"https://api.github.com/users/thn-dev/followers","following_url":"https://api.github.com/users/thn-dev/following{/other_user}","gists_url":"https://api.github.com/users/thn-dev/gists{/gist_id}","starred_url":"https://api.github.com/users/thn-dev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thn-dev/subscriptions","organizations_url":"https://api.github.com/users/thn-dev/orgs","repos_url":"https://api.github.com/users/thn-dev/repos","events_url":"https://api.github.com/users/thn-dev/events{/privacy}","received_events_url":"https://api.github.com/users/thn-dev/received_events","type":"User","site_admin":false},"created_at":"2015-12-31T14:20:17Z","updated_at":"2015-12-31T14:20:17Z","author_association":"NONE","body":"WRT ES v2.1.1, I have to do the following to get the tribe node talking to two different clusters: cluster A and cluster B\n\n**# tribe node's configuration (elasticsearch.yml)**\n**network.host:** 0.0.0.0\n**transport.tcp.port:** 9300\n**http.port:** 9200\n**http.enabled:** true\n\ntribe.**t1**.cluster.name: **<cluster A>**\ntribe.**t1**.discovery.zen.ping.unicast.hosts: **<cluster A's master node>**\ntribe.**t1**.discovery.zen.ping.multicast.enabled: false\ntribe.**t1**.path.conf: **<valid path/to/conf>**\ntribe.**t1**.path.plugins: **<valid path/to/plugin>**\ntribe.**t1**.network.bind_host: **0.0.0.0**\ntribe.**t1**.network.publish_host: **<tribe node's IP>**\ntribe.**t1**.transport.tcp.port: **<optional but different from tribe node port above>**\n\n_repeat the same block but replace \"t1\" to \"t2\" for cluster B and fill in proper info related to cluster B but keep the tribe.t2.network.\\* the same with different tribe.t2.transport.tcp.port value from t1 if specified_\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/168236136","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-168236136","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":168236136,"node_id":"MDEyOklzc3VlQ29tbWVudDE2ODIzNjEzNg==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-12-31T19:12:18Z","updated_at":"2015-12-31T19:12:18Z","author_association":"MEMBER","body":"@thn-dev Setting network and path settings for tribe nodes (the t1, t2 here) should not be necessary. Can you share your full elasticsearch.yml for both the tribe node, as well as cluster A and cluster B?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/168270016","html_url":"https://github.com/elastic/elasticsearch/issues/14573#issuecomment-168270016","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14573","id":168270016,"node_id":"MDEyOklzc3VlQ29tbWVudDE2ODI3MDAxNg==","user":{"login":"thn-dev","id":421116,"node_id":"MDQ6VXNlcjQyMTExNg==","avatar_url":"https://avatars0.githubusercontent.com/u/421116?v=4","gravatar_id":"","url":"https://api.github.com/users/thn-dev","html_url":"https://github.com/thn-dev","followers_url":"https://api.github.com/users/thn-dev/followers","following_url":"https://api.github.com/users/thn-dev/following{/other_user}","gists_url":"https://api.github.com/users/thn-dev/gists{/gist_id}","starred_url":"https://api.github.com/users/thn-dev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thn-dev/subscriptions","organizations_url":"https://api.github.com/users/thn-dev/orgs","repos_url":"https://api.github.com/users/thn-dev/repos","events_url":"https://api.github.com/users/thn-dev/events{/privacy}","received_events_url":"https://api.github.com/users/thn-dev/received_events","type":"User","site_admin":false},"created_at":"2016-01-01T00:56:30Z","updated_at":"2016-01-01T00:56:30Z","author_association":"NONE","body":"@rjernst I did not have to do network and path settings when I was using v1.7.3. It was a surprise to me when v2.1.1 kept giving me AccessControlException error message. Initially, it pointed to the \"plugins\" location, after I set it, it complained about the \"config\" location. If I did not do the network settings for t1 and t2, it was not able to connect to cluster A and/or B. This part is weird too. Again, I did not have to do this in v1.7.3.\n\nAll ES instances are installed using .rpm file, not .zip file.\n\nMy settings for tribe node is above with additional parameters\n- cluster.name\n- discovery.zen.ping.multicast.enabled: false\n\nCluster A and B, each has 1 master node, 3 data nodes with the following parameters' settings (I don't have all information with me at the moment)\n- cluster.name: <cluster A or B>\n- network.host: 0.0.0.0\n- transport.tcp.port: 9300\n- http.port: 9200 (master)\n- http.enabled: true (master)\n- discovery.zen.ping.multicast.enabled: false\n- discovery.zen.ping.unicast.hosts: <master node's IP>\n- path.conf: /data/es/config\n- path.plugins: /data/es/plugins\n- path.data: /data/es\n","performed_via_github_app":null}]