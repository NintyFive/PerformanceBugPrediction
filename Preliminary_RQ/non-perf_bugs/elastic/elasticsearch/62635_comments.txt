[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/694896738","html_url":"https://github.com/elastic/elasticsearch/issues/62635#issuecomment-694896738","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62635","id":694896738,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDg5NjczOA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-09-18T14:19:42Z","updated_at":"2020-09-18T14:19:42Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra (:Core/Infra/Packaging)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/695073283","html_url":"https://github.com/elastic/elasticsearch/issues/62635#issuecomment-695073283","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62635","id":695073283,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NTA3MzI4Mw==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2020-09-18T20:34:17Z","updated_at":"2020-09-18T20:34:17Z","author_association":"MEMBER","body":"It seems this failure is now happening on centos 6 and oel 6, which we no longer have support for in master. Here is another failure, again related to glibc:\r\n\r\nhttps://gradle-enterprise.elastic.co/s/pigavidhsr324/console-log?task=:qa:verify-version-constants:v7.9.2%23integTest \r\n\r\nThis looks related to our upgrade of the bundled jdk to java 15, which appears to now rely on glibc 2.14. That version does not appear to be available in these legacy environments.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/695991790","html_url":"https://github.com/elastic/elasticsearch/issues/62635#issuecomment-695991790","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62635","id":695991790,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NTk5MTc5MA==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2020-09-21T09:03:35Z","updated_at":"2020-09-21T09:03:35Z","author_association":"CONTRIBUTOR","body":"CentOS/RHEL/Oracle Linux 6 ship with glibc 2.12.\r\n\r\nSo it looks like either 7.x will have to stick with Java 14 or else we'll have to drop support for CentOS/RHEL/Oracle Linux 6.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/696043170","html_url":"https://github.com/elastic/elasticsearch/issues/62635#issuecomment-696043170","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62635","id":696043170,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjA0MzE3MA==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2020-09-21T10:58:46Z","updated_at":"2020-09-21T10:58:46Z","author_association":"CONTRIBUTOR","body":"It looks like the problem also affects 7.9.2.\r\n\r\nThese two 7.9 builds failed on CentOS/RHEL/Oracle Linux 6 due to it not having glibc 2.14:\r\n\r\n1. https://gradle-enterprise.elastic.co/s/klw27zjadxz3k\r\n2. https://gradle-enterprise.elastic.co/s/qhbjyrsd7tcr2\r\n\r\nBoth had:\r\n\r\n```\r\nRuntime JDK Version   : 1.8 (Oracle JDK)\r\nRuntime java.home     : /var/lib/jenkins/.java/oracle-8u241-linux\r\nGradle JDK Version    : 14 (OpenJDK)\r\nGradle java.home      : /var/lib/jenkins/.java/openjdk-14.0.2+12-linux\r\n```\r\n\r\nThe error is:\r\n\r\n```\r\nsudo service elasticsearch start] stderr = [/usr/share/elasticsearch/jdk/bin/java: /lib64/libc.so.6: version `GLIBC_2.14' not found (required by /usr/share/elasticsearch/jdk/bin/../lib/libjli.so)\r\n```\r\n\r\nSo that shows that even when a CI run is supposed to be testing a specific JDK some of the tools that are shipped with Elasticsearch that are invoked by the tests are still using the bundled JDK.\r\n\r\nBut also it shows that the upgrade to Java 15 was not just done on the master and 7.x branches, but also on the 7.9 branch.  7.9.2 BC1 does not work on CentOS/RHEL/Oracle Linux 6 as a result.  I have confirmed this by downloading 7.9.2 BC1:\r\n\r\n```\r\n$ bin/java -version\r\nbin/java: /lib64/libc.so.6: version `GLIBC_2.14' not found (required by /home/dave/792/elasticsearch-7.9.2/jdk/bin/../lib/libjli.so)\r\n```\r\n\r\nThe JDK in the GA 7.9.1 build works fine:\r\n\r\n```\r\n[dave@linux jdk]$ bin/java -version\r\nopenjdk version \"14.0.1\" 2020-04-14\r\nOpenJDK Runtime Environment AdoptOpenJDK (build 14.0.1+7)\r\nOpenJDK 64-Bit Server VM AdoptOpenJDK (build 14.0.1+7, mixed mode, sharing)\r\n```\r\n\r\nSo, this requires urgent consideration about what to do for 7.9.2 - whether it's OK to document that if you want to run on certain supported platforms you cannot use the bundled JDK, or whether the bundled JDK needs to work on every supported platform.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/696143581","html_url":"https://github.com/elastic/elasticsearch/issues/62635#issuecomment-696143581","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62635","id":696143581,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjE0MzU4MQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2020-09-21T14:16:37Z","updated_at":"2020-09-21T14:16:37Z","author_association":"MEMBER","body":"Relates elastic/elasticsearch#62709","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/708056973","html_url":"https://github.com/elastic/elasticsearch/issues/62635#issuecomment-708056973","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62635","id":708056973,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODA1Njk3Mw==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2020-10-13T23:07:05Z","updated_at":"2020-10-13T23:07:05Z","author_association":"MEMBER","body":"This has been fixed by switching to Oracle JDK 15.","performed_via_github_app":null}]