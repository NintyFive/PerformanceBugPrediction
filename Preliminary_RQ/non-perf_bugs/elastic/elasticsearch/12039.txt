{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/12039","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12039/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12039/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12039/events","html_url":"https://github.com/elastic/elasticsearch/issues/12039","id":93121148,"node_id":"MDU6SXNzdWU5MzEyMTE0OA==","number":12039,"title":"Calculation of ES CPU Usage(in %) goes beyond 100%","user":{"login":"shruthisantosh","id":11938154,"node_id":"MDQ6VXNlcjExOTM4MTU0","avatar_url":"https://avatars2.githubusercontent.com/u/11938154?v=4","gravatar_id":"","url":"https://api.github.com/users/shruthisantosh","html_url":"https://github.com/shruthisantosh","followers_url":"https://api.github.com/users/shruthisantosh/followers","following_url":"https://api.github.com/users/shruthisantosh/following{/other_user}","gists_url":"https://api.github.com/users/shruthisantosh/gists{/gist_id}","starred_url":"https://api.github.com/users/shruthisantosh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shruthisantosh/subscriptions","organizations_url":"https://api.github.com/users/shruthisantosh/orgs","repos_url":"https://api.github.com/users/shruthisantosh/repos","events_url":"https://api.github.com/users/shruthisantosh/events{/privacy}","received_events_url":"https://api.github.com/users/shruthisantosh/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-07-05T15:37:15Z","updated_at":"2015-07-05T17:29:18Z","closed_at":"2015-07-05T17:29:17Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\n\nWe have 3 Master, 2 Client and 19 Data nodes in our ES cluster. \nEach of the data nodes have 8 VCPUs . We are using the following Rest API URL to get the values of nodes.process.cpu.percent(A) and nodes.os.cpu.total_cores(B),\nhttp://localhost:9200/_cluster/stats?human&pretty\nWe are trying to calculate ES CPU Usage in percentage\n\n using the formula, ((A / (100 *B)) \\* 100 . This computation is giving us values which go over 100%. \n\nWe observed that the value of (B) as 8 since there are 8 VCPUs in each of the nodes and due to this  the value of (A) should be within 800. But we observed that the value of (A) goes beyond 800 which is causing the percentage to shoot up over 100.\n\n![esstats](https://cloud.githubusercontent.com/assets/11938154/8512277/9a903a00-2359-11e5-8a24-0fa17278c2f9.jpg)\n\nPlease can you let us know if our calculations are correct and if so then is the value of (A) from the REST API having some issue.\n\nThanks \nShruthi  \n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}