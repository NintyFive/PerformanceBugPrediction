[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148366146","html_url":"https://github.com/elastic/elasticsearch/issues/14118#issuecomment-148366146","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14118","id":148366146,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODM2NjE0Ng==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-10-15T12:01:06Z","updated_at":"2015-10-15T12:01:06Z","author_association":"CONTRIBUTOR","body":"Hi @zackehh \n\nYour call to `setTimeout()` is wiping out the source set by `setSource()`.  Move `setSource()` to the end and it will work.  This annoying behaviour will be fixed by a big search refactoring that is going into 3.0.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148367092","html_url":"https://github.com/elastic/elasticsearch/issues/14118#issuecomment-148367092","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14118","id":148367092,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODM2NzA5Mg==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2015-10-15T12:05:05Z","updated_at":"2015-10-15T12:05:27Z","author_association":"MEMBER","body":"I am not sure inverting the order of the `setSource` and `setTimeout` helps. The main problem here is that you are specifying the search request as a string. After that you set the timeout, which is under the hood creating a new SearchSourceBuilder which wins against the one provided as a string. You should rather use the SearchSourceBuilder only, to both  set the timeout and provide the request, and avoid providing the request as a string, which is also something that will go away in 3.0.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148417270","html_url":"https://github.com/elastic/elasticsearch/issues/14118#issuecomment-148417270","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14118","id":148417270,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODQxNzI3MA==","user":{"login":"whitfin","id":5376378,"node_id":"MDQ6VXNlcjUzNzYzNzg=","avatar_url":"https://avatars0.githubusercontent.com/u/5376378?v=4","gravatar_id":"","url":"https://api.github.com/users/whitfin","html_url":"https://github.com/whitfin","followers_url":"https://api.github.com/users/whitfin/followers","following_url":"https://api.github.com/users/whitfin/following{/other_user}","gists_url":"https://api.github.com/users/whitfin/gists{/gist_id}","starred_url":"https://api.github.com/users/whitfin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whitfin/subscriptions","organizations_url":"https://api.github.com/users/whitfin/orgs","repos_url":"https://api.github.com/users/whitfin/repos","events_url":"https://api.github.com/users/whitfin/events{/privacy}","received_events_url":"https://api.github.com/users/whitfin/received_events","type":"User","site_admin":false},"created_at":"2015-10-15T15:11:15Z","updated_at":"2015-10-15T15:11:15Z","author_association":"NONE","body":"Hey @clintongormley thanks for the reply - I'll try this out today. \n\n@javanna unfortunately I can't do that at the moment because everything we have focuses on building the Strings, so it'd be a nightmare to strip out just for this. I'll get back to you on whether the inverting works.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148420218","html_url":"https://github.com/elastic/elasticsearch/issues/14118#issuecomment-148420218","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14118","id":148420218,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODQyMDIxOA==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2015-10-15T15:22:01Z","updated_at":"2015-10-15T15:22:01Z","author_association":"MEMBER","body":"I think what might work instead then, as a temporary solution, is using the `setExtraSource` for your string request. That one won't be overridden I believe. Keep in mind that all this is going away in 3.0 though.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148427477","html_url":"https://github.com/elastic/elasticsearch/issues/14118#issuecomment-148427477","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14118","id":148427477,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODQyNzQ3Nw==","user":{"login":"whitfin","id":5376378,"node_id":"MDQ6VXNlcjUzNzYzNzg=","avatar_url":"https://avatars0.githubusercontent.com/u/5376378?v=4","gravatar_id":"","url":"https://api.github.com/users/whitfin","html_url":"https://github.com/whitfin","followers_url":"https://api.github.com/users/whitfin/followers","following_url":"https://api.github.com/users/whitfin/following{/other_user}","gists_url":"https://api.github.com/users/whitfin/gists{/gist_id}","starred_url":"https://api.github.com/users/whitfin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whitfin/subscriptions","organizations_url":"https://api.github.com/users/whitfin/orgs","repos_url":"https://api.github.com/users/whitfin/repos","events_url":"https://api.github.com/users/whitfin/events{/privacy}","received_events_url":"https://api.github.com/users/whitfin/received_events","type":"User","site_admin":false},"created_at":"2015-10-15T15:41:16Z","updated_at":"2015-10-15T15:52:34Z","author_association":"NONE","body":"Ok @clintongormley reversing the order didn't help, but @javanna's tip of `setExtraSource` did work.\n\nWhat exactly is the different between `setSource` and `setExtraSource`? I've never seen the latter used anywhere. \n\nI'll keep in mind that this is going in 3.0 (that's pretty far off though, right?), so I'll set it in motion to move to not using Strings. Thanks for your help guys.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148449052","html_url":"https://github.com/elastic/elasticsearch/issues/14118#issuecomment-148449052","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14118","id":148449052,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODQ0OTA1Mg==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2015-10-15T16:38:33Z","updated_at":"2015-10-15T16:38:33Z","author_association":"MEMBER","body":"Glad you found a solution! extra source is something that we use internally for stuff that can come from both the request body and query_string parameters (e.g. the `query`, `size` etc.). It effectively allows to add additional parameters without touching the original source, handy given that the original source might be a bytes array that would require parsing to be modified.\n\nThe reason why this is all going away is that we are moving all the parsing to the coordinating node, while at the moment (2.x too) we still stream json between the different nodes and parse it multiple times, on each data node. At that point once a request is parsed to java objects it is fully represented as a java object (no bytes array or strings, so no parsing needed anymore).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148463122","html_url":"https://github.com/elastic/elasticsearch/issues/14118#issuecomment-148463122","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14118","id":148463122,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODQ2MzEyMg==","user":{"login":"whitfin","id":5376378,"node_id":"MDQ6VXNlcjUzNzYzNzg=","avatar_url":"https://avatars0.githubusercontent.com/u/5376378?v=4","gravatar_id":"","url":"https://api.github.com/users/whitfin","html_url":"https://github.com/whitfin","followers_url":"https://api.github.com/users/whitfin/followers","following_url":"https://api.github.com/users/whitfin/following{/other_user}","gists_url":"https://api.github.com/users/whitfin/gists{/gist_id}","starred_url":"https://api.github.com/users/whitfin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whitfin/subscriptions","organizations_url":"https://api.github.com/users/whitfin/orgs","repos_url":"https://api.github.com/users/whitfin/repos","events_url":"https://api.github.com/users/whitfin/events{/privacy}","received_events_url":"https://api.github.com/users/whitfin/received_events","type":"User","site_admin":false},"created_at":"2015-10-15T17:18:34Z","updated_at":"2015-10-15T17:18:34Z","author_association":"NONE","body":"@javanna sweet! Since it's internal, I guess I shouldn't abuse it too much? \n\nThank you for the extra info, and for your help with getting me going :)\n","performed_via_github_app":null}]