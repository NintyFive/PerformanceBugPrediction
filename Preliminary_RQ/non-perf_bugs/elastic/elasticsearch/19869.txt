{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/19869","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19869/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19869/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19869/events","html_url":"https://github.com/elastic/elasticsearch/issues/19869","id":169958063,"node_id":"MDU6SXNzdWUxNjk5NTgwNjM=","number":19869,"title":"`index.version.created` values causing Issues with `elasticsearch-image` plugin","user":{"login":"daviddyball","id":1235844,"node_id":"MDQ6VXNlcjEyMzU4NDQ=","avatar_url":"https://avatars2.githubusercontent.com/u/1235844?v=4","gravatar_id":"","url":"https://api.github.com/users/daviddyball","html_url":"https://github.com/daviddyball","followers_url":"https://api.github.com/users/daviddyball/followers","following_url":"https://api.github.com/users/daviddyball/following{/other_user}","gists_url":"https://api.github.com/users/daviddyball/gists{/gist_id}","starred_url":"https://api.github.com/users/daviddyball/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daviddyball/subscriptions","organizations_url":"https://api.github.com/users/daviddyball/orgs","repos_url":"https://api.github.com/users/daviddyball/repos","events_url":"https://api.github.com/users/daviddyball/events{/privacy}","received_events_url":"https://api.github.com/users/daviddyball/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2016-08-08T15:54:23Z","updated_at":"2016-08-11T18:12:01Z","closed_at":"2016-08-11T18:12:00Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**: `2.3.3`\n\n**Plugins installed**: [`elasticsearch-image-2.3.3`, `mobz/elasticsearch-head`,`cloud-aws`]\n\n**JVM version**: The version shipped in the official docker container (I think it's `OpenJDK-1.8`)\n\n**OS version**: Debian `8.5`\n\n**Description of the problem including expected versus actual behavior**:\n\nSetting any value between `1000000` and `1999999` for `index.version.created` value works fine with `elasticsearch-image` v`2.3.3`, but if I set it to the correct version signature for Elasticsearch 2.3.3 (`2030399`) all the available `image` type mappings disappear and trying to create a mapping that uses type `image` returns an error.:\n\nI've also raised a ticket against `https://github.com/kiwionly/elasticsearch-image` [here](https://github.com/kiwionly/elasticsearch-image/issues/17)\n\n**Steps to reproduce**:\n1. Build the `elasticsearch-image` plugin from https://github.com/kiwionly/elasticsearch-image\n   \n   ```\n   gradle plugin\n   ```\n2. Load a docker instance of `2.3.3`\n   \n   ```\n   docker run -ti --rm -p 9200 --name elasticsearch elasticsearch:2.3.3\n   ```\n3. Load the `elasticsearch-image` plugin\n   \n   ```\n   docker cp elasticsearch-image.2.3.3.zip elasticsearch:/tmp/elasticsearch-image.2.3.3.zip\n   docker exec -ti /usr/share/elasticsearch/bin/plugin install file:///tmp/elasticsearch-image.2.3.3.zip\n   ```\n4. Create a new index with `2030399` as the `index.version.created`\n   `\n   curl -XPUT 'localhost:9200/my_index' -d '{\n     \"settings\": {\n       \"number_of_shards\": 1,\n       \"number_of_replicas\": 0,\n       \"index.version.created\": 2030399\n     }\n   }'\n   `\n5. Try to put a new mapping that uses the `image` field to receive the error (see bellow)\n   \n   ```\n   curl -XPUT 'localhost:9200/my_index/my_doc/_mapping' -d '\n   {\n       \"my_doc\": {\n           \"properties\": {\n               \"my_image\": {\n                   \"type\": \"image\",\n                   \"feature\": {\n                       \"JCD\": {\n                           \"hash\": [\"BIT_SAMPLING\", \"LSH\"]\n                       }\n                   }\n               }\n           }\n       }\n   }'\n   ```\n\n**Provide logs (if relevant)**:\n\n```\nMapperParsingException[Failed to parse mapping [product]: \n    Mapping definition for [raw_image] has unsupported parameters:\n        [feature : {JCD={hash=[BIT_SAMPLING]}]];\n```\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}