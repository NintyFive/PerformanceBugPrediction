[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/191807048","html_url":"https://github.com/elastic/elasticsearch/issues/16929#issuecomment-191807048","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16929","id":191807048,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTgwNzA0OA==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2016-03-03T15:12:27Z","updated_at":"2016-03-03T15:12:27Z","author_association":"MEMBER","body":"The scroll is not cleaned up automatically, it will be removed when the timeout is reached. So `clear_scroll` is not mandatory but it can help to call it explicitly. \n@jpountz  any reason why the scroll is not cleared automatically (I tested on 2.x only) ? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/191814693","html_url":"https://github.com/elastic/elasticsearch/issues/16929#issuecomment-191814693","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16929","id":191814693,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTgxNDY5Mw==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2016-03-03T15:28:45Z","updated_at":"2016-03-03T15:28:45Z","author_association":"CONTRIBUTOR","body":"@jimferenczi I think it makes it more user-friendly: it is easier to remember that the scroll should be always cleared than that the scroll should only be cleared if not all documents were retrieved?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/191840293","html_url":"https://github.com/elastic/elasticsearch/issues/16929#issuecomment-191840293","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16929","id":191840293,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTg0MDI5Mw==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-03-03T16:31:21Z","updated_at":"2016-03-03T16:31:21Z","author_association":"CONTRIBUTOR","body":"The rule reindex and I follow is \"if the last request returned a scroll ID you need to clear it\". If the last request didn't return one we wouldn't clear it. I suspect this is pretty common.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/191841016","html_url":"https://github.com/elastic/elasticsearch/issues/16929#issuecomment-191841016","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16929","id":191841016,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTg0MTAxNg==","user":{"login":"HonzaKral","id":32132,"node_id":"MDQ6VXNlcjMyMTMy","avatar_url":"https://avatars0.githubusercontent.com/u/32132?v=4","gravatar_id":"","url":"https://api.github.com/users/HonzaKral","html_url":"https://github.com/HonzaKral","followers_url":"https://api.github.com/users/HonzaKral/followers","following_url":"https://api.github.com/users/HonzaKral/following{/other_user}","gists_url":"https://api.github.com/users/HonzaKral/gists{/gist_id}","starred_url":"https://api.github.com/users/HonzaKral/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HonzaKral/subscriptions","organizations_url":"https://api.github.com/users/HonzaKral/orgs","repos_url":"https://api.github.com/users/HonzaKral/repos","events_url":"https://api.github.com/users/HonzaKral/events{/privacy}","received_events_url":"https://api.github.com/users/HonzaKral/received_events","type":"User","site_admin":false},"created_at":"2016-03-03T16:32:54Z","updated_at":"2016-03-03T16:32:54Z","author_association":"MEMBER","body":"Well, the purpose of the scroll is to iterate over all the documents so, if all goes well, it should be exhausted in majority of cases. Making it so it is cleared automatically is then definitely more user friendly and should conserve resources.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/191910887","html_url":"https://github.com/elastic/elasticsearch/issues/16929#issuecomment-191910887","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16929","id":191910887,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTkxMDg4Nw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-03-03T18:50:55Z","updated_at":"2016-03-03T19:01:33Z","author_association":"MEMBER","body":"> I think it makes it more user-friendly: it is easier to remember that the scroll should be always cleared than that the scroll should only be cleared if not all documents were retrieved?\n\nI like the way that @jpountz is looking at it here. To add, closing automatically upon completion of the scroll would be in opposition to other resources that require explicit close whether or not you exhaust them (file handles, result sets in JDBC, etc.). This is just something that developers should be use to and I do not think that we should go against convention here.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/191914343","html_url":"https://github.com/elastic/elasticsearch/issues/16929#issuecomment-191914343","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16929","id":191914343,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTkxNDM0Mw==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2016-03-03T19:00:29Z","updated_at":"2016-03-03T19:00:29Z","author_association":"MEMBER","body":"Thinking about it from a developers perspective, it is also easier and less error prone to always clear. Having a clear in something like a finally block is simpler than a user having to check \"did i exhaust? if not, also send this clear\".\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/191917423","html_url":"https://github.com/elastic/elasticsearch/issues/16929#issuecomment-191917423","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16929","id":191917423,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTkxNzQyMw==","user":{"login":"HonzaKral","id":32132,"node_id":"MDQ6VXNlcjMyMTMy","avatar_url":"https://avatars0.githubusercontent.com/u/32132?v=4","gravatar_id":"","url":"https://api.github.com/users/HonzaKral","html_url":"https://github.com/HonzaKral","followers_url":"https://api.github.com/users/HonzaKral/followers","following_url":"https://api.github.com/users/HonzaKral/following{/other_user}","gists_url":"https://api.github.com/users/HonzaKral/gists{/gist_id}","starred_url":"https://api.github.com/users/HonzaKral/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HonzaKral/subscriptions","organizations_url":"https://api.github.com/users/HonzaKral/orgs","repos_url":"https://api.github.com/users/HonzaKral/repos","events_url":"https://api.github.com/users/HonzaKral/events{/privacy}","received_events_url":"https://api.github.com/users/HonzaKral/received_events","type":"User","site_admin":false},"created_at":"2016-03-03T19:06:30Z","updated_at":"2016-03-03T19:06:30Z","author_association":"MEMBER","body":"That might be so for Java and for interacting with a database over a low-level API, where you could also argue it is very common to prepare statements/queries etc.\n\nVast majority of elasticsearch users interact with it using the http api where the conventions are dramatically different and very seldom do you care about server-side resources, assuming the server is a black box. Not to mention that many languages people use with elasticsearch don't have a super easy try/finally construct like you are used to.\n\nI see no reason not to clear automatically assuming we have the information we have reached the end of a scroll, we can still recommend it as a best practice to always clear, but it seems a bit weird to not do something that helps the users just to force them to do the right thing.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/192413484","html_url":"https://github.com/elastic/elasticsearch/issues/16929#issuecomment-192413484","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16929","id":192413484,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MjQxMzQ4NA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-03-04T19:03:15Z","updated_at":"2016-03-04T19:03:15Z","author_association":"CONTRIBUTOR","body":"> The scroll is not cleaned up automatically, it will be removed when the timeout is reached. So clear_scroll is not mandatory but it can help to call it explicitly. \n\nActually, this is not quite correct.  Scrolls ARE cleared automatically when `search_type=scan`, they are not cleared automatically for non scanning searches including `sort:_doc` (the replacement for scanning).\n\nI think that all scrolls should be automatically expired once they are exhausted.  From a client perspective, why should I need to send an extra request over the network after I've finished retrieving all my docs, and wait for the response?  It just slows things down for me.\n\nClients using scroll helpers (available in some/most? of the clients) don't need to think about whether they should clear the scroll or not - the scroll helper should handle these things automatically.  And if not using a helper, all they need to do is to always send the clear scroll request and ignore 404 responses.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/237788832","html_url":"https://github.com/elastic/elasticsearch/issues/16929#issuecomment-237788832","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16929","id":237788832,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNzc4ODgzMg==","user":{"login":"kjendrzyca","id":7491025,"node_id":"MDQ6VXNlcjc0OTEwMjU=","avatar_url":"https://avatars0.githubusercontent.com/u/7491025?v=4","gravatar_id":"","url":"https://api.github.com/users/kjendrzyca","html_url":"https://github.com/kjendrzyca","followers_url":"https://api.github.com/users/kjendrzyca/followers","following_url":"https://api.github.com/users/kjendrzyca/following{/other_user}","gists_url":"https://api.github.com/users/kjendrzyca/gists{/gist_id}","starred_url":"https://api.github.com/users/kjendrzyca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kjendrzyca/subscriptions","organizations_url":"https://api.github.com/users/kjendrzyca/orgs","repos_url":"https://api.github.com/users/kjendrzyca/repos","events_url":"https://api.github.com/users/kjendrzyca/events{/privacy}","received_events_url":"https://api.github.com/users/kjendrzyca/received_events","type":"User","site_admin":false},"created_at":"2016-08-05T08:35:05Z","updated_at":"2016-08-05T08:35:22Z","author_association":"NONE","body":"> Scrolls ARE cleared automatically when search_type=scan\n\nI think this info should be added to the `scroll` documentation. This issue is the only place where I could find the infromation why I'm getting `Not Found` error when trying to close the scoll.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/383884631","html_url":"https://github.com/elastic/elasticsearch/issues/16929#issuecomment-383884631","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16929","id":383884631,"node_id":"MDEyOklzc3VlQ29tbWVudDM4Mzg4NDYzMQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-04-24T10:34:12Z","updated_at":"2018-04-24T10:34:12Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search-aggs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/468803216","html_url":"https://github.com/elastic/elasticsearch/issues/16929#issuecomment-468803216","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16929","id":468803216,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODgwMzIxNg==","user":{"login":"debadair","id":362578,"node_id":"MDQ6VXNlcjM2MjU3OA==","avatar_url":"https://avatars1.githubusercontent.com/u/362578?v=4","gravatar_id":"","url":"https://api.github.com/users/debadair","html_url":"https://github.com/debadair","followers_url":"https://api.github.com/users/debadair/followers","following_url":"https://api.github.com/users/debadair/following{/other_user}","gists_url":"https://api.github.com/users/debadair/gists{/gist_id}","starred_url":"https://api.github.com/users/debadair/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/debadair/subscriptions","organizations_url":"https://api.github.com/users/debadair/orgs","repos_url":"https://api.github.com/users/debadair/repos","events_url":"https://api.github.com/users/debadair/events{/privacy}","received_events_url":"https://api.github.com/users/debadair/received_events","type":"User","site_admin":false},"created_at":"2019-03-01T20:36:20Z","updated_at":"2019-03-01T20:36:20Z","author_association":"CONTRIBUTOR","body":"The scan search_type is obsolete. ","performed_via_github_app":null}]