[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/606382446","html_url":"https://github.com/elastic/elasticsearch/issues/54464#issuecomment-606382446","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54464","id":606382446,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjM4MjQ0Ng==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2020-03-31T03:47:46Z","updated_at":"2020-03-31T03:47:46Z","author_association":"MEMBER","body":"There are no guarantees if the kind that you are looking for. At the highest level, the shards in a single snapshot request are snapshotted concurrently. The primary shards of the indices in a snapshot request could be allocated on different nodes. The nodes will not receive and act on the requests to start snapshots for the shards they are responsible for in any well-defined order, nor do the snapshots finish in a well-defined order as there are many factors here such as the size of the incremental data to be transferred, and the behavior of remote systems where a snapshot is being made too.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/616744186","html_url":"https://github.com/elastic/elasticsearch/issues/54464#issuecomment-616744186","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54464","id":616744186,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNjc0NDE4Ng==","user":{"login":"shikhar","id":74267,"node_id":"MDQ6VXNlcjc0MjY3","avatar_url":"https://avatars1.githubusercontent.com/u/74267?v=4","gravatar_id":"","url":"https://api.github.com/users/shikhar","html_url":"https://github.com/shikhar","followers_url":"https://api.github.com/users/shikhar/followers","following_url":"https://api.github.com/users/shikhar/following{/other_user}","gists_url":"https://api.github.com/users/shikhar/gists{/gist_id}","starred_url":"https://api.github.com/users/shikhar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shikhar/subscriptions","organizations_url":"https://api.github.com/users/shikhar/orgs","repos_url":"https://api.github.com/users/shikhar/repos","events_url":"https://api.github.com/users/shikhar/events{/privacy}","received_events_url":"https://api.github.com/users/shikhar/received_events","type":"User","site_admin":false},"created_at":"2020-04-20T18:53:53Z","updated_at":"2020-04-20T19:01:00Z","author_association":"CONTRIBUTOR","body":"Thanks @jasontedor, what about custom index metadata (https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-meta-field.html)? Is this state captured before or after the snapshot?\r\n\r\nConsidering moving to that instead of sidecar indices, but still begs the question of whether we can rely on the snapshotting order there, to ensure indexing activity picks up at the right place.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/618136822","html_url":"https://github.com/elastic/elasticsearch/issues/54464#issuecomment-618136822","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54464","id":618136822,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODEzNjgyMg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2020-04-23T02:17:16Z","updated_at":"2020-04-23T02:17:16Z","author_association":"MEMBER","body":"@shikhar It's captured when finalizing the snapshot.","performed_via_github_app":null}]