[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/269474684","html_url":"https://github.com/elastic/elasticsearch/issues/22347#issuecomment-269474684","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22347","id":269474684,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQ3NDY4NA==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2016-12-28T13:07:57Z","updated_at":"2016-12-28T13:07:57Z","author_association":"CONTRIBUTOR","body":"> java.lang.IllegalArgumentException: automaton has cycles\r\nat org.apache.lucene.util.automaton.FiniteStringsIterator.next(FiniteStringsIterator.java:121) ~[lucene-core-6.3.0.jar:6.3.0 a66a44513ee8191e25b477372094bfa846450316 - shalin - 2016-11-02 19:47:11]\r\n\r\nCan you provide the mapping for the corresponding index? (i.e. output of `curl localhost:9200/data/_mapping/paper?pretty`)\r\n\r\n/cc: @mikemccand","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/269569704","html_url":"https://github.com/elastic/elasticsearch/issues/22347#issuecomment-269569704","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22347","id":269569704,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTU2OTcwNA==","user":{"login":"lovelgw","id":24769812,"node_id":"MDQ6VXNlcjI0NzY5ODEy","avatar_url":"https://avatars3.githubusercontent.com/u/24769812?v=4","gravatar_id":"","url":"https://api.github.com/users/lovelgw","html_url":"https://github.com/lovelgw","followers_url":"https://api.github.com/users/lovelgw/followers","following_url":"https://api.github.com/users/lovelgw/following{/other_user}","gists_url":"https://api.github.com/users/lovelgw/gists{/gist_id}","starred_url":"https://api.github.com/users/lovelgw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lovelgw/subscriptions","organizations_url":"https://api.github.com/users/lovelgw/orgs","repos_url":"https://api.github.com/users/lovelgw/repos","events_url":"https://api.github.com/users/lovelgw/events{/privacy}","received_events_url":"https://api.github.com/users/lovelgw/received_events","type":"User","site_admin":false},"created_at":"2016-12-29T01:47:13Z","updated_at":"2016-12-29T01:47:13Z","author_association":"NONE","body":"{\r\n  \"data\": {\r\n    \"mappings\": {\r\n      \"_default_\": {\r\n        \"properties\": {\r\n          \"bCategory\": {\r\n            \"type\": \"integer\",\r\n            \"store\": true\r\n          },\r\n          \"body\": {\r\n            \"type\": \"text\",\r\n            \"analyzer\": \"koreanIndex\"\r\n          },\r\n          \"category\": {\r\n            \"type\": \"keyword\",\r\n            \"store\": true\r\n          },\r\n          \"changeDate\": {\r\n            \"type\": \"date\",\r\n            \"format\": \"epoch_second\"\r\n          },\r\n          \"contents\": {\r\n            \"type\": \"text\",\r\n            \"analyzer\": \"koreanIndex\"\r\n          },\r\n          \"courseCode\": {\r\n            \"type\": \"integer\",\r\n            \"store\": true\r\n          },\r\n          \"discountPercent\": {\r\n            \"type\": \"integer\",\r\n            \"store\": true,\r\n            \"null_value\": 0\r\n          },\r\n          \"discountPrice\": {\r\n            \"type\": \"integer\",\r\n            \"store\": true,\r\n            \"null_value\": 0\r\n          },\r\n          \"docCategorySeq\": {\r\n            \"type\": \"integer\",\r\n            \"store\": true\r\n          },\r\n          \"docSeq\": {\r\n            \"type\": \"integer\",\r\n            \"store\": true\r\n          },\r\n          \"ext\": {\r\n            \"type\": \"keyword\",\r\n            \"store\": true\r\n          },\r\n          \"grade\": {\r\n            \"type\": \"integer\",\r\n            \"store\": true\r\n          },\r\n          \"knouCourseName\": {\r\n            \"type\": \"keyword\",\r\n            \"store\": true\r\n          },\r\n          \"knouCourseSeq\": {\r\n            \"type\": \"integer\",\r\n            \"store\": true\r\n          },\r\n          \"knouDepartmentName\": {\r\n            \"type\": \"keyword\",\r\n            \"store\": true\r\n          },\r\n          \"knouDepartmentSeq\": {\r\n            \"type\": \"integer\",\r\n            \"store\": true\r\n          },\r\n          \"knouExaminationSeq\": {\r\n            \"type\": \"integer\",\r\n            \"store\": true\r\n          },\r\n          \"knouReportTypeName\": {\r\n            \"type\": \"keyword\",\r\n            \"store\": true\r\n          },\r\n          \"knouReportTypeSeq\": {\r\n            \"type\": \"integer\",\r\n            \"store\": true\r\n          },\r\n          \"lessonName\": {\r\n            \"type\": \"keyword\",\r\n            \"store\": true\r\n          },\r\n          \"matchKeyword\": {\r\n            \"type\": \"text\",\r\n            \"analyzer\": \"koreanIndex\"\r\n          },\r\n          \"memberId\": {\r\n            \"type\": \"keyword\",\r\n            \"store\": true\r\n          },\r\n          \"memberSeq\": {\r\n            \"type\": \"integer\",\r\n            \"store\": true\r\n          },\r\n          \"originalCategory\": {\r\n            \"type\": \"keyword\",\r\n            \"store\": true\r\n          },\r\n          \"page\": {\r\n            \"type\": \"integer\",\r\n            \"store\": true\r\n          },\r\n          \"price\": {\r\n            \"type\": \"integer\",\r\n            \"store\": true\r\n          },\r\n          \"ratingPoint\": {\r\n            \"type\": \"integer\",\r\n            \"store\": true\r\n          },\r\n          \"reference\": {\r\n            \"type\": \"text\",\r\n            \"analyzer\": \"koreanIndex\"\r\n          },\r\n          \"regDate\": {\r\n            \"type\": \"date\",\r\n            \"format\": \"epoch_second\"\r\n          },\r\n          \"sCategory\": {\r\n            \"type\": \"integer\",\r\n            \"store\": true\r\n          },\r\n          \"saleEventEndDate\": {\r\n            \"type\": \"date\",\r\n            \"format\": \"epoch_second\"\r\n          },\r\n          \"saleEventStartDate\": {\r\n            \"type\": \"date\",\r\n            \"format\": \"epoch_second\"\r\n          },\r\n          \"scrapCount\": {\r\n            \"type\": \"integer\",\r\n            \"store\": true\r\n          },\r\n          \"searchKeyword\": {\r\n            \"type\": \"completion\",\r\n            \"analyzer\": \"koreanIndex\",\r\n            \"preserve_separators\": true,\r\n            \"preserve_position_increments\": true,\r\n            \"max_input_length\": 50\r\n          },\r\n          \"tag\": {\r\n            \"type\": \"text\",\r\n            \"store\": true,\r\n            \"analyzer\": \"koreanIndex\"\r\n          },\r\n          \"term\": {\r\n            \"type\": \"integer\",\r\n            \"store\": true\r\n          },\r\n          \"title\": {\r\n            \"type\": \"text\",\r\n            \"analyzer\": \"koreanIndex\"\r\n          },\r\n          \"titleNoSpace\": {\r\n            \"type\": \"text\"\r\n          },\r\n          \"uploadDate\": {\r\n            \"type\": \"date\",\r\n            \"format\": \"epoch_second\"\r\n          },\r\n          \"useMobile\": {\r\n            \"type\": \"keyword\",\r\n            \"store\": true\r\n          },\r\n          \"viewCount\": {\r\n            \"type\": \"integer\",\r\n            \"store\": true\r\n          },\r\n          \"year\": {\r\n            \"type\": \"integer\",\r\n            \"store\": true\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/269898502","html_url":"https://github.com/elastic/elasticsearch/issues/22347#issuecomment-269898502","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22347","id":269898502,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTg5ODUwMg==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2017-01-01T10:43:02Z","updated_at":"2017-01-01T10:43:02Z","author_association":"CONTRIBUTOR","body":"Wow this is a curious exception ... can you post your `koreanIndex` analysis chain?  With that, and with the string you are trying to index into the `searchKeyword` field (which I see above), hopefully I can make a failing Lucene test case.\r\n\r\nWhat's happening is the completion analyzer needs to turn the incoming tokens into an automaton and then enumerate all paths through it, but somehow a cyclic automaton is being created, which should not be possible from any token stream.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/269926325","html_url":"https://github.com/elastic/elasticsearch/issues/22347#issuecomment-269926325","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22347","id":269926325,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTkyNjMyNQ==","user":{"login":"lovelgw","id":24769812,"node_id":"MDQ6VXNlcjI0NzY5ODEy","avatar_url":"https://avatars3.githubusercontent.com/u/24769812?v=4","gravatar_id":"","url":"https://api.github.com/users/lovelgw","html_url":"https://github.com/lovelgw","followers_url":"https://api.github.com/users/lovelgw/followers","following_url":"https://api.github.com/users/lovelgw/following{/other_user}","gists_url":"https://api.github.com/users/lovelgw/gists{/gist_id}","starred_url":"https://api.github.com/users/lovelgw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lovelgw/subscriptions","organizations_url":"https://api.github.com/users/lovelgw/orgs","repos_url":"https://api.github.com/users/lovelgw/repos","events_url":"https://api.github.com/users/lovelgw/events{/privacy}","received_events_url":"https://api.github.com/users/lovelgw/received_events","type":"User","site_admin":false},"created_at":"2017-01-02T00:21:22Z","updated_at":"2017-01-02T00:21:22Z","author_association":"NONE","body":"koreanIndex analyzer result \r\n\r\n**title field :  \"제 1 부 몸짓 언어와 기호학 : 한국인의 언어 예절과 신체 언어 (1 . Body Language and Semiotics : Korean Language - etiquettes and Body - language)\"\r\n{\r\n  \"tokens\" : [\r\n    {\r\n      \"token\" : \"제\",\r\n      \"start_offset\" : 0,\r\n      \"end_offset\" : 1,\r\n      \"type\" : \"XPN\",\r\n      \"position\" : 0\r\n    },\r\n    {\r\n      \"token\" : \"1\",\r\n      \"start_offset\" : 2,\r\n      \"end_offset\" : 3,\r\n      \"type\" : \"SN\",\r\n      \"position\" : 1\r\n    },\r\n    {\r\n      \"token\" : \"부\",\r\n      \"start_offset\" : 4,\r\n      \"end_offset\" : 5,\r\n      \"type\" : \"NNBC\",\r\n      \"position\" : 2\r\n    },\r\n    {\r\n      \"token\" : \"몸짓\",\r\n      \"start_offset\" : 6,\r\n      \"end_offset\" : 8,\r\n      \"type\" : \"COMPOUND\",\r\n      \"position\" : 3\r\n    },\r\n    {\r\n      \"token\" : \"언어와\",\r\n      \"start_offset\" : 9,\r\n      \"end_offset\" : 12,\r\n      \"type\" : \"EOJEOL\",\r\n      \"position\" : 4\r\n    },\r\n    {\r\n      \"token\" : \"언어\",\r\n      \"start_offset\" : 9,\r\n      \"end_offset\" : 11,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 4\r\n    },\r\n    {\r\n      \"token\" : \"기호\",\r\n      \"start_offset\" : 13,\r\n      \"end_offset\" : 15,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 5\r\n    },\r\n    {\r\n      \"token\" : \"기호학\",\r\n      \"start_offset\" : 13,\r\n      \"end_offset\" : 16,\r\n      \"type\" : \"COMPOUND\",\r\n      \"position\" : 5\r\n    },\r\n    {\r\n      \"token\" : \"학\",\r\n      \"start_offset\" : 15,\r\n      \"end_offset\" : 16,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 6\r\n    },\r\n    {\r\n      \"token\" : \"한국\",\r\n      \"start_offset\" : 19,\r\n      \"end_offset\" : 21,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 7\r\n    },\r\n    {\r\n      \"token\" : \"한국인의\",\r\n      \"start_offset\" : 19,\r\n      \"end_offset\" : 23,\r\n      \"type\" : \"EOJEOL\",\r\n      \"position\" : 7\r\n    },\r\n    {\r\n      \"token\" : \"한국인\",\r\n      \"start_offset\" : 19,\r\n      \"end_offset\" : 22,\r\n      \"type\" : \"COMPOUND\",\r\n      \"position\" : 7\r\n    },\r\n    {\r\n      \"token\" : \"인\",\r\n      \"start_offset\" : 21,\r\n      \"end_offset\" : 22,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 8\r\n    },\r\n    {\r\n      \"token\" : \"언어\",\r\n      \"start_offset\" : 24,\r\n      \"end_offset\" : 26,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 9\r\n    },\r\n    {\r\n      \"token\" : \"예절과\",\r\n      \"start_offset\" : 27,\r\n      \"end_offset\" : 30,\r\n      \"type\" : \"EOJEOL\",\r\n      \"position\" : 10\r\n    },\r\n    {\r\n      \"token\" : \"예절\",\r\n      \"start_offset\" : 27,\r\n      \"end_offset\" : 29,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 10\r\n    },\r\n    {\r\n      \"token\" : \"신체\",\r\n      \"start_offset\" : 31,\r\n      \"end_offset\" : 33,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 11\r\n    },\r\n    {\r\n      \"token\" : \"언어\",\r\n      \"start_offset\" : 34,\r\n      \"end_offset\" : 36,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 12\r\n    },\r\n    {\r\n      \"token\" : \"1\",\r\n      \"start_offset\" : 38,\r\n      \"end_offset\" : 39,\r\n      \"type\" : \"SN\",\r\n      \"position\" : 13\r\n    },\r\n    {\r\n      \"token\" : \"body\",\r\n      \"start_offset\" : 42,\r\n      \"end_offset\" : 46,\r\n      \"type\" : \"SL\",\r\n      \"position\" : 14\r\n    },\r\n    {\r\n      \"token\" : \"language\",\r\n      \"start_offset\" : 47,\r\n      \"end_offset\" : 55,\r\n      \"type\" : \"SL\",\r\n      \"position\" : 15\r\n    },\r\n    {\r\n      \"token\" : \"and\",\r\n      \"start_offset\" : 56,\r\n      \"end_offset\" : 59,\r\n      \"type\" : \"SL\",\r\n      \"position\" : 16\r\n    },\r\n    {\r\n      \"token\" : \"semiotics\",\r\n      \"start_offset\" : 60,\r\n      \"end_offset\" : 69,\r\n      \"type\" : \"SL\",\r\n      \"position\" : 17\r\n    },\r\n    {\r\n      \"token\" : \"korean\",\r\n      \"start_offset\" : 72,\r\n      \"end_offset\" : 78,\r\n      \"type\" : \"SL\",\r\n      \"position\" : 18\r\n    },\r\n    {\r\n      \"token\" : \"language\",\r\n      \"start_offset\" : 79,\r\n      \"end_offset\" : 87,\r\n      \"type\" : \"SL\",\r\n      \"position\" : 19\r\n    },\r\n    {\r\n      \"token\" : \"etiquettes\",\r\n      \"start_offset\" : 90,\r\n      \"end_offset\" : 100,\r\n      \"type\" : \"SL\",\r\n      \"position\" : 20\r\n    },\r\n    {\r\n      \"token\" : \"and\",\r\n      \"start_offset\" : 101,\r\n      \"end_offset\" : 104,\r\n      \"type\" : \"SL\",\r\n      \"position\" : 21\r\n    },\r\n    {\r\n      \"token\" : \"body\",\r\n      \"start_offset\" : 105,\r\n      \"end_offset\" : 109,\r\n      \"type\" : \"SL\",\r\n      \"position\" : 22\r\n    },\r\n    {\r\n      \"token\" : \"language\",\r\n      \"start_offset\" : 112,\r\n      \"end_offset\" : 120,\r\n      \"type\" : \"SL\",\r\n      \"position\" : 23\r\n    }\r\n  ]\r\n}\r\n\r\n\r\ntitlenospace : \"제1부몸짓언어와기호학:한국인의언어예절과신체언어(1.BodyLanguageandSemiotics:KoreanLanguage-etiquettesandBody-language)\"\r\n{\r\n  \"tokens\" : [\r\n    {\r\n      \"token\" : \"제\",\r\n      \"start_offset\" : 0,\r\n      \"end_offset\" : 1,\r\n      \"type\" : \"XPN\",\r\n      \"position\" : 0\r\n    },\r\n    {\r\n      \"token\" : \"1\",\r\n      \"start_offset\" : 1,\r\n      \"end_offset\" : 2,\r\n      \"type\" : \"SN\",\r\n      \"position\" : 1\r\n    },\r\n    {\r\n      \"token\" : \"부\",\r\n      \"start_offset\" : 2,\r\n      \"end_offset\" : 3,\r\n      \"type\" : \"NNBC\",\r\n      \"position\" : 2\r\n    },\r\n    {\r\n      \"token\" : \"몸짓\",\r\n      \"start_offset\" : 3,\r\n      \"end_offset\" : 5,\r\n      \"type\" : \"COMPOUND\",\r\n      \"position\" : 3\r\n    },\r\n    {\r\n      \"token\" : \"언어와\",\r\n      \"start_offset\" : 5,\r\n      \"end_offset\" : 8,\r\n      \"type\" : \"EOJEOL\",\r\n      \"position\" : 4\r\n    },\r\n    {\r\n      \"token\" : \"언어\",\r\n      \"start_offset\" : 5,\r\n      \"end_offset\" : 7,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 4\r\n    },\r\n    {\r\n      \"token\" : \"기호\",\r\n      \"start_offset\" : 8,\r\n      \"end_offset\" : 10,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 5\r\n    },\r\n    {\r\n      \"token\" : \"기호학\",\r\n      \"start_offset\" : 8,\r\n      \"end_offset\" : 11,\r\n      \"type\" : \"COMPOUND\",\r\n      \"position\" : 5\r\n    },\r\n    {\r\n      \"token\" : \"학\",\r\n      \"start_offset\" : 10,\r\n      \"end_offset\" : 11,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 6\r\n    },\r\n    {\r\n      \"token\" : \"한국\",\r\n      \"start_offset\" : 12,\r\n      \"end_offset\" : 14,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 7\r\n    },\r\n    {\r\n      \"token\" : \"한국인의\",\r\n      \"start_offset\" : 12,\r\n      \"end_offset\" : 16,\r\n      \"type\" : \"EOJEOL\",\r\n      \"position\" : 7\r\n    },\r\n    {\r\n      \"token\" : \"한국인\",\r\n      \"start_offset\" : 12,\r\n      \"end_offset\" : 15,\r\n      \"type\" : \"COMPOUND\",\r\n      \"position\" : 7\r\n    },\r\n    {\r\n      \"token\" : \"인\",\r\n      \"start_offset\" : 14,\r\n      \"end_offset\" : 15,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 8\r\n    },\r\n    {\r\n      \"token\" : \"언어\",\r\n      \"start_offset\" : 16,\r\n      \"end_offset\" : 18,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 9\r\n    },\r\n    {\r\n      \"token\" : \"예절과\",\r\n      \"start_offset\" : 18,\r\n      \"end_offset\" : 21,\r\n      \"type\" : \"EOJEOL\",\r\n      \"position\" : 10\r\n    },\r\n    {\r\n      \"token\" : \"예절\",\r\n      \"start_offset\" : 18,\r\n      \"end_offset\" : 20,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 10\r\n    },\r\n    {\r\n      \"token\" : \"신체\",\r\n      \"start_offset\" : 21,\r\n      \"end_offset\" : 23,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 11\r\n    },\r\n    {\r\n      \"token\" : \"언어\",\r\n      \"start_offset\" : 23,\r\n      \"end_offset\" : 25,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 12\r\n    },\r\n    {\r\n      \"token\" : \"1\",\r\n      \"start_offset\" : 26,\r\n      \"end_offset\" : 27,\r\n      \"type\" : \"SN\",\r\n      \"position\" : 13\r\n    },\r\n    {\r\n      \"token\" : \"bodylanguageandsemiotics\",\r\n      \"start_offset\" : 28,\r\n      \"end_offset\" : 52,\r\n      \"type\" : \"SL\",\r\n      \"position\" : 14\r\n    },\r\n    {\r\n      \"token\" : \"koreanlanguage\",\r\n      \"start_offset\" : 53,\r\n      \"end_offset\" : 67,\r\n      \"type\" : \"SL\",\r\n      \"position\" : 15\r\n    },\r\n    {\r\n      \"token\" : \"etiquettesandbody\",\r\n      \"start_offset\" : 68,\r\n      \"end_offset\" : 85,\r\n      \"type\" : \"SL\",\r\n      \"position\" : 16\r\n    },\r\n    {\r\n      \"token\" : \"language\",\r\n      \"start_offset\" : 86,\r\n      \"end_offset\" : 94,\r\n      \"type\" : \"SL\",\r\n      \"position\" : 17\r\n    }\r\n  ]\r\n}\r\n\r\n\r\nbody :  \" 한국기호학회 기호학 연구 성광수(Kwang Su Sung),김성도(Sung Do Kim)\"\r\n{\r\n  \"tokens\" : [\r\n    {\r\n      \"token\" : \"한국\",\r\n      \"start_offset\" : 1,\r\n      \"end_offset\" : 3,\r\n      \"type\" : \"NNP\",\r\n      \"position\" : 0\r\n    },\r\n    {\r\n      \"token\" : \"기호\",\r\n      \"start_offset\" : 3,\r\n      \"end_offset\" : 5,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 1\r\n    },\r\n    {\r\n      \"token\" : \"학회\",\r\n      \"start_offset\" : 5,\r\n      \"end_offset\" : 7,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 2\r\n    },\r\n    {\r\n      \"token\" : \"기호\",\r\n      \"start_offset\" : 8,\r\n      \"end_offset\" : 10,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 3\r\n    },\r\n    {\r\n      \"token\" : \"기호학\",\r\n      \"start_offset\" : 8,\r\n      \"end_offset\" : 11,\r\n      \"type\" : \"COMPOUND\",\r\n      \"position\" : 3\r\n    },\r\n    {\r\n      \"token\" : \"학\",\r\n      \"start_offset\" : 10,\r\n      \"end_offset\" : 11,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 4\r\n    },\r\n    {\r\n      \"token\" : \"연구\",\r\n      \"start_offset\" : 12,\r\n      \"end_offset\" : 14,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 5\r\n    },\r\n    {\r\n      \"token\" : \"성광수\",\r\n      \"start_offset\" : 15,\r\n      \"end_offset\" : 18,\r\n      \"type\" : \"NNP\",\r\n      \"position\" : 6\r\n    },\r\n    {\r\n      \"token\" : \"kwang\",\r\n      \"start_offset\" : 19,\r\n      \"end_offset\" : 24,\r\n      \"type\" : \"SL\",\r\n      \"position\" : 7\r\n    },\r\n    {\r\n      \"token\" : \"su\",\r\n      \"start_offset\" : 25,\r\n      \"end_offset\" : 27,\r\n      \"type\" : \"SL\",\r\n      \"position\" : 8\r\n    },\r\n    {\r\n      \"token\" : \"sung\",\r\n      \"start_offset\" : 28,\r\n      \"end_offset\" : 32,\r\n      \"type\" : \"SL\",\r\n      \"position\" : 9\r\n    },\r\n    {\r\n      \"token\" : \"김성도\",\r\n      \"start_offset\" : 34,\r\n      \"end_offset\" : 37,\r\n      \"type\" : \"NNP\",\r\n      \"position\" : 10\r\n    },\r\n    {\r\n      \"token\" : \"sung\",\r\n      \"start_offset\" : 38,\r\n      \"end_offset\" : 42,\r\n      \"type\" : \"SL\",\r\n      \"position\" : 11\r\n    },\r\n    {\r\n      \"token\" : \"do\",\r\n      \"start_offset\" : 43,\r\n      \"end_offset\" : 45,\r\n      \"type\" : \"SL\",\r\n      \"position\" : 12\r\n    },\r\n    {\r\n      \"token\" : \"kim\",\r\n      \"start_offset\" : 46,\r\n      \"end_offset\" : 49,\r\n      \"type\" : \"SL\",\r\n      \"position\" : 13\r\n    }\r\n  ]\r\n}\r\n\r\n\r\nsearchKeyword[0] , matchKeyword[0] :  \"제 1 부 몸짓 언어와 기호학 : 한국인의 언어 예절과 신체 언어\"\r\n{\r\n  \"tokens\" : [\r\n    {\r\n      \"token\" : \"제\",\r\n      \"start_offset\" : 0,\r\n      \"end_offset\" : 1,\r\n      \"type\" : \"XPN\",\r\n      \"position\" : 0\r\n    },\r\n    {\r\n      \"token\" : \"1\",\r\n      \"start_offset\" : 2,\r\n      \"end_offset\" : 3,\r\n      \"type\" : \"SN\",\r\n      \"position\" : 1\r\n    },\r\n    {\r\n      \"token\" : \"부\",\r\n      \"start_offset\" : 4,\r\n      \"end_offset\" : 5,\r\n      \"type\" : \"NNBC\",\r\n      \"position\" : 2\r\n    },\r\n    {\r\n      \"token\" : \"몸짓\",\r\n      \"start_offset\" : 6,\r\n      \"end_offset\" : 8,\r\n      \"type\" : \"COMPOUND\",\r\n      \"position\" : 3\r\n    },\r\n    {\r\n      \"token\" : \"언어와\",\r\n      \"start_offset\" : 9,\r\n      \"end_offset\" : 12,\r\n      \"type\" : \"EOJEOL\",\r\n      \"position\" : 4\r\n    },\r\n    {\r\n      \"token\" : \"언어\",\r\n      \"start_offset\" : 9,\r\n      \"end_offset\" : 11,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 4\r\n    },\r\n    {\r\n      \"token\" : \"기호\",\r\n      \"start_offset\" : 13,\r\n      \"end_offset\" : 15,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 5\r\n    },\r\n    {\r\n      \"token\" : \"기호학\",\r\n      \"start_offset\" : 13,\r\n      \"end_offset\" : 16,\r\n      \"type\" : \"COMPOUND\",\r\n      \"position\" : 5\r\n    },\r\n    {\r\n      \"token\" : \"학\",\r\n      \"start_offset\" : 15,\r\n      \"end_offset\" : 16,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 6\r\n    },\r\n    {\r\n      \"token\" : \"한국\",\r\n      \"start_offset\" : 19,\r\n      \"end_offset\" : 21,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 7\r\n    },\r\n    {\r\n      \"token\" : \"한국인의\",\r\n      \"start_offset\" : 19,\r\n      \"end_offset\" : 23,\r\n      \"type\" : \"EOJEOL\",\r\n      \"position\" : 7\r\n    },\r\n    {\r\n      \"token\" : \"한국인\",\r\n      \"start_offset\" : 19,\r\n      \"end_offset\" : 22,\r\n      \"type\" : \"COMPOUND\",\r\n      \"position\" : 7\r\n    },\r\n    {\r\n      \"token\" : \"인\",\r\n      \"start_offset\" : 21,\r\n      \"end_offset\" : 22,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 8\r\n    },\r\n    {\r\n      \"token\" : \"언어\",\r\n      \"start_offset\" : 24,\r\n      \"end_offset\" : 26,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 9\r\n    },\r\n    {\r\n      \"token\" : \"예절과\",\r\n      \"start_offset\" : 27,\r\n      \"end_offset\" : 30,\r\n      \"type\" : \"EOJEOL\",\r\n      \"position\" : 10\r\n    },\r\n    {\r\n      \"token\" : \"예절\",\r\n      \"start_offset\" : 27,\r\n      \"end_offset\" : 29,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 10\r\n    },\r\n    {\r\n      \"token\" : \"신체\",\r\n      \"start_offset\" : 31,\r\n      \"end_offset\" : 33,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 11\r\n    },\r\n    {\r\n      \"token\" : \"언어\",\r\n      \"start_offset\" : 34,\r\n      \"end_offset\" : 36,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 12\r\n    }\r\n  ]\r\n}\r\n\r\n\r\ntag[0] : \"한국인\"\r\n{\r\n  \"tokens\" : [\r\n    {\r\n      \"token\" : \"한국\",\r\n      \"start_offset\" : 0,\r\n      \"end_offset\" : 2,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 0\r\n    },\r\n    {\r\n      \"token\" : \"한국인\",\r\n      \"start_offset\" : 0,\r\n      \"end_offset\" : 3,\r\n      \"type\" : \"COMPOUND\",\r\n      \"position\" : 0\r\n    },\r\n    {\r\n      \"token\" : \"인\",\r\n      \"start_offset\" : 2,\r\n      \"end_offset\" : 3,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 1\r\n    }\r\n  ]\r\n}\r\n\r\ntag[1] : \"언어예절\"\r\n{\r\n  \"tokens\" : [\r\n    {\r\n      \"token\" : \"언어\",\r\n      \"start_offset\" : 0,\r\n      \"end_offset\" : 2,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 0\r\n    },\r\n    {\r\n      \"token\" : \"예절\",\r\n      \"start_offset\" : 2,\r\n      \"end_offset\" : 4,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 1\r\n    }\r\n  ]\r\n}\r\n\r\ntag[2] : \"신체언어\"\r\n{\r\n  \"tokens\" : [\r\n    {\r\n      \"token\" : \"신체\",\r\n      \"start_offset\" : 0,\r\n      \"end_offset\" : 2,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 0\r\n    },\r\n    {\r\n      \"token\" : \"언어\",\r\n      \"start_offset\" : 2,\r\n      \"end_offset\" : 4,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 1\r\n    }\r\n  ]\r\n}\r\ntag[3] : \"언어와기\"\r\n{\r\n  \"tokens\" : [\r\n    {\r\n      \"token\" : \"언어와\",\r\n      \"start_offset\" : 0,\r\n      \"end_offset\" : 3,\r\n      \"type\" : \"EOJEOL\",\r\n      \"position\" : 0\r\n    },\r\n    {\r\n      \"token\" : \"언어\",\r\n      \"start_offset\" : 0,\r\n      \"end_offset\" : 2,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 0\r\n    },\r\n    {\r\n      \"token\" : \"기\",\r\n      \"start_offset\" : 3,\r\n      \"end_offset\" : 4,\r\n      \"type\" : \"E\",\r\n      \"position\" : 1\r\n    }\r\n  ]\r\n}\r\ntag[4] : \"부몸짓\"\r\n{\r\n  \"tokens\" : [\r\n    {\r\n      \"token\" : \"부몸짓\",\r\n      \"start_offset\" : 0,\r\n      \"end_offset\" : 3,\r\n      \"type\" : \"EOJEOL\",\r\n      \"position\" : 0\r\n    },\r\n    {\r\n      \"token\" : \"부\",\r\n      \"start_offset\" : 0,\r\n      \"end_offset\" : 1,\r\n      \"type\" : \"XPN\",\r\n      \"position\" : 0\r\n    },\r\n    {\r\n      \"token\" : \"몸짓\",\r\n      \"start_offset\" : 1,\r\n      \"end_offset\" : 3,\r\n      \"type\" : \"COMPOUND\",\r\n      \"position\" : 0\r\n    }\r\n  ]\r\n}\r\ntag[5] : \"호학한국\"\r\n{\r\n  \"tokens\" : [\r\n    {\r\n      \"token\" : \"호학\",\r\n      \"start_offset\" : 0,\r\n      \"end_offset\" : 2,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 0\r\n    },\r\n    {\r\n      \"token\" : \"한국\",\r\n      \"start_offset\" : 2,\r\n      \"end_offset\" : 4,\r\n      \"type\" : \"NNP\",\r\n      \"position\" : 1\r\n    }\r\n  ]\r\n}\r\n\r\ntag[6] : \"절과신체\"\r\n{\r\n  \"tokens\" : [\r\n    {\r\n      \"token\" : \"절과\",\r\n      \"start_offset\" : 0,\r\n      \"end_offset\" : 2,\r\n      \"type\" : \"EOJEOL\",\r\n      \"position\" : 0\r\n    },\r\n    {\r\n      \"token\" : \"절\",\r\n      \"start_offset\" : 0,\r\n      \"end_offset\" : 1,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 0\r\n    },\r\n    {\r\n      \"token\" : \"신체\",\r\n      \"start_offset\" : 2,\r\n      \"end_offset\" : 4,\r\n      \"type\" : \"NNG\",\r\n      \"position\" : 1\r\n    }\r\n  ]\r\n}**\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/270092343","html_url":"https://github.com/elastic/elasticsearch/issues/22347#issuecomment-270092343","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22347","id":270092343,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDA5MjM0Mw==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2017-01-03T11:06:01Z","updated_at":"2017-01-03T11:06:01Z","author_association":"CONTRIBUTOR","body":"Thank you @lovelgw but I need to know how you configured your `koreanIndex` analyzer so I can also create those tokens from the input string in a Lucene test case.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/270104012","html_url":"https://github.com/elastic/elasticsearch/issues/22347#issuecomment-270104012","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22347","id":270104012,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDEwNDAxMg==","user":{"login":"lovelgw","id":24769812,"node_id":"MDQ6VXNlcjI0NzY5ODEy","avatar_url":"https://avatars3.githubusercontent.com/u/24769812?v=4","gravatar_id":"","url":"https://api.github.com/users/lovelgw","html_url":"https://github.com/lovelgw","followers_url":"https://api.github.com/users/lovelgw/followers","following_url":"https://api.github.com/users/lovelgw/following{/other_user}","gists_url":"https://api.github.com/users/lovelgw/gists{/gist_id}","starred_url":"https://api.github.com/users/lovelgw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lovelgw/subscriptions","organizations_url":"https://api.github.com/users/lovelgw/orgs","repos_url":"https://api.github.com/users/lovelgw/repos","events_url":"https://api.github.com/users/lovelgw/events{/privacy}","received_events_url":"https://api.github.com/users/lovelgw/received_events","type":"User","site_admin":false},"created_at":"2017-01-03T12:27:14Z","updated_at":"2017-01-03T12:27:14Z","author_association":"NONE","body":"settings and mappings used to create the index\r\n[index_create.txt](https://github.com/elastic/elasticsearch/files/682210/index_create.txt)\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/270896719","html_url":"https://github.com/elastic/elasticsearch/issues/22347#issuecomment-270896719","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22347","id":270896719,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDg5NjcxOQ==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2017-01-06T12:45:25Z","updated_at":"2017-01-06T12:45:25Z","author_association":"CONTRIBUTOR","body":"Hmm, `seunjeon_tokenizer` ... I'll need to look at its sources to see how it's creating a cyclic graph.\r\n\r\nThanks @lovelgw ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/270897184","html_url":"https://github.com/elastic/elasticsearch/issues/22347#issuecomment-270897184","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22347","id":270897184,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDg5NzE4NA==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2017-01-06T12:48:26Z","updated_at":"2017-01-06T12:48:26Z","author_association":"CONTRIBUTOR","body":"This seems to be the source code for the the `seunjeon_tokenizer` plugin: https://bitbucket.org/eunjeon/seunjeon/src/f7775cf0afd6ba7b7cc336214700dcdba2b1918a/elasticsearch/?at=master","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/270898542","html_url":"https://github.com/elastic/elasticsearch/issues/22347#issuecomment-270898542","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22347","id":270898542,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDg5ODU0Mg==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2017-01-06T12:56:12Z","updated_at":"2017-01-06T12:56:12Z","author_association":"CONTRIBUTOR","body":"OK the `SeunjeonTokenizer` sources have this line:\r\n\r\n```\r\n            posLenAtt.setPositionLength(pos.positionLength());\r\n```\r\n\r\nI strongly suspect that for your string, the position length is 0, which is an illegal value, but Lucene's `PackedTokenAttributeImpl.java` failed to catch that (I've now fixed that, for Lucene's next (6.4) release).\r\n\r\nI think at this point you should open an issue/PR against the `seunjeon` project; there is nothing ES can do when the tokenizer produces an invalid position length.","performed_via_github_app":null}]