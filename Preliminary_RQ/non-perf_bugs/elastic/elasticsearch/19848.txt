{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/19848","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19848/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19848/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19848/events","html_url":"https://github.com/elastic/elasticsearch/issues/19848","id":169734222,"node_id":"MDU6SXNzdWUxNjk3MzQyMjI=","number":19848,"title":"Term query for words contain another word","user":{"login":"arman1371","id":8613789,"node_id":"MDQ6VXNlcjg2MTM3ODk=","avatar_url":"https://avatars3.githubusercontent.com/u/8613789?v=4","gravatar_id":"","url":"https://api.github.com/users/arman1371","html_url":"https://github.com/arman1371","followers_url":"https://api.github.com/users/arman1371/followers","following_url":"https://api.github.com/users/arman1371/following{/other_user}","gists_url":"https://api.github.com/users/arman1371/gists{/gist_id}","starred_url":"https://api.github.com/users/arman1371/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arman1371/subscriptions","organizations_url":"https://api.github.com/users/arman1371/orgs","repos_url":"https://api.github.com/users/arman1371/repos","events_url":"https://api.github.com/users/arman1371/events{/privacy}","received_events_url":"https://api.github.com/users/arman1371/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2016-08-06T07:16:40Z","updated_at":"2016-08-06T10:20:44Z","closed_at":"2016-08-06T10:20:44Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**:2.3.4\n\n**Plugins installed**: [hq]\n\n**JVM version**:1.8.0_45\n\n**OS version**:Ubuntu Server 14.04\n\nMy mapping is:\n\n```\n  \"alarmName\" : {\n    \"type\" : \"string\",\n    \"norms\" : {\n      \"enabled\" : false\n    },\n    \"analyzer\" : \"lowercase_analyzer\"\n  }\n```\n\nand setting is:\n\n```\n    \"analysis\" : {\n      \"analyzer\" : {\n        \"lowercase_analyzer\" : {\n          \"filter\" : [ \"lowercase\" ],\n          \"tokenizer\" : \"keyword\"\n        }\n      }\n    }\n```\n\nI index some events with alarmName = \"pro profile\".  \n\nbut when i query with:\n\n```\n{\n  \"query\" : {\n    \"term\" : {\n      \"alarmName\" : \"pro profile\"\n    }\n  }\n}\n```\n\ni get nothing.  \nBut with this query:  \n\n```\n{ \n  \"size\" : 0, \n  \"aggs\" : { \n    \"alarms\" : { \n      \"terms\" : { \n        \"field\" : \"alarmName\", \n        \"size\" : 100 \n      }\n    }\n  }\n}\n```\n\nI get this result:  \n\n```\n{\n  \"took\": 7,\n  \"timed_out\": false,\n  \"_shards\": {\n    \"total\": 5,\n    \"successful\": 5,\n    \"failed\": 0\n  },\n  \"hits\": {\n    \"total\": 175023,\n    \"max_score\": 0,\n    \"hits\": []\n  },\n  \"aggregations\": {\n    \"alarms\": {\n      \"doc_count_error_upper_bound\": 0,\n      \"sum_other_doc_count\": 0,\n      \"buckets\": [\n        {\n          \"key\": \"multi app profile\",\n          \"doc_count\": 166733\n        },\n        {\n          \"key\": \"not mac profile\",\n          \"doc_count\": 3755\n        },\n        {\n          \"key\": \"port profile\",\n          \"doc_count\": 1579\n        },\n        {\n          \"key\": \"not ip profile\",\n          \"doc_count\": 932\n        },\n        {\n          \"key\": \"not pro  profile\",\n          \"doc_count\": 543\n        },\n        {\n          \"key\": \"not app profile\",\n          \"doc_count\": 507\n        },\n        {\n          \"key\": \"app profile\",\n          \"doc_count\": 370\n        },\n        {\n          \"key\": \"mac profile\",\n          \"doc_count\": 365\n        },\n        {\n          \"key\": \"ip profile\",\n          \"doc_count\": 114\n        },\n        {\n          \"key\": \"pro  profile\",\n          \"doc_count\": 94\n        },\n        {\n          \"key\": \"not port profile\",\n          \"doc_count\": 31\n        }\n      ]\n    }\n  }\n}\n```\n\nfor all other words with space every things are OK, but for this words(`pro profile`) i have this problem.  \n\nhttp://stackoverflow.com/questions/38801501/elasticsearch-term-query-for-words-contain-another-word\n","closed_by":{"login":"arman1371","id":8613789,"node_id":"MDQ6VXNlcjg2MTM3ODk=","avatar_url":"https://avatars3.githubusercontent.com/u/8613789?v=4","gravatar_id":"","url":"https://api.github.com/users/arman1371","html_url":"https://github.com/arman1371","followers_url":"https://api.github.com/users/arman1371/followers","following_url":"https://api.github.com/users/arman1371/following{/other_user}","gists_url":"https://api.github.com/users/arman1371/gists{/gist_id}","starred_url":"https://api.github.com/users/arman1371/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arman1371/subscriptions","organizations_url":"https://api.github.com/users/arman1371/orgs","repos_url":"https://api.github.com/users/arman1371/repos","events_url":"https://api.github.com/users/arman1371/events{/privacy}","received_events_url":"https://api.github.com/users/arman1371/received_events","type":"User","site_admin":false},"performed_via_github_app":null}