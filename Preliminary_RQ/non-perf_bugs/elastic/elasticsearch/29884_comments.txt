[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384131660","html_url":"https://github.com/elastic/elasticsearch/issues/29884#issuecomment-384131660","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29884","id":384131660,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMTY2MA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-03-20T14:08:15Z","updated_at":"2018-04-25T01:27:35Z","author_association":"COLLABORATOR","body":"*Original comment by @cbuescher:*\n\nAnd earlier one on 6.x:\r\nLINK REDACTED\r\n\r\n```\r\nREPRODUCE WITH: ./gradlew :x-pack-elasticsearch:qa:core-rest-tests-with-security:integTestRunner \\\r\n  -Dtests.seed=C91499D264A5D2C4 \\\r\n  -Dtests.class=org.elasticsearch.xpack.security.CoreWithSecurityClientYamlTestSuiteIT \\\r\n  -Dtests.method=\"test {yaml=search/160_exists_query/Test exists query on unmapped object field}\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=en-CA \\\r\n  -Dtests.timezone=Kwajalein \\\r\n  -Dtests.rest.blacklist=cat.aliases/10_basic/Empty cluster,index/10_with_id/Index with ID,indices.get_alias/10_basic/Get alias against closed indices,cat.templates/10_basic/No templates,cat.templates/10_basic/Sort templates,cat.templates/10_basic/Multiple template\r\n\r\nREPRODUCE WITH: ./gradlew :x-pack-elasticsearch:qa:core-rest-tests-with-security:integTestRunner \\\r\n  -Dtests.seed=C91499D264A5D2C4 \\\r\n  -Dtests.class=org.elasticsearch.xpack.security.CoreWithSecurityClientYamlTestSuiteIT \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=en-US \\\r\n  -Dtests.timezone=Europe/Berlin \\\r\n  -Dtests.rest.blacklist=cat.aliases/10_basic/Empty cluster,index/10_with_id/Index with ID,indices.get_alias/10_basic/Get alias against closed indices,cat.templates/10_basic/No templates,cat.templates/10_basic/Sort templates,cat.templates/10_basic/Multiple template\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384131661","html_url":"https://github.com/elastic/elasticsearch/issues/29884#issuecomment-384131661","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29884","id":384131661,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMTY2MQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-03-20T17:45:23Z","updated_at":"2018-04-25T01:27:35Z","author_association":"COLLABORATOR","body":"*Original comment by @jaymode:*\n\nOne interesting thing to note is that security isn't even licensed in these tests since the default license type is basic and we do not override it in these tests with `setting 'xpack.license.self_generated.type', 'trial'`. @tbrooks8 do I have that correct?\r\n\r\nIf the license type is basic then almost all security features are disabled :|","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384131663","html_url":"https://github.com/elastic/elasticsearch/issues/29884#issuecomment-384131663","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29884","id":384131663,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMTY2Mw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-03-20T17:47:00Z","updated_at":"2018-04-25T01:27:35Z","author_association":"COLLABORATOR","body":"*Original comment by @cbuescher:*\n\n@jaymode apologies if I picked the wrong label, looked like this was at least related to security at first glance","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384131664","html_url":"https://github.com/elastic/elasticsearch/issues/29884#issuecomment-384131664","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29884","id":384131664,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMTY2NA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-03-20T17:49:15Z","updated_at":"2018-04-25T01:27:35Z","author_association":"COLLABORATOR","body":"*Original comment by @jaymode:*\n\nThis is not the wrong label @cbuescher. I was just adding an observation from looking into the test failures and I think the security team would be the right one to pick IMO ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384131665","html_url":"https://github.com/elastic/elasticsearch/issues/29884#issuecomment-384131665","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29884","id":384131665,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMTY2NQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-03-20T17:54:40Z","updated_at":"2018-04-25T01:27:36Z","author_association":"COLLABORATOR","body":"*Original comment by @tbrooks8:*\n\nYeah. The default type on `master` and `6.x` right now is basic. When I implemented that feature, I went through all the tests and added `trial` to the gradle files for tests that were failing. It is possible that I missed something if a test was passing spuriously.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384131666","html_url":"https://github.com/elastic/elasticsearch/issues/29884#issuecomment-384131666","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29884","id":384131666,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMTY2Ng==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-03-26T13:42:04Z","updated_at":"2018-04-25T01:27:36Z","author_association":"COLLABORATOR","body":"*Original comment by @DaveCTurner:*\n\nLINK REDACTED looks like another case of this.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384131667","html_url":"https://github.com/elastic/elasticsearch/issues/29884#issuecomment-384131667","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29884","id":384131667,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMTY2Nw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-03-27T19:52:42Z","updated_at":"2018-04-25T01:27:36Z","author_association":"COLLABORATOR","body":"*Original comment by @andyb-elastic:*\n\nThere have been a decent number of these recently so I'm going to mute it\r\n\r\nLINK REDACTED\r\nLINK REDACTED\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384131668","html_url":"https://github.com/elastic/elasticsearch/issues/29884#issuecomment-384131668","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29884","id":384131668,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMTY2OA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-03-27T21:10:39Z","updated_at":"2018-04-25T01:27:36Z","author_association":"COLLABORATOR","body":"*Original comment by @jasontedor:*\n\n@andyb-elastic I do not think we should mute the entire test suite, that is losing all coverage for the core REST tests with security. Is there a more tactical approach that we can take? If not, I would like to raise the priority of understanding these issues. Can you help move this forward @jaymode?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384131670","html_url":"https://github.com/elastic/elasticsearch/issues/29884#issuecomment-384131670","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29884","id":384131670,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMTY3MA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-03-27T21:28:31Z","updated_at":"2018-04-25T01:27:36Z","author_association":"COLLABORATOR","body":"*Original comment by @andyb-elastic:*\n\nMy bad, I reverted the commits that muted it\r\n\r\nLINK REDACTED\r\nLINK REDACTED","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384131671","html_url":"https://github.com/elastic/elasticsearch/issues/29884#issuecomment-384131671","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29884","id":384131671,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMTY3MQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-03-27T22:21:08Z","updated_at":"2018-04-25T01:27:37Z","author_association":"COLLABORATOR","body":"*Original comment by @jaymode:*\n\n@jasontedor I've been investigating these failures and so far cannot find an issue other than the general slowness that is being observed in these tests. The test logs show continued execution for 30 minutes before timing out.\r\n\r\nOne option that I've been trying to avoid is increasing the suite timeout. I am going to dig into how long this task took in a succesful build.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384131673","html_url":"https://github.com/elastic/elasticsearch/issues/29884#issuecomment-384131673","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29884","id":384131673,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMTY3Mw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-03-28T14:55:04Z","updated_at":"2018-04-25T01:27:37Z","author_association":"COLLABORATOR","body":"*Original comment by @jaymode:*\n\nHere is an interesting tidbit. On the master periodic build the previous build completed this task in under 5 minutes:\r\n\r\n```\r\n  Gradle Version        : 4.5\r\n  OS Info               : Linux 4.4.0-1049-aws (amd64)\r\n  JDK Version (gradle)  : Oracle Corporation 1.8.0_162 [Java HotSpot(TM) 64-Bit Server VM 25.162-b12]\r\n  JAVA_HOME (gradle)    : /var/lib/jenkins/.java/jdk-8u162-linux-x64\r\n  JDK Version (compile) : Oracle Corporation 10 [Java HotSpot(TM) 64-Bit Server VM 10+43]\r\n  JAVA_HOME (compile)   : /var/lib/jenkins/.java/oracle-10+43\r\n  JDK Version (runtime) : Oracle Corporation 1.8.0_162 [Java HotSpot(TM) 64-Bit Server VM 25.162-b12]\r\n  JAVA_HOME (runtime)   : /var/lib/jenkins/.java/java8\r\n  Random Testing Seed   : 77101749F6442300\r\n...\r\n:x-pack-elasticsearch:qa:core-rest-tests-with-security:integTestRunner (Thread[Task worker for ':' Thread 3,5,main]) completed. Took 4 mins 9.554 secs.\r\n```\r\nLINK REDACTED\r\n\r\nThe next build, which timed out:\r\n\r\n```\r\n  Gradle Version        : 4.5\r\n  OS Info               : Linux 4.13.0-32-generic (amd64)\r\n  JDK Version (gradle)  : Oracle Corporation 1.8.0_162 [Java HotSpot(TM) 64-Bit Server VM 25.162-b12]\r\n  JAVA_HOME (gradle)    : /var/lib/jenkins/.java/jdk-8u162-linux-x64\r\n  JDK Version (compile) : Oracle Corporation 10 [Java HotSpot(TM) 64-Bit Server VM 10+43]\r\n  JAVA_HOME (compile)   : /var/lib/jenkins/.java/oracle-10+43\r\n  JDK Version (runtime) : Oracle Corporation 1.8.0_162 [Java HotSpot(TM) 64-Bit Server VM 25.162-b12]\r\n  JAVA_HOME (runtime)   : /var/lib/jenkins/.java/java8\r\n  Random Testing Seed   : 7E728F114C14078B\r\n...\r\n[ant:junit4] JVM J0:     0.26 ..  1804.09 =  1803.83s\r\n[ant:junit4] Execution time total: 30 minutes 4 seconds\r\n[ant:junit4] Tests summary: 1 suite, 858 tests, 1 suite-level error, 1 error, 22 ignored (22 assumptions)\r\n:x-pack-elasticsearch:qa:core-rest-tests-with-security:integTestRunner FAILED\r\n```\r\n\r\nAnother build, LINK REDACTED which timed out:\r\n\r\n```\r\n  Gradle Version        : 4.5\r\n  OS Info               : Linux 4.13.0-32-generic (amd64)\r\n  JDK Version (gradle)  : Oracle Corporation 1.8.0_162 [Java HotSpot(TM) 64-Bit Server VM 25.162-b12]\r\n  JAVA_HOME (gradle)    : /var/lib/jenkins/.java/jdk-8u162-linux-x64\r\n  JDK Version (compile) : Oracle Corporation 9.0.4 [Java HotSpot(TM) 64-Bit Server VM 9.0.4+11]\r\n  JAVA_HOME (compile)   : /var/lib/jenkins/.java/oracle-9.0.4+11\r\n  JDK Version (runtime) : Oracle Corporation 1.8.0_162 [Java HotSpot(TM) 64-Bit Server VM 25.162-b12]\r\n  JAVA_HOME (runtime)   : /var/lib/jenkins/.java/java8\r\n  Random Testing Seed   : 5ED23075D290D2C7\r\n```\r\n\r\nThe original timeout, LINK REDACTED\r\n\r\n```\r\n  Gradle Version        : 4.5\r\n  OS Info               : Linux 4.13.0-32-generic (amd64)\r\n  JDK Version           : Oracle Corporation 9.0.4 [Java HotSpot(TM) 64-Bit Server VM 9.0.4+11]\r\n  JAVA_HOME             : /var/lib/jenkins/.java/oracle-9.0.4+11\r\n  Random Testing Seed   : AFA79B9F35DADEFC\r\n```\r\n\r\nLooking at the other time outs, I am seeing a common theme with the OS info `Linux 4.13.0-32-generic (amd64)`.  I have yet to see a recent successful build that doesn't use the AWS kernel and I have not seen a timeout that uses the AWS kernel.\r\n\r\n@jasontedor @dliappis @danielmitterdorfer do you have any thoughts regarding the kernel as the possible cause?\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384131675","html_url":"https://github.com/elastic/elasticsearch/issues/29884#issuecomment-384131675","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29884","id":384131675,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMTY3NQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-03-28T20:49:56Z","updated_at":"2018-04-25T01:27:37Z","author_association":"COLLABORATOR","body":"*Original comment by @jaymode:*\n\nThis appears to be an issue with AWS and this kernel version. I ran the tests with the same kernel locally and the test times were comparable between this kernel and an updated one. The core-rest-tests-with-security passed locally on this kernel in around 11 minutes consistently.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384131676","html_url":"https://github.com/elastic/elasticsearch/issues/29884#issuecomment-384131676","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29884","id":384131676,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMTY3Ng==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-03-29T15:13:04Z","updated_at":"2018-04-25T01:27:37Z","author_association":"COLLABORATOR","body":"*Original comment by @dliappis:*\n\n@jaymode Apart from small discrepancies between the Ubuntu 16.04 kernel versions in AWS ci workers, depending on when the base AMI was built, you've hit another issue as well.\r\n\r\nThe first (successful) build: LINK REDACTED indeed ran on AWS worker, kernel: `4.4.0-1049-aws`\r\n\r\nThe next one that failed though: LINK REDACTED ran on a bare metal server. The particular bare metal provider ships the Ubuntu images with the LINK REDACTED configured. As a result the kernel on the specific worker is the much newer: `4.13.0-32-generic`. So for example you'll notice that on this server the kernel package name is `linux-image-generic-hwe-16.04`. The particular bare metal provider does this to ensure all the hardware (which can be quite modern, e.g. Ryzen processors, NVMe disks etc.) works without issues on Ubuntu LTS distros.\r\n\r\nThis is an issue that has troubled @danielmitterdorfer and me with some speed regressions in our benchmarking environment and we are considering alternatives. However, Ubuntu HWE kernels are not uncommonly run in various premises and I guess it's a desirable mixture to have in a CI system.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384131677","html_url":"https://github.com/elastic/elasticsearch/issues/29884#issuecomment-384131677","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29884","id":384131677,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMTY3Nw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-03-29T20:25:36Z","updated_at":"2018-04-25T01:27:37Z","author_association":"COLLABORATOR","body":"*Original comment by @jaymode:*\n\nZeroing in on the kernel was premature as the other difference here is that the slow machines are bare metal while the others are AWS workers. Looking back through the build history of these workers at the intake jobs there are some successful builds on these workers multiple days ago but the core-rest-tests-with-security suite is definitely pushing the time limit at just over 29 minutes.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384131679","html_url":"https://github.com/elastic/elasticsearch/issues/29884#issuecomment-384131679","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29884","id":384131679,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMTY3OQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-03-30T07:46:08Z","updated_at":"2018-04-25T01:27:38Z","author_association":"COLLABORATOR","body":"*Original comment by @dliappis:*\n\nRight and also worth of considering is that the bare metal has rather speedy locally attached SSD disks (in RAID-0) as opposed to network attached storage (EBS) on the AWS workers, the latter obviously considerably slower in IO.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384131681","html_url":"https://github.com/elastic/elasticsearch/issues/29884#issuecomment-384131681","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29884","id":384131681,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMTY4MQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-03-30T18:46:15Z","updated_at":"2018-04-25T01:27:38Z","author_association":"COLLABORATOR","body":"*Original comment by @mayya-sharipova:*\n\nMore similar failures today:\r\n\r\n1) master multijob-unix-compatibility: LINK REDACTED\r\nOS | Ubuntu 16.04, Linux 4.13.0-32-generic\r\n\r\n2) 6.x multijob-unix-compatibility:\r\nLINK REDACTED\r\nOS | Ubuntu 16.04, Linux 4.13.0-32-generic\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384131682","html_url":"https://github.com/elastic/elasticsearch/issues/29884#issuecomment-384131682","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29884","id":384131682,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMTY4Mg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-04-02T15:52:54Z","updated_at":"2018-04-25T01:27:38Z","author_association":"COLLABORATOR","body":"*Original comment by @jbaiera:*\n\nAnother instance today: \r\n\r\nLINK REDACTED\r\nUbuntu 16.04, Linux 4.13.0-32-generic","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384131683","html_url":"https://github.com/elastic/elasticsearch/issues/29884#issuecomment-384131683","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29884","id":384131683,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMTY4Mw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-04-05T13:39:33Z","updated_at":"2018-04-25T01:27:38Z","author_association":"COLLABORATOR","body":"*Original comment by @davidkyle:*\n\nAnother one:\r\n\r\nLINK REDACTED\r\n\r\nWorker: LINK REDACTED\r\n\r\nx86_64 swarm ubuntu linux metal ubuntu-16.04","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384131684","html_url":"https://github.com/elastic/elasticsearch/issues/29884#issuecomment-384131684","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29884","id":384131684,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMTY4NA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-04-11T07:02:14Z","updated_at":"2018-04-25T01:27:38Z","author_association":"COLLABORATOR","body":"*Original comment by @danielmitterdorfer:*\n\nIt's odd that the cloud instances do not cause problems but the bare-metal ones do. One possibility could be that this is a driver issue so upgrading the kernel *might* help.\r\n\r\nApart from that, I think it would pay off to investigate which resource is actually constrained. For starters running these commands while a build is running might reveal something interesting:\r\n\r\n* `vmstat -tw 1`\r\n* `iostat -xzt 1`\r\n\r\nThese provide I/O metrics and metrics about the virtual memory subsystem of the kernel.\r\n\r\nOne final idea: I somehow doubt that it is the case but maybe we produce a lot of system call errors due to system misconfiguration? We could use `syscount -x -i 5` (requires LINK REDACTED) to find out.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/389585636","html_url":"https://github.com/elastic/elasticsearch/issues/29884#issuecomment-389585636","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29884","id":389585636,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTU4NTYzNg==","user":{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false},"created_at":"2018-05-16T16:39:34Z","updated_at":"2018-05-16T16:39:34Z","author_association":"MEMBER","body":"This has not failed since the opening of x-pack and changes to a different CI instance. I am going to close this one for now as this appears to have been related to the metal hosts used by the other CI.","performed_via_github_app":null}]