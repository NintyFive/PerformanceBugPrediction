[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42767529","html_url":"https://github.com/elastic/elasticsearch/issues/6117#issuecomment-42767529","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6117","id":42767529,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNzY3NTI5","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-05-11T10:49:38Z","updated_at":"2014-05-11T10:49:38Z","author_association":"CONTRIBUTOR","body":"Are you using shingles on your suggestion field? For instance:\n\n```\nDELETE /test\n\nPUT /test\n{\n  \"settings\": {\n    \"number_of_shards\": 1,\n    \"analysis\": {\n      \"filter\": {\n        \"space_collapser\": {\n          \"type\": \"shingle\",\n          \"min_shingle_size\": 2,\n          \"max_shingle_size\": 3\n        }\n      },\n      \"analyzer\": {\n        \"suggest\": {\n          \"tokenizer\": \"whitespace\",\n          \"filter\": [\n            \"lowercase\",\n            \"space_collapser\"\n          ]\n        }\n      }\n    }\n  },\n  \"mappings\": {\n    \"test\": {\n      \"properties\": {\n        \"text\": {\n          \"type\": \"string\",\n          \"fields\": {\n            \"shingles\": {\n              \"type\": \"string\",\n              \"analyzer\": \"suggest\"\n            }\n          }\n        }\n      }\n    }\n  }\n}\n\nPUT /test/test/1\n{\n  \"text\": \"Omega 3 is the bomb\"\n}\n\nPUT /test/test/2\n{\n  \"text\": \"Omega4 is the bomb\"\n}\n\nGET /test/_suggest\n{\n  \"text\": \"omega3\",\n  \"test_suggest\": {\n    \"phrase\": {\n      \"field\": \"text.shingles\",\n      \"max_errors\": 3,\n      \"highlight\": {\n        \"pre_tag\": \"<em>\",\n        \"post_tag\": \"</em>\"\n      }\n    }\n  }\n}\n```\n\nOutputs:\n\n```\n{\n   \"_shards\": {\n      \"total\": 1,\n      \"successful\": 1,\n      \"failed\": 0\n   },\n   \"test_suggest\": [\n      {\n         \"text\": \"omega3\",\n         \"offset\": 0,\n         \"length\": 6,\n         \"options\": [\n            {\n               \"text\": \"omega 3\",\n               \"highlighted\": \"<em>omega 3</em>\",\n               \"score\": 0.33987367\n            },\n            {\n               \"text\": \"omega4\",\n               \"highlighted\": \"<em>omega4</em>\",\n               \"score\": 0.33987367\n            },\n            {\n               \"text\": \"omega\",\n               \"highlighted\": \"<em>omega</em>\",\n               \"score\": 0.33390126\n            }\n         ]\n      }\n   ]\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42768144","html_url":"https://github.com/elastic/elasticsearch/issues/6117#issuecomment-42768144","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6117","id":42768144,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNzY4MTQ0","user":{"login":"shaunhall","id":5429010,"node_id":"MDQ6VXNlcjU0MjkwMTA=","avatar_url":"https://avatars3.githubusercontent.com/u/5429010?v=4","gravatar_id":"","url":"https://api.github.com/users/shaunhall","html_url":"https://github.com/shaunhall","followers_url":"https://api.github.com/users/shaunhall/followers","following_url":"https://api.github.com/users/shaunhall/following{/other_user}","gists_url":"https://api.github.com/users/shaunhall/gists{/gist_id}","starred_url":"https://api.github.com/users/shaunhall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shaunhall/subscriptions","organizations_url":"https://api.github.com/users/shaunhall/orgs","repos_url":"https://api.github.com/users/shaunhall/repos","events_url":"https://api.github.com/users/shaunhall/events{/privacy}","received_events_url":"https://api.github.com/users/shaunhall/received_events","type":"User","site_admin":false},"created_at":"2014-05-11T11:25:58Z","updated_at":"2014-05-11T11:25:58Z","author_association":"NONE","body":"Brilliant, thanks Clinton, exactly what I wanted!\n","performed_via_github_app":null}]