{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/19192","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19192/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19192/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19192/events","html_url":"https://github.com/elastic/elasticsearch/issues/19192","id":163205896,"node_id":"MDU6SXNzdWUxNjMyMDU4OTY=","number":19192,"title":"Ingest: Skip Empty Pipelines","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"labels":[{"id":268963484,"node_id":"MDU6TGFiZWwyNjg5NjM0ODQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Ingest","name":":Core/Features/Ingest","color":"0e8a16","default":false,"description":"Execution or management of Ingest Pipelines"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2016-06-30T16:16:50Z","updated_at":"2016-07-01T16:15:05Z","closed_at":"2016-07-01T16:15:05Z","author_association":"MEMBER","active_lock_reason":null,"body":"The idea here is to allow indexing to supply a _known_ pipeline that can be empty. If the pipeline is empty, then just skip it. That's it.\n\n---\n\nFor example:\n\n``` http\nPUT /_ingest/pipeline/upgrade-my-api-2\n{\n  \"description\" : \"Placeholder to upgrade from API v2 to current\",\n  \"processors\" : [ ]\n}\n```\n\nWhile API v2 is the current version, the pipeline naturally does nothing, so the ingest pipeline should literally be skipped. But eventually, you can create an API v3, update the pipeline and then new indexing can be adjusted as needed (including index renames).\n\n``` http\nPUT /my-index-2/type/123?pipeline=upgrade-my-api-2\n{\n  \"field\" : \"blah\"\n}\n```\n\nAfter v3 rolls out, the pipeline is replaced with something like (and it could be further modified for v4 to allow v2 to v4, for as long as a version needs to survive):\n\n``` http\nPUT /_ingest/pipeline/upgrade-my-api-2\n{\n  \"description\" : \"Upgrade from API v2 to v3\",\n  \"processors\" : [\n    {\n      \"rename\": {\n        \"field\": \"field\",\n        \"target_field\": \"another_name\"\n      }\n    },\n    {\n      \"set\": {\n        \"field\": \"_index\",\n        \"value\": \"my-index-3\"\n      }\n    }\n  ]\n}\n```\n\nThis enables secondary systems to be upgraded in a rolling fashion to enable temporary pipeline usage without any overhead burden while it's not needed.\n","closed_by":{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false},"performed_via_github_app":null}