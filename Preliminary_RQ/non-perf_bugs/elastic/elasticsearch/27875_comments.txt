[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/352575864","html_url":"https://github.com/elastic/elasticsearch/issues/27875#issuecomment-352575864","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27875","id":352575864,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjU3NTg2NA==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2017-12-18T22:18:06Z","updated_at":"2017-12-18T22:18:06Z","author_association":"CONTRIBUTOR","body":"I'd also like to hear @rjernst  's thoughts on this too.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/352586963","html_url":"https://github.com/elastic/elasticsearch/issues/27875#issuecomment-352586963","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27875","id":352586963,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjU4Njk2Mw==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2017-12-18T23:08:13Z","updated_at":"2017-12-18T23:08:13Z","author_association":"MEMBER","body":"This is a little bit complicated since each place in ES you use a script (called \"context\"s) provides different predefined variables. So I'm not sure it could be used for general painless script debugging because you can't just pass in any script from any part of ES. However, since we do now have contexts, what you are requesting should be possible. It would be a new context that doesn't provided any variables except params. The only caveat is we need to decide what type this context returns. I think it should be String. Would that work for you (you could parse the string back into a number if you expect a number for a particular script)?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/352589597","html_url":"https://github.com/elastic/elasticsearch/issues/27875#issuecomment-352589597","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27875","id":352589597,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjU4OTU5Nw==","user":{"login":"simianhacker","id":41702,"node_id":"MDQ6VXNlcjQxNzAy","avatar_url":"https://avatars2.githubusercontent.com/u/41702?v=4","gravatar_id":"","url":"https://api.github.com/users/simianhacker","html_url":"https://github.com/simianhacker","followers_url":"https://api.github.com/users/simianhacker/followers","following_url":"https://api.github.com/users/simianhacker/following{/other_user}","gists_url":"https://api.github.com/users/simianhacker/gists{/gist_id}","starred_url":"https://api.github.com/users/simianhacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simianhacker/subscriptions","organizations_url":"https://api.github.com/users/simianhacker/orgs","repos_url":"https://api.github.com/users/simianhacker/repos","events_url":"https://api.github.com/users/simianhacker/events{/privacy}","received_events_url":"https://api.github.com/users/simianhacker/received_events","type":"User","site_admin":false},"created_at":"2017-12-18T23:21:27Z","updated_at":"2017-12-18T23:21:27Z","author_association":"MEMBER","body":"@rjernst What are the different return types?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/352601987","html_url":"https://github.com/elastic/elasticsearch/issues/27875#issuecomment-352601987","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27875","id":352601987,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjYwMTk4Nw==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2017-12-19T00:33:07Z","updated_at":"2017-12-19T00:33:07Z","author_association":"CONTRIBUTOR","body":"@simianhacker Any primitive or Object (which includes String), but since this is being sent as a REST request, I agree with @rjernst that a String makes sense to return since you can parse this as whatever you want on the client side, and it's simple to do.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/352602629","html_url":"https://github.com/elastic/elasticsearch/issues/27875#issuecomment-352602629","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27875","id":352602629,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjYwMjYyOQ==","user":{"login":"simianhacker","id":41702,"node_id":"MDQ6VXNlcjQxNzAy","avatar_url":"https://avatars2.githubusercontent.com/u/41702?v=4","gravatar_id":"","url":"https://api.github.com/users/simianhacker","html_url":"https://github.com/simianhacker","followers_url":"https://api.github.com/users/simianhacker/followers","following_url":"https://api.github.com/users/simianhacker/following{/other_user}","gists_url":"https://api.github.com/users/simianhacker/gists{/gist_id}","starred_url":"https://api.github.com/users/simianhacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simianhacker/subscriptions","organizations_url":"https://api.github.com/users/simianhacker/orgs","repos_url":"https://api.github.com/users/simianhacker/repos","events_url":"https://api.github.com/users/simianhacker/events{/privacy}","received_events_url":"https://api.github.com/users/simianhacker/received_events","type":"User","site_admin":false},"created_at":"2017-12-19T00:37:23Z","updated_at":"2017-12-19T00:37:23Z","author_association":"MEMBER","body":"Is there a simple way to take an array of results and encode them as a JSON string in Painless? then return that?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/352603113","html_url":"https://github.com/elastic/elasticsearch/issues/27875#issuecomment-352603113","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27875","id":352603113,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjYwMzExMw==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2017-12-19T00:40:14Z","updated_at":"2017-12-19T00:40:14Z","author_association":"CONTRIBUTOR","body":"Not at this very moment, *but* with contexts we should be able to add a way to do this and give you useful methods for JSON -> String conversion.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/353379434","html_url":"https://github.com/elastic/elasticsearch/issues/27875#issuecomment-353379434","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27875","id":353379434,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzM3OTQzNA==","user":{"login":"alexfrancoeur","id":25181823,"node_id":"MDQ6VXNlcjI1MTgxODIz","avatar_url":"https://avatars1.githubusercontent.com/u/25181823?v=4","gravatar_id":"","url":"https://api.github.com/users/alexfrancoeur","html_url":"https://github.com/alexfrancoeur","followers_url":"https://api.github.com/users/alexfrancoeur/followers","following_url":"https://api.github.com/users/alexfrancoeur/following{/other_user}","gists_url":"https://api.github.com/users/alexfrancoeur/gists{/gist_id}","starred_url":"https://api.github.com/users/alexfrancoeur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexfrancoeur/subscriptions","organizations_url":"https://api.github.com/users/alexfrancoeur/orgs","repos_url":"https://api.github.com/users/alexfrancoeur/repos","events_url":"https://api.github.com/users/alexfrancoeur/events{/privacy}","received_events_url":"https://api.github.com/users/alexfrancoeur/received_events","type":"User","site_admin":false},"created_at":"2017-12-21T15:29:19Z","updated_at":"2017-12-21T15:29:19Z","author_association":"NONE","body":"I'd like to weigh in here a bit from a product standpoint. The [Math Agg](https://github.com/elastic/kibana/pull/13681) @simianhacker created for 6.1 filled a huge gap that we have in Kibana. We have a number of users looking to do simple calculations such as dividing two metrics from within a Kibana visualization. There are of course more advanced users looking to create much more complex calculations. Bucket script support in Kibana has gotten us pretty far, but the ability to create free range painless scripts and calculations seamlessly within a visualization will provide significant value to an array of users utilizing our UI. I know 6.1.1 will be disappointing to a number of users who were waiting on TSVB's Math agg. If we can provide a more secure approach and similar experience native to elasticsearch - it will go a long way with our community. Just wanted to add my 2 cents here 😄 ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/353420187","html_url":"https://github.com/elastic/elasticsearch/issues/27875#issuecomment-353420187","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27875","id":353420187,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzQyMDE4Nw==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2017-12-21T18:16:23Z","updated_at":"2017-12-21T18:16:23Z","author_association":"MEMBER","body":"@alexfrancoeur I'm not sure exactly what you are suggesting. What was proposed here is an independent endpoint to run painless scripts. But to run such a script with information from results of a given query would mean a second roundtrip. It means the \"client side\" processing of aggs results becomes not really client side (and probably painfully slow).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/353444304","html_url":"https://github.com/elastic/elasticsearch/issues/27875#issuecomment-353444304","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27875","id":353444304,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzQ0NDMwNA==","user":{"login":"simianhacker","id":41702,"node_id":"MDQ6VXNlcjQxNzAy","avatar_url":"https://avatars2.githubusercontent.com/u/41702?v=4","gravatar_id":"","url":"https://api.github.com/users/simianhacker","html_url":"https://github.com/simianhacker","followers_url":"https://api.github.com/users/simianhacker/followers","following_url":"https://api.github.com/users/simianhacker/following{/other_user}","gists_url":"https://api.github.com/users/simianhacker/gists{/gist_id}","starred_url":"https://api.github.com/users/simianhacker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simianhacker/subscriptions","organizations_url":"https://api.github.com/users/simianhacker/orgs","repos_url":"https://api.github.com/users/simianhacker/repos","events_url":"https://api.github.com/users/simianhacker/events{/privacy}","received_events_url":"https://api.github.com/users/simianhacker/received_events","type":"User","site_admin":false},"created_at":"2017-12-21T19:59:58Z","updated_at":"2017-12-21T19:59:58Z","author_association":"MEMBER","body":"Yes, it would be a second round trip... painfully slow really depends on the latency and number of round trips required to do the calculation. If it was all batched together then it might be an additional 10ms to 60ms, which isn't terrible.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/372399165","html_url":"https://github.com/elastic/elasticsearch/issues/27875#issuecomment-372399165","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27875","id":372399165,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MjM5OTE2NQ==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2018-03-12T17:42:40Z","updated_at":"2018-03-12T17:42:40Z","author_association":"CONTRIBUTOR","body":"Longer term we probably want this be able to run against test docs.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/373862730","html_url":"https://github.com/elastic/elasticsearch/issues/27875#issuecomment-373862730","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27875","id":373862730,"node_id":"MDEyOklzc3VlQ29tbWVudDM3Mzg2MjczMA==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2018-03-16T22:32:52Z","updated_at":"2018-03-16T22:32:52Z","author_association":"CONTRIBUTOR","body":"@martijnvg Is this something that you're actively or planning to work on?  Just don't want to double up work :)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/385033298","html_url":"https://github.com/elastic/elasticsearch/issues/27875#issuecomment-385033298","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27875","id":385033298,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NTAzMzI5OA==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2018-04-27T17:05:19Z","updated_at":"2018-04-27T17:05:19Z","author_association":"CONTRIBUTOR","body":"This has been commited https://github.com/elastic/elasticsearch/pull/29164","performed_via_github_app":null}]