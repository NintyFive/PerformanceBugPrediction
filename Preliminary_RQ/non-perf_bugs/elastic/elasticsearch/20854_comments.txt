[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252855809","html_url":"https://github.com/elastic/elasticsearch/issues/20854#issuecomment-252855809","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20854","id":252855809,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Mjg1NTgwOQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T09:13:03Z","updated_at":"2016-10-11T09:13:03Z","author_association":"CONTRIBUTOR","body":"what version are you running on and what lead to this failure? do you have logs you can provide?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252860954","html_url":"https://github.com/elastic/elasticsearch/issues/20854#issuecomment-252860954","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20854","id":252860954,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Mjg2MDk1NA==","user":{"login":"lizhecao","id":8225585,"node_id":"MDQ6VXNlcjgyMjU1ODU=","avatar_url":"https://avatars3.githubusercontent.com/u/8225585?v=4","gravatar_id":"","url":"https://api.github.com/users/lizhecao","html_url":"https://github.com/lizhecao","followers_url":"https://api.github.com/users/lizhecao/followers","following_url":"https://api.github.com/users/lizhecao/following{/other_user}","gists_url":"https://api.github.com/users/lizhecao/gists{/gist_id}","starred_url":"https://api.github.com/users/lizhecao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lizhecao/subscriptions","organizations_url":"https://api.github.com/users/lizhecao/orgs","repos_url":"https://api.github.com/users/lizhecao/repos","events_url":"https://api.github.com/users/lizhecao/events{/privacy}","received_events_url":"https://api.github.com/users/lizhecao/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T09:36:23Z","updated_at":"2016-10-11T09:51:03Z","author_association":"NONE","body":"version:2.2.0\nreason:I suppose the reason is the file descriptor setting is too small on my centos,so es report too many open files error,and I enlarge the file descriptor and restart es,and then it report errors as below:\n\n> [FH-CND-SS] [prs_sysinfo_20161001][0]: allocating [[prs_sysinfo_20161001][0], node[null], [P], v[18], s[UNASSIGNED], unassigned_info[[reason=ALLOCATION_FAILED], at[2016-10-11T09:48:42.522Z], details[failed recovery, failure IndexShardRecoveryException[failed to recovery from gateway]; nested: EngineCreationFailureException[failed to create engine]; nested: NoSuchFileException[/opt/fonsview/3RD/elasticsearch/data/stsc_p2p/nodes/0/indices/prs_sysinfo_20161001/0/translog/translog-8.ckp]; ]]] to [{FH-CND-SS}{Rmf1-0FvRjSse3EzZW3mXQ}{211.138.22.118}{211.138.22.118:9300}] on primary allocation\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252873615","html_url":"https://github.com/elastic/elasticsearch/issues/20854#issuecomment-252873615","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20854","id":252873615,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Mjg3MzYxNQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T10:30:47Z","updated_at":"2016-10-11T10:30:47Z","author_association":"CONTRIBUTOR","body":"I think we fixed this in 2.3 or 2.3.1 - can you upgrade to the latest and see if the index recovers?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252881616","html_url":"https://github.com/elastic/elasticsearch/issues/20854#issuecomment-252881616","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20854","id":252881616,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Mjg4MTYxNg==","user":{"login":"lizhecao","id":8225585,"node_id":"MDQ6VXNlcjgyMjU1ODU=","avatar_url":"https://avatars3.githubusercontent.com/u/8225585?v=4","gravatar_id":"","url":"https://api.github.com/users/lizhecao","html_url":"https://github.com/lizhecao","followers_url":"https://api.github.com/users/lizhecao/followers","following_url":"https://api.github.com/users/lizhecao/following{/other_user}","gists_url":"https://api.github.com/users/lizhecao/gists{/gist_id}","starred_url":"https://api.github.com/users/lizhecao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lizhecao/subscriptions","organizations_url":"https://api.github.com/users/lizhecao/orgs","repos_url":"https://api.github.com/users/lizhecao/repos","events_url":"https://api.github.com/users/lizhecao/events{/privacy}","received_events_url":"https://api.github.com/users/lizhecao/received_events","type":"User","site_admin":false},"created_at":"2016-10-11T10:57:18Z","updated_at":"2016-10-11T10:57:18Z","author_association":"NONE","body":"OK, I will try.\nThank you!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/253484578","html_url":"https://github.com/elastic/elasticsearch/issues/20854#issuecomment-253484578","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20854","id":253484578,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MzQ4NDU3OA==","user":{"login":"lizhecao","id":8225585,"node_id":"MDQ6VXNlcjgyMjU1ODU=","avatar_url":"https://avatars3.githubusercontent.com/u/8225585?v=4","gravatar_id":"","url":"https://api.github.com/users/lizhecao","html_url":"https://github.com/lizhecao","followers_url":"https://api.github.com/users/lizhecao/followers","following_url":"https://api.github.com/users/lizhecao/following{/other_user}","gists_url":"https://api.github.com/users/lizhecao/gists{/gist_id}","starred_url":"https://api.github.com/users/lizhecao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lizhecao/subscriptions","organizations_url":"https://api.github.com/users/lizhecao/orgs","repos_url":"https://api.github.com/users/lizhecao/repos","events_url":"https://api.github.com/users/lizhecao/events{/privacy}","received_events_url":"https://api.github.com/users/lizhecao/received_events","type":"User","site_admin":false},"created_at":"2016-10-13T11:13:16Z","updated_at":"2016-10-17T15:07:10Z","author_association":"NONE","body":"@s1monw I have upgraded to the 2.4.0,but there comes a new problem.\n\n```\n[2016-10-13 19:01:21,093][DEBUG][gateway                  ] [FH-CND-SS] [content_flow_log_20160830][5]: throttling allocation [[content_flow_log_20160830][5], node[null], [P], v[0], s[UNASSIGNED], unassigned_info[[reason=CLUSTER_RECOVERED], at[2016-10-13T10:59:15.344Z]]] to [[{FH-CND-SS}{d9cuWsBuSJCdsG1LuoKlsg}{211.138.22.118}{211.138.22.118:9300}]] on primary allocation\n[2016-10-13 19:01:21,093][DEBUG][gateway                  ] [FH-CND-SS] [content_flow_log_20160830][4] found 1 allocations of [content_flow_log_20160830][4], node[null], [P], v[0], s[UNASSIGNED], unassigned_info[[reason=CLUSTER_RECOVERED], at[2016-10-13T10:59:15.344Z]], highest version: [18]\n[2016-10-13 19:01:21,093][DEBUG][gateway                  ] [FH-CND-SS] [content_flow_log_20160830][4]: throttling allocation [[content_flow_log_20160830][4], node[null], [P], v[0], s[UNASSIGNED], unassigned_info[[reason=CLUSTER_RECOVERED], at[2016-10-13T10:59:15.344Z]]] to [[{FH-CND-SS}{d9cuWsBuSJCdsG1LuoKlsg}{211.138.22.118}{211.138.22.118:9300}]] on primary allocation\n[2016-10-13 19:01:21,094][DEBUG][gateway                  ] [FH-CND-SS] [content_flow_log_20160830][3] found 1 allocations of [content_flow_log_20160830][3], node[null], [P], v[0], s[UNASSIGNED], unassigned_info[[reason=CLUSTER_RECOVERED], at[2016-10-13T10:59:15.344Z]], highest version: [18]\n[2016-10-13 19:01:21,094][DEBUG][gateway                  ] [FH-CND-SS] [content_flow_log_20160830][3]: throttling allocation [[content_flow_log_20160830][3], node[null], [P], v[0], s[UNASSIGNED], unassigned_info[[reason=CLUSTER_RECOVERED], at[2016-10-13T10:59:15.344Z]]] to [[{FH-CND-SS}{d9cuWsBuSJCdsG1LuoKlsg}{211.138.22.118}{211.138.22.118:9300}]] on primary allocation\n[2016-10-13 19:01:21,094][DEBUG][gateway                  ] [FH-CND-SS] [content_flow_log_20160830][2] found 1 allocations of [content_flow_log_20160830][2], node[null], [P], v[0], s[UNASSIGNED], unassigned_info[[reason=CLUSTER_RECOVERED], at[2016-10-13T10:59:15.344Z]], highest version: [18]\n[2016-10-13 19:01:21,094][DEBUG][gateway                  ] [FH-CND-SS] [content_flow_log_20160830][2]: throttling allocation [[content_flow_log_20160830][2], node[null], [P], v[0], s[UNASSIGNED], unassigned_info[[reason=CLUSTER_RECOVERED], at[2016-10-13T10:59:15.344Z]]] to [[{FH-CND-SS}{d9cuWsBuSJCdsG1LuoKlsg}{211.138.22.118}{211.138.22.118:9300}]] on primary allocation\n[2016-10-13 19:01:21,094][DEBUG][gateway                  ] [FH-CND-SS] [content_flow_log_20160830][0] found 1 allocations of [content_flow_log_20160830][0], node[null], [P], v[0], s[UNASSIGNED], unassigned_info[[reason=CLUSTER_RECOVERED], at[2016-10-13T10:59:15.344Z]], highest version: [18]\n[2016-10-13 19:01:21,094][DEBUG][gateway                  ] [FH-CND-SS] [content_flow_log_20160830][0]: throttling allocation [[content_flow_log_20160830][0], node[null], [P], v[0], s[UNASSIGNED], unassigned_info[[reason=CLUSTER_RECOVERED], at[2016-10-13T10:59:15.344Z]]] to [[{FH-CND-SS}{d9cuWsBuSJCdsG1LuoKlsg}{211.138.22.118}{211.138.22.118:9300}]] on primary allocation\n[2016-10-13 19:01:21,094][DEBUG][gateway                  ] [FH-CND-SS] [peer_flow_log_20160830][1] found 1 allocations of [peer_flow_log_20160830][1], node[null], [P], v[0], s[UNASSIGNED], unassigned_info[[reason=CLUSTER_RECOVERED], at[2016-10-13T10:59:15.343Z]], highest version: [22]\n[2016-10-13 19:01:21,094][DEBUG][gateway                  ] [FH-CND-SS] [peer_flow_log_20160830][1]: throttling allocation [[peer_flow_log_20160830][1], node[null], [P], v[0], s[UNASSIGNED], unassigned_info[[reason=CLUSTER_RECOVERED], at[2016-10-13T10:59:15.343Z]]] to [[{FH-CND-SS}{d9cuWsBuSJCdsG1LuoKlsg}{211.138.22.118}{211.138.22.118:9300}]] on primary allocation\n```\n\nI have read [https://discuss.elastic.co/t/risk-associated-with-action-write-consistency-and-index-recovery-initial-shards-for-cluster-recovery-with-a-single-node/50211](url) and set \"index.recovery.initial_shards\" : 1，but it didn't help.\nAnd from here [https://t37.net/how-to-fix-your-elasticsearch-cluster-stuck-in-initializing-shards-mode.html](url) I tried reroute my indexs to my single node, but it came out a problem that my data is lost. I need help.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/253493291","html_url":"https://github.com/elastic/elasticsearch/issues/20854#issuecomment-253493291","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20854","id":253493291,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MzQ5MzI5MQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-10-13T12:00:10Z","updated_at":"2016-10-13T12:00:10Z","author_association":"CONTRIBUTOR","body":"> @s1monw I have upgraded to the 2.4.0,but there comes a new problem.\n\nwhat is the problem? these shards are unassigned but should assign at some point? How many unassigned shards do you have. Do they initialize?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/253689573","html_url":"https://github.com/elastic/elasticsearch/issues/20854#issuecomment-253689573","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20854","id":253689573,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MzY4OTU3Mw==","user":{"login":"lizhecao","id":8225585,"node_id":"MDQ6VXNlcjgyMjU1ODU=","avatar_url":"https://avatars3.githubusercontent.com/u/8225585?v=4","gravatar_id":"","url":"https://api.github.com/users/lizhecao","html_url":"https://github.com/lizhecao","followers_url":"https://api.github.com/users/lizhecao/followers","following_url":"https://api.github.com/users/lizhecao/following{/other_user}","gists_url":"https://api.github.com/users/lizhecao/gists{/gist_id}","starred_url":"https://api.github.com/users/lizhecao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lizhecao/subscriptions","organizations_url":"https://api.github.com/users/lizhecao/orgs","repos_url":"https://api.github.com/users/lizhecao/repos","events_url":"https://api.github.com/users/lizhecao/events{/privacy}","received_events_url":"https://api.github.com/users/lizhecao/received_events","type":"User","site_admin":false},"created_at":"2016-10-14T01:51:32Z","updated_at":"2016-10-14T01:54:26Z","author_association":"NONE","body":"> what is the problem?\n\nthe problem is that many shards are unassigned. My cluster has only one node.\n\n> these shards are unassigned but should assign at some point? \n\nyes,these shards are primary shards which should assign at my node.\nthe health of the cluster is red as shown below\n`{\n  \"cluster_name\": \"stsc_p2p\",\n  \"status\": \"red\",\n  \"timed_out\": false,\n  \"number_of_nodes\": 1,\n  \"number_of_data_nodes\": 1,\n  \"active_primary_shards\": 203,\n  \"active_shards\": 203,\n  \"relocating_shards\": 0,\n  \"initializing_shards\": 4,\n  \"unassigned_shards\": 495,\n  \"delayed_unassigned_shards\": 0,\n  \"number_of_pending_tasks\": 275,\n  \"number_of_in_flight_fetch\": 0,\n  \"task_max_waiting_in_queue_millis\": 10650,\n  \"active_shards_percent_as_number\": 28.917378917378915\n}`\n\n> How many unassigned shards do you have. Do they initialize?\n\nI have 495 shards unassigned. How to see whether they are initialized?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/253729564","html_url":"https://github.com/elastic/elasticsearch/issues/20854#issuecomment-253729564","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20854","id":253729564,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MzcyOTU2NA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-10-14T07:31:46Z","updated_at":"2016-10-14T07:31:46Z","author_association":"CONTRIBUTOR","body":"they should initialize one after another. You have 4 initializing and that is the default value for `cluster.routing.allocation.node_concurrent_recoveries` if you want to bump this up just update it via the [cluster settings update API:](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html)\n\n``` SHELL\ncurl -XPUT localhost:9200/_cluster/settings -d '{\n    \"transient\" : {\n        \"cluster.routing.allocation.node_concurrent_recoveries\" : 10\n    }\n}'\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/253752727","html_url":"https://github.com/elastic/elasticsearch/issues/20854#issuecomment-253752727","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20854","id":253752727,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Mzc1MjcyNw==","user":{"login":"lizhecao","id":8225585,"node_id":"MDQ6VXNlcjgyMjU1ODU=","avatar_url":"https://avatars3.githubusercontent.com/u/8225585?v=4","gravatar_id":"","url":"https://api.github.com/users/lizhecao","html_url":"https://github.com/lizhecao","followers_url":"https://api.github.com/users/lizhecao/followers","following_url":"https://api.github.com/users/lizhecao/following{/other_user}","gists_url":"https://api.github.com/users/lizhecao/gists{/gist_id}","starred_url":"https://api.github.com/users/lizhecao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lizhecao/subscriptions","organizations_url":"https://api.github.com/users/lizhecao/orgs","repos_url":"https://api.github.com/users/lizhecao/repos","events_url":"https://api.github.com/users/lizhecao/events{/privacy}","received_events_url":"https://api.github.com/users/lizhecao/received_events","type":"User","site_admin":false},"created_at":"2016-10-14T09:29:52Z","updated_at":"2016-10-17T15:08:04Z","author_association":"NONE","body":"I tried it， but it didn't help.\nAfter I set \"cluster.routing.allocation.node_concurrent_recoveries\": 10, the health of cluster is still\n\n```\n{\n  \"cluster_name\": \"stsc_p2p\",\n  \"status\": \"red\",\n  \"timed_out\": false,\n  \"number_of_nodes\": 1,\n  \"number_of_data_nodes\": 1,\n  \"active_primary_shards\": 205,\n  \"active_shards\": 205,\n  \"relocating_shards\": 0,\n  \"initializing_shards\": 4,\n  \"unassigned_shards\": 493,\n  \"delayed_unassigned_shards\": 0,\n  \"number_of_pending_tasks\": 175846,\n  \"number_of_in_flight_fetch\": 0,\n  \"task_max_waiting_in_queue_millis\": 2273250,\n  \"active_shards_percent_as_number\": 29.2022792022792\n}\n```\n\nAnd there are persitent logging as below:\n\n```\n[2016-10-14 17:29:22,990][DEBUG][gateway                  ] [FH-CND-SS] [content_flow_log_20160914][4] found 1 allocations of [content_flow_log_20160914][4], node[null], [P], v[0], s[UNASSIGNED], unassigned_info[[reason=CLUSTER_RECOVERED], at[2016-10-14T08:27:01.645Z]], highest version: [20]\n[2016-10-14 17:29:22,990][DEBUG][gateway                  ] [FH-CND-SS] [content_flow_log_20160914][4]: throttling allocation [[content_flow_log_20160914][4], node[null], [P], v[0], s[UNASSIGNED], unassigned_info[[reason=CLUSTER_RECOVERED], at[2016-10-14T08:27:01.645Z]]] to [[{FH-CND-SS}{_uzMYD-4RFm8T56t8cbuoA}{211.138.22.118}{211.138.22.118:9300}]] on primary allocation\n[2016-10-14 17:29:22,991][DEBUG][gateway                  ] [FH-CND-SS] [content_flow_log_20160914][0] found 1 allocations of [content_flow_log_20160914][0], node[null], [P], v[0], s[UNASSIGNED], unassigned_info[[reason=CLUSTER_RECOVERED], at[2016-10-14T08:27:01.645Z]], highest version: [20]\n[2016-10-14 17:29:22,991][DEBUG][gateway                  ] [FH-CND-SS] [content_flow_log_20160914][0]: throttling allocation [[content_flow_log_20160914][0], node[null], [P], v[0], s[UNASSIGNED], unassigned_info[[reason=CLUSTER_RECOVERED], at[2016-10-14T08:27:01.645Z]]] to [[{FH-CND-SS}{_uzMYD-4RFm8T56t8cbuoA}{211.138.22.118}{211.138.22.118:9300}]] on primary allocation\n[2016-10-14 17:29:22,991][DEBUG][gateway                  ] [FH-CND-SS] [content_flow_log_20160914][5] found 1 allocations of [content_flow_log_20160914][5], node[null], [P], v[0], s[UNASSIGNED], unassigned_info[[reason=CLUSTER_RECOVERED], at[2016-10-14T08:27:01.645Z]], highest version: [20]\n[2016-10-14 17:29:22,991][DEBUG][gateway                  ] [FH-CND-SS] [content_flow_log_20160914][5]: throttling allocation [[content_flow_log_20160914][5], node[null], [P], v[0], s[UNASSIGNED], unassigned_info[[reason=CLUSTER_RECOVERED], at[2016-10-14T08:27:01.645Z]]] to [[{FH-CND-SS}{_uzMYD-4RFm8T56t8cbuoA}{211.138.22.118}{211.138.22.118:9300}]] on primary allocation\n[2016-10-14 17:29:22,991][DEBUG][gateway                  ] [FH-CND-SS] [content_flow_log_20160914][1] found 1 allocations of [content_flow_log_20160914][1], node[null], [P], v[0], s[UNASSIGNED], unassigned_info[[reason=CLUSTER_RECOVERED], at[2016-10-14T08:27:01.645Z]], highest version: [20]\n[2016-10-14 17:29:22,991][DEBUG][gateway                  ] [FH-CND-SS] [content_flow_log_20160914][1]: throttling allocation [[content_flow_log_20160914][1], node[null], [P], v[0], s[UNASSIGNED], unassigned_info[[reason=CLUSTER_RECOVERED], at[2016-10-14T08:27:01.645Z]]] to [[{FH-CND-SS}{_uzMYD-4RFm8T56t8cbuoA}{211.138.22.118}{211.138.22.118:9300}]] on primary allocation\n[2016-10-14 17:29:22,991][DEBUG][gateway                  ] [FH-CND-SS] [peer_flow_log_20160914][3] found 1 allocations of [peer_flow_log_20160914][3], node[null], [P], v[0], s[UNASSIGNED], unassigned_info[[reason=CLUSTER_RECOVERED], at[2016-10-14T08:27:01.639Z]], highest version: [20]\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/253756441","html_url":"https://github.com/elastic/elasticsearch/issues/20854#issuecomment-253756441","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20854","id":253756441,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Mzc1NjQ0MQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-10-14T09:47:45Z","updated_at":"2016-10-14T09:47:45Z","author_association":"CONTRIBUTOR","body":"do you see any exceptions in the log files?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/254090928","html_url":"https://github.com/elastic/elasticsearch/issues/20854#issuecomment-254090928","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20854","id":254090928,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NDA5MDkyOA==","user":{"login":"lizhecao","id":8225585,"node_id":"MDQ6VXNlcjgyMjU1ODU=","avatar_url":"https://avatars3.githubusercontent.com/u/8225585?v=4","gravatar_id":"","url":"https://api.github.com/users/lizhecao","html_url":"https://github.com/lizhecao","followers_url":"https://api.github.com/users/lizhecao/followers","following_url":"https://api.github.com/users/lizhecao/following{/other_user}","gists_url":"https://api.github.com/users/lizhecao/gists{/gist_id}","starred_url":"https://api.github.com/users/lizhecao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lizhecao/subscriptions","organizations_url":"https://api.github.com/users/lizhecao/orgs","repos_url":"https://api.github.com/users/lizhecao/repos","events_url":"https://api.github.com/users/lizhecao/events{/privacy}","received_events_url":"https://api.github.com/users/lizhecao/received_events","type":"User","site_admin":false},"created_at":"2016-10-17T01:08:11Z","updated_at":"2016-10-17T01:08:11Z","author_association":"NONE","body":"I have emailed the log to you, please help me see what's wrong.\nI have no idea how to recover the shards.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/254235678","html_url":"https://github.com/elastic/elasticsearch/issues/20854#issuecomment-254235678","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20854","id":254235678,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NDIzNTY3OA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-10-17T15:09:22Z","updated_at":"2016-10-17T15:09:22Z","author_association":"CONTRIBUTOR","body":"@lizhecao it looks like your shards are recovering, just slowly.  there are no exceptions in what you showed above.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/254394636","html_url":"https://github.com/elastic/elasticsearch/issues/20854#issuecomment-254394636","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20854","id":254394636,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NDM5NDYzNg==","user":{"login":"lizhecao","id":8225585,"node_id":"MDQ6VXNlcjgyMjU1ODU=","avatar_url":"https://avatars3.githubusercontent.com/u/8225585?v=4","gravatar_id":"","url":"https://api.github.com/users/lizhecao","html_url":"https://github.com/lizhecao","followers_url":"https://api.github.com/users/lizhecao/followers","following_url":"https://api.github.com/users/lizhecao/following{/other_user}","gists_url":"https://api.github.com/users/lizhecao/gists{/gist_id}","starred_url":"https://api.github.com/users/lizhecao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lizhecao/subscriptions","organizations_url":"https://api.github.com/users/lizhecao/orgs","repos_url":"https://api.github.com/users/lizhecao/repos","events_url":"https://api.github.com/users/lizhecao/events{/privacy}","received_events_url":"https://api.github.com/users/lizhecao/received_events","type":"User","site_admin":false},"created_at":"2016-10-18T03:07:02Z","updated_at":"2016-10-18T03:07:02Z","author_association":"NONE","body":"how long will it take for a shard recovery, I have waited for a long time.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/254786268","html_url":"https://github.com/elastic/elasticsearch/issues/20854#issuecomment-254786268","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20854","id":254786268,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NDc4NjI2OA==","user":{"login":"lizhecao","id":8225585,"node_id":"MDQ6VXNlcjgyMjU1ODU=","avatar_url":"https://avatars3.githubusercontent.com/u/8225585?v=4","gravatar_id":"","url":"https://api.github.com/users/lizhecao","html_url":"https://github.com/lizhecao","followers_url":"https://api.github.com/users/lizhecao/followers","following_url":"https://api.github.com/users/lizhecao/following{/other_user}","gists_url":"https://api.github.com/users/lizhecao/gists{/gist_id}","starred_url":"https://api.github.com/users/lizhecao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lizhecao/subscriptions","organizations_url":"https://api.github.com/users/lizhecao/orgs","repos_url":"https://api.github.com/users/lizhecao/repos","events_url":"https://api.github.com/users/lizhecao/events{/privacy}","received_events_url":"https://api.github.com/users/lizhecao/received_events","type":"User","site_admin":false},"created_at":"2016-10-19T11:28:48Z","updated_at":"2016-10-19T11:29:56Z","author_association":"NONE","body":"Are there any methods to speed it up? @clintongormley @s1monw \nIt recover only 10 shards 1.5 day. And there are 400 shards unassigned.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/290719246","html_url":"https://github.com/elastic/elasticsearch/issues/20854#issuecomment-290719246","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20854","id":290719246,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDcxOTI0Ng==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2017-03-31T13:57:42Z","updated_at":"2017-03-31T13:57:42Z","author_association":"MEMBER","body":"@lizhecao are you still seeing this issue? If so please provide details and reopen the issue","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/292700618","html_url":"https://github.com/elastic/elasticsearch/issues/20854#issuecomment-292700618","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20854","id":292700618,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjcwMDYxOA==","user":{"login":"lizhecao","id":8225585,"node_id":"MDQ6VXNlcjgyMjU1ODU=","avatar_url":"https://avatars3.githubusercontent.com/u/8225585?v=4","gravatar_id":"","url":"https://api.github.com/users/lizhecao","html_url":"https://github.com/lizhecao","followers_url":"https://api.github.com/users/lizhecao/followers","following_url":"https://api.github.com/users/lizhecao/following{/other_user}","gists_url":"https://api.github.com/users/lizhecao/gists{/gist_id}","starred_url":"https://api.github.com/users/lizhecao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lizhecao/subscriptions","organizations_url":"https://api.github.com/users/lizhecao/orgs","repos_url":"https://api.github.com/users/lizhecao/repos","events_url":"https://api.github.com/users/lizhecao/events{/privacy}","received_events_url":"https://api.github.com/users/lizhecao/received_events","type":"User","site_admin":false},"created_at":"2017-04-08T07:16:48Z","updated_at":"2017-04-08T07:16:48Z","author_association":"NONE","body":"@colings86 3q for help. but now I can't provider details because the environment that time has been lost now. my solution is to copy the translog.ckp as the lost ckp file","performed_via_github_app":null}]