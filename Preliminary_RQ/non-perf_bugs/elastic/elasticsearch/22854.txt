{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/22854","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22854/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22854/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22854/events","html_url":"https://github.com/elastic/elasticsearch/issues/22854","id":203901951,"node_id":"MDU6SXNzdWUyMDM5MDE5NTE=","number":22854,"title":"FieldStatsResponse.getIndicesMergedFieldStatus returns unchecked FieldStats","user":{"login":"trejkaz","id":43236,"node_id":"MDQ6VXNlcjQzMjM2","avatar_url":"https://avatars2.githubusercontent.com/u/43236?v=4","gravatar_id":"","url":"https://api.github.com/users/trejkaz","html_url":"https://github.com/trejkaz","followers_url":"https://api.github.com/users/trejkaz/followers","following_url":"https://api.github.com/users/trejkaz/following{/other_user}","gists_url":"https://api.github.com/users/trejkaz/gists{/gist_id}","starred_url":"https://api.github.com/users/trejkaz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trejkaz/subscriptions","organizations_url":"https://api.github.com/users/trejkaz/orgs","repos_url":"https://api.github.com/users/trejkaz/repos","events_url":"https://api.github.com/users/trejkaz/events{/privacy}","received_events_url":"https://api.github.com/users/trejkaz/received_events","type":"User","site_admin":false},"labels":[{"id":146836529,"node_id":"MDU6TGFiZWwxNDY4MzY1Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Stats","name":":Core/Features/Stats","color":"0e8a16","default":false,"description":"Statistics tracking and retrieval APIs"},{"id":146829143,"node_id":"MDU6TGFiZWwxNDY4MjkxNDM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Transport%20API","name":":Core/Infra/Transport API","color":"0e8a16","default":false,"description":"Transport client API"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-01-29T22:34:54Z","updated_at":"2018-03-13T12:39:07Z","closed_at":"2018-03-13T12:39:07Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**:\r\n\r\n2.4.1, 5.1.2\r\n\r\n**Plugins installed**: []\r\n\r\nn/a\r\n\r\n**JVM version**:\r\n\r\nn/a\r\n\r\n**OS version**:\r\n\r\nn/a\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\n**Steps to reproduce**:\r\n\r\nHave some code referencing FieldStatsResponse. e.g.:\r\n\r\n            FieldStatsResponse response = getClient().prepareFieldStats()\r\n                                                     .setIndices(getIndexId(IndexIdCategory.ITEM))\r\n                                                     .setLevel(\"indices\")\r\n                                                     .setFields(STORE_SPECIFIC_ID)\r\n                                                     .get();\r\n\r\n            Map<String, Map<String, FieldStats>> stats = response.getIndicesMergedFieldStats();\r\n\r\nAn unchecked warning shows up on the FieldStats because we have not specified its type parameter.\r\n\r\nNow try to fix it:\r\n\r\n            Map<String, Map<String, FieldStats<Long>>> stats = response.getIndicesMergedFieldStats();\r\n\r\nNow you'll get a compilation error. It turns out that getIndicesMergedFieldStats() also references it without the parameter:\r\n\r\n        public Map<String, Map<String, FieldStats>> getIndicesMergedFieldStats() {\r\n            return this.indicesMergedFieldStats;\r\n        }\r\n\r\nI'd like it to return the type parametrised.\r\n\r\nThe workaround is probably to cast to Map<?> and then back to the more correct type, and slap an unchecked warning suppression on the line with the cast.\r\n","closed_by":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"performed_via_github_app":null}