[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/625822256","html_url":"https://github.com/elastic/elasticsearch/issues/56422#issuecomment-625822256","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56422","id":625822256,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNTgyMjI1Ng==","user":{"login":"mikkorantalainen","id":259482,"node_id":"MDQ6VXNlcjI1OTQ4Mg==","avatar_url":"https://avatars0.githubusercontent.com/u/259482?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkorantalainen","html_url":"https://github.com/mikkorantalainen","followers_url":"https://api.github.com/users/mikkorantalainen/followers","following_url":"https://api.github.com/users/mikkorantalainen/following{/other_user}","gists_url":"https://api.github.com/users/mikkorantalainen/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkorantalainen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkorantalainen/subscriptions","organizations_url":"https://api.github.com/users/mikkorantalainen/orgs","repos_url":"https://api.github.com/users/mikkorantalainen/repos","events_url":"https://api.github.com/users/mikkorantalainen/events{/privacy}","received_events_url":"https://api.github.com/users/mikkorantalainen/received_events","type":"User","site_admin":false},"created_at":"2020-05-08T13:42:58Z","updated_at":"2020-05-08T13:42:58Z","author_association":"NONE","body":"s/BootstrapCheckResult/HeapSizeCheck/","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/625828452","html_url":"https://github.com/elastic/elasticsearch/issues/56422#issuecomment-625828452","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56422","id":625828452,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNTgyODQ1Mg==","user":{"login":"mikkorantalainen","id":259482,"node_id":"MDQ6VXNlcjI1OTQ4Mg==","avatar_url":"https://avatars0.githubusercontent.com/u/259482?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkorantalainen","html_url":"https://github.com/mikkorantalainen","followers_url":"https://api.github.com/users/mikkorantalainen/followers","following_url":"https://api.github.com/users/mikkorantalainen/following{/other_user}","gists_url":"https://api.github.com/users/mikkorantalainen/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkorantalainen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkorantalainen/subscriptions","organizations_url":"https://api.github.com/users/mikkorantalainen/orgs","repos_url":"https://api.github.com/users/mikkorantalainen/repos","events_url":"https://api.github.com/users/mikkorantalainen/events{/privacy}","received_events_url":"https://api.github.com/users/mikkorantalainen/received_events","type":"User","site_admin":false},"created_at":"2020-05-08T13:57:02Z","updated_at":"2020-05-08T13:57:02Z","author_association":"NONE","body":"See also:\r\nhttps://github.com/elastic/elasticsearch/blob/f5827ba0aed662c90648dcae168750396d59877d/docs/reference/setup/sysconfig/swap.asciidoc#enable-bootstrapmemory_lock","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/625874997","html_url":"https://github.com/elastic/elasticsearch/issues/56422#issuecomment-625874997","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56422","id":625874997,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNTg3NDk5Nw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-05-08T15:37:09Z","updated_at":"2020-05-08T15:37:09Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra (:Core/Infra/Core)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/626253222","html_url":"https://github.com/elastic/elasticsearch/issues/56422#issuecomment-626253222","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56422","id":626253222,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNjI1MzIyMg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2020-05-10T00:17:24Z","updated_at":"2020-05-10T00:21:30Z","author_association":"MEMBER","body":"It’s not only related to memory locking, there are also resize pauses.\r\n\r\n> To reduce memory usage we would like to run elasticsearch with as little memory as possible. \r\n\r\nThen you need to set Xmx lower, allowing Xms to be less than Xmx doesn’t help you in this goal if the heap size can increase up to Xmx, and Xmx is too large for your use case.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/626491872","html_url":"https://github.com/elastic/elasticsearch/issues/56422#issuecomment-626491872","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56422","id":626491872,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNjQ5MTg3Mg==","user":{"login":"mikkorantalainen","id":259482,"node_id":"MDQ6VXNlcjI1OTQ4Mg==","avatar_url":"https://avatars0.githubusercontent.com/u/259482?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkorantalainen","html_url":"https://github.com/mikkorantalainen","followers_url":"https://api.github.com/users/mikkorantalainen/followers","following_url":"https://api.github.com/users/mikkorantalainen/following{/other_user}","gists_url":"https://api.github.com/users/mikkorantalainen/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkorantalainen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkorantalainen/subscriptions","organizations_url":"https://api.github.com/users/mikkorantalainen/orgs","repos_url":"https://api.github.com/users/mikkorantalainen/repos","events_url":"https://api.github.com/users/mikkorantalainen/events{/privacy}","received_events_url":"https://api.github.com/users/mikkorantalainen/received_events","type":"User","site_admin":false},"created_at":"2020-05-11T06:10:22Z","updated_at":"2020-05-11T06:10:22Z","author_association":"NONE","body":"Could you at least fix the error message in BootstrapCheckResult() (https://github.com/elastic/elasticsearch/blob/5a3c4524805f88f0875989d656f87c01595a8de7/server/src/main/java/org/elasticsearch/bootstrap/BootstrapChecks.java#L231) if you intend to not fix this issue? It currently says \r\n\r\n    \"initial heap size [%d] not equal to maximum heap size [%d]; \" +\r\n    \"this can cause resize pauses and prevents mlockall from locking the entire heap\"\r\n\r\nwhich makes zero sense if one is not using mlockall support.\r\n\r\nI understand that you feel that -Xms and -Xmx flags must be set to equal amounts. I still believe that CMS (and maybe Z GC with Java 11) should be able to waste less memory on average if elasticsearch didn't use hardcoded memory space for full process duration and still allow higher memory consumption for weird corner cases. (It's not like we cannot use the memory if required but we would rather use the RAM as additional disk cache than keeping it reserved for elasticsearch forever.) As such, unless mlockall support has been requested via config, the above test should output a warning instead of forcing a failure.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/627094004","html_url":"https://github.com/elastic/elasticsearch/issues/56422#issuecomment-627094004","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56422","id":627094004,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNzA5NDAwNA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2020-05-12T03:59:15Z","updated_at":"2020-05-12T03:59:15Z","author_association":"MEMBER","body":"Thanks for the feedback. I opened #56565.","performed_via_github_app":null}]