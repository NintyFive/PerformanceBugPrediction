[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/4833557","html_url":"https://github.com/elastic/elasticsearch/issues/1823#issuecomment-4833557","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1823","id":4833557,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MzM1NTc=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2012-03-29T23:26:46Z","updated_at":"2012-03-29T23:26:46Z","author_association":"MEMBER","body":"After talking to @outoftime, we figured out it happens because of using `preference` set to `primary` when doing the get, and while the node is being shutdown, and a primary shard is allocated to it, it takes some time to elect the new primary shard. We could potentially block till it happens, but thats tricky, for now, I opened #1824 which will provide a nice solution as well.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/4833609","html_url":"https://github.com/elastic/elasticsearch/issues/1823#issuecomment-4833609","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1823","id":4833609,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MzM2MDk=","user":{"login":"heffergm","id":629729,"node_id":"MDQ6VXNlcjYyOTcyOQ==","avatar_url":"https://avatars1.githubusercontent.com/u/629729?v=4","gravatar_id":"","url":"https://api.github.com/users/heffergm","html_url":"https://github.com/heffergm","followers_url":"https://api.github.com/users/heffergm/followers","following_url":"https://api.github.com/users/heffergm/following{/other_user}","gists_url":"https://api.github.com/users/heffergm/gists{/gist_id}","starred_url":"https://api.github.com/users/heffergm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heffergm/subscriptions","organizations_url":"https://api.github.com/users/heffergm/orgs","repos_url":"https://api.github.com/users/heffergm/repos","events_url":"https://api.github.com/users/heffergm/events{/privacy}","received_events_url":"https://api.github.com/users/heffergm/received_events","type":"User","site_admin":false},"created_at":"2012-03-29T23:30:17Z","updated_at":"2012-03-29T23:30:17Z","author_association":"NONE","body":"Ah, I'd hypothesized that's what was going on. 1824 sounds like a good fix. \n\nThanks!\n\n## \n\nGrant Heffernan\n~via tiny keyboard\n\nOn Mar 29, 2012, at 7:26 PM, Shay Banonreply@reply.github.com wrote:\n\n> After talking to @outoftime, we figured out it happens because of using `preference` set to `primary` when doing the get, and while the node is being shutdown, and a primary shard is allocated to it, it takes some time to elect the new primary shard. We could potentially block till it happens, but thats tricky, for now, I opened #1824 which will provide a nice solution as well.\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/elasticsearch/elasticsearch/issues/1823#issuecomment-4833557\n","performed_via_github_app":null}]