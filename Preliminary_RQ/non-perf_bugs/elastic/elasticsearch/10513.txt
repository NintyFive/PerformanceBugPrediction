{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/10513","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10513/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10513/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10513/events","html_url":"https://github.com/elastic/elasticsearch/issues/10513","id":67401017,"node_id":"MDU6SXNzdWU2NzQwMTAxNw==","number":10513,"title":"[GEO] GeoShapeFieldMapper incorrectly acknowledges mapping changes","user":{"login":"nknize","id":830187,"node_id":"MDQ6VXNlcjgzMDE4Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/830187?v=4","gravatar_id":"","url":"https://api.github.com/users/nknize","html_url":"https://github.com/nknize","followers_url":"https://api.github.com/users/nknize/followers","following_url":"https://api.github.com/users/nknize/following{/other_user}","gists_url":"https://api.github.com/users/nknize/gists{/gist_id}","starred_url":"https://api.github.com/users/nknize/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nknize/subscriptions","organizations_url":"https://api.github.com/users/nknize/orgs","repos_url":"https://api.github.com/users/nknize/repos","events_url":"https://api.github.com/users/nknize/events{/privacy}","received_events_url":"https://api.github.com/users/nknize/received_events","type":"User","site_admin":false},"labels":[{"id":141079527,"node_id":"MDU6TGFiZWwxNDEwNzk1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Analytics/Geo","name":":Analytics/Geo","color":"0e8a16","default":false,"description":"Indexing, search aggregations of geo points and shapes"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2015-04-09T16:35:48Z","updated_at":"2015-04-10T19:40:23Z","closed_at":"2015-04-10T19:40:23Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"GeoShapeFieldMapper does not overload `merge()`, so the following request produces \n `acknowledged: \"true\"` from the `AbstractFieldMapper`\n\n``` json\n# update mapping after inserting a shape\nPUT geo-shapes/doc/_mapping\n{\n  \"doc\": {\n    \"properties\": {\n        \"geometry\": {\n          \"type\": \"geo_shape\",\n          \"tree\": \"quadtree\",\n          \"tree_levels\": 26,\n          \"distance_error_pct\": 0\n        }\n    }\n  }\n}\n```\n\nThis is misleading since changing field parameters has zero impact on the `GeoShapeFieldMapper` itself leading to a user thinking they're indexing at a higher precision when no change has occurred.  This is bad news for query expectations.\n\nThis issue will be corrected by overloading merge to add conflicts if certain parameters are changed.  \n","closed_by":{"login":"nknize","id":830187,"node_id":"MDQ6VXNlcjgzMDE4Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/830187?v=4","gravatar_id":"","url":"https://api.github.com/users/nknize","html_url":"https://github.com/nknize","followers_url":"https://api.github.com/users/nknize/followers","following_url":"https://api.github.com/users/nknize/following{/other_user}","gists_url":"https://api.github.com/users/nknize/gists{/gist_id}","starred_url":"https://api.github.com/users/nknize/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nknize/subscriptions","organizations_url":"https://api.github.com/users/nknize/orgs","repos_url":"https://api.github.com/users/nknize/repos","events_url":"https://api.github.com/users/nknize/events{/privacy}","received_events_url":"https://api.github.com/users/nknize/received_events","type":"User","site_admin":false},"performed_via_github_app":null}