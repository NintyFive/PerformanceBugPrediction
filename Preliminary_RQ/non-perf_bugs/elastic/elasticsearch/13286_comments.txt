[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/137455347","html_url":"https://github.com/elastic/elasticsearch/issues/13286#issuecomment-137455347","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13286","id":137455347,"node_id":"MDEyOklzc3VlQ29tbWVudDEzNzQ1NTM0Nw==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2015-09-03T13:53:49Z","updated_at":"2015-09-03T14:27:07Z","author_association":"MEMBER","body":"Here is an example of a failure during packaging: \n\n```\nroot@ecm:/etc# dpkg --purge elasticsearch\n(Reading database ... 169011 files and directories currently installed.)\nRemoving elasticsearch (1.5.2) ...\nPurging configuration files for elasticsearch (1.5.2) ...\nRemoving user `elasticsearch' ...\nWarning: group `elasticsearch' has no more members.\nDone.\nThe group `elasticsearch' does not exist.\ndpkg: warning: while removing elasticsearch, directory '/etc/elasticsearch' not empty so not removed\nroot@ecm:/etc# mc\n\nroot@ecm:/usr/share# /var/lib\nbash: /var/lib: Is a directory\n\nroot@ecm:/home/system# mk old\nbash: mk: command not found\n\nroot@ecm:/home/system# mkdir old\n\nroot@ecm:/home/system# mv elasticsearch old/.\n\nroot@ecm:/etc# apt-get install elasticsearch\nReading package lists... Done\nBuilding dependency tree\nReading state information... Done\nThe following NEW packages will be installed:\n  elasticsearch\n0 upgraded, 1 newly installed, 0 to remove and 1 not upgraded.\nNeed to get 0 B/27.0 MB of archives.\nAfter this operation, 31.0 MB of additional disk space will be used.\ndpkg: unrecoverable fatal error, aborting:\n unknown user 'elasticsearch' in statoverride file\nE: Sub-process /usr/bin/dpkg returned an error code (2)\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/137465948","html_url":"https://github.com/elastic/elasticsearch/issues/13286#issuecomment-137465948","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13286","id":137465948,"node_id":"MDEyOklzc3VlQ29tbWVudDEzNzQ2NTk0OA==","user":{"login":"electrical","id":271677,"node_id":"MDQ6VXNlcjI3MTY3Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/271677?v=4","gravatar_id":"","url":"https://api.github.com/users/electrical","html_url":"https://github.com/electrical","followers_url":"https://api.github.com/users/electrical/followers","following_url":"https://api.github.com/users/electrical/following{/other_user}","gists_url":"https://api.github.com/users/electrical/gists{/gist_id}","starred_url":"https://api.github.com/users/electrical/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/electrical/subscriptions","organizations_url":"https://api.github.com/users/electrical/orgs","repos_url":"https://api.github.com/users/electrical/repos","events_url":"https://api.github.com/users/electrical/events{/privacy}","received_events_url":"https://api.github.com/users/electrical/received_events","type":"User","site_admin":false},"created_at":"2015-09-03T14:27:56Z","updated_at":"2015-09-03T14:27:56Z","author_association":"CONTRIBUTOR","body":"fyi, i do installs and uninstalls ( purge ) with the puppet module and never ran into this issue.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/137853984","html_url":"https://github.com/elastic/elasticsearch/issues/13286#issuecomment-137853984","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13286","id":137853984,"node_id":"MDEyOklzc3VlQ29tbWVudDEzNzg1Mzk4NA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2015-09-04T21:09:35Z","updated_at":"2015-09-04T21:09:35Z","author_association":"CONTRIBUTOR","body":"I can't reproduce the issue either - the `statoverride` thing makes me thing the user is seeing #12189.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/137854092","html_url":"https://github.com/elastic/elasticsearch/issues/13286#issuecomment-137854092","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13286","id":137854092,"node_id":"MDEyOklzc3VlQ29tbWVudDEzNzg1NDA5Mg==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2015-09-04T21:10:01Z","updated_at":"2015-09-04T21:10:01Z","author_association":"CONTRIBUTOR","body":"But I'll still add purge/reinstall to the tests just to verify that that works. It should and we don't do it in a single test run.\n","performed_via_github_app":null}]