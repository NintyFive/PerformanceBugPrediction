[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/114566311","html_url":"https://github.com/elastic/elasticsearch/issues/11775#issuecomment-114566311","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11775","id":114566311,"node_id":"MDEyOklzc3VlQ29tbWVudDExNDU2NjMxMQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-06-23T16:40:05Z","updated_at":"2015-06-23T16:40:05Z","author_association":"CONTRIBUTOR","body":"Hi @alexkuk \n\nI'm assuming you mean that you'd calculate the avg visits_number across all docs (or across all matching docs) and then use it in the score calculation?  If so, then no, there's no automatic way of doing this.  Essentially you'd require two requests: one to calculate the avg then another to apply that value to the search hits.\n\nThis is what Elasticsearch would have to do as well.  You can already do this today with two search requests. There's no real advantage to Elasticsearch doing it for you in this case.\n\nthanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/114567751","html_url":"https://github.com/elastic/elasticsearch/issues/11775#issuecomment-114567751","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11775","id":114567751,"node_id":"MDEyOklzc3VlQ29tbWVudDExNDU2Nzc1MQ==","user":{"login":"alexkuk","id":2719860,"node_id":"MDQ6VXNlcjI3MTk4NjA=","avatar_url":"https://avatars1.githubusercontent.com/u/2719860?v=4","gravatar_id":"","url":"https://api.github.com/users/alexkuk","html_url":"https://github.com/alexkuk","followers_url":"https://api.github.com/users/alexkuk/followers","following_url":"https://api.github.com/users/alexkuk/following{/other_user}","gists_url":"https://api.github.com/users/alexkuk/gists{/gist_id}","starred_url":"https://api.github.com/users/alexkuk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexkuk/subscriptions","organizations_url":"https://api.github.com/users/alexkuk/orgs","repos_url":"https://api.github.com/users/alexkuk/repos","events_url":"https://api.github.com/users/alexkuk/events{/privacy}","received_events_url":"https://api.github.com/users/alexkuk/received_events","type":"User","site_admin":false},"created_at":"2015-06-23T16:46:30Z","updated_at":"2015-06-23T16:46:30Z","author_association":"NONE","body":"Thx for the answer. \nSure. I see your point and I already implemented it. But I thought that when ES does rescoring, it already has the data returned by the main query. So I thought probably it's possible to access this data from rescore scripts.\n","performed_via_github_app":null}]