{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/15562","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15562/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15562/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15562/events","html_url":"https://github.com/elastic/elasticsearch/issues/15562","id":123213108,"node_id":"MDU6SXNzdWUxMjMyMTMxMDg=","number":15562,"title":"`/_nodes/hot_threads` fails entirely with no message on FreeBSD","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"labels":[{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2015-12-21T05:23:20Z","updated_at":"2015-12-22T23:01:57Z","closed_at":"2015-12-22T23:01:57Z","author_association":"MEMBER","active_lock_reason":null,"body":"When running on FreeBSD, using the hot_threads API causes this exception is the logs:\n\n```\n[2015-12-20 22:21:42,473][DEBUG][action.admin.cluster.node.hotthreads] [Noh-Varr] failed to execute on node [fQuWKkdWRauzZNKz21sskA]\nRemoteTransportException[[Noh-Varr][127.0.0.1:9300][cluster:monitor/nodes/hot_threads[n]]]; nested: ElasticsearchException[failed to detect hot threads]; nested: IllegalStateException[MBean doesn't support thread CPU Time];\nCaused by: ElasticsearchException[failed to detect hot threads]; nested: IllegalStateException[MBean doesn't support thread CPU Time];\n        at org.elasticsearch.action.admin.cluster.node.hotthreads.TransportNodesHotThreadsAction.nodeOperation(TransportNodesHotThreadsAction.java:88)\n        at org.elasticsearch.action.admin.cluster.node.hotthreads.TransportNodesHotThreadsAction.nodeOperation(TransportNodesHotThreadsAction.java:45)\n        at org.elasticsearch.action.support.nodes.TransportNodesAction$NodeTransportHandler.messageReceived(TransportNodesAction.java:218)\n        at org.elasticsearch.action.support.nodes.TransportNodesAction$NodeTransportHandler.messageReceived(TransportNodesAction.java:214)\n        at org.elasticsearch.transport.TransportService$4.doRun(TransportService.java:335)\n        at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\nCaused by: java.lang.IllegalStateException: MBean doesn't support thread CPU Time\n        at org.elasticsearch.monitor.jvm.HotThreads.innerDetect(HotThreads.java:153)\n        at org.elasticsearch.monitor.jvm.HotThreads.detect(HotThreads.java:89)\n        at org.elasticsearch.action.admin.cluster.node.hotthreads.TransportNodesHotThreadsAction.nodeOperation(TransportNodesHotThreadsAction.java:86)\n        ... 8 more\n```\n\nThe HTTP response however, is an empty 200 response:\n\n```\nÂ» get -v 127.0.0.1:9200/_nodes/hot_threads\n*   Trying 127.0.0.1...\n* Connected to 127.0.0.1 (127.0.0.1) port 9200 (#0)\n> GET /_nodes/hot_threads HTTP/1.1\n> Host: 127.0.0.1:9200\n> User-Agent: curl/7.46.0\n> Accept: */*\n> \n< HTTP/1.1 200 OK\n< Content-Type: text/plain; charset=UTF-8\n< Content-Length: 0\n< \n* Connection #0 to host 127.0.0.1 left intact\n```\n\n(Note this is running from the master branch of Elasticsearch)\n","closed_by":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"performed_via_github_app":null}