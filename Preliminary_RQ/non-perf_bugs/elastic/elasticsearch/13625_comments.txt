[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/140895509","html_url":"https://github.com/elastic/elasticsearch/issues/13625#issuecomment-140895509","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13625","id":140895509,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MDg5NTUwOQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2015-09-16T21:08:00Z","updated_at":"2015-09-16T21:08:00Z","author_association":"CONTRIBUTOR","body":"Neat!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/143236749","html_url":"https://github.com/elastic/elasticsearch/issues/13625#issuecomment-143236749","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13625","id":143236749,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MzIzNjc0OQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-09-25T14:21:29Z","updated_at":"2015-09-25T14:21:29Z","author_association":"CONTRIBUTOR","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/153719629","html_url":"https://github.com/elastic/elasticsearch/issues/13625#issuecomment-153719629","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13625","id":153719629,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MzcxOTYyOQ==","user":{"login":"felixbarny","id":2163464,"node_id":"MDQ6VXNlcjIxNjM0NjQ=","avatar_url":"https://avatars3.githubusercontent.com/u/2163464?v=4","gravatar_id":"","url":"https://api.github.com/users/felixbarny","html_url":"https://github.com/felixbarny","followers_url":"https://api.github.com/users/felixbarny/followers","following_url":"https://api.github.com/users/felixbarny/following{/other_user}","gists_url":"https://api.github.com/users/felixbarny/gists{/gist_id}","starred_url":"https://api.github.com/users/felixbarny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/felixbarny/subscriptions","organizations_url":"https://api.github.com/users/felixbarny/orgs","repos_url":"https://api.github.com/users/felixbarny/repos","events_url":"https://api.github.com/users/felixbarny/events{/privacy}","received_events_url":"https://api.github.com/users/felixbarny/received_events","type":"User","site_admin":false},"created_at":"2015-11-04T13:30:43Z","updated_at":"2015-11-04T13:30:43Z","author_association":"NONE","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/219006570","html_url":"https://github.com/elastic/elasticsearch/issues/13625#issuecomment-219006570","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13625","id":219006570,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTAwNjU3MA==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2016-05-13T10:22:09Z","updated_at":"2016-05-13T10:22:09Z","author_association":"MEMBER","body":"huge +1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/219008610","html_url":"https://github.com/elastic/elasticsearch/issues/13625#issuecomment-219008610","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13625","id":219008610,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTAwODYxMA==","user":{"login":"tsg","id":101817,"node_id":"MDQ6VXNlcjEwMTgxNw==","avatar_url":"https://avatars1.githubusercontent.com/u/101817?v=4","gravatar_id":"","url":"https://api.github.com/users/tsg","html_url":"https://github.com/tsg","followers_url":"https://api.github.com/users/tsg/followers","following_url":"https://api.github.com/users/tsg/following{/other_user}","gists_url":"https://api.github.com/users/tsg/gists{/gist_id}","starred_url":"https://api.github.com/users/tsg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tsg/subscriptions","organizations_url":"https://api.github.com/users/tsg/orgs","repos_url":"https://api.github.com/users/tsg/repos","events_url":"https://api.github.com/users/tsg/events{/privacy}","received_events_url":"https://api.github.com/users/tsg/received_events","type":"User","site_admin":false},"created_at":"2016-05-13T10:33:42Z","updated_at":"2016-05-13T10:34:25Z","author_association":"NONE","body":"You might have noticed a few ðŸ‘ s from the Beats team :-). That's because in Topbeat/Metricbeat we have percentage values which we currently represent as a float between 0 and 1 as well as other floats for which we don't need great precision. \n\nWe considered storing them as integers and then use UI logic to transform them in floats, but decided to wait for this (or the half-precision floats) to be implemented, as it would obviously be better for everyone.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/219019880","html_url":"https://github.com/elastic/elasticsearch/issues/13625#issuecomment-219019880","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13625","id":219019880,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTAxOTg4MA==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2016-05-13T11:37:38Z","updated_at":"2016-05-13T11:37:38Z","author_association":"MEMBER","body":"btw, this could potentially be completely hidden from the user as an implementation detail? The user can configure precision in the double/float mapping and we do the magic behind the scenes?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/219064583","html_url":"https://github.com/elastic/elasticsearch/issues/13625#issuecomment-219064583","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13625","id":219064583,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTA2NDU4Mw==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2016-05-13T14:46:39Z","updated_at":"2016-05-13T14:46:39Z","author_association":"MEMBER","body":"@tsg @kimchy If you and/or the Metricbeat team can skim through #15939 and see what you think of the discussion, that'd be helpful.  The PR was stalled because concern was raised if a software half-float would be better.  I didn't feel comfortable pushing forward with the PR until a comparison could be made, but I'm not sure I can implement a half-float either (and haven't had the time to sit down and learn the needed bit twiddling).\n\nThere were questions around the API too: specify number of digits, number of bits, etc.\n\n(You can ignore the code comments, I didn't work on them until the bigger issues were resolved).\n\n> btw, this could potentially be completely hidden from the user as an implementation detail? The user can configure precision in the double/float mapping and we do the magic behind the scenes?\n\nHiding it as an implementation detail could be doable, need to think about that.  Floating and fixed have very different edge-cases at their extremes which may be confusing to the user.  E.g. fixed points are precise until they overflow at the edge of their range, floats instead become more increasingly more erroneous.\n\nBut no one understand floating error anyway, so maybe it's moot :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/220171867","html_url":"https://github.com/elastic/elasticsearch/issues/13625#issuecomment-220171867","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13625","id":220171867,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMDE3MTg2Nw==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2016-05-18T22:02:57Z","updated_at":"2016-05-18T22:02:57Z","author_association":"CONTRIBUTOR","body":"> Floating and fixed have very different edge-cases at their extremes which may be confusing to the user.\n\n+1, I don't think we can mix both under the same type without introducing confusion.\n\n> We considered storing them as integers and then use UI logic to transform them in floats, but decided to wait for this (or the half-precision floats) to be implemented, as it would obviously be better for everyone.\n\nI have mixed feelings about this. We could implement it in elasticsearch, but on the other hand I have the feeling it would be more flexible/efficient/easy to do it from client side. For instance imagine we want to store percentages with a precision of 1%: the client would just have to multiply values by 100 at index time and index them as longs (or ints) rather than floats. And then it would also divide values by 100 when reading the _source or the result of histogram, min, max, terms, percentiles, ... aggregations. I think it is great that elasticsearch would be working directly on the \"compressed\" representation. If we want to do the same thing from within elasticsearch, first we have to figure out the right API to expose such numbers (which proved a bit tricky on the PR), and then either we need to add a multiplication on every doc values read, or we try to add the optimization to not decode every value but this is quite error-prone as we can optimize eg. histogram aggregations to divide post aggregation, but if the field is fed to the scripting API we still need to decode every value. So I'm afraid it would not be easy to expose in a generic way.\n\n(Also, for the record, even if better than regular floats, I think half floats would still be a poor option to index percentages.)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/220349050","html_url":"https://github.com/elastic/elasticsearch/issues/13625#issuecomment-220349050","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13625","id":220349050,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMDM0OTA1MA==","user":{"login":"tsg","id":101817,"node_id":"MDQ6VXNlcjEwMTgxNw==","avatar_url":"https://avatars1.githubusercontent.com/u/101817?v=4","gravatar_id":"","url":"https://api.github.com/users/tsg","html_url":"https://github.com/tsg","followers_url":"https://api.github.com/users/tsg/followers","following_url":"https://api.github.com/users/tsg/following{/other_user}","gists_url":"https://api.github.com/users/tsg/gists{/gist_id}","starred_url":"https://api.github.com/users/tsg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tsg/subscriptions","organizations_url":"https://api.github.com/users/tsg/orgs","repos_url":"https://api.github.com/users/tsg/repos","events_url":"https://api.github.com/users/tsg/events{/privacy}","received_events_url":"https://api.github.com/users/tsg/received_events","type":"User","site_admin":false},"created_at":"2016-05-19T14:53:32Z","updated_at":"2016-05-19T14:53:32Z","author_association":"NONE","body":"The reason I don't like too much doing that in the client is that while we could easily do the conversion to int in Beats, we don't know how the user consumes the data, it might be via the Kibana discover tab or even directly via the Elasticsearch API. So we'd have to somehow communicate that those values should be divided by 100 or whatever.\n\nIf it's not possible to do it in a clean way in Elasticsearch, or it doesn't look like it will be done anytime soon, we might reconsider and choose to do that.\n\n> (Also, for the record, even if better than regular floats, I think half floats would still be a poor option to index percentages.)\n\nThat's true for half-floats but not for the fixed points, right?\n\nAn alternate idea that @polyfractal mentioned was to implement compression for floats, rather than do things like fixed-points/half-floats. If that is possible, it sounds to me like a good idea since it would benefit more use cases.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/220353781","html_url":"https://github.com/elastic/elasticsearch/issues/13625#issuecomment-220353781","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13625","id":220353781,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMDM1Mzc4MQ==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2016-05-19T15:08:00Z","updated_at":"2016-05-19T15:08:00Z","author_association":"MEMBER","body":"> An alternate idea that @polyfractal mentioned was to implement compression for floats, rather than do things like fixed-points/half-floats. If that is possible, it sounds to me like a good idea since it would benefit more use cases.\n\nI actually pinged @jpountz about this particular last night.  He said the compression scheme (separately encode mantissa and exponent as longs, recombine on reads) won't be possible using the current Doc Values setup.  Multi-valued fields are returned in sorted order, so you'd be unable to re-assemble the correct matching pairs of mantissa/exponent.\n\nBut, there are apparently thoughts about adding an iterator scheme to DV, which might allow that style of compression in the future.\n\nOther lossless compression schemes that I know about for floats are all based on the previous value(s) which means they can't be used for random access :(\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/249905177","html_url":"https://github.com/elastic/elasticsearch/issues/13625#issuecomment-249905177","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13625","id":249905177,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTkwNTE3Nw==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2016-09-27T15:42:55Z","updated_at":"2016-09-27T15:42:55Z","author_association":"MEMBER","body":"@polyfractal do we have this now with the `scaled_float` type, since it potentially allows you to do something like this?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/249919765","html_url":"https://github.com/elastic/elasticsearch/issues/13625#issuecomment-249919765","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13625","id":249919765,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTkxOTc2NQ==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2016-09-27T16:30:19Z","updated_at":"2016-09-27T16:30:19Z","author_association":"MEMBER","body":"Oh, yeah, this was closed by @jpountz in https://github.com/elastic/elasticsearch/pull/19264 :)\n","performed_via_github_app":null}]