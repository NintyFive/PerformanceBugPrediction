{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/28385","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28385/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28385/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28385/events","html_url":"https://github.com/elastic/elasticsearch/issues/28385","id":291798624,"node_id":"MDU6SXNzdWUyOTE3OTg2MjQ=","number":28385,"title":"Different search result between adding AND between words and using default_operator","user":{"login":"huangenyan","id":3616153,"node_id":"MDQ6VXNlcjM2MTYxNTM=","avatar_url":"https://avatars2.githubusercontent.com/u/3616153?v=4","gravatar_id":"","url":"https://api.github.com/users/huangenyan","html_url":"https://github.com/huangenyan","followers_url":"https://api.github.com/users/huangenyan/followers","following_url":"https://api.github.com/users/huangenyan/following{/other_user}","gists_url":"https://api.github.com/users/huangenyan/gists{/gist_id}","starred_url":"https://api.github.com/users/huangenyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huangenyan/subscriptions","organizations_url":"https://api.github.com/users/huangenyan/orgs","repos_url":"https://api.github.com/users/huangenyan/repos","events_url":"https://api.github.com/users/huangenyan/events{/privacy}","received_events_url":"https://api.github.com/users/huangenyan/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-01-26T04:41:50Z","updated_at":"2020-04-22T19:49:32Z","closed_at":"2018-03-21T21:08:05Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version** : \r\n```\r\nVersion: 6.1.1, Build: bd92e7f/2017-12-17T20:23:25.338Z, JVM: 1.8.0_25\r\n```\r\n\r\n**Plugins installed**: None\r\n\r\n**JVM version**:\r\n```\r\njava version \"1.8.0_25\"\r\nJava(TM) SE Runtime Environment (build 1.8.0_25-b17)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.25-b02, mixed mode)\r\n```\r\n\r\n**OS version**: Both on my own laptop (macOS) and the server (Ubuntu)\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nSuppose I have the following 2 docs:\r\n```\r\nPUT /twitter/doc/evan-smith \r\n{\r\n  \"name\": \"Evan Smith\",\r\n  \"content\": \"Doe is green tech\",\r\n  \"categories\": [\r\n        \"green tech\",\r\n        \"website development\"\r\n    ]\r\n}\r\n```\r\nand\r\n```\r\nPUT /twitter/doc/john-doe\r\n{\r\n  \"name\": \"John Doe\",\r\n    \"categories\": [\r\n        \"green tech\",\r\n        \"website development\"\r\n    ]\r\n}\r\n```\r\nWhen I search using `/twitter/_search?&q=doe AND green AND tech`, both documents are returned. However, when I search using `/twitter/_search?q=doe green tech&default_operator=and` Only the first document (`evan-smith`) is returned. According to the documentation:\r\n\r\n> The default operator used if no explicit operator is specified. For example, with a default operator of OR, the query capital of Hungary is translated to capital OR of OR Hungary, and with default operator of AND, the same query is translated to capital AND of AND Hungary. The default value is OR.\r\n\r\nThe two queries are expected to have the same effect, but the fact is that they behaves differently when the words are in different fields of the doc, `AND` will search words across different fields but `default_operator=AND` requires all words occur in the same field.\r\n\r\nWhy? Can I search across multiple fields without manually adding `AND` between each word?","closed_by":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"performed_via_github_app":null}