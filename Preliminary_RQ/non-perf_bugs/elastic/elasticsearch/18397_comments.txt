[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/219686618","html_url":"https://github.com/elastic/elasticsearch/issues/18397#issuecomment-219686618","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18397","id":219686618,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTY4NjYxOA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-05-17T11:05:42Z","updated_at":"2016-05-17T11:05:42Z","author_association":"CONTRIBUTOR","body":"I'm very wary of docs that are not optimally docs because they're trying to be tests instead.  I'd much rather write the best possible docs and test the snippets used within as a secondary goal.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/219756008","html_url":"https://github.com/elastic/elasticsearch/issues/18397#issuecomment-219756008","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18397","id":219756008,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTc1NjAwOA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-05-17T15:32:03Z","updated_at":"2016-05-17T15:32:03Z","author_association":"CONTRIBUTOR","body":"> I'd much rather write the best possible docs and test the snippets used within as a secondary goal.\n\nI think any snippets in the docs that aren't part of a test are prone to bit rot. One day I'd like to fail the build if there are any docs that aren't tested.\n\nI agree with @clintongormley that docs should be docs first though. If they happen to be tests second that is a bonus. There might be duplication in test coverage that way but that seems less bad than having bad docs because they are really tests. OTOH I bet we could do something. I just don't think it is as urgent as getting the snippets tested.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/219830338","html_url":"https://github.com/elastic/elasticsearch/issues/18397#issuecomment-219830338","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18397","id":219830338,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTgzMDMzOA==","user":{"login":"MaineC","id":70953,"node_id":"MDQ6VXNlcjcwOTUz","avatar_url":"https://avatars3.githubusercontent.com/u/70953?v=4","gravatar_id":"","url":"https://api.github.com/users/MaineC","html_url":"https://github.com/MaineC","followers_url":"https://api.github.com/users/MaineC/followers","following_url":"https://api.github.com/users/MaineC/following{/other_user}","gists_url":"https://api.github.com/users/MaineC/gists{/gist_id}","starred_url":"https://api.github.com/users/MaineC/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaineC/subscriptions","organizations_url":"https://api.github.com/users/MaineC/orgs","repos_url":"https://api.github.com/users/MaineC/repos","events_url":"https://api.github.com/users/MaineC/events{/privacy}","received_events_url":"https://api.github.com/users/MaineC/received_events","type":"User","site_admin":false},"created_at":"2016-05-17T19:40:03Z","updated_at":"2016-05-17T19:40:03Z","author_association":"CONTRIBUTOR","body":"> > I'm very wary of docs that are not optimally docs because they're trying to be tests instead.\n\nI think this is exactly the kind of input needed to put the original idea into perspective.\n\n> I think any snippets in the docs that aren't part of a test are prone to bit rot. \n\n+1 There's one more argument for having these under test:\n\nWhen making changes to existing features (adding deprecations, changing meaning, deleting parameters etc.) right now I can think of at least five locations in our code base that should be touched:\n- the original code itself\n- the tests the code hopefully ships with\n- the migration docs\n- potentially the REST tests\n- the example in the docs\n  At least for myself I can state that it's fairly easy to forget one or more locations to update. Having the build tell me automatically instead of getting this feedback from a human reviewer and going through an added round of code review might save some time.\n\n> I agree with @clintongormley that docs should be docs first though.\n\n+1\n\n> If they happen to be tests  second that is a bonus. There might be duplication in test coverage \n> that way but that seems less bad than having bad docs because they are really tests. OTOH I \n> bet we could do something. I just don't think it is as urgent as getting the snippets tested.\n\n+1 Yeah sure - if github had some way of sorting issues by priority IMHO this one should be waaay below the one about putting existing snippets under test.\n\nI guess my initial question is based on two thoughts:\n- As we have support for both, request execution and result validation in the snippet testing, instead of writing both, a REST test and a comprehensive doc entry, maybe it would make sense to have only the doc (this assumes all that should be tested actually does fit nicely into the documentation itself).\n- Because I know that at least I am myself prone to missing stuff if for any given change I need to touch more than a very limited number of locations in the code I'm leaning towards trying to eliminate duplication.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/220556363","html_url":"https://github.com/elastic/elasticsearch/issues/18397#issuecomment-220556363","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18397","id":220556363,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMDU1NjM2Mw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-05-20T09:15:25Z","updated_at":"2016-05-20T09:15:25Z","author_association":"CONTRIBUTOR","body":"I think there isn't anything more to discuss, so I'll close this.\n","performed_via_github_app":null}]