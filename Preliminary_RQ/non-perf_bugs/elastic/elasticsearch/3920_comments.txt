[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/26496700","html_url":"https://github.com/elastic/elasticsearch/issues/3920#issuecomment-26496700","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3920","id":26496700,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDk2NzAw","user":{"login":"brwe","id":4320215,"node_id":"MDQ6VXNlcjQzMjAyMTU=","avatar_url":"https://avatars0.githubusercontent.com/u/4320215?v=4","gravatar_id":"","url":"https://api.github.com/users/brwe","html_url":"https://github.com/brwe","followers_url":"https://api.github.com/users/brwe/followers","following_url":"https://api.github.com/users/brwe/following{/other_user}","gists_url":"https://api.github.com/users/brwe/gists{/gist_id}","starred_url":"https://api.github.com/users/brwe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brwe/subscriptions","organizations_url":"https://api.github.com/users/brwe/orgs","repos_url":"https://api.github.com/users/brwe/repos","events_url":"https://api.github.com/users/brwe/events{/privacy}","received_events_url":"https://api.github.com/users/brwe/received_events","type":"User","site_admin":false},"created_at":"2013-10-17T11:29:29Z","updated_at":"2013-10-17T11:29:29Z","author_association":"CONTRIBUTOR","body":"Might this requirement be similar to #3924 ? Also I am curious: What is your use case? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/26500890","html_url":"https://github.com/elastic/elasticsearch/issues/3920#issuecomment-26500890","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3920","id":26500890,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTAwODkw","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2013-10-17T12:47:02Z","updated_at":"2013-10-17T12:47:02Z","author_association":"CONTRIBUTOR","body":"Sorry I wasn't clear.  On my search results page I have to return a word count of one of the fields for every search result.  It happens to be my longest field.  And it has to support scriptio continua languages so I can't do something simple like count the number of spaces in my app and save that number to ES to retrieve with the search results. Anyway, Elasticsearch has a word count already in the form of the per field per document term vectors that I already store to use the FVH.  Also luckily I process that field with an analyzer that doesn't add synonyms or funky word breaks.  If I can ask Elasticsearch to count the terms in that field that'll give me my word count.\n\nAnyway, it doesn't what I need is pretty simple in comparison to the term vector api.  I won't be listing terms and I only want term information for a single document.  I also want it bundled in the search results so I don't have to make any additional requests.\n\nI'll send a pull request that implements this today or tomorrow which should make it crystal clear\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/26501379","html_url":"https://github.com/elastic/elasticsearch/issues/3920#issuecomment-26501379","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3920","id":26501379,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTAxMzc5","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-10-17T12:54:11Z","updated_at":"2013-10-17T12:54:11Z","author_association":"CONTRIBUTOR","body":"just for kicks, can you build a customer analyzer that consumes all tokens and returns the number of tokens in the field as a token and then sort by it. You would need to parse the string but it would work no?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/26502040","html_url":"https://github.com/elastic/elasticsearch/issues/3920#issuecomment-26502040","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3920","id":26502040,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTAyMDQw","user":{"login":"synhershko","id":212252,"node_id":"MDQ6VXNlcjIxMjI1Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/212252?v=4","gravatar_id":"","url":"https://api.github.com/users/synhershko","html_url":"https://github.com/synhershko","followers_url":"https://api.github.com/users/synhershko/followers","following_url":"https://api.github.com/users/synhershko/following{/other_user}","gists_url":"https://api.github.com/users/synhershko/gists{/gist_id}","starred_url":"https://api.github.com/users/synhershko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/synhershko/subscriptions","organizations_url":"https://api.github.com/users/synhershko/orgs","repos_url":"https://api.github.com/users/synhershko/repos","events_url":"https://api.github.com/users/synhershko/events{/privacy}","received_events_url":"https://api.github.com/users/synhershko/received_events","type":"User","site_admin":false},"created_at":"2013-10-17T13:03:17Z","updated_at":"2013-10-17T13:03:17Z","author_association":"CONTRIBUTOR","body":"+1. Use cases can include faceting, scripted scoring, record linkage and whatnot.\n\n@s1monw all that is required is a custom TokenFilter really, but that token doesn't have access to the IW / Document object so you will need to go through the analysis chain twice\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/26533135","html_url":"https://github.com/elastic/elasticsearch/issues/3920#issuecomment-26533135","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3920","id":26533135,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTMzMTM1","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2013-10-17T18:09:28Z","updated_at":"2013-10-17T18:09:28Z","author_association":"CONTRIBUTOR","body":"> record linkage\n\nSorry, what do you mean?\n\n> custom TokenFilter \n\nI like this idea.  In that case it'd make sense to build the field in the mapping, maybe like this:\n\n``` bash\ncurl -XPUT http://localhost:9200/test/test/_mapping?pretty -d'{\n  \"test\" : {\n    \"properties\": {\n      \"foo\" : {\n        \"type\": \"string\",\n        \"store\": \"yes\",\n        \"write_term_count\" : \"foo_term_count\"\n      },\n      \"foo_term_count\" : {\n        \"type\": \"integer\",\n        \"store\": \"yes\"\n      }\n    }\n  }\n}\n```\n\nIt'd be a pain to have to use the custom analyzer and analyze everything twice but it'd be worth it if it enables lots of fun features.  I'll have a look later today I think.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/26552317","html_url":"https://github.com/elastic/elasticsearch/issues/3920#issuecomment-26552317","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3920","id":26552317,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTUyMzE3","user":{"login":"synhershko","id":212252,"node_id":"MDQ6VXNlcjIxMjI1Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/212252?v=4","gravatar_id":"","url":"https://api.github.com/users/synhershko","html_url":"https://github.com/synhershko","followers_url":"https://api.github.com/users/synhershko/followers","following_url":"https://api.github.com/users/synhershko/following{/other_user}","gists_url":"https://api.github.com/users/synhershko/gists{/gist_id}","starred_url":"https://api.github.com/users/synhershko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/synhershko/subscriptions","organizations_url":"https://api.github.com/users/synhershko/orgs","repos_url":"https://api.github.com/users/synhershko/repos","events_url":"https://api.github.com/users/synhershko/events{/privacy}","received_events_url":"https://api.github.com/users/synhershko/received_events","type":"User","site_admin":false},"created_at":"2013-10-17T20:58:26Z","updated_at":"2013-10-17T20:58:26Z","author_association":"CONTRIBUTOR","body":"Record linkage is whenever you want to find similar documents, and word count can be a good hint for that.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/26603687","html_url":"https://github.com/elastic/elasticsearch/issues/3920#issuecomment-26603687","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3920","id":26603687,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NjAzNjg3","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2013-10-18T15:13:16Z","updated_at":"2013-10-18T15:13:16Z","author_association":"MEMBER","body":"This other issue looks similar to what was asked here, although it proposes a separate api for it: #640 .\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/26653493","html_url":"https://github.com/elastic/elasticsearch/issues/3920#issuecomment-26653493","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3920","id":26653493,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NjUzNDkz","user":{"login":"synhershko","id":212252,"node_id":"MDQ6VXNlcjIxMjI1Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/212252?v=4","gravatar_id":"","url":"https://api.github.com/users/synhershko","html_url":"https://github.com/synhershko","followers_url":"https://api.github.com/users/synhershko/followers","following_url":"https://api.github.com/users/synhershko/following{/other_user}","gists_url":"https://api.github.com/users/synhershko/gists{/gist_id}","starred_url":"https://api.github.com/users/synhershko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/synhershko/subscriptions","organizations_url":"https://api.github.com/users/synhershko/orgs","repos_url":"https://api.github.com/users/synhershko/repos","events_url":"https://api.github.com/users/synhershko/events{/privacy}","received_events_url":"https://api.github.com/users/synhershko/received_events","type":"User","site_admin":false},"created_at":"2013-10-19T16:37:45Z","updated_at":"2013-10-19T16:37:45Z","author_association":"CONTRIBUTOR","body":"I think someone is confusing Word-Count in a field of a specific document with Term Count of all documents in a field. Not sure who that is, though :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/26654646","html_url":"https://github.com/elastic/elasticsearch/issues/3920#issuecomment-26654646","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3920","id":26654646,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NjU0NjQ2","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2013-10-19T17:27:54Z","updated_at":"2013-10-19T17:27:54Z","author_association":"MEMBER","body":"Indeed, that other issue is a completely different story, I should have read more carefully. Thanks for clarifying that @synhershko \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/26760445","html_url":"https://github.com/elastic/elasticsearch/issues/3920#issuecomment-26760445","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3920","id":26760445,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NzYwNDQ1","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2013-10-21T21:54:31Z","updated_at":"2013-10-21T21:54:31Z","author_association":"CONTRIBUTOR","body":"I got this working today.  I'll send a pull request for it as soon as it passes all of its tests.  Github has helpfully created a link to my implementation above for anyone curious.  The unit test covers returning the count in the search results, searching for it via a range query, and faceting.  It covers counting both single and multi-valued fields both on the root and inside of an object.  For multi-valued fields it writes multiple term counts - it doesn't add them.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/26761390","html_url":"https://github.com/elastic/elasticsearch/issues/3920#issuecomment-26761390","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3920","id":26761390,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NzYxMzkw","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2013-10-21T22:09:02Z","updated_at":"2013-10-21T22:09:02Z","author_association":"CONTRIBUTOR","body":"Also, while I think about it I'm pretty sure I did a few things wrong and would love some tips on the right way:\n1.  Create a new package for the implementation.  I'm sure there is some place simple where it belongs.\n2.  I'm a bit hacky in the way that I override the Long field implementation and in the way I use that field regardless of what field the term counts are actually mapped to. Now that I think about it I didn't do a lot of testing around mapping the term count to things other than long.  I mean, it won't work at all if you map it to something non-number, but short and int and the like should work as expected.\n3.  Everything else I haven't thought of:)\n","performed_via_github_app":null}]