{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/23371","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23371/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23371/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23371/events","html_url":"https://github.com/elastic/elasticsearch/issues/23371","id":210237921,"node_id":"MDU6SXNzdWUyMTAyMzc5MjE=","number":23371,"title":"java.lang.OutOfMemoryError: Java heap space","user":{"login":"blair319","id":8089090,"node_id":"MDQ6VXNlcjgwODkwOTA=","avatar_url":"https://avatars1.githubusercontent.com/u/8089090?v=4","gravatar_id":"","url":"https://api.github.com/users/blair319","html_url":"https://github.com/blair319","followers_url":"https://api.github.com/users/blair319/followers","following_url":"https://api.github.com/users/blair319/following{/other_user}","gists_url":"https://api.github.com/users/blair319/gists{/gist_id}","starred_url":"https://api.github.com/users/blair319/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blair319/subscriptions","organizations_url":"https://api.github.com/users/blair319/orgs","repos_url":"https://api.github.com/users/blair319/repos","events_url":"https://api.github.com/users/blair319/events{/privacy}","received_events_url":"https://api.github.com/users/blair319/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-02-25T14:32:05Z","updated_at":"2017-02-25T14:34:51Z","closed_at":"2017-02-25T14:34:51Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\nGitHub is reserved for bug reports and feature requests. The best place\r\nto ask a general question is at the Elastic Discourse forums at\r\nhttps://discuss.elastic.co. If you are in fact posting a bug report or\r\na feature request, please include one and only one of the below blocks\r\nin your new issue. Note that whether you're filing a bug report or a\r\nfeature request, ensure that your submission is for an\r\n[OS that we support](https://www.elastic.co/support/matrix#show_os).\r\nBug reports on an OS that we do not support or feature requests\r\nspecific to an OS that we do not support will be closed.\r\n-->\r\n\r\n<!--\r\nIf you are filing a bug report, please remove the below feature\r\nrequest block and provide responses for all of the below items.\r\n-->\r\n\r\n**Elasticsearch version**:5.2.0\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version**:1.8.0_121\r\n\r\n**OS version**:redhat\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\n\r\nI need to configure how to solve this problem?\r\nand  how to optimize index?\r\n\r\n[2017-02-25T22:24:23,840][INFO ][o.e.m.j.JvmGcMonitorService] [node-3] [gc][young][2829][54] duration [1.6s], collections [2]/[2.4s], total [1.6s]/[8.1s], memory [10.6gb]->[6.2gb]/[20gb], all_pools {[young] [8.8gb]->[8mb]/[0b]}{[survivor] [40mb]->[72mb]/[0b]}{[old] [1.7gb]->[6.2gb]/[20gb]}\r\n[2017-02-25T22:24:23,841][WARN ][o.e.m.j.JvmGcMonitorService] [node-3] [gc][2829] overhead, spent [1.6s] collecting in the last [2.4s]\r\n[2017-02-25T22:24:24,841][WARN ][o.e.m.j.JvmGcMonitorService] [node-3] [gc][2830] overhead, spent [653ms] collecting in the last [1s]\r\n[2017-02-25T22:24:25,869][WARN ][o.e.m.j.JvmGcMonitorService] [node-3] [gc][2831] overhead, spent [591ms] collecting in the last [1s]\r\n[2017-02-25T22:24:26,908][WARN ][o.e.m.j.JvmGcMonitorService] [node-3] [gc][2832] overhead, spent [710ms] collecting in the last [1s]\r\n[2017-02-25T22:24:27,957][WARN ][o.e.m.j.JvmGcMonitorService] [node-3] [gc][2833] overhead, spent [703ms] collecting in the last [1s]\r\n[2017-02-25T22:24:29,070][WARN ][o.e.m.j.JvmGcMonitorService] [node-3] [gc][2834] overhead, spent [733ms] collecting in the last [1.1s]\r\n[2017-02-25T22:24:30,071][WARN ][o.e.m.j.JvmGcMonitorService] [node-3] [gc][2835] overhead, spent [747ms] collecting in the last [1s]\r\n[2017-02-25T22:24:39,251][INFO ][o.e.m.j.JvmGcMonitorService] [node-3] [gc][old][2836][1] duration [8.1s], collections [1]/[9.1s], total [8.1s]/[8.1s], memory [17.9gb]->[18.1gb]/[20gb], all_pools {[young] [304mb]->[8mb]/[0b]}{[survivor] [128mb]->[0b]/[0b]}{[old] [17.5gb]->[18.1gb]/[20gb]}\r\n[2017-02-25T22:24:39,251][WARN ][o.e.m.j.JvmGcMonitorService] [node-3] [gc][2836] overhead, spent [8.8s] collecting in the last [9.1s]\r\n[2017-02-25T22:24:42,208][WARN ][o.e.m.j.JvmGcMonitorService] [node-3] [gc][2837] overhead, spent [2.7s] collecting in the last [2.9s]\r\n[2017-02-25T22:24:44,980][WARN ][o.e.m.j.JvmGcMonitorService] [node-3] [gc][2838] overhead, spent [2.6s] collecting in the last [2.7s]\r\n[2017-02-25T22:24:47,093][WARN ][o.e.m.j.JvmGcMonitorService] [node-3] [gc][2839] overhead, spent [2s] collecting in the last [2.1s]\r\n[2017-02-25T22:24:48,403][WARN ][o.e.m.j.JvmGcMonitorService] [node-3] [gc][2840] overhead, spent [1.3s] collecting in the last [1.3s]\r\n[2017-02-25T22:26:55,561][WARN ][o.e.m.j.JvmGcMonitorService] [node-3] [gc][2841] overhead, spent [1.2m] collecting in the last [2.1m]\r\n[2017-02-25T22:26:55,584][WARN ][o.e.d.z.PublishClusterStateAction] [node-3] received a cluster state from a different master than the current one, rejecting (received {node-4}{5BRY8-u3Tj-K274V8qT0wg}{3OGNrcBvS424iNK6BQwLgw}{125.39.176.88}{125.39.176.88:9300}, current {node-2}{S77O9WbzR_Sv0R2tJXgUfQ}{doWv8sGUSOGPuvUv-uEvZA}{125.39.176.86}{125.39.176.86:9300})\r\n[2017-02-25T22:26:55,610][ERROR][o.e.b.ElasticsearchUncaughtExceptionHandler] [node-3] fatal error in thread [elasticsearch[node-3][search][T#15]], exiting\r\njava.lang.OutOfMemoryError: Java heap space\r\n[2017-02-25T22:26:55,609][ERROR][o.e.b.ElasticsearchUncaughtExceptionHandler] [node-3] fatal error in thread [elasticsearch[node-3][generic][T#3]], exiting\r\njava.lang.OutOfMemoryError: Java heap space\r\n[2017-02-25T22:26:55,609][ERROR][o.e.b.ElasticsearchUncaughtExceptionHandler] [node-3] fatal error in thread [elasticsearch[node-3][refresh][T#3]], exiting\r\njava.lang.OutOfMemoryError: Java heap space\r\n[2017-02-25T22:26:55,559][WARN ][i.n.u.c.SingleThreadEventExecutor] Unexpected exception from an event executor: \r\njava.lang.OutOfMemoryError: Java heap space\r\n[2017-02-25T22:26:55,609][ERROR][o.e.b.ElasticsearchUncaughtExceptionHandler] [node-3] fatal error in thread [elasticsearch[node-3][generic][T#5]], exiting\r\njava.lang.OutOfMemoryError: Java heap space\r\n[2017-02-25T22:26:55,609][ERROR][o.e.b.ElasticsearchUncaughtExceptionHandler] [node-3] fatal error in thread [elasticsearch[node-3][generic][T#2]], exiting\r\njava.lang.OutOfMemoryError: Java heap space\r\n[2017-02-25T22:26:55,564][WARN ][i.n.c.n.NioEventLoop     ] Unexpected exception in the selector loop.\r\njava.lang.OutOfMemoryError: Java heap space\r\n[2017-02-25T22:26:55,560][WARN ][i.n.c.n.NioEventLoop     ] Unexpected exception in the selector loop.\r\njava.lang.OutOfMemoryError: Java heap space\r\n[2017-02-25T22:26:55,561][WARN ][i.n.c.n.NioEventLoop     ] Unexpected exception in the selector loop.\r\njava.lang.OutOfMemoryError: Java heap space\r\n[2017-02-25T22:26:55,564][WARN ][i.n.u.c.SingleThreadEventExecutor] Unexpected exception from an event executor: \r\njava.lang.OutOfMemoryError: Java heap space\r\n[2017-02-25T22:26:55,557][WARN ][i.n.c.n.NioEventLoop     ] Unexpected exception in the selector loop.\r\njava.lang.OutOfMemoryError: Java heap space\r\n[2017-02-25T22:26:55,564][WARN ][i.n.c.n.NioEventLoop     ] Unexpected exception in the selector loop.\r\njava.lang.OutOfMemoryError: Java heap space\r\n[2017-02-25T22:26:55,609][ERROR][o.e.b.ElasticsearchUncaughtExceptionHandler] [node-3] fatal error in thread [elasticsearch[node-3][generic][T#1]], exiting\r\njava.lang.OutOfMemoryError: Java heap space\r\n[2017-02-25T22:26:55,557][WARN ][i.n.c.n.NioEventLoop     ] Unexpected exception in the selector loop.\r\njava.lang.OutOfMemoryError: Java heap space","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}