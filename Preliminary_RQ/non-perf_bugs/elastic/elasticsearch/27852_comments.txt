[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/352365373","html_url":"https://github.com/elastic/elasticsearch/issues/27852#issuecomment-352365373","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27852","id":352365373,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjM2NTM3Mw==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2017-12-18T09:04:04Z","updated_at":"2017-12-18T09:04:04Z","author_association":"MEMBER","body":"@boaz are you able to take a look at this?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/352371471","html_url":"https://github.com/elastic/elasticsearch/issues/27852#issuecomment-352371471","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27852","id":352371471,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjM3MTQ3MQ==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2017-12-18T09:28:35Z","updated_at":"2017-12-18T09:28:35Z","author_association":"MEMBER","body":"I already did ;) The problem is that Lucene doesn't consider a delete of a non existent doc a \"pending uncommitted change\", so we skip executing a commit on the pre-synced flush commit and we also don't fail the synced flush due to pending op. We do however insert the delete into the version map even if the doc is not found due to external versioning semantics. I need to discuss it with @s1monw, I don't' have a solution I'm happy with at the moment","performed_via_github_app":null}]