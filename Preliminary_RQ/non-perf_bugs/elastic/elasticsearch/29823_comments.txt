[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384130831","html_url":"https://github.com/elastic/elasticsearch/issues/29823#issuecomment-384130831","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29823","id":384130831,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMDgzMQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-01-12T00:56:21Z","updated_at":"2018-04-25T01:23:16Z","author_association":"COLLABORATOR","body":"*Original comment by @talevy:*\n\nExample Pipeline for reference (this comment may be updated as changes occur)\r\n\r\nLifecycle Policy\r\n```\r\nPUT /_xpack/index_lifecycle/my_lifecycle\r\n{\r\n   \"policy\": {\r\n     \"type\": \"timeseries\",\r\n     \"phases\": {\r\n       \"hot\": {\r\n         \"after\": \"0s\",\r\n         \"actions\": {\r\n          \"rollover\": {\r\n            \"alias\": \"logs-write\",\r\n            \"max_age\": \"5s\"\r\n          }        \r\n         }\r\n       },\r\n       \"warm\": {\r\n         \"after\": \"10s\",\r\n         \"actions\": {\r\n           \"allocate\": {\r\n             \"require\": { \"_name\": \"node-1\" },\r\n             \"include\": {},\r\n             \"exclude\": {}\r\n           },\r\n           \"shrink\": {\r\n             \"number_of_shards\": 1\r\n           },\r\n           \"forcemerge\": {\r\n             \"max_num_segments\": 1000\r\n           }\r\n         }\r\n       },\r\n       \"cold\": {\r\n         \"after\": \"20s\",\r\n         \"actions\": {\r\n          \"replicas\": {\r\n            \"number_of_replicas\": 0\r\n          }\r\n         }\r\n       },\r\n       \"delete\": {\r\n         \"after\": \"30s\",\r\n         \"actions\": {\r\n           \"delete\": {}\r\n         }\r\n       }\r\n     }\r\n   }\r\n}\r\n```\r\n\r\ntemplate\r\n```\r\nPUT _template/my_template\r\n{\r\n  \"index_patterns\": [\"logs-*\"],\r\n  \"settings\": {\r\n    \"number_of_shards\": 4,\r\n    \"number_of_replicas\": 1,\r\n    \"index.lifecycle.name\": \"my_lifecycle\"\r\n  },\r\n  \"aliases\": {\r\n    \"logs-read\": {}\r\n  },\r\n  \"mappings\": {\r\n    \"_doc\": {\r\n      \"_source\": {\r\n        \"enabled\": false\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nCreate Index\r\n```\r\nPUT logs-000001\r\n{\r\n  \"aliases\": {\r\n    \"logs-write\": {}\r\n  }\r\n}\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384130832","html_url":"https://github.com/elastic/elasticsearch/issues/29823#issuecomment-384130832","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29823","id":384130832,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMDgzMg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-02-27T22:43:52Z","updated_at":"2018-04-25T01:23:16Z","author_association":"COLLABORATOR","body":"*Original comment by @ppf2:*\n\nI would like to suggest also setting `\"index.blocks.write\":true` against the warm indices once they have moved to the warm tier to ensure that when force merge runs, it is run against an index with no further writes.  This can even be done as the very first step of the warm processing, like as a step right before we do the allocation filtering to move it to warm.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384130834","html_url":"https://github.com/elastic/elasticsearch/issues/29823#issuecomment-384130834","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29823","id":384130834,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMDgzNA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-03-01T15:55:16Z","updated_at":"2018-04-25T01:23:16Z","author_association":"COLLABORATOR","body":"*Original comment by @colings86:*\n\n@ppf2 yeah this is a good point and something we have already thought about (though its not detailed here explicitly) in the context of the forcemerge and shrink actions specifically. We decide that we didn't want to add a write block to the indices automatically which persists for all time after the start of the warm phase because users might find this surprising/annoying but instead the forcemerge and shrink actions enable the write block as their first step and then disable the write block when they are finished. \r\n\r\nWe could also potentially add an explicit write block action that you could enable in the warm/cold phase to keep the index write block enabled outside of these specific actions as well but this isn't something that we currently have on the plan. Then, if we decide to add this explicit action we could have the UI support the action and potentially set it by default on the policy UI with the option for the user to disable it if they wish. Also if we go down the route where beats/logstash define a default policy for their indexes then I would expect those policies to enable this action too.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384130836","html_url":"https://github.com/elastic/elasticsearch/issues/29823#issuecomment-384130836","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29823","id":384130836,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMDgzNg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-04-02T14:05:39Z","updated_at":"2018-04-25T01:23:17Z","author_association":"COLLABORATOR","body":"*Original comment by @PhaedrusTheGreek:*\n\n@pickypg I bet it would be useful for the `index_stats` monitoring to capture the `index.lifecycle.name` here, so we can agg on it, e.g., Which index series have the worst search latency.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384130839","html_url":"https://github.com/elastic/elasticsearch/issues/29823#issuecomment-384130839","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29823","id":384130839,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMDgzOQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-04-03T08:50:08Z","updated_at":"2018-04-25T01:23:17Z","author_association":"COLLABORATOR","body":"*Original comment by @colings86:*\n\nLet's stick to implementing the feature first and then we can look into what we can/should add to monitoring. It's still early enough in the implementation that the design is in flux and things may change. Also note that in the current design the `index.lifecycle.name` is in the index settings so would already be exported in monitoring I think.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384186618","html_url":"https://github.com/elastic/elasticsearch/issues/29823#issuecomment-384186618","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29823","id":384186618,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDE4NjYxOA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-04-25T07:25:40Z","updated_at":"2018-04-25T07:25:40Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/446958093","html_url":"https://github.com/elastic/elasticsearch/issues/29823#issuecomment-446958093","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29823","id":446958093,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0Njk1ODA5Mw==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2018-12-13T12:53:51Z","updated_at":"2018-12-13T12:53:51Z","author_association":"MEMBER","body":"All blockers for the initial beta release are now merged so I'm closing this out since we will track bugs and tasks for GA in separate issues with the `:Core/Features/ILM` label","performed_via_github_app":null}]