[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/291652518","html_url":"https://github.com/elastic/elasticsearch/issues/23893#issuecomment-291652518","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23893","id":291652518,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MTY1MjUxOA==","user":{"login":"spalger","id":1329312,"node_id":"MDQ6VXNlcjEzMjkzMTI=","avatar_url":"https://avatars1.githubusercontent.com/u/1329312?v=4","gravatar_id":"","url":"https://api.github.com/users/spalger","html_url":"https://github.com/spalger","followers_url":"https://api.github.com/users/spalger/followers","following_url":"https://api.github.com/users/spalger/following{/other_user}","gists_url":"https://api.github.com/users/spalger/gists{/gist_id}","starred_url":"https://api.github.com/users/spalger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spalger/subscriptions","organizations_url":"https://api.github.com/users/spalger/orgs","repos_url":"https://api.github.com/users/spalger/repos","events_url":"https://api.github.com/users/spalger/events{/privacy}","received_events_url":"https://api.github.com/users/spalger/received_events","type":"User","site_admin":false},"created_at":"2017-04-04T22:24:19Z","updated_at":"2017-04-04T22:25:38Z","author_association":"MEMBER","body":"Do you think there is a reason Kibana needs to know which requests should get the `*:` cluster selector? If we executed all queries against `*:{index}`, do you think that would be too costly or error prone?\r\n\r\nAt some point we want to give users more control in this regard, maybe making it an index pattern level setting, but out of the gate I'm thinking Kibana might just add `*:` before every index in requests to es...","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/292659956","html_url":"https://github.com/elastic/elasticsearch/issues/23893#issuecomment-292659956","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23893","id":292659956,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjY1OTk1Ng==","user":{"login":"tbrooks8","id":862472,"node_id":"MDQ6VXNlcjg2MjQ3Mg==","avatar_url":"https://avatars3.githubusercontent.com/u/862472?v=4","gravatar_id":"","url":"https://api.github.com/users/tbrooks8","html_url":"https://github.com/tbrooks8","followers_url":"https://api.github.com/users/tbrooks8/followers","following_url":"https://api.github.com/users/tbrooks8/following{/other_user}","gists_url":"https://api.github.com/users/tbrooks8/gists{/gist_id}","starred_url":"https://api.github.com/users/tbrooks8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tbrooks8/subscriptions","organizations_url":"https://api.github.com/users/tbrooks8/orgs","repos_url":"https://api.github.com/users/tbrooks8/repos","events_url":"https://api.github.com/users/tbrooks8/events{/privacy}","received_events_url":"https://api.github.com/users/tbrooks8/received_events","type":"User","site_admin":false},"created_at":"2017-04-07T21:47:05Z","updated_at":"2017-04-07T21:49:41Z","author_association":"CONTRIBUTOR","body":"I've nearly completed a basic PR for this. However, as I worked on it a number of questions came up for me.\r\n\r\n### 1. Should this support any options like index wildcards do?\r\n\r\nhttps://www.elastic.co/guide/en/elasticsearch/reference/current/multi-index.html\r\n\r\n```\r\n- expand_wildcards\r\n- ignore_unavailable\r\n- allow_no_indices\r\n```\r\nThose options do not necessarily make sense in context of cross cluster search. I guess I'm just asking if we want any options.\r\n\r\nSuch as what do we do in the case a wildcard is used but no cluster matches? Which brings to number 2:\r\n\r\n### 2. What do we do if a wildcard is used but no cluster matches? \r\n\r\nDo we treat that as a local index? Even though a * cannot be in an index name? Do we throw an error? Currently I believe that if a cluster name does not match we treat it as a local index. So \"nonexistentcluster:index\" would be treated as index on local node: \"nonexistentcluster:index\".\r\n\r\n### 3. Should this change support + and - wildcard options?\r\n\r\nRight now for indices we support them.\r\n\r\nhttps://www.elastic.co/guide/en/elasticsearch/reference/current/multi-index.html\r\n\r\n```\r\ncluster1:+test*,cluster1:-test3\r\n```\r\n\r\nI guess with cluster names this might look something like:\r\n\r\n```\r\n+cluster*:+test*,-cluster3:+test*,+cluster*:-test3\r\n```\r\n\r\nThat obviously can get kind of complicated when you're using both + and - options for both clusters and indices.\r\n\r\n### 4. Do wildcards for cluster names reference the local cluster? \r\n\r\nSo does \"\\*:test\" search the local cluster? Or do you need to do \"*:test,test\". And if it does search the local cluster do we use \"cluster.name\" as the local cluster name to match against the wildcard? I think this diverges from the remote clusters where we use the alias defined locally opposed to the remote cluster.name setting?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/292957027","html_url":"https://github.com/elastic/elasticsearch/issues/23893#issuecomment-292957027","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23893","id":292957027,"node_id":"MDEyOklzc3VlQ29tbWVudDI5Mjk1NzAyNw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-04-10T13:57:48Z","updated_at":"2017-04-10T13:57:48Z","author_association":"CONTRIBUTOR","body":"> 1. Should this support any options like index wildcards do?\r\n\r\nNo, those options applies to the underlying indices (and any wildcard expansion of those)\r\n\r\n> 2. What do we do if a wildcard is used but no cluster matches?\r\n\r\nSame as today, ignore them\r\n\r\n> 3. Should this change support + and - wildcard options?\r\n\r\nNo, let's keep this simple\r\n\r\n> 4. Do wildcards for cluster names reference the local cluster?\r\n\r\nThis is tricky... Today, you can define an alias for the local cluster, in which case `*:foo` would work just fine.  I think that we will probably end up defining `_local_` or something similar as a default alias in the future.  I'd say for now, let the wildcard apply only to defined aliases. If the user doesn't specify a local alias then it won't match local indices.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/293139822","html_url":"https://github.com/elastic/elasticsearch/issues/23893#issuecomment-293139822","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23893","id":293139822,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzEzOTgyMg==","user":{"login":"tbrooks8","id":862472,"node_id":"MDQ6VXNlcjg2MjQ3Mg==","avatar_url":"https://avatars3.githubusercontent.com/u/862472?v=4","gravatar_id":"","url":"https://api.github.com/users/tbrooks8","html_url":"https://github.com/tbrooks8","followers_url":"https://api.github.com/users/tbrooks8/followers","following_url":"https://api.github.com/users/tbrooks8/following{/other_user}","gists_url":"https://api.github.com/users/tbrooks8/gists{/gist_id}","starred_url":"https://api.github.com/users/tbrooks8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tbrooks8/subscriptions","organizations_url":"https://api.github.com/users/tbrooks8/orgs","repos_url":"https://api.github.com/users/tbrooks8/repos","events_url":"https://api.github.com/users/tbrooks8/events{/privacy}","received_events_url":"https://api.github.com/users/tbrooks8/received_events","type":"User","site_admin":false},"created_at":"2017-04-11T03:30:11Z","updated_at":"2017-04-11T03:30:37Z","author_association":"CONTRIBUTOR","body":"> This is tricky... Today, you can define an alias for the local cluster, in which case *:foo would work just fine.\r\n\r\n@clintongormley I was looking through the documentation today and was not able to figure out exactly what you're referencing. Are you saying that you would do something like this in the config:\r\n\r\n`search.remote.local_cluster_alias.seeds: \"127.0.0.1:9300\"`","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/293289883","html_url":"https://github.com/elastic/elasticsearch/issues/23893#issuecomment-293289883","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23893","id":293289883,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzI4OTg4Mw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-04-11T14:55:43Z","updated_at":"2017-04-11T14:55:43Z","author_association":"CONTRIBUTOR","body":"@tbrooks8 yes you can do that today, but actually @s1monw wants to remove this and to replace it with a `_local_` predefined alias, used just for cluster name matching","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/294144995","html_url":"https://github.com/elastic/elasticsearch/issues/23893#issuecomment-294144995","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23893","id":294144995,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NDE0NDk5NQ==","user":{"login":"djschny","id":129643,"node_id":"MDQ6VXNlcjEyOTY0Mw==","avatar_url":"https://avatars0.githubusercontent.com/u/129643?v=4","gravatar_id":"","url":"https://api.github.com/users/djschny","html_url":"https://github.com/djschny","followers_url":"https://api.github.com/users/djschny/followers","following_url":"https://api.github.com/users/djschny/following{/other_user}","gists_url":"https://api.github.com/users/djschny/gists{/gist_id}","starred_url":"https://api.github.com/users/djschny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djschny/subscriptions","organizations_url":"https://api.github.com/users/djschny/orgs","repos_url":"https://api.github.com/users/djschny/repos","events_url":"https://api.github.com/users/djschny/events{/privacy}","received_events_url":"https://api.github.com/users/djschny/received_events","type":"User","site_admin":false},"created_at":"2017-04-14T12:23:32Z","updated_at":"2017-04-14T12:23:32Z","author_association":"CONTRIBUTOR","body":"Very happy to see this as this was the very first thing I tried to do when 5.3.0 was released and I was testing out the behavior. Look forward to it coming.\r\n\r\nHowever I'm confused and trying to understand why `*:logstash-*/_search` is not desirable to match indices on the cluster of the coordinating node of the request? IMO this would be a default behavior majority of folks would want.\r\n\r\nInstead it sounds like `_local_,*:logstash-*/_search` would be needed?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/294172614","html_url":"https://github.com/elastic/elasticsearch/issues/23893#issuecomment-294172614","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23893","id":294172614,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NDE3MjYxNA==","user":{"login":"tbrooks8","id":862472,"node_id":"MDQ6VXNlcjg2MjQ3Mg==","avatar_url":"https://avatars3.githubusercontent.com/u/862472?v=4","gravatar_id":"","url":"https://api.github.com/users/tbrooks8","html_url":"https://github.com/tbrooks8","followers_url":"https://api.github.com/users/tbrooks8/followers","following_url":"https://api.github.com/users/tbrooks8/following{/other_user}","gists_url":"https://api.github.com/users/tbrooks8/gists{/gist_id}","starred_url":"https://api.github.com/users/tbrooks8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tbrooks8/subscriptions","organizations_url":"https://api.github.com/users/tbrooks8/orgs","repos_url":"https://api.github.com/users/tbrooks8/repos","events_url":"https://api.github.com/users/tbrooks8/events{/privacy}","received_events_url":"https://api.github.com/users/tbrooks8/received_events","type":"User","site_admin":false},"created_at":"2017-04-14T15:19:55Z","updated_at":"2017-04-14T15:19:55Z","author_association":"CONTRIBUTOR","body":"@djschny I can give you the development perspective and then maybe @clintongormley can add anything if he wants.\r\n\r\nCurrently you have to manually define aliases for remote clusters either in the config or with settings requests. Those aliases are are what we use for matching.\r\n\r\nThe problem is that we do not have a predefined alias for the local cluster. So while we could add behavior to always search the local cluster with `*:logstash-*/_search`, we would not know whether to search the local cluster if you used a slightly more complicated search such as `r*:logstash-*/_search`.\r\n\r\nThe current solution is to add the local cluster to your config for cross cluster search. Once you have a defined alias, everything works as it does for any other cluster.\r\n\r\nCurrently, if you have not defined the local cluster for cross cluster search and you want to search both then you do `logstash-*,*:logstash-*/_search`.\r\n\r\nOn the other hand, I think that the `_local_` idea is that in the future we would have a permanent alias for the local cluster. One in which you would not need to configure anything. In that world, `*:logstash-*/_search` WOULD search both local and remote clusters. And `_local_` would be the alias used for more complicated wildcard matches.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/294219280","html_url":"https://github.com/elastic/elasticsearch/issues/23893#issuecomment-294219280","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23893","id":294219280,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NDIxOTI4MA==","user":{"login":"djschny","id":129643,"node_id":"MDQ6VXNlcjEyOTY0Mw==","avatar_url":"https://avatars0.githubusercontent.com/u/129643?v=4","gravatar_id":"","url":"https://api.github.com/users/djschny","html_url":"https://github.com/djschny","followers_url":"https://api.github.com/users/djschny/followers","following_url":"https://api.github.com/users/djschny/following{/other_user}","gists_url":"https://api.github.com/users/djschny/gists{/gist_id}","starred_url":"https://api.github.com/users/djschny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djschny/subscriptions","organizations_url":"https://api.github.com/users/djschny/orgs","repos_url":"https://api.github.com/users/djschny/repos","events_url":"https://api.github.com/users/djschny/events{/privacy}","received_events_url":"https://api.github.com/users/djschny/received_events","type":"User","site_admin":false},"created_at":"2017-04-14T19:25:17Z","updated_at":"2017-04-14T19:25:17Z","author_association":"CONTRIBUTOR","body":"Thanks for the clarification @tbrooks8, I misinterpreted and didn't realize that the adding of localhost in the remote clusters list was more a temporary workaround until the longer term `_local_` is available.\r\n\r\nThanks!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/294839847","html_url":"https://github.com/elastic/elasticsearch/issues/23893#issuecomment-294839847","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23893","id":294839847,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NDgzOTg0Nw==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2017-04-18T13:17:53Z","updated_at":"2017-04-18T13:17:53Z","author_association":"MEMBER","body":"@tbrooks8 should this issue be closed?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/294843954","html_url":"https://github.com/elastic/elasticsearch/issues/23893#issuecomment-294843954","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23893","id":294843954,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NDg0Mzk1NA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-04-18T13:28:32Z","updated_at":"2017-04-18T13:28:32Z","author_association":"CONTRIBUTOR","body":"Closed by https://github.com/elastic/elasticsearch/pull/23985","performed_via_github_app":null}]