{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/26491","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26491/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26491/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26491/events","html_url":"https://github.com/elastic/elasticsearch/issues/26491","id":255007440,"node_id":"MDU6SXNzdWUyNTUwMDc0NDA=","number":26491,"title":"Issue when reading synonyms which contains åäö from a file","user":{"login":"aslamy","id":11768586,"node_id":"MDQ6VXNlcjExNzY4NTg2","avatar_url":"https://avatars3.githubusercontent.com/u/11768586?v=4","gravatar_id":"","url":"https://api.github.com/users/aslamy","html_url":"https://github.com/aslamy","followers_url":"https://api.github.com/users/aslamy/followers","following_url":"https://api.github.com/users/aslamy/following{/other_user}","gists_url":"https://api.github.com/users/aslamy/gists{/gist_id}","starred_url":"https://api.github.com/users/aslamy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aslamy/subscriptions","organizations_url":"https://api.github.com/users/aslamy/orgs","repos_url":"https://api.github.com/users/aslamy/repos","events_url":"https://api.github.com/users/aslamy/events{/privacy}","received_events_url":"https://api.github.com/users/aslamy/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-09-04T10:59:23Z","updated_at":"2017-09-04T12:16:09Z","closed_at":"2017-09-04T12:12:05Z","author_association":"NONE","active_lock_reason":null,"body":"Hi !\r\nI got some exception when I use swedish ÅÄÖ on my synonym words.\r\n\r\n```\r\n    {\r\n      \"error\" : {\r\n        \"root_cause\" : [\r\n          {\r\n            \"type\" : \"illegal_argument_exception\",\r\n            \"reason\" : \"failed to build synonyms\"\r\n          }\r\n        ],\r\n        \"type\" : \"illegal_argument_exception\",\r\n        \"reason\" : \"failed to build synonyms\",\r\n        \"caused_by\" : {\r\n          \"type\" : \"malformed_input_exception\",\r\n          \"reason\" : \"Input length = 1\"\r\n        }\r\n      },\r\n      \"status\" : 400\r\n    }\r\n```\r\n\r\nThe problem occur when I use a file to read synonyms.\r\nThis works fine.\r\n\r\n```\r\n   {\r\n\t\"settings\": {\r\n\t\t\"index\": {\r\n\t\t\t\"analysis\": {\r\n\t\t\t\t\"filter\": {\r\n\t\t\t\t\t\"synonym\": {\r\n\t\t\t\t\t\t\"type\": \"synonym\",\r\n\t\t\t\t\t\t\"synonyms\": [\"Äpple, App\"]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nBut not when reading from a file:\r\n\r\n```\r\n    {\r\n        \"settings\": {\r\n            \"index\" : {\r\n                \"analysis\" : {\r\n                    \"filter\" : {\r\n                        \"synonym\" : {\r\n                            \"type\" : \"synonym\", \r\n                            \"synonyms_path\" : \"synonym.txt\",\r\n                            \"tokenizer\" : \"standard\" \r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\nI already read this:\r\nhttps://discuss.elastic.co/t/synonym-using-a-file-is-not-working-malformed-input-exception/60487/5\r\n\r\nI have already  applied an asciifolding token filter before the synonym filter in the filter chain but still not working.\r\n\r\n```\r\n       \"analysis\": {\r\n          \"analyzer\": {\r\n            \"custom_swedish_analyzer\": {\r\n              \"type\": \"custom\",\r\n              \"filter\": [\r\n                \"asciifolding\",\r\n                \"lowercase\",\r\n                \"synonym\",\r\n                \"swedish_stemmer_filter\",\r\n                \"swedish_stopwords_filter\"\r\n              ],\r\n              \"tokenizer\": \"standard\"\r\n            }\r\n```","closed_by":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"performed_via_github_app":null}