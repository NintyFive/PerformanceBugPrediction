[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/228302348","html_url":"https://github.com/elastic/elasticsearch/issues/16428#issuecomment-228302348","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16428","id":228302348,"node_id":"MDEyOklzc3VlQ29tbWVudDIyODMwMjM0OA==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-06-24T09:36:07Z","updated_at":"2016-06-24T09:36:07Z","author_association":"MEMBER","body":"@dadoonet gracefully agreed to research and see what the implications of this are\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/228304240","html_url":"https://github.com/elastic/elasticsearch/issues/16428#issuecomment-228304240","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16428","id":228304240,"node_id":"MDEyOklzc3VlQ29tbWVudDIyODMwNDI0MA==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2016-06-24T09:46:18Z","updated_at":"2016-06-24T09:46:18Z","author_association":"MEMBER","body":"Useful links to understand STS:\n- http://docs.aws.amazon.com/STS/latest/APIReference/Welcome.html\n- http://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp.html\n\nIf I'm not mistaken it means that we want to give a temporary credential to a S3 repository, right?\n\nIf so, I think it makes sense to support it only at a repository level but not in cluster/node settings. So having a temporary value for a setting like `cloud.aws.token` does not make sense.\n\nIf we want to implement it, I'd support it only when we create a repo. Like:\n\n```\nPUT _snapshot/tmp_repo\n{\n  \"type\": \"s3\",\n  \"settings\": {\n    \"token\": \"temp-token-here\"\n  }\n}\n```\n\n@jipperinbham WDYT?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/234234259","html_url":"https://github.com/elastic/elasticsearch/issues/16428#issuecomment-234234259","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16428","id":234234259,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNDIzNDI1OQ==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2016-07-21T12:05:13Z","updated_at":"2016-07-21T12:05:13Z","author_association":"MEMBER","body":"No news on this. So I'm closing for now.\nFeel free to comment and reopen.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/246830188","html_url":"https://github.com/elastic/elasticsearch/issues/16428#issuecomment-246830188","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16428","id":246830188,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NjgzMDE4OA==","user":{"login":"elliott-davis","id":1130349,"node_id":"MDQ6VXNlcjExMzAzNDk=","avatar_url":"https://avatars2.githubusercontent.com/u/1130349?v=4","gravatar_id":"","url":"https://api.github.com/users/elliott-davis","html_url":"https://github.com/elliott-davis","followers_url":"https://api.github.com/users/elliott-davis/followers","following_url":"https://api.github.com/users/elliott-davis/following{/other_user}","gists_url":"https://api.github.com/users/elliott-davis/gists{/gist_id}","starred_url":"https://api.github.com/users/elliott-davis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elliott-davis/subscriptions","organizations_url":"https://api.github.com/users/elliott-davis/orgs","repos_url":"https://api.github.com/users/elliott-davis/repos","events_url":"https://api.github.com/users/elliott-davis/events{/privacy}","received_events_url":"https://api.github.com/users/elliott-davis/received_events","type":"User","site_admin":false},"created_at":"2016-09-13T21:26:53Z","updated_at":"2016-09-13T21:26:53Z","author_association":"NONE","body":"incase anyone else runs across this - It looks like it was resolved in #19556\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/362317326","html_url":"https://github.com/elastic/elasticsearch/issues/16428#issuecomment-362317326","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16428","id":362317326,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MjMxNzMyNg==","user":{"login":"pheyos","id":1945390,"node_id":"MDQ6VXNlcjE5NDUzOTA=","avatar_url":"https://avatars0.githubusercontent.com/u/1945390?v=4","gravatar_id":"","url":"https://api.github.com/users/pheyos","html_url":"https://github.com/pheyos","followers_url":"https://api.github.com/users/pheyos/followers","following_url":"https://api.github.com/users/pheyos/following{/other_user}","gists_url":"https://api.github.com/users/pheyos/gists{/gist_id}","starred_url":"https://api.github.com/users/pheyos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pheyos/subscriptions","organizations_url":"https://api.github.com/users/pheyos/orgs","repos_url":"https://api.github.com/users/pheyos/repos","events_url":"https://api.github.com/users/pheyos/events{/privacy}","received_events_url":"https://api.github.com/users/pheyos/received_events","type":"User","site_admin":false},"created_at":"2018-02-01T16:17:24Z","updated_at":"2018-02-01T16:17:24Z","author_association":"NONE","body":"I would like to have support for AWS STS credentials (#19556 doesn't seem to resolve this).\r\n\r\nAs far as I understand, a session token is required when \"MFA-Protected API Access\" is activated on AWS [1]. Without support for session tokens all users affected by this policy are not able to access s3 via the plugin, so this would be an important improvement.\r\nFrom my point of view the token should be in the elasticsearch-keystore, just like access_key and secret_key are [2].\r\n\r\n[1] https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_mfa_configure-api-require.html\r\n[2] https://www.elastic.co/guide/en/elasticsearch/plugins/6.1/repository-s3-client.html","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/362318447","html_url":"https://github.com/elastic/elasticsearch/issues/16428#issuecomment-362318447","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16428","id":362318447,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MjMxODQ0Nw==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2018-02-01T16:20:48Z","updated_at":"2018-02-01T16:20:48Z","author_association":"MEMBER","body":"I believe it's a valid ask. I believe that the implementation that described @jipperinbham is the right approach as well.\r\nThe question is more then about revocation of tokens. I'm not sure we can update live such a setting yet and it's probably something needed. Also the need of \"reloading\" a S3 client when credential are changing. Unless we just create a new client anytime we need to call S3...","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/362319327","html_url":"https://github.com/elastic/elasticsearch/issues/16428#issuecomment-362319327","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16428","id":362319327,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MjMxOTMyNw==","user":{"login":"pheyos","id":1945390,"node_id":"MDQ6VXNlcjE5NDUzOTA=","avatar_url":"https://avatars0.githubusercontent.com/u/1945390?v=4","gravatar_id":"","url":"https://api.github.com/users/pheyos","html_url":"https://github.com/pheyos","followers_url":"https://api.github.com/users/pheyos/followers","following_url":"https://api.github.com/users/pheyos/following{/other_user}","gists_url":"https://api.github.com/users/pheyos/gists{/gist_id}","starred_url":"https://api.github.com/users/pheyos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pheyos/subscriptions","organizations_url":"https://api.github.com/users/pheyos/orgs","repos_url":"https://api.github.com/users/pheyos/repos","events_url":"https://api.github.com/users/pheyos/events{/privacy}","received_events_url":"https://api.github.com/users/pheyos/received_events","type":"User","site_admin":false},"created_at":"2018-02-01T16:23:30Z","updated_at":"2018-02-01T16:23:30Z","author_association":"NONE","body":"FWIW: The s3 input plugin for logstash seems to have support for session tokens [1].\r\n\r\n[1] https://www.elastic.co/guide/en/logstash/current/plugins-inputs-s3.html","performed_via_github_app":null}]