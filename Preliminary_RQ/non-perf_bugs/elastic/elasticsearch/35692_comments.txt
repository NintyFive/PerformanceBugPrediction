[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/439916918","html_url":"https://github.com/elastic/elasticsearch/issues/35692#issuecomment-439916918","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35692","id":439916918,"node_id":"MDEyOklzc3VlQ29tbWVudDQzOTkxNjkxOA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-11-19T14:46:46Z","updated_at":"2018-11-19T14:46:46Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/439977276","html_url":"https://github.com/elastic/elasticsearch/issues/35692#issuecomment-439977276","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35692","id":439977276,"node_id":"MDEyOklzc3VlQ29tbWVudDQzOTk3NzI3Ng==","user":{"login":"dliappis","id":1754575,"node_id":"MDQ6VXNlcjE3NTQ1NzU=","avatar_url":"https://avatars0.githubusercontent.com/u/1754575?v=4","gravatar_id":"","url":"https://api.github.com/users/dliappis","html_url":"https://github.com/dliappis","followers_url":"https://api.github.com/users/dliappis/followers","following_url":"https://api.github.com/users/dliappis/following{/other_user}","gists_url":"https://api.github.com/users/dliappis/gists{/gist_id}","starred_url":"https://api.github.com/users/dliappis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dliappis/subscriptions","organizations_url":"https://api.github.com/users/dliappis/orgs","repos_url":"https://api.github.com/users/dliappis/repos","events_url":"https://api.github.com/users/dliappis/events{/privacy}","received_events_url":"https://api.github.com/users/dliappis/received_events","type":"User","site_admin":false},"created_at":"2018-11-19T17:34:03Z","updated_at":"2018-11-19T17:34:03Z","author_association":"CONTRIBUTOR","body":"I've been able to reproduce this, e.g. tinkering with `./rest-api-spec/src/main/resources/rest-api-spec/test/info/10_info.yml` on the 6.5.0 branch and using `./gradlew :distribution:archives:integ-test-zip:integTest -Dtests.class=\"org.elasticsearch.test.rest.*Yaml*IT\" -Dtests.method=\"test {p0=info/10_info/Info}\"`. (FYI we've switched to `./gradlew` since https://github.com/elastic/elasticsearch/commit/74dc60fc97c03317ec3f13fdeb6332fba2e9fa3d).\r\n\r\nThe issue here is that `com.carrotsearch.ant.tasks.junit4.dependencies.com.carrotsearch.randomizedtesting` globs things very aggressively and the parens used in the string passed in `-Dtests.method` are interpreted as capture groups e.g. if I introduce a trailing parens by mistake, I see:\r\n\r\n```\r\n./gradlew :distribution:archives:integ-test-zip:integTest -Dtests.class=\"org.elasticsearch.test.rest.*Yaml*IT\" -Dtests.method=\"test {p0=info/10_info/Info)}\"\r\n\r\n<snip...>\r\n> At least one slave process threw an exception, first: Forked process returned with error code: 240. Very likely a JVM crash.  See process stderr at: /home/dl/source/elastic/elasticsearch/distribution/archives/integ-test-zip/build/testrun/integTestRunner/temp/junit4-J0-20181119_192609_4425197339072811181731.syserr\r\n```\r\n\r\nand then looking at the syserr file:\r\n\r\n```\r\ncat /home/dl/source/elastic/elasticsearch/distribution/archives/integ-test-zip/build/testrun/integTestRunner/temp/junit4-J0-20181119_192609_4425197339072811181731.syserr\r\nWARN: Exception at main loop level. -> java.util.regex.PatternSyntaxException: Unmatched closing ')' near index 27\r\n^test \\{p0=info/10_info/Info)\\}$\r\n                           ^\r\n        at java.util.regex.Pattern.error(Pattern.java:1957)\r\n        at java.util.regex.Pattern.compile(Pattern.java:1702)\r\n```\r\n\r\nTrying to escape `()` with `\\` doesn't help as `RandomizedRunner` escapes the `\\'` itself :)\r\n\r\nDiscussed with @nik9000 who was kind enough to provide a thorough explanation and will take a look.","performed_via_github_app":null}]