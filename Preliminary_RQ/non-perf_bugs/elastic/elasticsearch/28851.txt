{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/28851","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28851/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28851/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28851/events","html_url":"https://github.com/elastic/elasticsearch/issues/28851","id":301034069,"node_id":"MDU6SXNzdWUzMDEwMzQwNjk=","number":28851,"title":"REST Client API BulkProcessor should expose few methods to understand it's internal status","user":{"login":"detro","id":114508,"node_id":"MDQ6VXNlcjExNDUwOA==","avatar_url":"https://avatars2.githubusercontent.com/u/114508?v=4","gravatar_id":"","url":"https://api.github.com/users/detro","html_url":"https://github.com/detro","followers_url":"https://api.github.com/users/detro/followers","following_url":"https://api.github.com/users/detro/following{/other_user}","gists_url":"https://api.github.com/users/detro/gists{/gist_id}","starred_url":"https://api.github.com/users/detro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/detro/subscriptions","organizations_url":"https://api.github.com/users/detro/orgs","repos_url":"https://api.github.com/users/detro/repos","events_url":"https://api.github.com/users/detro/events{/privacy}","received_events_url":"https://api.github.com/users/detro/received_events","type":"User","site_admin":false},"labels":[{"id":493198109,"node_id":"MDU6TGFiZWw0OTMxOTgxMDk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Java%20High%20Level%20REST%20Client","name":":Core/Features/Java High Level REST Client","color":"0e8a16","default":false,"description":"Expressive Java Client for Elasticsearch"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-02-28T14:00:14Z","updated_at":"2018-03-09T14:32:17Z","closed_at":"2018-03-09T14:32:17Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the feature**:\r\n`BulkProcessor` provides a very clean way to keep piling up bulk requests, leaving to the official client code to handle how fast and with which back-off strategy errors are retried.\r\n\r\nOne issue I found quite _annoying_ is that there are no methods exposed on the `BulkProcessor` to help understand it's internal status. I'm after things like:\r\n* how many Requests are still pending?\r\n* how many Requests are being processed right now?\r\n\r\nIn a _production_ environment, those would have little use, but in a testing environment they are pretty crucial, to ensure reliable tests can be written. Otherwise the only way is to avoid BULK requests during testing, but this leaves us with an area of untested code.\r\n\r\nRight now I have setup things to wait a totally arbitrary 5 seconds. But it's a bad and unreliable solution (I'm sure it will make my tests fail sporadically).\r\n\r\nCan we get something like this implemented?","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}