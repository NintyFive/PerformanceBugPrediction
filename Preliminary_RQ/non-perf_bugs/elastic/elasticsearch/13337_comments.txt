[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/137681459","html_url":"https://github.com/elastic/elasticsearch/issues/13337#issuecomment-137681459","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13337","id":137681459,"node_id":"MDEyOklzc3VlQ29tbWVudDEzNzY4MTQ1OQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-09-04T08:47:11Z","updated_at":"2015-09-04T08:47:11Z","author_association":"CONTRIBUTOR","body":"The issue is due to the fact that the parser keeps state. So if you pass some percents in a percentiles_bucket agg, and then create another percentiles_bucket agg whithout specifying percents, it will reuse the ones that were previously set. In that case, it reuses the percents from another test that makes sure that we fail when percents are out of range.\n\nI will mark the test with @AwaitsFix\n","performed_via_github_app":null}]