{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/10195","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10195/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10195/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10195/events","html_url":"https://github.com/elastic/elasticsearch/issues/10195","id":63308899,"node_id":"MDU6SXNzdWU2MzMwODg5OQ==","number":10195,"title":"Refactoring: combine similar GroupShardsIterators in RoutingTable","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"labels":[{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-03-20T21:13:39Z","updated_at":"2015-08-25T09:20:53Z","closed_at":"2015-08-25T09:20:53Z","author_association":"MEMBER","active_lock_reason":null,"body":"Three RoutingTable methods\n- GroupShardsIterator activePrimaryShardsGrouped()\n- GroupShardsIterator allActiveShardsGrouped()\n- GroupShardsIterator allAssignedShardsGrouped()\n\nAre almost similar internally and as far as I can see only differ in one line like `if (shardRouting.active())` where they use different criteria to include that particular shardRouting in the result. These methods could possibly be combined into one where the criterion to filter on is passed in as an argument, eg.\n\n```\npublic GroupShardsIterator allAssignedShardsGrouped(String[] indices, boolean includeEmpty, boolean includeRelocationTargets, ShardRoutingCriterion criterion) {\n...\n            if (criterion.includes(shardRouting) {\n                  ....\n            }\n}\n```\n\nThis would avoid code duplication and make testing RoutingTable easier.\n","closed_by":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"performed_via_github_app":null}