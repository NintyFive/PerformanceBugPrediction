{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/931","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/931/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/931/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/931/events","html_url":"https://github.com/elastic/elasticsearch/issues/931","id":897427,"node_id":"MDU6SXNzdWU4OTc0Mjc=","number":931,"title":"Deleting and recreating a new index with dynamic mapping can cause type failures","user":{"login":"gjb83","id":402955,"node_id":"MDQ6VXNlcjQwMjk1NQ==","avatar_url":"https://avatars0.githubusercontent.com/u/402955?v=4","gravatar_id":"","url":"https://api.github.com/users/gjb83","html_url":"https://github.com/gjb83","followers_url":"https://api.github.com/users/gjb83/followers","following_url":"https://api.github.com/users/gjb83/following{/other_user}","gists_url":"https://api.github.com/users/gjb83/gists{/gist_id}","starred_url":"https://api.github.com/users/gjb83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gjb83/subscriptions","organizations_url":"https://api.github.com/users/gjb83/orgs","repos_url":"https://api.github.com/users/gjb83/repos","events_url":"https://api.github.com/users/gjb83/events{/privacy}","received_events_url":"https://api.github.com/users/gjb83/received_events","type":"User","site_admin":false},"labels":[{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":103600,"node_id":"MDU6TGFiZWwxMDM2MDA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.16.2","name":"v0.16.2","color":"DDDDDD","default":false,"description":null},{"id":97023,"node_id":"MDU6TGFiZWw5NzAyMw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.17.0","name":"v0.17.0","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2011-05-13T20:55:48Z","updated_at":"2011-05-15T09:52:28Z","closed_at":"2011-05-15T09:52:28Z","author_association":"NONE","active_lock_reason":null,"body":"Environment:\nelasticsearch v0.16.1, Mac OS X 10.6.7, Java 1.6.0_24 (other platforms untested)\n\nProblem:\nI am finding that if I add a document to a non-existent index, the index is automatically created, but around 20% of the time, the document is not added correctly.\n\nSteps to reproduce:\n\n```\n#!/bin/sh\ncurl -XDELETE http://localhost:9200/myindex; echo; sleep 1; \\\ncurl -XPOST http://localhost:9200/myindex/mytype/ -d '{ \"body\" : \"Test\" }'; echo; sleep 1; \\\ncurl -XPOST http://localhost:9200/myindex/_refresh; echo; sleep 1; \\\ncurl -XGET http://localhost:9200/myindex/_search?pretty=true; echo\n```\n\nYou may have to repeat this process a few times to reproduce this problem as it doesn't happen every time.\n\nResulting error:\n\n```\n\"failures\" : [ {\n  \"reason\" : \"TypeMissingException[[myindex] type[mytype] missing: failed to find type loaded for doc [VwMCBKs0QpSzSsc-329USg]]\"\n} ]\n```\n","closed_by":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"performed_via_github_app":null}