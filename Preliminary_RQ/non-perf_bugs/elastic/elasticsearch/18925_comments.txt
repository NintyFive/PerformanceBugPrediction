[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/226527300","html_url":"https://github.com/elastic/elasticsearch/issues/18925#issuecomment-226527300","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18925","id":226527300,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjUyNzMwMA==","user":{"login":"cechovsky","id":2878125,"node_id":"MDQ6VXNlcjI4NzgxMjU=","avatar_url":"https://avatars1.githubusercontent.com/u/2878125?v=4","gravatar_id":"","url":"https://api.github.com/users/cechovsky","html_url":"https://github.com/cechovsky","followers_url":"https://api.github.com/users/cechovsky/followers","following_url":"https://api.github.com/users/cechovsky/following{/other_user}","gists_url":"https://api.github.com/users/cechovsky/gists{/gist_id}","starred_url":"https://api.github.com/users/cechovsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cechovsky/subscriptions","organizations_url":"https://api.github.com/users/cechovsky/orgs","repos_url":"https://api.github.com/users/cechovsky/repos","events_url":"https://api.github.com/users/cechovsky/events{/privacy}","received_events_url":"https://api.github.com/users/cechovsky/received_events","type":"User","site_admin":false},"created_at":"2016-06-16T15:48:06Z","updated_at":"2016-06-16T15:48:06Z","author_association":"NONE","body":"I analyzed scoring explanation and\n- the same data\n- the same query\n\nand scoring explanation is different\n![image](https://cloud.githubusercontent.com/assets/2878125/16123206/781ffb2a-33ea-11e6-9de0-3350f00aa7ba.png)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/226789659","html_url":"https://github.com/elastic/elasticsearch/issues/18925#issuecomment-226789659","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18925","id":226789659,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjc4OTY1OQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-06-17T14:49:07Z","updated_at":"2016-06-17T14:49:07Z","author_association":"CONTRIBUTOR","body":"This is just a side effect of query rewriting.  You're probably using 5 shards with a small amount of data, so you have one document on each shard.  The term `4` only appears on one shard, and so will only appear in the explain output for that doc.  The other docs won't have it.\n\nTry creating the index with just one shard (or adding lots more data), then it will work correctly:\n\n```\nPUT t \n{\n  \"settings\": {\n    \"number_of_shards\": 1\n  }\n}\n\n\nPOST t/t/_bulk\n{\"index\": {}}\n{\"house_number\": \"1\", \"street\": \"Margaretenstraße\", \"city\": \"Krailling\"}\n{\"index\": {}}\n{\"house_number\": \"2A\", \"street\": \"Margaretenstraße\", \"city\": \"Krailling\"}\n{\"index\": {}}\n{\"house_number\": \"3\", \"street\": \"Margaretenstraße\", \"city\": \"Krailling\"}\n{\"index\": {}}\n{\"house_number\": \"4\", \"street\": \"Margaretenstraße\", \"city\": \"Krailling\"}\n\nGET t/_search\n{\n  \"explain\": true,\n  \"query\": {\n    \"multi_match\": {\n      \"type\": \"most_fields\",\n      \"query\": \"margaretenstraße krailling 4\",\n      \"tie_breaker\": 1,\n      \"fields\": [\n        \"house_number\",\n        \"street\",\n        \"city^2\"\n      ]\n    }\n  }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/228600662","html_url":"https://github.com/elastic/elasticsearch/issues/18925#issuecomment-228600662","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18925","id":228600662,"node_id":"MDEyOklzc3VlQ29tbWVudDIyODYwMDY2Mg==","user":{"login":"cechovsky","id":2878125,"node_id":"MDQ6VXNlcjI4NzgxMjU=","avatar_url":"https://avatars1.githubusercontent.com/u/2878125?v=4","gravatar_id":"","url":"https://api.github.com/users/cechovsky","html_url":"https://github.com/cechovsky","followers_url":"https://api.github.com/users/cechovsky/followers","following_url":"https://api.github.com/users/cechovsky/following{/other_user}","gists_url":"https://api.github.com/users/cechovsky/gists{/gist_id}","starred_url":"https://api.github.com/users/cechovsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cechovsky/subscriptions","organizations_url":"https://api.github.com/users/cechovsky/orgs","repos_url":"https://api.github.com/users/cechovsky/repos","events_url":"https://api.github.com/users/cechovsky/events{/privacy}","received_events_url":"https://api.github.com/users/cechovsky/received_events","type":"User","site_admin":false},"created_at":"2016-06-26T13:09:16Z","updated_at":"2016-06-26T13:09:57Z","author_association":"NONE","body":"Thank you. You're right, number_of_shards fixed it.\n\nBut I'm still wondering why it has such behavior that when I search for \"margaretenstraße krailling 4\" and I'm sure that I have this address in my index why it returns \"margaretenstraße krailling 1\". \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/228748571","html_url":"https://github.com/elastic/elasticsearch/issues/18925#issuecomment-228748571","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18925","id":228748571,"node_id":"MDEyOklzc3VlQ29tbWVudDIyODc0ODU3MQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-06-27T13:41:38Z","updated_at":"2016-06-27T13:41:38Z","author_association":"CONTRIBUTOR","body":"See https://www.elastic.co/guide/en/elasticsearch/guide/2.x/relevance-is-broken.html\n","performed_via_github_app":null}]