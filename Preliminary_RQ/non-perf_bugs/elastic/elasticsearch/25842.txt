{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/25842","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25842/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25842/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25842/events","html_url":"https://github.com/elastic/elasticsearch/issues/25842","id":244833451,"node_id":"MDU6SXNzdWUyNDQ4MzM0NTE=","number":25842,"title":"_bulk upload causes OOM","user":{"login":"truekonrads","id":1421150,"node_id":"MDQ6VXNlcjE0MjExNTA=","avatar_url":"https://avatars2.githubusercontent.com/u/1421150?v=4","gravatar_id":"","url":"https://api.github.com/users/truekonrads","html_url":"https://github.com/truekonrads","followers_url":"https://api.github.com/users/truekonrads/followers","following_url":"https://api.github.com/users/truekonrads/following{/other_user}","gists_url":"https://api.github.com/users/truekonrads/gists{/gist_id}","starred_url":"https://api.github.com/users/truekonrads/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/truekonrads/subscriptions","organizations_url":"https://api.github.com/users/truekonrads/orgs","repos_url":"https://api.github.com/users/truekonrads/repos","events_url":"https://api.github.com/users/truekonrads/events{/privacy}","received_events_url":"https://api.github.com/users/truekonrads/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-07-22T08:31:22Z","updated_at":"2017-07-24T08:22:01Z","closed_at":"2017-07-24T08:14:05Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**:\r\nelasticsearch-5.5.0 on Windows and also Amazon ES service running ES 5.3\r\n\r\n**Plugins installed**: \r\n - Kibana\r\n- X-Pack on Windows \r\n- whatevcer Amazon ships with by default\r\n\r\n**JVM version** (`java -version`):\r\n\r\njava version \"1.8.0_141\"\r\nJava(TM) SE Runtime Environment (build 1.8.0_141-b15)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.141-b15, mixed mode)\r\n\r\n**OS version** (`uname -a` if on a Unix-like system):\r\nWindows 7 / Amazon's magic OS\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nI was uploading 1.3G of JSON newline delimited data using logstash. Data is windows event logs parsed into fine fields. ES apparently can't keep up with writes and indexes, it keeps consuming more and more memory and then switches off indexing and eventually crashes dumps core. \r\n\r\n\r\n**Steps to reproduce**:\r\n1.  Set up a new ES on a workstation-like computer - mine was a intel core i5-3320M with SSD; jvm had 4Gs of RAM\r\nGenerate a large-ish data set (800k documents) with dozen fields per JSON-ND record ( I can't share mine)\r\n2. feed it in using logstash - minimal configuration is enough, just host stanza\r\n3.  about 1/3 to 1/2 in you will see ES complaining about data pressure and eventually dumping core\r\n\r\n**Provide logs (if relevant)**:\r\n\r\n[logs.zip](https://github.com/elastic/elasticsearch/files/1167215/logs.zip)\r\n\r\n\r\n","closed_by":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"performed_via_github_app":null}