{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/58478","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58478/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58478/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58478/events","html_url":"https://github.com/elastic/elasticsearch/issues/58478","id":644419956,"node_id":"MDU6SXNzdWU2NDQ0MTk5NTY=","number":58478,"title":"Grok failure log message prints wrong pipeline name [_none]","user":{"login":"sw-jung","id":5426400,"node_id":"MDQ6VXNlcjU0MjY0MDA=","avatar_url":"https://avatars1.githubusercontent.com/u/5426400?v=4","gravatar_id":"","url":"https://api.github.com/users/sw-jung","html_url":"https://github.com/sw-jung","followers_url":"https://api.github.com/users/sw-jung/followers","following_url":"https://api.github.com/users/sw-jung/following{/other_user}","gists_url":"https://api.github.com/users/sw-jung/gists{/gist_id}","starred_url":"https://api.github.com/users/sw-jung/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sw-jung/subscriptions","organizations_url":"https://api.github.com/users/sw-jung/orgs","repos_url":"https://api.github.com/users/sw-jung/repos","events_url":"https://api.github.com/users/sw-jung/events{/privacy}","received_events_url":"https://api.github.com/users/sw-jung/received_events","type":"User","site_admin":false},"labels":[{"id":268963484,"node_id":"MDU6TGFiZWwyNjg5NjM0ODQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Ingest","name":":Core/Features/Ingest","color":"0e8a16","default":false,"description":"Execution or management of Ingest Pipelines"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":1967496097,"node_id":"MDU6TGFiZWwxOTY3NDk2MDk3","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Core/Features","name":"Team:Core/Features","color":"fef2c0","default":false,"description":"Meta label for core/features team"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-06-24T08:23:12Z","updated_at":"2020-08-18T14:22:19Z","closed_at":"2020-08-18T14:22:19Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version** (`bin/elasticsearch --version`): 7.5.2\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nWhen grok parse failure occurred in an ingest pipeline processing, elasticsearch logs a debug message in the cluster log.\r\nHowever, this debug message prints the pipeline name as `_none` instead of the correct pipeline name.\r\n\r\n**Steps to reproduce**:\r\n\r\n 1. Install elasticsearch and kibana 7.5.2\r\n 2. Run APIs below:\r\n```http\r\nPUT _ingest/pipeline/test-grok-pipeline\r\n{\r\n  \"processors\": [\r\n    {\r\n      \"grok\": {\r\n        \"field\": \"message\",\r\n        \"patterns\": [\"%{DATESTAMP:time}: %{NUMBER:index}\"]\r\n      }\r\n    }\r\n  ]\r\n}\r\n\r\nPUT test-index/_doc/1?pipeline=test-grok-pipeline\r\n{\r\n  \"message\": \"06-10-2020 04:49:01: \"\r\n}\r\n```\r\n 3. See elasticsearch log:\r\n```log\r\n[2020-06-24T17:14:44,344][DEBUG][o.e.a.b.T.BulkRequestModifier] [SWJUNG-SURFACEB] failed to execute pipeline [_none] for document [test-index/_doc/1]\r\norg.elasticsearch.ingest.IngestProcessorException: java.lang.IllegalArgumentException: Provided Grok expressions do not match field value: [06-10-2020 04:49:01: ]\r\n        at org.elasticsearch.ingest.CompoundProcessor.newCompoundProcessorException(CompoundProcessor.java:215) ~[elasticsearch-7.5.2.jar:7.5.2]\r\n        at org.elasticsearch.ingest.CompoundProcessor.lambda$innerExecute$1(CompoundProcessor.java:147) [elasticsearch-7.5.2.jar:7.5.2]\r\n        at org.elasticsearch.ingest.Processor.execute(Processor.java:54) [elasticsearch-7.5.2.jar:7.5.2]\r\n        at org.elasticsearch.ingest.CompoundProcessor.innerExecute(CompoundProcessor.java:137) [elasticsearch-7.5.2.jar:7.5.2]\r\n        at org.elasticsearch.ingest.CompoundProcessor.execute(CompoundProcessor.java:123) [elasticsearch-7.5.2.jar:7.5.2]\r\n        at org.elasticsearch.ingest.Pipeline.execute(Pipeline.java:100) [elasticsearch-7.5.2.jar:7.5.2]\r\n        at org.elasticsearch.ingest.IngestService.innerExecute(IngestService.java:505) [elasticsearch-7.5.2.jar:7.5.2]\r\n        at org.elasticsearch.ingest.IngestService.executePipelines(IngestService.java:410) [elasticsearch-7.5.2.jar:7.5.2]\r\n        at org.elasticsearch.ingest.IngestService.access$000(IngestService.java:75) [elasticsearch-7.5.2.jar:7.5.2]\r\n        at org.elasticsearch.ingest.IngestService$3.doRun(IngestService.java:384) [elasticsearch-7.5.2.jar:7.5.2]\r\n        at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:773) [elasticsearch-7.5.2.jar:7.5.2]\r\n        at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) [elasticsearch-7.5.2.jar:7.5.2]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]\r\n        at java.lang.Thread.run(Thread.java:830) [?:?]\r\nCaused by: java.lang.IllegalArgumentException: Provided Grok expressions do not match field value: [06-10-2020 04:49:01: ]\r\n        at org.elasticsearch.ingest.common.GrokProcessor.execute(GrokProcessor.java:68) ~[?:?]\r\n        at org.elasticsearch.ingest.Processor.execute(Processor.java:51) ~[elasticsearch-7.5.2.jar:7.5.2]\r\n        ... 12 more\r\n```","closed_by":{"login":"danhermann","id":22777892,"node_id":"MDQ6VXNlcjIyNzc3ODky","avatar_url":"https://avatars0.githubusercontent.com/u/22777892?v=4","gravatar_id":"","url":"https://api.github.com/users/danhermann","html_url":"https://github.com/danhermann","followers_url":"https://api.github.com/users/danhermann/followers","following_url":"https://api.github.com/users/danhermann/following{/other_user}","gists_url":"https://api.github.com/users/danhermann/gists{/gist_id}","starred_url":"https://api.github.com/users/danhermann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danhermann/subscriptions","organizations_url":"https://api.github.com/users/danhermann/orgs","repos_url":"https://api.github.com/users/danhermann/repos","events_url":"https://api.github.com/users/danhermann/events{/privacy}","received_events_url":"https://api.github.com/users/danhermann/received_events","type":"User","site_admin":false},"performed_via_github_app":null}