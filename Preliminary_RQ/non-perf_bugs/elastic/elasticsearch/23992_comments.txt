[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/292690947","html_url":"https://github.com/elastic/elasticsearch/issues/23992#issuecomment-292690947","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23992","id":292690947,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjY5MDk0Nw==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2017-04-08T03:14:16Z","updated_at":"2017-04-08T03:14:16Z","author_association":"MEMBER","body":"> One idea is to look for the environment variable and known locations, and error up front. \r\n\r\nIs it possible to catch the SMException and throw in that case a better exception?\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/292695402","html_url":"https://github.com/elastic/elasticsearch/issues/23992#issuecomment-292695402","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23992","id":292695402,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjY5NTQwMg==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2017-04-08T05:02:11Z","updated_at":"2017-04-08T05:02:11Z","author_association":"MEMBER","body":"That may be possible. I will experiment.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/385930499","html_url":"https://github.com/elastic/elasticsearch/issues/23992#issuecomment-385930499","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23992","id":385930499,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NTkzMDQ5OQ==","user":{"login":"albertzaharovits","id":4568420,"node_id":"MDQ6VXNlcjQ1Njg0MjA=","avatar_url":"https://avatars2.githubusercontent.com/u/4568420?v=4","gravatar_id":"","url":"https://api.github.com/users/albertzaharovits","html_url":"https://github.com/albertzaharovits","followers_url":"https://api.github.com/users/albertzaharovits/followers","following_url":"https://api.github.com/users/albertzaharovits/following{/other_user}","gists_url":"https://api.github.com/users/albertzaharovits/gists{/gist_id}","starred_url":"https://api.github.com/users/albertzaharovits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertzaharovits/subscriptions","organizations_url":"https://api.github.com/users/albertzaharovits/orgs","repos_url":"https://api.github.com/users/albertzaharovits/repos","events_url":"https://api.github.com/users/albertzaharovits/events{/privacy}","received_events_url":"https://api.github.com/users/albertzaharovits/received_events","type":"User","site_admin":false},"created_at":"2018-05-02T10:14:32Z","updated_at":"2018-05-02T10:14:32Z","author_association":"CONTRIBUTOR","body":"Would granting `permission java.io.FilePermission \"<<ALL FILES>>\", \"read\"` inside the security policy file but then scoping/limiting **each** `doPrivileged` invocation inside the plugin with the appropriate [least permissions](https://docs.oracle.com/javase/8/docs/api/java/security/AccessController.html#doPrivileged-java.security.PrivilegedAction-java.security.AccessControlContext-java.security.Permission...-) be a reasonable solution? In this case, the file system permissions would be effectively granted only to the code groping for the credentials file.\r\n\r\nIn general, what do you think about forbidding (un-scopped `doPriviledged`) and having a least privilege method for each call site?\r\n\r\ncc @tlrx ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/387152723","html_url":"https://github.com/elastic/elasticsearch/issues/23992#issuecomment-387152723","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23992","id":387152723,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NzE1MjcyMw==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2018-05-07T18:08:34Z","updated_at":"2018-05-07T18:08:34Z","author_association":"MEMBER","body":"@albertzaharovits I don't think we should add any permissions for this. Catching the security exception and \"peeking\" at it is one solution we might be able to use in order to give a better error message here, as suggested by @dadoonet. We should at minimum document the limitation (my last solution in the original description). ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/387343465","html_url":"https://github.com/elastic/elasticsearch/issues/23992#issuecomment-387343465","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23992","id":387343465,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NzM0MzQ2NQ==","user":{"login":"albertzaharovits","id":4568420,"node_id":"MDQ6VXNlcjQ1Njg0MjA=","avatar_url":"https://avatars2.githubusercontent.com/u/4568420?v=4","gravatar_id":"","url":"https://api.github.com/users/albertzaharovits","html_url":"https://github.com/albertzaharovits","followers_url":"https://api.github.com/users/albertzaharovits/followers","following_url":"https://api.github.com/users/albertzaharovits/following{/other_user}","gists_url":"https://api.github.com/users/albertzaharovits/gists{/gist_id}","starred_url":"https://api.github.com/users/albertzaharovits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertzaharovits/subscriptions","organizations_url":"https://api.github.com/users/albertzaharovits/orgs","repos_url":"https://api.github.com/users/albertzaharovits/repos","events_url":"https://api.github.com/users/albertzaharovits/events{/privacy}","received_events_url":"https://api.github.com/users/albertzaharovits/received_events","type":"User","site_admin":false},"created_at":"2018-05-08T09:31:52Z","updated_at":"2018-05-08T09:33:15Z","author_association":"CONTRIBUTOR","body":"@rjernst understood, thanks for rephrasing it, looks more actionable now!\r\nI was trying to provide a hustle free alternative for folks running ES on google compute by leveraging the scoped `doPrivileged` from Java 8.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/415768285","html_url":"https://github.com/elastic/elasticsearch/issues/23992#issuecomment-415768285","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23992","id":415768285,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNTc2ODI4NQ==","user":{"login":"albertzaharovits","id":4568420,"node_id":"MDQ6VXNlcjQ1Njg0MjA=","avatar_url":"https://avatars2.githubusercontent.com/u/4568420?v=4","gravatar_id":"","url":"https://api.github.com/users/albertzaharovits","html_url":"https://github.com/albertzaharovits","followers_url":"https://api.github.com/users/albertzaharovits/followers","following_url":"https://api.github.com/users/albertzaharovits/following{/other_user}","gists_url":"https://api.github.com/users/albertzaharovits/gists{/gist_id}","starred_url":"https://api.github.com/users/albertzaharovits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertzaharovits/subscriptions","organizations_url":"https://api.github.com/users/albertzaharovits/orgs","repos_url":"https://api.github.com/users/albertzaharovits/repos","events_url":"https://api.github.com/users/albertzaharovits/events{/privacy}","received_events_url":"https://api.github.com/users/albertzaharovits/received_events","type":"User","site_admin":false},"created_at":"2018-08-24T14:02:36Z","updated_at":"2018-08-24T14:02:36Z","author_association":"CONTRIBUTOR","body":"This has been resurrected in today's FixItFriday. Indeed, documenting the limitation, as proposed by @rjernst is the way forward. Adding security privileges only for the sake of a friendlier run time error is not convincing anyone.\r\n\r\nI will follow-up with the docs PR.","performed_via_github_app":null}]