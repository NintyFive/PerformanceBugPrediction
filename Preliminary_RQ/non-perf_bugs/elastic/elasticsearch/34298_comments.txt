[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/426984469","html_url":"https://github.com/elastic/elasticsearch/issues/34298#issuecomment-426984469","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34298","id":426984469,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNjk4NDQ2OQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-10-04T11:30:28Z","updated_at":"2018-10-04T11:30:28Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search-aggs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/427283039","html_url":"https://github.com/elastic/elasticsearch/issues/34298#issuecomment-427283039","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34298","id":427283039,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNzI4MzAzOQ==","user":{"login":"romseygeek","id":1347065,"node_id":"MDQ6VXNlcjEzNDcwNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/1347065?v=4","gravatar_id":"","url":"https://api.github.com/users/romseygeek","html_url":"https://github.com/romseygeek","followers_url":"https://api.github.com/users/romseygeek/followers","following_url":"https://api.github.com/users/romseygeek/following{/other_user}","gists_url":"https://api.github.com/users/romseygeek/gists{/gist_id}","starred_url":"https://api.github.com/users/romseygeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/romseygeek/subscriptions","organizations_url":"https://api.github.com/users/romseygeek/orgs","repos_url":"https://api.github.com/users/romseygeek/repos","events_url":"https://api.github.com/users/romseygeek/events{/privacy}","received_events_url":"https://api.github.com/users/romseygeek/received_events","type":"User","site_admin":false},"created_at":"2018-10-05T08:14:10Z","updated_at":"2018-10-05T08:14:10Z","author_association":"CONTRIBUTOR","body":"Having thought about this some more, I think we should also ignore the ngram and shingle filters here, as synonyms generally are applied to whole tokens.  Similarly, Synonym and SynonymGraph should also be ignored, because applying synonyms to a synonym file will make the end result very difficult to reason about.\r\n\r\nI can see arguments both ways for WordDelimiterFilter and CompoundWordTokenFilterBase, but I think the simplest solution will be to ignore both for now.  We can add a setting in future to allow them to be used when parsing synonyms if there's an obvious user need for it.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/504800397","html_url":"https://github.com/elastic/elasticsearch/issues/34298#issuecomment-504800397","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34298","id":504800397,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNDgwMDM5Nw==","user":{"login":"matthuhiggins","id":8185,"node_id":"MDQ6VXNlcjgxODU=","avatar_url":"https://avatars1.githubusercontent.com/u/8185?v=4","gravatar_id":"","url":"https://api.github.com/users/matthuhiggins","html_url":"https://github.com/matthuhiggins","followers_url":"https://api.github.com/users/matthuhiggins/followers","following_url":"https://api.github.com/users/matthuhiggins/following{/other_user}","gists_url":"https://api.github.com/users/matthuhiggins/gists{/gist_id}","starred_url":"https://api.github.com/users/matthuhiggins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matthuhiggins/subscriptions","organizations_url":"https://api.github.com/users/matthuhiggins/orgs","repos_url":"https://api.github.com/users/matthuhiggins/repos","events_url":"https://api.github.com/users/matthuhiggins/events{/privacy}","received_events_url":"https://api.github.com/users/matthuhiggins/received_events","type":"User","site_admin":false},"created_at":"2019-06-24T00:10:07Z","updated_at":"2019-06-24T00:10:57Z","author_association":"NONE","body":"I was using the word delimiter filter in conjunction with a synonym filter, and I am unsure how to upgrade to 7.x with this change:\r\n\r\n```\r\ncurl -X PUT \"localhost:9200/my_index\" -H 'Content-Type: application/json' -d'\r\n{\r\n  \"settings\": {\r\n    \"analysis\": {\r\n      \"analyzer\": {\r\n        \"company_name_analyzer\": {\r\n          \"type\":      \"custom\", \r\n          \"tokenizer\": \"standard\",\r\n          \"filter\": [\r\n            \"company_name_camel_case\",\r\n            \"lowercase\",\r\n            \"company_name_abbreviations\"\r\n          ]\r\n        }\r\n      },\r\n      \"filter\": {\r\n        \"company_name_abbreviations\": {\r\n          \"type\": \"synonym\",\r\n          \"synonyms\": [\"co-op => cooperative\", \"corp,corporation\"]\r\n        },\r\n        \"company_name_camel_case\": {\r\n          \"type\": \"word_delimiter\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n}'\r\n```\r\n\r\nI need the word delimiter filter to run _before_ the lowercase filter, so that \"AcmeTech\" is filtered to `[\"Acme\", \"Tech\"]`. I need the lowercase filter to run before the synonym filter so that \"Corp\" is tokenized to `[\"corporation\"]`.\r\n\r\n\"AcmeTech Corp\" is an example of a business name to search against. The term \"Acme\" should match to AcmeCorp, and the term \"Corporation\" should match to \"Corp\".\r\n\r\n```\r\ncurl -X POST \"localhost:9200/my_index/_analyze\" -H 'Content-Type: application/json' -d'\r\n{\r\n  \"analyzer\": \"company_name_analyzer\",\r\n  \"text\": \"AcmeTech Corp\"\r\n}'\r\n```\r\n\r\nI am unsure how to structure this analyzer for 7.x. I do not need the word delimiter filter to run a \"synonym filter\", but I need it to run before the lowercase filter. I can take this to the message boards, but currently this is less of a question or more a concern that my capabilities are lost.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/504904331","html_url":"https://github.com/elastic/elasticsearch/issues/34298#issuecomment-504904331","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34298","id":504904331,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNDkwNDMzMQ==","user":{"login":"romseygeek","id":1347065,"node_id":"MDQ6VXNlcjEzNDcwNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/1347065?v=4","gravatar_id":"","url":"https://api.github.com/users/romseygeek","html_url":"https://github.com/romseygeek","followers_url":"https://api.github.com/users/romseygeek/followers","following_url":"https://api.github.com/users/romseygeek/following{/other_user}","gists_url":"https://api.github.com/users/romseygeek/gists{/gist_id}","starred_url":"https://api.github.com/users/romseygeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/romseygeek/subscriptions","organizations_url":"https://api.github.com/users/romseygeek/orgs","repos_url":"https://api.github.com/users/romseygeek/repos","events_url":"https://api.github.com/users/romseygeek/events{/privacy}","received_events_url":"https://api.github.com/users/romseygeek/received_events","type":"User","site_admin":false},"created_at":"2019-06-24T08:05:02Z","updated_at":"2019-06-24T08:05:02Z","author_association":"CONTRIBUTOR","body":"You can use the multiplexer filter to build two parallel filter chains:\r\n```\r\n\"filter\" : {\r\n  \"company_name\" : {\r\n    \"type\" : \"multiplexer\",\r\n    \"filters\" : [ \"company_name_camel_case, lowercase\", \"lowercase, company_name_abbreviations\" ]\r\n  }\r\n}\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/505136869","html_url":"https://github.com/elastic/elasticsearch/issues/34298#issuecomment-505136869","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34298","id":505136869,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNTEzNjg2OQ==","user":{"login":"matthuhiggins","id":8185,"node_id":"MDQ6VXNlcjgxODU=","avatar_url":"https://avatars1.githubusercontent.com/u/8185?v=4","gravatar_id":"","url":"https://api.github.com/users/matthuhiggins","html_url":"https://github.com/matthuhiggins","followers_url":"https://api.github.com/users/matthuhiggins/followers","following_url":"https://api.github.com/users/matthuhiggins/following{/other_user}","gists_url":"https://api.github.com/users/matthuhiggins/gists{/gist_id}","starred_url":"https://api.github.com/users/matthuhiggins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matthuhiggins/subscriptions","organizations_url":"https://api.github.com/users/matthuhiggins/orgs","repos_url":"https://api.github.com/users/matthuhiggins/repos","events_url":"https://api.github.com/users/matthuhiggins/events{/privacy}","received_events_url":"https://api.github.com/users/matthuhiggins/received_events","type":"User","site_admin":false},"created_at":"2019-06-24T18:59:02Z","updated_at":"2019-06-24T19:01:28Z","author_association":"NONE","body":"`multiplexer` is brilliant. However, I am running into an \"offsets must not go backwards\" error when using it with 6.8. I put exact repro steps into this gist: https://gist.github.com/matthuhiggins/b5139bfade363744dbad942e2b44f90d.\r\n\r\nThere is a new `adjust_offsets: false` option in 7.0 but not in 6.8.\r\n\r\nIf there is no obvious answer, should I make a separate github issue or post to the message board?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/505137693","html_url":"https://github.com/elastic/elasticsearch/issues/34298#issuecomment-505137693","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34298","id":505137693,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNTEzNzY5Mw==","user":{"login":"romseygeek","id":1347065,"node_id":"MDQ6VXNlcjEzNDcwNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/1347065?v=4","gravatar_id":"","url":"https://api.github.com/users/romseygeek","html_url":"https://github.com/romseygeek","followers_url":"https://api.github.com/users/romseygeek/followers","following_url":"https://api.github.com/users/romseygeek/following{/other_user}","gists_url":"https://api.github.com/users/romseygeek/gists{/gist_id}","starred_url":"https://api.github.com/users/romseygeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/romseygeek/subscriptions","organizations_url":"https://api.github.com/users/romseygeek/orgs","repos_url":"https://api.github.com/users/romseygeek/repos","events_url":"https://api.github.com/users/romseygeek/events{/privacy}","received_events_url":"https://api.github.com/users/romseygeek/received_events","type":"User","site_admin":false},"created_at":"2019-06-24T19:01:37Z","updated_at":"2019-06-24T19:01:37Z","author_association":"CONTRIBUTOR","body":"It's an annoying limitation in 6.8, I know.  You can get round it by reversing the order of the `filters` list:\r\n```\r\n\"filters\" : [ \r\n  \"lowercase, company_name_abbreviations\",\r\n  \"company_name_camel_case, lowercase\" ]\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/505263929","html_url":"https://github.com/elastic/elasticsearch/issues/34298#issuecomment-505263929","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34298","id":505263929,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNTI2MzkyOQ==","user":{"login":"matthuhiggins","id":8185,"node_id":"MDQ6VXNlcjgxODU=","avatar_url":"https://avatars1.githubusercontent.com/u/8185?v=4","gravatar_id":"","url":"https://api.github.com/users/matthuhiggins","html_url":"https://github.com/matthuhiggins","followers_url":"https://api.github.com/users/matthuhiggins/followers","following_url":"https://api.github.com/users/matthuhiggins/following{/other_user}","gists_url":"https://api.github.com/users/matthuhiggins/gists{/gist_id}","starred_url":"https://api.github.com/users/matthuhiggins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matthuhiggins/subscriptions","organizations_url":"https://api.github.com/users/matthuhiggins/orgs","repos_url":"https://api.github.com/users/matthuhiggins/repos","events_url":"https://api.github.com/users/matthuhiggins/events{/privacy}","received_events_url":"https://api.github.com/users/matthuhiggins/received_events","type":"User","site_admin":false},"created_at":"2019-06-25T03:14:45Z","updated_at":"2019-06-25T03:14:45Z","author_association":"NONE","body":"Putting the synonym filter inside a multiplexer changes its behavior when the input (LHS) synonym is multiple tokens (ES v6.8):\r\n\r\nhttps://gist.github.com/matthuhiggins/16b5d29c2ea0bb4a9e21f64268b6865f\r\n\r\nEverything you've answered so far has put me in a step in the right direction. Thanks for everything so far!","performed_via_github_app":null}]