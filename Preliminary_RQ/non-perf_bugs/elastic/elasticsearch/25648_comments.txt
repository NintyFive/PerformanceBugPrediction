[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/314481784","html_url":"https://github.com/elastic/elasticsearch/issues/25648#issuecomment-314481784","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25648","id":314481784,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNDQ4MTc4NA==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2017-07-11T15:29:54Z","updated_at":"2017-07-11T15:30:34Z","author_association":"MEMBER","body":"@yuthura yes, thanks for pointing this out. The problem is that `ToXContentToBytes#toString()`, which is used internally, assumes that the object that should be printed renders to a self-contained json (or yaml, smile...) object, which aggregation builders generally don't do. This is not as easy to fix as in the SuggestionBuilder case you refer to, because AggregationBuilders are all fragments of other json structures. \r\nNote that one way to avoid this is to use `XContentHelper.toString(AggregationBuilders.dateHistogram(\"revenueHistogram\")` in this example.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/314771860","html_url":"https://github.com/elastic/elasticsearch/issues/25648#issuecomment-314771860","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25648","id":314771860,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNDc3MTg2MA==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2017-07-12T13:39:24Z","updated_at":"2017-07-12T13:39:24Z","author_association":"MEMBER","body":"@cbuescher Should we make `ToXContentToBytes#toString()` call `XContentHelper#toString` or at least behave the same, so that it checks `isFragment`? I think we may have the problem of breaking output from classes that haven't ben migrated yet to `XContentObject` although they output a whole object.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/314772638","html_url":"https://github.com/elastic/elasticsearch/issues/25648#issuecomment-314772638","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25648","id":314772638,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNDc3MjYzOA==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2017-07-12T13:42:10Z","updated_at":"2017-07-12T13:42:10Z","author_association":"MEMBER","body":"@javanna - @cbuescher and I were just saying the same thing. I think that would be the ideal solution here but we need to migrate the remaining classes to XContentObject otherwise we risk fixing this but breaking other classes.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/314773986","html_url":"https://github.com/elastic/elasticsearch/issues/25648#issuecomment-314773986","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25648","id":314773986,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNDc3Mzk4Ng==","user":{"login":"yuthura","id":608953,"node_id":"MDQ6VXNlcjYwODk1Mw==","avatar_url":"https://avatars1.githubusercontent.com/u/608953?v=4","gravatar_id":"","url":"https://api.github.com/users/yuthura","html_url":"https://github.com/yuthura","followers_url":"https://api.github.com/users/yuthura/followers","following_url":"https://api.github.com/users/yuthura/following{/other_user}","gists_url":"https://api.github.com/users/yuthura/gists{/gist_id}","starred_url":"https://api.github.com/users/yuthura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yuthura/subscriptions","organizations_url":"https://api.github.com/users/yuthura/orgs","repos_url":"https://api.github.com/users/yuthura/repos","events_url":"https://api.github.com/users/yuthura/events{/privacy}","received_events_url":"https://api.github.com/users/yuthura/received_events","type":"User","site_admin":false},"created_at":"2017-07-12T13:46:27Z","updated_at":"2017-07-12T13:46:27Z","author_association":"NONE","body":"@cbuescher thanks for the tip on `XContentHelper`, this solves my use-case for the foreseeable future. :)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/320211422","html_url":"https://github.com/elastic/elasticsearch/issues/25648#issuecomment-320211422","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25648","id":320211422,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMDIxMTQyMg==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2017-08-04T10:07:31Z","updated_at":"2017-08-04T10:07:31Z","author_association":"MEMBER","body":"This bug is related to https://github.com/elastic/elasticsearch/issues/16347 so I'm going to cloase this in favour of that issue","performed_via_github_app":null}]