{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/25303","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25303/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25303/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25303/events","html_url":"https://github.com/elastic/elasticsearch/issues/25303","id":237045939,"node_id":"MDU6SXNzdWUyMzcwNDU5Mzk=","number":25303,"title":"Support for configurable list of ports for EC2 Discovery","user":{"login":"CpuID","id":916201,"node_id":"MDQ6VXNlcjkxNjIwMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/916201?v=4","gravatar_id":"","url":"https://api.github.com/users/CpuID","html_url":"https://github.com/CpuID","followers_url":"https://api.github.com/users/CpuID/followers","following_url":"https://api.github.com/users/CpuID/following{/other_user}","gists_url":"https://api.github.com/users/CpuID/gists{/gist_id}","starred_url":"https://api.github.com/users/CpuID/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CpuID/subscriptions","organizations_url":"https://api.github.com/users/CpuID/orgs","repos_url":"https://api.github.com/users/CpuID/repos","events_url":"https://api.github.com/users/CpuID/events{/privacy}","received_events_url":"https://api.github.com/users/CpuID/received_events","type":"User","site_admin":false},"labels":[{"id":160579278,"node_id":"MDU6TGFiZWwxNjA1NzkyNzg=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Discovery-Plugins","name":":Distributed/Discovery-Plugins","color":"0e8a16","default":false,"description":"Anything related to our integration plugins with EC2, GCP and Azure"},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2017-06-19T22:51:21Z","updated_at":"2018-02-13T19:49:23Z","closed_at":"2017-07-07T13:09:43Z","author_association":"NONE","active_lock_reason":null,"body":"<!-- Feature request -->\r\n\r\n**Describe the feature**:\r\n\r\nCurrently the EC2 Discovery plugin will attempt a single port, as per [this logic](https://github.com/elastic/elasticsearch/blob/master/plugins/discovery-ec2/src/main/java/org/elasticsearch/discovery/ec2/AwsEc2UnicastHostsProvider.java#L179).\r\n\r\nIt would be nice if you could configure a list of ports (CSV is fine), or a port range (x-y) to interrogate per host. This covers off scenarios when you may need to connect to a single EC2 instance for multiple ES processes in a single cluster.\r\n\r\nMy current workaround is to use bash + awscli + the file discovery plugin, which has support for host:port combinations, but would be nice to have a native solution to this, thanks :)\r\n\r\n*Note: this could also apply to the GCE + Azure discovery plugins as well. I haven't verified if either of these have multiple port support, but I assume they will have equivalent to the EC2 discovery plugin currently.*","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}