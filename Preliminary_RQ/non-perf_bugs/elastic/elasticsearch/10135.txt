{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/10135","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10135/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10135/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10135/events","html_url":"https://github.com/elastic/elasticsearch/issues/10135","id":62660128,"node_id":"MDU6SXNzdWU2MjY2MDEyOA==","number":10135,"title":"Alias with filter is not reliable","user":{"login":"mikiot","id":9550541,"node_id":"MDQ6VXNlcjk1NTA1NDE=","avatar_url":"https://avatars0.githubusercontent.com/u/9550541?v=4","gravatar_id":"","url":"https://api.github.com/users/mikiot","html_url":"https://github.com/mikiot","followers_url":"https://api.github.com/users/mikiot/followers","following_url":"https://api.github.com/users/mikiot/following{/other_user}","gists_url":"https://api.github.com/users/mikiot/gists{/gist_id}","starred_url":"https://api.github.com/users/mikiot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikiot/subscriptions","organizations_url":"https://api.github.com/users/mikiot/orgs","repos_url":"https://api.github.com/users/mikiot/repos","events_url":"https://api.github.com/users/mikiot/events{/privacy}","received_events_url":"https://api.github.com/users/mikiot/received_events","type":"User","site_admin":false},"labels":[{"id":163824881,"node_id":"MDU6TGFiZWwxNjM4MjQ4ODE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Indices%20APIs","name":":Core/Features/Indices APIs","color":"0e8a16","default":false,"description":"APIs to create and manage indices"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2015-03-18T10:59:26Z","updated_at":"2018-02-13T20:37:47Z","closed_at":"2015-04-08T13:09:50Z","author_association":"NONE","active_lock_reason":null,"body":"I am using elasticsearch 1.4.4 and I want to create a filtered alias. \nThe index contains 3 types A, B and C. B and C are children to A. The filter extracts from the index all the types applying some conditions.For one of the types (let set it's A) the filter contains a nested and a has_child filter.\nThe alias gets created and works fine until I try to update the filter. I need to update the filter because \nsome entities are soft deleted, but the alias should not return them. In this case the filter changes to something like extract all documents with type A where B deleted date > some date.\n\nAfter I update the filter and try to query for A with a simple search it sometimes return all A (applying the filter) and sometimes it returns only some of the documents, excluding others that should be returned. This happens on consecutive queries sent seconds apart. Do you have any ideas on what happens? Would it be helpful to post the filter?\n\nThe filter works fine if not used in the alias context.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}