[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/301006515","html_url":"https://github.com/elastic/elasticsearch/issues/24623#issuecomment-301006515","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24623","id":301006515,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTAwNjUxNQ==","user":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"created_at":"2017-05-12T07:38:22Z","updated_at":"2017-05-12T07:38:22Z","author_association":"CONTRIBUTOR","body":"Are you talking about use on `nested` docs or `parent_child`?\r\nEither way there are two challenging aspects to this requirement:\r\n\r\n1) Efficiently gathering and providing the related doc's values as added context to the scoring scripts\r\n2) Complicating the function_score language to allow you to address the values in this multi-doc context.\r\n\r\nOn the face of it these seem to be huge technical hurdles and I'm not familiar with many use cases that would justify this. If we are to consider implementing such a solution I think you'd have to provide more details of \r\n\r\n* why this is an important feature and what business problems it helps you solve and\r\n* proposals for the new JSON syntax you would hope to use as a client \r\n\r\n\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/301150274","html_url":"https://github.com/elastic/elasticsearch/issues/24623#issuecomment-301150274","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24623","id":301150274,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTE1MDI3NA==","user":{"login":"VitorCaleffi","id":7558973,"node_id":"MDQ6VXNlcjc1NTg5NzM=","avatar_url":"https://avatars1.githubusercontent.com/u/7558973?v=4","gravatar_id":"","url":"https://api.github.com/users/VitorCaleffi","html_url":"https://github.com/VitorCaleffi","followers_url":"https://api.github.com/users/VitorCaleffi/followers","following_url":"https://api.github.com/users/VitorCaleffi/following{/other_user}","gists_url":"https://api.github.com/users/VitorCaleffi/gists{/gist_id}","starred_url":"https://api.github.com/users/VitorCaleffi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VitorCaleffi/subscriptions","organizations_url":"https://api.github.com/users/VitorCaleffi/orgs","repos_url":"https://api.github.com/users/VitorCaleffi/repos","events_url":"https://api.github.com/users/VitorCaleffi/events{/privacy}","received_events_url":"https://api.github.com/users/VitorCaleffi/received_events","type":"User","site_admin":false},"created_at":"2017-05-12T18:21:44Z","updated_at":"2017-05-12T18:21:44Z","author_association":"NONE","body":"I'm currently using `parent_child`.\r\n\r\nIts an idea to sort/order complex query.\r\nId use it as script:\"_globalScore > 0 ? _globalScore + sortImprotance : 0\"","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/304276574","html_url":"https://github.com/elastic/elasticsearch/issues/24623#issuecomment-304276574","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24623","id":304276574,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDI3NjU3NA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-05-26T13:00:06Z","updated_at":"2017-05-26T13:00:06Z","author_association":"CONTRIBUTOR","body":"> why this is an important feature and what business problems it helps you solve \r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/304587232","html_url":"https://github.com/elastic/elasticsearch/issues/24623#issuecomment-304587232","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24623","id":304587232,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDU4NzIzMg==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2017-05-29T06:59:19Z","updated_at":"2017-05-29T06:59:19Z","author_association":"MEMBER","body":"@VitorCaleffi You like to access the max score of a nested inner hit (in case of parent-child-grandchild scenario) or an adjacent inner hit?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/304668109","html_url":"https://github.com/elastic/elasticsearch/issues/24623#issuecomment-304668109","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24623","id":304668109,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDY2ODEwOQ==","user":{"login":"VitorCaleffi","id":7558973,"node_id":"MDQ6VXNlcjc1NTg5NzM=","avatar_url":"https://avatars1.githubusercontent.com/u/7558973?v=4","gravatar_id":"","url":"https://api.github.com/users/VitorCaleffi","html_url":"https://github.com/VitorCaleffi","followers_url":"https://api.github.com/users/VitorCaleffi/followers","following_url":"https://api.github.com/users/VitorCaleffi/following{/other_user}","gists_url":"https://api.github.com/users/VitorCaleffi/gists{/gist_id}","starred_url":"https://api.github.com/users/VitorCaleffi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VitorCaleffi/subscriptions","organizations_url":"https://api.github.com/users/VitorCaleffi/orgs","repos_url":"https://api.github.com/users/VitorCaleffi/repos","events_url":"https://api.github.com/users/VitorCaleffi/events{/privacy}","received_events_url":"https://api.github.com/users/VitorCaleffi/received_events","type":"User","site_admin":false},"created_at":"2017-05-29T14:01:50Z","updated_at":"2017-05-29T14:01:50Z","author_association":"NONE","body":"@clintongormley I believe that this way we could make a better sorting on nested queries.\r\n\r\n@martijnvg  Nested inner hit.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/304670418","html_url":"https://github.com/elastic/elasticsearch/issues/24623#issuecomment-304670418","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24623","id":304670418,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDY3MDQxOA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-05-29T14:12:38Z","updated_at":"2017-05-29T14:12:38Z","author_association":"CONTRIBUTOR","body":"@VitorCaleffi I need some concrete example.  This is likely to be a complicated change, so I need to know that what you are trying to do makes sense, and there isn't another way to achieve the same thing.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/304714942","html_url":"https://github.com/elastic/elasticsearch/issues/24623#issuecomment-304714942","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24623","id":304714942,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDcxNDk0Mg==","user":{"login":"VitorCaleffi","id":7558973,"node_id":"MDQ6VXNlcjc1NTg5NzM=","avatar_url":"https://avatars1.githubusercontent.com/u/7558973?v=4","gravatar_id":"","url":"https://api.github.com/users/VitorCaleffi","html_url":"https://github.com/VitorCaleffi","followers_url":"https://api.github.com/users/VitorCaleffi/followers","following_url":"https://api.github.com/users/VitorCaleffi/following{/other_user}","gists_url":"https://api.github.com/users/VitorCaleffi/gists{/gist_id}","starred_url":"https://api.github.com/users/VitorCaleffi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VitorCaleffi/subscriptions","organizations_url":"https://api.github.com/users/VitorCaleffi/orgs","repos_url":"https://api.github.com/users/VitorCaleffi/repos","events_url":"https://api.github.com/users/VitorCaleffi/events{/privacy}","received_events_url":"https://api.github.com/users/VitorCaleffi/received_events","type":"User","site_admin":false},"created_at":"2017-05-29T18:52:43Z","updated_at":"2017-05-29T18:52:43Z","author_association":"NONE","body":"@clintongormley I have this situation: \r\n`\r\n{\r\n\"hits\":{\r\n...,\r\n_score: 1.23,\r\n\"inner_hits\":{\r\n\"hit1\":{\r\n_score: 1.00,\r\n...\r\n}\r\n\"hit2\":{\r\n_score: 0.23,\r\n...\r\n}\r\n}\r\n}\r\n}\r\n`\r\nI want, by example, from \"hit2\" know if the global score is bigget than 1, if so, increment X.\r\nExample: Order by post views: (_globalScore < doc['viewsCount'].value) ? doc['viewsCount'].value : _globalScore","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/304798807","html_url":"https://github.com/elastic/elasticsearch/issues/24623#issuecomment-304798807","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24623","id":304798807,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDc5ODgwNw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-05-30T07:36:10Z","updated_at":"2017-05-30T07:36:10Z","author_association":"CONTRIBUTOR","body":"And by global score, you mean the score for the query for that doc?  Or what?\r\n\r\nAnd why do you want to do this?\r\n\r\nWhat you have shown is not a good way to include a signal like viewsCount.  You should never rely on an absolute score to have any meaning.  It depends entirely on which terms have been queried. Instead you want to apply a logarithmic function to viewsCount and add the result to the `_score`.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/311614588","html_url":"https://github.com/elastic/elasticsearch/issues/24623#issuecomment-311614588","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24623","id":311614588,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTYxNDU4OA==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2017-06-28T10:00:03Z","updated_at":"2017-06-28T10:00:03Z","author_association":"MEMBER","body":"Closing due to no further feedback.","performed_via_github_app":null}]