[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/455607270","html_url":"https://github.com/elastic/elasticsearch/issues/37605#issuecomment-455607270","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37605","id":455607270,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTYwNzI3MA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-01-18T16:33:26Z","updated_at":"2019-01-18T16:33:26Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/455608204","html_url":"https://github.com/elastic/elasticsearch/issues/37605#issuecomment-455608204","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37605","id":455608204,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTYwODIwNA==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2019-01-18T16:36:05Z","updated_at":"2019-01-18T16:36:05Z","author_association":"MEMBER","body":"At least on the REST side, you can get that from the base cluster info endpoint:\r\n\r\n```\r\ncurl -XGET \"http://localhost:9200/?pretty\" -H 'Content-Type: application/json' \r\n{\r\n  \"name\" : \"node-162\",\r\n  \"cluster_name\" : \"distribution_run\",\r\n  \"cluster_uuid\" : \"LcoYII9iQnWzrnnyPga4IQ\",\r\n  \"version\" : {\r\n    \"number\" : \"6.7.0\",\r\n    \"build_flavor\" : \"default\",\r\n    \"build_type\" : \"zip\",\r\n    \"build_hash\" : \"6205a9c\",\r\n    \"build_date\" : \"2019-01-07T20:42:09.546844Z\",\r\n    \"build_snapshot\" : true,\r\n    \"lucene_version\" : \"7.6.0\",\r\n    \"minimum_wire_compatibility_version\" : \"5.6.0\",\r\n    \"minimum_index_compatibility_version\" : \"5.0.0\"\r\n  },\r\n  \"tagline\" : \"You Know, for Search\"\r\n}\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/455633413","html_url":"https://github.com/elastic/elasticsearch/issues/37605#issuecomment-455633413","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37605","id":455633413,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTYzMzQxMw==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2019-01-18T17:56:35Z","updated_at":"2019-01-18T17:56:35Z","author_association":"MEMBER","body":"The build hash is already part of the plugin's jar file (this is how we get it for the main rest endpoint  @polyfractal mentioned above). I think it would be out of place in the plugin descriptor, as it is something constantly changing, while the descriptor can still be (and is) written by hand.\r\n\r\nI'm also unsure of including it in any api. The key name used within the jar manifest is not part of any standard. We only rely on it for the main rest api because we build the elasticsearch jar ourselves, so we can trust and test what keys to expect and output.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/455880023","html_url":"https://github.com/elastic/elasticsearch/issues/37605#issuecomment-455880023","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37605","id":455880023,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTg4MDAyMw==","user":{"login":"lukas-vlcek","id":205174,"node_id":"MDQ6VXNlcjIwNTE3NA==","avatar_url":"https://avatars2.githubusercontent.com/u/205174?v=4","gravatar_id":"","url":"https://api.github.com/users/lukas-vlcek","html_url":"https://github.com/lukas-vlcek","followers_url":"https://api.github.com/users/lukas-vlcek/followers","following_url":"https://api.github.com/users/lukas-vlcek/following{/other_user}","gists_url":"https://api.github.com/users/lukas-vlcek/gists{/gist_id}","starred_url":"https://api.github.com/users/lukas-vlcek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukas-vlcek/subscriptions","organizations_url":"https://api.github.com/users/lukas-vlcek/orgs","repos_url":"https://api.github.com/users/lukas-vlcek/repos","events_url":"https://api.github.com/users/lukas-vlcek/events{/privacy}","received_events_url":"https://api.github.com/users/lukas-vlcek/received_events","type":"User","site_admin":false},"created_at":"2019-01-20T16:21:26Z","updated_at":"2019-01-20T16:21:26Z","author_association":"CONTRIBUTOR","body":"@rjernst @polyfractal Correct me if I am wrong but if you (as a plugin author) uses `esplugin` then you DO NOT write the descriptor file by hand. It is generated for you so it can easily just add the build_hash there as well. And once the distribution release is generated the hash in it does not change at all, it is set in stone for ever (and it should match with what is found in repo).\r\n\r\nThe main use case I am taking about here is that I just came across 3rd party plugin that has misplaced release tags. So if you build the plugin from repo (assuming the release tag is what was used for the build) you get different jar compared to what you get if you download it from upstream. This is confusing and also a security problem. I understand that you can not ensure 3rd party plugins are correct but adding build_hash into descriptor file would be a very good step forward.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/456633440","html_url":"https://github.com/elastic/elasticsearch/issues/37605#issuecomment-456633440","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37605","id":456633440,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjYzMzQ0MA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2019-01-23T01:34:12Z","updated_at":"2019-01-23T01:34:12Z","author_association":"MEMBER","body":"@lukas-vlcek Yes, the `esplugin` gradle plugin generates the descriptor. However, it is not required to use that (or gradle) to build an Elasticsearch plugin. Many plugin authors have a static plugin descriptor in their codebase.\r\n\r\nWhile I disagree with adding this, I will mark it for discussion with the broader team.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/456641104","html_url":"https://github.com/elastic/elasticsearch/issues/37605#issuecomment-456641104","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37605","id":456641104,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjY0MTEwNA==","user":{"login":"lukas-vlcek","id":205174,"node_id":"MDQ6VXNlcjIwNTE3NA==","avatar_url":"https://avatars2.githubusercontent.com/u/205174?v=4","gravatar_id":"","url":"https://api.github.com/users/lukas-vlcek","html_url":"https://github.com/lukas-vlcek","followers_url":"https://api.github.com/users/lukas-vlcek/followers","following_url":"https://api.github.com/users/lukas-vlcek/following{/other_user}","gists_url":"https://api.github.com/users/lukas-vlcek/gists{/gist_id}","starred_url":"https://api.github.com/users/lukas-vlcek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukas-vlcek/subscriptions","organizations_url":"https://api.github.com/users/lukas-vlcek/orgs","repos_url":"https://api.github.com/users/lukas-vlcek/repos","events_url":"https://api.github.com/users/lukas-vlcek/events{/privacy}","received_events_url":"https://api.github.com/users/lukas-vlcek/received_events","type":"User","site_admin":false},"created_at":"2019-01-23T02:10:45Z","updated_at":"2019-01-23T02:10:45Z","author_association":"CONTRIBUTOR","body":"@rjernst Anything that can be done to improve life of 3rd party plugin authors and users is welcome. Trust me.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/456840514","html_url":"https://github.com/elastic/elasticsearch/issues/37605#issuecomment-456840514","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37605","id":456840514,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1Njg0MDUxNA==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-01-23T15:17:45Z","updated_at":"2019-01-23T15:17:45Z","author_association":"CONTRIBUTOR","body":"We discussed this with the team. Since the information is already present in jar metadata, we wouldn't want to maintain it in an additional location. We are considering solutions to reduce the use of the build hash and other changing information in general to be able to make better use of the [Gradle build cache](https://docs.gradle.org/4.10/userguide/build_cache.html) , so this change would go against the general direction we want to move to.  ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/456860136","html_url":"https://github.com/elastic/elasticsearch/issues/37605#issuecomment-456860136","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37605","id":456860136,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1Njg2MDEzNg==","user":{"login":"lukas-vlcek","id":205174,"node_id":"MDQ6VXNlcjIwNTE3NA==","avatar_url":"https://avatars2.githubusercontent.com/u/205174?v=4","gravatar_id":"","url":"https://api.github.com/users/lukas-vlcek","html_url":"https://github.com/lukas-vlcek","followers_url":"https://api.github.com/users/lukas-vlcek/followers","following_url":"https://api.github.com/users/lukas-vlcek/following{/other_user}","gists_url":"https://api.github.com/users/lukas-vlcek/gists{/gist_id}","starred_url":"https://api.github.com/users/lukas-vlcek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukas-vlcek/subscriptions","organizations_url":"https://api.github.com/users/lukas-vlcek/orgs","repos_url":"https://api.github.com/users/lukas-vlcek/repos","events_url":"https://api.github.com/users/lukas-vlcek/events{/privacy}","received_events_url":"https://api.github.com/users/lukas-vlcek/received_events","type":"User","site_admin":false},"created_at":"2019-01-23T16:05:36Z","updated_at":"2019-01-23T16:05:36Z","author_association":"CONTRIBUTOR","body":"@atorok Since which version of ES is the build_hash part of jar metadata? I was able to find it in ES 6.x plugin but not in ES 5.x.\r\nAnyway, thanks.","performed_via_github_app":null}]