[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/332797236","html_url":"https://github.com/elastic/elasticsearch/issues/26801#issuecomment-332797236","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26801","id":332797236,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjc5NzIzNg==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-09-28T10:36:04Z","updated_at":"2017-09-28T10:36:04Z","author_association":"CONTRIBUTOR","body":"Am I correct that your `tag` field is mapped as `text`? I think this is because we now rewrite pure wildcards to `exists` queries for efficiency. But it might indeed perform differently on `text` fields.\r\n\r\n@jimczi What do you think?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/332810739","html_url":"https://github.com/elastic/elasticsearch/issues/26801#issuecomment-332810739","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26801","id":332810739,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjgxMDczOQ==","user":{"login":"changsijay","id":245306,"node_id":"MDQ6VXNlcjI0NTMwNg==","avatar_url":"https://avatars3.githubusercontent.com/u/245306?v=4","gravatar_id":"","url":"https://api.github.com/users/changsijay","html_url":"https://github.com/changsijay","followers_url":"https://api.github.com/users/changsijay/followers","following_url":"https://api.github.com/users/changsijay/following{/other_user}","gists_url":"https://api.github.com/users/changsijay/gists{/gist_id}","starred_url":"https://api.github.com/users/changsijay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/changsijay/subscriptions","organizations_url":"https://api.github.com/users/changsijay/orgs","repos_url":"https://api.github.com/users/changsijay/repos","events_url":"https://api.github.com/users/changsijay/events{/privacy}","received_events_url":"https://api.github.com/users/changsijay/received_events","type":"User","site_admin":false},"created_at":"2017-09-28T11:39:47Z","updated_at":"2017-09-28T11:39:47Z","author_association":"NONE","body":"@jpountz , yes, the `tag` field is `text`","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/332813906","html_url":"https://github.com/elastic/elasticsearch/issues/26801#issuecomment-332813906","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26801","id":332813906,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjgxMzkwNg==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2017-09-28T11:55:46Z","updated_at":"2017-09-28T11:55:46Z","author_association":"MEMBER","body":"> it return all documents including those which tag is empty.\r\n\r\nYes this is a change in behavior compared to 2.x. Note that the field is empty and not null, the following document would match `tag:*`:\r\n````\r\n{ \"tag\": \"\" }\r\n````\r\nand this one would **not**:\r\n````\r\n{ \"tag\": null }\r\n````\r\n\r\nThis is true for `keyword` and `text`field.\r\n\r\n> it works as I expected, although I prefer not to modify all source code to this syntax.\r\n\r\nCan you reindex your data with null values instead of empty ?\r\n`?*` works as expected but is also horribly costly if you have a lot of distinct terms.\r\nI'll add a note in the documentation, thanks for reporting @changsijay !\r\n\r\n\r\n","performed_via_github_app":null}]