[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157505801","html_url":"https://github.com/elastic/elasticsearch/issues/14807#issuecomment-157505801","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14807","id":157505801,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NzUwNTgwMQ==","user":{"login":"johnarnold","id":1329084,"node_id":"MDQ6VXNlcjEzMjkwODQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1329084?v=4","gravatar_id":"","url":"https://api.github.com/users/johnarnold","html_url":"https://github.com/johnarnold","followers_url":"https://api.github.com/users/johnarnold/followers","following_url":"https://api.github.com/users/johnarnold/following{/other_user}","gists_url":"https://api.github.com/users/johnarnold/gists{/gist_id}","starred_url":"https://api.github.com/users/johnarnold/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/johnarnold/subscriptions","organizations_url":"https://api.github.com/users/johnarnold/orgs","repos_url":"https://api.github.com/users/johnarnold/repos","events_url":"https://api.github.com/users/johnarnold/events{/privacy}","received_events_url":"https://api.github.com/users/johnarnold/received_events","type":"User","site_admin":false},"created_at":"2015-11-17T20:59:55Z","updated_at":"2015-11-17T20:59:55Z","author_association":"NONE","body":"I have the same symptoms, without changing cluster name.  See:\nhttps://github.com/elastic/elasticsearch/issues/14789\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157658005","html_url":"https://github.com/elastic/elasticsearch/issues/14807#issuecomment-157658005","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14807","id":157658005,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NzY1ODAwNQ==","user":{"login":"rabeetwaqar1","id":9457536,"node_id":"MDQ6VXNlcjk0NTc1MzY=","avatar_url":"https://avatars3.githubusercontent.com/u/9457536?v=4","gravatar_id":"","url":"https://api.github.com/users/rabeetwaqar1","html_url":"https://github.com/rabeetwaqar1","followers_url":"https://api.github.com/users/rabeetwaqar1/followers","following_url":"https://api.github.com/users/rabeetwaqar1/following{/other_user}","gists_url":"https://api.github.com/users/rabeetwaqar1/gists{/gist_id}","starred_url":"https://api.github.com/users/rabeetwaqar1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rabeetwaqar1/subscriptions","organizations_url":"https://api.github.com/users/rabeetwaqar1/orgs","repos_url":"https://api.github.com/users/rabeetwaqar1/repos","events_url":"https://api.github.com/users/rabeetwaqar1/events{/privacy}","received_events_url":"https://api.github.com/users/rabeetwaqar1/received_events","type":"User","site_admin":false},"created_at":"2015-11-18T09:41:00Z","updated_at":"2015-11-18T09:41:15Z","author_association":"NONE","body":"I have the same issue, But i'm also facing this while setting the cluster name to : elasticsearch\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157810813","html_url":"https://github.com/elastic/elasticsearch/issues/14807#issuecomment-157810813","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14807","id":157810813,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NzgxMDgxMw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-11-18T18:25:12Z","updated_at":"2015-11-18T18:25:12Z","author_association":"CONTRIBUTOR","body":"Could you try using the [cluster reroute API](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-reroute.html)  with the `explain` query string param, to assign the primary marvel shard. It will tell you why the shard can't be assigned.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157892737","html_url":"https://github.com/elastic/elasticsearch/issues/14807#issuecomment-157892737","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14807","id":157892737,"node_id":"MDEyOklzc3VlQ29tbWVudDE1Nzg5MjczNw==","user":{"login":"johnarnold","id":1329084,"node_id":"MDQ6VXNlcjEzMjkwODQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1329084?v=4","gravatar_id":"","url":"https://api.github.com/users/johnarnold","html_url":"https://github.com/johnarnold","followers_url":"https://api.github.com/users/johnarnold/followers","following_url":"https://api.github.com/users/johnarnold/following{/other_user}","gists_url":"https://api.github.com/users/johnarnold/gists{/gist_id}","starred_url":"https://api.github.com/users/johnarnold/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/johnarnold/subscriptions","organizations_url":"https://api.github.com/users/johnarnold/orgs","repos_url":"https://api.github.com/users/johnarnold/repos","events_url":"https://api.github.com/users/johnarnold/events{/privacy}","received_events_url":"https://api.github.com/users/johnarnold/received_events","type":"User","site_admin":false},"created_at":"2015-11-18T23:01:32Z","updated_at":"2015-11-18T23:01:32Z","author_association":"NONE","body":"I tried it on my cluster, got an error like this:\n\n{\n  \"error\" : {\n    \"root_cause\" : [ {\n      \"type\" : \"remote_transport_exception\",\n      \"reason\" : \"[flowmaster3][10.10.10.6:9300][cluster:admin/reroute]\"\n    } ],\n    \"type\" : \"illegal_argument_exception\",\n    \"reason\" : \"[allocate] trying to allocate a primary shard [.marvel-es-2015.11.18][0], which is disabled\"\n  },\n  \"status\" : 400\n}\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157895255","html_url":"https://github.com/elastic/elasticsearch/issues/14807#issuecomment-157895255","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14807","id":157895255,"node_id":"MDEyOklzc3VlQ29tbWVudDE1Nzg5NTI1NQ==","user":{"login":"johnarnold","id":1329084,"node_id":"MDQ6VXNlcjEzMjkwODQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1329084?v=4","gravatar_id":"","url":"https://api.github.com/users/johnarnold","html_url":"https://github.com/johnarnold","followers_url":"https://api.github.com/users/johnarnold/followers","following_url":"https://api.github.com/users/johnarnold/following{/other_user}","gists_url":"https://api.github.com/users/johnarnold/gists{/gist_id}","starred_url":"https://api.github.com/users/johnarnold/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/johnarnold/subscriptions","organizations_url":"https://api.github.com/users/johnarnold/orgs","repos_url":"https://api.github.com/users/johnarnold/repos","events_url":"https://api.github.com/users/johnarnold/events{/privacy}","received_events_url":"https://api.github.com/users/johnarnold/received_events","type":"User","site_admin":false},"created_at":"2015-11-18T23:14:36Z","updated_at":"2015-11-18T23:14:36Z","author_association":"NONE","body":"I figured out that allocating the primary replica to a specific node works to assign it.\n\ncurl -XPOST 'localhost:9200/_cluster/reroute?pretty' -d '{\n    \"commands\" : [ \n        {\n          \"allocate\" : {\n              \"index\" : \".marvel-es-data\", \"shard\" : 0, \"node\" : \"flowdata1\", \"allow_primary\" : true\n          }\n        }\n    ]\n}'\n\nI had to do this for each marvel shard in: curl -XGET http://localhost:9200/_cat/shards | grep marvel\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158032329","html_url":"https://github.com/elastic/elasticsearch/issues/14807#issuecomment-158032329","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14807","id":158032329,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODAzMjMyOQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-11-19T11:43:59Z","updated_at":"2015-11-19T11:43:59Z","author_association":"CONTRIBUTOR","body":"@johnarnold i specifically didn't want you to force the primary.  instead I wanted to find out why the primary shard wasn't being allocated.  Nothing in the older logs giving a reason?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158591170","html_url":"https://github.com/elastic/elasticsearch/issues/14807#issuecomment-158591170","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14807","id":158591170,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODU5MTE3MA==","user":{"login":"johnarnold","id":1329084,"node_id":"MDQ6VXNlcjEzMjkwODQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1329084?v=4","gravatar_id":"","url":"https://api.github.com/users/johnarnold","html_url":"https://github.com/johnarnold","followers_url":"https://api.github.com/users/johnarnold/followers","following_url":"https://api.github.com/users/johnarnold/following{/other_user}","gists_url":"https://api.github.com/users/johnarnold/gists{/gist_id}","starred_url":"https://api.github.com/users/johnarnold/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/johnarnold/subscriptions","organizations_url":"https://api.github.com/users/johnarnold/orgs","repos_url":"https://api.github.com/users/johnarnold/repos","events_url":"https://api.github.com/users/johnarnold/events{/privacy}","received_events_url":"https://api.github.com/users/johnarnold/received_events","type":"User","site_admin":false},"created_at":"2015-11-21T05:15:06Z","updated_at":"2015-11-21T05:15:06Z","author_association":"NONE","body":"I managed to repro shard allocation problem.\n\n[explain.txt](https://github.com/elastic/elasticsearch/files/40744/explain.txt)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/160306688","html_url":"https://github.com/elastic/elasticsearch/issues/14807#issuecomment-160306688","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14807","id":160306688,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MDMwNjY4OA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-11-28T14:45:49Z","updated_at":"2015-11-28T14:45:49Z","author_association":"CONTRIBUTOR","body":"OK so this is the interesting bit:\n\n```\n    \".marvel-es-2015.11.15\" : {\n      \"shards\" : {\n        \"0\" : [ {\n          \"state\" : \"UNASSIGNED\",\n          \"primary\" : true,\n          \"node\" : null,\n          \"relocating_node\" : null,\n          \"shard\" : 0,\n          \"index\" : \".marvel-es-2015.11.15\",\n          \"version\" : 2,\n          \"unassigned_info\" : {\n            \"reason\" : \"NODE_LEFT\",\n            \"at\" : \"2015-11-21T04:50:34.073Z\",\n            \"details\" : \"node_left[qKKxT9bPQeiVyioqNuhWlA]\"\n          }\n        }, {\n          \"state\" : \"UNASSIGNED\",\n          \"primary\" : false,\n          \"node\" : null,\n          \"relocating_node\" : null,\n          \"shard\" : 0,\n          \"index\" : \".marvel-es-2015.11.15\",\n          \"version\" : 2,\n          \"unassigned_info\" : {\n            \"reason\" : \"INDEX_CREATED\",\n            \"at\" : \"2015-11-21T04:31:31.548Z\"\n          }\n        } ]\n      }\n    },\n```\n\nThe primary was assigned to a node which has since left, and the replica was never assigned.  Are you using shard allocation settings?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/172495694","html_url":"https://github.com/elastic/elasticsearch/issues/14807#issuecomment-172495694","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14807","id":172495694,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MjQ5NTY5NA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-01-18T10:49:10Z","updated_at":"2016-01-18T10:49:10Z","author_association":"CONTRIBUTOR","body":"No more feedback. Closing\n","performed_via_github_app":null}]