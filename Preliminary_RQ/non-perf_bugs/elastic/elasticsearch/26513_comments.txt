[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/327301268","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-327301268","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":327301268,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzMwMTI2OA==","user":{"login":"risdenk","id":3384157,"node_id":"MDQ6VXNlcjMzODQxNTc=","avatar_url":"https://avatars0.githubusercontent.com/u/3384157?v=4","gravatar_id":"","url":"https://api.github.com/users/risdenk","html_url":"https://github.com/risdenk","followers_url":"https://api.github.com/users/risdenk/followers","following_url":"https://api.github.com/users/risdenk/following{/other_user}","gists_url":"https://api.github.com/users/risdenk/gists{/gist_id}","starred_url":"https://api.github.com/users/risdenk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/risdenk/subscriptions","organizations_url":"https://api.github.com/users/risdenk/orgs","repos_url":"https://api.github.com/users/risdenk/repos","events_url":"https://api.github.com/users/risdenk/events{/privacy}","received_events_url":"https://api.github.com/users/risdenk/received_events","type":"User","site_admin":false},"created_at":"2017-09-05T20:58:13Z","updated_at":"2017-09-05T20:58:13Z","author_association":"CONTRIBUTOR","body":"I was able to fix this with the following:\r\n```\r\n# Fix for security permission error\r\ncat /home/elasticsearch/.java.policy\r\ngrant {\r\n  permission java.lang.reflect.ReflectPermission \"suppressAccessChecks\";\r\n};\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/327301612","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-327301612","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":327301612,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzMwMTYxMg==","user":{"login":"risdenk","id":3384157,"node_id":"MDQ6VXNlcjMzODQxNTc=","avatar_url":"https://avatars0.githubusercontent.com/u/3384157?v=4","gravatar_id":"","url":"https://api.github.com/users/risdenk","html_url":"https://github.com/risdenk","followers_url":"https://api.github.com/users/risdenk/followers","following_url":"https://api.github.com/users/risdenk/following{/other_user}","gists_url":"https://api.github.com/users/risdenk/gists{/gist_id}","starred_url":"https://api.github.com/users/risdenk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/risdenk/subscriptions","organizations_url":"https://api.github.com/users/risdenk/orgs","repos_url":"https://api.github.com/users/risdenk/repos","events_url":"https://api.github.com/users/risdenk/events{/privacy}","received_events_url":"https://api.github.com/users/risdenk/received_events","type":"User","site_admin":false},"created_at":"2017-09-05T20:59:31Z","updated_at":"2017-09-05T20:59:31Z","author_association":"CONTRIBUTOR","body":"Interestingly the repository-hdfs plugin already has a Java security policy file that requests `suppressAccessChecks` permissions. https://github.com/elastic/elasticsearch/blob/master/plugins/repository-hdfs/src/main/plugin-metadata/plugin-security.policy#L26  It looks like from the stacktrace that the error doesn't go through any of the repository-hdfs classes however.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/327302147","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-327302147","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":327302147,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzMwMjE0Nw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-09-05T21:01:33Z","updated_at":"2017-09-05T21:01:33Z","author_association":"MEMBER","body":"As you point out, the problem here is that the call is coming from core where we do not and will not grant `suppressAccessChecks`.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/327302243","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-327302243","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":327302243,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzMwMjI0Mw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-09-05T21:01:59Z","updated_at":"2017-09-05T21:01:59Z","author_association":"MEMBER","body":"@jbaiera Would you take a look please?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/327315158","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-327315158","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":327315158,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzMxNTE1OA==","user":{"login":"risdenk","id":3384157,"node_id":"MDQ6VXNlcjMzODQxNTc=","avatar_url":"https://avatars0.githubusercontent.com/u/3384157?v=4","gravatar_id":"","url":"https://api.github.com/users/risdenk","html_url":"https://github.com/risdenk","followers_url":"https://api.github.com/users/risdenk/followers","following_url":"https://api.github.com/users/risdenk/following{/other_user}","gists_url":"https://api.github.com/users/risdenk/gists{/gist_id}","starred_url":"https://api.github.com/users/risdenk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/risdenk/subscriptions","organizations_url":"https://api.github.com/users/risdenk/orgs","repos_url":"https://api.github.com/users/risdenk/repos","events_url":"https://api.github.com/users/risdenk/events{/privacy}","received_events_url":"https://api.github.com/users/risdenk/received_events","type":"User","site_admin":false},"created_at":"2017-09-05T21:56:27Z","updated_at":"2017-09-05T21:56:27Z","author_association":"CONTRIBUTOR","body":"@jasontedor yea I agree that adding `suppressAccessChecks` to the whole JVM is not preferred but didn't have a good way to work around it in the short term. We are currently moving from 2.x to 5.x for Elasticsearch and this was a pain point on Friday. Since we are in a development environment, I can provide/test other things if necessary.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/327613625","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-327613625","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":327613625,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzYxMzYyNQ==","user":{"login":"risdenk","id":3384157,"node_id":"MDQ6VXNlcjMzODQxNTc=","avatar_url":"https://avatars0.githubusercontent.com/u/3384157?v=4","gravatar_id":"","url":"https://api.github.com/users/risdenk","html_url":"https://github.com/risdenk","followers_url":"https://api.github.com/users/risdenk/followers","following_url":"https://api.github.com/users/risdenk/following{/other_user}","gists_url":"https://api.github.com/users/risdenk/gists{/gist_id}","starred_url":"https://api.github.com/users/risdenk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/risdenk/subscriptions","organizations_url":"https://api.github.com/users/risdenk/orgs","repos_url":"https://api.github.com/users/risdenk/repos","events_url":"https://api.github.com/users/risdenk/events{/privacy}","received_events_url":"https://api.github.com/users/risdenk/received_events","type":"User","site_admin":false},"created_at":"2017-09-06T21:10:03Z","updated_at":"2017-09-06T22:06:39Z","author_association":"CONTRIBUTOR","body":"If I were to guess, the bulk of this issue comes from trying to get server defaults for the encryption introduced in Hadoop.\r\n\r\n```\r\n        at org.apache.hadoop.hdfs.DFSClient.getServerDefaults(DFSClient.java:640) ~[?:?]\r\n        at org.apache.hadoop.hdfs.DFSClient.shouldEncryptData(DFSClient.java:1755) ~[?:?]\r\n        at org.apache.hadoop.hdfs.DFSClient.newDataEncryptionKey(DFSClient.java:1761) ~[?:?]\r\n```\r\nhttps://github.com/apache/hadoop/blob/branch-2.8.1/hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DFSClient.java#L1760\r\n\r\nI didn't see a quick way to short circuit this process by adding a Hadoop conf setting saying that encryption is either enabled or not. It looks like this code has to go to the Namenode.\r\n\r\nI was going to try `webhdfs://` instead of `hdfs://` but saw that the repository-hdfs plugin explicitly checks for the scheme to be `hdfs://`.\r\n\r\nhttps://github.com/elastic/elasticsearch/blob/master/plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsRepository.java#L87\r\n\r\nSome of these issues might go away if the plugin were to allow `webhdfs://` as an option since that is over HTTP instead of direct RPC calls. I saw #24455 is something related to that idea.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/327624094","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-327624094","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":327624094,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzYyNDA5NA==","user":{"login":"gmoskovicz","id":1675411,"node_id":"MDQ6VXNlcjE2NzU0MTE=","avatar_url":"https://avatars3.githubusercontent.com/u/1675411?v=4","gravatar_id":"","url":"https://api.github.com/users/gmoskovicz","html_url":"https://github.com/gmoskovicz","followers_url":"https://api.github.com/users/gmoskovicz/followers","following_url":"https://api.github.com/users/gmoskovicz/following{/other_user}","gists_url":"https://api.github.com/users/gmoskovicz/gists{/gist_id}","starred_url":"https://api.github.com/users/gmoskovicz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gmoskovicz/subscriptions","organizations_url":"https://api.github.com/users/gmoskovicz/orgs","repos_url":"https://api.github.com/users/gmoskovicz/repos","events_url":"https://api.github.com/users/gmoskovicz/events{/privacy}","received_events_url":"https://api.github.com/users/gmoskovicz/received_events","type":"User","site_admin":false},"created_at":"2017-09-06T21:59:46Z","updated_at":"2017-09-06T21:59:46Z","author_association":"CONTRIBUTOR","body":"Indeed the problem seems to actually be here: https://github.com/apache/hadoop/blob/branch-2.8.1/hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DFSClient.java#L640\r\n\r\n```\r\n      serverDefaults = namenode.getServerDefaults();\r\n```\r\n\r\nSo it's trying to do reflection in `namenode` something that we do not allow to do that? I say this from\r\n\r\n```\r\nat com.sun.proxy.$Proxy34.getServerDefaults(Unknown Source) ~[?:?]\r\n```\r\n\r\nWonder if we could use the `dfs.trustedchannel.resolver.class` setting to force this to be bypassed: https://github.com/apache/hadoop/blob/branch-2.8.1/hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/protocol/datatransfer/sasl/SaslDataTransferClient.java#L206 ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/327670047","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-327670047","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":327670047,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzY3MDA0Nw==","user":{"login":"jbaiera","id":875779,"node_id":"MDQ6VXNlcjg3NTc3OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/875779?v=4","gravatar_id":"","url":"https://api.github.com/users/jbaiera","html_url":"https://github.com/jbaiera","followers_url":"https://api.github.com/users/jbaiera/followers","following_url":"https://api.github.com/users/jbaiera/following{/other_user}","gists_url":"https://api.github.com/users/jbaiera/gists{/gist_id}","starred_url":"https://api.github.com/users/jbaiera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbaiera/subscriptions","organizations_url":"https://api.github.com/users/jbaiera/orgs","repos_url":"https://api.github.com/users/jbaiera/repos","events_url":"https://api.github.com/users/jbaiera/events{/privacy}","received_events_url":"https://api.github.com/users/jbaiera/received_events","type":"User","site_admin":false},"created_at":"2017-09-07T03:00:42Z","updated_at":"2017-09-07T03:00:42Z","author_association":"CONTRIBUTOR","body":">As you point out, the problem here is that the call is coming from core where we do not and will not grant suppressAccessChecks.\r\n\r\nThis is correct. Since there's a core utility in the stack trace (`org.elasticsearch.common.io.Streams.copy`) it's tripping up the security manager. What should really be happening is the stream should be wrapped in something that does the HDFS calls with privileges. Took a quick look and found that this seems to already be done in master with https://github.com/elastic/elasticsearch/pull/22793. Perhaps this just needs to be backported to the 5.x branches.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/327745732","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-327745732","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":327745732,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzc0NTczMg==","user":{"login":"risdenk","id":3384157,"node_id":"MDQ6VXNlcjMzODQxNTc=","avatar_url":"https://avatars0.githubusercontent.com/u/3384157?v=4","gravatar_id":"","url":"https://api.github.com/users/risdenk","html_url":"https://github.com/risdenk","followers_url":"https://api.github.com/users/risdenk/followers","following_url":"https://api.github.com/users/risdenk/following{/other_user}","gists_url":"https://api.github.com/users/risdenk/gists{/gist_id}","starred_url":"https://api.github.com/users/risdenk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/risdenk/subscriptions","organizations_url":"https://api.github.com/users/risdenk/orgs","repos_url":"https://api.github.com/users/risdenk/repos","events_url":"https://api.github.com/users/risdenk/events{/privacy}","received_events_url":"https://api.github.com/users/risdenk/received_events","type":"User","site_admin":false},"created_at":"2017-09-07T09:28:54Z","updated_at":"2017-09-07T09:28:54Z","author_association":"CONTRIBUTOR","body":"#22793 looks like it could help. Elasticsearch 6.0 beta 2 would have that change right? I should be able to try it to see if it fixes this issue. If it works then would be great to see it backported to 5.x.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/327752037","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-327752037","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":327752037,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzc1MjAzNw==","user":{"login":"risdenk","id":3384157,"node_id":"MDQ6VXNlcjMzODQxNTc=","avatar_url":"https://avatars0.githubusercontent.com/u/3384157?v=4","gravatar_id":"","url":"https://api.github.com/users/risdenk","html_url":"https://github.com/risdenk","followers_url":"https://api.github.com/users/risdenk/followers","following_url":"https://api.github.com/users/risdenk/following{/other_user}","gists_url":"https://api.github.com/users/risdenk/gists{/gist_id}","starred_url":"https://api.github.com/users/risdenk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/risdenk/subscriptions","organizations_url":"https://api.github.com/users/risdenk/orgs","repos_url":"https://api.github.com/users/risdenk/repos","events_url":"https://api.github.com/users/risdenk/events{/privacy}","received_events_url":"https://api.github.com/users/risdenk/received_events","type":"User","site_admin":false},"created_at":"2017-09-07T09:52:45Z","updated_at":"2017-09-07T09:52:45Z","author_association":"CONTRIBUTOR","body":"It looks like #22793 is the only non test code change to repository-hdfs that isn't in the 5.x line.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/327798263","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-327798263","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":327798263,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzc5ODI2Mw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-09-07T13:25:30Z","updated_at":"2017-09-07T13:25:30Z","author_association":"MEMBER","body":"There's a reason that #22793 is not in 5.6. That change was predicated on removing socket permissions from core which was only done in 6.0+. Thus, we can not simply backport that change even if it picked cleanly (which it doesn't), it was engineered with different assumptions than are present in 5.6. It's plausible that some of the code in #22793 will help address the issue here but instead we have to:\r\n - have a failing test case on 5.6\r\n - pull only the relevant changes from #22793 into 5.6\r\n - prepare a new patch for 5.6 that goes through code review","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/328243693","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-328243693","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":328243693,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODI0MzY5Mw==","user":{"login":"risdenk","id":3384157,"node_id":"MDQ6VXNlcjMzODQxNTc=","avatar_url":"https://avatars0.githubusercontent.com/u/3384157?v=4","gravatar_id":"","url":"https://api.github.com/users/risdenk","html_url":"https://github.com/risdenk","followers_url":"https://api.github.com/users/risdenk/followers","following_url":"https://api.github.com/users/risdenk/following{/other_user}","gists_url":"https://api.github.com/users/risdenk/gists{/gist_id}","starred_url":"https://api.github.com/users/risdenk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/risdenk/subscriptions","organizations_url":"https://api.github.com/users/risdenk/orgs","repos_url":"https://api.github.com/users/risdenk/repos","events_url":"https://api.github.com/users/risdenk/events{/privacy}","received_events_url":"https://api.github.com/users/risdenk/received_events","type":"User","site_admin":false},"created_at":"2017-09-09T00:52:24Z","updated_at":"2017-09-09T00:52:24Z","author_association":"CONTRIBUTOR","body":"So I found the case where this can happen. I'm trying to boil it down to the simplest steps. From what I've gathered so far:\r\n* requires a readonly HDFS repository to be created and point to a location that isn't empty\r\n* requires that no other HDFS repository operations have been done already (like take a snapshot)\r\n* requires trying to list the readonly HDFS repository\r\n\r\nFor reference my test case is here:\r\n* https://github.com/risdenk/elasticsearch_hdfs_kerberos_testing\r\n* https://travis-ci.org/risdenk/elasticsearch_hdfs_kerberos_testing\r\n\r\nI've haven't had a chance to see if this is fixed in 6.x or master yet. I've been focusing on trying to recreate in a standalone test case with 5.5.2.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/328244169","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-328244169","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":328244169,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODI0NDE2OQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-09-09T00:59:54Z","updated_at":"2017-09-09T00:59:54Z","author_association":"MEMBER","body":"Thank you so much @risdenk, that's awesome effort and much appreciated. @jbaiera will work closely with you on this starting next week. And 5.5.2 is definitely the right place to focus efforts (or the 5.6 branch is fine too).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/328245006","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-328245006","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":328245006,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODI0NTAwNg==","user":{"login":"risdenk","id":3384157,"node_id":"MDQ6VXNlcjMzODQxNTc=","avatar_url":"https://avatars0.githubusercontent.com/u/3384157?v=4","gravatar_id":"","url":"https://api.github.com/users/risdenk","html_url":"https://github.com/risdenk","followers_url":"https://api.github.com/users/risdenk/followers","following_url":"https://api.github.com/users/risdenk/following{/other_user}","gists_url":"https://api.github.com/users/risdenk/gists{/gist_id}","starred_url":"https://api.github.com/users/risdenk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/risdenk/subscriptions","organizations_url":"https://api.github.com/users/risdenk/orgs","repos_url":"https://api.github.com/users/risdenk/repos","events_url":"https://api.github.com/users/risdenk/events{/privacy}","received_events_url":"https://api.github.com/users/risdenk/received_events","type":"User","site_admin":false},"created_at":"2017-09-09T01:13:36Z","updated_at":"2017-09-09T01:14:32Z","author_association":"CONTRIBUTOR","body":"The code path differs for a readonly repository in this method:\r\n\r\nhttps://github.com/elastic/elasticsearch/blob/5.5/core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java#L895\r\n\r\n**Non Read Only Path**\r\n\r\nThe `BlobStoreRepository.getRepositoryData()` method calls `BlobStoreRepository.latestIndexBlobId()` which in in the non readonly case will eventually call the `DFSClient.getServerDefaults()` method with the correct filecontext through `HdfsBlobContainer`. This eventually filters down to the correct HDFS blobstore implementation with `doPrivileged`. The `DFSClient.getServerDefaults()` is then cached for 60 minutes so the next call without the file context from `Streams.copy` works.\r\n\r\n* https://github.com/elastic/elasticsearch/blob/5.5/core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java#L746\r\n* https://github.com/elastic/elasticsearch/blob/5.5/core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java#L895\r\n* https://github.com/elastic/elasticsearch/blob/5.5/plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsBlobContainer.java#L141\r\n* https://github.com/elastic/elasticsearch/blob/5.5/plugins/repository-hdfs/src/main/java/org/elasticsearch/repositories/hdfs/HdfsBlobStore.java#L129\r\n* https://github.com/elastic/elasticsearch/blob/5.5/core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java#L762\r\n\r\n**Failure Read Only Path**\r\n\r\nThe `BlobStoreRepository.getRepositoryData()` method calls `BlobStoreRepository.latestIndexBlobId()` which in in the readonly case doesn't call out to HDFS it looks like. This then means no cached server detaults in `DFSClient.getServerDefaults()` and so the next call without the file context from `Streams.copy` fails to work.\r\n\r\n* https://github.com/elastic/elasticsearch/blob/5.5/core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java#L746\r\n* https://github.com/elastic/elasticsearch/blob/5.5/core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java#L895\r\n* https://github.com/elastic/elasticsearch/blob/5.5/core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java#L921\r\n* https://github.com/elastic/elasticsearch/blob/5.5/core/src/main/java/org/elasticsearch/repositories/blobstore/BlobStoreRepository.java#L762\r\n* Failure due to `DFSClient` and `suppressAccessChecks`","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/328246356","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-328246356","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":328246356,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODI0NjM1Ng==","user":{"login":"risdenk","id":3384157,"node_id":"MDQ6VXNlcjMzODQxNTc=","avatar_url":"https://avatars0.githubusercontent.com/u/3384157?v=4","gravatar_id":"","url":"https://api.github.com/users/risdenk","html_url":"https://github.com/risdenk","followers_url":"https://api.github.com/users/risdenk/followers","following_url":"https://api.github.com/users/risdenk/following{/other_user}","gists_url":"https://api.github.com/users/risdenk/gists{/gist_id}","starred_url":"https://api.github.com/users/risdenk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/risdenk/subscriptions","organizations_url":"https://api.github.com/users/risdenk/orgs","repos_url":"https://api.github.com/users/risdenk/repos","events_url":"https://api.github.com/users/risdenk/events{/privacy}","received_events_url":"https://api.github.com/users/risdenk/received_events","type":"User","site_admin":false},"created_at":"2017-09-09T01:38:04Z","updated_at":"2017-09-09T01:38:04Z","author_association":"CONTRIBUTOR","body":"Side note: interestingly travis ci doesn't seem to fail where as locally on my Mac it does. All the testing is in Docker so not sure what the difference is right now.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/328246678","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-328246678","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":328246678,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODI0NjY3OA==","user":{"login":"risdenk","id":3384157,"node_id":"MDQ6VXNlcjMzODQxNTc=","avatar_url":"https://avatars0.githubusercontent.com/u/3384157?v=4","gravatar_id":"","url":"https://api.github.com/users/risdenk","html_url":"https://github.com/risdenk","followers_url":"https://api.github.com/users/risdenk/followers","following_url":"https://api.github.com/users/risdenk/following{/other_user}","gists_url":"https://api.github.com/users/risdenk/gists{/gist_id}","starred_url":"https://api.github.com/users/risdenk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/risdenk/subscriptions","organizations_url":"https://api.github.com/users/risdenk/orgs","repos_url":"https://api.github.com/users/risdenk/repos","events_url":"https://api.github.com/users/risdenk/events{/privacy}","received_events_url":"https://api.github.com/users/risdenk/received_events","type":"User","site_admin":false},"created_at":"2017-09-09T01:43:11Z","updated_at":"2017-09-09T01:43:11Z","author_association":"CONTRIBUTOR","body":"For reference, I switched the base Elasticsearch image to `6.0.0-beta2` and could not reproduce the same error. The HDFS repository lists correctly even with readonly.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/328869409","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-328869409","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":328869409,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODg2OTQwOQ==","user":{"login":"jbaiera","id":875779,"node_id":"MDQ6VXNlcjg3NTc3OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/875779?v=4","gravatar_id":"","url":"https://api.github.com/users/jbaiera","html_url":"https://github.com/jbaiera","followers_url":"https://api.github.com/users/jbaiera/followers","following_url":"https://api.github.com/users/jbaiera/following{/other_user}","gists_url":"https://api.github.com/users/jbaiera/gists{/gist_id}","starred_url":"https://api.github.com/users/jbaiera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbaiera/subscriptions","organizations_url":"https://api.github.com/users/jbaiera/orgs","repos_url":"https://api.github.com/users/jbaiera/repos","events_url":"https://api.github.com/users/jbaiera/events{/privacy}","received_events_url":"https://api.github.com/users/jbaiera/received_events","type":"User","site_admin":false},"created_at":"2017-09-12T14:25:42Z","updated_at":"2017-09-12T14:25:42Z","author_association":"CONTRIBUTOR","body":"@risdenk Thanks for all the work toward distilling the issue down to a few simple steps. This is incredibly helpful information. I'll start working toward getting a failing test built and then we'll know where to go from there.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/328895696","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-328895696","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":328895696,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODg5NTY5Ng==","user":{"login":"risdenk","id":3384157,"node_id":"MDQ6VXNlcjMzODQxNTc=","avatar_url":"https://avatars0.githubusercontent.com/u/3384157?v=4","gravatar_id":"","url":"https://api.github.com/users/risdenk","html_url":"https://github.com/risdenk","followers_url":"https://api.github.com/users/risdenk/followers","following_url":"https://api.github.com/users/risdenk/following{/other_user}","gists_url":"https://api.github.com/users/risdenk/gists{/gist_id}","starred_url":"https://api.github.com/users/risdenk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/risdenk/subscriptions","organizations_url":"https://api.github.com/users/risdenk/orgs","repos_url":"https://api.github.com/users/risdenk/repos","events_url":"https://api.github.com/users/risdenk/events{/privacy}","received_events_url":"https://api.github.com/users/risdenk/received_events","type":"User","site_admin":false},"created_at":"2017-09-12T15:49:23Z","updated_at":"2017-09-12T15:49:23Z","author_association":"CONTRIBUTOR","body":"@jbaiera - Glad the information is helpful.\r\n\r\nI finally got the `gradle integTestSecure` working and even after editing the `secure_hdfs_repository` REST test yaml files I wasn't able to reproduce the problem. I can logically see how the code path I'm hitting in my environment is hit but seem to have a hard time producing the issue in the test suite.\r\n\r\nI ran into a few problems with Vagrant 2.0 and on a Mac the vagrant test fixture just stops. On a linux box the test suite works ok.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/328989418","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-328989418","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":328989418,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODk4OTQxOA==","user":{"login":"jbaiera","id":875779,"node_id":"MDQ6VXNlcjg3NTc3OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/875779?v=4","gravatar_id":"","url":"https://api.github.com/users/jbaiera","html_url":"https://github.com/jbaiera","followers_url":"https://api.github.com/users/jbaiera/followers","following_url":"https://api.github.com/users/jbaiera/following{/other_user}","gists_url":"https://api.github.com/users/jbaiera/gists{/gist_id}","starred_url":"https://api.github.com/users/jbaiera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbaiera/subscriptions","organizations_url":"https://api.github.com/users/jbaiera/orgs","repos_url":"https://api.github.com/users/jbaiera/repos","events_url":"https://api.github.com/users/jbaiera/events{/privacy}","received_events_url":"https://api.github.com/users/jbaiera/received_events","type":"User","site_admin":false},"created_at":"2017-09-12T21:27:29Z","updated_at":"2017-09-12T21:27:29Z","author_association":"CONTRIBUTOR","body":"@risdenk I wanted to check in and share what I've got on this: I also was running into issues with reproducing this via the rest integration test tooling. I decided to try and reproduce by standing up the local hdfs fixture with a local elasticsearch instance and re-tracing your provided steps. This did indeed reproduce the error you've described.\r\n\r\nThis raises the question why it doesn't cleanly reproduce in the rest integration test framework. Diving deeper uncovered what looks like two unrelated bugs (one with the repository, and one potentially in the HDFS client) but hasn't yielded any answers for why it doesn't reproduce. I'll update back here with more info as it's available.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/329193647","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-329193647","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":329193647,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTE5MzY0Nw==","user":{"login":"risdenk","id":3384157,"node_id":"MDQ6VXNlcjMzODQxNTc=","avatar_url":"https://avatars0.githubusercontent.com/u/3384157?v=4","gravatar_id":"","url":"https://api.github.com/users/risdenk","html_url":"https://github.com/risdenk","followers_url":"https://api.github.com/users/risdenk/followers","following_url":"https://api.github.com/users/risdenk/following{/other_user}","gists_url":"https://api.github.com/users/risdenk/gists{/gist_id}","starred_url":"https://api.github.com/users/risdenk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/risdenk/subscriptions","organizations_url":"https://api.github.com/users/risdenk/orgs","repos_url":"https://api.github.com/users/risdenk/repos","events_url":"https://api.github.com/users/risdenk/events{/privacy}","received_events_url":"https://api.github.com/users/risdenk/received_events","type":"User","site_admin":false},"created_at":"2017-09-13T14:53:36Z","updated_at":"2017-09-13T14:59:31Z","author_association":"CONTRIBUTOR","body":"@jbaiera Glad I'm not crazy it doesn't reproduce in the integration test but it does if you stand up a cluster. Last night I was able to get it to reproduce once in the rest integration test framework.\r\n\r\nThe branch for this is here: https://github.com/risdenk/elasticsearch/tree/test_readonly_repository\r\n\r\nI created this from the 5.5 branch. https://github.com/elastic/elasticsearch/compare/5.5...risdenk:test_readonly_repository\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/329195746","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-329195746","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":329195746,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTE5NTc0Ng==","user":{"login":"risdenk","id":3384157,"node_id":"MDQ6VXNlcjMzODQxNTc=","avatar_url":"https://avatars0.githubusercontent.com/u/3384157?v=4","gravatar_id":"","url":"https://api.github.com/users/risdenk","html_url":"https://github.com/risdenk","followers_url":"https://api.github.com/users/risdenk/followers","following_url":"https://api.github.com/users/risdenk/following{/other_user}","gists_url":"https://api.github.com/users/risdenk/gists{/gist_id}","starred_url":"https://api.github.com/users/risdenk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/risdenk/subscriptions","organizations_url":"https://api.github.com/users/risdenk/orgs","repos_url":"https://api.github.com/users/risdenk/repos","events_url":"https://api.github.com/users/risdenk/events{/privacy}","received_events_url":"https://api.github.com/users/risdenk/received_events","type":"User","site_admin":false},"created_at":"2017-09-13T15:00:05Z","updated_at":"2017-09-13T15:00:05Z","author_association":"CONTRIBUTOR","body":"From that branch I was able to recreate the `access denied` with `gradle integTestSecure` from the `plugins/repository-hdfs` directory.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/329910998","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-329910998","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":329910998,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTkxMDk5OA==","user":{"login":"jbaiera","id":875779,"node_id":"MDQ6VXNlcjg3NTc3OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/875779?v=4","gravatar_id":"","url":"https://api.github.com/users/jbaiera","html_url":"https://github.com/jbaiera","followers_url":"https://api.github.com/users/jbaiera/followers","following_url":"https://api.github.com/users/jbaiera/following{/other_user}","gists_url":"https://api.github.com/users/jbaiera/gists{/gist_id}","starred_url":"https://api.github.com/users/jbaiera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbaiera/subscriptions","organizations_url":"https://api.github.com/users/jbaiera/orgs","repos_url":"https://api.github.com/users/jbaiera/repos","events_url":"https://api.github.com/users/jbaiera/events{/privacy}","received_events_url":"https://api.github.com/users/jbaiera/received_events","type":"User","site_admin":false},"created_at":"2017-09-15T21:42:34Z","updated_at":"2017-09-15T21:42:34Z","author_association":"CONTRIBUTOR","body":"Checking in again on this since it's been the parent of a few real brain teasers:\r\n\r\nI was able to get the rest test framework to reproduce the error, but only when the test case that reproduces it is run relatively early in the suite. This is a problem since our testing suite has no real sense of ordering (The test spec names with the leading numbers are a bit misleading). I found that one of the reasons that the integration test passes when the test case is run later is because the suppress access check permissions are being skipped since the methods in question have already been set accessible by privileged code in previous test cases.\r\n\r\nThat being said, since there is at least a test that reproduces it now, I'll just get a PR up for fixing it soon. We'll have to just accept that the ordering of the tests matters for reproducing it since the state of the HDFS Client doesn't give us much choice.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/329974148","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-329974148","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":329974148,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTk3NDE0OA==","user":{"login":"risdenk","id":3384157,"node_id":"MDQ6VXNlcjMzODQxNTc=","avatar_url":"https://avatars0.githubusercontent.com/u/3384157?v=4","gravatar_id":"","url":"https://api.github.com/users/risdenk","html_url":"https://github.com/risdenk","followers_url":"https://api.github.com/users/risdenk/followers","following_url":"https://api.github.com/users/risdenk/following{/other_user}","gists_url":"https://api.github.com/users/risdenk/gists{/gist_id}","starred_url":"https://api.github.com/users/risdenk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/risdenk/subscriptions","organizations_url":"https://api.github.com/users/risdenk/orgs","repos_url":"https://api.github.com/users/risdenk/repos","events_url":"https://api.github.com/users/risdenk/events{/privacy}","received_events_url":"https://api.github.com/users/risdenk/received_events","type":"User","site_admin":false},"created_at":"2017-09-16T15:09:22Z","updated_at":"2017-09-16T15:09:22Z","author_association":"CONTRIBUTOR","body":"> This is a problem since our testing suite has no real sense of ordering (The test spec names with the leading numbers are a bit misleading).\r\n\r\nAh that explains a lot! I couldn't figure out why the integration tests passed when I explicitly set the order with the leading numbers.\r\n\r\nDo the tests run in parallel as well? If each test setup and tore down the repository there shouldn't be any overlap since the HDFS client is per repository. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/330275353","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-330275353","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":330275353,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDI3NTM1Mw==","user":{"login":"jbaiera","id":875779,"node_id":"MDQ6VXNlcjg3NTc3OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/875779?v=4","gravatar_id":"","url":"https://api.github.com/users/jbaiera","html_url":"https://github.com/jbaiera","followers_url":"https://api.github.com/users/jbaiera/followers","following_url":"https://api.github.com/users/jbaiera/following{/other_user}","gists_url":"https://api.github.com/users/jbaiera/gists{/gist_id}","starred_url":"https://api.github.com/users/jbaiera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbaiera/subscriptions","organizations_url":"https://api.github.com/users/jbaiera/orgs","repos_url":"https://api.github.com/users/jbaiera/repos","events_url":"https://api.github.com/users/jbaiera/events{/privacy}","received_events_url":"https://api.github.com/users/jbaiera/received_events","type":"User","site_admin":false},"created_at":"2017-09-18T16:19:15Z","updated_at":"2017-09-18T16:19:15Z","author_association":"CONTRIBUTOR","body":"The overlap in this scenario comes from all the tests executing on the same JVM and class instances. By the time the reproducing test case runs, previous test cases in the suite have already set the methods in question to be accessible from privileged callsites. When the reproducing test case attempts to run, the methods that it would normally try to set accessible are already accessible. The code skips trying to set them, and thusly avoids the security exceptions.\r\n\r\nThat said, there are still some other discrepancies between running the rest test suite and running against a local cluster that I haven't pinned down yet, but my hunch so far has been that the differences are more likely caused by how rapid the calls are made than the substance of the calls themselves. The HDFS client is pretty sensitive when a security manager is installed.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/330611593","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-330611593","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":330611593,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDYxMTU5Mw==","user":{"login":"jbaiera","id":875779,"node_id":"MDQ6VXNlcjg3NTc3OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/875779?v=4","gravatar_id":"","url":"https://api.github.com/users/jbaiera","html_url":"https://github.com/jbaiera","followers_url":"https://api.github.com/users/jbaiera/followers","following_url":"https://api.github.com/users/jbaiera/following{/other_user}","gists_url":"https://api.github.com/users/jbaiera/gists{/gist_id}","starred_url":"https://api.github.com/users/jbaiera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbaiera/subscriptions","organizations_url":"https://api.github.com/users/jbaiera/orgs","repos_url":"https://api.github.com/users/jbaiera/repos","events_url":"https://api.github.com/users/jbaiera/events{/privacy}","received_events_url":"https://api.github.com/users/jbaiera/received_events","type":"User","site_admin":false},"created_at":"2017-09-19T17:23:59Z","updated_at":"2017-09-19T17:23:59Z","author_association":"CONTRIBUTOR","body":"After getting the requisite vagrant testing support commits backported to the 5.x branches and shoring up the last of the changes needed, I've opened #26714 for this.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/330622706","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-330622706","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":330622706,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDYyMjcwNg==","user":{"login":"risdenk","id":3384157,"node_id":"MDQ6VXNlcjMzODQxNTc=","avatar_url":"https://avatars0.githubusercontent.com/u/3384157?v=4","gravatar_id":"","url":"https://api.github.com/users/risdenk","html_url":"https://github.com/risdenk","followers_url":"https://api.github.com/users/risdenk/followers","following_url":"https://api.github.com/users/risdenk/following{/other_user}","gists_url":"https://api.github.com/users/risdenk/gists{/gist_id}","starred_url":"https://api.github.com/users/risdenk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/risdenk/subscriptions","organizations_url":"https://api.github.com/users/risdenk/orgs","repos_url":"https://api.github.com/users/risdenk/repos","events_url":"https://api.github.com/users/risdenk/events{/privacy}","received_events_url":"https://api.github.com/users/risdenk/received_events","type":"User","site_admin":false},"created_at":"2017-09-19T18:04:08Z","updated_at":"2017-09-19T18:04:08Z","author_association":"CONTRIBUTOR","body":"Thanks @jbaiera!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/331201876","html_url":"https://github.com/elastic/elasticsearch/issues/26513#issuecomment-331201876","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26513","id":331201876,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTIwMTg3Ng==","user":{"login":"jbaiera","id":875779,"node_id":"MDQ6VXNlcjg3NTc3OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/875779?v=4","gravatar_id":"","url":"https://api.github.com/users/jbaiera","html_url":"https://github.com/jbaiera","followers_url":"https://api.github.com/users/jbaiera/followers","following_url":"https://api.github.com/users/jbaiera/following{/other_user}","gists_url":"https://api.github.com/users/jbaiera/gists{/gist_id}","starred_url":"https://api.github.com/users/jbaiera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbaiera/subscriptions","organizations_url":"https://api.github.com/users/jbaiera/orgs","repos_url":"https://api.github.com/users/jbaiera/repos","events_url":"https://api.github.com/users/jbaiera/events{/privacy}","received_events_url":"https://api.github.com/users/jbaiera/received_events","type":"User","site_admin":false},"created_at":"2017-09-21T15:59:02Z","updated_at":"2017-09-21T15:59:02Z","author_association":"CONTRIBUTOR","body":"I have merged #26714 and backported to the 5.5.x branch. This should make it into a release soon.","performed_via_github_app":null}]