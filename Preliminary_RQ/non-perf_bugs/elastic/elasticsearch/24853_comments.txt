[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/307216816","html_url":"https://github.com/elastic/elasticsearch/issues/24853#issuecomment-307216816","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24853","id":307216816,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNzIxNjgxNg==","user":{"login":"PnPie","id":7472431,"node_id":"MDQ6VXNlcjc0NzI0MzE=","avatar_url":"https://avatars3.githubusercontent.com/u/7472431?v=4","gravatar_id":"","url":"https://api.github.com/users/PnPie","html_url":"https://github.com/PnPie","followers_url":"https://api.github.com/users/PnPie/followers","following_url":"https://api.github.com/users/PnPie/following{/other_user}","gists_url":"https://api.github.com/users/PnPie/gists{/gist_id}","starred_url":"https://api.github.com/users/PnPie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PnPie/subscriptions","organizations_url":"https://api.github.com/users/PnPie/orgs","repos_url":"https://api.github.com/users/PnPie/repos","events_url":"https://api.github.com/users/PnPie/events{/privacy}","received_events_url":"https://api.github.com/users/PnPie/received_events","type":"User","site_admin":false},"created_at":"2017-06-08T20:23:20Z","updated_at":"2017-06-08T20:23:20Z","author_association":"CONTRIBUTOR","body":"I've had a look at the code and it seems that the dynamic templates is designed to be totally replaced while updating but not \"merged\" for 5.x version ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/307853980","html_url":"https://github.com/elastic/elasticsearch/issues/24853#issuecomment-307853980","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24853","id":307853980,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNzg1Mzk4MA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-06-12T17:09:30Z","updated_at":"2017-06-12T17:09:30Z","author_association":"CONTRIBUTOR","body":"I'm not sure if that change was intentional, but it may actually be a better default.  Then we can forget about things like https://github.com/elastic/elasticsearch/issues/11627","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/349388928","html_url":"https://github.com/elastic/elasticsearch/issues/24853#issuecomment-349388928","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24853","id":349388928,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTM4ODkyOA==","user":{"login":"arboliveira","id":859765,"node_id":"MDQ6VXNlcjg1OTc2NQ==","avatar_url":"https://avatars0.githubusercontent.com/u/859765?v=4","gravatar_id":"","url":"https://api.github.com/users/arboliveira","html_url":"https://github.com/arboliveira","followers_url":"https://api.github.com/users/arboliveira/followers","following_url":"https://api.github.com/users/arboliveira/following{/other_user}","gists_url":"https://api.github.com/users/arboliveira/gists{/gist_id}","starred_url":"https://api.github.com/users/arboliveira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arboliveira/subscriptions","organizations_url":"https://api.github.com/users/arboliveira/orgs","repos_url":"https://api.github.com/users/arboliveira/repos","events_url":"https://api.github.com/users/arboliveira/events{/privacy}","received_events_url":"https://api.github.com/users/arboliveira/received_events","type":"User","site_admin":false},"created_at":"2017-12-05T18:03:40Z","updated_at":"2017-12-05T18:03:40Z","author_association":"NONE","body":"We're upgrading from Elasticsearch 2 to Elasticsearch 6. Our application needs to add new dynamic templates on the fly to an existing index, and we rely on the PUT mapping API for that. At time of first implementation, we followed Elastic documentation and everything worked as described under Elasticsearch 2:\r\n\r\nhttps://www.elastic.co/guide/en/elasticsearch/reference/6.0/dynamic-templates.html#dynamic-templates\r\n\r\n\"Templates are processed in order — the first matching template wins. **New templates can be appended to the end of the list with the PUT mapping API.** If a new template has the same name as an existing template, it will replace the old version.\"\r\n\r\nNotice the documentation above hasn't changed in Elasticsearch 5 or 6. However, behavior since 5 doesn't match it anymore and breaks backward compatibility for our application.\r\n\r\nI was directed to this issue after filing a ticket with Elastic Support. Would you please consider restoring backward compatibility for the PUT mapping API in Elasticsearch 6? Even if a deliberate choice is made to not \"merge\" dynamic templates anymore, I'd also ask to please drive it through proper deprecation/breaking changes/announcement process and update documentation so we can prepare to implement merging on our side. On the other hand, having instead a fully granular API to configure dynamic templates would be really convenient.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/349586745","html_url":"https://github.com/elastic/elasticsearch/issues/24853#issuecomment-349586745","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24853","id":349586745,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTU4Njc0NQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-12-06T09:42:58Z","updated_at":"2017-12-06T09:42:58Z","author_association":"CONTRIBUTOR","body":"Hi @arboliveira \r\n\r\nI'm sorry that you have run into this change, especially as the documentation hasn't been updated.  That said, I think the change is a good one and greatly simplifies management of dynamic templates, including the ability to unset templates (#11627). These templates are usually set at index creation and seldom touched again - having a \"fully granular API to configure dynamic templates\" seems like overkill to me.  With the current situation, you can implement this client side by retrieving, editing, and reputting the templates.\r\n\r\n> Would you please consider restoring backward compatibility for the PUT mapping API in Elasticsearch 6? Even if a deliberate choice is made to not \"merge\" dynamic templates anymore, I'd also ask to please drive it through proper deprecation/breaking changes/announcement process and update documentation so we can prepare to implement merging on our side.\r\n\r\nI agree that we missed the proper deprecation cycle for this change, and for that I apologise. That said, given that this breaking change happened two major versions ago, I don't think it makes sense to have another breaking change (in 7.0) to put it back the way it was, only with the intention of breaking it again in 8.0.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/350319626","html_url":"https://github.com/elastic/elasticsearch/issues/24853#issuecomment-350319626","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24853","id":350319626,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MDMxOTYyNg==","user":{"login":"arboliveira","id":859765,"node_id":"MDQ6VXNlcjg1OTc2NQ==","avatar_url":"https://avatars0.githubusercontent.com/u/859765?v=4","gravatar_id":"","url":"https://api.github.com/users/arboliveira","html_url":"https://github.com/arboliveira","followers_url":"https://api.github.com/users/arboliveira/followers","following_url":"https://api.github.com/users/arboliveira/following{/other_user}","gists_url":"https://api.github.com/users/arboliveira/gists{/gist_id}","starred_url":"https://api.github.com/users/arboliveira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arboliveira/subscriptions","organizations_url":"https://api.github.com/users/arboliveira/orgs","repos_url":"https://api.github.com/users/arboliveira/repos","events_url":"https://api.github.com/users/arboliveira/events{/privacy}","received_events_url":"https://api.github.com/users/arboliveira/received_events","type":"User","site_admin":false},"created_at":"2017-12-08T17:19:09Z","updated_at":"2017-12-08T17:19:09Z","author_association":"NONE","body":"Thank you, sounds reasonable. Would anyone kindly be able to direct us to the source code in 2.x where \"merging\" used to be performed? (\"replace dynamic template if present, add to end if not\") We may be able to salvage some of the logic when writing our client side implementation.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/350712004","html_url":"https://github.com/elastic/elasticsearch/issues/24853#issuecomment-350712004","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24853","id":350712004,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MDcxMjAwNA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-12-11T12:35:00Z","updated_at":"2017-12-11T12:35:00Z","author_association":"CONTRIBUTOR","body":"thanks @arboliveira \r\n\r\nThe PR in question is https://github.com/elastic/elasticsearch/pull/20119\r\n","performed_via_github_app":null}]