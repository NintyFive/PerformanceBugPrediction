[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/471952738","html_url":"https://github.com/elastic/elasticsearch/issues/39946#issuecomment-471952738","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39946","id":471952738,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MTk1MjczOA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-03-12T10:55:37Z","updated_at":"2019-03-12T10:55:37Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/471953693","html_url":"https://github.com/elastic/elasticsearch/issues/39946#issuecomment-471953693","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39946","id":471953693,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MTk1MzY5Mw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-03-12T10:58:39Z","updated_at":"2019-03-12T10:58:39Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/471954201","html_url":"https://github.com/elastic/elasticsearch/issues/39946#issuecomment-471954201","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39946","id":471954201,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MTk1NDIwMQ==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2019-03-12T11:00:16Z","updated_at":"2019-03-12T11:00:16Z","author_association":"MEMBER","body":"hi @panchen66 is it possible that the underlying client got closed in the meantime? Do you see anything in the logs of your client application?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/472254572","html_url":"https://github.com/elastic/elasticsearch/issues/39946#issuecomment-472254572","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39946","id":472254572,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjI1NDU3Mg==","user":{"login":"panchen66","id":27650719,"node_id":"MDQ6VXNlcjI3NjUwNzE5","avatar_url":"https://avatars2.githubusercontent.com/u/27650719?v=4","gravatar_id":"","url":"https://api.github.com/users/panchen66","html_url":"https://github.com/panchen66","followers_url":"https://api.github.com/users/panchen66/followers","following_url":"https://api.github.com/users/panchen66/following{/other_user}","gists_url":"https://api.github.com/users/panchen66/gists{/gist_id}","starred_url":"https://api.github.com/users/panchen66/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/panchen66/subscriptions","organizations_url":"https://api.github.com/users/panchen66/orgs","repos_url":"https://api.github.com/users/panchen66/repos","events_url":"https://api.github.com/users/panchen66/events{/privacy}","received_events_url":"https://api.github.com/users/panchen66/received_events","type":"User","site_admin":false},"created_at":"2019-03-13T02:27:15Z","updated_at":"2019-03-13T02:27:15Z","author_association":"NONE","body":"My fault, I found that the service handle exhaustion caused this problem.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/487957292","html_url":"https://github.com/elastic/elasticsearch/issues/39946#issuecomment-487957292","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39946","id":487957292,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4Nzk1NzI5Mg==","user":{"login":"fayaz-rvce","id":2444254,"node_id":"MDQ6VXNlcjI0NDQyNTQ=","avatar_url":"https://avatars0.githubusercontent.com/u/2444254?v=4","gravatar_id":"","url":"https://api.github.com/users/fayaz-rvce","html_url":"https://github.com/fayaz-rvce","followers_url":"https://api.github.com/users/fayaz-rvce/followers","following_url":"https://api.github.com/users/fayaz-rvce/following{/other_user}","gists_url":"https://api.github.com/users/fayaz-rvce/gists{/gist_id}","starred_url":"https://api.github.com/users/fayaz-rvce/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fayaz-rvce/subscriptions","organizations_url":"https://api.github.com/users/fayaz-rvce/orgs","repos_url":"https://api.github.com/users/fayaz-rvce/repos","events_url":"https://api.github.com/users/fayaz-rvce/events{/privacy}","received_events_url":"https://api.github.com/users/fayaz-rvce/received_events","type":"User","site_admin":false},"created_at":"2019-04-30T13:43:12Z","updated_at":"2019-04-30T13:43:12Z","author_association":"NONE","body":"@panchen66 , I am also facing same issue with ES RestHighLevelClient. Can you explain bit more how did you resolve this? what is service handle exhaustion?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/490238422","html_url":"https://github.com/elastic/elasticsearch/issues/39946#issuecomment-490238422","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39946","id":490238422,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MDIzODQyMg==","user":{"login":"zaffargachal","id":25955830,"node_id":"MDQ6VXNlcjI1OTU1ODMw","avatar_url":"https://avatars1.githubusercontent.com/u/25955830?v=4","gravatar_id":"","url":"https://api.github.com/users/zaffargachal","html_url":"https://github.com/zaffargachal","followers_url":"https://api.github.com/users/zaffargachal/followers","following_url":"https://api.github.com/users/zaffargachal/following{/other_user}","gists_url":"https://api.github.com/users/zaffargachal/gists{/gist_id}","starred_url":"https://api.github.com/users/zaffargachal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zaffargachal/subscriptions","organizations_url":"https://api.github.com/users/zaffargachal/orgs","repos_url":"https://api.github.com/users/zaffargachal/repos","events_url":"https://api.github.com/users/zaffargachal/events{/privacy}","received_events_url":"https://api.github.com/users/zaffargachal/received_events","type":"User","site_admin":false},"created_at":"2019-05-07T20:14:25Z","updated_at":"2019-05-07T20:14:25Z","author_association":"NONE","body":"@panchen66 I am facing the same problem when we moved our ES cluster to AWS, Can you explain how did you resolved that issue?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/491317043","html_url":"https://github.com/elastic/elasticsearch/issues/39946#issuecomment-491317043","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39946","id":491317043,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MTMxNzA0Mw==","user":{"login":"weizijun","id":5070449,"node_id":"MDQ6VXNlcjUwNzA0NDk=","avatar_url":"https://avatars0.githubusercontent.com/u/5070449?v=4","gravatar_id":"","url":"https://api.github.com/users/weizijun","html_url":"https://github.com/weizijun","followers_url":"https://api.github.com/users/weizijun/followers","following_url":"https://api.github.com/users/weizijun/following{/other_user}","gists_url":"https://api.github.com/users/weizijun/gists{/gist_id}","starred_url":"https://api.github.com/users/weizijun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weizijun/subscriptions","organizations_url":"https://api.github.com/users/weizijun/orgs","repos_url":"https://api.github.com/users/weizijun/repos","events_url":"https://api.github.com/users/weizijun/events{/privacy}","received_events_url":"https://api.github.com/users/weizijun/received_events","type":"User","site_admin":false},"created_at":"2019-05-10T14:51:45Z","updated_at":"2019-05-10T14:54:18Z","author_association":"CONTRIBUTOR","body":"I also facing the same case，in #42061. Can RestClient add a method to check if client is running? or reset client internal?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/531618281","html_url":"https://github.com/elastic/elasticsearch/issues/39946#issuecomment-531618281","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39946","id":531618281,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMTYxODI4MQ==","user":{"login":"house0128","id":18210121,"node_id":"MDQ6VXNlcjE4MjEwMTIx","avatar_url":"https://avatars3.githubusercontent.com/u/18210121?v=4","gravatar_id":"","url":"https://api.github.com/users/house0128","html_url":"https://github.com/house0128","followers_url":"https://api.github.com/users/house0128/followers","following_url":"https://api.github.com/users/house0128/following{/other_user}","gists_url":"https://api.github.com/users/house0128/gists{/gist_id}","starred_url":"https://api.github.com/users/house0128/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/house0128/subscriptions","organizations_url":"https://api.github.com/users/house0128/orgs","repos_url":"https://api.github.com/users/house0128/repos","events_url":"https://api.github.com/users/house0128/events{/privacy}","received_events_url":"https://api.github.com/users/house0128/received_events","type":"User","site_admin":false},"created_at":"2019-09-16T01:30:52Z","updated_at":"2019-09-16T01:30:52Z","author_association":"NONE","body":"@panchen66 @fayaz-rvce  @zaffargachal   I am facing the same problem when we moved our ES cluster to AWS, Can you explain how did you resolved that issue?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/532409881","html_url":"https://github.com/elastic/elasticsearch/issues/39946#issuecomment-532409881","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39946","id":532409881,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjQwOTg4MQ==","user":{"login":"renweizhukov","id":11728435,"node_id":"MDQ6VXNlcjExNzI4NDM1","avatar_url":"https://avatars0.githubusercontent.com/u/11728435?v=4","gravatar_id":"","url":"https://api.github.com/users/renweizhukov","html_url":"https://github.com/renweizhukov","followers_url":"https://api.github.com/users/renweizhukov/followers","following_url":"https://api.github.com/users/renweizhukov/following{/other_user}","gists_url":"https://api.github.com/users/renweizhukov/gists{/gist_id}","starred_url":"https://api.github.com/users/renweizhukov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/renweizhukov/subscriptions","organizations_url":"https://api.github.com/users/renweizhukov/orgs","repos_url":"https://api.github.com/users/renweizhukov/repos","events_url":"https://api.github.com/users/renweizhukov/events{/privacy}","received_events_url":"https://api.github.com/users/renweizhukov/received_events","type":"User","site_admin":false},"created_at":"2019-09-17T21:29:53Z","updated_at":"2019-09-17T21:29:53Z","author_association":"NONE","body":"+1\r\n\r\n> @panchen66 @fayaz-rvce @zaffargachal I am facing the same problem when we moved our ES cluster to AWS, Can you explain how did you resolved that issue?\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/533539556","html_url":"https://github.com/elastic/elasticsearch/issues/39946#issuecomment-533539556","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39946","id":533539556,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzUzOTU1Ng==","user":{"login":"pavalanski","id":19192045,"node_id":"MDQ6VXNlcjE5MTkyMDQ1","avatar_url":"https://avatars0.githubusercontent.com/u/19192045?v=4","gravatar_id":"","url":"https://api.github.com/users/pavalanski","html_url":"https://github.com/pavalanski","followers_url":"https://api.github.com/users/pavalanski/followers","following_url":"https://api.github.com/users/pavalanski/following{/other_user}","gists_url":"https://api.github.com/users/pavalanski/gists{/gist_id}","starred_url":"https://api.github.com/users/pavalanski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavalanski/subscriptions","organizations_url":"https://api.github.com/users/pavalanski/orgs","repos_url":"https://api.github.com/users/pavalanski/repos","events_url":"https://api.github.com/users/pavalanski/events{/privacy}","received_events_url":"https://api.github.com/users/pavalanski/received_events","type":"User","site_admin":false},"created_at":"2019-09-20T12:47:06Z","updated_at":"2019-09-20T12:47:24Z","author_association":"NONE","body":"@panchen66 @fayaz-rvce @zaffargachal @renweizhukov I have the same issue. Please help!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/533709560","html_url":"https://github.com/elastic/elasticsearch/issues/39946#issuecomment-533709560","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39946","id":533709560,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzcwOTU2MA==","user":{"login":"renweizhukov","id":11728435,"node_id":"MDQ6VXNlcjExNzI4NDM1","avatar_url":"https://avatars0.githubusercontent.com/u/11728435?v=4","gravatar_id":"","url":"https://api.github.com/users/renweizhukov","html_url":"https://github.com/renweizhukov","followers_url":"https://api.github.com/users/renweizhukov/followers","following_url":"https://api.github.com/users/renweizhukov/following{/other_user}","gists_url":"https://api.github.com/users/renweizhukov/gists{/gist_id}","starred_url":"https://api.github.com/users/renweizhukov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/renweizhukov/subscriptions","organizations_url":"https://api.github.com/users/renweizhukov/orgs","repos_url":"https://api.github.com/users/renweizhukov/repos","events_url":"https://api.github.com/users/renweizhukov/events{/privacy}","received_events_url":"https://api.github.com/users/renweizhukov/received_events","type":"User","site_admin":false},"created_at":"2019-09-20T21:08:38Z","updated_at":"2019-09-20T21:08:38Z","author_association":"NONE","body":"After some debugging and configuration tuning, I found that the exception was caused by too many concurrent ElasticSearch clients. After I reduce the number of concurrent clients, the exception is gone.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/534433497","html_url":"https://github.com/elastic/elasticsearch/issues/39946#issuecomment-534433497","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39946","id":534433497,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNDQzMzQ5Nw==","user":{"login":"pavalanski","id":19192045,"node_id":"MDQ6VXNlcjE5MTkyMDQ1","avatar_url":"https://avatars0.githubusercontent.com/u/19192045?v=4","gravatar_id":"","url":"https://api.github.com/users/pavalanski","html_url":"https://github.com/pavalanski","followers_url":"https://api.github.com/users/pavalanski/followers","following_url":"https://api.github.com/users/pavalanski/following{/other_user}","gists_url":"https://api.github.com/users/pavalanski/gists{/gist_id}","starred_url":"https://api.github.com/users/pavalanski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavalanski/subscriptions","organizations_url":"https://api.github.com/users/pavalanski/orgs","repos_url":"https://api.github.com/users/pavalanski/repos","events_url":"https://api.github.com/users/pavalanski/events{/privacy}","received_events_url":"https://api.github.com/users/pavalanski/received_events","type":"User","site_admin":false},"created_at":"2019-09-24T07:40:10Z","updated_at":"2019-09-24T07:40:10Z","author_association":"NONE","body":"@renweizhukov thanks for the hint! I'm using the client at scheduled method, so every invocation is started in new thread. The client has been injected to the service and never closed. Seems that is the reason of exception in my case. I changed my implementation so a new client is created at every thread when it is needed and closes in the end of method. That fixed the issue.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/534836113","html_url":"https://github.com/elastic/elasticsearch/issues/39946#issuecomment-534836113","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39946","id":534836113,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNDgzNjExMw==","user":{"login":"renweizhukov","id":11728435,"node_id":"MDQ6VXNlcjExNzI4NDM1","avatar_url":"https://avatars0.githubusercontent.com/u/11728435?v=4","gravatar_id":"","url":"https://api.github.com/users/renweizhukov","html_url":"https://github.com/renweizhukov","followers_url":"https://api.github.com/users/renweizhukov/followers","following_url":"https://api.github.com/users/renweizhukov/following{/other_user}","gists_url":"https://api.github.com/users/renweizhukov/gists{/gist_id}","starred_url":"https://api.github.com/users/renweizhukov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/renweizhukov/subscriptions","organizations_url":"https://api.github.com/users/renweizhukov/orgs","repos_url":"https://api.github.com/users/renweizhukov/repos","events_url":"https://api.github.com/users/renweizhukov/events{/privacy}","received_events_url":"https://api.github.com/users/renweizhukov/received_events","type":"User","site_admin":false},"created_at":"2019-09-25T03:33:31Z","updated_at":"2019-09-25T03:33:31Z","author_association":"NONE","body":"> @renweizhukov thanks for the hint! I'm using the client at scheduled method, so every invocation is started in new thread. The client has been injected to the service and never closed. Seems that is the reason of exception in my case. I changed my implementation so a new client is created at every thread when it is needed and closes in the end of method. That fixed the issue.\r\n\r\nGreat! Thank you for sharing this!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/537202895","html_url":"https://github.com/elastic/elasticsearch/issues/39946#issuecomment-537202895","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39946","id":537202895,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNzIwMjg5NQ==","user":{"login":"Gouravagrawal","id":11697927,"node_id":"MDQ6VXNlcjExNjk3OTI3","avatar_url":"https://avatars2.githubusercontent.com/u/11697927?v=4","gravatar_id":"","url":"https://api.github.com/users/Gouravagrawal","html_url":"https://github.com/Gouravagrawal","followers_url":"https://api.github.com/users/Gouravagrawal/followers","following_url":"https://api.github.com/users/Gouravagrawal/following{/other_user}","gists_url":"https://api.github.com/users/Gouravagrawal/gists{/gist_id}","starred_url":"https://api.github.com/users/Gouravagrawal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Gouravagrawal/subscriptions","organizations_url":"https://api.github.com/users/Gouravagrawal/orgs","repos_url":"https://api.github.com/users/Gouravagrawal/repos","events_url":"https://api.github.com/users/Gouravagrawal/events{/privacy}","received_events_url":"https://api.github.com/users/Gouravagrawal/received_events","type":"User","site_admin":false},"created_at":"2019-10-01T19:57:14Z","updated_at":"2019-10-01T19:57:14Z","author_association":"NONE","body":"Hey Guys, I followed this thread but not able to resolve this issue I have a rest high level client and Elasticsearch 7.2 I am trying to bulk insert and keep getting this error -\"java.lang.IllegalStateException: Request cannot be executed; I/O reactor status: STOPPED\". Could anyone please help in getting me out of this?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/555463470","html_url":"https://github.com/elastic/elasticsearch/issues/39946#issuecomment-555463470","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39946","id":555463470,"node_id":"MDEyOklzc3VlQ29tbWVudDU1NTQ2MzQ3MA==","user":{"login":"jurimengs","id":10648133,"node_id":"MDQ6VXNlcjEwNjQ4MTMz","avatar_url":"https://avatars3.githubusercontent.com/u/10648133?v=4","gravatar_id":"","url":"https://api.github.com/users/jurimengs","html_url":"https://github.com/jurimengs","followers_url":"https://api.github.com/users/jurimengs/followers","following_url":"https://api.github.com/users/jurimengs/following{/other_user}","gists_url":"https://api.github.com/users/jurimengs/gists{/gist_id}","starred_url":"https://api.github.com/users/jurimengs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jurimengs/subscriptions","organizations_url":"https://api.github.com/users/jurimengs/orgs","repos_url":"https://api.github.com/users/jurimengs/repos","events_url":"https://api.github.com/users/jurimengs/events{/privacy}","received_events_url":"https://api.github.com/users/jurimengs/received_events","type":"User","site_admin":false},"created_at":"2019-11-19T11:22:41Z","updated_at":"2019-11-19T11:22:41Z","author_association":"NONE","body":"> \r\n> \r\n> My fault, I found that the service handle exhaustion caused this problem.\r\n\r\nHI , brother, may I ask, why service handle exhaustion caused it? \r\nI saw CloseableHttpAsyncClientBase implements the interface \"Closeable\",  the method \"closed\" invoked by who?\r\nthanks very much","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/555465653","html_url":"https://github.com/elastic/elasticsearch/issues/39946#issuecomment-555465653","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39946","id":555465653,"node_id":"MDEyOklzc3VlQ29tbWVudDU1NTQ2NTY1Mw==","user":{"login":"jurimengs","id":10648133,"node_id":"MDQ6VXNlcjEwNjQ4MTMz","avatar_url":"https://avatars3.githubusercontent.com/u/10648133?v=4","gravatar_id":"","url":"https://api.github.com/users/jurimengs","html_url":"https://github.com/jurimengs","followers_url":"https://api.github.com/users/jurimengs/followers","following_url":"https://api.github.com/users/jurimengs/following{/other_user}","gists_url":"https://api.github.com/users/jurimengs/gists{/gist_id}","starred_url":"https://api.github.com/users/jurimengs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jurimengs/subscriptions","organizations_url":"https://api.github.com/users/jurimengs/orgs","repos_url":"https://api.github.com/users/jurimengs/repos","events_url":"https://api.github.com/users/jurimengs/events{/privacy}","received_events_url":"https://api.github.com/users/jurimengs/received_events","type":"User","site_admin":false},"created_at":"2019-11-19T11:28:23Z","updated_at":"2019-11-19T11:29:15Z","author_association":"NONE","body":"here is some error stack message:\r\njava.lang.IllegalStateException: Request cannot be executed; I/O reactor status: STOPPED\r\n\tat org.apache.http.util.Asserts.check(Asserts.java:46) ~[httpcore-4.4.1.jar:4.4.1]\r\n\tat org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase.ensureRunning(CloseableHttpAsyncClientBase.java:90) ~[httpasyncclient-4.1.2.jar:4.1.2]\r\n\tat org.apache.http.impl.nio.client.InternalHttpAsyncClient.execute(InternalHttpAsyncClient.java:123) ~[httpasyncclient-4.1.2.jar:4.1.2]\r\n\tat org.elasticsearch.client.RestClient.performRequestAsync(RestClient.java:343) ~[rest-5.4.3.jar:5.4.3]\r\n\r\n\r\n\"Request cannot be executed; I/O reactor status: STOPPED\" is from : \r\n    protected void ensureRunning() {\r\n        final Status currentStatus = this.status.get();\r\n        Asserts.check(currentStatus == Status.ACTIVE, \"Request cannot be executed; \" +\r\n                \"I/O reactor status: %s\", currentStatus);\r\n    }\r\n\r\nYou see, if \"currentStatus \" is not ACTIVE, it will show us this error..\r\nI mean, it must be closed by someone, so, who did it ?\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/555633648","html_url":"https://github.com/elastic/elasticsearch/issues/39946#issuecomment-555633648","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39946","id":555633648,"node_id":"MDEyOklzc3VlQ29tbWVudDU1NTYzMzY0OA==","user":{"login":"jbaiera","id":875779,"node_id":"MDQ6VXNlcjg3NTc3OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/875779?v=4","gravatar_id":"","url":"https://api.github.com/users/jbaiera","html_url":"https://github.com/jbaiera","followers_url":"https://api.github.com/users/jbaiera/followers","following_url":"https://api.github.com/users/jbaiera/following{/other_user}","gists_url":"https://api.github.com/users/jbaiera/gists{/gist_id}","starred_url":"https://api.github.com/users/jbaiera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbaiera/subscriptions","organizations_url":"https://api.github.com/users/jbaiera/orgs","repos_url":"https://api.github.com/users/jbaiera/repos","events_url":"https://api.github.com/users/jbaiera/events{/privacy}","received_events_url":"https://api.github.com/users/jbaiera/received_events","type":"User","site_admin":false},"created_at":"2019-11-19T18:06:00Z","updated_at":"2019-11-19T18:11:01Z","author_association":"CONTRIBUTOR","body":"> You see, if \"currentStatus \" is not ACTIVE, it will show us this error..\r\n> I mean, it must be closed by someone, so, who did it ?\r\n\r\nThe Client is built on top of Apache HTTP Components. Inside of the client is an IOReactor object that enables async processing of IO events. Unfortunately, if this reactor thread pool encounters any exceptions it shuts down without any way to reactivate it. Almost every exception that makes it to the IOReactor will shut it down. To make matters worse, these exceptions are logged to an internal audit log on the reactor instead of to any logging appender, and are thus pretty much obfuscated unless client code chooses to collect the errors explicitly.\r\n\r\nWe have an issue open at the moment (#49124, feel free to add your +1's there) that details how we'd like to instrument the client to detect these outages and report what went wrong. Hopefully we'll have a way forward in the near future.\r\n\r\nI want to thank everyone for their patience while we look into these \"IO reactor status stopped\" exceptions.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/556364314","html_url":"https://github.com/elastic/elasticsearch/issues/39946#issuecomment-556364314","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39946","id":556364314,"node_id":"MDEyOklzc3VlQ29tbWVudDU1NjM2NDMxNA==","user":{"login":"walkman-kuan","id":13514933,"node_id":"MDQ6VXNlcjEzNTE0OTMz","avatar_url":"https://avatars2.githubusercontent.com/u/13514933?v=4","gravatar_id":"","url":"https://api.github.com/users/walkman-kuan","html_url":"https://github.com/walkman-kuan","followers_url":"https://api.github.com/users/walkman-kuan/followers","following_url":"https://api.github.com/users/walkman-kuan/following{/other_user}","gists_url":"https://api.github.com/users/walkman-kuan/gists{/gist_id}","starred_url":"https://api.github.com/users/walkman-kuan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walkman-kuan/subscriptions","organizations_url":"https://api.github.com/users/walkman-kuan/orgs","repos_url":"https://api.github.com/users/walkman-kuan/repos","events_url":"https://api.github.com/users/walkman-kuan/events{/privacy}","received_events_url":"https://api.github.com/users/walkman-kuan/received_events","type":"User","site_admin":false},"created_at":"2019-11-20T20:38:45Z","updated_at":"2019-11-20T20:38:55Z","author_association":"NONE","body":"Did you disable [cluster shard allocation](https://www.elastic.co/guide/en/elasticsearch/reference/6.7/shards-allocation.html) or disable [shard allocation to a particular node](https://www.elastic.co/guide/en/elasticsearch/reference/current/shard-allocation-filtering.html#shard-allocation-filtering) accidentally? I'm facing the same issue, and solve it by enabling cluster shard allocation and index-level shard allocation.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/559332881","html_url":"https://github.com/elastic/elasticsearch/issues/39946#issuecomment-559332881","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39946","id":559332881,"node_id":"MDEyOklzc3VlQ29tbWVudDU1OTMzMjg4MQ==","user":{"login":"atrophes","id":29654168,"node_id":"MDQ6VXNlcjI5NjU0MTY4","avatar_url":"https://avatars0.githubusercontent.com/u/29654168?v=4","gravatar_id":"","url":"https://api.github.com/users/atrophes","html_url":"https://github.com/atrophes","followers_url":"https://api.github.com/users/atrophes/followers","following_url":"https://api.github.com/users/atrophes/following{/other_user}","gists_url":"https://api.github.com/users/atrophes/gists{/gist_id}","starred_url":"https://api.github.com/users/atrophes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atrophes/subscriptions","organizations_url":"https://api.github.com/users/atrophes/orgs","repos_url":"https://api.github.com/users/atrophes/repos","events_url":"https://api.github.com/users/atrophes/events{/privacy}","received_events_url":"https://api.github.com/users/atrophes/received_events","type":"User","site_admin":false},"created_at":"2019-11-28T04:03:40Z","updated_at":"2019-11-28T04:03:40Z","author_association":"NONE","body":"so, is there a way to detect what stopped the  I/O reactor ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/564829214","html_url":"https://github.com/elastic/elasticsearch/issues/39946#issuecomment-564829214","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39946","id":564829214,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDgyOTIxNA==","user":{"login":"Jigsawk","id":25435256,"node_id":"MDQ6VXNlcjI1NDM1MjU2","avatar_url":"https://avatars0.githubusercontent.com/u/25435256?v=4","gravatar_id":"","url":"https://api.github.com/users/Jigsawk","html_url":"https://github.com/Jigsawk","followers_url":"https://api.github.com/users/Jigsawk/followers","following_url":"https://api.github.com/users/Jigsawk/following{/other_user}","gists_url":"https://api.github.com/users/Jigsawk/gists{/gist_id}","starred_url":"https://api.github.com/users/Jigsawk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jigsawk/subscriptions","organizations_url":"https://api.github.com/users/Jigsawk/orgs","repos_url":"https://api.github.com/users/Jigsawk/repos","events_url":"https://api.github.com/users/Jigsawk/events{/privacy}","received_events_url":"https://api.github.com/users/Jigsawk/received_events","type":"User","site_admin":false},"created_at":"2019-12-12T03:04:17Z","updated_at":"2019-12-12T03:04:17Z","author_association":"NONE","body":"> @renweizhukov thanks for the hint! I'm using the client at scheduled method, so every invocation is started in new thread. The client has been injected to the service and never closed. Seems that is the reason of exception in my case. I changed my implementation so a new client is created at every thread when it is needed and closes in the end of method. That fixed the issue.\r\n\r\nsorry, it's a question. Do we need to close the injected client manually? In my opinion,the client is singleon, each thread invocate the unique client object.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/564860403","html_url":"https://github.com/elastic/elasticsearch/issues/39946#issuecomment-564860403","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39946","id":564860403,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDg2MDQwMw==","user":{"login":"renweizhukov","id":11728435,"node_id":"MDQ6VXNlcjExNzI4NDM1","avatar_url":"https://avatars0.githubusercontent.com/u/11728435?v=4","gravatar_id":"","url":"https://api.github.com/users/renweizhukov","html_url":"https://github.com/renweizhukov","followers_url":"https://api.github.com/users/renweizhukov/followers","following_url":"https://api.github.com/users/renweizhukov/following{/other_user}","gists_url":"https://api.github.com/users/renweizhukov/gists{/gist_id}","starred_url":"https://api.github.com/users/renweizhukov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/renweizhukov/subscriptions","organizations_url":"https://api.github.com/users/renweizhukov/orgs","repos_url":"https://api.github.com/users/renweizhukov/repos","events_url":"https://api.github.com/users/renweizhukov/events{/privacy}","received_events_url":"https://api.github.com/users/renweizhukov/received_events","type":"User","site_admin":false},"created_at":"2019-12-12T05:50:48Z","updated_at":"2019-12-12T05:50:48Z","author_association":"NONE","body":"> \r\n> \r\n> > @renweizhukov thanks for the hint! I'm using the client at scheduled method, so every invocation is started in new thread. The client has been injected to the service and never closed. Seems that is the reason of exception in my case. I changed my implementation so a new client is created at every thread when it is needed and closes in the end of method. That fixed the issue.\r\n> \r\n> sorry, it's a question. Do we need to close the injected client manually? In my opinion,the client is singleon, each thread invocate the unique client object.\r\n\r\nI don't think the client is singleton. I think you need to `close` the REST high level client after you are done with using it.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/564861205","html_url":"https://github.com/elastic/elasticsearch/issues/39946#issuecomment-564861205","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39946","id":564861205,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDg2MTIwNQ==","user":{"login":"renweizhukov","id":11728435,"node_id":"MDQ6VXNlcjExNzI4NDM1","avatar_url":"https://avatars0.githubusercontent.com/u/11728435?v=4","gravatar_id":"","url":"https://api.github.com/users/renweizhukov","html_url":"https://github.com/renweizhukov","followers_url":"https://api.github.com/users/renweizhukov/followers","following_url":"https://api.github.com/users/renweizhukov/following{/other_user}","gists_url":"https://api.github.com/users/renweizhukov/gists{/gist_id}","starred_url":"https://api.github.com/users/renweizhukov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/renweizhukov/subscriptions","organizations_url":"https://api.github.com/users/renweizhukov/orgs","repos_url":"https://api.github.com/users/renweizhukov/repos","events_url":"https://api.github.com/users/renweizhukov/events{/privacy}","received_events_url":"https://api.github.com/users/renweizhukov/received_events","type":"User","site_admin":false},"created_at":"2019-12-12T05:54:21Z","updated_at":"2019-12-12T05:54:21Z","author_association":"NONE","body":"> \r\n> \r\n> so, is there a way to detect what stopped the I/O reactor ?\r\n\r\nWhat I have done is to catch the exceptions and check if the exception message contains `I/O reactor status: STOPPED`. If yes, it implies that the client is stuck in an invalid state and won't be able to make any request. I have found similar issues as below:\r\n\r\nhttps://github.com/elastic/elasticsearch/issues/42133\r\nhttps://github.com/elastic/elasticsearch/issues/45115\r\n\r\nTo work around this, I simply close the existing client and create a new one.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/651611482","html_url":"https://github.com/elastic/elasticsearch/issues/39946#issuecomment-651611482","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39946","id":651611482,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTYxMTQ4Mg==","user":{"login":"TuJianwei","id":20569448,"node_id":"MDQ6VXNlcjIwNTY5NDQ4","avatar_url":"https://avatars2.githubusercontent.com/u/20569448?v=4","gravatar_id":"","url":"https://api.github.com/users/TuJianwei","html_url":"https://github.com/TuJianwei","followers_url":"https://api.github.com/users/TuJianwei/followers","following_url":"https://api.github.com/users/TuJianwei/following{/other_user}","gists_url":"https://api.github.com/users/TuJianwei/gists{/gist_id}","starred_url":"https://api.github.com/users/TuJianwei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TuJianwei/subscriptions","organizations_url":"https://api.github.com/users/TuJianwei/orgs","repos_url":"https://api.github.com/users/TuJianwei/repos","events_url":"https://api.github.com/users/TuJianwei/events{/privacy}","received_events_url":"https://api.github.com/users/TuJianwei/received_events","type":"User","site_admin":false},"created_at":"2020-06-30T07:42:06Z","updated_at":"2020-06-30T07:42:06Z","author_association":"NONE","body":"hi, I meet same problem. My java progrom is Running in docker and the error stack message is\r\n\r\nI/O reactor terminated abnormally\r\njava.lang.ArithmeticException: / by zero\r\n\tat org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.addChannel(AbstractMultiworkerIOReactor.java:473)\r\n\tat org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:178)\r\n\tat org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:145)\r\n\tat org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:348)\r\n\tat org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:192)\r\n\tat org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n\r\njava.lang.IllegalStateException: Request cannot be executed; I/O reactor status: STOPPED\r\n\tat org.apache.http.util.Asserts.check(Asserts.java:46)\r\n\tat org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase.ensureRunning(CloseableHttpAsyncClientBase.java:90)\r\n\tat org.apache.http.impl.nio.client.InternalHttpAsyncClient.execute(InternalHttpAsyncClient.java:123)\r\n\tat org.elasticsearch.client.RestClient.performRequestAsync(RestClient.java:554)\r\n\tat org.elasticsearch.client.RestClient.performRequestAsyncNoCatch(RestClient.java:537)\r\n\tat org.elasticsearch.client.RestClient.performRequest(RestClient.java:249)\r\n\tat org.elasticsearch.client.RestHighLevelClient.internalPerformRequest(RestHighLevelClient.java:568)\r\n\tat org.elasticsearch.client.RestHighLevelClient.performRequest(RestHighLevelClient.java:538)\r\n\tat org.elasticsearch.client.RestHighLevelClient.performRequestAndParseEntity(RestHighLevelClient.java:500)\r\n\tat org.elasticsearch.client.RestHighLevelClient.search(RestHighLevelClient.java:427)\r\n\tat org.elasticsearch.client.RestHighLevelClient.search(RestHighLevelClient.java:416)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/659176821","html_url":"https://github.com/elastic/elasticsearch/issues/39946#issuecomment-659176821","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39946","id":659176821,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTE3NjgyMQ==","user":{"login":"kaplin","id":1889728,"node_id":"MDQ6VXNlcjE4ODk3Mjg=","avatar_url":"https://avatars0.githubusercontent.com/u/1889728?v=4","gravatar_id":"","url":"https://api.github.com/users/kaplin","html_url":"https://github.com/kaplin","followers_url":"https://api.github.com/users/kaplin/followers","following_url":"https://api.github.com/users/kaplin/following{/other_user}","gists_url":"https://api.github.com/users/kaplin/gists{/gist_id}","starred_url":"https://api.github.com/users/kaplin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaplin/subscriptions","organizations_url":"https://api.github.com/users/kaplin/orgs","repos_url":"https://api.github.com/users/kaplin/repos","events_url":"https://api.github.com/users/kaplin/events{/privacy}","received_events_url":"https://api.github.com/users/kaplin/received_events","type":"User","site_admin":false},"created_at":"2020-07-16T05:56:43Z","updated_at":"2020-07-16T05:56:43Z","author_association":"NONE","body":"I might have a fix for this — https://github.com/apache/httpcomponents-core/pull/203/","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/714224254","html_url":"https://github.com/elastic/elasticsearch/issues/39946#issuecomment-714224254","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39946","id":714224254,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNDIyNDI1NA==","user":{"login":"xiongmaodeguxiang","id":32676954,"node_id":"MDQ6VXNlcjMyNjc2OTU0","avatar_url":"https://avatars0.githubusercontent.com/u/32676954?v=4","gravatar_id":"","url":"https://api.github.com/users/xiongmaodeguxiang","html_url":"https://github.com/xiongmaodeguxiang","followers_url":"https://api.github.com/users/xiongmaodeguxiang/followers","following_url":"https://api.github.com/users/xiongmaodeguxiang/following{/other_user}","gists_url":"https://api.github.com/users/xiongmaodeguxiang/gists{/gist_id}","starred_url":"https://api.github.com/users/xiongmaodeguxiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiongmaodeguxiang/subscriptions","organizations_url":"https://api.github.com/users/xiongmaodeguxiang/orgs","repos_url":"https://api.github.com/users/xiongmaodeguxiang/repos","events_url":"https://api.github.com/users/xiongmaodeguxiang/events{/privacy}","received_events_url":"https://api.github.com/users/xiongmaodeguxiang/received_events","type":"User","site_admin":false},"created_at":"2020-10-22T04:52:12Z","updated_at":"2020-10-22T04:52:12Z","author_association":"NONE","body":"i am also facing same issue with ES RestHighLevenClient using BulkProcessor, but i found that my service is out of memory . it case the connetion closed。","performed_via_github_app":null}]