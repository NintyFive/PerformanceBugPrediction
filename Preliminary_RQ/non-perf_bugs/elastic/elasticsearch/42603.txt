{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/42603","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42603/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42603/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42603/events","html_url":"https://github.com/elastic/elasticsearch/issues/42603","id":449080850,"node_id":"MDU6SXNzdWU0NDkwODA4NTA=","number":42603,"title":"Third party audit task is fails on rhel 8","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"labels":[{"id":106454670,"node_id":"MDU6TGFiZWwxMDY0NTQ2NzA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Build","name":":Delivery/Build","color":"0e8a16","default":false,"description":"Build or test infrastructure"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"}],"state":"closed","locked":false,"assignee":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"assignees":[{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false}],"milestone":null,"comments":9,"created_at":"2019-05-28T06:11:19Z","updated_at":"2020-11-11T21:48:54Z","closed_at":"2019-07-05T13:09:11Z","author_association":"MEMBER","active_lock_reason":null,"body":"Over the last few days we see a noticeable increase in builds that fail with \r\n\r\n```\r\nThird party audit task is not configured correctly\r\n```\r\n\r\nHere are some examples:\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.x+multijob-unix-compatibility/os=redhat-8/232/console:\r\n\r\n```\r\n21:41:22 > Task :test:framework:thirdPartyAudit\r\n21:41:22 Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF8\r\n21:41:23 Unnecessary exclusions, following classes are not missing:\r\n21:41:23    * javax.servlet.ServletContextEvent\r\n21:41:23   * javax.servlet.ServletContextListener\r\n21:41:23 \r\n21:41:23 > Task :test:framework:thirdPartyAudit FAILED\r\n21:41:23 \r\n21:41:23 > Task :qa:vagrant:thirdPartyAudit\r\n21:41:23 Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF8\r\n21:41:29 \r\n21:41:29 > Task :plugins:repository-hdfs:thirdPartyAudit\r\n21:41:29 Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF8\r\n21:41:30 \r\n21:41:30 FAILURE: Build failed with an exception.\r\n21:41:30 \r\n21:41:30 * What went wrong:\r\n21:41:30 Execution failed for task ':test:framework:thirdPartyAudit'.\r\n21:41:30 > Third party audit task is not configured correctly\r\n```\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.2+multijob-unix-compatibility/os=redhat-8/11/console\r\n\r\n```\r\n\r\n17:19:27 > Task :plugins:discovery-azure-classic:thirdPartyAudit FAILED\r\n17:19:27 Unnecessary exclusions, following classes are not missing:\r\n17:19:27    * com.sun.xml.fastinfoset.stax.StAXDocumentParser\r\n17:19:27   * com.sun.xml.fastinfoset.stax.StAXDocumentSerializer\r\n17:19:27   * javax.servlet.ServletContextEvent\r\n17:19:27   * javax.servlet.ServletContextListener\r\n17:19:27   * org.apache.avalon.framework.logger.Logger\r\n17:19:27   * org.apache.log.Hierarchy\r\n17:19:27   * org.apache.log.Logger\r\n17:19:27   * org.eclipse.persistence.descriptors.ClassDescriptor\r\n17:19:27   * org.eclipse.persistence.internal.oxm.MappingNodeValue\r\n17:19:27   * org.eclipse.persistence.internal.oxm.TreeObjectBuilder\r\n17:19:27   * org.eclipse.persistence.internal.oxm.XPathFragment\r\n17:19:27   * org.eclipse.persistence.internal.oxm.XPathNode\r\n17:19:27   * org.eclipse.persistence.internal.queries.ContainerPolicy\r\n17:19:27   * org.eclipse.persistence.jaxb.JAXBContext\r\n17:19:27   * org.eclipse.persistence.jaxb.JAXBHelper\r\n17:19:27   * org.eclipse.persistence.mappings.DatabaseMapping\r\n17:19:27   * org.eclipse.persistence.mappings.converters.TypeConversionConverter\r\n17:19:27   * org.eclipse.persistence.mappings.foundation.AbstractCompositeDirectCollectionMapping\r\n17:19:27   * org.eclipse.persistence.oxm.XMLContext\r\n17:19:27   * org.eclipse.persistence.oxm.XMLDescriptor\r\n17:19:27   * org.eclipse.persistence.oxm.XMLField\r\n17:19:27   * org.eclipse.persistence.oxm.mappings.XMLCompositeCollectionMapping\r\n17:19:27   * org.eclipse.persistence.sessions.DatabaseSession\r\n17:19:27   * org.jvnet.fastinfoset.VocabularyApplicationData\r\n17:19:27   * org.jvnet.staxex.Base64Data\r\n17:19:27   * org.jvnet.staxex.XMLStreamReaderEx\r\n17:19:27   * org.jvnet.staxex.XMLStreamWriterEx\r\n17:19:27   * org.osgi.framework.BundleEvent\r\n17:19:27   * org.osgi.framework.SynchronousBundleListener\r\n17:19:28 \r\n17:19:28 > Task :plugins:ingest-attachment:processTestResources\r\n17:19:30 \r\n17:19:30 > Task :plugins:discovery-ec2:thirdPartyAudit\r\n17:19:30 Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF8\r\n17:19:36 \r\n17:19:36 > Task :server:compileJava9Java\r\n17:19:36 \r\n17:19:36 FAILURE: Build failed with an exception.\r\n17:19:36 \r\n17:19:36 * What went wrong:\r\n17:19:36 Execution failed for task ':plugins:discovery-azure-classic:thirdPartyAudit'.\r\n17:19:36 > Third party audit task is not configured correctly\r\n```\r\n\r\nI could not reproduce these failures locally.\r\n\r\nAn analysis in build-stats shows the increase in build failures. We have between 16 - 18 of those per day across all CI builds and it started on May 25th 2019, 05:41:19.570 (see \r\n[failed-builds.txt](https://github.com/elastic/elasticsearch/files/3225872/failed-builds.txt) for a full list of the builds that failed so far):\r\n\r\n![build-failures-over-time](https://user-images.githubusercontent.com/1699576/58454668-72b5d800-811f-11e9-8077-8c6c69ee0c73.png)\r\n\r\nI don't want to jump to conclusions but one *possibly* related commit that happened before the build failures have started, could be https://github.com/elastic/elasticsearch/pull/41392 which addresses the configuration phase in our build (there are a few other commits after that one which also address configuration caching so it's hard to tell). @mark-vieira could you please have a look at this as you're probably most familiar here?","closed_by":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"performed_via_github_app":null}