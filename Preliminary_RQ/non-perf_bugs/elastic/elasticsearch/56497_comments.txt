[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/626498459","html_url":"https://github.com/elastic/elasticsearch/issues/56497#issuecomment-626498459","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56497","id":626498459,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNjQ5ODQ1OQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-05-11T06:28:19Z","updated_at":"2020-05-11T06:28:19Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed (:Distributed/CRUD)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/626498472","html_url":"https://github.com/elastic/elasticsearch/issues/56497#issuecomment-626498472","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56497","id":626498472,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNjQ5ODQ3Mg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-05-11T06:28:20Z","updated_at":"2020-05-11T06:28:20Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features (:Core/Features/CAT APIs)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/626642894","html_url":"https://github.com/elastic/elasticsearch/issues/56497#issuecomment-626642894","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56497","id":626642894,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNjY0Mjg5NA==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2020-05-11T11:23:37Z","updated_at":"2020-05-11T11:48:17Z","author_association":"CONTRIBUTOR","body":"The `docs.deleted` stats report on the segments in the index, and your test case does not do any refreshing so does not create any segments. Adding some appropriate refreshes recovers the expected behaviour in 6.x:\r\n\r\n<details>\r\n\r\n```\r\nDELETE /my_test\r\n\r\n# {\r\n#   \"acknowledged\": true\r\n# }\r\n\r\nPUT /my_test\r\n{\r\n  \"settings\": {\r\n    \"number_of_shards\": 1,\r\n    \"number_of_replicas\": 0\r\n  }\r\n}\r\n\r\n# {\r\n#   \"shards_acknowledged\": true,\r\n#   \"acknowledged\": true,\r\n#   \"index\": \"my_test\"\r\n# }\r\n\r\nPUT /my_test/_doc/1\r\n{\r\n  \"title\": \"aaa\"\r\n}\r\n\r\n# {\r\n#   \"_type\": \"_doc\",\r\n#   \"_primary_term\": 1,\r\n#   \"_id\": \"1\",\r\n#   \"_shards\": {\r\n#     \"successful\": 1,\r\n#     \"total\": 1,\r\n#     \"failed\": 0\r\n#   },\r\n#   \"_index\": \"my_test\",\r\n#   \"result\": \"created\",\r\n#   \"_version\": 1,\r\n#   \"_seq_no\": 0\r\n# }\r\n\r\nPUT /my_test/_doc/2\r\n{\r\n  \"title\": \"bbb\"\r\n}\r\n\r\n# {\r\n#   \"_type\": \"_doc\",\r\n#   \"_primary_term\": 1,\r\n#   \"_id\": \"2\",\r\n#   \"_shards\": {\r\n#     \"successful\": 1,\r\n#     \"total\": 1,\r\n#     \"failed\": 0\r\n#   },\r\n#   \"_index\": \"my_test\",\r\n#   \"result\": \"created\",\r\n#   \"_version\": 1,\r\n#   \"_seq_no\": 1\r\n# }\r\n\r\nPOST /my_test/_refresh\r\n\r\n# {\r\n#   \"_shards\": {\r\n#     \"successful\": 1,\r\n#     \"total\": 1,\r\n#     \"failed\": 0\r\n#   }\r\n# }\r\n\r\nDELETE /my_test/_doc/1\r\n\r\n# {\r\n#   \"_type\": \"_doc\",\r\n#   \"_primary_term\": 1,\r\n#   \"_id\": \"1\",\r\n#   \"_shards\": {\r\n#     \"successful\": 1,\r\n#     \"total\": 1,\r\n#     \"failed\": 0\r\n#   },\r\n#   \"_index\": \"my_test\",\r\n#   \"result\": \"deleted\",\r\n#   \"_version\": 2,\r\n#   \"_seq_no\": 2\r\n# }\r\n\r\nPOST /my_test/_refresh\r\n\r\n# {\r\n#   \"_shards\": {\r\n#     \"successful\": 1,\r\n#     \"total\": 1,\r\n#     \"failed\": 0\r\n#   }\r\n# }\r\n\r\nGET /_cat/indices?v&index=my_test&h=index,health,status,docs.deleted\r\n\r\n# index   health status docs.deleted\r\n# my_test green  open              1\r\n# \r\n\r\n```\r\n</details>\r\n\r\nIn 7.x it's more complicated since we delete the document and then add a tombstone to record the deletion, and I think we count both of these as deleted docs. I think that makes sense, the tombstone is a genuine doc in the index that should be cleaned up later on once it's no longer needed for peer recovery, and indeed after thirty seconds (the peer recovery lease resync interval) and a flush I see that happen automatically:\r\n\r\n<details>\r\n\r\n```\r\nDELETE /my_test\r\n# at 2020-05-11T11:22:27.304Z\r\n\r\n# {\r\n#   \"acknowledged\": true\r\n# }\r\n# at 2020-05-11T11:22:27.381Z\r\n# (0.077211s elapsed)\r\n\r\nPUT /my_test\r\n{\r\n  \"settings\": {\r\n    \"number_of_shards\": 1,\r\n    \"number_of_replicas\": 0\r\n  }\r\n}\r\n# at 2020-05-11T11:22:27.381Z\r\n\r\n# {\r\n#   \"shards_acknowledged\": true,\r\n#   \"acknowledged\": true,\r\n#   \"index\": \"my_test\"\r\n# }\r\n# at 2020-05-11T11:22:27.632Z\r\n# (0.250563s elapsed)\r\n\r\nPUT /my_test/_doc/1\r\n{\r\n  \"title\": \"aaa\"\r\n}\r\n# at 2020-05-11T11:22:27.632Z\r\n\r\n# {\r\n#   \"_type\": \"_doc\",\r\n#   \"_primary_term\": 1,\r\n#   \"_id\": \"1\",\r\n#   \"_shards\": {\r\n#     \"successful\": 1,\r\n#     \"total\": 1,\r\n#     \"failed\": 0\r\n#   },\r\n#   \"_index\": \"my_test\",\r\n#   \"result\": \"created\",\r\n#   \"_version\": 1,\r\n#   \"_seq_no\": 0\r\n# }\r\n# at 2020-05-11T11:22:27.699Z\r\n# (0.066634s elapsed)\r\n\r\nPUT /my_test/_doc/2\r\n{\r\n  \"title\": \"bbb\"\r\n}\r\n# at 2020-05-11T11:22:27.699Z\r\n\r\n# {\r\n#   \"_type\": \"_doc\",\r\n#   \"_primary_term\": 1,\r\n#   \"_id\": \"2\",\r\n#   \"_shards\": {\r\n#     \"successful\": 1,\r\n#     \"total\": 1,\r\n#     \"failed\": 0\r\n#   },\r\n#   \"_index\": \"my_test\",\r\n#   \"result\": \"created\",\r\n#   \"_version\": 1,\r\n#   \"_seq_no\": 1\r\n# }\r\n# at 2020-05-11T11:22:27.718Z\r\n# (0.018532s elapsed)\r\n\r\nPOST /my_test/_refresh\r\n# at 2020-05-11T11:22:27.718Z\r\n\r\n# {\r\n#   \"_shards\": {\r\n#     \"successful\": 1,\r\n#     \"total\": 1,\r\n#     \"failed\": 0\r\n#   }\r\n# }\r\n# at 2020-05-11T11:22:27.742Z\r\n# (0.023456s elapsed)\r\n\r\nDELETE /my_test/_doc/1\r\n# at 2020-05-11T11:22:27.742Z\r\n\r\n# {\r\n#   \"_type\": \"_doc\",\r\n#   \"_primary_term\": 1,\r\n#   \"_id\": \"1\",\r\n#   \"_shards\": {\r\n#     \"successful\": 1,\r\n#     \"total\": 1,\r\n#     \"failed\": 0\r\n#   },\r\n#   \"_index\": \"my_test\",\r\n#   \"result\": \"deleted\",\r\n#   \"_version\": 2,\r\n#   \"_seq_no\": 2\r\n# }\r\n# at 2020-05-11T11:22:27.755Z\r\n# (0.013136s elapsed)\r\n\r\nPOST /my_test/_refresh\r\n# at 2020-05-11T11:22:27.772Z\r\n\r\n# {\r\n#   \"_shards\": {\r\n#     \"successful\": 1,\r\n#     \"total\": 1,\r\n#     \"failed\": 0\r\n#   }\r\n# }\r\n# at 2020-05-11T11:22:27.787Z\r\n# (0.015387s elapsed)\r\n\r\nGET /_cat/indices?v&index=my_test&h=index,health,status,docs.deleted\r\n# at 2020-05-11T11:22:27.787Z\r\n\r\n# index   health status docs.deleted\r\n# my_test green  open              2\r\n# \r\n# at 2020-05-11T11:22:27.793Z\r\n# (0.005123s elapsed)\r\n\r\n### NOTE â‰¥30-second pause here\r\n\r\nPOST /my_test/_flush\r\n# at 2020-05-11T11:22:58.937Z\r\n\r\n# {\r\n#   \"_shards\": {\r\n#     \"successful\": 1,\r\n#     \"total\": 1,\r\n#     \"failed\": 0\r\n#   }\r\n# }\r\n# at 2020-05-11T11:22:59.037Z\r\n# (0.1003s elapsed)\r\n\r\nGET /_cat/indices?v&index=my_test&h=index,health,status,docs.deleted\r\n# at 2020-05-11T11:22:59.037Z\r\n\r\n# index   health status docs.deleted\r\n# my_test green  open              1\r\n# \r\n# at 2020-05-11T11:22:59.041Z\r\n# (0.003604s elapsed)\r\n\r\n\r\n```\r\n</details>","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/626644298","html_url":"https://github.com/elastic/elasticsearch/issues/56497#issuecomment-626644298","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56497","id":626644298,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNjY0NDI5OA==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2020-05-11T11:26:55Z","updated_at":"2020-05-11T11:26:55Z","author_association":"CONTRIBUTOR","body":"I've marked this for team discussion in order to contemplate whether we can make this behaviour any less surprising without compromising the fidelity of the stats.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/627504527","html_url":"https://github.com/elastic/elasticsearch/issues/56497#issuecomment-627504527","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56497","id":627504527,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNzUwNDUyNw==","user":{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false},"created_at":"2020-05-12T18:07:19Z","updated_at":"2020-05-12T18:07:19Z","author_association":"MEMBER","body":"Thanks @kunisen and @DaveCTurner. We can make the deleted count more consistent by excluding tombstone documents. However, I think we should instead explain in the documentation that the doc count and deleted count might include some 'system' documents.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/627634642","html_url":"https://github.com/elastic/elasticsearch/issues/56497#issuecomment-627634642","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56497","id":627634642,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNzYzNDY0Mg==","user":{"login":"geekpete","id":2070843,"node_id":"MDQ6VXNlcjIwNzA4NDM=","avatar_url":"https://avatars2.githubusercontent.com/u/2070843?v=4","gravatar_id":"","url":"https://api.github.com/users/geekpete","html_url":"https://github.com/geekpete","followers_url":"https://api.github.com/users/geekpete/followers","following_url":"https://api.github.com/users/geekpete/following{/other_user}","gists_url":"https://api.github.com/users/geekpete/gists{/gist_id}","starred_url":"https://api.github.com/users/geekpete/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/geekpete/subscriptions","organizations_url":"https://api.github.com/users/geekpete/orgs","repos_url":"https://api.github.com/users/geekpete/repos","events_url":"https://api.github.com/users/geekpete/events{/privacy}","received_events_url":"https://api.github.com/users/geekpete/received_events","type":"User","site_admin":false},"created_at":"2020-05-12T22:33:58Z","updated_at":"2020-05-12T22:34:39Z","author_association":"MEMBER","body":"If we had a parameter to reveal more information such as a further breakdown about what sub-counts per \"type\"/category of document comprise the overall count they are then perhaps that would make it more obvious to users, similar to how index stats show total count vs deleted count (at lucene level).\r\n\r\nThis might also be useful for users confused about some APIs counting Elasticsearch documents vs Lucene documents where nested documents show a higher Lucene document count for a smaller Elasticsearch document count.\r\n\r\nIf we had a `detailed` or `breakdown` type of parameter we could then just show the counts for each underlying group of documents be that top level/ES vs lucene vs system/tombstone documents perhaps, maybe depending on the context of API as well (eg split by ES vs tombstone/system/other OR split by ES vs Lucene if those contexts make the most sense depending on API)\r\n\r\nThough if we did this wrong it might make things less clear, it might still be useful but as an undocumented expert setting perhaps.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/627669287","html_url":"https://github.com/elastic/elasticsearch/issues/56497#issuecomment-627669287","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56497","id":627669287,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNzY2OTI4Nw==","user":{"login":"kunisen","id":30574753,"node_id":"MDQ6VXNlcjMwNTc0NzUz","avatar_url":"https://avatars2.githubusercontent.com/u/30574753?v=4","gravatar_id":"","url":"https://api.github.com/users/kunisen","html_url":"https://github.com/kunisen","followers_url":"https://api.github.com/users/kunisen/followers","following_url":"https://api.github.com/users/kunisen/following{/other_user}","gists_url":"https://api.github.com/users/kunisen/gists{/gist_id}","starred_url":"https://api.github.com/users/kunisen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kunisen/subscriptions","organizations_url":"https://api.github.com/users/kunisen/orgs","repos_url":"https://api.github.com/users/kunisen/repos","events_url":"https://api.github.com/users/kunisen/events{/privacy}","received_events_url":"https://api.github.com/users/kunisen/received_events","type":"User","site_admin":false},"created_at":"2020-05-13T00:22:29Z","updated_at":"2020-05-13T00:22:29Z","author_association":"NONE","body":"echoing @geekpete \r\nI did find some hint from `nodes stats` API.\r\nIt appears the \"indices.docs.deleted\" is actually from Lucene.\r\n\r\n![image](https://user-images.githubusercontent.com/30574753/81757730-ccfba480-94fa-11ea-9ffe-e8c6dfef5d91.png)\r\n\r\n\r\nMaybe it's good to add that part to the API description breakdown page.\r\nhttps://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-stats.html\r\n\r\nAlso, if we have any difference in between `_cat/indices` and `nodes stats` API, then I would say it might be good to also mention that too, along with adding the comment of \"Tombstone\" and \"_flush\".\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/627730846","html_url":"https://github.com/elastic/elasticsearch/issues/56497#issuecomment-627730846","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56497","id":627730846,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNzczMDg0Ng==","user":{"login":"geekpete","id":2070843,"node_id":"MDQ6VXNlcjIwNzA4NDM=","avatar_url":"https://avatars2.githubusercontent.com/u/2070843?v=4","gravatar_id":"","url":"https://api.github.com/users/geekpete","html_url":"https://github.com/geekpete","followers_url":"https://api.github.com/users/geekpete/followers","following_url":"https://api.github.com/users/geekpete/following{/other_user}","gists_url":"https://api.github.com/users/geekpete/gists{/gist_id}","starred_url":"https://api.github.com/users/geekpete/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/geekpete/subscriptions","organizations_url":"https://api.github.com/users/geekpete/orgs","repos_url":"https://api.github.com/users/geekpete/repos","events_url":"https://api.github.com/users/geekpete/events{/privacy}","received_events_url":"https://api.github.com/users/geekpete/received_events","type":"User","site_admin":false},"created_at":"2020-05-13T04:01:03Z","updated_at":"2020-05-13T04:41:31Z","author_association":"MEMBER","body":"The simple example I use for checking why doc counts differ depending on the api:\r\n\r\n<details><summary>Doc count differences by API</summary>\r\n\r\n\r\n        \r\n```\r\n#\r\n# Why does doc count differ depending on API?\r\n#\r\n\r\n# using a variant of the nested docs example from the documentation can help highlight the difference\r\n# between top level ES doc counts and lower level Lucene doc counts.\r\nDELETE my_index\r\nPUT my_index\r\n{\r\n  \"mappings\": {\r\n    \"properties\": {\r\n      \"user\": {\r\n        \"type\": \"nested\"\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n\r\nPUT my_index/_doc/1\r\n{\r\n  \"group\" : \"fans\",\r\n  \"user\" : [\r\n    {\r\n      \"first\" : \"John\",\r\n      \"last\" :  \"Smith\"\r\n    },\r\n    {\r\n      \"first\" : \"Alice\",\r\n      \"last\" :  \"White\"\r\n    }\r\n  ]\r\n}\r\n\r\nPUT my_index/_doc/2\r\n{\r\n  \"group\" : \"fans\",\r\n  \"user\" : [\r\n    {\r\n      \"first\" : \"Bob\",\r\n      \"last\" :  \"Smith\"\r\n    },\r\n    {\r\n      \"first\" : \"Harry\",\r\n      \"last\" :  \"White\"\r\n    },\r\n    {\r\n      \"first\" : \"Terry\",\r\n      \"last\" :  \"Arthur\"\r\n    }\r\n  ]\r\n}\r\n\r\n# flush to ensure docs are searchable/counta\r\nPOST my_index/_flush\r\n\r\n# index count api shows top level ES docs\r\n# https://www.elastic.co/guide/en/elasticsearch/reference/7.6/search-count.html\r\nGET my_index/_count\r\n\r\n\r\n# CAT Indices API shows lower level lucene doc count, nested fields are stored as separate lucene docs.\r\n# This behaviour is documented: https://www.elastic.co/guide/en/elasticsearch/reference/current/cat-indices.html#cat-indices-api-desc\r\nGET /_cat/indices/my_index?v\r\n\r\n# CAT Count api shows top level ES docs:\r\n# https://www.elastic.co/guide/en/elasticsearch/reference/7.6/search-count.html\r\nGET /_cat/count/my_index?v\r\n\r\n# Index stats shows Lucene doc count\r\nGET /my_index/_stats?filter_path=indices.my_index.total.docs\r\n```\r\n\r\n</details>\r\n\r\nFor this example, maybe an additional `tombstones` count in there would be handy.\r\n\r\n```\r\n{\r\n  \"indices\" : {\r\n    \"my_index\" : {\r\n      \"total\" : {\r\n        \"docs\" : {\r\n          \"count\" : 7,\r\n          \"deleted\" : 0,\r\n          \"tombstones\" : 0,\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\nand\r\n\r\n```\r\nhealth status index    uuid                   pri rep docs.count docs.deleted docs.tombstones store.size pri.store.size\r\ngreen  open   my_index 31yBbQgxTx6Nu2ObIJMThw   1   0          7            0               0      9.8kb          9.8kb\r\n```\r\n\r\neither with some optional parameter or by default,etc.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/627783983","html_url":"https://github.com/elastic/elasticsearch/issues/56497#issuecomment-627783983","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56497","id":627783983,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNzc4Mzk4Mw==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2020-05-13T06:49:06Z","updated_at":"2020-05-13T06:49:06Z","author_association":"CONTRIBUTOR","body":"Like Nhat I'm also in favour of documenting the internal nature of `docs.deleted` rather than changing it or adding a more detailed breakdown which may constrain future work in this area. Lucene's tracking of deleted docs should IMO be considered a deep implementation detail. Users ought to rely on Elasticsearch keeping them under control in the background rather than trying to actively manage them, especially since the only tools to do so are rather blunt things like a force-merge, and I think that adding more detailed stats will encourage the opposite behaviour.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/627824387","html_url":"https://github.com/elastic/elasticsearch/issues/56497#issuecomment-627824387","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56497","id":627824387,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNzgyNDM4Nw==","user":{"login":"kunisen","id":30574753,"node_id":"MDQ6VXNlcjMwNTc0NzUz","avatar_url":"https://avatars2.githubusercontent.com/u/30574753?v=4","gravatar_id":"","url":"https://api.github.com/users/kunisen","html_url":"https://github.com/kunisen","followers_url":"https://api.github.com/users/kunisen/followers","following_url":"https://api.github.com/users/kunisen/following{/other_user}","gists_url":"https://api.github.com/users/kunisen/gists{/gist_id}","starred_url":"https://api.github.com/users/kunisen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kunisen/subscriptions","organizations_url":"https://api.github.com/users/kunisen/orgs","repos_url":"https://api.github.com/users/kunisen/repos","events_url":"https://api.github.com/users/kunisen/events{/privacy}","received_events_url":"https://api.github.com/users/kunisen/received_events","type":"User","site_admin":false},"created_at":"2020-05-13T08:11:35Z","updated_at":"2020-05-13T08:11:35Z","author_association":"NONE","body":"Thanks @DaveCTurner for the pointers!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/628008683","html_url":"https://github.com/elastic/elasticsearch/issues/56497#issuecomment-628008683","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56497","id":628008683,"node_id":"MDEyOklzc3VlQ29tbWVudDYyODAwODY4Mw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-05-13T14:00:15Z","updated_at":"2020-05-13T14:00:15Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-docs (>docs)","performed_via_github_app":null}]