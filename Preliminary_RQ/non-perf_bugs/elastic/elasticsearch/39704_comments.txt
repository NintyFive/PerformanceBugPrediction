[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/469726955","html_url":"https://github.com/elastic/elasticsearch/issues/39704#issuecomment-469726955","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39704","id":469726955,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTcyNjk1NQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-03-05T15:36:39Z","updated_at":"2019-03-05T15:36:39Z","author_association":"COLLABORATOR","body":"Pinging @elastic/ml-core","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/469735294","html_url":"https://github.com/elastic/elasticsearch/issues/39704#issuecomment-469735294","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39704","id":469735294,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTczNTI5NA==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2019-03-05T15:58:16Z","updated_at":"2019-03-05T15:58:16Z","author_association":"CONTRIBUTOR","body":"This is a duplicate of #30070","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/469737682","html_url":"https://github.com/elastic/elasticsearch/issues/39704#issuecomment-469737682","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39704","id":469737682,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTczNzY4Mg==","user":{"login":"davidkyle","id":2353640,"node_id":"MDQ6VXNlcjIzNTM2NDA=","avatar_url":"https://avatars1.githubusercontent.com/u/2353640?v=4","gravatar_id":"","url":"https://api.github.com/users/davidkyle","html_url":"https://github.com/davidkyle","followers_url":"https://api.github.com/users/davidkyle/followers","following_url":"https://api.github.com/users/davidkyle/following{/other_user}","gists_url":"https://api.github.com/users/davidkyle/gists{/gist_id}","starred_url":"https://api.github.com/users/davidkyle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidkyle/subscriptions","organizations_url":"https://api.github.com/users/davidkyle/orgs","repos_url":"https://api.github.com/users/davidkyle/repos","events_url":"https://api.github.com/users/davidkyle/events{/privacy}","received_events_url":"https://api.github.com/users/davidkyle/received_events","type":"User","site_admin":false},"created_at":"2019-03-05T16:03:59Z","updated_at":"2019-03-05T16:03:59Z","author_association":"MEMBER","body":"The duplicate detector bug is known issue #30070. It couldn't be addressed when the config was stored in clusterstate as it meant changing the validation which could potentially error parsing of the clusterstate but it can be fixed now config has moved to an index.\r\n\r\nThe error occurs when autodetect is starting up. When a job is opened autodetect is launched and the code assumes it is happily working, there is no ability to wait for autodetect to report that it has parsed the config and started without error. Also this is very difficult to do on an open job request as the request will hit the master node but the job can start (and possibly fail) on a different node. The persistent tasks framework is used to detect that the job has started (or failed) on another node then the master node responds to the original request. There should be a more visible way to surface these errors and that is a little easier after #38029\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/469737807","html_url":"https://github.com/elastic/elasticsearch/issues/39704#issuecomment-469737807","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39704","id":469737807,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTczNzgwNw==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2019-03-05T16:04:17Z","updated_at":"2019-03-05T16:04:17Z","author_association":"CONTRIBUTOR","body":"An attempt was made to fix this when we were in the private X-Pack repo (see the reverse link), but it was aborted because:\r\n\r\n> At the moment of creating this PR I realised it cannot be merged due to BWC issues. If someone has a job defined with duplicate detectors then after upgrade parsing the analysis config will throw an exception blocking the node.\r\n\r\nThis problem will not be quite so severe for job configs stored in indices, so from 8.0 we probably should change the validation in the Java to be the same as that in the C++.  It's extremely unlikely that any user will be affected, and if they are it will only cripple ML, not the whole cluster.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/470091066","html_url":"https://github.com/elastic/elasticsearch/issues/39704#issuecomment-470091066","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39704","id":470091066,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MDA5MTA2Ng==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2019-03-06T12:34:59Z","updated_at":"2019-03-06T12:34:59Z","author_association":"CONTRIBUTOR","body":"The other thing we could do starting in any release is to introduce a separate validation method that is not called during parsing but can be called _only_ by the put job action and validate job action.  This cannot create any BWC problems with existing jobs, but will prevent new jobs being added that fail the tighter validation.  If a user already has a job that is impossible to run without it failing due to C++ validation then they'll still have this job until they delete it.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/476121996","html_url":"https://github.com/elastic/elasticsearch/issues/39704#issuecomment-476121996","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39704","id":476121996,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjEyMTk5Ng==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2019-03-25T09:44:33Z","updated_at":"2019-03-25T09:44:33Z","author_association":"CONTRIBUTOR","body":"Fixes for the remaining problems listed in #29843 should be incorporated into any changes made for this issue.","performed_via_github_app":null}]