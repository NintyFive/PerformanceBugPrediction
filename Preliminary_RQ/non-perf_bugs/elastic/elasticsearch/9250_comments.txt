[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69571313","html_url":"https://github.com/elastic/elasticsearch/issues/9250#issuecomment-69571313","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9250","id":69571313,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NTcxMzEz","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-01-12T13:45:53Z","updated_at":"2015-01-12T13:45:53Z","author_association":"MEMBER","body":"@wsw70 I can't see anything wrong with the settings. nmap also seems to confirm that port 9300 on eu4 is reachable from eu5. Can you set the discovery logger to `TRACE`? that we show use more about the individual pings that go out. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69590418","html_url":"https://github.com/elastic/elasticsearch/issues/9250#issuecomment-69590418","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9250","id":69590418,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NTkwNDE4","user":{"login":"wsw70","id":1345886,"node_id":"MDQ6VXNlcjEzNDU4ODY=","avatar_url":"https://avatars2.githubusercontent.com/u/1345886?v=4","gravatar_id":"","url":"https://api.github.com/users/wsw70","html_url":"https://github.com/wsw70","followers_url":"https://api.github.com/users/wsw70/followers","following_url":"https://api.github.com/users/wsw70/following{/other_user}","gists_url":"https://api.github.com/users/wsw70/gists{/gist_id}","starred_url":"https://api.github.com/users/wsw70/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wsw70/subscriptions","organizations_url":"https://api.github.com/users/wsw70/orgs","repos_url":"https://api.github.com/users/wsw70/repos","events_url":"https://api.github.com/users/wsw70/events{/privacy}","received_events_url":"https://api.github.com/users/wsw70/received_events","type":"User","site_admin":false},"created_at":"2015-01-12T15:50:29Z","updated_at":"2015-01-12T15:51:02Z","author_association":"NONE","body":"@bleskes I switched to `TRACE`, the logs are below. I kept the initialization part (`eu5`, the machine I want to join to the cluster is `10.81.147.186`). \n\nI explicitly set in the configuration \n\n```\ndiscovery.zen.ping.unicast: [\"10.81.163.129\"]\n```\n\nwhere `10.81.163.129` is the IP address of `elk.example.com` (aka `eu4`) above. This is to make sure that any DSN resolution is not a problem (the resolution works fine, this is just in case).\n\nWhat surprises me is that I do not see any references to that IP in the logs below (nor I saw before, with `discovery.zen.ping.unicast` set to `elk.example.com` as initially)\n\nThe tcpdump shows the `PSH, ACK`, though.\n\n```\n[2015-01-12 14:48:48,783][DEBUG][transport.netty          ] [eu5] Bound profile [default] to address [/10.81.147.186:9300]\n[2015-01-12 14:48:48,783][INFO ][transport                ] [eu5] bound_address {inet[/10.81.147.186:9300]}, publish_address {inet[/10.81.147.186:9300]}\n[2015-01-12 14:48:48,790][INFO ][discovery                ] [eu5] security/ETd8UQOiRsuhq3L1_4UxHw\n[2015-01-12 14:48:48,790][DEBUG][cluster.service          ] [eu5] processing [initial_join]: execute\n[2015-01-12 14:48:48,791][DEBUG][cluster.service          ] [eu5] processing [initial_join]: no change in cluster_state\n[2015-01-12 14:48:48,791][TRACE][discovery.zen            ] [eu5] starting to ping\n[2015-01-12 14:48:48,794][TRACE][discovery.zen.ping.unicast] [eu5] [1] connecting to [eu5][ETd8UQOiRsuhq3L1_4UxHw][eu5.example.com][inet[/10.81.\n147.186:9300]]\n[2015-01-12 14:48:48,804][TRACE][transport.netty          ] [eu5] channel opened: [id: 0x27efa0ce, /10.81.147.186:49963 => /10.81.147.186:9300]\n[2015-01-12 14:48:48,805][TRACE][transport.netty          ] [eu5] channel opened: [id: 0xf3a8ce67, /10.81.147.186:49964 => /10.81.147.186:9300]\n[2015-01-12 14:48:48,805][TRACE][transport.netty          ] [eu5] channel opened: [id: 0x88f64117, /10.81.147.186:49965 => /10.81.147.186:9300]\n[2015-01-12 14:48:48,805][TRACE][transport.netty          ] [eu5] channel opened: [id: 0x697aff35, /10.81.147.186:49966 => /10.81.147.186:9300]\n[2015-01-12 14:48:48,806][TRACE][transport.netty          ] [eu5] channel opened: [id: 0x266e584f, /10.81.147.186:49967 => /10.81.147.186:9300]\n[2015-01-12 14:48:48,806][TRACE][transport.netty          ] [eu5] channel opened: [id: 0x0b4719cc, /10.81.147.186:49968 => /10.81.147.186:9300]\n[2015-01-12 14:48:48,806][TRACE][transport.netty          ] [eu5] channel opened: [id: 0x57bd9a5e, /10.81.147.186:49969 => /10.81.147.186:9300]\n[2015-01-12 14:48:48,806][TRACE][transport.netty          ] [eu5] channel opened: [id: 0x8b48948a, /10.81.147.186:49970 => /10.81.147.186:9300]\n[2015-01-12 14:48:48,806][TRACE][transport.netty          ] [eu5] channel opened: [id: 0xe1fc5603, /10.81.147.186:49971 => /10.81.147.186:9300]\n[2015-01-12 14:48:48,807][DEBUG][transport.netty          ] [eu5] connected to node [[eu5][ETd8UQOiRsuhq3L1_4UxHw][eu5.example.com][inet[/10.81.147.186:9300]]]\n[2015-01-12 14:48:48,807][TRACE][transport.netty          ] [eu5] channel opened: [id: 0x4626b582, /10.81.147.186:49972 => /10.81.147.186:9300]\n[2015-01-12 14:48:48,807][TRACE][transport.netty          ] [eu5] channel opened: [id: 0x16034d4d, /10.81.147.186:49973 => /10.81.147.186:9300]\n[2015-01-12 14:48:48,807][TRACE][transport.netty          ] [eu5] channel opened: [id: 0xe9633ad7, /10.81.147.186:49974 => /10.81.147.186:9300]\n[2015-01-12 14:48:48,807][TRACE][discovery.zen.ping.unicast] [eu5] [1] connected to [eu5][ETd8UQOiRsuhq3L1_4UxHw][eu5.example.com][inet[/10.81.147.186:9300]]\n[2015-01-12 14:48:48,807][TRACE][discovery.zen.ping.unicast] [eu5] [1] sending to [eu5][ETd8UQOiRsuhq3L1_4UxHw][eu5.example.com][inet[/10.81.147.186:9300]]\n[2015-01-12 14:48:48,807][TRACE][transport.netty          ] [eu5] channel opened: [id: 0xce27cc8e, /10.81.147.186:49975 => /10.81.147.186:9300]\n[2015-01-12 14:48:48,810][TRACE][indices.breaker          ] [eu5] [REQUEST] Adjusted breaker by [16440] bytes, now [16440]\n[2015-01-12 14:48:48,825][TRACE][indices.breaker          ] [eu5] [REQUEST] Adjusted breaker by [-16440] bytes, now [0]\n[2015-01-12 14:48:48,830][TRACE][indices.breaker          ] [eu5] [REQUEST] Adjusted breaker by [16440] bytes, now [16440]\n[2015-01-12 14:48:48,830][TRACE][indices.breaker          ] [eu5] [REQUEST] Adjusted breaker by [-16440] bytes, now [0]\n[2015-01-12 14:48:48,831][TRACE][discovery.zen.ping.unicast] [eu5] [1] received response from [eu5][ETd8UQOiRsuhq3L1_4UxHw][eu5.example.com][inet[/10.81.147.186:9300]]: [ping_response{node [[eu5][ETd8UQOiRsuhq3L1_4UxHw][eu5.example.com][inet[/10.81.147.186:9300]]], id[1], master [null], hasJoinedOnce [false], cluster_name[security]}, ping_response{node [[eu5][ETd8UQOiRsuhq3L1_4UxHw][eu5.example.com][inet[/10.81.147.186:9300]]], id[2], master [null], hasJoinedOnce [false], cluster_name[security]}]\n[2015-01-12 14:48:50,294][TRACE][discovery.zen.ping.unicast] [eu5] [1] sending to [eu5][ETd8UQOiRsuhq3L1_4UxHw][eu5.example.com][inet[/10.81.147.186:9300]]\n[2015-01-12 14:48:50,295][TRACE][indices.breaker          ] [eu5] [REQUEST] Adjusted breaker by [16440] bytes, now [16440]\n[2015-01-12 14:48:50,296][TRACE][indices.breaker          ] [eu5] [REQUEST] Adjusted breaker by [-16440] bytes, now [0]\n[2015-01-12 14:48:50,297][TRACE][indices.breaker          ] [eu5] [REQUEST] Adjusted breaker by [16440] bytes, now [16440]\n[2015-01-12 14:48:50,298][TRACE][indices.breaker          ] [eu5] [REQUEST] Adjusted breaker by [-16440] bytes, now [0]\n[2015-01-12 14:48:50,299][TRACE][discovery.zen.ping.unicast] [eu5] [1] received response from [eu5][ETd8UQOiRsuhq3L1_4UxHw][eu5.example.com][inet[/10.81.147.186:9300]]: [ping_response{node [[eu5][ETd8UQOiRsuhq3L1_4UxHw][eu5.example.com][inet[/10.81.147.186:9300]]], id[1], master [null], hasJoinedOnce [false], cluster_name[security]}, ping_response{node [[eu5][ETd8UQOiRsuhq3L1_4UxHw][eu5.example.com][inet[/10.81.147.186:9300]]], id[3], master [null], hasJoinedOnce [false], cluster_name[security]}, ping_response{node [[eu5][ETd8UQOiRsuhq3L1_4UxHw][eu5.example.com][inet[/1:\n\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69599686","html_url":"https://github.com/elastic/elasticsearch/issues/9250#issuecomment-69599686","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9250","id":69599686,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NTk5Njg2","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-01-12T16:39:52Z","updated_at":"2015-01-12T16:39:52Z","author_association":"MEMBER","body":"@wsw70 I glanced over it the first time but the settings are wrong - it should be `discovery.zen.ping.unicast.hosts` (missing the extra hosts). I'm closing this now, if this doesn't solve the issue - feel free to re-open!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69600683","html_url":"https://github.com/elastic/elasticsearch/issues/9250#issuecomment-69600683","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9250","id":69600683,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjAwNjgz","user":{"login":"wsw70","id":1345886,"node_id":"MDQ6VXNlcjEzNDU4ODY=","avatar_url":"https://avatars2.githubusercontent.com/u/1345886?v=4","gravatar_id":"","url":"https://api.github.com/users/wsw70","html_url":"https://github.com/wsw70","followers_url":"https://api.github.com/users/wsw70/followers","following_url":"https://api.github.com/users/wsw70/following{/other_user}","gists_url":"https://api.github.com/users/wsw70/gists{/gist_id}","starred_url":"https://api.github.com/users/wsw70/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wsw70/subscriptions","organizations_url":"https://api.github.com/users/wsw70/orgs","repos_url":"https://api.github.com/users/wsw70/repos","events_url":"https://api.github.com/users/wsw70/events{/privacy}","received_events_url":"https://api.github.com/users/wsw70/received_events","type":"User","site_admin":false},"created_at":"2015-01-12T16:44:52Z","updated_at":"2015-01-12T16:44:52Z","author_association":"NONE","body":"ohhhh... yes, you are correct, thank you!\n","performed_via_github_app":null}]