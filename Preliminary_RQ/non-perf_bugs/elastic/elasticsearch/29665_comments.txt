[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/383757919","html_url":"https://github.com/elastic/elasticsearch/issues/29665#issuecomment-383757919","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29665","id":383757919,"node_id":"MDEyOklzc3VlQ29tbWVudDM4Mzc1NzkxOQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-04-23T23:48:50Z","updated_at":"2018-04-23T23:48:50Z","author_association":"MEMBER","body":"Pinging @hub-cap ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/383834662","html_url":"https://github.com/elastic/elasticsearch/issues/29665#issuecomment-383834662","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29665","id":383834662,"node_id":"MDEyOklzc3VlQ29tbWVudDM4MzgzNDY2Mg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-04-24T07:40:00Z","updated_at":"2018-04-24T07:40:00Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/397609689","html_url":"https://github.com/elastic/elasticsearch/issues/29665#issuecomment-397609689","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29665","id":397609689,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NzYwOTY4OQ==","user":{"login":"Crazybus","id":4550136,"node_id":"MDQ6VXNlcjQ1NTAxMzY=","avatar_url":"https://avatars0.githubusercontent.com/u/4550136?v=4","gravatar_id":"","url":"https://api.github.com/users/Crazybus","html_url":"https://github.com/Crazybus","followers_url":"https://api.github.com/users/Crazybus/followers","following_url":"https://api.github.com/users/Crazybus/following{/other_user}","gists_url":"https://api.github.com/users/Crazybus/gists{/gist_id}","starred_url":"https://api.github.com/users/Crazybus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Crazybus/subscriptions","organizations_url":"https://api.github.com/users/Crazybus/orgs","repos_url":"https://api.github.com/users/Crazybus/repos","events_url":"https://api.github.com/users/Crazybus/events{/privacy}","received_events_url":"https://api.github.com/users/Crazybus/received_events","type":"User","site_admin":false},"created_at":"2018-06-15T12:47:22Z","updated_at":"2018-06-15T12:47:22Z","author_association":"MEMBER","body":"I ran into some troubles with this when upgrading the ansible-elasticsearch playbook to 6.3. I suspect others are going to run into the same problems too if they are installing elasticsearch and java at the same time. \r\n\r\nIf you run `apt-get -y install openjdk-8-jre-headless elasticsearch` java will not be available for the post install tasks of elasticsearch causing the installation to fail. If a pre-install task is added to check for java this is still going to fail. \r\n\r\nTo quote #28928\r\n\r\n> This commit removes the ability to specify that a plugin requires the keystore and instead creates the keystore on package installation or when Elasticsearch is started for the first time. \r\n\r\nIf elasticsearch also creates this file on startup is there a specific reason why we also want to create it in the post install script? I imagine that there must be a good reason but it sounds like the simplest option would be to just remove this from the post install task and let elasticsearch handle creating it. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/399691896","html_url":"https://github.com/elastic/elasticsearch/issues/29665#issuecomment-399691896","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29665","id":399691896,"node_id":"MDEyOklzc3VlQ29tbWVudDM5OTY5MTg5Ng==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-06-23T16:41:55Z","updated_at":"2018-06-23T16:41:55Z","author_association":"MEMBER","body":"> If elasticsearch also creates this file on startup is there a specific reason why we also want to create it in the post install script? I imagine that there must be a good reason but it sounds like the simplest option would be to just remove this from the post install task and let elasticsearch handle creating it. \r\n\r\nThis is because when Elasticsearch is run as a service (via Sys V init or `systemd`) we run as the `elasticsearch` user which today does not have permissions to create files in `/etc/elasticsearch`. This is why we do this in post-install when we are running as `root`.","performed_via_github_app":null}]