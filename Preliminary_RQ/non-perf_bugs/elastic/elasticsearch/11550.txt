{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/11550","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11550/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11550/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11550/events","html_url":"https://github.com/elastic/elasticsearch/issues/11550","id":86468710,"node_id":"MDU6SXNzdWU4NjQ2ODcxMA==","number":11550,"title":"Always allocate primaries first during recovery","user":{"login":"markwalkom","id":3184718,"node_id":"MDQ6VXNlcjMxODQ3MTg=","avatar_url":"https://avatars0.githubusercontent.com/u/3184718?v=4","gravatar_id":"","url":"https://api.github.com/users/markwalkom","html_url":"https://github.com/markwalkom","followers_url":"https://api.github.com/users/markwalkom/followers","following_url":"https://api.github.com/users/markwalkom/following{/other_user}","gists_url":"https://api.github.com/users/markwalkom/gists{/gist_id}","starred_url":"https://api.github.com/users/markwalkom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markwalkom/subscriptions","organizations_url":"https://api.github.com/users/markwalkom/orgs","repos_url":"https://api.github.com/users/markwalkom/repos","events_url":"https://api.github.com/users/markwalkom/events{/privacy}","received_events_url":"https://api.github.com/users/markwalkom/received_events","type":"User","site_admin":false},"labels":[{"id":152510590,"node_id":"MDU6TGFiZWwxNTI1MTA1OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Recovery","name":":Distributed/Recovery","color":"0e8a16","default":false,"description":"Anything around constructing a new shard, either from a local or a remote source."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2015-06-09T06:15:50Z","updated_at":"2015-06-09T23:25:13Z","closed_at":"2015-06-09T23:25:12Z","author_association":"MEMBER","active_lock_reason":null,"body":"During recovery users can set `cluster.routing.allocation.enable` to only allow primaries to be allocated (recovered).\n\nCurrently if this is set to `all` we will do any primaries for an index, but in large clusters we have seen instances where instead of recovering the next unallocated primary, we work on the replica of a now allocated primary.\n\nThis obviously delays the progress in getting a cluster back to a green state and we should always be treating primaries as first class at all times. It'd be good if the default behaviour here was to recover all primaries first and then move to replicas as applicable.\n","closed_by":{"login":"markwalkom","id":3184718,"node_id":"MDQ6VXNlcjMxODQ3MTg=","avatar_url":"https://avatars0.githubusercontent.com/u/3184718?v=4","gravatar_id":"","url":"https://api.github.com/users/markwalkom","html_url":"https://github.com/markwalkom","followers_url":"https://api.github.com/users/markwalkom/followers","following_url":"https://api.github.com/users/markwalkom/following{/other_user}","gists_url":"https://api.github.com/users/markwalkom/gists{/gist_id}","starred_url":"https://api.github.com/users/markwalkom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markwalkom/subscriptions","organizations_url":"https://api.github.com/users/markwalkom/orgs","repos_url":"https://api.github.com/users/markwalkom/repos","events_url":"https://api.github.com/users/markwalkom/events{/privacy}","received_events_url":"https://api.github.com/users/markwalkom/received_events","type":"User","site_admin":false},"performed_via_github_app":null}