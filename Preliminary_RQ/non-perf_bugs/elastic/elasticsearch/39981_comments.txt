[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/472239560","html_url":"https://github.com/elastic/elasticsearch/issues/39981#issuecomment-472239560","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39981","id":472239560,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjIzOTU2MA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-03-13T01:04:57Z","updated_at":"2019-03-13T01:04:57Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/472311673","html_url":"https://github.com/elastic/elasticsearch/issues/39981#issuecomment-472311673","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39981","id":472311673,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjMxMTY3Mw==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2019-03-13T07:34:49Z","updated_at":"2019-03-13T07:34:49Z","author_association":"CONTRIBUTOR","body":"> failed to parse date field \r\n\r\nand FIPS 140 JVMs are unfortunately [not](https://github.com/elastic/elasticsearch/issues/31724) a [coincidence](https://github.com/elastic/elasticsearch/issues/33081)\r\n\r\nAs we figured out in https://github.com/elastic/elasticsearch/issues/39855, the `integTestCluster`s started to run with FIPS JVMs recently and this is why this came up only now. I will resolve this in a similar way as in https://github.com/elastic/elasticsearch/pull/39052","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/472311708","html_url":"https://github.com/elastic/elasticsearch/issues/39981#issuecomment-472311708","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39981","id":472311708,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjMxMTcwOA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-03-13T07:35:00Z","updated_at":"2019-03-13T07:35:00Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-security","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/472331609","html_url":"https://github.com/elastic/elasticsearch/issues/39981#issuecomment-472331609","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39981","id":472331609,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjMzMTYwOQ==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2019-03-13T08:47:58Z","updated_at":"2019-03-13T08:47:58Z","author_association":"CONTRIBUTOR","body":"It looks like there might be an issue with the `E, d MMM yyyy HH:mm:ss Z` format and the Java 8, judging from \r\nhttps://github.com/elastic/elasticsearch/blob/daa2ec8a605d385a65b9ab3e89d016b3fd0dffe2/server/src/test/java/org/elasticsearch/index/mapper/DateFieldMapperTests.java#L223:L224 and as such this is not fips specific, but rather java 8 specific. @spinscale can maybe share some insights about `E, d MMM yyyy HH:mm:ss Z` ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/472441254","html_url":"https://github.com/elastic/elasticsearch/issues/39981#issuecomment-472441254","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39981","id":472441254,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjQ0MTI1NA==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2019-03-13T14:19:51Z","updated_at":"2019-03-13T14:19:51Z","author_association":"CONTRIBUTOR","body":"This doesn't seem to be java 8 specific ( at least not entirely ) since it only fails with a java 8 fips runtime : https://build-stats.elastic.co/app/kibana#/discover?_g=(refreshInterval:(pause:!t,value:0),time:(from:now-7d,mode:quick,to:now))&_a=(columns:!(build.url),index:b646ed00-7efc-11e8-bf69-63c8ef516157,interval:auto,query:(language:lucene,query:%22180_locale_dependent_mapping%22),sort:!(process.time-start,desc))\r\n\r\nWe don't have a way to mute yaml tests based on JVM version so I will mute this entirely so the rests of the tests can run in FIPS, until we can figure out what causes the parsing error in FIPS","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/472691075","html_url":"https://github.com/elastic/elasticsearch/issues/39981#issuecomment-472691075","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39981","id":472691075,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjY5MTA3NQ==","user":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"created_at":"2019-03-14T03:30:24Z","updated_at":"2019-03-14T03:30:24Z","author_association":"CONTRIBUTOR","body":"Are your Java 8 FIPS and Java 8 Standard environments on the same JDK update?\r\nI recently had some timezone tests that worked on `jdk1.8.0_201` but fail on `jdk1.8.0_111`","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/472726800","html_url":"https://github.com/elastic/elasticsearch/issues/39981#issuecomment-472726800","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39981","id":472726800,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjcyNjgwMA==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2019-03-14T06:55:50Z","updated_at":"2019-03-14T06:55:50Z","author_association":"CONTRIBUTOR","body":"Good point @tvernum . My standard is 1.8.0_191 while I had based FIPS on 1.8.0_171. But I guess in CI both are built by the same 8 version so these tests would be failing on java8 also.. I'll update my local one and investigate further nevertheless","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/474983065","html_url":"https://github.com/elastic/elasticsearch/issues/39981#issuecomment-474983065","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39981","id":474983065,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDk4MzA2NQ==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2019-03-20T18:56:35Z","updated_at":"2019-03-20T18:56:35Z","author_association":"CONTRIBUTOR","body":"This still fails with a FIPS enabled JVM based on jdk1.8.0_201. Investigation ongoing","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/537391922","html_url":"https://github.com/elastic/elasticsearch/issues/39981#issuecomment-537391922","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39981","id":537391922,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNzM5MTkyMg==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2019-10-02T08:28:46Z","updated_at":"2019-10-02T08:28:46Z","author_association":"CONTRIBUTOR","body":"That was a fun one to troublehoot (#not). The problem was a permissions one as the Java Security Policy we use in FIPS 140 doesn't grant `\"accessClassInPackage.sun.util.resources\"` Runtime Permission. That in turn meant that `java.utils.ResourceBundle#loadBundle` could not load the resource with the locale specific names for the days of the week as `java.utils.ResourceBundle#newBundle` threw an `AcccessControlException` when attempting to load the resource. \r\nThis meant that `sun.util.locale.provider.LocaleResources#getJavaTimeFormatData` would _always_ return a `ResourceBundle` for `Locale.ROOT` and this is what caused the errors in the tests here as we expect to match days of weeks names in different locales. I raised https://github.com/elastic/infra/pull/14995 to update the java.policy file and will unmute the test and close this issue once the PR is merged","performed_via_github_app":null}]