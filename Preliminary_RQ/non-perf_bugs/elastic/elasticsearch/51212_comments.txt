[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/576177607","html_url":"https://github.com/elastic/elasticsearch/issues/51212#issuecomment-576177607","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51212","id":576177607,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NjE3NzYwNw==","user":{"login":"Jens-H-Eriksen","id":26311915,"node_id":"MDQ6VXNlcjI2MzExOTE1","avatar_url":"https://avatars0.githubusercontent.com/u/26311915?v=4","gravatar_id":"","url":"https://api.github.com/users/Jens-H-Eriksen","html_url":"https://github.com/Jens-H-Eriksen","followers_url":"https://api.github.com/users/Jens-H-Eriksen/followers","following_url":"https://api.github.com/users/Jens-H-Eriksen/following{/other_user}","gists_url":"https://api.github.com/users/Jens-H-Eriksen/gists{/gist_id}","starred_url":"https://api.github.com/users/Jens-H-Eriksen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jens-H-Eriksen/subscriptions","organizations_url":"https://api.github.com/users/Jens-H-Eriksen/orgs","repos_url":"https://api.github.com/users/Jens-H-Eriksen/repos","events_url":"https://api.github.com/users/Jens-H-Eriksen/events{/privacy}","received_events_url":"https://api.github.com/users/Jens-H-Eriksen/received_events","type":"User","site_admin":false},"created_at":"2020-01-20T09:09:54Z","updated_at":"2020-01-20T09:09:54Z","author_association":"NONE","body":"Just found out that the year part in the pipeline is casesensetive ?.... so changing from _YYYY_ to _yyyy_ makes the pipeline work as expected. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/576182033","html_url":"https://github.com/elastic/elasticsearch/issues/51212#issuecomment-576182033","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51212","id":576182033,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NjE4MjAzMw==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2020-01-20T09:21:01Z","updated_at":"2020-01-20T09:21:01Z","author_association":"MEMBER","body":"Yeah. Year should be `yyyy`. Have a look at https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-date-format.html#strict-date-time","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/576187402","html_url":"https://github.com/elastic/elasticsearch/issues/51212#issuecomment-576187402","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51212","id":576187402,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NjE4NzQwMg==","user":{"login":"Jens-H-Eriksen","id":26311915,"node_id":"MDQ6VXNlcjI2MzExOTE1","avatar_url":"https://avatars0.githubusercontent.com/u/26311915?v=4","gravatar_id":"","url":"https://api.github.com/users/Jens-H-Eriksen","html_url":"https://github.com/Jens-H-Eriksen","followers_url":"https://api.github.com/users/Jens-H-Eriksen/followers","following_url":"https://api.github.com/users/Jens-H-Eriksen/following{/other_user}","gists_url":"https://api.github.com/users/Jens-H-Eriksen/gists{/gist_id}","starred_url":"https://api.github.com/users/Jens-H-Eriksen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jens-H-Eriksen/subscriptions","organizations_url":"https://api.github.com/users/Jens-H-Eriksen/orgs","repos_url":"https://api.github.com/users/Jens-H-Eriksen/repos","events_url":"https://api.github.com/users/Jens-H-Eriksen/events{/privacy}","received_events_url":"https://api.github.com/users/Jens-H-Eriksen/received_events","type":"User","site_admin":false},"created_at":"2020-01-20T09:34:01Z","updated_at":"2020-01-20T09:34:01Z","author_association":"NONE","body":"And this is fair... but it should then fail if you use capital letters, not just parse it as the actual year. Otherwise it will lead to wrong data.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/576423502","html_url":"https://github.com/elastic/elasticsearch/issues/51212#issuecomment-576423502","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51212","id":576423502,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NjQyMzUwMg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2020-01-20T20:38:31Z","updated_at":"2020-01-20T20:38:31Z","author_association":"MEMBER","body":"`YYYY` means something too (week-based year), just not what you thought it meant. The distinction has [caused some infamous trouble in the past](https://www.firstpost.com/tech/news-analysis/twitter-suffers-massive-outage-on-all-online-platforms-back-now-3660631.html).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/576423679","html_url":"https://github.com/elastic/elasticsearch/issues/51212#issuecomment-576423679","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51212","id":576423679,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NjQyMzY3OQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2020-01-20T20:39:12Z","updated_at":"2020-01-20T20:39:12Z","author_association":"MEMBER","body":"I don't think there are any changes to make here, so I am closing this issue. Please feel free to comment if you think that I have closed this in error, closing is by no means final.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/576557384","html_url":"https://github.com/elastic/elasticsearch/issues/51212#issuecomment-576557384","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51212","id":576557384,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NjU1NzM4NA==","user":{"login":"Jens-H-Eriksen","id":26311915,"node_id":"MDQ6VXNlcjI2MzExOTE1","avatar_url":"https://avatars0.githubusercontent.com/u/26311915?v=4","gravatar_id":"","url":"https://api.github.com/users/Jens-H-Eriksen","html_url":"https://github.com/Jens-H-Eriksen","followers_url":"https://api.github.com/users/Jens-H-Eriksen/followers","following_url":"https://api.github.com/users/Jens-H-Eriksen/following{/other_user}","gists_url":"https://api.github.com/users/Jens-H-Eriksen/gists{/gist_id}","starred_url":"https://api.github.com/users/Jens-H-Eriksen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jens-H-Eriksen/subscriptions","organizations_url":"https://api.github.com/users/Jens-H-Eriksen/orgs","repos_url":"https://api.github.com/users/Jens-H-Eriksen/repos","events_url":"https://api.github.com/users/Jens-H-Eriksen/events{/privacy}","received_events_url":"https://api.github.com/users/Jens-H-Eriksen/received_events","type":"User","site_admin":false},"created_at":"2020-01-21T07:43:12Z","updated_at":"2020-01-21T07:43:12Z","author_association":"NONE","body":"@jasontedor  I surely think this is an issue that should be adressed. Even though YYYY means week-based year, it should _not_ change the year to the actual year, thus changing the date completly.\r\n\r\nIn my example the date **2018**-01-18 is changed to **2020**-01-18.  \r\nThis can not just happen becourse of the conversion to week-based year. I've tested with different dates (1912, 2017 ect.) and they are all changed to the actual year (=2020) \r\nPlease give this another roll.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/576645346","html_url":"https://github.com/elastic/elasticsearch/issues/51212#issuecomment-576645346","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51212","id":576645346,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NjY0NTM0Ng==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2020-01-21T11:44:11Z","updated_at":"2020-01-21T11:44:11Z","author_association":"MEMBER","body":"@pgomulka Can you investigate exactly what is happening here?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/576652399","html_url":"https://github.com/elastic/elasticsearch/issues/51212#issuecomment-576652399","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51212","id":576652399,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NjY1MjM5OQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-01-21T12:06:11Z","updated_at":"2020-01-21T12:06:11Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra (:Core/Infra/Core)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/576669051","html_url":"https://github.com/elastic/elasticsearch/issues/51212#issuecomment-576669051","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51212","id":576669051,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NjY2OTA1MQ==","user":{"login":"pgomulka","id":11137008,"node_id":"MDQ6VXNlcjExMTM3MDA4","avatar_url":"https://avatars0.githubusercontent.com/u/11137008?v=4","gravatar_id":"","url":"https://api.github.com/users/pgomulka","html_url":"https://github.com/pgomulka","followers_url":"https://api.github.com/users/pgomulka/followers","following_url":"https://api.github.com/users/pgomulka/following{/other_user}","gists_url":"https://api.github.com/users/pgomulka/gists{/gist_id}","starred_url":"https://api.github.com/users/pgomulka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgomulka/subscriptions","organizations_url":"https://api.github.com/users/pgomulka/orgs","repos_url":"https://api.github.com/users/pgomulka/repos","events_url":"https://api.github.com/users/pgomulka/events{/privacy}","received_events_url":"https://api.github.com/users/pgomulka/received_events","type":"User","site_admin":false},"created_at":"2020-01-21T12:57:04Z","updated_at":"2020-01-21T13:06:03Z","author_association":"CONTRIBUTOR","body":"@Jens-H-Eriksen from java.time point of view, Year and Week-Based-Year are two separate date fields. \r\nThe Ingest logic is relying on the presence of Year field, and since when parsing `2018-01-18` with `YYYY-MM-dd` returns a date with fields WeekBasedYear, Month and Day it cannot find the Year field and it then tries to default to the current year.\r\nThis is needed as some logs (sys logs) are missing the Year part and the intention is to default to current year.\r\nSee the code here https://github.com/elastic/elasticsearch/blob/7.4/modules/ingest-common/src/main/java/org/elasticsearch/ingest/common/DateFormat.java#L101\r\n\r\nAlso see the definition of week based year field https://docs.oracle.com/javase/8/docs/api/java/time/temporal/WeekFields.html#weekBasedYear--\r\n\r\nI would recommend changing your pattern to `uuuu-MM-dd` where `u` stands for year and is what you need. `y` is for year of era and you don't specify an era in your dates. \r\nWe enabled Strict mode in 7.5, but we won't reject patterns with `yyyy` without and Era. I expect this would be a major inconvenience for users, so we relaxed this for this specific usecase. \r\nUsing `uuuu` is correct as per https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html and I would recommend it.\r\nrelates https://github.com/elastic/elasticsearch/issues/41797","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/576671819","html_url":"https://github.com/elastic/elasticsearch/issues/51212#issuecomment-576671819","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51212","id":576671819,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NjY3MTgxOQ==","user":{"login":"pgomulka","id":11137008,"node_id":"MDQ6VXNlcjExMTM3MDA4","avatar_url":"https://avatars0.githubusercontent.com/u/11137008?v=4","gravatar_id":"","url":"https://api.github.com/users/pgomulka","html_url":"https://github.com/pgomulka","followers_url":"https://api.github.com/users/pgomulka/followers","following_url":"https://api.github.com/users/pgomulka/following{/other_user}","gists_url":"https://api.github.com/users/pgomulka/gists{/gist_id}","starred_url":"https://api.github.com/users/pgomulka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgomulka/subscriptions","organizations_url":"https://api.github.com/users/pgomulka/orgs","repos_url":"https://api.github.com/users/pgomulka/repos","events_url":"https://api.github.com/users/pgomulka/events{/privacy}","received_events_url":"https://api.github.com/users/pgomulka/received_events","type":"User","site_admin":false},"created_at":"2020-01-21T13:05:11Z","updated_at":"2020-01-21T13:05:11Z","author_association":"CONTRIBUTOR","body":"another question is what if a user is intentionally sending dates with week based year and the pattern is allowing us to recalculate a Year part.\r\nfor instance `STRICT_BASIC_WEEK_DATE` -> `YYYY'W'wwe`. Should be enough to recalculate the Year basing on WeekBasedYear.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/621078085","html_url":"https://github.com/elastic/elasticsearch/issues/51212#issuecomment-621078085","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51212","id":621078085,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMTA3ODA4NQ==","user":{"login":"pgomulka","id":11137008,"node_id":"MDQ6VXNlcjExMTM3MDA4","avatar_url":"https://avatars0.githubusercontent.com/u/11137008?v=4","gravatar_id":"","url":"https://api.github.com/users/pgomulka","html_url":"https://github.com/pgomulka","followers_url":"https://api.github.com/users/pgomulka/followers","following_url":"https://api.github.com/users/pgomulka/following{/other_user}","gists_url":"https://api.github.com/users/pgomulka/gists{/gist_id}","starred_url":"https://api.github.com/users/pgomulka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgomulka/subscriptions","organizations_url":"https://api.github.com/users/pgomulka/orgs","repos_url":"https://api.github.com/users/pgomulka/repos","events_url":"https://api.github.com/users/pgomulka/events{/privacy}","received_events_url":"https://api.github.com/users/pgomulka/received_events","type":"User","site_admin":false},"created_at":"2020-04-29T09:01:45Z","updated_at":"2020-04-29T09:01:45Z","author_association":"CONTRIBUTOR","body":"closed as per lack of feedback","performed_via_github_app":null}]