[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/275663776","html_url":"https://github.com/elastic/elasticsearch/issues/22829#issuecomment-275663776","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22829","id":275663776,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTY2Mzc3Ng==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2017-01-27T13:21:52Z","updated_at":"2017-01-27T13:21:52Z","author_association":"CONTRIBUTOR","body":"I think we should make version immutable for `_update` because I think messing with the version doesn't make much sense relative to itself. Because there is only one index you are dealing with.\r\n\r\nFor reindex this is by design. At the time I could think of several use cases. All of them only made sense when `dest`'s `version_type` is `external`. Say you are building an index that drops a bunch of fields from the source index. You'd do that by running reindex from the source index into the destination. You'd use `\"version_type\" : \"external\"` so you can rerun this process and only change documents that have changed in the source index. This doesn't pick up deletes, but it is still useful. Anyway, if you now want to change the script and rebuild the target index then rerunning the reindex won't work because none of the versions bumped. You can make it work by bumping the version in the script. Maybe we shouldn't support that use case but that is the design.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/275669956","html_url":"https://github.com/elastic/elasticsearch/issues/22829#issuecomment-275669956","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22829","id":275669956,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTY2OTk1Ng==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2017-01-27T13:54:24Z","updated_at":"2017-01-27T13:54:24Z","author_association":"MEMBER","body":"> Anyway, if you now want to change the script and rebuild the target index then rerunning the reindex won't work because none of the versions bumped.\r\n\r\nOn the other side, if I understand you correctly. You can only do it once. So if you want to do again you can't. IMO reindexing from the source index to remove a field when the target index was already built before should be done by dropping the target index and building it from scratch. Mucking with versioning leads to complex setups where people need to remember what the current version delta is between source and target. Sounds like a too big of a headache.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/278382004","html_url":"https://github.com/elastic/elasticsearch/issues/22829#issuecomment-278382004","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22829","id":278382004,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODM4MjAwNA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2017-02-08T16:37:57Z","updated_at":"2017-02-08T16:37:57Z","author_association":"CONTRIBUTOR","body":"> Mucking with versioning leads to complex setups where people need to remember what the current version delta is between source and target.\r\n\r\nI agree with this part, at least. Bumping the version becomes quite complex quite quickly.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/372788801","html_url":"https://github.com/elastic/elasticsearch/issues/22829#issuecomment-372788801","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22829","id":372788801,"node_id":"MDEyOklzc3VlQ29tbWVudDM3Mjc4ODgwMQ==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2018-03-13T19:25:56Z","updated_at":"2018-03-13T19:25:56Z","author_association":"CONTRIBUTOR","body":"This is tricky because it requires specialization of a value within a Map.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/372816207","html_url":"https://github.com/elastic/elasticsearch/issues/22829#issuecomment-372816207","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22829","id":372816207,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MjgxNjIwNw==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2018-03-13T20:58:53Z","updated_at":"2018-03-13T20:58:53Z","author_association":"MEMBER","body":"We can potentially enforce it by checking that the vesion is the same after\nthe update script was executed\n\nOn Tue, Mar 13, 2018 at 8:26 PM Jack Conradson <notifications@github.com>\nwrote:\n\n> This is tricky because it requires specialization of a value within a Map.\n>\n> â€”\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/elastic/elasticsearch/issues/22829#issuecomment-372788801>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AA9bJ6Xs597qf-3zhfZfz37vfo3-p6CKks5teB1OgaJpZM4LvnAf>\n> .\n>\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/374931146","html_url":"https://github.com/elastic/elasticsearch/issues/22829#issuecomment-374931146","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22829","id":374931146,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NDkzMTE0Ng==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-03-21T13:11:37Z","updated_at":"2018-03-21T13:11:37Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/376926854","html_url":"https://github.com/elastic/elasticsearch/issues/22829#issuecomment-376926854","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22829","id":376926854,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NjkyNjg1NA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2018-03-28T15:23:47Z","updated_at":"2018-03-28T15:23:47Z","author_association":"MEMBER","body":"I think we shouldn't try to do this within `ctx`. Instead, scripts that use `ctx` should be converted to using script contexts. This would allow version to be read only (passed in or via a getter on the context, but no setter available).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/417455791","html_url":"https://github.com/elastic/elasticsearch/issues/22829#issuecomment-417455791","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22829","id":417455791,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNzQ1NTc5MQ==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2018-08-30T20:26:09Z","updated_at":"2018-08-30T20:26:09Z","author_association":"CONTRIBUTOR","body":"This is something that we will do.  We are still coming up with the best way to implement this.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/487227617","html_url":"https://github.com/elastic/elasticsearch/issues/22829#issuecomment-487227617","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22829","id":487227617,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzIyNzYxNw==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2019-04-26T23:06:59Z","updated_at":"2019-04-26T23:06:59Z","author_association":"MEMBER","body":"Closing in favor of https://github.com/elastic/elasticsearch/issues/41618","performed_via_github_app":null}]