[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/468184127","html_url":"https://github.com/elastic/elasticsearch/issues/39497#issuecomment-468184127","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39497","id":468184127,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODE4NDEyNw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-02-28T08:33:40Z","updated_at":"2019-02-28T08:33:40Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-analytics-geo","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/468394062","html_url":"https://github.com/elastic/elasticsearch/issues/39497#issuecomment-468394062","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39497","id":468394062,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODM5NDA2Mg==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2019-02-28T18:58:20Z","updated_at":"2019-02-28T18:58:20Z","author_association":"MEMBER","body":"Also fails for \r\n\r\n```\r\n./gradlew :server:unitTest -Dtests.seed=7DBCFCFC5EFB7BF8 -Dtests.class=org.elasticsearch.search.aggregations.bucket.histogram.InternalAutoDateHistogramTests -Dtests.method=\"testReduceRandom\" -Dtests.security.manager=true -Dtests.locale=fil-PH -Dtests.timezone=Asia/Krasnoyarsk -Dcompiler.java=11 -Druntime.java=11\r\n```\r\n\r\n```\r\n➜  elasticsearch git:(master) ./gradlew :server:unitTest -Dtests.seed=7DBCFCFC5EFB7BF8 -Dtests.class=org.elasticsearch.search.aggregations.bucket.histogram.InternalAutoDateHistogramTests -Dtests.method=\"testReduceRandom\" -Dtests.security.manager=true -Dtests.locale=fil-PH -Dtests.timezone=Asia/Krasnoyarsk -Dcompiler.java=11 -Druntime.java=11\r\n\r\n> Configure project :benchmarks\r\n=======================================\r\nElasticsearch Build Hamster says Hello!\r\n  Gradle Version        : 5.2.1\r\n  OS Info               : Linux 4.18.0-15-generic (amd64)\r\n  JDK Version           : 11 (Oracle Corporation 11.0.1 [OpenJDK 64-Bit Server VM 11.0.1+13-Ubuntu-3ubuntu3.18.10.1])\r\n  JAVA_HOME             : /usr/lib/jvm/java-11-openjdk-amd64\r\n  Random Testing Seed   : 7DBCFCFC5EFB7BF8\r\n=======================================\r\nSuite: org.elasticsearch.search.aggregations.bucket.histogram.InternalAutoDateHistogramTests\r\n  1> [2019-03-01T01:57:18,664][INFO ][o.e.s.a.b.h.InternalAutoDateHistogramTests] [testReduceRandom] before test\r\n  1> [2019-03-01T01:57:18,762][INFO ][o.e.s.a.b.h.InternalAutoDateHistogramTests] [testReduceRandom] after test\r\n  2> REPRODUCE WITH: ./gradlew :server:unitTest -Dtests.seed=7DBCFCFC5EFB7BF8 -Dtests.class=org.elasticsearch.search.aggregations.bucket.histogram.InternalAutoDateHistogramTests -Dtests.method=\"testReduceRandom\" -Dtests.security.manager=true -Dtests.locale=fil-PH -Dtests.timezone=Asia/Krasnoyarsk -Dcompiler.java=11 -Druntime.java=11\r\nFAILURE 0.41s | InternalAutoDateHistogramTests.testReduceRandom <<< FAILURES!\r\n   > Throwable #1: java.lang.AssertionError: expected:<{1548979200000=989}> but was:<{1548979200000=928, 1551398400000=61}>\r\n   >    at __randomizedtesting.SeedInfo.seed([7DBCFCFC5EFB7BF8:BD8150ED78A6E2AE]:0)\r\n   >    at org.elasticsearch.search.aggregations.bucket.histogram.InternalAutoDateHistogramTests.assertReduced(InternalAutoDateHistogramTests.java:200)\r\n   >    at org.elasticsearch.search.aggregations.bucket.histogram.InternalAutoDateHistogramTests.assertReduced(InternalAutoDateHistogramTests.java:50)\r\n   >    at org.elasticsearch.test.InternalAggregationTestCase.testReduceRandom(InternalAggregationTestCase.java:294)\r\n   >    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n   >    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n   >    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n   >    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n   >    at java.base/java.lang.Thread.run(Thread.java:834)\r\n  2> NOTE: leaving temporary files on disk at: /home/brownbear/src/elasticsearch/server/build/testrun/unitTest/J0/temp/org.elasticsearch.search.aggregations.bucket.histogram.InternalAutoDateHistogramTests_7DBCFCFC5EFB7BF8-001\r\n  2> NOTE: test params are: codec=Asserting(Lucene80): {}, docValues:{}, maxPointsInLeafNode=1350, maxMBSortInHeap=7.054482784277555, sim=Asserting(org.apache.lucene.search.similarities.AssertingSimilarity@73807316), locale=fil-PH, timezone=Asia/Krasnoyarsk\r\n  2> NOTE: Linux 4.18.0-15-generic amd64/Oracle Corporation 11.0.1 (64-bit)/cpus=16,threads=1,free=502433536,total=536870912\r\n  2> NOTE: All tests run in this JVM: [InternalAutoDateHistogramTests]\r\nCompleted [1/1] in 1.18s, 1 test, 1 failure <<< FAILURES!\r\n\r\n\r\n> Task :server:unitTest FAILED\r\n   [junit4] <JUnit4> says g'day! Master seed: 7DBCFCFC5EFB7BF8\r\n==> Test Info: seed=7DBCFCFC5EFB7BF8; jvm=1; suite=1\r\nTests with failures:\r\n  - org.elasticsearch.search.aggregations.bucket.histogram.InternalAutoDateHistogramTests.testReduceRandom\r\n\r\n   [junit4] JVM J0:     0.26 ..     1.76 =     1.51s\r\n   [junit4] Execution time total: 1.77 sec.\r\n   [junit4] Tests summary: 1 suite, 1 test, 1 failure\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task ':server:unitTest'.\r\n> There were test failures: 1 suite, 1 test, 1 failure [seed: 7DBCFCFC5EFB7BF8]\r\n\r\n```\r\n➜  elasticsearch git:(master) ./gradlew :server:unitTest -Dtests.seed=7DBCFCFC5EFB7BF8 -Dtests.class=org.elasticsearch.search.aggregations.bucket.histogram.InternalAutoDateHistogramTests -Dtests.method=\"testReduceRandom\" -Dtests.security.manager=true -Dtests.locale=fil-PH -Dtests.timezone=Asia/Krasnoyarsk -Dcompiler.java=11 -Druntime.java=11\r\n\r\n> Configure project :benchmarks\r\n=======================================\r\nElasticsearch Build Hamster says Hello!\r\n  Gradle Version        : 5.2.1\r\n  OS Info               : Linux 4.18.0-15-generic (amd64)\r\n  JDK Version           : 11 (Oracle Corporation 11.0.1 [OpenJDK 64-Bit Server VM 11.0.1+13-Ubuntu-3ubuntu3.18.10.1])\r\n  JAVA_HOME             : /usr/lib/jvm/java-11-openjdk-amd64\r\n  Random Testing Seed   : 7DBCFCFC5EFB7BF8\r\n=======================================\r\nSuite: org.elasticsearch.search.aggregations.bucket.histogram.InternalAutoDateHistogramTests\r\n  1> [2019-03-01T01:57:18,664][INFO ][o.e.s.a.b.h.InternalAutoDateHistogramTests] [testReduceRandom] before test\r\n  1> [2019-03-01T01:57:18,762][INFO ][o.e.s.a.b.h.InternalAutoDateHistogramTests] [testReduceRandom] after test\r\n  2> REPRODUCE WITH: ./gradlew :server:unitTest -Dtests.seed=7DBCFCFC5EFB7BF8 -Dtests.class=org.elasticsearch.search.aggregations.bucket.histogram.InternalAutoDateHistogramTests -Dtests.method=\"testReduceRandom\" -Dtests.security.manager=true -Dtests.locale=fil-PH -Dtests.timezone=Asia/Krasnoyarsk -Dcompiler.java=11 -Druntime.java=11\r\nFAILURE 0.41s | InternalAutoDateHistogramTests.testReduceRandom <<< FAILURES!\r\n   > Throwable #1: java.lang.AssertionError: expected:<{1548979200000=989}> but was:<{1548979200000=928, 1551398400000=61}>\r\n   >    at __randomizedtesting.SeedInfo.seed([7DBCFCFC5EFB7BF8:BD8150ED78A6E2AE]:0)\r\n   >    at org.elasticsearch.search.aggregations.bucket.histogram.InternalAutoDateHistogramTests.assertReduced(InternalAutoDateHistogramTests.java:200)\r\n   >    at org.elasticsearch.search.aggregations.bucket.histogram.InternalAutoDateHistogramTests.assertReduced(InternalAutoDateHistogramTests.java:50)\r\n   >    at org.elasticsearch.test.InternalAggregationTestCase.testReduceRandom(InternalAggregationTestCase.java:294)\r\n   >    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n   >    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n   >    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n   >    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n   >    at java.base/java.lang.Thread.run(Thread.java:834)\r\n  2> NOTE: leaving temporary files on disk at: /home/brownbear/src/elasticsearch/server/build/testrun/unitTest/J0/temp/org.elasticsearch.search.aggregations.bucket.histogram.InternalAutoDateHistogramTests_7DBCFCFC5EFB7BF8-001\r\n  2> NOTE: test params are: codec=Asserting(Lucene80): {}, docValues:{}, maxPointsInLeafNode=1350, maxMBSortInHeap=7.054482784277555, sim=Asserting(org.apache.lucene.search.similarities.AssertingSimilarity@73807316), locale=fil-PH, timezone=Asia/Krasnoyarsk\r\n  2> NOTE: Linux 4.18.0-15-generic amd64/Oracle Corporation 11.0.1 (64-bit)/cpus=16,threads=1,free=502433536,total=536870912\r\n  2> NOTE: All tests run in this JVM: [InternalAutoDateHistogramTests]\r\nCompleted [1/1] in 1.18s, 1 test, 1 failure <<< FAILURES!\r\n\r\n\r\n> Task :server:unitTest FAILED\r\n   [junit4] <JUnit4> says g'day! Master seed: 7DBCFCFC5EFB7BF8\r\n==> Test Info: seed=7DBCFCFC5EFB7BF8; jvm=1; suite=1\r\nTests with failures:\r\n  - org.elasticsearch.search.aggregations.bucket.histogram.InternalAutoDateHistogramTests.testReduceRandom\r\n\r\n   [junit4] JVM J0:     0.26 ..     1.76 =     1.51s\r\n   [junit4] Execution time total: 1.77 sec.\r\n   [junit4] Tests summary: 1 suite, 1 test, 1 failure\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task ':server:unitTest'.\r\n> There were test failures: 1 suite, 1 test, 1 failure [seed: 7DBCFCFC5EFB7BF8]\r\n\r\n```\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/468415484","html_url":"https://github.com/elastic/elasticsearch/issues/39497#issuecomment-468415484","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39497","id":468415484,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODQxNTQ4NA==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2019-02-28T19:57:45Z","updated_at":"2019-02-28T19:57:45Z","author_association":"CONTRIBUTOR","body":"This failed in a PR too https://github.com/elastic/elasticsearch/pull/38382. This should be muted ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/468435895","html_url":"https://github.com/elastic/elasticsearch/issues/39497#issuecomment-468435895","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39497","id":468435895,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODQzNTg5NQ==","user":{"login":"not-napoleon","id":979663,"node_id":"MDQ6VXNlcjk3OTY2Mw==","avatar_url":"https://avatars0.githubusercontent.com/u/979663?v=4","gravatar_id":"","url":"https://api.github.com/users/not-napoleon","html_url":"https://github.com/not-napoleon","followers_url":"https://api.github.com/users/not-napoleon/followers","following_url":"https://api.github.com/users/not-napoleon/following{/other_user}","gists_url":"https://api.github.com/users/not-napoleon/gists{/gist_id}","starred_url":"https://api.github.com/users/not-napoleon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/not-napoleon/subscriptions","organizations_url":"https://api.github.com/users/not-napoleon/orgs","repos_url":"https://api.github.com/users/not-napoleon/repos","events_url":"https://api.github.com/users/not-napoleon/events{/privacy}","received_events_url":"https://api.github.com/users/not-napoleon/received_events","type":"User","site_admin":false},"created_at":"2019-02-28T20:58:59Z","updated_at":"2019-02-28T20:58:59Z","author_association":"CONTRIBUTOR","body":"Found a case of this failing in `7.x` as well: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.x+intake/360/\r\n\r\n```\r\nREPRODUCE WITH: ./gradlew :server:unitTest \\\r\n  -Dtests.seed=79976EC1854DEAAF \\\r\n  -Dtests.class=org.elasticsearch.search.aggregations.bucket.histogram.InternalAutoDateHistogramTests \\\r\n  -Dtests.method=\"testReduceRandom\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=th \\\r\n  -Dtests.timezone=America/Winnipeg \\\r\n  -Dcompiler.java=11 \\\r\n  -Druntime.java=8\r\n```\r\n I'm going to backport the mute to the `7.x` branch as well, and add the tag to this ticket.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/469310810","html_url":"https://github.com/elastic/elasticsearch/issues/39497#issuecomment-469310810","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39497","id":469310810,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTMxMDgxMA==","user":{"login":"pcsanwald","id":163306,"node_id":"MDQ6VXNlcjE2MzMwNg==","avatar_url":"https://avatars1.githubusercontent.com/u/163306?v=4","gravatar_id":"","url":"https://api.github.com/users/pcsanwald","html_url":"https://github.com/pcsanwald","followers_url":"https://api.github.com/users/pcsanwald/followers","following_url":"https://api.github.com/users/pcsanwald/following{/other_user}","gists_url":"https://api.github.com/users/pcsanwald/gists{/gist_id}","starred_url":"https://api.github.com/users/pcsanwald/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pcsanwald/subscriptions","organizations_url":"https://api.github.com/users/pcsanwald/orgs","repos_url":"https://api.github.com/users/pcsanwald/repos","events_url":"https://api.github.com/users/pcsanwald/events{/privacy}","received_events_url":"https://api.github.com/users/pcsanwald/received_events","type":"User","site_admin":false},"created_at":"2019-03-04T16:10:44Z","updated_at":"2019-03-04T16:10:44Z","author_association":"CONTRIBUTOR","body":"Thanks for the mute, I'll take a look at this one.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/504391985","html_url":"https://github.com/elastic/elasticsearch/issues/39497#issuecomment-504391985","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39497","id":504391985,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNDM5MTk4NQ==","user":{"login":"pcsanwald","id":163306,"node_id":"MDQ6VXNlcjE2MzMwNg==","avatar_url":"https://avatars1.githubusercontent.com/u/163306?v=4","gravatar_id":"","url":"https://api.github.com/users/pcsanwald","html_url":"https://github.com/pcsanwald","followers_url":"https://api.github.com/users/pcsanwald/followers","following_url":"https://api.github.com/users/pcsanwald/following{/other_user}","gists_url":"https://api.github.com/users/pcsanwald/gists{/gist_id}","starred_url":"https://api.github.com/users/pcsanwald/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pcsanwald/subscriptions","organizations_url":"https://api.github.com/users/pcsanwald/orgs","repos_url":"https://api.github.com/users/pcsanwald/repos","events_url":"https://api.github.com/users/pcsanwald/events{/privacy}","received_events_url":"https://api.github.com/users/pcsanwald/received_events","type":"User","site_admin":false},"created_at":"2019-06-21T11:25:48Z","updated_at":"2019-06-21T11:25:48Z","author_association":"CONTRIBUTOR","body":"@polyfractal I've just been in this code, I'll have a look at this one","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/505195539","html_url":"https://github.com/elastic/elasticsearch/issues/39497#issuecomment-505195539","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39497","id":505195539,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNTE5NTUzOQ==","user":{"login":"pcsanwald","id":163306,"node_id":"MDQ6VXNlcjE2MzMwNg==","avatar_url":"https://avatars1.githubusercontent.com/u/163306?v=4","gravatar_id":"","url":"https://api.github.com/users/pcsanwald","html_url":"https://github.com/pcsanwald","followers_url":"https://api.github.com/users/pcsanwald/followers","following_url":"https://api.github.com/users/pcsanwald/following{/other_user}","gists_url":"https://api.github.com/users/pcsanwald/gists{/gist_id}","starred_url":"https://api.github.com/users/pcsanwald/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pcsanwald/subscriptions","organizations_url":"https://api.github.com/users/pcsanwald/orgs","repos_url":"https://api.github.com/users/pcsanwald/repos","events_url":"https://api.github.com/users/pcsanwald/events{/privacy}","received_events_url":"https://api.github.com/users/pcsanwald/received_events","type":"User","site_admin":false},"created_at":"2019-06-24T21:51:12Z","updated_at":"2019-06-24T21:51:12Z","author_association":"CONTRIBUTOR","body":"I've been attempting to repro this issue locally with no luck, by un-muting `testReduceRandom` and using essentially a nested loop of test iterations via a bash while loop and `-Dtests.iters`, a trick I learned from @DaveCTurner :\r\n\r\n`date | tee pass-times.log; while ./gradlew :server:test -Dtests.seed=7DBCFCFC5EFB7BF8 -Dtests.class=org.elasticsearch.search.aggregations.bucket.histogram.InternalAutoDateHistogramTests -Dtests.method=\"testReduceRandom\" -Dtests.security.manager=true -Dtests.locale=fil-PH -Dtests.timezone=Asia/Krasnoyarsk -Dtests.iters=1000 2>&1 >> testoutput.log; do date | tee -a pass-times.log; done`\r\n\r\n`date | tee pass-times.log; while ./gradlew :server:test -Dtests.seed=24D81295C2796C6C -Dtests.class=org.elasticsearch.search.aggregations.bucket.histogram.InternalAutoDateHistogramTests -Dtests.method=\"testReduceRandom\" -Dtests.security.manager=true -Dtests.locale=el-CY -Dtests.timezone=Europe/Nicosia -Dtests.iters=1000 2>&1 >> testoutput.log; do date | tee -a pass-times.log; done`\r\n\r\nNeither of these cases, reported by @hendrikmuhs and @original-brownbear, repro for me after letting the above run for a long time.\r\n\r\nSo, given that brute force reproducing has not worked, we must fall back to... logic and reasoning. \r\n\r\nBoth these failures are in this kinda scenario: `expected:<{1548979200000=989}> but was:<{1548979200000=928, 1551398400000=61}` where we are expecting a single bucket, but, there are in fact multiple buckets. In the past, this has been a bug in the rounding interval selected (actually a bug in how the test calculates expected results), so this is the avenue I'll explore.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/512495562","html_url":"https://github.com/elastic/elasticsearch/issues/39497#issuecomment-512495562","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39497","id":512495562,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjQ5NTU2Mg==","user":{"login":"pcsanwald","id":163306,"node_id":"MDQ6VXNlcjE2MzMwNg==","avatar_url":"https://avatars1.githubusercontent.com/u/163306?v=4","gravatar_id":"","url":"https://api.github.com/users/pcsanwald","html_url":"https://github.com/pcsanwald","followers_url":"https://api.github.com/users/pcsanwald/followers","following_url":"https://api.github.com/users/pcsanwald/following{/other_user}","gists_url":"https://api.github.com/users/pcsanwald/gists{/gist_id}","starred_url":"https://api.github.com/users/pcsanwald/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pcsanwald/subscriptions","organizations_url":"https://api.github.com/users/pcsanwald/orgs","repos_url":"https://api.github.com/users/pcsanwald/repos","events_url":"https://api.github.com/users/pcsanwald/events{/privacy}","received_events_url":"https://api.github.com/users/pcsanwald/received_events","type":"User","site_admin":false},"created_at":"2019-07-17T17:50:52Z","updated_at":"2019-07-17T17:50:52Z","author_association":"CONTRIBUTOR","body":"Closing, as I believe the fix in #44461 covers the cases highlighted in this. of course we will reopen this if my assertion is incorrect.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/516875443","html_url":"https://github.com/elastic/elasticsearch/issues/39497#issuecomment-516875443","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39497","id":516875443,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjg3NTQ0Mw==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2019-07-31T14:33:01Z","updated_at":"2019-07-31T14:33:01Z","author_association":"MEMBER","body":"This happened again: https://scans.gradle.com/s/i7qmbvokn26ae\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/520549984","html_url":"https://github.com/elastic/elasticsearch/issues/39497#issuecomment-520549984","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39497","id":520549984,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDU0OTk4NA==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2019-08-12T18:51:55Z","updated_at":"2019-08-12T18:51:55Z","author_association":"MEMBER","body":"I muted in master/7.x.  I just merged #45359 and managed to induce a few more failures of testReduceRandom.\r\n\r\nI need to read up on what testReduceRandom is doing, but I suspect part of that test setup has either diverged from how we actually reduce things, or there is some invariant not being held stable between test instance creations or something like that.  Will do some digging. :)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/520557071","html_url":"https://github.com/elastic/elasticsearch/issues/39497#issuecomment-520557071","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39497","id":520557071,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDU1NzA3MQ==","user":{"login":"pcsanwald","id":163306,"node_id":"MDQ6VXNlcjE2MzMwNg==","avatar_url":"https://avatars1.githubusercontent.com/u/163306?v=4","gravatar_id":"","url":"https://api.github.com/users/pcsanwald","html_url":"https://github.com/pcsanwald","followers_url":"https://api.github.com/users/pcsanwald/followers","following_url":"https://api.github.com/users/pcsanwald/following{/other_user}","gists_url":"https://api.github.com/users/pcsanwald/gists{/gist_id}","starred_url":"https://api.github.com/users/pcsanwald/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pcsanwald/subscriptions","organizations_url":"https://api.github.com/users/pcsanwald/orgs","repos_url":"https://api.github.com/users/pcsanwald/repos","events_url":"https://api.github.com/users/pcsanwald/events{/privacy}","received_events_url":"https://api.github.com/users/pcsanwald/received_events","type":"User","site_admin":false},"created_at":"2019-08-12T19:12:17Z","updated_at":"2019-08-12T19:12:17Z","author_association":"CONTRIBUTOR","body":"The failure that occurred is of a different variety than earlier failures, the earlier failures were of the form \"we expected one bucket but we got two\", the latest failure is due to an [incorrect innerInterval calculation](https://scans.gradle.com/s/i7qmbvokn26ae/tests/nfxodyych4uas-bwnewqsu5pzxu):\r\n\r\n```\r\nexpected:<{1561939200000=1986, 1564531200000=52}> but was:<{1561939200000=1986, 1564617600000=52}>\r\n```\r\n\r\nDefinitely worth digging into, just wanted to mention that this latest error is a bit different nature than earlier errors, which were probably due to the bug we found.","performed_via_github_app":null}]