[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/516339721","html_url":"https://github.com/elastic/elasticsearch/issues/44997#issuecomment-516339721","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44997","id":516339721,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjMzOTcyMQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-07-30T09:23:08Z","updated_at":"2019-07-30T09:23:08Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/516340771","html_url":"https://github.com/elastic/elasticsearch/issues/44997#issuecomment-516340771","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44997","id":516340771,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjM0MDc3MQ==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2019-07-30T09:25:55Z","updated_at":"2019-07-30T09:25:55Z","author_association":"CONTRIBUTOR","body":"This has been failing once in every while since it was introduced in July 15 : https://build-stats.elastic.co/app/kibana#/discover?_g=(refreshInterval:(pause:!t,value:0),time:(from:now-30d,mode:quick,to:now))&_a=(columns:!(_source),index:e58bf320-7efd-11e8-bf69-63c8ef516157,interval:auto,query:(language:lucene,query:testPolicyCRUD),sort:!(time,desc))","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/516344859","html_url":"https://github.com/elastic/elasticsearch/issues/44997#issuecomment-516344859","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44997","id":516344859,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjM0NDg1OQ==","user":{"login":"davidkyle","id":2353640,"node_id":"MDQ6VXNlcjIzNTM2NDA=","avatar_url":"https://avatars1.githubusercontent.com/u/2353640?v=4","gravatar_id":"","url":"https://api.github.com/users/davidkyle","html_url":"https://github.com/davidkyle","followers_url":"https://api.github.com/users/davidkyle/followers","following_url":"https://api.github.com/users/davidkyle/following{/other_user}","gists_url":"https://api.github.com/users/davidkyle/gists{/gist_id}","starred_url":"https://api.github.com/users/davidkyle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidkyle/subscriptions","organizations_url":"https://api.github.com/users/davidkyle/orgs","repos_url":"https://api.github.com/users/davidkyle/repos","events_url":"https://api.github.com/users/davidkyle/events{/privacy}","received_events_url":"https://api.github.com/users/davidkyle/received_events","type":"User","site_admin":false},"created_at":"2019-07-30T09:36:55Z","updated_at":"2019-07-30T09:36:55Z","author_association":"MEMBER","body":"Muted on master 7a64117e1d5e3447744cf4779b544444a135c950 and 7.x e18e9fa8c5473da6f03987be77c1dee2db5345fb","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/516442511","html_url":"https://github.com/elastic/elasticsearch/issues/44997#issuecomment-516442511","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44997","id":516442511,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjQ0MjUxMQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-07-30T14:25:13Z","updated_at":"2019-07-30T14:25:13Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/553061073","html_url":"https://github.com/elastic/elasticsearch/issues/44997#issuecomment-553061073","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44997","id":553061073,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MzA2MTA3Mw==","user":{"login":"henningandersen","id":33268011,"node_id":"MDQ6VXNlcjMzMjY4MDEx","avatar_url":"https://avatars2.githubusercontent.com/u/33268011?v=4","gravatar_id":"","url":"https://api.github.com/users/henningandersen","html_url":"https://github.com/henningandersen","followers_url":"https://api.github.com/users/henningandersen/followers","following_url":"https://api.github.com/users/henningandersen/following{/other_user}","gists_url":"https://api.github.com/users/henningandersen/gists{/gist_id}","starred_url":"https://api.github.com/users/henningandersen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henningandersen/subscriptions","organizations_url":"https://api.github.com/users/henningandersen/orgs","repos_url":"https://api.github.com/users/henningandersen/repos","events_url":"https://api.github.com/users/henningandersen/events{/privacy}","received_events_url":"https://api.github.com/users/henningandersen/received_events","type":"User","site_admin":false},"created_at":"2019-11-12T19:02:55Z","updated_at":"2019-11-12T19:02:55Z","author_association":"CONTRIBUTOR","body":"I had another instance of this in my PR build:\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+pull-request-2/10451/console\r\nhttps://gradle-enterprise.elastic.co/s/oe6bpog42o5ju/tests/rfsroxnx4sflo-7moiun2tnnjde\r\n\r\nIt was on our reindex_v2 branch, but I had just merged origin/master some hours before and I doubt the reindex changes could cause this.\r\n\r\nDid not reproduce locally using:\r\n\r\n```\r\n./gradlew ':x-pack:plugin:ilm:test' --tests \"org.elasticsearch.xpack.slm.SnapshotLifecycleServiceTests.testPolicyCRUD\" -Dtests.seed=4F8B0454D04C415D -Dtests.security.manager=true -Dtests.locale=sr-Latn-RS -Dtests.timezone=America/Managua -Dcompiler.java=12 -Druntime.java=11\r\n```\r\n\r\nException:\r\n\r\n```\r\nWARNING: Uncaught exception in thread: Thread[Thread-4,5,TGRP-SnapshotLifecycleServiceTests]\r\njava.lang.AssertionError: \r\nExpected: \"foo-2\"\r\n     but: was \"foo-1\"\r\n\tat __randomizedtesting.SeedInfo.seed([4F8B0454D04C415D]:0)\r\n\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)\r\n\tat org.junit.Assert.assertThat(Assert.java:956)\r\n\tat org.junit.Assert.assertThat(Assert.java:923)\r\n\tat org.elasticsearch.xpack.slm.SnapshotLifecycleServiceTests.lambda$testPolicyCRUD$10(SnapshotLifecycleServiceTests.java:210)\r\n\tat org.elasticsearch.xpack.slm.SnapshotLifecycleServiceTests.lambda$testPolicyCRUD$5(SnapshotLifecycleServiceTests.java:160)\r\n\tat org.elasticsearch.xpack.slm.SnapshotLifecycleServiceTests$FakeSnapshotTask.triggered(SnapshotLifecycleServiceTests.java:323)\r\n\tat org.elasticsearch.xpack.core.scheduler.SchedulerEngine.notifyListeners(SchedulerEngine.java:182)\r\n\tat org.elasticsearch.xpack.core.scheduler.SchedulerEngine$ActiveSchedule.run(SchedulerEngine.java:210)\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/554071593","html_url":"https://github.com/elastic/elasticsearch/issues/44997#issuecomment-554071593","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44997","id":554071593,"node_id":"MDEyOklzc3VlQ29tbWVudDU1NDA3MTU5Mw==","user":{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false},"created_at":"2019-11-14T20:44:51Z","updated_at":"2019-11-14T20:44:51Z","author_association":"MEMBER","body":"This failure just occurred on a 7.x intake build:\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.x+multijob+fast+part2/2085/\r\nhttps://gradle-enterprise.elastic.co/s/44plmopn3xglw\r\n\r\nDid not reproduce locally using:\r\n\r\n```\r\n./gradlew ':x-pack:plugin:ilm:test' --tests \"org.elasticsearch.xpack.slm.SnapshotLifecycleServiceTests.testPolicyCRUD\" -Dtests.seed=4079ED71C71FCFBC -Dtests.security.manager=true -Dtests.locale=he -Dtests.timezone=Mexico/BajaNorte -Dcompiler.java=12 -Druntime.java=8\r\n```\r\n\r\nFailure information and output:\r\n\r\n```\r\n1> [2019-11-14T12:20:03,919][INFO ][o.e.x.s.SnapshotLifecycleServiceTests] [testPolicyCRUD] before test\r\n--\r\n1> [2019-11-14T12:20:03,944][TRACE][o.e.x.s.SnapshotLifecycleService] [testPolicyCRUD] cancelling all snapshot lifecycle jobs\r\n1> [2019-11-14T12:20:03,947][INFO ][o.e.x.s.SnapshotLifecycleService] [testPolicyCRUD] scheduling snapshot lifecycle job [foo-1]\r\n1> [2019-11-14T12:20:04,002][INFO ][o.e.x.s.SnapshotLifecycleServiceTests] [[elasticsearch[trigger_engine_scheduler][T#1]]] --> fake snapshot task triggered: Event[jobName=foo-1,triggeredTime=1573762804001,scheduledTime=1573762804000]\r\n1> [2019-11-14T12:20:04,012][DEBUG][o.e.x.s.SnapshotLifecycleService] [testPolicyCRUD] removing existing snapshot lifecycle job [foo-1] as it has been updated\r\n1> [2019-11-14T12:20:04,013][INFO ][o.e.x.s.SnapshotLifecycleService] [testPolicyCRUD] rescheduling updated snapshot lifecycle job [foo-2]\r\n1> [2019-11-14T12:20:05,004][INFO ][o.e.x.s.SnapshotLifecycleServiceTests] [[elasticsearch[trigger_engine_scheduler][T#1]]] --> fake snapshot task triggered: Event[jobName=foo-2,triggeredTime=1573762805011,scheduledTime=1573762805000]\r\n1> [2019-11-14T12:20:05,018][INFO ][o.e.x.s.SnapshotLifecycleServiceTests] [[elasticsearch[trigger_engine_scheduler][T#1]]] --> fake snapshot task triggered: Event[jobName=foo-1,triggeredTime=1573762805011,scheduledTime=1573762805000]\r\n1> [2019-11-14T12:20:05,026][ERROR][o.e.ExceptionsHelper     ] [[elasticsearch[trigger_engine_scheduler][T#1]]] fatal error\r\n1> \tat org.elasticsearch.ExceptionsHelper.lambda$maybeDieOnAnotherThread$4(ExceptionsHelper.java:291)\r\n1> \tat java.util.Optional.ifPresent(Optional.java:159)\r\n1> \tat org.elasticsearch.ExceptionsHelper.maybeDieOnAnotherThread(ExceptionsHelper.java:281)\r\n1> \tat org.elasticsearch.xpack.core.scheduler.SchedulerEngine$ActiveSchedule.run(SchedulerEngine.java:220)\r\n1> \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n1> \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n1> \tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\r\n1> \tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\r\n1> \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n1> \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n1> \tat java.lang.Thread.run(Thread.java:748)\r\n1> [2019-11-14T12:20:05,045][DEBUG][o.e.x.s.SnapshotLifecycleService] [testPolicyCRUD] cancelling snapshot lifecycle job [foo-2] as it no longer exists\r\n1> [2019-11-14T12:20:05,047][INFO ][o.e.x.s.SnapshotLifecycleService] [testPolicyCRUD] scheduling snapshot lifecycle job [foo-3]\r\n2> נוב 14, 2019 12:20:05 PM com.carrotsearch.randomizedtesting.RandomizedRunner$QueueUncaughtExceptionsHandler uncaughtException\r\n2> WARNING: Uncaught exception in thread: Thread[Thread-5,5,TGRP-SnapshotLifecycleServiceTests]\r\n2> java.lang.AssertionError:\r\n2> Expected: \"foo-2\"\r\n2>      but: was \"foo-1\"\r\n2> \tat __randomizedtesting.SeedInfo.seed([4079ED71C71FCFBC]:0)\r\n2> \tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)\r\n2> \tat org.junit.Assert.assertThat(Assert.java:956)\r\n2> \tat org.junit.Assert.assertThat(Assert.java:923)\r\n2> \tat org.elasticsearch.xpack.slm.SnapshotLifecycleServiceTests.lambda$testPolicyCRUD$10(SnapshotLifecycleServiceTests.java:210)\r\n2> \tat org.elasticsearch.xpack.slm.SnapshotLifecycleServiceTests.lambda$testPolicyCRUD$5(SnapshotLifecycleServiceTests.java:160)\r\n2> \tat org.elasticsearch.xpack.slm.SnapshotLifecycleServiceTests$FakeSnapshotTask.triggered(SnapshotLifecycleServiceTests.java:323)\r\n2> \tat org.elasticsearch.xpack.core.scheduler.SchedulerEngine.notifyListeners(SchedulerEngine.java:183)\r\n2> \tat org.elasticsearch.xpack.core.scheduler.SchedulerEngine$ActiveSchedule.run(SchedulerEngine.java:211)\r\n2> \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n2> \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n2> \tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\r\n2> \tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\r\n2> \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n2> \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n2> \tat java.lang.Thread.run(Thread.java:748)\r\n \r\n1> [2019-11-14T12:20:06,037][INFO ][o.e.x.s.SnapshotLifecycleServiceTests] [[elasticsearch[trigger_engine_scheduler][T#1]]] --> fake snapshot task triggered: Event[jobName=foo-3,triggeredTime=1573762809011,scheduledTime=1573762808000]\r\n1> [2019-11-14T12:20:06,089][TRACE][o.e.x.s.SnapshotLifecycleService] [testPolicyCRUD] cancelling all snapshot lifecycle jobs\r\n1> [2019-11-14T12:20:06,093][INFO ][o.e.x.s.SnapshotLifecycleServiceTests] [testPolicyCRUD] after test\r\n2> REPRODUCE WITH: ./gradlew ':x-pack:plugin:ilm:test' --tests \"org.elasticsearch.xpack.slm.SnapshotLifecycleServiceTests.testPolicyCRUD\" -Dtests.seed=4079ED71C71FCFBC -Dtests.security.manager=true -Dtests.locale=he -Dtests.timezone=Mexico/BajaNorte -Dcompiler.java=12 -Druntime.java=8\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/572184929","html_url":"https://github.com/elastic/elasticsearch/issues/44997#issuecomment-572184929","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44997","id":572184929,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjE4NDkyOQ==","user":{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false},"created_at":"2020-01-08T17:58:33Z","updated_at":"2020-01-08T17:58:33Z","author_association":"MEMBER","body":"Another instance: https://gradle-enterprise.elastic.co/s/syv4mizwetqwi","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/572188643","html_url":"https://github.com/elastic/elasticsearch/issues/44997#issuecomment-572188643","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44997","id":572188643,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjE4ODY0Mw==","user":{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false},"created_at":"2020-01-08T18:07:52Z","updated_at":"2020-01-08T18:07:52Z","author_association":"MEMBER","body":"I've muted this test in 7.x.","performed_via_github_app":null}]