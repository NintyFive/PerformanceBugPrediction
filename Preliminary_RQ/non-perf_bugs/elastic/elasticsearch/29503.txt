{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/29503","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29503/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29503/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29503/events","html_url":"https://github.com/elastic/elasticsearch/issues/29503","id":313943995,"node_id":"MDU6SXNzdWUzMTM5NDM5OTU=","number":29503,"title":"Permitted characters in index name","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"labels":[{"id":163824881,"node_id":"MDU6TGFiZWwxNjM4MjQ4ODE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Indices%20APIs","name":":Core/Features/Indices APIs","color":"0e8a16","default":false,"description":"APIs to create and manage indices"},{"id":127075273,"node_id":"MDU6TGFiZWwxMjcwNzUyNzM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/PITA","name":"PITA","color":"e11d21","default":false,"description":null},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-04-13T01:58:34Z","updated_at":"2018-04-19T03:14:45Z","closed_at":"2018-04-19T03:14:45Z","author_association":"MEMBER","active_lock_reason":null,"body":"Historically index names were limited to a common set of characters that were valid as components of a directory name on disk. This also meant that we had to take care with normalization between lowercase and uppercase on case-insensitive filesystems, so we rejected index names containing uppercase characters.\r\n\r\nToday we have quite unpredictable rules surrounding what is permitted and what is not:\r\n\r\n```\r\n[jason@totoro ~]$ curl -XPUT localhost:9200/caf√©?pretty=true\r\n{\r\n  \"error\" : {\r\n    \"root_cause\" : [\r\n      {\r\n        \"type\" : \"invalid_index_name_exception\",\r\n        \"reason\" : \"Invalid index name [caf√É¬©], must be lowercase\",\r\n        \"index_uuid\" : \"_na_\",\r\n        \"index\" : \"caf√É¬©\"\r\n      }\r\n    ],\r\n    \"type\" : \"invalid_index_name_exception\",\r\n    \"reason\" : \"Invalid index name [caf√É¬©], must be lowercase\",\r\n    \"index_uuid\" : \"_na_\",\r\n    \"index\" : \"caf√É¬©\"\r\n  },\r\n  \"status\" : 400\r\n}\r\n[jason@totoro ~]$ curl -XPUT localhost:9200/caf%C3%A9?pretty=true\r\n{\r\n  \"acknowledged\" : true,\r\n  \"shards_acknowledged\" : true,\r\n  \"index\" : \"caf√©\"\r\n}\r\n[jason@totoro ~]$ \r\n```\r\n\r\nThe difference here is between small e with acute and e followed by combining acute accent. They *look* the same, but they are not and we reject one and not the other. On some OS, you can not even copy and paste the outputted index name from the second create index request to search the resulting index:\r\n\r\n```\r\n[jason@totoro ~]$ curl -XGET localhost:9200/caf√©/_search?pretty=true\r\n{\r\n  \"error\" : {\r\n    \"root_cause\" : [\r\n      {\r\n        \"type\" : \"index_not_found_exception\",\r\n        \"reason\" : \"no such index\",\r\n        \"resource.type\" : \"index_or_alias\",\r\n        \"resource.id\" : \"caf√É¬©\",\r\n        \"index_uuid\" : \"_na_\",\r\n        \"index\" : \"caf√É¬©\"\r\n      }\r\n    ],\r\n    \"type\" : \"index_not_found_exception\",\r\n    \"reason\" : \"no such index\",\r\n    \"resource.type\" : \"index_or_alias\",\r\n    \"resource.id\" : \"caf√É¬©\",\r\n    \"index_uuid\" : \"_na_\",\r\n    \"index\" : \"caf√É¬©\"\r\n  },\r\n  \"status\" : 404\r\n}\r\n[jason@totoro ~]$ \r\n```\r\n\r\nüí© \r\n\r\nThis is trappy, and a poor user experience. I propose that index names be limited to lowercase alpha, numbers, and a few special characters such as `_` and `-`.","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}