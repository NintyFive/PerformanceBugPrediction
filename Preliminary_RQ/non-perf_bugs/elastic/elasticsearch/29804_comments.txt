[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384130467","html_url":"https://github.com/elastic/elasticsearch/issues/29804#issuecomment-384130467","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29804","id":384130467,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMDQ2Nw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2017-08-11T17:43:39Z","updated_at":"2018-04-25T01:21:37Z","author_association":"COLLABORATOR","body":"*Original comment by @rjernst:*\n\nI made that change originally because I saw this as a memory issue, but looking back now, it seems this may be another issue. GC overhead limit seems to be GC cannot make progress.\r\n\r\nI wonder if we need to increase the heap size for gradle.  We are doing much more in gradle now (essentially we doubled or even tripled the gradle model by loading in 1-2 bwc builds).\r\n\r\n@nik9000 @s1monw wdyt?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384130468","html_url":"https://github.com/elastic/elasticsearch/issues/29804#issuecomment-384130468","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29804","id":384130468,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMDQ2OA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2017-08-11T17:49:39Z","updated_at":"2018-04-25T01:21:37Z","author_association":"COLLABORATOR","body":"*Original comment by @rjernst:*\n\nActually, are we sure we are not running the gradle daemon in CI? @elasticdog can you confirm? Note that the default changed in gradle 3.0 so that the daemon is now enabled by default. We disable it in the elasticsearch project, but I am suspicious that that setting is not being picked up anymore...","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384130470","html_url":"https://github.com/elastic/elasticsearch/issues/29804#issuecomment-384130470","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29804","id":384130470,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMDQ3MA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2017-08-11T17:53:34Z","updated_at":"2018-04-25T01:21:37Z","author_association":"COLLABORATOR","body":"*Original comment by @rjernst:*\n\nIn the output of one of the linked builds, I see this:\r\n\r\n```Successfully started process 'Gradle build daemon'```\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384130471","html_url":"https://github.com/elastic/elasticsearch/issues/29804#issuecomment-384130471","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29804","id":384130471,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMDQ3MQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2017-08-11T18:50:52Z","updated_at":"2018-04-25T01:21:37Z","author_association":"COLLABORATOR","body":"*Original comment by @elasticdog:*\n\nIIRC, we aren't explicitly doing anything with the gradle daemon on the infra side...I thought though that even if it's not used, the daemon will start up? Are you saying that we may need to add `org.gradle.daemon=false` or something like that to all of our CI's `gradle.properties` file?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384130472","html_url":"https://github.com/elastic/elasticsearch/issues/29804#issuecomment-384130472","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29804","id":384130472,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMDQ3Mg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2017-08-14T13:05:02Z","updated_at":"2018-04-25T01:21:37Z","author_association":"COLLABORATOR","body":"*Original comment by @nik9000:*\n\nIt looks like we disable the daemon in `gradle.properties` at the root of both core and x-pack-elasticsearch. At least we try to disable the daemon.\r\n\r\nI think it'd be good to check if these failures seem to show up on certain nodes and whether that node gets different memory settings (`jstat -gc` wise) then the others. I looked at gradle running on my machine and it didn't specify any heap sizes so I imagine we're getting whatever default java calculates which is based on a bunch of stuff like physical memory size. We'd probably be better off just locking it so something like `GRADLE_OPTS=\"-Xms512m -Xmx512m\"`.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384130473","html_url":"https://github.com/elastic/elasticsearch/issues/29804#issuecomment-384130473","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29804","id":384130473,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMDQ3Mw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2017-08-17T23:15:07Z","updated_at":"2018-04-25T01:21:38Z","author_association":"COLLABORATOR","body":"*Original comment by @rjernst:*\n\nI have a hunch that by always setting org.gradle.java.home (due to how we fork for java 9), gradle is *always* daemonizing (just with a \"throw away\" daemon). I would not be surprised if gradle had bugs where it ends up reusing this temporary daemon if builds are started close together?  I've tried the build locally with the java 9 release candidate build, and gradle 4.1, but there are some failures in the build. Theoretically, though, gradle 4.1 should no longer require us to use 2 different jdk versions, so we could remove org.gradle.java.home from gradle properties.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384130475","html_url":"https://github.com/elastic/elasticsearch/issues/29804#issuecomment-384130475","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29804","id":384130475,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMDQ3NQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2017-08-18T17:37:14Z","updated_at":"2018-04-25T01:21:38Z","author_association":"COLLABORATOR","body":"*Original comment by @jdconrad:*\n\nNot completely sure this is related, but another out of memory issue with gradle tasks (LINK REDACTED)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384130476","html_url":"https://github.com/elastic/elasticsearch/issues/29804#issuecomment-384130476","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29804","id":384130476,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMDQ3Ng==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2017-09-19T09:48:07Z","updated_at":"2018-04-25T01:21:38Z","author_association":"COLLABORATOR","body":"*Original comment by @s1monw:*\n\n@rjernst what is the outcome of this? can we close?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384130477","html_url":"https://github.com/elastic/elasticsearch/issues/29804#issuecomment-384130477","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29804","id":384130477,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMDQ3Nw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2017-09-19T13:27:43Z","updated_at":"2018-04-25T01:21:38Z","author_association":"COLLABORATOR","body":"*Original comment by @nik9000:*\n\nI believe this: https://github.com/elastic/elasticsearch/pull/26047","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384130478","html_url":"https://github.com/elastic/elasticsearch/issues/29804#issuecomment-384130478","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29804","id":384130478,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMDQ3OA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2017-09-19T13:28:24Z","updated_at":"2018-04-25T01:21:38Z","author_association":"COLLABORATOR","body":"*Original comment by @nik9000:*\n\nEr, no, that is out of order.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384130480","html_url":"https://github.com/elastic/elasticsearch/issues/29804#issuecomment-384130480","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29804","id":384130480,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMDQ4MA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2017-09-20T06:09:57Z","updated_at":"2018-04-25T01:21:39Z","author_association":"COLLABORATOR","body":"*Original comment by @rjernst:*\n\n@s1monw There is no outcome. The problem with this is it is not reproducible for me locally. It looks like we haven't seen a recurrence in a little while, so let's close for now...","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384130482","html_url":"https://github.com/elastic/elasticsearch/issues/29804#issuecomment-384130482","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29804","id":384130482,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDEzMDQ4Mg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2017-12-28T08:53:57Z","updated_at":"2018-04-25T01:21:39Z","author_association":"COLLABORATOR","body":"*Original comment by @jkakavas:*\n\nNot sure if this is the best way to go, but I'm reopening this instead of opening a new one. We got a few of those today:\r\n\r\nLINK REDACTED\r\n```\r\n07:58:25 Execution failed for task ':x-pack-elasticsearch:plugin:bwc-snapshot-dummy-projects:bwc-snapshot-6.0:buildBwcVersion'.\r\n07:58:25 > GC overhead limit exceeded\r\n```\r\n\r\nLINK REDACTED\r\n```\r\n08:27:24 * What went wrong:\r\n08:27:24 Execution failed for task ':x-pack-elasticsearch:plugin:bwc-snapshot-dummy-projects:bwc-snapshot-6.1:buildBwcVersion'.\r\n08:27:24 > Java heap space\r\n```\r\n\r\nLINK REDACTED\r\n```\r\n07:06:50 * What went wrong:\r\n07:06:50 Execution failed for task ':checkout-es-6.1:core:compileJava'.\r\n07:06:50 > GC overhead limit exceeded\r\n```\r\n\r\nLINK REDACTED\r\n```\r\n09:40:23 * What went wrong:\r\n09:40:23 Execution failed for task ':checkout-es-6.0:x-pack-elasticsearch:plugin:compileJava'.\r\n09:40:23 > GC overhead limit exceeded\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384915288","html_url":"https://github.com/elastic/elasticsearch/issues/29804#issuecomment-384915288","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29804","id":384915288,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDkxNTI4OA==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2018-04-27T09:19:39Z","updated_at":"2018-04-27T09:19:39Z","author_association":"MEMBER","body":"To me this looks like a duplicate of https://github.com/elastic/elasticsearch/issues/27898 which has been fixed in 8b2eee3 a while ago and we don't see any new build failures in the compilation step in build-stats since then, hence closing.","performed_via_github_app":null}]