{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/29922","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29922/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29922/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29922/events","html_url":"https://github.com/elastic/elasticsearch/issues/29922","id":317449477,"node_id":"MDU6SXNzdWUzMTc0NDk0Nzc=","number":29922,"title":"XPackRestIT fails with \"Unexpected end-of-input\"","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"labels":[{"id":912845062,"node_id":"MDU6TGFiZWw5MTI4NDUwNjI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Watcher","name":":Core/Features/Watcher","color":"0e8a16","default":false,"description":""},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"},{"id":777829541,"node_id":"MDU6TGFiZWw3Nzc4Mjk1NDE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v6.0.3","name":"v6.0.3","color":"dddddd","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-02-10T17:44:41Z","updated_at":"2018-06-08T10:37:46Z","closed_at":"2018-06-08T10:37:46Z","author_association":"COLLABORATOR","active_lock_reason":null,"body":"*Original comment by @danielmitterdorfer:*\n\nAccording to our LINK REDACTED,time:(from:now-6M,mode:quick,to:now))&_a=(columns:!(_source),filters:!(),index:%27failure-*%27,interval:auto,query:(query_string:(analyze_wildcard:!t,query:%27stacktrace:%22Unexpected%20end-of-input%22%27)),sort:!(time,desc),vis:(aggs:!((params:(field:_source,orderBy:%272%27,size:20),schema:segment,type:terms),(id:%272%27,schema:metric,type:count)),type:histogram))&indexPattern=log-*&type=histogram), this failure started to occur each day now from Dec. 16 2016 on every day at least 10 times but was not reproducible locally so far.\r\n\r\nReproduce with `gradle :x-pack:elasticsearch:integTest -Dtests.seed=590937EC4DD23711 -Dtests.class=org.elasticsearch.xpack.test.rest.XPackRestIT -Dtests.method=\"test {p0=watcher/get_watch/20_missing/Test get watch api with missing watch}\" -Dtests.security.manager=true -Dtests.locale=tr-TR -Dtests.timezone=Asia/Taipei`\r\n\r\nbuild environment info:\r\n\r\n```\r\n  Gradle Version        : 2.13\r\n  OS Info               : Linux 3.16.7-29-default (amd64)\r\n  JDK Version           : Oracle Corporation 1.8.0_111 [OpenJDK 64-Bit Server VM 25.111-b14]\r\n```\r\n\r\nHere is an example error trace:\r\n\r\n```\r\nERROR   0.13s | XPackRestIT.test {p0=watcher/get_watch/20_missing/Test get watch api with missing watch} <<< FAILURES!\r\n   > Throwable LINK REDACTED: java.lang.RuntimeException: Failure at [watcher/get_watch/20_missing:11]: Unexpected end-of-input: was expecting closing quote for a string value\r\n   >  at [Source: {\"error\":{\"root_cause\":[{\"type\":\"null; line: 1, column: 75]\r\n   > \tat __randomizedtesting.SeedInfo.seed([590937EC4DD23711:D15D0836E32E5AE9]:0)\r\n   > \tat org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.executeSection(ESClientYamlSuiteTestCase.java:374)\r\n   > \tat org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.test(ESClientYamlSuiteTestCase.java:356)\r\n   > \tat java.lang.Thread.run(Thread.java:745)\r\n   > Caused by: com.fasterxml.jackson.core.io.JsonEOFException: Unexpected end-of-input: was expecting closing quote for a string value\r\n   >  at [Source: {\"error\":{\"root_cause\":[{\"type\":\"null; line: 1, column: 75]\r\n   > \tat com.fasterxml.jackson.core.base.ParserMinimalBase._reportInvalidEOF(ParserMinimalBase.java:483)\r\n   > \tat com.fasterxml.jackson.core.json.ReaderBasedJsonParser._finishString2(ReaderBasedJsonParser.java:2039)\r\n   > \tat com.fasterxml.jackson.core.json.ReaderBasedJsonParser._finishString(ReaderBasedJsonParser.java:2026)\r\n   > \tat com.fasterxml.jackson.core.json.ReaderBasedJsonParser.getText(ReaderBasedJsonParser.java:276)\r\n   > \tat org.elasticsearch.common.xcontent.json.JsonXContentParser.text(JsonXContentParser.java:80)\r\n   > \tat org.elasticsearch.common.xcontent.support.AbstractXContentParser.readValue(AbstractXContentParser.java:344)\r\n   > \tat org.elasticsearch.common.xcontent.support.AbstractXContentParser.readMap(AbstractXContentParser.java:292)\r\n   > \tat org.elasticsearch.common.xcontent.support.AbstractXContentParser.readValue(AbstractXContentParser.java:350)\r\n   > \tat org.elasticsearch.common.xcontent.support.AbstractXContentParser.readList(AbstractXContentParser.java:335)\r\n   > \tat org.elasticsearch.common.xcontent.support.AbstractXContentParser.readValue(AbstractXContentParser.java:352)\r\n   > \tat org.elasticsearch.common.xcontent.support.AbstractXContentParser.readMap(AbstractXContentParser.java:292)\r\n   > \tat org.elasticsearch.common.xcontent.support.AbstractXContentParser.readValue(AbstractXContentParser.java:350)\r\n   > \tat org.elasticsearch.common.xcontent.support.AbstractXContentParser.readMap(AbstractXContentParser.java:292)\r\n   > \tat org.elasticsearch.common.xcontent.support.AbstractXContentParser.readOrderedMap(AbstractXContentParser.java:259)\r\n   > \tat org.elasticsearch.common.xcontent.support.AbstractXContentParser.mapOrdered(AbstractXContentParser.java:215)\r\n   > \tat org.elasticsearch.test.rest.yaml.ObjectPath.createFromXContent(ObjectPath.java:41)\r\n   > \tat org.elasticsearch.test.rest.yaml.ClientYamlTestResponse.parseResponseBody(ClientYamlTestResponse.java:63)\r\n   > \tat org.elasticsearch.test.rest.yaml.ClientYamlTestResponse.<init>(ClientYamlTestResponse.java:54)\r\n   > \tat org.elasticsearch.test.rest.yaml.ClientYamlTestResponseException.<init>(ClientYamlTestResponseException.java:38)\r\n   > \tat org.elasticsearch.test.rest.yaml.ClientYamlTestClient.callApi(ClientYamlTestClient.java:203)\r\n   > \tat org.elasticsearch.test.rest.yaml.ClientYamlTestExecutionContext.callApiInternal(ClientYamlTestExecutionContext.java:102)\r\n   > \tat org.elasticsearch.test.rest.yaml.ClientYamlTestExecutionContext.callApi(ClientYamlTestExecutionContext.java:67)\r\n   > \tat org.elasticsearch.test.rest.yaml.section.DoSection.execute(DoSection.java:128)\r\n   > \tat org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.executeSection(ESClientYamlSuiteTestCase.java:372)\r\n   > \t... 38 more\r\n```\n\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}