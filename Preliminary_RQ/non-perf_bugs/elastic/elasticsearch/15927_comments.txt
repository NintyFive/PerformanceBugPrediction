[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/170918425","html_url":"https://github.com/elastic/elasticsearch/issues/15927#issuecomment-170918425","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15927","id":170918425,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDkxODQyNQ==","user":{"login":"dbaggott","id":112677,"node_id":"MDQ6VXNlcjExMjY3Nw==","avatar_url":"https://avatars1.githubusercontent.com/u/112677?v=4","gravatar_id":"","url":"https://api.github.com/users/dbaggott","html_url":"https://github.com/dbaggott","followers_url":"https://api.github.com/users/dbaggott/followers","following_url":"https://api.github.com/users/dbaggott/following{/other_user}","gists_url":"https://api.github.com/users/dbaggott/gists{/gist_id}","starred_url":"https://api.github.com/users/dbaggott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbaggott/subscriptions","organizations_url":"https://api.github.com/users/dbaggott/orgs","repos_url":"https://api.github.com/users/dbaggott/repos","events_url":"https://api.github.com/users/dbaggott/events{/privacy}","received_events_url":"https://api.github.com/users/dbaggott/received_events","type":"User","site_admin":false},"created_at":"2016-01-12T13:55:31Z","updated_at":"2016-01-12T13:55:31Z","author_association":"NONE","body":"Also [discussed here](https://discuss.elastic.co/t/cloud-aws-for-es-2-1-1-in-maven/38924/5).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/170922498","html_url":"https://github.com/elastic/elasticsearch/issues/15927#issuecomment-170922498","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15927","id":170922498,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDkyMjQ5OA==","user":{"login":"jprante","id":635745,"node_id":"MDQ6VXNlcjYzNTc0NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/635745?v=4","gravatar_id":"","url":"https://api.github.com/users/jprante","html_url":"https://github.com/jprante","followers_url":"https://api.github.com/users/jprante/followers","following_url":"https://api.github.com/users/jprante/following{/other_user}","gists_url":"https://api.github.com/users/jprante/gists{/gist_id}","starred_url":"https://api.github.com/users/jprante/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jprante/subscriptions","organizations_url":"https://api.github.com/users/jprante/orgs","repos_url":"https://api.github.com/users/jprante/repos","events_url":"https://api.github.com/users/jprante/events{/privacy}","received_events_url":"https://api.github.com/users/jprante/received_events","type":"User","site_admin":false},"created_at":"2016-01-12T14:10:05Z","updated_at":"2016-01-12T14:10:05Z","author_association":"CONTRIBUTOR","body":"@dbaggott `NodeBuilder` has become unusable for plugins.\n\nSee https://github.com/elastic/elasticsearch/issues/15060\nand https://github.com/elastic/elasticsearch/issues/13212\nand https://github.com/elastic/elasticsearch/pull/15107\nand https://discuss.elastic.co/t/add-plugins-from-classpath-in-embedded-elasticsearch-client-node/36269\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/170923151","html_url":"https://github.com/elastic/elasticsearch/issues/15927#issuecomment-170923151","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15927","id":170923151,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDkyMzE1MQ==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2016-01-12T14:12:45Z","updated_at":"2016-01-12T14:12:45Z","author_association":"MEMBER","body":"I think this is important in cases where users want to use a Client Node to connect to AWS or Azure for example. Those users need to add a cloud plugin.\nWe should either support it out of the box, either document how they can do it, either remove support for Client Node...\n\nThoughts?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/170926689","html_url":"https://github.com/elastic/elasticsearch/issues/15927#issuecomment-170926689","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15927","id":170926689,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDkyNjY4OQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-01-12T14:27:07Z","updated_at":"2016-01-12T14:27:07Z","author_association":"CONTRIBUTOR","body":"A client only node is just a node, with a config directory etc.  What's the issue with installing the plugin into the `plugins` directory like you'd do on any other node?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/170927497","html_url":"https://github.com/elastic/elasticsearch/issues/15927#issuecomment-170927497","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15927","id":170927497,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDkyNzQ5Nw==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2016-01-12T14:30:24Z","updated_at":"2016-01-12T14:30:24Z","author_association":"MEMBER","body":"Because you are starting a Node programmatically which is in Maven/Java:\n- add dependencies to `elasticsearch`, `cloud-aws`.\n- start the node in Java.\n\nAs a Java developper I would not expect having to run a single command like `bin/plugin` when I want to use a Java client.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/170927985","html_url":"https://github.com/elastic/elasticsearch/issues/15927#issuecomment-170927985","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15927","id":170927985,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDkyNzk4NQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-01-12T14:31:34Z","updated_at":"2016-01-12T14:31:34Z","author_association":"CONTRIBUTOR","body":"Then use a transport client, not a client node. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/170928420","html_url":"https://github.com/elastic/elasticsearch/issues/15927#issuecomment-170928420","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15927","id":170928420,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDkyODQyMA==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2016-01-12T14:32:37Z","updated_at":"2016-01-12T14:32:37Z","author_association":"MEMBER","body":"So we should deprecate Client Node and don't document it in the Java API doc anymore IMO.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/170941383","html_url":"https://github.com/elastic/elasticsearch/issues/15927#issuecomment-170941383","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15927","id":170941383,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDk0MTM4Mw==","user":{"login":"dbaggott","id":112677,"node_id":"MDQ6VXNlcjExMjY3Nw==","avatar_url":"https://avatars1.githubusercontent.com/u/112677?v=4","gravatar_id":"","url":"https://api.github.com/users/dbaggott","html_url":"https://github.com/dbaggott","followers_url":"https://api.github.com/users/dbaggott/followers","following_url":"https://api.github.com/users/dbaggott/following{/other_user}","gists_url":"https://api.github.com/users/dbaggott/gists{/gist_id}","starred_url":"https://api.github.com/users/dbaggott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbaggott/subscriptions","organizations_url":"https://api.github.com/users/dbaggott/orgs","repos_url":"https://api.github.com/users/dbaggott/repos","events_url":"https://api.github.com/users/dbaggott/events{/privacy}","received_events_url":"https://api.github.com/users/dbaggott/received_events","type":"User","site_admin":false},"created_at":"2016-01-12T15:07:23Z","updated_at":"2016-01-12T15:07:23Z","author_association":"NONE","body":"@jprante, thanks for all the pointers!  I spent some time searching closed issues but didn't manage to find those.  The context is very helpful, I didn't realize the history that I was stumbling into and it's helpful in understanding where everyone is coming from and why the discussion is so heated!\n\n@dadoonet, thanks for clarifying the use case!\n\n@clintongormley, w/r/t your first suggestion, I'll look into that.  As @dadoonet alluded to, the mechanics of doing that are very cumbersome.  But I'm gathering that it's the only \"officially supported\" mechanism?\n\n@clintongormley, if one were to switch from a client node to a transport node aren't there important functional ramifications in turns of \"smart load balancing\" etc that are being lost?\n\n@clintongormley, @jprant, @dadoonet, (the yuckiness of pushing internal ES details into my app aside), is the \"extend a Node\" hack fundamentally broken?  And apologies if that's already discussed in one of the links, I'm still working through the discussions.\n\nI realize you all are very deep into the 2.X series but for someone who is just coming at it and upgrading from 1.7 to 2.X, the \"right thing\" to do in this situation is _very opaque_.  As a user of ES, I'm very motivated to do the right thing, I'm just still working through what that is/how to do it!  So, a strong +1 for providing guidance on what the right thing is and a strong +1 for making it practical to do the right thing.  Of all the breaking changes in 2.X that we're dealing with, this is the one that's the least documented and that I'm spending the most time on.  I realize that it's only a subset of users so (understandably) not a top priority but for anyone who is in this situation, it's painful.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/170941974","html_url":"https://github.com/elastic/elasticsearch/issues/15927#issuecomment-170941974","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15927","id":170941974,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDk0MTk3NA==","user":{"login":"dbaggott","id":112677,"node_id":"MDQ6VXNlcjExMjY3Nw==","avatar_url":"https://avatars1.githubusercontent.com/u/112677?v=4","gravatar_id":"","url":"https://api.github.com/users/dbaggott","html_url":"https://github.com/dbaggott","followers_url":"https://api.github.com/users/dbaggott/followers","following_url":"https://api.github.com/users/dbaggott/following{/other_user}","gists_url":"https://api.github.com/users/dbaggott/gists{/gist_id}","starred_url":"https://api.github.com/users/dbaggott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbaggott/subscriptions","organizations_url":"https://api.github.com/users/dbaggott/orgs","repos_url":"https://api.github.com/users/dbaggott/repos","events_url":"https://api.github.com/users/dbaggott/events{/privacy}","received_events_url":"https://api.github.com/users/dbaggott/received_events","type":"User","site_admin":false},"created_at":"2016-01-12T15:09:45Z","updated_at":"2016-01-12T15:09:45Z","author_association":"NONE","body":"(And, I forgot to say, @clintongormley, thanks for the suggestions!)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/171249132","html_url":"https://github.com/elastic/elasticsearch/issues/15927#issuecomment-171249132","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15927","id":171249132,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTI0OTEzMg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-01-13T10:32:23Z","updated_at":"2016-01-13T10:32:23Z","author_association":"CONTRIBUTOR","body":"@dbaggott You're right that things have changed a lot in this area in the 2.x series, and that this has been discussed in a number of places, and also that the change can be quite painful (for which i apologise).  Just know that it isn't a change we made lightly.\n\ni tried to explain the reasoning behind it here: https://discuss.elastic.co/t/add-plugins-from-classpath-in-embedded-elasticsearch-client-node/36269/5?u=clinton_gormley\n\n> if one were to switch from a client node to a transport node aren't there important functional ramifications in turns of \"smart load balancing\" etc that are being lost?\n\nThe transport client still handle load balancing. It's slightly dumber in that it doesn't have the cluster state and so sends requests to \"The Cluster\" rather than directly to the node which holds the relevant data, so yes, there can be an extra network hop.  This is the same way that all of the HTTP clients work.\n\nPreviously we recommended embedding a node client into your application but we have moved away from this recommendation - it is fraught with issues.  Really, the only way to use a node client (if at all) is to run a standalone (not embedded) one on your local app server. Your application uses the transport client to talk to the node client on localhost, and the node client then sends the request to the right node in the cluster.\n\nHonestly, I'm not convinced that this setup is worth it.  One of the issues is: let's say you have 1,000 app servers... suddenly you have 1,000 extra nodes in your cluster, all of which need to receive cluster state updates!  Cluster state updates wait for acknowledgement, so suddenly you are subject to the latency of the slowest node out of an extra 1,000.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/171316721","html_url":"https://github.com/elastic/elasticsearch/issues/15927#issuecomment-171316721","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15927","id":171316721,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTMxNjcyMQ==","user":{"login":"dbaggott","id":112677,"node_id":"MDQ6VXNlcjExMjY3Nw==","avatar_url":"https://avatars1.githubusercontent.com/u/112677?v=4","gravatar_id":"","url":"https://api.github.com/users/dbaggott","html_url":"https://github.com/dbaggott","followers_url":"https://api.github.com/users/dbaggott/followers","following_url":"https://api.github.com/users/dbaggott/following{/other_user}","gists_url":"https://api.github.com/users/dbaggott/gists{/gist_id}","starred_url":"https://api.github.com/users/dbaggott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbaggott/subscriptions","organizations_url":"https://api.github.com/users/dbaggott/orgs","repos_url":"https://api.github.com/users/dbaggott/repos","events_url":"https://api.github.com/users/dbaggott/events{/privacy}","received_events_url":"https://api.github.com/users/dbaggott/received_events","type":"User","site_admin":false},"created_at":"2016-01-13T14:51:26Z","updated_at":"2016-01-13T14:51:26Z","author_association":"NONE","body":"@clintongormley, thanks for the helpful reply and for the link which I had read (and now read again).  Your caveat about large numbers of apps aside, running a local node client and talking to it on localhost is the most practical suggestion I've heard (at least for our development/deployment ecosystem).  I also see that that's a variation on [what's recommended in the 2.1 docs](https://www.elastic.co/guide/en/elasticsearch/reference/2.1/modules-node.html).  Our use of a Node-based client over a TransportClient is entirely motivated by the perceived benefits of being cluster-intimate.  If I can find the bandwidth, I'll test how much of a difference it actually makes for us.\n\nPreface: I'm not trying to argue for any course of action or convince anyone to do anything differently, I'm just trying to understand:  On the surface of things, it doesn't _seem_ entirely coherent to 1. have a library api that provides facilities for building a transport client with any arbitrary 3rd party plugin; 2. have that same api only support building client nodes without plugins.  In short, what would be the fundamental difference between running these two lines of code from an external application?\n\n``` java\nTransportClient.builder().settings(settings).addPlugin(MaliciousPlugin.class).build();\nNodeBuilder.nodeBuilder().settings(settings).addPlugin(MaliciousPlugin.class).build().client();\n```\n\nIn either case, the malicious plugin code running in the external app could represent itself as a node and join the cluster with malicious intent, no?  Ie, just because it's being loaded by a TransportClient, doesn't prevent the plugin from acting with evil intent.  And the issues w/r/t JarHell and class loaders apply to both?  Or am I missing something in my assumptions or thinking?\n\nAgain, thank you for taking the time to respond!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/171571791","html_url":"https://github.com/elastic/elasticsearch/issues/15927#issuecomment-171571791","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15927","id":171571791,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTU3MTc5MQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-01-14T08:34:35Z","updated_at":"2016-01-14T08:34:35Z","author_association":"CONTRIBUTOR","body":"> In either case, the malicious plugin code running in the external app could represent itself as a node and join the cluster with malicious intent, no? \n\nNo, that's the difference.  A transport client is **not** a node. It doesn't join the cluster. It is just a lightweight client that talks to the cluster.  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/171729758","html_url":"https://github.com/elastic/elasticsearch/issues/15927#issuecomment-171729758","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15927","id":171729758,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTcyOTc1OA==","user":{"login":"dbaggott","id":112677,"node_id":"MDQ6VXNlcjExMjY3Nw==","avatar_url":"https://avatars1.githubusercontent.com/u/112677?v=4","gravatar_id":"","url":"https://api.github.com/users/dbaggott","html_url":"https://github.com/dbaggott","followers_url":"https://api.github.com/users/dbaggott/followers","following_url":"https://api.github.com/users/dbaggott/following{/other_user}","gists_url":"https://api.github.com/users/dbaggott/gists{/gist_id}","starred_url":"https://api.github.com/users/dbaggott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbaggott/subscriptions","organizations_url":"https://api.github.com/users/dbaggott/orgs","repos_url":"https://api.github.com/users/dbaggott/repos","events_url":"https://api.github.com/users/dbaggott/events{/privacy}","received_events_url":"https://api.github.com/users/dbaggott/received_events","type":"User","site_admin":false},"created_at":"2016-01-14T18:23:46Z","updated_at":"2016-01-14T18:23:46Z","author_association":"NONE","body":"I get that distinction -- I was trying to suggest that, from a security perspective, the malicious plugin is malicious and so will, by definition, do things it's not supposed to do (like open up ports to emulate a node and join the cluster).\n\nI'm guessing what I'm missing is the assumption that the ES cluster is completely locked down from a network perspective and you expect that a client application that's only running a TransportClient would _only_ have access the cluster's http port whereas a client application running an embedded node would necessarily have broader network access to the cluster...  In the former case, it's considered \"safe\" _for the ES cluster_ to allow loading of a 3rd party plugin since they can only interact with the cluster via the http protocol which is hardened.  That, of course, provides no guarantees for the security of the _client application/server_ itself in the face of a malicious plugin that was loaded via the TransportClient.\n\nIn the perfect world, am I correct in thinking that a transport client should ideally support loading of plugins using a similarly secure security mechanism as the standard `bin/plugin install` mechanism?  I appreciate that that is probably a low priority and might contain difficulties that make it unattractive and/or impractical.  But, if that were the case, then loading a plugin via the TransportClient would be safer and loading plugins via embedded nodes would then be a non-issue...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/172666157","html_url":"https://github.com/elastic/elasticsearch/issues/15927#issuecomment-172666157","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15927","id":172666157,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MjY2NjE1Nw==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2016-01-18T22:01:52Z","updated_at":"2016-01-18T22:01:52Z","author_association":"MEMBER","body":"@dbaggott Malicious code is malicious code. With it, from a TransportClient, it could do anything that your app allows code to do. We can't lock down your jvm with SecurityManager as we do in Elasticsearch when you build a transport client. If you wish to run your own SecurityManager, please do, it is highly encouraged! Note that this has nothing to do with what a Node can do within the cluster.\n\nAs for the issue here, in master, the Node ctor that takes plugins is now public (and NodeBuilder has been removed). If you _really_ must do so, you can use the Node ctor as you did NodeBuilder before, but this is essentially unsupported, may break in any release, and for the reasons that have already been listed in this issue, is highly discouraged. It is much better to use a client, whether talking with a remove cluster, or a local node that is connected to the cluster.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/235691070","html_url":"https://github.com/elastic/elasticsearch/issues/15927#issuecomment-235691070","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15927","id":235691070,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNTY5MTA3MA==","user":{"login":"denov","id":1220969,"node_id":"MDQ6VXNlcjEyMjA5Njk=","avatar_url":"https://avatars3.githubusercontent.com/u/1220969?v=4","gravatar_id":"","url":"https://api.github.com/users/denov","html_url":"https://github.com/denov","followers_url":"https://api.github.com/users/denov/followers","following_url":"https://api.github.com/users/denov/following{/other_user}","gists_url":"https://api.github.com/users/denov/gists{/gist_id}","starred_url":"https://api.github.com/users/denov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/denov/subscriptions","organizations_url":"https://api.github.com/users/denov/orgs","repos_url":"https://api.github.com/users/denov/repos","events_url":"https://api.github.com/users/denov/events{/privacy}","received_events_url":"https://api.github.com/users/denov/received_events","type":"User","site_admin":false},"created_at":"2016-07-27T19:18:42Z","updated_at":"2016-07-27T19:23:42Z","author_association":"NONE","body":"the docs on - https://www.elastic.co/guide/en/elasticsearch/client/java-api/current/client-connected-to-client-node.html  don't seem to line up with this discussion.   i'm in the process of doing a 1.4 to 2.3 upgrade and have found the docs a bit confusing.  IMO, it shouldn't be hard to find some docs on how to configure a java app running on EC2.  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/235692716","html_url":"https://github.com/elastic/elasticsearch/issues/15927#issuecomment-235692716","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15927","id":235692716,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNTY5MjcxNg==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2016-07-27T19:25:01Z","updated_at":"2016-07-27T19:25:01Z","author_association":"MEMBER","body":"@denov See the docs for the upcoming 5.0 release, maybe that clarifies?\nhttps://www.elastic.co/guide/en/elasticsearch/client/java-api/master/client-connected-to-client-node.html\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/235693843","html_url":"https://github.com/elastic/elasticsearch/issues/15927#issuecomment-235693843","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15927","id":235693843,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNTY5Mzg0Mw==","user":{"login":"denov","id":1220969,"node_id":"MDQ6VXNlcjEyMjA5Njk=","avatar_url":"https://avatars3.githubusercontent.com/u/1220969?v=4","gravatar_id":"","url":"https://api.github.com/users/denov","html_url":"https://github.com/denov","followers_url":"https://api.github.com/users/denov/followers","following_url":"https://api.github.com/users/denov/following{/other_user}","gists_url":"https://api.github.com/users/denov/gists{/gist_id}","starred_url":"https://api.github.com/users/denov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/denov/subscriptions","organizations_url":"https://api.github.com/users/denov/orgs","repos_url":"https://api.github.com/users/denov/repos","events_url":"https://api.github.com/users/denov/events{/privacy}","received_events_url":"https://api.github.com/users/denov/received_events","type":"User","site_admin":false},"created_at":"2016-07-27T19:29:29Z","updated_at":"2016-07-27T19:30:27Z","author_association":"NONE","body":"@rjernst thanks for the link, but no.  that pages also says 'think about discovery plugins for example', i'm thinking.... but can't find the how.\n\nI'm just looking on how to load the cloud-aws https://www.elastic.co/guide/en/elasticsearch/plugins/current/cloud-aws.html for my app can discover the nodes running ES.\n\nin 1.x  i just needed the plugin in the classpath and it was all good.  now that's not the case.  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/235698182","html_url":"https://github.com/elastic/elasticsearch/issues/15927#issuecomment-235698182","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15927","id":235698182,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNTY5ODE4Mg==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2016-07-27T19:45:54Z","updated_at":"2016-07-27T19:45:54Z","author_association":"MEMBER","body":"@denov Please ask questions like this on https://discuss.elastic.co. There are multiple past discussions there that should help.\n","performed_via_github_app":null}]