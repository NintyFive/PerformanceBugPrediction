[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/576095447","html_url":"https://github.com/elastic/elasticsearch/issues/51201#issuecomment-576095447","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51201","id":576095447,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NjA5NTQ0Nw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-01-20T03:50:31Z","updated_at":"2020-01-20T03:50:31Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra (:Core/Infra/Circuit Breakers)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/576095453","html_url":"https://github.com/elastic/elasticsearch/issues/51201#issuecomment-576095453","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51201","id":576095453,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NjA5NTQ1Mw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-01-20T03:50:32Z","updated_at":"2020-01-20T03:50:32Z","author_association":"COLLABORATOR","body":"Pinging @elastic/ml-core (:ml)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/576296398","html_url":"https://github.com/elastic/elasticsearch/issues/51201#issuecomment-576296398","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51201","id":576296398,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NjI5NjM5OA==","user":{"login":"benwtrent","id":4357155,"node_id":"MDQ6VXNlcjQzNTcxNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/4357155?v=4","gravatar_id":"","url":"https://api.github.com/users/benwtrent","html_url":"https://github.com/benwtrent","followers_url":"https://api.github.com/users/benwtrent/followers","following_url":"https://api.github.com/users/benwtrent/following{/other_user}","gists_url":"https://api.github.com/users/benwtrent/gists{/gist_id}","starred_url":"https://api.github.com/users/benwtrent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benwtrent/subscriptions","organizations_url":"https://api.github.com/users/benwtrent/orgs","repos_url":"https://api.github.com/users/benwtrent/repos","events_url":"https://api.github.com/users/benwtrent/events{/privacy}","received_events_url":"https://api.github.com/users/benwtrent/received_events","type":"User","site_admin":false},"created_at":"2020-01-20T14:23:01Z","updated_at":"2020-01-20T14:23:15Z","author_association":"MEMBER","body":"Some `ExternalTestCluster` integration tests I wrote over the past week have been failing in a path I have never seen before:\r\n\r\nAll of these failures are due to\r\n```\r\njava.lang.AssertionError: Accounting breaker not reset to X on node <NODE>\r\nExpected: X\r\n     but: was Y\r\n```\r\nY is always less than X by a couple 100. I am not sure what `ensureEstimatedStats()` is trying to determine.\r\n\r\nhttps://github.com/elastic/elasticsearch/blob/5ba4f5fb3c98d7034cb307fd7f6774a33dcd9c94/test/framework/src/main/java/org/elasticsearch/test/ExternalTestCluster.java#L195..L198\r\n\r\n\r\nBoth of the failing tests call `_ingest/pipeline/simulate` and they are using the new(ish) asynchronous ingest document handling. They are also both using the same processor.\r\n\r\nBefore and after my tests, I create and delete some documents.\r\nIn one test I query an index.\r\nIn the other, I do not\r\n\r\nI am sometimes able to re-create this scenario in Kibana console using other async processors.\r\nBut other times it does not happen. I am not sure what tot make of this :/","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/576310350","html_url":"https://github.com/elastic/elasticsearch/issues/51201#issuecomment-576310350","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51201","id":576310350,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NjMxMDM1MA==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2020-01-20T14:57:05Z","updated_at":"2020-01-20T14:57:05Z","author_association":"CONTRIBUTOR","body":"The meaning of \"Accounting breaker not reset\" is discussed in https://github.com/elastic/elasticsearch/issues/30290#issuecomment-465134295\r\n\r\nIt probably means the cleanup steps that run between tests do not consider something related to ingest pipelines but the tests are written on the assumption that they will.  For example, maybe there's an assumption that the generic cleanup code that runs in between tests will delete all ingest pipelines and it doesn't.  Or maybe there's an assumption that the generic cleanup code will wait for ingest pipelines that are in the middle of doing something to complete and it doesn't.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/576595098","html_url":"https://github.com/elastic/elasticsearch/issues/51201#issuecomment-576595098","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51201","id":576595098,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NjU5NTA5OA==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2020-01-21T09:31:48Z","updated_at":"2020-01-21T09:31:48Z","author_association":"CONTRIBUTOR","body":"I muted the two simulate tests in `InferenceIngestIT` on master in d64e115dce95f8f42a7ed439807ae8ec2725caf9","performed_via_github_app":null}]