{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/58385","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58385/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58385/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/58385/events","html_url":"https://github.com/elastic/elasticsearch/issues/58385","id":642104846,"node_id":"MDU6SXNzdWU2NDIxMDQ4NDY=","number":58385,"title":"ES Kuromoji Tokenizer incorrect segmentation of font variant subtype","user":{"login":"HarshadRanganathan","id":32612787,"node_id":"MDQ6VXNlcjMyNjEyNzg3","avatar_url":"https://avatars3.githubusercontent.com/u/32612787?v=4","gravatar_id":"","url":"https://api.github.com/users/HarshadRanganathan","html_url":"https://github.com/HarshadRanganathan","followers_url":"https://api.github.com/users/HarshadRanganathan/followers","following_url":"https://api.github.com/users/HarshadRanganathan/following{/other_user}","gists_url":"https://api.github.com/users/HarshadRanganathan/gists{/gist_id}","starred_url":"https://api.github.com/users/HarshadRanganathan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HarshadRanganathan/subscriptions","organizations_url":"https://api.github.com/users/HarshadRanganathan/orgs","repos_url":"https://api.github.com/users/HarshadRanganathan/repos","events_url":"https://api.github.com/users/HarshadRanganathan/events{/privacy}","received_events_url":"https://api.github.com/users/HarshadRanganathan/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":23715,"node_id":"MDU6TGFiZWwyMzcxNQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Edocs","name":">docs","color":"db755e","default":false,"description":"General docs changes"},{"id":1967497573,"node_id":"MDU6TGFiZWwxOTY3NDk3NTcz","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Docs","name":"Team:Docs","color":"fef2c0","default":false,"description":"Meta label for docs team"},{"id":1967498216,"node_id":"MDU6TGFiZWwxOTY3NDk4MjE2","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Search","name":"Team:Search","color":"fef2c0","default":false,"description":"Meta label for search team"}],"state":"closed","locked":false,"assignee":{"login":"jrodewig","id":40268737,"node_id":"MDQ6VXNlcjQwMjY4NzM3","avatar_url":"https://avatars1.githubusercontent.com/u/40268737?v=4","gravatar_id":"","url":"https://api.github.com/users/jrodewig","html_url":"https://github.com/jrodewig","followers_url":"https://api.github.com/users/jrodewig/followers","following_url":"https://api.github.com/users/jrodewig/following{/other_user}","gists_url":"https://api.github.com/users/jrodewig/gists{/gist_id}","starred_url":"https://api.github.com/users/jrodewig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrodewig/subscriptions","organizations_url":"https://api.github.com/users/jrodewig/orgs","repos_url":"https://api.github.com/users/jrodewig/repos","events_url":"https://api.github.com/users/jrodewig/events{/privacy}","received_events_url":"https://api.github.com/users/jrodewig/received_events","type":"User","site_admin":false},"assignees":[{"login":"jrodewig","id":40268737,"node_id":"MDQ6VXNlcjQwMjY4NzM3","avatar_url":"https://avatars1.githubusercontent.com/u/40268737?v=4","gravatar_id":"","url":"https://api.github.com/users/jrodewig","html_url":"https://github.com/jrodewig","followers_url":"https://api.github.com/users/jrodewig/followers","following_url":"https://api.github.com/users/jrodewig/following{/other_user}","gists_url":"https://api.github.com/users/jrodewig/gists{/gist_id}","starred_url":"https://api.github.com/users/jrodewig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrodewig/subscriptions","organizations_url":"https://api.github.com/users/jrodewig/orgs","repos_url":"https://api.github.com/users/jrodewig/repos","events_url":"https://api.github.com/users/jrodewig/events{/privacy}","received_events_url":"https://api.github.com/users/jrodewig/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2020-06-19T16:48:18Z","updated_at":"2020-07-28T17:52:45Z","closed_at":"2020-07-28T17:52:45Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version** (`bin/elasticsearch --version`): 7.1.1\r\n\r\n**Plugins installed**:  [analysis-icu, analysis-kuromoji, discovery-ec2, repository-s3]\r\n\r\n**JVM version** (`java -version`): 12.0.1 (bundled jdk)\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): Linux amzn2.x86_64 GNU/Linux\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nSample text: ｏｆ\r\nExpected tokens: [\"of\"]\r\nActual tokens: [\"o\",\"f\"]\r\n\r\n**Steps to reproduce**:\r\n\r\n1. Send below request to analyze API\r\n\r\n```\r\nGET _analyze\r\n{\r\n  \"text\": \"一般社団法人Ａｒｔ　ａｎｄ　Ｃｕｌｔｕｒｅ　ｏｆ　Ｊａｐａｎ\",\r\n  \"analyzer\": \"kuromoji\",\r\n  \"explain\": true\r\n}\r\n```\r\n\r\n2. Analyze API returns below tokens where Ａｒｔ　ａｎｄ　Ｃｕｌｔｕｒｅ Ｊａｐａｎ are normalized and segmented as expected.\r\n\r\nHowever, ｏｆ is normalized and segmented as two tokens \"o\" and \"f\" rather than as single token \"of\".\r\n\r\n```\r\n{\r\n  \"detail\" : {\r\n    \"custom_analyzer\" : false,\r\n    \"analyzer\" : {\r\n      \"name\" : \"org.apache.lucene.analysis.ja.JapaneseAnalyzer\",\r\n      \"tokens\" : [\r\n        {\r\n          \"token\" : \"一般\",\r\n          \"start_offset\" : 0,\r\n          \"end_offset\" : 2,\r\n          \"type\" : \"word\",\r\n          \"position\" : 0,\r\n          \"baseForm\" : null,\r\n          \"bytes\" : \"[e4 b8 80 e8 88 ac]\",\r\n          \"inflectionForm\" : null,\r\n          \"inflectionForm (en)\" : null,\r\n          \"inflectionType\" : null,\r\n          \"inflectionType (en)\" : null,\r\n          \"keyword\" : false,\r\n          \"partOfSpeech\" : \"名詞-一般\",\r\n          \"partOfSpeech (en)\" : \"noun-common\",\r\n          \"positionLength\" : 1,\r\n          \"pronunciation\" : \"イッパン\",\r\n          \"pronunciation (en)\" : \"ippan\",\r\n          \"reading\" : \"イッパン\",\r\n          \"reading (en)\" : \"ippan\",\r\n          \"termFrequency\" : 1\r\n        },\r\n        {\r\n          \"token\" : \"社団\",\r\n          \"start_offset\" : 2,\r\n          \"end_offset\" : 4,\r\n          \"type\" : \"word\",\r\n          \"position\" : 1,\r\n          \"baseForm\" : null,\r\n          \"bytes\" : \"[e7 a4 be e5 9b a3]\",\r\n          \"inflectionForm\" : null,\r\n          \"inflectionForm (en)\" : null,\r\n          \"inflectionType\" : null,\r\n          \"inflectionType (en)\" : null,\r\n          \"keyword\" : false,\r\n          \"partOfSpeech\" : \"名詞-一般\",\r\n          \"partOfSpeech (en)\" : \"noun-common\",\r\n          \"positionLength\" : 1,\r\n          \"pronunciation\" : \"シャダン\",\r\n          \"pronunciation (en)\" : \"shadan\",\r\n          \"reading\" : \"シャダン\",\r\n          \"reading (en)\" : \"shadan\",\r\n          \"termFrequency\" : 1\r\n        },\r\n        {\r\n          \"token\" : \"法人\",\r\n          \"start_offset\" : 4,\r\n          \"end_offset\" : 6,\r\n          \"type\" : \"word\",\r\n          \"position\" : 2,\r\n          \"baseForm\" : null,\r\n          \"bytes\" : \"[e6 b3 95 e4 ba ba]\",\r\n          \"inflectionForm\" : null,\r\n          \"inflectionForm (en)\" : null,\r\n          \"inflectionType\" : null,\r\n          \"inflectionType (en)\" : null,\r\n          \"keyword\" : false,\r\n          \"partOfSpeech\" : \"名詞-一般\",\r\n          \"partOfSpeech (en)\" : \"noun-common\",\r\n          \"positionLength\" : 1,\r\n          \"pronunciation\" : \"ホージン\",\r\n          \"pronunciation (en)\" : \"hojin\",\r\n          \"reading\" : \"ホウジン\",\r\n          \"reading (en)\" : \"hōjin\",\r\n          \"termFrequency\" : 1\r\n        },\r\n        {\r\n          \"token\" : \"art\",\r\n          \"start_offset\" : 6,\r\n          \"end_offset\" : 9,\r\n          \"type\" : \"word\",\r\n          \"position\" : 3,\r\n          \"baseForm\" : null,\r\n          \"bytes\" : \"[61 72 74]\",\r\n          \"inflectionForm\" : null,\r\n          \"inflectionForm (en)\" : null,\r\n          \"inflectionType\" : null,\r\n          \"inflectionType (en)\" : null,\r\n          \"keyword\" : false,\r\n          \"partOfSpeech\" : \"名詞-一般\",\r\n          \"partOfSpeech (en)\" : \"noun-common\",\r\n          \"positionLength\" : 1,\r\n          \"pronunciation\" : null,\r\n          \"pronunciation (en)\" : null,\r\n          \"reading\" : null,\r\n          \"reading (en)\" : null,\r\n          \"termFrequency\" : 1\r\n        },\r\n        {\r\n          \"token\" : \"and\",\r\n          \"start_offset\" : 10,\r\n          \"end_offset\" : 13,\r\n          \"type\" : \"word\",\r\n          \"position\" : 4,\r\n          \"baseForm\" : null,\r\n          \"bytes\" : \"[61 6e 64]\",\r\n          \"inflectionForm\" : null,\r\n          \"inflectionForm (en)\" : null,\r\n          \"inflectionType\" : null,\r\n          \"inflectionType (en)\" : null,\r\n          \"keyword\" : false,\r\n          \"partOfSpeech\" : \"名詞-固有名詞-組織\",\r\n          \"partOfSpeech (en)\" : \"noun-proper-organization\",\r\n          \"positionLength\" : 1,\r\n          \"pronunciation\" : null,\r\n          \"pronunciation (en)\" : null,\r\n          \"reading\" : null,\r\n          \"reading (en)\" : null,\r\n          \"termFrequency\" : 1\r\n        },\r\n        {\r\n          \"token\" : \"culture\",\r\n          \"start_offset\" : 14,\r\n          \"end_offset\" : 21,\r\n          \"type\" : \"word\",\r\n          \"position\" : 5,\r\n          \"baseForm\" : null,\r\n          \"bytes\" : \"[63 75 6c 74 75 72 65]\",\r\n          \"inflectionForm\" : null,\r\n          \"inflectionForm (en)\" : null,\r\n          \"inflectionType\" : null,\r\n          \"inflectionType (en)\" : null,\r\n          \"keyword\" : false,\r\n          \"partOfSpeech\" : \"名詞-固有名詞-組織\",\r\n          \"partOfSpeech (en)\" : \"noun-proper-organization\",\r\n          \"positionLength\" : 1,\r\n          \"pronunciation\" : null,\r\n          \"pronunciation (en)\" : null,\r\n          \"reading\" : null,\r\n          \"reading (en)\" : null,\r\n          \"termFrequency\" : 1\r\n        },\r\n        {\r\n          \"token\" : \"o\",\r\n          \"start_offset\" : 22,\r\n          \"end_offset\" : 23,\r\n          \"type\" : \"word\",\r\n          \"position\" : 6,\r\n          \"baseForm\" : null,\r\n          \"bytes\" : \"[6f]\",\r\n          \"inflectionForm\" : null,\r\n          \"inflectionForm (en)\" : null,\r\n          \"inflectionType\" : null,\r\n          \"inflectionType (en)\" : null,\r\n          \"keyword\" : false,\r\n          \"partOfSpeech\" : \"記号-アルファベット\",\r\n          \"partOfSpeech (en)\" : \"symbol-alphabetic\",\r\n          \"positionLength\" : 1,\r\n          \"pronunciation\" : \"オー\",\r\n          \"pronunciation (en)\" : \"o\",\r\n          \"reading\" : \"オー\",\r\n          \"reading (en)\" : \"o\",\r\n          \"termFrequency\" : 1\r\n        },\r\n        {\r\n          \"token\" : \"f\",\r\n          \"start_offset\" : 23,\r\n          \"end_offset\" : 24,\r\n          \"type\" : \"word\",\r\n          \"position\" : 7,\r\n          \"baseForm\" : null,\r\n          \"bytes\" : \"[66]\",\r\n          \"inflectionForm\" : null,\r\n          \"inflectionForm (en)\" : null,\r\n          \"inflectionType\" : null,\r\n          \"inflectionType (en)\" : null,\r\n          \"keyword\" : false,\r\n          \"partOfSpeech\" : \"記号-アルファベット\",\r\n          \"partOfSpeech (en)\" : \"symbol-alphabetic\",\r\n          \"positionLength\" : 1,\r\n          \"pronunciation\" : \"エフ\",\r\n          \"pronunciation (en)\" : \"efu\",\r\n          \"reading\" : \"エフ\",\r\n          \"reading (en)\" : \"efu\",\r\n          \"termFrequency\" : 1\r\n        },\r\n        {\r\n          \"token\" : \"japan\",\r\n          \"start_offset\" : 25,\r\n          \"end_offset\" : 30,\r\n          \"type\" : \"word\",\r\n          \"position\" : 8,\r\n          \"baseForm\" : null,\r\n          \"bytes\" : \"[6a 61 70 61 6e]\",\r\n          \"inflectionForm\" : null,\r\n          \"inflectionForm (en)\" : null,\r\n          \"inflectionType\" : null,\r\n          \"inflectionType (en)\" : null,\r\n          \"keyword\" : false,\r\n          \"partOfSpeech\" : \"名詞-固有名詞-組織\",\r\n          \"partOfSpeech (en)\" : \"noun-proper-organization\",\r\n          \"positionLength\" : 1,\r\n          \"pronunciation\" : null,\r\n          \"pronunciation (en)\" : null,\r\n          \"reading\" : null,\r\n          \"reading (en)\" : null,\r\n          \"termFrequency\" : 1\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n\r\n","closed_by":{"login":"jrodewig","id":40268737,"node_id":"MDQ6VXNlcjQwMjY4NzM3","avatar_url":"https://avatars1.githubusercontent.com/u/40268737?v=4","gravatar_id":"","url":"https://api.github.com/users/jrodewig","html_url":"https://github.com/jrodewig","followers_url":"https://api.github.com/users/jrodewig/followers","following_url":"https://api.github.com/users/jrodewig/following{/other_user}","gists_url":"https://api.github.com/users/jrodewig/gists{/gist_id}","starred_url":"https://api.github.com/users/jrodewig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrodewig/subscriptions","organizations_url":"https://api.github.com/users/jrodewig/orgs","repos_url":"https://api.github.com/users/jrodewig/repos","events_url":"https://api.github.com/users/jrodewig/events{/privacy}","received_events_url":"https://api.github.com/users/jrodewig/received_events","type":"User","site_admin":false},"performed_via_github_app":null}