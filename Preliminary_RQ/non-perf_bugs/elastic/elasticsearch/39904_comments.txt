[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/471464535","html_url":"https://github.com/elastic/elasticsearch/issues/39904#issuecomment-471464535","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39904","id":471464535,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MTQ2NDUzNQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-03-11T09:27:09Z","updated_at":"2019-03-11T09:27:09Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/471917559","html_url":"https://github.com/elastic/elasticsearch/issues/39904#issuecomment-471917559","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39904","id":471917559,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MTkxNzU1OQ==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-03-12T09:15:23Z","updated_at":"2019-03-12T09:15:23Z","author_association":"CONTRIBUTOR","body":"I managed to reproduce this on a Win2012r2 image we use for packaging tests in CI. \r\nusing `gradlew -p x-pack/plugin/sql/qa/single-node check` without setting runtime java.  I do have `TMP` set. Running the `run.bat` wrapper script doesn't reproduces the problem, which leads me to believe the problem is that env vars do not get sent when this is called. \r\nThis reproduces with `RUNTIME_JAVA_HOME` set as well\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/472006980","html_url":"https://github.com/elastic/elasticsearch/issues/39904#issuecomment-472006980","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39904","id":472006980,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjAwNjk4MA==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-03-12T13:46:16Z","updated_at":"2019-03-12T13:46:16Z","author_association":"CONTRIBUTOR","body":"I can confirm that the  env is not inherited by the wrapper script:\r\n```\r\nCOMSPEC=C:\\Windows\\SYSTEM32\\cmd.exe\r\nES_JAVA_OPTS=-Xms512m -Xmx512m  -ea -esa\r\nES_PATH_CONF=C:\\ELASTI~1\\x-pack\\plugin\\sql\\qa\\single-node\\build\\cluster\\integTestCluster node0\\elasticsearch-8.0.0-SNAPSHOT\\config\r\nPATHEXT=.COM;.EXE;.BAT;.CMD;.VBS;.JS;.WS;.MSC\r\nPROMPT=$P$G\r\nSystemRoot=C:\\Windows\r\n```","performed_via_github_app":null}]