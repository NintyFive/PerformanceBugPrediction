[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/166400357","html_url":"https://github.com/elastic/elasticsearch/issues/15550#issuecomment-166400357","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15550","id":166400357,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NjQwMDM1Nw==","user":{"login":"tdoman","id":11098266,"node_id":"MDQ6VXNlcjExMDk4MjY2","avatar_url":"https://avatars1.githubusercontent.com/u/11098266?v=4","gravatar_id":"","url":"https://api.github.com/users/tdoman","html_url":"https://github.com/tdoman","followers_url":"https://api.github.com/users/tdoman/followers","following_url":"https://api.github.com/users/tdoman/following{/other_user}","gists_url":"https://api.github.com/users/tdoman/gists{/gist_id}","starred_url":"https://api.github.com/users/tdoman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tdoman/subscriptions","organizations_url":"https://api.github.com/users/tdoman/orgs","repos_url":"https://api.github.com/users/tdoman/repos","events_url":"https://api.github.com/users/tdoman/events{/privacy}","received_events_url":"https://api.github.com/users/tdoman/received_events","type":"User","site_admin":false},"created_at":"2015-12-21T19:41:56Z","updated_at":"2015-12-21T19:43:37Z","author_association":"NONE","body":"Sorry, forgot to include our definition for \"en_analyzer\":\n`\"en_analyzer\": {\n   \"type\": \"custom\",\n   \"tokenizer\": \"icu_tokenizer\",\n   \"filter\": [\n      \"icu_normalizer\",\n      \"en_stop_filter\",\n      \"en_stem_filter\",\n      \"icu_folding\",\n      \"shingle_filter\"\n     ],\n    \"char_filter\": [\n       \"html_strip\"\n     ]\n}`\n\n`\"en_stop_filter\": {\n          \"type\": \"stop\",\n          \"stopwords\": [\n            \"_english_\"\n          ]\n        },\n        \"en_stem_filter\": {\n          \"type\": \"stemmer\",\n          \"name\": \"minimal_english\"\n        }`\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/168047452","html_url":"https://github.com/elastic/elasticsearch/issues/15550#issuecomment-168047452","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15550","id":168047452,"node_id":"MDEyOklzc3VlQ29tbWVudDE2ODA0NzQ1Mg==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2015-12-30T18:11:04Z","updated_at":"2015-12-30T18:11:04Z","author_association":"MEMBER","body":"So I looked into this, the way that the `SimpleQueryParser` from Lucene works is\nthat it takes a single `Analyzer` to analyze the terms.\n\nI think from the ES side we might be able to expand a `SimpleQueryParser` parser\ninto multiple queries (passing a different analyzer for each field) that can be\ncombined into a single boolean query. It does sound like it would be worthwhile\nhowever, instead of tying the query to a single analyzer.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/168049934","html_url":"https://github.com/elastic/elasticsearch/issues/15550#issuecomment-168049934","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15550","id":168049934,"node_id":"MDEyOklzc3VlQ29tbWVudDE2ODA0OTkzNA==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2015-12-30T18:29:44Z","updated_at":"2015-12-30T18:29:44Z","author_association":"CONTRIBUTOR","body":"> So I looked into this, the way that the SimpleQueryParser from Lucene works is\n> that it takes a single Analyzer to analyze the terms.\n\nBecause no method should ever take anything else: if you want per-field behavior, pass e.g. PerFieldAnalyzerWrapper! It is really just that simple\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/168059531","html_url":"https://github.com/elastic/elasticsearch/issues/15550#issuecomment-168059531","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15550","id":168059531,"node_id":"MDEyOklzc3VlQ29tbWVudDE2ODA1OTUzMQ==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2015-12-30T19:23:20Z","updated_at":"2015-12-30T19:23:20Z","author_association":"MEMBER","body":"> if you want per-field behavior, pass e.g. PerFieldAnalyzerWrapper! It is\n> really just that simple\n\nThat's great, thanks for the pointer @rmuir!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/168511342","html_url":"https://github.com/elastic/elasticsearch/issues/15550#issuecomment-168511342","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15550","id":168511342,"node_id":"MDEyOklzc3VlQ29tbWVudDE2ODUxMTM0Mg==","user":{"login":"tdoman","id":11098266,"node_id":"MDQ6VXNlcjExMDk4MjY2","avatar_url":"https://avatars1.githubusercontent.com/u/11098266?v=4","gravatar_id":"","url":"https://api.github.com/users/tdoman","html_url":"https://github.com/tdoman","followers_url":"https://api.github.com/users/tdoman/followers","following_url":"https://api.github.com/users/tdoman/following{/other_user}","gists_url":"https://api.github.com/users/tdoman/gists{/gist_id}","starred_url":"https://api.github.com/users/tdoman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tdoman/subscriptions","organizations_url":"https://api.github.com/users/tdoman/orgs","repos_url":"https://api.github.com/users/tdoman/repos","events_url":"https://api.github.com/users/tdoman/events{/privacy}","received_events_url":"https://api.github.com/users/tdoman/received_events","type":"User","site_admin":false},"created_at":"2016-01-03T16:09:33Z","updated_at":"2016-01-03T16:09:33Z","author_association":"NONE","body":"Thanks guys, I just read issue #15634, we need that also.  Which versions of ES might we be able to get a fix for this?  As I stated above, we're using 1.7.2 currently.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/169163012","html_url":"https://github.com/elastic/elasticsearch/issues/15550#issuecomment-169163012","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15550","id":169163012,"node_id":"MDEyOklzc3VlQ29tbWVudDE2OTE2MzAxMg==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2016-01-05T23:04:22Z","updated_at":"2016-01-05T23:04:22Z","author_association":"MEMBER","body":"@tdoman I've been looking more into this to try and fix it, however, I can't\nreproduce the issue you are seeing, here is my full reproduction:\n\n``` json\nDELETE /myindex\n{}\n\nPOST /myindex\n{\n  \"settings\": {\n    \"number_of_shards\": 1,\n    \"number_of_replicas\": 0,\n    \"index\": {\n      \"analysis\": {\n        \"analyzer\": {\n          \"en_analyzer\": {\n            \"type\": \"custom\",\n            \"tokenizer\": \"icu_tokenizer\",\n            \"filter\": [\"icu_normalizer\",\n                       \"en_stop_filter\",\n                       \"en_stem_filter\",\n                       \"icu_folding\",\n                       \"shingle\" ],\n            \"char_filter\": [ \"html_strip\" ]\n          }\n        },\n        \"filter\": {\n          \"en_stop_filter\": {\n            \"type\": \"stop\",\n            \"stopwords\": [ \"_english_\" ]\n          },\n          \"en_stem_filter\": {\n            \"type\": \"stemmer\",\n            \"name\": \"minimal_english\"\n          }\n        }\n      }\n    }\n  },\n  \"mappings\": {\n    \"doc\": {\n      \"properties\": {\n        \"title\": {\n          \"type\": \"string\",\n          \"analyzer\": \"en_analyzer\"\n        }\n      }\n    }\n  }\n}\n\nPOST /myindex/doc/1?refresh\n{\n  \"title\": \"sale\"\n}\n\nPOST /myindex/doc/_search?pretty\n{\n  \"query\": {\n    \"query_string\": {\n      \"query\": \"sales\",\n      \"fields\": [\"title\"]\n    }\n  }\n}\n\nPOST /myindex/doc/_search?pretty\n{\n  \"query\": {\n    \"simple_query_string\": {\n      \"query\": \"sales\",\n      \"fields\": [\"title\"]\n    }\n  }\n}\n```\n\nBoth the `query_string` and `simple_query_string` versions of the query return\nthe single hit.\n\nIs there a difference I am missing for reproducing this?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/181962604","html_url":"https://github.com/elastic/elasticsearch/issues/15550#issuecomment-181962604","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15550","id":181962604,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MTk2MjYwNA==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2016-02-09T17:14:54Z","updated_at":"2016-02-09T17:14:54Z","author_association":"MEMBER","body":"Closing this as I haven't heard back, feel free to comment if it's still an issue.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/182070329","html_url":"https://github.com/elastic/elasticsearch/issues/15550#issuecomment-182070329","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15550","id":182070329,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MjA3MDMyOQ==","user":{"login":"tdoman","id":11098266,"node_id":"MDQ6VXNlcjExMDk4MjY2","avatar_url":"https://avatars1.githubusercontent.com/u/11098266?v=4","gravatar_id":"","url":"https://api.github.com/users/tdoman","html_url":"https://github.com/tdoman","followers_url":"https://api.github.com/users/tdoman/followers","following_url":"https://api.github.com/users/tdoman/following{/other_user}","gists_url":"https://api.github.com/users/tdoman/gists{/gist_id}","starred_url":"https://api.github.com/users/tdoman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tdoman/subscriptions","organizations_url":"https://api.github.com/users/tdoman/orgs","repos_url":"https://api.github.com/users/tdoman/repos","events_url":"https://api.github.com/users/tdoman/events{/privacy}","received_events_url":"https://api.github.com/users/tdoman/received_events","type":"User","site_admin":false},"created_at":"2016-02-09T21:15:08Z","updated_at":"2016-02-09T21:15:08Z","author_association":"NONE","body":"Yes thanks Lee, I still need to get back to this one and figure out why you can't reproduce w/ the mapping you gave.  I must be missing some detail.  I'll definitely ping you if I can get to the bottom of it.\n","performed_via_github_app":null}]