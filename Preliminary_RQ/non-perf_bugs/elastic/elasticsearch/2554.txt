{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/2554","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2554/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2554/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2554/events","html_url":"https://github.com/elastic/elasticsearch/issues/2554","id":10047920,"node_id":"MDU6SXNzdWUxMDA0NzkyMA==","number":2554,"title":"Terms facet silently ignores 'a'","user":{"login":"iwein","id":57862,"node_id":"MDQ6VXNlcjU3ODYy","avatar_url":"https://avatars2.githubusercontent.com/u/57862?v=4","gravatar_id":"","url":"https://api.github.com/users/iwein","html_url":"https://github.com/iwein","followers_url":"https://api.github.com/users/iwein/followers","following_url":"https://api.github.com/users/iwein/following{/other_user}","gists_url":"https://api.github.com/users/iwein/gists{/gist_id}","starred_url":"https://api.github.com/users/iwein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iwein/subscriptions","organizations_url":"https://api.github.com/users/iwein/orgs","repos_url":"https://api.github.com/users/iwein/repos","events_url":"https://api.github.com/users/iwein/events{/privacy}","received_events_url":"https://api.github.com/users/iwein/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2013-01-17T06:35:43Z","updated_at":"2013-01-18T07:01:54Z","closed_at":"2013-01-18T07:01:54Z","author_association":"NONE","active_lock_reason":null,"body":"I've tried the following:\n\n```\n curl -XPOST 'http://localhost:9200/foo/test' -d '{\"d\":\"a\", \"p\":2}'\n curl -XPOST 'http://localhost:9200/foo/test' -d '{\"d\":\"b\", \"p\":2}'\n curl -XPOST 'http://localhost:9200/foo/test' -d '{\"d\":\"c\", \"p\":2}'\n```\n\nThen a facetted query on d.\n\n```\n curl -XGET 'http://localhost:9200/foo/_search?pretty=true' -d @foo-query \n```\n\nwhere `foo-query` contains\n\n```\n{\n\"fields\": [\"d\" , \"p\"],\n\"query\": {\n    \"match_all\": {}\n},\n\"facets\": {\n    \"f1\": {\n        \"terms\": {\n            \"field\": \"d\"\n        }\n    }\n}\n}\n```\n\nThe result excludes the count for d=='a': \n\n```\n\"facets\" : {\n  \"f1\" : {\n    \"_type\" : \"terms\",\n    \"missing\" : 1,\n    \"total\" : 2,\n    \"other\" : 0,\n    \"terms\" : [ {\n      \"term\" : \"c\",\n      \"count\" : 1\n    }, {\n      \"term\" : \"b\",\n      \"count\" : 1\n    } ]\n  }\n}\n```\n\nBut that doesn't seem to relate to anything I have done. If I try with different values (not 'a') it works fine.\n","closed_by":{"login":"iwein","id":57862,"node_id":"MDQ6VXNlcjU3ODYy","avatar_url":"https://avatars2.githubusercontent.com/u/57862?v=4","gravatar_id":"","url":"https://api.github.com/users/iwein","html_url":"https://github.com/iwein","followers_url":"https://api.github.com/users/iwein/followers","following_url":"https://api.github.com/users/iwein/following{/other_user}","gists_url":"https://api.github.com/users/iwein/gists{/gist_id}","starred_url":"https://api.github.com/users/iwein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iwein/subscriptions","organizations_url":"https://api.github.com/users/iwein/orgs","repos_url":"https://api.github.com/users/iwein/repos","events_url":"https://api.github.com/users/iwein/events{/privacy}","received_events_url":"https://api.github.com/users/iwein/received_events","type":"User","site_admin":false},"performed_via_github_app":null}