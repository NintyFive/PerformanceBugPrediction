{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/21528","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21528/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21528/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21528/events","html_url":"https://github.com/elastic/elasticsearch/issues/21528","id":189071765,"node_id":"MDU6SXNzdWUxODkwNzE3NjU=","number":21528,"title":"Shard allocation same host based on hostname only","user":{"login":"juntezhang","id":1325546,"node_id":"MDQ6VXNlcjEzMjU1NDY=","avatar_url":"https://avatars3.githubusercontent.com/u/1325546?v=4","gravatar_id":"","url":"https://api.github.com/users/juntezhang","html_url":"https://github.com/juntezhang","followers_url":"https://api.github.com/users/juntezhang/followers","following_url":"https://api.github.com/users/juntezhang/following{/other_user}","gists_url":"https://api.github.com/users/juntezhang/gists{/gist_id}","starred_url":"https://api.github.com/users/juntezhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/juntezhang/subscriptions","organizations_url":"https://api.github.com/users/juntezhang/orgs","repos_url":"https://api.github.com/users/juntezhang/repos","events_url":"https://api.github.com/users/juntezhang/events{/privacy}","received_events_url":"https://api.github.com/users/juntezhang/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2016-11-14T10:02:56Z","updated_at":"2016-11-14T12:41:43Z","closed_at":"2016-11-14T12:41:43Z","author_association":"NONE","active_lock_reason":null,"body":"**Shard allocation same host based on hostname only**:\r\n\r\nI want to make sure the primary shards are at least in 1 rack. \r\nI want to make sure the same primary and replica shards are not in the same zone.\r\nAlso see this thread here: https://discuss.elastic.co/t/shard-awareness-multiple-awareness-attributes/65506/4\r\n\r\nThere is a cluster level shard allocation setting \r\n> cluster.routing.allocation.same_shard.host \r\n\r\nIt allows to perform a check to prevent allocation of multiple instances of the same shard on a single host, based on host name and host address.\r\n\r\nIt would be really useful if the check can also be performed when the host (node) name is the same while the addresses are different. For example:\r\n> cluster.routing.allocation.same_shard.hostname\r\n\r\n","closed_by":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"performed_via_github_app":null}