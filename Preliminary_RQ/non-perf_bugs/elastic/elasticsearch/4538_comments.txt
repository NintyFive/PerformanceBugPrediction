[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/31170522","html_url":"https://github.com/elastic/elasticsearch/issues/4538#issuecomment-31170522","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4538","id":31170522,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTcwNTIy","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2013-12-24T12:49:48Z","updated_at":"2013-12-24T12:49:48Z","author_association":"MEMBER","body":"The UpdateRequest#parent() method should only be used to set routing if not set already via the routing setter, it doesn't set the _parent field (see the java doc).\n\nYou should set the `_parent` field in the index request that you can pass via UpdateRequest#doc(IndexRequest)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/31190166","html_url":"https://github.com/elastic/elasticsearch/issues/4538#issuecomment-31190166","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4538","id":31190166,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTkwMTY2","user":{"login":"sandy6jain","id":6249800,"node_id":"MDQ6VXNlcjYyNDk4MDA=","avatar_url":"https://avatars1.githubusercontent.com/u/6249800?v=4","gravatar_id":"","url":"https://api.github.com/users/sandy6jain","html_url":"https://github.com/sandy6jain","followers_url":"https://api.github.com/users/sandy6jain/followers","following_url":"https://api.github.com/users/sandy6jain/following{/other_user}","gists_url":"https://api.github.com/users/sandy6jain/gists{/gist_id}","starred_url":"https://api.github.com/users/sandy6jain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sandy6jain/subscriptions","organizations_url":"https://api.github.com/users/sandy6jain/orgs","repos_url":"https://api.github.com/users/sandy6jain/repos","events_url":"https://api.github.com/users/sandy6jain/events{/privacy}","received_events_url":"https://api.github.com/users/sandy6jain/received_events","type":"User","site_admin":false},"created_at":"2013-12-25T02:48:25Z","updated_at":"2013-12-25T02:49:35Z","author_association":"NONE","body":"Thanks @martijnvg, that works :+1:  but, when docAsUpsert as true & it can create new document than it should set _parent mapping field. It seems little confusing to me as parent() method in update action has different behaviour than other actions.\nIf you have any performance numbers of setting parent via UpdateRequest in a very high update(refresh) payload, can you please help me in that.\nThanks a lot for your response\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/31256930","html_url":"https://github.com/elastic/elasticsearch/issues/4538#issuecomment-31256930","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4538","id":31256930,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjU2OTMw","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2013-12-27T11:20:16Z","updated_at":"2013-12-27T11:20:27Z","author_association":"MEMBER","body":"In the update request, the parent method's purpose if for routing only. I think it should be removed, to avoid confusion.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69742514","html_url":"https://github.com/elastic/elasticsearch/issues/4538#issuecomment-69742514","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4538","id":69742514,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NzQyNTE0","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2015-01-13T13:18:20Z","updated_at":"2015-01-13T13:18:20Z","author_association":"MEMBER","body":"I misunderstood what had to be done for this issue. The `parent` option should not have been removed instead the parent option shouldn't update the parent of an existing document. This was already the case as the update logic ignores the parent option (and routing option too).\n\nThe issue here is that although in normal use case the parent option is ignore and just a place holder for routing, in the case a document doesn't exist the parent option should be delegated to the upsert document.\n\nI'll do the following changes:\n- Revert the commit on master.\n- Make sure that if parent has been set on update request that it delegates this to the parent option on upsert request or doc request if `doc_as_upsert` option has been set to true.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76380797","html_url":"https://github.com/elastic/elasticsearch/issues/4538#issuecomment-76380797","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4538","id":76380797,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MzgwNzk3","user":{"login":"lukens","id":686128,"node_id":"MDQ6VXNlcjY4NjEyOA==","avatar_url":"https://avatars1.githubusercontent.com/u/686128?v=4","gravatar_id":"","url":"https://api.github.com/users/lukens","html_url":"https://github.com/lukens","followers_url":"https://api.github.com/users/lukens/followers","following_url":"https://api.github.com/users/lukens/following{/other_user}","gists_url":"https://api.github.com/users/lukens/gists{/gist_id}","starred_url":"https://api.github.com/users/lukens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukens/subscriptions","organizations_url":"https://api.github.com/users/lukens/orgs","repos_url":"https://api.github.com/users/lukens/repos","events_url":"https://api.github.com/users/lukens/events{/privacy}","received_events_url":"https://api.github.com/users/lukens/received_events","type":"User","site_admin":false},"created_at":"2015-02-27T11:26:51Z","updated_at":"2015-02-27T11:26:51Z","author_association":"CONTRIBUTOR","body":"Any timeline as to when this might get resolved?\n\nAfter spending a morning trying to figure out why my `has_child` query wasn't working, I tracked it down to the Java API not setting the parent when inserting on an upsert.\n\nThis has left me a bit scuppered.\n\nAny suggestions for a workaround would also be appreciated. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76381350","html_url":"https://github.com/elastic/elasticsearch/issues/4538#issuecomment-76381350","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4538","id":76381350,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MzgxMzUw","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2015-02-27T11:31:46Z","updated_at":"2015-02-27T11:31:46Z","author_association":"MEMBER","body":"@lukens #9612 fixes the issue. It has been targeted to 2.0,  but I think it can be included in 1.x branch, which means it make it in 1.5 release.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76388590","html_url":"https://github.com/elastic/elasticsearch/issues/4538#issuecomment-76388590","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4538","id":76388590,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Mzg4NTkw","user":{"login":"lukens","id":686128,"node_id":"MDQ6VXNlcjY4NjEyOA==","avatar_url":"https://avatars1.githubusercontent.com/u/686128?v=4","gravatar_id":"","url":"https://api.github.com/users/lukens","html_url":"https://github.com/lukens","followers_url":"https://api.github.com/users/lukens/followers","following_url":"https://api.github.com/users/lukens/following{/other_user}","gists_url":"https://api.github.com/users/lukens/gists{/gist_id}","starred_url":"https://api.github.com/users/lukens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukens/subscriptions","organizations_url":"https://api.github.com/users/lukens/orgs","repos_url":"https://api.github.com/users/lukens/repos","events_url":"https://api.github.com/users/lukens/events{/privacy}","received_events_url":"https://api.github.com/users/lukens/received_events","type":"User","site_admin":false},"created_at":"2015-02-27T12:40:25Z","updated_at":"2015-02-27T12:40:25Z","author_association":"CONTRIBUTOR","body":"Thanks, I've copied in the changes to `UpdateRequest` and `UpdateHelper` from the pull request into the 1.4.4 versions of those classes, and have managed to get it working.\n\nI believe I found an issue with the changes though, and have added a comment: https://github.com/elasticsearch/elasticsearch/pull/9612/files#r25503572\n","performed_via_github_app":null}]