{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/43423","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43423/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43423/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43423/events","html_url":"https://github.com/elastic/elasticsearch/issues/43423","id":458640990,"node_id":"MDU6SXNzdWU0NTg2NDA5OTA=","number":43423,"title":"JsonGenerationException in CloseIndexResponse.ShardResult.Failure#toXContent","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"labels":[{"id":836504707,"node_id":"MDU6TGFiZWw4MzY1MDQ3MDc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Distributed","name":":Distributed/Distributed","color":"0e8a16","default":false,"description":"A catch all label for anything in the Distributed Area. If you aren't sure, use this one."},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":1352927464,"node_id":"MDU6TGFiZWwxMzUyOTI3NDY0","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v7.3.0","name":"v7.3.0","color":"dddddd","default":false,"description":""},{"id":1194435738,"node_id":"MDU6TGFiZWwxMTk0NDM1NzM4","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v8.0.0","name":"v8.0.0","color":"dddddd","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"assignees":[{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2019-06-20T12:54:24Z","updated_at":"2019-06-21T12:29:46Z","closed_at":"2019-06-21T12:29:46Z","author_association":"MEMBER","active_lock_reason":null,"body":"The nested CloseIndexResponse failure class generated json deserialization exceptions in recent tests: \r\n\r\nhttps://scans.gradle.com/s/3lwde6ivrfrmu/console-log/raw?task=:qa:mixed-cluster:v7.3.0%23mixedClusterTestRunner\r\n\r\n```\r\norg.elasticsearch.backwards.MixedClusterClientYamlTestSuiteIT > test {p0=cluster.state/30_expand_wildcards/Test allow_no_indices parameter} FAILED\r\n    java.lang.AssertionError: Failure at [cluster.state/30_expand_wildcards:25]: expected [2xx] status code but api [indices.close] returned [500 Internal Server Error] [{\"error\":{\"root_cause\":[{\"type\":\"json_generation_exception\",\"reason\":\"Can not start an object, expecting field name (context: Object)\",\"stack_trace\":\"[Can not start an object, expecting field name (context: Object)]; \r\nnested: JsonGenerationException[Can not start an object, expecting field name (context: Object)];\r\norg.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:639)\r\norg.elasticsearch.ElasticsearchException.generateFailureXContent(ElasticsearchException.java:567)\r\norg.elasticsearch.rest.BytesRestResponse.build(BytesRestResponse.java:138)\\n\\tat org.elasticsearch.rest.BytesRestResponse.<init>(BytesRestResponse.java:96)\\n\\tat org.elasticsearch.rest.BytesRestResponse.<init>(BytesRestResponse.java:91)\r\norg.elasticsearch.rest.action.RestActionListener.onFailure(RestActionListener.java:58)\r\norg.elasticsearch.rest.action.RestActionListener.onResponse(RestActionListener.java:49)\r\n[...]\r\nCaused by: com.fasterxml.jackson.core.JsonGenerationException: Can not start an object, expecting field name (context: Object)\r\ncom.fasterxml.jackson.core.JsonGenerator._reportError(JsonGenerator.java:1897)\r\ncom.fasterxml.jackson.core.json.JsonGeneratorImpl._reportCantWriteValueExpectName(JsonGeneratorImpl.java:244)\r\ncom.fasterxml.jackson.core.json.UTF8JsonGenerator._verifyValueWrite(UTF8JsonGenerator.java:1033)\r\ncom.fasterxml.jackson.core.json.UTF8JsonGenerator.writeStartObject(UTF8JsonGenerator.java:313)\r\norg.elasticsearch.common.xcontent.json.JsonXContentGenerator.writeStartObject(JsonXContentGenerator.java:156)\r\norg.elasticsearch.common.xcontent.XContentBuilder.startObject(XContentBuilder.java:255)\r\norg.elasticsearch.action.support.DefaultShardOperationFailedException.toXContent(DefaultShardOperationFailedException.java:94)\r\norg.elasticsearch.action.admin.indices.close.CloseIndexResponse$ShardResult$Failure.toXContent(CloseIndexResponse.java:282)\r\norg.elasticsearch.action.admin.indices.close.CloseIndexResponse$ShardResult.toXContent(CloseIndexResponse.java:231)\r\norg.elasticsearch.action.admin.indices.close.CloseIndexResponse$IndexResult.toXContent(CloseIndexResponse.java:172)\r\norg.elasticsearch.action.admin.indices.close.CloseIndexResponse.addCustomFields(CloseIndexResponse.java:85)\r\norg.elasticsearch.action.support.master.AcknowledgedResponse.toXContent(AcknowledgedResponse.java:81)\r\n[...]\r\n```\r\n\r\nI suspect the failure class to not implement `ToXContentObject` correctly to generate a self-contained json object like all Failure classes should.","closed_by":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"performed_via_github_app":null}