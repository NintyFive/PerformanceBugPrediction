{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/8310","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8310/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8310/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8310/events","html_url":"https://github.com/elastic/elasticsearch/issues/8310","id":47409854,"node_id":"MDU6SXNzdWU0NzQwOTg1NA==","number":8310,"title":"NPE on Snapshots","user":{"login":"tankbusta","id":592749,"node_id":"MDQ6VXNlcjU5Mjc0OQ==","avatar_url":"https://avatars0.githubusercontent.com/u/592749?v=4","gravatar_id":"","url":"https://api.github.com/users/tankbusta","html_url":"https://github.com/tankbusta","followers_url":"https://api.github.com/users/tankbusta/followers","following_url":"https://api.github.com/users/tankbusta/following{/other_user}","gists_url":"https://api.github.com/users/tankbusta/gists{/gist_id}","starred_url":"https://api.github.com/users/tankbusta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tankbusta/subscriptions","organizations_url":"https://api.github.com/users/tankbusta/orgs","repos_url":"https://api.github.com/users/tankbusta/repos","events_url":"https://api.github.com/users/tankbusta/events{/privacy}","received_events_url":"https://api.github.com/users/tankbusta/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"assignees":[{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2014-10-31T15:55:41Z","updated_at":"2014-11-02T18:13:48Z","closed_at":"2014-11-02T18:13:48Z","author_association":"NONE","active_lock_reason":null,"body":"I'm seeing NPE's occur on random shards while performing a snapshot. Cluster Health throughout the process is green with very little CPU usage and heap. I usually try and run another snapshot after it finishes and the previous failed shards will complete and a new set will fail. \n\n```\nhost                 ip        heap.percent ram.percent load node.role master name\n<redacted>    127.0.1.1           55          59 0.38 d         *      Caldari\n<redacted> 127.0.1.1           40          56 0.01 d         m      Amarr\n<redacted> 127.0.1.1           44          56 0.01 d         m      Minmatar\n<redacted> 127.0.1.1           30          66 0.00 d         m      Gallente\n```\n\n```\n[2014-10-31 15:35:31,771][WARN ][snapshots                ] [Amarr] [[<idx_name>][2]] [s3_backups:1414767797] failed to create snapshot\norg.elasticsearch.index.snapshots.IndexShardSnapshotFailedException: [<idx_name>][2] null\n    at org.elasticsearch.index.snapshots.blobstore.BlobStoreIndexShardRepository.snapshot(BlobStoreIndexShardRepository.java:141)\n    at org.elasticsearch.index.snapshots.IndexShardSnapshotAndRestoreService.snapshot(IndexShardSnapshotAndRestoreService.java:86)\n    at org.elasticsearch.snapshots.SnapshotsService$6.run(SnapshotsService.java:829)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:744)\nCaused by: java.lang.NullPointerException\n    at org.elasticsearch.index.snapshots.blobstore.BlobStoreIndexShardRepository$SnapshotContext.snapshot(BlobStoreIndexShardRepository.java:456)\n    at org.elasticsearch.index.snapshots.blobstore.BlobStoreIndexShardRepository.snapshot(BlobStoreIndexShardRepository.java:131)\n    ... 5 more\n```\n","closed_by":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"performed_via_github_app":null}