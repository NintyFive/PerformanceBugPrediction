[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/73680744","html_url":"https://github.com/elastic/elasticsearch/issues/9523#issuecomment-73680744","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9523","id":73680744,"node_id":"MDEyOklzc3VlQ29tbWVudDczNjgwNzQ0","user":{"login":"knoxxs","id":1270959,"node_id":"MDQ6VXNlcjEyNzA5NTk=","avatar_url":"https://avatars2.githubusercontent.com/u/1270959?v=4","gravatar_id":"","url":"https://api.github.com/users/knoxxs","html_url":"https://github.com/knoxxs","followers_url":"https://api.github.com/users/knoxxs/followers","following_url":"https://api.github.com/users/knoxxs/following{/other_user}","gists_url":"https://api.github.com/users/knoxxs/gists{/gist_id}","starred_url":"https://api.github.com/users/knoxxs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/knoxxs/subscriptions","organizations_url":"https://api.github.com/users/knoxxs/orgs","repos_url":"https://api.github.com/users/knoxxs/repos","events_url":"https://api.github.com/users/knoxxs/events{/privacy}","received_events_url":"https://api.github.com/users/knoxxs/received_events","type":"User","site_admin":false},"created_at":"2015-02-10T10:55:14Z","updated_at":"2015-02-10T10:55:14Z","author_association":"NONE","body":"There should be a null check before setting `from` and `to` in the builder.\n\n``` java\nbuilder.startObject(name);\nif (from != null) {\n    builder.field(\"from\", from);\n    builder.field(\"include_lower\", includeLower);\n}\nif (to != null) {\n    builder.field(\"to\", to);\n    builder.field(\"include_upper\", includeUpper);\n}\nif (timeZone != null) {\n    builder.field(\"time_zone\", timeZone);\n}\nbuilder.endObject();\n```\n\n@clintongormley is this fine. Should I do it?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/74050466","html_url":"https://github.com/elastic/elasticsearch/issues/9523#issuecomment-74050466","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9523","id":74050466,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MDUwNDY2","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-02-12T10:40:31Z","updated_at":"2015-02-12T10:40:31Z","author_association":"CONTRIBUTOR","body":"@knoxxs looks good - please go ahead and open a PR (and sign the CLA if you haven't done so already).  Also, would be good to do the same thing for RangeQueryBuilder, and to add tests as well\n\nthanks!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/74373089","html_url":"https://github.com/elastic/elasticsearch/issues/9523#issuecomment-74373089","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9523","id":74373089,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MzczMDg5","user":{"login":"knoxxs","id":1270959,"node_id":"MDQ6VXNlcjEyNzA5NTk=","avatar_url":"https://avatars2.githubusercontent.com/u/1270959?v=4","gravatar_id":"","url":"https://api.github.com/users/knoxxs","html_url":"https://github.com/knoxxs","followers_url":"https://api.github.com/users/knoxxs/followers","following_url":"https://api.github.com/users/knoxxs/following{/other_user}","gists_url":"https://api.github.com/users/knoxxs/gists{/gist_id}","starred_url":"https://api.github.com/users/knoxxs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/knoxxs/subscriptions","organizations_url":"https://api.github.com/users/knoxxs/orgs","repos_url":"https://api.github.com/users/knoxxs/repos","events_url":"https://api.github.com/users/knoxxs/events{/privacy}","received_events_url":"https://api.github.com/users/knoxxs/received_events","type":"User","site_admin":false},"created_at":"2015-02-14T12:23:19Z","updated_at":"2015-02-14T12:23:19Z","author_association":"NONE","body":"@clintongormley \nI have changed both the files and wrote some tests, but my tests are behaving weird. Sometimes they run fine sometime they break. For example see the following excerpt of my test\n\n``` java\n@Test\n    public void testRangeQueryWithNullLimits() {\n        String indexName = \"test\";\n        String type = \"type1\";\n        createIndex(indexName);\n\n        String doc1 = \"{\\n\" +\n                \"  \\\"field\\\": 1\\n\" +\n                \"}\";\n        String doc2 = \"{\\n\" +\n                \"  \\\"field\\\": 5\\n\" +\n                \"}\";\n        String doc3 = \"{\\n\" +\n                \"  \\\"field\\\": 10\\n\" +\n                \"}\";\n        index(indexName, type, \"1\", doc1);\n        index(indexName, type, \"2\", doc2);\n        index(indexName, type, \"3\", doc3);\n\n        RangeQueryBuilder rangeQueryBuilder = QueryBuilders.rangeQuery(\"field\");\n        rangeQueryBuilder.from(null);\n        rangeQueryBuilder.to(5);\n        SearchResponse searchResponse = search(rangeQueryBuilder, indexName);\n        assertSearchHits(searchResponse, \"1\", \"2\");\n}\n```\n\nThe query is \n\n``` json\n{\n  \"range\" : {\n    \"field\" : {\n      \"to\" : 5,\n      \"include_upper\" : true\n    }\n  }\n}\n```\n\nSometimes I am getting this response:\n\n``` json\n{\n  \"took\" : 267,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 6,\n    \"successful\" : 6,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 2,\n    \"max_score\" : 1.0,\n    \"hits\" : [ {\n      \"_index\" : \"test\",\n      \"_type\" : \"type1\",\n      \"_id\" : \"2\",\n      \"_score\" : 1.0,\n      \"_source\":{\n  \"field\": 5\n}\n    }, {\n      \"_index\" : \"test\",\n      \"_type\" : \"type1\",\n      \"_id\" : \"1\",\n      \"_score\" : 1.0,\n      \"_source\":{\n  \"field\": 1\n}\n    } ]\n  }\n}\n```\n\nand sometimes this\n\n``` json\n{\n  \"took\" : 101,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 1,\n    \"successful\" : 1,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 0,\n    \"max_score\" : null,\n    \"hits\" : [ ]\n  }\n}\n```\n\nI think I am doing some naive mistake. I am not able to understand why this could happen for same code. Can you help?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/74391142","html_url":"https://github.com/elastic/elasticsearch/issues/9523#issuecomment-74391142","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9523","id":74391142,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MzkxMTQy","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-02-14T20:42:24Z","updated_at":"2015-02-14T20:42:24Z","author_association":"MEMBER","body":"@knoxxs You will want to do a refresh after indexing the docs, to ensure all are visible.\n\nTry something like this.  I've added comments to explain what some parts are doing.\n\n```\ncreateIndex(\"test\")\nensureGreen(\"test\") // technically only ensureYellow is necessary, to make sure we can start indexing\nindexRandom(true, // this flag indicates we should refresh after indexing these docs\n            client().prepareIndex(\"test\", \"type1\", \"1\").setSource(\"field\", 1),\n            client().prepareIndex(\"test\", \"type1\", \"2\").setSource(\"field\", 5),\n            client().prepareIndex(\"test\", \"type1\", \"3\").setSource(\"field\", 10));\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/194371303","html_url":"https://github.com/elastic/elasticsearch/issues/9523#issuecomment-194371303","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9523","id":194371303,"node_id":"MDEyOklzc3VlQ29tbWVudDE5NDM3MTMwMw==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2016-03-09T16:17:30Z","updated_at":"2016-03-09T16:17:30Z","author_association":"MEMBER","body":"In current versions we decided to always render `null` as a valid from/to value, the parser also accepts those. So I think this can be closed.\n","performed_via_github_app":null}]