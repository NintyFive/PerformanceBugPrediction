{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/21108","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21108/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21108/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21108/events","html_url":"https://github.com/elastic/elasticsearch/issues/21108","id":185062282,"node_id":"MDU6SXNzdWUxODUwNjIyODI=","number":21108,"title":"elasticsearch 2.4.0 Cluster issues:","user":{"login":"zfjoy520","id":91816,"node_id":"MDQ6VXNlcjkxODE2","avatar_url":"https://avatars1.githubusercontent.com/u/91816?v=4","gravatar_id":"","url":"https://api.github.com/users/zfjoy520","html_url":"https://github.com/zfjoy520","followers_url":"https://api.github.com/users/zfjoy520/followers","following_url":"https://api.github.com/users/zfjoy520/following{/other_user}","gists_url":"https://api.github.com/users/zfjoy520/gists{/gist_id}","starred_url":"https://api.github.com/users/zfjoy520/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zfjoy520/subscriptions","organizations_url":"https://api.github.com/users/zfjoy520/orgs","repos_url":"https://api.github.com/users/zfjoy520/repos","events_url":"https://api.github.com/users/zfjoy520/events{/privacy}","received_events_url":"https://api.github.com/users/zfjoy520/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2016-10-25T09:19:15Z","updated_at":"2016-10-25T14:39:11Z","closed_at":"2016-10-25T10:51:29Z","author_association":"NONE","active_lock_reason":null,"body":"elasticsearch-2.4.0 Cluster Server configuration : 4 servers （8 core 16G Memory，800G disk with Ali cloud server）\n   shards info:\n    • \"number_of_shards\": \"4\",\n    • \"number_of_replicas\": \"1\",\nthe doc is: 512,977,028 docs,\ntotal data in cluster :1.01TB (why??)\n\nelasticsearch-1.7.1 Cluster Server configuration :  4 servers （8 core 16G Memory，500G disk with Ali cloud server）\n\n   shards info:\n    • \"number_of_shards\": “5”,\n    • \"number_of_replicas\": \"1\",\n  the doc is: 520,546,089 docs\n total data in cluster :751.11G (why??)\n\n issues:\n\n Data is an application that uses 2 sidekiq to write to the 2 cluster\n  elasticsearch-2.4.0 Cluster: Compared with elasticsearch-1.7.1 Cluster, found a lot of low performance。Disk read and write very frequently  （2 cluster is Same write）\n\nFigure：\nrefresh_interval =1s\nelasticsearch-2.4.0 Cluster with iotop:\n\nTotal DISK READ :      23.38 K/s | Total DISK WRITE :    1694.99 K/s  【Average】\nActual DISK READ:      23.38 K/s | Actual DISK WRITE:      4.52 M/s  【Average】\n\nelasticsearch-1.7.1 Cluster  with iotop:\n\nTotal DISK READ :      66.52 K/s | Total DISK WRITE :     340.43 K/s  【Average】\nActual DISK READ:      66.52 K/s | Actual DISK WRITE:     45.00 K/s  【Average】\n\nelasticsearch-2.4.0 the start:\n/usr/local/jdk1.8.0_66/bin/java -Xms12g -Xmx12g -Djava.awt.headless=true -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:CMSInitiatingOccupancyFraction=75 -XX:+UseCMSInitiatingOccupancyOnly -XX:+HeapDumpOnOutOfMemoryError -XX:+DisableExplicitGC -Dfile.encoding=UTF-8 -Djna.nosys=true -Des.path.home=/data/elasticsearch-node1 -cp /data/elasticsearch-node1/lib/elasticsearch-2.4.0.jar:/data/elasticsearch-node1/lib/\\* org.elasticsearch.bootstrap.Elasticsearch start -d\n\nelasticsearch-1.7.1 the start:\n/usr/bin/java -Xms12g -Xmx12g -Djava.awt.headless=true -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:CMSInitiatingOccupancyFraction=75 -XX:+UseCMSInitiatingOccupancyOnly -XX:+HeapDumpOnOutOfMemoryError -XX:+DisableExplicitGC -Dfile.encoding=UTF-8 -Delasticsearch -Des.path.home=/es/elasticsearch-node1 -cp :/es/elasticsearch-node1/lib/elasticsearch-1.7.1.jar:/es/elasticsearch-node1/lib/_:/es/elasticsearch-node1/lib/sigar/_ org.elasticsearch.bootstrap.Elasticsearch\n\n**What is the issues? Why is es-2.4.0  written so frequently? （2 cluster is Same write）**\n\nfrom china,thank you!\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}