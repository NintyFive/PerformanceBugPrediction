[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/388903722","html_url":"https://github.com/elastic/elasticsearch/issues/30576#issuecomment-388903722","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30576","id":388903722,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODkwMzcyMg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-05-14T17:46:37Z","updated_at":"2018-05-14T17:46:37Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search-aggs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/390212714","html_url":"https://github.com/elastic/elasticsearch/issues/30576#issuecomment-390212714","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30576","id":390212714,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDIxMjcxNA==","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2018-05-18T13:47:59Z","updated_at":"2018-05-18T13:47:59Z","author_association":"MEMBER","body":"@sabi0 Sorry, I don't think elasticsearch is the right place to address this issue. As you said, the problem is in the tooling (editors) support and should be addressed on the client side. If you need support for comments in DSL in your application, you should probably add a layer in your application that would strip out all `\"//\"` fields **before** sending requests to elasticsearch. \r\n\r\nEssentially, the query language is a communication protocol between client and server and not a user interface. So, I am not even sure if the existing comments support is justified. We support these comments for historical reasons, but it's not part of the JSON standard.  ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/581651279","html_url":"https://github.com/elastic/elasticsearch/issues/30576#issuecomment-581651279","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30576","id":581651279,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MTY1MTI3OQ==","user":{"login":"bobtiernay-okta","id":25536705,"node_id":"MDQ6VXNlcjI1NTM2NzA1","avatar_url":"https://avatars1.githubusercontent.com/u/25536705?v=4","gravatar_id":"","url":"https://api.github.com/users/bobtiernay-okta","html_url":"https://github.com/bobtiernay-okta","followers_url":"https://api.github.com/users/bobtiernay-okta/followers","following_url":"https://api.github.com/users/bobtiernay-okta/following{/other_user}","gists_url":"https://api.github.com/users/bobtiernay-okta/gists{/gist_id}","starred_url":"https://api.github.com/users/bobtiernay-okta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bobtiernay-okta/subscriptions","organizations_url":"https://api.github.com/users/bobtiernay-okta/orgs","repos_url":"https://api.github.com/users/bobtiernay-okta/repos","events_url":"https://api.github.com/users/bobtiernay-okta/events{/privacy}","received_events_url":"https://api.github.com/users/bobtiernay-okta/received_events","type":"User","site_admin":false},"created_at":"2020-02-03T22:32:17Z","updated_at":"2020-02-03T22:34:17Z","author_association":"NONE","body":"Just want to add another use case that may not have been considered which is the Task API and slow query logs. If Elasticsearch had the capability to add a `_comment` attribute to the search, it would be possible to add app-level \"request id\" correlation identifier to be able to link together systems to identify the source of problematic queries. The example below indicates an example response from the `/_tasks?detailed` endpoint:\r\n\r\n```json\r\n{\r\n  \"nodes\": {\r\n    \"6eP18hh-STe-KmQ27rh3uw\": {\r\n      \"tasks\": {\r\n        \"6eP18hh-STe-KmQ27rh3uw:18421775\": {\r\n          \"node\": \"6eP18hh-STe-KmQ27rh3uw\",\r\n          \"id\": 18421775,\r\n          \"type\": \"transport\",\r\n          \"action\": \"indices:data/read/search\",\r\n          \"description\": \"indices[my-index], types[], search_type[QUERY_THEN_FETCH], source[{\\\"from\\\":0,\\\"size\\\":0,\\\"query\\\": \\\"...\",\r\n          \"start_time_in_millis\": 1580768231241,\r\n          \"running_time_in_nanos\": 2479194013,\r\n          \"cancellable\": true\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\nNote that the above is a canonicalized version of the requested search request.\r\n\r\nToday, this isn't possible without resorting to hacks which may not generalize or which may change query semantics (e.g. https://stackoverflow.com/questions/42844111/is-it-possible-to-put-a-comment-in-an-elasticsearch-query). \r\n\r\n@imotov would love to get your thoughts.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/581654013","html_url":"https://github.com/elastic/elasticsearch/issues/30576#issuecomment-581654013","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30576","id":581654013,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MTY1NDAxMw==","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2020-02-03T22:40:47Z","updated_at":"2020-02-03T22:40:47Z","author_association":"MEMBER","body":"@bobtiernay-okta do you mean something like [this](https://www.elastic.co/guide/en/elasticsearch/reference/master/tasks.html#_identifying_running_tasks)?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/581655013","html_url":"https://github.com/elastic/elasticsearch/issues/30576#issuecomment-581655013","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30576","id":581655013,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MTY1NTAxMw==","user":{"login":"bobtiernay-okta","id":25536705,"node_id":"MDQ6VXNlcjI1NTM2NzA1","avatar_url":"https://avatars1.githubusercontent.com/u/25536705?v=4","gravatar_id":"","url":"https://api.github.com/users/bobtiernay-okta","html_url":"https://github.com/bobtiernay-okta","followers_url":"https://api.github.com/users/bobtiernay-okta/followers","following_url":"https://api.github.com/users/bobtiernay-okta/following{/other_user}","gists_url":"https://api.github.com/users/bobtiernay-okta/gists{/gist_id}","starred_url":"https://api.github.com/users/bobtiernay-okta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bobtiernay-okta/subscriptions","organizations_url":"https://api.github.com/users/bobtiernay-okta/orgs","repos_url":"https://api.github.com/users/bobtiernay-okta/repos","events_url":"https://api.github.com/users/bobtiernay-okta/events{/privacy}","received_events_url":"https://api.github.com/users/bobtiernay-okta/received_events","type":"User","site_admin":false},"created_at":"2020-02-03T22:43:46Z","updated_at":"2020-02-03T22:43:46Z","author_association":"NONE","body":"@imotov If that can be applied to `/_search` requests and then manifest in the slow query log and Task API responses then yes. Is that the case?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/581657872","html_url":"https://github.com/elastic/elasticsearch/issues/30576#issuecomment-581657872","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30576","id":581657872,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MTY1Nzg3Mg==","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2020-02-03T22:52:20Z","updated_at":"2020-02-03T22:52:20Z","author_association":"MEMBER","body":"> Is that the case?\r\n\r\n@bobtiernay-okta starting with 6.4.0 it is indeed the case. It can be applied to any request and if it is applied to search, it will show up in search slow logs. You can find details in the [search slow log docs](https://www.elastic.co/guide/en/elasticsearch/reference/master/index-modules-slowlog.html#_identifying_search_slow_log_origin) logs.\r\n\r\nI also would to mention that our [discussion forum](https://discuss.elastic.co/) might be a better place for questions like this.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/581660144","html_url":"https://github.com/elastic/elasticsearch/issues/30576#issuecomment-581660144","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30576","id":581660144,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MTY2MDE0NA==","user":{"login":"bobtiernay-okta","id":25536705,"node_id":"MDQ6VXNlcjI1NTM2NzA1","avatar_url":"https://avatars1.githubusercontent.com/u/25536705?v=4","gravatar_id":"","url":"https://api.github.com/users/bobtiernay-okta","html_url":"https://github.com/bobtiernay-okta","followers_url":"https://api.github.com/users/bobtiernay-okta/followers","following_url":"https://api.github.com/users/bobtiernay-okta/following{/other_user}","gists_url":"https://api.github.com/users/bobtiernay-okta/gists{/gist_id}","starred_url":"https://api.github.com/users/bobtiernay-okta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bobtiernay-okta/subscriptions","organizations_url":"https://api.github.com/users/bobtiernay-okta/orgs","repos_url":"https://api.github.com/users/bobtiernay-okta/repos","events_url":"https://api.github.com/users/bobtiernay-okta/events{/privacy}","received_events_url":"https://api.github.com/users/bobtiernay-okta/received_events","type":"User","site_admin":false},"created_at":"2020-02-03T22:58:31Z","updated_at":"2020-02-04T00:45:07Z","author_association":"NONE","body":"That's fair. I honestly thought it was missing behavior as I see this was declined. Will look harder next time!\r\n\r\nFor the benefit of future readers:\r\nhttps://discuss.elastic.co/search?q=X-Opaque-Id","performed_via_github_app":null}]