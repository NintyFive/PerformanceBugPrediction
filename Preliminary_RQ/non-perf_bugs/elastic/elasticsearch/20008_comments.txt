[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/240160345","html_url":"https://github.com/elastic/elasticsearch/issues/20008#issuecomment-240160345","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20008","id":240160345,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDE2MDM0NQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-08-16T16:37:28Z","updated_at":"2016-08-16T16:37:28Z","author_association":"CONTRIBUTOR","body":"```\nJ 6563 C2 java.nio.DirectByteBuffer.get([BII)Ljava/nio/ByteBuffer; java.base@9-ea (135 bytes) @ 0x00007f062bad259d [0x00007f062bad24e0+0x00000000000000bd]\n```\n\nLooks more like https://github.com/elastic/elasticsearch/issues/19861 at first glance.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/240164453","html_url":"https://github.com/elastic/elasticsearch/issues/20008#issuecomment-240164453","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20008","id":240164453,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDE2NDQ1Mw==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2016-08-16T16:51:29Z","updated_at":"2016-08-16T16:51:29Z","author_association":"MEMBER","body":"Whoops, I think you're right :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/240183181","html_url":"https://github.com/elastic/elasticsearch/issues/20008#issuecomment-240183181","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20008","id":240183181,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDE4MzE4MQ==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2016-08-16T17:53:14Z","updated_at":"2016-08-16T17:53:14Z","author_association":"CONTRIBUTOR","body":"Indeed, a bad bad bug is lurking in ES ... somehow ES is attempting to use a closed IndexReader, and this test is provoking it.\n\nThis is what makes #19861 so important: we need to know when an `AlreadyClosedException` is thrown by Lucene: this is its desperate (and only best effort) attempt to avoid a SIGSEGV.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/240187814","html_url":"https://github.com/elastic/elasticsearch/issues/20008#issuecomment-240187814","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20008","id":240187814,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDE4NzgxNA==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2016-08-16T18:08:43Z","updated_at":"2016-08-16T18:08:43Z","author_association":"CONTRIBUTOR","body":"We need to fix this bug before release 5.0.0!  Risking SIGSEGV is no good.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/240370350","html_url":"https://github.com/elastic/elasticsearch/issues/20008#issuecomment-240370350","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20008","id":240370350,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MDM3MDM1MA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-08-17T10:10:38Z","updated_at":"2016-08-17T10:10:38Z","author_association":"CONTRIBUTOR","body":"I think this is an issue in SearchContext - We use the SearchContext to hold on to an IndexSearcher and once the context goes out of scope we close it. Now, we never really protect against concurrent use of the searcher and the context. There might be a concurrent closing thread due to an exception or something like this that closes the context while somebody is using it? There is I think even a small window that allows the reaper thread to close an idle searcher while the user is coming back. like:\n- user fetches the context \n- user updates the timestamp while the reaper has read it already\n- user calls a method on IR while reaper closes it\n- lucene hits an SIGSEGV on the low level.\n\nI think we have to incRef the searcher / reader / context before we use it here otherwise this can always happen.\n","performed_via_github_app":null}]