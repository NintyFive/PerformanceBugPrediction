[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/129834405","html_url":"https://github.com/elastic/elasticsearch/issues/12791#issuecomment-129834405","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12791","id":129834405,"node_id":"MDEyOklzc3VlQ29tbWVudDEyOTgzNDQwNQ==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-08-11T10:52:55Z","updated_at":"2015-08-11T10:52:55Z","author_association":"MEMBER","body":"I can confirm and reproduce the issue. \n\nFunny thing: when you do that again from root dir but \"resume from\" smoke-test-shaded module, you don't hit the issue...\n\n`mvn clean verify -rf :smoke-test-shaded` gives `BUILD SUCCESS`\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/129844836","html_url":"https://github.com/elastic/elasticsearch/issues/12791#issuecomment-129844836","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12791","id":129844836,"node_id":"MDEyOklzc3VlQ29tbWVudDEyOTg0NDgzNg==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-08-11T11:29:16Z","updated_at":"2015-08-11T11:29:16Z","author_association":"MEMBER","body":"I found a way to quickly reproduce the issue.\n\n```\nmvn verify -pl org.elasticsearch.distribution.shaded:elasticsearch,:smoke-test-shaded\n```\n\nIt makes obvious that when shaded is added to the reactor, it fails then smoke tests.\nWorking on it...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/129851681","html_url":"https://github.com/elastic/elasticsearch/issues/12791#issuecomment-129851681","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12791","id":129851681,"node_id":"MDEyOklzc3VlQ29tbWVudDEyOTg1MTY4MQ==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-08-11T12:07:33Z","updated_at":"2015-08-11T12:07:33Z","author_association":"MEMBER","body":"So the difference between both execution plan is obviously the `projectArtifactMap`:\n\nThe wrong one when you run `org.elasticsearch.distribution.shaded:elasticsearch,:smoke-test-shaded`\n\n```\n[DEBUG]   (f) projectArtifactMap = \n* org.elasticsearch.distribution.shaded:elasticsearch=org.elasticsearch.distribution.shaded:elasticsearch:jar:2.0.0-beta1-SNAPSHOT:compile\n* org.elasticsearch:elasticsearch=org.elasticsearch:elasticsearch:jar:2.0.0-beta1-SNAPSHOT:compile\n* org.apache.lucene:lucene-backward-codecs=org.apache.lucene:lucene-backward-codecs:jar:5.2.1:compile\n* org.apache.lucene:lucene-analyzers-common=org.apache.lucene:lucene-analyzers-common:jar:5.2.1:compile\n* org.apache.lucene:lucene-queries=org.apache.lucene:lucene-queries:jar:5.2.1:compile\n* org.apache.lucene:lucene-memory=org.apache.lucene:lucene-memory:jar:5.2.1:compile\n* org.apache.lucene:lucene-highlighter=org.apache.lucene:lucene-highlighter:jar:5.2.1:compile\n* org.apache.lucene:lucene-queryparser=org.apache.lucene:lucene-queryparser:jar:5.2.1:compile\n* org.apache.lucene:lucene-sandbox=org.apache.lucene:lucene-sandbox:jar:5.2.1:compile\n* org.apache.lucene:lucene-suggest=org.apache.lucene:lucene-suggest:jar:5.2.1:compile\n* org.apache.lucene:lucene-misc=org.apache.lucene:lucene-misc:jar:5.2.1:compile\n* org.apache.lucene:lucene-join=org.apache.lucene:lucene-join:jar:5.2.1:compile\n* org.apache.lucene:lucene-grouping=org.apache.lucene:lucene-grouping:jar:5.2.1:compile\n* org.apache.lucene:lucene-spatial=org.apache.lucene:lucene-spatial:jar:5.2.1:compile\n* com.spatial4j:spatial4j=com.spatial4j:spatial4j:jar:0.4.1:compile\n* com.google.guava:guava=com.google.guava:guava:jar:18.0:compile\n* com.carrotsearch:hppc=com.carrotsearch:hppc:jar:0.7.1:compile\n* joda-time:joda-time=joda-time:joda-time:jar:2.8:compile\n* org.joda:joda-convert=org.joda:joda-convert:jar:1.2:compile\n* com.fasterxml.jackson.core:jackson-core=com.fasterxml.jackson.core:jackson-core:jar:2.5.3:compile\n* com.fasterxml.jackson.dataformat:jackson-dataformat-smile=com.fasterxml.jackson.dataformat:jackson-dataformat-smile:jar:2.5.3:compile\n* com.fasterxml.jackson.dataformat:jackson-dataformat-yaml=com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:jar:2.5.3:compile\n* org.yaml:snakeyaml=org.yaml:snakeyaml:jar:1.12:compile\n* com.fasterxml.jackson.dataformat:jackson-dataformat-cbor=com.fasterxml.jackson.dataformat:jackson-dataformat-cbor:jar:2.5.3:compile\n* io.netty:netty=io.netty:netty:jar:3.10.3.Final:compile\n* com.ning:compress-lzf=com.ning:compress-lzf:jar:1.0.2:compile\n* com.tdunning:t-digest=com.tdunning:t-digest:jar:3.0:compile\n* org.hdrhistogram:HdrHistogram=org.hdrhistogram:HdrHistogram:jar:2.1.6:compile\n* org.apache.commons:commons-lang3=org.apache.commons:commons-lang3:jar:3.3.2:compile\n* commons-cli:commons-cli=commons-cli:commons-cli:jar:1.3.1:compile\n* com.twitter:jsr166e=com.twitter:jsr166e:jar:1.1.0:compile\n* org.hamcrest:hamcrest-all=org.hamcrest:hamcrest-all:jar:1.3:test\n* org.apache.lucene:lucene-test-framework=org.apache.lucene:lucene-test-framework:jar:5.2.1:test\n* org.apache.lucene:lucene-codecs=org.apache.lucene:lucene-codecs:jar:5.2.1:test\n* org.apache.lucene:lucene-core=org.apache.lucene:lucene-core:jar:5.2.1:compile\n* com.carrotsearch.randomizedtesting:randomizedtesting-runner=com.carrotsearch.randomizedtesting:randomizedtesting-runner:jar:2.1.16:test\n* junit:junit=junit:junit:jar:4.11:test\n* org.apache.ant:ant=org.apache.ant:ant:jar:1.8.2:test\n```\n\nThe right one:\n\n```\n[DEBUG]   (f) projectArtifactMap = \n* org.elasticsearch.distribution.shaded:elasticsearch=org.elasticsearch.distribution.shaded:elasticsearch:jar:2.0.0-beta1-SNAPSHOT:compile\n* org.apache.lucene:lucene-core=org.apache.lucene:lucene-core:jar:5.2.1:compile\n* org.apache.lucene:lucene-backward-codecs=org.apache.lucene:lucene-backward-codecs:jar:5.2.1:compile\n* org.apache.lucene:lucene-analyzers-common=org.apache.lucene:lucene-analyzers-common:jar:5.2.1:compile\n* org.apache.lucene:lucene-queries=org.apache.lucene:lucene-queries:jar:5.2.1:compile\n* org.apache.lucene:lucene-memory=org.apache.lucene:lucene-memory:jar:5.2.1:compile\n* org.apache.lucene:lucene-highlighter=org.apache.lucene:lucene-highlighter:jar:5.2.1:compile\n* org.apache.lucene:lucene-queryparser=org.apache.lucene:lucene-queryparser:jar:5.2.1:compile\n* org.apache.lucene:lucene-sandbox=org.apache.lucene:lucene-sandbox:jar:5.2.1:compile\n* org.apache.lucene:lucene-suggest=org.apache.lucene:lucene-suggest:jar:5.2.1:compile\n* org.apache.lucene:lucene-misc=org.apache.lucene:lucene-misc:jar:5.2.1:compile\n* org.apache.lucene:lucene-join=org.apache.lucene:lucene-join:jar:5.2.1:compile\n* org.apache.lucene:lucene-grouping=org.apache.lucene:lucene-grouping:jar:5.2.1:compile\n* org.apache.lucene:lucene-spatial=org.apache.lucene:lucene-spatial:jar:5.2.1:compile\n* com.spatial4j:spatial4j=com.spatial4j:spatial4j:jar:0.4.1:compile\n* org.hamcrest:hamcrest-all=org.hamcrest:hamcrest-all:jar:1.3:test\n* org.apache.lucene:lucene-test-framework=org.apache.lucene:lucene-test-framework:jar:5.2.1:test\n* org.apache.lucene:lucene-codecs=org.apache.lucene:lucene-codecs:jar:5.2.1:test\n* com.carrotsearch.randomizedtesting:randomizedtesting-runner=com.carrotsearch.randomizedtesting:randomizedtesting-runner:jar:2.1.16:test\n* junit:junit=junit:junit:jar:4.11:test\n* org.apache.ant:ant=org.apache.ant:ant:jar:1.8.2:test\n```\n\nTrying to find a fix now...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/129853954","html_url":"https://github.com/elastic/elasticsearch/issues/12791#issuecomment-129853954","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12791","id":129853954,"node_id":"MDEyOklzc3VlQ29tbWVudDEyOTg1Mzk1NA==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-08-11T12:15:14Z","updated_at":"2015-08-11T12:15:14Z","author_association":"MEMBER","body":"Adding here some notes on how to quickly debug that (might help for the future).\n\nJust run:\n\n``` sh\nmvn dependency:tree -pl :smoke-test-shaded\n```\n\n```\n[INFO] --- maven-dependency-plugin:2.8:tree (default-cli) @ smoke-test-shaded ---\n[INFO] org.elasticsearch.qa:smoke-test-shaded:jar:2.0.0-beta1-SNAPSHOT\n[INFO] +- org.elasticsearch.distribution.shaded:elasticsearch:jar:2.0.0-beta1-SNAPSHOT:compile\n[INFO] |  +- org.apache.lucene:lucene-core:jar:5.2.1:compile\n[INFO] |  +- org.apache.lucene:lucene-backward-codecs:jar:5.2.1:compile\n[INFO] |  +- org.apache.lucene:lucene-analyzers-common:jar:5.2.1:compile\n[INFO] |  +- org.apache.lucene:lucene-queries:jar:5.2.1:compile\n[INFO] |  +- org.apache.lucene:lucene-memory:jar:5.2.1:compile\n[INFO] |  +- org.apache.lucene:lucene-highlighter:jar:5.2.1:compile\n[INFO] |  +- org.apache.lucene:lucene-queryparser:jar:5.2.1:compile\n[INFO] |  +- org.apache.lucene:lucene-sandbox:jar:5.2.1:compile\n[INFO] |  +- org.apache.lucene:lucene-suggest:jar:5.2.1:compile\n[INFO] |  +- org.apache.lucene:lucene-misc:jar:5.2.1:compile\n[INFO] |  +- org.apache.lucene:lucene-join:jar:5.2.1:compile\n[INFO] |  +- org.apache.lucene:lucene-grouping:jar:5.2.1:compile\n[INFO] |  +- org.apache.lucene:lucene-spatial:jar:5.2.1:compile\n[INFO] |  \\- com.spatial4j:spatial4j:jar:0.4.1:compile\n[INFO] +- org.hamcrest:hamcrest-all:jar:1.3:test\n[INFO] \\- org.apache.lucene:lucene-test-framework:jar:5.2.1:test\n[INFO]    +- org.apache.lucene:lucene-codecs:jar:5.2.1:test\n[INFO]    +- com.carrotsearch.randomizedtesting:randomizedtesting-runner:jar:2.1.16:test\n[INFO]    +- junit:junit:jar:4.11:test\n[INFO]    \\- org.apache.ant:ant:jar:1.8.2:test\n```\n\nand \n\n``` sh\nmvn dependency:tree -pl org.elasticsearch.distribution.shaded:elasticsearch,:smoke-test-shaded\n```\n\n```\n[INFO] --- maven-dependency-plugin:2.8:tree (default-cli) @ smoke-test-shaded ---\n[INFO] org.elasticsearch.qa:smoke-test-shaded:jar:2.0.0-beta1-SNAPSHOT\n[INFO] +- org.elasticsearch.distribution.shaded:elasticsearch:jar:2.0.0-beta1-SNAPSHOT:compile\n[INFO] |  \\- org.elasticsearch:elasticsearch:jar:2.0.0-beta1-SNAPSHOT:compile\n[INFO] |     +- org.apache.lucene:lucene-backward-codecs:jar:5.2.1:compile\n[INFO] |     +- org.apache.lucene:lucene-analyzers-common:jar:5.2.1:compile\n[INFO] |     +- org.apache.lucene:lucene-queries:jar:5.2.1:compile\n[INFO] |     +- org.apache.lucene:lucene-memory:jar:5.2.1:compile\n[INFO] |     +- org.apache.lucene:lucene-highlighter:jar:5.2.1:compile\n[INFO] |     +- org.apache.lucene:lucene-queryparser:jar:5.2.1:compile\n[INFO] |     |  \\- org.apache.lucene:lucene-sandbox:jar:5.2.1:compile\n[INFO] |     +- org.apache.lucene:lucene-suggest:jar:5.2.1:compile\n[INFO] |     |  \\- org.apache.lucene:lucene-misc:jar:5.2.1:compile\n[INFO] |     +- org.apache.lucene:lucene-join:jar:5.2.1:compile\n[INFO] |     |  \\- org.apache.lucene:lucene-grouping:jar:5.2.1:compile\n[INFO] |     +- org.apache.lucene:lucene-spatial:jar:5.2.1:compile\n[INFO] |     |  \\- com.spatial4j:spatial4j:jar:0.4.1:compile\n[INFO] |     +- com.google.guava:guava:jar:18.0:compile\n[INFO] |     +- com.carrotsearch:hppc:jar:0.7.1:compile\n[INFO] |     +- joda-time:joda-time:jar:2.8:compile\n[INFO] |     +- org.joda:joda-convert:jar:1.2:compile\n[INFO] |     +- com.fasterxml.jackson.core:jackson-core:jar:2.5.3:compile\n[INFO] |     +- com.fasterxml.jackson.dataformat:jackson-dataformat-smile:jar:2.5.3:compile\n[INFO] |     +- com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:jar:2.5.3:compile\n[INFO] |     |  \\- org.yaml:snakeyaml:jar:1.12:compile\n[INFO] |     +- com.fasterxml.jackson.dataformat:jackson-dataformat-cbor:jar:2.5.3:compile\n[INFO] |     +- io.netty:netty:jar:3.10.3.Final:compile\n[INFO] |     +- com.ning:compress-lzf:jar:1.0.2:compile\n[INFO] |     +- com.tdunning:t-digest:jar:3.0:compile\n[INFO] |     +- org.hdrhistogram:HdrHistogram:jar:2.1.6:compile\n[INFO] |     +- org.apache.commons:commons-lang3:jar:3.3.2:compile\n[INFO] |     +- commons-cli:commons-cli:jar:1.3.1:compile\n[INFO] |     \\- com.twitter:jsr166e:jar:1.1.0:compile\n[INFO] +- org.hamcrest:hamcrest-all:jar:1.3:test\n[INFO] \\- org.apache.lucene:lucene-test-framework:jar:5.2.1:test\n[INFO]    +- org.apache.lucene:lucene-codecs:jar:5.2.1:test\n[INFO]    +- org.apache.lucene:lucene-core:jar:5.2.1:compile\n[INFO]    +- com.carrotsearch.randomizedtesting:randomizedtesting-runner:jar:2.1.16:test\n[INFO]    +- junit:junit:jar:4.11:test\n[INFO]    \\- org.apache.ant:ant:jar:1.8.2:test\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/130758591","html_url":"https://github.com/elastic/elasticsearch/issues/12791#issuecomment-130758591","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12791","id":130758591,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMDc1ODU5MQ==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-08-13T16:52:43Z","updated_at":"2015-08-13T16:52:43Z","author_association":"MEMBER","body":"Reopening as the change has been reverted\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/138676850","html_url":"https://github.com/elastic/elasticsearch/issues/12791#issuecomment-138676850","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12791","id":138676850,"node_id":"MDEyOklzc3VlQ29tbWVudDEzODY3Njg1MA==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-09-08T19:28:43Z","updated_at":"2015-09-08T19:28:43Z","author_association":"MEMBER","body":"We removed the shaded module so it's not an issue anymore... :p \n\nClosing\n","performed_via_github_app":null}]