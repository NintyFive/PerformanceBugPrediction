[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/397732444","html_url":"https://github.com/elastic/elasticsearch/issues/31372#issuecomment-397732444","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31372","id":397732444,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NzczMjQ0NA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-06-15T20:24:32Z","updated_at":"2018-06-15T20:24:32Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search-aggs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/399223433","html_url":"https://github.com/elastic/elasticsearch/issues/31372#issuecomment-399223433","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31372","id":399223433,"node_id":"MDEyOklzc3VlQ29tbWVudDM5OTIyMzQzMw==","user":{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false},"created_at":"2018-06-21T19:55:51Z","updated_at":"2018-06-21T23:13:18Z","author_association":"MEMBER","body":"I put down some initial thoughts around field alias support in other contexts besides search requests + field capabilities. @jpountz I'm curious as to your opinions, and also whether I'm missing any important APIs.\r\n- Retrieving field mappings (`index/_mapping/_doc/field/...`): supported. In particular, the mappings for the field alias would be retrieved (`type: alias, path: ...`).\r\n- Using aliases when filtering the fetched `_source`: not supported. This doesn't make much sense conceptually, as field aliases will never be referenced in a document's source, and would also be challenging to implement in a performant way.\r\n- Clearing indices caches (`index/_cache/clear?fields=...`): not sure. This could also be reasonable to support, although it's not clear how useful it would be.\r\n- Fetching term vectors (`_termvectors`): not sure. My sense is that it could be reasonable to support, but I also don't have a great understanding of the common use cases.\r\n\r\nFor clearing caches and term vectors, my current thought is that in this initial version we should focus on search requests (and field capabilities), and can wait for feedback as to whether it's valuable to add support for aliases in other APIs. In general, we won't commit to supporting aliases in all APIs where a field name can be supplied, but explicitly focus on search requests (and closely related APIs like field capabilities) where they are critical for certain functionality.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/399356878","html_url":"https://github.com/elastic/elasticsearch/issues/31372#issuecomment-399356878","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31372","id":399356878,"node_id":"MDEyOklzc3VlQ29tbWVudDM5OTM1Njg3OA==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2018-06-22T07:58:48Z","updated_at":"2018-06-22T07:58:48Z","author_association":"MEMBER","body":"> Retrieving field mappings (index/_mapping/_doc/field/...): supported. In particular, the mappings for the field alias would be retrieved (type: alias, path: ...).\r\n\r\nI don't think we should do this one as I think people using this API should be shown the actual mapping of the field (i.e. the fact its an alias field and what it points to) rather than resolving the alias. This fits with the standard mapping API which also does not resolve the alias for alias fields.\r\n\r\n> Using aliases when filtering the fetched _source: not supported. This doesn't make much sense conceptually, as field aliases will never be referenced in a document's source, and would also be challenging to implement in a performant way.\r\n\r\nI agree\r\n\r\n> Clearing indices caches (index/_cache/clear?fields=...): not sure. This could also be reasonable to support, although it's not clear how useful it would be.\r\n\r\nIMO we should error on alias fields here and require the user to clear the cache explicitly on the concrete field. This API is really for admins to use and  they should know the concrete field since clearing the cache is usually something that would be done in response to an issue being debugged\r\n\r\n> Fetching term vectors (_termvectors): not sure. My sense is that it could be reasonable to support, but I also don't have a great understanding of the common use cases.\r\n\r\nWe may have requests for alias support here later down the line but I agree that we don't need to implement this for the first version","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/399443563","html_url":"https://github.com/elastic/elasticsearch/issues/31372#issuecomment-399443563","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31372","id":399443563,"node_id":"MDEyOklzc3VlQ29tbWVudDM5OTQ0MzU2Mw==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2018-06-22T13:32:43Z","updated_at":"2018-06-22T13:32:43Z","author_association":"CONTRIBUTOR","body":"@jtibshirani Agreed with your initial thoughts, I added some comments below.\r\n\r\n> Retrieving field mappings (index/_mapping/_doc/field/...): supported. In particular, the mappings for the field alias would be retrieved (type: alias, path: ...).\r\n\r\nI read this as \"the get field mappings API will work and return the mapping of the alias\" rather than resolving the alias, but @colings86 's comment suggests he is reading it the other way around. I think it should not try to resolve the alias indeed. My reasoning is that mappings not only have search-time implications but also index-time implications. If a field is shown as mapped as long, then it would suggest that it is fine to feed it with long values, which is not correct if the field is an alias.\r\n\r\n> Field aliases can be used in the capabilities API.\r\n\r\nField capabilities are only about read-only capabilities of fields (on the contrary to mappings) so it makes sense to resolve aliases. This is probably a requirement for Kibana to work transparently with aliases as well.\r\n\r\n> Clearing indices caches \r\n\r\nAgreed with @colings86: this is an admin operation, let's not resolve aliases.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/399512101","html_url":"https://github.com/elastic/elasticsearch/issues/31372#issuecomment-399512101","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31372","id":399512101,"node_id":"MDEyOklzc3VlQ29tbWVudDM5OTUxMjEwMQ==","user":{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false},"created_at":"2018-06-22T17:02:52Z","updated_at":"2018-06-22T17:04:14Z","author_association":"MEMBER","body":"Thank you @colings86 and @jpountz for the thoughts! I've updated the issue description.\r\n\r\nTo clarify my comment around retrieving field mappings: I indeed meant to say 'the get field mappings API will work and return the mapping of the alias'. I agree that it does not make sense to resolve the alias here, but I think users should be able to see the `alias` field mapping.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/399880917","html_url":"https://github.com/elastic/elasticsearch/issues/31372#issuecomment-399880917","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31372","id":399880917,"node_id":"MDEyOklzc3VlQ29tbWVudDM5OTg4MDkxNw==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2018-06-25T08:56:23Z","updated_at":"2018-06-25T08:56:23Z","author_association":"CONTRIBUTOR","body":"> I agree that it does not make sense to resolve the alias here, but I think users should be able to see the alias field mapping.\r\n\r\n:+1:","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/401411307","html_url":"https://github.com/elastic/elasticsearch/issues/31372#issuecomment-401411307","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31372","id":401411307,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMTQxMTMwNw==","user":{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false},"created_at":"2018-06-29T16:48:53Z","updated_at":"2018-06-29T16:48:53Z","author_association":"MEMBER","body":"> Verify that field aliases interact correctly with field-level security.\r\n\r\nWe discussed this during this weeks security team meeting. If a user has access to the underlying field then the field alias should also be seen. Given that field level security works at the lucene level, field level security execution will not care about the field aliases or perform any filtering based on a alias.\r\n\r\nWhere things could get messy is how field aliases play with the field filter used in the mapper registry. It would be odd for field level security to be in use and a user can see a field and its alias when getting the document, but they would not be able to see the alias in the mappings api and the other apis that this filter applies to.\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/401485673","html_url":"https://github.com/elastic/elasticsearch/issues/31372#issuecomment-401485673","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31372","id":401485673,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMTQ4NTY3Mw==","user":{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false},"created_at":"2018-06-29T22:05:27Z","updated_at":"2018-06-29T23:12:38Z","author_association":"MEMBER","body":"Thanks @jaymode for the update. To summarize my understanding from your comment/ watching the meeting recording:\r\n- A user will only be able to set security on a concrete field, not an alias. This will be sufficient for enforcing security during search requests, since aliases are always translated to concrete fields before calling into lucene, and field level security is performed at the lucene level.\r\n- When executing a get mappings request, we currently filter out fields that the user can't access. As it currently stands, we wouldn't filter out field aliases, even if the user couldn't see the underlying field. This could result in inconsistency, as for example the `_field_caps` endpoint would return capabilities when provided with an alias, but not a concrete field.\r\n\r\nI'll give some thought as to how to address the last point. It'd be useful to know for context: is the existence of a field considered sensitive information? If not, is its mapping/ schema information sensitive, or is the field mappings filter mostly for better user experience?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/402197577","html_url":"https://github.com/elastic/elasticsearch/issues/31372#issuecomment-402197577","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31372","id":402197577,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMjE5NzU3Nw==","user":{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false},"created_at":"2018-07-03T15:28:38Z","updated_at":"2018-07-03T15:28:38Z","author_association":"MEMBER","body":"@jtibshirani You're understanding is correct.\r\n\r\n> It'd be useful to know for context: is the existence of a field considered sensitive information? If not, is its mapping/ schema information sensitive, or is the field mappings filter mostly for better user experience?\r\n\r\nThe best thing would be to not allow the knowledge of the existence of a field to exist and if that isn't possible not knowing the mapping would be better than nothing. Ultimately we want our FLS implementation to prevent the user from knowing that a given field exists in a document. The field mappings filter is a relatively new thing and prior to that users with access to certain APIs could still find out about fields that they did not have access to, so it is not the end of the world if this is not a problem that can be solved.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/402205916","html_url":"https://github.com/elastic/elasticsearch/issues/31372#issuecomment-402205916","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31372","id":402205916,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMjIwNTkxNg==","user":{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false},"created_at":"2018-07-03T15:54:00Z","updated_at":"2018-07-03T15:54:00Z","author_association":"MEMBER","body":"👍 thanks!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/402560897","html_url":"https://github.com/elastic/elasticsearch/issues/31372#issuecomment-402560897","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31372","id":402560897,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMjU2MDg5Nw==","user":{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false},"created_at":"2018-07-04T21:20:20Z","updated_at":"2018-07-04T21:20:20Z","author_association":"MEMBER","body":"An update on field-level security: I uploaded a PR for consideration (#31807).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/406019943","html_url":"https://github.com/elastic/elasticsearch/issues/31372#issuecomment-406019943","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31372","id":406019943,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNjAxOTk0Mw==","user":{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false},"created_at":"2018-07-18T17:56:30Z","updated_at":"2018-07-18T17:56:30Z","author_association":"MEMBER","body":"This feature branch was merged into master in #32172. ","performed_via_github_app":null}]