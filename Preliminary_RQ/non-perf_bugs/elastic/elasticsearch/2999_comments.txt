[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17617093","html_url":"https://github.com/elastic/elasticsearch/issues/2999#issuecomment-17617093","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2999","id":17617093,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NjE3MDkz","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2013-05-08T16:25:38Z","updated_at":"2013-05-08T16:25:38Z","author_association":"MEMBER","body":"Can you help me a bit to understand your problem in more detail?\n\nJust to make sure, that we are talking about the same problem. The pagination feature in elasticsearch using an offset and a size is always per request. This means, that a document, when it is reindexed, can occur more than once, when you are paging through your data.\n\nExample for an expected behaviour:\n- Create a number of documents\n- Query for 'foo' with an offset 0 and size 10, the first match is document a\n- Reindex document a, that it is actually no more under the first ten matches, but at the 15th position (just an example)\n- Query again for foo with an offset 10 and size 10 and see, that document a is included again in your page\n\nHowever if you keep telling me, that the behaviour is the different with 0.90 (is this the version you are using actually) and 0.20, you might have hit a bug, which we will need to reproduce. Can you provide some sample documents you indexed, which are actually occuring more than once in your search results?\n\nI'd be glad to help in order to find out, what is broken here. Thanks for your report so far!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17640506","html_url":"https://github.com/elastic/elasticsearch/issues/2999#issuecomment-17640506","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2999","id":17640506,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NjQwNTA2","user":{"login":"sclausen","id":916076,"node_id":"MDQ6VXNlcjkxNjA3Ng==","avatar_url":"https://avatars1.githubusercontent.com/u/916076?v=4","gravatar_id":"","url":"https://api.github.com/users/sclausen","html_url":"https://github.com/sclausen","followers_url":"https://api.github.com/users/sclausen/followers","following_url":"https://api.github.com/users/sclausen/following{/other_user}","gists_url":"https://api.github.com/users/sclausen/gists{/gist_id}","starred_url":"https://api.github.com/users/sclausen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sclausen/subscriptions","organizations_url":"https://api.github.com/users/sclausen/orgs","repos_url":"https://api.github.com/users/sclausen/repos","events_url":"https://api.github.com/users/sclausen/events{/privacy}","received_events_url":"https://api.github.com/users/sclausen/received_events","type":"User","site_admin":false},"created_at":"2013-05-08T23:27:18Z","updated_at":"2013-05-08T23:27:18Z","author_association":"NONE","body":"Yes, I'm aware that pagination works per request in elasticsearch. Nevertheless, my scenario wasn't exactly as you described. After reindexing a single document, I started paging again at `\"from\":0` and while increasing `\"from\"` over the requests I didn't reindexed something.\n\nHere is my query I'm talking about:\n\n``` json\n{\n  \"from\": 0,\n  \"size\": 10,\n  \"sort\": {\n    \"name.sortable\": {\n      \"order\": \"asc\"\n    }\n  },\n  \"query\": {\n    \"match_all\": {}\n  }\n}\n```\n\nUnfortunately, I'm not authorized giving example data, but hopefully my additions helped.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17641250","html_url":"https://github.com/elastic/elasticsearch/issues/2999#issuecomment-17641250","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2999","id":17641250,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NjQxMjUw","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2013-05-08T23:46:52Z","updated_at":"2013-05-08T23:46:52Z","author_association":"MEMBER","body":"When you do the pagination, do you have same sort values where you see the documents repeating? i.e. doc id 1,2,3 all have the same `name.sortable`? If so, it might happen due to the fact that one read request and another can go to different copies of the data (shards). One way to work around that is to use `preference=[hash]` which will make sure for that [hash], it will hit hte same copies of the data. That hash, in real web application, can be something like a session id.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17740257","html_url":"https://github.com/elastic/elasticsearch/issues/2999#issuecomment-17740257","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2999","id":17740257,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NzQwMjU3","user":{"login":"sclausen","id":916076,"node_id":"MDQ6VXNlcjkxNjA3Ng==","avatar_url":"https://avatars1.githubusercontent.com/u/916076?v=4","gravatar_id":"","url":"https://api.github.com/users/sclausen","html_url":"https://github.com/sclausen","followers_url":"https://api.github.com/users/sclausen/followers","following_url":"https://api.github.com/users/sclausen/following{/other_user}","gists_url":"https://api.github.com/users/sclausen/gists{/gist_id}","starred_url":"https://api.github.com/users/sclausen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sclausen/subscriptions","organizations_url":"https://api.github.com/users/sclausen/orgs","repos_url":"https://api.github.com/users/sclausen/repos","events_url":"https://api.github.com/users/sclausen/events{/privacy}","received_events_url":"https://api.github.com/users/sclausen/received_events","type":"User","site_admin":false},"created_at":"2013-05-10T19:36:55Z","updated_at":"2013-05-10T19:36:55Z","author_association":"NONE","body":"My indices just have one shard, but after all I tried your approach, but setting `preference` (I used `setPreference(\"123456789\")`) didn't fixed the problem. After Modifying a document in 0.90.0, paging is messed up. 0.20.6 still works perfect :-/\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17746483","html_url":"https://github.com/elastic/elasticsearch/issues/2999#issuecomment-17746483","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2999","id":17746483,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NzQ2NDgz","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2013-05-10T21:49:56Z","updated_at":"2013-05-10T21:49:56Z","author_association":"MEMBER","body":"@Phosphoros we need an example then, can you provide a recreation of this? curl one would be best. Simple one where you create an index, index a few documents, execute the searches with paging, and then modify it to show that the paging doesn't work.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18725754","html_url":"https://github.com/elastic/elasticsearch/issues/2999#issuecomment-18725754","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2999","id":18725754,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NzI1NzU0","user":{"login":"sclausen","id":916076,"node_id":"MDQ6VXNlcjkxNjA3Ng==","avatar_url":"https://avatars1.githubusercontent.com/u/916076?v=4","gravatar_id":"","url":"https://api.github.com/users/sclausen","html_url":"https://github.com/sclausen","followers_url":"https://api.github.com/users/sclausen/followers","following_url":"https://api.github.com/users/sclausen/following{/other_user}","gists_url":"https://api.github.com/users/sclausen/gists{/gist_id}","starred_url":"https://api.github.com/users/sclausen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sclausen/subscriptions","organizations_url":"https://api.github.com/users/sclausen/orgs","repos_url":"https://api.github.com/users/sclausen/repos","events_url":"https://api.github.com/users/sclausen/events{/privacy}","received_events_url":"https://api.github.com/users/sclausen/received_events","type":"User","site_admin":false},"created_at":"2013-05-31T06:37:11Z","updated_at":"2013-05-31T06:37:11Z","author_association":"NONE","body":"@kimchy I'm really sorry, I didn't responded, but unfortunately I have been very busy. Recently I switched to 0.90.1 and this strange thing seems to be gone.\n","performed_via_github_app":null}]