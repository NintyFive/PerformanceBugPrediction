{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/371","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/371/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/371/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/371/events","html_url":"https://github.com/elastic/elasticsearch/issues/371","id":317212,"node_id":"MDU6SXNzdWUzMTcyMTI=","number":371,"title":"Bulk API","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"labels":[{"id":23172,"node_id":"MDU6TGFiZWwyMzE3Mg==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Efeature","name":">feature","color":"006b75","default":false,"description":null},{"id":45098,"node_id":"MDU6TGFiZWw0NTA5OA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.11.0","name":"v0.11.0","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2010-09-15T10:21:13Z","updated_at":"2010-09-28T11:24:16Z","closed_at":"2010-09-15T17:22:15Z","author_association":"MEMBER","active_lock_reason":null,"body":"Expose bulk API for indexing and deleting docs. The REST AP endpoint is `/_bulk` and it follows the following structure (for json):\n\n```\naction_and_meta_data\\n\noptional_source\\n\naction_and_meta_data\\n\noptional_source\\n\n....\n```\n\nfor example:\n\n```\n{ \"index\" : { \"index\" : \"test\", \"type\" : \"type1\", \"id\" : \"1\" } }\n{ \"type1\" : { \"field1\" : \"value1\" } }\n{ \"delete\" : { \"index\" : \"test\", \"type\" : \"type1\", \"id\" : \"2\" } }\n{ \"create\" : { \"index\" : \"test\", \"type\" : \"type1\", \"id\" : \"1\" } }\n{ \"type1\" : { \"field1\" : \"value1\" } }\n```\n\nA note on the format. The idea here is to make processing of this as fast as possible. As some of the actions will be needed to be redirected to other shards that exists on other nodes, only the action meta_data is parsed on the receiving node side. Also, zero copy buffers can be used on the source directly writing segments relevant to each action source to the network.\n\nClient libraries using this protocol should try and strive to do something similar on the client side, and reduce as much as possible the creation of buffers.\n\nThe result is a full formatted json, with all the actions performed (in the same order), with possible error field indicating for each one in case of failure (on an item level).\n\nNote, in the end, the full data needs to be represented on each server, so indexing 5GB of data should be broken down and not executed in a single batch.\n\nIf using the HTTP API, make sure that the client does not send HTTP chunks, as this will slow things down.\n","closed_by":null,"performed_via_github_app":null}