[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/377516074","html_url":"https://github.com/elastic/elasticsearch/issues/29313#issuecomment-377516074","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29313","id":377516074,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NzUxNjA3NA==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2018-03-30T12:39:42Z","updated_at":"2018-03-30T12:39:42Z","author_association":"CONTRIBUTOR","body":"Hi\r\n\r\nThe issue here is that reindex tries to create an additional type `mytype` while you already have defined `_doc` in the new index. The error message is a little misleading though, and @ywelsch has kindly opened a PR already to fix that in #29316 \r\n\r\nWhat you need to do, and it's also described [here](https://discuss.elastic.co/t/dec-15th-2017-en-elasticsearch-going-from-multiple-types-to-one-type-with-the-reindex-api/111315) is to map to your newly created type by adding \r\n```\r\n \"script\": {\r\n    \"source\": \"\"\"\r\n        ctx._type = '_doc';\r\n    \"\"\",\r\n    \"lang\": \"painless\"\r\n  }\r\n```\r\n\r\nin your `_reindex` API call. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/377553457","html_url":"https://github.com/elastic/elasticsearch/issues/29313#issuecomment-377553457","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29313","id":377553457,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NzU1MzQ1Nw==","user":{"login":"ydalbj","id":7308871,"node_id":"MDQ6VXNlcjczMDg4NzE=","avatar_url":"https://avatars1.githubusercontent.com/u/7308871?v=4","gravatar_id":"","url":"https://api.github.com/users/ydalbj","html_url":"https://github.com/ydalbj","followers_url":"https://api.github.com/users/ydalbj/followers","following_url":"https://api.github.com/users/ydalbj/following{/other_user}","gists_url":"https://api.github.com/users/ydalbj/gists{/gist_id}","starred_url":"https://api.github.com/users/ydalbj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ydalbj/subscriptions","organizations_url":"https://api.github.com/users/ydalbj/orgs","repos_url":"https://api.github.com/users/ydalbj/repos","events_url":"https://api.github.com/users/ydalbj/events{/privacy}","received_events_url":"https://api.github.com/users/ydalbj/received_events","type":"User","site_admin":false},"created_at":"2018-03-30T15:45:16Z","updated_at":"2018-03-30T15:45:16Z","author_association":"NONE","body":"Thanks, it worked。That helps a lot。","performed_via_github_app":null}]