[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/24972448","html_url":"https://github.com/elastic/elasticsearch/issues/3700#issuecomment-24972448","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3700","id":24972448,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTcyNDQ4","user":{"login":"benmccann","id":322311,"node_id":"MDQ6VXNlcjMyMjMxMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/322311?v=4","gravatar_id":"","url":"https://api.github.com/users/benmccann","html_url":"https://github.com/benmccann","followers_url":"https://api.github.com/users/benmccann/followers","following_url":"https://api.github.com/users/benmccann/following{/other_user}","gists_url":"https://api.github.com/users/benmccann/gists{/gist_id}","starred_url":"https://api.github.com/users/benmccann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benmccann/subscriptions","organizations_url":"https://api.github.com/users/benmccann/orgs","repos_url":"https://api.github.com/users/benmccann/repos","events_url":"https://api.github.com/users/benmccann/events{/privacy}","received_events_url":"https://api.github.com/users/benmccann/received_events","type":"User","site_admin":false},"created_at":"2013-09-24T03:25:48Z","updated_at":"2013-09-24T03:26:12Z","author_association":"CONTRIBUTOR","body":"The error message has changed slightly in 0.90.5:\n\n```\n[2013-09-23 20:24:15,805][DEBUG][action.get               ] [Potts, Virginia \"Pepper\"] [_river][0]: failed to execute [[_river][river95][_meta]: routing [null]]\norg.elasticsearch.index.shard.IllegalIndexShardStateException: [_river][0] CurrentState[RECOVERING] operations only allowed when started/relocated\n    at org.elasticsearch.index.shard.service.InternalIndexShard.readAllowed(InternalIndexShard.java:704)\n    at org.elasticsearch.index.shard.service.InternalIndexShard.get(InternalIndexShard.java:415)\n    at org.elasticsearch.index.get.ShardGetService.innerGet(ShardGetService.java:167)\n    at org.elasticsearch.index.get.ShardGetService.get(ShardGetService.java:101)\n    at org.elasticsearch.action.get.TransportGetAction.shardOperation(TransportGetAction.java:103)\n    at org.elasticsearch.action.get.TransportGetAction.shardOperation(TransportGetAction.java:42)\n    at org.elasticsearch.action.support.single.shard.TransportShardSingleOperationAction$AsyncSingleAction$1.run(TransportShardSingleOperationAction.java:161)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:724)\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/24972771","html_url":"https://github.com/elastic/elasticsearch/issues/3700#issuecomment-24972771","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3700","id":24972771,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTcyNzcx","user":{"login":"benmccann","id":322311,"node_id":"MDQ6VXNlcjMyMjMxMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/322311?v=4","gravatar_id":"","url":"https://api.github.com/users/benmccann","html_url":"https://github.com/benmccann","followers_url":"https://api.github.com/users/benmccann/followers","following_url":"https://api.github.com/users/benmccann/following{/other_user}","gists_url":"https://api.github.com/users/benmccann/gists{/gist_id}","starred_url":"https://api.github.com/users/benmccann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benmccann/subscriptions","organizations_url":"https://api.github.com/users/benmccann/orgs","repos_url":"https://api.github.com/users/benmccann/repos","events_url":"https://api.github.com/users/benmccann/events{/privacy}","received_events_url":"https://api.github.com/users/benmccann/received_events","type":"User","site_admin":false},"created_at":"2013-09-24T03:38:16Z","updated_at":"2013-09-24T03:39:55Z","author_association":"CONTRIBUTOR","body":"Looks like people have reported this on the mailing list as well:\nhttps://groups.google.com/d/msg/elasticsearch/fOjEUynM5Ew/ytfAZ6qWhBIJ\nhttps://groups.google.com/d/msg/elasticsearch/6HpQmRba-i4/NApZD_hftqMJ\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/25800265","html_url":"https://github.com/elastic/elasticsearch/issues/3700#issuecomment-25800265","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3700","id":25800265,"node_id":"MDEyOklzc3VlQ29tbWVudDI1ODAwMjY1","user":{"login":"richardwilly98","id":118560,"node_id":"MDQ6VXNlcjExODU2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/118560?v=4","gravatar_id":"","url":"https://api.github.com/users/richardwilly98","html_url":"https://github.com/richardwilly98","followers_url":"https://api.github.com/users/richardwilly98/followers","following_url":"https://api.github.com/users/richardwilly98/following{/other_user}","gists_url":"https://api.github.com/users/richardwilly98/gists{/gist_id}","starred_url":"https://api.github.com/users/richardwilly98/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardwilly98/subscriptions","organizations_url":"https://api.github.com/users/richardwilly98/orgs","repos_url":"https://api.github.com/users/richardwilly98/repos","events_url":"https://api.github.com/users/richardwilly98/events{/privacy}","received_events_url":"https://api.github.com/users/richardwilly98/received_events","type":"User","site_admin":false},"created_at":"2013-10-07T11:09:28Z","updated_at":"2013-10-07T11:09:28Z","author_association":"CONTRIBUTOR","body":"Any Update?\n\nIs there any additional information I can provide to help?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/25800392","html_url":"https://github.com/elastic/elasticsearch/issues/3700#issuecomment-25800392","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3700","id":25800392,"node_id":"MDEyOklzc3VlQ29tbWVudDI1ODAwMzky","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2013-10-07T11:11:41Z","updated_at":"2013-10-07T11:11:41Z","author_association":"MEMBER","body":"I intend to look at this today or over the week, as I have a suspicion what is going on.. sorry for the slow reply, been busy weeks.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/25817438","html_url":"https://github.com/elastic/elasticsearch/issues/3700#issuecomment-25817438","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3700","id":25817438,"node_id":"MDEyOklzc3VlQ29tbWVudDI1ODE3NDM4","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2013-10-07T15:20:38Z","updated_at":"2013-10-07T15:20:38Z","author_association":"MEMBER","body":"hey\n\ni just pushed a small change which prevents showing up the exceptions as errors (as this is not true when the elasticsearch is started up), see https://github.com/elasticsearch/elasticsearch/commit/abcf8fc0f775b701cd3e06656f25a16f75675c92\n\ncan you check if this prevents showing up the exception in your case?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/25819224","html_url":"https://github.com/elastic/elasticsearch/issues/3700#issuecomment-25819224","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3700","id":25819224,"node_id":"MDEyOklzc3VlQ29tbWVudDI1ODE5MjI0","user":{"login":"richardwilly98","id":118560,"node_id":"MDQ6VXNlcjExODU2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/118560?v=4","gravatar_id":"","url":"https://api.github.com/users/richardwilly98","html_url":"https://github.com/richardwilly98","followers_url":"https://api.github.com/users/richardwilly98/followers","following_url":"https://api.github.com/users/richardwilly98/following{/other_user}","gists_url":"https://api.github.com/users/richardwilly98/gists{/gist_id}","starred_url":"https://api.github.com/users/richardwilly98/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardwilly98/subscriptions","organizations_url":"https://api.github.com/users/richardwilly98/orgs","repos_url":"https://api.github.com/users/richardwilly98/repos","events_url":"https://api.github.com/users/richardwilly98/events{/privacy}","received_events_url":"https://api.github.com/users/richardwilly98/received_events","type":"User","site_admin":false},"created_at":"2013-10-07T15:39:55Z","updated_at":"2013-10-07T15:39:55Z","author_association":"CONTRIBUTOR","body":"@spinscale the exception is gone.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/39533806","html_url":"https://github.com/elastic/elasticsearch/issues/3700#issuecomment-39533806","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3700","id":39533806,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTMzODA2","user":{"login":"karnamonkster","id":5524898,"node_id":"MDQ6VXNlcjU1MjQ4OTg=","avatar_url":"https://avatars3.githubusercontent.com/u/5524898?v=4","gravatar_id":"","url":"https://api.github.com/users/karnamonkster","html_url":"https://github.com/karnamonkster","followers_url":"https://api.github.com/users/karnamonkster/followers","following_url":"https://api.github.com/users/karnamonkster/following{/other_user}","gists_url":"https://api.github.com/users/karnamonkster/gists{/gist_id}","starred_url":"https://api.github.com/users/karnamonkster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karnamonkster/subscriptions","organizations_url":"https://api.github.com/users/karnamonkster/orgs","repos_url":"https://api.github.com/users/karnamonkster/repos","events_url":"https://api.github.com/users/karnamonkster/events{/privacy}","received_events_url":"https://api.github.com/users/karnamonkster/received_events","type":"User","site_admin":false},"created_at":"2014-04-04T05:51:11Z","updated_at":"2014-04-04T05:51:11Z","author_association":"NONE","body":"Is it fixed for ES 1.0.0? cause i am still getting the same\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/50994740","html_url":"https://github.com/elastic/elasticsearch/issues/3700#issuecomment-50994740","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3700","id":50994740,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTk0NzQw","user":{"login":"heyarny","id":821278,"node_id":"MDQ6VXNlcjgyMTI3OA==","avatar_url":"https://avatars3.githubusercontent.com/u/821278?v=4","gravatar_id":"","url":"https://api.github.com/users/heyarny","html_url":"https://github.com/heyarny","followers_url":"https://api.github.com/users/heyarny/followers","following_url":"https://api.github.com/users/heyarny/following{/other_user}","gists_url":"https://api.github.com/users/heyarny/gists{/gist_id}","starred_url":"https://api.github.com/users/heyarny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyarny/subscriptions","organizations_url":"https://api.github.com/users/heyarny/orgs","repos_url":"https://api.github.com/users/heyarny/repos","events_url":"https://api.github.com/users/heyarny/events{/privacy}","received_events_url":"https://api.github.com/users/heyarny/received_events","type":"User","site_admin":false},"created_at":"2014-08-03T16:19:46Z","updated_at":"2014-08-03T16:19:46Z","author_association":"NONE","body":"I'm getting the same error with ES 1.2.2.\n\n```\n[2014-08-03 16:17:29,202][INFO ][org.elasticsearch.river.mongodb.MongoDBRiver] Starting river mongodb\n[2014-08-03 16:17:29,204][WARN ][org.elasticsearch.river.mongodb.MongoDBRiver] Fail to start river mongodb\norg.elasticsearch.action.NoShardAvailableActionException: [_river][3] null\n    at org.elasticsearch.action.support.single.shard.TransportShardSingleOperationAction$AsyncSingleAction.perform(TransportShardSingleOperationAction.java:145)\n    at org.elasticsearch.action.support.single.shard.TransportShardSingleOperationAction$AsyncSingleAction.start(TransportShardSingleOperationAction.java:125)\n    at org.elasticsearch.action.support.single.shard.TransportShardSingleOperationAction.doExecute(TransportShardSingleOperationAction.java:74)\n    at org.elasticsearch.action.support.single.shard.TransportShardSingleOperationAction.doExecute(TransportShardSingleOperationAction.java:49)\n    at org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:63)\n    at org.elasticsearch.client.node.NodeClient.execute(NodeClient.java:92)\n    at org.elasticsearch.client.support.AbstractClient.get(AbstractClient.java:177)\n    at org.elasticsearch.action.get.GetRequestBuilder.doExecute(GetRequestBuilder.java:182)\n    at org.elasticsearch.action.ActionRequestBuilder.execute(ActionRequestBuilder.java:85)\n    at org.elasticsearch.action.ActionRequestBuilder.execute(ActionRequestBuilder.java:59)\n    at org.elasticsearch.action.ActionRequestBuilder.get(ActionRequestBuilder.java:67)\n    at org.elasticsearch.river.mongodb.util.MongoDBRiverHelper.getRiverStatus(MongoDBRiverHelper.java:21)\n    at org.elasticsearch.river.mongodb.MongoDBRiver.start(MongoDBRiver.java:154)\n    at org.elasticsearch.river.RiversService.createRiver(RiversService.java:148)\n    at org.elasticsearch.river.RiversService$ApplyRivers$2.onResponse(RiversService.java:275)\n    at org.elasticsearch.river.RiversService$ApplyRivers$2.onResponse(RiversService.java:269)\n    at org.elasticsearch.action.support.TransportAction$ThreadedActionListener$1.run(TransportAction.java:93)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:745)\n[2014-08-03 16:17:29,206][DEBUG][river.mongodb.util       ] setRiverStatus called with mongodb - START_FAILED\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/51002204","html_url":"https://github.com/elastic/elasticsearch/issues/3700#issuecomment-51002204","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3700","id":51002204,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDAyMjA0","user":{"login":"heyarny","id":821278,"node_id":"MDQ6VXNlcjgyMTI3OA==","avatar_url":"https://avatars3.githubusercontent.com/u/821278?v=4","gravatar_id":"","url":"https://api.github.com/users/heyarny","html_url":"https://github.com/heyarny","followers_url":"https://api.github.com/users/heyarny/followers","following_url":"https://api.github.com/users/heyarny/following{/other_user}","gists_url":"https://api.github.com/users/heyarny/gists{/gist_id}","starred_url":"https://api.github.com/users/heyarny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyarny/subscriptions","organizations_url":"https://api.github.com/users/heyarny/orgs","repos_url":"https://api.github.com/users/heyarny/repos","events_url":"https://api.github.com/users/heyarny/events{/privacy}","received_events_url":"https://api.github.com/users/heyarny/received_events","type":"User","site_admin":false},"created_at":"2014-08-03T20:35:14Z","updated_at":"2014-08-03T20:35:14Z","author_association":"NONE","body":"@karnamonkster did you fix the issue? if so, how?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/51014771","html_url":"https://github.com/elastic/elasticsearch/issues/3700#issuecomment-51014771","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3700","id":51014771,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDE0Nzcx","user":{"login":"karnamonkster","id":5524898,"node_id":"MDQ6VXNlcjU1MjQ4OTg=","avatar_url":"https://avatars3.githubusercontent.com/u/5524898?v=4","gravatar_id":"","url":"https://api.github.com/users/karnamonkster","html_url":"https://github.com/karnamonkster","followers_url":"https://api.github.com/users/karnamonkster/followers","following_url":"https://api.github.com/users/karnamonkster/following{/other_user}","gists_url":"https://api.github.com/users/karnamonkster/gists{/gist_id}","starred_url":"https://api.github.com/users/karnamonkster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karnamonkster/subscriptions","organizations_url":"https://api.github.com/users/karnamonkster/orgs","repos_url":"https://api.github.com/users/karnamonkster/repos","events_url":"https://api.github.com/users/karnamonkster/events{/privacy}","received_events_url":"https://api.github.com/users/karnamonkster/received_events","type":"User","site_admin":false},"created_at":"2014-08-04T03:33:46Z","updated_at":"2014-08-04T03:33:46Z","author_association":"NONE","body":"Can you give more details on your setup?\nYou must have more than one node with index for river created in your setup\n\nOn Monday, August 4, 2014, Arnold notifications@github.com wrote:\n\n> @karnamonkster https://github.com/karnamonkster did you fix the issue?\n> if so, how?\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/elasticsearch/elasticsearch/issues/3700#issuecomment-51002204\n> .\n\n## \n\nBR/\n_Karan_\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/51028890","html_url":"https://github.com/elastic/elasticsearch/issues/3700#issuecomment-51028890","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3700","id":51028890,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDI4ODkw","user":{"login":"heyarny","id":821278,"node_id":"MDQ6VXNlcjgyMTI3OA==","avatar_url":"https://avatars3.githubusercontent.com/u/821278?v=4","gravatar_id":"","url":"https://api.github.com/users/heyarny","html_url":"https://github.com/heyarny","followers_url":"https://api.github.com/users/heyarny/followers","following_url":"https://api.github.com/users/heyarny/following{/other_user}","gists_url":"https://api.github.com/users/heyarny/gists{/gist_id}","starred_url":"https://api.github.com/users/heyarny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyarny/subscriptions","organizations_url":"https://api.github.com/users/heyarny/orgs","repos_url":"https://api.github.com/users/heyarny/repos","events_url":"https://api.github.com/users/heyarny/events{/privacy}","received_events_url":"https://api.github.com/users/heyarny/received_events","type":"User","site_admin":false},"created_at":"2014-08-04T08:14:31Z","updated_at":"2014-08-04T08:14:31Z","author_association":"NONE","body":"@karnamonkster Using one node and 5 shards, per default. It worked in the past and stopped somewhen. I have another server running exactly the same config using ES 1.0.3 and it works just fine.\nNo idea where the catch might be.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/51049402","html_url":"https://github.com/elastic/elasticsearch/issues/3700#issuecomment-51049402","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3700","id":51049402,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDQ5NDAy","user":{"login":"karnamonkster","id":5524898,"node_id":"MDQ6VXNlcjU1MjQ4OTg=","avatar_url":"https://avatars3.githubusercontent.com/u/5524898?v=4","gravatar_id":"","url":"https://api.github.com/users/karnamonkster","html_url":"https://github.com/karnamonkster","followers_url":"https://api.github.com/users/karnamonkster/followers","following_url":"https://api.github.com/users/karnamonkster/following{/other_user}","gists_url":"https://api.github.com/users/karnamonkster/gists{/gist_id}","starred_url":"https://api.github.com/users/karnamonkster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karnamonkster/subscriptions","organizations_url":"https://api.github.com/users/karnamonkster/orgs","repos_url":"https://api.github.com/users/karnamonkster/repos","events_url":"https://api.github.com/users/karnamonkster/events{/privacy}","received_events_url":"https://api.github.com/users/karnamonkster/received_events","type":"User","site_admin":false},"created_at":"2014-08-04T11:40:26Z","updated_at":"2014-08-04T11:40:26Z","author_association":"NONE","body":"there is an authentication issue in the river configuration\n\nOn Mon, Aug 4, 2014 at 2:25 PM, Arnold notifications@github.com wrote:\n\n> This is another log when I try to create the config.\n> \n> [2014-08-04 10:49:48,482][INFO ][cluster.metadata         ] [Stylios Main] [_river] creating index, cause [auto(index api)], shards [5]/[1], mappings []\n> [2014-08-04 10:49:48,960][INFO ][cluster.metadata         ] [Stylios Main] [_river] update_mapping [mongodb](dynamic)\n> [2014-08-04 10:49:48,963][TRACE][org.elasticsearch.river.mongodb.MongoDBRiver] Initializing river : [mongodb]\n> [2014-08-04 10:49:48,963][INFO ][river.mongodb            ] Parse river settings for mongodb\n> [2014-08-04 10:49:48,963][TRACE][river.mongodb            ] mongoServersSettings: [{port=27017, host=144.76.xxx.xxx}]\n> [2014-08-04 10:49:48,963][INFO ][river.mongodb            ] Server: 144.76.xxx.xxx - 27017\n> [2014-08-04 10:49:48,963][INFO ][org.elasticsearch.river.mongodb.MongoDBRiver] Starting river mongodb\n> [2014-08-04 10:49:48,963][DEBUG][river.mongodb.util       ] setRiverStatus called with mongodb - RUNNING\n> [2014-08-04 10:49:48,965][DEBUG][org.elasticsearch.river.mongodb.MongoDBRiver] Using mongodb server(s): host [144.76.xxx.xxx], port [27017]\n> [2014-08-04 10:49:48,966][INFO ][org.elasticsearch.river.mongodb.MongoDBRiver] MongoDB River Plugin - version[2.0.1] - hash[445c35a] - time[2014-07-30T14:08:26Z]\n> [2014-08-04 10:49:48,966][INFO ][org.elasticsearch.river.mongodb.MongoDBRiver] starting mongodb stream. options: secondaryreadpreference [false], drop_collection [false], include_collection [], throttlesize [5000], gridfs [false], filter [null], db [stylios], collection [products], script [null], indexing to [stylios]/[product]\n> [2014-08-04 10:49:48,996][INFO ][cluster.metadata         ] [Stylios Main] [_river] update_mapping [mongodb](dynamic)\n> [2014-08-04 10:49:49,038][TRACE][org.elasticsearch.river.mongodb.MongoDBRiver] MongoAdminUser:  - authenticated: false\n> [2014-08-04 10:49:49,038][TRACE][org.elasticsearch.river.mongodb.MongoDBRiver] Found admin database\n> [2014-08-04 10:49:49,038][TRACE][org.elasticsearch.river.mongodb.MongoDBRiver] About to execute: { \"serverStatus\" : 1 , \"asserts\" : 0 , \"backgroundFlushing\" : 0 , \"connections\" : 0 , \"cursors\" : 0 , \"dur\" : 0 , \"extra_info\" : 0 , \"globalLock\" : 0 , \"indexCounters\" : 0 , \"locks\" : 0 , \"metrics\" : 0 , \"network\" : 0 , \"opcounters\" : 0 , \"opcountersRepl\" : 0 , \"recordStats\" : 0 , \"repl\" : 0}\n> [2014-08-04 10:49:49,057][TRACE][org.elasticsearch.river.mongodb.MongoDBRiver] Command executed return : { \"serverUsed\" : \"144.76.xxx.xxx:27017\" , \"host\" : \"stylios\" , \"version\" : \"2.6.3\" , \"process\" : \"mongod\" , \"pid\" : 15882 , \"uptime\" : 422.0 , \"uptimeMillis\" : 421297 , \"uptimeEstimate\" : 418.0 , \"localTime\" : { \"$date\" : \"2014-08-04T08:49:49.056Z\"} , \"ok\" : 1.0}\n> [2014-08-04 10:49:49,057][INFO ][org.elasticsearch.river.mongodb.MongoDBRiver] MongoDB version - 2.6.3\n> [2014-08-04 10:49:49,057][TRACE][org.elasticsearch.river.mongodb.MongoDBRiver] serverStatus: { \"serverUsed\" : \"144.76.xxx.xxx:27017\" , \"host\" : \"stylios\" , \"version\" : \"2.6.3\" , \"process\" : \"mongod\" , \"pid\" : 15882 , \"uptime\" : 422.0 , \"uptimeMillis\" : 421297 , \"uptimeEstimate\" : 418.0 , \"localTime\" : { \"$date\" : \"2014-08-04T08:49:49.056Z\"} , \"ok\" : 1.0}\n> [2014-08-04 10:49:49,057][TRACE][org.elasticsearch.river.mongodb.MongoDBRiver] process: mongod\n> [2014-08-04 10:49:49,057][TRACE][org.elasticsearch.river.mongodb.MongoDBRiver] Not mongos\n> [2014-08-04 10:49:49,072][INFO ][cluster.metadata         ] [Stylios Main] [_river] update_mapping [mongodb](dynamic)\n> [2014-08-04 10:49:49,082][DEBUG][river.mongodb.util       ] setRiverStatus called with mongodb - INITIAL_IMPORT_FAILED\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/elasticsearch/elasticsearch/issues/3700#issuecomment-51032252\n> .\n\n## \n\nBR/\n_Karan_\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/51049746","html_url":"https://github.com/elastic/elasticsearch/issues/3700#issuecomment-51049746","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3700","id":51049746,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDQ5NzQ2","user":{"login":"heyarny","id":821278,"node_id":"MDQ6VXNlcjgyMTI3OA==","avatar_url":"https://avatars3.githubusercontent.com/u/821278?v=4","gravatar_id":"","url":"https://api.github.com/users/heyarny","html_url":"https://github.com/heyarny","followers_url":"https://api.github.com/users/heyarny/followers","following_url":"https://api.github.com/users/heyarny/following{/other_user}","gists_url":"https://api.github.com/users/heyarny/gists{/gist_id}","starred_url":"https://api.github.com/users/heyarny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyarny/subscriptions","organizations_url":"https://api.github.com/users/heyarny/orgs","repos_url":"https://api.github.com/users/heyarny/repos","events_url":"https://api.github.com/users/heyarny/events{/privacy}","received_events_url":"https://api.github.com/users/heyarny/received_events","type":"User","site_admin":false},"created_at":"2014-08-04T11:44:46Z","updated_at":"2014-08-04T11:44:46Z","author_association":"NONE","body":"@karnamonkster not sure whether this is the actual issue.\nI'm not using any authentications within mongodb or ES.\nI will try to dig deeper into it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/51050086","html_url":"https://github.com/elastic/elasticsearch/issues/3700#issuecomment-51050086","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3700","id":51050086,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDUwMDg2","user":{"login":"karnamonkster","id":5524898,"node_id":"MDQ6VXNlcjU1MjQ4OTg=","avatar_url":"https://avatars3.githubusercontent.com/u/5524898?v=4","gravatar_id":"","url":"https://api.github.com/users/karnamonkster","html_url":"https://github.com/karnamonkster","followers_url":"https://api.github.com/users/karnamonkster/followers","following_url":"https://api.github.com/users/karnamonkster/following{/other_user}","gists_url":"https://api.github.com/users/karnamonkster/gists{/gist_id}","starred_url":"https://api.github.com/users/karnamonkster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karnamonkster/subscriptions","organizations_url":"https://api.github.com/users/karnamonkster/orgs","repos_url":"https://api.github.com/users/karnamonkster/repos","events_url":"https://api.github.com/users/karnamonkster/events{/privacy}","received_events_url":"https://api.github.com/users/karnamonkster/received_events","type":"User","site_admin":false},"created_at":"2014-08-04T11:49:10Z","updated_at":"2014-08-04T11:49:10Z","author_association":"NONE","body":"check this .........\n\n[2014-08-04 10:49:48,996][INFO ][cluster.metadata         ] [Stylios\nMain] [_river] update_mapping [mongodb](dynamic)\n[2014-08-04 10:49:49,038][TRACE][org.elasticsearch.river.mongodb.MongoDBRiver]\nMongoAdminUser:  - authenticated: false\n\nOn Mon, Aug 4, 2014 at 5:15 PM, Arnold notifications@github.com wrote:\n\n> @karnamonkster https://github.com/karnamonkster not sure whether this\n> is the actual issue.\n> I'm not using any authentications within mongodb or ES.\n> I will try to dig deeper into it.\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/elasticsearch/elasticsearch/issues/3700#issuecomment-51049746\n> .\n\n## \n\nBR/\n_Karan_\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/51050390","html_url":"https://github.com/elastic/elasticsearch/issues/3700#issuecomment-51050390","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3700","id":51050390,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDUwMzkw","user":{"login":"heyarny","id":821278,"node_id":"MDQ6VXNlcjgyMTI3OA==","avatar_url":"https://avatars3.githubusercontent.com/u/821278?v=4","gravatar_id":"","url":"https://api.github.com/users/heyarny","html_url":"https://github.com/heyarny","followers_url":"https://api.github.com/users/heyarny/followers","following_url":"https://api.github.com/users/heyarny/following{/other_user}","gists_url":"https://api.github.com/users/heyarny/gists{/gist_id}","starred_url":"https://api.github.com/users/heyarny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyarny/subscriptions","organizations_url":"https://api.github.com/users/heyarny/orgs","repos_url":"https://api.github.com/users/heyarny/repos","events_url":"https://api.github.com/users/heyarny/events{/privacy}","received_events_url":"https://api.github.com/users/heyarny/received_events","type":"User","site_admin":false},"created_at":"2014-08-04T11:52:33Z","updated_at":"2014-08-04T11:52:33Z","author_association":"NONE","body":"yes, but my mongodb is not running in auth mode nor there are any users available.\nRiver config doesn't contain any auth/users info as well.\nNo idea why this is showing up. Will take a closer look.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/51050433","html_url":"https://github.com/elastic/elasticsearch/issues/3700#issuecomment-51050433","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3700","id":51050433,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDUwNDMz","user":{"login":"richardwilly98","id":118560,"node_id":"MDQ6VXNlcjExODU2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/118560?v=4","gravatar_id":"","url":"https://api.github.com/users/richardwilly98","html_url":"https://github.com/richardwilly98","followers_url":"https://api.github.com/users/richardwilly98/followers","following_url":"https://api.github.com/users/richardwilly98/following{/other_user}","gists_url":"https://api.github.com/users/richardwilly98/gists{/gist_id}","starred_url":"https://api.github.com/users/richardwilly98/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardwilly98/subscriptions","organizations_url":"https://api.github.com/users/richardwilly98/orgs","repos_url":"https://api.github.com/users/richardwilly98/repos","events_url":"https://api.github.com/users/richardwilly98/events{/privacy}","received_events_url":"https://api.github.com/users/richardwilly98/received_events","type":"User","site_admin":false},"created_at":"2014-08-04T11:53:05Z","updated_at":"2014-08-04T11:53:05Z","author_association":"CONTRIBUTOR","body":"That was a bug initially reported in Elasticsearch (when the river gets registered).\nThat's most likely an issue in Elasticsearch again in version 1.2.2\n- authenticated: false just means MongoDB request is not authenticated (but if you do no use authentication in MongoDB that's just fine).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/51050880","html_url":"https://github.com/elastic/elasticsearch/issues/3700#issuecomment-51050880","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3700","id":51050880,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDUwODgw","user":{"login":"heyarny","id":821278,"node_id":"MDQ6VXNlcjgyMTI3OA==","avatar_url":"https://avatars3.githubusercontent.com/u/821278?v=4","gravatar_id":"","url":"https://api.github.com/users/heyarny","html_url":"https://github.com/heyarny","followers_url":"https://api.github.com/users/heyarny/followers","following_url":"https://api.github.com/users/heyarny/following{/other_user}","gists_url":"https://api.github.com/users/heyarny/gists{/gist_id}","starred_url":"https://api.github.com/users/heyarny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyarny/subscriptions","organizations_url":"https://api.github.com/users/heyarny/orgs","repos_url":"https://api.github.com/users/heyarny/repos","events_url":"https://api.github.com/users/heyarny/events{/privacy}","received_events_url":"https://api.github.com/users/heyarny/received_events","type":"User","site_admin":false},"created_at":"2014-08-04T11:58:51Z","updated_at":"2014-08-04T11:58:51Z","author_association":"NONE","body":"@richardwilly98 but on your river site it says 2.0.1 should work with ES 1.2.2?\nLike I noted on the issue there: this is happening if I restart ES only. Initial import is working just like expected.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/51066930","html_url":"https://github.com/elastic/elasticsearch/issues/3700#issuecomment-51066930","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3700","id":51066930,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDY2OTMw","user":{"login":"heyarny","id":821278,"node_id":"MDQ6VXNlcjgyMTI3OA==","avatar_url":"https://avatars3.githubusercontent.com/u/821278?v=4","gravatar_id":"","url":"https://api.github.com/users/heyarny","html_url":"https://github.com/heyarny","followers_url":"https://api.github.com/users/heyarny/followers","following_url":"https://api.github.com/users/heyarny/following{/other_user}","gists_url":"https://api.github.com/users/heyarny/gists{/gist_id}","starred_url":"https://api.github.com/users/heyarny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyarny/subscriptions","organizations_url":"https://api.github.com/users/heyarny/orgs","repos_url":"https://api.github.com/users/heyarny/repos","events_url":"https://api.github.com/users/heyarny/events{/privacy}","received_events_url":"https://api.github.com/users/heyarny/received_events","type":"User","site_admin":false},"created_at":"2014-08-04T14:27:40Z","updated_at":"2014-08-04T14:27:40Z","author_association":"NONE","body":"@karnamonkster @richardwilly98 \nI have now downgraded back to ES 1.0.0, MongoDBRiver 2.0.0 and MongoDB 2.4.10.\nRemoved all indexes (_river and main index). The first configuration with initial import worked just fine.\nRestarted ES and getting the same error again:\n\n```\n[2014-08-04 16:20:05,954][INFO ][node                     ] [Stylios Main] version[1.0.0], pid[26352], build[a46900e/2014-02-12T16:18:34Z]\n[2014-08-04 16:20:05,955][INFO ][node                     ] [Stylios Main] initializing ...\n[2014-08-04 16:20:05,982][INFO ][plugins                  ] [Stylios Main] loaded [mongodb-river, mapper-attachments], sites [river-mongodb]\n[2014-08-04 16:20:07,595][TRACE][rest.action.mongodb      ] [Stylios Main] RestMongoDBRiverAction - baseUrl: /_river/mongodb\n[2014-08-04 16:20:07,660][INFO ][node                     ] [Stylios Main] initialized\n[2014-08-04 16:20:07,660][INFO ][node                     ] [Stylios Main] starting ...\n[2014-08-04 16:20:07,731][INFO ][transport                ] [Stylios Main] bound_address {inet[/0:0:0:0:0:0:0:0:9300]}, publish_address {inet[/144.76.xxx.xxx:9300]}\n[2014-08-04 16:20:10,746][INFO ][cluster.service          ] [Stylios Main] new_master [Stylios Main][LGdaDMCWQa28GoHAKPdC0w][stylios][inet[/144.76.xxx.xxx:9300]], reason: zen-disco-join (elected_as_master)\n[2014-08-04 16:20:10,761][INFO ][discovery                ] [Stylios Main] stylios/LGdaDMCWQa28GoHAKPdC0w\n[2014-08-04 16:20:10,774][INFO ][http                     ] [Stylios Main] bound_address {inet[/0:0:0:0:0:0:0:0:9200]}, publish_address {inet[/144.76.xxx.xxx:9200]}\n[2014-08-04 16:20:11,363][INFO ][gateway                  ] [Stylios Main] recovered [2] indices into cluster_state\n[2014-08-04 16:20:11,521][INFO ][node                     ] [Stylios Main] started\n[2014-08-04 16:20:12,029][TRACE][org.elasticsearch.river.mongodb.MongoDBRiver] Initializing river : [mongodb]\n[2014-08-04 16:20:12,031][INFO ][river.mongodb            ] Parse river settings for mongodb\n[2014-08-04 16:20:12,033][TRACE][river.mongodb            ] mongoServersSettings: [{port=27017, host=144.76.xxx.xxx}]\n[2014-08-04 16:20:12,034][INFO ][river.mongodb            ] Server: 144.76.xxx.xxx - 27017\n[2014-08-04 16:20:12,092][INFO ][org.elasticsearch.river.mongodb.MongoDBRiver] Starting river mongodb\n[2014-08-04 16:20:12,094][WARN ][org.elasticsearch.river.mongodb.MongoDBRiver] Fail to start river mongodb\norg.elasticsearch.action.NoShardAvailableActionException: [_river][3] null\n    at org.elasticsearch.action.support.single.shard.TransportShardSingleOperationAction$AsyncSingleAction.perform(TransportShardSingleOperationAction.java:145)\n    at org.elasticsearch.action.support.single.shard.TransportShardSingleOperationAction$AsyncSingleAction.onFailure(TransportShardSingleOperationAction.java:132)\n    at org.elasticsearch.action.support.single.shard.TransportShardSingleOperationAction$AsyncSingleAction.access$900(TransportShardSingleOperationAction.java:97)\n    at org.elasticsearch.action.support.single.shard.TransportShardSingleOperationAction$AsyncSingleAction$1.run(TransportShardSingleOperationAction.java:166)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:745)\n[2014-08-04 16:20:12,095][DEBUG][river.mongodb.util       ] setRiverStatus called with mongodb - START_FAILED\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/51082369","html_url":"https://github.com/elastic/elasticsearch/issues/3700#issuecomment-51082369","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3700","id":51082369,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDgyMzY5","user":{"login":"karnamonkster","id":5524898,"node_id":"MDQ6VXNlcjU1MjQ4OTg=","avatar_url":"https://avatars3.githubusercontent.com/u/5524898?v=4","gravatar_id":"","url":"https://api.github.com/users/karnamonkster","html_url":"https://github.com/karnamonkster","followers_url":"https://api.github.com/users/karnamonkster/followers","following_url":"https://api.github.com/users/karnamonkster/following{/other_user}","gists_url":"https://api.github.com/users/karnamonkster/gists{/gist_id}","starred_url":"https://api.github.com/users/karnamonkster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karnamonkster/subscriptions","organizations_url":"https://api.github.com/users/karnamonkster/orgs","repos_url":"https://api.github.com/users/karnamonkster/repos","events_url":"https://api.github.com/users/karnamonkster/events{/privacy}","received_events_url":"https://api.github.com/users/karnamonkster/received_events","type":"User","site_admin":false},"created_at":"2014-08-04T16:22:42Z","updated_at":"2014-08-04T16:22:42Z","author_association":"NONE","body":"can you try setting up another node.. just to check\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/51133605","html_url":"https://github.com/elastic/elasticsearch/issues/3700#issuecomment-51133605","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3700","id":51133605,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTMzNjA1","user":{"login":"heyarny","id":821278,"node_id":"MDQ6VXNlcjgyMTI3OA==","avatar_url":"https://avatars3.githubusercontent.com/u/821278?v=4","gravatar_id":"","url":"https://api.github.com/users/heyarny","html_url":"https://github.com/heyarny","followers_url":"https://api.github.com/users/heyarny/followers","following_url":"https://api.github.com/users/heyarny/following{/other_user}","gists_url":"https://api.github.com/users/heyarny/gists{/gist_id}","starred_url":"https://api.github.com/users/heyarny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyarny/subscriptions","organizations_url":"https://api.github.com/users/heyarny/orgs","repos_url":"https://api.github.com/users/heyarny/repos","events_url":"https://api.github.com/users/heyarny/events{/privacy}","received_events_url":"https://api.github.com/users/heyarny/received_events","type":"User","site_admin":false},"created_at":"2014-08-04T23:55:06Z","updated_at":"2014-08-04T23:55:06Z","author_association":"NONE","body":"I turned on more logging details and I got this:\nAny way to re-open this issue?\n\n```\n[2014-08-05 01:48:30,684][INFO ][node                     ] [Main Node] version[1.0.3], pid[3101], build[61bfb72/2014-04-16T14:43:11Z]\n[2014-08-05 01:48:30,685][INFO ][node                     ] [Main Node] initializing ...\n[2014-08-05 01:48:30,691][INFO ][plugins                  ] [Main Node] loaded [mongodb-river], sites [river-mongodb]\n[2014-08-05 01:48:32,533][INFO ][node                     ] [Main Node] initialized\n[2014-08-05 01:48:32,534][INFO ][node                     ] [Main Node] starting ...\n[2014-08-05 01:48:32,630][INFO ][transport                ] [Main Node] bound_address {inet[/0:0:0:0:0:0:0:0:9300]}, publish_address {inet[/144.76.xxx.xxx:9300]}\n[2014-08-05 01:48:35,649][INFO ][cluster.service          ] [Main Node] new_master [Main Node][tPimjK3FTNihB_ESQfMwmw][stylios][inet[/144.76.xxx.xxx:9300]], reason: zen-disco-join (elected_as_master)\n[2014-08-05 01:48:35,658][INFO ][discovery                ] [Main Node] stylios/tPimjK3FTNihB_ESQfMwmw\n[2014-08-05 01:48:35,668][INFO ][http                     ] [Main Node] bound_address {inet[/0:0:0:0:0:0:0:0:9200]}, publish_address {inet[/144.76.xxx.xxx:9200]}\n[2014-08-05 01:48:36,426][INFO ][gateway                  ] [Main Node] recovered [2] indices into cluster_state\n[2014-08-05 01:48:36,480][TRACE][action.get               ] [Main Node] [_river][1], node[tPimjK3FTNihB_ESQfMwmw], [P], s[INITIALIZING]: failed to execute [[_river][stylios_users][_meta]: routing [null]]\norg.elasticsearch.index.shard.IllegalIndexShardStateException: [_river][1] CurrentState[POST_RECOVERY] operations only allowed when started/relocated\n    at org.elasticsearch.index.shard.service.InternalIndexShard.readAllowed(InternalIndexShard.java:806)\n    at org.elasticsearch.index.shard.service.InternalIndexShard.readAllowed(InternalIndexShard.java:797)\n    at org.elasticsearch.index.shard.service.InternalIndexShard.get(InternalIndexShard.java:466)\n    at org.elasticsearch.index.get.ShardGetService.innerGet(ShardGetService.java:195)\n    at org.elasticsearch.index.get.ShardGetService.get(ShardGetService.java:106)\n    at org.elasticsearch.action.get.TransportGetAction.shardOperation(TransportGetAction.java:109)\n    at org.elasticsearch.action.get.TransportGetAction.shardOperation(TransportGetAction.java:43)\n    at org.elasticsearch.action.support.single.shard.TransportShardSingleOperationAction$AsyncSingleAction$1.run(TransportShardSingleOperationAction.java:163)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:745)\n[2014-08-05 01:48:36,752][INFO ][river.mongodb            ] Parse river settings for stylios_users\n[2014-08-05 01:48:36,755][INFO ][river.mongodb            ] Server: 144.76.xxx.xxx - 27017\n[2014-08-05 01:48:36,766][INFO ][org.elasticsearch.river.mongodb.MongoDBRiver] Starting river stylios_users\n[2014-08-05 01:48:36,767][TRACE][action.get               ] [Main Node] [_river][3], node[tPimjK3FTNihB_ESQfMwmw], [P], s[INITIALIZING]: failed to execute [[_river][stylios_users][_riverstatus]: routing [null]]\norg.elasticsearch.index.shard.IllegalIndexShardStateException: [_river][3] CurrentState[POST_RECOVERY] operations only allowed when started/relocated\n    at org.elasticsearch.index.shard.service.InternalIndexShard.readAllowed(InternalIndexShard.java:806)\n    at org.elasticsearch.index.shard.service.InternalIndexShard.readAllowed(InternalIndexShard.java:797)\n    at org.elasticsearch.index.shard.service.InternalIndexShard.get(InternalIndexShard.java:466)\n    at org.elasticsearch.index.get.ShardGetService.innerGet(ShardGetService.java:195)\n    at org.elasticsearch.index.get.ShardGetService.get(ShardGetService.java:106)\n    at org.elasticsearch.action.get.TransportGetAction.shardOperation(TransportGetAction.java:109)\n    at org.elasticsearch.action.get.TransportGetAction.shardOperation(TransportGetAction.java:43)\n    at org.elasticsearch.action.support.single.shard.TransportShardSingleOperationAction$AsyncSingleAction$1.run(TransportShardSingleOperationAction.java:163)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:745)\n[2014-08-05 01:48:36,768][WARN ][org.elasticsearch.river.mongodb.MongoDBRiver] Fail to start river stylios_users\norg.elasticsearch.action.NoShardAvailableActionException: [_river][3] null\n    at org.elasticsearch.action.support.single.shard.TransportShardSingleOperationAction$AsyncSingleAction.perform(TransportShardSingleOperationAction.java:145)\n    at org.elasticsearch.action.support.single.shard.TransportShardSingleOperationAction$AsyncSingleAction.onFailure(TransportShardSingleOperationAction.java:132)\n    at org.elasticsearch.action.support.single.shard.TransportShardSingleOperationAction$AsyncSingleAction.access$900(TransportShardSingleOperationAction.java:97)\n    at org.elasticsearch.action.support.single.shard.TransportShardSingleOperationAction$AsyncSingleAction$1.run(TransportShardSingleOperationAction.java:166)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:745)\n[2014-08-05 01:48:36,772][TRACE][action.index             ] [Main Node] primary shard [[_river][3]] is not yet active or we do not know the node it is assigned to [tPimjK3FTNihB_ESQfMwmw], scheduling a retry.\n[2014-08-05 01:48:36,961][TRACE][action.index             ] [Main Node] state change while we were trying to add listener, trying to start again, sampled_version [4], current_version [5]\n[2014-08-05 01:48:36,964][INFO ][node                     ] [Main Node] started\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/51185356","html_url":"https://github.com/elastic/elasticsearch/issues/3700#issuecomment-51185356","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3700","id":51185356,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTg1MzU2","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-08-05T11:35:53Z","updated_at":"2014-08-05T11:35:53Z","author_association":"CONTRIBUTOR","body":"Hi @heyarny \n\nI think this may be a different issue to the previous one.  Please could you open a new issue, and provide a step-by-step reproduction, everything that is needed to replicate this on a clean install.  I'd especially like to know about what settings you have, and if you're using any index templates.\n\nAlso, is this a transient error? In other words, does the error eventually disappear and everything start working normally, or does it fail completely?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/51188990","html_url":"https://github.com/elastic/elasticsearch/issues/3700#issuecomment-51188990","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3700","id":51188990,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTg4OTkw","user":{"login":"heyarny","id":821278,"node_id":"MDQ6VXNlcjgyMTI3OA==","avatar_url":"https://avatars3.githubusercontent.com/u/821278?v=4","gravatar_id":"","url":"https://api.github.com/users/heyarny","html_url":"https://github.com/heyarny","followers_url":"https://api.github.com/users/heyarny/followers","following_url":"https://api.github.com/users/heyarny/following{/other_user}","gists_url":"https://api.github.com/users/heyarny/gists{/gist_id}","starred_url":"https://api.github.com/users/heyarny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyarny/subscriptions","organizations_url":"https://api.github.com/users/heyarny/orgs","repos_url":"https://api.github.com/users/heyarny/repos","events_url":"https://api.github.com/users/heyarny/events{/privacy}","received_events_url":"https://api.github.com/users/heyarny/received_events","type":"User","site_admin":false},"created_at":"2014-08-05T12:12:14Z","updated_at":"2014-08-05T12:13:06Z","author_association":"NONE","body":"@clintongormley I'm not sure whether I can reproduce this any longer, because I could fix this issue tonight.\n\nMy previous config:\nES 1.0.3, MongoDB 2.4.10, MongoDBRiver 2.0.0\nelasticsearch.yml (pretty much anything was default, except cluster name and node name)\n\n```\n...\nindex.number_of_shards: 5\nindex.number_of_replicas: 1\n...\n```\n\nI had an unassigned node visible inside my elasticsearch-head interface.\n\nWhat I did to fix it:\nUpgraded everything back to ES 1.2.2, MongoDB 2.6.3, MongoDBRiver 2.0.1.\n!!! That issue was still there !!!\nThen:\n1. I removed all oplog files (local.*) from mongodb, set bind_ip to my external interface.\n2. Removed all indexes (_river and others)\n3. Modified elasticsearch.yml\n\n```\n....\nindex.number_of_shards: 5\nindex.number_of_replicas: 0\nnetwork.host: 144.76.xxx.xxx\n...\n```\n1. Restarted mongodb and ES\n2. Set up my river to\n\n```\n {\ntype: mongodb\nmongodb: {\nservers: [\n{\nhost: 144.76.xxx.xxx,\nport: 27017\n}\n]\ndb: stylios,\ncollection: products\n}\nindex: {\nname: stylios,\ntype: product\n}\n}\n```\n\nSo after all the unassigned node disappeared now, and it started working again. Although I have another server having exactly the same unassigned node, but everything seems to be working just fine.\n\nStart up log now:\n\n```\n[2014-08-05 05:17:09,210][DEBUG][action.search.type       ] [Main Node] All shards failed for phase: [query]\n[2014-08-05 05:17:09,359][INFO ][node                     ] [Main Node] stopped\n[2014-08-05 05:17:09,359][INFO ][node                     ] [Main Node] closing ...\n[2014-08-05 05:17:09,367][INFO ][node                     ] [Main Node] closed\n[2014-08-05 05:17:11,054][INFO ][node                     ] [Main Node] version[1.2.2], pid[16728], build[9902f08/2014-07-09T12:02:32Z]\n[2014-08-05 05:17:11,054][INFO ][node                     ] [Main Node] initializing ...\n[2014-08-05 05:17:11,062][INFO ][plugins                  ] [Main Node] loaded [mongodb-river], sites [river-mongodb]\n[2014-08-05 05:17:12,745][INFO ][node                     ] [Main Node] initialized\n[2014-08-05 05:17:12,745][INFO ][node                     ] [Main Node] starting ...\n[2014-08-05 05:17:12,824][INFO ][transport                ] [Main Node] bound_address {inet[/144.76.xxx.xxx:9300]}, publish_address {inet[/144.76.xxx.xxx:9300]}\n[2014-08-05 05:17:15,844][INFO ][cluster.service          ] [Main Node] new_master [Main Node][Xd6zI732TU2ECvd7FTBDvg][stylios][inet[/144.76.xxx.xxx:9300]], reason: zen-disco-join (elected_as_master)\n[2014-08-05 05:17:15,852][INFO ][discovery                ] [Main Node] stylios/Xd6zI732TU2ECvd7FTBDvg\n[2014-08-05 05:17:15,865][INFO ][http                     ] [Main Node] bound_address {inet[/144.76.xxx.xxx:9200]}, publish_address {inet[/144.76.xxx.xxx:9200]}\n[2014-08-05 05:17:16,413][INFO ][gateway                  ] [Main Node] recovered [2] indices into cluster_state\n[2014-08-05 05:17:16,413][INFO ][node                     ] [Main Node] started\n[2014-08-05 05:17:16,673][INFO ][river.mongodb            ] Parse river settings for stylios\n[2014-08-05 05:17:16,677][INFO ][river.mongodb            ] Server: 144.76.xxx.xxx - 27017\n[2014-08-05 05:17:16,693][INFO ][org.elasticsearch.river.mongodb.MongoDBRiver] Starting river stylios\n[2014-08-05 05:17:16,707][INFO ][org.elasticsearch.river.mongodb.MongoDBRiver] MongoDB River Plugin - version[2.0.1] - hash[445c35a] - time[2014-07-30T14:08:26Z]\n[2014-08-05 05:17:16,708][INFO ][org.elasticsearch.river.mongodb.MongoDBRiver] starting mongodb stream. options: secondaryreadpreference [false], drop_collection [false], include_collection [], throttlesize [5000], gridfs [false], filter [null], db [stylios], collection [products], script [null], indexing to [stylios]/[product]\n[2014-08-05 05:17:16,870][INFO ][org.elasticsearch.river.mongodb.MongoDBRiver] MongoDB version - 2.6.3\n[2014-08-05 13:40:24,708][INFO ][river.mongodb            ] Parse river settings for stylios\n[2014-08-05 13:40:24,708][INFO ][river.mongodb            ] Server: 144.76.xxx.xxx - 27017\n...\n```\n\nSo after all I'm not sure where this issue came from and where it's gone.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/62706988","html_url":"https://github.com/elastic/elasticsearch/issues/3700#issuecomment-62706988","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3700","id":62706988,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNzA2OTg4","user":{"login":"phax","id":196219,"node_id":"MDQ6VXNlcjE5NjIxOQ==","avatar_url":"https://avatars0.githubusercontent.com/u/196219?v=4","gravatar_id":"","url":"https://api.github.com/users/phax","html_url":"https://github.com/phax","followers_url":"https://api.github.com/users/phax/followers","following_url":"https://api.github.com/users/phax/following{/other_user}","gists_url":"https://api.github.com/users/phax/gists{/gist_id}","starred_url":"https://api.github.com/users/phax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phax/subscriptions","organizations_url":"https://api.github.com/users/phax/orgs","repos_url":"https://api.github.com/users/phax/repos","events_url":"https://api.github.com/users/phax/events{/privacy}","received_events_url":"https://api.github.com/users/phax/received_events","type":"User","site_admin":false},"created_at":"2014-11-12T11:48:19Z","updated_at":"2014-11-12T11:48:41Z","author_association":"NONE","body":"I'm having the same issue with ES 1.3.5 but without MongoDB/River with a single shard.\n\nIt occurs only when a new index is created and directly afterwards a \"create\" and \"get\" is done (in my case).\nWhen putting a breakpoint into the first exception, waiting a few seconds and continuing than, the follow-up exception were gone - so I assume it's somehow a timing issue.\n\nAfter the index creation, I'm calling\n\n```\nclient.admin ().cluster ().prepareHealth (\"index-name\").setWaitForGreenStatus ().execute ().actionGet ();\n```\n\nto ensure the index is ready before I'm calling a \"create\" in it.\nConfusingly the response of this message is a timeout after 30 seconds (default value).\nThe problem is that the shard stays unassigned (a problem I need to resolve).\n\nThe resulting trace is comparable to a previous one:\n\n```\norg.elasticsearch.action.NoShardAvailableActionException: [index-name][0] null\n    at org.elasticsearch.action.support.single.shard.TransportShardSingleOperationAction$AsyncSingleAction.perform(TransportShardSingleOperationAction.java:144)\n    at org.elasticsearch.action.support.single.shard.TransportShardSingleOperationAction$AsyncSingleAction.onFailure(TransportShardSingleOperationAction.java:131)\n    at org.elasticsearch.action.support.single.shard.TransportShardSingleOperationAction$AsyncSingleAction.access$1300(TransportShardSingleOperationAction.java:93)\n    at org.elasticsearch.action.support.single.shard.TransportShardSingleOperationAction$AsyncSingleAction$1.run(TransportShardSingleOperationAction.java:167)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:745)\n```\n\nwhich is based on an IllegalIndexShardStateException:\n\n```\norg.elasticsearch.index.shard.IllegalIndexShardStateException: [index-name][0] CurrentState[RECOVERING] operations only allowed when started/relocated\n    at org.elasticsearch.index.shard.service.InternalIndexShard.readAllowed(InternalIndexShard.java:826)\n    at org.elasticsearch.index.shard.service.InternalIndexShard.readAllowed(InternalIndexShard.java:817)\n    at org.elasticsearch.index.shard.service.InternalIndexShard.get(InternalIndexShard.java:472)\n    at org.elasticsearch.index.get.ShardGetService.innerGet(ShardGetService.java:193)\n    at org.elasticsearch.index.get.ShardGetService.get(ShardGetService.java:104)\n    at org.elasticsearch.action.get.TransportGetAction.shardOperation(TransportGetAction.java:104)\n    at org.elasticsearch.action.get.TransportGetAction.shardOperation(TransportGetAction.java:43)\n    at org.elasticsearch.action.support.single.shard.TransportShardSingleOperationAction$AsyncSingleAction$1.run(TransportShardSingleOperationAction.java:164)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:745)\n```\n\nPutting a breakpoint in \"InternalIndexShard.readAllowed(Mode)\" it can be seen, that \"state\" and \"this.state\" differ.\n\nIt is very confusing to me - I admit. Maybe it helps finding the source of the issue...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/123252238","html_url":"https://github.com/elastic/elasticsearch/issues/3700#issuecomment-123252238","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3700","id":123252238,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMzI1MjIzOA==","user":{"login":"benben","id":124513,"node_id":"MDQ6VXNlcjEyNDUxMw==","avatar_url":"https://avatars3.githubusercontent.com/u/124513?v=4","gravatar_id":"","url":"https://api.github.com/users/benben","html_url":"https://github.com/benben","followers_url":"https://api.github.com/users/benben/followers","following_url":"https://api.github.com/users/benben/following{/other_user}","gists_url":"https://api.github.com/users/benben/gists{/gist_id}","starred_url":"https://api.github.com/users/benben/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benben/subscriptions","organizations_url":"https://api.github.com/users/benben/orgs","repos_url":"https://api.github.com/users/benben/repos","events_url":"https://api.github.com/users/benben/events{/privacy}","received_events_url":"https://api.github.com/users/benben/received_events","type":"User","site_admin":false},"created_at":"2015-07-21T10:18:22Z","updated_at":"2015-07-21T10:18:22Z","author_association":"NONE","body":"this error occurs for us in our CI environment. ES 1.4.5\n\n```\norg.elasticsearch.index.shard.IllegalIndexShardStateException: [test_music_genres][0] CurrentState[RECOVERING] operations only allowed when started/relocated\n        at org.elasticsearch.index.shard.service.InternalIndexShard.readAllowed(InternalIndexShard.java:876)\n        at org.elasticsearch.index.shard.service.InternalIndexShard.acquireSearcher(InternalIndexShard.java:703)\n        at org.elasticsearch.index.shard.service.InternalIndexShard.acquireSearcher(InternalIndexShard.java:698)\n        at org.elasticsearch.search.SearchService.createContext(SearchService.java:535)\n        at org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:515)\n        at org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:356)\n        at org.elasticsearch.search.action.SearchServiceTransportAction$11.call(SearchServiceTransportAction.java:333)\n        at org.elasticsearch.search.action.SearchServiceTransportAction$11.call(SearchServiceTransportAction.java:330)\n        at org.elasticsearch.search.action.SearchServiceTransportAction$23.run(SearchServiceTransportAction.java:559)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n```\n\ncan someone please have a look and reopen? thanks!\n","performed_via_github_app":null}]