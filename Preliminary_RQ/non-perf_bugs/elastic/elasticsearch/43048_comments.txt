[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/500436672","html_url":"https://github.com/elastic/elasticsearch/issues/43048#issuecomment-500436672","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43048","id":500436672,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDQzNjY3Mg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-06-10T14:27:04Z","updated_at":"2019-06-10T14:27:04Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/500491375","html_url":"https://github.com/elastic/elasticsearch/issues/43048#issuecomment-500491375","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43048","id":500491375,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDQ5MTM3NQ==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2019-06-10T16:50:28Z","updated_at":"2019-06-10T16:50:28Z","author_association":"MEMBER","body":"Think this was just a broken CI (super slow) run.\r\nThe logs contain:\r\n\r\n```\r\n\r\njava.lang.OutOfMemoryError: Requested array size exceeds VM limit\r\n--\r\nDumping heap to /var/lib/jenkins/workspace/elastic+elasticsearch+7.2+matrix-java-periodic/ES_BUILD_JAVA/openjdk12/ES_RUNTIME_JAVA/java12/nodes/immutable&&linux&&docker/modules/lang-painless/build/heapdump/java_pid146574.hprof ...\r\nHeap dump file created [365621873 bytes in 3.104 secs]\r\n\r\n\r\n```\r\n\r\nand it seems the IT cluster didn't even form properly (timeout on cluster formation). I opened #43057 regardless to make the situation a little more stable and failures easier to interpret.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/500554230","html_url":"https://github.com/elastic/elasticsearch/issues/43048#issuecomment-500554230","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43048","id":500554230,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDU1NDIzMA==","user":{"login":"henningandersen","id":33268011,"node_id":"MDQ6VXNlcjMzMjY4MDEx","avatar_url":"https://avatars2.githubusercontent.com/u/33268011?v=4","gravatar_id":"","url":"https://api.github.com/users/henningandersen","html_url":"https://github.com/henningandersen","followers_url":"https://api.github.com/users/henningandersen/followers","following_url":"https://api.github.com/users/henningandersen/following{/other_user}","gists_url":"https://api.github.com/users/henningandersen/gists{/gist_id}","starred_url":"https://api.github.com/users/henningandersen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henningandersen/subscriptions","organizations_url":"https://api.github.com/users/henningandersen/orgs","repos_url":"https://api.github.com/users/henningandersen/repos","events_url":"https://api.github.com/users/henningandersen/events{/privacy}","received_events_url":"https://api.github.com/users/henningandersen/received_events","type":"User","site_admin":false},"created_at":"2019-06-10T19:19:33Z","updated_at":"2019-06-10T19:19:33Z","author_association":"CONTRIBUTOR","body":"I think the heap dump and OOM is expected and not part of this issue. It is provoked by WhenThingsGoWrongTests.testOutOfMemoryError. I downloaded the heap dump and it contains only around 26MB live data. Also, the message\r\n\r\n```\r\njava.lang.OutOfMemoryError: Requested array size exceeds VM limit\r\n```\r\n\r\njust means that the max array size limit of the JVM is exceeded (typically max is Integer.MAX_VALUE minus a few).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/503073428","html_url":"https://github.com/elastic/elasticsearch/issues/43048#issuecomment-503073428","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43048","id":503073428,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMzA3MzQyOA==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2019-06-18T12:00:54Z","updated_at":"2019-06-18T12:00:54Z","author_association":"CONTRIBUTOR","body":"can we close this?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/503074799","html_url":"https://github.com/elastic/elasticsearch/issues/43048#issuecomment-503074799","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43048","id":503074799,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMzA3NDc5OQ==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2019-06-18T12:05:04Z","updated_at":"2019-06-18T12:05:04Z","author_association":"MEMBER","body":"@ywelsch no I don't think so. Even if #43057 made this much less likely we still had a node hanging on shutdown here and we made no changes to the shutdown logic itself. I'll look into this again shortly and see if this happened in any build that included my changes.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/505339469","html_url":"https://github.com/elastic/elasticsearch/issues/43048#issuecomment-505339469","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43048","id":505339469,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNTMzOTQ2OQ==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2019-06-25T08:18:12Z","updated_at":"2019-06-25T08:18:12Z","author_association":"MEMBER","body":"Haven't see this happen again after recent changes to the shutdown logic. Closing until it reappears.","performed_via_github_app":null}]