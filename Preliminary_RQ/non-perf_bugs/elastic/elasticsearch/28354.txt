{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/28354","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28354/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28354/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28354/events","html_url":"https://github.com/elastic/elasticsearch/issues/28354","id":291157437,"node_id":"MDU6SXNzdWUyOTExNTc0Mzc=","number":28354,"title":"Unable to access localhost:9200 after linux kernal upgrade","user":{"login":"reggieb","id":213040,"node_id":"MDQ6VXNlcjIxMzA0MA==","avatar_url":"https://avatars0.githubusercontent.com/u/213040?v=4","gravatar_id":"","url":"https://api.github.com/users/reggieb","html_url":"https://github.com/reggieb","followers_url":"https://api.github.com/users/reggieb/followers","following_url":"https://api.github.com/users/reggieb/following{/other_user}","gists_url":"https://api.github.com/users/reggieb/gists{/gist_id}","starred_url":"https://api.github.com/users/reggieb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reggieb/subscriptions","organizations_url":"https://api.github.com/users/reggieb/orgs","repos_url":"https://api.github.com/users/reggieb/repos","events_url":"https://api.github.com/users/reggieb/events{/privacy}","received_events_url":"https://api.github.com/users/reggieb/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-01-24T10:30:47Z","updated_at":"2018-01-24T23:26:00Z","closed_at":"2018-01-24T10:39:33Z","author_association":"NONE","active_lock_reason":null,"body":"Bug report\r\n=========\r\n\r\n**Elasticsearch version**: \r\n`Version: 2.4.1, Build: c67dc32/2016-09-27T18:57:55Z, JVM: 1.8.0_151`\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version** (`java -version`): \r\n```\r\nopenjdk version \"1.8.0_151\"\r\nOpenJDK Runtime Environment (build 1.8.0_151-8u151-b12-0ubuntu0.16.04.2-b12)\r\nOpenJDK 64-Bit Server VM (build 25.151-b12, mixed mode)\r\n```\r\n\r\n**OS version** (`uname -a` if on a Unix-like system):\r\nLinux Mint 18.3 Sylvia\r\nKernal 4.13.0-31-generic\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nI start elasticsearch with `sudo systemctl restart elasticsearch.service` and this seems to behave as normal. However, when I go to `http://localhost:9200` I get connection refused errors.\r\n\r\nI think the error has been triggered by an upgrade to kernal 4.13.0-31-generic. I also think it may relate to this issue: https://github.com/elastic/elasticsearch/issues/28349\r\n\r\nI cannot see any errors in the elasticsearch logs, but get the following in the system log\r\n\r\n**System logs**:\r\n```\r\nJan 24 09:54:49 Q957 systemd[1]: Starting Elasticsearch...\r\nJan 24 09:54:49 Q957 systemd[1]: Started Elasticsearch.\r\nJan 24 09:54:49 Q957 kernel: [  831.017466] kernel tried to execute NX-protected page - exploit attempt? (uid: 124)\r\nJan 24 09:54:49 Q957 kernel: [  831.018446] BUG: unable to handle kernel paging request at 00007f3a99f4f7a0\r\nJan 24 09:54:49 Q957 kernel: [  831.019422] IP: 0x7f3a99f4f7a0\r\nJan 24 09:54:49 Q957 kernel: [  831.020399] PGD 8000000172776067 \r\nJan 24 09:54:49 Q957 kernel: [  831.020399] P4D 8000000172776067 \r\nJan 24 09:54:49 Q957 kernel: [  831.021375] PUD 154036067 \r\nJan 24 09:54:49 Q957 kernel: [  831.022318] PMD 154037067 \r\nJan 24 09:54:49 Q957 kernel: [  831.023228] PTE 8000000155b48867\r\nJan 24 09:54:49 Q957 kernel: [  831.024102] \r\nJan 24 09:54:49 Q957 kernel: [  831.025764] Oops: 0011 [#5] SMP PTI\r\nJan 24 09:54:49 Q957 kernel: [  831.026546] Modules linked in: ccm rfcomm arc4 bnep binfmt_misc nls_iso8859_1 snd_hda_codec_hdmi snd_hda_codec_realtek snd_hda_codec_generic iwlmvm intel_rapl mac80211 snd_hda_intel snd_hda_codec snd_hda_core x86_pkg_temp_thermal snd_hwdep intel_powerclamp coretemp snd_pcm snd_seq_midi kvm_intel snd_seq_midi_event snd_rawmidi iwlwifi kvm snd_seq snd_seq_device irqbypass snd_timer input_leds intel_cstate cfg80211 intel_rapl_perf snd btusb hci_uart btrtl serdev ucsi_acpi btbcm mei_me typec_ucsi btqca soundcore shpchp mei typec btintel bluetooth fujitsu_laptop ecdh_generic sparse_keymap intel_lpss_acpi intel_lpss mac_hid acpi_als tpm_crb kfifo_buf industrialio acpi_pad parport_pc ppdev lp parport autofs4 btrfs xor raid6_pq algif_skcipher af_alg dm_crypt dm_mirror dm_region_hash dm_log i915 crct10dif_pclmul\r\nJan 24 09:54:49 Q957 kernel: [  831.030005]  crc32_pclmul ghash_clmulni_intel pcbc i2c_algo_bit hid_generic drm_kms_helper aesni_intel syscopyarea aes_x86_64 e1000e crypto_simd sysfillrect glue_helper sysimgblt cryptd fb_sys_fops ptp nvme drm ahci pps_core nvme_core usbhid libahci wmi i2c_hid hid video\r\nJan 24 09:54:49 Q957 kernel: [  831.031867] CPU: 0 PID: 5399 Comm: java Tainted: G      D         4.13.0-31-generic #34~16.04.1-Ubuntu\r\nJan 24 09:54:49 Q957 kernel: [  831.032813] Hardware name: FUJITSU ESPRIMO Q957/D3513-A1, BIOS V5.0.0.12 R1.9.0 for D3513-A1x                     06/12/2017\r\nJan 24 09:54:49 Q957 kernel: [  831.033761] task: ffff9185924f2f80 task.stack: ffffa78383758000\r\nJan 24 09:54:49 Q957 kernel: [  831.034716] RIP: 0010:0x7f3a99f4f7a0\r\nJan 24 09:54:49 Q957 kernel: [  831.035642] RSP: 0018:ffffa7838375bf50 EFLAGS: 00010202\r\nJan 24 09:54:49 Q957 kernel: [  831.036566] RAX: 00000000000003e7 RBX: 0000000000000000 RCX: 00007f3a9987c4d9\r\nJan 24 09:54:49 Q957 kernel: [  831.037494] RDX: 00007f3a99f4ff50 RSI: 00007f3a99f50030 RDI: 0000000000000000\r\nJan 24 09:54:49 Q957 kernel: [  831.038445] RBP: 0000000000000000 R08: 0000000000000000 R09: 000000000000000c\r\nJan 24 09:54:49 Q957 kernel: [  831.039368] R10: 00007f3a99f4f7a0 R11: ffff9185924f2f80 R12: 0000000000000000\r\nJan 24 09:54:49 Q957 kernel: [  831.040293] R13: 0000000000000000 R14: 0000000000000000 R15: 0000000000000000\r\nJan 24 09:54:49 Q957 kernel: [  831.041224] FS:  00007f3a99f51700(0000) GS:ffff91866e400000(0000) knlGS:0000000000000000\r\nJan 24 09:54:49 Q957 kernel: [  831.042207] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033\r\nJan 24 09:54:49 Q957 kernel: [  831.043135] CR2: 00007f3a99f4f7a0 CR3: 0000000136b7c002 CR4: 00000000003606f0\r\nJan 24 09:54:49 Q957 kernel: [  831.044068] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000\r\nJan 24 09:54:49 Q957 kernel: [  831.045001] DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400\r\nJan 24 09:54:49 Q957 kernel: [  831.045924] Call Trace:\r\nJan 24 09:54:49 Q957 kernel: [  831.046888]  ? entry_SYSCALL_64_fastpath+0x33/0xa3\r\nJan 24 09:54:49 Q957 kernel: [  831.047806] Code:  Bad RIP value.\r\nJan 24 09:54:49 Q957 kernel: [  831.048723] RIP: 0x7f3a99f4f7a0 RSP: ffffa7838375bf50\r\nJan 24 09:54:49 Q957 kernel: [  831.049647] CR2: 00007f3a99f4f7a0\r\nJan 24 09:54:49 Q957 kernel: [  831.050619] ---[ end trace f522e6a598391b45 ]---\r\n```\r\n\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}