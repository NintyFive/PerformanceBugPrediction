{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/22477","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22477/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22477/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22477/events","html_url":"https://github.com/elastic/elasticsearch/issues/22477","id":199274858,"node_id":"MDU6SXNzdWUxOTkyNzQ4NTg=","number":22477,"title":"ClassNotFoundException: org.elasticsearch.plugins.ActionPlugin","user":{"login":"sudhakarancse","id":24965269,"node_id":"MDQ6VXNlcjI0OTY1MjY5","avatar_url":"https://avatars0.githubusercontent.com/u/24965269?v=4","gravatar_id":"","url":"https://api.github.com/users/sudhakarancse","html_url":"https://github.com/sudhakarancse","followers_url":"https://api.github.com/users/sudhakarancse/followers","following_url":"https://api.github.com/users/sudhakarancse/following{/other_user}","gists_url":"https://api.github.com/users/sudhakarancse/gists{/gist_id}","starred_url":"https://api.github.com/users/sudhakarancse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sudhakarancse/subscriptions","organizations_url":"https://api.github.com/users/sudhakarancse/orgs","repos_url":"https://api.github.com/users/sudhakarancse/repos","events_url":"https://api.github.com/users/sudhakarancse/events{/privacy}","received_events_url":"https://api.github.com/users/sudhakarancse/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-01-06T19:57:37Z","updated_at":"2017-01-06T20:52:09Z","closed_at":"2017-01-06T20:12:57Z","author_association":"NONE","active_lock_reason":null,"body":"I'm trying to create spring boot application with elasticsearch (without spring data).\r\nI've added following Maven dependency:\r\n\r\n```xml\r\n<dependency>\r\n            <groupId>org.elasticsearch.client</groupId>\r\n            <artifactId>transport</artifactId>\r\n            <version>5.0.0</version>\r\n\r\n        </dependency>\r\n```\r\n\r\nTrying to execute the following code:\r\n\r\nTransportClient client = new PreBuiltTransportClient(Settings.EMPTY)\r\n                .addTransportAddress(new InetSocketTransportAddress(InetAddress.getByName(\"http://localhost\"), 9300));\r\n\r\nand getting an exception:\r\n\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'client' defined in class path resource [com/receipts/parser/config/ElasticClientConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.elasticsearch.client.transport.TransportClient]: Factory method 'client' threw exception; nested exception is java.lang.NoClassDefFoundError: org/elasticsearch/plugins/ActionPlugin\r\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:599)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1128)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1023)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:510)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482)\r\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)\r\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\r\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\r\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\r\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:207)\r\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1128)\r\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1056)\r\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:566)\r\n    ... 25 more\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.elasticsearch.client.transport.TransportClient]: Factory method 'client' threw exception; nested exception is java.lang.NoClassDefFoundError: org/elasticsearch/plugins/ActionPlugin\r\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:189)\r\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588)\r\n    ... 37 more\r\nCaused by: java.lang.NoClassDefFoundError: org/elasticsearch/plugins/ActionPlugin\r\n    at java.lang.ClassLoader.defineClass1(Native Method)\r\n    at java.lang.ClassLoader.defineClass(ClassLoader.java:760)\r\n    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\r\n    at java.net.URLClassLoader.defineClass(URLClassLoader.java:467)\r\n    at java.net.URLClassLoader.access$100(URLClassLoader.java:73)\r\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:368)\r\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:362)\r\n    at java.security.AccessController.doPrivileged(Native Method)\r\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:361)\r\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n    at org.elasticsearch.transport.client.PreBuiltTransportClient.<clinit>(PreBuiltTransportClient.java:54)\r\n    at com.receipts.parser.config.ElasticClientConfiguration.client(ElasticClientConfiguration.java:28)\r\n    at com.receipts.parser.config.ElasticClientConfiguration$$EnhancerBySpringCGLIB$$b941ed2c.CGLIB$client$1(<generated>)\r\n    at com.receipts.parser.config.ElasticClientConfiguration$$EnhancerBySpringCGLIB$$b941ed2c$$FastClassBySpringCGLIB$$ac18eb44.invoke(<generated>)\r\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228)\r\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:356)\r\n    at com.receipts.parser.config.ElasticClientConfiguration$$EnhancerBySpringCGLIB$$b941ed2c.client(<generated>)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke(Method.java:497)\r\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:162)\r\n    ... 38 more\r\nCaused by: java.lang.ClassNotFoundException: org.elasticsearch.plugins.ActionPlugin\r\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\r\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n    ... 61 more\r\n\r\nSolution which given is not working for me","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}