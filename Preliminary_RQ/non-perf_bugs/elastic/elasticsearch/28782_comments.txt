[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/367675543","html_url":"https://github.com/elastic/elasticsearch/issues/28782#issuecomment-367675543","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28782","id":367675543,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NzY3NTU0Mw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-02-22T13:09:24Z","updated_at":"2018-02-22T13:09:24Z","author_association":"MEMBER","body":"FYI @elastic/es-core-infra.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/367677679","html_url":"https://github.com/elastic/elasticsearch/issues/28782#issuecomment-367677679","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28782","id":367677679,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NzY3NzY3OQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2018-02-22T13:17:40Z","updated_at":"2018-02-22T13:17:40Z","author_association":"MEMBER","body":"@danielmitterdorfer Thank you for this analysis. I'm in favor of loading the geoip database as uncompressed files, so that we need less heap memory when the geoip plugin gets used. \r\n\r\n> Loading the files is not free: The data are memory-mapped instead and take up native memory.\r\n\r\nEven if we change how the database files are loaded the increase of native memory only occurs if geoip gets used and this memory is managed by the OS instead of the jvm. \r\n\r\n> The size of the config directory on disk increases from 34.5 MB to 72.6 MB. \r\n\r\nTo me this is a minor downside, as diskspace is the resources we should worry least about and it just increases the diskspace used by Elasticsearch if the geoip plugin is installed with 38.1 MB.\r\n\r\n> The size of the plugin artefact increases from 34.7 MB to 37.6 MB (tested with ingest-geoip-6.2.2.zip).\r\n\r\nThis is just a small increase and doesn't outweigh the benefits of not changing how the data files get loaded.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/367760174","html_url":"https://github.com/elastic/elasticsearch/issues/28782#issuecomment-367760174","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28782","id":367760174,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Nzc2MDE3NA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2018-02-22T17:38:30Z","updated_at":"2018-02-22T17:38:30Z","author_association":"MEMBER","body":"An alternative, or possibly in conjunction with this idea, would be to further investigate what we have discussed casually for some time now: re-encoding the data we actually use from the database in our own optimized format. From what I remember, we use a small portion of the database fields. The work for this is doable; the question really is just whether this is allowed via the maxmind db license (assuming we keep adequate notice about the source of the data).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/367926981","html_url":"https://github.com/elastic/elasticsearch/issues/28782#issuecomment-367926981","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28782","id":367926981,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NzkyNjk4MQ==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2018-02-23T06:59:12Z","updated_at":"2018-02-23T06:59:12Z","author_association":"MEMBER","body":">  the question really is just whether this is allowed via the maxmind db license \r\n\r\nAccording to [the site for the Geolite2 database](https://dev.maxmind.com/geoip/geoip2/geolite2/) the license is [CC BY-SA 4.0](https://creativecommons.org/licenses/by-sa/4.0/). I also think that it would be wise to double-check but on the Creative Commons site it says:\r\n\r\n> You are free to:\r\n> Share — copy and redistribute the material in any medium or format\r\n> Adapt — remix, transform, and build upon the material for any purpose, even commercially.\r\n\r\nWe must give appropriate credit (which is IMHO nice behaviour anyway) and must redistribute under the same license.\r\n\r\nAll this sounds to me (IANAL) as if it would be feasible to re-encode the data.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/367928472","html_url":"https://github.com/elastic/elasticsearch/issues/28782#issuecomment-367928472","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28782","id":367928472,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NzkyODQ3Mg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2018-02-23T07:09:12Z","updated_at":"2018-02-23T07:09:12Z","author_association":"CONTRIBUTOR","body":"> An alternative, or possibly in conjunction with this idea,\r\n\r\nI think we should pursue both, but let's not make the immediate gains depend on the longer term goal of improving encoding.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/368020027","html_url":"https://github.com/elastic/elasticsearch/issues/28782#issuecomment-368020027","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28782","id":368020027,"node_id":"MDEyOklzc3VlQ29tbWVudDM2ODAyMDAyNw==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2018-02-23T14:15:16Z","updated_at":"2018-02-23T14:15:16Z","author_association":"MEMBER","body":"We discussed in Fix-it Friday and want to pursue this. By default, we will load the files using the mmap approach and will add a system property in case some users explicitly want to load data still on-heap.","performed_via_github_app":null}]