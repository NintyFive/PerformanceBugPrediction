[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/456083660","html_url":"https://github.com/elastic/elasticsearch/issues/37643#issuecomment-456083660","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37643","id":456083660,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjA4MzY2MA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-01-21T14:00:45Z","updated_at":"2019-01-21T14:00:45Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/456088050","html_url":"https://github.com/elastic/elasticsearch/issues/37643#issuecomment-456088050","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37643","id":456088050,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjA4ODA1MA==","user":{"login":"dliappis","id":1754575,"node_id":"MDQ6VXNlcjE3NTQ1NzU=","avatar_url":"https://avatars0.githubusercontent.com/u/1754575?v=4","gravatar_id":"","url":"https://api.github.com/users/dliappis","html_url":"https://github.com/dliappis","followers_url":"https://api.github.com/users/dliappis/followers","following_url":"https://api.github.com/users/dliappis/following{/other_user}","gists_url":"https://api.github.com/users/dliappis/gists{/gist_id}","starred_url":"https://api.github.com/users/dliappis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dliappis/subscriptions","organizations_url":"https://api.github.com/users/dliappis/orgs","repos_url":"https://api.github.com/users/dliappis/repos","events_url":"https://api.github.com/users/dliappis/events{/privacy}","received_events_url":"https://api.github.com/users/dliappis/received_events","type":"User","site_admin":false},"created_at":"2019-01-21T14:15:15Z","updated_at":"2019-01-21T14:15:15Z","author_association":"CONTRIBUTOR","body":"Thanks very much for your interest in Elasticsearch.\r\n\r\nIn your reproduction step 2 you mention:\r\n\r\n> Open a shell in the elasticsearch container and run `elasticsearch-plugin install --batch repository-gcs`\r\n\r\nOpening a shell with something like `docker exec --user 1000:1000 -ti <es_container_name> /bin/bash` implies that Elasticsearch is running.\r\n\r\nHowever, as per [ES plugins docs](https://www.elastic.co/guide/en/elasticsearch/plugins/current/intro.html):\r\n\r\n  > Plugins contain JAR files, but may also contain scripts and config files, and must be installed on every node in the cluster. After installation, each node must be restarted before the plugin becomes visible.\r\n\r\nSo you'll still need to restart your container after that, but, unless you have bind mounted `/usr/share/elasticsearch/plugins/repository-gcs`, after restart the new plugin won't be present.\r\n\r\nThe right approach to install the needed plugin is to create a customized image as described [here](https://www.elastic.co/guide/en/elasticsearch/reference/6.5/docker.html#_c_customized_image). A simple `Dockerfile` like:\r\n\r\n```\r\nFROM docker.elastic.co/elasticsearch/elasticsearch:6.5.4\r\nRUN elasticsearch-plugin install --batch repository-gcs\r\n```\r\n\r\nwill suffice. You can then build your custom image with something like:\r\n\r\n```\r\ndocker build --tag=elasticsearch-custom .\r\n```\r\n\r\nand then starting the new image will confirm the needed plugin is present:\r\n\r\n```\r\n$ docker run --rm elasticsearch-custom\r\n...\r\n[2019-01-21T14:11:09,866][INFO ][o.e.p.PluginsService     ] [6xQb-Zz] loaded plugin [ingest-geoip]\r\n[2019-01-21T14:11:09,866][INFO ][o.e.p.PluginsService     ] [6xQb-Zz] loaded plugin [ingest-user-agent]\r\n[2019-01-21T14:11:09,867][INFO ][o.e.p.PluginsService     ] [6xQb-Zz] loaded plugin [repository-gcs]\r\n```\r\n\r\nFor your benefit I'd like to add we reserve GitHub for verified bug reports, features and pull requests, so in the future if you are uncertain whether the issue is a real bug, we'd like to direct these kinds \r\nof things to the [forums](https://discuss.elastic.co/). If you can stop \r\nby there, we'd appreciate it.\r\n\r\nThere's an active community in the [forums](https://discuss.elastic.co/) that should be able to help get an answer to your questions. As such, I hope you don't mind that I close this.","performed_via_github_app":null}]