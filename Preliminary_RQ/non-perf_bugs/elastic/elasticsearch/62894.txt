{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/62894","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62894/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62894/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62894/events","html_url":"https://github.com/elastic/elasticsearch/issues/62894","id":708323733,"node_id":"MDU6SXNzdWU3MDgzMjM3MzM=","number":62894,"title":"DeleteByQueryConcurrentTests.testConcurrentDeleteByQueriesOnDifferentDocs fails reproducibly ","user":{"login":"pgomulka","id":11137008,"node_id":"MDQ6VXNlcjExMTM3MDA4","avatar_url":"https://avatars0.githubusercontent.com/u/11137008?v=4","gravatar_id":"","url":"https://api.github.com/users/pgomulka","html_url":"https://github.com/pgomulka","followers_url":"https://api.github.com/users/pgomulka/followers","following_url":"https://api.github.com/users/pgomulka/following{/other_user}","gists_url":"https://api.github.com/users/pgomulka/gists{/gist_id}","starred_url":"https://api.github.com/users/pgomulka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgomulka/subscriptions","organizations_url":"https://api.github.com/users/pgomulka/orgs","repos_url":"https://api.github.com/users/pgomulka/repos","events_url":"https://api.github.com/users/pgomulka/events{/privacy}","received_events_url":"https://api.github.com/users/pgomulka/received_events","type":"User","site_admin":false},"labels":[{"id":1142254209,"node_id":"MDU6TGFiZWwxMTQyMjU0MjA5","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Features","name":":Core/Features/Features","color":"0e8a16","default":false,"description":"A catch-all label for :Core/Features that don't fit in any other bucket."},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"},{"id":1967496097,"node_id":"MDU6TGFiZWwxOTY3NDk2MDk3","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Core/Features","name":"Team:Core/Features","color":"fef2c0","default":false,"description":"Meta label for core/features team"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-09-24T16:47:06Z","updated_at":"2020-09-24T19:27:20Z","closed_at":"2020-09-24T19:27:19Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"<!--\r\nPlease fill out the following information, and ensure you have attempted\r\nto reproduce locally\r\n-->\r\n\r\n**Build scan**:\r\nhttps://gradle-enterprise.elastic.co/s/p5tyls66tnmwk\r\n\r\n**Repro line**:\r\n./gradlew ':modules:reindex:test' --tests \"org.elasticsearch.index.reindex.DeleteByQueryConcurrentTests.testConcurrentDeleteByQueriesOnDifferentDocs\" -Dtests.seed=9E9F2FA9C4BE676F -Dtests.security.manager=true -Dtests.locale=bg-BG -Dtests.timezone=Pacific/Guam -Druntime.java=11\r\n\r\n**Reproduces locally?**:\r\nyes\r\n**Applicable branches**:\r\nmaster (did not check other)\r\n**Failure history**:\r\n<!--\r\nLink to build stats and possible indication of when this started failing and how often it fails\r\n<https://build-stats.elastic.co/app/kibana>\r\n-->\r\n**Failure excerpt**:\r\n```\r\n   Expected: updated matches <0L> and created matches <0L> and deleted matches <30L> and versionConflicts matches <0L> and failures size matches <0> and reason cancelled matches null and slices matches an empty collection\r\n             but: was <BulkByScrollResponse[took=344ms,timed_out=false,sliceId=null,updated=0,created=0,deleted=30,batches=1,versionConflicts=2,noops=0,retries=0,throttledUntil=0s,bulk_failures=[{\"index\":\"test\",\"id\":\"Z8z-wHQB_tzBedAeplcO\",\"cause\":{\"type\":\"version_conflict_engine_exception\",\"reason\":\"[Z8z-wHQB_tzBedAeplcO]: version conflict, required seqNo [4], primary term [1]. but no document was found\",\"index_uuid\":\"ABeYZSUDS5C5R7GnY53S1A\",\"shard\":\"1\",\"index\":\"test\"},\"status\":409}, {\"index\":\"test\",\"id\":\"dMz-wHQB_tzBedAeplcY\",\"cause\":{\"type\":\"version_conflict_engine_exception\",\"reason\":\"[dMz-wHQB_tzBedAeplcY]: version conflict, required seqNo [13], primary term [1]. but no document was found\",\"index_uuid\":\"ABeYZSUDS5C5R7GnY53S1A\",\"shard\":\"3\",\"index\":\"test\"},\"status\":409}],search_failures=[]]>\r\n            at __randomizedtesting.SeedInfo.seed([9E9F2FA9C4BE676F]:0)\r\n            at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)\r\n            at org.junit.Assert.assertThat(Assert.java:956)\r\n            at org.junit.Assert.assertThat(Assert.java:923)\r\n            at org.elasticsearch.index.reindex.DeleteByQueryConcurrentTests.lambda$testConcurrentDeleteByQueriesOnDifferentDocs$0(DeleteByQueryConcurrentTests.java:59)\r\n\r\n```\r\n\r\n","closed_by":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"performed_via_github_app":null}