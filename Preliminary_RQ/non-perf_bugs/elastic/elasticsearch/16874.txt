{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/16874","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16874/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16874/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16874/events","html_url":"https://github.com/elastic/elasticsearch/issues/16874","id":137491973,"node_id":"MDU6SXNzdWUxMzc0OTE5NzM=","number":16874,"title":"Aggregation's Result should have writeToJson method","user":{"login":"MadeInChina","id":1201118,"node_id":"MDQ6VXNlcjEyMDExMTg=","avatar_url":"https://avatars0.githubusercontent.com/u/1201118?v=4","gravatar_id":"","url":"https://api.github.com/users/MadeInChina","html_url":"https://github.com/MadeInChina","followers_url":"https://api.github.com/users/MadeInChina/followers","following_url":"https://api.github.com/users/MadeInChina/following{/other_user}","gists_url":"https://api.github.com/users/MadeInChina/gists{/gist_id}","starred_url":"https://api.github.com/users/MadeInChina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MadeInChina/subscriptions","organizations_url":"https://api.github.com/users/MadeInChina/orgs","repos_url":"https://api.github.com/users/MadeInChina/repos","events_url":"https://api.github.com/users/MadeInChina/events{/privacy}","received_events_url":"https://api.github.com/users/MadeInChina/received_events","type":"User","site_admin":false},"labels":[{"id":146829143,"node_id":"MDU6TGFiZWwxNDY4MjkxNDM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Transport%20API","name":":Core/Infra/Transport API","color":"0e8a16","default":false,"description":"Transport client API"},{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2016-03-01T07:05:09Z","updated_at":"2016-03-03T09:17:44Z","closed_at":"2016-03-02T10:52:59Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the feature**:\nI'm just using aggregation for geo clustering,and when i run the es script on sense,the results like below\n\n```\n{\n  \"took\": 297,\n  \"timed_out\": false,\n  \"_shards\": {\n    \"total\": 944,\n    \"successful\": 944,\n    \"failed\": 0\n  },\n  \"hits\": {\n    \"total\": 149468,\n    \"max_score\": 0,\n    \"hits\": []\n  },\n  \"aggregations\": {\n    \"grid\": {\n      \"buckets\": [\n        {\n          \"key\": \"dr5ru\",\n          \"doc_count\": 65549,\n          \"cell\": {\n            \"bounds\": {\n              \"top_left\": {\n                \"lat\": 40.78121,\n                \"lon\": -74\n              },\n              \"bottom_right\": {\n                \"lat\": 40.737305,\n                \"lon\": -73.959984\n              }\n            }\n          }\n        },\n        {\n          \"key\": \"dr5rs\",\n          \"doc_count\": 28544,\n          \"cell\": {\n            \"bounds\": {\n              \"top_left\": {\n                \"lat\": 40.7373,\n                \"lon\": -74\n              },\n              \"bottom_right\": {\n                \"lat\": 40.693375,\n                \"lon\": -73.96\n              }\n            }\n          }\n        },\n        {\n          \"key\": \"dr5rt\",\n          \"doc_count\": 11505,\n          \"cell\": {\n            \"bounds\": {\n              \"top_left\": {\n                \"lat\": 40.737232,\n                \"lon\": -73.95995\n              },\n              \"bottom_right\": {\n                \"lat\": 40.693367,\n                \"lon\": -73.916046\n              }\n            }\n          }\n        }\n      ]\n    }\n  }\n}\n```\n\nBUT when i using api it's only support to using \nresp.getAggregations().get(\"grid\").getBuckets() method. it's not flexible kibana sense\nso i suggest to add method writeToJson to as same as output with\nresp.getAggregations().get(\"grid\").writeToJson()\n\nThanks.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}