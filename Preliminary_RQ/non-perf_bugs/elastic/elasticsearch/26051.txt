{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/26051","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26051/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26051/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26051/events","html_url":"https://github.com/elastic/elasticsearch/issues/26051","id":247917990,"node_id":"MDU6SXNzdWUyNDc5MTc5OTA=","number":26051,"title":"TooManyClauses[maxClauseCount is set to 1024]","user":{"login":"felayman","id":7543851,"node_id":"MDQ6VXNlcjc1NDM4NTE=","avatar_url":"https://avatars3.githubusercontent.com/u/7543851?v=4","gravatar_id":"","url":"https://api.github.com/users/felayman","html_url":"https://github.com/felayman","followers_url":"https://api.github.com/users/felayman/followers","following_url":"https://api.github.com/users/felayman/following{/other_user}","gists_url":"https://api.github.com/users/felayman/gists{/gist_id}","starred_url":"https://api.github.com/users/felayman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/felayman/subscriptions","organizations_url":"https://api.github.com/users/felayman/orgs","repos_url":"https://api.github.com/users/felayman/repos","events_url":"https://api.github.com/users/felayman/events{/privacy}","received_events_url":"https://api.github.com/users/felayman/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-08-04T06:50:34Z","updated_at":"2017-08-04T07:28:16Z","closed_at":"2017-08-04T07:28:16Z","author_association":"NONE","active_lock_reason":null,"body":"when i use \"match_phrase_prefix\" query in my project.\r\n\r\nthe query is :\r\n~~~\r\n{\r\n  \"query\": {\r\n    \"match_phrase_prefix\": {\r\n      \"nickName\": \"a\"\r\n    }\r\n  }\r\n}\r\n~~~\r\n\r\nbut it throws the exception as follow:\r\n \r\n~~~\r\norg.elasticsearch.action.search.SearchPhaseExecutionException: Failed to execute phase [dfs], all shards failed; shardFailures {[J4HFhidITlKtvOlSf2B36A][user][0]: DfsPhaseExecutionException[[user][0]: query[filtered(nickName:\"a*\"~1)->cache(_type:user)],from[0],size[10]: Dfs Failed [Exception during dfs phase]]; nested: TooManyClauses[maxClauseCount is set to 1024]; }{[J4HFhidITlKtvOlSf2B36A][user][1]: DfsPhaseExecutionException[[user][1]: query[filtered(nickName:\"a*\"~1)->cache(_type:user)],from[0],size[10]: Dfs Failed [Exception during dfs phase]]; nested: TooManyClauses[maxClauseCount is set to 1024]; }{[porfJBUXRWeSygtrF_rjRg][user][2]: RemoteTransportException[[mq-03][inet[/10.163.6.246:9300]][indices:data/read/search[phase/dfs]]]; nested: DfsPhaseExecutionException[[user][2]: query[filtered(nickName:\"a*\"~1)->cache(_type:user)],from[0],size[10]: Dfs Failed [Exception during dfs phase]]; nested: TooManyClauses[maxClauseCount is set to 1024]; }{[-kFmY4FhSDe0s1g-j0cn4w][user][3]: RemoteTransportException[[mq-01][inet[/10.162.207.86:9300]][indices:data/read/search[phase/dfs]]]; nested: DfsPhaseExecutionException[[user][3]: query[filtered(nickName:\"a*\"~1)->cache(_type:user)],from[0],size[10]: Dfs Failed [Exception during dfs phase]]; nested: TooManyClauses[maxClauseCount is set to 1024]; }{[J4HFhidITlKtvOlSf2B36A][user][4]: DfsPhaseExecutionException[[user][4]: query[filtered(nickName:\"a*\"~1)->cache(_type:user)],from[0],size[10]: Dfs Failed [Exception during dfs phase]]; nested: TooManyClauses[maxClauseCount is set to 1024]; }{[klXNljLDRMKty9yIdOZp6A][user][5]: RemoteTransportException[[design-mq-04][inet[/10.173.34.187:9300]][indices:data/read/search[phase/dfs]]]; nested: DfsPhaseExecutionException[[user][5]: query[filtered(nickName:\"a*\"~1)->cache(_type:user)],from[0],size[10]: Dfs Failed [Exception during dfs phase]]; nested: TooManyClauses[maxClauseCount is set to 1024]; }{[fu_kgQlKQq2iemZ3v-TKkg][user][6]: RemoteTransportException[[design-mq-03][inet[/10.172.135.214:9300]][indices:data/read/search[phase/dfs]]]; nested: DfsPhaseExecutionException[[user][6]: query[filtered(nickName:\"a*\"~1)->cache(_type:user)],from[0],size[10]: Dfs Failed [Exception during dfs phase]]; nested: TooManyClauses[maxClauseCount is set to 1024]; }{[T3C8QuLGSZushd71dOHGeg][user][7]: RemoteTransportException[[mq-04][inet[/10.172.187.174:9300]][indices:data/read/search[phase/dfs]]]; nested: DfsPhaseExecutionException[[user][7]: query[filtered(nickName:\"a*\"~1)->cache(_type:user)],from[0],size[10]: Dfs Failed [Exception during dfs phase]]; nested: TooManyClauses[maxClauseCount is set to 1024]; }{[T3C8QuLGSZushd71dOHGeg][user][8]: RemoteTransportException[[mq-04][inet[/10.172.187.174:9300]][indices:data/read/search[phase/dfs]]]; nested: DfsPhaseExecutionException[[user][8]: query[filtered(nickName:\"a*\"~1)->cache(_type:user)],from[0],size[10]: Dfs Failed [Exception during dfs phase]]; nested: TooManyClauses[maxClauseCount is set to 1024]; }{[klXNljLDRMKty9yIdOZp6A][user][9]: RemoteTransportException[[design-mq-04][inet[/10.173.34.187:9300]][indices:data/read/search[phase/dfs]]]; nested: DfsPhaseExecutionException[[user][9]: query[filtered(nickName:\"a*\"~1)->cache(_type:user)],from[0],size[10]: Dfs Failed [Exception during dfs phase]]; nested: TooManyClauses[maxClauseCount is set to 1024]; }{[porfJBUXRWeSygtrF_rjRg][user][10]: RemoteTransportException[[mq-03][inet[/10.163.6.246:9300]][indices:data/read/search[phase/dfs]]]; nested: DfsPhaseExecutionException[[user][10]: query[filtered(nickName:\"a*\"~1)->cache(_type:user)],from[0],size[10]: Dfs Failed [Exception during dfs phase]]; nested: TooManyClauses[maxClauseCount is set to 1024]; }{[klXNljLDRMKty9yIdOZp6A][user][11]: RemoteTransportException[[design-mq-04][inet[/10.173.34.187:9300]][indices:data/read/search[phase/dfs]]]; nested: DfsPhaseExecutionException[[user][11]: query[filtered(nickName:\"a*\"~1)->cache(_type:user)],from[0],size[10]: Dfs Failed [Exception during dfs phase]]; nested: TooManyClauses[maxClauseCount is set to 1024]; }\r\n~~~ \r\n\r\nhow can i solve it ?","closed_by":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"performed_via_github_app":null}