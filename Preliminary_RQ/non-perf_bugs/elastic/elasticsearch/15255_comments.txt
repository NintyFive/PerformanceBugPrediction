[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162107738","html_url":"https://github.com/elastic/elasticsearch/issues/15255#issuecomment-162107738","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15255","id":162107738,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MjEwNzczOA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-12-04T23:16:56Z","updated_at":"2015-12-04T23:16:56Z","author_association":"MEMBER","body":"@martiansnoop Did you import into intellij as a gradle project, or simply open the generated file based project `gradle idea` produces?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162109607","html_url":"https://github.com/elastic/elasticsearch/issues/15255#issuecomment-162109607","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15255","id":162109607,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MjEwOTYwNw==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-12-04T23:29:13Z","updated_at":"2015-12-04T23:29:13Z","author_association":"MEMBER","body":"> Can anyone explain further why the findJavaHome method is structured the way it is?\n\nThis is due to gradle being broken with java 9. In order to allow running tests with jdk9 / jigsaw we use JAVA_HOME to indicate which java to use for compiling/testing. This means we can set org.gradle.java.home to tell gradle which jvm to use, and separately set JAVA_HOME. \n\nIn intellij,they don't set JAVA_HOME when they spin up jvms for tests or gradle tasks. Unfortunately they don't see this as a problem...\nhttps://youtrack.jetbrains.com/issue/IDEA-147331\n\nAlso, the fact your hitting this suggest to me you tried running the test from intellij through \"gradle\" instead of JUnit? This is something I hope we can support, but at least right now I do not believe it works (I think it tries running all unit tests when you try running a single one).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162257785","html_url":"https://github.com/elastic/elasticsearch/issues/15255#issuecomment-162257785","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15255","id":162257785,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MjI1Nzc4NQ==","user":{"login":"martiansnoop","id":1945420,"node_id":"MDQ6VXNlcjE5NDU0MjA=","avatar_url":"https://avatars1.githubusercontent.com/u/1945420?v=4","gravatar_id":"","url":"https://api.github.com/users/martiansnoop","html_url":"https://github.com/martiansnoop","followers_url":"https://api.github.com/users/martiansnoop/followers","following_url":"https://api.github.com/users/martiansnoop/following{/other_user}","gists_url":"https://api.github.com/users/martiansnoop/gists{/gist_id}","starred_url":"https://api.github.com/users/martiansnoop/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martiansnoop/subscriptions","organizations_url":"https://api.github.com/users/martiansnoop/orgs","repos_url":"https://api.github.com/users/martiansnoop/repos","events_url":"https://api.github.com/users/martiansnoop/events{/privacy}","received_events_url":"https://api.github.com/users/martiansnoop/received_events","type":"User","site_admin":false},"created_at":"2015-12-05T23:51:04Z","updated_at":"2015-12-05T23:51:04Z","author_association":"NONE","body":"> Also, the fact your hitting this suggest to me you tried running the test from intellij through \"gradle\" instead of JUnit?\n\nYes, this is correct, I was trying to run tests through gradle (IntelliJ 15 defaulted to it). I set up a JUnit configuration instead and tests run for me in intellij now without modifying the line in `BuildPlugin.groovy`. Thanks for the suggestion!\n\n> Did you import into intellij as a gradle project, or simply open the generated file based project gradle idea produces?\n\nI ran `gradle idea`, then went to `File > New > Project from existing sources...`, selected the directory where I cloned the repo, and followed the menus after that. (I am unfamiliar with the workings of gradle, so this may have been a suboptimal sequence.)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162806979","html_url":"https://github.com/elastic/elasticsearch/issues/15255#issuecomment-162806979","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15255","id":162806979,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MjgwNjk3OQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-12-08T07:59:53Z","updated_at":"2015-12-08T07:59:53Z","author_association":"MEMBER","body":"@martiansnoop Thanks for the info. Since you confirmed running junit tests do work, I'm closing this. Hopefully sometime in the future we can make running tests through gradle from the IntelliJ work.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/392760779","html_url":"https://github.com/elastic/elasticsearch/issues/15255#issuecomment-392760779","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15255","id":392760779,"node_id":"MDEyOklzc3VlQ29tbWVudDM5Mjc2MDc3OQ==","user":{"login":"poson","id":3489754,"node_id":"MDQ6VXNlcjM0ODk3NTQ=","avatar_url":"https://avatars2.githubusercontent.com/u/3489754?v=4","gravatar_id":"","url":"https://api.github.com/users/poson","html_url":"https://github.com/poson","followers_url":"https://api.github.com/users/poson/followers","following_url":"https://api.github.com/users/poson/following{/other_user}","gists_url":"https://api.github.com/users/poson/gists{/gist_id}","starred_url":"https://api.github.com/users/poson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/poson/subscriptions","organizations_url":"https://api.github.com/users/poson/orgs","repos_url":"https://api.github.com/users/poson/repos","events_url":"https://api.github.com/users/poson/events{/privacy}","received_events_url":"https://api.github.com/users/poson/received_events","type":"User","site_admin":false},"created_at":"2018-05-29T12:38:22Z","updated_at":"2018-05-29T12:38:39Z","author_association":"NONE","body":"In my case , i had installed gradle 2.10             3.5-rc-2         4.4              4.6              jars-1           jars-3           \r\n3.4.1            4.0              4.4.1            4.7。\r\nI always found error like “> Failed to apply plugin [id 'elasticsearch.build']\r\n “ > JAVA_HOME must be set to build Elasticsearch”，\r\nafter a lot of try， I delete /Users/xxx/.gradle/caches/2.10 , /Users/xxx/.gradle/caches/3.4.1 ,.....,just leave 4.7 ，then gradle build is successful！\r\n","performed_via_github_app":null}]