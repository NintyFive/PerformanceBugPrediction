{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/7471","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7471/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7471/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7471/events","html_url":"https://github.com/elastic/elasticsearch/issues/7471","id":41233490,"node_id":"MDU6SXNzdWU0MTIzMzQ5MA==","number":7471,"title":"Snapshot create returns \"state\":\"SUCCESS\" when there are failed shards","user":{"login":"bobpoekert","id":45596,"node_id":"MDQ6VXNlcjQ1NTk2","avatar_url":"https://avatars1.githubusercontent.com/u/45596?v=4","gravatar_id":"","url":"https://api.github.com/users/bobpoekert","html_url":"https://github.com/bobpoekert","followers_url":"https://api.github.com/users/bobpoekert/followers","following_url":"https://api.github.com/users/bobpoekert/following{/other_user}","gists_url":"https://api.github.com/users/bobpoekert/gists{/gist_id}","starred_url":"https://api.github.com/users/bobpoekert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bobpoekert/subscriptions","organizations_url":"https://api.github.com/users/bobpoekert/orgs","repos_url":"https://api.github.com/users/bobpoekert/repos","events_url":"https://api.github.com/users/bobpoekert/events{/privacy}","received_events_url":"https://api.github.com/users/bobpoekert/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2014-08-26T23:18:07Z","updated_at":"2014-08-27T00:10:30Z","closed_at":"2014-08-27T00:10:30Z","author_association":"NONE","active_lock_reason":null,"body":"Calling `http://elasticsearch:9200/_snapshot/local/test-small` on a single index returns the following. Why would a response ever report success when there are failed shards?\n\n``` json\n{  \n   \"snapshot\":\"test-small\",\n   \"repository\":\"local\",\n   \"state\":\"SUCCESS\",\n   \"shards_stats\":{  \n      \"initializing\":0,\n      \"started\":0,\n      \"finalizing\":0,\n      \"done\":3,\n      \"failed\":2,\n      \"total\":5\n   },\n   \"stats\":{  \n      \"number_of_files\":0,\n      \"processed_files\":0,\n      \"total_size_in_bytes\":0,\n      \"processed_size_in_bytes\":0,\n      \"start_time_in_millis\":0,\n      \"time_in_millis\":0\n   },\n   \"indices\":{  \n      \"<index name>\":{  \n         \"shards_stats\":{  \n            \"initializing\":0,\n            \"started\":0,\n            \"finalizing\":0,\n            \"done\":3,\n            \"failed\":2,\n            \"total\":5\n         },\n         \"stats\":{  \n            \"number_of_files\":0,\n            \"processed_files\":0,\n            \"total_size_in_bytes\":0,\n            \"processed_size_in_bytes\":0,\n            \"start_time_in_millis\":0,\n            \"time_in_millis\":0\n         },\n         \"shards\":{  \n            \"4\":{  \n               \"stage\":\"DONE\",\n               \"stats\":{  \n                  \"number_of_files\":0,\n                  \"processed_files\":0,\n                  \"total_size_in_bytes\":0,\n                  \"processed_size_in_bytes\":0,\n                  \"start_time_in_millis\":0,\n                  \"time_in_millis\":0\n               }\n            },\n            \"0\":{  \n               \"stage\":\"DONE\",\n               \"stats\":{  \n                  \"number_of_files\":0,\n                  \"processed_files\":0,\n                  \"total_size_in_bytes\":0,\n                  \"processed_size_in_bytes\":0,\n                  \"start_time_in_millis\":0,\n                  \"time_in_millis\":0\n               }\n            },\n            \"1\":{  \n               \"stage\":\"FAILURE\",\n               \"stats\":{  \n                  \"number_of_files\":0,\n                  \"processed_files\":0,\n                  \"total_size_in_bytes\":0,\n                  \"processed_size_in_bytes\":0,\n                  \"start_time_in_millis\":0,\n                  \"time_in_millis\":0\n               }\n            },\n            \"2\":{  \n               \"stage\":\"DONE\",\n               \"stats\":{  \n                  \"number_of_files\":0,\n                  \"processed_files\":0,\n                  \"total_size_in_bytes\":0,\n                  \"processed_size_in_bytes\":0,\n                  \"start_time_in_millis\":0,\n                  \"time_in_millis\":0\n               }\n            },\n            \"3\":{  \n               \"stage\":\"FAILURE\",\n               \"stats\":{  \n                  \"number_of_files\":0,\n                  \"processed_files\":0,\n                  \"total_size_in_bytes\":0,\n                  \"processed_size_in_bytes\":0,\n                  \"start_time_in_millis\":0,\n                  \"time_in_millis\":0\n               }\n            }\n         }\n      }\n   }\n}\n```\n","closed_by":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"performed_via_github_app":null}