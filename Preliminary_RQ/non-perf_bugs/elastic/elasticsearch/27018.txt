{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/27018","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27018/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27018/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27018/events","html_url":"https://github.com/elastic/elasticsearch/issues/27018","id":265587313,"node_id":"MDU6SXNzdWUyNjU1ODczMTM=","number":27018,"title":"I have this error when i try to remove a tag from tag array can somewone explain why i have this error","user":{"login":"George35mk","id":20750445,"node_id":"MDQ6VXNlcjIwNzUwNDQ1","avatar_url":"https://avatars0.githubusercontent.com/u/20750445?v=4","gravatar_id":"","url":"https://api.github.com/users/George35mk","html_url":"https://github.com/George35mk","followers_url":"https://api.github.com/users/George35mk/followers","following_url":"https://api.github.com/users/George35mk/following{/other_user}","gists_url":"https://api.github.com/users/George35mk/gists{/gist_id}","starred_url":"https://api.github.com/users/George35mk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/George35mk/subscriptions","organizations_url":"https://api.github.com/users/George35mk/orgs","repos_url":"https://api.github.com/users/George35mk/repos","events_url":"https://api.github.com/users/George35mk/events{/privacy}","received_events_url":"https://api.github.com/users/George35mk/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2017-10-15T17:09:29Z","updated_at":"2017-10-15T21:29:35Z","closed_at":"2017-10-15T21:29:35Z","author_association":"NONE","active_lock_reason":null,"body":">  ERROR =>  TransportError(400, 'illegal_argument_exception', '[D3e7NWc][127.0.0.1:9300][indices:data/write/update[s]]')\r\n\r\n\r\nI Try to remove an item from array \r\n\r\nThis is how is look on the database\r\n\r\n```jon\r\n{\r\n    \"took\": 1,\r\n    \"timed_out\": false,\r\n    \"_shards\": {\r\n        \"total\": 5,\r\n        \"successful\": 5,\r\n        \"failed\": 0\r\n    },\r\n    \"hits\": {\r\n        \"total\": 1,\r\n        \"max_score\": 1,\r\n        \"hits\": [\r\n            {\r\n                \"_index\": \"customers\",\r\n                \"_type\": \"customer\",\r\n                \"_id\": \"QOTzXMUcrnbsYyFKeouHnjlkjQB3\",\r\n                \"_score\": 1,\r\n                \"_source\": {\r\n                    \"uid\": \"QOTzXMUcrnbsYyFKeouHnjlkjQB3\",\r\n                    \"email\": \"georgehatouts@gmail.com\",\r\n                    \"favorites\": [\r\n                        \"AV8My20P8yrUSAV2Zp6C\",\r\n                        \"AV8Mw5zq8yrUSAV2Zp6A\"  <--- I WANT TO REMOVE THIS ITEM\r\n                    ],\r\n                    \"history\": [],\r\n                    \"settings\": {},\r\n                    \"purchases\": [],\r\n                    \"created\": 1508083496773,\r\n                    \"updated\": 1508083496773\r\n                }\r\n            }\r\n        ]\r\n    }\r\n}\r\n```\r\n## My python code \r\n\r\n```python\r\ndef remove_fav_product(uid, product_id):\r\n    ''' Remove favorite product from customer favorites '''\r\n\r\n    print('Start removing favorite product')\r\n    print('UID => ', uid)\r\n    print('fav_id => ', product_id)\r\n\r\n    # 1st check if the user hass this product on favorites,\r\n    # 2st if the user dont has this remove it from the list\r\n\r\n    timestamp = int(round(time.time() * 1000))\r\n\r\n    doc = {\r\n        \"script\" : {\r\n            \"inline\":\"ctx._source.favorites -= params.product_id\",\r\n            \"params\":{\r\n                \"product_id\":product_id\r\n            }\r\n        }\r\n    }\r\n\r\n    try:\r\n        es.update(index=\"customers\", doc_type='customer', id=uid, body=doc)\r\n        es.indices.refresh(index=\"customers\")\r\n        return jsonify({'message': 'customer_remove_fav_product'}), 200\r\n    except Exception as e:\r\n        print('ERROR => ', e)\r\n        return 'we have error', 500\r\n#end\r\n```","closed_by":{"login":"George35mk","id":20750445,"node_id":"MDQ6VXNlcjIwNzUwNDQ1","avatar_url":"https://avatars0.githubusercontent.com/u/20750445?v=4","gravatar_id":"","url":"https://api.github.com/users/George35mk","html_url":"https://github.com/George35mk","followers_url":"https://api.github.com/users/George35mk/followers","following_url":"https://api.github.com/users/George35mk/following{/other_user}","gists_url":"https://api.github.com/users/George35mk/gists{/gist_id}","starred_url":"https://api.github.com/users/George35mk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/George35mk/subscriptions","organizations_url":"https://api.github.com/users/George35mk/orgs","repos_url":"https://api.github.com/users/George35mk/repos","events_url":"https://api.github.com/users/George35mk/events{/privacy}","received_events_url":"https://api.github.com/users/George35mk/received_events","type":"User","site_admin":false},"performed_via_github_app":null}