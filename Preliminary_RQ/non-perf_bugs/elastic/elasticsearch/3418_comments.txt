[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/21916930","html_url":"https://github.com/elastic/elasticsearch/issues/3418#issuecomment-21916930","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3418","id":21916930,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTE2OTMw","user":{"login":"karmi","id":4790,"node_id":"MDQ6VXNlcjQ3OTA=","avatar_url":"https://avatars1.githubusercontent.com/u/4790?v=4","gravatar_id":"","url":"https://api.github.com/users/karmi","html_url":"https://github.com/karmi","followers_url":"https://api.github.com/users/karmi/followers","following_url":"https://api.github.com/users/karmi/following{/other_user}","gists_url":"https://api.github.com/users/karmi/gists{/gist_id}","starred_url":"https://api.github.com/users/karmi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karmi/subscriptions","organizations_url":"https://api.github.com/users/karmi/orgs","repos_url":"https://api.github.com/users/karmi/repos","events_url":"https://api.github.com/users/karmi/events{/privacy}","received_events_url":"https://api.github.com/users/karmi/received_events","type":"User","site_admin":false},"created_at":"2013-08-01T06:17:40Z","updated_at":"2013-08-01T06:18:07Z","author_association":"CONTRIBUTOR","body":"In current master, this inconsistency is fixed by #3301. The solution is to use `source_include` instead of `fields:\n\n``` bash\ncurl -X DELETE localhost:9250/arrays\n\ncurl -X POST localhost:9250/arrays -d '{\n  \"mappings\" : {\n    \"book\" : {\n      \"properties\": {\n        \"title\" : {\n          \"type\" : \"string\"\n        },\n        \"authors\" : {\n          \"properties\" : {\n            \"nick\": {\n              \"type\": \"string\"\n            }\n          }\n        }\n      }\n    }\n  }\n}'\n\ncurl -X PUT localhost:9250/arrays/chat/1 -d '{\n  \"title\" : \"Test 1\",\n  \"authors\" : [ { \"nick\" : \"john\" } ]\n}'\n\ncurl -X PUT localhost:9250/arrays/chat/2 -d '{\n  \"title\" : \"Test 1\",\n  \"authors\" : [ { \"nick\" : \"john\" }, { \"nick\" : \"mary\" } ]\n}'\n\necho; echo 'GET 1'; echo\n\ncurl -XGET 'localhost:9250/arrays/chat/1?pretty&source_include=authors'\n\necho; echo 'GET 2'; echo;\n\ncurl -XGET 'localhost:9250/arrays/chat/2?pretty&source_include=authors'\n```\n","performed_via_github_app":null}]