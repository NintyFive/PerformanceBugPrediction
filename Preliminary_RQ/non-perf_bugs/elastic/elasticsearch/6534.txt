{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/6534","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6534/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6534/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6534/events","html_url":"https://github.com/elastic/elasticsearch/issues/6534","id":35896579,"node_id":"MDU6SXNzdWUzNTg5NjU3OQ==","number":6534,"title":"percolated and query_string","user":{"login":"One-art","id":2612463,"node_id":"MDQ6VXNlcjI2MTI0NjM=","avatar_url":"https://avatars1.githubusercontent.com/u/2612463?v=4","gravatar_id":"","url":"https://api.github.com/users/One-art","html_url":"https://github.com/One-art","followers_url":"https://api.github.com/users/One-art/followers","following_url":"https://api.github.com/users/One-art/following{/other_user}","gists_url":"https://api.github.com/users/One-art/gists{/gist_id}","starred_url":"https://api.github.com/users/One-art/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/One-art/subscriptions","organizations_url":"https://api.github.com/users/One-art/orgs","repos_url":"https://api.github.com/users/One-art/repos","events_url":"https://api.github.com/users/One-art/events{/privacy}","received_events_url":"https://api.github.com/users/One-art/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2014-06-17T14:50:19Z","updated_at":"2014-06-18T09:09:24Z","closed_at":"2014-06-18T09:09:24Z","author_association":"NONE","active_lock_reason":null,"body":"i have 100 queries  and index with data { name: string }\nSo, i try to use percolated to find data math this query, but nothing match.\n\nWhat i did:\n\n```\nPUT localhost:9200/test\nPUT localhost:9200/test/data/_mapping \n{\n  \"data\" : {\n    \"properties\": {\n      \"name\": { \"type\" : \"string\" }\n    }\n  }\n}\n```\n\n```\nPUT localhost:9200/test/data/1 \n{\n  \"name\": \"test\"\n}\nPUT localhost:9200/test/data/2\n{\n  \"name\": \"dev\"\n}\n```\n\n```\nPUT localhost:9200/test/.percolate/simply-search\n{\n  \"query\": {\n    \"simple_query_string\" : {\n        \"query\": \"test -dev\",\n        \"analyzer\": \"snowball\",\n        \"fields\": [\"_all\"],\n        \"default_operator\": \"and\"\n    }\n  }\n}\n```\n\nAfter:\n\n```\nGET localhost:9200/test/data/1/_percolate\nGET localhost:9200/test/data/2/_percolate\n```\n\nBoth result\n\n```\n{\n   \"took\":2,\n   \"_shards\":{\n      \"total\":5,\n      \"successful\":5,\n      \"failed\":0\n   },\n   \"total\":0,\n  \"matches\":[ ]\n}\n```\n\nWhere mistake? Or its bug?\nI use Ubuntu 12.04 and \n\n```\n{\n   \"status\":200,\n   \"name\":\"Commander Kraken\",\n   \"version\":{\n      \"number\":\"1.2.1\",\n      \"build_hash\":\"6c95b759f9e7ef0f8e17f77d850da43ce8a4b364\",\n      \"build_timestamp\":\"2014-06-03T15:02:52Z\",\n      \"build_snapshot\":false,\n      \"lucene_version\":\"4.8\"\n   },\n   \"tagline\":\"You Know, for Search\"\n}\n```\n\nP.S. On my site i have thousands of items and i need put every item in specifying category. Every category have field in query format like: '\"(ror|ruby) book\"~5 -PHP'\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}