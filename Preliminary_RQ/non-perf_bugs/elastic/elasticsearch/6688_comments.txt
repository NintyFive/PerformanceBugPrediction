[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/47795859","html_url":"https://github.com/elastic/elasticsearch/issues/6688#issuecomment-47795859","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6688","id":47795859,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3Nzk1ODU5","user":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"created_at":"2014-07-02T16:00:57Z","updated_at":"2014-07-02T16:00:57Z","author_association":"CONTRIBUTOR","body":"We may need to consider how me model the idea of entities and roles. E.g. `foo@hotmail.com` is an entity as is bank account `123535` but the entities could each appear in different roles e.g. appearing as email `sender` vs `recipient` or payment `payer` vs `payee`.\nIf we want to summarise how entities interact and don't have any special treatment of entities/roles then the client has to either:\na) Create a role-less field for the purposes of analysis e.g. the field `transactionParticipant` or\nb) Provide terms for each of the roles e.g. sender:foo@hotmail.com, recipient:foo@hotmail.com etc etc\n\nPerhaps a simpler option is to assume that the user lists the entities of interest once and separately defines the list of fields which represent roles e.g:\n\n```\n{\n    \"entities\":[\"foo@hotmail.com\", \"bar@hotmail.com\"],\n    \"roles\": [\"from\", \"to\"]\n}\n```\n\nThe entities become the nodes in our graph and the edges are the type of line that connects entities e.g. a direction of payment. Edges would be agg buckets and could summarise interactions between a pair of entities through the use of child aggs e.g. summing the volumes of money transferred, month by month. It may be useful to do some form of \"edge bundling\" e.g. rolling up `to` and `cc` roles into a single `recipient` role for the purposes of bucketing. This could be defined as part of the agg settings\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/48155454","html_url":"https://github.com/elastic/elasticsearch/issues/6688#issuecomment-48155454","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6688","id":48155454,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MTU1NDU0","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2014-07-07T09:04:10Z","updated_at":"2014-07-07T09:04:10Z","author_association":"MEMBER","body":"In terms of the API for this aggregation at the moment I have the following:\n\nRequest:\n\n```\n{\n    \"size\" : 100,\n    \"fields\" : [\"From\", \"To\"],\n    \"nodeValues\" : [ \"foo@example.com\", \"bar@example.com\"]\n}\n```\n\nResponse:\n\n```\n{\n    {\n        \"key_as_string\": \"From:foo@example.com\\u0000To:bar@example.com\",\n        \"src\": {\n            \"field\": \"From\",\n            \"value\": \"foo@example.com\"\n        },\n        \"dest\": {\n            \"field\": \"To\",\n            \"value\": \"bar@example.com\"\n        },\n        \"doc_count\": 113\n    },\n    {\n        \"key_as_string\": \"From:bar@example.com\\u0000To:foo@aol.com\",\n        \"src\": {\n            \"field\": \"From\",\n            \"value\": \"bar@example.com\"\n        },\n        \"dest\": {\n            \"field\": \"To\",\n            \"value\": \"foo@aol.com\"\n        },\n        \"doc_count\": 80\n    }\n}\n```\n\nThe src and dest fields are at the moment chosen arbitrarily. An improvement might be to split the fields into sourceFields and destinationFields but this might not fit well with use cases which don't care about directed graphs\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158652727","html_url":"https://github.com/elastic/elasticsearch/issues/6688#issuecomment-158652727","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6688","id":158652727,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODY1MjcyNw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-11-21T15:36:12Z","updated_at":"2015-11-21T15:36:12Z","author_association":"CONTRIBUTOR","body":"@markharwood @colings86 is this still of interest?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/158791327","html_url":"https://github.com/elastic/elasticsearch/issues/6688#issuecomment-158791327","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6688","id":158791327,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODc5MTMyNw==","user":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"created_at":"2015-11-22T19:27:08Z","updated_at":"2015-11-22T19:27:08Z","author_association":"CONTRIBUTOR","body":"This is superseded by the graph API\n","performed_via_github_app":null}]