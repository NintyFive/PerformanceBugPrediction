{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/43277","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43277/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43277/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43277/events","html_url":"https://github.com/elastic/elasticsearch/issues/43277","id":456908553,"node_id":"MDU6SXNzdWU0NTY5MDg1NTM=","number":43277,"title":"'gt' gives unexpected results.","user":{"login":"Sanjaygk","id":29224320,"node_id":"MDQ6VXNlcjI5MjI0MzIw","avatar_url":"https://avatars1.githubusercontent.com/u/29224320?v=4","gravatar_id":"","url":"https://api.github.com/users/Sanjaygk","html_url":"https://github.com/Sanjaygk","followers_url":"https://api.github.com/users/Sanjaygk/followers","following_url":"https://api.github.com/users/Sanjaygk/following{/other_user}","gists_url":"https://api.github.com/users/Sanjaygk/gists{/gist_id}","starred_url":"https://api.github.com/users/Sanjaygk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sanjaygk/subscriptions","organizations_url":"https://api.github.com/users/Sanjaygk/orgs","repos_url":"https://api.github.com/users/Sanjaygk/repos","events_url":"https://api.github.com/users/Sanjaygk/events{/privacy}","received_events_url":"https://api.github.com/users/Sanjaygk/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-06-17T12:31:13Z","updated_at":"2019-06-20T20:01:19Z","closed_at":"2019-06-20T20:01:19Z","author_association":"NONE","active_lock_reason":null,"body":"Elasticsearch version: 7.0.0\r\n\r\n**OS version** (`uname -a` if on a Unix-like system):\r\nLinux <hostname>  3.10.0-957.el7.x86_64 #1 SMP Thu Nov 8 23:39:32 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nThe elasticsearch query,\r\n```\r\nGET my_index*/_search\r\n{\r\n  \"query\":                                 \r\n    {\"range\": {\"timestamp\": {\"gt\": \"now-1M\"}}}\r\n}\r\n\r\n```\r\n\r\nreturns,\r\n\r\n```\r\n{\r\n  \"took\" : 923,\r\n  \"timed_out\" : false,\r\n  \"_shards\" : {\r\n    \"total\" : 14,\r\n    \"successful\" : 14,\r\n    \"skipped\" : 0,\r\n    \"failed\" : 0\r\n  },\r\n  \"hits\" : {\r\n    \"total\" : {\r\n      \"value\" : 0,\r\n      \"relation\" : \"eq\"\r\n    },\r\n    \"max_score\" : null,\r\n    \"hits\" : [ ]\r\n  }\r\n}\r\n```\r\n\r\nReturns zero hits, but if i do change the range to \"now-2w\" it returns hits. this is quite strange! and the relation too is specified as 'eq' rather than 'gt' in above response. \r\n\r\nit works well with 'gte' though.\r\n\r\n**Steps to reproduce**:\r\n\r\n 1. Try to query data for different time periods (week, month) using console with 'gt' parameter on elasticsearch 7.0.0. For some time periods, it'll return zero hits and 'relation' as 'eq' even though there's data for that time period in elasticsearch.\r\n\r\nI don't see any errors in elasticsearch logs. (Discover tab in Kibana shows proper results as expected)\r\n","closed_by":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"performed_via_github_app":null}