{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/20703","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20703/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20703/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20703/events","html_url":"https://github.com/elastic/elasticsearch/issues/20703","id":180212866,"node_id":"MDU6SXNzdWUxODAyMTI4NjY=","number":20703,"title":"Binding to the wildcard of one address family should not prevent binding to addresses in another family","user":{"login":"astralblue","id":1522566,"node_id":"MDQ6VXNlcjE1MjI1NjY=","avatar_url":"https://avatars2.githubusercontent.com/u/1522566?v=4","gravatar_id":"","url":"https://api.github.com/users/astralblue","html_url":"https://github.com/astralblue","followers_url":"https://api.github.com/users/astralblue/followers","following_url":"https://api.github.com/users/astralblue/following{/other_user}","gists_url":"https://api.github.com/users/astralblue/gists{/gist_id}","starred_url":"https://api.github.com/users/astralblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astralblue/subscriptions","organizations_url":"https://api.github.com/users/astralblue/orgs","repos_url":"https://api.github.com/users/astralblue/repos","events_url":"https://api.github.com/users/astralblue/events{/privacy}","received_events_url":"https://api.github.com/users/astralblue/received_events","type":"User","site_admin":false},"labels":[{"id":146854632,"node_id":"MDU6TGFiZWwxNDY4NTQ2MzI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Network","name":":Distributed/Network","color":"0e8a16","default":false,"description":"Http and internode communication implementations"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2016-09-30T03:35:42Z","updated_at":"2017-05-09T08:14:52Z","closed_at":"2016-10-17T20:45:30Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\nIf you are filing a bug report, please remove the below feature\nrequest block and provide responses for all of the below items.\n-->\n\n**Elasticsearch version**: 5.0.0-alpha5 (installed out of the deb repository)\n\n**Plugins installed**: []\n\n**JVM version**: openjdk-8-jre_8u91-b14-3ubuntu1~16.04.1 \n\n**OS version**: Ubuntu 16.04.1 LTS\n\n**Description of the problem including expected versus actual behavior**:\n\nWhen instructed to wildcard-bind in one address family (say, IPv4), ES requires that the wildcard be the only bind address, and rejects the other addresses even if they belong to another address family (say, IPv6).  This prevents binding to the following combinations:\n- `network.host: [\"0.0.0.0\", \"[::1]\"]` – 0.0.0.0 (IPv4 wildcard) rejects ::1 (IPv6 non-wildcard);\n- `network.host: [\"127.0.0.1\", \"[::]\"]` – :: (IPv6 wildcard) rejects 127.0.0.1 (IPv4 non-wildcard);\n- `network.host: [\"0.0.0.0\", \"[::]\"]` – both 0.0.0.0 and :: (IPv4/IPv6 wildcards) reject each other.\n\nA wildcard bind address should reject other bind addresses **of the same address family only.**\n\n**Steps to reproduce**:\n1. Configure one of the `network.host` directives above into `/etc/elasticsearch/elasticsearch.yml`.\n2. `service elasticsearch start`\n3. Examine `/var/log/elasticsearch/elasticsearch.log`.\n   - Expected result: The server starts up successfully.\n   - Actual result: The server fails to start up; see the log message below.\n4. `netstat -nap`\n   - Expected result: The server has two listening sockets, one for each `network.host` address.\n   - Actual result: N/A because the server did not even start up.\n\n**Provide logs (if relevant)**:\n\n```\n[2016-09-30 03:11:15,186][ERROR][bootstrap                ] [pqYXWfs] Exception\njava.lang.IllegalArgumentException: bind address: {0.0.0.0} is wildcard, but multiple addresses specified: this makes no sense\n        at org.elasticsearch.common.network.NetworkService.resolveBindHostAddresses(NetworkService.java:140)\n        at org.elasticsearch.transport.TcpTransport.bindServer(TcpTransport.java:569)\n        at org.elasticsearch.transport.netty4.Netty4Transport.doStart(Netty4Transport.java:181)\n        at org.elasticsearch.common.component.AbstractLifecycleComponent.start(AbstractLifecycleComponent.java:68)\n        at org.elasticsearch.transport.TransportService.doStart(TransportService.java:177)\n        at org.elasticsearch.common.component.AbstractLifecycleComponent.start(AbstractLifecycleComponent.java:68)\n        at org.elasticsearch.node.Node.start(Node.java:469)\n        at org.elasticsearch.bootstrap.Bootstrap.start(Bootstrap.java:193)\n        at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:257)\n        at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:101)\n        at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:96)\n        at org.elasticsearch.cli.SettingCommand.execute(SettingCommand.java:54)\n        at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:88)\n        at org.elasticsearch.cli.Command.main(Command.java:54)\n        at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:75)\n        at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:68)\n```\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}