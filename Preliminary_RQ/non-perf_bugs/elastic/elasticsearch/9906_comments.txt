[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/76261668","html_url":"https://github.com/elastic/elasticsearch/issues/9906#issuecomment-76261668","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9906","id":76261668,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MjYxNjY4","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2015-02-26T20:19:07Z","updated_at":"2015-02-26T20:19:07Z","author_association":"MEMBER","body":"An expired scroll id should trigger a different error. Is this issue easily reproducible? and on what version did you encounter these errors?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/81860287","html_url":"https://github.com/elastic/elasticsearch/issues/9906#issuecomment-81860287","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9906","id":81860287,"node_id":"MDEyOklzc3VlQ29tbWVudDgxODYwMjg3","user":{"login":"astefan","id":893749,"node_id":"MDQ6VXNlcjg5Mzc0OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/893749?v=4","gravatar_id":"","url":"https://api.github.com/users/astefan","html_url":"https://github.com/astefan","followers_url":"https://api.github.com/users/astefan/followers","following_url":"https://api.github.com/users/astefan/following{/other_user}","gists_url":"https://api.github.com/users/astefan/gists{/gist_id}","starred_url":"https://api.github.com/users/astefan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astefan/subscriptions","organizations_url":"https://api.github.com/users/astefan/orgs","repos_url":"https://api.github.com/users/astefan/repos","events_url":"https://api.github.com/users/astefan/events{/privacy}","received_events_url":"https://api.github.com/users/astefan/received_events","type":"User","site_admin":false},"created_at":"2015-03-16T18:40:18Z","updated_at":"2015-03-16T18:40:18Z","author_association":"CONTRIBUTOR","body":"Not easily reproduceable, heavy searching with scrolling scenario is needed for this. ES 1.4.1.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/89604318","html_url":"https://github.com/elastic/elasticsearch/issues/9906#issuecomment-89604318","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9906","id":89604318,"node_id":"MDEyOklzc3VlQ29tbWVudDg5NjA0MzE4","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-04-04T15:54:06Z","updated_at":"2015-04-04T15:54:06Z","author_association":"CONTRIBUTOR","body":"@astefan Can you show us the actual code that you're using here?  If you're able to provide a working recreation, even better.  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/96428739","html_url":"https://github.com/elastic/elasticsearch/issues/9906#issuecomment-96428739","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9906","id":96428739,"node_id":"MDEyOklzc3VlQ29tbWVudDk2NDI4NzM5","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-04-26T20:00:51Z","updated_at":"2015-04-26T20:00:51Z","author_association":"CONTRIBUTOR","body":"Hi @astefan \n\nWhat version of Elasticsearch are you using? Are you using any parent/child or nested queries?  How about a stack trace from the logs where you get the NPE?\n\nWe don't have enough information to investigate any further at the moment.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/103332436","html_url":"https://github.com/elastic/elasticsearch/issues/9906#issuecomment-103332436","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9906","id":103332436,"node_id":"MDEyOklzc3VlQ29tbWVudDEwMzMzMjQzNg==","user":{"login":"ishare","id":1309607,"node_id":"MDQ6VXNlcjEzMDk2MDc=","avatar_url":"https://avatars1.githubusercontent.com/u/1309607?v=4","gravatar_id":"","url":"https://api.github.com/users/ishare","html_url":"https://github.com/ishare","followers_url":"https://api.github.com/users/ishare/followers","following_url":"https://api.github.com/users/ishare/following{/other_user}","gists_url":"https://api.github.com/users/ishare/gists{/gist_id}","starred_url":"https://api.github.com/users/ishare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ishare/subscriptions","organizations_url":"https://api.github.com/users/ishare/orgs","repos_url":"https://api.github.com/users/ishare/repos","events_url":"https://api.github.com/users/ishare/events{/privacy}","received_events_url":"https://api.github.com/users/ishare/received_events","type":"User","site_admin":false},"created_at":"2015-05-19T04:30:01Z","updated_at":"2015-05-19T06:21:52Z","author_association":"CONTRIBUTOR","body":"got the same err in 1.5.1, is there any idea? I tried delete all data and index, reindex all docs, it occurs again..\n\n[2015-05-19 14:18:55,581][DEBUG][action.search.type       ] [Bart Hamilton] [26] Failed to execute fetch phase\njava.lang.IndexOutOfBoundsException: docID must be >= 0 and < maxDoc=1 (got docID=2147483647)\n    at org.apache.lucene.index.SegmentReader.checkBounds(SegmentReader.java:376)\n    at org.apache.lucene.index.SegmentReader.document(SegmentReader.java:334)\n    at org.elasticsearch.search.fetch.FetchPhase.loadStoredFields(FetchPhase.java:407)\n    at org.elasticsearch.search.fetch.FetchPhase.createSearchHit(FetchPhase.java:217)\n    at org.elasticsearch.search.fetch.FetchPhase.execute(FetchPhase.java:182)\n    at org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:501)\n    at org.elasticsearch.search.action.SearchServiceTransportAction$17.call(SearchServiceTransportAction.java:452)\n    at org.elasticsearch.search.action.SearchServiceTransportAction$17.call(SearchServiceTransportAction.java:449)\n    at org.elasticsearch.search.action.SearchServiceTransportAction$23.run(SearchServiceTransportAction.java:559)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/103449549","html_url":"https://github.com/elastic/elasticsearch/issues/9906#issuecomment-103449549","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9906","id":103449549,"node_id":"MDEyOklzc3VlQ29tbWVudDEwMzQ0OTU0OQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2015-05-19T11:25:45Z","updated_at":"2015-05-19T11:25:45Z","author_association":"CONTRIBUTOR","body":"Without at least the query you are scrolling this is going to be hard to\ndebug. The mapping and some example documents would help too.\nOn May 19, 2015 12:30 AM, \"navins\" notifications@github.com wrote:\n\n> got the same err in 1.5.1, is there any idea?\n> \n> java.lang.IndexOutOfBoundsException: docID must be >= 0 and < maxDoc=1\n> (got docID=2147483647)\n> at\n> org.apache.lucene.index.SegmentReader.checkBounds(SegmentReader.java:376)\n> at org.apache.lucene.index.SegmentReader.document(SegmentReader.java:334)\n> at\n> org.elasticsearch.search.fetch.FetchPhase.loadStoredFields(FetchPhase.java:407)\n> at\n> org.elasticsearch.search.fetch.FetchPhase.createSearchHit(FetchPhase.java:217)\n> at org.elasticsearch.search.fetch.FetchPhase.execute(FetchPhase.java:182)\n> at\n> org.elasticsearch.search.SearchService.executeFetchPhase(SearchService.java:501)\n> at\n> org.elasticsearch.search.action.SearchServiceTransportAction$17.call(SearchServiceTransportAction.java:452)\n> at\n> org.elasticsearch.search.action.SearchServiceTransportAction$17.call(SearchServiceTransportAction.java:449)\n> at\n> org.elasticsearch.search.action.SearchServiceTransportAction$23.run(SearchServiceTransportAction.java:559)\n> at\n> java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n> at\n> java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n> at java.lang.Thread.run(Thread.java:745)\n> \n> â€”\n> Reply to this email directly or view it on GitHub\n> https://github.com/elastic/elasticsearch/issues/9906#issuecomment-103332436\n> .\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/104091883","html_url":"https://github.com/elastic/elasticsearch/issues/9906#issuecomment-104091883","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9906","id":104091883,"node_id":"MDEyOklzc3VlQ29tbWVudDEwNDA5MTg4Mw==","user":{"login":"ishare","id":1309607,"node_id":"MDQ6VXNlcjEzMDk2MDc=","avatar_url":"https://avatars1.githubusercontent.com/u/1309607?v=4","gravatar_id":"","url":"https://api.github.com/users/ishare","html_url":"https://github.com/ishare","followers_url":"https://api.github.com/users/ishare/followers","following_url":"https://api.github.com/users/ishare/following{/other_user}","gists_url":"https://api.github.com/users/ishare/gists{/gist_id}","starred_url":"https://api.github.com/users/ishare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ishare/subscriptions","organizations_url":"https://api.github.com/users/ishare/orgs","repos_url":"https://api.github.com/users/ishare/repos","events_url":"https://api.github.com/users/ishare/events{/privacy}","received_events_url":"https://api.github.com/users/ishare/received_events","type":"User","site_admin":false},"created_at":"2015-05-21T01:48:45Z","updated_at":"2015-05-21T01:48:45Z","author_association":"CONTRIBUTOR","body":"Solved, I found there is exception in native script which cause this problem.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/220756229","html_url":"https://github.com/elastic/elasticsearch/issues/9906#issuecomment-220756229","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9906","id":220756229,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMDc1NjIyOQ==","user":{"login":"haochun","id":9320176,"node_id":"MDQ6VXNlcjkzMjAxNzY=","avatar_url":"https://avatars3.githubusercontent.com/u/9320176?v=4","gravatar_id":"","url":"https://api.github.com/users/haochun","html_url":"https://github.com/haochun","followers_url":"https://api.github.com/users/haochun/followers","following_url":"https://api.github.com/users/haochun/following{/other_user}","gists_url":"https://api.github.com/users/haochun/gists{/gist_id}","starred_url":"https://api.github.com/users/haochun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/haochun/subscriptions","organizations_url":"https://api.github.com/users/haochun/orgs","repos_url":"https://api.github.com/users/haochun/repos","events_url":"https://api.github.com/users/haochun/events{/privacy}","received_events_url":"https://api.github.com/users/haochun/received_events","type":"User","site_admin":false},"created_at":"2016-05-21T03:36:12Z","updated_at":"2016-05-21T03:37:09Z","author_association":"NONE","body":"@ishare what exception did you found?i occurred the same exception.but,i am use function_score query,not scan.my query dsl is:\n\n`{\n  \"size\": 10,\n  \"query\": {\n    \"function_score\": {\n      \"functions\": [\n        {\n          \"script_score\": {\n            \"lang\": \"groovy\",\n            \"script\": \"_score * log(doc['cited'].value)\"\n          }\n        }\n      ],\n      \"query\": {\n        \"filtered\": {\n          \"query\": {\n            \"query_string\": {\n              \"analyzer\": \"query_ansj\",\n              \"query\": \"java\",\n              \"fields\": [\n                \"title^10.0\",\n                \"keywords^6.0\",\n                \"summary^1.0\",\n                \"authors^2.0\"\n              ]\n            }\n          }\n        }\n      }\n    }\n  },\n  \"from\": 90,\n  \"sort\": []\n}`\n\nwhen i search from 0-90,there is no exception,but,when i search from 90-100,the exception occurred\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/220756304","html_url":"https://github.com/elastic/elasticsearch/issues/9906#issuecomment-220756304","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9906","id":220756304,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMDc1NjMwNA==","user":{"login":"haochun","id":9320176,"node_id":"MDQ6VXNlcjkzMjAxNzY=","avatar_url":"https://avatars3.githubusercontent.com/u/9320176?v=4","gravatar_id":"","url":"https://api.github.com/users/haochun","html_url":"https://github.com/haochun","followers_url":"https://api.github.com/users/haochun/followers","following_url":"https://api.github.com/users/haochun/following{/other_user}","gists_url":"https://api.github.com/users/haochun/gists{/gist_id}","starred_url":"https://api.github.com/users/haochun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/haochun/subscriptions","organizations_url":"https://api.github.com/users/haochun/orgs","repos_url":"https://api.github.com/users/haochun/repos","events_url":"https://api.github.com/users/haochun/events{/privacy}","received_events_url":"https://api.github.com/users/haochun/received_events","type":"User","site_admin":false},"created_at":"2016-05-21T03:38:06Z","updated_at":"2016-05-21T03:38:06Z","author_association":"NONE","body":"the response\n`\n{\n\"took\": 8,\n\"timed_out\": false,\n\"_shards\": {\n\"total\": 12,\n\"successful\": 11,\n\"failed\": 1,\n\"failures\": [\n{\n\"index\": \"meta\",\n\"shard\": 2,\n\"status\": 500,\n\"reason\": \"IndexOutOfBoundsException[docID must be >= 0 and < maxDoc=25371497 (got docID=2147483647)]\"\n}\n]\n},\n\"hits\": {\n\"total\": 208,\n\"max_score\": 8.523983,\n\"hits\": [ ]\n}\n}\n`\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/220756622","html_url":"https://github.com/elastic/elasticsearch/issues/9906#issuecomment-220756622","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9906","id":220756622,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMDc1NjYyMg==","user":{"login":"haochun","id":9320176,"node_id":"MDQ6VXNlcjkzMjAxNzY=","avatar_url":"https://avatars3.githubusercontent.com/u/9320176?v=4","gravatar_id":"","url":"https://api.github.com/users/haochun","html_url":"https://github.com/haochun","followers_url":"https://api.github.com/users/haochun/followers","following_url":"https://api.github.com/users/haochun/following{/other_user}","gists_url":"https://api.github.com/users/haochun/gists{/gist_id}","starred_url":"https://api.github.com/users/haochun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/haochun/subscriptions","organizations_url":"https://api.github.com/users/haochun/orgs","repos_url":"https://api.github.com/users/haochun/repos","events_url":"https://api.github.com/users/haochun/events{/privacy}","received_events_url":"https://api.github.com/users/haochun/received_events","type":"User","site_admin":false},"created_at":"2016-05-21T03:48:30Z","updated_at":"2016-05-21T03:48:30Z","author_association":"NONE","body":"sorry,i found the cause.it it my fault.the doc['cited'] maybe zero.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/220760463","html_url":"https://github.com/elastic/elasticsearch/issues/9906#issuecomment-220760463","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9906","id":220760463,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMDc2MDQ2Mw==","user":{"login":"ishare","id":1309607,"node_id":"MDQ6VXNlcjEzMDk2MDc=","avatar_url":"https://avatars1.githubusercontent.com/u/1309607?v=4","gravatar_id":"","url":"https://api.github.com/users/ishare","html_url":"https://github.com/ishare","followers_url":"https://api.github.com/users/ishare/followers","following_url":"https://api.github.com/users/ishare/following{/other_user}","gists_url":"https://api.github.com/users/ishare/gists{/gist_id}","starred_url":"https://api.github.com/users/ishare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ishare/subscriptions","organizations_url":"https://api.github.com/users/ishare/orgs","repos_url":"https://api.github.com/users/ishare/repos","events_url":"https://api.github.com/users/ishare/events{/privacy}","received_events_url":"https://api.github.com/users/ishare/received_events","type":"User","site_admin":false},"created_at":"2016-05-21T05:48:09Z","updated_at":"2016-05-21T05:48:09Z","author_association":"CONTRIBUTOR","body":"@haochun this error always due to an exception, and the error msg is not quite obviously.\n","performed_via_github_app":null}]