[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/270083286","html_url":"https://github.com/elastic/elasticsearch/issues/22412#issuecomment-270083286","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22412","id":270083286,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDA4MzI4Ng==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2017-01-03T10:10:57Z","updated_at":"2017-01-03T10:10:57Z","author_association":"CONTRIBUTOR","body":"sounds like this makes sense","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/270083898","html_url":"https://github.com/elastic/elasticsearch/issues/22412#issuecomment-270083898","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22412","id":270083898,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDA4Mzg5OA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-01-03T10:14:36Z","updated_at":"2017-01-03T10:14:36Z","author_association":"CONTRIBUTOR","body":"I agree this would be nice, but I suspect it might be tricky to do in practice since not all date fields would accept UTC millis. Or we would need to add a mechanism to tell date fields to not try to parse the incoming value but just interpret it as a number of millis since UTC. I have the feeling we already have too many `if (fieldType instanceof DateFieldType)` so I am not sure I would be happy to pay this price. Or maybe there are cleaner ways to do this that I have not thought about?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/270084409","html_url":"https://github.com/elastic/elasticsearch/issues/22412#issuecomment-270084409","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22412","id":270084409,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDA4NDQwOQ==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2017-01-03T10:17:59Z","updated_at":"2017-01-03T10:17:59Z","author_association":"MEMBER","body":"> since not all date fields would accept UTC millis\r\n\r\nI thought if you gave the from and to as a Long instead of String it would interpret it as epoch millis? I thought that the date format only comes into play if from and/or to are String/BytesRef? Or maybe that is not what you mean?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/270110503","html_url":"https://github.com/elastic/elasticsearch/issues/22412#issuecomment-270110503","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22412","id":270110503,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDExMDUwMw==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-01-03T13:07:46Z","updated_at":"2017-01-03T13:07:46Z","author_association":"CONTRIBUTOR","body":"I just looked at the code and apparently we always parse the `toString`ed representation of the date. Which I think is the right thing to do, otherwise it would be very confusing when the format is `epoch_second` that strings get parsed as seconds but longs as millis?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/270119493","html_url":"https://github.com/elastic/elasticsearch/issues/22412#issuecomment-270119493","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22412","id":270119493,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDExOTQ5Mw==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2017-01-03T13:58:41Z","updated_at":"2017-01-03T13:58:41Z","author_association":"MEMBER","body":"Ok, my mistake. I think you are right that it would be confusing if the format was `epoch_seconds` and by a long value was interpreted as `epoch_millis`.  Maybe we could use the format in the RangeQueryBuilder so that when we create the rewritten query it has a UTC timezone a from and to that are in `epoch_millis` and a format of `epoch_millis`?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/270316598","html_url":"https://github.com/elastic/elasticsearch/issues/22412#issuecomment-270316598","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22412","id":270316598,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDMxNjU5OA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-01-04T08:16:48Z","updated_at":"2017-01-04T08:16:48Z","author_association":"CONTRIBUTOR","body":"I think that would work. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/270874146","html_url":"https://github.com/elastic/elasticsearch/issues/22412#issuecomment-270874146","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22412","id":270874146,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDg3NDE0Ng==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2017-01-06T10:20:47Z","updated_at":"2017-01-06T10:20:47Z","author_association":"MEMBER","body":"Looking at this again I see that even with my above suggestion we will need to add instanceof checks ands special case date and range fields. Given the complexity this will add I don't think this complexity will be outweighed by the benefit of better caching. This is especially because this issue was born from theory and not from seeing this happening in real life. \r\n\r\nFor those reasons I am going to close this issue for now, if people find that the lack of cache hits between queries with different timezones or date formats is having a measurable impact on their query performance we can reopen and discuss this issue again.","performed_via_github_app":null}]