[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/382270789","html_url":"https://github.com/elastic/elasticsearch/issues/29573#issuecomment-382270789","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29573","id":382270789,"node_id":"MDEyOklzc3VlQ29tbWVudDM4MjI3MDc4OQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-04-18T05:55:09Z","updated_at":"2018-04-18T05:55:09Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/382279925","html_url":"https://github.com/elastic/elasticsearch/issues/29573#issuecomment-382279925","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29573","id":382279925,"node_id":"MDEyOklzc3VlQ29tbWVudDM4MjI3OTkyNQ==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2018-04-18T06:43:47Z","updated_at":"2018-04-18T06:43:47Z","author_association":"MEMBER","body":"Your problem is that once node A starts again it can't find node B, which is master and elects itself as master (because the min master nodes in it's yml file is still 1). It then can't import the cluster state on disk (which is good because otherwise you'd have both A & B as master).\r\n\r\nWhen changing the cluster size you must make sure to also change the nodes yml files to reflect the update situation. This is needed for exactly the use case you are testing - when a node is restarted it uses the yml file to find other nodes and join the cluster. Since the node was just started, the configuration is the only thing it has access to.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/382292798","html_url":"https://github.com/elastic/elasticsearch/issues/29573#issuecomment-382292798","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29573","id":382292798,"node_id":"MDEyOklzc3VlQ29tbWVudDM4MjI5Mjc5OA==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2018-04-18T07:35:38Z","updated_at":"2018-04-18T07:35:38Z","author_association":"CONTRIBUTOR","body":"It'd be best to ask this question in the [discussion forum](https://discuss.elastic.co/c/elasticsearch) as we prefer to use Github issues for bug reports and feature requests only.\r\n\r\nIn this case, [it's important that `discovery.zen.minimum_master_nodes` is set to a number greater than half of your master-eligible nodes at all times](https://www.elastic.co/guide/en/elasticsearch/reference/6.2/discovery-settings.html#minimum_master_nodes). This effectively means it must be set to `2` in the `elasticsearch.yml` file, because that value is used when a node starts up until it successfully forms a cluster and recovers the value that was dynamically set.\r\n\r\nI'm closing this issue here, but if you would like to discuss further then please open a thread in the discussion forum.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/382331307","html_url":"https://github.com/elastic/elasticsearch/issues/29573#issuecomment-382331307","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29573","id":382331307,"node_id":"MDEyOklzc3VlQ29tbWVudDM4MjMzMTMwNw==","user":{"login":"wuyunfeng","id":5183061,"node_id":"MDQ6VXNlcjUxODMwNjE=","avatar_url":"https://avatars1.githubusercontent.com/u/5183061?v=4","gravatar_id":"","url":"https://api.github.com/users/wuyunfeng","html_url":"https://github.com/wuyunfeng","followers_url":"https://api.github.com/users/wuyunfeng/followers","following_url":"https://api.github.com/users/wuyunfeng/following{/other_user}","gists_url":"https://api.github.com/users/wuyunfeng/gists{/gist_id}","starred_url":"https://api.github.com/users/wuyunfeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wuyunfeng/subscriptions","organizations_url":"https://api.github.com/users/wuyunfeng/orgs","repos_url":"https://api.github.com/users/wuyunfeng/repos","events_url":"https://api.github.com/users/wuyunfeng/events{/privacy}","received_events_url":"https://api.github.com/users/wuyunfeng/received_events","type":"User","site_admin":false},"created_at":"2018-04-18T09:50:48Z","updated_at":"2018-04-18T09:50:48Z","author_association":"CONTRIBUTOR","body":"In Cloud Enviroment scenario, modify manually `minimum_master_nodes` will let the things gona to bad, I hope elaticsearch teams can change this such as persistent the node list to local storage etc.\r\n@DaveCTurner @bleskes  ,BTW I know the reason","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/382662094","html_url":"https://github.com/elastic/elasticsearch/issues/29573#issuecomment-382662094","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29573","id":382662094,"node_id":"MDEyOklzc3VlQ29tbWVudDM4MjY2MjA5NA==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2018-04-19T08:57:52Z","updated_at":"2018-04-19T08:57:52Z","author_association":"MEMBER","body":"@wuyunfeng we're working on it . See (some) details at the end of https://www.elastic.co/elasticon/conf/2018/sf/elasticsearch-consensus-the-past-the-present-and-the-future","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/382674137","html_url":"https://github.com/elastic/elasticsearch/issues/29573#issuecomment-382674137","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29573","id":382674137,"node_id":"MDEyOklzc3VlQ29tbWVudDM4MjY3NDEzNw==","user":{"login":"wuyunfeng","id":5183061,"node_id":"MDQ6VXNlcjUxODMwNjE=","avatar_url":"https://avatars1.githubusercontent.com/u/5183061?v=4","gravatar_id":"","url":"https://api.github.com/users/wuyunfeng","html_url":"https://github.com/wuyunfeng","followers_url":"https://api.github.com/users/wuyunfeng/followers","following_url":"https://api.github.com/users/wuyunfeng/following{/other_user}","gists_url":"https://api.github.com/users/wuyunfeng/gists{/gist_id}","starred_url":"https://api.github.com/users/wuyunfeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wuyunfeng/subscriptions","organizations_url":"https://api.github.com/users/wuyunfeng/orgs","repos_url":"https://api.github.com/users/wuyunfeng/repos","events_url":"https://api.github.com/users/wuyunfeng/events{/privacy}","received_events_url":"https://api.github.com/users/wuyunfeng/received_events","type":"User","site_admin":false},"created_at":"2018-04-19T09:39:22Z","updated_at":"2018-04-19T09:39:22Z","author_association":"CONTRIBUTOR","body":"@bleskes Thanks. Appreciate that.","performed_via_github_app":null}]