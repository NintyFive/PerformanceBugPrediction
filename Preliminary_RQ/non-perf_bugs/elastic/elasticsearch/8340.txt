{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/8340","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8340/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8340/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8340/events","html_url":"https://github.com/elastic/elasticsearch/issues/8340","id":47721876,"node_id":"MDU6SXNzdWU0NzcyMTg3Ng==","number":8340,"title":"Several recoveries cause IndexShardGatewayRecoveryException","user":{"login":"asafc64","id":6837849,"node_id":"MDQ6VXNlcjY4Mzc4NDk=","avatar_url":"https://avatars0.githubusercontent.com/u/6837849?v=4","gravatar_id":"","url":"https://api.github.com/users/asafc64","html_url":"https://github.com/asafc64","followers_url":"https://api.github.com/users/asafc64/followers","following_url":"https://api.github.com/users/asafc64/following{/other_user}","gists_url":"https://api.github.com/users/asafc64/gists{/gist_id}","starred_url":"https://api.github.com/users/asafc64/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asafc64/subscriptions","organizations_url":"https://api.github.com/users/asafc64/orgs","repos_url":"https://api.github.com/users/asafc64/repos","events_url":"https://api.github.com/users/asafc64/events{/privacy}","received_events_url":"https://api.github.com/users/asafc64/received_events","type":"User","site_admin":false},"labels":[{"id":143077482,"node_id":"MDU6TGFiZWwxNDMwNzc0ODI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Snapshot/Restore","name":":Distributed/Snapshot/Restore","color":"0e8a16","default":false,"description":"Anything directly related to the `_snapshot/*` APIs"},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"assignees":[{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false}],"milestone":null,"comments":8,"created_at":"2014-11-04T14:57:54Z","updated_at":"2014-11-25T01:55:16Z","closed_at":"2014-11-25T01:55:16Z","author_association":"NONE","active_lock_reason":null,"body":"I have tests environment that restore the index from snapshot before every test.\nAfter a few successful restorings, it fails on:\n\n_[2014-11-03 16:03:54,957][WARN ][indices.cluster ] [Baron Von Blitzschlag] [qs_rm_3][0] failed to start shard\norg.elasticsearch.index.gateway.IndexShardGatewayRecoveryException: [qs_rm_3][0] failed recovery\nat org.elasticsearch.index.gateway.IndexShardGatewayService$1.run(IndexShardGatewayService.java:185)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\nat java.lang.Thread.run(Unknown Source)\nCaused by: org.elasticsearch.index.snapshots.IndexShardRestoreFailedException: [qs_rm_3][0] restore failed\nat org.elasticsearch.index.snapshots.IndexShardSnapshotAndRestoreService.restore(IndexShardSnapshotAndRestoreService.java:130)\nat org.elasticsearch.index.gateway.IndexShardGatewayService$1.run(IndexShardGatewayService.java:127)\n... 3 more\nCaused by: org.elasticsearch.index.snapshots.IndexShardRestoreFailedException: [qs_rm_3][0] failed to restore snapshot [qs_rm_alias]\nat org.elasticsearch.index.snapshots.blobstore.BlobStoreIndexShardRepository.restore(BlobStoreIndexShardRepository.java:159)\nat org.elasticsearch.index.snapshots.IndexShardSnapshotAndRestoreService.restore(IndexShardSnapshotAndRestoreService.java:124)\n... 4 more\nCaused by: org.elasticsearch.index.snapshots.IndexShardRestoreFailedException: [qs_rm_3][0] Failed to recover index\nat org.elasticsearch.index.snapshots.blobstore.BlobStoreIndexShardRepository$RestoreContext.restore(BlobStoreIndexShardRepository.java:840)\nat org.elasticsearch.index.snapshots.blobstore.BlobStoreIndexShardRepository.restore(BlobStoreIndexShardRepository.java:156)\n... 5 more\nCaused by: java.io.FileNotFoundException: C:\\TestResults\\QuickSearch\\data\\elasticsearch\\nodes\\0\\indices\\qs_rm_3\\0\\index_8.si (Access is denied)\nat java.io.FileOutputStream.open(Native Method)\nat java.io.FileOutputStream.(Unknown Source)\nat java.io.FileOutputStream.(Unknown Source)\nat org.apache.lucene.store.FSDirectory$FSIndexOutput.(FSDirectory.java:389)\nat org.apache.lucene.store.FSDirectory.createOutput(FSDirectory.java:282)\nat org.apache.lucene.store.RateLimitedFSDirectory.createOutput(RateLimitedFSDirectory.java:40)\nat org.elasticsearch.index.store.DistributorDirectory.createOutput(DistributorDirectory.java:118)\nat org.apache.lucene.store.FilterDirectory.createOutput(FilterDirectory.java:69)\nat org.elasticsearch.index.store.Store.createVerifyingOutput(Store.java:298)\nat org.elasticsearch.index.snapshots.blobstore.BlobStoreIndexShardRepository$RestoreContext.restoreFile(BlobStoreIndexShardRepository.java:887)\nat org.elasticsearch.index.snapshots.blobstore.BlobStoreIndexShardRepository$RestoreContext.restore(BlobStoreIndexShardRepository.java:830)\n... 6 more_\n","closed_by":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"performed_via_github_app":null}