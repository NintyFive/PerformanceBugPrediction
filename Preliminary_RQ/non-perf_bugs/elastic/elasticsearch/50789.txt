{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/50789","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50789/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50789/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50789/events","html_url":"https://github.com/elastic/elasticsearch/issues/50789","id":547423397,"node_id":"MDU6SXNzdWU1NDc0MjMzOTc=","number":50789,"title":"beats/logstash doesn't consistently name ES index for ILM default ","user":{"login":"sgreszcz","id":22910494,"node_id":"MDQ6VXNlcjIyOTEwNDk0","avatar_url":"https://avatars0.githubusercontent.com/u/22910494?v=4","gravatar_id":"","url":"https://api.github.com/users/sgreszcz","html_url":"https://github.com/sgreszcz","followers_url":"https://api.github.com/users/sgreszcz/followers","following_url":"https://api.github.com/users/sgreszcz/following{/other_user}","gists_url":"https://api.github.com/users/sgreszcz/gists{/gist_id}","starred_url":"https://api.github.com/users/sgreszcz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgreszcz/subscriptions","organizations_url":"https://api.github.com/users/sgreszcz/orgs","repos_url":"https://api.github.com/users/sgreszcz/repos","events_url":"https://api.github.com/users/sgreszcz/events{/privacy}","received_events_url":"https://api.github.com/users/sgreszcz/received_events","type":"User","site_admin":false},"labels":[{"id":912828538,"node_id":"MDU6TGFiZWw5MTI4Mjg1Mzg=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/ILM+SLM","name":":Core/Features/ILM+SLM","color":"0e8a16","default":false,"description":"Index and Snapshot lifecycle management"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2020-01-09T11:34:18Z","updated_at":"2020-01-16T11:27:32Z","closed_at":"2020-01-14T22:04:45Z","author_association":"NONE","active_lock_reason":null,"body":"<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`): \r\n\r\n7.5.1 (elastic.co cloud), problem happened with previous 7 versions too.\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nAccording to the documentation, the default beat/logstash index pattern should be applied to the index name to support ILM.  https://www.elastic.co/guide/en/beats/metricbeat/current/ilm.html#setup-ilm-pattern-option\r\n\r\n`%{now/d}-000001`\r\n\r\nThis is not happening consistently, and indices are being named with the \"filebeat-7.5.1-\" without the extension.  It seems to be happening randomly.  You can see in the screenshot below that some of them are named properly and some of them are not.  The elastic output from beats and logstash are set as default and there are no changes to the index name.\r\n\r\n![Screenshot 2020-01-09 at 10 58 12](https://user-images.githubusercontent.com/22910494/72063705-31e78980-32d2-11ea-9d38-ef56f18611cb.png)\r\n\r\n**Steps to reproduce**:\r\n\r\n1. Stop all beats or logstash shippers\r\n2. Delete indexes in elasticsearch\r\n3. Start up the beats/logstash\r\n4. Sometimes they name the new index with the proper ILM extension (%{now/d}-000001), and sometimes only with just the prefix (shipper-version-).\r\n\r\n**Provide logs (if relevant)**:\r\n\r\nIf someone can tell me how from the cloud instance, I can attach them.\r\n\r\n","closed_by":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"performed_via_github_app":null}