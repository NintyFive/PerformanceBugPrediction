{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/15353","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15353/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15353/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15353/events","html_url":"https://github.com/elastic/elasticsearch/issues/15353","id":121373269,"node_id":"MDU6SXNzdWUxMjEzNzMyNjk=","number":15353,"title":"analyzer multiple word synonym contraction problem","user":{"login":"heyalexchoi","id":4961047,"node_id":"MDQ6VXNlcjQ5NjEwNDc=","avatar_url":"https://avatars1.githubusercontent.com/u/4961047?v=4","gravatar_id":"","url":"https://api.github.com/users/heyalexchoi","html_url":"https://github.com/heyalexchoi","followers_url":"https://api.github.com/users/heyalexchoi/followers","following_url":"https://api.github.com/users/heyalexchoi/following{/other_user}","gists_url":"https://api.github.com/users/heyalexchoi/gists{/gist_id}","starred_url":"https://api.github.com/users/heyalexchoi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyalexchoi/subscriptions","organizations_url":"https://api.github.com/users/heyalexchoi/orgs","repos_url":"https://api.github.com/users/heyalexchoi/repos","events_url":"https://api.github.com/users/heyalexchoi/events{/privacy}","received_events_url":"https://api.github.com/users/heyalexchoi/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-12-10T00:25:53Z","updated_at":"2015-12-10T21:21:37Z","closed_at":"2015-12-10T21:21:37Z","author_association":"NONE","active_lock_reason":null,"body":"I have an analyzer for lowercasing and contracting synonyms that is reported as such:\n\n```\n\"services_analyzer\": {\n              \"filter\": [\n                \"lowercase\",\n                \"services_synonym_filter\",\n                \"length_filter\",\n                \"super_stopwords_filter\"\n              ],\n              \"type\": \"custom\",\n              \"tokenizer\": \"comma\"\n            }\n\n\"services_synonym_filter\": {\n              \"type\": \"synonym\",\n              \"synonyms\": [\n                \"web development,web sites,coding => web\",\n                \"search engine optimization => seo\",\n                \"search engine marketing => sem\",\n                \"ppc advertising, click advertising, pay per click => ppc\"\n              ]\n            }\n\n\"length_filter\": {\n              \"type\": \"length\",\n              \"min\": \"2\"\n            }\n\n\"super_stopwords_filter\": {\n              \"type\": \"stop\",\n              \"stopwords\": [\n                \"my\",\n                \"new\",\n                \"get\",\n                \"like\",\n                \"i\",\n                \"a\",\n                \"an\",\n                \"and\",\n                \"are\",\n                \"as\",\n                \"at\",\n                \"be\",\n                \"but\",\n                \"by\",\n                \"for\",\n                \"if\",\n                \"in\",\n                \"into\",\n                \"is\",\n                \"it\",\n                \"no\",\n                \"not\",\n                \"of\",\n                \"on\",\n                \"or\",\n                \"such\",\n                \"that\",\n                \"the\",\n                \"their\",\n                \"then\",\n                \"there\",\n                \"these\",\n                \"they\",\n                \"this\",\n                \"to\",\n                \"was\",\n                \"will\",\n                \"with\",\n                \"c\",\n                \"llc\",\n                \"inc\",\n                \"c\"\n              ]\n            }\n\n\"tokenizer\": {\n            \"ac_edge_ngram\": {\n              \"min_gram\": \"1\",\n              \"side\": \"front\",\n              \"type\": \"edgeNGram\",\n              \"max_gram\": \"50\"\n            },\n            \"comma\": {\n              \"pattern\": \",\",\n              \"type\": \"pattern\"\n            }\n          }\n        }\n\n```\n\naccording to the documentation, the analyzer should contract the synonyms\n\n```\nweb development \nweb sites \ncoding \n```\n\ninto token:\n\n```\nweb\n```\n\nhowever, when I test the analyzer through the analyzer api:\n`localhost:9200/companies/_analyze?analyzer=services_analyzer&text=web development`\n\n```\n{\n  \"tokens\": [\n    {\n      \"token\": \"web development\",\n      \"start_offset\": 0,\n      \"end_offset\": 15,\n      \"type\": \"word\",\n      \"position\": 0\n    }\n  ]\n}\n```\n\n```\nlocalhost:9200/companies/_analyze?analyzer=services_analyzer&text=web sites\n```\n\n```\n{\n  \"tokens\": [\n    {\n      \"token\": \"web sites\",\n      \"start_offset\": 0,\n      \"end_offset\": 9,\n      \"type\": \"word\",\n      \"position\": 0\n    }\n  ]\n}\n```\n\n```\nlocalhost:9200/companies/_analyze?analyzer=services_analyzer&text=coding\n```\n\n```\n{\n  \"tokens\": [\n    {\n      \"token\": \"web\",\n      \"start_offset\": 0,\n      \"end_offset\": 6,\n      \"type\": \"SYNONYM\",\n      \"position\": 0\n    }\n  ]\n}\n```\n\nonly one synonym is recognized, and contracted\n\nI've spent a lot of time reading the documentation and I feel like I'm doing what I'm supposed to do, which is why I'm reporting this as an issue.\n\nAny help is greatly appreciated!\n:)\n","closed_by":{"login":"heyalexchoi","id":4961047,"node_id":"MDQ6VXNlcjQ5NjEwNDc=","avatar_url":"https://avatars1.githubusercontent.com/u/4961047?v=4","gravatar_id":"","url":"https://api.github.com/users/heyalexchoi","html_url":"https://github.com/heyalexchoi","followers_url":"https://api.github.com/users/heyalexchoi/followers","following_url":"https://api.github.com/users/heyalexchoi/following{/other_user}","gists_url":"https://api.github.com/users/heyalexchoi/gists{/gist_id}","starred_url":"https://api.github.com/users/heyalexchoi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyalexchoi/subscriptions","organizations_url":"https://api.github.com/users/heyalexchoi/orgs","repos_url":"https://api.github.com/users/heyalexchoi/repos","events_url":"https://api.github.com/users/heyalexchoi/events{/privacy}","received_events_url":"https://api.github.com/users/heyalexchoi/received_events","type":"User","site_admin":false},"performed_via_github_app":null}