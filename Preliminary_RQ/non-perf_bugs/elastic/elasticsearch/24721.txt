{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/24721","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24721/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24721/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24721/events","html_url":"https://github.com/elastic/elasticsearch/issues/24721","id":229152901,"node_id":"MDU6SXNzdWUyMjkxNTI5MDE=","number":24721,"title":"es 5.3.1 client crashes ","user":{"login":"ninadvps","id":19671720,"node_id":"MDQ6VXNlcjE5NjcxNzIw","avatar_url":"https://avatars3.githubusercontent.com/u/19671720?v=4","gravatar_id":"","url":"https://api.github.com/users/ninadvps","html_url":"https://github.com/ninadvps","followers_url":"https://api.github.com/users/ninadvps/followers","following_url":"https://api.github.com/users/ninadvps/following{/other_user}","gists_url":"https://api.github.com/users/ninadvps/gists{/gist_id}","starred_url":"https://api.github.com/users/ninadvps/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ninadvps/subscriptions","organizations_url":"https://api.github.com/users/ninadvps/orgs","repos_url":"https://api.github.com/users/ninadvps/repos","events_url":"https://api.github.com/users/ninadvps/events{/privacy}","received_events_url":"https://api.github.com/users/ninadvps/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2017-05-16T20:04:51Z","updated_at":"2017-05-25T21:33:57Z","closed_at":"2017-05-16T20:07:07Z","author_association":"NONE","active_lock_reason":null,"body":"This issue seems like have been discussed before , but the resolution doesnt work for us.\r\nhttps://github.com/elastic/elasticsearch/issues/22406\r\n\r\nIve tried the above options with es 5.3.1 ... Im still getting the same issue, when I run our test cases 6 times, every 6th time I get the same error, its a single node cluster with the below settings...\r\ncluster.name: test\r\nnode.name: test-0\r\nnode.master: true\r\nnode.data: true\r\npath.data: /tmp/elasticsearch\r\npath.logs: /tmp/eslogs\r\n\r\nIf I increase the java heap size it runs for a few more times and still crashes eventually...\r\n\r\n12:49:31.022 INFO [PluginsService]: no modules loaded\r\n12:49:31.025 INFO [PluginsService]: loaded plugin [org.elasticsearch.index.reindex.ReindexPlugin]\r\n12:49:31.025 INFO [PluginsService]: loaded plugin [org.elasticsearch.percolator.PercolatorPlugin]\r\n12:49:31.025 INFO [PluginsService]: loaded plugin [org.elasticsearch.script.mustache.MustachePlugin]\r\n12:49:31.025 INFO [PluginsService]: loaded plugin [org.elasticsearch.transport.Netty3Plugin]\r\n12:49:31.025 INFO [PluginsService]: loaded plugin [org.elasticsearch.transport.Netty4Plugin]\r\n12:49:34.874 ERROR [Netty4Utils]: fatal error on the network layer\r\nat org.elasticsearch.transport.netty4.Netty4Utils.maybeDie(Netty4Utils.java:140)\r\nat org.elasticsearch.transport.netty4.Netty4MessageChannelHandler.exceptionCaught(Netty4MessageChannelHandler.java:83)\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:286)\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:265)\r\nat io.netty.channel.AbstractChannelHandlerContext.fireExceptionCaught(AbstractChannelHandlerContext.java:257)\r\nat io.netty.channel.ChannelInboundHandlerAdapter.exceptionCaught(ChannelInboundHandlerAdapter.java:131)\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:286)\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:265)\r\nat io.netty.channel.AbstractChannelHandlerContext.fireExceptionCaught(AbstractChannelHandlerContext.java:257)\r\nat io.netty.channel.DefaultChannelPipeline$HeadContext.exceptionCaught(DefaultChannelPipeline.java:1301)\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:286)\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:265)\r\nat io.netty.channel.DefaultChannelPipeline.fireExceptionCaught(DefaultChannelPipeline.java:914)\r\nat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.handleReadException(AbstractNioByteChannel.java:99)\r\nat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:140)\r\nat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:642)\r\nat io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:527)\r\nat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:481)\r\nat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:441)\r\nat io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)\r\nat java.lang.Thread.run(Thread.java:745)\r\nException in thread \"Thread-26\" java.lang.OutOfMemoryError: Java heap space\r\nat io.netty.buffer.PoolArena$HeapArena.newChunk(PoolArena.java:656)\r\nat io.netty.buffer.PoolArena.allocateNormal(PoolArena.java:237)\r\nat io.netty.buffer.PoolArena.allocate(PoolArena.java:221)\r\nat io.netty.buffer.PoolArena.allocate(PoolArena.java:141)\r\nat io.netty.buffer.PooledByteBufAllocator.newHeapBuffer(PooledByteBufAllocator.java:272)\r\nat io.netty.buffer.AbstractByteBufAllocator.heapBuffer(AbstractByteBufAllocator.java:160)\r\nat io.netty.buffer.AbstractByteBufAllocator.heapBuffer(AbstractByteBufAllocator.java:151)\r\nat io.netty.buffer.AbstractByteBufAllocator.ioBuffer(AbstractByteBufAllocator.java:133)\r\nat io.netty.channel.DefaultMaxMessagesRecvByteBufAllocator$MaxMessageHandle.allocate(DefaultMaxMessagesRecvByteBufAllocator.java:73)\r\nat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:117)\r\nat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:642)\r\nat io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:527)\r\nat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:481)\r\nat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:441)\r\nat io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)\r\nat java.lang.Thread.run(Thread.java:745)\r\n12:49:34.938 WARN [Netty4Transport]: exception caught on transport layer [[id: 0x2e1e1733, L:/127.0.0.1:50952 - R:/127.0.0.1:9300]], closing connection\r\norg.elasticsearch.ElasticsearchException: java.lang.OutOfMemoryError: Java heap space\r\nat org.elasticsearch.transport.netty4.Netty4Transport.exceptionCaught(Netty4Transport.java:321) [transport-netty4-client-5.3.1.jar:5.3.1]\r\nat org.elasticsearch.transport.netty4.Netty4MessageChannelHandler.exceptionCaught(Netty4MessageChannelHandler.java:84) [transport-netty4-client-5.3.1.jar:5.3.1]\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:286) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:265) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.AbstractChannelHandlerContext.fireExceptionCaught(AbstractChannelHandlerContext.java:257) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.ChannelInboundHandlerAdapter.exceptionCaught(ChannelInboundHandlerAdapter.java:131) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:286) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:265) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.AbstractChannelHandlerContext.fireExceptionCaught(AbstractChannelHandlerContext.java:257) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.DefaultChannelPipeline$HeadContext.exceptionCaught(DefaultChannelPipeline.java:1301) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:286) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:265) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.DefaultChannelPipeline.fireExceptionCaught(DefaultChannelPipeline.java:914) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.handleReadException(AbstractNioByteChannel.java:99) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:140) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:642) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:527) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:481) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:441) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) [netty-common-4.1.7.Final.jar:4.1.7.Final]\r\nat java.lang.Thread.run(Thread.java:745) [na:1.8.0_91]\r\nCaused by: java.lang.OutOfMemoryError: Java heap space\r\nat io.netty.buffer.PoolArena$HeapArena.newChunk(PoolArena.java:656) ~[netty-buffer-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.buffer.PoolArena.allocateNormal(PoolArena.java:237) ~[netty-buffer-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.buffer.PoolArena.allocate(PoolArena.java:221) ~[netty-buffer-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.buffer.PoolArena.allocate(PoolArena.java:141) ~[netty-buffer-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.buffer.PooledByteBufAllocator.newHeapBuffer(PooledByteBufAllocator.java:272) ~[netty-buffer-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.buffer.AbstractByteBufAllocator.heapBuffer(AbstractByteBufAllocator.java:160) ~[netty-buffer-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.buffer.AbstractByteBufAllocator.heapBuffer(AbstractByteBufAllocator.java:151) ~[netty-buffer-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.buffer.AbstractByteBufAllocator.ioBuffer(AbstractByteBufAllocator.java:133) ~[netty-buffer-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.DefaultMaxMessagesRecvByteBufAllocator$MaxMessageHandle.allocate(DefaultMaxMessagesRecvByteBufAllocator.java:73) ~[netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:117) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\n... 6 common frames omitted\r\n12:49:35.433 ERROR [Netty4Utils]: fatal error on the network layer\r\nat org.elasticsearch.transport.netty4.Netty4Utils.maybeDie(Netty4Utils.java:140)\r\nat org.elasticsearch.transport.netty4.Netty4MessageChannelHandler.exceptionCaught(Netty4MessageChannelHandler.java:83)\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:286)\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:265)\r\nat io.netty.channel.AbstractChannelHandlerContext.fireExceptionCaught(AbstractChannelHandlerContext.java:257)\r\nat io.netty.channel.ChannelInboundHandlerAdapter.exceptionCaught(ChannelInboundHandlerAdapter.java:131)\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:286)\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:265)\r\nat io.netty.channel.AbstractChannelHandlerContext.fireExceptionCaught(AbstractChannelHandlerContext.java:257)\r\nat io.netty.channel.DefaultChannelPipeline$HeadContext.exceptionCaught(DefaultChannelPipeline.java:1301)\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:286)\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:265)\r\nat io.netty.channel.DefaultChannelPipeline.fireExceptionCaught(DefaultChannelPipeline.java:914)\r\nat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.handleReadException(AbstractNioByteChannel.java:99)\r\nat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:140)\r\nat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:642)\r\nat io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:527)\r\nat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:481)\r\nat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:441)\r\nat io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)\r\nat java.lang.Thread.run(Thread.java:745)\r\nException in thread \"Thread-27\" java.lang.OutOfMemoryError: Java heap space\r\nat io.netty.buffer.PoolArena$HeapArena.newChunk(PoolArena.java:656)\r\nat io.netty.buffer.PoolArena.allocateNormal(PoolArena.java:237)\r\nat io.netty.buffer.PoolArena.allocate(PoolArena.java:221)\r\nat io.netty.buffer.PoolArena.allocate(PoolArena.java:141)\r\nat io.netty.buffer.PooledByteBufAllocator.newHeapBuffer(PooledByteBufAllocator.java:272)\r\nat io.netty.buffer.AbstractByteBufAllocator.heapBuffer(AbstractByteBufAllocator.java:160)\r\nat io.netty.buffer.AbstractByteBufAllocator.heapBuffer(AbstractByteBufAllocator.java:151)\r\nat io.netty.buffer.AbstractByteBufAllocator.ioBuffer(AbstractByteBufAllocator.java:133)\r\nat io.netty.channel.DefaultMaxMessagesRecvByteBufAllocator$MaxMessageHandle.allocate(DefaultMaxMessagesRecvByteBufAllocator.java:73)\r\nat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:117)\r\nat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:642)\r\nat io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:527)\r\nat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:481)\r\nat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:441)\r\nat io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)\r\nat java.lang.Thread.run(Thread.java:745)\r\n12:49:35.434 WARN [Netty4Transport]: exception caught on transport layer [[id: 0x2e1e1733, L:/127.0.0.1:50952 - R:/127.0.0.1:9300]], closing connection\r\norg.elasticsearch.ElasticsearchException: java.lang.OutOfMemoryError: Java heap space\r\nat org.elasticsearch.transport.netty4.Netty4Transport.exceptionCaught(Netty4Transport.java:321) [transport-netty4-client-5.3.1.jar:5.3.1]\r\nat org.elasticsearch.transport.netty4.Netty4MessageChannelHandler.exceptionCaught(Netty4MessageChannelHandler.java:84) [transport-netty4-client-5.3.1.jar:5.3.1]\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:286) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:265) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.AbstractChannelHandlerContext.fireExceptionCaught(AbstractChannelHandlerContext.java:257) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.ChannelInboundHandlerAdapter.exceptionCaught(ChannelInboundHandlerAdapter.java:131) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:286) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:265) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.AbstractChannelHandlerContext.fireExceptionCaught(AbstractChannelHandlerContext.java:257) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.DefaultChannelPipeline$HeadContext.exceptionCaught(DefaultChannelPipeline.java:1301) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:286) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:265) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.DefaultChannelPipeline.fireExceptionCaught(DefaultChannelPipeline.java:914) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.handleReadException(AbstractNioByteChannel.java:99) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:140) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:642) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:527) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:481) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:441) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) [netty-common-4.1.7.Final.jar:4.1.7.Final]\r\nat java.lang.Thread.run(Thread.java:745) [na:1.8.0_91]\r\nCaused by: java.lang.OutOfMemoryError: Java heap space\r\nat io.netty.buffer.PoolArena$HeapArena.newChunk(PoolArena.java:656) ~[netty-buffer-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.buffer.PoolArena.allocateNormal(PoolArena.java:237) ~[netty-buffer-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.buffer.PoolArena.allocate(PoolArena.java:221) ~[netty-buffer-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.buffer.PoolArena.allocate(PoolArena.java:141) ~[netty-buffer-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.buffer.PooledByteBufAllocator.newHeapBuffer(PooledByteBufAllocator.java:272) ~[netty-buffer-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.buffer.AbstractByteBufAllocator.heapBuffer(AbstractByteBufAllocator.java:160) ~[netty-buffer-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.buffer.AbstractByteBufAllocator.heapBuffer(AbstractByteBufAllocator.java:151) ~[netty-buffer-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.buffer.AbstractByteBufAllocator.ioBuffer(AbstractByteBufAllocator.java:133) ~[netty-buffer-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.DefaultMaxMessagesRecvByteBufAllocator$MaxMessageHandle.allocate(DefaultMaxMessagesRecvByteBufAllocator.java:73) ~[netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:117) [netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\n... 6 common frames omitted\r\n12:49:35.446 INFO [TransportClientNodesService]: failed to connect to node [{#transport#-1}{ZszR19SXT763_lMtxtRvcg}{127.0.0.1}{127.0.0.1:9300}], removed from nodes list\r\norg.elasticsearch.transport.ConnectTransportException: [][127.0.0.1:9300] general node connection failure\r\nat org.elasticsearch.transport.TcpTransport.openConnection(TcpTransport.java:519) ~[elasticsearch-5.3.1.jar:5.3.1]\r\nat org.elasticsearch.transport.TcpTransport.connectToNode(TcpTransport.java:460) ~[elasticsearch-5.3.1.jar:5.3.1]\r\nat org.elasticsearch.transport.TransportService.connectToNode(TransportService.java:314) ~[elasticsearch-5.3.1.jar:5.3.1]\r\nat org.elasticsearch.client.transport.TransportClientNodesService$SimpleNodeSampler.doSample(TransportClientNodesService.java:408) ~[elasticsearch-5.3.1.jar:5.3.1]\r\nat org.elasticsearch.client.transport.TransportClientNodesService$NodeSampler.sample(TransportClientNodesService.java:354) [elasticsearch-5.3.1.jar:5.3.1]\r\nat org.elasticsearch.client.transport.TransportClientNodesService.addTransportAddresses(TransportClientNodesService.java:195) [elasticsearch-5.3.1.jar:5.3.1]\r\nat org.elasticsearch.client.transport.TransportClient.addTransportAddress(TransportClient.java:322) [elasticsearch-5.3.1.jar:5.3.1]\r\nat vps.core.elastic.ElasticClient$.$anonfun$connect$1(ElasticClient.scala:225) [classes/:na]\r\nat scala.collection.Iterator.foreach(Iterator.scala:929) ~[scala-library-2.12.1.jar:1.0.0-M1]\r\nat scala.collection.Iterator.foreach$(Iterator.scala:929) ~[scala-library-2.12.1.jar:1.0.0-M1]\r\nat scala.collection.AbstractIterator.foreach(Iterator.scala:1406) ~[scala-library-2.12.1.jar:1.0.0-M1]\r\nat scala.collection.IterableLike.foreach(IterableLike.scala:71) ~[scala-library-2.12.1.jar:1.0.0-M1]\r\nat scala.collection.IterableLike.foreach$(IterableLike.scala:70) ~[scala-library-2.12.1.jar:1.0.0-M1]\r\nat scala.collection.AbstractIterable.foreach(Iterable.scala:54) ~[scala-library-2.12.1.jar:1.0.0-M1]\r\nat vps.core.elastic.ElasticClient$.connect(ElasticClient.scala:224) [classes/:na]\r\nat vps.core.elastic.ElasticManagement.connect(ElasticManagement.scala:35) ~[classes/:na]\r\nat vps.core.elastic.ElasticManagement.(ElasticManagement.scala:19) ~[classes/:na]\r\nat vps.core.elastic.ElasticManagement$.apply(ElasticManagement.scala:307) ~[classes/:na]\r\nat vps.core.setup.TestCasePreSetup$.runPreSetup(TestCasePreSetup.scala:11) ~[test-classes/:na]\r\nat vps.core.setup.TestCasePreSetup.runPreSetup(TestCasePreSetup.scala) ~[test-classes/:na]\r\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_91]\r\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_91]\r\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_91]\r\nat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_91]\r\nat $f272e0d5d38461cd613e$$anonfun$core$5$$anonfun$apply$3.apply(build.sbt:61) ~[na:na]\r\nat $f272e0d5d38461cd613e$$anonfun$core$5$$anonfun$apply$3.apply(build.sbt:60) ~[na:na]\r\nat sbt.Tests$$anonfun$sbt$Tests$$partApp$1$1$$anonfun$apply$1.apply$mcV$sp(Tests.scala:174) ~[actions-0.13.13.jar:0.13.13]\r\nat sbt.Tests$$anonfun$sbt$Tests$$fj$1$1.apply(Tests.scala:173) ~[actions-0.13.13.jar:0.13.13]\r\nat sbt.Tests$$anonfun$sbt$Tests$$fj$1$1.apply(Tests.scala:173) ~[actions-0.13.13.jar:0.13.13]\r\nat sbt.std.TaskExtra$$anon$1$$anonfun$fork$1$$anonfun$apply$1.apply(TaskExtra.scala:89) ~[task-system-0.13.13.jar:0.13.13]\r\nat sbt.std.Transform$$anon$3$$anonfun$apply$2.apply(System.scala:44) ~[task-system-0.13.13.jar:0.13.13]\r\nat sbt.std.Transform$$anon$3$$anonfun$apply$2.apply(System.scala:44) ~[task-system-0.13.13.jar:0.13.13]\r\nat sbt.std.Transform$$anon$4.work(System.scala:63) ~[task-system-0.13.13.jar:0.13.13]\r\nat sbt.Execute$$anonfun$submit$1$$anonfun$apply$1.apply(Execute.scala:228) ~[tasks-0.13.13.jar:0.13.13]\r\nat sbt.Execute$$anonfun$submit$1$$anonfun$apply$1.apply(Execute.scala:228) ~[tasks-0.13.13.jar:0.13.13]\r\nat sbt.ErrorHandling$.wideConvert(ErrorHandling.scala:17) ~[control-0.13.13.jar:0.13.13]\r\nat sbt.Execute.work(Execute.scala:237) ~[tasks-0.13.13.jar:0.13.13]\r\nat sbt.Execute$$anonfun$submit$1.apply(Execute.scala:228) ~[tasks-0.13.13.jar:0.13.13]\r\nat sbt.Execute$$anonfun$submit$1.apply(Execute.scala:228) ~[tasks-0.13.13.jar:0.13.13]\r\nat sbt.ConcurrentRestrictions$$anon$4$$anonfun$1.apply(ConcurrentRestrictions.scala:159) ~[tasks-0.13.13.jar:0.13.13]\r\nat sbt.CompletionService$$anon$2.call(CompletionService.scala:28) ~[tasks-0.13.13.jar:0.13.13]\r\nat java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[na:1.8.0_91]\r\nat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0_91]\r\nat java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[na:1.8.0_91]\r\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_91]\r\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_91]\r\nat java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_91]\r\nCaused by: java.lang.IllegalStateException: handshake failed\r\nat org.elasticsearch.transport.TcpTransport.executeHandshake(TcpTransport.java:1568) ~[elasticsearch-5.3.1.jar:5.3.1]\r\nat org.elasticsearch.transport.TcpTransport.openConnection(TcpTransport.java:502) ~[elasticsearch-5.3.1.jar:5.3.1]\r\n... 46 common frames omitted\r\nCaused by: org.elasticsearch.transport.TransportException: connection reset\r\nat org.elasticsearch.transport.TcpTransport.onChannelClosed(TcpTransport.java:1610) ~[elasticsearch-5.3.1.jar:5.3.1]\r\nat org.elasticsearch.transport.netty4.Netty4Transport.access$100(Netty4Transport.java:94) ~[transport-netty4-client-5.3.1.jar:5.3.1]\r\nat org.elasticsearch.transport.netty4.Netty4Transport$ChannelCloseListener.operationComplete(Netty4Transport.java:401) ~[transport-netty4-client-5.3.1.jar:5.3.1]\r\nat org.elasticsearch.transport.netty4.Netty4Transport$ChannelCloseListener.operationComplete(Netty4Transport.java:391) ~[transport-netty4-client-5.3.1.jar:5.3.1]\r\nat io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:507) ~[netty-common-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:481) ~[netty-common-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:420) ~[netty-common-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:104) ~[netty-common-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.DefaultChannelPromise.trySuccess(DefaultChannelPromise.java:82) ~[netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.AbstractChannel$CloseFuture.setClosed(AbstractChannel.java:1058) ~[netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.AbstractChannel$AbstractUnsafe.doClose0(AbstractChannel.java:686) ~[netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.AbstractChannel$AbstractUnsafe.close(AbstractChannel.java:664) ~[netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.AbstractChannel$AbstractUnsafe.close(AbstractChannel.java:607) ~[netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.DefaultChannelPipeline$HeadContext.close(DefaultChannelPipeline.java:1276) ~[netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeClose(AbstractChannelHandlerContext.java:625) ~[netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.AbstractChannelHandlerContext.close(AbstractChannelHandlerContext.java:609) ~[netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.ChannelDuplexHandler.close(ChannelDuplexHandler.java:73) ~[netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.AbstractChannelHandlerContext.invokeClose(AbstractChannelHandlerContext.java:625) ~[netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.AbstractChannelHandlerContext.access$1100(AbstractChannelHandlerContext.java:38) ~[netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.AbstractChannelHandlerContext$13.run(AbstractChannelHandlerContext.java:614) ~[netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) ~[netty-common-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:403) ~[netty-common-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:445) ~[netty-transport-4.1.7.Final.jar:4.1.7.Final]\r\nat io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-common-4.1.7.Final.jar:4.1.7.Final]\r\n... 1 common frames omitted\r\n\r\nlast core/test:testOnly\r\n[warn] javaOptions will be ignored, fork is set to false\r\nNoNodeAvailableException[None of the configured nodes are available: [{#transport#-1}{ZszR19SXT763_lMtxtRvcg}{127.0.0.1}{127.0.0.1:9300}]]\r\nat org.elasticsearch.client.transport.TransportClientNodesService.ensureNodesAreAvailable(TransportClientNodesService.java:344)\r\nat org.elasticsearch.client.transport.TransportClientNodesService.execute(TransportClientNodesService.java:242)\r\nat org.elasticsearch.client.transport.TransportProxyClient.execute(TransportProxyClient.java:59)\r\nat org.elasticsearch.client.transport.TransportClient.doExecute(TransportClient.java:366)\r\nat org.elasticsearch.client.support.AbstractClient.execute(AbstractClient.java:404)\r\nat org.elasticsearch.client.support.AbstractClient$IndicesAdmin.execute(AbstractClient.java:1237)\r\nat org.elasticsearch.action.ActionRequestBuilder.execute(ActionRequestBuilder.java:80)\r\nat org.elasticsearch.action.ActionRequestBuilder.execute(ActionRequestBuilder.java:54)\r\nat vps.core.elastic.ElasticClient.indexExists(ElasticClient.scala:43)\r\nat vps.core.elastic.ElasticClient.mappingExists(ElasticClient.scala:37)\r\nat vps.core.elastic.ElasticManagement.$anonfun$schemaExists$1(ElasticManagement.scala:138)\r\nat scala.runtime.java8.JFunction1$mcZI$sp.apply(JFunction1$mcZI$sp.java:12)\r\nat scala.collection.Iterator.forall(Iterator.scala:941)\r\nat scala.collection.Iterator.forall$(Iterator.scala:939)\r\nat scala.collection.AbstractIterator.forall(Iterator.scala:1406)\r\nat scala.collection.IterableLike.forall(IterableLike.scala:74)\r\nat scala.collection.IterableLike.forall$(IterableLike.scala:73)\r\nat scala.collection.AbstractIterable.forall(Iterable.scala:54)\r\nat vps.core.elastic.ElasticManagement.schemaExists(ElasticManagement.scala:137)\r\nat vps.core.setup.TestCasePreSetup$.runPreSetup(TestCasePreSetup.scala:12)\r\nat vps.core.setup.TestCasePreSetup.runPreSetup(TestCasePreSetup.scala)\r\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\nat java.lang.reflect.Method.invoke(Method.java:498)\r\nat $f272e0d5d38461cd613e$$anonfun$core$5$$anonfun$apply$3.apply(build.sbt:61)\r\nat $f272e0d5d38461cd613e$$anonfun$core$5$$anonfun$apply$3.apply(build.sbt:60)\r\nat sbt.Tests$$anonfun$sbt$Tests$$partApp$1$1$$anonfun$apply$1.apply$mcV$sp(Tests.scala:174)\r\nat sbt.Tests$$anonfun$sbt$Tests$$fj$1$1.apply(Tests.scala:173)\r\nat sbt.Tests$$anonfun$sbt$Tests$$fj$1$1.apply(Tests.scala:173)\r\nat sbt.std.TaskExtra$$anon$1$$anonfun$fork$1$$anonfun$apply$1.apply(TaskExtra.scala:89)\r\nat sbt.std.Transform$$anon$3$$anonfun$apply$2.apply(System.scala:44)\r\nat sbt.std.Transform$$anon$3$$anonfun$apply$2.apply(System.scala:44)\r\nat sbt.std.Transform$$anon$4.work(System.scala:63)\r\nat sbt.Execute$$anonfun$submit$1$$anonfun$apply$1.apply(Execute.scala:228)\r\nat sbt.Execute$$anonfun$submit$1$$anonfun$apply$1.apply(Execute.scala:228)\r\nat sbt.ErrorHandling$.wideConvert(ErrorHandling.scala:17)\r\nat sbt.Execute.work(Execute.scala:237)\r\nat sbt.Execute$$anonfun$submit$1.apply(Execute.scala:228)\r\nat sbt.Execute$$anonfun$submit$1.apply(Execute.scala:228)\r\nat sbt.ConcurrentRestrictions$$anon$4$$anonfun$1.apply(ConcurrentRestrictions.scala:159)\r\nat sbt.CompletionService$$anon$2.call(CompletionService.scala:28)\r\nat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\nat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\nat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\nat java.lang.Thread.run(Thread.java:745)\r\n[error] (core/test:testOnly) java.lang.reflect.InvocationTargetException","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}