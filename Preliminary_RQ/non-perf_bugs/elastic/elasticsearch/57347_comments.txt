[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/636079701","html_url":"https://github.com/elastic/elasticsearch/issues/57347#issuecomment-636079701","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57347","id":636079701,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNjA3OTcwMQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-05-29T16:59:51Z","updated_at":"2020-05-29T16:59:51Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search (:Search/Analysis)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/636080154","html_url":"https://github.com/elastic/elasticsearch/issues/57347#issuecomment-636080154","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57347","id":636080154,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNjA4MDE1NA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2020-05-29T17:00:44Z","updated_at":"2020-05-29T17:00:44Z","author_association":"CONTRIBUTOR","body":"@markharwood, is this something you know about? I'm not 100% sure what we should do about this. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/651696782","html_url":"https://github.com/elastic/elasticsearch/issues/57347#issuecomment-651696782","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57347","id":651696782,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTY5Njc4Mg==","user":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"created_at":"2020-06-30T10:07:04Z","updated_at":"2020-06-30T10:09:36Z","author_association":"CONTRIBUTOR","body":"We have a formal syntax for the format of this field that is validated - when content is presented that is illegal I can think of two options.\r\nEither we:\r\nA) Relax any validation - a `lenient` flag in the mapping could silently ignore illegal annotation syntax or\r\nB) Allow clients to escape any original content that looks like an annotation but isn't e.g. we might ignore a `[` character if the client put a `\\` in front of the offending `[`\r\n\r\nNeither of these are great.\r\nA) means turning off all validation so things that are meant to be annotations will fail silently if there are formatting issues\r\nB) complicates the syntax, is probably some data preparation users are unwilling to do and gives us a backwards compatibility issue with any existing content that happens to contain our new choice for escape characters.\r\n\r\nI think the current system is the best one - prior to annotating, clients must cleanse the text of any characters that look like illegal markdown URLs. This could be as unobtrusive as inserting a space between any `](` characters or replacing `]` characters with the equivalent html character reference `&rbrack;` or whatever makes sense to your application.\r\nAt the end of the day something has to render the document and make sense of our annotations and any original text that might conflict with that markup - I don't think we should prescribe how this separation should be encoded.\r\n\r\nDo you have any thoughts on this? Otherwise I will close.\r\n\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/651720972","html_url":"https://github.com/elastic/elasticsearch/issues/57347#issuecomment-651720972","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57347","id":651720972,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTcyMDk3Mg==","user":{"login":"ls-pluriels","id":8858974,"node_id":"MDQ6VXNlcjg4NTg5NzQ=","avatar_url":"https://avatars3.githubusercontent.com/u/8858974?v=4","gravatar_id":"","url":"https://api.github.com/users/ls-pluriels","html_url":"https://github.com/ls-pluriels","followers_url":"https://api.github.com/users/ls-pluriels/followers","following_url":"https://api.github.com/users/ls-pluriels/following{/other_user}","gists_url":"https://api.github.com/users/ls-pluriels/gists{/gist_id}","starred_url":"https://api.github.com/users/ls-pluriels/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ls-pluriels/subscriptions","organizations_url":"https://api.github.com/users/ls-pluriels/orgs","repos_url":"https://api.github.com/users/ls-pluriels/repos","events_url":"https://api.github.com/users/ls-pluriels/events{/privacy}","received_events_url":"https://api.github.com/users/ls-pluriels/received_events","type":"User","site_admin":false},"created_at":"2020-06-30T10:58:45Z","updated_at":"2020-06-30T10:58:45Z","author_association":"NONE","body":"HI Mark, thank you for handling this request.\r\nI did implement the cleansing by inserting a space between any ]( that was the most obvious solution to preserve positions\r\n\r\nFrom my perspective, it was difficult to pinpoint the problem.\r\nI also noticed that there was an error because of the % char that was in the original text.\r\nSilently, non desired annotations were indexed without causing any error.\r\n\r\nMaybe I could at least add some warnings in the documentation ?\r\n\r\nI like your explanation :  prior to annotating, clients must cleanse the text of any characters that look like illegal markdown URLs.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/651743336","html_url":"https://github.com/elastic/elasticsearch/issues/57347#issuecomment-651743336","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57347","id":651743336,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTc0MzMzNg==","user":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"created_at":"2020-06-30T11:50:12Z","updated_at":"2020-06-30T11:50:12Z","author_association":"CONTRIBUTOR","body":">Maybe I could at least add some warnings in the documentation ?\r\n\r\nThe \"prior to annotating\" part of the advice makes it feel like it's more of an upstream concern e.g. something for an [NLP pipeline ](https://github.com/spinscale/elasticsearch-ingest-opennlp) to consider.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/651763994","html_url":"https://github.com/elastic/elasticsearch/issues/57347#issuecomment-651763994","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57347","id":651763994,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTc2Mzk5NA==","user":{"login":"ls-pluriels","id":8858974,"node_id":"MDQ6VXNlcjg4NTg5NzQ=","avatar_url":"https://avatars3.githubusercontent.com/u/8858974?v=4","gravatar_id":"","url":"https://api.github.com/users/ls-pluriels","html_url":"https://github.com/ls-pluriels","followers_url":"https://api.github.com/users/ls-pluriels/followers","following_url":"https://api.github.com/users/ls-pluriels/following{/other_user}","gists_url":"https://api.github.com/users/ls-pluriels/gists{/gist_id}","starred_url":"https://api.github.com/users/ls-pluriels/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ls-pluriels/subscriptions","organizations_url":"https://api.github.com/users/ls-pluriels/orgs","repos_url":"https://api.github.com/users/ls-pluriels/repos","events_url":"https://api.github.com/users/ls-pluriels/events{/privacy}","received_events_url":"https://api.github.com/users/ls-pluriels/received_events","type":"User","site_admin":false},"created_at":"2020-06-30T12:37:51Z","updated_at":"2020-06-30T12:37:51Z","author_association":"NONE","body":"After reading the document once more, it is really straight forward. I will perhaps write a blog post on our use case and highlight what may happen.\r\n\r\nThank you\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/651769938","html_url":"https://github.com/elastic/elasticsearch/issues/57347#issuecomment-651769938","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57347","id":651769938,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTc2OTkzOA==","user":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"created_at":"2020-06-30T12:50:25Z","updated_at":"2020-06-30T12:50:25Z","author_association":"CONTRIBUTOR","body":">I will perhaps write a blog post on our use case and highlight what may happen.\r\n\r\nSounds great. I'd love to see that. Thank *you*.","performed_via_github_app":null}]