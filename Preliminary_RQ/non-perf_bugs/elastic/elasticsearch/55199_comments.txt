[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/613827216","html_url":"https://github.com/elastic/elasticsearch/issues/55199#issuecomment-613827216","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55199","id":613827216,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzgyNzIxNg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-04-15T05:37:04Z","updated_at":"2020-04-15T05:37:04Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features (:Core/Features/ILM+SLM)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/614216371","html_url":"https://github.com/elastic/elasticsearch/issues/55199#issuecomment-614216371","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55199","id":614216371,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNDIxNjM3MQ==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2020-04-15T18:50:09Z","updated_at":"2020-04-15T18:50:09Z","author_association":"MEMBER","body":"> We are not correctly using the cluster state observer. Instead of using a predicate for the cluster state we want (without snapshots in progress), we keep re-adding it. This means the timeout only comes into play when there are no cluster state updates. With cluster state update batching, we can get into some strange situations here where back to back snapshots result in the observer never executing and being re-added forever.\r\n\r\nWhen originally developing this, I was not able to get the observer to work correctly (which is why it is re-added), for some reason it would only check the very next state for the predicate, and ignore the observer otherwise. It would indeed be nice to rewrite where the predicate actually works, but I'd need to investigate why it was not working with the predicate previously.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/683706947","html_url":"https://github.com/elastic/elasticsearch/issues/55199#issuecomment-683706947","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55199","id":683706947,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzcwNjk0Nw==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2020-08-31T10:51:50Z","updated_at":"2020-08-31T10:51:50Z","author_association":"MEMBER","body":"I'm closing this, with fully concurrent snapshot operations in 7.9+ this is not an issue any longer.\r\nWe should just progress with https://github.com/elastic/elasticsearch/issues/59655 IMO to remove all the complicated logic that this issue revolves around eventually to speed up and simplify SLM :)","performed_via_github_app":null}]