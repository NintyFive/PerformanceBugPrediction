{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/2980","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2980/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2980/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2980/events","html_url":"https://github.com/elastic/elasticsearch/issues/2980","id":13927650,"node_id":"MDU6SXNzdWUxMzkyNzY1MA==","number":2980,"title":"Failed to parse query with a slash after a 0.90 upgrade","user":{"login":"sgruhier","id":3385,"node_id":"MDQ6VXNlcjMzODU=","avatar_url":"https://avatars2.githubusercontent.com/u/3385?v=4","gravatar_id":"","url":"https://api.github.com/users/sgruhier","html_url":"https://github.com/sgruhier","followers_url":"https://api.github.com/users/sgruhier/followers","following_url":"https://api.github.com/users/sgruhier/following{/other_user}","gists_url":"https://api.github.com/users/sgruhier/gists{/gist_id}","starred_url":"https://api.github.com/users/sgruhier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgruhier/subscriptions","organizations_url":"https://api.github.com/users/sgruhier/orgs","repos_url":"https://api.github.com/users/sgruhier/repos","events_url":"https://api.github.com/users/sgruhier/events{/privacy}","received_events_url":"https://api.github.com/users/sgruhier/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2013-05-03T09:33:42Z","updated_at":"2014-07-17T18:02:27Z","closed_at":"2013-05-03T12:47:32Z","author_association":"NONE","active_lock_reason":null,"body":"Hi\n\nI upgraded from 0.20 to 0.90 and a simple query I do failed when there is a slash in the query.\nIt's easy to test:\n- create a simple element like in the documentation:\n\n``` sh\ncurl -XPUT 'http://localhost:9200/twitter/tweet/1' -d '{\n    \"user\" : \"kimchy\",\n    \"post_date\" : \"2009-11-15T14:12:12\",\n    \"message\" : \"trying out Elastic Search\"\n}'\n```\n- Run a query with a slash in it\n\n``` sh\ncurl -X GET 'http://localhost:9200/twitter/_search?from=0&size=12&pretty' -d '{\n   \"query\":{\n      \"query_string\":{\n         \"query\":\"user:kimchy/banon\"\n      }\n   }\n}'\n```\n- Check output \n  works fine with 0.20. With that example you have 0 results\n  returns this error with 0.90\n\n```\n  \"error\" : \"SearchPhaseExecutionException[Failed to execute phase [query], total failure; shardFailures {[tJ5MGSY_RnOHfeAN2O8gnQ][twitter][2]: SearchParseException[[twitter][2]: from[-1],size[-1]: Parse Failure [Failed to parse source [{\\n   \\\"query\\\":{\\n      \\\"query_string\\\":{\\n         \\\"query\\\":\\\"user:kimchy/banon\\\"\\n      }\\n   }\\n}]]]; nested: QueryParsingException[[twitter] Failed to parse query [user:kimchy/banon]]; nested: ParseException[Cannot parse 'user:kimchy/banon': Lexical error at line 1, column 18.  Encountered: <EOF> after : \\\"/banon\\\"]; nested: TokenMgrError[Lexical error at line 1, column 18.  Encountered: <EOF> after : \\\"/banon\\\"]; }{[tJ5MGSY_RnOHfeAN2O8gnQ][twitter][0]: SearchParseException[[twitter][0]: from[-1],size[-1]: Parse Failure [Failed to parse source [{\\n   \\\"query\\\":{\\n      \\\"query_string\\\":{\\n         \\\"query\\\":\\\"user:kimchy/banon\\\"\\n      }\\n   }\\n}]]]; nested: QueryParsingException[[twitter] Failed to parse query [user:kimchy/banon]]; nested: ParseException[Cannot parse 'user:kimchy/banon': Lexical error at line 1, column 18.  Encountered: <EOF> after : \\\"/banon\\\"]; nested: TokenMgrError[Lexical error at line 1, column 18.  Encountered: <EOF> after : \\\"/banon\\\"]; }{[tJ5MGSY_RnOHfeAN2O8gnQ][twitter][1]: SearchParseException[[twitter][1]: from[-1],size[-1]: Parse Failure [Failed to parse source [{\\n   \\\"query\\\":{\\n      \\\"query_string\\\":{\\n         \\\"query\\\":\\\"user:kimchy/banon\\\"\\n      }\\n   }\\n}]]]; nested: QueryParsingException[[twitter] Failed to parse query [user:kimchy/banon]]; nested: ParseException[Cannot parse 'user:kimchy/banon': Lexical error at line 1, column 18.  Encountered: <EOF> after : \\\"/banon\\\"]; nested: TokenMgrError[Lexical error at line 1, column 18.  Encountered: <EOF> after : \\\"/banon\\\"]; }{[tJ5MGSY_RnOHfeAN2O8gnQ][twitter][3]: SearchParseException[[twitter][3]: from[-1],size[-1]: Parse Failure [Failed to parse source [{\\n   \\\"query\\\":{\\n      \\\"query_string\\\":{\\n         \\\"query\\\":\\\"user:kimchy/banon\\\"\\n      }\\n   }\\n}]]]; nested: QueryParsingException[[twitter] Failed to parse query [user:kimchy/banon]]; nested: ParseException[Cannot parse 'user:kimchy/banon': Lexical error at line 1, column 18.  Encountered: <EOF> after : \\\"/banon\\\"]; nested: TokenMgrError[Lexical error at line 1, column 18.  Encountered: <EOF> after : \\\"/banon\\\"]; }]\",\n```\n\nAny idea?\nThanks\n","closed_by":{"login":"sgruhier","id":3385,"node_id":"MDQ6VXNlcjMzODU=","avatar_url":"https://avatars2.githubusercontent.com/u/3385?v=4","gravatar_id":"","url":"https://api.github.com/users/sgruhier","html_url":"https://github.com/sgruhier","followers_url":"https://api.github.com/users/sgruhier/followers","following_url":"https://api.github.com/users/sgruhier/following{/other_user}","gists_url":"https://api.github.com/users/sgruhier/gists{/gist_id}","starred_url":"https://api.github.com/users/sgruhier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgruhier/subscriptions","organizations_url":"https://api.github.com/users/sgruhier/orgs","repos_url":"https://api.github.com/users/sgruhier/repos","events_url":"https://api.github.com/users/sgruhier/events{/privacy}","received_events_url":"https://api.github.com/users/sgruhier/received_events","type":"User","site_admin":false},"performed_via_github_app":null}