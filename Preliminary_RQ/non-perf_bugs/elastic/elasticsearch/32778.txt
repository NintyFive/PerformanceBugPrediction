{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/32778","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32778/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32778/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32778/events","html_url":"https://github.com/elastic/elasticsearch/issues/32778","id":349496581,"node_id":"MDU6SXNzdWUzNDk0OTY1ODE=","number":32778,"title":"[Feature request]: Bool query needs real OR semantic","user":{"login":"aimeos","id":8647429,"node_id":"MDQ6VXNlcjg2NDc0Mjk=","avatar_url":"https://avatars1.githubusercontent.com/u/8647429?v=4","gravatar_id":"","url":"https://api.github.com/users/aimeos","html_url":"https://github.com/aimeos","followers_url":"https://api.github.com/users/aimeos/followers","following_url":"https://api.github.com/users/aimeos/following{/other_user}","gists_url":"https://api.github.com/users/aimeos/gists{/gist_id}","starred_url":"https://api.github.com/users/aimeos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aimeos/subscriptions","organizations_url":"https://api.github.com/users/aimeos/orgs","repos_url":"https://api.github.com/users/aimeos/repos","events_url":"https://api.github.com/users/aimeos/events{/privacy}","received_events_url":"https://api.github.com/users/aimeos/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-08-10T12:27:29Z","updated_at":"2018-08-10T12:55:52Z","closed_at":"2018-08-10T12:55:52Z","author_association":"NONE","active_lock_reason":null,"body":"When building BOOL queries, there's no real OR semantic, only SHOULD but it behaves differently.\r\nExample:\r\n```\r\n\"bool\": {\r\n  \"must\": [{\r\n    \"product_status\": 1\r\n  }],\r\n  \"should\": [{\r\n    \"terms\": {\"product_category\": [1, 3, 5]}\r\n  }]\r\n}\r\n```\r\nThis ignores the product_category limitation completely because \"should\" is ignored if \"must\" is available too. This leads to totally wrong results because all active products are returns but not limited to the categories. It's also not possible to use the \"product_category\" values in the \"must\" term because then the products must be in category 1, 3 AND 5 which returns no result set.","closed_by":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"performed_via_github_app":null}