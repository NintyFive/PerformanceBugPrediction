{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/30088","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30088/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30088/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30088/events","html_url":"https://github.com/elastic/elasticsearch/issues/30088","id":317454865,"node_id":"MDU6SXNzdWUzMTc0NTQ4NjU=","number":30088,"title":"[ML] Jobs do not recover if the cluster state is deleted","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"labels":[{"id":912833043,"node_id":"MDU6TGFiZWw5MTI4MzMwNDM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:ml","name":":ml","color":"0e8a16","default":false,"description":"Machine learning"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-09-12T13:23:09Z","updated_at":"2019-01-24T16:25:50Z","closed_at":"2019-01-24T16:25:49Z","author_association":"COLLABORATOR","active_lock_reason":null,"body":"*Original comment by @sophiec20:*\n\nThere are \"rare\" occasions when the cluster state may be manually deleted. For example, if a new trial license is wanted, or if the cluster state is red and cannot be recovered. This is not a recommended way to recover, but might be the last ditch option to try in some circumstances.\r\n\r\nIf the cluster state is removed `rm -rf _state` then upon an elasticsearch restart, the indices are recreated based upon files seen on disk. \r\n\r\nIf this occurs, ML job and datafeed configurations are not recreated (amongst other things). However the results and state indices are. It would not be possible to view these ML jobs without some black magic in play, and knowledge of the exact ML configuration details.\r\n\r\nThere are no plans yet to address or mitigate this, nor any easy resolution. Noting for informational purposes.  \r\n\r\n","closed_by":{"login":"davidkyle","id":2353640,"node_id":"MDQ6VXNlcjIzNTM2NDA=","avatar_url":"https://avatars1.githubusercontent.com/u/2353640?v=4","gravatar_id":"","url":"https://api.github.com/users/davidkyle","html_url":"https://github.com/davidkyle","followers_url":"https://api.github.com/users/davidkyle/followers","following_url":"https://api.github.com/users/davidkyle/following{/other_user}","gists_url":"https://api.github.com/users/davidkyle/gists{/gist_id}","starred_url":"https://api.github.com/users/davidkyle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidkyle/subscriptions","organizations_url":"https://api.github.com/users/davidkyle/orgs","repos_url":"https://api.github.com/users/davidkyle/repos","events_url":"https://api.github.com/users/davidkyle/events{/privacy}","received_events_url":"https://api.github.com/users/davidkyle/received_events","type":"User","site_admin":false},"performed_via_github_app":null}