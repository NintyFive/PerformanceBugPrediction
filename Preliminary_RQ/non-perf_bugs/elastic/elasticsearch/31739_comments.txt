[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/401850333","html_url":"https://github.com/elastic/elasticsearch/issues/31739#issuecomment-401850333","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31739","id":401850333,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMTg1MDMzMw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-07-02T15:52:28Z","updated_at":"2018-07-02T15:52:28Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/402070162","html_url":"https://github.com/elastic/elasticsearch/issues/31739#issuecomment-402070162","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31739","id":402070162,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMjA3MDE2Mg==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2018-07-03T09:16:24Z","updated_at":"2018-07-03T09:16:24Z","author_association":"MEMBER","body":"@jbaiera do you mind having a look?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/402811152","html_url":"https://github.com/elastic/elasticsearch/issues/31739#issuecomment-402811152","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31739","id":402811152,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMjgxMTE1Mg==","user":{"login":"mayya-sharipova","id":5738841,"node_id":"MDQ6VXNlcjU3Mzg4NDE=","avatar_url":"https://avatars1.githubusercontent.com/u/5738841?v=4","gravatar_id":"","url":"https://api.github.com/users/mayya-sharipova","html_url":"https://github.com/mayya-sharipova","followers_url":"https://api.github.com/users/mayya-sharipova/followers","following_url":"https://api.github.com/users/mayya-sharipova/following{/other_user}","gists_url":"https://api.github.com/users/mayya-sharipova/gists{/gist_id}","starred_url":"https://api.github.com/users/mayya-sharipova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayya-sharipova/subscriptions","organizations_url":"https://api.github.com/users/mayya-sharipova/orgs","repos_url":"https://api.github.com/users/mayya-sharipova/repos","events_url":"https://api.github.com/users/mayya-sharipova/events{/privacy}","received_events_url":"https://api.github.com/users/mayya-sharipova/received_events","type":"User","site_admin":false},"created_at":"2018-07-05T18:22:52Z","updated_at":"2018-07-05T18:22:52Z","author_association":"CONTRIBUTOR","body":"We have the same test failed today on master just with different error messages.\r\n@atorok  in the previous email has mentioned that he has pushed the fix.  Has the fix pushed into mater?\r\n\r\n```\r\nREPRODUCE WITH: ./gradlew :plugins:repository-hdfs:integTestHaRunner \\\r\n  -Dtests.seed=80D8D1131CF26803 \\\r\n  -Dtests.class=org.elasticsearch.repositories.hdfs.HaHdfsFailoverTestSuiteIT \\\r\n  -Dtests.method=\"testHAFailoverWithRepository\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=hi-IN \\\r\n  -Dtests.timezone=Pacific/Rarotonga\r\n```\r\n\r\n```\r\n16:49:02   2> NOTE: All tests run in this JVM: [HaHdfsFailoverTestSuiteIT]\r\n16:49:02   1> [2018-07-05T16:49:00,658][WARN ][o.e.b.JNANatives         ] unable to install syscall filter: \r\n16:49:02   1> java.lang.UnsupportedOperationException: seccomp unavailable: CONFIG_SECCOMP not compiled into kernel, CONFIG_SECCOMP and CONFIG_SECCOMP_FILTER are needed\r\n16:49:02   1> \tat org.elasticsearch.bootstrap.SystemCallFilter.linuxImpl(SystemCallFilter.java:341) ~[elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n16:49:02   1> \tat org.elasticsearch.bootstrap.SystemCallFilter.init(SystemCallFilter.java:616) ~[elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n16:49:02   1> \tat org.elasticsearch.bootstrap.JNANatives.tryInstallSystemCallFilter(JNANatives.java:258) [elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n16:49:02   1> \tat org.elasticsearch.bootstrap.Natives.tryInstallSystemCallFilter(Natives.java:113) [elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n16:49:02   1> \tat org.elasticsearch.bootstrap.Bootstrap.initializeNatives(Bootstrap.java:108) [elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n16:49:02   1> \tat org.elasticsearch.bootstrap.BootstrapForTesting.<clinit>(BootstrapForTesting.java:83) [framework-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n16:49:02   1> \tat org.elasticsearch.test.ESTestCase.<clinit>(ESTestCase.java:197) [framework-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n16:49:02   1> \tat java.lang.Class.forName0(Native Method) [?:?]\r\n16:49:02   1> \tat java.lang.Class.forName(Class.java:374) [?:?]\r\n16:49:02   1> \tat com.carrotsearch.randomizedtesting.RandomizedRunner$2.run(RandomizedRunner.java:592) [randomizedtesting-runner-2.5.2.jar:?]\r\n16:49:02   1> [2018-07-05T16:49:00,671][WARN ][o.e.b.JNANatives         ] Unable to lock JVM Memory: error=12, reason=Cannot allocate memory\r\n16:49:02   1> [2018-07-05T16:49:00,671][WARN ][o.e.b.JNANatives         ] This can result in part of the JVM being swapped out.\r\n16:49:02   1> [2018-07-05T16:49:00,671][WARN ][o.e.b.JNANatives         ] Increase RLIMIT_MEMLOCK, soft limit: 65536, hard limit: 65536\r\n16:49:02   1> [2018-07-05T16:49:00,671][WARN ][o.e.b.JNANatives         ] These can be adjusted by modifying /etc/security/limits.conf, for example: \r\n16:49:02   1> \t# allow user 'jenkins' mlockall\r\n16:49:02   1> \tjenkins soft memlock unlimited\r\n16:49:02   1> \tjenkins hard memlock unlimited\r\n16:49:02   1> [2018-07-05T16:49:00,671][WARN ][o.e.b.JNANatives         ] If you are logged in interactively, you will have to re-login for the new limits to take effect.\r\n16:49:02   1> [2018-07-05T16:49:01,300][INFO ][o.e.r.h.HaHdfsFailoverTestSuiteIT] [testHAFailoverWithRepository]: before test\r\n16:49:02   1> [2018-07-05T16:49:01,400][INFO ][o.e.r.h.HaHdfsFailoverTestSuiteIT] initializing REST clients against [http://[::1]:33032]\r\n16:49:02   1> [2018-07-05T16:49:01,671][WARN ][o.a.h.u.NativeCodeLoader ] Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\r\n16:49:02   1> [2018-07-05T16:49:02,027][INFO ][o.e.r.h.HaHdfsFailoverTestSuiteIT] [testHAFailoverWithRepository]: after test\r\n16:49:02 ERROR   0.77s | HaHdfsFailoverTestSuiteIT.testHAFailoverWithRepository <<< FAILURES!\r\n16:49:02    > Throwable #1: java.security.PrivilegedActionException: java.io.IOException: failure to login: javax.security.auth.login.LoginException: Security Exception\r\n16:49:02    > \tat __randomizedtesting.SeedInfo.seed([80D8D1131CF26803:75A7640DBD350E87]:0)\r\n16:49:02    > \tat java.base/java.security.AccessController.doPrivileged(Native Method)\r\n16:49:02    > \tat org.elasticsearch.repositories.hdfs.HaHdfsFailoverTestSuiteIT.testHAFailoverWithRepository(HaHdfsFailoverTestSuiteIT.java:79)\r\n16:49:02    > \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n16:49:02    > \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n16:49:02    > \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n16:49:02    > \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n16:49:02    > \tat java.base/java.lang.Thread.run(Thread.java:832)\r\n16:49:02    > Caused by: java.io.IOException: failure to login: javax.security.auth.login.LoginException: Security Exception\r\n16:49:02    > \tat org.apache.hadoop.security.UserGroupInformation.loginUserFromSubject(UserGroupInformation.java:877)\r\n16:49:02    > \tat org.apache.hadoop.security.UserGroupInformation.getLoginUser(UserGroupInformation.java:802)\r\n16:49:02    > \tat org.apache.hadoop.security.UserGroupInformation.getCurrentUser(UserGroupInformation.java:675)\r\n16:49:02    > \tat org.elasticsearch.repositories.hdfs.HaHdfsFailoverTestSuiteIT.lambda$testHAFailoverWithRepository$0(HaHdfsFailoverTestSuiteIT.java:102)\r\n16:49:02    > \t... 38 more\r\n16:49:02    > Caused by: javax.security.auth.login.LoginException: Security Exception\r\n16:49:02    > \tat java.base/javax.security.auth.login.LoginContext.invoke(LoginContext.java:805)\r\n16:49:02    > \tat java.base/javax.security.auth.login.LoginContext.access$000(LoginContext.java:194)\r\n16:49:02    > \tat java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:665)\r\n16:49:02    > \tat java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:663)\r\n16:49:02    > \tat java.base/java.security.AccessController.doPrivileged(Native Method)\r\n16:49:02    > \tat java.base/javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:663)\r\n16:49:02    > \tat java.base/javax.security.auth.login.LoginContext.login(LoginContext.java:574)\r\n16:49:02    > \tat org.apache.hadoop.security.UserGroupInformation.loginUserFromSubject(UserGroupInformation.java:840)\r\n16:49:02    > \t... 41 more\r\n16:49:02    > Caused by: java.lang.SecurityException\r\n16:49:02    > \tat java.base/javax.security.auth.login.LoginContext.invoke(LoginContext.java:806)\r\n16:49:02    > \t... 48 more\r\n16:49:02 Completed [1/1] in 1.87s, 1 test, 1 error <<< FAILURES!\r\n```\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/402930715","html_url":"https://github.com/elastic/elasticsearch/issues/31739#issuecomment-402930715","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31739","id":402930715,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMjkzMDcxNQ==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2018-07-06T05:34:48Z","updated_at":"2018-07-06T05:34:48Z","author_association":"CONTRIBUTOR","body":"\"fixed\" only in the sense to get the build going, I really just muted the test on JDK 11 #31498 is there to get it looked at and fixed. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/402931253","html_url":"https://github.com/elastic/elasticsearch/issues/31739#issuecomment-402931253","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31739","id":402931253,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMjkzMTI1Mw==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2018-07-06T05:38:31Z","updated_at":"2018-07-06T06:13:44Z","author_association":"CONTRIBUTOR","body":"@polyfractal when you tried to reproduce it, did you consider the Java versions involved ? \r\nI'm only asking because I think it's easy to miss and that we could include it in the reproduction message since we require env vars for different Java homes already anyhow. The reproduction line would start with something like `JAVA_HOME=$JAVA10_HOME RUNTIME_JAVA_HOME=$JAVA11_HOME ./gradlew ...` do you think it would be helpful ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/402944280","html_url":"https://github.com/elastic/elasticsearch/issues/31739#issuecomment-402944280","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31739","id":402944280,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMjk0NDI4MA==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2018-07-06T06:54:55Z","updated_at":"2018-07-06T06:54:55Z","author_association":"CONTRIBUTOR","body":"I updated the check, it turns out that the test fails if jdk 11 is involved in any way ( either run-time or compile time )","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/403050300","html_url":"https://github.com/elastic/elasticsearch/issues/31739#issuecomment-403050300","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31739","id":403050300,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMzA1MDMwMA==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2018-07-06T14:27:10Z","updated_at":"2018-07-06T14:27:10Z","author_association":"MEMBER","body":"@atorok I don't quite recall... but I think I missed the java version at the time.  Even if I remembered this time, there have definitely been times in the past when it took me a while to notice the problem was with one version or another.\r\n\r\n++ to making the version more noticeable in the reproduction line, would help eliminate forgetting to check the build.","performed_via_github_app":null}]