{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/3835","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3835/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3835/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3835/events","html_url":"https://github.com/elastic/elasticsearch/issues/3835","id":20569828,"node_id":"MDU6SXNzdWUyMDU2OTgyOA==","number":3835,"title":"Java Client TransportSerializationException","user":{"login":"phrone","id":5619266,"node_id":"MDQ6VXNlcjU2MTkyNjY=","avatar_url":"https://avatars2.githubusercontent.com/u/5619266?v=4","gravatar_id":"","url":"https://api.github.com/users/phrone","html_url":"https://github.com/phrone","followers_url":"https://api.github.com/users/phrone/followers","following_url":"https://api.github.com/users/phrone/following{/other_user}","gists_url":"https://api.github.com/users/phrone/gists{/gist_id}","starred_url":"https://api.github.com/users/phrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phrone/subscriptions","organizations_url":"https://api.github.com/users/phrone/orgs","repos_url":"https://api.github.com/users/phrone/repos","events_url":"https://api.github.com/users/phrone/events{/privacy}","received_events_url":"https://api.github.com/users/phrone/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"assignees":[{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2013-10-05T19:47:21Z","updated_at":"2013-10-06T21:29:30Z","closed_at":"2013-10-06T21:29:30Z","author_association":"NONE","active_lock_reason":null,"body":"Greetings, I've been having trouble with the latest releases of elasticsearch and its java client.\nI'm getting this exception for various things I'm trying to do:\n\n<code>\n[elasticsearch[Shrunken Bones][transport_client_worker][T#4]{New I/O worker #4}] WARN  org.elasticsearch.transport.netty - [Shrunken Bones] Message not fully read (response) for [1] handler org.elasticsearch.action.TransportActionNodeProxy$1@15eda628, error [true], resetting\nException in thread \"main\" org.elasticsearch.transport.TransportSerializationException: Failed to deserialize exception response from stream\n    at org.elasticsearch.transport.netty.MessageChannelHandler.handlerResponseError(MessageChannelHandler.java:171)\n    at org.elasticsearch.transport.netty.MessageChannelHandler.messageReceived(MessageChannelHandler.java:125)\n    at org.elasticsearch.common.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)\n    at org.elasticsearch.common.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:560)\n    at org.elasticsearch.common.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:787)\n    at org.elasticsearch.common.netty.channel.Channels.fireMessageReceived(Channels.java:296)\n    at org.elasticsearch.common.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:462)\n    at org.elasticsearch.common.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:443)\n    at org.elasticsearch.common.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)\n    at org.elasticsearch.common.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)\n    at org.elasticsearch.common.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:560)\n    at org.elasticsearch.common.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:555)\n    at org.elasticsearch.common.netty.channel.Channels.fireMessageReceived(Channels.java:268)\n    at org.elasticsearch.common.netty.channel.Channels.fireMessageReceived(Channels.java:255)\n    at org.elasticsearch.common.netty.channel.socket.nio.NioWorker.read(NioWorker.java:88)\n    at org.elasticsearch.common.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:107)\n    at org.elasticsearch.common.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:312)\n    at org.elasticsearch.common.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:88)\n    at org.elasticsearch.common.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)\n    at org.elasticsearch.common.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\n    at org.elasticsearch.common.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n    at java.lang.Thread.run(Thread.java:722)\nCaused by: java.io.StreamCorruptedException: unexpected end of block data\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1369)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964)\n    at java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java:498)\n    at java.net.InetSocketAddress.readObject(InetSocketAddress.java:187)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:601)\n    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1004)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1866)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)\n    at org.elasticsearch.transport.netty.MessageChannelHandler.handlerResponseError(MessageChannelHandler.java:169)\n    ... 23 more\n</code>\n\nHere are some notes:\n1. I'm using the same jvm for the client and elasticsearch. Tested with java7_40, java7_26 and java6_something\n2. I'm using matched versions of elasticsearch and its java client\n3. I'm getting this exception for all versions of elasticsearch after 0.90.0.RC1 (yep, tested them all)\n4. I'm using out-of-the-box configuration\n\nHere's some example code that I'm running when I get the errors:\n<code>\ngetClient().admin().indices().prepareDeleteMapping(INDEX_TAGS).setType(TYPE_TAG).execute().actionGet();\n</code>\n\nDo you think it's an issue or am I messing up something?\n","closed_by":{"login":"phrone","id":5619266,"node_id":"MDQ6VXNlcjU2MTkyNjY=","avatar_url":"https://avatars2.githubusercontent.com/u/5619266?v=4","gravatar_id":"","url":"https://api.github.com/users/phrone","html_url":"https://github.com/phrone","followers_url":"https://api.github.com/users/phrone/followers","following_url":"https://api.github.com/users/phrone/following{/other_user}","gists_url":"https://api.github.com/users/phrone/gists{/gist_id}","starred_url":"https://api.github.com/users/phrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phrone/subscriptions","organizations_url":"https://api.github.com/users/phrone/orgs","repos_url":"https://api.github.com/users/phrone/repos","events_url":"https://api.github.com/users/phrone/events{/privacy}","received_events_url":"https://api.github.com/users/phrone/received_events","type":"User","site_admin":false},"performed_via_github_app":null}