[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/1702383","html_url":"https://github.com/elastic/elasticsearch/issues/1189#issuecomment-1702383","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1189","id":1702383,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDIzODM=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2011-08-01T17:49:20Z","updated_at":"2011-08-01T17:49:20Z","author_association":"MEMBER","body":"Are there any other exceptions in the log? Are you sure you are not running out of file handles? If you use the latest big couch it has a realtime graph for open / max file handles: https://github.com/lukas-vlcek/bigdesk.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/1702630","html_url":"https://github.com/elastic/elasticsearch/issues/1189#issuecomment-1702630","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1189","id":1702630,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDI2MzA=","user":{"login":"bbgordonn","id":952080,"node_id":"MDQ6VXNlcjk1MjA4MA==","avatar_url":"https://avatars2.githubusercontent.com/u/952080?v=4","gravatar_id":"","url":"https://api.github.com/users/bbgordonn","html_url":"https://github.com/bbgordonn","followers_url":"https://api.github.com/users/bbgordonn/followers","following_url":"https://api.github.com/users/bbgordonn/following{/other_user}","gists_url":"https://api.github.com/users/bbgordonn/gists{/gist_id}","starred_url":"https://api.github.com/users/bbgordonn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bbgordonn/subscriptions","organizations_url":"https://api.github.com/users/bbgordonn/orgs","repos_url":"https://api.github.com/users/bbgordonn/repos","events_url":"https://api.github.com/users/bbgordonn/events{/privacy}","received_events_url":"https://api.github.com/users/bbgordonn/received_events","type":"User","site_admin":false},"created_at":"2011-08-01T18:18:03Z","updated_at":"2011-08-01T18:18:03Z","author_association":"CONTRIBUTOR","body":"No, I had the file handle problem last week. :) No errors like that since.\n\nThere is an java.net.UnknownHostException because my hostnames are not really in DNS. I have another test program that creates a few thousand indexes as quickly as it can. While this is running, CPU on one of my nodes will occasionally spike to 100% of one core for a few minutes. This occasionally causes that node to be removed from the cluster and re-added later.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/1702786","html_url":"https://github.com/elastic/elasticsearch/issues/1189#issuecomment-1702786","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1189","id":1702786,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDI3ODY=","user":{"login":"bbgordonn","id":952080,"node_id":"MDQ6VXNlcjk1MjA4MA==","avatar_url":"https://avatars2.githubusercontent.com/u/952080?v=4","gravatar_id":"","url":"https://api.github.com/users/bbgordonn","html_url":"https://github.com/bbgordonn","followers_url":"https://api.github.com/users/bbgordonn/followers","following_url":"https://api.github.com/users/bbgordonn/following{/other_user}","gists_url":"https://api.github.com/users/bbgordonn/gists{/gist_id}","starred_url":"https://api.github.com/users/bbgordonn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bbgordonn/subscriptions","organizations_url":"https://api.github.com/users/bbgordonn/orgs","repos_url":"https://api.github.com/users/bbgordonn/repos","events_url":"https://api.github.com/users/bbgordonn/events{/privacy}","received_events_url":"https://api.github.com/users/bbgordonn/received_events","type":"User","site_admin":false},"created_at":"2011-08-01T18:37:45Z","updated_at":"2011-08-01T18:37:45Z","author_association":"CONTRIBUTOR","body":"Could it be that issuing a delete index _all is not always completely done when it returns \"ok\"? I.e., that it could still be deleting indexes after that request is finished, causing a race condition when submitting documents. Or, there may be two different issues here.\n\nIndexMissingException[[silly_8349] missing]\n\nWith vars:{\n  'request' => {\n    'qs' => {},\n    'as_json' => undef,\n    'cmd' => '/_bulk',\n    'data' => \\'{\"index\":{\"_index\":\"silly_8980\",\"_id\":\"1311677474-91-19527-316-23\",\"_type\":\"eeee\"}}\n{\"id\":\"1311677474-91-19527-316-23\",\"domain id\":\"8980\"}\n{\"index\":{\"_index\":\"silly_8349\",\"_id\":\"1311677474-92-19527-316-23\",\"_type\":\"eeee\"}}\n{\"id\":\"1311677474-92-19527-316-23\",\"domain id\":\"8349\"}\n',\n    'method' => 'POST'\n  },\n  'status_code' => 404,\n  'server' => '10.2.72.64:9200',\n  'status_msg' => 'Not Found\n\nHere's the log file from 10.2.72.64:\n\nhttps://gist.github.com/1118720\n\nand the log from 10.2.72.65, which shows interleaved creates and deletes:\n\nhttps://gist.github.com/1118718\n\nI found a similar thread in the google group:\n\nhttp://groups.google.com/a/elasticsearch.com/group/users/browse_thread/thread/4cb889197af5a990/07651e5946c56a51?lnk=raot\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/1704583","html_url":"https://github.com/elastic/elasticsearch/issues/1189#issuecomment-1704583","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1189","id":1704583,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDQ1ODM=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2011-08-01T21:54:16Z","updated_at":"2011-08-01T21:54:16Z","author_association":"MEMBER","body":"Do you issue a delete all before or while you index the data? If its before, and it might be a timing issue, can you try and sleep for something like 20-30 seconds before you start the indexing?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/1704984","html_url":"https://github.com/elastic/elasticsearch/issues/1189#issuecomment-1704984","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1189","id":1704984,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDQ5ODQ=","user":{"login":"bbgordonn","id":952080,"node_id":"MDQ6VXNlcjk1MjA4MA==","avatar_url":"https://avatars2.githubusercontent.com/u/952080?v=4","gravatar_id":"","url":"https://api.github.com/users/bbgordonn","html_url":"https://github.com/bbgordonn","followers_url":"https://api.github.com/users/bbgordonn/followers","following_url":"https://api.github.com/users/bbgordonn/following{/other_user}","gists_url":"https://api.github.com/users/bbgordonn/gists{/gist_id}","starred_url":"https://api.github.com/users/bbgordonn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bbgordonn/subscriptions","organizations_url":"https://api.github.com/users/bbgordonn/orgs","repos_url":"https://api.github.com/users/bbgordonn/repos","events_url":"https://api.github.com/users/bbgordonn/events{/privacy}","received_events_url":"https://api.github.com/users/bbgordonn/received_events","type":"User","site_admin":false},"created_at":"2011-08-01T22:47:43Z","updated_at":"2011-08-01T22:47:43Z","author_association":"CONTRIBUTOR","body":"I never delete while indexing. As in the script above, I always issue DELETE with an index of _all, delete an index template, then create the same index template, then start bulk indexing.\n\nJust tried sleeping for 30s after the delete. I saw \"deleting index\" lines for each individual index just like the previous gist, and can confirm that they stopped long before the sleep finished and \"creating index\" lines started appearing.\n\nThe last \"creating index\" line was the same one mentioned in the 404 error.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/1707400","html_url":"https://github.com/elastic/elasticsearch/issues/1189#issuecomment-1707400","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1189","id":1707400,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDc0MDA=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2011-08-02T08:32:17Z","updated_at":"2011-08-02T08:32:17Z","author_association":"MEMBER","body":"I think I managed to get confused by the two issues. The first one was the recovering failure, and I suspect it was because of the interleaving delete and index requests. Does that still happen?\n\nThe second one is the index missing failure, and you still get that, right?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/1709566","html_url":"https://github.com/elastic/elasticsearch/issues/1189#issuecomment-1709566","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1189","id":1709566,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDk1NjY=","user":{"login":"bbgordonn","id":952080,"node_id":"MDQ6VXNlcjk1MjA4MA==","avatar_url":"https://avatars2.githubusercontent.com/u/952080?v=4","gravatar_id":"","url":"https://api.github.com/users/bbgordonn","html_url":"https://github.com/bbgordonn","followers_url":"https://api.github.com/users/bbgordonn/followers","following_url":"https://api.github.com/users/bbgordonn/following{/other_user}","gists_url":"https://api.github.com/users/bbgordonn/gists{/gist_id}","starred_url":"https://api.github.com/users/bbgordonn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bbgordonn/subscriptions","organizations_url":"https://api.github.com/users/bbgordonn/orgs","repos_url":"https://api.github.com/users/bbgordonn/repos","events_url":"https://api.github.com/users/bbgordonn/events{/privacy}","received_events_url":"https://api.github.com/users/bbgordonn/received_events","type":"User","site_admin":false},"created_at":"2011-08-02T14:39:58Z","updated_at":"2011-08-02T14:39:58Z","author_association":"CONTRIBUTOR","body":"I do not know why the \"No such file or directory\" error occurs. I included it for completeness. What you say makes sense. I have not gotten it in the last few tests or noticed any particular correlation between that error and the failures received by the client, which makes me suspect it is not related after all. Sorry for the confusion!\n\nI get the index missing error regularly unless I explicitly create indexes before doing a bulk submit (still using the template).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/1713401","html_url":"https://github.com/elastic/elasticsearch/issues/1189#issuecomment-1713401","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1189","id":1713401,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTM0MDE=","user":{"login":"bbgordonn","id":952080,"node_id":"MDQ6VXNlcjk1MjA4MA==","avatar_url":"https://avatars2.githubusercontent.com/u/952080?v=4","gravatar_id":"","url":"https://api.github.com/users/bbgordonn","html_url":"https://github.com/bbgordonn","followers_url":"https://api.github.com/users/bbgordonn/followers","following_url":"https://api.github.com/users/bbgordonn/following{/other_user}","gists_url":"https://api.github.com/users/bbgordonn/gists{/gist_id}","starred_url":"https://api.github.com/users/bbgordonn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bbgordonn/subscriptions","organizations_url":"https://api.github.com/users/bbgordonn/orgs","repos_url":"https://api.github.com/users/bbgordonn/repos","events_url":"https://api.github.com/users/bbgordonn/events{/privacy}","received_events_url":"https://api.github.com/users/bbgordonn/received_events","type":"User","site_admin":false},"created_at":"2011-08-02T21:33:18Z","updated_at":"2011-08-02T21:33:18Z","author_association":"CONTRIBUTOR","body":"Just got the IndexMissingException using the rabbitmq river when no indexes had been deleted. I tweaked the issue title to (hopefully) be more clear.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/1717257","html_url":"https://github.com/elastic/elasticsearch/issues/1189#issuecomment-1717257","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1189","id":1717257,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTcyNTc=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2011-08-03T11:34:56Z","updated_at":"2011-08-03T11:34:56Z","author_association":"MEMBER","body":"ok, I think I managed to track this one down, opened #1199 as a separate issue and pushed a fix, it should fix your case (I managed to create it locally, and this fix fixes it). If you want to make sure, you can build es from source, or jump on IRC, I can provide you with a custom build.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/1719077","html_url":"https://github.com/elastic/elasticsearch/issues/1189#issuecomment-1719077","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1189","id":1719077,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTkwNzc=","user":{"login":"bbgordonn","id":952080,"node_id":"MDQ6VXNlcjk1MjA4MA==","avatar_url":"https://avatars2.githubusercontent.com/u/952080?v=4","gravatar_id":"","url":"https://api.github.com/users/bbgordonn","html_url":"https://github.com/bbgordonn","followers_url":"https://api.github.com/users/bbgordonn/followers","following_url":"https://api.github.com/users/bbgordonn/following{/other_user}","gists_url":"https://api.github.com/users/bbgordonn/gists{/gist_id}","starred_url":"https://api.github.com/users/bbgordonn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bbgordonn/subscriptions","organizations_url":"https://api.github.com/users/bbgordonn/orgs","repos_url":"https://api.github.com/users/bbgordonn/repos","events_url":"https://api.github.com/users/bbgordonn/events{/privacy}","received_events_url":"https://api.github.com/users/bbgordonn/received_events","type":"User","site_admin":false},"created_at":"2011-08-03T15:47:14Z","updated_at":"2011-08-03T15:47:14Z","author_association":"CONTRIBUTOR","body":"It seems to happen a less often now but is still reproducible. Bulk requests that result in index creation are now slightly but noticeably slower, which I take as a good sign that the patch is working.\n\nI did run into a situation I didn't have before: IndexMissingException during the DELETE. May be because I accidentally ran two manual DELETEs against _all simultaneously (my script never does this).\n\n[root@el6-75-191 ~]# curl -s -XDELETE 'http://localhost:9200/_all/'\n{\"error\":\"RemoteTransportException[[Maverick][inet[/10.2.72.64:9300]][indices/deleteIndex]]; nested: IndexMissingException[[silly_3611] missing]; \",\"status\":404}\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/1725556","html_url":"https://github.com/elastic/elasticsearch/issues/1189#issuecomment-1725556","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1189","id":1725556,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MjU1NTY=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2011-08-04T09:14:15Z","updated_at":"2011-08-04T09:14:15Z","author_association":"MEMBER","body":"Strange..., will try and reproduce it again...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/1727398","html_url":"https://github.com/elastic/elasticsearch/issues/1189#issuecomment-1727398","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1189","id":1727398,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MjczOTg=","user":{"login":"bbgordonn","id":952080,"node_id":"MDQ6VXNlcjk1MjA4MA==","avatar_url":"https://avatars2.githubusercontent.com/u/952080?v=4","gravatar_id":"","url":"https://api.github.com/users/bbgordonn","html_url":"https://github.com/bbgordonn","followers_url":"https://api.github.com/users/bbgordonn/followers","following_url":"https://api.github.com/users/bbgordonn/following{/other_user}","gists_url":"https://api.github.com/users/bbgordonn/gists{/gist_id}","starred_url":"https://api.github.com/users/bbgordonn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bbgordonn/subscriptions","organizations_url":"https://api.github.com/users/bbgordonn/orgs","repos_url":"https://api.github.com/users/bbgordonn/repos","events_url":"https://api.github.com/users/bbgordonn/events{/privacy}","received_events_url":"https://api.github.com/users/bbgordonn/received_events","type":"User","site_admin":false},"created_at":"2011-08-04T14:28:16Z","updated_at":"2011-08-04T14:28:16Z","author_association":"CONTRIBUTOR","body":"It's now very difficult to produce with a limited example like the above.\n\nMy big test tries to index ~9 million documents with ~2500 indexes with 600 documents per bulk request. This fails after five or ten requests of 600.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/15956347","html_url":"https://github.com/elastic/elasticsearch/issues/1189#issuecomment-15956347","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1189","id":15956347,"node_id":"MDEyOklzc3VlQ29tbWVudDE1OTU2MzQ3","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2013-04-05T13:46:00Z","updated_at":"2013-04-05T13:46:00Z","author_association":"CONTRIBUTOR","body":"Above test no longer seems to produce failure. Closing\n","performed_via_github_app":null}]