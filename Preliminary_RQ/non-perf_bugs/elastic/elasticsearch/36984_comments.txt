[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/449912638","html_url":"https://github.com/elastic/elasticsearch/issues/36984#issuecomment-449912638","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36984","id":449912638,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0OTkxMjYzOA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-12-26T06:24:49Z","updated_at":"2018-12-26T06:24:49Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-security","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/449965914","html_url":"https://github.com/elastic/elasticsearch/issues/36984#issuecomment-449965914","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36984","id":449965914,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0OTk2NTkxNA==","user":{"login":"albertzaharovits","id":4568420,"node_id":"MDQ6VXNlcjQ1Njg0MjA=","avatar_url":"https://avatars2.githubusercontent.com/u/4568420?v=4","gravatar_id":"","url":"https://api.github.com/users/albertzaharovits","html_url":"https://github.com/albertzaharovits","followers_url":"https://api.github.com/users/albertzaharovits/followers","following_url":"https://api.github.com/users/albertzaharovits/following{/other_user}","gists_url":"https://api.github.com/users/albertzaharovits/gists{/gist_id}","starred_url":"https://api.github.com/users/albertzaharovits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertzaharovits/subscriptions","organizations_url":"https://api.github.com/users/albertzaharovits/orgs","repos_url":"https://api.github.com/users/albertzaharovits/repos","events_url":"https://api.github.com/users/albertzaharovits/events{/privacy}","received_events_url":"https://api.github.com/users/albertzaharovits/received_events","type":"User","site_admin":false},"created_at":"2018-12-26T13:20:59Z","updated_at":"2018-12-26T13:20:59Z","author_association":"CONTRIBUTOR","body":"Hi @kunisen ,\r\n\r\nES <= 5.5 only understands the old `.security` index format. ES 5.6 understands both `.security` index formats, i.e. the old (multiple types) and the new (a single `doc` type). ES >= 6.0 understands only the new format.\r\n\r\nIf you upgrade straight from <= 5.5 to >= 6.0 a [\"manual\" format upgrade](https://www.elastic.co/guide/en/elastic-stack/6.5/upgrading-elastic-stack.html#upgrade-internal-indices) is required (after the full-cluster restart into the new version). The \"manual\"\" format upgrade happens after the upgrade. It is not possible to do rolling upgrade from 5.5 to 6.0 .\r\nThe rolling upgrade procedure from 5.6 to >= 6.0 includes the format upgrade step. This is why a \"manual\" upgrade, after the update, is not required (though it is still \"manual\", it is just embedded in the procedure). The gist of this is stated in the [stack upgrade docs](https://www.elastic.co/guide/en/elastic-stack/current/upgrading-elastic-stack.html#_preparing_to_upgrade) pt 5.\r\n\r\n> It only indicates the version prior to 5.6, but it didn't tell this includes 5.6 or not.\r\nTo say it clearly, it makes people think the version before (which means less than <) 5.6 needs upgraded, but the version 5.6 is safe and not need upgraded before upgrading Elastic Stack.\r\n\r\nThis is correct. \"before\" does not include 5.6 . The important word here is **after** (\"If you are upgrading from a version prior to 5.6, you must upgrade them after after installing Elasticsearch 6.5.4.\") - after is maybe duplicated for emphasis purposes ðŸ˜› . Again, no \"**after** upgrade\" is required on 5.6 because the format upgrade is embedded in the cluster rolling upgrade procedure.\r\n\r\nI agree \"manual\" upgrade is a stretch term and *after* is not emphasized. Do you have other docs improvement suggestions?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/450858374","html_url":"https://github.com/elastic/elasticsearch/issues/36984#issuecomment-450858374","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36984","id":450858374,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDg1ODM3NA==","user":{"login":"eedugon","id":25320357,"node_id":"MDQ6VXNlcjI1MzIwMzU3","avatar_url":"https://avatars2.githubusercontent.com/u/25320357?v=4","gravatar_id":"","url":"https://api.github.com/users/eedugon","html_url":"https://github.com/eedugon","followers_url":"https://api.github.com/users/eedugon/followers","following_url":"https://api.github.com/users/eedugon/following{/other_user}","gists_url":"https://api.github.com/users/eedugon/gists{/gist_id}","starred_url":"https://api.github.com/users/eedugon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eedugon/subscriptions","organizations_url":"https://api.github.com/users/eedugon/orgs","repos_url":"https://api.github.com/users/eedugon/repos","events_url":"https://api.github.com/users/eedugon/events{/privacy}","received_events_url":"https://api.github.com/users/eedugon/received_events","type":"User","site_admin":false},"created_at":"2019-01-02T13:04:17Z","updated_at":"2019-01-02T13:04:17Z","author_association":"CONTRIBUTOR","body":"Hi, @albertzaharovits , @kunisen :\r\n\r\n> the format upgrade is embedded in the cluster rolling upgrade procedure.\r\nI believe it does not, but please correct me if i'm wrong:\r\nhttps://www.elastic.co/guide/en/elasticsearch/reference/current/rolling-upgrades.html\r\n\r\nThe format upgrade (manual, to be done before the real upgrade, as you have explained perfectly fine), is NOT mentioned or described in the rolling upgrade procedure, and that's causing a lot of people to believe that 5.6 can be upgraded to 6.x smoothly via rolling upgrade, when it's not possible if Xpack or Kibana are used.\r\n\r\nThis is perfecly explained in the \"Upgrading Elastic Stack\" guide, but not in the rolling upgrade guide I guess...\r\n\r\nAnyway I agree with both of your views!\r\n\r\nMaybe just adding a link and note to \"Preparing Upgrade step 5\" or \"Upgrading from 5.6\" sections of the Elastic Stack upgrade document in the Rolling Upgrade document would be enough (in order to not duplicate info).\r\n","performed_via_github_app":null}]