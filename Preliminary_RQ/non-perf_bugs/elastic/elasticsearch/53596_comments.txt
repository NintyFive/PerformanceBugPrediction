[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/599487693","html_url":"https://github.com/elastic/elasticsearch/issues/53596#issuecomment-599487693","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53596","id":599487693,"node_id":"MDEyOklzc3VlQ29tbWVudDU5OTQ4NzY5Mw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-03-16T11:34:25Z","updated_at":"2020-03-16T11:34:25Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed (:Distributed/Snapshot/Restore)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/604109996","html_url":"https://github.com/elastic/elasticsearch/issues/53596#issuecomment-604109996","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53596","id":604109996,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDEwOTk5Ng==","user":{"login":"tbrooks8","id":862472,"node_id":"MDQ6VXNlcjg2MjQ3Mg==","avatar_url":"https://avatars3.githubusercontent.com/u/862472?v=4","gravatar_id":"","url":"https://api.github.com/users/tbrooks8","html_url":"https://github.com/tbrooks8","followers_url":"https://api.github.com/users/tbrooks8/followers","following_url":"https://api.github.com/users/tbrooks8/following{/other_user}","gists_url":"https://api.github.com/users/tbrooks8/gists{/gist_id}","starred_url":"https://api.github.com/users/tbrooks8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tbrooks8/subscriptions","organizations_url":"https://api.github.com/users/tbrooks8/orgs","repos_url":"https://api.github.com/users/tbrooks8/repos","events_url":"https://api.github.com/users/tbrooks8/events{/privacy}","received_events_url":"https://api.github.com/users/tbrooks8/received_events","type":"User","site_admin":false},"created_at":"2020-03-25T22:00:12Z","updated_at":"2020-03-25T22:00:12Z","author_association":"CONTRIBUTOR","body":"This is hanging on the call to restore the snapshot in the tests that I have looked at:\r\n\r\n```\r\n        logger.info(\"--> restore all indices from the snapshot\");\r\n        // This line\r\n        RestoreSnapshotResponse restoreSnapshotResponse = client.admin().cluster().prepareRestoreSnapshot(\"test-repo\", \"test-snap\")\r\n            .setWaitForCompletion(true).execute().actionGet();\r\n        assertThat(restoreSnapshotResponse.getRestoreInfo().totalShards(), greaterThan(0));\r\n\r\n        ensureGreen();\r\n        for (int i=0; i<5; i++) {\r\n            assertHitCount(client.prepareSearch(\"test-idx-1\").setSize(0).get(), 100L);\r\n            assertHitCount(client.prepareSearch(\"test-idx-2\").setSize(0).get(), 100L);\r\n            assertHitCount(client.prepareSearch(\"test-idx-3\").setSize(0).get(), 50L);\r\n        }\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/604986416","html_url":"https://github.com/elastic/elasticsearch/issues/53596#issuecomment-604986416","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53596","id":604986416,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDk4NjQxNg==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2020-03-27T12:58:33Z","updated_at":"2020-03-27T12:58:33Z","author_association":"MEMBER","body":"I wonder if this is just a `WindowsFS` issue along the same lines of https://github.com/elastic/elasticsearch/pull/52488. This has only happened twice (in two months and both time it was on `WindowsFS`) and it seems like we are stuck (but still doing work) on persisting cluster state/metadata on the data nodes when the test times out.\r\n\r\n=> I'd close here given how rare this is. The only other alternative I see is to exclude `WindowsFS` from this test suite which in fact I'd rather not do because checking that we aren't deleting any open files is kind of a nice check for a snapshot related test.\r\n\r\n=> We're ok to leave this be? :)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/605068178","html_url":"https://github.com/elastic/elasticsearch/issues/53596#issuecomment-605068178","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/53596","id":605068178,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNTA2ODE3OA==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2020-03-27T15:39:53Z","updated_at":"2020-03-27T15:39:53Z","author_association":"MEMBER","body":"Yea, I'm closing this. In the failed runs I'm seeing other tests take minutes as well. It's not like this test here is locking up, it's just that the others were so slow that this one ran into the time limit (after the others burnt through most of the 20min).\r\nRunning locally with the same seed doesn't take nearly as long (though still takes ~4min vs 1min for other FS impl) => I'd chalk these up to slow CI => closing","performed_via_github_app":null}]