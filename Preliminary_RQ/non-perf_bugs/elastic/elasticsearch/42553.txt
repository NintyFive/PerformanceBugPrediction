{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/42553","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42553/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42553/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42553/events","html_url":"https://github.com/elastic/elasticsearch/issues/42553","id":448481067,"node_id":"MDU6SXNzdWU0NDg0ODEwNjc=","number":42553,"title":"Failed to connect Kibana and Elasticsearch","user":{"login":"Zhazhanan","id":17845256,"node_id":"MDQ6VXNlcjE3ODQ1MjU2","avatar_url":"https://avatars2.githubusercontent.com/u/17845256?v=4","gravatar_id":"","url":"https://api.github.com/users/Zhazhanan","html_url":"https://github.com/Zhazhanan","followers_url":"https://api.github.com/users/Zhazhanan/followers","following_url":"https://api.github.com/users/Zhazhanan/following{/other_user}","gists_url":"https://api.github.com/users/Zhazhanan/gists{/gist_id}","starred_url":"https://api.github.com/users/Zhazhanan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zhazhanan/subscriptions","organizations_url":"https://api.github.com/users/Zhazhanan/orgs","repos_url":"https://api.github.com/users/Zhazhanan/repos","events_url":"https://api.github.com/users/Zhazhanan/events{/privacy}","received_events_url":"https://api.github.com/users/Zhazhanan/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-05-25T16:36:58Z","updated_at":"2019-05-27T01:21:43Z","closed_at":"2019-05-26T13:08:32Z","author_association":"NONE","active_lock_reason":null,"body":"Kibana version: 7.1.0\r\nElasticsearch version: 7.1.0\r\nOS version:Linux version 4.15.0-47-generic\r\n\r\nFailed to connect Kibana and Elasticsearch\r\n\r\nkibana.log\r\n```\r\n{\"type\":\"log\",\"@timestamp\":\"2019-05-25T16:17:11Z\",\"tags\":[\"status\",\"plugin:timelion@undefined\",\"info\"],\"pid\":1,\"state\":\"green\",\"message\":\"Status changed from uninitialized to green - Ready\",\"prevState\":\"uninitialized\",\"prevMsg\":\"uninitialized\"}\r\n{\"type\":\"log\",\"@timestamp\":\"2019-05-25T16:17:13Z\",\"tags\":[\"error\",\"elasticsearch\",\"admin\"],\"pid\":1,\"message\":\"Request error, retrying\\nHEAD http://localhost:9200/ => connect ECONNREFUSED 127.0.0.1:9200\"}\r\n{\"type\":\"log\",\"@timestamp\":\"2019-05-25T16:17:13Z\",\"tags\":[\"warning\",\"elasticsearch\",\"admin\"],\"pid\":1,\"message\":\"Unable to revive connection: http://localhost:9200/\"}\r\n{\"type\":\"log\",\"@timestamp\":\"2019-05-25T16:17:13Z\",\"tags\":[\"warning\",\"elasticsearch\",\"admin\"],\"pid\":1,\"message\":\"No living connections\"}\r\n\r\n\r\n{\"type\":\"log\",\"@timestamp\":\"2019-05-25T16:17:13Z\",\"tags\":[\"error\",\"elasticsearch\",\"data\"],\"pid\":1,\"message\":\"Request error, retrying\\nGET http://localhost:9200/_xpack => connect ECONNREFUSED 127.0.0.1:9200\"}\r\n{\"type\":\"log\",\"@timestamp\":\"2019-05-25T16:17:13Z\",\"tags\":[\"warning\",\"elasticsearch\",\"data\"],\"pid\":1,\"message\":\"Unable to revive connection: http://localhost:9200/\"}\r\n{\"type\":\"log\",\"@timestamp\":\"2019-05-25T16:17:13Z\",\"tags\":[\"warning\",\"elasticsearch\",\"data\"],\"pid\":1,\"message\":\"No living connections\"}\r\n{\"type\":\"log\",\"@timestamp\":\"2019-05-25T16:17:13Z\",\"tags\":[\"license\",\"warning\",\"xpack\"],\"pid\":1,\"message\":\"License information from the X-Pack plugin could not be obtained from Elasticsearch for the [data] cluster. Error: No Living connections\"}\r\n\r\n\r\n\r\n{\"type\":\"log\",\"@timestamp\":\"2019-05-25T16:17:15Z\",\"tags\":[\"status\",\"plugin:reporting@7.1.0\",\"error\"],\"pid\":1,\"state\":\"red\",\"message\":\"Status changed from uninitialized to red - No Living connections\",\"prevState\":\"uninitialized\",\"prevMsg\":\"uninitialized\"}\r\n{\"type\":\"log\",\"@timestamp\":\"2019-05-25T16:17:15Z\",\"tags\":[\"warning\",\"elasticsearch\",\"data\"],\"pid\":1,\"message\":\"Unable to revive connection: http://localhost:9200/\"}\r\n{\"type\":\"log\",\"@timestamp\":\"2019-05-25T16:17:15Z\",\"tags\":[\"warning\",\"elasticsearch\",\"data\"],\"pid\":1,\"message\":\"No living connections\"}\r\n{\"type\":\"log\",\"@timestamp\":\"2019-05-25T16:17:15Z\",\"tags\":[\"warning\",\"elasticsearch\",\"admin\"],\"pid\":1,\"message\":\"Unable to revive connection: http://localhost:9200/\"}\r\n{\"type\":\"log\",\"@timestamp\":\"2019-05-25T16:17:15Z\",\"tags\":[\"warning\",\"elasticsearch\",\"admin\"],\"pid\":1,\"message\":\"No living connections\"}\r\n{\"type\":\"log\",\"@timestamp\":\"2019-05-25T16:17:15Z\",\"tags\":[\"warning\",\"elasticsearch\",\"admin\"],\"pid\":1,\"message\":\"Unable to revive connection: http://localhost:9200/\"}\r\n{\"type\":\"log\",\"@timestamp\":\"2019-05-25T16:17:15Z\",\"tags\":[\"warning\",\"elasticsearch\",\"admin\"],\"pid\":1,\"message\":\"No living connections\"}\r\n{\"type\":\"log\",\"@timestamp\":\"2019-05-25T16:17:15Z\",\"tags\":[\"reporting\",\"warning\"],\"pid\":1,\"message\":\"Could not retrieve cluster settings, because of No Living connections\"}\r\n{\"type\":\"log\",\"@timestamp\":\"2019-05-25T16:17:15Z\",\"tags\":[\"warning\",\"task_manager\"],\"pid\":1,\"message\":\"PollError No Living connections\"}\r\n{\"type\":\"log\",\"@timestamp\":\"2019-05-25T16:17:15Z\",\"tags\":[\"warning\",\"maps\"],\"pid\":1,\"message\":\"Error scheduling telemetry task, received NotInitialized: Tasks cannot be scheduled until after task manager is initialized!\"}\r\n{\"type\":\"log\",\"@timestamp\":\"2019-05-25T16:17:15Z\",\"tags\":[\"warning\",\"telemetry\"],\"pid\":1,\"message\":\"Error scheduling task, received NotInitialized: Tasks cannot be scheduled until after task manager is initialized!\"}\r\n{\"type\":\"log\",\"@timestamp\":\"2019-05-25T16:17:15Z\",\"tags\":[\"warning\",\"elasticsearch\",\"admin\"],\"pid\":1,\"message\":\"Unable to revive connection: http://localhost:9200/\"}\r\n{\"type\":\"log\",\"@timestamp\":\"2019-05-25T16:17:15Z\",\"tags\":[\"warning\",\"elasticsearch\",\"admin\"],\"pid\":1,\"message\":\"No living connections\"}\r\n{\"type\":\"log\",\"@timestamp\":\"2019-05-25T16:17:18Z\",\"tags\":[\"warning\",\"elasticsearch\",\"admin\"],\"pid\":1,\"message\":\"Unable to revive connection: http://localhost:9200/\"}\r\n{\"type\":\"log\",\"@timestamp\":\"2019-05-25T16:17:18Z\",\"tags\":[\"warning\",\"elasticsearch\",\"admin\"],\"pid\":1,\"message\":\"No living connections\"}\r\n{\"type\":\"log\",\"@timestamp\":\"2019-05-25T16:17:18Z\",\"tags\":[\"warning\",\"elasticsearch\",\"admin\"],\"pid\":1,\"message\":\"Unable to revive connection: http://localhost:9200/\"}\r\n{\"type\":\"log\",\"@timestamp\":\"2019-05-25T16:17:18Z\",\"tags\":[\"warning\",\"elasticsearch\",\"admin\"],\"pid\":1,\"message\":\"No living connections\"}\r\n\r\n\r\n```\r\nStart command\r\n\r\n```\r\ndocker run --name es7.1.0 -p 9200:9200 -p 9300:9300 -e \"discovery.type=single-node\" -v /usr/local/es/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml -d docker.elastic.co/elasticsearch/elasticsearch:7.1.0\r\n```\r\n\r\n```\r\ndocker run --name kibana7.1.0 -p 5601:5601 -v /usr/local/kibana/kibana.yml:/usr/share/kibana/config/kibana.yml -d docker.elastic.co/kibana/kibana:7.1.0\r\n```\r\nkibana.yml\r\n```\r\n# Default Kibana configuration for docker target\r\nserver.name: \"huha-kibana\"\r\n#elasticsearch.host: \"http://127.0.0.1:9200\"\r\nserver.host: \"0.0.0.0\"\r\n#server.port: 5601\r\n\r\n```\r\nelasticsearch.yml\r\n```\r\ncluster.name: \"huha-docker-cluster\"\r\nnetwork.host: 0.0.0.0\r\nnode.name: node-huha-1\r\nbootstrap.memory_lock: true\r\nhttp.cors.enabled: true\r\nhttp.cors.allow-origin: \"*\"\r\n```\r\n\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}