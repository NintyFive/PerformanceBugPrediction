[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63068762","html_url":"https://github.com/elastic/elasticsearch/issues/8483#issuecomment-63068762","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8483","id":63068762,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMDY4NzYy","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-11-14T14:08:49Z","updated_at":"2014-11-14T14:08:49Z","author_association":"CONTRIBUTOR","body":"Hi @hbartnick\n\nYou'll be pleased to hear that in 1.4.0, all but one of your cases works as expected.  The only issue that fails can be simplified to the following:\n\n```\nDELETE /test\nPUT /test/\n{\n  \"mappings\": {\n    \"test\": {\n      \"dynamic_templates\": [\n        {\n          \"foo\": {\n            \"match\": \"foo*\",\n            \"mapping\": {\n              \"type\": \"object\",\n              \"properties\": {\n                \"one\": {\n                  \"type\": \"string\",\n                  \"copy_to\": [\n                    \"{name}.two\"\n                  ]\n                },\n                \"two\": {\n                  \"type\": \"string\"\n                }\n              }\n            }\n          }\n        }\n      ]\n    }\n  }\n}\n```\n\nFails with: MapperParsingException[attempt to copy value to non-existing object [foo.two]]\n\n```\nPUT /test/test/1\n{\n  \"foo\": { \"one\": \"bar\"}\n}\n```\n\nSucceeds and creates the correct mapping\n\n```\nPUT /test/test/1\n{\n  \"foo\": { \"three\": \"bar\"}\n}\n```\n\nThe first request now works correctly:\n\n```\nPUT /test/test/1\n{\n  \"foo\": { \"one\": \"bar\"}\n}\n```\n\nSo it looks like an issue with the order that dynamic mappings are updated.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63437703","html_url":"https://github.com/elastic/elasticsearch/issues/8483#issuecomment-63437703","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8483","id":63437703,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNDM3NzAz","user":{"login":"elasticjava","id":5220219,"node_id":"MDQ6VXNlcjUyMjAyMTk=","avatar_url":"https://avatars3.githubusercontent.com/u/5220219?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticjava","html_url":"https://github.com/elasticjava","followers_url":"https://api.github.com/users/elasticjava/followers","following_url":"https://api.github.com/users/elasticjava/following{/other_user}","gists_url":"https://api.github.com/users/elasticjava/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticjava/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticjava/subscriptions","organizations_url":"https://api.github.com/users/elasticjava/orgs","repos_url":"https://api.github.com/users/elasticjava/repos","events_url":"https://api.github.com/users/elasticjava/events{/privacy}","received_events_url":"https://api.github.com/users/elasticjava/received_events","type":"User","site_admin":false},"created_at":"2014-11-18T08:39:01Z","updated_at":"2014-11-18T08:39:01Z","author_association":"CONTRIBUTOR","body":"Hi @clintongormley - thanks a lot for your prompt reply!\n\nSo trying to adopt the suggestions I first insert a dummy document for the uncreated sections:\nbut now I realize, that data is merged together in the intentional nested sections. I'm confused...\n\nsee: https://gist.github.com/hbartnick/41b683e019862f916d3c\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64118592","html_url":"https://github.com/elastic/elasticsearch/issues/8483#issuecomment-64118592","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8483","id":64118592,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MTE4NTky","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-11-23T13:54:14Z","updated_at":"2014-11-23T13:54:14Z","author_association":"CONTRIBUTOR","body":"Hi @hbartnick \n\nThe problem is that your query is not doing what you think.  The `match` query does not support a query syntax (eg `Beitragstitel AND Arbeitstitel*`).  That's the `query_string` query.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64189906","html_url":"https://github.com/elastic/elasticsearch/issues/8483#issuecomment-64189906","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8483","id":64189906,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MTg5OTA2","user":{"login":"elasticjava","id":5220219,"node_id":"MDQ6VXNlcjUyMjAyMTk=","avatar_url":"https://avatars3.githubusercontent.com/u/5220219?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticjava","html_url":"https://github.com/elasticjava","followers_url":"https://api.github.com/users/elasticjava/followers","following_url":"https://api.github.com/users/elasticjava/following{/other_user}","gists_url":"https://api.github.com/users/elasticjava/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticjava/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticjava/subscriptions","organizations_url":"https://api.github.com/users/elasticjava/orgs","repos_url":"https://api.github.com/users/elasticjava/repos","events_url":"https://api.github.com/users/elasticjava/events{/privacy}","received_events_url":"https://api.github.com/users/elasticjava/received_events","type":"User","site_admin":false},"created_at":"2014-11-24T12:54:21Z","updated_at":"2014-11-24T12:54:21Z","author_association":"CONTRIBUTOR","body":"Hi @clintongormley,\nthanks a lot! my fault....\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/70631246","html_url":"https://github.com/elastic/elasticsearch/issues/8483#issuecomment-70631246","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8483","id":70631246,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNjMxMjQ2","user":{"login":"elasticjava","id":5220219,"node_id":"MDQ6VXNlcjUyMjAyMTk=","avatar_url":"https://avatars3.githubusercontent.com/u/5220219?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticjava","html_url":"https://github.com/elasticjava","followers_url":"https://api.github.com/users/elasticjava/followers","following_url":"https://api.github.com/users/elasticjava/following{/other_user}","gists_url":"https://api.github.com/users/elasticjava/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticjava/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticjava/subscriptions","organizations_url":"https://api.github.com/users/elasticjava/orgs","repos_url":"https://api.github.com/users/elasticjava/repos","events_url":"https://api.github.com/users/elasticjava/events{/privacy}","received_events_url":"https://api.github.com/users/elasticjava/received_events","type":"User","site_admin":false},"created_at":"2015-01-20T10:09:32Z","updated_at":"2015-01-20T10:19:55Z","author_association":"CONTRIBUTOR","body":"we compensate the error as follows:\n1. after index creation we index only one document, containing all simplified structures of object-fields and delete this document immediately. the necessary structures in elasticsearch are now present.\n2. for those fields we donÂ´t know at index creation time we react on the MapperParsingException in a compensating loop, extract the information for a dummy-document we immediately index and delete in the same manner as before and try again the last index request:\n\n``` java\n    public static String createInitializerJson(MapperParsingException e) {\n        String message = e.getMessage();\n        String field = message.substring(message.indexOf('[') + 1, message.indexOf(']'));\n        String initializerJsonPrefix = \"{\\\"\" + field.replace(\".\", \"\\\": { \\\"\");\n        int countOpens = initializerJsonPrefix.length() - initializerJsonPrefix.replace(\"{\", \"\").length();\n        return initializerJsonPrefix + \"\\\": \\\"dummy\\\"\" + stringOfSize(countOpens, '}');\n    }\n    public static String stringOfSize(int size, char ch) {\n        final char[] array = new char[size];\n        Arrays.fill(array, ch);\n        return new String(array);\n    }\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/99788266","html_url":"https://github.com/elastic/elasticsearch/issues/8483#issuecomment-99788266","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8483","id":99788266,"node_id":"MDEyOklzc3VlQ29tbWVudDk5Nzg4MjY2","user":{"login":"konradkonrad","id":3705643,"node_id":"MDQ6VXNlcjM3MDU2NDM=","avatar_url":"https://avatars3.githubusercontent.com/u/3705643?v=4","gravatar_id":"","url":"https://api.github.com/users/konradkonrad","html_url":"https://github.com/konradkonrad","followers_url":"https://api.github.com/users/konradkonrad/followers","following_url":"https://api.github.com/users/konradkonrad/following{/other_user}","gists_url":"https://api.github.com/users/konradkonrad/gists{/gist_id}","starred_url":"https://api.github.com/users/konradkonrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konradkonrad/subscriptions","organizations_url":"https://api.github.com/users/konradkonrad/orgs","repos_url":"https://api.github.com/users/konradkonrad/repos","events_url":"https://api.github.com/users/konradkonrad/events{/privacy}","received_events_url":"https://api.github.com/users/konradkonrad/received_events","type":"User","site_admin":false},"created_at":"2015-05-07T09:18:44Z","updated_at":"2015-05-07T09:18:44Z","author_association":"CONTRIBUTOR","body":"It seems to me, the problem was already expected in this comment?\n\n``` java\nif (mapper == null) {\n    //TODO: Create an object dynamically?\n    throw new MapperParsingException(\"attempt to copy value to non-existing object [\" + field + \"]\");\n}\n```\n\nhttps://github.com/elastic/elasticsearch/blob/4f14af21c5b9213e4b1add84d6d880eb20451e7d/src/main/java/org/elasticsearch/index/mapper/DocumentParser.java#L638\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/150390617","html_url":"https://github.com/elastic/elasticsearch/issues/8483#issuecomment-150390617","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8483","id":150390617,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MDM5MDYxNw==","user":{"login":"konradkonrad","id":3705643,"node_id":"MDQ6VXNlcjM3MDU2NDM=","avatar_url":"https://avatars3.githubusercontent.com/u/3705643?v=4","gravatar_id":"","url":"https://api.github.com/users/konradkonrad","html_url":"https://github.com/konradkonrad","followers_url":"https://api.github.com/users/konradkonrad/followers","following_url":"https://api.github.com/users/konradkonrad/following{/other_user}","gists_url":"https://api.github.com/users/konradkonrad/gists{/gist_id}","starred_url":"https://api.github.com/users/konradkonrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konradkonrad/subscriptions","organizations_url":"https://api.github.com/users/konradkonrad/orgs","repos_url":"https://api.github.com/users/konradkonrad/repos","events_url":"https://api.github.com/users/konradkonrad/events{/privacy}","received_events_url":"https://api.github.com/users/konradkonrad/received_events","type":"User","site_admin":false},"created_at":"2015-10-22T23:56:37Z","updated_at":"2015-10-22T23:56:37Z","author_association":"CONTRIBUTOR","body":"possible duplicate #11237 ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/150653469","html_url":"https://github.com/elastic/elasticsearch/issues/8483#issuecomment-150653469","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8483","id":150653469,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MDY1MzQ2OQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-10-23T18:20:01Z","updated_at":"2015-10-23T18:20:01Z","author_association":"CONTRIBUTOR","body":"Agreed - closing in favor of #11237\n","performed_via_github_app":null}]