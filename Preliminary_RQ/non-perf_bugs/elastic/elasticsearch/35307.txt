{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/35307","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35307/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35307/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35307/events","html_url":"https://github.com/elastic/elasticsearch/issues/35307","id":377919470,"node_id":"MDU6SXNzdWUzNzc5MTk0NzA=","number":35307,"title":"Minor bug in \"Java High Level REST Client->Search Scroll API\" documentation","user":{"login":"vmaldosan","id":6085286,"node_id":"MDQ6VXNlcjYwODUyODY=","avatar_url":"https://avatars0.githubusercontent.com/u/6085286?v=4","gravatar_id":"","url":"https://api.github.com/users/vmaldosan","html_url":"https://github.com/vmaldosan","followers_url":"https://api.github.com/users/vmaldosan/followers","following_url":"https://api.github.com/users/vmaldosan/following{/other_user}","gists_url":"https://api.github.com/users/vmaldosan/gists{/gist_id}","starred_url":"https://api.github.com/users/vmaldosan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vmaldosan/subscriptions","organizations_url":"https://api.github.com/users/vmaldosan/orgs","repos_url":"https://api.github.com/users/vmaldosan/repos","events_url":"https://api.github.com/users/vmaldosan/events{/privacy}","received_events_url":"https://api.github.com/users/vmaldosan/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-11-06T16:10:44Z","updated_at":"2018-11-06T16:48:33Z","closed_at":"2018-11-06T16:23:34Z","author_association":"NONE","active_lock_reason":null,"body":"### The problem\r\nWhile reading about the Search Scroll API, I saw what I believe is a minor bug in the [Full example section](https://www.elastic.co/guide/en/elasticsearch/client/java-rest/current/java-rest-high-search-scroll.html#java-rest-high-search-scroll-example):\r\n\r\n```\r\n...\r\nSearchHit[] searchHits = searchResponse.getHits().getHits();\r\nwhile (searchHits != null && searchHits.length > 0) { (2)\r\n    SearchScrollRequest scrollRequest = new SearchScrollRequest(scrollId); (3)\r\n    scrollRequest.scroll(scroll);\r\n    searchResponse = client.scroll(scrollRequest, RequestOptions.DEFAULT);\r\n    scrollId = searchResponse.getScrollId();\r\n    searchHits = searchResponse.getHits().getHits();\r\n    (4)\r\n}\r\n...\r\n```\r\nand then:\r\n> (4) Process the returned search results\r\n\r\nI might be mistaken, but if we process _searchHits_ where (4) is placed right now, we'd lose the first batch of results.\r\n\r\n### The solution\r\nPlace (4) before _searchHits_ is updated with a new batch of results.","closed_by":{"login":"vladimirdolzhenko","id":209440,"node_id":"MDQ6VXNlcjIwOTQ0MA==","avatar_url":"https://avatars0.githubusercontent.com/u/209440?v=4","gravatar_id":"","url":"https://api.github.com/users/vladimirdolzhenko","html_url":"https://github.com/vladimirdolzhenko","followers_url":"https://api.github.com/users/vladimirdolzhenko/followers","following_url":"https://api.github.com/users/vladimirdolzhenko/following{/other_user}","gists_url":"https://api.github.com/users/vladimirdolzhenko/gists{/gist_id}","starred_url":"https://api.github.com/users/vladimirdolzhenko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vladimirdolzhenko/subscriptions","organizations_url":"https://api.github.com/users/vladimirdolzhenko/orgs","repos_url":"https://api.github.com/users/vladimirdolzhenko/repos","events_url":"https://api.github.com/users/vladimirdolzhenko/events{/privacy}","received_events_url":"https://api.github.com/users/vladimirdolzhenko/received_events","type":"User","site_admin":false},"performed_via_github_app":null}