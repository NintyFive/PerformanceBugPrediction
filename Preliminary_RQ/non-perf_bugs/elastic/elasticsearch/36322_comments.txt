[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/445148932","html_url":"https://github.com/elastic/elasticsearch/issues/36322#issuecomment-445148932","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36322","id":445148932,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NTE0ODkzMg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-12-07T07:39:16Z","updated_at":"2018-12-07T07:39:16Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-analytics-geo","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/445150364","html_url":"https://github.com/elastic/elasticsearch/issues/36322#issuecomment-445150364","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36322","id":445150364,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NTE1MDM2NA==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2018-12-07T07:46:52Z","updated_at":"2018-12-07T07:46:52Z","author_association":"MEMBER","body":"The sort order is based on count and there is no guarantee that equals element will not be reordered as a result of the sort. We could change to a stable sort or change the documentation to explain how the sort works but why are you using the `composite` aggregation and the bucket sort instead of a `terms` aggregation sorted by `_count` ? In the latter case you could add a tiebreaker to your sort based on the `_key` to make sure that equals count are sorted based on the value of the term ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/445223505","html_url":"https://github.com/elastic/elasticsearch/issues/36322#issuecomment-445223505","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36322","id":445223505,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NTIyMzUwNQ==","user":{"login":"odespesse","id":6697617,"node_id":"MDQ6VXNlcjY2OTc2MTc=","avatar_url":"https://avatars2.githubusercontent.com/u/6697617?v=4","gravatar_id":"","url":"https://api.github.com/users/odespesse","html_url":"https://github.com/odespesse","followers_url":"https://api.github.com/users/odespesse/followers","following_url":"https://api.github.com/users/odespesse/following{/other_user}","gists_url":"https://api.github.com/users/odespesse/gists{/gist_id}","starred_url":"https://api.github.com/users/odespesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/odespesse/subscriptions","organizations_url":"https://api.github.com/users/odespesse/orgs","repos_url":"https://api.github.com/users/odespesse/repos","events_url":"https://api.github.com/users/odespesse/events{/privacy}","received_events_url":"https://api.github.com/users/odespesse/received_events","type":"User","site_admin":false},"created_at":"2018-12-07T12:50:35Z","updated_at":"2018-12-07T12:50:35Z","author_association":"NONE","body":"This is a simplified version of my real use case. \r\n\r\nI need to aggregate 3 different fields together. I tried with `terms` but the result of 3 nested aggregations is a pain to parse and the `composite` aggregation seems to be the best solution for this scenario.\r\n\r\nWhat seems strange to me is that on every attempts I tried, everything is sorted as expected except the first one which is misplaced at the end. It is like if the internal ElasticSearch \"loop\" that sort every buckets do the right thing except for the first item.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/445348630","html_url":"https://github.com/elastic/elasticsearch/issues/36322#issuecomment-445348630","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36322","id":445348630,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NTM0ODYzMA==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2018-12-07T20:00:12Z","updated_at":"2018-12-07T20:00:12Z","author_association":"MEMBER","body":">  It is like if the internal ElasticSearch \"loop\" that sort every buckets do the right thing except for the first item.\r\n\r\nI didn't look carefully the implementation of the priority queue we use to perform the sort but as I said in my previous comment the output of the sort is correct. Though I wonder why we use a priority queue rather than a list and then `Collections#sort` which provides stable sort.\r\n@dimitris-athanasiou any reason to prefer a priority queue here ? I understand that it can be faster if the buckets are truncated but that seems an edge case ? ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/445360058","html_url":"https://github.com/elastic/elasticsearch/issues/36322#issuecomment-445360058","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36322","id":445360058,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NTM2MDA1OA==","user":{"login":"dimitris-athanasiou","id":9351617,"node_id":"MDQ6VXNlcjkzNTE2MTc=","avatar_url":"https://avatars3.githubusercontent.com/u/9351617?v=4","gravatar_id":"","url":"https://api.github.com/users/dimitris-athanasiou","html_url":"https://github.com/dimitris-athanasiou","followers_url":"https://api.github.com/users/dimitris-athanasiou/followers","following_url":"https://api.github.com/users/dimitris-athanasiou/following{/other_user}","gists_url":"https://api.github.com/users/dimitris-athanasiou/gists{/gist_id}","starred_url":"https://api.github.com/users/dimitris-athanasiou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dimitris-athanasiou/subscriptions","organizations_url":"https://api.github.com/users/dimitris-athanasiou/orgs","repos_url":"https://api.github.com/users/dimitris-athanasiou/repos","events_url":"https://api.github.com/users/dimitris-athanasiou/events{/privacy}","received_events_url":"https://api.github.com/users/dimitris-athanasiou/received_events","type":"User","site_admin":false},"created_at":"2018-12-07T20:44:39Z","updated_at":"2018-12-07T20:47:13Z","author_association":"CONTRIBUTOR","body":"@jimczi Indeed, the reason a priority queue was used was because it seemed suitable for also dealing with trimmed buckets in an efficient way. I vaguely recall discussing this and deciding it was a desirable trade-off against sort stability.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/445887331","html_url":"https://github.com/elastic/elasticsearch/issues/36322#issuecomment-445887331","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36322","id":445887331,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NTg4NzMzMQ==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2018-12-10T16:52:19Z","updated_at":"2018-12-10T16:52:19Z","author_association":"MEMBER","body":"We discussed this offline and we agreed that we should switch to a List and use `Collections#sort`. This should preserve the order for equal values and simplify the code since we don't really need a priority queue.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/446286594","html_url":"https://github.com/elastic/elasticsearch/issues/36322#issuecomment-446286594","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36322","id":446286594,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NjI4NjU5NA==","user":{"login":"govi20","id":4025675,"node_id":"MDQ6VXNlcjQwMjU2NzU=","avatar_url":"https://avatars1.githubusercontent.com/u/4025675?v=4","gravatar_id":"","url":"https://api.github.com/users/govi20","html_url":"https://github.com/govi20","followers_url":"https://api.github.com/users/govi20/followers","following_url":"https://api.github.com/users/govi20/following{/other_user}","gists_url":"https://api.github.com/users/govi20/gists{/gist_id}","starred_url":"https://api.github.com/users/govi20/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/govi20/subscriptions","organizations_url":"https://api.github.com/users/govi20/orgs","repos_url":"https://api.github.com/users/govi20/repos","events_url":"https://api.github.com/users/govi20/events{/privacy}","received_events_url":"https://api.github.com/users/govi20/received_events","type":"User","site_admin":false},"created_at":"2018-12-11T17:21:40Z","updated_at":"2018-12-11T17:21:40Z","author_association":"NONE","body":"I would like to work on it.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/448067556","html_url":"https://github.com/elastic/elasticsearch/issues/36322#issuecomment-448067556","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36322","id":448067556,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0ODA2NzU1Ng==","user":{"login":"SivagurunathanV","id":9652470,"node_id":"MDQ6VXNlcjk2NTI0NzA=","avatar_url":"https://avatars0.githubusercontent.com/u/9652470?v=4","gravatar_id":"","url":"https://api.github.com/users/SivagurunathanV","html_url":"https://github.com/SivagurunathanV","followers_url":"https://api.github.com/users/SivagurunathanV/followers","following_url":"https://api.github.com/users/SivagurunathanV/following{/other_user}","gists_url":"https://api.github.com/users/SivagurunathanV/gists{/gist_id}","starred_url":"https://api.github.com/users/SivagurunathanV/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SivagurunathanV/subscriptions","organizations_url":"https://api.github.com/users/SivagurunathanV/orgs","repos_url":"https://api.github.com/users/SivagurunathanV/repos","events_url":"https://api.github.com/users/SivagurunathanV/events{/privacy}","received_events_url":"https://api.github.com/users/SivagurunathanV/received_events","type":"User","site_admin":false},"created_at":"2018-12-18T01:55:28Z","updated_at":"2018-12-18T01:55:28Z","author_association":"CONTRIBUTOR","body":"I would like to work on this issue if @govi20 is not working on it.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/448082688","html_url":"https://github.com/elastic/elasticsearch/issues/36322#issuecomment-448082688","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36322","id":448082688,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0ODA4MjY4OA==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2018-12-18T03:20:26Z","updated_at":"2018-12-18T03:20:26Z","author_association":"MEMBER","body":"Looks like someone just sent a PR for this (#36748)\r\n\r\nIf you're still interested in contributing, you can generally just leave a note that says \"I'm going to start working on this\" then raise a PR when you are ready.  No need to get approval first.\r\n\r\nThanks for helping out!  We have more `\"help wanted\"` and `\"good first issue\"` tickets if you want to look around for other bugs that need fixing :)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/448195755","html_url":"https://github.com/elastic/elasticsearch/issues/36322#issuecomment-448195755","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36322","id":448195755,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0ODE5NTc1NQ==","user":{"login":"Razi007","id":3605667,"node_id":"MDQ6VXNlcjM2MDU2Njc=","avatar_url":"https://avatars2.githubusercontent.com/u/3605667?v=4","gravatar_id":"","url":"https://api.github.com/users/Razi007","html_url":"https://github.com/Razi007","followers_url":"https://api.github.com/users/Razi007/followers","following_url":"https://api.github.com/users/Razi007/following{/other_user}","gists_url":"https://api.github.com/users/Razi007/gists{/gist_id}","starred_url":"https://api.github.com/users/Razi007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Razi007/subscriptions","organizations_url":"https://api.github.com/users/Razi007/orgs","repos_url":"https://api.github.com/users/Razi007/repos","events_url":"https://api.github.com/users/Razi007/events{/privacy}","received_events_url":"https://api.github.com/users/Razi007/received_events","type":"User","site_admin":false},"created_at":"2018-12-18T11:54:31Z","updated_at":"2018-12-18T11:54:31Z","author_association":"NONE","body":"can we still work on  issue or raise PR if there is already a PR raised.  ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/448204511","html_url":"https://github.com/elastic/elasticsearch/issues/36322#issuecomment-448204511","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36322","id":448204511,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0ODIwNDUxMQ==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2018-12-18T12:30:11Z","updated_at":"2018-12-18T12:30:11Z","author_association":"MEMBER","body":"I would avoid working on issues that have an active PR.  Sometimes a PR might go dormant (contributor gets busy and abandons the PR, technical issues make it close, etc), in which case we'll close the PR and can be worked on again.\r\n\r\nBut if the PR is active and being worked on, it's probably best to choose a different issue to work on.","performed_via_github_app":null}]