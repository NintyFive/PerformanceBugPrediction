{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/27147","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27147/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27147/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27147/events","html_url":"https://github.com/elastic/elasticsearch/issues/27147","id":269100197,"node_id":"MDU6SXNzdWUyNjkxMDAxOTc=","number":27147,"title":"Inconsistent exception types thrown while parsing XContent","user":{"login":"olcbean","id":26058559,"node_id":"MDQ6VXNlcjI2MDU4NTU5","avatar_url":"https://avatars3.githubusercontent.com/u/26058559?v=4","gravatar_id":"","url":"https://api.github.com/users/olcbean","html_url":"https://github.com/olcbean","followers_url":"https://api.github.com/users/olcbean/followers","following_url":"https://api.github.com/users/olcbean/following{/other_user}","gists_url":"https://api.github.com/users/olcbean/gists{/gist_id}","starred_url":"https://api.github.com/users/olcbean/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olcbean/subscriptions","organizations_url":"https://api.github.com/users/olcbean/orgs","repos_url":"https://api.github.com/users/olcbean/repos","events_url":"https://api.github.com/users/olcbean/events{/privacy}","received_events_url":"https://api.github.com/users/olcbean/received_events","type":"User","site_admin":false},"labels":[{"id":144797810,"node_id":"MDU6TGFiZWwxNDQ3OTc4MTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Core","name":":Core/Infra/Core","color":"0e8a16","default":false,"description":"Core issues without another label"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2017-10-27T13:04:49Z","updated_at":"2018-01-26T12:48:09Z","closed_at":"2018-01-26T12:48:09Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"In most cases, if the expected `START_OBJECT` is not detected, an `IllegalArgumentException` is thrown :\r\nhttps://github.com/elastic/elasticsearch/blob/b88dbe8f49745a26ee92476408e17cc0c2d40693/core/src/main/java/org/elasticsearch/common/xcontent/XContentParserUtils.java#L75-L80\r\n\r\nHowever `ObjectParser` throws `IllegalStateException` : \r\nhttps://github.com/elastic/elasticsearch/blob/b88dbe8f49745a26ee92476408e17cc0c2d40693/core/src/main/java/org/elasticsearch/common/xcontent/ObjectParser.java#L149-L151\r\n\r\nWhen parsing `mget` two different exception types may be thrown : \r\n`ParsingException`\r\nhttps://github.com/elastic/elasticsearch/blob/b88dbe8f49745a26ee92476408e17cc0c2d40693/core/src/main/java/org/elasticsearch/action/get/MultiGetRequest.java#L323-L330\r\n\r\n`IllegalArgumentException` \r\nhttps://github.com/elastic/elasticsearch/blob/b88dbe8f49745a26ee92476408e17cc0c2d40693/core/src/main/java/org/elasticsearch/action/get/MultiGetRequest.java#L364-L366\r\n\r\nwhile `RepositoryData` consistently throws `ElasticsearchParseException` : \r\nhttps://github.com/elastic/elasticsearch/blob/b88dbe8f49745a26ee92476408e17cc0c2d40693/core/src/main/java/org/elasticsearch/repositories/RepositoryData.java#L487\r\n\r\n---\r\nI think that it would be much cleaner if only one exception type is used (at least from now on).\r\n\r\nFor example what exception type should be thrown when a stricter validation of query field names is introduced (#26013). A different one per request (based on the exception thrown till now in the request)? Or an exception of type X?\r\n\r\nOr maybe some of the exception types should be changed? For example can `IllegalStateException` be replaced by `IllegalArgumentException`?","closed_by":{"login":"olcbean","id":26058559,"node_id":"MDQ6VXNlcjI2MDU4NTU5","avatar_url":"https://avatars3.githubusercontent.com/u/26058559?v=4","gravatar_id":"","url":"https://api.github.com/users/olcbean","html_url":"https://github.com/olcbean","followers_url":"https://api.github.com/users/olcbean/followers","following_url":"https://api.github.com/users/olcbean/following{/other_user}","gists_url":"https://api.github.com/users/olcbean/gists{/gist_id}","starred_url":"https://api.github.com/users/olcbean/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olcbean/subscriptions","organizations_url":"https://api.github.com/users/olcbean/orgs","repos_url":"https://api.github.com/users/olcbean/repos","events_url":"https://api.github.com/users/olcbean/events{/privacy}","received_events_url":"https://api.github.com/users/olcbean/received_events","type":"User","site_admin":false},"performed_via_github_app":null}