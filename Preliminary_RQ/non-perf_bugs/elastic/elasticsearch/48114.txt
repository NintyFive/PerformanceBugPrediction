{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/48114","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48114/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48114/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48114/events","html_url":"https://github.com/elastic/elasticsearch/issues/48114","id":507725438,"node_id":"MDU6SXNzdWU1MDc3MjU0Mzg=","number":48114,"title":"[CI] 6.8 BWC tests against many 5.6.x versions failing","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"labels":[{"id":106454670,"node_id":"MDU6TGFiZWwxMDY0NTQ2NzA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Build","name":":Delivery/Build","color":"0e8a16","default":false,"description":"Build or test infrastructure"},{"id":836542781,"node_id":"MDU6TGFiZWw4MzY1NDI3ODE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Engine","name":":Distributed/Engine","color":"0e8a16","default":false,"description":"Anything around managing Lucene and the Translog in an open shard."},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-10-16T09:21:49Z","updated_at":"2020-11-11T21:47:40Z","closed_at":"2019-10-16T13:59:45Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"These failures started occurring on 15th October.  After that many 6.8 BWC tests against 5.6.x versions have failed.  For example, look at the failure pattern in:\r\n\r\n* https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.8+default-distro+bwc/BWC_VERSION=5.6.0,nodes=centos-7&&immutable\r\n* https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.8+default-distro+bwc/BWC_VERSION=5.6.1,nodes=centos-7&&immutable\r\n* https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.8+default-distro+bwc/BWC_VERSION=5.6.2,nodes=centos-7&&immutable\r\n* https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.8+default-distro+bwc/BWC_VERSION=5.6.3,nodes=centos-7&&immutable\r\n* https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.8+default-distro+bwc/BWC_VERSION=5.6.4,nodes=centos-7&&immutable\r\n* https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.8+default-distro+bwc/BWC_VERSION=5.6.12,nodes=centos-7&&immutable\r\n* https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.8+default-distro+bwc/BWC_VERSION=5.6.15,nodes=centos-7&&immutable\r\n\r\nNot all versions are affected.  For example 5.6.13 has been fine:\r\n\r\n* https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.8+default-distro+bwc/BWC_VERSION=5.6.13,nodes=centos-7&&immutable\r\n\r\nThe errors vary.  For example:\r\n\r\n* https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.8+default-distro+bwc/BWC_VERSION=5.6.10,nodes=centos-7&&immutable/210/console is `java.lang.AssertionError: IndexVersionValue{version=1, seqNo=-2, term=1, location=null}` \r\n* https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.8+default-distro+bwc/BWC_VERSION=5.6.6,nodes=centos-7&&immutable/210/console is `java.lang.AssertionError: IndexVersionValue{version=1, seqNo=-2, term=1, location=null}`\r\n* https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.8+default-distro+bwc/BWC_VERSION=5.6.2,nodes=centos-7&&immutable/210/console is a suite timeout\r\n* https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.8+default-distro+bwc/BWC_VERSION=5.6.4,nodes=centos-7&&immutable/210/console is a suite timeout\r\n\r\nInfra has also noticed that some of the workers are running out of disk space due to huge console logs.  For example https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.8+default-distro+bwc/BWC_VERSION=5.6.6,nodes=centos-7&&immutable/210/consoleText is 352MB.\r\n\r\nWas something changed recently that increased the parallelism of 6.8 BWC tests?  If so then that probably explains it.  But it seems that the level of parallelism is beyond what the currently configured workers can cope with.\r\n\r\nI'm tagging the distributed team in case the `java.lang.AssertionError: IndexVersionValue{version=1, seqNo=-2, term=1, location=null}` errors are a worry, and also the core build team in case this is all down to trying to run too much in parallel.","closed_by":{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false},"performed_via_github_app":null}