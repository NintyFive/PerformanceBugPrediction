{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/40889","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40889/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40889/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40889/events","html_url":"https://github.com/elastic/elasticsearch/issues/40889","id":429672512,"node_id":"MDU6SXNzdWU0Mjk2NzI1MTI=","number":40889,"title":"CLI tools in linux only work from within $ES_HOME","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"labels":[{"id":114977275,"node_id":"MDU6TGFiZWwxMTQ5NzcyNzU=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Packaging","name":":Delivery/Packaging","color":"0e8a16","default":false,"description":"RPM and deb packaging, tar and zip archives, shell and batch scripts"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"},{"id":92913658,"node_id":"MDU6TGFiZWw5MjkxMzY1OA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/blocker","name":"blocker","color":"e11d21","default":false,"description":null},{"id":1302526309,"node_id":"MDU6TGFiZWwxMzAyNTI2MzA5","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v7.0.0-rc2","name":"v7.0.0-rc2","color":"dddddd","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-04-05T09:50:48Z","updated_at":"2020-11-11T21:55:53Z","closed_at":"2019-04-05T21:42:15Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"In https://github.com/elastic/elasticsearch/blob/master/distribution/src/bin/elasticsearch-cli, \r\n\r\nwhen we \r\n```\r\nsource \"`dirname \"$0\"`\"/elasticsearch-env\r\n```\r\n\r\nwe cd in `$ES_HOME` changing the pwd. However, the `dirname` commands in the following \r\n```\r\nfor additional_source in \"${additional_sources[@]}\"\r\ndo\r\n  source \"`dirname \"$0\"`\"/$additional_source\r\ndone\r\n```\r\n\r\nwill have an output that is always relevant to the current dir from where the user ran the cli command. \r\n\r\nThe combination of these two mean, that the `source` command will try to source a file, the path of which will be the concatenation of `$ES_HOME` and the dir from where the user ran the cli command. This will only work when the user runs the command from `$ES_HOME`. Example output from @pheyos who raised this: \r\n\r\n```\r\nrobert@elastic-ro:~/es_versions/700_bc1/elasticsearch-7.0.0/bin$ ./elasticsearch-setup-passwords interactive\r\n./elasticsearch-cli: line 10: ./x-pack-env: No such file or directory\r\n```\r\n\r\n`./elasticsearch-cli: line 10: ./x-pack-env: No such file or directory` is because the pwd at that time is `$ES_HOME` and not `$ES_HOME/bin`","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}