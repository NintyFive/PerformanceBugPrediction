{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/21639","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21639/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21639/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21639/events","html_url":"https://github.com/elastic/elasticsearch/issues/21639","id":190229108,"node_id":"MDU6SXNzdWUxOTAyMjkxMDg=","number":21639,"title":"unexpect result  when time field mapping contains store: true","user":{"login":"sshling","id":661568,"node_id":"MDQ6VXNlcjY2MTU2OA==","avatar_url":"https://avatars3.githubusercontent.com/u/661568?v=4","gravatar_id":"","url":"https://api.github.com/users/sshling","html_url":"https://github.com/sshling","followers_url":"https://api.github.com/users/sshling/followers","following_url":"https://api.github.com/users/sshling/following{/other_user}","gists_url":"https://api.github.com/users/sshling/gists{/gist_id}","starred_url":"https://api.github.com/users/sshling/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sshling/subscriptions","organizations_url":"https://api.github.com/users/sshling/orgs","repos_url":"https://api.github.com/users/sshling/repos","events_url":"https://api.github.com/users/sshling/events{/privacy}","received_events_url":"https://api.github.com/users/sshling/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2016-11-18T03:40:47Z","updated_at":"2016-11-21T10:39:12Z","closed_at":"2016-11-19T14:05:10Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"\r\n**Elasticsearch version**: 2.1.2  or newest\r\n\r\n```\r\nPUT store\r\n{\r\n   \"mappings\": {\r\n      \"performance\": {\r\n         \"_source\": {\r\n            \"enabled\": false\r\n         },\r\n         \"properties\": {\r\n            \"host\": {\r\n               \"store\": true,\r\n               \"type\": \"long\"\r\n            },\r\n            \"time\": {\r\n               \"format\": \"epoch_millis\",\r\n                \"store\": true,\r\n               \"type\": \"date\"\r\n            }\r\n         }\r\n      }\r\n   }\r\n}\r\nPOST store/performance\r\n{\r\n    \"host\":1234,\r\n    \"time\":1479264717\r\n}\r\n\r\nGET  store/_search\r\n{\r\n  \"fields\": [\r\n    \"*\",\r\n    \"_source\"\r\n  ],\r\n  \"fielddata_fields\": [\r\n    \"time\"\r\n  ]\r\n}\r\n```\r\nquery result:\r\n\r\n```\r\n\"time\": [\r\n    \"1479144300000\",\r\n    1479144300000\r\n  ]\r\n```\r\n\r\nBut expect result:\r\n\r\n```\r\n\"time\": [\r\n    1479144300000\r\n  ]\r\n```\r\n\r\nYes, setting the store the timestamp field does not make any sense ,but most ES users do not use the\r\nES very well ,so there is an inappropriate way to use it .However,I think that ES should consider this situation,to tolerate or compatible with this imappropriate use:\r\n1. This setting can be ignored when setting the index type mappings.\r\n2. Or to return to the search results,ignore the duplication of the results, take the value of the field from on place.\r\n\r\nI'm from China, my English is not very good ,can understand what I mean?","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}