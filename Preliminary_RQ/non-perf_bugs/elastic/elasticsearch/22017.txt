{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/22017","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22017/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22017/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22017/events","html_url":"https://github.com/elastic/elasticsearch/issues/22017","id":193994831,"node_id":"MDU6SXNzdWUxOTM5OTQ4MzE=","number":22017,"title":"`require_field_match` should include `_all` field query ","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"labels":[{"id":111549183,"node_id":"MDU6TGFiZWwxMTE1NDkxODM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Highlighting","name":":Search/Highlighting","color":"0e8a16","default":false,"description":"How a query matched a document"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2016-12-07T09:12:44Z","updated_at":"2016-12-14T10:37:41Z","closed_at":"2016-12-14T10:37:41Z","author_association":"MEMBER","active_lock_reason":null,"body":"Currently if `require_field_match` is true the highlighter extracts the parts of the query that target the field being highlighted. It becomes a little bit fuzzy when the `_all` field is involved since this field can match the content of any field but is not taken in account when `require_field_match` is true. The new `all_fields` mode solves this issue because the generated query now contains a reference to the requested fields (the query targets all fields instead of one big field that copied the other fields at indexing time). This also means that the highlighter behaves differently if `_all` is enabled or disabled. We could fix this discrepancy by changing the meaning of `require_field_match=true` to include queries that target the `_all` field. For accuracy we could extract `_all` field query only if the field being highlighted is included in `_all` (which can be disabled/enabled in the mapping).\r\n\r\nRelates to https://github.com/elastic/kibana/pull/9091","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}