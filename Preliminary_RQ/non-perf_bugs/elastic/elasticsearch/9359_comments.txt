[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/70606309","html_url":"https://github.com/elastic/elasticsearch/issues/9359#issuecomment-70606309","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9359","id":70606309,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNjA2MzA5","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"created_at":"2015-01-20T05:24:41Z","updated_at":"2015-01-20T05:24:41Z","author_association":"MEMBER","body":"To go a little deeper into this, I think that #788 was loosely similar to this issue (and rejected).\n\nI think that we could still provide for security with this behavior by allowing/requiring the whitelisting of template names similar to index name whitelisting. This way that template names could be given consistent names even if their associated index names are not consistent.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/70610280","html_url":"https://github.com/elastic/elasticsearch/issues/9359#issuecomment-70610280","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9359","id":70610280,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNjEwMjgw","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-01-20T06:28:30Z","updated_at":"2015-01-20T06:28:30Z","author_association":"MEMBER","body":"Rather than having a separate setting, I think it would make more sense to add an additional value to `action.auto_create_index`, so that valid values are `true`, `false`, or `template_only`.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/70647686","html_url":"https://github.com/elastic/elasticsearch/issues/9359#issuecomment-70647686","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9359","id":70647686,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNjQ3Njg2","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-01-20T12:41:49Z","updated_at":"2015-01-20T12:41:49Z","author_association":"CONTRIBUTOR","body":"> However, where index names aren't named consistently, which is pretty common, then it's a hassle to whitelist them all. It also may be difficult to do with plugins.\n\n@pickypg Template already use patterns, so there is _some_ consistency in their naming (otherwise the templates wouldn't work). It does seem redundant to have to specify them in two places though.  Templates can of course also be applied to manually created indices.\n\nHow many templates do people generally have? I'm guessing one or two max, which means specifying one or two patterns in `auto_create_index`, which doesn't seem terribly burdensome.\n\n> Rather than having a separate setting, I think it would make more sense to add an additional value to action.auto_create_index, so that valid values are true, false, or template_only.\n\n@rjernst the problem with reusing `auto_create_index` with the string `template_only` is that it already accepts strings representing index names.  See http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/docs-index_.html#index-creation\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/70684716","html_url":"https://github.com/elastic/elasticsearch/issues/9359#issuecomment-70684716","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9359","id":70684716,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNjg0NzE2","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-01-20T16:34:00Z","updated_at":"2015-01-20T16:34:00Z","author_association":"MEMBER","body":"@clintongormley Ah, I did not realize that was an existing feature.  IMO it would be better to have the trinary setting, and leave the templates to specify the patterns.  If it is true that only a small number of templates are normally used (which seems likely to me), then specifying the patterns here and in the templates seems cumbersome, and without added benefit (if you only have a few templates, why would you need to disable creation with some and not others?).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/70685343","html_url":"https://github.com/elastic/elasticsearch/issues/9359#issuecomment-70685343","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9359","id":70685343,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNjg1MzQz","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-01-20T16:37:01Z","updated_at":"2015-01-20T16:37:01Z","author_association":"CONTRIBUTOR","body":"@rjernst you may want to control index creation regardless of your use of templates, eg allowing .marvel and disallowing .script.\n\nbut your idea of a ternary setting might be a nice way of doing that  - maybe a quarternary setting: true/false/templates_only/custom.  With custom, you could specify your own patterns.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/70688677","html_url":"https://github.com/elastic/elasticsearch/issues/9359#issuecomment-70688677","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9359","id":70688677,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNjg4Njc3","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"created_at":"2015-01-20T16:53:08Z","updated_at":"2015-01-20T16:53:08Z","author_association":"MEMBER","body":"> Template already use patterns, so there is some consistency in their naming (otherwise the templates wouldn't work).\n\n@clintongormley I guess that I meant that the indices created aren't necessarily related between different templates. Since template names are much more arbitrary, they could be named consistently even when index names aren't. Therefore a setting that works for templates could easily match them like people do with index names.\n\n> How many templates do people generally have? I'm guessing one or two max, which means specifying one or two patterns in auto_create_index, which doesn't seem terribly burdensome.\n\nFor me, the problem is that plugins (like Marvel) and tools (like Logstash) will add their own templates as well, so ideally you can just blindly accept them while blocking accidental indices. For other cases, I would say that there are only a few templates (if any), but I have seen some users making heavier use of templates, which triggered this feature request.\n\nIt can also be a burden to constantly have to keep it up to date, which would be eliminated if something like `template_only` could be allowed. Perhaps problematically, that would allow dynamic whitelisting of indices by creating empty templates for the given index names, which I could see as both a positive and a big negative because it could allow a template to match `*` to effectively ignore the setting's intent. Adding it this way may also require adding blacklists to avoid things like `.script` from being enabled when it isn't expected to be.\n\n> you may want to control index creation regardless of your use of templates, eg allowing .marvel and disallowing .script.\n\nI agree with this.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/70689665","html_url":"https://github.com/elastic/elasticsearch/issues/9359#issuecomment-70689665","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9359","id":70689665,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNjg5NjY1","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-01-20T16:57:55Z","updated_at":"2015-01-20T16:57:55Z","author_association":"MEMBER","body":"> you may want to control index creation regardless of your use of templates, eg allowing .marvel and disallowing .script.\n\nDoesn't marvel create its indexes explicitly? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/70745061","html_url":"https://github.com/elastic/elasticsearch/issues/9359#issuecomment-70745061","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9359","id":70745061,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzQ1MDYx","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-01-20T22:12:57Z","updated_at":"2015-01-20T22:12:57Z","author_association":"MEMBER","body":"Marvel creates indices by indexing into them. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/70758715","html_url":"https://github.com/elastic/elasticsearch/issues/9359#issuecomment-70758715","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9359","id":70758715,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzU4NzE1","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-01-20T23:49:35Z","updated_at":"2015-01-20T23:49:35Z","author_association":"MEMBER","body":"Ah, thanks @bleskes, good to know.\n\nA quaternary setting sounds fine to me.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/72086636","html_url":"https://github.com/elastic/elasticsearch/issues/9359#issuecomment-72086636","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9359","id":72086636,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMDg2NjM2","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-01-29T19:21:56Z","updated_at":"2015-01-29T19:21:56Z","author_association":"CONTRIBUTOR","body":"It'd be nice to support real regexes for index names as well. See #9480\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/206016199","html_url":"https://github.com/elastic/elasticsearch/issues/9359#issuecomment-206016199","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9359","id":206016199,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjAxNjE5OQ==","user":{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false},"created_at":"2016-04-05T22:34:41Z","updated_at":"2016-04-05T22:34:41Z","author_association":"MEMBER","body":"> It also may be difficult to do with plugins.\n\nI'd like to revisit this part and consider plugins that need to create indices. Autocreate can simplify code, especially in the case of timeseries data being written. If a user disables auto-create completely, and installs a plugin that requires auto-create it is up to the plugin to detect this or it will wind up in a broken state. This same issue also holds true for custom patterns that restrict creation of the indices a plugin needs to create.\n\nI'd propose that we allow plugins to declare the indices (patterns for time based) that it will be creating via autocreate. With the specific names and patterns declared we could do one of the following:\n1. Check on startup that the setting allows all of the indices that plugins are going to create via autocreate and fail startup until the setting is fixed\n2. The plugin patterns are explicitly allowed to be created (maybe we disallow specify `*` as the pattern)\n\nMy preference is 2 for simplicity. If a user is installing a plugin, then I feel that they are accepting the plugin's interaction with the system. I realize some may see this as a security issue; my take is that if an adversary can install a plugin on a node then you have far worse problems and regardless of plugins being explicitly allowed to auto create an index, whatever plugin gets installed could create an index.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/249174774","html_url":"https://github.com/elastic/elasticsearch/issues/9359#issuecomment-249174774","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9359","id":249174774,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTE3NDc3NA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-09-23T12:06:36Z","updated_at":"2016-09-23T12:06:36Z","author_association":"CONTRIBUTOR","body":"Closing in favour of https://github.com/elastic/elasticsearch/issues/20640\n","performed_via_github_app":null}]