{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/35482","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35482/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35482/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35482/events","html_url":"https://github.com/elastic/elasticsearch/issues/35482","id":380103420,"node_id":"MDU6SXNzdWUzODAxMDM0MjA=","number":35482,"title":"java.lang.OutOfMemoryError: Java heap space","user":{"login":"koala775","id":35438579,"node_id":"MDQ6VXNlcjM1NDM4NTc5","avatar_url":"https://avatars2.githubusercontent.com/u/35438579?v=4","gravatar_id":"","url":"https://api.github.com/users/koala775","html_url":"https://github.com/koala775","followers_url":"https://api.github.com/users/koala775/followers","following_url":"https://api.github.com/users/koala775/following{/other_user}","gists_url":"https://api.github.com/users/koala775/gists{/gist_id}","starred_url":"https://api.github.com/users/koala775/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/koala775/subscriptions","organizations_url":"https://api.github.com/users/koala775/orgs","repos_url":"https://api.github.com/users/koala775/repos","events_url":"https://api.github.com/users/koala775/events{/privacy}","received_events_url":"https://api.github.com/users/koala775/received_events","type":"User","site_admin":false},"labels":[{"id":141141324,"node_id":"MDU6TGFiZWwxNDExNDEzMjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Analytics/Aggregations","name":":Analytics/Aggregations","color":"0e8a16","default":false,"description":"Aggregations"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2018-11-13T08:05:48Z","updated_at":"2019-07-12T16:52:19Z","closed_at":"2019-07-12T16:52:18Z","author_association":"NONE","active_lock_reason":null,"body":"<!-- Feature request -->\r\n\r\n**Describe the feature**:\r\nWhen I use  nested aggregation of dsl return large amount of data,then elasticsearch error: java.lang.OutOfMemoryError: Java heap space.\r\n\r\n<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`):\r\n6.3.0\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version** (`java -version`):\r\njdk_1.8.152\r\n\r\n**OS version** (`uname -a` if on a Unix-like system):\r\nlinux\r\n**Description of the problem including expected versus actual behavior**:\r\n1.Without any operating,why ramCurrent is full.\r\n![image](https://user-images.githubusercontent.com/35438579/48398548-057ebe80-e75c-11e8-8b36-e5961abdfcdf.png)\r\n2.Then query dsl frequently,elasticsearch happened error :java.lang.OutOfMemoryError: Java heap space\r\n3.ramCurrent include what?\r\n4.aggregation used which ramï¼Œfiledata cache or query cache or request cache?\r\n\r\n**Steps to reproduce**:\r\n\r\nPlease include a *minimal* but *complete* recreation of the problem, including\r\n(e.g.) index creation, mappings, settings, query etc.  The easier you make for\r\nus to reproduce it, the more likely that somebody will take the time to look at it.\r\n\r\n 1.query node state\r\n 2.query dsl frequently\r\n 3.elasticsearch error\r\n\r\n**Provide logs (if relevant)**:\r\n\r\n","closed_by":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"performed_via_github_app":null}