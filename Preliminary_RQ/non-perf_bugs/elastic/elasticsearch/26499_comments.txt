[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/327216170","html_url":"https://github.com/elastic/elasticsearch/issues/26499#issuecomment-327216170","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26499","id":327216170,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzIxNjE3MA==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2017-09-05T15:41:28Z","updated_at":"2017-09-05T15:41:46Z","author_association":"MEMBER","body":"Prior to 6 dynamic date detection relies on a set of hardcoded characters so only strings that contain `:`, `-` or `/` are tested against the provided date formats.\r\nIt's fixed in 6 by this pr: https://github.com/elastic/elasticsearch/pull/22171 that removes the limitation and test all strings that are not parseable as longs or doubles.\r\nWe should probably document this behavior for versions prior to 6.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/355297670","html_url":"https://github.com/elastic/elasticsearch/issues/26499#issuecomment-355297670","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26499","id":355297670,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTI5NzY3MA==","user":{"login":"heinzmeise","id":1759310,"node_id":"MDQ6VXNlcjE3NTkzMTA=","avatar_url":"https://avatars2.githubusercontent.com/u/1759310?v=4","gravatar_id":"","url":"https://api.github.com/users/heinzmeise","html_url":"https://github.com/heinzmeise","followers_url":"https://api.github.com/users/heinzmeise/followers","following_url":"https://api.github.com/users/heinzmeise/following{/other_user}","gists_url":"https://api.github.com/users/heinzmeise/gists{/gist_id}","starred_url":"https://api.github.com/users/heinzmeise/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heinzmeise/subscriptions","organizations_url":"https://api.github.com/users/heinzmeise/orgs","repos_url":"https://api.github.com/users/heinzmeise/repos","events_url":"https://api.github.com/users/heinzmeise/events{/privacy}","received_events_url":"https://api.github.com/users/heinzmeise/received_events","type":"User","site_admin":false},"created_at":"2018-01-04T14:36:48Z","updated_at":"2018-01-04T14:36:48Z","author_association":"NONE","body":"It works now as expected in 6, Dates separated by a Dot(.) are recognized if \"dynamic_date_formats\" contains a proper pattern.\r\n\r\nHowever, if I add a particular Format to the mapping, the default date detection fails to recognize a date such as \"2015/09/02\". Without \"dynamic_date_formats\" set, this date is automatically recognized.\r\n\r\nDoes that mean that adding a custom format overrides the default date detection?\r\n\r\n### Steps to reproduce\r\ncreate an empty Index, add 4 different dates / timestamps\r\n```\r\nPUT my_index\r\nPOST my_index/type/\r\n{\r\n  \"date1\": \"2015/09/02\",\r\n  \"timestamp1\": \"2017/12/19 13:16:21\",\r\n  \"german_date1\": \"01.01.2018\",\r\n  \"german_timestamp1\": \"01.01.2018 13:46:58\"\r\n}\r\n```\r\nnow, update the mapping by adding dynamic_date_formats....\r\n```\r\nPUT my_index/_mapping/type\r\n{\r\n     \"dynamic_date_formats\": [\"dd.MM.yyyy\", \"dd.MM.yyyy HH:mm:ss\"]\r\n}\r\n```\r\n...next, add 4 new fields containing the same dates / timestamps\r\n```\r\nPOST my_index/type/\r\n{\r\n  \"date2\": \"2015/09/02\",\r\n  \"timestamp2\": \"2017/12/19 13:16:21\",\r\n  \"german_date2\": \"01.01.2018\",\r\n  \"german_timestamp2\": \"01.01.2018 13:46:58\"\r\n}\r\n\r\nGET my_index/_mapping\r\n```\r\nThe mapping now contains 8 Fields, each field is either of type Text or Date, depending on when the Field has been added (before / after adding dynamic_date_formats):\r\n```\r\n\r\n{\r\n  \"my_index\": {\r\n    \"mappings\": {\r\n      \"type\": {\r\n        \"dynamic_date_formats\": [\r\n          \"dd.MM.yyyy\",\r\n          \"dd.MM.yyyy HH:mm:ss\"\r\n        ],\r\n        \"properties\": {\r\n          \"date1\": {\r\n            \"type\": \"date\",\r\n            \"format\": \"yyyy/MM/dd HH:mm:ss||yyyy/MM/dd||epoch_millis\"\r\n          },\r\n          \"date2\": {\r\n            \"type\": \"text\",\r\n            \"fields\": {\r\n              \"keyword\": {\r\n                \"type\": \"keyword\",\r\n                \"ignore_above\": 256\r\n              }\r\n            }\r\n          },\r\n          \"german_date1\": {\r\n            \"type\": \"text\",\r\n            \"fields\": {\r\n              \"keyword\": {\r\n                \"type\": \"keyword\",\r\n                \"ignore_above\": 256\r\n              }\r\n            }\r\n          },\r\n          \"german_date2\": {\r\n            \"type\": \"date\",\r\n            \"format\": \"dd.MM.yyyy\"\r\n          },\r\n          \"german_timestamp1\": {\r\n            \"type\": \"text\",\r\n            \"fields\": {\r\n              \"keyword\": {\r\n                \"type\": \"keyword\",\r\n                \"ignore_above\": 256\r\n              }\r\n            }\r\n          },\r\n          \"german_timestamp2\": {\r\n            \"type\": \"date\",\r\n            \"format\": \"dd.MM.yyyy HH:mm:ss\"\r\n          },\r\n          \"timestamp1\": {\r\n            \"type\": \"date\",\r\n            \"format\": \"yyyy/MM/dd HH:mm:ss||yyyy/MM/dd||epoch_millis\"\r\n          },\r\n          \"timestamp2\": {\r\n            \"type\": \"text\",\r\n            \"fields\": {\r\n              \"keyword\": {\r\n                \"type\": \"keyword\",\r\n                \"ignore_above\": 256\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/360420642","html_url":"https://github.com/elastic/elasticsearch/issues/26499#issuecomment-360420642","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26499","id":360420642,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MDQyMDY0Mg==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2018-01-25T10:08:38Z","updated_at":"2018-01-25T10:08:38Z","author_association":"CONTRIBUTOR","body":"> However, if I add a particular Format to the mapping, the default date detection fails to recognize a date such as \"2015/09/02\"\r\n\r\nThis is the expected behaviour. You overrided the value of `dynamic_date_formats` so the old values are ignored. You would need to add `strict_date_optional_time` to the list of date formats.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/372754852","html_url":"https://github.com/elastic/elasticsearch/issues/26499#issuecomment-372754852","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26499","id":372754852,"node_id":"MDEyOklzc3VlQ29tbWVudDM3Mjc1NDg1Mg==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2018-03-13T17:42:12Z","updated_at":"2018-03-13T17:42:12Z","author_association":"CONTRIBUTOR","body":"Fixed via #28375 ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/435719720","html_url":"https://github.com/elastic/elasticsearch/issues/26499#issuecomment-435719720","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26499","id":435719720,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNTcxOTcyMA==","user":{"login":"david-sitsky","id":4575489,"node_id":"MDQ6VXNlcjQ1NzU0ODk=","avatar_url":"https://avatars3.githubusercontent.com/u/4575489?v=4","gravatar_id":"","url":"https://api.github.com/users/david-sitsky","html_url":"https://github.com/david-sitsky","followers_url":"https://api.github.com/users/david-sitsky/followers","following_url":"https://api.github.com/users/david-sitsky/following{/other_user}","gists_url":"https://api.github.com/users/david-sitsky/gists{/gist_id}","starred_url":"https://api.github.com/users/david-sitsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/david-sitsky/subscriptions","organizations_url":"https://api.github.com/users/david-sitsky/orgs","repos_url":"https://api.github.com/users/david-sitsky/repos","events_url":"https://api.github.com/users/david-sitsky/events{/privacy}","received_events_url":"https://api.github.com/users/david-sitsky/received_events","type":"User","site_admin":false},"created_at":"2018-11-04T23:40:35Z","updated_at":"2018-11-04T23:40:35Z","author_association":"NONE","body":"> Prior to 6 dynamic date detection relies on a set of hardcoded characters so only strings that contain `:`, `-` or `/` are tested against the provided date formats.\r\n> We should probably document this behavior for versions prior to 6.\r\n\r\nPlease update the documentation!  I am stuck on ES 5.5 and I wasted a huge amount of time until I found this issue.\r\n\r\n","performed_via_github_app":null}]