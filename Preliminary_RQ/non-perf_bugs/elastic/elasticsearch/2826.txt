{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/2826","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2826/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2826/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2826/events","html_url":"https://github.com/elastic/elasticsearch/issues/2826","id":12582198,"node_id":"MDU6SXNzdWUxMjU4MjE5OA==","number":2826,"title":"ES 0.90 Multiple Numeric Range filters within boolean.should return incorrect results","user":{"login":"roytmana","id":2524911,"node_id":"MDQ6VXNlcjI1MjQ5MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2524911?v=4","gravatar_id":"","url":"https://api.github.com/users/roytmana","html_url":"https://github.com/roytmana","followers_url":"https://api.github.com/users/roytmana/followers","following_url":"https://api.github.com/users/roytmana/following{/other_user}","gists_url":"https://api.github.com/users/roytmana/gists{/gist_id}","starred_url":"https://api.github.com/users/roytmana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roytmana/subscriptions","organizations_url":"https://api.github.com/users/roytmana/orgs","repos_url":"https://api.github.com/users/roytmana/repos","events_url":"https://api.github.com/users/roytmana/events{/privacy}","received_events_url":"https://api.github.com/users/roytmana/received_events","type":"User","site_admin":false},"labels":[{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":32716575,"node_id":"MDU6TGFiZWwzMjcxNjU3NQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.90.0.RC2","name":"v0.90.0.RC2","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2013-03-28T20:14:47Z","updated_at":"2013-03-29T17:59:44Z","closed_at":"2013-03-29T15:50:43Z","author_association":"NONE","active_lock_reason":null,"body":"I have a build of 0.9 from source (3-4 days ago) and it does not calculate numeric filters correctly when combined in bool should \nThe number of hits in the following query should be 35 (16 from the 1st range and 19 from the 2nd). Works correctly in 0.20.5 but in 0.9 it returns  wrong number of hits which is also different depending on which range filter is listed first in the bool filter (the numbers are 32 and 28 depending on which range is first)\n\nwhen removing one of the ranges from bool.should the calculations are correct. The calculations are also correct when using the same ranges in Range facet\n\n``` javascript\n{\n  \"query\": {\n    \"match_all\": {}\n  },\n  \"from\": 0,\n  \"filter\": {\n    \"bool\": {\n      \"should\": [\n        {\n          \"numeric_range\": {\n            \"money.totals.obligationTotal\": {\n              \"from\": 20000000,\n              \"to\": 50000000,\n              \"include_upper\": false\n            }\n          }\n        },\n        {\n          \"numeric_range\": {\n            \"money.totals.obligationTotal\": {\n              \"from\": 50000000,\n              \"to\": 100000000,\n              \"include_upper\": false\n            }\n          }\n        }\n      ]\n    }\n  }\n}\n```\n","closed_by":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"performed_via_github_app":null}