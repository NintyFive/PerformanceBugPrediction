[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/474742039","html_url":"https://github.com/elastic/elasticsearch/issues/40243#issuecomment-474742039","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40243","id":474742039,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDc0MjAzOQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-03-20T08:57:18Z","updated_at":"2019-03-20T08:57:18Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/474763991","html_url":"https://github.com/elastic/elasticsearch/issues/40243#issuecomment-474763991","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40243","id":474763991,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDc2Mzk5MQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-03-20T10:03:13Z","updated_at":"2019-03-20T10:03:13Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/475302496","html_url":"https://github.com/elastic/elasticsearch/issues/40243#issuecomment-475302496","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40243","id":475302496,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTMwMjQ5Ng==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2019-03-21T16:26:47Z","updated_at":"2019-03-21T16:26:47Z","author_association":"CONTRIBUTOR","body":"There is another (non-obvious) technical limitation here. Lucene requires the codec to be set when the `IndexWriter` object, which is responsible for indexing into Lucene, is created (see https://lucene.apache.org/core/8_0_0/core/org/apache/lucene/index/IndexWriterConfig.html#setCodec-org.apache.lucene.codecs.Codec-). This means that dynamically changing this setting in Elasticsearch on an allocated shard would require reinitializing its writer capabilities (as well as reader capabilities, which depend on them), pause the existing indexing / search flow, etc. This would require extra coordination and add substantial complexity to the code.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/475317570","html_url":"https://github.com/elastic/elasticsearch/issues/40243#issuecomment-475317570","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40243","id":475317570,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NTMxNzU3MA==","user":{"login":"bra-fsn","id":820331,"node_id":"MDQ6VXNlcjgyMDMzMQ==","avatar_url":"https://avatars2.githubusercontent.com/u/820331?v=4","gravatar_id":"","url":"https://api.github.com/users/bra-fsn","html_url":"https://github.com/bra-fsn","followers_url":"https://api.github.com/users/bra-fsn/followers","following_url":"https://api.github.com/users/bra-fsn/following{/other_user}","gists_url":"https://api.github.com/users/bra-fsn/gists{/gist_id}","starred_url":"https://api.github.com/users/bra-fsn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bra-fsn/subscriptions","organizations_url":"https://api.github.com/users/bra-fsn/orgs","repos_url":"https://api.github.com/users/bra-fsn/repos","events_url":"https://api.github.com/users/bra-fsn/events{/privacy}","received_events_url":"https://api.github.com/users/bra-fsn/received_events","type":"User","site_admin":false},"created_at":"2019-03-21T17:03:22Z","updated_at":"2019-03-21T17:03:22Z","author_association":"NONE","body":"When is this created? I mean is it created on:\r\n- index open (starting up, close/open)\r\n- forcemerge/optimize\r\n?\r\nCould it be moved down in Lucene to make it possible to modify on the fly with an already created IndexWriter?\r\nThis could be like zfs, where modifying options takes effect only for newly written data. In this case the new codec would be used only when opening a new segment.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/479385349","html_url":"https://github.com/elastic/elasticsearch/issues/40243#issuecomment-479385349","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40243","id":479385349,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3OTM4NTM0OQ==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2019-04-03T08:09:54Z","updated_at":"2019-04-03T08:09:54Z","author_association":"CONTRIBUTOR","body":"This is IMO a valid feature request for Lucene. Pinging @jpountz here for input.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/480865328","html_url":"https://github.com/elastic/elasticsearch/issues/40243#issuecomment-480865328","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40243","id":480865328,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDg2NTMyOA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2019-04-08T14:51:45Z","updated_at":"2019-04-08T14:51:45Z","author_association":"CONTRIBUTOR","body":"> I guess Lucene handles just fine if you have a mixed setting (ie you have segments written with different codecs).\r\n\r\nThis is correct. Every segment records the codec that has been used to write it in its `SegmentInfo`, and this is later used at read-time to know how to read segment files.\r\n\r\n> Could it be moved down in Lucene to make it possible to modify on the fly with an already created IndexWriter?\r\n\r\nI'm a bit reluctant to expose such a feature as it could expose us to bugs where half the segment is written with a codec and the other half with another codec.\r\n\r\nI'd suggest to close it as a \"won't fix\" if that works for you @ywelsch. While the ability to change the codec on an existing index would be nice, the cost/risk outweighs benefits in my opinion.","performed_via_github_app":null}]