{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/18799","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18799/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18799/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18799/events","html_url":"https://github.com/elastic/elasticsearch/issues/18799","id":159397019,"node_id":"MDU6SXNzdWUxNTkzOTcwMTk=","number":18799,"title":"es5 alpha fails to make progress","user":{"login":"SweetNSourPavement","id":19834423,"node_id":"MDQ6VXNlcjE5ODM0NDIz","avatar_url":"https://avatars1.githubusercontent.com/u/19834423?v=4","gravatar_id":"","url":"https://api.github.com/users/SweetNSourPavement","html_url":"https://github.com/SweetNSourPavement","followers_url":"https://api.github.com/users/SweetNSourPavement/followers","following_url":"https://api.github.com/users/SweetNSourPavement/following{/other_user}","gists_url":"https://api.github.com/users/SweetNSourPavement/gists{/gist_id}","starred_url":"https://api.github.com/users/SweetNSourPavement/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SweetNSourPavement/subscriptions","organizations_url":"https://api.github.com/users/SweetNSourPavement/orgs","repos_url":"https://api.github.com/users/SweetNSourPavement/repos","events_url":"https://api.github.com/users/SweetNSourPavement/events{/privacy}","received_events_url":"https://api.github.com/users/SweetNSourPavement/received_events","type":"User","site_admin":false},"labels":[{"id":836504707,"node_id":"MDU6TGFiZWw4MzY1MDQ3MDc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Distributed","name":":Distributed/Distributed","color":"0e8a16","default":false,"description":"A catch all label for anything in the Distributed Area. If you aren't sure, use this one."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":17,"created_at":"2016-06-09T12:36:29Z","updated_at":"2018-02-13T19:54:28Z","closed_at":"2016-06-17T19:53:18Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**:\n\n5.0.0 alpha1/2/3 and v5.0.0-alpha3-216-g6202b63\n\n**JVM version**:\n\njava version \"1.8.0_91\"\nJava(TM) SE Runtime Environment (build 1.8.0_91-b14)\nJava HotSpot(TM) 64-Bit Server VM (build 25.91-b14, mixed mode)\n\n**OS version**:\n\nLinux 107r01pc 4.2.0-36-generic # 42~14.04.1-Ubuntu SMP Fri May 13 17:27:22 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux\n\n**Description of the problem including expected versus actual behavior**:\n\nA cluster with 3 data nodes and an index with 2 replicas can become\nunavailable with the right order of node restarts. Other orderings of\nrestarts result in eventual availability.\n\nI expected that 2 data nodes are always enough to service an index with\nreplication factor 3.\n\nOther issues can be reproduced by very similar steps:\n- with unsafe minimum master nodes restarts can cause data loss\n- when only a quorum of the replicas are present incomplete replicas\n  won't get fixed. it would be nice to see earlier replica healing.\n  It seems to be safer and easier to move replicas if every working\n  quorum of shards would heal themselves, as the missing nodes may\n  crashed hard, and couldn't be restarted in any way.\n\n**Steps to reproduce**:\n\nThere are some scripts to reproduce these issues, but attaching them is\nnot allowed, so, please, see\nhttps://github.com/SweetNSourPavement/es5issue.\n\nThe gist of the modus operandi is:\n1. create an index with replication 3\n2. shut down one data node\n3. insert a doc, which should be successful, as a quorum is present\n4. stop and start nodes\n5. observe the result\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}