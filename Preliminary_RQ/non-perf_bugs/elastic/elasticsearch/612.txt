{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/612","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/612/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/612/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/612/events","html_url":"https://github.com/elastic/elasticsearch/issues/612","id":513620,"node_id":"MDU6SXNzdWU1MTM2MjA=","number":612,"title":"Solr Compatible Query and Response Format","user":{"login":"karussell","id":129644,"node_id":"MDQ6VXNlcjEyOTY0NA==","avatar_url":"https://avatars0.githubusercontent.com/u/129644?v=4","gravatar_id":"","url":"https://api.github.com/users/karussell","html_url":"https://github.com/karussell","followers_url":"https://api.github.com/users/karussell/followers","following_url":"https://api.github.com/users/karussell/following{/other_user}","gists_url":"https://api.github.com/users/karussell/gists{/gist_id}","starred_url":"https://api.github.com/users/karussell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karussell/subscriptions","organizations_url":"https://api.github.com/users/karussell/orgs","repos_url":"https://api.github.com/users/karussell/repos","events_url":"https://api.github.com/users/karussell/events{/privacy}","received_events_url":"https://api.github.com/users/karussell/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2011-01-08T00:14:45Z","updated_at":"2011-12-13T23:37:28Z","closed_at":"2011-05-21T22:24:11Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"To ease the migration from solr it would be a great benefit for ES if there would be the ability of solr compatible query and response formats. Implemented as plugin or java api?\n\nAs in (indexing) and output (querying) format xml should be the first try, because the java binary could be too complicated and json isn't supported for indexing yet.\n\nFor solr I'm expecting the single index queries (no shards) because I have it that way and its easier ;-)\n\none 'complicate' query with facets (without highlighting) can look like:\n\nq=&facet=true&facet.date=%7B%21ex%3Ddt%7Ddt&facet.date.start=NOW%2FDAY-6DAYS&facet.date.end=NOW%2FDAY%2B1DAY&facet.date.gap=%2B1DAY&facet.sort=count&facet.limit=10&facet.field=dest_title_1_s&f.dest_title_1_s.facet.mincount=1&f.dest_title_1_s.facet.limit=12&f.tag.facet.mincount=2&f.tag.facet.limit=20&facet.query=dt%3A%5BNOW%2FHOURS-8HOURS+TO+_%5D&facet.query=retw_i%3A%5B5+TO+_%5D&facet.query=retw_i%3A%5B20+TO+_%5D&facet.query=retw_i%3A%5B50+TO+_%5D&fq=user%3Ameysrh&start=0&rows=15\n\nthere can be also update, deleteByQuery, commit and optimize. All except the update query should be simple.\n\nThe update xml looks like:\n\n   <add>\n    <doc>\n    <field name=\"id\">9885A004</field>\n    <field name=\"name\">Canon PowerShot SD500</field>\n    <field name=\"category\">camera</field>\n    <field name=\"features\">3x optical zoom</field>\n    <field name=\"features\">aluminum case</field>\n    <field name=\"weight\">6.4</field>\n    <field name=\"price\">329.95</field>\n    </doc>\n   </add>\n\nresponse xml looks like\n\n  <response>\n  <responseHeader>\n    <status>0</status><QTime>1</QTime>\n  </responseHeader>\n  <result numFound=\"2\" start=\"0\">\n   <doc>\n    <str name=\"id\">MA147LL/A</str>\n    <str name=\"name\">Apple 60 GB iPod Black</str>\n   </doc>\n   <doc>\n    <str name=\"id\">EN7800GTX/2DHTV/256M</str>\n    <str name=\"name\">ASUS Extreme N7800GTX</str>\n   </doc>\n  </result>\n  </response>\n\ntaken from here: http://www.xml.com/pub/a/2006/08/09/solr-indexing-xml-with-lucene-andrest.html\n\nfacets are added either before or after the results:\n\n```\n<lst name=\"facet_counts\">\n<lst name=\"facet_queries\">\n<int name=\"dt:[NOW/HOURS-8HOURS TO *]\">15</int>\n<int name=\"dt:[* TO NOW/DAY-6DAYS]\">40</int>\n<int name=\"retw_i:[5 TO *]\">0</int>\n<int name=\"retw_i:[20 TO *]\">0</int>\n<int name=\"retw_i:[50 TO *]\">0</int>\n</lst>\n<lst name=\"facet_fields\">\n<lst name=\"tag\">\n<int name=\"meysrh\">13</int>\n<int name=\"lg\">11</int>\n...\n</lst>\n</lst>\n<lst name=\"dest_title_1_s\">\n<int name=\"_1241812383_ÜberTwitter -..\">1</int>\n<int name=\"_1404625014_TwitLonger: ☺ ..\"\">1</int>\n<int name=\"_1404721733_TwitLonger: ..\">1</int>\n<int name=\"ÜberTwitter - romynandariz..\">1</int>\n</lst>\n</lst>\n<lst name=\"facet_dates\">\n<lst name=\"dt\">\n<int name=\"2011-01-02T00:00:00Z\">0</int>\n<int name=\"2011-01-03T00:00:00Z\">0</int>\n<int name=\"2011-01-04T00:00:00Z\">0</int>\n<int name=\"2011-01-05T00:00:00Z\">0</int>\n<int name=\"2011-01-06T00:00:00Z\">0</int>\n<int name=\"2011-01-07T00:00:00Z\">30</int>\n<int name=\"2011-01-08T00:00:00Z\">0</int>\n<str name=\"gap\">+1DAY</str>\n<date name=\"end\">2011-01-09T00:00:00Z</date>\n</lst>\n</lst>\n</lst>\n```\n","closed_by":{"login":"karussell","id":129644,"node_id":"MDQ6VXNlcjEyOTY0NA==","avatar_url":"https://avatars0.githubusercontent.com/u/129644?v=4","gravatar_id":"","url":"https://api.github.com/users/karussell","html_url":"https://github.com/karussell","followers_url":"https://api.github.com/users/karussell/followers","following_url":"https://api.github.com/users/karussell/following{/other_user}","gists_url":"https://api.github.com/users/karussell/gists{/gist_id}","starred_url":"https://api.github.com/users/karussell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karussell/subscriptions","organizations_url":"https://api.github.com/users/karussell/orgs","repos_url":"https://api.github.com/users/karussell/repos","events_url":"https://api.github.com/users/karussell/events{/privacy}","received_events_url":"https://api.github.com/users/karussell/received_events","type":"User","site_admin":false},"performed_via_github_app":null}