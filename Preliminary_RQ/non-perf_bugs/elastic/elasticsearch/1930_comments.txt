[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/5621236","html_url":"https://github.com/elastic/elasticsearch/issues/1930#issuecomment-5621236","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1930","id":5621236,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MjEyMzY=","user":{"login":"jprante","id":635745,"node_id":"MDQ6VXNlcjYzNTc0NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/635745?v=4","gravatar_id":"","url":"https://api.github.com/users/jprante","html_url":"https://github.com/jprante","followers_url":"https://api.github.com/users/jprante/followers","following_url":"https://api.github.com/users/jprante/following{/other_user}","gists_url":"https://api.github.com/users/jprante/gists{/gist_id}","starred_url":"https://api.github.com/users/jprante/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jprante/subscriptions","organizations_url":"https://api.github.com/users/jprante/orgs","repos_url":"https://api.github.com/users/jprante/repos","events_url":"https://api.github.com/users/jprante/events{/privacy}","received_events_url":"https://api.github.com/users/jprante/received_events","type":"User","site_admin":false},"created_at":"2012-05-10T09:25:48Z","updated_at":"2012-05-10T09:25:48Z","author_association":"CONTRIBUTOR","body":"Situation where this can happen:\n- many threads in parallel\n- TransportClient shared between threads\n- TransportClient in sniff mode\n- ES cluster on more than one node\n- heavy bulk transfer started, with lots of outstanding bulk responses\n- StackOverflowError might show up after bulk transfer is stopped with ctrl-c\n\nA mockup client is here: https://gist.github.com/2652024\n\nBulk traffic needs to get simulated.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/5668426","html_url":"https://github.com/elastic/elasticsearch/issues/1930#issuecomment-5668426","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1930","id":5668426,"node_id":"MDEyOklzc3VlQ29tbWVudDU2Njg0MjY=","user":{"login":"jprante","id":635745,"node_id":"MDQ6VXNlcjYzNTc0NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/635745?v=4","gravatar_id":"","url":"https://api.github.com/users/jprante","html_url":"https://github.com/jprante","followers_url":"https://api.github.com/users/jprante/followers","following_url":"https://api.github.com/users/jprante/following{/other_user}","gists_url":"https://api.github.com/users/jprante/gists{/gist_id}","starred_url":"https://api.github.com/users/jprante/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jprante/subscriptions","organizations_url":"https://api.github.com/users/jprante/orgs","repos_url":"https://api.github.com/users/jprante/repos","events_url":"https://api.github.com/users/jprante/events{/privacy}","received_events_url":"https://api.github.com/users/jprante/received_events","type":"User","site_admin":false},"created_at":"2012-05-12T13:22:47Z","updated_at":"2012-05-12T13:22:47Z","author_association":"CONTRIBUTOR","body":"A few minutes ago I needed to interrupt my high-volume indexer with kill (so it causes InterruptedExceptions in all threads), and the StackOverflow happened again, this time mixed with additional messages.\n\nSee in this gist for the messages:\n\nhttps://gist.github.com/2666459\n\nI'm clueless, I think it's my fault, because I treat TransportClient badly - I just let it go.\n\nHow can I interrupt a TransportClient with many pending bulk requests so that it can shut down cleanly?\n\nIs it possible to wait for outstanding bulks got processed (waiting for BulkResponses)? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/5668469","html_url":"https://github.com/elastic/elasticsearch/issues/1930#issuecomment-5668469","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1930","id":5668469,"node_id":"MDEyOklzc3VlQ29tbWVudDU2Njg0Njk=","user":{"login":"jprante","id":635745,"node_id":"MDQ6VXNlcjYzNTc0NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/635745?v=4","gravatar_id":"","url":"https://api.github.com/users/jprante","html_url":"https://github.com/jprante","followers_url":"https://api.github.com/users/jprante/followers","following_url":"https://api.github.com/users/jprante/following{/other_user}","gists_url":"https://api.github.com/users/jprante/gists{/gist_id}","starred_url":"https://api.github.com/users/jprante/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jprante/subscriptions","organizations_url":"https://api.github.com/users/jprante/orgs","repos_url":"https://api.github.com/users/jprante/repos","events_url":"https://api.github.com/users/jprante/events{/privacy}","received_events_url":"https://api.github.com/users/jprante/received_events","type":"User","site_admin":false},"created_at":"2012-05-12T13:29:56Z","updated_at":"2012-05-12T13:29:56Z","author_association":"CONTRIBUTOR","body":"Just noticed the StackOverflow happens while handling something with IPv6 , because I added IPv6 addresses to the TransportClient. But IPv6 cluster wide addressing is not possible because IPv6 is not supported by the network administration team. Hmmm. I should quit using IPv6 in TransportClient.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/5940280","html_url":"https://github.com/elastic/elasticsearch/issues/1930#issuecomment-5940280","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1930","id":5940280,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDAyODA=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2012-05-25T21:09:52Z","updated_at":"2012-05-25T21:09:52Z","author_association":"MEMBER","body":"Heya @jprante, did you manage to recreate it at the end? (btw, there is no way to wait for pending bulk requests, sorry for the late answer).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/5995402","html_url":"https://github.com/elastic/elasticsearch/issues/1930#issuecomment-5995402","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1930","id":5995402,"node_id":"MDEyOklzc3VlQ29tbWVudDU5OTU0MDI=","user":{"login":"jprante","id":635745,"node_id":"MDQ6VXNlcjYzNTc0NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/635745?v=4","gravatar_id":"","url":"https://api.github.com/users/jprante","html_url":"https://github.com/jprante","followers_url":"https://api.github.com/users/jprante/followers","following_url":"https://api.github.com/users/jprante/following{/other_user}","gists_url":"https://api.github.com/users/jprante/gists{/gist_id}","starred_url":"https://api.github.com/users/jprante/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jprante/subscriptions","organizations_url":"https://api.github.com/users/jprante/orgs","repos_url":"https://api.github.com/users/jprante/repos","events_url":"https://api.github.com/users/jprante/events{/privacy}","received_events_url":"https://api.github.com/users/jprante/received_events","type":"User","site_admin":false},"created_at":"2012-05-29T20:49:20Z","updated_at":"2012-05-29T20:49:20Z","author_association":"CONTRIBUTOR","body":"Sorry for the lag. I still need some time writing an error-provoking bulk indexing text case and see how far it goes. As a workaound, I'm thinking about something as a \"SafeTransportClient\" that can wait for outstanding ActionListeners if InterruptedExceptions come in.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/27373031","html_url":"https://github.com/elastic/elasticsearch/issues/1930#issuecomment-27373031","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1930","id":27373031,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MzczMDMx","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2013-10-30T08:48:31Z","updated_at":"2013-10-30T08:48:31Z","author_association":"MEMBER","body":"hey,\n\nanything we can do here to help? Can you still reproduce this? Should we close this?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/27373945","html_url":"https://github.com/elastic/elasticsearch/issues/1930#issuecomment-27373945","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1930","id":27373945,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MzczOTQ1","user":{"login":"jprante","id":635745,"node_id":"MDQ6VXNlcjYzNTc0NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/635745?v=4","gravatar_id":"","url":"https://api.github.com/users/jprante","html_url":"https://github.com/jprante","followers_url":"https://api.github.com/users/jprante/followers","following_url":"https://api.github.com/users/jprante/following{/other_user}","gists_url":"https://api.github.com/users/jprante/gists{/gist_id}","starred_url":"https://api.github.com/users/jprante/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jprante/subscriptions","organizations_url":"https://api.github.com/users/jprante/orgs","repos_url":"https://api.github.com/users/jprante/repos","events_url":"https://api.github.com/users/jprante/events{/privacy}","received_events_url":"https://api.github.com/users/jprante/received_events","type":"User","site_admin":false},"created_at":"2013-10-30T09:08:22Z","updated_at":"2013-10-30T09:08:22Z","author_association":"CONTRIBUTOR","body":"I'm quite sure the Mac OS X JVM version at that time was playing tricks on me with Java exceptions around open/close sockets/file descriptors and tight system resource limits. I have not seen it after the workaround. Also on Linux or Solaris, I never encountered this situation.\n\nActually I do not intend to dig deeper, beside it is hard to reproduce, it would involve tracing at OS level, maybe OS or JVM devs have to be bothered in that case. Will also soon move to OS X Maverick in the hope for new exciting bugs :)\n\nSo it's ok the issue was closed, I close it again. \n","performed_via_github_app":null}]