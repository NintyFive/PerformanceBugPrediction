{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/62609","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62609/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62609/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62609/events","html_url":"https://github.com/elastic/elasticsearch/issues/62609","id":704224951,"node_id":"MDU6SXNzdWU3MDQyMjQ5NTE=","number":62609,"title":"DeleteByQueryConcurrentTests#testConcurrentDeleteByQueriesOnDifferentDocs fails with unexpected version conflict","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"labels":[{"id":1315850572,"node_id":"MDU6TGFiZWwxMzE1ODUwNTcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Reindex","name":":Distributed/Reindex","color":"0e8a16","default":false,"description":"Issues relating to reindex that are not caused by issues further down"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"},{"id":1967496670,"node_id":"MDU6TGFiZWwxOTY3NDk2Njcw","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Distributed","name":"Team:Distributed","color":"fef2c0","default":false,"description":"Meta label for distributed team"}],"state":"closed","locked":false,"assignee":{"login":"mayya-sharipova","id":5738841,"node_id":"MDQ6VXNlcjU3Mzg4NDE=","avatar_url":"https://avatars1.githubusercontent.com/u/5738841?v=4","gravatar_id":"","url":"https://api.github.com/users/mayya-sharipova","html_url":"https://github.com/mayya-sharipova","followers_url":"https://api.github.com/users/mayya-sharipova/followers","following_url":"https://api.github.com/users/mayya-sharipova/following{/other_user}","gists_url":"https://api.github.com/users/mayya-sharipova/gists{/gist_id}","starred_url":"https://api.github.com/users/mayya-sharipova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayya-sharipova/subscriptions","organizations_url":"https://api.github.com/users/mayya-sharipova/orgs","repos_url":"https://api.github.com/users/mayya-sharipova/repos","events_url":"https://api.github.com/users/mayya-sharipova/events{/privacy}","received_events_url":"https://api.github.com/users/mayya-sharipova/received_events","type":"User","site_admin":false},"assignees":[{"login":"mayya-sharipova","id":5738841,"node_id":"MDQ6VXNlcjU3Mzg4NDE=","avatar_url":"https://avatars1.githubusercontent.com/u/5738841?v=4","gravatar_id":"","url":"https://api.github.com/users/mayya-sharipova","html_url":"https://github.com/mayya-sharipova","followers_url":"https://api.github.com/users/mayya-sharipova/followers","following_url":"https://api.github.com/users/mayya-sharipova/following{/other_user}","gists_url":"https://api.github.com/users/mayya-sharipova/gists{/gist_id}","starred_url":"https://api.github.com/users/mayya-sharipova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayya-sharipova/subscriptions","organizations_url":"https://api.github.com/users/mayya-sharipova/orgs","repos_url":"https://api.github.com/users/mayya-sharipova/repos","events_url":"https://api.github.com/users/mayya-sharipova/events{/privacy}","received_events_url":"https://api.github.com/users/mayya-sharipova/received_events","type":"User","site_admin":false}],"milestone":null,"comments":7,"created_at":"2020-09-18T09:18:35Z","updated_at":"2020-09-30T13:02:59Z","closed_at":"2020-09-30T13:02:59Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"\r\n**Build scan**: https://gradle-enterprise.elastic.co/s/owazjn6t7apj4/tests/:modules:reindex:test/org.elasticsearch.index.reindex.DeleteByQueryConcurrentTests/testConcurrentDeleteByQueriesOnDifferentDocs#1\r\n\r\n**Repro line**: `./gradlew ':modules:reindex:test' --tests \"org.elasticsearch.index.reindex.DeleteByQueryConcurrentTests.testConcurrentDeleteByQueriesOnDifferentDocs\" -Dtests.seed=448D3E47C542E9A3 -Dtests.security.manager=true -Dtests.locale=es -Dtests.timezone=America/Indiana/Knox -Druntime.java=11`\r\n\r\n**Reproduces locally?**: Yes (but not every time)\r\n\r\n**Applicable branches**: `master`\r\n\r\n**Failure history**: https://build-stats.elastic.co/goto/2cba7892eed507aeab72b0c1fd55da0c\r\n\r\nFirst failure (outside of PRs) for a long while.\r\n\r\n**Failure excerpt**:\r\n\r\n```\r\nsep 18, 2020 2:42:24 AM com.carrotsearch.randomizedtesting.RandomizedRunner$QueueUncaughtExceptionsHandler uncaughtException\r\nWARNING: Uncaught exception in thread: Thread[Thread-6,5,TGRP-DeleteByQueryConcurrentTests]\r\njava.lang.AssertionError: \r\nExpected: updated matches <0L> and created matches <0L> and deleted matches <43L> and versionConflicts matches <0L> and failures size matches <0> and reason cancelled matches null and slices matches an empty collection\r\n     but: was <BulkByScrollResponse[took=1.3s,timed_out=false,sliceId=null,updated=0,created=0,deleted=43,batches=1,versionConflicts=1,noops=0,retries=0,throttledUntil=0s,bulk_failures=[{\"index\":\"test\",\"id\":\"fbwpoHQBxht_vE638ENh\",\"cause\":{\"type\":\"version_conflict_engine_exception\",\"reason\":\"[fbwpoHQBxht_vE638ENh]: version conflict, required seqNo [23], primary term [1]. but no document was found\",\"index_uuid\":\"EJyLe_9CQ1-VzaCOKuL4ow\",\"shard\":\"2\",\"index\":\"test\"},\"status\":409}],search_failures=[]]>\r\n\tat __randomizedtesting.SeedInfo.seed([448D3E47C542E9A3]:0)\r\n\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)\r\n\tat org.junit.Assert.assertThat(Assert.java:956)\r\n\tat org.junit.Assert.assertThat(Assert.java:923)\r\n\tat org.elasticsearch.index.reindex.DeleteByQueryConcurrentTests.lambda$testConcurrentDeleteByQueriesOnDifferentDocs$0(DeleteByQueryConcurrentTests.java:59)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\n```","closed_by":{"login":"mayya-sharipova","id":5738841,"node_id":"MDQ6VXNlcjU3Mzg4NDE=","avatar_url":"https://avatars1.githubusercontent.com/u/5738841?v=4","gravatar_id":"","url":"https://api.github.com/users/mayya-sharipova","html_url":"https://github.com/mayya-sharipova","followers_url":"https://api.github.com/users/mayya-sharipova/followers","following_url":"https://api.github.com/users/mayya-sharipova/following{/other_user}","gists_url":"https://api.github.com/users/mayya-sharipova/gists{/gist_id}","starred_url":"https://api.github.com/users/mayya-sharipova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayya-sharipova/subscriptions","organizations_url":"https://api.github.com/users/mayya-sharipova/orgs","repos_url":"https://api.github.com/users/mayya-sharipova/repos","events_url":"https://api.github.com/users/mayya-sharipova/events{/privacy}","received_events_url":"https://api.github.com/users/mayya-sharipova/received_events","type":"User","site_admin":false},"performed_via_github_app":null}