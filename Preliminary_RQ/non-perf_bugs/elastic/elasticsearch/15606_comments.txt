[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/166651695","html_url":"https://github.com/elastic/elasticsearch/issues/15606#issuecomment-166651695","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15606","id":166651695,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NjY1MTY5NQ==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars3.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false},"created_at":"2015-12-22T15:45:57Z","updated_at":"2015-12-22T15:45:57Z","author_association":"NONE","body":"I've published more details about my mapping and the results on stackoverflow: http://stackoverflow.com/questions/34372194/elasticsearch-distance-sorting-and-calculation-incorrect-and-inaccurate\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/166701833","html_url":"https://github.com/elastic/elasticsearch/issues/15606#issuecomment-166701833","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15606","id":166701833,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NjcwMTgzMw==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-12-22T18:50:30Z","updated_at":"2015-12-22T18:50:30Z","author_association":"CONTRIBUTOR","body":"The groovy script and the geo filter don't use the same method to compute the distance (the groovy script assumes a plane). Can you try to run `doc['location'].arcDistanceInKm(lat,lon)` instead of your current script to see if it gives different results?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/166703174","html_url":"https://github.com/elastic/elasticsearch/issues/15606#issuecomment-166703174","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15606","id":166703174,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NjcwMzE3NA==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars3.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false},"created_at":"2015-12-22T18:57:19Z","updated_at":"2015-12-22T18:57:19Z","author_association":"NONE","body":"It works, thanks! I could'nt find this solution or any hint in the documentation and so I tried for two weeks... :(\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/166704365","html_url":"https://github.com/elastic/elasticsearch/issues/15606#issuecomment-166704365","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15606","id":166704365,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NjcwNDM2NQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-12-22T19:03:08Z","updated_at":"2015-12-22T19:03:08Z","author_association":"CONTRIBUTOR","body":"I agree it's confusing that there are several ways to compute geo distances (and I had to look up the code to see which one distanceInKm is using). I opened an issue for it: #15616.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/166706277","html_url":"https://github.com/elastic/elasticsearch/issues/15606#issuecomment-166706277","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15606","id":166706277,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NjcwNjI3Nw==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars3.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false},"created_at":"2015-12-22T19:11:42Z","updated_at":"2015-12-22T19:11:42Z","author_association":"NONE","body":"Thanks! :)\n\nAm 22.12.2015 um 20:04 schrieb Adrien Grand:\n\n> I agree it's confusing that there are several ways to compute geo \n> distances (and I had to look up the code to see which one distanceInKm \n> is using). I opened an issue for it: #15616 \n> https://github.com/elastic/elasticsearch/issues/15616.\n> \n> â€”\n> Reply to this email directly or view it on GitHub \n> https://github.com/elastic/elasticsearch/issues/15606#issuecomment-166704365.\n\n## \n\nAnton Dachauer\nweb developer | freelancer\n\nsicher kommunizieren: https://www.antondachauer.de/kommunikation/\n\nt: 0911 - 927 85 805\nm: mail@antondachauer.de\nw: http://www.antondachauer.de\nt: https://twitter.com/antondachauer\nx: https://www.xing.com/profile/Anton_Dachauer\n","performed_via_github_app":null}]