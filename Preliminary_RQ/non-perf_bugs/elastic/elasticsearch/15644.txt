{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/15644","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15644/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15644/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15644/events","html_url":"https://github.com/elastic/elasticsearch/issues/15644","id":123733172,"node_id":"MDU6SXNzdWUxMjM3MzMxNzI=","number":15644,"title":"There is no way to ask ES to insert a timestamp at index time","user":{"login":"lam-juice","id":11839168,"node_id":"MDQ6VXNlcjExODM5MTY4","avatar_url":"https://avatars1.githubusercontent.com/u/11839168?v=4","gravatar_id":"","url":"https://api.github.com/users/lam-juice","html_url":"https://github.com/lam-juice","followers_url":"https://api.github.com/users/lam-juice/followers","following_url":"https://api.github.com/users/lam-juice/following{/other_user}","gists_url":"https://api.github.com/users/lam-juice/gists{/gist_id}","starred_url":"https://api.github.com/users/lam-juice/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lam-juice/subscriptions","organizations_url":"https://api.github.com/users/lam-juice/orgs","repos_url":"https://api.github.com/users/lam-juice/repos","events_url":"https://api.github.com/users/lam-juice/events{/privacy}","received_events_url":"https://api.github.com/users/lam-juice/received_events","type":"User","site_admin":false},"labels":[{"id":141145460,"node_id":"MDU6TGFiZWwxNDExNDU0NjA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Mapping","name":":Search/Mapping","color":"0e8a16","default":false,"description":"How fields should be indexed"},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2015-12-23T22:47:47Z","updated_at":"2016-03-16T11:48:16Z","closed_at":"2016-02-29T20:36:03Z","author_association":"NONE","active_lock_reason":null,"body":"Due to the deprecation of _timestamp, there is no way to insert a timestamp at exactly the index time.\n\nIn my use case, the _timestamp field is useful for more than just ttl - I use ES as a timeseries storage, and if anyone wants to know how long the event pipeline takes to deliver the document, prior to ES 2.0 it can be calculated as (_timestamp - @timestamp) (provided that @timestamp is obtained from the parsed event time, and _timestamp is enabled)\n\nwhen such events can be identified, time-sensitive operations that missed these events due to pipeline delays may attempt to recover the events by filtering on the pipeline delay time, i.e. \"(_timestamp - @timestamp) > 2 hours\"\n\nasking Logstash to insert its own date field does not accurately capture any delay between the time when this new field is created, and the time the document is indexed.\n\ni understand that the user may want to store multiple custom timestamps, e.g. moved, modified, etc. so let's not make one special _timestamp - however, i believe the time at which the document is indexed for the first time, is special and at least important for the purpose of identifying documents that needs some recovery action due to indexing delays.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}