{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/2619","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2619/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2619/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2619/events","html_url":"https://github.com/elastic/elasticsearch/issues/2619","id":10670420,"node_id":"MDU6SXNzdWUxMDY3MDQyMA==","number":2619,"title":"HIghlight by wildcard fails when there are numeric fields matching highlight wildcard","user":{"login":"roytmana","id":2524911,"node_id":"MDQ6VXNlcjI1MjQ5MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2524911?v=4","gravatar_id":"","url":"https://api.github.com/users/roytmana","html_url":"https://github.com/roytmana","followers_url":"https://api.github.com/users/roytmana/followers","following_url":"https://api.github.com/users/roytmana/following{/other_user}","gists_url":"https://api.github.com/users/roytmana/gists{/gist_id}","starred_url":"https://api.github.com/users/roytmana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roytmana/subscriptions","organizations_url":"https://api.github.com/users/roytmana/orgs","repos_url":"https://api.github.com/users/roytmana/repos","events_url":"https://api.github.com/users/roytmana/events{/privacy}","received_events_url":"https://api.github.com/users/roytmana/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2013-02-05T22:14:00Z","updated_at":"2013-02-06T10:37:53Z","closed_at":"2013-02-06T10:37:53Z","author_association":"NONE","active_lock_reason":null,"body":"award.type has text and numeric properties inside. when using wildcard highlight for award.type\\* searching on text value query fails with NumberFormatException\n\nsearching on numeric value instead of DCA works fine so it looks like it is trying to highlight numeric fields by converting search token to number which fails\n\nAdding \"require_field_match\": true either within highlights or award.type.\\* does not make any difference \n\n``` javascript\n{\n  \"query\": {\n    \"filtered\": {\n      \"query\": {\n        \"query_string\": {\n          \"query\": \"award.type.\\\\*:DCA\"\n        }\n      }\n    }\n  },\n  \"highlight\": {\n    \"fields\": {\n      \"award.type.*\": {}\n    }\n  }\n}\n```\n\nerror: SearchPhaseExecutionException[Failed to execute phase [query_fetch], total failure; shardFailures {[RLjd3ZLYRlqsoD5d3iOYBQ][award][0]: SearchParseException[[award][0]: from[-1],size[-1]: Parse Failure [Failed to parse source [{\"query\":{\"filtered\":{\"query\":{\"query_string\":{\"query\":\"award.type.\\_:DCA\"}}}},\"highlight\":{\"fields\":{\"award.type._\":{}}}}]]]; nested: NumberFormatException[For input string: \"DCA\"]; }]\nstatus: 500\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}