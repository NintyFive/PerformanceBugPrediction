{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/5707","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5707/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5707/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5707/events","html_url":"https://github.com/elastic/elasticsearch/issues/5707","id":30981318,"node_id":"MDU6SXNzdWUzMDk4MTMxOA==","number":5707,"title":"Multi-field Terms Facet recounts the same document (ES 1.0.1)","user":{"login":"abronner","id":3842297,"node_id":"MDQ6VXNlcjM4NDIyOTc=","avatar_url":"https://avatars2.githubusercontent.com/u/3842297?v=4","gravatar_id":"","url":"https://api.github.com/users/abronner","html_url":"https://github.com/abronner","followers_url":"https://api.github.com/users/abronner/followers","following_url":"https://api.github.com/users/abronner/following{/other_user}","gists_url":"https://api.github.com/users/abronner/gists{/gist_id}","starred_url":"https://api.github.com/users/abronner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abronner/subscriptions","organizations_url":"https://api.github.com/users/abronner/orgs","repos_url":"https://api.github.com/users/abronner/repos","events_url":"https://api.github.com/users/abronner/events{/privacy}","received_events_url":"https://api.github.com/users/abronner/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2014-04-07T12:54:34Z","updated_at":"2014-12-30T15:16:45Z","closed_at":"2014-12-30T15:16:45Z","author_association":"NONE","active_lock_reason":null,"body":"Using terms facet for multiple fields, the terms are counted once per field and not once per document. If for example, the same term appears in two fields of the same document, multi-field terms facet for those fields will count the document twice. \n\nSee example: https://gist.github.com/abronner/10019478\n\nElasticsearch documentation states the following: \"Also note that terms are counted once per document, even if they occur more frequently in that document.\" (http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-facets.html)\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}