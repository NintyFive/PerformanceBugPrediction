[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/476760606","html_url":"https://github.com/elastic/elasticsearch/issues/40465#issuecomment-476760606","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40465","id":476760606,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3Njc2MDYwNg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2019-03-26T17:27:52Z","updated_at":"2019-03-26T17:27:52Z","author_association":"MEMBER","body":"Actually we would discourage using this setting like this. In fact, our documentation says:\r\n\r\n>The <<data-path,data path>> can be shared by multiple nodes, even by nodes from different\r\nclusters. This is very useful for testing failover and different configurations on your development\r\nmachine. In production, however, it is recommended to run only one node of Elasticsearch per server.\r\n\r\nWe use this in testing indeed, but we think that using this functionality in production is dangerous. This is why in a previous major version we changed the default value for this setting to one. It it too easy to get yourself in trouble, of the sort that you're getting into, by using this functionality. I would encourage you to instead use a separate data path per cluster.\r\n\r\nTherefore, I don't think we should complicate this already dangerous functionality. Instead, I would prefer that we continue to discourage its usage.\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/476760699","html_url":"https://github.com/elastic/elasticsearch/issues/40465#issuecomment-476760699","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40465","id":476760699,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3Njc2MDY5OQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-03-26T17:28:04Z","updated_at":"2019-03-26T17:28:04Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/476944116","html_url":"https://github.com/elastic/elasticsearch/issues/40465#issuecomment-476944116","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40465","id":476944116,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3Njk0NDExNg==","user":{"login":"kkewwei","id":16730433,"node_id":"MDQ6VXNlcjE2NzMwNDMz","avatar_url":"https://avatars1.githubusercontent.com/u/16730433?v=4","gravatar_id":"","url":"https://api.github.com/users/kkewwei","html_url":"https://github.com/kkewwei","followers_url":"https://api.github.com/users/kkewwei/followers","following_url":"https://api.github.com/users/kkewwei/following{/other_user}","gists_url":"https://api.github.com/users/kkewwei/gists{/gist_id}","starred_url":"https://api.github.com/users/kkewwei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkewwei/subscriptions","organizations_url":"https://api.github.com/users/kkewwei/orgs","repos_url":"https://api.github.com/users/kkewwei/repos","events_url":"https://api.github.com/users/kkewwei/events{/privacy}","received_events_url":"https://api.github.com/users/kkewwei/received_events","type":"User","site_admin":false},"created_at":"2019-03-27T02:42:22Z","updated_at":"2019-03-27T02:43:04Z","author_association":"CONTRIBUTOR","body":"@jasontedor, I agree with your opinion, we can set different data.path in config file of two instances of the same machine, then it solves. In product, that we deploy two instances of the same machine has very little probability of happening, but this does happen. I think we may be avoid it at the level of the code. can we solve it by letting \r\n`/data1/es_data/nodes/xxx/indices/*` be determined, for example we can set xxx to be cluster.name.    it avoids this problem when setting same data.path.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/477199452","html_url":"https://github.com/elastic/elasticsearch/issues/40465#issuecomment-477199452","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40465","id":477199452,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzE5OTQ1Mg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2019-03-27T15:07:29Z","updated_at":"2019-03-27T15:07:29Z","author_association":"MEMBER","body":"I am not sure if it's worth it, for then we have to go through a transition from the current format to the new format with a deprecation period, adding upgrade code to migrate from one to the other, and then eventual rejection code when we see the old format. It also complicates the situation for users that want to change their cluster name.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/477214061","html_url":"https://github.com/elastic/elasticsearch/issues/40465#issuecomment-477214061","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40465","id":477214061,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzIxNDA2MQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2019-03-27T15:37:31Z","updated_at":"2019-03-27T15:37:31Z","author_association":"MEMBER","body":"We discussed this discussed this amongst the core/infra team and agreed that we do not want to make any changes along the lines discussed here. Instead, we think that you should use separate data paths for each cluster, as [previously proposed](https://github.com/elastic/elasticsearch/issues/40465#issuecomment-476760606). For example, you could:\r\n\r\n```\r\n$ mkdir /data1/es_data/cluster1\r\n$ mkdir /data1/es_data/cluster2\r\n```\r\n\r\nand set `path.data: /data1/es_data/cluster1` for nodes in `cluster1` and `path.data: /data1/es_data/cluster2` for nodes in cluster2. Then you would not have this problem.","performed_via_github_app":null}]