[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/36107562","html_url":"https://github.com/elastic/elasticsearch/issues/5255#issuecomment-36107562","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5255","id":36107562,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MTA3NTYy","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2014-02-26T09:43:47Z","updated_at":"2014-02-26T09:43:47Z","author_association":"MEMBER","body":"hey,\n\nI just tried this with 1.0.1 and it worked... (didnt return any results on an empty index as expected).\nCan you provide a full recreation please, so I can check what happens? Please start with a completely empty elasticsearch and show all the curl calls you did in order to reach the above state? I just might have missed something to reproduce\n\nAlso please provide information which elasticsearch version you are using (or better, try with the latest 0.90 or 1.0 one).\n\nThanks a lot!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/36118595","html_url":"https://github.com/elastic/elasticsearch/issues/5255#issuecomment-36118595","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5255","id":36118595,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MTE4NTk1","user":{"login":"g00fy-","id":843807,"node_id":"MDQ6VXNlcjg0MzgwNw==","avatar_url":"https://avatars3.githubusercontent.com/u/843807?v=4","gravatar_id":"","url":"https://api.github.com/users/g00fy-","html_url":"https://github.com/g00fy-","followers_url":"https://api.github.com/users/g00fy-/followers","following_url":"https://api.github.com/users/g00fy-/following{/other_user}","gists_url":"https://api.github.com/users/g00fy-/gists{/gist_id}","starred_url":"https://api.github.com/users/g00fy-/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/g00fy-/subscriptions","organizations_url":"https://api.github.com/users/g00fy-/orgs","repos_url":"https://api.github.com/users/g00fy-/repos","events_url":"https://api.github.com/users/g00fy-/events{/privacy}","received_events_url":"https://api.github.com/users/g00fy-/received_events","type":"User","site_admin":false},"created_at":"2014-02-26T12:09:56Z","updated_at":"2014-02-26T12:31:54Z","author_association":"NONE","body":"@spinscale \n\n``` javascript\n{\nnumber: \"1.0.0\",\nbuild_hash: \"a46900e9c72c0a623d71b54016357d5f94c8ea32\",\nbuild_timestamp: \"2014-02-12T16:18:34Z\",\nbuild_snapshot: false,\nlucene_version: \"4.6\"\n}\n```\n\nI will try to reproduce the same bug on clean install. \nHowever I did remove the type and recreated the mappings (didn't delete the index though).\n\nEdit:\nSo I tried to do the same thing on a clean index - this time it worked. \n_Is it possible this may be caused by templates?_\n\nEdit (again)\n1. I deleted the template and the mapping \n2. I run the query on empty type (OK)\n3. I started to pipe some data in to ES\n4. During the data beeing sent to ES, I run the query few times (OK) but suddenly the same error was thrown\n\nI think this is caused by the fact that elasticsearch accepts invalid data.\n\n``` javascript\nQueryPhaseExecutionException[[pl][2]: query[filtered(ConstantScore(GeoDistanceFilter(place.point, SLOPPY_ARC, 1.0E7, 40.73, -74.1)))->cache(_type:proposalsets)],from[0],size[10]: Query Failed [Failed to execute main query]]; nested: ElasticsearchException[java.lang.NumberFormatException: For input string: \"$\"]; nested: UncheckedExecutionException[java.lang.NumberFormatException: For input string: \"$\"]; nested: NumberFormatException[For input string: \"$\"];\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/36340956","html_url":"https://github.com/elastic/elasticsearch/issues/5255#issuecomment-36340956","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5255","id":36340956,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzQwOTU2","user":{"login":"g00fy-","id":843807,"node_id":"MDQ6VXNlcjg0MzgwNw==","avatar_url":"https://avatars3.githubusercontent.com/u/843807?v=4","gravatar_id":"","url":"https://api.github.com/users/g00fy-","html_url":"https://github.com/g00fy-","followers_url":"https://api.github.com/users/g00fy-/followers","following_url":"https://api.github.com/users/g00fy-/following{/other_user}","gists_url":"https://api.github.com/users/g00fy-/gists{/gist_id}","starred_url":"https://api.github.com/users/g00fy-/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/g00fy-/subscriptions","organizations_url":"https://api.github.com/users/g00fy-/orgs","repos_url":"https://api.github.com/users/g00fy-/repos","events_url":"https://api.github.com/users/g00fy-/events{/privacy}","received_events_url":"https://api.github.com/users/g00fy-/received_events","type":"User","site_admin":false},"created_at":"2014-02-28T11:11:07Z","updated_at":"2014-02-28T11:11:07Z","author_association":"NONE","body":"I could not reproduce this error on a clean cluster.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/36357150","html_url":"https://github.com/elastic/elasticsearch/issues/5255#issuecomment-36357150","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5255","id":36357150,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzU3MTUw","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2014-02-28T14:51:03Z","updated_at":"2014-02-28T14:51:03Z","author_association":"MEMBER","body":"Hey,\n\ndo you have by chance the complete stacktrace of the SearchPhaseExecutionException from your first post in your logfiles? If so, could you attach it here?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/41678285","html_url":"https://github.com/elastic/elasticsearch/issues/5255#issuecomment-41678285","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5255","id":41678285,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNjc4Mjg1","user":{"login":"g00fy-","id":843807,"node_id":"MDQ6VXNlcjg0MzgwNw==","avatar_url":"https://avatars3.githubusercontent.com/u/843807?v=4","gravatar_id":"","url":"https://api.github.com/users/g00fy-","html_url":"https://github.com/g00fy-","followers_url":"https://api.github.com/users/g00fy-/followers","following_url":"https://api.github.com/users/g00fy-/following{/other_user}","gists_url":"https://api.github.com/users/g00fy-/gists{/gist_id}","starred_url":"https://api.github.com/users/g00fy-/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/g00fy-/subscriptions","organizations_url":"https://api.github.com/users/g00fy-/orgs","repos_url":"https://api.github.com/users/g00fy-/repos","events_url":"https://api.github.com/users/g00fy-/events{/privacy}","received_events_url":"https://api.github.com/users/g00fy-/received_events","type":"User","site_admin":false},"created_at":"2014-04-29T13:54:43Z","updated_at":"2014-04-29T13:54:43Z","author_association":"NONE","body":"After a few weeks running with out this problem this it came up again today with 1.1.1 version. But this time only 4 of 5 shards failed to execute the query:\n\n```\n{\n   \"took\": 11,\n   \"timed_out\": false,\n   \"_shards\": {\n      \"total\": 5,\n      \"successful\": 1,\n      \"failed\": 4,\n      \"failures\": [\n         {\n            \"index\": \"pl\",\n            \"shard\": 4,\n            \"status\": 500,\n            \"reason\": \"QueryPhaseExecutionException[[pl][4]: query[filtered(ConstantScore(GeoDistanceFilter(places.point, SLOPPY_ARC, 20000.0, 52.0, 21.0)) +(name:carolina^3.0 _all:carolina))->cache(_type:account)],from[0],size[20]: Query Failed [Failed to execute main query]]; nested: ElasticsearchException[java.lang.NumberFormatException: For input string: \\\"$\\f\\u0002(\\u0016\\u000bP\\u0011f\\\"]; nested: UncheckedExecutionException[java.lang.NumberFormatException: For input string: \\\"$\\f\\u0002(\\u0016\\u000bP\\u0011f\\\"]; nested: NumberFormatException[For input string: \\\"$\\f\\u0002(\\u0016\\u000bP\\u0011f\\\"]; \"\n         },\n         {\n            \"index\": \"pl\",\n            \"shard\": 1,\n            \"status\": 500,\n            \"reason\": \"QueryPhaseExecutionException[[pl][1]: query[filtered(ConstantScore(GeoDistanceFilter(places.point, SLOPPY_ARC, 20000.0, 52.0, 21.0)) +(name:carolina^3.0 _all:carolina))->cache(_type:account)],from[0],size[20]: Query Failed [Failed to execute main query]]; nested: ElasticsearchException[java.lang.NumberFormatException: For input string: \\\"$\\f\\u0002(\\u0016\\u000bP\\u0011f\\\"]; nested: UncheckedExecutionException[java.lang.NumberFormatException: For input string: \\\"$\\f\\u0002(\\u0016\\u000bP\\u0011f\\\"]; nested: NumberFormatException[For input string: \\\"$\\f\\u0002(\\u0016\\u000bP\\u0011f\\\"]; \"\n         },\n         {\n            \"index\": \"pl\",\n            \"shard\": 0,\n            \"status\": 500,\n            \"reason\": \"QueryPhaseExecutionException[[pl][0]: query[filtered(ConstantScore(GeoDistanceFilter(places.point, SLOPPY_ARC, 20000.0, 52.0, 21.0)) +(name:carolina^3.0 _all:carolina))->cache(_type:account)],from[0],size[20]: Query Failed [Failed to execute main query]]; nested: ElasticsearchException[java.lang.NumberFormatException: For input string: \\\"$\\f\\u0002(\\u0016\\u000bP\\u0011f\\\"]; nested: UncheckedExecutionException[java.lang.NumberFormatException: For input string: \\\"$\\f\\u0002(\\u0016\\u000bP\\u0011f\\\"]; nested: NumberFormatException[For input string: \\\"$\\f\\u0002(\\u0016\\u000bP\\u0011f\\\"]; \"\n         },\n         {\n            \"index\": \"pl\",\n            \"shard\": 2,\n            \"status\": 500,\n            \"reason\": \"QueryPhaseExecutionException[[pl][2]: query[filtered(ConstantScore(GeoDistanceFilter(places.point, SLOPPY_ARC, 20000.0, 52.0, 21.0)) +(name:carolina^3.0 _all:carolina))->cache(_type:account)],from[0],size[20]: Query Failed [Failed to execute main query]]; nested: ElasticsearchException[java.lang.NumberFormatException: For input string: \\\"$\\f\\u0002(\\u0016\\u000bP\\u0011f\\\"]; nested: UncheckedExecutionException[java.lang.NumberFormatException: For input string: \\\"$\\f\\u0002(\\u0016\\u000bP\\u0011f\\\"]; nested: NumberFormatException[For input string: \\\"$\\f\\u0002(\\u0016\\u000bP\\u0011f\\\"]; \"\n         }\n      ]\n   },\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/41680994","html_url":"https://github.com/elastic/elasticsearch/issues/5255#issuecomment-41680994","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5255","id":41680994,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNjgwOTk0","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2014-04-29T14:16:44Z","updated_at":"2014-04-29T14:16:44Z","author_association":"MEMBER","body":"Hey there. Has this index been freshly created? do you have a stacktrace in the logs that you can attach? Is this now reproducible with every request?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/41684656","html_url":"https://github.com/elastic/elasticsearch/issues/5255#issuecomment-41684656","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5255","id":41684656,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNjg0NjU2","user":{"login":"g00fy-","id":843807,"node_id":"MDQ6VXNlcjg0MzgwNw==","avatar_url":"https://avatars3.githubusercontent.com/u/843807?v=4","gravatar_id":"","url":"https://api.github.com/users/g00fy-","html_url":"https://github.com/g00fy-","followers_url":"https://api.github.com/users/g00fy-/followers","following_url":"https://api.github.com/users/g00fy-/following{/other_user}","gists_url":"https://api.github.com/users/g00fy-/gists{/gist_id}","starred_url":"https://api.github.com/users/g00fy-/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/g00fy-/subscriptions","organizations_url":"https://api.github.com/users/g00fy-/orgs","repos_url":"https://api.github.com/users/g00fy-/repos","events_url":"https://api.github.com/users/g00fy-/events{/privacy}","received_events_url":"https://api.github.com/users/g00fy-/received_events","type":"User","site_admin":false},"created_at":"2014-04-29T14:44:44Z","updated_at":"2014-04-29T14:44:44Z","author_association":"NONE","body":"@spinscale this error is not reproducible. It comes on random. As you see only 4 of 5 shards failed to execute the query. \nI can even rebuild the index with the same input data and it won't raise this exception.\n\nI am sure that the mapping I have provided for the index all include geo_point for `point` so I have no idea what to look for.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/41804080","html_url":"https://github.com/elastic/elasticsearch/issues/5255#issuecomment-41804080","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5255","id":41804080,"node_id":"MDEyOklzc3VlQ29tbWVudDQxODA0MDgw","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2014-04-30T14:39:10Z","updated_at":"2014-04-30T14:39:10Z","author_association":"MEMBER","body":"hm, weird. Lets keep this one open and think if there are any possibilities of reproducing this weird behaviour.. thanks for notifying!\n\nIn case you find any emerging pattern, what could cause this, please add it here! I'll try to take a look together with other developers\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/43206193","html_url":"https://github.com/elastic/elasticsearch/issues/5255#issuecomment-43206193","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5255","id":43206193,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjA2MTkz","user":{"login":"g00fy-","id":843807,"node_id":"MDQ6VXNlcjg0MzgwNw==","avatar_url":"https://avatars3.githubusercontent.com/u/843807?v=4","gravatar_id":"","url":"https://api.github.com/users/g00fy-","html_url":"https://github.com/g00fy-","followers_url":"https://api.github.com/users/g00fy-/followers","following_url":"https://api.github.com/users/g00fy-/following{/other_user}","gists_url":"https://api.github.com/users/g00fy-/gists{/gist_id}","starred_url":"https://api.github.com/users/g00fy-/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/g00fy-/subscriptions","organizations_url":"https://api.github.com/users/g00fy-/orgs","repos_url":"https://api.github.com/users/g00fy-/repos","events_url":"https://api.github.com/users/g00fy-/events{/privacy}","received_events_url":"https://api.github.com/users/g00fy-/received_events","type":"User","site_admin":false},"created_at":"2014-05-15T13:04:02Z","updated_at":"2014-05-15T13:04:02Z","author_association":"NONE","body":"@spinscale What is happening is very wierd. \nWhat I have done:\n1. We update the index daily, exporting almost the same data.\n2. On every nth day the index breaks (only the geo_distance query)\n3. We can reindex the data, and sometimes this helps\n4. We have checked the data manually, and it seems correct (no strage data there, all valid points in format `{\"lon\":50,\"lat\":23}` (some documents have null values)\n\nThe process of checking the data in the index goes as follows:\n1. Check what shard is failing the query ( in our case the 1st shard)\n2. Run the query on the selected shard (?preference=_shards:1)\n3. Purge some data from the index \n4. Repeat step 2. and check if query runs ok\n\nWe end up with 1 document left in the shard - and it had valid point data, so to make shure I also restarted elasticsearch. Even with the single document in the shard, it still failed to execute the query.\n\nAfter that we deleted the last document and then the query run with no errors.\n\nWe could reindex the data again (exacly the same data that we deleted) and elasticsearch didn't fail to execute the query.\n\nI have no idea what can be happening inside. \n\nIs there any way I could debug this problem ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/43311502","html_url":"https://github.com/elastic/elasticsearch/issues/5255#issuecomment-43311502","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5255","id":43311502,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzExNTAy","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2014-05-16T09:07:13Z","updated_at":"2014-05-16T09:07:13Z","author_association":"MEMBER","body":"When this happens again, can you clear all the caches first for that index and see if the problems persists? See http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/indices-clearcache.html#indices-clearcache\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/43327085","html_url":"https://github.com/elastic/elasticsearch/issues/5255#issuecomment-43327085","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5255","id":43327085,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzI3MDg1","user":{"login":"g00fy-","id":843807,"node_id":"MDQ6VXNlcjg0MzgwNw==","avatar_url":"https://avatars3.githubusercontent.com/u/843807?v=4","gravatar_id":"","url":"https://api.github.com/users/g00fy-","html_url":"https://github.com/g00fy-","followers_url":"https://api.github.com/users/g00fy-/followers","following_url":"https://api.github.com/users/g00fy-/following{/other_user}","gists_url":"https://api.github.com/users/g00fy-/gists{/gist_id}","starred_url":"https://api.github.com/users/g00fy-/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/g00fy-/subscriptions","organizations_url":"https://api.github.com/users/g00fy-/orgs","repos_url":"https://api.github.com/users/g00fy-/repos","events_url":"https://api.github.com/users/g00fy-/events{/privacy}","received_events_url":"https://api.github.com/users/g00fy-/received_events","type":"User","site_admin":false},"created_at":"2014-05-16T12:49:04Z","updated_at":"2014-05-16T12:50:19Z","author_association":"NONE","body":"@spinscale clearing the cache didn't help\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54795468","html_url":"https://github.com/elastic/elasticsearch/issues/5255#issuecomment-54795468","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5255","id":54795468,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Nzk1NDY4","user":{"login":"sshamov","id":1590419,"node_id":"MDQ6VXNlcjE1OTA0MTk=","avatar_url":"https://avatars3.githubusercontent.com/u/1590419?v=4","gravatar_id":"","url":"https://api.github.com/users/sshamov","html_url":"https://github.com/sshamov","followers_url":"https://api.github.com/users/sshamov/followers","following_url":"https://api.github.com/users/sshamov/following{/other_user}","gists_url":"https://api.github.com/users/sshamov/gists{/gist_id}","starred_url":"https://api.github.com/users/sshamov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sshamov/subscriptions","organizations_url":"https://api.github.com/users/sshamov/orgs","repos_url":"https://api.github.com/users/sshamov/repos","events_url":"https://api.github.com/users/sshamov/events{/privacy}","received_events_url":"https://api.github.com/users/sshamov/received_events","type":"User","site_admin":false},"created_at":"2014-09-08T09:35:29Z","updated_at":"2014-09-08T09:35:29Z","author_association":"NONE","body":"I managed to get [the steps to reproduce the problem](https://gist.github.com/sshamov/7097e75857aac94a32c9), which is very similar to this.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54796528","html_url":"https://github.com/elastic/elasticsearch/issues/5255#issuecomment-54796528","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5255","id":54796528,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Nzk2NTI4","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-09-08T09:44:52Z","updated_at":"2014-09-08T09:44:52Z","author_association":"CONTRIBUTOR","body":"Hi @sshamov \n\nIn your gist, you delete the mapping for `type2` then reindex the document, which makes `location` type `double`.  This clashes with the loading of fielddata in the next query.\n\nFields with the same name in different types in the same index must have the same mapping.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54797858","html_url":"https://github.com/elastic/elasticsearch/issues/5255#issuecomment-54797858","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5255","id":54797858,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Nzk3ODU4","user":{"login":"sshamov","id":1590419,"node_id":"MDQ6VXNlcjE1OTA0MTk=","avatar_url":"https://avatars3.githubusercontent.com/u/1590419?v=4","gravatar_id":"","url":"https://api.github.com/users/sshamov","html_url":"https://github.com/sshamov","followers_url":"https://api.github.com/users/sshamov/followers","following_url":"https://api.github.com/users/sshamov/following{/other_user}","gists_url":"https://api.github.com/users/sshamov/gists{/gist_id}","starred_url":"https://api.github.com/users/sshamov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sshamov/subscriptions","organizations_url":"https://api.github.com/users/sshamov/orgs","repos_url":"https://api.github.com/users/sshamov/repos","events_url":"https://api.github.com/users/sshamov/events{/privacy}","received_events_url":"https://api.github.com/users/sshamov/received_events","type":"User","site_admin":false},"created_at":"2014-09-08T09:59:32Z","updated_at":"2014-09-08T09:59:32Z","author_association":"NONE","body":"Really? Didn't know that. I thought the bug is that a different mapping in different types is not handled correctly.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54798964","html_url":"https://github.com/elastic/elasticsearch/issues/5255#issuecomment-54798964","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5255","id":54798964,"node_id":"MDEyOklzc3VlQ29tbWVudDU0Nzk4OTY0","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-09-08T10:11:56Z","updated_at":"2014-09-08T10:11:56Z","author_association":"CONTRIBUTOR","body":"@sshamov in a future version of ES, we're planning on enforcing this, to avoid exactly these errors.  See #4081\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/57362813","html_url":"https://github.com/elastic/elasticsearch/issues/5255#issuecomment-57362813","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5255","id":57362813,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MzYyODEz","user":{"login":"charlez","id":1020596,"node_id":"MDQ6VXNlcjEwMjA1OTY=","avatar_url":"https://avatars2.githubusercontent.com/u/1020596?v=4","gravatar_id":"","url":"https://api.github.com/users/charlez","html_url":"https://github.com/charlez","followers_url":"https://api.github.com/users/charlez/followers","following_url":"https://api.github.com/users/charlez/following{/other_user}","gists_url":"https://api.github.com/users/charlez/gists{/gist_id}","starred_url":"https://api.github.com/users/charlez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/charlez/subscriptions","organizations_url":"https://api.github.com/users/charlez/orgs","repos_url":"https://api.github.com/users/charlez/repos","events_url":"https://api.github.com/users/charlez/events{/privacy}","received_events_url":"https://api.github.com/users/charlez/received_events","type":"User","site_admin":false},"created_at":"2014-09-30T18:48:45Z","updated_at":"2014-10-02T21:16:34Z","author_association":"NONE","body":"I've observed this problem when issuing search_type=scan with a geo_distance filter.\n\nThe problem can arise when a temporary search result set is written with the URL for the search result set specifying a different type.  Writing/creating the same document structure to the temporary search result set is problematic, because dynamic mapping doesn't create a geo_point for the lon/lat term within the search result set.\n\nAt first I didn't realize my scenario is essentially the case described above (and to be addressed by <a href=\"https://github.com/elasticsearch/elasticsearch/issues/4081\">#4081</a>).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/68254430","html_url":"https://github.com/elastic/elasticsearch/issues/5255#issuecomment-68254430","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5255","id":68254430,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MjU0NDMw","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-12-29T12:45:07Z","updated_at":"2014-12-29T12:45:07Z","author_association":"CONTRIBUTOR","body":"Closing in favour of #8870\n","performed_via_github_app":null}]