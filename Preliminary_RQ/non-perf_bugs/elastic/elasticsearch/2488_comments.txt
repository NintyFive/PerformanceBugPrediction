[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/11478027","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-11478027","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":11478027,"node_id":"MDEyOklzc3VlQ29tbWVudDExNDc4MDI3","user":{"login":"moscht","id":2073587,"node_id":"MDQ6VXNlcjIwNzM1ODc=","avatar_url":"https://avatars2.githubusercontent.com/u/2073587?v=4","gravatar_id":"","url":"https://api.github.com/users/moscht","html_url":"https://github.com/moscht","followers_url":"https://api.github.com/users/moscht/followers","following_url":"https://api.github.com/users/moscht/following{/other_user}","gists_url":"https://api.github.com/users/moscht/gists{/gist_id}","starred_url":"https://api.github.com/users/moscht/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/moscht/subscriptions","organizations_url":"https://api.github.com/users/moscht/orgs","repos_url":"https://api.github.com/users/moscht/repos","events_url":"https://api.github.com/users/moscht/events{/privacy}","received_events_url":"https://api.github.com/users/moscht/received_events","type":"User","site_admin":false},"created_at":"2012-12-18T08:43:56Z","updated_at":"2012-12-18T08:43:56Z","author_association":"NONE","body":"We also had at some point a similar issue, where minimum_master_nodes did not prevent the cluster from having two different views of the nodes at the same time. \n\nAs our indices were created automatically, some of the indices were created twice, once in every half of the cluster with the two masters broadcasting different states, and after a full cluster restart some shards were unable to be allocated, as the state has been mixed up. This was on 0.17. so I am not sure, if data would still be lost, as the state is now saved with the shards. But the other question is what happens when an index exists twice in the cluster (as it has been created on every master).\n\nI think we should have a method to recover from such a situation. As I don't know how the zen discovery works exactly, I can not say how to solve it, but IMHO a node should only be in one cluster, in your second image node 1 should either be with 2, preventing 3 from becoming master, or with node 3, preventing 2 from staying master.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/11503993","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-11503993","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":11503993,"node_id":"MDEyOklzc3VlQ29tbWVudDExNTAzOTkz","user":{"login":"tallpsmith","id":203682,"node_id":"MDQ6VXNlcjIwMzY4Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/203682?v=4","gravatar_id":"","url":"https://api.github.com/users/tallpsmith","html_url":"https://github.com/tallpsmith","followers_url":"https://api.github.com/users/tallpsmith/followers","following_url":"https://api.github.com/users/tallpsmith/following{/other_user}","gists_url":"https://api.github.com/users/tallpsmith/gists{/gist_id}","starred_url":"https://api.github.com/users/tallpsmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tallpsmith/subscriptions","organizations_url":"https://api.github.com/users/tallpsmith/orgs","repos_url":"https://api.github.com/users/tallpsmith/repos","events_url":"https://api.github.com/users/tallpsmith/events{/privacy}","received_events_url":"https://api.github.com/users/tallpsmith/received_events","type":"User","site_admin":false},"created_at":"2012-12-18T20:37:35Z","updated_at":"2012-12-18T20:37:35Z","author_association":"NONE","body":"see Issue #2117 as well, I'm not sure if the Unicast discovery is making it worse for you, but I think we captured the underlying problem over on that issue, but would like your thoughts too.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/11555570","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-11555570","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":11555570,"node_id":"MDEyOklzc3VlQ29tbWVudDExNTU1NTcw","user":{"login":"saj","id":194389,"node_id":"MDQ6VXNlcjE5NDM4OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/194389?v=4","gravatar_id":"","url":"https://api.github.com/users/saj","html_url":"https://github.com/saj","followers_url":"https://api.github.com/users/saj/followers","following_url":"https://api.github.com/users/saj/following{/other_user}","gists_url":"https://api.github.com/users/saj/gists{/gist_id}","starred_url":"https://api.github.com/users/saj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saj/subscriptions","organizations_url":"https://api.github.com/users/saj/orgs","repos_url":"https://api.github.com/users/saj/repos","events_url":"https://api.github.com/users/saj/events{/privacy}","received_events_url":"https://api.github.com/users/saj/received_events","type":"User","site_admin":false},"created_at":"2012-12-20T00:31:49Z","updated_at":"2012-12-20T00:31:49Z","author_association":"NONE","body":"From #2117:\n\n> The split brain occurs if the nodeId(UUID) of the disconnected node is such that the disconnected node picks itself as the next logical master while pinging the other nodes(NodeFaultDetection).\n\nDitto.\n\n> The split brain only occurs on the second time that the node is disconnected/isolated.\n\nI see a split on the _first partial isolation_.  To me, these bug reports look like two different problems.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/15846991","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-15846991","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":15846991,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODQ2OTkx","user":{"login":"trollybaz","id":862357,"node_id":"MDQ6VXNlcjg2MjM1Nw==","avatar_url":"https://avatars2.githubusercontent.com/u/862357?v=4","gravatar_id":"","url":"https://api.github.com/users/trollybaz","html_url":"https://github.com/trollybaz","followers_url":"https://api.github.com/users/trollybaz/followers","following_url":"https://api.github.com/users/trollybaz/following{/other_user}","gists_url":"https://api.github.com/users/trollybaz/gists{/gist_id}","starred_url":"https://api.github.com/users/trollybaz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trollybaz/subscriptions","organizations_url":"https://api.github.com/users/trollybaz/orgs","repos_url":"https://api.github.com/users/trollybaz/repos","events_url":"https://api.github.com/users/trollybaz/events{/privacy}","received_events_url":"https://api.github.com/users/trollybaz/received_events","type":"User","site_admin":false},"created_at":"2013-04-03T16:23:29Z","updated_at":"2013-04-03T16:28:34Z","author_association":"NONE","body":"I believe I ran into this issue yesterday in a 3 node cluster- a node elects itself master when the current master is disconnected from it.  The remaining partipant node toggles between having the other nodes as its master before settling on one.  Is this what you saw @saj?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/15871337","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-15871337","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":15871337,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODcxMzM3","user":{"login":"saj","id":194389,"node_id":"MDQ6VXNlcjE5NDM4OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/194389?v=4","gravatar_id":"","url":"https://api.github.com/users/saj","html_url":"https://github.com/saj","followers_url":"https://api.github.com/users/saj/followers","following_url":"https://api.github.com/users/saj/following{/other_user}","gists_url":"https://api.github.com/users/saj/gists{/gist_id}","starred_url":"https://api.github.com/users/saj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saj/subscriptions","organizations_url":"https://api.github.com/users/saj/orgs","repos_url":"https://api.github.com/users/saj/repos","events_url":"https://api.github.com/users/saj/events{/privacy}","received_events_url":"https://api.github.com/users/saj/received_events","type":"User","site_admin":false},"created_at":"2013-04-03T23:12:54Z","updated_at":"2013-04-03T23:12:54Z","author_association":"NONE","body":"Yes, @trollybaz.\n\nI ended up working around the problem (in testing) by using [elasticsearch-zookeeper](https://github.com/sonian/elasticsearch-zookeeper) in place of Zen discovery.  We already had reliable Zookeeper infrastructure up for other applications, so this approach made a whole lot of sense to me.  I was unable to reproduce the problem with the Zookeeper discovery module.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/15930675","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-15930675","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":15930675,"node_id":"MDEyOklzc3VlQ29tbWVudDE1OTMwNjc1","user":{"login":"tallpsmith","id":203682,"node_id":"MDQ6VXNlcjIwMzY4Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/203682?v=4","gravatar_id":"","url":"https://api.github.com/users/tallpsmith","html_url":"https://github.com/tallpsmith","followers_url":"https://api.github.com/users/tallpsmith/followers","following_url":"https://api.github.com/users/tallpsmith/following{/other_user}","gists_url":"https://api.github.com/users/tallpsmith/gists{/gist_id}","starred_url":"https://api.github.com/users/tallpsmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tallpsmith/subscriptions","organizations_url":"https://api.github.com/users/tallpsmith/orgs","repos_url":"https://api.github.com/users/tallpsmith/repos","events_url":"https://api.github.com/users/tallpsmith/events{/privacy}","received_events_url":"https://api.github.com/users/tallpsmith/received_events","type":"User","site_admin":false},"created_at":"2013-04-04T23:31:22Z","updated_at":"2013-04-04T23:31:22Z","author_association":"NONE","body":"I'm pretty sure we're suffering from this in certain situations, and I don't think that it's limited to unicast discovery.  \n\nWe've had some bad networking, some Virtual Machine stalls (result of SAN issues, or VMWare doing weird stuff), or even heavy GC activity can cause enough pauses for aspects of the split brain to occur.   \n\nWe were originally running pre-0.19.5 which contained an important fix for an edge case I thought we were suffering from, but since moving to 0.19.10 we've had at least one split brain (VMware->SAN related) that caused 1 of the 3 ES nodes to lose touch with the master, and declare itself master, while still then maintaing links back to other nodes.  \n\nI'm going to be tweaking our ES logging config to output DEBUG level discovery to a separate file so that I can properly trace these cases, but there have just been too many of these not to consider ES not handling these adversarial environment cases.\n\nI believe #2117 is still an issue and is an interesting edge case, but I think this issue here best represents the majority of the issues people are having.  My gut/intuition seems to indicate that the probability of this issue occurring does drop with a larger cluster, so the 3-node, minimum_master_node=2 is the most prevalent case.\n\nIt seems like when the 'split brain' new master connects to it's known child nodes, any node that already has an upstream connection to an existing master probably should be flagging it as a problem, and telling the newly connected master node \"hey, I don't think you fully understand the cluster situation\".\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/15937973","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-15937973","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":15937973,"node_id":"MDEyOklzc3VlQ29tbWVudDE1OTM3OTcz","user":{"login":"brusic","id":354105,"node_id":"MDQ6VXNlcjM1NDEwNQ==","avatar_url":"https://avatars1.githubusercontent.com/u/354105?v=4","gravatar_id":"","url":"https://api.github.com/users/brusic","html_url":"https://github.com/brusic","followers_url":"https://api.github.com/users/brusic/followers","following_url":"https://api.github.com/users/brusic/following{/other_user}","gists_url":"https://api.github.com/users/brusic/gists{/gist_id}","starred_url":"https://api.github.com/users/brusic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brusic/subscriptions","organizations_url":"https://api.github.com/users/brusic/orgs","repos_url":"https://api.github.com/users/brusic/repos","events_url":"https://api.github.com/users/brusic/events{/privacy}","received_events_url":"https://api.github.com/users/brusic/received_events","type":"User","site_admin":false},"created_at":"2013-04-05T04:00:52Z","updated_at":"2013-04-05T04:00:52Z","author_association":"CONTRIBUTOR","body":"I believe there are two issues at hand. One being the possible culprits for a node being disconnected from the cluster: network issues, large GC, discover bug, etc... The other issue, and the more important one IMHO, is the failure in the master election process to detect that a node belongs to two separate clusters (with different masters). Clusters should embrace node failures for whatever reason, but master election needs to be rock solid. Tough problem in systems without an authoritative process such as ZooKeeper.\n\nTo add more data to the issue: I have seen the issue on two different 0.20RC1 clusters. One having eight nodes, the other with four.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/15939253","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-15939253","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":15939253,"node_id":"MDEyOklzc3VlQ29tbWVudDE1OTM5MjUz","user":{"login":"tallpsmith","id":203682,"node_id":"MDQ6VXNlcjIwMzY4Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/203682?v=4","gravatar_id":"","url":"https://api.github.com/users/tallpsmith","html_url":"https://github.com/tallpsmith","followers_url":"https://api.github.com/users/tallpsmith/followers","following_url":"https://api.github.com/users/tallpsmith/following{/other_user}","gists_url":"https://api.github.com/users/tallpsmith/gists{/gist_id}","starred_url":"https://api.github.com/users/tallpsmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tallpsmith/subscriptions","organizations_url":"https://api.github.com/users/tallpsmith/orgs","repos_url":"https://api.github.com/users/tallpsmith/repos","events_url":"https://api.github.com/users/tallpsmith/events{/privacy}","received_events_url":"https://api.github.com/users/tallpsmith/received_events","type":"User","site_admin":false},"created_at":"2013-04-05T05:11:18Z","updated_at":"2013-04-05T05:11:18Z","author_association":"NONE","body":"I'm not sure the former is really something ES should be actively dealing with, the latter I agree, and is the main point here, in how ES detects and recovers from cases where 2 masters have been elected.  \n\nThere was supposed to have been some code in, I think, 0.19.5 that 'recovers' from this state by choosing the side that has the most recent ClusterStatus object (see Issue #2042) , but it doesn't appear in practice to be working as expected, because we get these child nodes accepting connections from multiple masters.\n\nI think gathering the discovery-level DEBUG logging from the multiple nodes and presenting it here is the only way to get further traction on this case.  \n\nIt's possible going through the steps in Issue #2117 may uncover edge cases related to this one (even though the source conditions are different); at least it might be a reproducible case to explore.\n\n@s1monw nudge - have you had a chance to look into #2117 at all... ?  :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/15966183","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-15966183","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":15966183,"node_id":"MDEyOklzc3VlQ29tbWVudDE1OTY2MTgz","user":{"login":"brusic","id":354105,"node_id":"MDQ6VXNlcjM1NDEwNQ==","avatar_url":"https://avatars1.githubusercontent.com/u/354105?v=4","gravatar_id":"","url":"https://api.github.com/users/brusic","html_url":"https://github.com/brusic","followers_url":"https://api.github.com/users/brusic/followers","following_url":"https://api.github.com/users/brusic/following{/other_user}","gists_url":"https://api.github.com/users/brusic/gists{/gist_id}","starred_url":"https://api.github.com/users/brusic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brusic/subscriptions","organizations_url":"https://api.github.com/users/brusic/orgs","repos_url":"https://api.github.com/users/brusic/repos","events_url":"https://api.github.com/users/brusic/events{/privacy}","received_events_url":"https://api.github.com/users/brusic/received_events","type":"User","site_admin":false},"created_at":"2013-04-05T16:27:54Z","updated_at":"2013-04-05T16:27:54Z","author_association":"CONTRIBUTOR","body":"Paul, I agree that the former is not something to focus on. Should have stated that. :) The beauty of many of the new big data systems is that they embrace failure. Nodes will come and go, either due to errors or just simple maintenance. #2117 might have a different source condition, but the recovery process after the fact should be identical.\n\nI have enabled DEBUG logging at the discovery level and I can pinpoint when a node has left/joined a cluster, but I still have no insights on the election process.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18387558","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-18387558","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":18387558,"node_id":"MDEyOklzc3VlQ29tbWVudDE4Mzg3NTU4","user":{"login":"tallpsmith","id":203682,"node_id":"MDQ6VXNlcjIwMzY4Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/203682?v=4","gravatar_id":"","url":"https://api.github.com/users/tallpsmith","html_url":"https://github.com/tallpsmith","followers_url":"https://api.github.com/users/tallpsmith/followers","following_url":"https://api.github.com/users/tallpsmith/following{/other_user}","gists_url":"https://api.github.com/users/tallpsmith/gists{/gist_id}","starred_url":"https://api.github.com/users/tallpsmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tallpsmith/subscriptions","organizations_url":"https://api.github.com/users/tallpsmith/orgs","repos_url":"https://api.github.com/users/tallpsmith/repos","events_url":"https://api.github.com/users/tallpsmith/events{/privacy}","received_events_url":"https://api.github.com/users/tallpsmith/received_events","type":"User","site_admin":false},"created_at":"2013-05-24T05:43:42Z","updated_at":"2013-05-24T05:43:42Z","author_association":"NONE","body":"suffered from this the other day when an accidental provisioning error had a 4GB ES Heap instance running on a 4GB O/S memory, which was always going to end up in trouble.  The node swapped, process hung, and the intersection issue described here happened.\n\nYes, the provisioning error could have been avoided, yes, probably use of mlockall may have prevented the destined-to-die-a-horrible-swap-death, but there's other scenarios that could cause a hung process (bad I/O causing stalls for example) where the way ES handles the cluster state is poor, and leads to this problem.\n\nwe hope very much someone is looking hard into ways to make ES a bit more resilient when facing these situations to improve data integrity... (goes on bended knees while pleading)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18411948","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-18411948","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":18411948,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDExOTQ4","user":{"login":"otisg","id":332580,"node_id":"MDQ6VXNlcjMzMjU4MA==","avatar_url":"https://avatars2.githubusercontent.com/u/332580?v=4","gravatar_id":"","url":"https://api.github.com/users/otisg","html_url":"https://github.com/otisg","followers_url":"https://api.github.com/users/otisg/followers","following_url":"https://api.github.com/users/otisg/following{/other_user}","gists_url":"https://api.github.com/users/otisg/gists{/gist_id}","starred_url":"https://api.github.com/users/otisg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/otisg/subscriptions","organizations_url":"https://api.github.com/users/otisg/orgs","repos_url":"https://api.github.com/users/otisg/repos","events_url":"https://api.github.com/users/otisg/events{/privacy}","received_events_url":"https://api.github.com/users/otisg/received_events","type":"User","site_admin":false},"created_at":"2013-05-24T15:30:05Z","updated_at":"2013-05-24T15:30:05Z","author_association":"NONE","body":"Btw. why not adopt ZK, which I believe would make this situation impossible(?)?  I don't love the extra process/management that the use of ZK would imply..... though maybe it could be embedded, like in SolrCloud, to work around that?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18412830","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-18412830","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":18412830,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDEyODMw","user":{"login":"brusic","id":354105,"node_id":"MDQ6VXNlcjM1NDEwNQ==","avatar_url":"https://avatars1.githubusercontent.com/u/354105?v=4","gravatar_id":"","url":"https://api.github.com/users/brusic","html_url":"https://github.com/brusic","followers_url":"https://api.github.com/users/brusic/followers","following_url":"https://api.github.com/users/brusic/following{/other_user}","gists_url":"https://api.github.com/users/brusic/gists{/gist_id}","starred_url":"https://api.github.com/users/brusic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brusic/subscriptions","organizations_url":"https://api.github.com/users/brusic/orgs","repos_url":"https://api.github.com/users/brusic/repos","events_url":"https://api.github.com/users/brusic/events{/privacy}","received_events_url":"https://api.github.com/users/brusic/received_events","type":"User","site_admin":false},"created_at":"2013-05-24T15:44:14Z","updated_at":"2013-05-24T15:44:14Z","author_association":"CONTRIBUTOR","body":"From my understanding, the single embedded Zookeeper model is not ideal for production and that a full Zookeeper cluster is preferred. Never tried myself, so I cannot personally comment.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18414153","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-18414153","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":18414153,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDE0MTUz","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-05-24T16:04:55Z","updated_at":"2013-05-24T16:04:55Z","author_association":"CONTRIBUTOR","body":"FYI - there is a zookeeper plugin for ES\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18414233","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-18414233","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":18414233,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDE0MjMz","user":{"login":"otisg","id":332580,"node_id":"MDQ6VXNlcjMzMjU4MA==","avatar_url":"https://avatars2.githubusercontent.com/u/332580?v=4","gravatar_id":"","url":"https://api.github.com/users/otisg","html_url":"https://github.com/otisg","followers_url":"https://api.github.com/users/otisg/followers","following_url":"https://api.github.com/users/otisg/following{/other_user}","gists_url":"https://api.github.com/users/otisg/gists{/gist_id}","starred_url":"https://api.github.com/users/otisg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/otisg/subscriptions","organizations_url":"https://api.github.com/users/otisg/orgs","repos_url":"https://api.github.com/users/otisg/repos","events_url":"https://api.github.com/users/otisg/events{/privacy}","received_events_url":"https://api.github.com/users/otisg/received_events","type":"User","site_admin":false},"created_at":"2013-05-24T16:06:18Z","updated_at":"2013-05-24T16:06:18Z","author_association":"NONE","body":"Oh, I didn't mean to imply a _single_ embedded ZK.  I meant N of them in different ES processes. Right Simon, there is the plugin, but I suspect people are afraid of using it because it's not clear if it's 100% maintained, if it works with the latest ES and such.  So my Q is really about adopting something like that and supporting it officially.  Is that a possibility?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18431848","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-18431848","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":18431848,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDMxODQ4","user":{"login":"mpalmer","id":357,"node_id":"MDQ6VXNlcjM1Nw==","avatar_url":"https://avatars2.githubusercontent.com/u/357?v=4","gravatar_id":"","url":"https://api.github.com/users/mpalmer","html_url":"https://github.com/mpalmer","followers_url":"https://api.github.com/users/mpalmer/followers","following_url":"https://api.github.com/users/mpalmer/following{/other_user}","gists_url":"https://api.github.com/users/mpalmer/gists{/gist_id}","starred_url":"https://api.github.com/users/mpalmer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mpalmer/subscriptions","organizations_url":"https://api.github.com/users/mpalmer/orgs","repos_url":"https://api.github.com/users/mpalmer/repos","events_url":"https://api.github.com/users/mpalmer/events{/privacy}","received_events_url":"https://api.github.com/users/mpalmer/received_events","type":"User","site_admin":false},"created_at":"2013-05-24T21:46:57Z","updated_at":"2013-05-24T21:46:57Z","author_association":"NONE","body":"@otisg: The problem with the ZK plugin is that with clients being part of the cluster, they need to know about ZK in order to be able to discover the servers in the cluster.  Some client libraries (such as the one used by the application that started this bug report -- I'm a colleague of Saj's) doesn't support ZK discovery.  In order for ZK to be a useful alternative in general, there either needs to be universal support of ZK in client libraries, or a backwards-compatible way for non-ZK-aware client libraries to discover the servers (perhaps a ZK-to-Zen translator or something... I don't know, I've got bugger-all knowledge of how ES actually works under the hood).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19205978","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-19205978","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":19205978,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MjA1OTc4","user":{"login":"aochsner","id":222713,"node_id":"MDQ6VXNlcjIyMjcxMw==","avatar_url":"https://avatars2.githubusercontent.com/u/222713?v=4","gravatar_id":"","url":"https://api.github.com/users/aochsner","html_url":"https://github.com/aochsner","followers_url":"https://api.github.com/users/aochsner/followers","following_url":"https://api.github.com/users/aochsner/following{/other_user}","gists_url":"https://api.github.com/users/aochsner/gists{/gist_id}","starred_url":"https://api.github.com/users/aochsner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aochsner/subscriptions","organizations_url":"https://api.github.com/users/aochsner/orgs","repos_url":"https://api.github.com/users/aochsner/repos","events_url":"https://api.github.com/users/aochsner/events{/privacy}","received_events_url":"https://api.github.com/users/aochsner/received_events","type":"User","site_admin":false},"created_at":"2013-06-10T15:26:37Z","updated_at":"2013-06-10T16:26:24Z","author_association":"CONTRIBUTOR","body":"We've gotten into this situation twice now in our QA environment.  3 nodes.  minimum_master_nodes = 2.  Log flies at https://gist.github.com/aochsner/5749640 (sorry they are big and repetitive).  \n\nWe are on 0.9.0 and using multicast\n\nAs a bit of a walkthrough.  sthapqa02 was the master and all it noticed was that sthapqa01 went bye bye and never rejoined.  According to sthapqa02, the cluster was sthapqa02 (itself) and sthapqa03.  \n\nsthapqa01 is what appeared to have problems.  It couldn't reach sthapqa02 and decided to create a cluster between itself and sthapqa03.  \n\nsthapqa03 went along w/ sthapqa01 to create a cluster and didn't notify sthapqa02.  \n\nSo 01 and 03 are in a cluster and 02 thinks it's in a cluster w/ 03.  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/22606103","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-22606103","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":22606103,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjA2MTAz","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2013-08-13T23:46:16Z","updated_at":"2013-08-13T23:46:16Z","author_association":"MEMBER","body":"just an update that this behaves much better in 0.90.3 with dedicated master nodes deployment, but we are working on a better implementation down the road (with potential constraints on requiring fixed dedicated master nodes by the nature of some consensus algo impls, we will see how it goes...).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/22612241","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-22612241","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":22612241,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjEyMjQx","user":{"login":"tallpsmith","id":203682,"node_id":"MDQ6VXNlcjIwMzY4Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/203682?v=4","gravatar_id":"","url":"https://api.github.com/users/tallpsmith","html_url":"https://github.com/tallpsmith","followers_url":"https://api.github.com/users/tallpsmith/followers","following_url":"https://api.github.com/users/tallpsmith/following{/other_user}","gists_url":"https://api.github.com/users/tallpsmith/gists{/gist_id}","starred_url":"https://api.github.com/users/tallpsmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tallpsmith/subscriptions","organizations_url":"https://api.github.com/users/tallpsmith/orgs","repos_url":"https://api.github.com/users/tallpsmith/repos","events_url":"https://api.github.com/users/tallpsmith/events{/privacy}","received_events_url":"https://api.github.com/users/tallpsmith/received_events","type":"User","site_admin":false},"created_at":"2013-08-14T02:56:27Z","updated_at":"2013-08-14T02:56:27Z","author_association":"NONE","body":"@kimchy that sounds promising, I would love to to understand more of the changes in that 0.90.x series that is in this area to understand what movements are going on ?  Is there a commit hash you could point to that you can remember that I could peek at ?\n\nBy dedicated master node, do you mean nodes that _just_ perform the master role, and not data role? (so additional nodes on top of existing data nodes).  This would sort of mimic how adding Zookeeper as a Master Election co-ordinator works?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/22612451","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-22612451","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":22612451,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjEyNDUx","user":{"login":"phungleson","id":93457,"node_id":"MDQ6VXNlcjkzNDU3","avatar_url":"https://avatars2.githubusercontent.com/u/93457?v=4","gravatar_id":"","url":"https://api.github.com/users/phungleson","html_url":"https://github.com/phungleson","followers_url":"https://api.github.com/users/phungleson/followers","following_url":"https://api.github.com/users/phungleson/following{/other_user}","gists_url":"https://api.github.com/users/phungleson/gists{/gist_id}","starred_url":"https://api.github.com/users/phungleson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phungleson/subscriptions","organizations_url":"https://api.github.com/users/phungleson/orgs","repos_url":"https://api.github.com/users/phungleson/repos","events_url":"https://api.github.com/users/phungleson/events{/privacy}","received_events_url":"https://api.github.com/users/phungleson/received_events","type":"User","site_admin":false},"created_at":"2013-08-14T03:05:05Z","updated_at":"2013-08-14T03:05:05Z","author_association":"CONTRIBUTOR","body":"@kimchy Does 0.90.2 has the same features or they are only available in 0.90.3? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/22650798","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-22650798","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":22650798,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjUwNzk4","user":{"login":"brusic","id":354105,"node_id":"MDQ6VXNlcjM1NDEwNQ==","avatar_url":"https://avatars1.githubusercontent.com/u/354105?v=4","gravatar_id":"","url":"https://api.github.com/users/brusic","html_url":"https://github.com/brusic","followers_url":"https://api.github.com/users/brusic/followers","following_url":"https://api.github.com/users/brusic/following{/other_user}","gists_url":"https://api.github.com/users/brusic/gists{/gist_id}","starred_url":"https://api.github.com/users/brusic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brusic/subscriptions","organizations_url":"https://api.github.com/users/brusic/orgs","repos_url":"https://api.github.com/users/brusic/repos","events_url":"https://api.github.com/users/brusic/events{/privacy}","received_events_url":"https://api.github.com/users/brusic/received_events","type":"User","site_admin":false},"created_at":"2013-08-14T17:06:22Z","updated_at":"2013-08-14T17:06:22Z","author_association":"CONTRIBUTOR","body":"Shay, thanks for the update.\n\nFor us, the problem has gone away with the adoption of 0.90.2. The actual underlying problem might not have been fixed, but the improved memory usage with elasticsearch 0.90/Lucene 4 has eliminated large GCs, which probably were the root cause of our disconnections. No disconnections means no need to elect another master.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/24822318","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-24822318","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":24822318,"node_id":"MDEyOklzc3VlQ29tbWVudDI0ODIyMzE4","user":{"login":"btiernay","id":2717578,"node_id":"MDQ6VXNlcjI3MTc1Nzg=","avatar_url":"https://avatars3.githubusercontent.com/u/2717578?v=4","gravatar_id":"","url":"https://api.github.com/users/btiernay","html_url":"https://github.com/btiernay","followers_url":"https://api.github.com/users/btiernay/followers","following_url":"https://api.github.com/users/btiernay/following{/other_user}","gists_url":"https://api.github.com/users/btiernay/gists{/gist_id}","starred_url":"https://api.github.com/users/btiernay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/btiernay/subscriptions","organizations_url":"https://api.github.com/users/btiernay/orgs","repos_url":"https://api.github.com/users/btiernay/repos","events_url":"https://api.github.com/users/btiernay/events{/privacy}","received_events_url":"https://api.github.com/users/btiernay/received_events","type":"User","site_admin":false},"created_at":"2013-09-20T16:21:47Z","updated_at":"2013-09-20T16:21:47Z","author_association":"NONE","body":"This situation happened to us recently running 0.90.1 with `minimum_master_nodes` set to `N/2 + 1`, with `N = 15`. I'm not sure what the root cause was, but this shows that such a scenario is probable in larger clusters as well.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/26582621","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-26582621","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":26582621,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTgyNjIx","user":{"login":"trevorreeves","id":890423,"node_id":"MDQ6VXNlcjg5MDQyMw==","avatar_url":"https://avatars0.githubusercontent.com/u/890423?v=4","gravatar_id":"","url":"https://api.github.com/users/trevorreeves","html_url":"https://github.com/trevorreeves","followers_url":"https://api.github.com/users/trevorreeves/followers","following_url":"https://api.github.com/users/trevorreeves/following{/other_user}","gists_url":"https://api.github.com/users/trevorreeves/gists{/gist_id}","starred_url":"https://api.github.com/users/trevorreeves/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trevorreeves/subscriptions","organizations_url":"https://api.github.com/users/trevorreeves/orgs","repos_url":"https://api.github.com/users/trevorreeves/repos","events_url":"https://api.github.com/users/trevorreeves/events{/privacy}","received_events_url":"https://api.github.com/users/trevorreeves/received_events","type":"User","site_admin":false},"created_at":"2013-10-18T09:28:37Z","updated_at":"2013-10-18T09:28:37Z","author_association":"NONE","body":"We have been frequently experiencing this 'mix brain' issue in several of our clusters - up to 3 or 4 times a week.  We have always had dedicated master eligible nodes (i.e. master=true, data=false), correctly configured minimum_master_nodes and have recently moved to 0.90.3, and seen no improvement in the situation.\n\nAs a side note, the initial cause of the disruption to our cluster is 'something' to do with the network links between the nodes I imagine - one of the master eligible nodes occasionally loses connectivity with the master node briefly - \"transport disconnected (with verified connect)\" is all we get in the logs.  We haven't figured out this issue yet (something is killing the tcp connection?), but this explains the frequency with which we are affected by this bug as it seems its a double hit due to the inability for the cluster to recover itself correctly when this disconnect occurs.\n\n@kimchy Is there any latest status on the 'better implementation down the road' and when it might be delivered?\n\nSounds like zookeeper is our reluctant interim solution.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/26770242","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-26770242","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":26770242,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NzcwMjQy","user":{"login":"tallpsmith","id":203682,"node_id":"MDQ6VXNlcjIwMzY4Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/203682?v=4","gravatar_id":"","url":"https://api.github.com/users/tallpsmith","html_url":"https://github.com/tallpsmith","followers_url":"https://api.github.com/users/tallpsmith/followers","following_url":"https://api.github.com/users/tallpsmith/following{/other_user}","gists_url":"https://api.github.com/users/tallpsmith/gists{/gist_id}","starred_url":"https://api.github.com/users/tallpsmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tallpsmith/subscriptions","organizations_url":"https://api.github.com/users/tallpsmith/orgs","repos_url":"https://api.github.com/users/tallpsmith/repos","events_url":"https://api.github.com/users/tallpsmith/events{/privacy}","received_events_url":"https://api.github.com/users/tallpsmith/received_events","type":"User","site_admin":false},"created_at":"2013-10-22T01:04:52Z","updated_at":"2013-10-22T01:04:52Z","author_association":"NONE","body":"just as I was beginning plans to go to a set of dedicated master-only nodes I ready @trevorreeves post where he's still hitting the same problem.  Doh!\n\nOur situation appears to be IOWait related, in that a master node (also a data-node) hits an issue that causes extensive IOWait (a _scroll based search can trigger this, we already cap the # streams and Mb/second recovery rate through settings), the JVM becomes unresponsive.  The other nodes that are doing the Master Fault Detection are configured with 3 x 30 second ping timeouts, all of which fail, and then they give up on the master.\n\nI'm not really sure what is stalling the master node JVM, particularly when I'm positive it's not GC related, it's definitely linked to heavy IOWait.  We have one node in one installation with a 'tenuous' connection to a NetApp storage backing the volume used by the ES local disk image, and that seems to be the underlying root of our issues, but it is the way the ES cluster is failing to recover from this situation and not properly reestabling a consensus on the cluster that causes issues (I don't mind any weirdness during times of whacky IO patterns that form the split brain so much as I dislike the way ES is failing to keep track of who thinks who's who in the cluster).\n\nAt this point, it does seem like the Zookeeper based discovery/cluster management plugin is the most reliable way, though I'm not looking forward to setting up that up to be honest.  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/29015092","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-29015092","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":29015092,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDE1MDky","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2013-11-21T19:25:27Z","updated_at":"2013-11-21T19:25:27Z","author_association":"CONTRIBUTOR","body":"We haven't hit this but this report is worrying - is this being worked on?  This is the kind of thing that'd make us switch to Zookeeper.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/29016374","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-29016374","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":29016374,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDE2Mzc0","user":{"login":"brusic","id":354105,"node_id":"MDQ6VXNlcjM1NDEwNQ==","avatar_url":"https://avatars1.githubusercontent.com/u/354105?v=4","gravatar_id":"","url":"https://api.github.com/users/brusic","html_url":"https://github.com/brusic","followers_url":"https://api.github.com/users/brusic/followers","following_url":"https://api.github.com/users/brusic/following{/other_user}","gists_url":"https://api.github.com/users/brusic/gists{/gist_id}","starred_url":"https://api.github.com/users/brusic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brusic/subscriptions","organizations_url":"https://api.github.com/users/brusic/orgs","repos_url":"https://api.github.com/users/brusic/repos","events_url":"https://api.github.com/users/brusic/events{/privacy}","received_events_url":"https://api.github.com/users/brusic/received_events","type":"User","site_admin":false},"created_at":"2013-11-21T19:40:25Z","updated_at":"2013-11-21T19:42:07Z","author_association":"CONTRIBUTOR","body":"Just wanted to point out to Nik a comment in the other related issue: https://github.com/elasticsearch/elasticsearch/issues/2117#issuecomment-16078340\n\n_\"Unfortunately, this situation can in-fact occur with zen discovery at this point. We are working on a fix for this issue which might take a bit until we have something that can bring a solid solution for this.\"_\n\nI wonder what has happened since then and if their findings correspond to my scenario.\n\nFor my clusters, split-brains always occur when a node becomes isolated and then elects themselves as master. More visibility (logging) of the election process would be helpful. Re-discovery would be helpful as well since I rarely see the cluster self heal despite being in erroneous situations (nodes belongs to two clusters_. I am on version 0.90.2, so I am not sure if I am perhaps missing a critical update although I do scan the issues and commits.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/30364795","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-30364795","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":30364795,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzY0Nzk1","user":{"login":"aphyr","id":3748,"node_id":"MDQ6VXNlcjM3NDg=","avatar_url":"https://avatars3.githubusercontent.com/u/3748?v=4","gravatar_id":"","url":"https://api.github.com/users/aphyr","html_url":"https://github.com/aphyr","followers_url":"https://api.github.com/users/aphyr/followers","following_url":"https://api.github.com/users/aphyr/following{/other_user}","gists_url":"https://api.github.com/users/aphyr/gists{/gist_id}","starred_url":"https://api.github.com/users/aphyr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aphyr/subscriptions","organizations_url":"https://api.github.com/users/aphyr/orgs","repos_url":"https://api.github.com/users/aphyr/repos","events_url":"https://api.github.com/users/aphyr/events{/privacy}","received_events_url":"https://api.github.com/users/aphyr/received_events","type":"User","site_admin":false},"created_at":"2013-12-11T21:16:44Z","updated_at":"2013-12-11T21:16:44Z","author_association":"NONE","body":"Could you do me a huge favor and _not_ patch this until, like, May or so? I need to finish some other things before the next installation of Jepsen. ;-)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/31458129","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-31458129","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":31458129,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNDU4MTI5","user":{"login":"bitsofinfo","id":1743646,"node_id":"MDQ6VXNlcjE3NDM2NDY=","avatar_url":"https://avatars1.githubusercontent.com/u/1743646?v=4","gravatar_id":"","url":"https://api.github.com/users/bitsofinfo","html_url":"https://github.com/bitsofinfo","followers_url":"https://api.github.com/users/bitsofinfo/followers","following_url":"https://api.github.com/users/bitsofinfo/following{/other_user}","gists_url":"https://api.github.com/users/bitsofinfo/gists{/gist_id}","starred_url":"https://api.github.com/users/bitsofinfo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bitsofinfo/subscriptions","organizations_url":"https://api.github.com/users/bitsofinfo/orgs","repos_url":"https://api.github.com/users/bitsofinfo/repos","events_url":"https://api.github.com/users/bitsofinfo/events{/privacy}","received_events_url":"https://api.github.com/users/bitsofinfo/received_events","type":"User","site_admin":false},"created_at":"2014-01-02T15:10:35Z","updated_at":"2014-01-02T15:10:35Z","author_association":"CONTRIBUTOR","body":"Is there any update on this or timeline for when it will be fixed?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/32394812","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-32394812","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":32394812,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMzk0ODEy","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars3.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false},"created_at":"2014-01-15T18:38:00Z","updated_at":"2014-01-15T18:38:00Z","author_association":"NONE","body":"Ran into this very problem on a 4 node cluster.\n\nNode 1 and Node 2 got disconnected and elected themselves as masters, \nNode 3 and 4 remained followers for both Node 1 and Node 2.\n\nWe do not have the option of running ZK.\n\nDoes anyone know the election process is governed (I know it runs off the Praxos Consensus algorithm) but in layman's term does each follower vote exactly once or do they case multiple votes?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/34534672","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-34534672","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":34534672,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTM0Njcy","user":{"login":"amitelad7","id":358331,"node_id":"MDQ6VXNlcjM1ODMzMQ==","avatar_url":"https://avatars1.githubusercontent.com/u/358331?v=4","gravatar_id":"","url":"https://api.github.com/users/amitelad7","html_url":"https://github.com/amitelad7","followers_url":"https://api.github.com/users/amitelad7/followers","following_url":"https://api.github.com/users/amitelad7/following{/other_user}","gists_url":"https://api.github.com/users/amitelad7/gists{/gist_id}","starred_url":"https://api.github.com/users/amitelad7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amitelad7/subscriptions","organizations_url":"https://api.github.com/users/amitelad7/orgs","repos_url":"https://api.github.com/users/amitelad7/repos","events_url":"https://api.github.com/users/amitelad7/events{/privacy}","received_events_url":"https://api.github.com/users/amitelad7/received_events","type":"User","site_admin":false},"created_at":"2014-02-08T05:37:44Z","updated_at":"2014-02-08T05:37:44Z","author_association":"NONE","body":"We just ran into this problem on a 41 data node and 5 master node cluster running 0.90.9\n@kimchy is your recommendation to use zookeeper and not zen?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/35227751","html_url":"https://github.com/elastic/elasticsearch/issues/2488#issuecomment-35227751","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2488","id":35227751,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjI3NzUx","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars3.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false},"created_at":"2014-02-17T04:13:48Z","updated_at":"2014-02-17T04:13:48Z","author_association":"NONE","body":"@amitelad7 \nYou have a few options running at Zen, you can increases the fd timeouts/retries/intervals if your network/node is unresponsive. The other option is to explicitly define master nodes, but in the case of yours where you have 5 masters it may get tricky.\n","performed_via_github_app":null}]