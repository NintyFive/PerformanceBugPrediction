[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/155203222","html_url":"https://github.com/elastic/elasticsearch/issues/14628#issuecomment-155203222","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14628","id":155203222,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NTIwMzIyMg==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-11-09T21:31:04Z","updated_at":"2015-11-09T21:31:04Z","author_association":"CONTRIBUTOR","body":"oh boy, do you wanna open a PR to fix this? I also wonder if you have a reproduction for this issue so we can add a test?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/155327315","html_url":"https://github.com/elastic/elasticsearch/issues/14628#issuecomment-155327315","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14628","id":155327315,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NTMyNzMxNQ==","user":{"login":"richardhundt","id":151847,"node_id":"MDQ6VXNlcjE1MTg0Nw==","avatar_url":"https://avatars1.githubusercontent.com/u/151847?v=4","gravatar_id":"","url":"https://api.github.com/users/richardhundt","html_url":"https://github.com/richardhundt","followers_url":"https://api.github.com/users/richardhundt/followers","following_url":"https://api.github.com/users/richardhundt/following{/other_user}","gists_url":"https://api.github.com/users/richardhundt/gists{/gist_id}","starred_url":"https://api.github.com/users/richardhundt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardhundt/subscriptions","organizations_url":"https://api.github.com/users/richardhundt/orgs","repos_url":"https://api.github.com/users/richardhundt/repos","events_url":"https://api.github.com/users/richardhundt/events{/privacy}","received_events_url":"https://api.github.com/users/richardhundt/received_events","type":"User","site_admin":false},"created_at":"2015-11-10T06:52:06Z","updated_at":"2015-11-10T06:52:06Z","author_association":"NONE","body":"Sure, I'll open a PR and have a test case.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/155352477","html_url":"https://github.com/elastic/elasticsearch/issues/14628#issuecomment-155352477","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14628","id":155352477,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NTM1MjQ3Nw==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-11-10T08:05:01Z","updated_at":"2015-11-10T08:05:01Z","author_association":"CONTRIBUTOR","body":"thank you!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/155361019","html_url":"https://github.com/elastic/elasticsearch/issues/14628#issuecomment-155361019","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14628","id":155361019,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NTM2MTAxOQ==","user":{"login":"richardhundt","id":151847,"node_id":"MDQ6VXNlcjE1MTg0Nw==","avatar_url":"https://avatars1.githubusercontent.com/u/151847?v=4","gravatar_id":"","url":"https://api.github.com/users/richardhundt","html_url":"https://github.com/richardhundt","followers_url":"https://api.github.com/users/richardhundt/followers","following_url":"https://api.github.com/users/richardhundt/following{/other_user}","gists_url":"https://api.github.com/users/richardhundt/gists{/gist_id}","starred_url":"https://api.github.com/users/richardhundt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardhundt/subscriptions","organizations_url":"https://api.github.com/users/richardhundt/orgs","repos_url":"https://api.github.com/users/richardhundt/repos","events_url":"https://api.github.com/users/richardhundt/events{/privacy}","received_events_url":"https://api.github.com/users/richardhundt/received_events","type":"User","site_admin":false},"created_at":"2015-11-10T08:53:59Z","updated_at":"2015-11-10T08:53:59Z","author_association":"NONE","body":"Umm... has groovy scripting been removed from 2.x? I can see it in master, but now I'm not sure whether it'll be around in future. Which branch d'you want me to work against?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/155361897","html_url":"https://github.com/elastic/elasticsearch/issues/14628#issuecomment-155361897","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14628","id":155361897,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NTM2MTg5Nw==","user":{"login":"richardhundt","id":151847,"node_id":"MDQ6VXNlcjE1MTg0Nw==","avatar_url":"https://avatars1.githubusercontent.com/u/151847?v=4","gravatar_id":"","url":"https://api.github.com/users/richardhundt","html_url":"https://github.com/richardhundt","followers_url":"https://api.github.com/users/richardhundt/followers","following_url":"https://api.github.com/users/richardhundt/following{/other_user}","gists_url":"https://api.github.com/users/richardhundt/gists{/gist_id}","starred_url":"https://api.github.com/users/richardhundt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardhundt/subscriptions","organizations_url":"https://api.github.com/users/richardhundt/orgs","repos_url":"https://api.github.com/users/richardhundt/repos","events_url":"https://api.github.com/users/richardhundt/events{/privacy}","received_events_url":"https://api.github.com/users/richardhundt/received_events","type":"User","site_admin":false},"created_at":"2015-11-10T08:59:01Z","updated_at":"2015-11-10T08:59:01Z","author_association":"NONE","body":"nvm, it seems to have moved to core\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/155390287","html_url":"https://github.com/elastic/elasticsearch/issues/14628#issuecomment-155390287","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14628","id":155390287,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NTM5MDI4Nw==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-11-10T11:06:09Z","updated_at":"2015-11-10T11:06:14Z","author_association":"CONTRIBUTOR","body":"> nvm, it seems to have moved to core\n\nyeah it's in `plugins/lang-groovy` now. Please make the PR against master\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/155406699","html_url":"https://github.com/elastic/elasticsearch/issues/14628#issuecomment-155406699","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14628","id":155406699,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NTQwNjY5OQ==","user":{"login":"richardhundt","id":151847,"node_id":"MDQ6VXNlcjE1MTg0Nw==","avatar_url":"https://avatars1.githubusercontent.com/u/151847?v=4","gravatar_id":"","url":"https://api.github.com/users/richardhundt","html_url":"https://github.com/richardhundt","followers_url":"https://api.github.com/users/richardhundt/followers","following_url":"https://api.github.com/users/richardhundt/following{/other_user}","gists_url":"https://api.github.com/users/richardhundt/gists{/gist_id}","starred_url":"https://api.github.com/users/richardhundt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardhundt/subscriptions","organizations_url":"https://api.github.com/users/richardhundt/orgs","repos_url":"https://api.github.com/users/richardhundt/repos","events_url":"https://api.github.com/users/richardhundt/events{/privacy}","received_events_url":"https://api.github.com/users/richardhundt/received_events","type":"User","site_admin":false},"created_at":"2015-11-10T12:21:19Z","updated_at":"2015-11-10T12:21:19Z","author_association":"NONE","body":"I've managed to create a failing test in 1.7, and reproduced in 2.0 but not in master.\n\nTurns out master doesn't use `GroovyClassLoader.parseClass()` anymore. There's a comment [here](https://github.com/elastic/elasticsearch/blob/master/plugins/lang-groovy/src/main/java/org/elasticsearch/script/groovy/GroovyScriptEngineService.java#L174).\n\nSo it looks like it's fixed.\n\nFor posterity, this only fails if the script defines a method, which is probably why it hasn't bitten many people before.\n\nFor example, the following groovy snippet:\n\n```\ndef answer(a) { return a + 2 }; return answer(40)\n```\n\nHashes to `6e41335324a948a5e324e03445ea9c9f9c19e303` and then I see:\n\n```\n..., \"reason\":\"failed to run indexed script [test] using lang [groovy]\",\"caused_by\":{\"type\":\"class_format_error\",\"reason\":\"Illegal class name \\\"6e41335324a948a5e324e03445ea9c9f9c19e303$answer\\\" in class file 6e41335324a948a5e324e03445ea9c9f9c19e303$answer\"}\n```\n\nI have a test in the `messy` namespace, which you might want for regression, but not sure if it's worth polluting your code with.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/155852395","html_url":"https://github.com/elastic/elasticsearch/issues/14628#issuecomment-155852395","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14628","id":155852395,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NTg1MjM5NQ==","user":{"login":"vananiev","id":11336712,"node_id":"MDQ6VXNlcjExMzM2NzEy","avatar_url":"https://avatars1.githubusercontent.com/u/11336712?v=4","gravatar_id":"","url":"https://api.github.com/users/vananiev","html_url":"https://github.com/vananiev","followers_url":"https://api.github.com/users/vananiev/followers","following_url":"https://api.github.com/users/vananiev/following{/other_user}","gists_url":"https://api.github.com/users/vananiev/gists{/gist_id}","starred_url":"https://api.github.com/users/vananiev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vananiev/subscriptions","organizations_url":"https://api.github.com/users/vananiev/orgs","repos_url":"https://api.github.com/users/vananiev/repos","events_url":"https://api.github.com/users/vananiev/events{/privacy}","received_events_url":"https://api.github.com/users/vananiev/received_events","type":"User","site_admin":false},"created_at":"2015-11-11T17:23:29Z","updated_at":"2015-11-11T17:23:29Z","author_association":"NONE","body":"We had this problem on elasticsearch-1.7.3 too. Thanks for explanation.\n","performed_via_github_app":null}]