{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/917","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/917/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/917/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/917/events","html_url":"https://github.com/elastic/elasticsearch/issues/917","id":865329,"node_id":"MDU6SXNzdWU4NjUzMjk=","number":917,"title":"Query DSL: Text Queries (boolean, phrase, and phrase_prefix)","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"labels":[{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":97022,"node_id":"MDU6TGFiZWw5NzAyMg==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.16.1","name":"v0.16.1","color":"DDDDDD","default":false,"description":null},{"id":97023,"node_id":"MDU6TGFiZWw5NzAyMw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.17.0","name":"v0.17.0","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/elastic/elasticsearch/milestones/6","html_url":"https://github.com/elastic/elasticsearch/milestone/6","labels_url":"https://api.github.com/repos/elastic/elasticsearch/milestones/6/labels","id":5405,"node_id":"MDk6TWlsZXN0b25lNTQwNQ==","number":6,"title":"0.16.1","description":"","creator":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"open_issues":0,"closed_issues":23,"state":"closed","created_at":"2011-04-25T14:28:07Z","updated_at":"2014-01-29T09:34:58Z","due_on":null,"closed_at":"2011-05-12T18:04:05Z"},"comments":5,"created_at":"2011-05-08T18:40:24Z","updated_at":"2011-06-24T09:38:20Z","closed_at":"2011-05-08T18:42:41Z","author_association":"MEMBER","active_lock_reason":null,"body":"A new family of `text` queries that accept text, analyzes it, and constructs a query out of it. For example:\n\n```\n{\n    \"text\" : {\n        \"message\" : \"this is a test\"\n    }\n}\n```\n## Types of Text Queries\n# `boolean`\n\nThe default `text` query is of type `boolean`. It means that the text provided is analyzed and the analysis process constructs a boolean query from the provided text. The `operator` flag can be set to `or` or `and` to control the boolean clauses (defaults to `or`).\n\nThe `analyzer` can be set to control which analyzer will perform the analysis process on the text. It default to the field explicit mapping definition, or the default search analyzer.\n\n`fuzziness` can be set to a value (depending on the relevant type, for string types it should be a value between `0.0` and `1.0`) to constructs fuzzy queries for each term analyzed. The `prefix_length` and `max_expansions` can be set in this case to control the fuzzy process.\n# `text_phrase`\n\nThe `text_phrase` query analyzes the text and creates a `phrase` query out of the analyzed text. For example:\n\n```\n{\n    \"text_phrase\" : {\n        \"message\" : \"this is a test\"\n    }\n}\n```\n\nSince `text_phrase` is only a `type` of a `text` query, it can also be used in the following manner:\n\n```\n{\n    \"text\" : {\n        \"message\" : \"this is a text\",\n        \"type\" : \"phrase\"\n    }\n}\n```\n\nA phrase query maintains order of the terms up to a configurable `slop` (which defaults to 0).\n\nThe `analyzer` can be set to control which analyzer will perform the analysis process on the text. It default to the field explicit mapping definition, or the default search analyzer.\n# `text_phrase_prefix`\n\nThe `text_phrase_prefix` is the same as `text_phrase`, expect it allows for prefix matches on the last term in the text. For example:\n\n```\n{\n    \"text_phrase_prefix\" : {\n        \"message\" : \"this is a text\"\n    }\n}\n```\n\nOr\n\n```\n{\n    \"text\" : {\n        \"message\" : \"this is a text\",\n        \"type\" : \"phrase_prefix\"\n    }\n}\n```\n\nIt accepts the same parameters as the `phrase` type. In addition, it also accepts a `max_expansions` parameter that can control to how many prefixes the last term will be expanded. It is highly recommended to set it to an acceptable value to control the execution time of the query.\n## Comparison to query_string / field\n\nThe `text` family of queries does not goes through a \"query parsing\" process. It does not support field name prefixes, wildcard characters, or other \"advance\" features. For this reason, chances of it failing are very small, and it provides an excellent behavior when it comes to just analyze and run that text as a query behavior (which is usually what a text search box does). Also, the `phrase_prefix` can provide a great \"as you type\" behavior to automatically load search results. \n","closed_by":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"performed_via_github_app":null}