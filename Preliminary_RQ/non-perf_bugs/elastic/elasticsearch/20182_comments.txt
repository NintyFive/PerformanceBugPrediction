[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/243105664","html_url":"https://github.com/elastic/elasticsearch/issues/20182#issuecomment-243105664","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20182","id":243105664,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzEwNTY2NA==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2016-08-29T12:06:33Z","updated_at":"2016-08-29T12:06:33Z","author_association":"MEMBER","body":"We don't provide anything to build uris as part of our RestClient, we rather accept instances of `HttpHost`, regardless of how they are created. I think we should keep it that way and go with what java / http client offer as much as possible. Otherwise we will be adding thin layers for a lot of things.\n\nMaybe we should rather improve our docs and our examples on creating uris the right way?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/243111769","html_url":"https://github.com/elastic/elasticsearch/issues/20182#issuecomment-243111769","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20182","id":243111769,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzExMTc2OQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-08-29T12:37:15Z","updated_at":"2016-08-29T12:37:15Z","author_association":"CONTRIBUTOR","body":"Maybe this is actually the start of a \"mid-level\" REST client? We have a low level client now. We want a high level client eventually, maybe we end up with mid-level client in the middle that has helpers for generating hosts, bodies, paths, whatever.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/243114903","html_url":"https://github.com/elastic/elasticsearch/issues/20182#issuecomment-243114903","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20182","id":243114903,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzExNDkwMw==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2016-08-29T12:51:26Z","updated_at":"2016-08-29T12:51:26Z","author_association":"MEMBER","body":"I was hoping that our n-level REST client would focus on something more interesting than building uris, as there is nothing es specific to that :) there are ways to create uris in java, http client provides a URIBuilder to simplify things, if that one is buggy we can open an issue there rather than working around it on our end maybe?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/243160581","html_url":"https://github.com/elastic/elasticsearch/issues/20182#issuecomment-243160581","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20182","id":243160581,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzE2MDU4MQ==","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"created_at":"2016-08-29T15:34:50Z","updated_at":"2016-08-29T15:34:50Z","author_association":"MEMBER","body":"The idea here was that, users will need to store their connection strings as configurations. With YAML / JSON configs in mind, they will either need an associative array:\n\n``` yaml\nelasticsearch.host:\n  scheme: http\n  urls: [ \"host1\", \"host2\", \"host3\" ]\n  ports: [ 9200, 9201, 9200 ]\n```\n\nor they can just do it in a less trappy way:\n\n``` yaml\nelasticsearch.hosts: [ \"host1\", \"host2:9201\", \"host3\" ]\n```\n\nI think this is pretty basic functionality that, even for a low level client, we should provide.\n\nAt this point, I've used it _without_ the `HttpHostBuilder` and the experience left a bit to be desired because I need the configuration aspect and [`URIBuilder` runs into some pretty big walls surrounding host parsing](https://issues.apache.org/jira/browse/HTTPCLIENT-911) and it's by design. I could move this code to my own package, but I think it helps enough to be open source; also the `URIBuilder` does _way_ more than we want because it allows schemes that we don't support, doesn't default the port to 9200, and allows things like paths, which `HttpHost` doesn't use.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/243165621","html_url":"https://github.com/elastic/elasticsearch/issues/20182#issuecomment-243165621","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20182","id":243165621,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzE2NTYyMQ==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2016-08-29T15:51:40Z","updated_at":"2016-08-29T15:51:40Z","author_association":"MEMBER","body":"> or they can just do it in a less trappy way:\n> elasticsearch.hosts: [ \"host1\", \"host2:9201\", \"host3\" ]\n\nI agree that this configuration is better, but can we not require the scheme and the port in the configuration for each host and keep it simple? This seems to me something outside the scope of the low level rest client. If we need a bridge between configuration and HttpHost, I am not sure it should be in the low-level RestClient itself.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/243168907","html_url":"https://github.com/elastic/elasticsearch/issues/20182#issuecomment-243168907","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20182","id":243168907,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzE2ODkwNw==","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"created_at":"2016-08-29T16:02:12Z","updated_at":"2016-08-29T16:02:12Z","author_association":"MEMBER","body":"> can we not require the scheme and the port in the configuration for each host and keep it simple?\n\nWe could, but then we're _really_ not providing much of anything to the user. In fairness, we _would_ still be working around the host parsing goofiness for them.\n\nI get that the low-level client is low level (it's in the name :)), but I don't believe that that means it needs to be barebones if it doesn't impact performance in any way. That's why we have the `RestClientBuilder` after all, right? I'm okay just having this code locally, but I think users will really benefit from having it versus not having it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/243170679","html_url":"https://github.com/elastic/elasticsearch/issues/20182#issuecomment-243170679","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20182","id":243170679,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzE3MDY3OQ==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2016-08-29T16:08:24Z","updated_at":"2016-08-29T16:08:24Z","author_association":"MEMBER","body":"We have the `RestClientBuilder` to build a `RestClient` instance, which is our own class that otherwise would require too many initialization arguments. I am against having a builder for the `HttpHost` as it is not something that we provide. URIs can be created without `URIBuilder` as well, with plain java that doesn't depend on apache http client. It's not about performance, it's about code that needs to be maintained, and I wouldn't want our users to need our own class to create a URI instance. I hope this explains it better. I will mark this for discussion so we can discuss this on next fixitfriday, then I will go with whatever the team decides :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/247563653","html_url":"https://github.com/elastic/elasticsearch/issues/20182#issuecomment-247563653","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20182","id":247563653,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NzU2MzY1Mw==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-09-16T10:01:23Z","updated_at":"2016-09-16T10:01:23Z","author_association":"CONTRIBUTOR","body":"I really think this is a pretty esoteric problem you have there with `_` as a first char. I think if there are problems they should be addressed upstream and we should use what comes from http-client.\n","performed_via_github_app":null}]