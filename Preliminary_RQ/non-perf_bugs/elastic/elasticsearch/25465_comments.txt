[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/311906092","html_url":"https://github.com/elastic/elasticsearch/issues/25465#issuecomment-311906092","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25465","id":311906092,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTkwNjA5Mg==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2017-06-29T08:59:17Z","updated_at":"2017-06-29T08:59:17Z","author_association":"MEMBER","body":"This failure looks related: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+g1gc/3350/console\r\n\r\n```\r\nFAILURE 10.5s J0 | SearchScrollIT.testSimpleScrollQueryThenFetchClearAllScrollIds <<< FAILURES!\r\n   > Throwable #1: java.lang.AssertionError: All incoming requests on node [node_sd3] should have finished. Expected 0 but got 182\r\n   > Expected: <0L>\r\n   >      but: was <182L>\r\n   > \tat __randomizedtesting.SeedInfo.seed([40E655E03F96863C:1A3F3D70AB1DC4DC]:0)\r\n   > \tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \tat org.elasticsearch.test.InternalTestCluster.lambda$assertRequestsFinished$17(InternalTestCluster.java:2072)\r\n   > \tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:722)\r\n   > \tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:696)\r\n   > \tat org.elasticsearch.test.InternalTestCluster.assertRequestsFinished(InternalTestCluster.java:2069)\r\n   > \tat org.elasticsearch.test.InternalTestCluster.assertAfterTest(InternalTestCluster.java:2048)\r\n   > \tat org.elasticsearch.test.ESIntegTestCase.afterInternal(ESIntegTestCase.java:586)\r\n   > \tat org.elasticsearch.test.ESIntegTestCase.cleanUpCluster(ESIntegTestCase.java:2067)\r\n   > \tat java.lang.Thread.run(Thread.java:748)\r\n   > \tSuppressed: java.lang.AssertionError: All incoming requests on node [node_sd3] should have finished. Expected 0 but got 182\r\n   > Expected: <0L>\r\n   >      but: was <182L>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.test.InternalTestCluster.lambda$assertRequestsFinished$17(InternalTestCluster.java:2072)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:710)\r\n   > \t\t... 39 more\r\n   > \tSuppressed: java.lang.AssertionError: All incoming requests on node [node_sd3] should have finished. Expected 0 but got 182\r\n   > Expected: <0L>\r\n   >      but: was <182L>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.test.InternalTestCluster.lambda$assertRequestsFinished$17(InternalTestCluster.java:2072)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:710)\r\n   > \t\t... 39 more\r\n   > \tSuppressed: java.lang.AssertionError: All incoming requests on node [node_sd3] should have finished. Expected 0 but got 182\r\n   > Expected: <0L>\r\n   >      but: was <182L>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.test.InternalTestCluster.lambda$assertRequestsFinished$17(InternalTestCluster.java:2072)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:710)\r\n   > \t\t... 39 more\r\n   > \tSuppressed: java.lang.AssertionError: All incoming requests on node [node_sd3] should have finished. Expected 0 but got 182\r\n   > Expected: <0L>\r\n   >      but: was <182L>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.test.InternalTestCluster.lambda$assertRequestsFinished$17(InternalTestCluster.java:2072)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:710)\r\n   > \t\t... 39 more\r\n   > \tSuppressed: java.lang.AssertionError: All incoming requests on node [node_sd3] should have finished. Expected 0 but got 182\r\n   > Expected: <0L>\r\n   >      but: was <182L>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.test.InternalTestCluster.lambda$assertRequestsFinished$17(InternalTestCluster.java:2072)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:710)\r\n   > \t\t... 39 more\r\n   > \tSuppressed: java.lang.AssertionError: All incoming requests on node [node_sd3] should have finished. Expected 0 but got 182\r\n   > Expected: <0L>\r\n   >      but: was <182L>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.test.InternalTestCluster.lambda$assertRequestsFinished$17(InternalTestCluster.java:2072)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:710)\r\n   > \t\t... 39 more\r\n   > \tSuppressed: java.lang.AssertionError: All incoming requests on node [node_sd3] should have finished. Expected 0 but got 182\r\n   > Expected: <0L>\r\n   >      but: was <182L>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.test.InternalTestCluster.lambda$assertRequestsFinished$17(InternalTestCluster.java:2072)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:710)\r\n  2> REPRODUCE WITH: gradle :core:integTest -Dtests.seed=40E655E03F96863C -Dtests.class=org.elasticsearch.search.scroll.SearchScrollIT -Dtests.method=\"testSimpleScrollQueryThenFetch_clearScrollIds\" -Dtests.security.manager=true -Dtests.jvm.argline=\"-XX:-UseConcMarkSweepGC -XX:+UseG1GC\" -Dtests.locale=hi -Dtests.timezone=America/Boa_Vista\r\n   > \t\t... 39 more\r\n   > \tSuppressed: java.lang.AssertionError: All incoming requests on node [node_sd3] should have finished. Expected 0 but got 182\r\n   > Expected: <0L>\r\n   >      but: was <182L>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.test.InternalTestCluster.lambda$assertRequestsFinished$17(InternalTestCluster.java:2072)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:710)\r\n   > \t\t... 39 more\r\n   > \tSuppressed: java.lang.AssertionError: All incoming requests on node [node_sd3] should have finished. Expected 0 but got 182\r\n   > Expected: <0L>\r\n   >      but: was <182L>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.test.InternalTestCluster.lambda$assertRequestsFinished$17(InternalTestCluster.java:2072)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:710)\r\n   > \t\t... 39 more\r\n   > \tSuppressed: java.lang.AssertionError: All incoming requests on node [node_sd3] should have finished. Expected 0 but got 182\r\n   > Expected: <0L>\r\n   >      but: was <182L>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.test.InternalTestCluster.lambda$assertRequestsFinished$17(InternalTestCluster.java:2072)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:710)\r\n   > \t\t... 39 more\r\n   > \tSuppressed: java.lang.AssertionError: All incoming requests on node [node_sd3] should have finished. Expected 0 but got 182\r\n   > Expected: <0L>\r\n   >      but: was <182L>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.test.InternalTestCluster.lambda$assertRequestsFinished$17(InternalTestCluster.java:2072)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:710)\r\n   > \t\t... 39 more\r\n   > \tSuppressed: java.lang.AssertionError: All incoming requests on node [node_sd3] should have finished. Expected 0 but got 182\r\n   > Expected: <0L>\r\n   >      but: was <182L>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.test.InternalTestCluster.lambda$assertRequestsFinished$17(InternalTestCluster.java:2072)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:710)\r\n   > \t\t... 39 more\r\n   > \tSuppressed: java.lang.AssertionError: All incoming requests on node [node_sd3] should have finished. Expected 0 but got 182\r\n   > Expected: <0L>\r\n   >      but: was <182L>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.test.InternalTestCluster.lambda$assertRequestsFinished$17(InternalTestCluster.java:2072)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:710)\r\n   > \t\t... 39 more\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/312676910","html_url":"https://github.com/elastic/elasticsearch/issues/25465#issuecomment-312676910","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25465","id":312676910,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjY3NjkxMA==","user":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"created_at":"2017-07-03T15:33:49Z","updated_at":"2017-07-03T15:33:49Z","author_association":"CONTRIBUTOR","body":"Another one, didn't reproduce on my laptop:\r\n\r\n    gradle :core:integTest -Dtests.seed=4612B379B8EDEA93 -Dtests.class=org.elasticsearch.search.scroll.SearchScrollIT -Dtests.method=\"testStringSortMissingAscTerminates\" -Dtests.security.manager=true -Dtests.locale=zh-TW -Dtests.timezone=US/Alaska\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob-windows-compatibility/398/console\r\n\r\n\t 1> [2017-07-03T07:08:17,318][INFO ][o.e.s.s.SearchScrollIT   ] [testCloseAndReopenOrDeleteWithActiveScroll]: after test\r\n\r\n\tERROR   41.2s J0 | SearchScrollIT.testCloseAndReopenOrDeleteWithActiveScroll <<< FAILURES!\r\n\t   > Throwable #1: java.lang.AssertionError: timed out waiting for green state\r\n\t   > \tat org.elasticsearch.test.ESIntegTestCase.ensureColor(ESIntegTestCase.java:944)\r\n\t   > \tat org.elasticsearch.test.ESIntegTestCase.ensureGreen(ESIntegTestCase.java:910)\r\n\t   > \tat org.elasticsearch.test.ESIntegTestCase.ensureGreen(ESIntegTestCase.java:899)\r\n\t   > \tat org.elasticsearch.search.scroll.SearchScrollIT.testCloseAndReopenOrDeleteWithActiveScroll(SearchScrollIT.java:515)\r\n\t   > \tat java.lang.Thread.run(Thread.java:745)Throwable #2: java.lang.AssertionError: All incoming requests on node [node_sd5] should have finished. Expected 0 but got 182\r\n\t   > Expected: <0L>\r\n\t   >      but: was <182L>\r\n\t   > \tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/312678471","html_url":"https://github.com/elastic/elasticsearch/issues/25465#issuecomment-312678471","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25465","id":312678471,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjY3ODQ3MQ==","user":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"created_at":"2017-07-03T15:40:42Z","updated_at":"2017-07-03T15:40:42Z","author_association":"CONTRIBUTOR","body":"And another non-reproducing one with the same error:\r\n\r\n    gradle :core:integTest -Dtests.seed=3AA4D4E1475D5334 -Dtests.class=org.elasticsearch.search.scroll.SearchScrollIT -Dtests.method=\"ARSEtestCloseAndReopenOrDeleteWithActiveScroll\" -Dtests.security.manager=true -Dtests.locale=lv-LV -Dtests.timezone=Europe/Malta\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob-unix-compatibility/os=debian/1200/console","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/313296572","html_url":"https://github.com/elastic/elasticsearch/issues/25465#issuecomment-313296572","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25465","id":313296572,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMzI5NjU3Mg==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2017-07-06T05:10:10Z","updated_at":"2017-07-06T05:10:10Z","author_association":"MEMBER","body":"All these failures seems to stem from the fact that the global checkpoint not being in sync with the local checkpoint at startup of one node:\r\n\r\n````\r\n[org.elasticsearch.transport.AssertingTransportInterceptor$TestPlugin]\r\n  2> jÅ«l. 03, 2017 5:11:44 PM com.carrotsearch.randomizedtesting.RandomizedRunner$QueueUncaughtExceptionsHandler uncaughtException\r\n  1> [2017-07-03T17:11:42,812][INFO ][o.e.p.PluginsService     ] [node_s1] loaded plugin [org.elasticsearch.transport.MockTcpTransportPlugin]\r\n  1> [2017-07-03T17:11:42,823][INFO ][o.e.d.DiscoveryModule    ] [node_s1] using discovery type [test-zen]\r\n  2> WARNING: Uncaught exception in thread: Thread[elasticsearch[node_s1][generic][T#1],5,TGRP-SearchScrollIT]\r\n  2> java.lang.AssertionError: local checkpoint [-2] for allocation ID [duZojjjjRMavMOLvPQbT5A] violates being at least the global checkpoint [8]\r\n  2> \tat __randomizedtesting.SeedInfo.seed([3AA4D4E1475D5334]:0)\r\n````\r\n\r\nAll failures have this assertion error in their logs. @jasontedor I am reassigned this to you, feel free to cancel the reassignment but this does not seem to be caused by scroll queries.\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/313851542","html_url":"https://github.com/elastic/elasticsearch/issues/25465#issuecomment-313851542","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25465","id":313851542,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMzg1MTU0Mg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-07-08T11:54:14Z","updated_at":"2017-07-08T11:54:14Z","author_association":"MEMBER","body":"Duplicates #25415, closed by #25468","performed_via_github_app":null}]