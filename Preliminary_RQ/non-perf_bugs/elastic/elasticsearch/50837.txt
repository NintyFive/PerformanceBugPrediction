{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/50837","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50837/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50837/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50837/events","html_url":"https://github.com/elastic/elasticsearch/issues/50837","id":547913783,"node_id":"MDU6SXNzdWU1NDc5MTM3ODM=","number":50837,"title":"Index settings should be validated when restoring a snapshot","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"labels":[{"id":143077482,"node_id":"MDU6TGFiZWwxNDMwNzc0ODI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Snapshot/Restore","name":":Distributed/Snapshot/Restore","color":"0e8a16","default":false,"description":"Anything directly related to the `_snapshot/*` APIs"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-01-10T07:31:04Z","updated_at":"2020-01-10T09:16:31Z","closed_at":"2020-01-10T09:16:31Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Today one can apply index settings when restoring a snapshot, but we are rather lenient about the settings that we accept:\r\n\r\n```\r\nPOST /_snapshot/backing_repo/snap/_restore\r\n{\r\n  \"index_settings\": {\r\n    \"index.setting.misspelled\": \"blah\",\r\n    \"index.frozen\": true\r\n  }\r\n}\r\n# 200 OK\r\n# {\r\n#   \"accepted\": true\r\n# }\r\n\r\nGET _settings\r\n# 200 OK\r\n# {\r\n#   \"original\": {\r\n#     \"settings\": {\r\n#       \"index\": {\r\n#         \"provided_name\": \"original\",\r\n#         \"frozen\": \"true\",  // ðŸ’¥ this setting is PrivateIndex\r\n#         \"number_of_shards\": \"1\",\r\n#         \"uuid\": \"M5thzFiuTf6x-4_Fc82lMg\",\r\n#         \"number_of_replicas\": \"0\",\r\n#         \"version\": {\r\n#           \"created\": \"8000099\"\r\n#         },\r\n#         \"creation_date\": \"1578592744159\"\r\n#       },\r\n#       \"archived\": {\r\n#         \"index\": {\r\n#           \"setting\": {\r\n#             \"misspelled\": \"blah\"  // ðŸ’¥ this setting is unknown\r\n#           }\r\n#         }\r\n#       }\r\n#     }\r\n#   }\r\n# }\r\n```\r\n\r\nIdeally either of these settings should have caused the restore to fail.","closed_by":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"performed_via_github_app":null}