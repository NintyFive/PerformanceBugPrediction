[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19788259","html_url":"https://github.com/elastic/elasticsearch/issues/3130#issuecomment-19788259","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3130","id":19788259,"node_id":"MDEyOklzc3VlQ29tbWVudDE5Nzg4MjU5","user":{"login":"usmanm","id":853039,"node_id":"MDQ6VXNlcjg1MzAzOQ==","avatar_url":"https://avatars0.githubusercontent.com/u/853039?v=4","gravatar_id":"","url":"https://api.github.com/users/usmanm","html_url":"https://github.com/usmanm","followers_url":"https://api.github.com/users/usmanm/followers","following_url":"https://api.github.com/users/usmanm/following{/other_user}","gists_url":"https://api.github.com/users/usmanm/gists{/gist_id}","starred_url":"https://api.github.com/users/usmanm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/usmanm/subscriptions","organizations_url":"https://api.github.com/users/usmanm/orgs","repos_url":"https://api.github.com/users/usmanm/repos","events_url":"https://api.github.com/users/usmanm/events{/privacy}","received_events_url":"https://api.github.com/users/usmanm/received_events","type":"User","site_admin":false},"created_at":"2013-06-20T22:41:27Z","updated_at":"2013-06-20T22:41:27Z","author_association":"NONE","body":"We are experiencing a similar problem. In our case, the nodes are heavy duty with 15GB of memory (8GB mlocked by ES) and are part of a single cluster. Previously we used to observe the heap memory dropping significantly (maybe to 2-3GB) once it got close to 8GB (probably because the GC kicked in). However after upgrading to 0.90, we see that the heap memory keeps on increasing and plateaus around 7-8GB. When that happens CPU utilization suddenly spikes and the GC also starts happening much more frequently. We've tried restarting the cluster but to no effect.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19803886","html_url":"https://github.com/elastic/elasticsearch/issues/3130#issuecomment-19803886","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3130","id":19803886,"node_id":"MDEyOklzc3VlQ29tbWVudDE5ODAzODg2","user":{"login":"astathopoulos","id":827828,"node_id":"MDQ6VXNlcjgyNzgyOA==","avatar_url":"https://avatars1.githubusercontent.com/u/827828?v=4","gravatar_id":"","url":"https://api.github.com/users/astathopoulos","html_url":"https://github.com/astathopoulos","followers_url":"https://api.github.com/users/astathopoulos/followers","following_url":"https://api.github.com/users/astathopoulos/following{/other_user}","gists_url":"https://api.github.com/users/astathopoulos/gists{/gist_id}","starred_url":"https://api.github.com/users/astathopoulos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astathopoulos/subscriptions","organizations_url":"https://api.github.com/users/astathopoulos/orgs","repos_url":"https://api.github.com/users/astathopoulos/repos","events_url":"https://api.github.com/users/astathopoulos/events{/privacy}","received_events_url":"https://api.github.com/users/astathopoulos/received_events","type":"User","site_admin":false},"created_at":"2013-06-21T08:28:03Z","updated_at":"2013-06-21T08:28:03Z","author_association":"NONE","body":"@usmanm Does your application performs frequent index creations and destructions?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19804950","html_url":"https://github.com/elastic/elasticsearch/issues/3130#issuecomment-19804950","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3130","id":19804950,"node_id":"MDEyOklzc3VlQ29tbWVudDE5ODA0OTUw","user":{"login":"usmanm","id":853039,"node_id":"MDQ6VXNlcjg1MzAzOQ==","avatar_url":"https://avatars0.githubusercontent.com/u/853039?v=4","gravatar_id":"","url":"https://api.github.com/users/usmanm","html_url":"https://github.com/usmanm","followers_url":"https://api.github.com/users/usmanm/followers","following_url":"https://api.github.com/users/usmanm/following{/other_user}","gists_url":"https://api.github.com/users/usmanm/gists{/gist_id}","starred_url":"https://api.github.com/users/usmanm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/usmanm/subscriptions","organizations_url":"https://api.github.com/users/usmanm/orgs","repos_url":"https://api.github.com/users/usmanm/repos","events_url":"https://api.github.com/users/usmanm/events{/privacy}","received_events_url":"https://api.github.com/users/usmanm/received_events","type":"User","site_admin":false},"created_at":"2013-06-21T08:55:50Z","updated_at":"2013-06-21T08:55:50Z","author_association":"NONE","body":"Not on a daily basis but yes we do create and delete indices regularly (maybe once a week). We usually do it when we need to make some changes to our index schema which might conflict with the schema of the existing index.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19805627","html_url":"https://github.com/elastic/elasticsearch/issues/3130#issuecomment-19805627","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3130","id":19805627,"node_id":"MDEyOklzc3VlQ29tbWVudDE5ODA1NjI3","user":{"login":"astathopoulos","id":827828,"node_id":"MDQ6VXNlcjgyNzgyOA==","avatar_url":"https://avatars1.githubusercontent.com/u/827828?v=4","gravatar_id":"","url":"https://api.github.com/users/astathopoulos","html_url":"https://github.com/astathopoulos","followers_url":"https://api.github.com/users/astathopoulos/followers","following_url":"https://api.github.com/users/astathopoulos/following{/other_user}","gists_url":"https://api.github.com/users/astathopoulos/gists{/gist_id}","starred_url":"https://api.github.com/users/astathopoulos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astathopoulos/subscriptions","organizations_url":"https://api.github.com/users/astathopoulos/orgs","repos_url":"https://api.github.com/users/astathopoulos/repos","events_url":"https://api.github.com/users/astathopoulos/events{/privacy}","received_events_url":"https://api.github.com/users/astathopoulos/received_events","type":"User","site_admin":false},"created_at":"2013-06-21T09:11:45Z","updated_at":"2013-06-21T09:11:45Z","author_association":"NONE","body":"I believe that the GC cannot delete objects that were created during the creation/destruction of an index that's why the heap memory is not freed. But, I haven't fully investigated it. It's just a guess based on what I see. That's what I reproduced in the description of this issue.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19836524","html_url":"https://github.com/elastic/elasticsearch/issues/3130#issuecomment-19836524","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3130","id":19836524,"node_id":"MDEyOklzc3VlQ29tbWVudDE5ODM2NTI0","user":{"login":"usmanm","id":853039,"node_id":"MDQ6VXNlcjg1MzAzOQ==","avatar_url":"https://avatars0.githubusercontent.com/u/853039?v=4","gravatar_id":"","url":"https://api.github.com/users/usmanm","html_url":"https://github.com/usmanm","followers_url":"https://api.github.com/users/usmanm/followers","following_url":"https://api.github.com/users/usmanm/following{/other_user}","gists_url":"https://api.github.com/users/usmanm/gists{/gist_id}","starred_url":"https://api.github.com/users/usmanm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/usmanm/subscriptions","organizations_url":"https://api.github.com/users/usmanm/orgs","repos_url":"https://api.github.com/users/usmanm/repos","events_url":"https://api.github.com/users/usmanm/events{/privacy}","received_events_url":"https://api.github.com/users/usmanm/received_events","type":"User","site_admin":false},"created_at":"2013-06-21T19:40:13Z","updated_at":"2013-06-21T19:40:13Z","author_association":"NONE","body":"We restarted the entire cluster following such an outage a few days back and we haven't deleted/created new indices since then. But we still continue to face this issue. Your hypothesis might be correct, but probably doesn't explain it for us.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19957426","html_url":"https://github.com/elastic/elasticsearch/issues/3130#issuecomment-19957426","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3130","id":19957426,"node_id":"MDEyOklzc3VlQ29tbWVudDE5OTU3NDI2","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2013-06-25T07:18:06Z","updated_at":"2013-06-25T07:18:06Z","author_association":"MEMBER","body":"@usmanm kimchy's push doe solves the issues which is shown in the reproduction script in this issue. I'm not sure though you are having the same issue as you are only once a week. It will take a long time before this leak has an effect.  I'm going to close this issue as it is solved as stated. If you are still seeing memory issues, can you please open a new issue describing your situation?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19957782","html_url":"https://github.com/elastic/elasticsearch/issues/3130#issuecomment-19957782","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3130","id":19957782,"node_id":"MDEyOklzc3VlQ29tbWVudDE5OTU3Nzgy","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2013-06-25T07:26:38Z","updated_at":"2013-06-25T07:26:38Z","author_association":"MEMBER","body":"quick question, can you share your settings of the index you create and the elastucsearch.yml? are you by any chance using soft cache for the field data?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19959133","html_url":"https://github.com/elastic/elasticsearch/issues/3130#issuecomment-19959133","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3130","id":19959133,"node_id":"MDEyOklzc3VlQ29tbWVudDE5OTU5MTMz","user":{"login":"astathopoulos","id":827828,"node_id":"MDQ6VXNlcjgyNzgyOA==","avatar_url":"https://avatars1.githubusercontent.com/u/827828?v=4","gravatar_id":"","url":"https://api.github.com/users/astathopoulos","html_url":"https://github.com/astathopoulos","followers_url":"https://api.github.com/users/astathopoulos/followers","following_url":"https://api.github.com/users/astathopoulos/following{/other_user}","gists_url":"https://api.github.com/users/astathopoulos/gists{/gist_id}","starred_url":"https://api.github.com/users/astathopoulos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astathopoulos/subscriptions","organizations_url":"https://api.github.com/users/astathopoulos/orgs","repos_url":"https://api.github.com/users/astathopoulos/repos","events_url":"https://api.github.com/users/astathopoulos/events{/privacy}","received_events_url":"https://api.github.com/users/astathopoulos/received_events","type":"User","site_admin":false},"created_at":"2013-06-25T08:00:12Z","updated_at":"2013-06-25T08:00:12Z","author_association":"NONE","body":"@kimchy Yes, we are using soft cache:\n\n```\nindex.cache.field.expire: 10m\nindex.cache.field.type: soft\n```\n","performed_via_github_app":null}]