[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/242378967","html_url":"https://github.com/elastic/elasticsearch/issues/20160#issuecomment-242378967","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20160","id":242378967,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MjM3ODk2Nw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-08-25T13:06:55Z","updated_at":"2016-08-25T13:06:55Z","author_association":"CONTRIBUTOR","body":"Hi @shavo007 \n\nThanks for reporting.  The reason for this exception was that the completion suggester was returning doc values as the `payload`.  You're trying to return doc values for an analyzed string field, which doesn't support doc values and so has to uninvert the index into heap in order to be able to respond from fielddata instead.\n\nSince alpha5 we have changed it to return the original document instead (https://github.com/elastic/elasticsearch/pull/19536) and removed the payload option (https://github.com/elastic/elasticsearch/pull/19877)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/242381799","html_url":"https://github.com/elastic/elasticsearch/issues/20160#issuecomment-242381799","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20160","id":242381799,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MjM4MTc5OQ==","user":{"login":"eskibars","id":2246002,"node_id":"MDQ6VXNlcjIyNDYwMDI=","avatar_url":"https://avatars0.githubusercontent.com/u/2246002?v=4","gravatar_id":"","url":"https://api.github.com/users/eskibars","html_url":"https://github.com/eskibars","followers_url":"https://api.github.com/users/eskibars/followers","following_url":"https://api.github.com/users/eskibars/following{/other_user}","gists_url":"https://api.github.com/users/eskibars/gists{/gist_id}","starred_url":"https://api.github.com/users/eskibars/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eskibars/subscriptions","organizations_url":"https://api.github.com/users/eskibars/orgs","repos_url":"https://api.github.com/users/eskibars/repos","events_url":"https://api.github.com/users/eskibars/events{/privacy}","received_events_url":"https://api.github.com/users/eskibars/received_events","type":"User","site_admin":false},"created_at":"2016-08-25T13:16:29Z","updated_at":"2016-08-25T13:16:29Z","author_association":"CONTRIBUTOR","body":"Additionally, we'll need to mark the blog as deprecated so others don't trip up on this.  I'll take care of that.  Thanks @shavo007 \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/242397214","html_url":"https://github.com/elastic/elasticsearch/issues/20160#issuecomment-242397214","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20160","id":242397214,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MjM5NzIxNA==","user":{"login":"shavo007","id":5466825,"node_id":"MDQ6VXNlcjU0NjY4MjU=","avatar_url":"https://avatars2.githubusercontent.com/u/5466825?v=4","gravatar_id":"","url":"https://api.github.com/users/shavo007","html_url":"https://github.com/shavo007","followers_url":"https://api.github.com/users/shavo007/followers","following_url":"https://api.github.com/users/shavo007/following{/other_user}","gists_url":"https://api.github.com/users/shavo007/gists{/gist_id}","starred_url":"https://api.github.com/users/shavo007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shavo007/subscriptions","organizations_url":"https://api.github.com/users/shavo007/orgs","repos_url":"https://api.github.com/users/shavo007/repos","events_url":"https://api.github.com/users/shavo007/events{/privacy}","received_events_url":"https://api.github.com/users/shavo007/received_events","type":"User","site_admin":false},"created_at":"2016-08-25T14:01:01Z","updated_at":"2016-08-25T14:01:01Z","author_association":"NONE","body":"hi guys,\n\nThanks for the quick response.\nIm a bit confused. I read the breaking changes and mentions payload:\n\nhttps://www.elastic.co/guide/en/elasticsearch/reference/master/breaking_50_suggester.html#_completion_suggester_is_document_oriented\n\nIs the doc wrong and I cannot use payload in the query? \n\n#19536 example shows the src returned in the response. if i take out payload i get this response:\n\n```\nPOST /hotels/_suggest?pretty\n{\n  \"hotels\" : {\n    \"prefix\" : \"hot\",\n    \"completion\" : {\n      \"field\" : \"name_suggest\",\n       \"fuzzy\" : {\n                \"fuzziness\" : 2\n            }\n    }\n  }\n}\n\n```\n\n```\n{\n   \"_shards\": {\n      \"total\": 5,\n      \"successful\": 5,\n      \"failed\": 0\n   },\n   \"hotels\": [\n      {\n         \"text\": \"hot\",\n         \"offset\": 0,\n         \"length\": 3,\n         \"options\": [\n            {\n               \"text\": \"Hotel Monaco\",\n               \"score\": 10\n            }\n         ]\n      }\n   ]\n}\n\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/242398024","html_url":"https://github.com/elastic/elasticsearch/issues/20160#issuecomment-242398024","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20160","id":242398024,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MjM5ODAyNA==","user":{"login":"shavo007","id":5466825,"node_id":"MDQ6VXNlcjU0NjY4MjU=","avatar_url":"https://avatars2.githubusercontent.com/u/5466825?v=4","gravatar_id":"","url":"https://api.github.com/users/shavo007","html_url":"https://github.com/shavo007","followers_url":"https://api.github.com/users/shavo007/followers","following_url":"https://api.github.com/users/shavo007/following{/other_user}","gists_url":"https://api.github.com/users/shavo007/gists{/gist_id}","starred_url":"https://api.github.com/users/shavo007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shavo007/subscriptions","organizations_url":"https://api.github.com/users/shavo007/orgs","repos_url":"https://api.github.com/users/shavo007/repos","events_url":"https://api.github.com/users/shavo007/events{/privacy}","received_events_url":"https://api.github.com/users/shavo007/received_events","type":"User","site_admin":false},"created_at":"2016-08-25T14:03:23Z","updated_at":"2016-08-25T14:03:23Z","author_association":"NONE","body":"BTW, do I get a gift package as part of the pioneer program..... ðŸ˜›\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/242399991","html_url":"https://github.com/elastic/elasticsearch/issues/20160#issuecomment-242399991","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20160","id":242399991,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MjM5OTk5MQ==","user":{"login":"areek","id":753679,"node_id":"MDQ6VXNlcjc1MzY3OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/753679?v=4","gravatar_id":"","url":"https://api.github.com/users/areek","html_url":"https://github.com/areek","followers_url":"https://api.github.com/users/areek/followers","following_url":"https://api.github.com/users/areek/following{/other_user}","gists_url":"https://api.github.com/users/areek/gists{/gist_id}","starred_url":"https://api.github.com/users/areek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/areek/subscriptions","organizations_url":"https://api.github.com/users/areek/orgs","repos_url":"https://api.github.com/users/areek/repos","events_url":"https://api.github.com/users/areek/events{/privacy}","received_events_url":"https://api.github.com/users/areek/received_events","type":"User","site_admin":false},"created_at":"2016-08-25T14:09:28Z","updated_at":"2016-08-25T14:09:28Z","author_association":"CONTRIBUTOR","body":"> Im a bit confused. I read the breaking changes and mentions payload:\n> https://www.elastic.co/guide/en/elasticsearch/reference/master/breaking_50_suggester.html#_completion_suggester_is_document_oriented\n> Is the doc wrong and I cannot use payload in the query?\n\nThe doc is wrong, thanks for pointing that out :) @shavo007, will fix this\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/242409626","html_url":"https://github.com/elastic/elasticsearch/issues/20160#issuecomment-242409626","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20160","id":242409626,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MjQwOTYyNg==","user":{"login":"shavo007","id":5466825,"node_id":"MDQ6VXNlcjU0NjY4MjU=","avatar_url":"https://avatars2.githubusercontent.com/u/5466825?v=4","gravatar_id":"","url":"https://api.github.com/users/shavo007","html_url":"https://github.com/shavo007","followers_url":"https://api.github.com/users/shavo007/followers","following_url":"https://api.github.com/users/shavo007/following{/other_user}","gists_url":"https://api.github.com/users/shavo007/gists{/gist_id}","starred_url":"https://api.github.com/users/shavo007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shavo007/subscriptions","organizations_url":"https://api.github.com/users/shavo007/orgs","repos_url":"https://api.github.com/users/shavo007/repos","events_url":"https://api.github.com/users/shavo007/events{/privacy}","received_events_url":"https://api.github.com/users/shavo007/received_events","type":"User","site_admin":false},"created_at":"2016-08-25T14:34:36Z","updated_at":"2016-08-25T14:34:36Z","author_association":"NONE","body":"I tested the example here:\n\nhttps://www.elastic.co/guide/en/elasticsearch/reference/master/search-suggesters-completion.html#querying\n\nThe response I get is different:\n\n```\n{\n   \"_shards\": {\n      \"total\": 5,\n      \"successful\": 5,\n      \"failed\": 0\n   },\n   \"song-suggest\": [\n      {\n         \"text\": \"nir\",\n         \"offset\": 0,\n         \"length\": 3,\n         \"options\": [\n            {\n               \"text\": \"Nirvana\",\n               \"score\": 34\n            }\n         ]\n      }\n   ]\n}\n\n\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/242517478","html_url":"https://github.com/elastic/elasticsearch/issues/20160#issuecomment-242517478","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20160","id":242517478,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MjUxNzQ3OA==","user":{"login":"areek","id":753679,"node_id":"MDQ6VXNlcjc1MzY3OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/753679?v=4","gravatar_id":"","url":"https://api.github.com/users/areek","html_url":"https://github.com/areek","followers_url":"https://api.github.com/users/areek/followers","following_url":"https://api.github.com/users/areek/following{/other_user}","gists_url":"https://api.github.com/users/areek/gists{/gist_id}","starred_url":"https://api.github.com/users/areek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/areek/subscriptions","organizations_url":"https://api.github.com/users/areek/orgs","repos_url":"https://api.github.com/users/areek/repos","events_url":"https://api.github.com/users/areek/events{/privacy}","received_events_url":"https://api.github.com/users/areek/received_events","type":"User","site_admin":false},"created_at":"2016-08-25T20:01:52Z","updated_at":"2016-08-25T20:01:52Z","author_association":"CONTRIBUTOR","body":"@shavo007 #19536 is not in v5.0-alpha5, it is in master, so it will be released in the next release of v5.0, hence you get different response\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/242625761","html_url":"https://github.com/elastic/elasticsearch/issues/20160#issuecomment-242625761","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20160","id":242625761,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MjYyNTc2MQ==","user":{"login":"shavo007","id":5466825,"node_id":"MDQ6VXNlcjU0NjY4MjU=","avatar_url":"https://avatars2.githubusercontent.com/u/5466825?v=4","gravatar_id":"","url":"https://api.github.com/users/shavo007","html_url":"https://github.com/shavo007","followers_url":"https://api.github.com/users/shavo007/followers","following_url":"https://api.github.com/users/shavo007/following{/other_user}","gists_url":"https://api.github.com/users/shavo007/gists{/gist_id}","starred_url":"https://api.github.com/users/shavo007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shavo007/subscriptions","organizations_url":"https://api.github.com/users/shavo007/orgs","repos_url":"https://api.github.com/users/shavo007/repos","events_url":"https://api.github.com/users/shavo007/events{/privacy}","received_events_url":"https://api.github.com/users/shavo007/received_events","type":"User","site_admin":false},"created_at":"2016-08-26T04:09:37Z","updated_at":"2016-08-26T04:09:37Z","author_association":"NONE","body":"no worries. looks like the docs are out of sync in a few places... \n","performed_via_github_app":null}]