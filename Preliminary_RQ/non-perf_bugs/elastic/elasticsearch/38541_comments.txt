[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/461221125","html_url":"https://github.com/elastic/elasticsearch/issues/38541#issuecomment-461221125","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38541","id":461221125,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTIyMTEyNQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2019-02-06T22:55:04Z","updated_at":"2019-02-06T22:55:04Z","author_association":"MEMBER","body":"Flushing no longer means that the translog is truncated to be below 512 MB. Rather, flushing is now about reducing the amount of uncommitted data on disk, so that that data is now also permanently stored in Lucene. However, we continue to retain additional translog storage to assist with operation-based peer recoveries. You can see in the [docs](https://www.elastic.co/guide/en/elasticsearch/reference/6.5/index-modules-translog.html) we have additional settings related to the retention size and age. We are in the process of updating our docs on flushing (#38503) to make this clearer.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/461313123","html_url":"https://github.com/elastic/elasticsearch/issues/38541#issuecomment-461313123","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38541","id":461313123,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTMxMzEyMw==","user":{"login":"ialidzhikov","id":9372594,"node_id":"MDQ6VXNlcjkzNzI1OTQ=","avatar_url":"https://avatars2.githubusercontent.com/u/9372594?v=4","gravatar_id":"","url":"https://api.github.com/users/ialidzhikov","html_url":"https://github.com/ialidzhikov","followers_url":"https://api.github.com/users/ialidzhikov/followers","following_url":"https://api.github.com/users/ialidzhikov/following{/other_user}","gists_url":"https://api.github.com/users/ialidzhikov/gists{/gist_id}","starred_url":"https://api.github.com/users/ialidzhikov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ialidzhikov/subscriptions","organizations_url":"https://api.github.com/users/ialidzhikov/orgs","repos_url":"https://api.github.com/users/ialidzhikov/repos","events_url":"https://api.github.com/users/ialidzhikov/events{/privacy}","received_events_url":"https://api.github.com/users/ialidzhikov/received_events","type":"User","site_admin":false},"created_at":"2019-02-07T07:22:32Z","updated_at":"2019-02-07T07:22:32Z","author_association":"NONE","body":"@jasontedor , I cannot understand your explanation. The docs says that `index.translog.retention.size` is _The total size of translog files to keep_ and _Defaults to 512mb_, in my case the translog files are going beyond the limit. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/461317094","html_url":"https://github.com/elastic/elasticsearch/issues/38541#issuecomment-461317094","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38541","id":461317094,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTMxNzA5NA==","user":{"login":"ialidzhikov","id":9372594,"node_id":"MDQ6VXNlcjkzNzI1OTQ=","avatar_url":"https://avatars2.githubusercontent.com/u/9372594?v=4","gravatar_id":"","url":"https://api.github.com/users/ialidzhikov","html_url":"https://github.com/ialidzhikov","followers_url":"https://api.github.com/users/ialidzhikov/followers","following_url":"https://api.github.com/users/ialidzhikov/following{/other_user}","gists_url":"https://api.github.com/users/ialidzhikov/gists{/gist_id}","starred_url":"https://api.github.com/users/ialidzhikov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ialidzhikov/subscriptions","organizations_url":"https://api.github.com/users/ialidzhikov/orgs","repos_url":"https://api.github.com/users/ialidzhikov/repos","events_url":"https://api.github.com/users/ialidzhikov/events{/privacy}","received_events_url":"https://api.github.com/users/ialidzhikov/received_events","type":"User","site_admin":false},"created_at":"2019-02-07T07:42:25Z","updated_at":"2019-02-07T07:50:09Z","author_association":"NONE","body":"Also the translog file sizes are not being calculated as part of the total index size:\r\n```\r\nGET _cat/indices/logstash-2019.02.06?v\r\nhealth status index               uuid                   pri rep docs.count docs.deleted store.size pri.store.size\r\ngreen  open   logstash-2019.02.06 ozXK8lszSbmQn_Qbn3oiGQ   3   0    8268485            0      4.2gb          4.2gb\r\n```\r\n\r\nThe index size is `4.2G` but on the fs it takes `5.8G` because of the translogs.\r\nThis makes impossible to use the curator's [filtertype_space](https://www.elastic.co/guide/en/elasticsearch/client/curator/current/filtertype_space.html). I want to rely that the index `size_in_bytes` will be approximately the same as the size on the fs. \r\nThe thing I want to achieve is to delete the oldest index/indices when 98% of the volume data is occupied.","performed_via_github_app":null}]