{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/1483","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1483/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1483/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1483/events","html_url":"https://github.com/elastic/elasticsearch/issues/1483","id":2311778,"node_id":"MDU6SXNzdWUyMzExNzc4","number":1483,"title":"Shared Filesystem Gateway periodic snapshot cannot be successfully suspended","user":{"login":"tallpsmith","id":203682,"node_id":"MDQ6VXNlcjIwMzY4Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/203682?v=4","gravatar_id":"","url":"https://api.github.com/users/tallpsmith","html_url":"https://github.com/tallpsmith","followers_url":"https://api.github.com/users/tallpsmith/followers","following_url":"https://api.github.com/users/tallpsmith/following{/other_user}","gists_url":"https://api.github.com/users/tallpsmith/gists{/gist_id}","starred_url":"https://api.github.com/users/tallpsmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tallpsmith/subscriptions","organizations_url":"https://api.github.com/users/tallpsmith/orgs","repos_url":"https://api.github.com/users/tallpsmith/repos","events_url":"https://api.github.com/users/tallpsmith/events{/privacy}","received_events_url":"https://api.github.com/users/tallpsmith/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2011-11-22T00:31:53Z","updated_at":"2011-11-27T22:27:56Z","closed_at":"2011-11-27T22:27:56Z","author_association":"NONE","active_lock_reason":null,"body":"As discussed on the mailing list:\n\nhttp://elasticsearch-users.115913.n3.nabble.com/Gateway-Snapshot-settings-amp-unexpected-behaviour-maybe-bug-td3514819.html\n\nWe have a consistently reproducable case where attempting to suspend the periodic snapshotting fails.\n\nOur test path goes something like this:\n\n```\n# cd into the location of the gateway snapshot location\n$ cd /index/esgateway/qa4/indices\n\n# do a recursive directory listing and save the output\n$ ls -lR > /tmp/before-any-changes\n\n# suspend the gateway snapshotting by setting the interval to 0\n$ echo '{\"index\":{\"gateway\":{\"snapshot_interval\":0}}}' | \\\n curl -XPOST http://qa4es1.qa.acx:9200/snaptest/snaptype -d @-\n\n# Do another recursive directory copy of the snapshot location, we're expecting nothing to have changed here, because we haven't modified the index, yet it looks like it snapshots at the time of resetting the snapshot to 0\n$ ls -lR > /tmp/after-disable-gateway-via-zero-snapshot-interval\n\n# now actually modify the index\n$ curl -XPOST http://qa4es1.qa.acx:9200/snaptest/snaptype -d @testdata\n (testdata is a file containing a json index update)\n\n# Take another text copy of what the directory looks like, it really shouldn't have been touched right?\n$ ls -lR > /tmp/after-post-with-index-modification \n\n# Alas, we see differences...\n$ diff /tmp/after-disable-gateway-via-zero-snapshot-interval \\\n  /tmp/after-post-with-index-modification\n ... [several differences reported] ...\n```\n\nWe were expecting no differences at this point, up until we\nreset the regular snapshot interval ... perhaps we are missing\nsomething there though.\n","closed_by":{"login":"tallpsmith","id":203682,"node_id":"MDQ6VXNlcjIwMzY4Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/203682?v=4","gravatar_id":"","url":"https://api.github.com/users/tallpsmith","html_url":"https://github.com/tallpsmith","followers_url":"https://api.github.com/users/tallpsmith/followers","following_url":"https://api.github.com/users/tallpsmith/following{/other_user}","gists_url":"https://api.github.com/users/tallpsmith/gists{/gist_id}","starred_url":"https://api.github.com/users/tallpsmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tallpsmith/subscriptions","organizations_url":"https://api.github.com/users/tallpsmith/orgs","repos_url":"https://api.github.com/users/tallpsmith/repos","events_url":"https://api.github.com/users/tallpsmith/events{/privacy}","received_events_url":"https://api.github.com/users/tallpsmith/received_events","type":"User","site_admin":false},"performed_via_github_app":null}