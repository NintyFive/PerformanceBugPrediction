[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/385653233","html_url":"https://github.com/elastic/elasticsearch/issues/30296#issuecomment-385653233","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30296","id":385653233,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NTY1MzIzMw==","user":{"login":"romseygeek","id":1347065,"node_id":"MDQ6VXNlcjEzNDcwNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/1347065?v=4","gravatar_id":"","url":"https://api.github.com/users/romseygeek","html_url":"https://github.com/romseygeek","followers_url":"https://api.github.com/users/romseygeek/followers","following_url":"https://api.github.com/users/romseygeek/following{/other_user}","gists_url":"https://api.github.com/users/romseygeek/gists{/gist_id}","starred_url":"https://api.github.com/users/romseygeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/romseygeek/subscriptions","organizations_url":"https://api.github.com/users/romseygeek/orgs","repos_url":"https://api.github.com/users/romseygeek/repos","events_url":"https://api.github.com/users/romseygeek/events{/privacy}","received_events_url":"https://api.github.com/users/romseygeek/received_events","type":"User","site_admin":false},"created_at":"2018-05-01T11:43:49Z","updated_at":"2018-05-01T11:43:49Z","author_association":"CONTRIBUTOR","body":"Hi @pmishev , I'm surprised that this worked in ES 2.  I would have expected it to throw a NumberFormatException, unless you explicitly set `ignore_malformed` on the field mapping.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/385653291","html_url":"https://github.com/elastic/elasticsearch/issues/30296#issuecomment-385653291","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30296","id":385653291,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NTY1MzI5MQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-05-01T11:44:10Z","updated_at":"2018-05-01T11:44:10Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search-aggs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/385953631","html_url":"https://github.com/elastic/elasticsearch/issues/30296#issuecomment-385953631","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30296","id":385953631,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NTk1MzYzMQ==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2018-05-02T11:59:08Z","updated_at":"2018-05-02T11:59:08Z","author_association":"MEMBER","body":"I think I found the commit that changes this. In 2f8def11b5109eb80b47422a200bf7b7e07c8467 we moved from parsing input Strings with \"Integer.parseInt()\" to \"Double.parseDouble()\". While the former accepts the encoded integer, the later throws an exception:\r\n\r\n```\r\n    public void testNumberCoercion() {\r\n        assertEquals(18426, Double.parseDouble(\"18426\"), 0.0);  // ok\r\n        assertEquals(18426, Integer.parseInt(\"１８４２６\"));  // ok\r\n        assertEquals(18426, Double.parseDouble(\"１８４２６\"), 0.0);  // throws NumberFormatException\r\n    }\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/444436655","html_url":"https://github.com/elastic/elasticsearch/issues/30296#issuecomment-444436655","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30296","id":444436655,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NDQzNjY1NQ==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2018-12-05T10:28:23Z","updated_at":"2018-12-05T10:28:23Z","author_association":"MEMBER","body":"Since parsing of numbers as CJK-encoded Strings is something that was never intentionally supported (the 2.x behaviour seems unexpected) I'm going to close this issue.\r\nIf this is something we really should discuss again to do going forward please re-open or open a separate new feature request.","performed_via_github_app":null}]