{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/29196","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29196/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29196/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29196/events","html_url":"https://github.com/elastic/elasticsearch/issues/29196","id":307404062,"node_id":"MDU6SXNzdWUzMDc0MDQwNjI=","number":29196,"title":"Geo point on the edges of the bounding box not considered?","user":{"login":"mloho","id":5769105,"node_id":"MDQ6VXNlcjU3NjkxMDU=","avatar_url":"https://avatars1.githubusercontent.com/u/5769105?v=4","gravatar_id":"","url":"https://api.github.com/users/mloho","html_url":"https://github.com/mloho","followers_url":"https://api.github.com/users/mloho/followers","following_url":"https://api.github.com/users/mloho/following{/other_user}","gists_url":"https://api.github.com/users/mloho/gists{/gist_id}","starred_url":"https://api.github.com/users/mloho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mloho/subscriptions","organizations_url":"https://api.github.com/users/mloho/orgs","repos_url":"https://api.github.com/users/mloho/repos","events_url":"https://api.github.com/users/mloho/events{/privacy}","received_events_url":"https://api.github.com/users/mloho/received_events","type":"User","site_admin":false},"labels":[{"id":141079527,"node_id":"MDU6TGFiZWwxNDEwNzk1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Analytics/Geo","name":":Analytics/Geo","color":"0e8a16","default":false,"description":"Indexing, search aggregations of geo points and shapes"},{"id":23715,"node_id":"MDU6TGFiZWwyMzcxNQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Edocs","name":">docs","color":"db755e","default":false,"description":"General docs changes"}],"state":"closed","locked":false,"assignee":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"assignees":[{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2018-03-21T20:22:22Z","updated_at":"2018-05-14T19:54:43Z","closed_at":"2018-05-14T19:54:43Z","author_association":"NONE","active_lock_reason":null,"body":"<!-- Bug report -->\r\n\r\n**Elasticsearch server version**: `{\"number\": \"5.6.6\",\"lucene_version\": \"6.6.1\"}`\r\n**Elasticsearch client version**: `6.2.1`\r\n\r\n**Plugins installed**: `[{\r\n\"name\": \"x-pack\",\r\n\"version\": \"5.6.6\",\r\n\"description\": \"Elasticsearch Expanded Pack Plugin\",\r\n\"classname\": \"org.elasticsearch.xpack.XPackPlugin\",\r\n\"has_native_controller\": true\r\n}]`\r\n\r\n**JVM version**: `1.8.0_151`\r\n\r\n**OS version**: Linux ubuntu 4.4.0-116-generic\r\n\r\n**Steps to reproduce**\r\n1. Document has a geo point field like so: `\"Location\":[-83.106,28]`\r\n2. Java-API-generated query contains a geo bounding box filter like so:\r\n```json\r\n{\r\n  \"geo_bounding_box\": {\r\n    \"Location\": {\r\n      \"top_left\": [\r\n        -83.106,\r\n        28\r\n      ],\r\n      \"bottom_right\": [\r\n        -80.106,\r\n        27\r\n      ]\r\n    },\r\n    \"validation_method\": \"STRICT\",\r\n    \"type\": \"MEMORY\",\r\n    \"ignore_unmapped\": false,\r\n    \"boost\": 1\r\n  }\r\n}\r\n```\r\n\r\n**Expected**\r\nThe query returns my document.\r\n\r\n**Actual**\r\nThe query returns nothing. The query contains other filters but they do not interfere with the results because once I change the top value of the `top_level` field of the geo bounding box filter to -83.10**7**, the document gets returned.\r\n\r\n**Observations & Questions**\r\n- The same quirk can also be seen with the longitude value. If I change 28 and 27 to 29 and 28, I get nothing.\r\n- I can find no documentation to back up our initial assumption that the bounding box filter would be inclusive all around. Is the query supposed to return the document if its geo point exists on any of the edges of the bounding box?","closed_by":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"performed_via_github_app":null}