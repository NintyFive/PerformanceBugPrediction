[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/23653559","html_url":"https://github.com/elastic/elasticsearch/issues/3599#issuecomment-23653559","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3599","id":23653559,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNjUzNTU5","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2013-09-02T10:58:16Z","updated_at":"2013-09-02T10:58:16Z","author_association":"CONTRIBUTOR","body":"Thanks for reporting this issue, I was able to write a unit test that reproduces the issue you described, I will look into it!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/23656373","html_url":"https://github.com/elastic/elasticsearch/issues/3599#issuecomment-23656373","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3599","id":23656373,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNjU2Mzcz","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2013-09-02T12:04:19Z","updated_at":"2013-09-02T12:04:19Z","author_association":"CONTRIBUTOR","body":"@avpet Unfortunately, I don't think this issue should be fixed. Cross index queries expect the mappings of the documents to sort to be very similar. For example, you can't sort on a field if it is mapped as a string on one index and as an integer on another index.\n\nHere, the problem is that responses for individual shards must return the values which have been used for sorting, and this is not possible for an unmapped field: Elasticsearch can't get the type of the value it should return and `null` is not an option since it is not supported for numeric fields.\n\nA work-around would be to explicitely add a mapping for the `fileSize` field on all indices you are searching on so that you don't have to set `ignore_unmapped`. On my end, I will update the documentation to explain the limitations of `ignore_unmapped` for cross-indices search.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/23657924","html_url":"https://github.com/elastic/elasticsearch/issues/3599#issuecomment-23657924","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3599","id":23657924,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNjU3OTI0","user":{"login":"avpet","id":3149604,"node_id":"MDQ6VXNlcjMxNDk2MDQ=","avatar_url":"https://avatars1.githubusercontent.com/u/3149604?v=4","gravatar_id":"","url":"https://api.github.com/users/avpet","html_url":"https://github.com/avpet","followers_url":"https://api.github.com/users/avpet/followers","following_url":"https://api.github.com/users/avpet/following{/other_user}","gists_url":"https://api.github.com/users/avpet/gists{/gist_id}","starred_url":"https://api.github.com/users/avpet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/avpet/subscriptions","organizations_url":"https://api.github.com/users/avpet/orgs","repos_url":"https://api.github.com/users/avpet/repos","events_url":"https://api.github.com/users/avpet/events{/privacy}","received_events_url":"https://api.github.com/users/avpet/received_events","type":"User","site_admin":false},"created_at":"2013-09-02T12:41:42Z","updated_at":"2013-09-02T12:41:42Z","author_association":"NONE","body":"Thank you very much, Adrien, the workaround is OK for us. Thanks for letting us know about the limitation of the `ignore_unmapped` field. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/34982907","html_url":"https://github.com/elastic/elasticsearch/issues/3599#issuecomment-34982907","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3599","id":34982907,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTgyOTA3","user":{"login":"matthiasg","id":231889,"node_id":"MDQ6VXNlcjIzMTg4OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/231889?v=4","gravatar_id":"","url":"https://api.github.com/users/matthiasg","html_url":"https://github.com/matthiasg","followers_url":"https://api.github.com/users/matthiasg/followers","following_url":"https://api.github.com/users/matthiasg/following{/other_user}","gists_url":"https://api.github.com/users/matthiasg/gists{/gist_id}","starred_url":"https://api.github.com/users/matthiasg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matthiasg/subscriptions","organizations_url":"https://api.github.com/users/matthiasg/orgs","repos_url":"https://api.github.com/users/matthiasg/repos","events_url":"https://api.github.com/users/matthiasg/events{/privacy}","received_events_url":"https://api.github.com/users/matthiasg/received_events","type":"User","site_admin":false},"created_at":"2014-02-13T14:31:32Z","updated_at":"2014-02-13T14:33:36Z","author_association":"NONE","body":"I am not sure I understand. Sorting the resulting data based on a field across many indices is a typical use case for us. `ignore_unmapped:true` and `missing '_last' / '_first'` seems like the ideal way to handle that ...  why does it work across some indices but not all ?\n\nbtw: the documentation at http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-request-sort.html doesnt seem to indicate any limitation in `ignore_unmapped` when used on http://<server>/_search\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/34987083","html_url":"https://github.com/elastic/elasticsearch/issues/3599#issuecomment-34987083","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3599","id":34987083,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTg3MDgz","user":{"login":"avpet","id":3149604,"node_id":"MDQ6VXNlcjMxNDk2MDQ=","avatar_url":"https://avatars1.githubusercontent.com/u/3149604?v=4","gravatar_id":"","url":"https://api.github.com/users/avpet","html_url":"https://github.com/avpet","followers_url":"https://api.github.com/users/avpet/followers","following_url":"https://api.github.com/users/avpet/following{/other_user}","gists_url":"https://api.github.com/users/avpet/gists{/gist_id}","starred_url":"https://api.github.com/users/avpet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/avpet/subscriptions","organizations_url":"https://api.github.com/users/avpet/orgs","repos_url":"https://api.github.com/users/avpet/repos","events_url":"https://api.github.com/users/avpet/events{/privacy}","received_events_url":"https://api.github.com/users/avpet/received_events","type":"User","site_admin":false},"created_at":"2014-02-13T15:12:33Z","updated_at":"2014-02-13T15:12:33Z","author_association":"NONE","body":"Yes,  matthiasg, looks like the documentation has yet to be updated and to be honest, I have not understood the explanation fully, just realized, that it cannot be done due to some architectural issues in Elasticsearch codebase. We bypassed this limitation by the adding the field to all indices involved in the sort, which is not very clean solution.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/90541333","html_url":"https://github.com/elastic/elasticsearch/issues/3599#issuecomment-90541333","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3599","id":90541333,"node_id":"MDEyOklzc3VlQ29tbWVudDkwNTQxMzMz","user":{"login":"avpet","id":3149604,"node_id":"MDQ6VXNlcjMxNDk2MDQ=","avatar_url":"https://avatars1.githubusercontent.com/u/3149604?v=4","gravatar_id":"","url":"https://api.github.com/users/avpet","html_url":"https://github.com/avpet","followers_url":"https://api.github.com/users/avpet/followers","following_url":"https://api.github.com/users/avpet/following{/other_user}","gists_url":"https://api.github.com/users/avpet/gists{/gist_id}","starred_url":"https://api.github.com/users/avpet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/avpet/subscriptions","organizations_url":"https://api.github.com/users/avpet/orgs","repos_url":"https://api.github.com/users/avpet/repos","events_url":"https://api.github.com/users/avpet/events{/privacy}","received_events_url":"https://api.github.com/users/avpet/received_events","type":"User","site_admin":false},"created_at":"2015-04-07T13:02:38Z","updated_at":"2015-04-07T13:02:38Z","author_association":"NONE","body":"It looks like the problem has been fixed in the version 1.4. In addition to `ignore_unmapped` parameter, the parameter called `unmapped_type` has been added. In case of cross-index query, you have to specify the type of this field have in one of the indexes. Please, see [Missing Values](http://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-sort.html#_missing_values) section. This way it works for cross-index queries, which involve fields exisiting only in some of the index mappings.\n","performed_via_github_app":null}]