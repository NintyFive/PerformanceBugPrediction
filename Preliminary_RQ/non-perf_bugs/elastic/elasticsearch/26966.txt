{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/26966","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26966/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26966/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26966/events","html_url":"https://github.com/elastic/elasticsearch/issues/26966","id":264561515,"node_id":"MDU6SXNzdWUyNjQ1NjE1MTU=","number":26966,"title":"Elasticsearch does not start when launched from a symlinked directory. ","user":{"login":"quijote","id":613158,"node_id":"MDQ6VXNlcjYxMzE1OA==","avatar_url":"https://avatars2.githubusercontent.com/u/613158?v=4","gravatar_id":"","url":"https://api.github.com/users/quijote","html_url":"https://github.com/quijote","followers_url":"https://api.github.com/users/quijote/followers","following_url":"https://api.github.com/users/quijote/following{/other_user}","gists_url":"https://api.github.com/users/quijote/gists{/gist_id}","starred_url":"https://api.github.com/users/quijote/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/quijote/subscriptions","organizations_url":"https://api.github.com/users/quijote/orgs","repos_url":"https://api.github.com/users/quijote/repos","events_url":"https://api.github.com/users/quijote/events{/privacy}","received_events_url":"https://api.github.com/users/quijote/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"assignees":[{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2017-10-11T12:09:08Z","updated_at":"2017-10-16T08:18:00Z","closed_at":"2017-10-16T08:12:25Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\n\r\n** Please read the guidelines below. **\r\n\r\nIssues that do not follow these guidelines are likely to be closed.\r\n\r\n1.  GitHub is reserved for bug reports and feature requests. The best place to\r\n    ask a general question is at the Elastic [forums](https://discuss.elastic.co).\r\n    GitHub is not the place for general questions.\r\n\r\n2.  Is this bug report or feature request for a supported OS? If not, it\r\n    is likely to be closed.  See https://www.elastic.co/support/matrix#show_os\r\n\r\n3.  Please fill out EITHER the feature request block or the bug report block\r\n    below, and delete the other block.\r\n\r\n-->\r\n\r\n<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`): Version: 5.6.3, Build: 1a2f265/2017-10-06T20:33:39.012Z, JVM: 1.8.0_144\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version** (`java -version`): 1.8.0_144\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): Windows 10\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nElasticsearch does not start when launched from a symlinked directory. \r\n\r\n\tC:\\temp\\elastic\\elasticsearch-5.6.3>bin\\elasticsearch\r\n\t[2017-10-11T14:01:44,342][INFO ][o.e.n.Node               ] [] initializing ...\r\n\t[2017-10-11T14:01:44,374][WARN ][o.e.b.ElasticsearchUncaughtExceptionHandler] [] uncaught exception in thread [main]\r\n\torg.elasticsearch.bootstrap.StartupException: java.security.AccessControlException: access denied (\"java.io.FilePermission\" \"D:\\temp\\elastic\\elasticsearch-5.6.3\\data\\nodes\\0\" \"write\")\r\n\t\t\tat org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:136) ~[elasticsearch-5.6.3.jar:5.6.3]\r\n\t\t\tat org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:123) ~[elasticsearch-5.6.3.jar:5.6.3]\r\n\t\t\tat org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:70) ~[elasticsearch-5.6.3.jar:5.6.3]\r\n\t\t\tat org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:134) ~[elasticsearch-5.6.3.jar:5.6.3]\r\n\t\t\tat org.elasticsearch.cli.Command.main(Command.java:90) ~[elasticsearch-5.6.3.jar:5.6.3]\r\n\t\t\tat org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:91) ~[elasticsearch-5.6.3.jar:5.6.3]\r\n\t\t\tat org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:84) ~[elasticsearch-5.6.3.jar:5.6.3]\r\n\tCaused by: java.security.AccessControlException: access denied (\"java.io.FilePermission\" \"D:\\temp\\elastic\\elasticsearch-5.6.3\\data\\nodes\\0\" \"write\")\r\n\t\t\tat java.security.AccessControlContext.checkPermission(AccessControlContext.java:472) ~[?:1.8.0_144]\r\n\t\t\tat java.security.AccessController.checkPermission(AccessController.java:884) ~[?:1.8.0_144]\r\n\t\t\tat java.lang.SecurityManager.checkPermission(SecurityManager.java:549) ~[?:1.8.0_144]\r\n\t\t\tat java.lang.SecurityManager.checkWrite(SecurityManager.java:979) ~[?:1.8.0_144]\r\n\t\t\tat sun.nio.fs.WindowsPath.checkWrite(WindowsPath.java:799) ~[?:?]\r\n\t\t\tat sun.nio.fs.WindowsFileSystemProvider.createDirectory(WindowsFileSystemProvider.java:491) ~[?:?]\r\n\t\t\tat java.nio.file.Files.createDirectory(Files.java:674) ~[?:1.8.0_144]\r\n\t\t\tat java.nio.file.Files.createAndCheckIsDirectory(Files.java:781) ~[?:1.8.0_144]\r\n\t\t\tat java.nio.file.Files.createDirectories(Files.java:727) ~[?:1.8.0_144]\r\n\t\t\tat org.apache.lucene.store.NativeFSLockFactory.obtainFSLock(NativeFSLockFactory.java:92) ~[lucene-core-6.6.1.jar:6.6.1 9aa465a89b64ff2dabe7b4d50c472de32c298683 - varunthacker - 2017-08-29 21:54:39]\r\n\t\t\tat org.apache.lucene.store.FSLockFactory.obtainLock(FSLockFactory.java:41) ~[lucene-core-6.6.1.jar:6.6.1 9aa465a89b64ff2dabe7b4d50c472de32c298683 - varunthacker - 2017-08-29 21:54:39]\r\n\t\t\tat org.apache.lucene.store.BaseDirectory.obtainLock(BaseDirectory.java:45) ~[lucene-core-6.6.1.jar:6.6.1 9aa465a89b64ff2dabe7b4d50c472de32c298683 - varunthacker - 2017-08-29 21:54:39]\r\n\t\t\tat org.elasticsearch.env.NodeEnvironment.<init>(NodeEnvironment.java:226) ~[elasticsearch-5.6.3.jar:5.6.3]\r\n\t\t\tat org.elasticsearch.node.Node.<init>(Node.java:265) ~[elasticsearch-5.6.3.jar:5.6.3]\r\n\t\t\tat org.elasticsearch.node.Node.<init>(Node.java:245) ~[elasticsearch-5.6.3.jar:5.6.3]\r\n\t\t\tat org.elasticsearch.bootstrap.Bootstrap$5.<init>(Bootstrap.java:233) ~[elasticsearch-5.6.3.jar:5.6.3]\r\n\t\t\tat org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:233) ~[elasticsearch-5.6.3.jar:5.6.3]\r\n\t\t\tat org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:342) ~[elasticsearch-5.6.3.jar:5.6.3]\r\n\t\t\tat org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:132) ~[elasticsearch-5.6.3.jar:5.6.3]\r\n\t\t\t... 6 more\r\n\r\n**Steps to reproduce**:\r\n\r\n1. Create directory C:\\temp\r\n2. Create directory D:\\temp\\elastic\r\n3. Create a symlink from C:\\temp\\elastic to D:\\temp\\elastic\r\n\tC:\\temp>mklink /D elastic D:\\temp\\elastic\r\n4. Extract Elasticsearch ZIP in C:\\temp\\elastic\r\n5. Launch elasticsearch from C:\\temp\\elastic\r\n\tC:\\temp\\elastic\\elasticsearch-5.6.3>bin\\elasticsearch\r\n\r\nIt seems that write access is restricted to C:\\temp\\elastic\\elasticsearch-5.6.3 but later attempted for D:\\temp\\elastic\\elasticsearch-5.6.3","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}