[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/683658135","html_url":"https://github.com/elastic/elasticsearch/issues/61453#issuecomment-683658135","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61453","id":683658135,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzY1ODEzNQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-08-31T09:01:08Z","updated_at":"2020-08-31T09:01:08Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-security (:Security/Authorization)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/684174669","html_url":"https://github.com/elastic/elasticsearch/issues/61453#issuecomment-684174669","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61453","id":684174669,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDE3NDY2OQ==","user":{"login":"ywangd","id":2344308,"node_id":"MDQ6VXNlcjIzNDQzMDg=","avatar_url":"https://avatars3.githubusercontent.com/u/2344308?v=4","gravatar_id":"","url":"https://api.github.com/users/ywangd","html_url":"https://github.com/ywangd","followers_url":"https://api.github.com/users/ywangd/followers","following_url":"https://api.github.com/users/ywangd/following{/other_user}","gists_url":"https://api.github.com/users/ywangd/gists{/gist_id}","starred_url":"https://api.github.com/users/ywangd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywangd/subscriptions","organizations_url":"https://api.github.com/users/ywangd/orgs","repos_url":"https://api.github.com/users/ywangd/repos","events_url":"https://api.github.com/users/ywangd/events{/privacy}","received_events_url":"https://api.github.com/users/ywangd/received_events","type":"User","site_admin":false},"created_at":"2020-09-01T03:29:54Z","updated_at":"2020-09-01T03:29:54Z","author_association":"MEMBER","body":"The exception shown in the provided log is a known issue and fixed by #61446 and should be released as either v7.9.1 or v7.10.0. Though I am not sure whether this is the root cause of the `rollover` error since the log does not shown anything about rollover. @albertzaharovits \r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/685176366","html_url":"https://github.com/elastic/elasticsearch/issues/61453#issuecomment-685176366","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61453","id":685176366,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTE3NjM2Ng==","user":{"login":"hendry-lim","id":48344515,"node_id":"MDQ6VXNlcjQ4MzQ0NTE1","avatar_url":"https://avatars1.githubusercontent.com/u/48344515?v=4","gravatar_id":"","url":"https://api.github.com/users/hendry-lim","html_url":"https://github.com/hendry-lim","followers_url":"https://api.github.com/users/hendry-lim/followers","following_url":"https://api.github.com/users/hendry-lim/following{/other_user}","gists_url":"https://api.github.com/users/hendry-lim/gists{/gist_id}","starred_url":"https://api.github.com/users/hendry-lim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendry-lim/subscriptions","organizations_url":"https://api.github.com/users/hendry-lim/orgs","repos_url":"https://api.github.com/users/hendry-lim/repos","events_url":"https://api.github.com/users/hendry-lim/events{/privacy}","received_events_url":"https://api.github.com/users/hendry-lim/received_events","type":"User","site_admin":false},"created_at":"2020-09-01T22:55:00Z","updated_at":"2020-09-01T22:55:00Z","author_association":"NONE","body":"I could not find any error log related to the `rollover`, but the `rollover` did not happen and updating the ILM policy did not update the indices policy either. The error for those indices disappeared after I did the `rollover` manually. However, I am still seeing the same errors for data streams.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/685808685","html_url":"https://github.com/elastic/elasticsearch/issues/61453#issuecomment-685808685","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61453","id":685808685,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTgwODY4NQ==","user":{"login":"albertzaharovits","id":4568420,"node_id":"MDQ6VXNlcjQ1Njg0MjA=","avatar_url":"https://avatars2.githubusercontent.com/u/4568420?v=4","gravatar_id":"","url":"https://api.github.com/users/albertzaharovits","html_url":"https://github.com/albertzaharovits","followers_url":"https://api.github.com/users/albertzaharovits/followers","following_url":"https://api.github.com/users/albertzaharovits/following{/other_user}","gists_url":"https://api.github.com/users/albertzaharovits/gists{/gist_id}","starred_url":"https://api.github.com/users/albertzaharovits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/albertzaharovits/subscriptions","organizations_url":"https://api.github.com/users/albertzaharovits/orgs","repos_url":"https://api.github.com/users/albertzaharovits/repos","events_url":"https://api.github.com/users/albertzaharovits/events{/privacy}","received_events_url":"https://api.github.com/users/albertzaharovits/received_events","type":"User","site_admin":false},"created_at":"2020-09-02T15:22:30Z","updated_at":"2020-09-02T15:22:59Z","author_association":"CONTRIBUTOR","body":"Hi @hendry-lim ,\r\n\r\nCan you please share with us more of the log file?\r\nThe `expected scroll indices access control` errors are spurious, and they should be fixed in 7.9.1 .\r\nThis is not the root of the problem.\r\n\r\nWhere do you see the `Security_exception: action [indices:admin/rollover] is unauthorized for user` message?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/686122364","html_url":"https://github.com/elastic/elasticsearch/issues/61453#issuecomment-686122364","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61453","id":686122364,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjEyMjM2NA==","user":{"login":"hendry-lim","id":48344515,"node_id":"MDQ6VXNlcjQ4MzQ0NTE1","avatar_url":"https://avatars1.githubusercontent.com/u/48344515?v=4","gravatar_id":"","url":"https://api.github.com/users/hendry-lim","html_url":"https://github.com/hendry-lim","followers_url":"https://api.github.com/users/hendry-lim/followers","following_url":"https://api.github.com/users/hendry-lim/following{/other_user}","gists_url":"https://api.github.com/users/hendry-lim/gists{/gist_id}","starred_url":"https://api.github.com/users/hendry-lim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendry-lim/subscriptions","organizations_url":"https://api.github.com/users/hendry-lim/orgs","repos_url":"https://api.github.com/users/hendry-lim/repos","events_url":"https://api.github.com/users/hendry-lim/events{/privacy}","received_events_url":"https://api.github.com/users/hendry-lim/received_events","type":"User","site_admin":false},"created_at":"2020-09-02T23:48:45Z","updated_at":"2020-09-02T23:48:54Z","author_association":"NONE","body":"The message `Security_exception: action [indices:admin/rollover] is unauthorized for user` was shown in Kibana.\r\n\r\n> The `expected scroll indices access control` errors are spurious, and they should be fixed in 7.9.1.\r\n\r\nI will try out `7.9.1` to see if the error persists.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/686870940","html_url":"https://github.com/elastic/elasticsearch/issues/61453#issuecomment-686870940","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61453","id":686870940,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Njg3MDk0MA==","user":{"login":"hendry-lim","id":48344515,"node_id":"MDQ6VXNlcjQ4MzQ0NTE1","avatar_url":"https://avatars1.githubusercontent.com/u/48344515?v=4","gravatar_id":"","url":"https://api.github.com/users/hendry-lim","html_url":"https://github.com/hendry-lim","followers_url":"https://api.github.com/users/hendry-lim/followers","following_url":"https://api.github.com/users/hendry-lim/following{/other_user}","gists_url":"https://api.github.com/users/hendry-lim/gists{/gist_id}","starred_url":"https://api.github.com/users/hendry-lim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendry-lim/subscriptions","organizations_url":"https://api.github.com/users/hendry-lim/orgs","repos_url":"https://api.github.com/users/hendry-lim/repos","events_url":"https://api.github.com/users/hendry-lim/events{/privacy}","received_events_url":"https://api.github.com/users/hendry-lim/received_events","type":"User","site_admin":false},"created_at":"2020-09-04T02:57:32Z","updated_at":"2020-09-04T02:57:32Z","author_association":"NONE","body":"Not seeing this error anymore in `7.9.1`, closing this.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/728281298","html_url":"https://github.com/elastic/elasticsearch/issues/61453#issuecomment-728281298","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61453","id":728281298,"node_id":"MDEyOklzc3VlQ29tbWVudDcyODI4MTI5OA==","user":{"login":"qfdk","id":2404478,"node_id":"MDQ6VXNlcjI0MDQ0Nzg=","avatar_url":"https://avatars0.githubusercontent.com/u/2404478?v=4","gravatar_id":"","url":"https://api.github.com/users/qfdk","html_url":"https://github.com/qfdk","followers_url":"https://api.github.com/users/qfdk/followers","following_url":"https://api.github.com/users/qfdk/following{/other_user}","gists_url":"https://api.github.com/users/qfdk/gists{/gist_id}","starred_url":"https://api.github.com/users/qfdk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qfdk/subscriptions","organizations_url":"https://api.github.com/users/qfdk/orgs","repos_url":"https://api.github.com/users/qfdk/repos","events_url":"https://api.github.com/users/qfdk/events{/privacy}","received_events_url":"https://api.github.com/users/qfdk/received_events","type":"User","site_admin":false},"created_at":"2020-11-16T19:40:23Z","updated_at":"2020-11-16T19:41:32Z","author_association":"NONE","body":"We have the same problem using metricbeats 7.9.3 in elk cloud. \r\n\r\nThe user we have already deleted but we got the message from the old user.\r\n\r\n1.  create new user (metricbeat-new)\r\n2. stop metricbeat and change old user (xxx-metricbeat) by new user (metricbeat-new)\r\n3. start metricbeat with new user (metricbeat-new)\r\n4. via interface kibana, i got the error for old user (xxx-metricbeat)\r\n\r\nref:\r\nhttps://www.elastic.co/guide/en/beats/metricbeat/7.9/privileges-to-setup-beats.html\r\nhttps://discuss.elastic.co/t/security-exception-action-indices-admin-rollover-is-unauthorized-for-user/245593\r\n\r\n<img width=\"884\" alt=\"Snipaste_2020-11-16_18-27-11\" src=\"https://user-images.githubusercontent.com/2404478/99299216-33b39f00-284b-11eb-9c69-a287ae01019c.png\">\r\n<img width=\"1715\" alt=\"Snipaste_2020-11-16_20-35-37\" src=\"https://user-images.githubusercontent.com/2404478/99299284-4fb74080-284b-11eb-8a1e-2e083ecfdb89.png\">\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/728493348","html_url":"https://github.com/elastic/elasticsearch/issues/61453#issuecomment-728493348","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61453","id":728493348,"node_id":"MDEyOklzc3VlQ29tbWVudDcyODQ5MzM0OA==","user":{"login":"ywangd","id":2344308,"node_id":"MDQ6VXNlcjIzNDQzMDg=","avatar_url":"https://avatars3.githubusercontent.com/u/2344308?v=4","gravatar_id":"","url":"https://api.github.com/users/ywangd","html_url":"https://github.com/ywangd","followers_url":"https://api.github.com/users/ywangd/followers","following_url":"https://api.github.com/users/ywangd/following{/other_user}","gists_url":"https://api.github.com/users/ywangd/gists{/gist_id}","starred_url":"https://api.github.com/users/ywangd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywangd/subscriptions","organizations_url":"https://api.github.com/users/ywangd/orgs","repos_url":"https://api.github.com/users/ywangd/repos","events_url":"https://api.github.com/users/ywangd/events{/privacy}","received_events_url":"https://api.github.com/users/ywangd/received_events","type":"User","site_admin":false},"created_at":"2020-11-17T00:24:02Z","updated_at":"2020-11-17T00:24:02Z","author_association":"MEMBER","body":"An IML policy saves the credentails of the user who modifies it most recently. In your case, the ILM policy, `metricbeat`, was created by the old user `xxx-metricbeat` and the policy internally still references the old user's credentails after you changed the metricbeat user. \r\nYou can make the ILM policy use the new `metricbeat-new` user by performing a no-op update. The steps would be something like the follows:\r\n1. [Retrieve](https://www.elastic.co/guide/en/elasticsearch/reference/master/ilm-get-lifecycle.html) the `metricbeat` policy with `GET _ilm/policy/metricbeat`. \r\n2. Take the response from the previous step and modify it so it can be used as an input for [update](https://www.elastic.co/guide/en/elasticsearch/reference/master/ilm-put-lifecycle.html). Please make sure the input is identical to the existing policy, i.e. the update will be a no-op (except the saved credentials)\r\n3. As the new user `metricbeat-new`, issue an update ILM policy call with input from the previous step. The update call will capture the calling user's credentials (`metricbeat-new`) and drop the old one (`xxx-metricbeat`).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/728784920","html_url":"https://github.com/elastic/elasticsearch/issues/61453#issuecomment-728784920","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61453","id":728784920,"node_id":"MDEyOklzc3VlQ29tbWVudDcyODc4NDkyMA==","user":{"login":"qfdk","id":2404478,"node_id":"MDQ6VXNlcjI0MDQ0Nzg=","avatar_url":"https://avatars0.githubusercontent.com/u/2404478?v=4","gravatar_id":"","url":"https://api.github.com/users/qfdk","html_url":"https://github.com/qfdk","followers_url":"https://api.github.com/users/qfdk/followers","following_url":"https://api.github.com/users/qfdk/following{/other_user}","gists_url":"https://api.github.com/users/qfdk/gists{/gist_id}","starred_url":"https://api.github.com/users/qfdk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qfdk/subscriptions","organizations_url":"https://api.github.com/users/qfdk/orgs","repos_url":"https://api.github.com/users/qfdk/repos","events_url":"https://api.github.com/users/qfdk/events{/privacy}","received_events_url":"https://api.github.com/users/qfdk/received_events","type":"User","site_admin":false},"created_at":"2020-11-17T08:55:34Z","updated_at":"2020-11-17T08:55:34Z","author_association":"NONE","body":"@ywangd Thanks for your explications. \r\n\r\nWe have different accounts to separate the environment,\r\nnow we have \"metricbeat-new-dev\" and \"metricbeat-new-prod\", two accounts have the same privileges and they will write to the same index (metricbeat-date-00001). The production account isn't active\r\n\r\nI want to know if we will get the same issue when the production account actives?\r\n\r\nBest regards\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/729331872","html_url":"https://github.com/elastic/elasticsearch/issues/61453#issuecomment-729331872","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61453","id":729331872,"node_id":"MDEyOklzc3VlQ29tbWVudDcyOTMzMTg3Mg==","user":{"login":"ywangd","id":2344308,"node_id":"MDQ6VXNlcjIzNDQzMDg=","avatar_url":"https://avatars3.githubusercontent.com/u/2344308?v=4","gravatar_id":"","url":"https://api.github.com/users/ywangd","html_url":"https://github.com/ywangd","followers_url":"https://api.github.com/users/ywangd/followers","following_url":"https://api.github.com/users/ywangd/following{/other_user}","gists_url":"https://api.github.com/users/ywangd/gists{/gist_id}","starred_url":"https://api.github.com/users/ywangd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywangd/subscriptions","organizations_url":"https://api.github.com/users/ywangd/orgs","repos_url":"https://api.github.com/users/ywangd/repos","events_url":"https://api.github.com/users/ywangd/events{/privacy}","received_events_url":"https://api.github.com/users/ywangd/received_events","type":"User","site_admin":false},"created_at":"2020-11-18T02:16:46Z","updated_at":"2020-11-18T02:16:46Z","author_association":"MEMBER","body":"@qfdk Thanks very much for your interest in Elasticsearch. \r\n\r\nI forgot to mention it earlier, but the error you got is different from the one that this issue is about (if you compare the stacktraces, they are different). This appears to be a user question, and we'd like to direct these kinds of things to the [Elasticsearch forum](https://discuss.elastic.co/c/elasticsearch). If you can stop by there, we'd appreciate it. This allows us to use GitHub for verified bug reports, feature requests, and pull requests.\r\n\r\nThere's an active community in the [forum](https://discuss.elastic.co/c/elasticsearch) that should be able to help get an answer to your question. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/729509759","html_url":"https://github.com/elastic/elasticsearch/issues/61453#issuecomment-729509759","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61453","id":729509759,"node_id":"MDEyOklzc3VlQ29tbWVudDcyOTUwOTc1OQ==","user":{"login":"qfdk","id":2404478,"node_id":"MDQ6VXNlcjI0MDQ0Nzg=","avatar_url":"https://avatars0.githubusercontent.com/u/2404478?v=4","gravatar_id":"","url":"https://api.github.com/users/qfdk","html_url":"https://github.com/qfdk","followers_url":"https://api.github.com/users/qfdk/followers","following_url":"https://api.github.com/users/qfdk/following{/other_user}","gists_url":"https://api.github.com/users/qfdk/gists{/gist_id}","starred_url":"https://api.github.com/users/qfdk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qfdk/subscriptions","organizations_url":"https://api.github.com/users/qfdk/orgs","repos_url":"https://api.github.com/users/qfdk/repos","events_url":"https://api.github.com/users/qfdk/events{/privacy}","received_events_url":"https://api.github.com/users/qfdk/received_events","type":"User","site_admin":false},"created_at":"2020-11-18T08:07:35Z","updated_at":"2020-11-18T08:31:17Z","author_association":"NONE","body":"@ywangd Thank you. \r\nI'm sorry for that, I will send it to the forum","performed_via_github_app":null}]