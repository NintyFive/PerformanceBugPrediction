{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/23681","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23681/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23681/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23681/events","html_url":"https://github.com/elastic/elasticsearch/issues/23681","id":215845168,"node_id":"MDU6SXNzdWUyMTU4NDUxNjg=","number":23681,"title":"Allow Dynamic Cluster Setting for `number_of_shards`","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"labels":[{"id":144457604,"node_id":"MDU6TGFiZWwxNDQ0NTc2MDQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Settings","name":":Core/Infra/Settings","color":"0e8a16","default":false,"description":"Settings infrastructure and APIs"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2017-03-21T19:00:18Z","updated_at":"2017-03-29T08:30:30Z","closed_at":"2017-03-24T13:40:39Z","author_association":"MEMBER","active_lock_reason":null,"body":"Today, we often suggest that users create a default \"global\" index template to create defaults for their cluster's sharding. For example:\r\n\r\n```json\r\n{\r\n  \"template\": \"*\",\r\n  \"settings\": {\r\n    \"number_of_shards\": 1,\r\n    \"number_of_replicas\": 1\r\n  }\r\n}\r\n```\r\n\r\nHowever, as we look to the future of disabling template inheritance, we need to consider this very real use case of template inheritance, which was probably the most common use of it.\r\n\r\nAs such, I think we should allow certain index level settings to be set at the cluster level to control their defaults. We should avoid doing this in the same way that we did in 1.x and 2.x, where you simply used the same setting name. So I wonder if we could introduce a cluster-level index settings:\r\n\r\n```yaml\r\ncluster.index.defaults:\r\n  number_of_shards: 1\r\n  number_of_replicas: 1\r\n```\r\n\r\nOnce those exist, they could ideally be set dynamically as well, and then the desire/need for a global template is mostly erased.\r\n\r\n/cc @AlexP-Elastic @inqueue @clintongormley ","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}