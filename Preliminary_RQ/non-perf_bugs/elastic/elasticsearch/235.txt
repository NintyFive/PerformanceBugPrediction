{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/235","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/235/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/235/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/235/events","html_url":"https://github.com/elastic/elasticsearch/issues/235","id":231991,"node_id":"MDU6SXNzdWUyMzE5OTE=","number":235,"title":"Memory Store / FS Memory: Create a node level memory store cache and allocator","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"labels":[{"id":23172,"node_id":"MDU6TGFiZWwyMzE3Mg==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Efeature","name":">feature","color":"006b75","default":false,"description":null},{"id":34099,"node_id":"MDU6TGFiZWwzNDA5OQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.09.0","name":"v0.09.0","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2010-06-26T19:33:20Z","updated_at":"2010-06-26T19:47:44Z","closed_at":"2010-06-27T02:34:33Z","author_association":"MEMBER","active_lock_reason":null,"body":"Currently, memory store is configured per shard, meaning that caching, for example, is done on a per shard level and configured on a per shard level. It means that configuring a cache of `20mb` is done on a per shard level, and is not scalable since the number of shards allocated to a node can vary.\n\nThere should be a global memory allocator and cache, that serves all different shards, and the configuration should be set on it. Here are the settings to set on it (note, these are node level settings):\n- `cache.memory.buffer_size`: The buffer size, defaults to `100k`.\n- `cache.memory.cache_size`: The size of cached buffers, defaults to `20mb`.\n- `cache.memory.direct`: Should direct buffers be used (native memory) or not (heap). Defaults to `true`.\n- `cache.memory.warm_cache`: Should the cache be warmed or not.\n\nNote, all differnet memory level settings that were done on store level are no longer  applicable and replaced by the mentioned node level settings above.\n","closed_by":null,"performed_via_github_app":null}