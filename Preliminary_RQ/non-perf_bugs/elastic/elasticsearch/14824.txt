{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/14824","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14824/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14824/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14824/events","html_url":"https://github.com/elastic/elasticsearch/issues/14824","id":117535131,"node_id":"MDU6SXNzdWUxMTc1MzUxMzE=","number":14824,"title":"Potential issue when testing plugins using ElasticsearchIntegrationTest?","user":{"login":"jaranflaath","id":112975,"node_id":"MDQ6VXNlcjExMjk3NQ==","avatar_url":"https://avatars0.githubusercontent.com/u/112975?v=4","gravatar_id":"","url":"https://api.github.com/users/jaranflaath","html_url":"https://github.com/jaranflaath","followers_url":"https://api.github.com/users/jaranflaath/followers","following_url":"https://api.github.com/users/jaranflaath/following{/other_user}","gists_url":"https://api.github.com/users/jaranflaath/gists{/gist_id}","starred_url":"https://api.github.com/users/jaranflaath/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaranflaath/subscriptions","organizations_url":"https://api.github.com/users/jaranflaath/orgs","repos_url":"https://api.github.com/users/jaranflaath/repos","events_url":"https://api.github.com/users/jaranflaath/events{/privacy}","received_events_url":"https://api.github.com/users/jaranflaath/received_events","type":"User","site_admin":false},"labels":[{"id":146854632,"node_id":"MDU6TGFiZWwxNDY4NTQ2MzI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Network","name":":Distributed/Network","color":"0e8a16","default":false,"description":"Http and internode communication implementations"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2015-11-18T08:03:44Z","updated_at":"2015-11-19T05:33:26Z","closed_at":"2015-11-19T02:08:45Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\n\nI've come across a potential issue when writing an integration test for one of our plugins using the ElasticsearchIntegrationTest class. This is in version 1.7.3.\n\nWhen a plugin tries to make a request to Elasticsearch, it will receive an error due to the assert in org.elasticsearch.transport.Transports which is checking if the current thread is a transport thread.\n\nI have created a github repo which demonstrates the issue: https://github.com/jaranflaath/es-plugin-integrationtest\n\nRunning the PluginTest will reproduce the situation.\n\nI am not certain if this is an issue in Elasticsearch, or an issue with the way we try to test our plugin, so any input is welcome.\n\nThanks!\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}