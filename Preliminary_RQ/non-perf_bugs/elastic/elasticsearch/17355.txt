{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/17355","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17355/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17355/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17355/events","html_url":"https://github.com/elastic/elasticsearch/issues/17355","id":143670979,"node_id":"MDU6SXNzdWUxNDM2NzA5Nzk=","number":17355,"title":"accessing fields returned from top hits aggregation ","user":{"login":"q11112345","id":10358392,"node_id":"MDQ6VXNlcjEwMzU4Mzky","avatar_url":"https://avatars3.githubusercontent.com/u/10358392?v=4","gravatar_id":"","url":"https://api.github.com/users/q11112345","html_url":"https://github.com/q11112345","followers_url":"https://api.github.com/users/q11112345/followers","following_url":"https://api.github.com/users/q11112345/following{/other_user}","gists_url":"https://api.github.com/users/q11112345/gists{/gist_id}","starred_url":"https://api.github.com/users/q11112345/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/q11112345/subscriptions","organizations_url":"https://api.github.com/users/q11112345/orgs","repos_url":"https://api.github.com/users/q11112345/repos","events_url":"https://api.github.com/users/q11112345/events{/privacy}","received_events_url":"https://api.github.com/users/q11112345/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2016-03-26T06:39:12Z","updated_at":"2017-05-30T07:35:23Z","closed_at":"2016-03-30T20:23:30Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\nGitHub is reserved for bug reports and feature requests. The best place\nto ask a general question is at the Elastic Discourse forums at\nhttps://discuss.elastic.co. If you are in fact posting a bug report or\na feature request, please include one and only one of the below blocks\nin your new issue.\n-->\n\nis it possible accessing document's field returned from top hits aggregation?\ni need sorting by default score in top hits sorting, and ordering the bucket from the root aggs by some other fields returned from top hits.\nfor example:\n\n```\n \"aggregations\": {\n    \"spu_group\": {\n        \"aggregations\": {\n            \"sku_info\": {\n                \"top_hits\": {\n                    \"_source\": {\n                        \"include\": \"sku_id\",\n                        \"include\": \"amount\"\n                    }, \n                    \"size\": 1\n                }\n            }\n        }, \n        \"terms\": {\n            \"field\": \"product_id\", \n            \"order\": {\n                \"sku_info.amount\": \"desc\"\n            }, \n            \"size\": 12\n        }\n    }\n}\n```\n\nhere i try to use \"sku_info.amount\" ordering the terms aggs of ”product_id“\n\n<!--\nIf you are filing a bug report, please remove the below feature\nrequest block and provide responses for all of the below items.\n-->\n\n<!--\nIf you are filing a feature request, please remove the above bug\nreport block and provide responses for all of the below items.\n-->\n\n**Describe the feature**:\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}