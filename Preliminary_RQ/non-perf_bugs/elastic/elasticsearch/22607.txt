{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/22607","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22607/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22607/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22607/events","html_url":"https://github.com/elastic/elasticsearch/issues/22607","id":200602563,"node_id":"MDU6SXNzdWUyMDA2MDI1NjM=","number":22607,"title":"Missing new line - COPY AS CURL","user":{"login":"james08","id":8150069,"node_id":"MDQ6VXNlcjgxNTAwNjk=","avatar_url":"https://avatars3.githubusercontent.com/u/8150069?v=4","gravatar_id":"","url":"https://api.github.com/users/james08","html_url":"https://github.com/james08","followers_url":"https://api.github.com/users/james08/followers","following_url":"https://api.github.com/users/james08/following{/other_user}","gists_url":"https://api.github.com/users/james08/gists{/gist_id}","starred_url":"https://api.github.com/users/james08/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/james08/subscriptions","organizations_url":"https://api.github.com/users/james08/orgs","repos_url":"https://api.github.com/users/james08/repos","events_url":"https://api.github.com/users/james08/events{/privacy}","received_events_url":"https://api.github.com/users/james08/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2017-01-13T10:58:20Z","updated_at":"2017-01-13T11:58:59Z","closed_at":"2017-01-13T11:58:59Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\nGitHub is reserved for bug reports and feature requests. The best place\r\nto ask a general question is at the Elastic Discourse forums at\r\nhttps://discuss.elastic.co. If you are in fact posting a bug report or\r\na feature request, please include one and only one of the below blocks\r\nin your new issue. Note that whether you're filing a bug report or a\r\nfeature request, ensure that your submission is for an\r\n[OS that we support](https://www.elastic.co/support/matrix#show_os).\r\nBug reports on an OS that we do not support or feature requests\r\nspecific to an OS that we do not support will be closed.\r\n-->\r\n\r\n<!--\r\nIf you are filing a bug report, please remove the below feature\r\nrequest block and provide responses for all of the below items.\r\n-->\r\n\r\n**Elasticsearch version**:\r\n5.1.1\r\n\r\n**Plugins installed**: []\r\nnone\r\n\r\n**JVM version**:\r\njava -version\r\njava version \"1.8.0_111\"\r\nJava(TM) SE Runtime Environment (build 1.8.0_111-b14)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.111-b14, mixed mode)\r\n\r\n**OS version**:\r\nSystem Version:\tmacOS 10.12.2 (16C67)\r\nKernel Version:\tDarwin 16.3.0\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nThis is only a bug within the training documentation. (So not an actual bug in the api.) It happens on the following page:\r\n\r\nhttps://www.elastic.co/guide/en/elasticsearch/reference/current/_batch_processing.html\r\n\r\nWhen you click 'COPY AS CURL', the javascript function does not add a line break before the final single quote. So when you paste and execute in the terminal, you only get a response on the first batch item and it's as if the second wasn't even there.\r\n\r\nThe javascript file is:\r\n\r\nhttps://www.elastic.co/guide/en/elasticsearch/reference/current/docs.js\r\n\r\nIt's around line 249 according to the browser source where it adds the final single quote without a new line. I'm not sure if this only applies for `_bulk` api calls or whether it will work for everything.\r\n\r\nEXPECTED:\r\nClick 'COPY AS CURL', paste into terminal and get a result for each item in the batch. Pasted command should look like this:\r\n\r\n\r\n```\r\ncurl -XPOST 'localhost:9200/customer/external/_bulk?pretty&pretty' -d'\r\n{\"index\":{\"_id\":\"1\"}}\r\n{\"name\": \"John Doe\" }\r\n{\"index\":{\"_id\":\"2\"}}\r\n{\"name\": \"Jane Doe\" }\r\n'\r\n\r\n```\r\n\r\nACTUAL:\r\nWhen you click 'COPY AS CURL' and paste into your terminal, there is no final new line added at the end before the closing single quote. It looks like this:\r\n\r\n```\r\ncurl -XPOST 'localhost:9200/customer/external/_bulk?pretty&pretty' -d'\r\n{\"index\":{\"_id\":\"1\"}}\r\n{\"name\": \"John Doe\" }\r\n{\"index\":{\"_id\":\"2\"}}\r\n{\"name\": \"Jane Doe\" }'\r\n\r\n```\r\n\r\n**Steps to reproduce**:\r\n 1. With elastic search running.\r\n 2. Make sure index 'customer' is empty.\r\n 3. Go to https://www.elastic.co/guide/en/elasticsearch/reference/current/_batch_processing.html\r\n 4. Click 'COPY AS CURL' on the first example.\r\n 5. Paste into terminal (and press enter if necessary :))\r\n 6. If problem still exists, only one result will be returned and only the first doc will be indexed.\r\n\r\n**Provide logs (if relevant)**:\r\n\r\n<!--\r\nIf you are filing a feature request, please remove the above bug\r\nreport block and provide responses for all of the below items.\r\n-->\r\n\r\n**Describe the feature**:","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}