[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/237835","html_url":"https://github.com/elastic/elasticsearch/issues/167#issuecomment-237835","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/167","id":237835,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNzgzNQ==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-05-11T14:25:48Z","updated_at":"2010-05-11T14:25:48Z","author_association":"MEMBER","body":"Can you explain more the process? Not sure I followed. For example, run this curl script, then start X, then stop, then restart, yada yada yada ;)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241326","html_url":"https://github.com/elastic/elasticsearch/issues/167#issuecomment-241326","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/167","id":241326,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTMyNg==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars3.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false},"created_at":"2010-05-14T08:58:46Z","updated_at":"2010-05-14T09:04:28Z","author_association":"NONE","body":"First, let me explain, I figured out what I was doing wrong - see at the bottom. But first here is my scenario:\n\n# start nodes to index something\n\n$ bin/elasticsearch -Des.gateway.type=fs -Des.gateway.fs.location=/home/lucene/elasticsearch/snapshot/gateway -Des.index.gateway.snapshot_interval=-1 -Des.index.engine.robin.refresh_interval=-1 -Des.http.enabled=false\n\n$ bin/elasticsearch -f -Des.node.data=false\n\n$ curl -XPUT 'http://localhost:9200/twitter/tweet/1' -d '\n{ \n    \"user\": \"kimchy\", \n    \"postDate\": \"2009-11-15T13:12:00\", \n    \"message\": \"Trying out Elastic Search, so far so good?\" \n}'\n\n$ curl -XGET 'http://localhost:9200/twitter/tweet/1?pretty=true'\n\n{\n  \"_index\" : \"twitter\",\n  \"_type\" : \"tweet\",\n  \"_id\" : \"1\", \"_source\" : \n{ \n    \"user\": \"kimchy\", \n    \"postDate\": \"2009-11-15T13:12:00\", \n    \"message\": \"Trying out Elastic Search, so far so good?\" \n}\n}\n\n# shutdown all nodes and start first data node and after that the non data node\n\n$ curl -XPOST 'http://localhost:9200/_cluster/nodes/_all/_shutdown'\n\n$ bin/elasticsearch -Des.gateway.type=fs -Des.gateway.fs.location=/home/lucene/elasticsearch/snapshot/gateway -Des.index.gateway.snapshot_interval=-1 -Des.index.engine.robin.refresh_interval=-1 -Des.http.enabled=false\n\n$ bin/elasticsearch -f -Des.node.data=false\n\n$ curl -XGET 'http://localhost:9200/twitter/tweet/1?pretty=true'\n\n{\n  \"_index\" : \"twitter\",\n  \"_type\" : \"tweet\",\n  \"_id\" : \"1\", \"_source\" : \n{ \n    \"user\": \"kimchy\", \n    \"postDate\": \"2009-11-15T13:12:00\", \n    \"message\": \"Trying out Elastic Search, so far so good?\" \n}\n}\n\n# shutdown all nodes and start first the non-data node and after that the data\n\n$ curl -XPOST 'http://localhost:9200/_cluster/nodes/_all/_shutdown'\n\n$ bin/elasticsearch -f -Des.node.data=false\n\n$ bin/elasticsearch -Des.gateway.type=fs -Des.gateway.fs.location=/home/lucene/elasticsearch/snapshot/gateway -Des.index.gateway.snapshot_interval=-1 -Des.index.engine.robin.refresh_interval=-1 -Des.http.enabled=false\n\n$ curl -XGET 'http://localhost:9200/twitter/tweet/1?pretty=true'\n\n{\n  \"error\" : \"IndexMissingException[[twitter] missing]\"\n\nBtw. even when I now shutdown the non-data node and restart that non-data node,\nthese nodes donot \"find\" them (I guess) => cannot XGET a document.\n\nBut at least, I figured that when I start the non-data node with all the\nparameters used for the data node, it works:\n\n$  bin/elasticsearch -f -Des.node.data=false -Des.gateway.type=fs -Des.gateway.fs.location=/home/lucene/elasticsearch/snapshot/gateway -Des.index.gateway.snapshot_interval=-1 -Des.index.engine.robin.refresh_interval=-1\n\nI was a little bit confused that it is necessary to parametrize a non-data node\nwith data-parameters,  but that will do it :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241650","html_url":"https://github.com/elastic/elasticsearch/issues/167#issuecomment-241650","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/167","id":241650,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTY1MA==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2010-05-14T15:30:41Z","updated_at":"2010-05-14T15:30:41Z","author_association":"MEMBER","body":"Ahh, I see what happened... . The problem is that the first node started will become the master and reload the cluster meta data (which includes indices created) from the gateway. This is why you need to configure the gateway on it as well.\n\nWhat you can do, by the way, is set `node.client` to `true` (will automatically set it to be a non data node as well). In this case (this only works with the new zen discovery in upcoming 0.7), the client node will not become master, but wait till one will be started.\n\nmake sense?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241654","html_url":"https://github.com/elastic/elasticsearch/issues/167#issuecomment-241654","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/167","id":241654,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTY1NA==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars3.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false},"created_at":"2010-05-14T15:37:24Z","updated_at":"2010-05-14T15:37:24Z","author_association":"NONE","body":"excellent :)\n","performed_via_github_app":null}]