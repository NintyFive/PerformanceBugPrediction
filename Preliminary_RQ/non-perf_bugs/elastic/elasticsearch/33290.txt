{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/33290","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33290/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33290/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33290/events","html_url":"https://github.com/elastic/elasticsearch/issues/33290","id":355768713,"node_id":"MDU6SXNzdWUzNTU3Njg3MTM=","number":33290,"title":"Create `xpack.monitoring.elasticsearch.collection.enabled` setting","user":{"login":"ycombinator","id":51061,"node_id":"MDQ6VXNlcjUxMDYx","avatar_url":"https://avatars2.githubusercontent.com/u/51061?v=4","gravatar_id":"","url":"https://api.github.com/users/ycombinator","html_url":"https://github.com/ycombinator","followers_url":"https://api.github.com/users/ycombinator/followers","following_url":"https://api.github.com/users/ycombinator/following{/other_user}","gists_url":"https://api.github.com/users/ycombinator/gists{/gist_id}","starred_url":"https://api.github.com/users/ycombinator/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ycombinator/subscriptions","organizations_url":"https://api.github.com/users/ycombinator/orgs","repos_url":"https://api.github.com/users/ycombinator/repos","events_url":"https://api.github.com/users/ycombinator/events{/privacy}","received_events_url":"https://api.github.com/users/ycombinator/received_events","type":"User","site_admin":false},"labels":[{"id":912834056,"node_id":"MDU6TGFiZWw5MTI4MzQwNTY=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Monitoring","name":":Core/Features/Monitoring","color":"0e8a16","default":false,"description":""},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-08-30T21:56:14Z","updated_at":"2018-09-18T01:33:43Z","closed_at":"2018-09-18T01:33:43Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Currently, Elasticsearch collects its own monitoring metrics and ships them to the monitoring cluster (which may be local or remote). The longer-term plan for Elastic stack monitoring is for Metricbeat to run along side Elasticsearch, collect monitoring data by calling Elasticsearch APIs and ship this data to the monitoring cluster.\r\n\r\nAs a prerequisite to asking users to setup Metricbeat for monitoring Elasticsearch, we need to ask them to turn off Elasticsearch's own internal collection. Otherwise duplicate documents for Elasticsearch monitoring will show up in the monitoring cluster.\r\n\r\nThis can be done by exposing a new cluster setting, `xpack.monitoring.elasticsearch.collection.enabled`, which will default to `true` for BWC.\r\n\r\nTwo notes on naming this setting:\r\n* Kibana has a similar setting named [`xpack.monitoring.kibana.collection.enabled`](https://www.elastic.co/guide/en/kibana/current/monitoring-settings-kb.html#monitoring-collection-settings), which does exactly the same thing as is described here, but for Kibana\r\n* [`xpack.monitoring.collection.enabled`](https://www.elastic.co/guide/en/elasticsearch/reference/current/monitoring-settings.html#monitoring-collection-settings) is already taken in Elasticsearch and does more than what is described in this issue.\r\n","closed_by":{"login":"ycombinator","id":51061,"node_id":"MDQ6VXNlcjUxMDYx","avatar_url":"https://avatars2.githubusercontent.com/u/51061?v=4","gravatar_id":"","url":"https://api.github.com/users/ycombinator","html_url":"https://github.com/ycombinator","followers_url":"https://api.github.com/users/ycombinator/followers","following_url":"https://api.github.com/users/ycombinator/following{/other_user}","gists_url":"https://api.github.com/users/ycombinator/gists{/gist_id}","starred_url":"https://api.github.com/users/ycombinator/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ycombinator/subscriptions","organizations_url":"https://api.github.com/users/ycombinator/orgs","repos_url":"https://api.github.com/users/ycombinator/repos","events_url":"https://api.github.com/users/ycombinator/events{/privacy}","received_events_url":"https://api.github.com/users/ycombinator/received_events","type":"User","site_admin":false},"performed_via_github_app":null}