[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/385618512","html_url":"https://github.com/elastic/elasticsearch/issues/30247#issuecomment-385618512","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30247","id":385618512,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NTYxODUxMg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-05-01T07:45:44Z","updated_at":"2018-05-01T07:45:44Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search-aggs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/385622394","html_url":"https://github.com/elastic/elasticsearch/issues/30247#issuecomment-385622394","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30247","id":385622394,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NTYyMjM5NA==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2018-05-01T08:14:27Z","updated_at":"2018-05-01T08:14:27Z","author_association":"MEMBER","body":"hi @asatsi did you find any related errors in the logs? We would need to know what the reason for the disconnection is. Hopefully you can find that in the logs and provide its stacktrace. Thanks!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/385885295","html_url":"https://github.com/elastic/elasticsearch/issues/30247#issuecomment-385885295","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30247","id":385885295,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NTg4NTI5NQ==","user":{"login":"asatsi","id":10648621,"node_id":"MDQ6VXNlcjEwNjQ4NjIx","avatar_url":"https://avatars0.githubusercontent.com/u/10648621?v=4","gravatar_id":"","url":"https://api.github.com/users/asatsi","html_url":"https://github.com/asatsi","followers_url":"https://api.github.com/users/asatsi/followers","following_url":"https://api.github.com/users/asatsi/following{/other_user}","gists_url":"https://api.github.com/users/asatsi/gists{/gist_id}","starred_url":"https://api.github.com/users/asatsi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asatsi/subscriptions","organizations_url":"https://api.github.com/users/asatsi/orgs","repos_url":"https://api.github.com/users/asatsi/repos","events_url":"https://api.github.com/users/asatsi/events{/privacy}","received_events_url":"https://api.github.com/users/asatsi/received_events","type":"User","site_admin":false},"created_at":"2018-05-02T07:13:18Z","updated_at":"2018-05-02T07:13:18Z","author_association":"NONE","body":"Hi @javanna ,\r\n\r\nI do see many occurrences of the below log. I have snipped specific portion in the attached file.\r\n\r\n[error.log](https://github.com/elastic/elasticsearch/files/1966214/error.log)\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/389224516","html_url":"https://github.com/elastic/elasticsearch/issues/30247#issuecomment-389224516","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30247","id":389224516,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTIyNDUxNg==","user":{"login":"asatsi","id":10648621,"node_id":"MDQ6VXNlcjEwNjQ4NjIx","avatar_url":"https://avatars0.githubusercontent.com/u/10648621?v=4","gravatar_id":"","url":"https://api.github.com/users/asatsi","html_url":"https://github.com/asatsi","followers_url":"https://api.github.com/users/asatsi/followers","following_url":"https://api.github.com/users/asatsi/following{/other_user}","gists_url":"https://api.github.com/users/asatsi/gists{/gist_id}","starred_url":"https://api.github.com/users/asatsi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asatsi/subscriptions","organizations_url":"https://api.github.com/users/asatsi/orgs","repos_url":"https://api.github.com/users/asatsi/repos","events_url":"https://api.github.com/users/asatsi/events{/privacy}","received_events_url":"https://api.github.com/users/asatsi/received_events","type":"User","site_admin":false},"created_at":"2018-05-15T16:11:46Z","updated_at":"2018-05-15T16:11:46Z","author_association":"NONE","body":"bump! Could somebody help out?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/389227201","html_url":"https://github.com/elastic/elasticsearch/issues/30247#issuecomment-389227201","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30247","id":389227201,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTIyNzIwMQ==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2018-05-15T16:20:14Z","updated_at":"2018-05-15T16:20:14Z","author_association":"MEMBER","body":"hi @asatsi from your logs, it seems like there are no nodes available that belong to one of the remote clusters. Note that the connection between the clusters uses the transport port (default 9300). Maybe there is some connection problem?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/389361343","html_url":"https://github.com/elastic/elasticsearch/issues/30247#issuecomment-389361343","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30247","id":389361343,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTM2MTM0Mw==","user":{"login":"asatsi","id":10648621,"node_id":"MDQ6VXNlcjEwNjQ4NjIx","avatar_url":"https://avatars0.githubusercontent.com/u/10648621?v=4","gravatar_id":"","url":"https://api.github.com/users/asatsi","html_url":"https://github.com/asatsi","followers_url":"https://api.github.com/users/asatsi/followers","following_url":"https://api.github.com/users/asatsi/following{/other_user}","gists_url":"https://api.github.com/users/asatsi/gists{/gist_id}","starred_url":"https://api.github.com/users/asatsi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asatsi/subscriptions","organizations_url":"https://api.github.com/users/asatsi/orgs","repos_url":"https://api.github.com/users/asatsi/repos","events_url":"https://api.github.com/users/asatsi/events{/privacy}","received_events_url":"https://api.github.com/users/asatsi/received_events","type":"User","site_admin":false},"created_at":"2018-05-16T01:00:50Z","updated_at":"2018-05-16T01:00:50Z","author_association":"NONE","body":"Thanks @javanna for reviewing the logs. There is apparently no issue with the connectivity as the firewall ports have been specifically opened for all the required ports. I also observed that whenever the \"proxy cross cluster\" is restarted, the remote connection behaves good. In Kibana I can see logs/dashboards from both the remote clusters. But after sometime, one of the remote cluster starts giving timeouts in Kibana. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/391006074","html_url":"https://github.com/elastic/elasticsearch/issues/30247#issuecomment-391006074","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30247","id":391006074,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTAwNjA3NA==","user":{"login":"athanatos64","id":39525883,"node_id":"MDQ6VXNlcjM5NTI1ODgz","avatar_url":"https://avatars1.githubusercontent.com/u/39525883?v=4","gravatar_id":"","url":"https://api.github.com/users/athanatos64","html_url":"https://github.com/athanatos64","followers_url":"https://api.github.com/users/athanatos64/followers","following_url":"https://api.github.com/users/athanatos64/following{/other_user}","gists_url":"https://api.github.com/users/athanatos64/gists{/gist_id}","starred_url":"https://api.github.com/users/athanatos64/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/athanatos64/subscriptions","organizations_url":"https://api.github.com/users/athanatos64/orgs","repos_url":"https://api.github.com/users/athanatos64/repos","events_url":"https://api.github.com/users/athanatos64/events{/privacy}","received_events_url":"https://api.github.com/users/athanatos64/received_events","type":"User","site_admin":false},"created_at":"2018-05-22T14:14:07Z","updated_at":"2018-05-22T14:14:07Z","author_association":"NONE","body":"I'm having the same problem as well. I though it maybe related to x-pack security since only a few users have the permissions to search remote clusters. If I'm not logged in and constantly searching remote indices, the connection timeouts.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/391007428","html_url":"https://github.com/elastic/elasticsearch/issues/30247#issuecomment-391007428","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30247","id":391007428,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTAwNzQyOA==","user":{"login":"asatsi","id":10648621,"node_id":"MDQ6VXNlcjEwNjQ4NjIx","avatar_url":"https://avatars0.githubusercontent.com/u/10648621?v=4","gravatar_id":"","url":"https://api.github.com/users/asatsi","html_url":"https://github.com/asatsi","followers_url":"https://api.github.com/users/asatsi/followers","following_url":"https://api.github.com/users/asatsi/following{/other_user}","gists_url":"https://api.github.com/users/asatsi/gists{/gist_id}","starred_url":"https://api.github.com/users/asatsi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asatsi/subscriptions","organizations_url":"https://api.github.com/users/asatsi/orgs","repos_url":"https://api.github.com/users/asatsi/repos","events_url":"https://api.github.com/users/asatsi/events{/privacy}","received_events_url":"https://api.github.com/users/asatsi/received_events","type":"User","site_admin":false},"created_at":"2018-05-22T14:17:58Z","updated_at":"2018-05-22T14:17:58Z","author_association":"NONE","body":"I had to to restart my cross elastic server whenever this happens. And it happens very frequently. I do not have shield or x-pack installed.\r\n\r\nSent from my iPhone\r\n\r\nOn 22-May-2018, at 7:45 PM, athanatos64 <notifications@github.com<mailto:notifications@github.com>> wrote:\r\n\r\n\r\nI'm having the same problem as well. I though it maybe related to x-pack security since only a few users have the permissions to search remote clusters. If I'm not logged in and constantly searching remote indices, the connection timeouts.\r\n\r\nâ€”\r\nYou are receiving this because you were mentioned.\r\nReply to this email directly, view it on GitHub<https://github.com/elastic/elasticsearch/issues/30247#issuecomment-391006074>, or mute the thread<https://github.com/notifications/unsubscribe-auth/AKJ8LWfTWjuaJMCsyyJCY2UhMhveZ0W3ks5t1B2RgaJpZM4TsOnH>.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/391018310","html_url":"https://github.com/elastic/elasticsearch/issues/30247#issuecomment-391018310","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30247","id":391018310,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTAxODMxMA==","user":{"login":"athanatos64","id":39525883,"node_id":"MDQ6VXNlcjM5NTI1ODgz","avatar_url":"https://avatars1.githubusercontent.com/u/39525883?v=4","gravatar_id":"","url":"https://api.github.com/users/athanatos64","html_url":"https://github.com/athanatos64","followers_url":"https://api.github.com/users/athanatos64/followers","following_url":"https://api.github.com/users/athanatos64/following{/other_user}","gists_url":"https://api.github.com/users/athanatos64/gists{/gist_id}","starred_url":"https://api.github.com/users/athanatos64/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/athanatos64/subscriptions","organizations_url":"https://api.github.com/users/athanatos64/orgs","repos_url":"https://api.github.com/users/athanatos64/repos","events_url":"https://api.github.com/users/athanatos64/events{/privacy}","received_events_url":"https://api.github.com/users/athanatos64/received_events","type":"User","site_admin":false},"created_at":"2018-05-22T14:47:22Z","updated_at":"2018-05-22T14:47:22Z","author_association":"NONE","body":"I usually have to do GET /_remote/info from Console and wait until I get connection restored back to search the remote cluster. Good to know that it's not X-pack related. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/406490605","html_url":"https://github.com/elastic/elasticsearch/issues/30247#issuecomment-406490605","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30247","id":406490605,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNjQ5MDYwNQ==","user":{"login":"asatsi","id":10648621,"node_id":"MDQ6VXNlcjEwNjQ4NjIx","avatar_url":"https://avatars0.githubusercontent.com/u/10648621?v=4","gravatar_id":"","url":"https://api.github.com/users/asatsi","html_url":"https://github.com/asatsi","followers_url":"https://api.github.com/users/asatsi/followers","following_url":"https://api.github.com/users/asatsi/following{/other_user}","gists_url":"https://api.github.com/users/asatsi/gists{/gist_id}","starred_url":"https://api.github.com/users/asatsi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asatsi/subscriptions","organizations_url":"https://api.github.com/users/asatsi/orgs","repos_url":"https://api.github.com/users/asatsi/repos","events_url":"https://api.github.com/users/asatsi/events{/privacy}","received_events_url":"https://api.github.com/users/asatsi/received_events","type":"User","site_admin":false},"created_at":"2018-07-20T05:09:34Z","updated_at":"2018-07-20T05:09:34Z","author_association":"NONE","body":"For now I am using two different kibana to point to the two clusters.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/419446732","html_url":"https://github.com/elastic/elasticsearch/issues/30247#issuecomment-419446732","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30247","id":419446732,"node_id":"MDEyOklzc3VlQ29tbWVudDQxOTQ0NjczMg==","user":{"login":"danfisk","id":24226674,"node_id":"MDQ6VXNlcjI0MjI2Njc0","avatar_url":"https://avatars3.githubusercontent.com/u/24226674?v=4","gravatar_id":"","url":"https://api.github.com/users/danfisk","html_url":"https://github.com/danfisk","followers_url":"https://api.github.com/users/danfisk/followers","following_url":"https://api.github.com/users/danfisk/following{/other_user}","gists_url":"https://api.github.com/users/danfisk/gists{/gist_id}","starred_url":"https://api.github.com/users/danfisk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danfisk/subscriptions","organizations_url":"https://api.github.com/users/danfisk/orgs","repos_url":"https://api.github.com/users/danfisk/repos","events_url":"https://api.github.com/users/danfisk/events{/privacy}","received_events_url":"https://api.github.com/users/danfisk/received_events","type":"User","site_admin":false},"created_at":"2018-09-07T13:54:24Z","updated_at":"2018-09-07T13:54:24Z","author_association":"NONE","body":"What is the default time out for 'transient:' ?  I have this working but do not use any kind of proxy server.  Also I setup the seeds as persistent:   In this way they are active until the next time the cluster is restarted.  If you want them to always stay active, place the seeds in he elasticsearch.yml","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/429177243","html_url":"https://github.com/elastic/elasticsearch/issues/30247#issuecomment-429177243","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30247","id":429177243,"node_id":"MDEyOklzc3VlQ29tbWVudDQyOTE3NzI0Mw==","user":{"login":"luxiaoxun","id":5926722,"node_id":"MDQ6VXNlcjU5MjY3MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/5926722?v=4","gravatar_id":"","url":"https://api.github.com/users/luxiaoxun","html_url":"https://github.com/luxiaoxun","followers_url":"https://api.github.com/users/luxiaoxun/followers","following_url":"https://api.github.com/users/luxiaoxun/following{/other_user}","gists_url":"https://api.github.com/users/luxiaoxun/gists{/gist_id}","starred_url":"https://api.github.com/users/luxiaoxun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luxiaoxun/subscriptions","organizations_url":"https://api.github.com/users/luxiaoxun/orgs","repos_url":"https://api.github.com/users/luxiaoxun/repos","events_url":"https://api.github.com/users/luxiaoxun/events{/privacy}","received_events_url":"https://api.github.com/users/luxiaoxun/received_events","type":"User","site_admin":false},"created_at":"2018-10-12T01:50:58Z","updated_at":"2018-10-12T01:50:58Z","author_association":"NONE","body":"@asatsi \r\nTry \"skip_unavailable\": \"true\" to see if this configuration helped.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/429394617","html_url":"https://github.com/elastic/elasticsearch/issues/30247#issuecomment-429394617","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30247","id":429394617,"node_id":"MDEyOklzc3VlQ29tbWVudDQyOTM5NDYxNw==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2018-10-12T17:06:31Z","updated_at":"2018-10-12T17:06:31Z","author_association":"MEMBER","body":"See #34405 , I believe the outlined solutions will help with this issue. Stay tuned for a fix. I am not sure that skip_unavailable helps as in some cases we are not quick enough detecting network disconnections and due to firewalls dropping connections in-between, we may have CCS searches hanging which is a problem regardless of the `skip_unavailable` setting value.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/441325297","html_url":"https://github.com/elastic/elasticsearch/issues/30247#issuecomment-441325297","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30247","id":441325297,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTMyNTI5Nw==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2018-11-23T22:30:30Z","updated_at":"2018-11-23T22:30:30Z","author_association":"MEMBER","body":"I am closing this issue in favor of #34405 . From 6.6 it will be possible to enable transport pings directed to remote clusters. We are also working on other improvements that should allow to better detect network issues and react, which are listed in the linked issue.","performed_via_github_app":null}]