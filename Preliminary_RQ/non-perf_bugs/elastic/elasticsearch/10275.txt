{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/10275","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10275/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10275/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10275/events","html_url":"https://github.com/elastic/elasticsearch/issues/10275","id":64479488,"node_id":"MDU6SXNzdWU2NDQ3OTQ4OA==","number":10275,"title":"Can not start ES after upgrade to 1.5.0","user":{"login":"cyberhuman","id":979624,"node_id":"MDQ6VXNlcjk3OTYyNA==","avatar_url":"https://avatars2.githubusercontent.com/u/979624?v=4","gravatar_id":"","url":"https://api.github.com/users/cyberhuman","html_url":"https://github.com/cyberhuman","followers_url":"https://api.github.com/users/cyberhuman/followers","following_url":"https://api.github.com/users/cyberhuman/following{/other_user}","gists_url":"https://api.github.com/users/cyberhuman/gists{/gist_id}","starred_url":"https://api.github.com/users/cyberhuman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cyberhuman/subscriptions","organizations_url":"https://api.github.com/users/cyberhuman/orgs","repos_url":"https://api.github.com/users/cyberhuman/repos","events_url":"https://api.github.com/users/cyberhuman/events{/privacy}","received_events_url":"https://api.github.com/users/cyberhuman/received_events","type":"User","site_admin":false},"labels":[{"id":73544,"node_id":"MDU6TGFiZWw3MzU0NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Enon-issue","name":">non-issue","color":"cfcfcf","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2015-03-26T09:29:10Z","updated_at":"2015-06-01T07:12:07Z","closed_at":"2015-03-26T10:23:43Z","author_association":"NONE","active_lock_reason":null,"body":"We had to revert to 1.4.4 because 1.5.0 won't start. What might be causing it?\n\n```\n[2015-03-26 08:40:36,558][INFO ][node                     ] [lepton001] version[1.5.0], pid[13791], build[5448160/2015-03-23T14:30:58Z]\n[2015-03-26 08:40:36,558][INFO ][node                     ] [lepton001] initializing ...\n[2015-03-26 08:40:36,624][ERROR][plugins                  ] [lepton001] cannot start plugin due to incorrect Lucene version: plugin [4.10.2], node [4.10.4].\n[2015-03-26 08:40:36,625][WARN ][plugins                  ] [lepton001] failed to load plugin from [jar:file:/usr/share/elasticsearch/plugins/experimental-highlighter-elasticsearch-plugin/experimental-highlighter-elasticsearch-plugin-1.4.1\n.jar!/es-plugin.properties]\norg.elasticsearch.ElasticsearchException: Failed to load plugin class [org.wikimedia.highlighter.experimental.elasticsearch.plugin.ExperimentalHighlighterPlugin]\n        at org.elasticsearch.plugins.PluginsService.loadPlugin(PluginsService.java:533)\n        at org.elasticsearch.plugins.PluginsService.loadPluginsFromClasspath(PluginsService.java:408)\n        at org.elasticsearch.plugins.PluginsService.<init>(PluginsService.java:116)\n        at org.elasticsearch.node.internal.InternalNode.<init>(InternalNode.java:152)\n        at org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:159)\n        at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:70)\n        at org.elasticsearch.bootstrap.Bootstrap.main(Bootstrap.java:213)\n        at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:32)\nCaused by: org.elasticsearch.ElasticsearchException: Plugin is incompatible with the current node\n        at org.elasticsearch.plugins.PluginsService.loadPlugin(PluginsService.java:526)\n        ... 7 more\n[2015-03-26 08:40:36,629][INFO ][plugins                  ] [lepton001] loaded [analysis-smartcn, analysis-kuromoji, marvel, analysis-combo, analysis-icu], sites [marvel, head, kopf, paramedic, HQ]\n[2015-03-26 08:40:37,451][ERROR][bootstrap                ] Exception\norg.elasticsearch.common.util.concurrent.ExecutionError: org.elasticsearch.common.util.concurrent.ExecutionError: java.lang.NoClassDefFoundError: Lorg/elasticsearch/indices/InternalIndicesService;\n        at org.elasticsearch.common.cache.LocalCache$Segment.get(LocalCache.java:2201)\n        at org.elasticsearch.common.cache.LocalCache.get(LocalCache.java:3937)\n        at org.elasticsearch.common.cache.LocalCache.getOrLoad(LocalCache.java:3941)\n        at org.elasticsearch.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:4824)\n        at org.elasticsearch.common.inject.internal.FailableCache.get(FailableCache.java:51)\n        at org.elasticsearch.common.inject.ConstructorInjectorStore.get(ConstructorInjectorStore.java:50)\n        at org.elasticsearch.common.inject.ConstructorBindingImpl.initialize(ConstructorBindingImpl.java:50)\n        at org.elasticsearch.common.inject.InjectorImpl.initializeBinding(InjectorImpl.java:372)\n        at org.elasticsearch.common.inject.BindingProcessor$1$1.run(BindingProcessor.java:148)\n        at org.elasticsearch.common.inject.BindingProcessor.initializeBindings(BindingProcessor.java:204)\n        at org.elasticsearch.common.inject.InjectorBuilder.initializeStatically(InjectorBuilder.java:119)\n        at org.elasticsearch.common.inject.InjectorBuilder.build(InjectorBuilder.java:102)\n        at org.elasticsearch.common.inject.Guice.createInjector(Guice.java:93)\n        at org.elasticsearch.common.inject.Guice.createInjector(Guice.java:70)\n        at org.elasticsearch.common.inject.ModulesBuilder.createInjector(ModulesBuilder.java:59)\n        at org.elasticsearch.node.internal.InternalNode.<init>(InternalNode.java:203)\n        at org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:159)\n        at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:70)\n        at org.elasticsearch.bootstrap.Bootstrap.main(Bootstrap.java:213)\n        at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:32)\nCaused by: org.elasticsearch.common.util.concurrent.ExecutionError: java.lang.NoClassDefFoundError: Lorg/elasticsearch/indices/InternalIndicesService;\n        at org.elasticsearch.common.cache.LocalCache$Segment.get(LocalCache.java:2201)\n        at org.elasticsearch.common.cache.LocalCache.get(LocalCache.java:3937)\n        at org.elasticsearch.common.cache.LocalCache.getOrLoad(LocalCache.java:3941)\n        at org.elasticsearch.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:4824)\n        at org.elasticsearch.common.inject.internal.FailableCache.get(FailableCache.java:51)\n        at org.elasticsearch.common.inject.MembersInjectorStore.get(MembersInjectorStore.java:68)\n        at org.elasticsearch.common.inject.ConstructorInjectorStore.createConstructor(ConstructorInjectorStore.java:67)\n        at org.elasticsearch.common.inject.ConstructorInjectorStore.access$000(ConstructorInjectorStore.java:29)\n        at org.elasticsearch.common.inject.ConstructorInjectorStore$1.create(ConstructorInjectorStore.java:37)\n        at org.elasticsearch.common.inject.ConstructorInjectorStore$1.create(ConstructorInjectorStore.java:33)\n        at org.elasticsearch.common.inject.internal.FailableCache$1.load(FailableCache.java:39)\n        at org.elasticsearch.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3527)\n        at org.elasticsearch.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2319)\n        at org.elasticsearch.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2282)\n        at org.elasticsearch.common.cache.LocalCache$Segment.get(LocalCache.java:2197)\n        ... 19 more\nCaused by: java.lang.NoClassDefFoundError: Lorg/elasticsearch/indices/InternalIndicesService;\n        at java.lang.Class.getDeclaredFields0(Native Method)\n        at java.lang.Class.privateGetDeclaredFields(Class.java:2499)\n        at java.lang.Class.getDeclaredFields(Class.java:1811)\n        at org.elasticsearch.common.inject.spi.InjectionPoint$Factory$1.getMembers(InjectionPoint.java:378)\n        at org.elasticsearch.common.inject.spi.InjectionPoint$Factory$1.getMembers(InjectionPoint.java:376)\n        at org.elasticsearch.common.inject.spi.InjectionPoint.addInjectorsForMembers(InjectionPoint.java:351)\n        at org.elasticsearch.common.inject.spi.InjectionPoint.addInjectionPoints(InjectionPoint.java:345)\n        at org.elasticsearch.common.inject.spi.InjectionPoint.forInstanceMethodsAndFields(InjectionPoint.java:287)\n        at org.elasticsearch.common.inject.MembersInjectorStore.createWithListeners(MembersInjectorStore.java:80)\n        at org.elasticsearch.common.inject.MembersInjectorStore.access$000(MembersInjectorStore.java:36)\n        at org.elasticsearch.common.inject.MembersInjectorStore$1.create(MembersInjectorStore.java:45)\n        at org.elasticsearch.common.inject.MembersInjectorStore$1.create(MembersInjectorStore.java:41)\n        at org.elasticsearch.common.inject.internal.FailableCache$1.load(FailableCache.java:39)\n        at org.elasticsearch.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3527)\n        at org.elasticsearch.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2319)\n        at org.elasticsearch.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2282)\n        at org.elasticsearch.common.cache.LocalCache$Segment.get(LocalCache.java:2197)\n        ... 33 more\nCaused by: java.lang.ClassNotFoundException: org.elasticsearch.indices.InternalIndicesService\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:425)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:358)\n        ... 50 more\n```\n\nES is installed from the debian repo:\n\n```\n$ apt-cache policy elasticsearch\nelasticsearch:\n  Installed: 1.5.0\n  Candidate: 1.5.0\n  Version table:\n *** 1.5.0 0\n        990 http://packages.elasticsearch.org/elasticsearch/1.5/debian/ stable/main amd64 Packages\n        100 /var/lib/dpkg/status\n     1.0.3+dfsg-5 0\n        500 http://debian.mirrors.ovh.net/debian/ jessie/main amd64 Packages\n```\n\nWe are using Java7 from Oracle:\n\n```\njava version \"1.7.0_76\"\nJava(TM) SE Runtime Environment (build 1.7.0_76-b13)\nJava HotSpot(TM) 64-Bit Server VM (build 24.76-b04, mixed mode)\n```\n\nLet me know if more information is needed.\nThanks.\n","closed_by":{"login":"cyberhuman","id":979624,"node_id":"MDQ6VXNlcjk3OTYyNA==","avatar_url":"https://avatars2.githubusercontent.com/u/979624?v=4","gravatar_id":"","url":"https://api.github.com/users/cyberhuman","html_url":"https://github.com/cyberhuman","followers_url":"https://api.github.com/users/cyberhuman/followers","following_url":"https://api.github.com/users/cyberhuman/following{/other_user}","gists_url":"https://api.github.com/users/cyberhuman/gists{/gist_id}","starred_url":"https://api.github.com/users/cyberhuman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cyberhuman/subscriptions","organizations_url":"https://api.github.com/users/cyberhuman/orgs","repos_url":"https://api.github.com/users/cyberhuman/repos","events_url":"https://api.github.com/users/cyberhuman/events{/privacy}","received_events_url":"https://api.github.com/users/cyberhuman/received_events","type":"User","site_admin":false},"performed_via_github_app":null}