[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/331020306","html_url":"https://github.com/elastic/elasticsearch/issues/26729#issuecomment-331020306","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26729","id":331020306,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTAyMDMwNg==","user":{"login":"mattweber","id":173955,"node_id":"MDQ6VXNlcjE3Mzk1NQ==","avatar_url":"https://avatars3.githubusercontent.com/u/173955?v=4","gravatar_id":"","url":"https://api.github.com/users/mattweber","html_url":"https://github.com/mattweber","followers_url":"https://api.github.com/users/mattweber/followers","following_url":"https://api.github.com/users/mattweber/following{/other_user}","gists_url":"https://api.github.com/users/mattweber/gists{/gist_id}","starred_url":"https://api.github.com/users/mattweber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattweber/subscriptions","organizations_url":"https://api.github.com/users/mattweber/orgs","repos_url":"https://api.github.com/users/mattweber/repos","events_url":"https://api.github.com/users/mattweber/events{/privacy}","received_events_url":"https://api.github.com/users/mattweber/received_events","type":"User","site_admin":false},"created_at":"2017-09-21T00:52:33Z","updated_at":"2017-09-21T00:52:33Z","author_association":"CONTRIBUTOR","body":"Have you seen https://www.elastic.co/guide/en/elasticsearch/plugins/current/analysis-icu-collation-keyword-field.html?  Introduced in 5.5.0 with a bug fix for multi-value fields in 5.6.0.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/331023031","html_url":"https://github.com/elastic/elasticsearch/issues/26729#issuecomment-331023031","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26729","id":331023031,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTAyMzAzMQ==","user":{"login":"edudar","id":584181,"node_id":"MDQ6VXNlcjU4NDE4MQ==","avatar_url":"https://avatars0.githubusercontent.com/u/584181?v=4","gravatar_id":"","url":"https://api.github.com/users/edudar","html_url":"https://github.com/edudar","followers_url":"https://api.github.com/users/edudar/followers","following_url":"https://api.github.com/users/edudar/following{/other_user}","gists_url":"https://api.github.com/users/edudar/gists{/gist_id}","starred_url":"https://api.github.com/users/edudar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edudar/subscriptions","organizations_url":"https://api.github.com/users/edudar/orgs","repos_url":"https://api.github.com/users/edudar/repos","events_url":"https://api.github.com/users/edudar/events{/privacy}","received_events_url":"https://api.github.com/users/edudar/received_events","type":"User","site_admin":false},"created_at":"2017-09-21T01:13:50Z","updated_at":"2017-09-21T01:13:50Z","author_association":"NONE","body":"No, I haven't (...migrating from 1.7 so tons of changes...). A little more cumbersome but more powerful, I can use it instead, I guess. Doesn't it actually close #13148 then?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/331218592","html_url":"https://github.com/elastic/elasticsearch/issues/26729#issuecomment-331218592","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26729","id":331218592,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTIxODU5Mg==","user":{"login":"mattweber","id":173955,"node_id":"MDQ6VXNlcjE3Mzk1NQ==","avatar_url":"https://avatars3.githubusercontent.com/u/173955?v=4","gravatar_id":"","url":"https://api.github.com/users/mattweber","html_url":"https://github.com/mattweber","followers_url":"https://api.github.com/users/mattweber/followers","following_url":"https://api.github.com/users/mattweber/following{/other_user}","gists_url":"https://api.github.com/users/mattweber/gists{/gist_id}","starred_url":"https://api.github.com/users/mattweber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattweber/subscriptions","organizations_url":"https://api.github.com/users/mattweber/orgs","repos_url":"https://api.github.com/users/mattweber/repos","events_url":"https://api.github.com/users/mattweber/events{/privacy}","received_events_url":"https://api.github.com/users/mattweber/received_events","type":"User","site_admin":false},"created_at":"2017-09-21T16:59:27Z","updated_at":"2017-09-21T16:59:27Z","author_association":"CONTRIBUTOR","body":"Yes, it should be closed and I have asked that they do so.  You should close this and ask future questions in the [elasticsearch forums](https://discuss.elastic.co/c/elasticsearch) as it will get much more attention there.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/331240313","html_url":"https://github.com/elastic/elasticsearch/issues/26729#issuecomment-331240313","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26729","id":331240313,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTI0MDMxMw==","user":{"login":"edudar","id":584181,"node_id":"MDQ6VXNlcjU4NDE4MQ==","avatar_url":"https://avatars0.githubusercontent.com/u/584181?v=4","gravatar_id":"","url":"https://api.github.com/users/edudar","html_url":"https://github.com/edudar","followers_url":"https://api.github.com/users/edudar/followers","following_url":"https://api.github.com/users/edudar/following{/other_user}","gists_url":"https://api.github.com/users/edudar/gists{/gist_id}","starred_url":"https://api.github.com/users/edudar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edudar/subscriptions","organizations_url":"https://api.github.com/users/edudar/orgs","repos_url":"https://api.github.com/users/edudar/repos","events_url":"https://api.github.com/users/edudar/events{/privacy}","received_events_url":"https://api.github.com/users/edudar/received_events","type":"User","site_admin":false},"created_at":"2017-09-21T18:21:14Z","updated_at":"2017-09-21T18:21:14Z","author_association":"NONE","body":"Thank you. This ticket is here because of opened #13148 and because I have not found a good reason why this filter can't be used in normalizer. Also, my experience with using forum was completely opposite so far, unfortunately.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/364665703","html_url":"https://github.com/elastic/elasticsearch/issues/26729#issuecomment-364665703","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26729","id":364665703,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDY2NTcwMw==","user":{"login":"mwjames","id":1245473,"node_id":"MDQ6VXNlcjEyNDU0NzM=","avatar_url":"https://avatars1.githubusercontent.com/u/1245473?v=4","gravatar_id":"","url":"https://api.github.com/users/mwjames","html_url":"https://github.com/mwjames","followers_url":"https://api.github.com/users/mwjames/followers","following_url":"https://api.github.com/users/mwjames/following{/other_user}","gists_url":"https://api.github.com/users/mwjames/gists{/gist_id}","starred_url":"https://api.github.com/users/mwjames/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mwjames/subscriptions","organizations_url":"https://api.github.com/users/mwjames/orgs","repos_url":"https://api.github.com/users/mwjames/repos","events_url":"https://api.github.com/users/mwjames/events{/privacy}","received_events_url":"https://api.github.com/users/mwjames/received_events","type":"User","site_admin":false},"created_at":"2018-02-10T16:06:33Z","updated_at":"2018-02-10T16:06:33Z","author_association":"NONE","body":"Only after an intense search and a misleading sorting collations document [0], I found:\r\n\r\n> Have you seen https://www.elastic.co/guide/en/elasticsearch/plugins/current/analysis-icu-collation-keyword-field.html? Introduced in 5.5.0 with a bug fix for multi-value fields in 5.6.0.\r\n\r\nUsing `icu_collation_keyword` does work (on 5.6 and 6.1) but since one is not allowed to attach a `normalizer` or `analyzer`, one cannot apply a char filter which leaves the sort field unprocessed and in worst cases sorts by a html element.\r\n\r\nNon ICU sort:\r\n```\r\n\"normalizer\": {\r\n\t\"standard_sort_normalizer\": {\r\n\t\t\"type\": \"custom\",\r\n\t\t\"char_filter\": [ \"html_strip\", \"sort_char_filter\" ]\r\n\t},\r\n```\r\n\r\n```\r\n\"fields\": {\r\n\t\"sort\": {\r\n\t\t\"type\": \"keyword\",\r\n\t\t\"normalizer\": \"standard_sort_normalizer\",\r\n\t\t\"index\": false\r\n\t}\r\n```\r\n\r\nICU sort:\r\n\r\n```\r\n\"fields\": {\r\n\t\"sort\": {\r\n\t\t\"type\": \"icu_collation_keyword\",\r\n\t\t\"index\": false\r\n\t},\r\n```\r\n\r\nTrying to add a normalizer (since it is suppose to be a `keyword` field) fails with:\r\n\r\n```\r\norg.elasticsearch.index.mapper.MapperParsingException: Mapping definition for [fields] has unsupported parameters:  [normalizer : standard_sort_normalizer]\r\n```\r\n\r\nUnless I missed an option, how does one apply a char filter on a `icu_collation_keyword` sort field?\r\n\r\n[0] https://www.elastic.co/guide/en/elasticsearch/guide/master/sorting-collations.html#uca","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/364805805","html_url":"https://github.com/elastic/elasticsearch/issues/26729#issuecomment-364805805","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26729","id":364805805,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDgwNTgwNQ==","user":{"login":"edudar","id":584181,"node_id":"MDQ6VXNlcjU4NDE4MQ==","avatar_url":"https://avatars0.githubusercontent.com/u/584181?v=4","gravatar_id":"","url":"https://api.github.com/users/edudar","html_url":"https://github.com/edudar","followers_url":"https://api.github.com/users/edudar/followers","following_url":"https://api.github.com/users/edudar/following{/other_user}","gists_url":"https://api.github.com/users/edudar/gists{/gist_id}","starred_url":"https://api.github.com/users/edudar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edudar/subscriptions","organizations_url":"https://api.github.com/users/edudar/orgs","repos_url":"https://api.github.com/users/edudar/repos","events_url":"https://api.github.com/users/edudar/events{/privacy}","received_events_url":"https://api.github.com/users/edudar/received_events","type":"User","site_admin":false},"created_at":"2018-02-12T00:31:37Z","updated_at":"2018-02-12T00:31:37Z","author_association":"NONE","body":"This totally makes sense and even while I didn’t need to normalize fields in my case I agree that it should be possible. With all of that, I don’t know why it was implemented as it’s own type instead of a filter as it was before. Flexibility is seriously reduced with the way it works now.","performed_via_github_app":null}]