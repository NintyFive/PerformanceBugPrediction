{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/11229","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11229/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11229/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11229/events","html_url":"https://github.com/elastic/elasticsearch/issues/11229","id":78135024,"node_id":"MDU6SXNzdWU3ODEzNTAyNA==","number":11229,"title":"Endpoint to trigger loading shard info","user":{"login":"ywelsch-t","id":8446609,"node_id":"MDQ6VXNlcjg0NDY2MDk=","avatar_url":"https://avatars0.githubusercontent.com/u/8446609?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch-t","html_url":"https://github.com/ywelsch-t","followers_url":"https://api.github.com/users/ywelsch-t/followers","following_url":"https://api.github.com/users/ywelsch-t/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch-t/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch-t/subscriptions","organizations_url":"https://api.github.com/users/ywelsch-t/orgs","repos_url":"https://api.github.com/users/ywelsch-t/repos","events_url":"https://api.github.com/users/ywelsch-t/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch-t/received_events","type":"User","site_admin":false},"labels":[{"id":836504707,"node_id":"MDU6TGFiZWw4MzY1MDQ3MDc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Distributed","name":":Distributed/Distributed","color":"0e8a16","default":false,"description":"A catch all label for anything in the Distributed Area. If you aren't sure, use this one."},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2015-05-19T15:28:21Z","updated_at":"2018-02-13T19:57:00Z","closed_at":"2016-01-19T08:29:16Z","author_association":"NONE","active_lock_reason":null,"body":"Feature suggestion that complements #9502 #11101\n\nLoading shard info during startup of a cluster can be quite slow. PR #11101 addresses one of the pain points by parallelizing the requests for loading shard state info. Still, data needs to be read from disk to compute checksums. Pre-warming the file system cache can dramatically speed this up.\n\nI suggest an endpoint to load shard info that can be manually triggered before doing a full restart of a cluster (e.g. before upgrading). Depending on FS cache usage, the endpoint could also be regularly triggered (which would help in case of an unexpected master node failure).\n\nA test on our production cluster (ES 1.4.5) shows that it takes approx. 3 minutes to load shard stores / states on one of the largest nodes with magnetic disk. With a warmed-up FS cache it takes only 3 seconds.\n","closed_by":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"performed_via_github_app":null}