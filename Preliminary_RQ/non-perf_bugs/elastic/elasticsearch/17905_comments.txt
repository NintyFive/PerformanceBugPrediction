[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/222107720","html_url":"https://github.com/elastic/elasticsearch/issues/17905#issuecomment-222107720","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17905","id":222107720,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMjEwNzcyMA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-05-27T09:56:14Z","updated_at":"2016-05-27T09:56:14Z","author_association":"CONTRIBUTOR","body":"I think this looks more like a bug, we need to investigate this further... removing discuss label. @tlrx will take a look \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/222189460","html_url":"https://github.com/elastic/elasticsearch/issues/17905#issuecomment-222189460","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17905","id":222189460,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMjE4OTQ2MA==","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2016-05-27T16:17:04Z","updated_at":"2016-05-27T16:17:04Z","author_association":"MEMBER","body":"Thanks for reporting @radu-gheorghe. Maybe I'm missing something but I just tested this and everything looks fine to me. Note that HTTP address has been added to the _cat/nodes API since 5.0.0-alpha1 (#16770).\n\nHere's my test on 5.0.0-alpha1:\n\n**Start node-0 in cluster-0 (port 9600)**\n\n```\nbin/elasticsearch -E es.cluster.name=cluster-0 -E es.node.name=node-0 -E es.http.port=9600 -E es.transport.tcp.port=9601\n```\n\n_cat/nodes ouput looks ok:\n\n```\ncurl -XGET 'http://localhost:9600/_cat/nodes?pretty&v&h=id,name,ip,port,http'            \nid   name     ip        port http\n_ha0 node-0   127.0.0.1 9601 127.0.0.1:9600\n```\n\n**Start node-1 in cluster-1 (port 9700)**\n\n```\nbin/elasticsearch -E es.cluster.name=cluster-1 -E es.node.name=node-1 -E es.http.port=9700 -E es.transport.tcp.port=9701\n```\n\n_cat/nodes ouput looks ok:\n\n```\ncurl -XGET 'http://localhost:9700/_cat/nodes?pretty&v&h=id,name,ip,port,http'\nid   name     ip        port http\nX9cI node-1   127.0.0.1 9701 127.0.0.1:9700\n```\n\n**Start tribe node on default port range**\n\n```\nbin/elasticsearch -E es.cluster.name=cluster-tribe -E es.node.name=tribe -E es.tribe.c0.cluster.name=cluster-0 -E es.tribe.c0.discovery.zen.ping.unicast.hosts=\"127.0.0.1:9601\" -E es.tribe.c1.cluster.name=cluster-1 -E es.tribe.c1.discovery.zen.ping.unicast.hosts=\"127.0.0.1:9701\"\n```\n\nWhen requesting _cat/nodes on the tribe node, it correctly reports the tribe node, the tribe client nodes (tribe/c0 & tribe/c1) and the node-0 and node-1 too with their respective HTTP addresses:\n\n```\ncurl -XGET 'http://localhost:9200/_cat/nodes?pretty&v&h=id,name,ip,port,http'\nid   name     ip        port http\nX9cI node-1   127.0.0.1 9701 127.0.0.1:9700\ng1k3 tribe/c0 127.0.0.1 9301 -\n_ha0 node-0   127.0.0.1 9601 127.0.0.1:9600\nci5d tribe/c1 127.0.0.1 9302 -\nT2-k tribe    127.0.0.1 9300 127.0.0.1:9200\n```\n\nSame thing with the Nodes Info API on the tribe node:\n\n```\ncurl -XGET 'http://localhost:9200/_nodes?pretty&filter_path=nodes.*.http*,nodes.*.version'\n{\n  \"nodes\" : {\n    \"_ha0UOorR66vazp-BUw3kg\" : {\n      \"version\" : \"5.0.0-alpha1\",\n      \"http_address\" : \"127.0.0.1:9600\",\n      \"http\" : {\n        \"bound_address\" : [ \"[::1]:9600\", \"127.0.0.1:9600\" ],\n        \"publish_address\" : \"127.0.0.1:9600\",\n        \"max_content_length_in_bytes\" : 104857600\n      }\n    },\n    \"g1k3oBYERDu5Mu4chi1L4w\" : {\n      \"version\" : \"5.0.0-alpha1\"\n    },\n    \"T2-knUQnT32eaFXH8_gJ-A\" : {\n      \"version\" : \"5.0.0-alpha1\",\n      \"http_address\" : \"127.0.0.1:9200\",\n      \"http\" : {\n        \"bound_address\" : [ \"[::1]:9200\", \"127.0.0.1:9200\" ],\n        \"publish_address\" : \"127.0.0.1:9200\",\n        \"max_content_length_in_bytes\" : 104857600\n      }\n    },\n    \"X9cI2S3PRByVHtuZ88W06w\" : {\n      \"version\" : \"5.0.0-alpha1\",\n      \"http_address\" : \"127.0.0.1:9700\",\n      \"http\" : {\n        \"bound_address\" : [ \"[::1]:9700\", \"127.0.0.1:9700\" ],\n        \"publish_address\" : \"127.0.0.1:9700\",\n        \"max_content_length_in_bytes\" : 104857600\n      }\n    },\n    \"ci5dgIniQfSx99yheSb03g\" : {\n      \"version\" : \"5.0.0-alpha1\"\n    }\n  }\n}\n```\n\nIn the previous output there are no HTTP addresses for tribe clients nodes like tribe/c0 because they are client nodes connected to the remote cluster and don't expose any HTTP service. This is how tribe nodes work: it instantiates a single node (named **tribe** in my example) that starts multiple tribe nodes, each of them is a client node connected to a remote cluster (tribe/c0 and tribe/c1).\n\nWhen queried directly, the nodes of the remote clusters (node-0 and node-1 in my example) will only report the tribe client nodes connected to their respective cluster (tribe/c0 and tribe/c1). These nodes don't really know about the node called **tribe** that expose a global view of multiple clusters.\n\nOn 2.3.5 or 1.7.5, the Nodes Info API provides the HTTP address (just be sure to hit the tribe node):\n\n```\ncurl -XGET 'http://localhost:9200/_nodes/_local?pretty&filter_path=nodes.*.http_address,nodes.*.name,nodes.*.version'\n\n{\n  \"nodes\" : {\n    \"tDk2qwCOQzqbROzMgpy8VQ\" : {\n      \"name\" : \"tribe\",\n      \"version\" : \"2.3.1\",\n      \"http_address\" : \"127.0.0.1:9200\"\n    }\n  }\n}\n```\n\nI hope it helps. I'm closing this issue but feel free to reopen if needed!\n","performed_via_github_app":null}]