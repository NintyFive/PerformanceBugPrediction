{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/43123","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43123/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43123/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43123/events","html_url":"https://github.com/elastic/elasticsearch/issues/43123","id":454902346,"node_id":"MDU6SXNzdWU0NTQ5MDIzNDY=","number":43123,"title":"[CI] Possible race condition in DataFrameUsageIT.testUsage","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"labels":[{"id":1272783040,"node_id":"MDU6TGFiZWwxMjcyNzgzMDQw","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:ml/Transform","name":":ml/Transform","color":"0e8a16","default":false,"description":"Transform"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"benwtrent","id":4357155,"node_id":"MDQ6VXNlcjQzNTcxNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/4357155?v=4","gravatar_id":"","url":"https://api.github.com/users/benwtrent","html_url":"https://github.com/benwtrent","followers_url":"https://api.github.com/users/benwtrent/followers","following_url":"https://api.github.com/users/benwtrent/following{/other_user}","gists_url":"https://api.github.com/users/benwtrent/gists{/gist_id}","starred_url":"https://api.github.com/users/benwtrent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benwtrent/subscriptions","organizations_url":"https://api.github.com/users/benwtrent/orgs","repos_url":"https://api.github.com/users/benwtrent/repos","events_url":"https://api.github.com/users/benwtrent/events{/privacy}","received_events_url":"https://api.github.com/users/benwtrent/received_events","type":"User","site_admin":false},"assignees":[{"login":"benwtrent","id":4357155,"node_id":"MDQ6VXNlcjQzNTcxNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/4357155?v=4","gravatar_id":"","url":"https://api.github.com/users/benwtrent","html_url":"https://github.com/benwtrent","followers_url":"https://api.github.com/users/benwtrent/followers","following_url":"https://api.github.com/users/benwtrent/following{/other_user}","gists_url":"https://api.github.com/users/benwtrent/gists{/gist_id}","starred_url":"https://api.github.com/users/benwtrent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benwtrent/subscriptions","organizations_url":"https://api.github.com/users/benwtrent/orgs","repos_url":"https://api.github.com/users/benwtrent/repos","events_url":"https://api.github.com/users/benwtrent/events{/privacy}","received_events_url":"https://api.github.com/users/benwtrent/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2019-06-11T21:02:28Z","updated_at":"2019-06-20T18:43:24Z","closed_at":"2019-06-20T18:43:24Z","author_association":"MEMBER","active_lock_reason":null,"body":"This just failed on my CI machine. I cannot reproduce it locally and I don't see any failures in CI (at least not yet). My branch included #42955 as the last commit, so it might be related.\r\n\r\n```\r\n[2019-06-11T19:01:28.403Z] > Task :x-pack:plugin:data-frame:qa:single-node-tests:integTestRunner\r\n[2019-06-11T19:01:38.278Z] \r\n[2019-06-11T19:01:38.278Z] \r\n[2019-06-11T19:01:38.278Z] org.elasticsearch.xpack.dataframe.integration.DataFrameUsageIT > testUsage FAILED\r\n[2019-06-11T19:01:38.278Z]     java.lang.AssertionError: expected:<3> but was:<2>\r\n[2019-06-11T19:01:38.278Z]         at __randomizedtesting.SeedInfo.seed([E01CEC1BF84E8E22:5CBB70CF443256AB]:0)\r\n[2019-06-11T19:01:38.278Z]         at org.junit.Assert.fail(Assert.java:88)\r\n[2019-06-11T19:01:38.278Z]         at org.junit.Assert.failNotEquals(Assert.java:834)\r\n[2019-06-11T19:01:38.278Z]         at org.junit.Assert.assertEquals(Assert.java:118)\r\n[2019-06-11T19:01:38.278Z]         at org.junit.Assert.assertEquals(Assert.java:144)\r\n[2019-06-11T19:01:38.278Z]         at org.elasticsearch.xpack.dataframe.integration.DataFrameUsageIT.testUsage(DataFrameUsageIT.java:109)\r\n[2019-06-11T19:01:38.278Z] REPRODUCE WITH: ./gradlew :x-pack:plugin:data-frame:qa:single-node-tests:integTestRunner --tests \"org.elasticsearch.xpack.dataframe.integration.DataFrameUsageIT.testUsage\" -Dtests.seed=E01CEC1BF84E8E22 -Dtests.security.manager=true -Dtests.locale=tg -Dtests.timezone=BST -Dcompiler.java=12 -Druntime.java=12\r\n[2019-06-11T19:01:38.278Z] \r\n[2019-06-11T19:01:38.278Z] Suite: Test class org.elasticsearch.xpack.dataframe.integration.DataFrameUsageIT\r\n[2019-06-11T19:01:38.278Z]   1> [2019-06-12T01:01:31,333][INFO ][o.e.x.d.i.DataFrameUsageIT] [testUsage] before test\r\n[2019-06-11T19:01:38.278Z]   1> [2019-06-12T01:01:31,337][INFO ][o.e.x.d.i.DataFrameUsageIT] [testUsage] initializing REST clients against [http://127.0.0.1:34183]\r\n[2019-06-11T19:01:38.278Z]   1> [2019-06-12T01:01:37,256][INFO ][o.e.x.d.i.DataFrameUsageIT] [testUsage] after test\r\n[2019-06-11T19:01:38.278Z]   2> REPRODUCE WITH: ./gradlew :x-pack:plugin:data-frame:qa:single-node-tests:integTestRunner --tests \"org.elasticsearch.xpack.dataframe.integration.DataFrameUsageIT.testUsage\" -Dtests.seed=E01CEC1BF84E8E22 -Dtests.security.manager=true -Dtests.locale=tg -Dtests.timezone=BST -Dcompiler.java=12 -Druntime.java=12\r\n[2019-06-11T19:01:38.278Z]   2> java.lang.AssertionError: expected:<3> but was:<2>\r\n[2019-06-11T19:01:38.278Z]         at __randomizedtesting.SeedInfo.seed([E01CEC1BF84E8E22:5CBB70CF443256AB]:0)\r\n[2019-06-11T19:01:38.278Z]         at org.junit.Assert.fail(Assert.java:88)\r\n[2019-06-11T19:01:38.278Z]         at org.junit.Assert.failNotEquals(Assert.java:834)\r\n[2019-06-11T19:01:38.278Z]         at org.junit.Assert.assertEquals(Assert.java:118)\r\n[2019-06-11T19:01:38.278Z]         at org.junit.Assert.assertEquals(Assert.java:144)\r\n[2019-06-11T19:01:38.278Z]         at org.elasticsearch.xpack.dataframe.integration.DataFrameUsageIT.testUsage(DataFrameUsageIT.java:109)\r\n[2019-06-11T19:01:38.278Z]   2> NOTE: leaving temporary files on disk at: /var/jenkins_home/jobs/elasticsearch-pipeline/workspace/elasticsearch/x-pack/plugin/data-frame/qa/single-node-tests/build/testrun/integTestRunner/temp/org.elasticsearch.xpack.dataframe.integration.DataFrameUsageIT_E01CEC1BF84E8E22-001\r\n[2019-06-11T19:01:38.278Z]   2> NOTE: test params are: codec=Asserting(Lucene80): {}, docValues:{}, maxPointsInLeafNode=802, maxMBSortInHeap=6.069203619856608, sim=Asserting(org.apache.lucene.search.similarities.AssertingSimilarity@4adcda37), locale=tg, timezone=BST\r\n[2019-06-11T19:01:38.278Z]   2> NOTE: Linux 5.1.6-200.fc29.x86_64 amd64/Oracle Corporation 12 (64-bit)/cpus=8,threads=1,free=389501872,total=536870912\r\n[2019-06-11T19:01:38.278Z]   2> NOTE: All tests run in this JVM: [DataFrameGetAndGetStatsIT, DataFrameTaskFailedStateIT, DataFrameAuditorIT, DataFrameTransformProgressIT, DataFrameUsageIT]\r\n[2019-06-11T19:02:10.204Z] \r\n[2019-06-11T19:02:10.204Z] 21 tests completed, 1 failed, 1 skipped\r\n[2019-06-11T19:02:10.204Z] \r\n[2019-06-11T19:02:10.204Z] Tests with failures:\r\n[2019-06-11T19:02:10.204Z]  - org.elasticsearch.xpack.dataframe.integration.DataFrameUsageIT.testUsage\r\n```","closed_by":{"login":"benwtrent","id":4357155,"node_id":"MDQ6VXNlcjQzNTcxNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/4357155?v=4","gravatar_id":"","url":"https://api.github.com/users/benwtrent","html_url":"https://github.com/benwtrent","followers_url":"https://api.github.com/users/benwtrent/followers","following_url":"https://api.github.com/users/benwtrent/following{/other_user}","gists_url":"https://api.github.com/users/benwtrent/gists{/gist_id}","starred_url":"https://api.github.com/users/benwtrent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benwtrent/subscriptions","organizations_url":"https://api.github.com/users/benwtrent/orgs","repos_url":"https://api.github.com/users/benwtrent/repos","events_url":"https://api.github.com/users/benwtrent/events{/privacy}","received_events_url":"https://api.github.com/users/benwtrent/received_events","type":"User","site_admin":false},"performed_via_github_app":null}