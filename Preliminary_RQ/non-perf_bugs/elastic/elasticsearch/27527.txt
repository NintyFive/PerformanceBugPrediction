{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/27527","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27527/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27527/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27527/events","html_url":"https://github.com/elastic/elasticsearch/issues/27527","id":276766345,"node_id":"MDU6SXNzdWUyNzY3NjYzNDU=","number":27527,"title":"Publish analysis-common artifact so we can use it in IT tests","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"labels":[{"id":106454670,"node_id":"MDU6TGFiZWwxMDY0NTQ2NzA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Build","name":":Delivery/Build","color":"0e8a16","default":false,"description":"Build or test infrastructure"},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2017-11-25T17:50:50Z","updated_at":"2020-11-11T21:42:16Z","closed_at":"2018-02-26T15:15:32Z","author_association":"MEMBER","active_lock_reason":null,"body":"I'm trying to test a plugin I'm building.\r\n\r\nI'm using Maven for this plugin.\r\nI extended `ESIntegTestCase` class but sadly it starts without `analysis-common` module:\r\n\r\n```\r\n[2017-11-25T12:36:47,259][INFO ][o.e.n.Node               ] [node_s0] initializing ...\r\n[2017-11-25T12:36:47,373][INFO ][o.e.e.NodeEnvironment    ] [node_s0] using [1] data paths, mounts [[/ (/dev/disk1s1)]], net usable_space [22.1gb], net total_space [465.7gb], types [apfs]\r\n[2017-11-25T12:36:47,374][INFO ][o.e.e.NodeEnvironment    ] [node_s0] heap size [3.5gb], compressed ordinary object pointers [true]\r\n[2017-11-25T12:36:47,377][INFO ][o.e.n.Node               ] [node_s0] node name [node_s0], node ID [84Pux-9MTW670nXUXicXWw]\r\n[2017-11-25T12:36:47,378][INFO ][o.e.n.Node               ] [node_s0] version[6.0.0], pid[82221], build[8f0685b/2017-11-10T18:41:22.859Z], OS[Mac OS X/10.13.1/x86_64], JVM[Oracle Corporation/Java HotSpot(TM) 64-Bit Server VM/1.8.0_121/25.121-b13]\r\n[2017-11-25T12:36:47,378][INFO ][o.e.n.Node               ] [node_s0] JVM arguments [-ea, -Didea.no.launcher=true, -Des.set.netty.runtime.available.processors=false, -Didea.test.cyclic.buffer.size=1048576, -Dfile.encoding=UTF-8]\r\n[2017-11-25T12:36:47,381][INFO ][o.e.p.PluginsService     ] [node_s0] no modules loaded\r\n[2017-11-25T12:36:47,381][INFO ][o.e.p.PluginsService     ] [node_s0] loaded plugin [org.elasticsearch.index.MockEngineFactoryPlugin]\r\n[2017-11-25T12:36:47,381][INFO ][o.e.p.PluginsService     ] [node_s0] loaded plugin [org.elasticsearch.ingest.bano.IngestBanoPlugin]\r\n[2017-11-25T12:36:47,381][INFO ][o.e.p.PluginsService     ] [node_s0] loaded plugin [org.elasticsearch.node.NodeMocksPlugin]\r\n[2017-11-25T12:36:47,381][INFO ][o.e.p.PluginsService     ] [node_s0] loaded plugin [org.elasticsearch.search.MockSearchService$TestPlugin]\r\n[2017-11-25T12:36:47,381][INFO ][o.e.p.PluginsService     ] [node_s0] loaded plugin [org.elasticsearch.test.ESIntegTestCase$TestSeedPlugin]\r\n[2017-11-25T12:36:47,381][INFO ][o.e.p.PluginsService     ] [node_s0] loaded plugin [org.elasticsearch.test.discovery.TestZenDiscovery$TestPlugin]\r\n[2017-11-25T12:36:47,381][INFO ][o.e.p.PluginsService     ] [node_s0] loaded plugin [org.elasticsearch.test.store.MockFSIndexStore$TestPlugin]\r\n[2017-11-25T12:36:47,381][INFO ][o.e.p.PluginsService     ] [node_s0] loaded plugin [org.elasticsearch.transport.MockTcpTransportPlugin]\r\n[2017-11-25T12:36:47,381][INFO ][o.e.p.PluginsService     ] [node_s0] loaded plugin [org.elasticsearch.transport.Netty4Plugin]\r\n[2017-11-25T12:36:47,417][INFO ][o.e.d.DiscoveryModule    ] [node_s0] using discovery type [test-zen]\r\n[2017-11-25T12:36:47,462][INFO ][o.e.n.Node               ] [node_s0] initialized\r\n[2017-11-25T12:36:47,463][INFO ][o.e.n.Node               ] [node_s0] starting ...\r\n```\r\n\r\nWhich means that I can not register the following custom analyzer in my tests because `asciifolding` is not available:\r\n\r\n```java\r\n        return Settings.builder()\r\n                .put(\"index.analysis.analyzer.bano_analyzer.type\", \"custom\")\r\n                .put(\"index.analysis.analyzer.bano_analyzer.tokenizer\", \"standard\")\r\n                .putArray(\"index.analysis.analyzer.bano_analyzer.filter\", \"lowercase\", \"asciifolding\")\r\n                .build();\r\n```\r\n\r\nIs it possible to publish this module so we can add it in our tests?\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}