[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/84929411","html_url":"https://github.com/elastic/elasticsearch/issues/10216#issuecomment-84929411","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10216","id":84929411,"node_id":"MDEyOklzc3VlQ29tbWVudDg0OTI5NDEx","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2015-03-23T10:11:36Z","updated_at":"2015-03-23T10:12:03Z","author_association":"MEMBER","body":"@drej82 thanks for raising this issue. It does look like a bug.\n\nI have reproduced this on the master branch on an index with only one shard using the below script: \n\n``` javascript\nPUT percenttest\n{\n  \"settings\": {\n    \"number_of_shards\": 1, \n    \"number_of_replicas\": 0\n  }\n}\nPOST percenttest/doc/1\n{\n  \"i\": 20\n}\nPOST percenttest/doc/2\n{\n  \"i\": 5\n}\nPOST percenttest/doc/3\n{\n  \"i\": 10\n}\nPOST percenttest/doc/4\n{\n  \"i\": 25\n}\nPOST percenttest/doc/5\n{\n  \"i\": 14\n}\nPOST percenttest/doc/6\n{\n  \"i\": 27\n}\nPOST percenttest/doc/7\n{\n  \"i\": 13\n}\nGET percenttest/_search?search_type=count\n{\n  \"aggs\": {\n    \"percent_rank\": {\n      \"percentile_ranks\": {\n        \"field\": \"i\",\n        \"values\": [\n          1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30\n        ]\n      }\n    }\n  }\n}\n```\n\nThe response from the last request is:\n\n``` json\n{\n   \"took\": 2,\n   \"timed_out\": false,\n   \"_shards\": {\n      \"total\": 1,\n      \"successful\": 1,\n      \"failed\": 0\n   },\n   \"hits\": {\n      \"total\": 7,\n      \"max_score\": 0,\n      \"hits\": []\n   },\n   \"aggregations\": {\n      \"percent_rank\": {\n         \"values\": {\n            \"1.0\": 0,\n            \"1.0_as_string\": \"0.0\",\n            \"2.0\": 0,\n            \"2.0_as_string\": \"0.0\",\n            \"3.0\": 1.4285714285714286,\n            \"3.0_as_string\": \"1.4285714285714286\",\n            \"4.0\": 4.285714285714286,\n            \"4.0_as_string\": \"4.285714285714286\",\n            \"5.0\": 7.142857142857142,\n            \"5.0_as_string\": \"7.142857142857142\",\n            \"6.0\": 10,\n            \"6.0_as_string\": \"10.0\",\n            \"7.0\": 12.85714285714286,\n            \"7.0_as_string\": \"12.85714285714286\",\n            \"8.0\": 16.071428571428573,\n            \"8.0_as_string\": \"16.071428571428573\",\n            \"9.0\": 19.642857142857142,\n            \"9.0_as_string\": \"19.642857142857142\",\n            \"10.0\": 23.214285714285715,\n            \"10.0_as_string\": \"23.214285714285715\",\n            \"11.0\": 26.785714285714285,\n            \"11.0_as_string\": \"26.785714285714285\",\n            \"12.0\": 32.142857142857146,\n            \"12.0_as_string\": \"32.142857142857146\",\n            \"13.0\": 39.285714285714285,\n            \"13.0_as_string\": \"39.285714285714285\",\n            \"14.0\": 44.89795918367347,\n            \"14.0_as_string\": \"44.89795918367347\",\n            \"15.0\": 48.97959183673469,\n            \"15.0_as_string\": \"48.97959183673469\",\n            \"16.0\": 53.06122448979592,\n            \"16.0_as_string\": \"53.06122448979592\",\n            \"17.0\": 57.14285714285714,\n            \"17.0_as_string\": \"57.14285714285714\",\n            \"18.0\": 59.74025974025974,\n            \"18.0_as_string\": \"59.74025974025974\",\n            \"19.0\": 62.33766233766234,\n            \"19.0_as_string\": \"62.33766233766234\",\n            \"20.0\": 64.93506493506493,\n            \"20.0_as_string\": \"64.93506493506493\",\n            \"21.0\": 67.53246753246754,\n            \"21.0_as_string\": \"67.53246753246754\",\n            \"22.0\": 70.12987012987013,\n            \"22.0_as_string\": \"70.12987012987013\",\n            \"23.0\": 50,\n            \"23.0_as_string\": \"50.0\",\n            \"24.0\": 57.14285714285714,\n            \"24.0_as_string\": \"57.14285714285714\",\n            \"25.0\": 64.28571428571429,\n            \"25.0_as_string\": \"64.28571428571429\",\n            \"26.0\": 71.42857142857143,\n            \"26.0_as_string\": \"71.42857142857143\",\n            \"27.0\": 78.57142857142857,\n            \"27.0_as_string\": \"78.57142857142857\",\n            \"28.0\": 100,\n            \"28.0_as_string\": \"100.0\",\n            \"29.0\": 100,\n            \"29.0_as_string\": \"100.0\",\n            \"30.0\": 100,\n            \"30.0_as_string\": \"100.0\"\n         }\n      }\n   }\n}\n```\n\n@jpountz any idea what might be going on with the decrease in value from 22 to 23?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/84932199","html_url":"https://github.com/elastic/elasticsearch/issues/10216#issuecomment-84932199","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10216","id":84932199,"node_id":"MDEyOklzc3VlQ29tbWVudDg0OTMyMTk5","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2015-03-23T10:17:27Z","updated_at":"2015-03-23T10:17:27Z","author_association":"MEMBER","body":"The problem seems to happen at the value 22.5:\n\n``` javascript\nGET percenttest/_search?search_type=count\n{\n  \"aggs\": {\n    \"percent_rank\": {\n      \"percentile_ranks\": {\n        \"field\": \"i\",\n        \"values\": [\n          22.4999999,22.50\n        ]\n      }\n    }\n  }\n}\n```\n\nresponse:\n\n``` json\n{\n   \"took\": 2,\n   \"timed_out\": false,\n   \"_shards\": {\n      \"total\": 1,\n      \"successful\": 1,\n      \"failed\": 0\n   },\n   \"hits\": {\n      \"total\": 7,\n      \"max_score\": 0,\n      \"hits\": []\n   },\n   \"aggregations\": {\n      \"percent_rank\": {\n         \"values\": {\n            \"22.4999999\": 71.42857116883116,\n            \"22.4999999_as_string\": \"71.42857116883116\",\n            \"22.5\": 46.42857142857143,\n            \"22.5_as_string\": \"46.42857142857143\"\n         }\n      }\n   }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/87321738","html_url":"https://github.com/elastic/elasticsearch/issues/10216#issuecomment-87321738","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10216","id":87321738,"node_id":"MDEyOklzc3VlQ29tbWVudDg3MzIxNzM4","user":{"login":"drej82","id":11453888,"node_id":"MDQ6VXNlcjExNDUzODg4","avatar_url":"https://avatars2.githubusercontent.com/u/11453888?v=4","gravatar_id":"","url":"https://api.github.com/users/drej82","html_url":"https://github.com/drej82","followers_url":"https://api.github.com/users/drej82/followers","following_url":"https://api.github.com/users/drej82/following{/other_user}","gists_url":"https://api.github.com/users/drej82/gists{/gist_id}","starred_url":"https://api.github.com/users/drej82/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drej82/subscriptions","organizations_url":"https://api.github.com/users/drej82/orgs","repos_url":"https://api.github.com/users/drej82/repos","events_url":"https://api.github.com/users/drej82/events{/privacy}","received_events_url":"https://api.github.com/users/drej82/received_events","type":"User","site_admin":false},"created_at":"2015-03-28T22:07:12Z","updated_at":"2015-03-29T16:47:20Z","author_association":"NONE","body":"I actually found a bug in t-digest, it skips the last interval while doing the linear interpolation. I will create pull request with a fix.\n\nFor tracking purposes: https://github.com/tdunning/t-digest/pull/44\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/87473625","html_url":"https://github.com/elastic/elasticsearch/issues/10216#issuecomment-87473625","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10216","id":87473625,"node_id":"MDEyOklzc3VlQ29tbWVudDg3NDczNjI1","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-03-29T20:43:47Z","updated_at":"2015-03-29T20:43:47Z","author_association":"CONTRIBUTOR","body":"Thanks @drej82 for investigating this bug, opening a bug upstream and proposing a fix!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/88260445","html_url":"https://github.com/elastic/elasticsearch/issues/10216#issuecomment-88260445","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10216","id":88260445,"node_id":"MDEyOklzc3VlQ29tbWVudDg4MjYwNDQ1","user":{"login":"drej82","id":11453888,"node_id":"MDQ6VXNlcjExNDUzODg4","avatar_url":"https://avatars2.githubusercontent.com/u/11453888?v=4","gravatar_id":"","url":"https://api.github.com/users/drej82","html_url":"https://github.com/drej82","followers_url":"https://api.github.com/users/drej82/followers","following_url":"https://api.github.com/users/drej82/following{/other_user}","gists_url":"https://api.github.com/users/drej82/gists{/gist_id}","starred_url":"https://api.github.com/users/drej82/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drej82/subscriptions","organizations_url":"https://api.github.com/users/drej82/orgs","repos_url":"https://api.github.com/users/drej82/repos","events_url":"https://api.github.com/users/drej82/events{/privacy}","received_events_url":"https://api.github.com/users/drej82/received_events","type":"User","site_admin":false},"created_at":"2015-03-31T21:46:36Z","updated_at":"2015-03-31T21:46:36Z","author_association":"NONE","body":"The fix was committed, please let me know when it propagates to official snapshot.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/89294053","html_url":"https://github.com/elastic/elasticsearch/issues/10216#issuecomment-89294053","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10216","id":89294053,"node_id":"MDEyOklzc3VlQ29tbWVudDg5Mjk0MDUz","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-04-03T13:47:38Z","updated_at":"2015-04-03T13:47:38Z","author_association":"CONTRIBUTOR","body":"Thanks! We'll watch for new t-digest releases and integrate it once a new version is released with this fix.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/90163833","html_url":"https://github.com/elastic/elasticsearch/issues/10216#issuecomment-90163833","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10216","id":90163833,"node_id":"MDEyOklzc3VlQ29tbWVudDkwMTYzODMz","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-04-06T17:28:58Z","updated_at":"2015-04-06T17:28:58Z","author_association":"CONTRIBUTOR","body":"A new release is out, I'll upgrade the dependency soon. http://search.maven.org/#artifactdetails%7Ccom.tdunning%7Ct-digest%7C3.1%7Cjar\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/90506029","html_url":"https://github.com/elastic/elasticsearch/issues/10216#issuecomment-90506029","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10216","id":90506029,"node_id":"MDEyOklzc3VlQ29tbWVudDkwNTA2MDI5","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-04-07T10:52:54Z","updated_at":"2015-04-07T10:52:54Z","author_association":"CONTRIBUTOR","body":"I tried to upgrade (see https://github.com/jpountz/elasticsearch/tree/upgrade/t-digest) but we have test failures due to the fact that the new cdf computation returns 100 even for values that are below the max value. For instance if I replay @colings86 's example above, I get the following response:\n\n```\n      \"percent_rank\": {\n         \"values\": {\n            \"1.0\": 0,\n            \"2.0\": 0,\n            \"3.0\": 1.4285714285714286,\n            \"4.0\": 4.285714285714286,\n            \"5.0\": 7.142857142857142,\n            \"6.0\": 10,\n            \"7.0\": 12.85714285714286,\n            \"8.0\": 16.071428571428573,\n            \"9.0\": 19.642857142857142,\n            \"10.0\": 23.214285714285715,\n            \"11.0\": 26.785714285714285,\n            \"12.0\": 32.142857142857146,\n            \"13.0\": 39.285714285714285,\n            \"14.0\": 44.89795918367347,\n            \"15.0\": 48.97959183673469,\n            \"16.0\": 53.06122448979592,\n            \"17.0\": 57.14285714285714,\n            \"18.0\": 59.74025974025974,\n            \"19.0\": 62.33766233766234,\n            \"20.0\": 64.93506493506493,\n            \"21.0\": 67.53246753246754,\n            \"22.0\": 70.12987012987013,\n            \"23.0\": 73.46938775510205,\n            \"24.0\": 77.55102040816327,\n            \"25.0\": 81.63265306122449,\n            \"26.0\": 100,\n            \"27.0\": 100,\n            \"28.0\": 100,\n            \"29.0\": 100,\n            \"30.0\": 100\n         }\n      }\n   }\n```\n\nIt returns 100 for 26 although the max value is 27. But maybe it's still better than what we have currently and we should make the test more lenient and work at the same time on improving the cdf computation?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/90506606","html_url":"https://github.com/elastic/elasticsearch/issues/10216#issuecomment-90506606","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10216","id":90506606,"node_id":"MDEyOklzc3VlQ29tbWVudDkwNTA2NjA2","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2015-04-07T10:57:15Z","updated_at":"2015-04-07T10:57:15Z","author_association":"MEMBER","body":"@jpountz I would agree, since t-digest is an approximate algorithm it may calculate the 100th percentile as a lower value that the actual data depending on how it buckets the data.\n\n+1 on making the test a bit more lenient as well as improving the cdf computation\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/90506757","html_url":"https://github.com/elastic/elasticsearch/issues/10216#issuecomment-90506757","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10216","id":90506757,"node_id":"MDEyOklzc3VlQ29tbWVudDkwNTA2NzU3","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-04-07T10:58:24Z","updated_at":"2015-04-07T10:58:24Z","author_association":"CONTRIBUTOR","body":"OK, I'll do that then. Thanks for the feedback.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/90581282","html_url":"https://github.com/elastic/elasticsearch/issues/10216#issuecomment-90581282","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10216","id":90581282,"node_id":"MDEyOklzc3VlQ29tbWVudDkwNTgxMjgy","user":{"login":"drej82","id":11453888,"node_id":"MDQ6VXNlcjExNDUzODg4","avatar_url":"https://avatars2.githubusercontent.com/u/11453888?v=4","gravatar_id":"","url":"https://api.github.com/users/drej82","html_url":"https://github.com/drej82","followers_url":"https://api.github.com/users/drej82/followers","following_url":"https://api.github.com/users/drej82/following{/other_user}","gists_url":"https://api.github.com/users/drej82/gists{/gist_id}","starred_url":"https://api.github.com/users/drej82/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drej82/subscriptions","organizations_url":"https://api.github.com/users/drej82/orgs","repos_url":"https://api.github.com/users/drej82/repos","events_url":"https://api.github.com/users/drej82/events{/privacy}","received_events_url":"https://api.github.com/users/drej82/received_events","type":"User","site_admin":false},"created_at":"2015-04-07T14:19:40Z","updated_at":"2015-04-07T14:19:40Z","author_association":"NONE","body":"The change I've made couldn't cause such behavior. I'm wondering if Ted made some other changes. The way it works, it should return values < 100 % for all neighbors of max, even for neighbors > max. Instead of relaxing the test, I'd suggest we find out the root cause.\n\nSent from my Windows Phone\n\n-----Original Message-----\nFrom: \"Adrien Grand\" notifications@github.com\nSent: ‎4/‎7/‎2015 3:59 AM\nTo: \"elastic/elasticsearch\" elasticsearch@noreply.github.com\nCc: \"Andrey\" andrew.obraztsov@gmail.com\nSubject: Re: [elasticsearch] Percentile ranks metric bug? (#10216)\n\nOK, I'll do that then. Thanks for the feedback.\n—\nReply to this email directly or view it on GitHub.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157940354","html_url":"https://github.com/elastic/elasticsearch/issues/10216#issuecomment-157940354","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10216","id":157940354,"node_id":"MDEyOklzc3VlQ29tbWVudDE1Nzk0MDM1NA==","user":{"login":"rcrezende","id":604872,"node_id":"MDQ6VXNlcjYwNDg3Mg==","avatar_url":"https://avatars1.githubusercontent.com/u/604872?v=4","gravatar_id":"","url":"https://api.github.com/users/rcrezende","html_url":"https://github.com/rcrezende","followers_url":"https://api.github.com/users/rcrezende/followers","following_url":"https://api.github.com/users/rcrezende/following{/other_user}","gists_url":"https://api.github.com/users/rcrezende/gists{/gist_id}","starred_url":"https://api.github.com/users/rcrezende/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rcrezende/subscriptions","organizations_url":"https://api.github.com/users/rcrezende/orgs","repos_url":"https://api.github.com/users/rcrezende/repos","events_url":"https://api.github.com/users/rcrezende/events{/privacy}","received_events_url":"https://api.github.com/users/rcrezende/received_events","type":"User","site_admin":false},"created_at":"2015-11-19T03:34:01Z","updated_at":"2015-11-19T03:34:01Z","author_association":"NONE","body":"Any update on this?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/196505146","html_url":"https://github.com/elastic/elasticsearch/issues/10216#issuecomment-196505146","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10216","id":196505146,"node_id":"MDEyOklzc3VlQ29tbWVudDE5NjUwNTE0Ng==","user":{"login":"rcrezende","id":604872,"node_id":"MDQ6VXNlcjYwNDg3Mg==","avatar_url":"https://avatars1.githubusercontent.com/u/604872?v=4","gravatar_id":"","url":"https://api.github.com/users/rcrezende","html_url":"https://github.com/rcrezende","followers_url":"https://api.github.com/users/rcrezende/followers","following_url":"https://api.github.com/users/rcrezende/following{/other_user}","gists_url":"https://api.github.com/users/rcrezende/gists{/gist_id}","starred_url":"https://api.github.com/users/rcrezende/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rcrezende/subscriptions","organizations_url":"https://api.github.com/users/rcrezende/orgs","repos_url":"https://api.github.com/users/rcrezende/repos","events_url":"https://api.github.com/users/rcrezende/events{/privacy}","received_events_url":"https://api.github.com/users/rcrezende/received_events","type":"User","site_admin":false},"created_at":"2016-03-14T20:20:55Z","updated_at":"2016-03-14T20:20:55Z","author_association":"NONE","body":"Any update on this?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/375379328","html_url":"https://github.com/elastic/elasticsearch/issues/10216#issuecomment-375379328","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10216","id":375379328,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NTM3OTMyOA==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2018-03-22T16:55:59Z","updated_at":"2018-03-22T16:55:59Z","author_association":"MEMBER","body":"Tested this locally, has since been fixed.  Was probably fixed when we upgraded to TDigest 3.2: https://github.com/elastic/elasticsearch/pull/28305","performed_via_github_app":null}]