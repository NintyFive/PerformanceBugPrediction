{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/23356","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23356/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23356/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23356/events","html_url":"https://github.com/elastic/elasticsearch/issues/23356","id":210082573,"node_id":"MDU6SXNzdWUyMTAwODI1NzM=","number":23356,"title":"String query \"*\"  returns all documents when allow_leading_wildcard and analyze_wildcard are set to false","user":{"login":"steveodonovan","id":18128367,"node_id":"MDQ6VXNlcjE4MTI4MzY3","avatar_url":"https://avatars3.githubusercontent.com/u/18128367?v=4","gravatar_id":"","url":"https://api.github.com/users/steveodonovan","html_url":"https://github.com/steveodonovan","followers_url":"https://api.github.com/users/steveodonovan/followers","following_url":"https://api.github.com/users/steveodonovan/following{/other_user}","gists_url":"https://api.github.com/users/steveodonovan/gists{/gist_id}","starred_url":"https://api.github.com/users/steveodonovan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/steveodonovan/subscriptions","organizations_url":"https://api.github.com/users/steveodonovan/orgs","repos_url":"https://api.github.com/users/steveodonovan/repos","events_url":"https://api.github.com/users/steveodonovan/events{/privacy}","received_events_url":"https://api.github.com/users/steveodonovan/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2017-02-24T15:48:07Z","updated_at":"2018-02-14T13:29:18Z","closed_at":"2017-03-07T17:38:28Z","author_association":"NONE","active_lock_reason":null,"body":"Elasticsearch version: `5.2.0`\r\n```\r\n  \"version\" : {\r\n    \"number\" : \"5.2.0\",\r\n    \"build_hash\" : \"24e05b9\",\r\n    \"build_date\" : \"2017-01-24T19:52:35.800Z\",\r\n    \"build_snapshot\" : false,\r\n    \"lucene_version\" : \"6.4.0\"\r\n  }\r\n```\r\n\r\nJVM version: 1.8\r\n\r\nOS version: Alpine Linux\r\n\r\nWhen running the below query all documents are matched using the `*` query:\r\n\r\n```\r\n{\r\n  \"size\" : 5,\r\n  \"query\" : {\r\n    \"query_string\" : {\r\n      \"query\" : \"*\",\r\n      \"allow_leading_wildcard\": false,\r\n      \"analyze_wildcard\": false\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nShould the `allow_leading_wildcard` and `analyze_wildcard` settings cause this to fail ?\r\n\r\nFor example conversely \r\n\r\n```\r\n{\r\n  \"size\" : 5,\r\n  \"query\" : {\r\n    \"query_string\" : {\r\n      \"query\" : \"content:*\",\r\n      \"allow_leading_wildcard\": false,\r\n      \"analyze_wildcard\": false\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nresults in a parse exception with the reason \"parse_exception: '*' or '?' not allowed as first character in WildcardQuery\"\r\n","closed_by":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"performed_via_github_app":null}