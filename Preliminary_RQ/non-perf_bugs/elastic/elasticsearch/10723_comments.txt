[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/95306545","html_url":"https://github.com/elastic/elasticsearch/issues/10723#issuecomment-95306545","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10723","id":95306545,"node_id":"MDEyOklzc3VlQ29tbWVudDk1MzA2NTQ1","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2015-04-22T19:06:51Z","updated_at":"2015-04-22T19:06:51Z","author_association":"MEMBER","body":"@kiryam which version of elasticsearch is this? This bug looks very similar to #7266, which was fixed in 1.4.0 and 1.3.3.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/95315260","html_url":"https://github.com/elastic/elasticsearch/issues/10723#issuecomment-95315260","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10723","id":95315260,"node_id":"MDEyOklzc3VlQ29tbWVudDk1MzE1MjYw","user":{"login":"kiryam","id":146705,"node_id":"MDQ6VXNlcjE0NjcwNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/146705?v=4","gravatar_id":"","url":"https://api.github.com/users/kiryam","html_url":"https://github.com/kiryam","followers_url":"https://api.github.com/users/kiryam/followers","following_url":"https://api.github.com/users/kiryam/following{/other_user}","gists_url":"https://api.github.com/users/kiryam/gists{/gist_id}","starred_url":"https://api.github.com/users/kiryam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kiryam/subscriptions","organizations_url":"https://api.github.com/users/kiryam/orgs","repos_url":"https://api.github.com/users/kiryam/repos","events_url":"https://api.github.com/users/kiryam/events{/privacy}","received_events_url":"https://api.github.com/users/kiryam/received_events","type":"User","site_admin":false},"created_at":"2015-04-22T19:49:04Z","updated_at":"2015-04-22T19:50:15Z","author_association":"CONTRIBUTOR","body":"@imotov \n\n```\n{\n\"status\": 200,\n\"name\": \"process\",\n\"cluster_name\": \"elasticsearch\",\n\"version\": {\n\"number\": \"1.4.4\",\n\"build_hash\": \"c88f77ffc81301dfa9dfd81ca2232f09588bd512\",\n\"build_timestamp\": \"2015-02-19T13:05:36Z\",\n\"build_snapshot\": false,\n\"lucene_version\": \"4.10.3\"\n},\n\"tagline\": \"You Know, for Search\"\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/95323690","html_url":"https://github.com/elastic/elasticsearch/issues/10723#issuecomment-95323690","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10723","id":95323690,"node_id":"MDEyOklzc3VlQ29tbWVudDk1MzIzNjkw","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2015-04-22T20:17:05Z","updated_at":"2015-04-22T20:17:05Z","author_association":"MEMBER","body":"@kiryam could you share the mapping for this index and type? I cannot reproduce the issue with v1.4.4 and default mapping?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/95431381","html_url":"https://github.com/elastic/elasticsearch/issues/10723#issuecomment-95431381","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10723","id":95431381,"node_id":"MDEyOklzc3VlQ29tbWVudDk1NDMxMzgx","user":{"login":"kiryam","id":146705,"node_id":"MDQ6VXNlcjE0NjcwNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/146705?v=4","gravatar_id":"","url":"https://api.github.com/users/kiryam","html_url":"https://github.com/kiryam","followers_url":"https://api.github.com/users/kiryam/followers","following_url":"https://api.github.com/users/kiryam/following{/other_user}","gists_url":"https://api.github.com/users/kiryam/gists{/gist_id}","starred_url":"https://api.github.com/users/kiryam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kiryam/subscriptions","organizations_url":"https://api.github.com/users/kiryam/orgs","repos_url":"https://api.github.com/users/kiryam/repos","events_url":"https://api.github.com/users/kiryam/events{/privacy}","received_events_url":"https://api.github.com/users/kiryam/received_events","type":"User","site_admin":false},"created_at":"2015-04-23T04:49:48Z","updated_at":"2015-04-23T04:49:48Z","author_association":"CONTRIBUTOR","body":"@imotov https://gist.github.com/kiryam/93df99e99ffaf397072e\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/95597219","html_url":"https://github.com/elastic/elasticsearch/issues/10723#issuecomment-95597219","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10723","id":95597219,"node_id":"MDEyOklzc3VlQ29tbWVudDk1NTk3MjE5","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2015-04-23T14:06:26Z","updated_at":"2015-04-23T14:06:26Z","author_association":"MEMBER","body":"@kiryam How are `ru` and `exact` analyzers defined? Could you post settings for this index? Are you using any analysis plugins? If you do which versions of the plugins are you using?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/95599231","html_url":"https://github.com/elastic/elasticsearch/issues/10723#issuecomment-95599231","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10723","id":95599231,"node_id":"MDEyOklzc3VlQ29tbWVudDk1NTk5MjMx","user":{"login":"kiryam","id":146705,"node_id":"MDQ6VXNlcjE0NjcwNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/146705?v=4","gravatar_id":"","url":"https://api.github.com/users/kiryam","html_url":"https://github.com/kiryam","followers_url":"https://api.github.com/users/kiryam/followers","following_url":"https://api.github.com/users/kiryam/following{/other_user}","gists_url":"https://api.github.com/users/kiryam/gists{/gist_id}","starred_url":"https://api.github.com/users/kiryam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kiryam/subscriptions","organizations_url":"https://api.github.com/users/kiryam/orgs","repos_url":"https://api.github.com/users/kiryam/repos","events_url":"https://api.github.com/users/kiryam/events{/privacy}","received_events_url":"https://api.github.com/users/kiryam/received_events","type":"User","site_admin":false},"created_at":"2015-04-23T14:10:55Z","updated_at":"2015-04-23T14:10:55Z","author_association":"CONTRIBUTOR","body":"@imotov https://gist.github.com/kiryam/94a8c418e09025d7ef77\n\n```\n/usr/share/elasticsearch/plugins/analysis-morphology# ls\nelasticsearch-analysis-morphology-1.2.0.jar  english-4.6.0.jar  morph-4.6.0.jar  russian-4.6.0.jar\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/95734349","html_url":"https://github.com/elastic/elasticsearch/issues/10723#issuecomment-95734349","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10723","id":95734349,"node_id":"MDEyOklzc3VlQ29tbWVudDk1NzM0MzQ5","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2015-04-23T22:20:20Z","updated_at":"2015-04-23T22:20:20Z","author_association":"MEMBER","body":"@kiryam the problem is in this regular expression:\n\n```\nexact_rstrip: \n        type: \"pattern_replace\"\n        pattern: \"[^#@a-zA-Zа-яА-Я0-9$%°~_]+($| )\"\n        replacement: \"$1\"\n```\n\nIt's just takes too long to execute this regex on the string that consists of a million of \"\\\" characters. I just did an [experiment with 50k string](https://gist.github.com/imotov/f56d090981e72dc87828) and it takes 17 seconds to process on my machine. \n\nWhat are you trying to achieve here?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/95837061","html_url":"https://github.com/elastic/elasticsearch/issues/10723#issuecomment-95837061","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10723","id":95837061,"node_id":"MDEyOklzc3VlQ29tbWVudDk1ODM3MDYx","user":{"login":"kiryam","id":146705,"node_id":"MDQ6VXNlcjE0NjcwNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/146705?v=4","gravatar_id":"","url":"https://api.github.com/users/kiryam","html_url":"https://github.com/kiryam","followers_url":"https://api.github.com/users/kiryam/followers","following_url":"https://api.github.com/users/kiryam/following{/other_user}","gists_url":"https://api.github.com/users/kiryam/gists{/gist_id}","starred_url":"https://api.github.com/users/kiryam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kiryam/subscriptions","organizations_url":"https://api.github.com/users/kiryam/orgs","repos_url":"https://api.github.com/users/kiryam/repos","events_url":"https://api.github.com/users/kiryam/events{/privacy}","received_events_url":"https://api.github.com/users/kiryam/received_events","type":"User","site_admin":false},"created_at":"2015-04-24T07:44:55Z","updated_at":"2015-04-24T07:44:55Z","author_association":"CONTRIBUTOR","body":"@imotov I want to remove special characters exclude \"[^#@a-zA-Zа-яА-Я0-9$%°~_] in end of word\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/95937205","html_url":"https://github.com/elastic/elasticsearch/issues/10723#issuecomment-95937205","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10723","id":95937205,"node_id":"MDEyOklzc3VlQ29tbWVudDk1OTM3MjA1","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-04-24T13:45:32Z","updated_at":"2015-04-24T13:45:32Z","author_association":"CONTRIBUTOR","body":"Could you replace all three character filters with the following?\n\n```\nPUT /test?pretty\n{\n  \"settings\": {\n    \"index\": {\n      \"analysis\": {\n        \"analyzer\": {\n          \"exact\": {\n            \"tokenizer\": \"whitespace\",\n            \"char_filter\": [\n              \"strip_chars\"\n            ]\n          }\n        },\n        \"char_filter\": {\n          \"strip_chars\": {\n            \"type\": \"pattern_replace\",\n            \"pattern\": \"[^#@a-zA-Zа-яА-Я0-9$%°~_]+\",\n            \"replacement\": \" \"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nWith @imotov's test string, this is pretty much instantaneous.\n","performed_via_github_app":null}]