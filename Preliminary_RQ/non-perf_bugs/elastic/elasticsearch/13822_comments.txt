[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/143701800","html_url":"https://github.com/elastic/elasticsearch/issues/13822#issuecomment-143701800","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13822","id":143701800,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MzcwMTgwMA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-09-28T10:21:35Z","updated_at":"2015-09-28T10:21:35Z","author_association":"CONTRIBUTOR","body":"@caipeichao hmmm.. i'd check the values of the payAmount field that is being used for this calculation.  Perhaps something like using a comma instead of a period for numbers?\n\nif you think the index is corrupted, can you reindex?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/144326926","html_url":"https://github.com/elastic/elasticsearch/issues/13822#issuecomment-144326926","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13822","id":144326926,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NDMyNjkyNg==","user":{"login":"whitejava","id":1661871,"node_id":"MDQ6VXNlcjE2NjE4NzE=","avatar_url":"https://avatars3.githubusercontent.com/u/1661871?v=4","gravatar_id":"","url":"https://api.github.com/users/whitejava","html_url":"https://github.com/whitejava","followers_url":"https://api.github.com/users/whitejava/followers","following_url":"https://api.github.com/users/whitejava/following{/other_user}","gists_url":"https://api.github.com/users/whitejava/gists{/gist_id}","starred_url":"https://api.github.com/users/whitejava/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whitejava/subscriptions","organizations_url":"https://api.github.com/users/whitejava/orgs","repos_url":"https://api.github.com/users/whitejava/repos","events_url":"https://api.github.com/users/whitejava/events{/privacy}","received_events_url":"https://api.github.com/users/whitejava/received_events","type":"User","site_admin":false},"created_at":"2015-09-30T08:30:26Z","updated_at":"2015-09-30T08:30:26Z","author_association":"NONE","body":"@clintongormley Thanks.\n\nThe payAmount is really integers like 10000, 12000, 1999. no comma no decimal.\n\nI have reindexed but not working: I read from the index and write back to the same index. some indexes is corrected, but some indexes is still.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/144953833","html_url":"https://github.com/elastic/elasticsearch/issues/13822#issuecomment-144953833","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13822","id":144953833,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NDk1MzgzMw==","user":{"login":"justjico","id":578410,"node_id":"MDQ6VXNlcjU3ODQxMA==","avatar_url":"https://avatars1.githubusercontent.com/u/578410?v=4","gravatar_id":"","url":"https://api.github.com/users/justjico","html_url":"https://github.com/justjico","followers_url":"https://api.github.com/users/justjico/followers","following_url":"https://api.github.com/users/justjico/following{/other_user}","gists_url":"https://api.github.com/users/justjico/gists{/gist_id}","starred_url":"https://api.github.com/users/justjico/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justjico/subscriptions","organizations_url":"https://api.github.com/users/justjico/orgs","repos_url":"https://api.github.com/users/justjico/repos","events_url":"https://api.github.com/users/justjico/events{/privacy}","received_events_url":"https://api.github.com/users/justjico/received_events","type":"User","site_admin":false},"created_at":"2015-10-02T08:09:41Z","updated_at":"2015-10-02T08:09:41Z","author_association":"NONE","body":"@caipeichao I faced a similar issue once, my problem was at least one mapping in one of the indices was wrong. You should verify that across all your indices there's no other field named \"payAmount\" that has a  different type than \"long\", it doesn't matter if it's a different type, or is nested differently, if it's the same name it will cause something like this.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/145081970","html_url":"https://github.com/elastic/elasticsearch/issues/13822#issuecomment-145081970","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13822","id":145081970,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NTA4MTk3MA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-10-02T16:39:01Z","updated_at":"2015-10-02T16:39:01Z","author_association":"CONTRIBUTOR","body":"@justjico good thinking - most likely the cause\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/145319683","html_url":"https://github.com/elastic/elasticsearch/issues/13822#issuecomment-145319683","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13822","id":145319683,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NTMxOTY4Mw==","user":{"login":"whitejava","id":1661871,"node_id":"MDQ6VXNlcjE2NjE4NzE=","avatar_url":"https://avatars3.githubusercontent.com/u/1661871?v=4","gravatar_id":"","url":"https://api.github.com/users/whitejava","html_url":"https://github.com/whitejava","followers_url":"https://api.github.com/users/whitejava/followers","following_url":"https://api.github.com/users/whitejava/following{/other_user}","gists_url":"https://api.github.com/users/whitejava/gists{/gist_id}","starred_url":"https://api.github.com/users/whitejava/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whitejava/subscriptions","organizations_url":"https://api.github.com/users/whitejava/orgs","repos_url":"https://api.github.com/users/whitejava/repos","events_url":"https://api.github.com/users/whitejava/events{/privacy}","received_events_url":"https://api.github.com/users/whitejava/received_events","type":"User","site_admin":false},"created_at":"2015-10-04T05:51:08Z","updated_at":"2015-10-04T05:51:08Z","author_association":"NONE","body":"Thanks! I would check the mapping these days and give you a feedback.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/147076921","html_url":"https://github.com/elastic/elasticsearch/issues/13822#issuecomment-147076921","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13822","id":147076921,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NzA3NjkyMQ==","user":{"login":"whitejava","id":1661871,"node_id":"MDQ6VXNlcjE2NjE4NzE=","avatar_url":"https://avatars3.githubusercontent.com/u/1661871?v=4","gravatar_id":"","url":"https://api.github.com/users/whitejava","html_url":"https://github.com/whitejava","followers_url":"https://api.github.com/users/whitejava/followers","following_url":"https://api.github.com/users/whitejava/following{/other_user}","gists_url":"https://api.github.com/users/whitejava/gists{/gist_id}","starred_url":"https://api.github.com/users/whitejava/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whitejava/subscriptions","organizations_url":"https://api.github.com/users/whitejava/orgs","repos_url":"https://api.github.com/users/whitejava/repos","events_url":"https://api.github.com/users/whitejava/events{/privacy}","received_events_url":"https://api.github.com/users/whitejava/received_events","type":"User","site_admin":false},"created_at":"2015-10-10T11:30:02Z","updated_at":"2015-10-10T11:30:02Z","author_association":"NONE","body":"I checked the mapping, there is only one `payAmount` in my mapping.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/147076961","html_url":"https://github.com/elastic/elasticsearch/issues/13822#issuecomment-147076961","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13822","id":147076961,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NzA3Njk2MQ==","user":{"login":"whitejava","id":1661871,"node_id":"MDQ6VXNlcjE2NjE4NzE=","avatar_url":"https://avatars3.githubusercontent.com/u/1661871?v=4","gravatar_id":"","url":"https://api.github.com/users/whitejava","html_url":"https://github.com/whitejava","followers_url":"https://api.github.com/users/whitejava/followers","following_url":"https://api.github.com/users/whitejava/following{/other_user}","gists_url":"https://api.github.com/users/whitejava/gists{/gist_id}","starred_url":"https://api.github.com/users/whitejava/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whitejava/subscriptions","organizations_url":"https://api.github.com/users/whitejava/orgs","repos_url":"https://api.github.com/users/whitejava/repos","events_url":"https://api.github.com/users/whitejava/events{/privacy}","received_events_url":"https://api.github.com/users/whitejava/received_events","type":"User","site_admin":false},"created_at":"2015-10-10T11:31:31Z","updated_at":"2015-10-10T11:31:31Z","author_association":"NONE","body":"So, that's likely a index corruption. Then I will try to reindex and check whether fixed.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/147336205","html_url":"https://github.com/elastic/elasticsearch/issues/13822#issuecomment-147336205","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13822","id":147336205,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NzMzNjIwNQ==","user":{"login":"whitejava","id":1661871,"node_id":"MDQ6VXNlcjE2NjE4NzE=","avatar_url":"https://avatars3.githubusercontent.com/u/1661871?v=4","gravatar_id":"","url":"https://api.github.com/users/whitejava","html_url":"https://github.com/whitejava","followers_url":"https://api.github.com/users/whitejava/followers","following_url":"https://api.github.com/users/whitejava/following{/other_user}","gists_url":"https://api.github.com/users/whitejava/gists{/gist_id}","starred_url":"https://api.github.com/users/whitejava/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/whitejava/subscriptions","organizations_url":"https://api.github.com/users/whitejava/orgs","repos_url":"https://api.github.com/users/whitejava/repos","events_url":"https://api.github.com/users/whitejava/events{/privacy}","received_events_url":"https://api.github.com/users/whitejava/received_events","type":"User","site_admin":false},"created_at":"2015-10-12T09:04:01Z","updated_at":"2015-10-12T09:04:01Z","author_association":"NONE","body":"OK, I confirm it's index corruption. Because I reindexed by copy data to another index, and sum aggregation goes correct.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/147646675","html_url":"https://github.com/elastic/elasticsearch/issues/13822#issuecomment-147646675","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13822","id":147646675,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NzY0NjY3NQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-10-13T08:29:31Z","updated_at":"2015-10-13T08:29:31Z","author_association":"CONTRIBUTOR","body":"thanks for letting us know @caipeichao \n","performed_via_github_app":null}]