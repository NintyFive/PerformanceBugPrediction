[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/9635913","html_url":"https://github.com/elastic/elasticsearch/issues/2342#issuecomment-9635913","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2342","id":9635913,"node_id":"MDEyOklzc3VlQ29tbWVudDk2MzU5MTM=","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2012-10-20T20:56:30Z","updated_at":"2012-10-20T20:56:30Z","author_association":"MEMBER","body":"Hey, see if you are not running our of available sockets because it keeps on opening and closing sockets? I think Tire can work with other HTTP implementations, have you tried to use other ones possibly?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/9640851","html_url":"https://github.com/elastic/elasticsearch/issues/2342#issuecomment-9640851","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2342","id":9640851,"node_id":"MDEyOklzc3VlQ29tbWVudDk2NDA4NTE=","user":{"login":"azitabh","id":2002310,"node_id":"MDQ6VXNlcjIwMDIzMTA=","avatar_url":"https://avatars3.githubusercontent.com/u/2002310?v=4","gravatar_id":"","url":"https://api.github.com/users/azitabh","html_url":"https://github.com/azitabh","followers_url":"https://api.github.com/users/azitabh/followers","following_url":"https://api.github.com/users/azitabh/following{/other_user}","gists_url":"https://api.github.com/users/azitabh/gists{/gist_id}","starred_url":"https://api.github.com/users/azitabh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/azitabh/subscriptions","organizations_url":"https://api.github.com/users/azitabh/orgs","repos_url":"https://api.github.com/users/azitabh/repos","events_url":"https://api.github.com/users/azitabh/events{/privacy}","received_events_url":"https://api.github.com/users/azitabh/received_events","type":"User","site_admin":false},"created_at":"2012-10-21T08:53:53Z","updated_at":"2012-10-21T08:54:10Z","author_association":"NONE","body":"I don't think Tire provides option of using http keep alive or something similar...\ninviting @karmi for insights\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/9640918","html_url":"https://github.com/elastic/elasticsearch/issues/2342#issuecomment-9640918","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2342","id":9640918,"node_id":"MDEyOklzc3VlQ29tbWVudDk2NDA5MTg=","user":{"login":"karmi","id":4790,"node_id":"MDQ6VXNlcjQ3OTA=","avatar_url":"https://avatars1.githubusercontent.com/u/4790?v=4","gravatar_id":"","url":"https://api.github.com/users/karmi","html_url":"https://github.com/karmi","followers_url":"https://api.github.com/users/karmi/followers","following_url":"https://api.github.com/users/karmi/following{/other_user}","gists_url":"https://api.github.com/users/karmi/gists{/gist_id}","starred_url":"https://api.github.com/users/karmi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karmi/subscriptions","organizations_url":"https://api.github.com/users/karmi/orgs","repos_url":"https://api.github.com/users/karmi/repos","events_url":"https://api.github.com/users/karmi/events{/privacy}","received_events_url":"https://api.github.com/users/karmi/received_events","type":"User","site_admin":false},"created_at":"2012-10-21T09:06:19Z","updated_at":"2012-10-21T09:09:21Z","author_association":"CONTRIBUTOR","body":"@azitabh The [Curb client](https://github.com/karmi/tire/blob/master/lib/tire/http/clients/curb.rb) has support for keep-alive;Â benchmark: https://gist.github.com/1204159\n\nAlso, much better to submit Tire related issues at the Tire repository...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/9645033","html_url":"https://github.com/elastic/elasticsearch/issues/2342#issuecomment-9645033","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2342","id":9645033,"node_id":"MDEyOklzc3VlQ29tbWVudDk2NDUwMzM=","user":{"login":"azitabh","id":2002310,"node_id":"MDQ6VXNlcjIwMDIzMTA=","avatar_url":"https://avatars3.githubusercontent.com/u/2002310?v=4","gravatar_id":"","url":"https://api.github.com/users/azitabh","html_url":"https://github.com/azitabh","followers_url":"https://api.github.com/users/azitabh/followers","following_url":"https://api.github.com/users/azitabh/following{/other_user}","gists_url":"https://api.github.com/users/azitabh/gists{/gist_id}","starred_url":"https://api.github.com/users/azitabh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/azitabh/subscriptions","organizations_url":"https://api.github.com/users/azitabh/orgs","repos_url":"https://api.github.com/users/azitabh/repos","events_url":"https://api.github.com/users/azitabh/events{/privacy}","received_events_url":"https://api.github.com/users/azitabh/received_events","type":"User","site_admin":false},"created_at":"2012-10-21T17:16:52Z","updated_at":"2012-10-21T17:16:52Z","author_association":"NONE","body":"@karmi : Thanks for the response.\nI am currently using version 0.4.2 of Tire. This version has curb as it's only http clint. So, i can't be using some other clint. Now, does it use keep alive by default or do I need to configure this somehow(didn't find anything on this on web)?\nThere were nearly 28000 open sockets in waiting state around the time I got the error.\n\n```\nazitabh@azitabh:/data/work$ netstat -a | grep 9200 | grep \"TIME_WAIT\" | wc -l\n27847\n```\n\n9200 is the port on which elasticsearch is running.\nIs this too big a number?\n\nAnd, I didn't initially think that the issue I am facing is related to Tire. That's why I put it here.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/9645997","html_url":"https://github.com/elastic/elasticsearch/issues/2342#issuecomment-9645997","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2342","id":9645997,"node_id":"MDEyOklzc3VlQ29tbWVudDk2NDU5OTc=","user":{"login":"karmi","id":4790,"node_id":"MDQ6VXNlcjQ3OTA=","avatar_url":"https://avatars1.githubusercontent.com/u/4790?v=4","gravatar_id":"","url":"https://api.github.com/users/karmi","html_url":"https://github.com/karmi","followers_url":"https://api.github.com/users/karmi/followers","following_url":"https://api.github.com/users/karmi/following{/other_user}","gists_url":"https://api.github.com/users/karmi/gists{/gist_id}","starred_url":"https://api.github.com/users/karmi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karmi/subscriptions","organizations_url":"https://api.github.com/users/karmi/orgs","repos_url":"https://api.github.com/users/karmi/repos","events_url":"https://api.github.com/users/karmi/events{/privacy}","received_events_url":"https://api.github.com/users/karmi/received_events","type":"User","site_admin":false},"created_at":"2012-10-21T18:42:02Z","updated_at":"2012-10-21T18:42:02Z","author_association":"CONTRIBUTOR","body":"@azitabh No, RestClient is the default client (as you see in the backtrace).\n\nYou have to specifically configure Tire to use Curb:\n\n``` ruby\nrequire 'curb'\nrequire 'tire/http/clients/curb'\nTire.configure do\n    client Tire::HTTP::Client::Curb\n  end\n```\n\n Curb uses keep-alive by default. Watch the `total_opened` entry in the http://localhost:9200/_cluster/nodes/stats?clear&http API while your script is running.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/9647217","html_url":"https://github.com/elastic/elasticsearch/issues/2342#issuecomment-9647217","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2342","id":9647217,"node_id":"MDEyOklzc3VlQ29tbWVudDk2NDcyMTc=","user":{"login":"azitabh","id":2002310,"node_id":"MDQ6VXNlcjIwMDIzMTA=","avatar_url":"https://avatars3.githubusercontent.com/u/2002310?v=4","gravatar_id":"","url":"https://api.github.com/users/azitabh","html_url":"https://github.com/azitabh","followers_url":"https://api.github.com/users/azitabh/followers","following_url":"https://api.github.com/users/azitabh/following{/other_user}","gists_url":"https://api.github.com/users/azitabh/gists{/gist_id}","starred_url":"https://api.github.com/users/azitabh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/azitabh/subscriptions","organizations_url":"https://api.github.com/users/azitabh/orgs","repos_url":"https://api.github.com/users/azitabh/repos","events_url":"https://api.github.com/users/azitabh/events{/privacy}","received_events_url":"https://api.github.com/users/azitabh/received_events","type":"User","site_admin":false},"created_at":"2012-10-21T20:31:29Z","updated_at":"2012-10-21T20:31:29Z","author_association":"NONE","body":"Thanks @karmi for help.\nUsing curb worked perfectly for me and I didn't get any error. I am closing this issue now.\n\nJust one more question. I have read your comment at https://gist.github.com/1205241 which says:\n\n```\n# In general, Curb seems to be more then two times faster the RestClient, in some cases it's three\n# to five times faster. I wonder if keep-alive has anything to do with it, but it probably does.\n#\n```\n\nThen, why is it that rest client is still being used as the default http clint?\nI am just wondering if switching permanently to curb might lead me to some other problem.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/9653266","html_url":"https://github.com/elastic/elasticsearch/issues/2342#issuecomment-9653266","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2342","id":9653266,"node_id":"MDEyOklzc3VlQ29tbWVudDk2NTMyNjY=","user":{"login":"karmi","id":4790,"node_id":"MDQ6VXNlcjQ3OTA=","avatar_url":"https://avatars1.githubusercontent.com/u/4790?v=4","gravatar_id":"","url":"https://api.github.com/users/karmi","html_url":"https://github.com/karmi","followers_url":"https://api.github.com/users/karmi/followers","following_url":"https://api.github.com/users/karmi/following{/other_user}","gists_url":"https://api.github.com/users/karmi/gists{/gist_id}","starred_url":"https://api.github.com/users/karmi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karmi/subscriptions","organizations_url":"https://api.github.com/users/karmi/orgs","repos_url":"https://api.github.com/users/karmi/repos","events_url":"https://api.github.com/users/karmi/events{/privacy}","received_events_url":"https://api.github.com/users/karmi/received_events","type":"User","site_admin":false},"created_at":"2012-10-22T05:53:57Z","updated_at":"2012-10-22T05:53:57Z","author_association":"CONTRIBUTOR","body":"RestClient is the default, because it's the most commonly used HTTP client in Ruby, and is more portable: doesn't need extra libraries (`libcurl`) and/or native extensions as is the case with Curb...\n","performed_via_github_app":null}]