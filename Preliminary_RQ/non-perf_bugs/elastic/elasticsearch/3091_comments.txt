[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18440657","html_url":"https://github.com/elastic/elasticsearch/issues/3091#issuecomment-18440657","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3091","id":18440657,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDQwNjU3","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2013-05-25T06:41:43Z","updated_at":"2013-05-25T06:41:43Z","author_association":"CONTRIBUTOR","body":"From the comment thread:\n\n> Actually both of those are the same millisecond value stored in the date field displayed differently (In the Summer 8 AM in Seattle is the same moment in time as 3 PM in London) Therefore, it depends on the definition of what the script aDateField.date is supposed to correspond to in the Joda date library and thus what toString method is used to convert the results back to the caller.  It is not a matter of honoring the original TZ, because it can't, the field stores a millisecond value; that's it.  On the way out nothing knows how it got that millisecond value into the field.   \n> \n> As Eric as observed\n> it WAS converting the millisecond value to the result string using UTC.\n> but now\n> it IS converting to the millisecond value to the result string using the DEFAULT VM timezone.\n\nThis sounds like a bug to me...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18451813","html_url":"https://github.com/elastic/elasticsearch/issues/3091#issuecomment-18451813","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3091","id":18451813,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDUxODEz","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2013-05-25T18:30:43Z","updated_at":"2013-05-25T18:30:43Z","author_association":"MEMBER","body":"It is a bug, it should have remained UTC, will fix shortly...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/28892046","html_url":"https://github.com/elastic/elasticsearch/issues/3091#issuecomment-28892046","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3091","id":28892046,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODkyMDQ2","user":{"login":"CodingFabian","id":176132,"node_id":"MDQ6VXNlcjE3NjEzMg==","avatar_url":"https://avatars1.githubusercontent.com/u/176132?v=4","gravatar_id":"","url":"https://api.github.com/users/CodingFabian","html_url":"https://github.com/CodingFabian","followers_url":"https://api.github.com/users/CodingFabian/followers","following_url":"https://api.github.com/users/CodingFabian/following{/other_user}","gists_url":"https://api.github.com/users/CodingFabian/gists{/gist_id}","starred_url":"https://api.github.com/users/CodingFabian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CodingFabian/subscriptions","organizations_url":"https://api.github.com/users/CodingFabian/orgs","repos_url":"https://api.github.com/users/CodingFabian/repos","events_url":"https://api.github.com/users/CodingFabian/events{/privacy}","received_events_url":"https://api.github.com/users/CodingFabian/received_events","type":"User","site_admin":false},"created_at":"2013-11-20T14:16:04Z","updated_at":"2013-11-20T14:22:44Z","author_association":"NONE","body":"~~I am observing that dates in from and to fields of range facets for date field are using local time zone instead of UTC~~\n~~For example, I have an entry in the index which says:~~\n~~upload_date: 2013-10-02T13:40:40.681Z~~\n~~When I do facetting on that field, the from value is for example\n~~2012-11-20T15:06:04.770+01:00~~\n~~The field is specified in index just as \"date\", no special formatting given.~~\n~~When I query the field from ES, the field value is also in UTC.~~\n\n~~So it seems that the generation of from and to bounds for range facets on date fields somehow does not utc, but a local time.~~\n\n~~Shall I create a new issue, is it a new issue or the same?~~\n\nUsual case of: I can see the error after writing the issue.\nWe are giving in in our date facet range query time stamps with +1 and it seems ES honors them when returning them back to us.\n","performed_via_github_app":null}]