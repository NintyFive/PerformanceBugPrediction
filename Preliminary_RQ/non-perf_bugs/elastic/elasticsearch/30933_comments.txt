[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/392828512","html_url":"https://github.com/elastic/elasticsearch/issues/30933#issuecomment-392828512","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30933","id":392828512,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjgyODUxMg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-05-29T15:50:23Z","updated_at":"2018-05-29T15:50:23Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/392828766","html_url":"https://github.com/elastic/elasticsearch/issues/30933#issuecomment-392828766","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30933","id":392828766,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjgyODc2Ng==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2018-05-29T15:51:02Z","updated_at":"2018-05-29T15:51:02Z","author_association":"CONTRIBUTOR","body":"Pinging @elastic/es-clients to have a look at this because if I add this before you support it then you probably won't be able to parse the tests.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/393455992","html_url":"https://github.com/elastic/elasticsearch/issues/30933#issuecomment-393455992","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30933","id":393455992,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MzQ1NTk5Mg==","user":{"login":"russcam","id":208231,"node_id":"MDQ6VXNlcjIwODIzMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/208231?v=4","gravatar_id":"","url":"https://api.github.com/users/russcam","html_url":"https://github.com/russcam","followers_url":"https://api.github.com/users/russcam/followers","following_url":"https://api.github.com/users/russcam/following{/other_user}","gists_url":"https://api.github.com/users/russcam/gists{/gist_id}","starred_url":"https://api.github.com/users/russcam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/russcam/subscriptions","organizations_url":"https://api.github.com/users/russcam/orgs","repos_url":"https://api.github.com/users/russcam/repos","events_url":"https://api.github.com/users/russcam/events{/privacy}","received_events_url":"https://api.github.com/users/russcam/received_events","type":"User","site_admin":false},"created_at":"2018-05-31T08:32:07Z","updated_at":"2018-05-31T08:32:07Z","author_association":"CONTRIBUTOR","body":"Thanks @nik9000 - this doesn't affect the .NET client as it doesn't use the YAML tests. I'll leave it to other clients to comment/take a look.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/393460212","html_url":"https://github.com/elastic/elasticsearch/issues/30933#issuecomment-393460212","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30933","id":393460212,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MzQ2MDIxMg==","user":{"login":"karmi","id":4790,"node_id":"MDQ6VXNlcjQ3OTA=","avatar_url":"https://avatars1.githubusercontent.com/u/4790?v=4","gravatar_id":"","url":"https://api.github.com/users/karmi","html_url":"https://github.com/karmi","followers_url":"https://api.github.com/users/karmi/followers","following_url":"https://api.github.com/users/karmi/following{/other_user}","gists_url":"https://api.github.com/users/karmi/gists{/gist_id}","starred_url":"https://api.github.com/users/karmi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karmi/subscriptions","organizations_url":"https://api.github.com/users/karmi/orgs","repos_url":"https://api.github.com/users/karmi/repos","events_url":"https://api.github.com/users/karmi/events{/privacy}","received_events_url":"https://api.github.com/users/karmi/received_events","type":"User","site_admin":false},"created_at":"2018-05-31T08:45:53Z","updated_at":"2018-05-31T08:45:53Z","author_association":"CONTRIBUTOR","body":"@nik9000 , in general, the clients usually follow what is needed on the ES side, so, in general, it shouldn't be a problem.\r\n\r\nHowever, I don't have a clear understanding _how_ this flag will be supported, ie. how the runner will know to skip these tests... We run against a variety of distributions, I imagine: regular \"zip\" downloads, builds from source, Docker containers, ..., ...","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/393590119","html_url":"https://github.com/elastic/elasticsearch/issues/30933#issuecomment-393590119","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30933","id":393590119,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MzU5MDExOQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2018-05-31T16:23:41Z","updated_at":"2018-05-31T16:23:41Z","author_association":"CONTRIBUTOR","body":"> However, I don't have a clear understanding how this flag will be supported, ie. how the runner will know to skip these tests... We run against a variety of distributions, I imagine: regular \"zip\" downloads, builds from source, Docker containers, ..., ...\r\n\r\nThe goal from my side is to skip tests if xpack is installed. Or to skip them if it isn't. The [core yaml tests](https://github.com/elastic/elasticsearch/tree/master/rest-api-spec/src/main/resources/rest-api-spec/test) already have a half dozen tests that fail if xpack is installed. So if you pointed your client at the default distribution they'd fail. We aren't going to add any tests to the core yml tests that fail without xpack installed but we use the yaml tests in a bunch of other places and we will need that feature there.\r\n\r\nThe simplest way to wire this up to the Elasticsearch build is to use the distribution which almost always `integ-test-zip`, `oss-zip`, or `zip`. There are some other places where we use `rpm` or `tar` but that is fairly rare. So that data is super available to us and easy to send to the runner. I'm not sure how you'd do it.\r\n\r\nNow that I think about it I wonder if we'd be better off with a way to `skip: distro-flavor: default` or `skip: distro-flavor: oss`. That way we don't care about `rpm` vs `zip` vs `tar`.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/393593453","html_url":"https://github.com/elastic/elasticsearch/issues/30933#issuecomment-393593453","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30933","id":393593453,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MzU5MzQ1Mw==","user":{"login":"karmi","id":4790,"node_id":"MDQ6VXNlcjQ3OTA=","avatar_url":"https://avatars1.githubusercontent.com/u/4790?v=4","gravatar_id":"","url":"https://api.github.com/users/karmi","html_url":"https://github.com/karmi","followers_url":"https://api.github.com/users/karmi/followers","following_url":"https://api.github.com/users/karmi/following{/other_user}","gists_url":"https://api.github.com/users/karmi/gists{/gist_id}","starred_url":"https://api.github.com/users/karmi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karmi/subscriptions","organizations_url":"https://api.github.com/users/karmi/orgs","repos_url":"https://api.github.com/users/karmi/repos","events_url":"https://api.github.com/users/karmi/events{/privacy}","received_events_url":"https://api.github.com/users/karmi/received_events","type":"User","site_admin":false},"created_at":"2018-05-31T16:33:05Z","updated_at":"2018-05-31T16:33:05Z","author_association":"CONTRIBUTOR","body":"> Now that I think about it I wonder if we'd be better off with a way to skip: distro-flavor: default or skip: distro-flavor: oss. That way we don't care about rpm vs zip vs tar.\r\n\r\nThat sounds indeed better, since the way you describe it, Nik, seems like it's more about _features_, and not about a specific distribution/installation mechanism. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/393610506","html_url":"https://github.com/elastic/elasticsearch/issues/30933#issuecomment-393610506","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30933","id":393610506,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MzYxMDUwNg==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2018-05-31T17:28:49Z","updated_at":"2018-05-31T17:28:49Z","author_association":"CONTRIBUTOR","body":"> That sounds indeed better, since the way you describe it, Nik, seems like it's more about features, and not about a specific distribution/installation mechanism.\r\n\r\nRight. It is more about what the installation contained.\r\n\r\nAre you suggesting using the `features` block in `skip` that we already have? Like\r\n\r\n```\r\nskip:\r\n  features: oss\r\n```\r\n\r\nto skip tests that will fail with xpack and\r\n\r\n```\r\nskip:\r\n  features: xpack\r\n```\r\n\r\nto skip tests that will fail without xpack?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/393620612","html_url":"https://github.com/elastic/elasticsearch/issues/30933#issuecomment-393620612","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30933","id":393620612,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MzYyMDYxMg==","user":{"login":"karmi","id":4790,"node_id":"MDQ6VXNlcjQ3OTA=","avatar_url":"https://avatars1.githubusercontent.com/u/4790?v=4","gravatar_id":"","url":"https://api.github.com/users/karmi","html_url":"https://github.com/karmi","followers_url":"https://api.github.com/users/karmi/followers","following_url":"https://api.github.com/users/karmi/following{/other_user}","gists_url":"https://api.github.com/users/karmi/gists{/gist_id}","starred_url":"https://api.github.com/users/karmi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karmi/subscriptions","organizations_url":"https://api.github.com/users/karmi/orgs","repos_url":"https://api.github.com/users/karmi/repos","events_url":"https://api.github.com/users/karmi/events{/privacy}","received_events_url":"https://api.github.com/users/karmi/received_events","type":"User","site_admin":false},"created_at":"2018-05-31T17:59:46Z","updated_at":"2018-05-31T17:59:46Z","author_association":"CONTRIBUTOR","body":"> Are you suggesting using the features block in skip that we already have?\r\n\r\nI don't know enough about the problem you're solving to be sure whether the existing `feature` \"feature\" (sorry :) would work for you in this situation â€” but if it would, then it has an added benefit that it's already supported.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/393640304","html_url":"https://github.com/elastic/elasticsearch/issues/30933#issuecomment-393640304","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30933","id":393640304,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MzY0MDMwNA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2018-05-31T18:55:43Z","updated_at":"2018-05-31T18:55:43Z","author_association":"CONTRIBUTOR","body":"I talked this through with @talevy and convinced myself that:\r\n```\r\nskip:\r\n  features: xpack\r\n```\r\n\r\nis good.\r\n\r\n```\r\nskip:\r\n  features: oss\r\n```\r\n\r\nmight make more sense as\r\n\r\n```\r\nskip:\r\n  features: no_xpack\r\n```\r\n\r\nBut these'd be fairly easy to implement on our side and they'd work properly on the lang-clients side because all the tests that require these features would be skipped until the clients understand them.","performed_via_github_app":null}]