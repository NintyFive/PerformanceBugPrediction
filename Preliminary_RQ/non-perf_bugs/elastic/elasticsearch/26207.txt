{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/26207","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26207/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26207/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26207/events","html_url":"https://github.com/elastic/elasticsearch/issues/26207","id":250127789,"node_id":"MDU6SXNzdWUyNTAxMjc3ODk=","number":26207,"title":"Vagrant fixtures should clean themselves up appropriately","user":{"login":"jbaiera","id":875779,"node_id":"MDQ6VXNlcjg3NTc3OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/875779?v=4","gravatar_id":"","url":"https://api.github.com/users/jbaiera","html_url":"https://github.com/jbaiera","followers_url":"https://api.github.com/users/jbaiera/followers","following_url":"https://api.github.com/users/jbaiera/following{/other_user}","gists_url":"https://api.github.com/users/jbaiera/gists{/gist_id}","starred_url":"https://api.github.com/users/jbaiera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbaiera/subscriptions","organizations_url":"https://api.github.com/users/jbaiera/orgs","repos_url":"https://api.github.com/users/jbaiera/repos","events_url":"https://api.github.com/users/jbaiera/events{/privacy}","received_events_url":"https://api.github.com/users/jbaiera/received_events","type":"User","site_admin":false},"labels":[{"id":106454670,"node_id":"MDU6TGFiZWwxMDY0NTQ2NzA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Build","name":":Delivery/Build","color":"0e8a16","default":false,"description":"Build or test infrastructure"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2017-08-14T19:22:07Z","updated_at":"2020-11-11T21:42:29Z","closed_at":"2018-03-14T03:57:03Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"We are seeing problems in environments like build and CI servers where Vagrant machines are not being cleaned up after a build is completed. We use Vagrant for packaging tests, and for integration test fixtures like the `krb5kdc` in the HDFS Repository plugin. In the latter case, Vagrant test fixtures are ignored if the local environment cannot support Vagrant/VirtualBox. \r\n\r\nWhen the build process is done using a Vagrant box, the box is often halted instead of destroyed. This is preferable in the local development environment since it can decrease the overhead of iterating on tests that use these boxes - they do not need to be re-copied and re-provisioned each execution, instead they are just started back up again. However, in the case of a build environment, projects are often blown away and freshly checked out. The previously halted machines are left abandoned on build machines which can cause the disk space to be exhausted after just over a week of builds.\r\n\r\nSuggestion: Our Vagrant based fixture objects should be environment aware enough to know when they should destroy themselves or when it's ok to just halt after a task is completed. At the moment, my thoughts around this are either sensing an extra option passed into the build or picking something up from the environment variables.","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}