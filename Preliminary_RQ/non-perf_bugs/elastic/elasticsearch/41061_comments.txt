[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/481613856","html_url":"https://github.com/elastic/elasticsearch/issues/41061#issuecomment-481613856","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41061","id":481613856,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MTYxMzg1Ng==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-04-10T09:25:37Z","updated_at":"2019-04-10T09:25:37Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/481629593","html_url":"https://github.com/elastic/elasticsearch/issues/41061#issuecomment-481629593","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41061","id":481629593,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MTYyOTU5Mw==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2019-04-10T10:12:08Z","updated_at":"2019-04-10T10:12:08Z","author_association":"MEMBER","body":"And another one: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+intake/3062/console","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/481658111","html_url":"https://github.com/elastic/elasticsearch/issues/41061#issuecomment-481658111","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41061","id":481658111,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MTY1ODExMQ==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2019-04-10T11:51:02Z","updated_at":"2019-04-10T11:51:02Z","author_association":"MEMBER","body":"This one looks slightly different but I'll add it here to get a better overview of things:\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.x+artifactory/283/console\r\n\r\n```\r\n* What went wrong:\r\nJava heap space\r\n\r\n* Try:\r\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\nrunbld>>> <<<<<<<<<<<< SCRIPT EXECUTION END <<<<<<<<<<<<\r\nrunbld>>> DURATION: 2055497ms\r\nrunbld>>> STDOUT: 106231627 bytes\r\nrunbld>>> STDERR: 0 bytes\r\nrunbld>>> WRAPPED PROCESS: FAILURE (1)\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/481725471","html_url":"https://github.com/elastic/elasticsearch/issues/41061#issuecomment-481725471","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41061","id":481725471,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MTcyNTQ3MQ==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-04-10T14:55:28Z","updated_at":"2019-04-10T14:55:28Z","author_association":"CONTRIBUTOR","body":"I suspect that this is the Gradle client module that is running out of memory here no the daemon, because there's no demon crashed message. \r\nWe  got a heap of 64M configured there via a Gradle upgrade in 530e1e389d4 . \r\nThe new test runner might be creating more pressure, will try to increase it.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/481729550","html_url":"https://github.com/elastic/elasticsearch/issues/41061#issuecomment-481729550","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41061","id":481729550,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MTcyOTU1MA==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2019-04-10T15:04:49Z","updated_at":"2019-04-10T15:04:49Z","author_association":"MEMBER","body":"Also: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+periodic/1030/console","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/481788053","html_url":"https://github.com/elastic/elasticsearch/issues/41061#issuecomment-481788053","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41061","id":481788053,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MTc4ODA1Mw==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2019-04-10T17:34:39Z","updated_at":"2019-04-10T17:34:39Z","author_association":"MEMBER","body":"Two more: \r\n\r\n- a `Java heap space` failure on 7.x: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.x+intake/1008/\r\n- a `OutOfMemoryError` on master: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+intake/3074","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/481828627","html_url":"https://github.com/elastic/elasticsearch/issues/41061#issuecomment-481828627","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41061","id":481828627,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MTgyODYyNw==","user":{"login":"jrodewig","id":40268737,"node_id":"MDQ6VXNlcjQwMjY4NzM3","avatar_url":"https://avatars1.githubusercontent.com/u/40268737?v=4","gravatar_id":"","url":"https://api.github.com/users/jrodewig","html_url":"https://github.com/jrodewig","followers_url":"https://api.github.com/users/jrodewig/followers","following_url":"https://api.github.com/users/jrodewig/following{/other_user}","gists_url":"https://api.github.com/users/jrodewig/gists{/gist_id}","starred_url":"https://api.github.com/users/jrodewig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrodewig/subscriptions","organizations_url":"https://api.github.com/users/jrodewig/orgs","repos_url":"https://api.github.com/users/jrodewig/repos","events_url":"https://api.github.com/users/jrodewig/events{/privacy}","received_events_url":"https://api.github.com/users/jrodewig/received_events","type":"User","site_admin":false},"created_at":"2019-04-10T19:25:03Z","updated_at":"2019-04-10T19:25:03Z","author_association":"CONTRIBUTOR","body":"Another: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.0+intake/698/","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/482523671","html_url":"https://github.com/elastic/elasticsearch/issues/41061#issuecomment-482523671","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41061","id":482523671,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MjUyMzY3MQ==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-04-12T10:25:03Z","updated_at":"2019-04-12T10:25:03Z","author_association":"CONTRIBUTOR","body":"Looking at some failures after #41031 were merged and seems no heapdump was produced which seems to confirm this is a problem on the client. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/484062216","html_url":"https://github.com/elastic/elasticsearch/issues/41061#issuecomment-484062216","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41061","id":484062216,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDA2MjIxNg==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2019-04-17T12:29:49Z","updated_at":"2019-04-17T12:29:49Z","author_association":"MEMBER","body":"We see another instance of this in https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.x+multijob-unix-compatibility/os=centos-7&&immutable/113/console\r\n\r\nIt fails with:\r\n\r\n```\r\nGradle Test Executor 54 finished executing tests.\r\njava.lang.OutOfMemoryError: Java heap space\r\nDumping heap to java_pid32651.hprof ...\r\nHeap dump file created [169289336 bytes in 1.669 secs]\r\n\r\nException: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread \"pool-1-thread-1\"\r\n\r\nException: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread \"main\"\r\n```\r\n\r\nInspecting the resulting heap dump we see almost all of the memory (124 out of 128MB) taken up by instances of `org.gradle.internal.logging.events.StyledTextOutputEvent` so to me this seems related to Gradle accumulating log events in the background.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/484076170","html_url":"https://github.com/elastic/elasticsearch/issues/41061#issuecomment-484076170","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41061","id":484076170,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDA3NjE3MA==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2019-04-17T13:06:07Z","updated_at":"2019-04-17T13:06:07Z","author_association":"MEMBER","body":"There is also another instance of this failure in https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.x+multijob-unix-compatibility/os=oraclelinux-6/113/console. The assessment is identical to the failure above hence I'll omit the details.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/484462713","html_url":"https://github.com/elastic/elasticsearch/issues/41061#issuecomment-484462713","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41061","id":484462713,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDQ2MjcxMw==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-04-18T11:24:14Z","updated_at":"2019-04-18T11:24:14Z","author_association":"CONTRIBUTOR","body":"Another failure: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+intake/3174/","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/484591114","html_url":"https://github.com/elastic/elasticsearch/issues/41061#issuecomment-484591114","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41061","id":484591114,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDU5MTExNA==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2019-04-18T16:55:40Z","updated_at":"2019-04-18T16:55:40Z","author_association":"CONTRIBUTOR","body":"Certainly the way that test runners ship log output to the client has changed. It's not surprising the Gradle native daemon->client communication creates more garbage. I'm wondering if the recent change to remove `--info` will also help here. One side-effect of the Gradle test runner migration was that we ended up creating _a lot_ more test output.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/489597179","html_url":"https://github.com/elastic/elasticsearch/issues/41061#issuecomment-489597179","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41061","id":489597179,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4OTU5NzE3OQ==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-05-06T12:07:00Z","updated_at":"2019-05-06T12:07:00Z","author_association":"CONTRIBUTOR","body":"Looking at build logs it looks like this stopped happening after the cleanup. ","performed_via_github_app":null}]