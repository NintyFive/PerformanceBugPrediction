{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/6265","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6265/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6265/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6265/events","html_url":"https://github.com/elastic/elasticsearch/issues/6265","id":34000422,"node_id":"MDU6SXNzdWUzNDAwMDQyMg==","number":6265,"title":"Add configurable timeout for cluster state transmission to joining nodes","user":{"login":"seang-es","id":6352850,"node_id":"MDQ6VXNlcjYzNTI4NTA=","avatar_url":"https://avatars1.githubusercontent.com/u/6352850?v=4","gravatar_id":"","url":"https://api.github.com/users/seang-es","html_url":"https://github.com/seang-es","followers_url":"https://api.github.com/users/seang-es/followers","following_url":"https://api.github.com/users/seang-es/following{/other_user}","gists_url":"https://api.github.com/users/seang-es/gists{/gist_id}","starred_url":"https://api.github.com/users/seang-es/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seang-es/subscriptions","organizations_url":"https://api.github.com/users/seang-es/orgs","repos_url":"https://api.github.com/users/seang-es/repos","events_url":"https://api.github.com/users/seang-es/events{/privacy}","received_events_url":"https://api.github.com/users/seang-es/received_events","type":"User","site_admin":false},"labels":[{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2014-05-21T16:36:08Z","updated_at":"2015-10-14T16:34:28Z","closed_at":"2015-10-14T16:34:28Z","author_association":"NONE","active_lock_reason":null,"body":"A customer encountered a problem where a very large mapping added to the indices (120 MB) caused new nodes joining the cluster to time out with errors similar to:\n\n2014-05-20 18:57:54,428 INFO [hostname.domain][generic][T#1]] discovery.zen - [hostname.domain] failed to send join request to master [[master.domain][KvDPGxGJSOyuU-LgDBSYiw][master.domain][inet[/10.X.X.X:27892]]{data=false, max_local_storage_nodes=1, master=true}], reason [org.elasticsearch.ElasticsearchTimeoutException: Timeout waiting for task.]\n\nA configurable timeout here would let the cluster start up and prevent it from dropping as cluster state was updated during normal operation.  This problem also led to direct buffer memory errors on the master as it attempted to write the full cluster state to the buffer multiple times to handle retries and other nodes joining the cluster.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}