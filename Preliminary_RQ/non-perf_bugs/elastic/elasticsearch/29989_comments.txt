[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/393901739","html_url":"https://github.com/elastic/elasticsearch/issues/29989#issuecomment-393901739","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29989","id":393901739,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MzkwMTczOQ==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2018-06-01T14:41:02Z","updated_at":"2018-06-01T14:41:02Z","author_association":"CONTRIBUTOR","body":"Failed again here: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.x+intake/1801/console","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/393906429","html_url":"https://github.com/elastic/elasticsearch/issues/29989#issuecomment-393906429","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29989","id":393906429,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MzkwNjQyOQ==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2018-06-01T14:56:36Z","updated_at":"2018-06-01T14:56:36Z","author_association":"CONTRIBUTOR","body":"Still doesn't reproduce locally, the errors in the failed build were : \r\n```\r\n14:34:56 ERROR   2.30s J0 | SSLTrustRestrictionsTests.testCertificateWithTrustedNameIsAccepted <<< FAILURES!\r\n14:34:56    > Throwable #1: java.lang.AssertionError: handshake should have been successful, but failed with java.net.SocketException: Broken pipe (Write failed)\r\n14:34:56    > \tat org.elasticsearch.xpack.ssl.SSLTrustRestrictionsTests.testCertificateWithTrustedNameIsAccepted(SSLTrustRestrictionsTests.java:163)\r\n14:34:56    > \tat java.lang.Thread.run(Thread.java:748)Throwable #2: NoNodeAvailableException[None of the configured nodes are available: [{#transport#-1}{_cFfXO0rR1GeO-P4u6OtWw}{127.0.0.1}{127.0.0.1:30180}]]\r\n14:34:56    > \tat org.elasticsearch.client.transport.TransportClientNodesService.ensureNodesAreAvailable(TransportClientNodesService.java:347)\r\n14:34:56    > \tat org.elasticsearch.client.transport.TransportClientNodesService.execute(TransportClientNodesService.java:245)\r\n14:34:56    > \tat org.elasticsearch.client.transport.TransportProxyClient.execute(TransportProxyClient.java:60)\r\n14:34:56    > \tat org.elasticsearch.client.transport.TransportClient.doExecute(TransportClient.java:373)\r\n14:34:56    > \tat org.elasticsearch.client.support.AbstractClient.execute(AbstractClient.java:405)\r\n14:34:56    > \tat org.elasticsearch.client.support.AbstractClient.execute(AbstractClient.java:394)\r\n14:34:56    > \tat org.elasticsearch.client.support.AbstractClient$IndicesAdmin.execute(AbstractClient.java:1247)\r\n14:34:56    > \tat org.elasticsearch.action.ActionRequestBuilder.execute(ActionRequestBuilder.java:46)\r\n14:34:56    > \tat org.elasticsearch.action.ActionRequestBuilder.get(ActionRequestBuilder.java:53)\r\n14:34:56    > \tat org.elasticsearch.test.hamcrest.ElasticsearchAssertions.assertAcked(ElasticsearchAssertions.java:114)\r\n14:34:56    > \tat org.elasticsearch.test.TestCluster.wipeIndices(TestCluster.java:141)\r\n14:34:56    > \tat org.elasticsearch.test.TestCluster.wipe(TestCluster.java:78)\r\n14:34:56    > \tat org.elasticsearch.test.ESIntegTestCase.afterInternal(ESIntegTestCase.java:577)\r\n14:34:56    > \tat org.elasticsearch.test.ESIntegTestCase.cleanUpCluster(ESIntegTestCase.java:2081)\r\n14:34:56    > \tat java.lang.Thread.run(Thread.java:748)\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/408176638","html_url":"https://github.com/elastic/elasticsearch/issues/29989#issuecomment-408176638","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29989","id":408176638,"node_id":"MDEyOklzc3VlQ29tbWVudDQwODE3NjYzOA==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2018-07-26T17:39:33Z","updated_at":"2018-07-26T17:39:33Z","author_association":"CONTRIBUTOR","body":"@tvernum I hope you don't mind me updating this issue to add these test failures as well.  It didn't seem worth creating a separate issue for each.\r\n\r\norg.elasticsearch.xpack.ssl.SSLTrustRestrictionsTests testCertificateWithUntrustedNameFails\r\norg.elasticsearch.xpack.ssl.SSLTrustRestrictionsTests testRestrictionsAreReloaded\r\n\r\nFailure Link:\r\n(https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+matrix-java-periodic/ES_BUILD_JAVA=java10,ES_RUNTIME_JAVA=java11,nodes=virtual&&linux/200/console)\r\n\r\nReproduce with:\r\n\r\nREPRODUCE WITH: \r\n```\r\n./gradlew :x-pack:plugin:security:test \\\r\n  -Dtests.seed=E88D976EA1519B74 \\\r\n  -Dtests.class=org.elasticsearch.xpack.ssl.SSLTrustRestrictionsTests \\\r\n  -Dtests.method=\"testCertificateWithUntrustedNameFails\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=fr-SN \\\r\n  -Dtests.timezone=PST8PDT\r\n```\r\n\r\nREPRODUCE WITH: \r\n```\r\n./gradlew :x-pack:plugin:security:test \\\r\n  -Dtests.seed=E88D976EA1519B74 \\\r\n  -Dtests.class=org.elasticsearch.xpack.ssl.SSLTrustRestrictionsTests \\\r\n  -Dtests.method=\"testRestrictionsAreReloaded\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=fr-SN \\\r\n  -Dtests.timezone=PST8PDT\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/409115874","html_url":"https://github.com/elastic/elasticsearch/issues/29989#issuecomment-409115874","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29989","id":409115874,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTExNTg3NA==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2018-07-31T06:57:13Z","updated_at":"2018-07-31T06:57:13Z","author_association":"MEMBER","body":"We have another instance of these failures in https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+matrix-java-periodic/ES_BUILD_JAVA=java10,ES_RUNTIME_JAVA=java11,nodes=virtual&&linux/208/console\r\n\r\nwith the following reproduction lines:\r\n\r\n```\r\n./gradlew :x-pack:plugin:security:test \\\r\n  -Dtests.seed=28197402351DB64D \\\r\n  -Dtests.class=org.elasticsearch.xpack.ssl.SSLTrustRestrictionsTests \\\r\n  -Dtests.method=\"testRestrictionsAreReloaded\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=en-MP \\\r\n  -Dtests.timezone=Africa/Dakar\r\n```\r\n\r\nfailed with:\r\n\r\n```\r\nERROR   1.65s J1 | SSLTrustRestrictionsTests.testRestrictionsAreReloaded <<< FAILURES!\r\n   > Throwable #1: javax.net.ssl.SSLException: readRecord\r\n   >    at __randomizedtesting.SeedInfo.seed([28197402351DB64D:ED9D0A8C67A18C2F]:0)\r\n   >    at java.base/sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:819)\r\n   >    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:383)\r\n   >    at org.elasticsearch.xpack.ssl.SSLTrustRestrictionsTests.tryConnect(SSLTrustRestrictionsTests.java:223)\r\n   >    at org.elasticsearch.xpack.ssl.SSLTrustRestrictionsTests.lambda$testRestrictionsAreReloaded$2(SSLTrustRestrictionsTests.java:189)\r\n   >    at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:819)\r\n   >    at org.elasticsearch.xpack.ssl.SSLTrustRestrictionsTests.testRestrictionsAreReloaded(SSLTrustRestrictionsTests.java:187)\r\n   >    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n   >    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n   >    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n   >    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n   >    at java.base/java.lang.Thread.run(Thread.java:834)\r\n   > Caused by: java.net.SocketException: Broken pipe (Write failed)\r\n   >    at java.base/java.net.SocketOutputStream.socketWrite0(Native Method)\r\n   >    at java.base/java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:110)\r\n   >    at java.base/java.net.SocketOutputStream.write(SocketOutputStream.java:150)\r\n   >    at java.base/sun.security.ssl.SSLSocketOutputRecord.flush(SSLSocketOutputRecord.java:227)\r\n   >    at java.base/sun.security.ssl.HandshakeOutStream.flush(HandshakeOutStream.java:81)\r\n   >    at java.base/sun.security.ssl.CertificateVerify$T12CertificateVerifyProducer.produce(CertificateVerify.java:749)\r\n   >    at java.base/sun.security.ssl.SSLHandshake.produce(SSLHandshake.java:429)\r\n   >    at java.base/sun.security.ssl.ServerHelloDone$ServerHelloDoneConsumer.consume(ServerHelloDone.java:173)\r\n   >    at java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:390)\r\n   >    at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:445)\r\n   >    at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:422)\r\n   >    at java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:178)\r\n   >    at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:164)\r\n   >    at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:877)\r\n   >    at java.base/sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:810)\r\n```\r\n\r\n```\r\n./gradlew :x-pack:plugin:security:test \\\r\n  -Dtests.seed=28197402351DB64D \\\r\n  -Dtests.class=org.elasticsearch.xpack.ssl.SSLTrustRestrictionsTests \\\r\n  -Dtests.method=\"testCertificateWithUntrustedNameFails\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=en-MP \\\r\n  -Dtests.timezone=Africa/Dakar\r\n```\r\n\r\nfailed with\r\n\r\n```\r\nFAILURE 0.31s J1 | SSLTrustRestrictionsTests.testCertificateWithUntrustedNameFails <<< FAILURES!\r\n   > Throwable #1: java.lang.AssertionError: handshake should have failed, but was successful\r\n   >    at __randomizedtesting.SeedInfo.seed([28197402351DB64D:3D61E9EF63673AFE]:0)\r\n   >    at org.elasticsearch.xpack.ssl.SSLTrustRestrictionsTests.testCertificateWithUntrustedNameFails(SSLTrustRestrictionsTests.java:179)\r\n   >    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n   >    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n   >    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n   >    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n   >    at java.base/java.lang.Thread.run(Thread.java:834)\r\n```\r\n\r\nBoth did not reproduce locally (`JAVA_HOME`: Java 10.0.2+13, `RUNTIME_JAVA_HOME`: Java 11-ea+22).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/409236264","html_url":"https://github.com/elastic/elasticsearch/issues/29989#issuecomment-409236264","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29989","id":409236264,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTIzNjI2NA==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2018-07-31T14:14:56Z","updated_at":"2018-07-31T14:14:56Z","author_association":"MEMBER","body":"And we have another one in https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+matrix-java-periodic/ES_BUILD_JAVA=java10,ES_RUNTIME_JAVA=java11,nodes=virtual&&linux/209/console\r\n\r\n```\r\n./gradlew :x-pack:plugin:security:test \\\r\n  -Dtests.seed=B0DEA59D380A135F \\\r\n  -Dtests.class=org.elasticsearch.xpack.ssl.SSLTrustRestrictionsTests \\\r\n  -Dtests.method=\"testCertificateWithUntrustedNameFails\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=guz-KE \\\r\n  -Dtests.timezone=Etc/GMT+5\r\n```\r\n\r\nand\r\n\r\n```\r\n./gradlew :x-pack:plugin:security:test \\\r\n  -Dtests.seed=B0DEA59D380A135F \\\r\n  -Dtests.class=org.elasticsearch.xpack.ssl.SSLTrustRestrictionsTests \\\r\n  -Dtests.method=\"testRestrictionsAreReloaded\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=guz-KE \\\r\n  -Dtests.timezone=Etc/GMT+5\r\n```\r\n\r\nAs the newer failures all appeared on Java 11, I'm gonna label this as Java 11 issue as well. In addition, I'll mute those tests on Java 11.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/409246797","html_url":"https://github.com/elastic/elasticsearch/issues/29989#issuecomment-409246797","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29989","id":409246797,"node_id":"MDEyOklzc3VlQ29tbWVudDQwOTI0Njc5Nw==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2018-07-31T14:44:39Z","updated_at":"2018-07-31T14:44:39Z","author_association":"MEMBER","body":"The tests are muted on master in 5f302580f9dea18b389007b861fc06b013e94499 and on 6.x in 5b96abeaf91d6ec36b70cfd682d8d306066c87b1.","performed_via_github_app":null}]