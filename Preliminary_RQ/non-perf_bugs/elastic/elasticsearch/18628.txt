{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/18628","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18628/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18628/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18628/events","html_url":"https://github.com/elastic/elasticsearch/issues/18628","id":157349673,"node_id":"MDU6SXNzdWUxNTczNDk2NzM=","number":18628,"title":"2.3.3 reindex api - InvalidIndexNameException[Invalid index name [_reindex]","user":{"login":"natelapp","id":15839796,"node_id":"MDQ6VXNlcjE1ODM5Nzk2","avatar_url":"https://avatars1.githubusercontent.com/u/15839796?v=4","gravatar_id":"","url":"https://api.github.com/users/natelapp","html_url":"https://github.com/natelapp","followers_url":"https://api.github.com/users/natelapp/followers","following_url":"https://api.github.com/users/natelapp/following{/other_user}","gists_url":"https://api.github.com/users/natelapp/gists{/gist_id}","starred_url":"https://api.github.com/users/natelapp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/natelapp/subscriptions","organizations_url":"https://api.github.com/users/natelapp/orgs","repos_url":"https://api.github.com/users/natelapp/repos","events_url":"https://api.github.com/users/natelapp/events{/privacy}","received_events_url":"https://api.github.com/users/natelapp/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2016-05-28T17:51:23Z","updated_at":"2016-05-29T23:05:01Z","closed_at":"2016-05-29T11:00:53Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\nGitHub is reserved for bug reports and feature requests. The best place\nto ask a general question is at the Elastic Discourse forums at\nhttps://discuss.elastic.co. If you are in fact posting a bug report or\na feature request, please include one and only one of the below blocks\nin your new issue.\n-->\n\n<!--\nIf you are filing a bug report, please remove the below feature\nrequest block and provide responses for all of the below items.\n-->\n\n**Elasticsearch version**: 2.3.3\n\n**JVM version**: 1.8.0_91\n\n**OS version**: Amazon Linux AMI release 2016.03\n\n**Description of the problem including expected versus actual behavior**:\n\nI'm attempting to use the new [reindex api](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-reindex.html) but am receiving an error `[_reindex] failed to create\n[_reindex] InvalidIndexNameException[Invalid index name [_reindex], must not start with '_']`\n\nI could be overlooking something simple, but I'm just not seeing what I'm doing wrong if that's the case.\n\n**Steps to reproduce**:\n1.  Executed the following line: \n\n```\ncurl -XPOST 'http://es1:9200/_reindex?pretty' -d '{\"source\":{\"index\":\"medr-discovery-index-v2-20160320\"},\"dest\":{\"index\":\"medr-discovery-index-v2-20160528\",\"version_type\":\"external\"}}'\n```\n\n**Provide logs (if relevant)**:\n\nI'm running 2.3.3:\n\n```\n$ curl -XGET 'http://es1:9200'\n{\n  \"name\" : \"es1-dev\",\n  \"cluster_name\" : \"medr_elz_dev\",\n  \"version\" : {\n    \"number\" : \"2.3.3\",\n    \"build_hash\" : \"218bdf10790eef486ff2c41a3df5cfa32dadcfde\",\n    \"build_timestamp\" : \"2016-05-17T15:40:04Z\",\n    \"build_snapshot\" : false,\n    \"lucene_version\" : \"5.5.0\"\n  },\n  \"tagline\" : \"You Know, for Search\"\n}\n```\n\nI execute the command above and receive this error:\n\n```\n{\n  \"error\" : {\n    \"root_cause\" : [ {\n      \"type\" : \"invalid_index_name_exception\",\n      \"reason\" : \"Invalid index name [_reindex], must not start with '_'\",\n      \"index\" : \"_reindex\"\n    } ],\n    \"type\" : \"invalid_index_name_exception\",\n    \"reason\" : \"Invalid index name [_reindex], must not start with '_'\",\n    \"index\" : \"_reindex\"\n  },\n  \"status\" : 400\n}\n```\n\nThese are the logs from the single node in this cluster:\n\n```\n[2016-05-28 17:04:43,943][INFO ][node                     ] [es1-dev] version[2.3.3], pid[9628], build[218bdf1/2016-05-17T15:40:04Z]\n[2016-05-28 17:04:43,943][INFO ][node                     ] [es1-dev] initializing ...\n[2016-05-28 17:04:44,928][INFO ][plugins                  ] [es1-dev] modules [], plugins [analysis-phonetic, license, analysis-kuromoji, cloud-aws, lang-fields-native, analysis-icu, marvel-agent, analysis-smartcn, hq], sites [hq]\n[2016-05-28 17:04:44,958][INFO ][env                      ] [es1-dev] using [1] data paths, mounts [[/data (/dev/xvdb)]], net usable_space [476gb], net total_space [503.8gb], spins? [no], types [ext4]\n[2016-05-28 17:04:44,958][INFO ][env                      ] [es1-dev] heap size [3.9gb], compressed ordinary object pointers [true]\n[2016-05-28 17:04:44,958][WARN ][env                      ] [es1-dev] max file descriptors [65535] for elasticsearch process likely too low, consider increasing to at least [65536]\n[2016-05-28 17:04:48,000][INFO ][node                     ] [es1-dev] initialized\n[2016-05-28 17:04:48,000][INFO ][node                     ] [es1-dev] starting ...\n[2016-05-28 17:04:48,157][INFO ][transport                ] [es1-dev] publish_address {10.0.2.10:9300}, bound_addresses {10.0.2.10:9300}\n[2016-05-28 17:04:48,162][INFO ][discovery                ] [es1-dev] medr_elz_dev/vFYAS4mxSd68SCnF1NVY6g\n[2016-05-28 17:04:58,011][INFO ][marvel.agent.exporter    ] [es1-dev] skipping exporter [default_local] as it isn't ready yet\n[2016-05-28 17:05:08,011][INFO ][marvel.agent.exporter    ] [es1-dev] skipping exporter [default_local] as it isn't ready yet\n[2016-05-28 17:05:18,012][INFO ][marvel.agent.exporter    ] [es1-dev] skipping exporter [default_local] as it isn't ready yet\n[2016-05-28 17:05:18,165][WARN ][discovery                ] [es1-dev] waited for 30s and no initial state was set by the discovery\n[2016-05-28 17:05:18,171][INFO ][http                     ] [es1-dev] publish_address {10.0.2.10:9200}, bound_addresses {10.0.2.10:9200}\n[2016-05-28 17:05:18,171][INFO ][node                     ] [es1-dev] started\n[2016-05-28 17:05:18,187][INFO ][cluster.service          ] [es1-dev] new_master {es1-dev}{vFYAS4mxSd68SCnF1NVY6g}{10.0.2.10}{10.0.2.10:9300}{max_local_storage_nodes=1, master=true}, reason: zen-disco-join(elected_as_master, [0] joins received)\n[2016-05-28 17:05:18,436][INFO ][license.plugin.core      ] [es1-dev] license [ac1d0ccd-9fab-43b2-8906-33b26a9b38e6] - valid\n[2016-05-28 17:05:18,561][INFO ][gateway                  ] [es1-dev] recovered [13] indices into cluster_state\n[2016-05-28 17:05:21,840][INFO ][cluster.routing.allocation] [es1-dev] Cluster health status changed from [RED] to [GREEN] (reason: [shards started [[indexing-metrics-v1-index-20151012][0]] ...]).\n[2016-05-28 17:06:43,360][DEBUG][action.admin.indices.create] [es1-dev] [_reindex] failed to create\n[_reindex] InvalidIndexNameException[Invalid index name [_reindex], must not start with '_']\n    at org.elasticsearch.cluster.metadata.MetaDataCreateIndexService.validateIndexName(MetaDataCreateIndexService.java:150)\n    at org.elasticsearch.cluster.metadata.MetaDataCreateIndexService.validate(MetaDataCreateIndexService.java:473)\n    at org.elasticsearch.cluster.metadata.MetaDataCreateIndexService.access$100(MetaDataCreateIndexService.java:97)\n    at org.elasticsearch.cluster.metadata.MetaDataCreateIndexService$1.execute(MetaDataCreateIndexService.java:192)\n    at org.elasticsearch.cluster.ClusterStateUpdateTask.execute(ClusterStateUpdateTask.java:45)\n    at org.elasticsearch.cluster.service.InternalClusterService.runTasksForExecutor(InternalClusterService.java:468)\n    at org.elasticsearch.cluster.service.InternalClusterService$UpdateTask.run(InternalClusterService.java:772)\n    at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.runAndClean(PrioritizedEsThreadPoolExecutor.java:231)\n    at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:194)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n\n```\n","closed_by":{"login":"natelapp","id":15839796,"node_id":"MDQ6VXNlcjE1ODM5Nzk2","avatar_url":"https://avatars1.githubusercontent.com/u/15839796?v=4","gravatar_id":"","url":"https://api.github.com/users/natelapp","html_url":"https://github.com/natelapp","followers_url":"https://api.github.com/users/natelapp/followers","following_url":"https://api.github.com/users/natelapp/following{/other_user}","gists_url":"https://api.github.com/users/natelapp/gists{/gist_id}","starred_url":"https://api.github.com/users/natelapp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/natelapp/subscriptions","organizations_url":"https://api.github.com/users/natelapp/orgs","repos_url":"https://api.github.com/users/natelapp/repos","events_url":"https://api.github.com/users/natelapp/events{/privacy}","received_events_url":"https://api.github.com/users/natelapp/received_events","type":"User","site_admin":false},"performed_via_github_app":null}