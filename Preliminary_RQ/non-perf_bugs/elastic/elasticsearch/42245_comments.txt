[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/494070993","html_url":"https://github.com/elastic/elasticsearch/issues/42245#issuecomment-494070993","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42245","id":494070993,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NDA3MDk5Mw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-05-20T17:03:15Z","updated_at":"2019-05-20T17:03:15Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/494071566","html_url":"https://github.com/elastic/elasticsearch/issues/42245#issuecomment-494071566","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42245","id":494071566,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NDA3MTU2Ng==","user":{"login":"gwbrown","id":1522844,"node_id":"MDQ6VXNlcjE1MjI4NDQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1522844?v=4","gravatar_id":"","url":"https://api.github.com/users/gwbrown","html_url":"https://github.com/gwbrown","followers_url":"https://api.github.com/users/gwbrown/followers","following_url":"https://api.github.com/users/gwbrown/following{/other_user}","gists_url":"https://api.github.com/users/gwbrown/gists{/gist_id}","starred_url":"https://api.github.com/users/gwbrown/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gwbrown/subscriptions","organizations_url":"https://api.github.com/users/gwbrown/orgs","repos_url":"https://api.github.com/users/gwbrown/repos","events_url":"https://api.github.com/users/gwbrown/events{/privacy}","received_events_url":"https://api.github.com/users/gwbrown/received_events","type":"User","site_admin":false},"created_at":"2019-05-20T17:04:56Z","updated_at":"2019-05-20T17:04:56Z","author_association":"CONTRIBUTOR","body":"@polyfractal Would this help with the issues you raised in https://github.com/elastic/elasticsearch/issues/41389, or no? I don't know the details of those issues, but this might prevent rollup from having to manage index templates.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/494085273","html_url":"https://github.com/elastic/elasticsearch/issues/42245#issuecomment-494085273","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42245","id":494085273,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NDA4NTI3Mw==","user":{"login":"gwbrown","id":1522844,"node_id":"MDQ6VXNlcjE1MjI4NDQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1522844?v=4","gravatar_id":"","url":"https://api.github.com/users/gwbrown","html_url":"https://github.com/gwbrown","followers_url":"https://api.github.com/users/gwbrown/followers","following_url":"https://api.github.com/users/gwbrown/following{/other_user}","gists_url":"https://api.github.com/users/gwbrown/gists{/gist_id}","starred_url":"https://api.github.com/users/gwbrown/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gwbrown/subscriptions","organizations_url":"https://api.github.com/users/gwbrown/orgs","repos_url":"https://api.github.com/users/gwbrown/repos","events_url":"https://api.github.com/users/gwbrown/events{/privacy}","received_events_url":"https://api.github.com/users/gwbrown/received_events","type":"User","site_admin":false},"created_at":"2019-05-20T17:45:45Z","updated_at":"2019-05-20T17:45:45Z","author_association":"CONTRIBUTOR","body":"I've added a sketch of an alternate version of this API that includes both the index and policy definitions to make it the only call needed to set up both a policy and an index.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/495236201","html_url":"https://github.com/elastic/elasticsearch/issues/42245#issuecomment-495236201","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42245","id":495236201,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NTIzNjIwMQ==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2019-05-23T14:12:49Z","updated_at":"2019-05-23T14:12:49Z","author_association":"MEMBER","body":"@gwbrown sorry for the delay.  Just had a look, and I think this would mostly satisfy the needs of Rollup.  The main issue for Rollup is that we store configuration details in the `_meta` mapping field, which is added when the index is created (by Rollup, not the user).\r\n\r\nSo we need to either copy that data from index-to-index during rollover, or create a template to manage the details so it plays nicely with ILM.  If this API were implemented, we could use it instead of a normal index creation request when the user specifies an ILM policy.  And wouldn't have to generate a template ourselves.\r\n\r\nI think the only outstanding concern, which applies generally I think, is that the template creation might be surprising.  E.g. the template is created with a wildcard that could potentially catch \"off-target\" indices.  This is a concern for any template pattern, but less obvious when it's done automatically behind the scenes.\r\n\r\nI don't see any solution to that other than good documentation, but thought I'd raise the point :)\r\n\r\nOverall ++ to this plan from Rollup's perspective, if it existed we'd probably use it.  \r\n\r\n> Which of these two API options do folks like better?\r\n\r\nFor Rollup, I'm leaning towards the first version.  I'd prefer to leave the complexity/error handling of setting up an ILM policy to a different API, rather than having the user specify it in addition to the Rollup config and then trying to debug problems.\r\n\r\nNot a strong opinion, I could be convinced either way, but the simpler first API would have my tentative vote :)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/528983593","html_url":"https://github.com/elastic/elasticsearch/issues/42245#issuecomment-528983593","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42245","id":528983593,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODk4MzU5Mw==","user":{"login":"jordansissel","id":131818,"node_id":"MDQ6VXNlcjEzMTgxOA==","avatar_url":"https://avatars1.githubusercontent.com/u/131818?v=4","gravatar_id":"","url":"https://api.github.com/users/jordansissel","html_url":"https://github.com/jordansissel","followers_url":"https://api.github.com/users/jordansissel/followers","following_url":"https://api.github.com/users/jordansissel/following{/other_user}","gists_url":"https://api.github.com/users/jordansissel/gists{/gist_id}","starred_url":"https://api.github.com/users/jordansissel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jordansissel/subscriptions","organizations_url":"https://api.github.com/users/jordansissel/orgs","repos_url":"https://api.github.com/users/jordansissel/repos","events_url":"https://api.github.com/users/jordansissel/events{/privacy}","received_events_url":"https://api.github.com/users/jordansissel/received_events","type":"User","site_admin":false},"created_at":"2019-09-06T19:25:01Z","updated_at":"2019-09-06T19:28:42Z","author_association":"CONTRIBUTOR","body":"> Here's a sketch of what such an API could look like for a simple logging use case:\r\n\r\nA bootstrap/setup API would be lovely!\r\n\r\nFor my use case (infosec@elastic), for all cases where we need to capacity plan more deeply, these cases are logging.\r\n\r\nOne scenario we are rolling out can be simplified, I believe, to a few small inputs:\r\n* The \"index\" name (this becomes the alias as well as the prefix for the rollover indices)\r\n* Index settings: Number of shards and max shards per node[1]\r\n* Rollover: What size index to rollover\r\n\r\nWith ILM supporting deletion, we'd probably add another input for number of days to keep data.\r\n\r\n[1] max shards per node is to prevent [massive shard evacuations](https://github.com/elastic/elasticsearch/issues/45177) seen in production over the past year.\r\n\r\ncc @ajrios33 who's been working on this with me.\r\n\r\nToday, the required work includes one extra step which is disabling parts of `beats setup` which installs ILM policy so that we can more easily install our own separately.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/528992463","html_url":"https://github.com/elastic/elasticsearch/issues/42245#issuecomment-528992463","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42245","id":528992463,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODk5MjQ2Mw==","user":{"login":"jordansissel","id":131818,"node_id":"MDQ6VXNlcjEzMTgxOA==","avatar_url":"https://avatars1.githubusercontent.com/u/131818?v=4","gravatar_id":"","url":"https://api.github.com/users/jordansissel","html_url":"https://github.com/jordansissel","followers_url":"https://api.github.com/users/jordansissel/followers","following_url":"https://api.github.com/users/jordansissel/following{/other_user}","gists_url":"https://api.github.com/users/jordansissel/gists{/gist_id}","starred_url":"https://api.github.com/users/jordansissel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jordansissel/subscriptions","organizations_url":"https://api.github.com/users/jordansissel/orgs","repos_url":"https://api.github.com/users/jordansissel/repos","events_url":"https://api.github.com/users/jordansissel/events{/privacy}","received_events_url":"https://api.github.com/users/jordansissel/received_events","type":"User","site_admin":false},"created_at":"2019-09-06T19:54:09Z","updated_at":"2019-09-06T22:48:12Z","author_association":"CONTRIBUTOR","body":"Oh one other feedback is that these steps listed above are for every beat on every version of beat that we anticipate ingesting. At present, we run `beats setup` on one cluster 80+ times (one for every version of filebeat, auditbeat, and metricbeat since v6.3.0). It's likely out of scope for this issue, but I'd still like to mention it specifically as the scale of the maintenance burden for managing ILM manually makes it an area ripe for mistakes (which we make with some frequency).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/537267966","html_url":"https://github.com/elastic/elasticsearch/issues/42245#issuecomment-537267966","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42245","id":537267966,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNzI2Nzk2Ng==","user":{"login":"ericsampson","id":1183853,"node_id":"MDQ6VXNlcjExODM4NTM=","avatar_url":"https://avatars2.githubusercontent.com/u/1183853?v=4","gravatar_id":"","url":"https://api.github.com/users/ericsampson","html_url":"https://github.com/ericsampson","followers_url":"https://api.github.com/users/ericsampson/followers","following_url":"https://api.github.com/users/ericsampson/following{/other_user}","gists_url":"https://api.github.com/users/ericsampson/gists{/gist_id}","starred_url":"https://api.github.com/users/ericsampson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ericsampson/subscriptions","organizations_url":"https://api.github.com/users/ericsampson/orgs","repos_url":"https://api.github.com/users/ericsampson/repos","events_url":"https://api.github.com/users/ericsampson/events{/privacy}","received_events_url":"https://api.github.com/users/ericsampson/received_events","type":"User","site_admin":false},"created_at":"2019-10-01T23:06:41Z","updated_at":"2019-10-01T23:06:41Z","author_association":"NONE","body":"I really like the first version of the API that you laid out @gwbrown . ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/629538474","html_url":"https://github.com/elastic/elasticsearch/issues/42245#issuecomment-629538474","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42245","id":629538474,"node_id":"MDEyOklzc3VlQ29tbWVudDYyOTUzODQ3NA==","user":{"login":"gwbrown","id":1522844,"node_id":"MDQ6VXNlcjE1MjI4NDQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1522844?v=4","gravatar_id":"","url":"https://api.github.com/users/gwbrown","html_url":"https://github.com/gwbrown","followers_url":"https://api.github.com/users/gwbrown/followers","following_url":"https://api.github.com/users/gwbrown/following{/other_user}","gists_url":"https://api.github.com/users/gwbrown/gists{/gist_id}","starred_url":"https://api.github.com/users/gwbrown/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gwbrown/subscriptions","organizations_url":"https://api.github.com/users/gwbrown/orgs","repos_url":"https://api.github.com/users/gwbrown/repos","events_url":"https://api.github.com/users/gwbrown/events{/privacy}","received_events_url":"https://api.github.com/users/gwbrown/received_events","type":"User","site_admin":false},"created_at":"2020-05-15T22:50:45Z","updated_at":"2020-05-15T22:50:45Z","author_association":"CONTRIBUTOR","body":"This use case is being addressed in a well-designed and much more comprehensive way by data streams (see https://github.com/elastic/elasticsearch/issues/53100).  As such, I'm going to close this issue.  We can reopen if necessary.","performed_via_github_app":null}]