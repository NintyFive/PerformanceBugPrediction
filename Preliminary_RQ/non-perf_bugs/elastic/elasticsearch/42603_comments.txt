[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/496378589","html_url":"https://github.com/elastic/elasticsearch/issues/42603#issuecomment-496378589","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42603","id":496378589,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NjM3ODU4OQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-05-28T06:11:21Z","updated_at":"2019-05-28T06:11:21Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/496466595","html_url":"https://github.com/elastic/elasticsearch/issues/42603#issuecomment-496466595","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42603","id":496466595,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NjQ2NjU5NQ==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2019-05-28T10:52:53Z","updated_at":"2019-05-28T10:52:53Z","author_association":"MEMBER","body":"More instances in:\r\n\r\n* https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.x+multijob-unix-compatibility/os=redhat-8/235/console\r\n* https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.x+multijob-unix-compatibility/os=redhat-8/234/console\r\n* https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.2+multijob-unix-compatibility/os=redhat-8/14/console\r\n* https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.1+multijob-unix-compatibility/os=redhat-8/13/console ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/496587251","html_url":"https://github.com/elastic/elasticsearch/issues/42603#issuecomment-496587251","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42603","id":496587251,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NjU4NzI1MQ==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2019-05-28T16:20:01Z","updated_at":"2019-05-28T16:20:01Z","author_association":"CONTRIBUTOR","body":"I don't believe this is related to #41392 as those changes exist only in master. These failures seem to be isolated to our Redhat 8 tests so there's something with that environment. My first thought is that probably that system is producing slightly different output from the forbidden APIs CLI which is no longer matching [this regex](https://github.com/elastic/elasticsearch/blob/eda3da31dace56623e84de78df183483ee2c8309/buildSrc/src/main/java/org/elasticsearch/gradle/precommit/ThirdPartyAuditTask.java#L66).\r\n\r\n@atorok any other thoughts on why this is specific to Redhat 8? If not I think I'll add some logging here so we dump the output from forbidden APIs on failure.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/496874885","html_url":"https://github.com/elastic/elasticsearch/issues/42603#issuecomment-496874885","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42603","id":496874885,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5Njg3NDg4NQ==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-05-29T10:12:03Z","updated_at":"2019-05-29T10:12:03Z","author_association":"CONTRIBUTOR","body":"I got some idle time on the rhel worker but couldn't reproduce the issue. \r\nDumping the output on failure has it's own issues. \r\nThe problem is that a lot of times forbiddenapis fails because of missing classes, exceptions etc. For any project that has any configuration it will fail  and we don't want to see the actual failure as we are interpreting it. \r\nThe problem with the lather is that it's hard to interpret missing classes: was it because the class was not listed as missing or because some other failure prevented that. \r\n\r\nI think the solution is to write the output to a log file and make sure it's captured by the log upload in CI. This way it's available to diagnose when we need it without clobbering the output of a failure in ways most users won't easily understand.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/496888839","html_url":"https://github.com/elastic/elasticsearch/issues/42603#issuecomment-496888839","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42603","id":496888839,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5Njg4ODgzOQ==","user":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"created_at":"2019-05-29T10:59:15Z","updated_at":"2019-05-29T10:59:15Z","author_association":"CONTRIBUTOR","body":"There's something weird about the RHEL8 environment. Some X-Pack tribe tests were consistently failing on the 6.7 RHEL8 workers but not on any other OS: https://github.com/elastic/elasticsearch/issues/42004\r\n\r\nThis issue is preventing those tests from running on the new 6.8 matrix builds, but I suspect they're still broken. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/497009753","html_url":"https://github.com/elastic/elasticsearch/issues/42603#issuecomment-497009753","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42603","id":497009753,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NzAwOTc1Mw==","user":{"login":"jbaiera","id":875779,"node_id":"MDQ6VXNlcjg3NTc3OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/875779?v=4","gravatar_id":"","url":"https://api.github.com/users/jbaiera","html_url":"https://github.com/jbaiera","followers_url":"https://api.github.com/users/jbaiera/followers","following_url":"https://api.github.com/users/jbaiera/following{/other_user}","gists_url":"https://api.github.com/users/jbaiera/gists{/gist_id}","starred_url":"https://api.github.com/users/jbaiera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbaiera/subscriptions","organizations_url":"https://api.github.com/users/jbaiera/orgs","repos_url":"https://api.github.com/users/jbaiera/repos","events_url":"https://api.github.com/users/jbaiera/events{/privacy}","received_events_url":"https://api.github.com/users/jbaiera/received_events","type":"User","site_admin":false},"created_at":"2019-05-29T16:25:45Z","updated_at":"2019-05-29T16:25:45Z","author_association":"CONTRIBUTOR","body":"Some additional examples from today. All RHEL8\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.1+multijob-unix-compatibility/os=redhat-8/18/console\r\nhttps://scans.gradle.com/s/mnnbvdiestnqq/console-log?task=:plugins:discovery-gce:thirdPartyAudit\r\n```\r\n:plugins:discovery-gce:thirdPartyAudit FAILED\r\n--\r\nPicked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF8\r\nUnnecessary exclusions, following classes are not missing:\r\n* javax.servlet.ServletContextEvent\r\n* javax.servlet.ServletContextListener\r\n* org.apache.log.Hierarchy\r\n* org.apache.log.Logger\r\n```\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.1+multijob-unix-compatibility/os=redhat-8/17/console\r\nhttps://scans.gradle.com/s/7a5gbu3sz55f6/console-log?task=:plugins:discovery-ec2:thirdPartyAudit\r\n```\r\n:plugins:discovery-ec2:thirdPartyAudit FAILED\r\n--\r\nPicked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF8\r\nUnnecessary exclusions, following classes are not missing:\r\n* com.amazonaws.jmespath.JmesPathIdentity\r\n* com.amazonaws.jmespath.JmesPathLengthFunction\r\n* com.amazonaws.jmespath.JmesPathLiteral\r\n* com.amazonaws.jmespath.OpGreaterThan\r\n* javax.servlet.ServletContextEvent\r\n* javax.servlet.ServletContextListener\r\n* org.apache.avalon.framework.logger.Logger\r\n* org.apache.log.Hierarchy\r\n* org.apache.log.Logger\r\n* software.amazon.ion.IonSystem\r\n* software.amazon.ion.IonWriter\r\n* software.amazon.ion.system.IonBinaryWriterBuilder\r\n* software.amazon.ion.system.IonSystemBuilder\r\n* software.amazon.ion.system.IonTextWriterBuilder\r\n* software.amazon.ion.system.IonWriterBuilder\r\n```\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.2+multijob-unix-compatibility/os=redhat-8/18/console\r\nhttps://scans.gradle.com/s/ct7bykcnl2ut2/console-log?task=:plugins:repository-hdfs:thirdPartyAudit\r\n```\r\n:plugins:repository-hdfs:thirdPartyAudit FAILED\r\n--\r\nPicked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF8\r\nUnnecessary exclusions, following classes have no violations:\r\n* com.google.common.primitives.UnsignedBytes$LexicographicalComparatorHolder$UnsafeComparator\r\n* com.google.common.primitives.UnsignedBytes$LexicographicalComparatorHolder$UnsafeComparator$1\r\n* org.apache.hadoop.crypto.CryptoStreamUtils\r\n* org.apache.hadoop.hdfs.shortcircuit.ShortCircuitShm\r\n* org.apache.hadoop.hdfs.shortcircuit.ShortCircuitShm$Slot\r\n* org.apache.hadoop.io.FastByteComparisons$LexicographicalComparerHolder$UnsafeComparer\r\n* org.apache.hadoop.io.FastByteComparisons$LexicographicalComparerHolder$UnsafeComparer$1\r\n* org.apache.hadoop.io.nativeio.NativeIO\r\n* org.apache.hadoop.io.nativeio.NativeIO$POSIX\r\n* org.apache.hadoop.security.SecurityUtil$QualifiedHostResolver\r\n* org.apache.hadoop.util.SignalLogger$Handler\r\n```\r\n\r\n\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/498557476","html_url":"https://github.com/elastic/elasticsearch/issues/42603#issuecomment-498557476","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42603","id":498557476,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5ODU1NzQ3Ng==","user":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"created_at":"2019-06-04T07:34:53Z","updated_at":"2019-06-04T07:34:53Z","author_association":"CONTRIBUTOR","body":"@elastic/es-core-infra can we disable RHEL8 from the matrix build? We're getting dozens of failures per day, and no successes.\r\n\r\nRight now it's all noise, no signal.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/498774604","html_url":"https://github.com/elastic/elasticsearch/issues/42603#issuecomment-498774604","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42603","id":498774604,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5ODc3NDYwNA==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2019-06-04T17:49:11Z","updated_at":"2019-06-04T17:49:11Z","author_association":"CONTRIBUTOR","body":"The Redhat 8 CI job has been disabled until we sort this out.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/508753530","html_url":"https://github.com/elastic/elasticsearch/issues/42603#issuecomment-508753530","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42603","id":508753530,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODc1MzUzMA==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-07-05T13:09:08Z","updated_at":"2019-07-05T13:09:08Z","author_association":"CONTRIBUTOR","body":"This turned out to be due to the worker. I'll close this for now. We'll take on testing again once we have a rhel or centos 8 ephemeral worker ","performed_via_github_app":null}]