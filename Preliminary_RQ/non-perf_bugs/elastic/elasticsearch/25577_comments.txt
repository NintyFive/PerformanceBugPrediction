[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/313384298","html_url":"https://github.com/elastic/elasticsearch/issues/25577#issuecomment-313384298","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25577","id":313384298,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMzM4NDI5OA==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2017-07-06T12:39:34Z","updated_at":"2017-07-06T12:39:34Z","author_association":"MEMBER","body":"@Bargs @spalger can you confirm that Kibana 6 will not use _field_stats at all and rely only on `_field_caps` and ES request cache for aggs ? \r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/313535134","html_url":"https://github.com/elastic/elasticsearch/issues/25577#issuecomment-313535134","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25577","id":313535134,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMzUzNTEzNA==","user":{"login":"Bargs","id":6239176,"node_id":"MDQ6VXNlcjYyMzkxNzY=","avatar_url":"https://avatars3.githubusercontent.com/u/6239176?v=4","gravatar_id":"","url":"https://api.github.com/users/Bargs","html_url":"https://github.com/Bargs","followers_url":"https://api.github.com/users/Bargs/followers","following_url":"https://api.github.com/users/Bargs/following{/other_user}","gists_url":"https://api.github.com/users/Bargs/gists{/gist_id}","starred_url":"https://api.github.com/users/Bargs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bargs/subscriptions","organizations_url":"https://api.github.com/users/Bargs/orgs","repos_url":"https://api.github.com/users/Bargs/repos","events_url":"https://api.github.com/users/Bargs/events{/privacy}","received_events_url":"https://api.github.com/users/Bargs/received_events","type":"User","site_admin":false},"created_at":"2017-07-06T22:20:47Z","updated_at":"2017-07-06T22:20:47Z","author_association":"NONE","body":"We no longer use field_stats to get field info at index pattern creation time, but we do still use it [prior to executing searches](https://github.com/elastic/kibana/blob/9f33293e5c45f09feecfefd0c0a0ea9e14317d2f/src/ui/public/index_patterns/_calculate_indices.js#L48-L57) for some index patterns. There are plans to [remove that option](https://github.com/elastic/kibana/issues/10444) (it's already deprecated) but it does not look like that's happened yet. I'm not sure if it's targeted for 6.0. @epixa ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/313535913","html_url":"https://github.com/elastic/elasticsearch/issues/25577#issuecomment-313535913","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25577","id":313535913,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMzUzNTkxMw==","user":{"login":"spalger","id":1329312,"node_id":"MDQ6VXNlcjEzMjkzMTI=","avatar_url":"https://avatars1.githubusercontent.com/u/1329312?v=4","gravatar_id":"","url":"https://api.github.com/users/spalger","html_url":"https://github.com/spalger","followers_url":"https://api.github.com/users/spalger/followers","following_url":"https://api.github.com/users/spalger/following{/other_user}","gists_url":"https://api.github.com/users/spalger/gists{/gist_id}","starred_url":"https://api.github.com/users/spalger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spalger/subscriptions","organizations_url":"https://api.github.com/users/spalger/orgs","repos_url":"https://api.github.com/users/spalger/repos","events_url":"https://api.github.com/users/spalger/events{/privacy}","received_events_url":"https://api.github.com/users/spalger/received_events","type":"User","site_admin":false},"created_at":"2017-07-06T22:24:59Z","updated_at":"2017-07-06T22:26:43Z","author_association":"MEMBER","body":"Pretty sure we are still planning to ship the \"expand indices\" option with K 6.0 (where we convert `index*` into an index list using the `_field_stats` API). IIRC it was intended as a backup plan in case the wildcard optimizations that ES has implemented aren't sufficient for some users.\r\n\r\nIf we are confident that removing this optimization from Kibana won't result in worse, or specifically unusable, performance then I'm not opposed to removing it now.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/313549761","html_url":"https://github.com/elastic/elasticsearch/issues/25577#issuecomment-313549761","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25577","id":313549761,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMzU0OTc2MQ==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2017-07-06T23:50:38Z","updated_at":"2017-07-06T23:50:38Z","author_association":"MEMBER","body":"> If we are confident that removing this optimization from Kibana won't result in worse, or specifically unusable, performance then I'm not opposed to removing it now.\r\n\r\nIf the optim is to check if an index matches document in a specific timeframe with `_field_stats` then I think it's safe to remove. The only difference with the `_field_stats` solution is that the optim will happen locally on each shard rather than on Kibana side. If you have 2000 shards you'll send 2000 queries that should return very fast if the min/max timeframe is empty for them.\r\n@colings86 should confirm but the min/max rewriting for time range queries plus the request cache should be enough to have decent perf even when doing a gazillion shard query.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/313645188","html_url":"https://github.com/elastic/elasticsearch/issues/25577#issuecomment-313645188","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25577","id":313645188,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMzY0NTE4OA==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2017-07-07T10:22:44Z","updated_at":"2017-07-07T10:22:44Z","author_association":"MEMBER","body":"> @colings86 should confirm but the min/max rewriting for time range queries plus the request cache should be enough to have decent perf even when doing a gazillion shard query.\r\n\r\nI agree","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/314214744","html_url":"https://github.com/elastic/elasticsearch/issues/25577#issuecomment-314214744","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25577","id":314214744,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNDIxNDc0NA==","user":{"login":"trevan","id":2044248,"node_id":"MDQ6VXNlcjIwNDQyNDg=","avatar_url":"https://avatars2.githubusercontent.com/u/2044248?v=4","gravatar_id":"","url":"https://api.github.com/users/trevan","html_url":"https://github.com/trevan","followers_url":"https://api.github.com/users/trevan/followers","following_url":"https://api.github.com/users/trevan/following{/other_user}","gists_url":"https://api.github.com/users/trevan/gists{/gist_id}","starred_url":"https://api.github.com/users/trevan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trevan/subscriptions","organizations_url":"https://api.github.com/users/trevan/orgs","repos_url":"https://api.github.com/users/trevan/repos","events_url":"https://api.github.com/users/trevan/events{/privacy}","received_events_url":"https://api.github.com/users/trevan/received_events","type":"User","site_admin":false},"created_at":"2017-07-10T19:47:25Z","updated_at":"2017-07-10T19:47:25Z","author_association":"NONE","body":"With _field_stats gone, how does one easily calculate \"old indices\"?  https://www.elastic.co/blog/managing-time-based-indices-efficiently has us using _field_stats and I don't think a min/max aggregation will be performant against lots of indices.  I had mentioned this at https://github.com/elastic/elasticsearch/pull/23914#issuecomment-302169299 as well but no one seemed to respond.\r\n\r\nA problem with the min/max rewriting that I've just noticed is that it appears to require some warming up that is painful on our cluster.  Our Kibana currently uses the _field_stats for index calculation and requests usually are <10 seconds.  But if I run the same query without the index subset, the first time takes several minutes.  After that, they are <10 seconds (though a few seconds slower).  This warm up seems to happen if I haven't run a query in an hour and it increases the load average in my cluster fairly substantially.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/314224190","html_url":"https://github.com/elastic/elasticsearch/issues/25577#issuecomment-314224190","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25577","id":314224190,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNDIyNDE5MA==","user":{"login":"spalger","id":1329312,"node_id":"MDQ6VXNlcjEzMjkzMTI=","avatar_url":"https://avatars1.githubusercontent.com/u/1329312?v=4","gravatar_id":"","url":"https://api.github.com/users/spalger","html_url":"https://github.com/spalger","followers_url":"https://api.github.com/users/spalger/followers","following_url":"https://api.github.com/users/spalger/following{/other_user}","gists_url":"https://api.github.com/users/spalger/gists{/gist_id}","starred_url":"https://api.github.com/users/spalger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spalger/subscriptions","organizations_url":"https://api.github.com/users/spalger/orgs","repos_url":"https://api.github.com/users/spalger/repos","events_url":"https://api.github.com/users/spalger/events{/privacy}","received_events_url":"https://api.github.com/users/spalger/received_events","type":"User","site_admin":false},"created_at":"2017-07-10T20:20:02Z","updated_at":"2017-07-10T20:20:02Z","author_association":"MEMBER","body":"@trevan sounds like you would benefit from https://github.com/elastic/elasticsearch/issues/14835","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/314225948","html_url":"https://github.com/elastic/elasticsearch/issues/25577#issuecomment-314225948","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25577","id":314225948,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNDIyNTk0OA==","user":{"login":"trevan","id":2044248,"node_id":"MDQ6VXNlcjIwNDQyNDg=","avatar_url":"https://avatars2.githubusercontent.com/u/2044248?v=4","gravatar_id":"","url":"https://api.github.com/users/trevan","html_url":"https://github.com/trevan","followers_url":"https://api.github.com/users/trevan/followers","following_url":"https://api.github.com/users/trevan/following{/other_user}","gists_url":"https://api.github.com/users/trevan/gists{/gist_id}","starred_url":"https://api.github.com/users/trevan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trevan/subscriptions","organizations_url":"https://api.github.com/users/trevan/orgs","repos_url":"https://api.github.com/users/trevan/repos","events_url":"https://api.github.com/users/trevan/events{/privacy}","received_events_url":"https://api.github.com/users/trevan/received_events","type":"User","site_admin":false},"created_at":"2017-07-10T20:26:41Z","updated_at":"2017-07-10T20:26:41Z","author_association":"NONE","body":"@spalger, thanks for pointing that out.  Unfortunately, we do have deletions and updates.  Not a lot (<5% of the data), though.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/314243010","html_url":"https://github.com/elastic/elasticsearch/issues/25577#issuecomment-314243010","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25577","id":314243010,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNDI0MzAxMA==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2017-07-10T21:06:28Z","updated_at":"2017-07-10T21:06:28Z","author_association":"MEMBER","body":"@trevan the \"expand time based indices\" feature should be done on ES side transparently. That's what we're trying to achieve. Kibana does not replace `_field_stats` with a min/max aggregation but simply remove the optimization and let ES do the right thing regarding the time range filters. \r\nNow what you're describing is not expected, can you share the query that takes several minutes \"without the index subset\" ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/314274912","html_url":"https://github.com/elastic/elasticsearch/issues/25577#issuecomment-314274912","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25577","id":314274912,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNDI3NDkxMg==","user":{"login":"trevan","id":2044248,"node_id":"MDQ6VXNlcjIwNDQyNDg=","avatar_url":"https://avatars2.githubusercontent.com/u/2044248?v=4","gravatar_id":"","url":"https://api.github.com/users/trevan","html_url":"https://github.com/trevan","followers_url":"https://api.github.com/users/trevan/followers","following_url":"https://api.github.com/users/trevan/following{/other_user}","gists_url":"https://api.github.com/users/trevan/gists{/gist_id}","starred_url":"https://api.github.com/users/trevan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trevan/subscriptions","organizations_url":"https://api.github.com/users/trevan/orgs","repos_url":"https://api.github.com/users/trevan/repos","events_url":"https://api.github.com/users/trevan/events{/privacy}","received_events_url":"https://api.github.com/users/trevan/received_events","type":"User","site_admin":false},"created_at":"2017-07-10T23:07:36Z","updated_at":"2017-07-10T23:07:36Z","author_association":"NONE","body":"@jimczi, I know Kibana is trying to let ES handle the time range filters.  I guess that must have been lost in what I said.\r\n\r\nHere's the query that can take several minutes:\r\n\r\nlocalhost:9200/logstash-*/_search?pretty' -d'{\"size\":0,\"aggs\":{\"suggestions\":{\"terms\":{\"field\":\"ip.raw\"}}},\"query\":{\"range\":{\"@timestamp\":{\"gte\":1499640596171,\"lte\":1499726996171,\"format\":\"epoch_millis\"}}}}'\r\n\r\nI just did a test to grab the times using both the old _field_stats method and the new \"let ES do it all\".  I did the following 3 steps in order.\r\n\r\n1. _field_stats call took <1s\r\n2. Above request using the index list took 6 seconds the first time and then 2 seconds the next two\r\n3. Above request using the wildcard pattern took 47 seconds the first time and then 3 seconds the next two\r\n\r\nThis is using version 5.4.1\r\n\r\nShould this be moved to a separate issue?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/315067174","html_url":"https://github.com/elastic/elasticsearch/issues/25577#issuecomment-315067174","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25577","id":315067174,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNTA2NzE3NA==","user":{"login":"epixa","id":53814,"node_id":"MDQ6VXNlcjUzODE0","avatar_url":"https://avatars0.githubusercontent.com/u/53814?v=4","gravatar_id":"","url":"https://api.github.com/users/epixa","html_url":"https://github.com/epixa","followers_url":"https://api.github.com/users/epixa/followers","following_url":"https://api.github.com/users/epixa/following{/other_user}","gists_url":"https://api.github.com/users/epixa/gists{/gist_id}","starred_url":"https://api.github.com/users/epixa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/epixa/subscriptions","organizations_url":"https://api.github.com/users/epixa/orgs","repos_url":"https://api.github.com/users/epixa/repos","events_url":"https://api.github.com/users/epixa/events{/privacy}","received_events_url":"https://api.github.com/users/epixa/received_events","type":"User","site_admin":false},"created_at":"2017-07-13T12:46:53Z","updated_at":"2017-07-13T12:46:53Z","author_association":"MEMBER","body":"An update for those following along: the field_stats API was removed from master today, and the corresponding \"expand indices\" option in Kibana was removed as well.\r\n\r\nThis was made possible by a new change to the search/msearch APIs that automatically optimizes requests to only hit a subset of relevant shards that actually could have documents that match the given filters when there are a non-trivial amount of shards that match the given index pattern.  This is a pretty naive summary of the change, so I encourage folks to take a look at the PR that added this improvement for more details: https://github.com/elastic/elasticsearch/pull/25658\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/315068064","html_url":"https://github.com/elastic/elasticsearch/issues/25577#issuecomment-315068064","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25577","id":315068064,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNTA2ODA2NA==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2017-07-13T12:50:29Z","updated_at":"2017-07-13T12:50:29Z","author_association":"MEMBER","body":"@trevan we fixed a long list of issues to make `_field_stats` completely obsolete in the last few days: https://github.com/elastic/elasticsearch/pull/25658 and https://github.com/elastic/elasticsearch/pull/25632 are the main one.\r\nThey are all merged in master (v6) and should bring significant improvements in Kibana regarding the handling of time range filters. The issue that you described should also be fixed so `_field_stats` is effectively gone but so much more has been added to es core in the mean time to make the transition transparent in v6.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/315090826","html_url":"https://github.com/elastic/elasticsearch/issues/25577#issuecomment-315090826","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25577","id":315090826,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNTA5MDgyNg==","user":{"login":"trevan","id":2044248,"node_id":"MDQ6VXNlcjIwNDQyNDg=","avatar_url":"https://avatars2.githubusercontent.com/u/2044248?v=4","gravatar_id":"","url":"https://api.github.com/users/trevan","html_url":"https://github.com/trevan","followers_url":"https://api.github.com/users/trevan/followers","following_url":"https://api.github.com/users/trevan/following{/other_user}","gists_url":"https://api.github.com/users/trevan/gists{/gist_id}","starred_url":"https://api.github.com/users/trevan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trevan/subscriptions","organizations_url":"https://api.github.com/users/trevan/orgs","repos_url":"https://api.github.com/users/trevan/repos","events_url":"https://api.github.com/users/trevan/events{/privacy}","received_events_url":"https://api.github.com/users/trevan/received_events","type":"User","site_admin":false},"created_at":"2017-07-13T14:15:41Z","updated_at":"2017-07-13T14:15:41Z","author_association":"NONE","body":"@jimczi, can these changes be backported to 5.x?  I'd like to be able to see if these changes will actually help while staying in 5.x where _field_stats is still available as a back up option.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/315117025","html_url":"https://github.com/elastic/elasticsearch/issues/25577#issuecomment-315117025","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25577","id":315117025,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNTExNzAyNQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2017-07-13T15:41:07Z","updated_at":"2017-07-13T15:41:07Z","author_association":"CONTRIBUTOR","body":"> @jimczi, can these changes be backported to 5.x? I'd like to be able to see if these changes will actually help while staying in 5.x where _field_stats is still available as a back up option.\r\n\r\nwe don't plan to backport these changes into 5.x","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/315119037","html_url":"https://github.com/elastic/elasticsearch/issues/25577#issuecomment-315119037","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25577","id":315119037,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNTExOTAzNw==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2017-07-13T15:47:32Z","updated_at":"2017-07-13T15:47:32Z","author_association":"CONTRIBUTOR","body":"> we don't plan to backport these changes into 5.x\r\n\r\nthat said, I will spend some time looking into backporting it since I see the benefit here for a broader audience. so bare with me I will update this issue @trevan \r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/315120269","html_url":"https://github.com/elastic/elasticsearch/issues/25577#issuecomment-315120269","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25577","id":315120269,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNTEyMDI2OQ==","user":{"login":"trevan","id":2044248,"node_id":"MDQ6VXNlcjIwNDQyNDg=","avatar_url":"https://avatars2.githubusercontent.com/u/2044248?v=4","gravatar_id":"","url":"https://api.github.com/users/trevan","html_url":"https://github.com/trevan","followers_url":"https://api.github.com/users/trevan/followers","following_url":"https://api.github.com/users/trevan/following{/other_user}","gists_url":"https://api.github.com/users/trevan/gists{/gist_id}","starred_url":"https://api.github.com/users/trevan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trevan/subscriptions","organizations_url":"https://api.github.com/users/trevan/orgs","repos_url":"https://api.github.com/users/trevan/repos","events_url":"https://api.github.com/users/trevan/events{/privacy}","received_events_url":"https://api.github.com/users/trevan/received_events","type":"User","site_admin":false},"created_at":"2017-07-13T15:51:35Z","updated_at":"2017-07-13T15:51:35Z","author_association":"NONE","body":"@s1monw, are all the changes basically on the coordinating node?  So if I have a 6.x client node talking to my 5.x cluster, would I be able to see if this is performant enough?  My worry is that I currently have to use _field_stats in 5.x because of the performance hit and I won't be able to know if you've made it performant enough in 6.x until after I upgrade and by that time, I'm now stuck.  That's why I'm asking about a backport.  I would like someway to test these changes in my cluster before loosing _field_stats.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/315122193","html_url":"https://github.com/elastic/elasticsearch/issues/25577#issuecomment-315122193","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25577","id":315122193,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNTEyMjE5Mw==","user":{"login":"epixa","id":53814,"node_id":"MDQ6VXNlcjUzODE0","avatar_url":"https://avatars0.githubusercontent.com/u/53814?v=4","gravatar_id":"","url":"https://api.github.com/users/epixa","html_url":"https://github.com/epixa","followers_url":"https://api.github.com/users/epixa/followers","following_url":"https://api.github.com/users/epixa/following{/other_user}","gists_url":"https://api.github.com/users/epixa/gists{/gist_id}","starred_url":"https://api.github.com/users/epixa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/epixa/subscriptions","organizations_url":"https://api.github.com/users/epixa/orgs","repos_url":"https://api.github.com/users/epixa/repos","events_url":"https://api.github.com/users/epixa/events{/privacy}","received_events_url":"https://api.github.com/users/epixa/received_events","type":"User","site_admin":false},"created_at":"2017-07-13T15:57:53Z","updated_at":"2017-07-13T15:57:53Z","author_association":"MEMBER","body":"@trevan I can't answer your question in terms of Elasticsearch, but Kibana 5.5 will fail with a red status if it targets an ES cluster that has a 6.x node in it.  This requirement will be relaxed in the final version of 5.x that is released to support a migration/rolling upgrade scenario, but you'll need to test the performance of this change with a raw query to Elasticsearch in that scenario.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/315130535","html_url":"https://github.com/elastic/elasticsearch/issues/25577#issuecomment-315130535","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25577","id":315130535,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNTEzMDUzNQ==","user":{"login":"trevan","id":2044248,"node_id":"MDQ6VXNlcjIwNDQyNDg=","avatar_url":"https://avatars2.githubusercontent.com/u/2044248?v=4","gravatar_id":"","url":"https://api.github.com/users/trevan","html_url":"https://github.com/trevan","followers_url":"https://api.github.com/users/trevan/followers","following_url":"https://api.github.com/users/trevan/following{/other_user}","gists_url":"https://api.github.com/users/trevan/gists{/gist_id}","starred_url":"https://api.github.com/users/trevan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trevan/subscriptions","organizations_url":"https://api.github.com/users/trevan/orgs","repos_url":"https://api.github.com/users/trevan/repos","events_url":"https://api.github.com/users/trevan/events{/privacy}","received_events_url":"https://api.github.com/users/trevan/received_events","type":"User","site_admin":false},"created_at":"2017-07-13T16:27:18Z","updated_at":"2017-07-13T16:27:18Z","author_association":"NONE","body":"@epixa, yeah, I was planning on doing a raw query.  That's how I've been testing out the non _field_stats queries so far since it would otherwise Kibana would kill our cluster.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/315155992","html_url":"https://github.com/elastic/elasticsearch/issues/25577#issuecomment-315155992","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25577","id":315155992,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNTE1NTk5Mg==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2017-07-13T18:02:11Z","updated_at":"2017-07-13T18:02:11Z","author_association":"CONTRIBUTOR","body":"@trevan you can only see these changes once you upgraded to the upcoming 5.6 and use a 6.0 client node that is correct. I will nevertheless look into backporting this feature it seems low risk at this poing","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/315555559","html_url":"https://github.com/elastic/elasticsearch/issues/25577#issuecomment-315555559","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25577","id":315555559,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNTU1NTU1OQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2017-07-15T19:11:07Z","updated_at":"2017-07-15T19:11:07Z","author_association":"CONTRIBUTOR","body":"@trevan FYI I back-ported the change that went into master to 5.x it will be released with 5.6","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/315703312","html_url":"https://github.com/elastic/elasticsearch/issues/25577#issuecomment-315703312","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25577","id":315703312,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNTcwMzMxMg==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2017-07-17T09:12:12Z","updated_at":"2017-07-17T09:12:12Z","author_association":"CONTRIBUTOR","body":"@trevan it would be very much appreciated if you could report back once you upgraded to `5.6` is this helps you or not. The sooner the better, we might still have time to fix stuff if needed. Note, your nodes must all run `5.6` or higher in order to make use of the optimization. If you have questions about how you should structure your query please feel free to shard your current setup. Ideally we would do this in a discuss forum instead of here but you are more than welcome to paste the link to the discuss thread once you created it so we can follow up","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/315778298","html_url":"https://github.com/elastic/elasticsearch/issues/25577#issuecomment-315778298","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25577","id":315778298,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNTc3ODI5OA==","user":{"login":"trevan","id":2044248,"node_id":"MDQ6VXNlcjIwNDQyNDg=","avatar_url":"https://avatars2.githubusercontent.com/u/2044248?v=4","gravatar_id":"","url":"https://api.github.com/users/trevan","html_url":"https://github.com/trevan","followers_url":"https://api.github.com/users/trevan/followers","following_url":"https://api.github.com/users/trevan/following{/other_user}","gists_url":"https://api.github.com/users/trevan/gists{/gist_id}","starred_url":"https://api.github.com/users/trevan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trevan/subscriptions","organizations_url":"https://api.github.com/users/trevan/orgs","repos_url":"https://api.github.com/users/trevan/repos","events_url":"https://api.github.com/users/trevan/events{/privacy}","received_events_url":"https://api.github.com/users/trevan/received_events","type":"User","site_admin":false},"created_at":"2017-07-17T14:49:48Z","updated_at":"2017-07-17T14:49:48Z","author_association":"NONE","body":"@s1monw, thanks for the backport.  I'll try and get us upgraded in the next month or two and report back.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/328640398","html_url":"https://github.com/elastic/elasticsearch/issues/25577#issuecomment-328640398","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25577","id":328640398,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODY0MDM5OA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2017-09-11T19:54:38Z","updated_at":"2017-09-11T19:54:38Z","author_association":"CONTRIBUTOR","body":"@trevan `5.6.0` is out. If would be fantastic if you could report back on this.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/340573398","html_url":"https://github.com/elastic/elasticsearch/issues/25577#issuecomment-340573398","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25577","id":340573398,"node_id":"MDEyOklzc3VlQ29tbWVudDM0MDU3MzM5OA==","user":{"login":"trevan","id":2044248,"node_id":"MDQ6VXNlcjIwNDQyNDg=","avatar_url":"https://avatars2.githubusercontent.com/u/2044248?v=4","gravatar_id":"","url":"https://api.github.com/users/trevan","html_url":"https://github.com/trevan","followers_url":"https://api.github.com/users/trevan/followers","following_url":"https://api.github.com/users/trevan/following{/other_user}","gists_url":"https://api.github.com/users/trevan/gists{/gist_id}","starred_url":"https://api.github.com/users/trevan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trevan/subscriptions","organizations_url":"https://api.github.com/users/trevan/orgs","repos_url":"https://api.github.com/users/trevan/repos","events_url":"https://api.github.com/users/trevan/events{/privacy}","received_events_url":"https://api.github.com/users/trevan/received_events","type":"User","site_admin":false},"created_at":"2017-10-30T20:26:36Z","updated_at":"2017-10-30T20:26:36Z","author_association":"NONE","body":"@s1monw, we just upgraded to 5.6.x.  I ran the logstash-* version and then waited 5 hours before running the index list version.  Both of them took about 16 seconds the first time.  So it is looking good.  Thanks.","performed_via_github_app":null}]