{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/3618","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3618/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3618/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3618/events","html_url":"https://github.com/elastic/elasticsearch/issues/3618","id":18974855,"node_id":"MDU6SXNzdWUxODk3NDg1NQ==","number":3618,"title":"data loss in minimalistic test project","user":{"login":"Sonjaa","id":5382360,"node_id":"MDQ6VXNlcjUzODIzNjA=","avatar_url":"https://avatars3.githubusercontent.com/u/5382360?v=4","gravatar_id":"","url":"https://api.github.com/users/Sonjaa","html_url":"https://github.com/Sonjaa","followers_url":"https://api.github.com/users/Sonjaa/followers","following_url":"https://api.github.com/users/Sonjaa/following{/other_user}","gists_url":"https://api.github.com/users/Sonjaa/gists{/gist_id}","starred_url":"https://api.github.com/users/Sonjaa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sonjaa/subscriptions","organizations_url":"https://api.github.com/users/Sonjaa/orgs","repos_url":"https://api.github.com/users/Sonjaa/repos","events_url":"https://api.github.com/users/Sonjaa/events{/privacy}","received_events_url":"https://api.github.com/users/Sonjaa/received_events","type":"User","site_admin":false},"labels":[{"id":73544,"node_id":"MDU6TGFiZWw3MzU0NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Enon-issue","name":">non-issue","color":"cfcfcf","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"assignees":[{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2013-09-04T14:32:33Z","updated_at":"2013-09-04T18:03:03Z","closed_at":"2013-09-04T18:03:03Z","author_association":"NONE","active_lock_reason":null,"body":"Hello,\n\nI've set up a minimalistic Test-project using elasticsearch. Via a Java-bean, data is being created (four times via a loop -> four documents should be created) and via another bean my whole existing documents are shown on a webpage (with jsp)\n(The code for the create-Bean and the showAll-Bean is attached).\n\nThe problem is, that my loop creates in average 3 documents and not the wanted 4.\nMy documents always store the following two parameters (just for testing purpose): Time-ID (that is the counter of the loop, so it is always a number between 1 and 4) and the actual timestamp (down to milli-secs).\n\nIm getting a \"true\" by creating on the web page and the created id for the documents four times for creating but in my sense-plugin in chrome browser i see the data only created 3 times.\n\n(I'm also still having the problem, that my array gets out of bounds, if there are more than 10 files, like it is descriped in issue 3051 (https://github.com/elasticsearch/elasticsearch/issues/3051). I'm using elasticsearch 0.90.3)\n## Code:\n\npublic String createESData()\n    {\n        String result = \"\";\n        String data = \"\";\n        Node node = nodeBuilder().clusterName(\"testcluster\").node();\n        Client client = node.client();\n\n```\n    try {\n\n        for (int i=0; i<4; i++)\n        {\n            data = \"{\" +\n                \"\\\"Time-ID\\\": \\\"\" + (i+1) + \"\\\",\" +\n                \"\\\"Timestamp\\\": \\\"\" + Calendar.getInstance().getTimeInMillis() + \"\\\"\" +\n                \"}\";\n\n            IndexResponse response = client.prepareIndex(\"times\", \"time\")\n                    .setSource(data)\n                    .execute()\n                    .actionGet();\n\n            result += (i+1) + \")\\t\\t\" + response.getId() + \"<br />\" + \"\\t\" + \"TRUE\" + \"<br />\";\n        }\n    }\n    catch (Exception ex) {\n        result = \"FEHLER: <br />\" + ex.toString();\n    }\n\n    node.close();\n    return result;\n}\n```\n\npublic String showAll()\n    {\n        String result = \"\";\n\n```\n    Node node = nodeBuilder().clusterName(\"testcluster\").node();\n    Client client = node.client();\n\n    SearchHits sh = client.prepareSearch(\"times\").execute().actionGet().getHits();\n\n    result += \"Anzahl der Dateien: \" + sh.getTotalHits() + \"<br />\";\n\n    for (int i = 0; i < sh.getTotalHits(); i++)\n    {\n        result += \"ID \" + sh.getAt(i).getSource().get(\"Time-ID\") \n                + \": \\t\\t\" + sh.getAt(i).getSource().get(\"Timestamp\")\n                + \"\\t\\t\" + \"(\" + sh.getAt(i).getId() + \")\"\n                + \"<br />\";\n    }\n\n    node.close();\n    return result;\n}\n```\n","closed_by":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"performed_via_github_app":null}