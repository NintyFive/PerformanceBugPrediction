{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/351","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/351/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/351/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/351/events","html_url":"https://github.com/elastic/elasticsearch/issues/351","id":301184,"node_id":"MDU6SXNzdWUzMDExODQ=","number":351,"title":"groovy - performing search using byte[] causes parse exception","user":{"login":"mcclured","id":331106,"node_id":"MDQ6VXNlcjMzMTEwNg==","avatar_url":"https://avatars3.githubusercontent.com/u/331106?v=4","gravatar_id":"","url":"https://api.github.com/users/mcclured","html_url":"https://github.com/mcclured","followers_url":"https://api.github.com/users/mcclured/followers","following_url":"https://api.github.com/users/mcclured/following{/other_user}","gists_url":"https://api.github.com/users/mcclured/gists{/gist_id}","starred_url":"https://api.github.com/users/mcclured/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcclured/subscriptions","organizations_url":"https://api.github.com/users/mcclured/orgs","repos_url":"https://api.github.com/users/mcclured/repos","events_url":"https://api.github.com/users/mcclured/events{/privacy}","received_events_url":"https://api.github.com/users/mcclured/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2010-09-03T10:55:58Z","updated_at":"2010-09-05T18:44:05Z","closed_at":"2010-09-05T18:44:05Z","author_association":"NONE","active_lock_reason":null,"body":"When performing a search using closures in setQuery, everything works fine:\n\n```\n ex:  node.client.prepareSearch(\"test\").setQuery({term(user:\"kimchy\")}).gexecute();\n```\n\nIf you pass a byte[] that represents the exact same closure then you will get a parse exception (see error below, bogus comma added right before \"query\"):\n\n```\n ex:  node.client.prepareSearch(\"test\").setQuery(\"{term(user:\\\"kimchy\\\")}\".getBytes()).gexecute();\n```\n\nERROR 2010-09-02 08:47:55,945 [main] Failed to execute phase [query], total failure; shardFailures {[38274707-cc69-459d-ad20-7c7b2fbc1a70][test][2]: RemoteTransportException[[Frigga][inet[/127.0.0.1:9300]][search/phase/query]]; nested: SearchParseException[[test][2]: query[null],from[-1],size[-1]: Parse Failure [Failed to parse [{, \"query\" : {term(user:\"kimchy\")}}]]]; nested: JsonParseException[Unexpected character (',' (code 44)): was expecting either valid name character (for unquoted name) or double-quote (for quoted) to start field name\n at [Source: [B@29d54d9a; line: 1, column: 3]];\n","closed_by":null,"performed_via_github_app":null}