[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/50729938","html_url":"https://github.com/elastic/elasticsearch/issues/7101#issuecomment-50729938","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7101","id":50729938,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNzI5OTM4","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-07-31T08:14:50Z","updated_at":"2014-07-31T08:14:50Z","author_association":"CONTRIBUTOR","body":"Hi @JeffreyZZ \n\nPlease could you attach your mapping:\n\n```\nGET /doc-v2/_mapping?pretty\n```\n\nthanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/50787110","html_url":"https://github.com/elastic/elasticsearch/issues/7101#issuecomment-50787110","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7101","id":50787110,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNzg3MTEw","user":{"login":"JeffreyZZ","id":7685299,"node_id":"MDQ6VXNlcjc2ODUyOTk=","avatar_url":"https://avatars3.githubusercontent.com/u/7685299?v=4","gravatar_id":"","url":"https://api.github.com/users/JeffreyZZ","html_url":"https://github.com/JeffreyZZ","followers_url":"https://api.github.com/users/JeffreyZZ/followers","following_url":"https://api.github.com/users/JeffreyZZ/following{/other_user}","gists_url":"https://api.github.com/users/JeffreyZZ/gists{/gist_id}","starred_url":"https://api.github.com/users/JeffreyZZ/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JeffreyZZ/subscriptions","organizations_url":"https://api.github.com/users/JeffreyZZ/orgs","repos_url":"https://api.github.com/users/JeffreyZZ/repos","events_url":"https://api.github.com/users/JeffreyZZ/events{/privacy}","received_events_url":"https://api.github.com/users/JeffreyZZ/received_events","type":"User","site_admin":false},"created_at":"2014-07-31T16:57:59Z","updated_at":"2014-07-31T17:00:54Z","author_association":"NONE","body":"@clintongormley , here is the mapping. As it's too long so I excluded the duplicate fields. As you can see, for some historical reason, we have two displayPublishedDateTime fields defined, one is starting with a lowercase d and the other one is uppercase D. But we only use the lowercase one. \n\n{\n   \"doc-v2\": {\n      \"mappings\": {\n         \"article\": {\n            \"include_in_all\": false,\n            \"_all\": {\n               \"analyzer\": \"standard\"\n            },\n            \"_timestamp\": {\n               \"enabled\": true,\n               \"store\": true\n            },\n            \"properties\": {\n               \"_attributes\": {\n                  \"type\": \"object\",\n                  \"include_in_all\": false\n               },\n               \"_document\": {\n                  \"include_in_all\": false,\n                  \"properties\": {\n                     \"$type\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"Abstract\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"Authors\": {\n                        \"include_in_all\": false,\n                        \"properties\": {\n                           \"Name\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           }\n                        }\n                     },\n                     \"Body\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"DisplayPublishedDateTime\": {\n                        \"type\": \"date\",\n                        \"format\": \"dateOptionalTime\",\n                        \"include_in_all\": false\n                     }\n                     \"_locale\": {\n                        \"type\": \"string\",\n                        \"fields\": {\n                           \"ft\": {\n                              \"type\": \"string\",\n                              \"analyzer\": \"standard\"\n                           }\n                        },\n                        \"include_in_all\": false\n                     },\n                     \"_mapping\": {\n                        \"include_in_all\": false,\n                        \"properties\": {\n                           \"_filename\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"_version\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           }\n                        }\n                     },\n                     \"_name\": {\n                        \"type\": \"string\",\n                        \"fields\": {\n                           \"ft\": {\n                              \"type\": \"string\",\n                              \"analyzer\": \"standard\"\n                           }\n                        },\n                        \"include_in_all\": true\n                     },\n                     \"displayPublishedDateTime\": {\n                        \"type\": \"date\",\n                        \"format\": \"dateOptionalTime\",\n                        \"include_in_all\": false\n                     }\n                  }\n               }\n            }\n         }\n      }\n   }\n}\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/50787472","html_url":"https://github.com/elastic/elasticsearch/issues/7101#issuecomment-50787472","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7101","id":50787472,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNzg3NDcy","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-07-31T17:00:41Z","updated_at":"2014-07-31T17:00:41Z","author_association":"CONTRIBUTOR","body":"Hi @JeffreyZZ \n\nI actually wanted to see all the duplicate fields.  My suspicion is that you have the same field defined twice: once as a date and once as a string.  And I think that when you aggregate on that field, and it loads the values into memory, it is interpreting it as a string.\n\nIf you have the same field name in different types, they should have the same mapping.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/50789882","html_url":"https://github.com/elastic/elasticsearch/issues/7101#issuecomment-50789882","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7101","id":50789882,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNzg5ODgy","user":{"login":"JeffreyZZ","id":7685299,"node_id":"MDQ6VXNlcjc2ODUyOTk=","avatar_url":"https://avatars3.githubusercontent.com/u/7685299?v=4","gravatar_id":"","url":"https://api.github.com/users/JeffreyZZ","html_url":"https://github.com/JeffreyZZ","followers_url":"https://api.github.com/users/JeffreyZZ/followers","following_url":"https://api.github.com/users/JeffreyZZ/following{/other_user}","gists_url":"https://api.github.com/users/JeffreyZZ/gists{/gist_id}","starred_url":"https://api.github.com/users/JeffreyZZ/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JeffreyZZ/subscriptions","organizations_url":"https://api.github.com/users/JeffreyZZ/orgs","repos_url":"https://api.github.com/users/JeffreyZZ/repos","events_url":"https://api.github.com/users/JeffreyZZ/events{/privacy}","received_events_url":"https://api.github.com/users/JeffreyZZ/received_events","type":"User","site_admin":false},"created_at":"2014-07-31T17:19:05Z","updated_at":"2014-08-01T07:29:48Z","author_association":"NONE","body":"Hi, @clintongormley, thanks for the advice. Here is the full mappings for article type. I checked that there were 3 duplicates of displayPublishedDateTime in it, but they were all of the same mapping. What's more, this mapping has been used for a while in ES 1.1.1. Recently we updated our cluster to ES 1.2.2 with JVM G1 GC. But we found that G1 GC didn't give us good search performance, so we update JVM GC to CMS. It was during this period that we started to notice this order on displayPublishedDateTime issue. But I suppose that changing JVM GC shouldn't have any impact on index content. \n\n```\n{\n   \"doc-v2\": {\n      \"mappings\": {\n         \"article\": {\n            \"include_in_all\": false,\n            \"_all\": {\n               \"analyzer\": \"standard\"\n            },\n            \"_timestamp\": {\n               \"enabled\": true,\n               \"store\": true\n            },\n            \"properties\": {\n               \"_attributes\": {\n                  \"type\": \"object\",\n                  \"include_in_all\": false\n               },\n               \"_contentSize\": {\n                  \"type\": \"long\",\n                  \"include_in_all\": false\n               },\n               \"_document\": {\n                  \"include_in_all\": false,\n                  \"properties\": {\n                     \"$type\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"Abstract\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"Authors\": {\n                        \"include_in_all\": false,\n                        \"properties\": {\n                           \"Name\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           }\n                        }\n                     },\n                     \"Body\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"DisplayPublishedDateTime\": {\n                        \"type\": \"date\",\n                        \"format\": \"dateOptionalTime\",\n                        \"include_in_all\": false\n                     },\n                     \"ExcludedExperiences\": {\n                        \"include_in_all\": false,\n                        \"properties\": {\n                           \"Canvas\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"Platform\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           }\n                        }\n                     },\n                     \"ExcludedLocales\": {\n                        \"include_in_all\": false,\n                        \"properties\": {\n                           \"Publishing\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           }\n                        }\n                     },\n                     \"ExcludedVerticals\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"Facets\": {\n                        \"include_in_all\": false,\n                        \"properties\": {\n                           \"Key\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"Values\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           }\n                        }\n                     },\n                     \"Resources\": {\n                        \"include_in_all\": false,\n                        \"properties\": {\n                           \"ContentType\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"Reference\": {\n                              \"include_in_all\": false,\n                              \"properties\": {\n                                 \"href\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 }\n                              }\n                           }\n                        }\n                     },\n                     \"Seo\": {\n                        \"include_in_all\": false,\n                        \"properties\": {\n                           \"CanonicalAuthority\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"DisallowIndexing\": {\n                              \"type\": \"boolean\"\n                           },\n                           \"ExcludeFromSiteMap\": {\n                              \"type\": \"boolean\"\n                           }\n                        }\n                     },\n                     \"SourceId\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"SubscriptionType\": {\n                        \"type\": \"long\",\n                        \"include_in_all\": false\n                     },\n                     \"Subtitle\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"Title\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"_contentSize\": {\n                        \"type\": \"long\",\n                        \"include_in_all\": false\n                     },\n                     \"_createdDateTime\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"_expirationDateTime\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"_id\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"_isPublishingLocked\": {\n                        \"type\": \"boolean\"\n                     },\n                     \"_lastEditedDateTime\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"_lastPublishedDateTime\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"_lastPublishedSequence\": {\n                        \"type\": \"long\",\n                        \"include_in_all\": false\n                     },\n                     \"_linkIds\": {\n                        \"include_in_all\": false,\n                        \"properties\": {\n                           \"directPredecessorIds\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"sectionIds\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           }\n                        }\n                     },\n                     \"_links\": {\n                        \"include_in_all\": false,\n                        \"properties\": {\n                           \"_createdDateTime\": {\n                              \"type\": \"date\",\n                              \"format\": \"dateOptionalTime\",\n                              \"include_in_all\": false\n                           },\n                           \"_expirationDateTime\": {\n                              \"type\": \"date\",\n                              \"format\": \"dateOptionalTime\",\n                              \"include_in_all\": false\n                           },\n                           \"_id\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"_lastEditedDateTime\": {\n                              \"type\": \"date\",\n                              \"format\": \"dateOptionalTime\",\n                              \"include_in_all\": false\n                           },\n                           \"_lastPublishedDateTime\": {\n                              \"type\": \"date\",\n                              \"format\": \"dateOptionalTime\",\n                              \"include_in_all\": false\n                           },\n                           \"_lastPublishedSequence\": {\n                              \"type\": \"long\",\n                              \"include_in_all\": false\n                           },\n                           \"_locale\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"_name\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"_systemTags\": {\n                              \"include_in_all\": false,\n                              \"properties\": {\n                                 \"key\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 }\n                              }\n                           },\n                           \"abstract\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"authors\": {\n                              \"include_in_all\": false,\n                              \"properties\": {\n                                 \"name\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 }\n                              }\n                           },\n                           \"body\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"displayPublishedDateTime\": {\n                              \"type\": \"date\",\n                              \"format\": \"dateOptionalTime\",\n                              \"include_in_all\": false\n                           },\n                           \"facets\": {\n                              \"include_in_all\": false,\n                              \"properties\": {\n                                 \"key\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 },\n                                 \"values\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 }\n                              }\n                           },\n                           \"feed\": {\n                              \"include_in_all\": false,\n                              \"properties\": {\n                                 \"href\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 },\n                                 \"provider\": {\n                                    \"include_in_all\": false,\n                                    \"properties\": {\n                                       \"href\": {\n                                          \"type\": \"string\",\n                                          \"include_in_all\": false\n                                       }\n                                    }\n                                 },\n                                 \"references\": {\n                                    \"include_in_all\": false,\n                                    \"properties\": {\n                                       \"direction\": {\n                                          \"type\": \"string\",\n                                          \"include_in_all\": false\n                                       },\n                                       \"href\": {\n                                          \"type\": \"string\",\n                                          \"include_in_all\": false\n                                       }\n                                    }\n                                 },\n                                 \"self\": {\n                                    \"include_in_all\": false,\n                                    \"properties\": {\n                                       \"href\": {\n                                          \"type\": \"string\",\n                                          \"include_in_all\": false\n                                       }\n                                    }\n                                 }\n                              }\n                           },\n                           \"headlines\": {\n                              \"include_in_all\": false,\n                              \"properties\": {\n                                 \"image\": {\n                                    \"include_in_all\": false,\n                                    \"properties\": {\n                                       \"caption\": {\n                                          \"type\": \"string\",\n                                          \"include_in_all\": false\n                                       },\n                                       \"href\": {\n                                          \"type\": \"string\",\n                                          \"include_in_all\": false\n                                       }\n                                    }\n                                 },\n                                 \"subtitle\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 },\n                                 \"title\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 }\n                              }\n                           },\n                           \"parent\": {\n                              \"include_in_all\": false,\n                              \"properties\": {\n                                 \"direction\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 },\n                                 \"href\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 }\n                              }\n                           },\n                           \"provider\": {\n                              \"include_in_all\": false,\n                              \"properties\": {\n                                 \"href\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 }\n                              }\n                           },\n                           \"references\": {\n                              \"include_in_all\": false,\n                              \"properties\": {\n                                 \"Direction\": {\n                                    \"type\": \"long\",\n                                    \"include_in_all\": false\n                                 },\n                                 \"direction\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 },\n                                 \"href\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 }\n                              }\n                           },\n                           \"resources\": {\n                              \"include_in_all\": false,\n                              \"properties\": {\n                                 \"caption\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 },\n                                 \"contentType\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 },\n                                 \"reference\": {\n                                    \"include_in_all\": false,\n                                    \"properties\": {\n                                       \"href\": {\n                                          \"type\": \"string\",\n                                          \"include_in_all\": false\n                                       }\n                                    }\n                                 }\n                              }\n                           },\n                           \"section\": {\n                              \"include_in_all\": false,\n                              \"properties\": {\n                                 \"href\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 }\n                              }\n                           },\n                           \"self\": {\n                              \"include_in_all\": false,\n                              \"properties\": {\n                                 \"href\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 }\n                              }\n                           },\n                           \"seo\": {\n                              \"include_in_all\": false,\n                              \"properties\": {\n                                 \"canonicalUrl\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 },\n                                 \"disallowIndexing\": {\n                                    \"type\": \"boolean\"\n                                 },\n                                 \"excludeFromSiteMap\": {\n                                    \"type\": \"boolean\"\n                                 },\n                                 \"keywords\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 }\n                              }\n                           },\n                           \"sourceId\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"subscriptionType\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"subtitle\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"title\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           }\n                        }\n                     },\n                     \"_locale\": {\n                        \"type\": \"string\",\n                        \"fields\": {\n                           \"ft\": {\n                              \"type\": \"string\",\n                              \"analyzer\": \"standard\"\n                           }\n                        },\n                        \"include_in_all\": false\n                     },\n                     \"_mapping\": {\n                        \"include_in_all\": false,\n                        \"properties\": {\n                           \"_filename\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"_version\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           }\n                        }\n                     },\n                     \"_name\": {\n                        \"type\": \"string\",\n                        \"fields\": {\n                           \"ft\": {\n                              \"type\": \"string\",\n                              \"analyzer\": \"standard\"\n                           }\n                        },\n                        \"include_in_all\": true\n                     },\n                     \"_snippet\": {\n                        \"include_in_all\": false,\n                        \"properties\": {\n                           \"_abstract\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"_authors\": {\n                              \"include_in_all\": false,\n                              \"properties\": {\n                                 \"name\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 }\n                              }\n                           },\n                           \"_expirationDateTime\": {\n                              \"type\": \"date\",\n                              \"format\": \"dateOptionalTime\",\n                              \"include_in_all\": false\n                           },\n                           \"_id\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"_image\": {\n                              \"include_in_all\": false,\n                              \"properties\": {\n                                 \"caption\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 },\n                                 \"href\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 }\n                              }\n                           },\n                           \"_lastEditedDateTime\": {\n                              \"type\": \"date\",\n                              \"format\": \"dateOptionalTime\",\n                              \"include_in_all\": false\n                           },\n                           \"_lastPublishedDateTime\": {\n                              \"type\": \"date\",\n                              \"format\": \"dateOptionalTime\",\n                              \"include_in_all\": false\n                           },\n                           \"_provider\": {\n                              \"include_in_all\": false,\n                              \"properties\": {\n                                 \"href\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 }\n                              }\n                           },\n                           \"_title\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"_type\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           }\n                        }\n                     },\n                     \"_systemTags\": {\n                        \"include_in_all\": false,\n                        \"properties\": {\n                           \"Key\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"Values\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"key\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"values\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           }\n                        }\n                     },\n                     \"abstract\": {\n                        \"type\": \"string\",\n                        \"fields\": {\n                           \"ft\": {\n                              \"type\": \"string\",\n                              \"analyzer\": \"standard\"\n                           }\n                        },\n                        \"include_in_all\": true\n                     },\n                     \"authors\": {\n                        \"include_in_all\": false,\n                        \"properties\": {\n                           \"bio\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"image\": {\n                              \"include_in_all\": false,\n                              \"properties\": {\n                                 \"caption\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 },\n                                 \"href\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 }\n                              }\n                           },\n                           \"name\": {\n                              \"type\": \"string\",\n                              \"fields\": {\n                                 \"ft\": {\n                                    \"type\": \"string\",\n                                    \"analyzer\": \"standard\"\n                                 }\n                              },\n                              \"include_in_all\": true\n                           }\n                        }\n                     },\n                     \"body\": {\n                        \"type\": \"string\",\n                        \"fields\": {\n                           \"ft\": {\n                              \"type\": \"string\",\n                              \"analyzer\": \"standard\"\n                           }\n                        },\n                        \"include_in_all\": false\n                     },\n                     \"caption\": {\n                        \"type\": \"string\",\n                        \"fields\": {\n                           \"ft\": {\n                              \"type\": \"string\",\n                              \"analyzer\": \"standard\"\n                           }\n                        },\n                        \"include_in_all\": true\n                     },\n                     \"displayName\": {\n                        \"type\": \"string\",\n                        \"fields\": {\n                           \"ft\": {\n                              \"type\": \"string\",\n                              \"analyzer\": \"standard\"\n                           }\n                        },\n                        \"include_in_all\": true\n                     },\n                     \"displayPublishedDateTime\": {\n                        \"type\": \"date\",\n                        \"format\": \"dateOptionalTime\",\n                        \"include_in_all\": false\n                     },\n                     \"excludedExperiences\": {\n                        \"include_in_all\": false,\n                        \"properties\": {\n                           \"canvas\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"platform\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           }\n                        }\n                     },\n                     \"excludedLocales\": {\n                        \"include_in_all\": false,\n                        \"properties\": {\n                           \"publishing\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"viewing\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           }\n                        }\n                     },\n                     \"excludedVerticals\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"facets\": {\n                        \"include_in_all\": false,\n                        \"properties\": {\n                           \"key\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"value\": {\n                              \"type\": \"long\",\n                              \"include_in_all\": false\n                           },\n                           \"values\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           }\n                        }\n                     },\n                     \"friendlyName\": {\n                        \"type\": \"string\",\n                        \"fields\": {\n                           \"ft\": {\n                              \"type\": \"string\",\n                              \"analyzer\": \"standard\"\n                           }\n                        },\n                        \"include_in_all\": true\n                     },\n                     \"headlines\": {\n                        \"include_in_all\": false,\n                        \"properties\": {\n                           \"Subtitle\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"Title\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"image\": {\n                              \"include_in_all\": false,\n                              \"properties\": {\n                                 \"attribution\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 },\n                                 \"caption\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 },\n                                 \"direction\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 },\n                                 \"href\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 }\n                              }\n                           },\n                           \"kicker\": {\n                              \"type\": \"string\",\n                              \"fields\": {\n                                 \"ft\": {\n                                    \"type\": \"string\",\n                                    \"analyzer\": \"standard\"\n                                 }\n                              },\n                              \"include_in_all\": true\n                           },\n                           \"slideshow\": {\n                              \"include_in_all\": false,\n                              \"properties\": {\n                                 \"href\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 }\n                              }\n                           },\n                           \"subtitle\": {\n                              \"type\": \"string\",\n                              \"fields\": {\n                                 \"ft\": {\n                                    \"type\": \"string\",\n                                    \"analyzer\": \"standard\"\n                                 }\n                              },\n                              \"include_in_all\": true\n                           },\n                           \"title\": {\n                              \"type\": \"string\",\n                              \"fields\": {\n                                 \"ft\": {\n                                    \"type\": \"string\",\n                                    \"analyzer\": \"standard\"\n                                 }\n                              },\n                              \"include_in_all\": true\n                           }\n                        }\n                     },\n                     \"kicker\": {\n                        \"type\": \"string\",\n                        \"fields\": {\n                           \"ft\": {\n                              \"type\": \"string\",\n                              \"analyzer\": \"standard\"\n                           }\n                        },\n                        \"include_in_all\": true\n                     },\n                     \"labels\": {\n                        \"type\": \"object\",\n                        \"include_in_all\": false\n                     },\n                     \"related\": {\n                        \"include_in_all\": false,\n                        \"properties\": {\n                           \"link\": {\n                              \"include_in_all\": false,\n                              \"properties\": {\n                                 \"href\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 },\n                                 \"image\": {\n                                    \"include_in_all\": false,\n                                    \"properties\": {\n                                       \"href\": {\n                                          \"type\": \"string\",\n                                          \"include_in_all\": false\n                                       }\n                                    }\n                                 },\n                                 \"title\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 }\n                              }\n                           },\n                           \"reference\": {\n                              \"include_in_all\": false,\n                              \"properties\": {\n                                 \"href\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 }\n                              }\n                           }\n                        }\n                     },\n                     \"resources\": {\n                        \"include_in_all\": false,\n                        \"properties\": {\n                           \"caption\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"contentType\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"href\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"reference\": {\n                              \"include_in_all\": false,\n                              \"properties\": {\n                                 \"attribution\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 },\n                                 \"caption\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 },\n                                 \"direction\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 },\n                                 \"href\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 }\n                              }\n                           }\n                        }\n                     },\n                     \"seo\": {\n                        \"include_in_all\": false,\n                        \"properties\": {\n                           \"canonicalAuthority\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"canonicalURL\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"canonicalUrl\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"disallowIndexing\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"excludeFromSiteMap\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"keywords\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           }\n                        }\n                     },\n                     \"sourceHref\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"sourceID\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"sourceId\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"subscriptionType\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"subtitle\": {\n                        \"type\": \"string\",\n                        \"fields\": {\n                           \"ft\": {\n                              \"type\": \"string\",\n                              \"analyzer\": \"standard\"\n                           }\n                        },\n                        \"include_in_all\": true\n                     },\n                     \"title\": {\n                        \"type\": \"string\",\n                        \"fields\": {\n                           \"ft\": {\n                              \"type\": \"string\",\n                              \"analyzer\": \"standard\"\n                           }\n                        },\n                        \"include_in_all\": true\n                     },\n                     \"updatedDateTime\": {\n                        \"type\": \"date\",\n                        \"format\": \"dateOptionalTime\",\n                        \"include_in_all\": false\n                     }\n                  }\n               },\n               \"_linkIds\": {\n                  \"include_in_all\": false,\n                  \"properties\": {\n                     \"directPredecessorIds\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"sectionIds\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     }\n                  }\n               },\n               \"_mapping\": {\n                  \"include_in_all\": false,\n                  \"properties\": {\n                     \"_filename\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"_version\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     }\n                  }\n               },\n               \"_snippet\": {\n                  \"include_in_all\": false,\n                  \"properties\": {\n                     \"_abstract\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"_authors\": {\n                        \"include_in_all\": false,\n                        \"properties\": {\n                           \"bio\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"image\": {\n                              \"include_in_all\": false,\n                              \"properties\": {\n                                 \"caption\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 },\n                                 \"href\": {\n                                    \"type\": \"string\",\n                                    \"include_in_all\": false\n                                 }\n                              }\n                           },\n                           \"name\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           }\n                        }\n                     },\n                     \"_expirationDateTime\": {\n                        \"type\": \"date\",\n                        \"format\": \"dateOptionalTime\",\n                        \"include_in_all\": false\n                     },\n                     \"_feed\": {\n                        \"include_in_all\": false,\n                        \"properties\": {\n                           \"href\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           }\n                        }\n                     },\n                     \"_id\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"_image\": {\n                        \"include_in_all\": false,\n                        \"properties\": {\n                           \"attribution\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"caption\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"direction\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           },\n                           \"href\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           }\n                        }\n                     },\n                     \"_lastEditedDateTime\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"_lastPublishedDateTime\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"_provider\": {\n                        \"include_in_all\": false,\n                        \"properties\": {\n                           \"href\": {\n                              \"type\": \"string\",\n                              \"include_in_all\": false\n                           }\n                        }\n                     },\n                     \"_title\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     },\n                     \"_type\": {\n                        \"type\": \"string\",\n                        \"include_in_all\": false\n                     }\n                  }\n               }\n            }\n         }\n      }\n   }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/50830929","html_url":"https://github.com/elastic/elasticsearch/issues/7101#issuecomment-50830929","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7101","id":50830929,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODMwOTI5","user":{"login":"JeffreyZZ","id":7685299,"node_id":"MDQ6VXNlcjc2ODUyOTk=","avatar_url":"https://avatars3.githubusercontent.com/u/7685299?v=4","gravatar_id":"","url":"https://api.github.com/users/JeffreyZZ","html_url":"https://github.com/JeffreyZZ","followers_url":"https://api.github.com/users/JeffreyZZ/followers","following_url":"https://api.github.com/users/JeffreyZZ/following{/other_user}","gists_url":"https://api.github.com/users/JeffreyZZ/gists{/gist_id}","starred_url":"https://api.github.com/users/JeffreyZZ/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JeffreyZZ/subscriptions","organizations_url":"https://api.github.com/users/JeffreyZZ/orgs","repos_url":"https://api.github.com/users/JeffreyZZ/repos","events_url":"https://api.github.com/users/JeffreyZZ/events{/privacy}","received_events_url":"https://api.github.com/users/JeffreyZZ/received_events","type":"User","site_admin":false},"created_at":"2014-07-31T23:13:09Z","updated_at":"2014-07-31T23:13:09Z","author_association":"NONE","body":"On the same the index, we ran into the following ClassCastException exception on several shards, hope this information is helpful.  \n\n   \"took\": 206,\n   \"timed_out\": false,\n   \"_shards\": {\n      \"total\": 25,\n      \"successful\": 20,\n      \"failed\": 5,\n      \"failures\": [\n         {\n            \"index\": \"ppub-v2\",\n            \"shard\": 13,\n            \"status\": 500,\n            \"reason\": \"RemoteTransportException[[SEARCH2-17][inet[/10.0.4.15:9300]][search/phase/query]]; nested: QueryPhaseExecutionException[[amp-ppub-v2][13]: query[+ConstantScore(cache(_document.$type:article)) +_document._lastPublishedDateTime:[\\* TO 2014-07-29T00:26:16Z]],from[0],size[10],sort[<custom:\\\"_document.displayPublishedDateTime\\\": org.elasticsearch.index.fielddata.fieldcomparator.BytesRefFieldComparatorSource@318f2731>!]: Query Failed [Failed to execute main query]]; nested: ClassCastException; \"\n         }\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/50838909","html_url":"https://github.com/elastic/elasticsearch/issues/7101#issuecomment-50838909","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7101","id":50838909,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODM4OTA5","user":{"login":"JeffreyZZ","id":7685299,"node_id":"MDQ6VXNlcjc2ODUyOTk=","avatar_url":"https://avatars3.githubusercontent.com/u/7685299?v=4","gravatar_id":"","url":"https://api.github.com/users/JeffreyZZ","html_url":"https://github.com/JeffreyZZ","followers_url":"https://api.github.com/users/JeffreyZZ/followers","following_url":"https://api.github.com/users/JeffreyZZ/following{/other_user}","gists_url":"https://api.github.com/users/JeffreyZZ/gists{/gist_id}","starred_url":"https://api.github.com/users/JeffreyZZ/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JeffreyZZ/subscriptions","organizations_url":"https://api.github.com/users/JeffreyZZ/orgs","repos_url":"https://api.github.com/users/JeffreyZZ/repos","events_url":"https://api.github.com/users/JeffreyZZ/events{/privacy}","received_events_url":"https://api.github.com/users/JeffreyZZ/received_events","type":"User","site_admin":false},"created_at":"2014-08-01T01:12:08Z","updated_at":"2014-08-01T01:12:08Z","author_association":"NONE","body":"We also tried to clean up the index cache with the following command :\n        POST doc-v2/_cache/clear\n\nAfter that, executed the same query, Elasticsearch returned the following error : \n\n{\n   \"error\": \"ReduceSearchPhaseException[Failed to execute phase [query], [reduce] ]; nested: ClassCastException[java.lang.Long cannot be cast to org.apache.lucene.util.BytesRef]; \",\n   \"status\": 503\n}\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/50843537","html_url":"https://github.com/elastic/elasticsearch/issues/7101#issuecomment-50843537","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7101","id":50843537,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODQzNTM3","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2014-08-01T02:41:41Z","updated_at":"2014-08-01T02:41:41Z","author_association":"MEMBER","body":"Could you add your query to this thread?\nA full script repro would be awesome.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/50846927","html_url":"https://github.com/elastic/elasticsearch/issues/7101#issuecomment-50846927","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7101","id":50846927,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODQ2OTI3","user":{"login":"JeffreyZZ","id":7685299,"node_id":"MDQ6VXNlcjc2ODUyOTk=","avatar_url":"https://avatars3.githubusercontent.com/u/7685299?v=4","gravatar_id":"","url":"https://api.github.com/users/JeffreyZZ","html_url":"https://github.com/JeffreyZZ","followers_url":"https://api.github.com/users/JeffreyZZ/followers","following_url":"https://api.github.com/users/JeffreyZZ/following{/other_user}","gists_url":"https://api.github.com/users/JeffreyZZ/gists{/gist_id}","starred_url":"https://api.github.com/users/JeffreyZZ/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JeffreyZZ/subscriptions","organizations_url":"https://api.github.com/users/JeffreyZZ/orgs","repos_url":"https://api.github.com/users/JeffreyZZ/repos","events_url":"https://api.github.com/users/JeffreyZZ/events{/privacy}","received_events_url":"https://api.github.com/users/JeffreyZZ/received_events","type":"User","site_admin":false},"created_at":"2014-08-01T04:02:24Z","updated_at":"2014-08-01T04:02:24Z","author_association":"NONE","body":"@dadoonet  here is the query I used. There is a simple one that is at the top of this thread.\n\nGET /doc-v2/_search\n{\n  \"query\": {\n    \"bool\": {\n      \"must\": [\n        {\n          \"filtered\": {\n            \"filter\": {\n              \"terms\": {\n                \"_document.$type\": [\n                  \"article\"\n                ]\n              }\n            }\n          }\n        },\n        {\n          \"range\": {\n            \"_document._lastPublishedDateTime\": {\n              \"to\": \"2014-07-29T00:26:16Z\"\n            }\n          }\n        }\n      ]\n    }\n  },\n  \"size\": 100, \n  \"_source\":[\n    \"_id\",\n    \"_document.displayPublishedDateTime\",\n    \"_document._lastPublishedDateTime\"\n    ],\n  \"sort\": [\n    {\n      \"_document.displayPublishedDateTime\": {\n        \"order\": \"desc\"\n      }\n    }\n  ]\n}\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/50857069","html_url":"https://github.com/elastic/elasticsearch/issues/7101#issuecomment-50857069","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7101","id":50857069,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODU3MDY5","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-08-01T07:32:44Z","updated_at":"2014-08-01T07:32:44Z","author_association":"CONTRIBUTOR","body":"Hi @JeffreyZZ \n\nYou said: \n\n> Here is the full mappings for article type. I checked that there were 3 duplicates of displayPublishedDateTime in it, but they were all of the same mapping. \n\nBut what about other instances of displayPublishedDateTime in **other types** in the same index?  That's where I think things are going wrong.  And the `ClassCastException[java.lang.Long cannot be cast to org.apache.lucene.util.BytesRef]` that you report further evidence of that.\n\nSomewhere ES is getting confused about the type of data in that field.  Going from numeric -> string gives you the weird strings, and trying to go from string -> numeric gives you the cast exceptions.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/50858613","html_url":"https://github.com/elastic/elasticsearch/issues/7101#issuecomment-50858613","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7101","id":50858613,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODU4NjEz","user":{"login":"JeffreyZZ","id":7685299,"node_id":"MDQ6VXNlcjc2ODUyOTk=","avatar_url":"https://avatars3.githubusercontent.com/u/7685299?v=4","gravatar_id":"","url":"https://api.github.com/users/JeffreyZZ","html_url":"https://github.com/JeffreyZZ","followers_url":"https://api.github.com/users/JeffreyZZ/followers","following_url":"https://api.github.com/users/JeffreyZZ/following{/other_user}","gists_url":"https://api.github.com/users/JeffreyZZ/gists{/gist_id}","starred_url":"https://api.github.com/users/JeffreyZZ/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JeffreyZZ/subscriptions","organizations_url":"https://api.github.com/users/JeffreyZZ/orgs","repos_url":"https://api.github.com/users/JeffreyZZ/repos","events_url":"https://api.github.com/users/JeffreyZZ/events{/privacy}","received_events_url":"https://api.github.com/users/JeffreyZZ/received_events","type":"User","site_admin":false},"created_at":"2014-08-01T07:54:22Z","updated_at":"2014-08-01T07:54:22Z","author_association":"NONE","body":"Hi, @clintongormley,\nI did a further check that we do have displayPublishedDateTime, which is of string type but dateOptionalTime, defined in other types in the same index. Does this mean that Elasticsearch is unable to handle the case where the same field of different data types are placed different type in the same index?  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/50859377","html_url":"https://github.com/elastic/elasticsearch/issues/7101#issuecomment-50859377","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7101","id":50859377,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODU5Mzc3","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-08-01T08:04:09Z","updated_at":"2014-08-01T08:04:09Z","author_association":"CONTRIBUTOR","body":"Correct.  All fields with the same name in the same index are stored in the same place. In the future, we will throw an exception if fields with the same name in different types have different mappings.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/51097014","html_url":"https://github.com/elastic/elasticsearch/issues/7101#issuecomment-51097014","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7101","id":51097014,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDk3MDE0","user":{"login":"JeffreyZZ","id":7685299,"node_id":"MDQ6VXNlcjc2ODUyOTk=","avatar_url":"https://avatars3.githubusercontent.com/u/7685299?v=4","gravatar_id":"","url":"https://api.github.com/users/JeffreyZZ","html_url":"https://github.com/JeffreyZZ","followers_url":"https://api.github.com/users/JeffreyZZ/followers","following_url":"https://api.github.com/users/JeffreyZZ/following{/other_user}","gists_url":"https://api.github.com/users/JeffreyZZ/gists{/gist_id}","starred_url":"https://api.github.com/users/JeffreyZZ/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JeffreyZZ/subscriptions","organizations_url":"https://api.github.com/users/JeffreyZZ/orgs","repos_url":"https://api.github.com/users/JeffreyZZ/repos","events_url":"https://api.github.com/users/JeffreyZZ/events{/privacy}","received_events_url":"https://api.github.com/users/JeffreyZZ/received_events","type":"User","site_admin":false},"created_at":"2014-08-04T18:19:00Z","updated_at":"2014-08-04T18:19:00Z","author_association":"NONE","body":"Hi, @clintongormley , this would be a big concern for us to use Elasticsearch, because we don't have the full control over the data ingested into our Elasticsearch cluster, so it could be easy that the poison data, which has the same field of different type, is unintentionally ingested into the cluster. \nDo you have any idea about how to control this for the current release, such as 1.2.2?\nAnd ETA to implement the exception when fields with the same name in different types have different mappings?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/51097752","html_url":"https://github.com/elastic/elasticsearch/issues/7101#issuecomment-51097752","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7101","id":51097752,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDk3NzUy","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-08-04T18:24:43Z","updated_at":"2014-08-04T18:24:43Z","author_association":"CONTRIBUTOR","body":"Hi @JeffreyZZ - currently all you can do is to turn off dynamic mapping, so that new fields aren't created automatically. That would prevent creating incompatible field mappings, because it would prevent creating any new fields automatically, which may be a problem for you.\n\nBtw, this is nothing new.  This issue has been in Elasticsearch since the very beginning. So the change we are planning is just to enforce the advice that we have given previously.  It's a breaking change, so it won't happen before v2.0.0. and no, i have no idea when that will be released :)\n","performed_via_github_app":null}]