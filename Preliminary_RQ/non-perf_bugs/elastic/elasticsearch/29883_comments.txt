[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/388401922","html_url":"https://github.com/elastic/elasticsearch/issues/29883#issuecomment-388401922","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29883","id":388401922,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODQwMTkyMg==","user":{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false},"created_at":"2018-05-11T15:41:44Z","updated_at":"2018-05-11T15:41:44Z","author_association":"MEMBER","body":"Another instance: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+packaging-tests/2676/console\r\n\r\nLog: [sql-cli-test.txt](https://github.com/elastic/elasticsearch/files/1995955/sql-cli-test.txt)\r\n\r\n```\r\nSuccessfully started process 'command 'vagrant''\r\n1..41\r\nok 1 [X-PACK] install default distribution\r\nok 2 [X-PACK] verify x-pack installation\r\nok 3 [X-PACK] verify croneval works\r\nok 4 [TAR BOOTSTRAP PASSWORD] add bootstrap.password setting\r\nok 5 [TAR BOOTSTRAP PASSWORD] test bootstrap.password is in setting list\r\nok 6 [TAR BOOTSTRAP PASSWORD] test auto generated passwords with modified bootstrap.password\r\nnot ok 7 [TAR BOOTSTRAP PASSWORD] test elasticsearch-sql-cli\r\nnot ok 7 [TAR BOOTSTRAP PASSWORD] test elasticsearch-sql-cli\r\n# (in test file /project/build/packaging/bats/tests/20_tar_bootstrap_password.bats, line 149)\r\n# (in test file /project/build/packaging/bats/tests/20_tar_bootstrap_password.bats, line 149)\r\n#   `false' failed\r\n#   `false' failed\r\n# {\r\n#   \"error\" : {\r\n# {\r\n#   \"error\" : {\r\n#     \"root_cause\" : [\r\n#       {\r\n#         \"type\" : \"index_not_found_exception\",\r\n#         \"reason\" : \"no such index\",\r\n#         \"resource.type\" : \"index_expression\",\r\n#         \"resource.id\" : \"library\",\r\n#         \"index_uuid\" : \"_na_\",\r\n#         \"index\" : \"library\"\r\n#       }\r\n#     ],\r\n#     \"type\" : \"index_not_found_exception\",\r\n#     \"reason\" : \"no such index\",\r\n#     \"resource.type\" : \"index_expression\",\r\n#     \"resource.id\" : \"library\",\r\n#     \"index_uuid\" : \"_na_\",\r\n#     \"index\" : \"library\"\r\n#   },\r\n#   \"status\" : 404\r\n# }\r\n```\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/388402074","html_url":"https://github.com/elastic/elasticsearch/issues/29883#issuecomment-388402074","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29883","id":388402074,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODQwMjA3NA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-05-11T15:42:11Z","updated_at":"2018-05-11T15:42:11Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/388407671","html_url":"https://github.com/elastic/elasticsearch/issues/29883#issuecomment-388407671","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29883","id":388407671,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODQwNzY3MQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2018-05-11T16:01:51Z","updated_at":"2018-05-11T16:01:51Z","author_association":"CONTRIBUTOR","body":"This is a problem with the SQL test, not the packaging, I believe. The error report is fairly garbled but I see:\r\n```\r\n14:47:43 # line 1:15: [library] doesn't have any types so it is incompatible with sql]\r\n```\r\n\r\nAnd\r\n```\r\n14:47:43 # {\r\n14:47:43 #   \"error\" : {\r\n14:47:43 #     \"root_cause\" : [\r\n14:47:43 #       {\r\n14:47:43 #         \"type\" : \"index_not_found_exception\",\r\n14:47:43 #         \"reason\" : \"no such index\",\r\n14:47:43 #         \"resource.type\" : \"index_expression\",\r\n14:47:43 #         \"resource.id\" : \"library\",\r\n14:47:43 #         \"index_uuid\" : \"_na_\",\r\n14:47:43 #         \"index\" : \"library\"\r\n14:47:43 #       }\r\n14:47:43 #     ],\r\n14:47:43 #     \"type\" : \"index_not_found_exception\",\r\n14:47:43 #     \"reason\" : \"no such index\",\r\n14:47:43 #     \"resource.type\" : \"index_expression\",\r\n14:47:43 #     \"resource.id\" : \"library\",\r\n14:47:43 #     \"index_uuid\" : \"_na_\",\r\n14:47:43 #     \"index\" : \"library\"\r\n14:47:43 #   },\r\n14:47:43 #   \"status\" : 404\r\n14:47:43 # }\r\n```\r\n\r\nI *think* the index isn't being created properly by the test but I havne't a clue why.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/388409075","html_url":"https://github.com/elastic/elasticsearch/issues/29883#issuecomment-388409075","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29883","id":388409075,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODQwOTA3NQ==","user":{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false},"created_at":"2018-05-11T16:07:00Z","updated_at":"2018-05-11T16:07:00Z","author_association":"MEMBER","body":"Thanks @nik9000 for the correction.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/394366843","html_url":"https://github.com/elastic/elasticsearch/issues/29883#issuecomment-394366843","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29883","id":394366843,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NDM2Njg0Mw==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2018-06-04T14:06:09Z","updated_at":"2018-06-04T14:06:09Z","author_association":"MEMBER","body":"Similarly, this failed again in https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.x+packaging-tests/910/console\r\n\r\n```\r\n13:02:11 not ok 6 [TAR BOOTSTRAP PASSWORD] test auto generated passwords with modified bootstrap.password\r\n13:02:11 not ok 6 [TAR BOOTSTRAP PASSWORD] test auto generated passwords with modified bootstrap.password\r\n13:02:11 # (in test file /project/build/packaging/bats/tests/20_tar_bootstrap_password.bats, line 102)\r\n13:02:11 # (in test file /project/build/packaging/bats/tests/20_tar_bootstrap_password.bats, line 102)\r\n13:02:11 #   `false' failed\r\n13:02:11 #   `false' failed\r\n13:02:11 # Expected x-pack elasticsearch-setup-passwords tool exit code to be zero but got [75]\r\n13:02:11 # Initiating the setup of passwords for reserved users elastic,kibana,logstash_system,beats_system.\r\n13:02:11 # The passwords will be randomly generated and printed to the console.\r\n13:02:11 # Please confirm that you would like to continue [y/N]\r\n13:02:11 # \r\n13:02:11 # \r\n13:02:11 # Connection failure to: http://127.0.0.1:9200/_xpack/security/user/kibana/_password?pretty failed: Read timed out\r\n13:02:11 # \r\n13:02:11 # ERROR: Failed to set password for user [kibana].\r\n13:02:11 # Expected x-pack elasticsearch-setup-passwords tool exit code to be zero but got [75]\r\n13:02:11 # Initiating the setup of passwords for reserved users elastic,kibana,logstash_system,beats_system.\r\n13:02:11 # The passwords will be randomly generated and printed to the console.\r\n13:02:11 # Please confirm that you would like to continue [y/N]\r\n13:02:11 # \r\n13:02:11 # \r\n13:02:11 # Connection failure to: http://127.0.0.1:9200/_xpack/security/user/kibana/_password?pretty failed: Read timed out\r\n13:02:11 # \r\n13:02:11 # ERROR: Failed to set password for user [kibana].\r\n13:02:16 not ok 7 [TAR BOOTSTRAP PASSWORD] test elasticsearch-sql-cli\r\n13:02:16 not ok 7 [TAR BOOTSTRAP PASSWORD] test elasticsearch-sql-cli\r\n13:02:16 # (in test file /project/build/packaging/bats/tests/20_tar_bootstrap_password.bats, line 144)\r\n13:02:16 # (in test file /project/build/packaging/bats/tests/20_tar_bootstrap_password.bats, line 144)\r\n13:02:16 #   `false' failed\r\n13:02:16 #   `false' failed\r\n13:02:16 # {\r\n13:02:16 #   \"error\" : {\r\n13:02:16 #     \"root_cause\" : [\r\n13:02:16 #       {\r\n13:02:16 #         \"type\" : \"security_exception\",\r\n13:02:16 #         \"reason\" : \"failed to authenticate user [elastic]\",\r\n13:02:16 #         \"header\" : {\r\n13:02:16 #           \"WWW-Authenticate\" : \"Basic realm=\\\"security\\\" charset=\\\"UTF-8\\\"\"\r\n13:02:16 #         }\r\n13:02:16 #       }\r\n13:02:16 #     ],\r\n13:02:16 #     \"type\" : \"security_exception\",\r\n13:02:16 #     \"reason\" : \"failed to authenticate user [elastic]\",\r\n13:02:16 #     \"header\" : {\r\n13:02:16 #       \"WWW-Authenticate\" : \"Basic realm=\\\"security\\\" charset=\\\"UTF-8\\\"\"\r\n13:02:16 #     }\r\n13:02:16 #   },\r\n13:02:16 #   \"status\" : 401\r\n13:02:16 # }\r\n13:02:16 # SQL cli failed:\\nJun 04, 2018 1:02:10 PM org.jline.utils.Log logr\r\n13:02:16 # WARNING: Unable to create a system terminal, creating a dumb terminal (enable debug logging for more information)\r\n13:02:16 # password: Client Exception [java.sql.SQLInvalidAuthorizationSpecException: failed to authenticate user [elastic]]\r\n13:02:16 # org.elasticsearch.xpack.sql.client.shared.ClientException: java.sql.SQLInvalidAuthorizationSpecException: failed to authenticate user [elastic]\r\n13:02:16 # \tat org.elasticsearch.xpack.sql.cli.command.CliSession.checkConnection(CliSession.java:65)\r\n13:02:16 # \tat org.elasticsearch.xpack.sql.cli.Cli.checkConnection(Cli.java:130)\r\n13:02:16 # \tat org.elasticsearch.xpack.sql.cli.Cli.execute(Cli.java:120)\r\n13:02:16 # \tat org.elasticsearch.xpack.sql.cli.Cli.execute(Cli.java:102)\r\n13:02:16 # \tat org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124)\r\n13:02:16 # \tat org.elasticsearch.cli.Command.main(Command.java:90)\r\n13:02:16 # \tat org.elasticsearch.xpack.sql.cli.Cli.main(Cli.java:50)\r\n13:02:16 # Caused by: java.sql.SQLInvalidAuthorizationSpecException: failed to authenticate user [elastic]\r\n13:02:16 # \tat org.elasticsearch.xpack.sql.client.shared.JreHttpUrlConnection$SqlExceptionType.asException(JreHttpUrlConnection.java:306)\r\n13:02:16 # \tat org.elasticsearch.xpack.sql.client.shared.JreHttpUrlConnection.parserError(JreHttpUrlConnection.java:183)\r\n13:02:16 # \tat org.elasticsearch.xpack.sql.client.shared.JreHttpUrlConnection.request(JreHttpUrlConnection.java:158)\r\n13:02:16 # \tat org.elasticsearch.xpack.sql.client.HttpClient.lambda$get$4(HttpClient.java:126)\r\n13:02:16 # {\r\n13:02:16 #   \"error\" : {\r\n13:02:16 #     \"root_cause\" : [\r\n13:02:16 #       {\r\n13:02:16 #         \"type\" : \"security_exception\",\r\n13:02:16 #         \"reason\" : \"failed to authenticate user [elastic]\",\r\n13:02:16 #         \"header\" : {\r\n13:02:16 #           \"WWW-Authenticate\" : \"Basic realm=\\\"security\\\" charset=\\\"UTF-8\\\"\"\r\n13:02:16 #         }\r\n13:02:16 #       }\r\n13:02:16 #     ],\r\n13:02:16 #     \"type\" : \"security_exception\",\r\n13:02:16 #     \"reason\" : \"failed to authenticate user [elastic]\",\r\n13:02:16 #     \"header\" : {\r\n13:02:16 #       \"WWW-Authenticate\" : \"Basic realm=\\\"security\\\" charset=\\\"UTF-8\\\"\"\r\n13:02:16 #     }\r\n13:02:16 #   },\r\n13:02:16 #   \"status\" : 401\r\n13:02:16 # }\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/394747307","html_url":"https://github.com/elastic/elasticsearch/issues/29883#issuecomment-394747307","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29883","id":394747307,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NDc0NzMwNw==","user":{"login":"mayya-sharipova","id":5738841,"node_id":"MDQ6VXNlcjU3Mzg4NDE=","avatar_url":"https://avatars1.githubusercontent.com/u/5738841?v=4","gravatar_id":"","url":"https://api.github.com/users/mayya-sharipova","html_url":"https://github.com/mayya-sharipova","followers_url":"https://api.github.com/users/mayya-sharipova/followers","following_url":"https://api.github.com/users/mayya-sharipova/following{/other_user}","gists_url":"https://api.github.com/users/mayya-sharipova/gists{/gist_id}","starred_url":"https://api.github.com/users/mayya-sharipova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayya-sharipova/subscriptions","organizations_url":"https://api.github.com/users/mayya-sharipova/orgs","repos_url":"https://api.github.com/users/mayya-sharipova/repos","events_url":"https://api.github.com/users/mayya-sharipova/events{/privacy}","received_events_url":"https://api.github.com/users/mayya-sharipova/received_events","type":"User","site_admin":false},"created_at":"2018-06-05T15:12:31Z","updated_at":"2018-06-05T15:12:31Z","author_association":"CONTRIBUTOR","body":"Another instance: https://internal-ci.elastic.co/job/elastic+x-pack-elasticsearch+6.2+packaging-tests/108/console\r\n\r\n```\r\n09:02:11 not ok 6 [TAR BOOTSTRAP PASSWORD] test auto generated passwords with modified bootstrap.password\r\n09:02:11 # (in test file /project/build/packaging/bats/tests/20_tar_bootstrap_password.bats, line 102)\r\n09:02:11 # (in test file /project/build/packaging/bats/tests/20_tar_bootstrap_password.bats, line 102)\r\n09:02:11 #   `false' failed\r\n09:02:11 #   `false' failed\r\n09:02:11 # Expected x-pack elasticsearch-setup-passwords tool exit code to be zero but got [75]\r\n09:02:11 # Initiating the setup of passwords for reserved users elastic,kibana,logstash_system,beats_system.\r\n09:02:11 # The passwords will be randomly generated and printed to the console.\r\n09:02:11 # Please confirm that you would like to continue [y/N]\r\n09:02:11 # \r\n09:02:11 # \r\n09:02:11 # Connection failure to: http://127.0.0.1:9200/_xpack/security/user/kibana/_password?pretty failed: Read timed out\r\n09:02:11 # \r\n09:02:11 # ERROR: Failed to set password for user [kibana].\r\n09:02:11 # Expected x-pack elasticsearch-setup-passwords tool exit code to be zero but got [75]\r\n09:02:11 # Initiating the setup of passwords for reserved users elastic,kibana,logstash_system,beats_system.\r\n09:02:11 # The passwords will be randomly generated and printed to the console.\r\n09:02:11 # Please confirm that you would like to continue [y/N]\r\n09:02:11 # \r\n09:02:11 # \r\n09:02:11 # Connection failure to: http://127.0.0.1:9200/_xpack/security/user/kibana/_password?pretty failed: Read timed out\r\n09:02:11 # \r\n09:02:11 # ERROR: Failed to set password for user [kibana].\r\n09:02:16 not ok 7 [TAR BOOTSTRAP PASSWORD] test elasticsearch-sql-cli\r\n09:02:16 not ok 7 [TAR BOOTSTRAP PASSWORD] test elasticsearch-sql-cli\r\n09:02:16 # (in test file /project/build/packaging/bats/tests/20_tar_bootstrap_password.bats, line 144)\r\n09:02:16 # (in test file /project/build/packaging/bats/tests/20_tar_bootstrap_password.bats, line 144)\r\n09:02:16 #   `false' failed\r\n09:02:16 #   `false' failed\r\n09:02:16 # {\r\n09:02:16 #   \"error\" : {\r\n09:02:16 #     \"root_cause\" : [\r\n09:02:16 #       {\r\n09:02:16 #         \"type\" : \"security_exception\",\r\n09:02:16 #         \"reason\" : \"failed to authenticate user [elastic]\",\r\n09:02:16 #         \"header\" : {\r\n09:02:16 #           \"WWW-Authenticate\" : \"Basic realm=\\\"security\\\" charset=\\\"UTF-8\\\"\"\r\n09:02:16 #         }\r\n09:02:16 #       }\r\n09:02:16 #     ],\r\n09:02:16 #     \"type\" : \"security_exception\",\r\n09:02:16 #     \"reason\" : \"failed to authenticate user [elastic]\",\r\n09:02:16 #     \"header\" : {\r\n09:02:16 #       \"WWW-Authenticate\" : \"Basic realm=\\\"security\\\" charset=\\\"UTF-8\\\"\"\r\n09:02:16 #     }\r\n09:02:16 #   },\r\n09:02:16 #   \"status\" : 401\r\n09:02:16 # }\r\n09:02:16 # SQL cli failed:\\nJun 04, 2018 1:02:10 PM org.jline.utils.Log logr\r\n09:02:16 # WARNING: Unable to create a system terminal, creating a dumb terminal (enable debug logging for more information)\r\n09:02:16 # password: Client Exception [java.sql.SQLInvalidAuthorizationSpecException: failed to authenticate user [elastic]]\r\n09:02:16 # org.elasticsearch.xpack.sql.client.shared.ClientException: java.sql.SQLInvalidAuthorizationSpecException: failed to authenticate user [elastic]\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.cli.command.CliSession.checkConnection(CliSession.java:65)\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.cli.Cli.checkConnection(Cli.java:130)\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.cli.Cli.execute(Cli.java:120)\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.cli.Cli.execute(Cli.java:102)\r\n09:02:16 # \tat org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124)\r\n09:02:16 # \tat org.elasticsearch.cli.Command.main(Command.java:90)\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.cli.Cli.main(Cli.java:50)\r\n09:02:16 # Caused by: java.sql.SQLInvalidAuthorizationSpecException: failed to authenticate user [elastic]\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.client.shared.JreHttpUrlConnection$SqlExceptionType.asException(JreHttpUrlConnection.java:306)\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.client.shared.JreHttpUrlConnection.parserError(JreHttpUrlConnection.java:183)\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.client.shared.JreHttpUrlConnection.request(JreHttpUrlConnection.java:158)\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.client.HttpClient.lambda$get$4(HttpClient.java:126)\r\n09:02:16 # {\r\n09:02:16 #   \"error\" : {\r\n09:02:16 #     \"root_cause\" : [\r\n09:02:16 #       {\r\n09:02:16 #         \"type\" : \"security_exception\",\r\n09:02:16 #         \"reason\" : \"failed to authenticate user [elastic]\",\r\n09:02:16 #         \"header\" : {\r\n09:02:16 #           \"WWW-Authenticate\" : \"Basic realm=\\\"security\\\" charset=\\\"UTF-8\\\"\"\r\n09:02:16 #         }\r\n09:02:16 #       }\r\n09:02:16 #     ],\r\n09:02:16 #     \"type\" : \"security_exception\",\r\n09:02:16 #     \"reason\" : \"failed to authenticate user [elastic]\",\r\n09:02:16 #     \"header\" : {\r\n09:02:16 #       \"WWW-Authenticate\" : \"Basic realm=\\\"security\\\" charset=\\\"UTF-8\\\"\"\r\n09:02:16 #     }\r\n09:02:16 #   },\r\n09:02:16 #   \"status\" : 401\r\n09:02:16 # }\r\n09:02:16 # SQL cli failed:\\nJun 04, 2018 1:02:10 PM org.jline.utils.Log logr\r\n09:02:16 # WARNING: Unable to create a system terminal, creating a dumb terminal (enable debug logging for more information)\r\n09:02:16 # password: Client Exception [java.sql.SQLInvalidAuthorizationSpecException: failed to authenticate user [elastic]]\r\n09:02:16 # org.elasticsearch.xpack.sql.client.shared.ClientException: java.sql.SQLInvalidAuthorizationSpecException: failed to authenticate user [elastic]\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.cli.command.CliSession.checkConnection(CliSession.java:65)\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.cli.Cli.checkConnection(Cli.java:130)\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.cli.Cli.execute(Cli.java:120)\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.cli.Cli.execute(Cli.java:102)\r\n09:02:16 # \tat org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124)\r\n09:02:16 # \tat org.elasticsearch.cli.Command.main(Command.java:90)\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.cli.Cli.main(Cli.java:50)\r\n09:02:16 # Caused by: java.sql.SQLInvalidAuthorizationSpecException: failed to authenticate user [elastic]\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.client.shared.JreHttpUrlConnection$SqlExceptionType.asException(JreHttpUrlConnection.java:306)\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.client.shared.JreHttpUrlConnection.parserError(JreHttpUrlConnection.java:183)\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.client.shared.JreHttpUrlConnection.request(JreHttpUrlConnection.java:158)\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.client.HttpClient.lambda$get$4(HttpClient.java:126)\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.client.shared.JreHttpUrlConnect# \tat org.elasticsearch.xpack.sql.client.shared.JreHttpUrlConnect\r\n09:02:16 ion.http(JreHttpUrlConnection.java:62)\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.client.HttpClient.lambda$get$5(HttpClient.java:125)\r\n09:02:16 # \tat java.security.AccessController.doPrivileged(Native Method)\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.client.HttpClient.get(HttpClient.java:124)\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.client.HttpClient.serverInfo(HttpClient.java:64)\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.cli.command.CliSession.checkConnection(CliSession.java:63)\r\n09:02:16 # \t... 6 more\r\n09:02:16 # ERROR: Cannot communicate with the server http://elastic@127.0.0.1:9200. This version of CLI only works with Elasticsearch version v6.4.0 [5e38a35]\r\n09:02:16 ion.http(JreHttpUrlConnection.java:62)\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.client.HttpClient.lambda$get$5(HttpClient.java:125)\r\n09:02:16 # \tat java.security.AccessController.doPrivileged(Native Method)\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.client.HttpClient.get(HttpClient.java:124)\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.client.HttpClient.serverInfo(HttpClient.java:64)\r\n09:02:16 # \tat org.elasticsearch.xpack.sql.cli.command.CliSession.checkConnection(CliSession.java:63)\r\n09:02:16 # \t... 6 more\r\n09:02:16 # ERROR: Cannot communicate with the server http://elastic@127.0.0.1:9200. This version of CLI only works with Elasticsearch version v6.4.0 [5e38a35]\r\n```\r\n\r\n\r\n\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/394752918","html_url":"https://github.com/elastic/elasticsearch/issues/29883#issuecomment-394752918","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29883","id":394752918,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NDc1MjkxOA==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2018-06-05T15:27:12Z","updated_at":"2018-06-05T15:27:12Z","author_association":"MEMBER","body":"For what its worth, there was a rare sql CLI IT test failure also recently, maybe related, maybe not. Just posting this here for cross-reference https://github.com/elastic/elasticsearch/issues/30912","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/401951277","html_url":"https://github.com/elastic/elasticsearch/issues/29883#issuecomment-401951277","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29883","id":401951277,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMTk1MTI3Nw==","user":{"login":"andyb-elastic","id":29205940,"node_id":"MDQ6VXNlcjI5MjA1OTQw","avatar_url":"https://avatars2.githubusercontent.com/u/29205940?v=4","gravatar_id":"","url":"https://api.github.com/users/andyb-elastic","html_url":"https://github.com/andyb-elastic","followers_url":"https://api.github.com/users/andyb-elastic/followers","following_url":"https://api.github.com/users/andyb-elastic/following{/other_user}","gists_url":"https://api.github.com/users/andyb-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/andyb-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyb-elastic/subscriptions","organizations_url":"https://api.github.com/users/andyb-elastic/orgs","repos_url":"https://api.github.com/users/andyb-elastic/repos","events_url":"https://api.github.com/users/andyb-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/andyb-elastic/received_events","type":"User","site_admin":false},"created_at":"2018-07-02T22:01:06Z","updated_at":"2018-07-02T22:01:06Z","author_association":"CONTRIBUTOR","body":"I'm fairly certain this is the issue we've been tracking in #30295 and the sql cli failures are just a symptom, so I'm going to close in favor of that issue","performed_via_github_app":null}]