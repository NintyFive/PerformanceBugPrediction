{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/42218","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42218/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42218/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42218/events","html_url":"https://github.com/elastic/elasticsearch/issues/42218","id":446046029,"node_id":"MDU6SXNzdWU0NDYwNDYwMjk=","number":42218,"title":"elastic search 1.6.1 memory leak","user":{"login":"p4tooo","id":12237558,"node_id":"MDQ6VXNlcjEyMjM3NTU4","avatar_url":"https://avatars2.githubusercontent.com/u/12237558?v=4","gravatar_id":"","url":"https://api.github.com/users/p4tooo","html_url":"https://github.com/p4tooo","followers_url":"https://api.github.com/users/p4tooo/followers","following_url":"https://api.github.com/users/p4tooo/following{/other_user}","gists_url":"https://api.github.com/users/p4tooo/gists{/gist_id}","starred_url":"https://api.github.com/users/p4tooo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/p4tooo/subscriptions","organizations_url":"https://api.github.com/users/p4tooo/orgs","repos_url":"https://api.github.com/users/p4tooo/repos","events_url":"https://api.github.com/users/p4tooo/events{/privacy}","received_events_url":"https://api.github.com/users/p4tooo/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-05-20T10:42:17Z","updated_at":"2019-05-20T12:31:01Z","closed_at":"2019-05-20T12:31:01Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\r\n\r\nIn project I maintanent is used Nest client verion 1.6.1. \r\nI have this code:\r\n\r\n```\r\npublic Models.Order.ProductDto GetProductFromElastic(long ean)\r\n        {\r\n            const string documentType = \"commerceproducts\";\r\n            var esQuery = new SearchDescriptor<CommerceProduct>();\r\n            esQuery.Index(\"commerceprodukter_alias\");\r\n            esQuery.Type(\"commerceproducts\");\r\n            esQuery.From(0);\r\n            esQuery.Sort(y => y.OnField(\"_score\"));\r\n\r\n            esQuery.Query(x => x.MatchAll());\r\n            esQuery.Filter(f => f.And(new FilterDescriptor<CommerceProduct>().Terms(\"_type\", new[] { documentType })));\r\n            esQuery.Query(x => x.Filtered(ff => ff.Filter(f => f.Term(\"ean\", ean))));\r\n\r\n            var result = elasticClient.Search<CommerceProduct>(esQuery);\r\n            return result.Hits.Any() ? OrderMapper.Map<Models.Order.ProductDto>(result.Hits.First().Source) : null;\r\n        }\r\n```\r\n\r\nIt is possible, there is memory leak? After few deys it raised to almost 2GB on local env.\r\nIn production enviroment to 17Gb. \r\nI tried update to version 1.9.2, just need some time to test it.\r\nAlso I tried to profile it with dotMemory, but I can not see nothing relevant.\r\n\r\nCan you help me. \r\n\r\n\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}