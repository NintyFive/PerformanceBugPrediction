[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/276676586","html_url":"https://github.com/elastic/elasticsearch/issues/22881#issuecomment-276676586","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22881","id":276676586,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjY3NjU4Ng==","user":{"login":"giorgosp","id":3627869,"node_id":"MDQ6VXNlcjM2Mjc4Njk=","avatar_url":"https://avatars1.githubusercontent.com/u/3627869?v=4","gravatar_id":"","url":"https://api.github.com/users/giorgosp","html_url":"https://github.com/giorgosp","followers_url":"https://api.github.com/users/giorgosp/followers","following_url":"https://api.github.com/users/giorgosp/following{/other_user}","gists_url":"https://api.github.com/users/giorgosp/gists{/gist_id}","starred_url":"https://api.github.com/users/giorgosp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/giorgosp/subscriptions","organizations_url":"https://api.github.com/users/giorgosp/orgs","repos_url":"https://api.github.com/users/giorgosp/repos","events_url":"https://api.github.com/users/giorgosp/events{/privacy}","received_events_url":"https://api.github.com/users/giorgosp/received_events","type":"User","site_admin":false},"created_at":"2017-02-01T14:51:09Z","updated_at":"2017-02-01T14:51:09Z","author_association":"CONTRIBUTOR","body":"Hello @clintongormley @jpountz, I am looking for my first elasticsearch contribution!\r\n\r\nHowever, I cannot reproduce this bug on my fresh elasticsearch build. \r\nThis is the response for `GET /`:\r\n```\r\n{\r\n  \"name\": \"node-0\",\r\n  \"cluster_name\": \"distribution_run\",\r\n  \"cluster_uuid\": \"fQLnWXIERNuBj5vWoNtBlw\",\r\n  \"version\": {\r\n    \"number\": \"6.0.0-alpha1\",\r\n    \"build_hash\": \"a4ac29c\",\r\n    \"build_date\": \"2017-01-23T13:54:32.228Z\",\r\n    \"build_snapshot\": true,\r\n    \"lucene_version\": \"6.4.0\"\r\n  },\r\n  \"tagline\": \"You Know, for Search\"\r\n}\r\n```\r\n \r\nand this is what I get for the issue's request:\r\n```\r\nGET /_search\r\n{\r\n  \"aggs\": {\r\n    \"foobar\": {\r\n      \"range\": {\r\n        \"field\": \"hey\"\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n```\r\n{\r\n  \"took\": 27,\r\n  \"timed_out\": false,\r\n  \"_shards\": {\r\n    \"total\": 5,\r\n    \"successful\": 5,\r\n    \"failed\": 0\r\n  },\r\n  \"hits\": {\r\n    \"total\": 0,\r\n    \"max_score\": null,\r\n    \"hits\": []\r\n  },\r\n  \"aggregations\": {\r\n    \"foobar\": {\r\n      \"buckets\": []\r\n    }\r\n  }\r\n}\r\n```\r\nMy `java -version` on `OS X 10.11.6`\r\n```\r\njava version \"1.8.0_60\"\r\nJava(TM) SE Runtime Environment (build 1.8.0_60-b27)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.60-b23, mixed mode)\r\n```\r\n\r\nI understand that my build is 1 version later, should I build the 5.1.1 version and check the issue?\r\nThanks!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/276712328","html_url":"https://github.com/elastic/elasticsearch/issues/22881#issuecomment-276712328","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22881","id":276712328,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjcxMjMyOA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-02-01T16:51:56Z","updated_at":"2017-02-01T16:51:56Z","author_association":"CONTRIBUTOR","body":"Did you test on master or the 5.x branch? If it does not reproduce on 5.x, then then 5.1 branch is indeed what I would look at next.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/276815182","html_url":"https://github.com/elastic/elasticsearch/issues/22881#issuecomment-276815182","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22881","id":276815182,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjgxNTE4Mg==","user":{"login":"giorgosp","id":3627869,"node_id":"MDQ6VXNlcjM2Mjc4Njk=","avatar_url":"https://avatars1.githubusercontent.com/u/3627869?v=4","gravatar_id":"","url":"https://api.github.com/users/giorgosp","html_url":"https://github.com/giorgosp","followers_url":"https://api.github.com/users/giorgosp/followers","following_url":"https://api.github.com/users/giorgosp/following{/other_user}","gists_url":"https://api.github.com/users/giorgosp/gists{/gist_id}","starred_url":"https://api.github.com/users/giorgosp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/giorgosp/subscriptions","organizations_url":"https://api.github.com/users/giorgosp/orgs","repos_url":"https://api.github.com/users/giorgosp/repos","events_url":"https://api.github.com/users/giorgosp/events{/privacy}","received_events_url":"https://api.github.com/users/giorgosp/received_events","type":"User","site_admin":false},"created_at":"2017-02-01T23:18:39Z","updated_at":"2017-02-01T23:18:39Z","author_association":"CONTRIBUTOR","body":"Yes I was testing on master. I just checked 5.x, 5.1, 5.2 and it does reproduce on 5.1 only.\r\nSo I guess no further action is needed since it is ok on master and 5.x?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/276828320","html_url":"https://github.com/elastic/elasticsearch/issues/22881#issuecomment-276828320","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22881","id":276828320,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjgyODMyMA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-02-02T00:27:53Z","updated_at":"2017-02-02T00:27:53Z","author_association":"CONTRIBUTOR","body":"Good to know that issue is already fixed in 5.2! Thank you for investigating @giorgosp, we appreciate! I will close this issue now.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/276913605","html_url":"https://github.com/elastic/elasticsearch/issues/22881#issuecomment-276913605","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22881","id":276913605,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjkxMzYwNQ==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2017-02-02T09:54:32Z","updated_at":"2017-02-02T09:54:32Z","author_association":"MEMBER","body":"@giorgosp I don't think it's resolved in 5.x nor master. The only difference with 5.1 is that you need to have at least one document with the range field to fail the query. The following recreation for instance fails in 5.1, 5.2, 5.x and master:\r\n\r\n`````\r\nPUT t/t/1\r\n{\r\n   \"number\": 3\r\n}\r\n\r\nGET /_search\r\n{\r\n  \"aggs\": {\r\n    \"foobar\": {\r\n      \"range\": {\r\n        \"field\": \"number\"\r\n      }\r\n    }\r\n  }\r\n}\r\n`````","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/277111855","html_url":"https://github.com/elastic/elasticsearch/issues/22881#issuecomment-277111855","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22881","id":277111855,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzExMTg1NQ==","user":{"login":"giorgosp","id":3627869,"node_id":"MDQ6VXNlcjM2Mjc4Njk=","avatar_url":"https://avatars1.githubusercontent.com/u/3627869?v=4","gravatar_id":"","url":"https://api.github.com/users/giorgosp","html_url":"https://github.com/giorgosp","followers_url":"https://api.github.com/users/giorgosp/followers","following_url":"https://api.github.com/users/giorgosp/following{/other_user}","gists_url":"https://api.github.com/users/giorgosp/gists{/gist_id}","starred_url":"https://api.github.com/users/giorgosp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/giorgosp/subscriptions","organizations_url":"https://api.github.com/users/giorgosp/orgs","repos_url":"https://api.github.com/users/giorgosp/repos","events_url":"https://api.github.com/users/giorgosp/events{/privacy}","received_events_url":"https://api.github.com/users/giorgosp/received_events","type":"User","site_admin":false},"created_at":"2017-02-02T22:58:25Z","updated_at":"2017-02-02T22:58:25Z","author_association":"CONTRIBUTOR","body":"Ok, I am checking it","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/277141316","html_url":"https://github.com/elastic/elasticsearch/issues/22881#issuecomment-277141316","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22881","id":277141316,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzE0MTMxNg==","user":{"login":"giorgosp","id":3627869,"node_id":"MDQ6VXNlcjM2Mjc4Njk=","avatar_url":"https://avatars1.githubusercontent.com/u/3627869?v=4","gravatar_id":"","url":"https://api.github.com/users/giorgosp","html_url":"https://github.com/giorgosp","followers_url":"https://api.github.com/users/giorgosp/followers","following_url":"https://api.github.com/users/giorgosp/following{/other_user}","gists_url":"https://api.github.com/users/giorgosp/gists{/gist_id}","starred_url":"https://api.github.com/users/giorgosp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/giorgosp/subscriptions","organizations_url":"https://api.github.com/users/giorgosp/orgs","repos_url":"https://api.github.com/users/giorgosp/repos","events_url":"https://api.github.com/users/giorgosp/events{/privacy}","received_events_url":"https://api.github.com/users/giorgosp/received_events","type":"User","site_admin":false},"created_at":"2017-02-03T01:41:07Z","updated_at":"2017-02-03T01:41:07Z","author_association":"CONTRIBUTOR","body":"Ok, it fails  if the range aggregation query is invalid and the \"field\" value is an existing field inside the document (changing \"field\": \"number\" to \"field\": \"number1123\" doesn't reproduce the issue).\r\n\r\nI will keep working on it in my spare time but since I am also trying to familiarize myself with the codebase, if someone else wants to fix it faster than me then it is ok.","performed_via_github_app":null}]