[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/404767648","html_url":"https://github.com/elastic/elasticsearch/issues/31988#issuecomment-404767648","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31988","id":404767648,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNDc2NzY0OA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-07-13T08:40:30Z","updated_at":"2018-07-13T08:40:30Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search-aggs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/404767673","html_url":"https://github.com/elastic/elasticsearch/issues/31988#issuecomment-404767673","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31988","id":404767673,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNDc2NzY3Mw==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2018-07-13T08:40:38Z","updated_at":"2018-07-13T08:40:38Z","author_association":"MEMBER","body":"@polyfractal could you take a look at this?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/411493324","html_url":"https://github.com/elastic/elasticsearch/issues/31988#issuecomment-411493324","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31988","id":411493324,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMTQ5MzMyNA==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2018-08-08T17:47:58Z","updated_at":"2018-08-08T17:47:58Z","author_association":"MEMBER","body":"Hey @hzjiangjian, sorry for the delay... this fell through my inbox without noticing.\r\n\r\nI think you may be running into https://github.com/elastic/elasticsearch/issues/30608#issuecomment-389326863, which will be fixed in 6.4 (https://github.com/elastic/elasticsearch/pull/30632).  Can you try renaming your aggregations/pipeline aggs to use distinct names?  Right now your aggregations use the same name several times (`\"vals\"`, `\"field2\"`).  The bug I linked is triggered due to repeated names.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/411682063","html_url":"https://github.com/elastic/elasticsearch/issues/31988#issuecomment-411682063","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31988","id":411682063,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMTY4MjA2Mw==","user":{"login":"hzjiangjian","id":17780195,"node_id":"MDQ6VXNlcjE3NzgwMTk1","avatar_url":"https://avatars1.githubusercontent.com/u/17780195?v=4","gravatar_id":"","url":"https://api.github.com/users/hzjiangjian","html_url":"https://github.com/hzjiangjian","followers_url":"https://api.github.com/users/hzjiangjian/followers","following_url":"https://api.github.com/users/hzjiangjian/following{/other_user}","gists_url":"https://api.github.com/users/hzjiangjian/gists{/gist_id}","starred_url":"https://api.github.com/users/hzjiangjian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hzjiangjian/subscriptions","organizations_url":"https://api.github.com/users/hzjiangjian/orgs","repos_url":"https://api.github.com/users/hzjiangjian/repos","events_url":"https://api.github.com/users/hzjiangjian/events{/privacy}","received_events_url":"https://api.github.com/users/hzjiangjian/received_events","type":"User","site_admin":false},"created_at":"2018-08-09T08:37:44Z","updated_at":"2018-08-09T08:37:44Z","author_association":"NONE","body":"hi @polyfractal, glad to hear from you. I have worked around this issue. You know how I do this? \r\nThere are two different data structs in my project, most fields of both are in same datatype. I stored them in different index patterns(like data-a-2018.08.07, data-b-2018.08.07), with date suffix. The problem is i set them with the same alias(data-alias), and i use alias name to do search and aggregation. Maybe my problem(the traceback showed above) is caused by this. When i set different alias for them(data-a-2018.08.07 with data-a-alias, data-b-2018.08.07 with data-b-alias), the problem is solved, with the same aggregation request(just different in alias name). So i think maybe there are some data conflicts between two type of indexes. But i still cannot locate the conflicts.\r\nAs you mentioned, use different aggregation names, maybe i can try it later and see what will happen.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/416957213","html_url":"https://github.com/elastic/elasticsearch/issues/31988#issuecomment-416957213","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31988","id":416957213,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNjk1NzIxMw==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2018-08-29T13:40:27Z","updated_at":"2018-08-29T13:40:27Z","author_association":"MEMBER","body":"@hzjiangjian any update?  Otherwise I think we can close this, I'm fairly sure it was an instance of https://github.com/elastic/elasticsearch/issues/30608#issuecomment-389326863","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/418225284","html_url":"https://github.com/elastic/elasticsearch/issues/31988#issuecomment-418225284","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31988","id":418225284,"node_id":"MDEyOklzc3VlQ29tbWVudDQxODIyNTI4NA==","user":{"login":"hzjiangjian","id":17780195,"node_id":"MDQ6VXNlcjE3NzgwMTk1","avatar_url":"https://avatars1.githubusercontent.com/u/17780195?v=4","gravatar_id":"","url":"https://api.github.com/users/hzjiangjian","html_url":"https://github.com/hzjiangjian","followers_url":"https://api.github.com/users/hzjiangjian/followers","following_url":"https://api.github.com/users/hzjiangjian/following{/other_user}","gists_url":"https://api.github.com/users/hzjiangjian/gists{/gist_id}","starred_url":"https://api.github.com/users/hzjiangjian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hzjiangjian/subscriptions","organizations_url":"https://api.github.com/users/hzjiangjian/orgs","repos_url":"https://api.github.com/users/hzjiangjian/repos","events_url":"https://api.github.com/users/hzjiangjian/events{/privacy}","received_events_url":"https://api.github.com/users/hzjiangjian/received_events","type":"User","site_admin":false},"created_at":"2018-09-04T02:46:48Z","updated_at":"2018-09-04T02:46:48Z","author_association":"NONE","body":"@polyfractal  OK. Just close this.","performed_via_github_app":null}]