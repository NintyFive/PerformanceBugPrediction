[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/402128631","html_url":"https://github.com/elastic/elasticsearch/issues/31744#issuecomment-402128631","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31744","id":402128631,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMjEyODYzMQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-07-03T11:53:03Z","updated_at":"2018-07-03T11:53:03Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search-aggs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/431382532","html_url":"https://github.com/elastic/elasticsearch/issues/31744#issuecomment-431382532","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31744","id":431382532,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMTM4MjUzMg==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2018-10-19T14:29:34Z","updated_at":"2018-10-19T14:29:34Z","author_association":"MEMBER","body":"@jdconrad Is this intrinsic to how Painless works, e.g. empty strings are treated as null?  Or maybe something else?\r\n\r\nThere's also a case to be made that the regular aggregation shouldn't be making a bucket for empty strings, and _that's_ the bug not painless :)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/431418877","html_url":"https://github.com/elastic/elasticsearch/issues/31744#issuecomment-431418877","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31744","id":431418877,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMTQxODg3Nw==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2018-10-19T16:20:56Z","updated_at":"2018-10-19T16:20:56Z","author_association":"CONTRIBUTOR","body":"@polyfractal After a brief look at this, there's nothing Painless is doing directly to cause an empty string to be modified to null.  For whatever reason, we seem to interpret doc['field'].value and params._source.field as null.  @rjernst Do you know where empty strings might be translated to null for this issue?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/431461789","html_url":"https://github.com/elastic/elasticsearch/issues/31744#issuecomment-431461789","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31744","id":431461789,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMTQ2MTc4OQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2018-10-19T18:49:23Z","updated_at":"2018-10-19T18:49:23Z","author_association":"MEMBER","body":"I think this may have been inadvertently fixed recently by https://github.com/elastic/elasticsearch/pull/34457. The keyword field will use ordinal based terms aggregation, while script based will use the strings aggregator. Before that change, if the first doc accessed had an empty string, it would have been skipped.\r\n\r\nSo, this should be fixed in 6.5.0.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/431464326","html_url":"https://github.com/elastic/elasticsearch/issues/31744#issuecomment-431464326","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31744","id":431464326,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMTQ2NDMyNg==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2018-10-19T18:57:56Z","updated_at":"2018-10-19T18:57:56Z","author_association":"MEMBER","body":"Accidental fixes are the best kind of fixes :)  Thanks for looking into this @rjernst and @jdconrad ","performed_via_github_app":null}]