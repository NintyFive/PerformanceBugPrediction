{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/24839","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24839/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24839/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24839/events","html_url":"https://github.com/elastic/elasticsearch/issues/24839","id":230651497,"node_id":"MDU6SXNzdWUyMzA2NTE0OTc=","number":24839,"title":"new plugins add into elasticsearch when invoking the plugins appear a big problem","user":{"login":"liuguangmin","id":3112623,"node_id":"MDQ6VXNlcjMxMTI2MjM=","avatar_url":"https://avatars3.githubusercontent.com/u/3112623?v=4","gravatar_id":"","url":"https://api.github.com/users/liuguangmin","html_url":"https://github.com/liuguangmin","followers_url":"https://api.github.com/users/liuguangmin/followers","following_url":"https://api.github.com/users/liuguangmin/following{/other_user}","gists_url":"https://api.github.com/users/liuguangmin/gists{/gist_id}","starred_url":"https://api.github.com/users/liuguangmin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liuguangmin/subscriptions","organizations_url":"https://api.github.com/users/liuguangmin/orgs","repos_url":"https://api.github.com/users/liuguangmin/repos","events_url":"https://api.github.com/users/liuguangmin/events{/privacy}","received_events_url":"https://api.github.com/users/liuguangmin/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-05-23T09:55:05Z","updated_at":"2017-05-24T03:51:47Z","closed_at":"2017-05-23T10:41:42Z","author_association":"NONE","active_lock_reason":null,"body":"elasticsearch :5.3.0\r\njava:1.8.0\r\nOS:linux\r\nmaven configuration :: \r\n\t<name>es-segment</name>\r\n\t<url>http://maven.apache.org</url>\r\n\r\n\t<properties>\r\n\t\t<elasticsearch.version>5.3.0</elasticsearch.version>\r\n\t\t<jdk.version>1.8</jdk.version>\r\n\t\t<encode.version>UTF-8</encode.version>\r\n\t\t<gson.version>2.7</gson.version>\r\n\t\t<junit.version>4.12</junit.version>\r\n\t\t<commons.version>2.4.2</commons.version>\r\n\t\t<thrift.version>0.9.3</thrift.version>\r\n\t</properties>\r\n\r\n\t<build>\r\n\t\t<plugins>\r\n\t\t\t<plugin>\r\n\t\t\t\t<groupId>org.apache.maven.plugins</groupId>\r\n\t\t\t\t<artifactId>maven-compiler-plugin</artifactId>\r\n\t\t\t\t<configuration>\r\n\t\t\t\t\t<source>${jdk.version}</source>\r\n\t\t\t\t\t<target>${jdk.version}</target>\r\n\t\t\t\t\t<skipTests>true</skipTests>\r\n\t\t\t\t</configuration>\r\n\t\t\t</plugin>\r\n\t\t\t<plugin>\r\n\t\t\t\t<groupId>org.apache.maven.plugins</groupId>\r\n\t\t\t\t<artifactId>maven-dependency-plugin</artifactId>\r\n\t\t\t\t<version>2.10</version>\r\n\t\t\t\t<executions>\r\n\t\t\t\t\t<execution>\r\n\t\t\t\t\t\t<id>copy-dependencies</id>\r\n\t\t\t\t\t\t<phase>package</phase>\r\n\t\t\t\t\t\t<goals>\r\n\t\t\t\t\t\t\t<goal>copy-dependencies</goal>\r\n\t\t\t\t\t\t</goals>\r\n\t\t\t\t\t\t<configuration>\r\n\t\t\t\t\t\t\t<outputDirectory>${project.build.directory}/lib</outputDirectory>\r\n\t\t\t\t\t\t</configuration>\r\n\t\t\t\t\t</execution>\r\n\t\t\t\t</executions>\r\n\t\t\t</plugin>\r\n\t\t</plugins>\r\n\t</build>\r\n\r\n\t<dependencies>\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.elasticsearch</groupId>\r\n\t\t\t<artifactId>elasticsearch</artifactId>\r\n\t\t\t<version>${elasticsearch.version}</version>\r\n\t\t</dependency>\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.apache.thrift</groupId>\r\n\t\t\t<artifactId>libthrift</artifactId>\r\n\t\t\t<version>${thrift.version}</version>\r\n\t\t</dependency>\r\n\t\t<dependency>\r\n\t\t\t<groupId>com.google.code.gson</groupId>\r\n\t\t\t<artifactId>gson</artifactId>\r\n\t\t\t<version>${gson.version}</version>\r\n\t\t</dependency>\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.apache.commons</groupId>\r\n\t\t\t# <artifactId>commons-pool2</artifactId>\r\n\t\t\t<version>${commons.version}</version>\r\n\t\t</dependency>\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.slf4j</groupId>\r\n\t\t\t<artifactId>slf4j-api</artifactId>\r\n\t\t\t<version>1.6.4</version>\r\n\t\t</dependency>\r\n\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.slf4j</groupId>\r\n\t\t\t<artifactId>slf4j-log4j12</artifactId>\r\n\t\t\t<version>1.6.4</version>\r\n\t\t</dependency>\r\n\t\t<dependency>\r\n\t\t\t<groupId>junit</groupId>\r\n\t\t\t<artifactId>junit</artifactId>\r\n\t\t\t<version>${junit.version}</version>\r\n\t\t</dependency>\r\n\t</dependencies>\r\n# I develop a analyzer plugin through rpc invoke the analyzer.the analyzer plugin is normal load ,but when I  invoke the analyzer , a big problem is print ,\r\nthe analyzer is setting below:\r\nPUT /my_index\r\n{\r\n  \"settings\": {\r\n    \"analysis\": {\r\n      \"analyzer\": {\r\n        \"name_analyzer\": {\r\n          \"type\":\"nlp_rpc\",\r\n          \"rpcHost\": \"127.0.0.9\",\r\n          \"rpcPort\": 9999,\r\n          \"segMode\": \"search\",\r\n          \"withStopWord\": false,\r\n          \"poolSize\": 200\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n# And the opeartion is run normal,I invoke the analyzer as below:\r\nGET my_index/_analyze\r\n{\r\n  \"analyzer\":\"name_analyzer\",\r\n  \"text\":\"elasticsearch is great ! And I love elasticsearch very much!\"\r\n}\r\n# when I run the opeartion ,the error happen:\r\n[2017-05-23T17:34:03,817][DEBUG][o.e.a.a.i.a.TransportAnalyzeAction] [es-1] null: failed to execute [org.elasticsearch.action.admin.indices.analyze.AnalyzeRequest@3d063b00]\r\norg.elasticsearch.transport.RemoteTransportException: [es-1][10.25.114.90:9301][indices:admin/analyze[s]]\r\nCaused by: java.security.AccessControlException: access denied (\"javax.management.MBeanServerPermission\" \"createMBeanServer\")\r\n        at java.security.AccessControlContext.checkPermission(AccessControlContext.java:472) ~[?:1.8.0_121]\r\n        at java.security.AccessController.checkPermission(AccessController.java:884) ~[?:1.8.0_121]\r\n        at java.lang.SecurityManager.checkPermission(SecurityManager.java:549) ~[?:1.8.0_121]\r\n        at java.lang.management.ManagementFactory.getPlatformMBeanServer(ManagementFactory.java:465) ~[?:1.8.0_121]\r\n        at org.apache.commons.pool2.impl.BaseGenericObjectPool.jmxRegister(BaseGenericObjectPool.java:940) ~[?:?]\r\n        at org.apache.commons.pool2.impl.BaseGenericObjectPool.<init>(BaseGenericObjectPool.java:133) ~[?:?]\r\n        at org.apache.commons.pool2.impl.GenericObjectPool.<init>(GenericObjectPool.java:107) ~[?:?]\r\n        at com.datagrand.rpc.client.WordsegRpcClientPool.<init>(WordsegRpcClientPool.java:27) ~[?:?]\r\n        at com.datagrand.rpc.client.WordsegRpcClientPool.getPool(WordsegRpcClientPool.java:47) ~[?:?]\r\n        at com.datagrand.analysis.lucene.WordsegRpcTokenizer.<init>(WordsegRpcTokenizer.java:35) ~[?:?]\r\n        at com.datagrand.analysis.lucene.WordsegRpcAnalyzer.createComponents(WordsegRpcAnalyzer.java:29) ~[?:?]\r\n        at org.apache.lucene.analysis.AnalyzerWrapper.createComponents(AnalyzerWrapper.java:134) ~[lucene-core-6.4.1.jar:6.4.1 72f75b2503fa0aa4f0aff76d439874feb923bb0e - jpountz - 2017-02-01 14:43:32]\r\n        at org.apache.lucene.analysis.Analyzer.tokenStream(Analyzer.java:198) ~[lucene-core-6.4.1.jar:6.4.1 72f75b2503fa0aa4f0aff76d439874feb923bb0e - jpountz - 2017-02-01 14:43:32]\r\n        at org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.simpleAnalyze(TransportAnalyzeAction.java:216) ~[elasticsearch-5.3.0.jar:5.3.0]\r\n        at org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.analyze(TransportAnalyzeAction.java:201) ~[elasticsearch-5.3.0.jar:5.3.0]\r\n        at org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.shardOperation(TransportAnalyzeAction.java:149) ~[elasticsearch-5.3.0.jar:5.3.0]\r\n        at org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.shardOperation(TransportAnalyzeAction.java:76) ~[elasticsearch-5.3.0.jar:5.3.0]\r\n        at org.elasticsearch.action.support.single.shard.TransportSingleShardAction$ShardTransportHandler.messageReceived(TransportSingleShardAction.java:294) ~[elasticsearch-5.3.0.jar:5.3.0]\r\n        at org.elasticsearch.action.support.single.shard.TransportSingleShardAction$ShardTransportHandler.messageReceived(TransportSingleShardAction.java:287) ~[elasticsearch-5.3.0.jar:5.3.0]\r\n        at org.elasticsearch.transport.TransportRequestHandler.messageReceived(TransportRequestHandler.java:33) ~[elasticsearch-5.3.0.jar:5.3.0]\r\n        at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:69) ~[elasticsearch-5.3.0.jar:5.3.0]\r\n        at org.elasticsearch.transport.TransportService$7.doRun(TransportService.java:618) [elasticsearch-5.3.0.jar:5.3.0]\r\n        at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:613) [elasticsearch-5.3.0.jar:5.3.0]\r\n        at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) [elasticsearch-5.3.0.jar:5.3.0]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:1.8.0_121]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:1.8.0_121]\r\n        at java.lang.Thread.run(Thread.java:745) [?:1.8.0_121]\r\n[2017-05-23T17:34:03,831][WARN ][r.suppressed             ] path: /my_index/_analyze, params: {index=my_index}\r\norg.elasticsearch.transport.RemoteTransportException: [es-1][10.25.114.90:9301][indices:admin/analyze[s]]\r\nCaused by: java.security.AccessControlException: access denied (\"javax.management.MBeanServerPermission\" \"createMBeanServer\")\r\n        at java.security.AccessControlContext.checkPermission(AccessControlContext.java:472) ~[?:1.8.0_121]\r\n        at java.security.AccessController.checkPermission(AccessController.java:884) ~[?:1.8.0_121]\r\n        at java.lang.SecurityManager.checkPermission(SecurityManager.java:549) ~[?:1.8.0_121]\r\n        at java.lang.management.ManagementFactory.getPlatformMBeanServer(ManagementFactory.java:465) ~[?:1.8.0_121]\r\n        at org.apache.commons.pool2.impl.BaseGenericObjectPool.jmxRegister(BaseGenericObjectPool.java:940) ~[?:?]\r\n        at org.apache.commons.pool2.impl.BaseGenericObjectPool.<init>(BaseGenericObjectPool.java:133) ~[?:?]\r\n        at org.apache.commons.pool2.impl.GenericObjectPool.<init>(GenericObjectPool.java:107) ~[?:?]\r\n        at com.datagrand.rpc.client.WordsegRpcClientPool.<init>(WordsegRpcClientPool.java:27) ~[?:?]\r\n        at com.datagrand.rpc.client.WordsegRpcClientPool.getPool(WordsegRpcClientPool.java:47) ~[?:?]\r\n        at com.datagrand.analysis.lucene.WordsegRpcTokenizer.<init>(WordsegRpcTokenizer.java:35) ~[?:?]\r\n        at com.datagrand.analysis.lucene.WordsegRpcAnalyzer.createComponents(WordsegRpcAnalyzer.java:29) ~[?:?]\r\n        at org.apache.lucene.analysis.AnalyzerWrapper.createComponents(AnalyzerWrapper.java:134) ~[lucene-core-6.4.1.jar:6.4.1 72f75b2503fa0aa4f0aff76d439874feb923bb0e - jpountz - 2017-02-01 14:43:32]\r\n        at org.apache.lucene.analysis.Analyzer.tokenStream(Analyzer.java:198) ~[lucene-core-6.4.1.jar:6.4.1 72f75b2503fa0aa4f0aff76d439874feb923bb0e - jpountz - 2017-02-01 14:43:32]\r\n        at org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.simpleAnalyze(TransportAnalyzeAction.java:216) ~[elasticsearch-5.3.0.jar:5.3.0]\r\n        at org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.analyze(TransportAnalyzeAction.java:201) ~[elasticsearch-5.3.0.jar:5.3.0]\r\n        at org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.shardOperation(TransportAnalyzeAction.java:149) ~[elasticsearch-5.3.0.jar:5.3.0]\r\n        at org.elasticsearch.action.admin.indices.analyze.TransportAnalyzeAction.shardOperation(TransportAnalyzeAction.java:76) ~[elasticsearch-5.3.0.jar:5.3.0]\r\n        at org.elasticsearch.action.support.single.shard.TransportSingleShardAction$ShardTransportHandler.messageReceived(TransportSingleShardAction.java:294) ~[elasticsearch-5.3.0.jar:5.3.0]\r\n        at org.elasticsearch.action.support.single.shard.TransportSingleShardAction$ShardTransportHandler.messageReceived(TransportSingleShardAction.java:287) ~[elasticsearch-5.3.0.jar:5.3.0]\r\n        at org.elasticsearch.transport.TransportRequestHandler.messageReceived(TransportRequestHandler.java:33) ~[elasticsearch-5.3.0.jar:5.3.0]\r\n        at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:69) ~[elasticsearch-5.3.0.jar:5.3.0]\r\n        at org.elasticsearch.transport.TransportService$7.doRun(TransportService.java:618) [elasticsearch-5.3.0.jar:5.3.0]\r\n        at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:613) [elasticsearch-5.3.0.jar:5.3.0]\r\n        at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) [elasticsearch-5.3.0.jar:5.3.0]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:1.8.0_121]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:1.8.0_121]\r\n        at java.lang.Thread.run(Thread.java:745) [?:1.8.0_121]\r\n==================================\r\n#my elasticsearch  course as below:\r\nsearcho+ 13747  3.6 16.7 12496288 2731836 pts/0 Sl+ 17:27   0:58 /bin/java -Xms2g -Xmx2g -XX:+UseConcMarkSweepGC -XX:CMSInitiatingOccupancyFraction=75 -XX:+UseCMSInitiatingOccupancyOnly -XX:+DisableExplicitGC -XX:+AlwaysPreTouch -server -Xss1m -Djava.awt.headless=true -Dfile.encoding=UTF-8 -Djna.nosys=true -Djdk.io.permissionsUseCanonicalPath=true -Dio.netty.noUnsafe=true -Dio.netty.noKeySetOptimization=true -Dio.netty.recycler.maxCapacityPerThread=0 -Dlog4j.shutdownHookEnabled=false -Dlog4j2.disable.jmx=true -Dlog4j.skipJansi=true -XX:+HeapDumpOnOutOfMemoryError -Des.path.home=/data/searchonline/test_es/elasticsearch-5.3.0 -cp /data/searchonline/test_es/elasticsearch-5.3.0/lib/elasticsearch-5.3.0.jar:/data/searchonline/test_es/elasticsearch-5.3.0/lib/* org.elasticsearch.bootstrap.Elasticsearch\r\n\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}