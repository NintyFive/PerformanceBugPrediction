{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/13110","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13110/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13110/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13110/events","html_url":"https://github.com/elastic/elasticsearch/issues/13110","id":103104195,"node_id":"MDU6SXNzdWUxMDMxMDQxOTU=","number":13110,"title":"Please add alias creation for snapshot _restore API","user":{"login":"mkliu","id":1469524,"node_id":"MDQ6VXNlcjE0Njk1MjQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1469524?v=4","gravatar_id":"","url":"https://api.github.com/users/mkliu","html_url":"https://github.com/mkliu","followers_url":"https://api.github.com/users/mkliu/followers","following_url":"https://api.github.com/users/mkliu/following{/other_user}","gists_url":"https://api.github.com/users/mkliu/gists{/gist_id}","starred_url":"https://api.github.com/users/mkliu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkliu/subscriptions","organizations_url":"https://api.github.com/users/mkliu/orgs","repos_url":"https://api.github.com/users/mkliu/repos","events_url":"https://api.github.com/users/mkliu/events{/privacy}","received_events_url":"https://api.github.com/users/mkliu/received_events","type":"User","site_admin":false},"labels":[{"id":143077482,"node_id":"MDU6TGFiZWwxNDMwNzc0ODI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Snapshot/Restore","name":":Distributed/Snapshot/Restore","color":"0e8a16","default":false,"description":"Anything directly related to the `_snapshot/*` APIs"},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2015-08-25T20:00:09Z","updated_at":"2015-08-28T09:39:23Z","closed_at":"2015-08-28T09:39:23Z","author_association":"NONE","active_lock_reason":null,"body":"The most frequent scenario for using _restore API is when something is wrong, and index needs to be restored. But in order to restore, we need to delete the old index.\n\nWhat happens in most cases is the original index is\n1. Old index in red state.\n2. Old index was wiped out, data is repopulated and an index is created with the same name.\n\nIn this case, especially #2, it's actually not OK to delete the index as data will get lost. So what we normally do is restore to a different name and setup an alias with the original index name pointing to the newly restored index.\n\nWhen we are restoring lots of indices, this is tedious and error prone. I propose to add a alias field for the _restore API, like below:\n\n```\nPOST /_snapshot/my_backup/snapshot_1/_restore\n{\n    \"indices\": \"index_1\", \n    \"rename_pattern\": \"index_(.+)\", \n    \"rename_replacement\": \"restored_index_$1\",\n    \"alias\": \"$1\"            <=== \n}\n```\n","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}