{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/12021","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12021/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12021/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12021/events","html_url":"https://github.com/elastic/elasticsearch/issues/12021","id":92873208,"node_id":"MDU6SXNzdWU5Mjg3MzIwOA==","number":12021,"title":"GC Log - Duplicate GCTimeStamps","user":{"login":"mattmonkey83","id":7162708,"node_id":"MDQ6VXNlcjcxNjI3MDg=","avatar_url":"https://avatars2.githubusercontent.com/u/7162708?v=4","gravatar_id":"","url":"https://api.github.com/users/mattmonkey83","html_url":"https://github.com/mattmonkey83","followers_url":"https://api.github.com/users/mattmonkey83/followers","following_url":"https://api.github.com/users/mattmonkey83/following{/other_user}","gists_url":"https://api.github.com/users/mattmonkey83/gists{/gist_id}","starred_url":"https://api.github.com/users/mattmonkey83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattmonkey83/subscriptions","organizations_url":"https://api.github.com/users/mattmonkey83/orgs","repos_url":"https://api.github.com/users/mattmonkey83/repos","events_url":"https://api.github.com/users/mattmonkey83/events{/privacy}","received_events_url":"https://api.github.com/users/mattmonkey83/received_events","type":"User","site_admin":false},"labels":[{"id":151561891,"node_id":"MDU6TGFiZWwxNTE1NjE4OTE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Logging","name":":Core/Infra/Logging","color":"0e8a16","default":false,"description":"Log management and logging utilities"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-07-03T13:14:11Z","updated_at":"2015-07-06T14:58:14Z","closed_at":"2015-07-06T14:58:13Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\n\nWe have any issue with duplicate GCTimeStamps appearing in GC logs, e.g. -\n\n```\n1.027: Total time for which application threads were stopped: 0.0000230 seconds\n1.686: [GC1.687: [DefNew\nDesired survivor size 4358144 bytes, new threshold 1 (max 6)\n- age   1:    8716288 bytes,    8716288 total\n: 68160K->8512K(76672K), 0.0284560 secs] 68160K->13947K(253632K), 0.0287330 secs] [Times: user=0.02 sys=0.00, real=0.03 secs]\n1.715: Total time for which application threads were stopped: 0.0288730 seconds\n2.731: Total time for which application threads were stopped: 0.0001220 seconds\n3.045: Total time for which application threads were stopped: 0.0000670 seconds\n3.736: [GC3.736: [DefNew\nDesired survivor size 4358144 bytes, new threshold 1 (max 6)\n- age   1:    8716288 bytes,    8716288 total\n: 76672K->8512K(76672K), 0.0445610 secs] 82107K->20595K(253632K), 0.0446170 secs] [Times: user=0.04 sys=0.00, real=0.04 secs]\n```\n\nNotice the repeated timestamp after `[GC`.\n\nWe're seeing this behaviour on Ubuntu 14.04.2 LTS using ES 1.5.2 and 1.6.0 with both the OpenJDK JRE 7 and Oracle JRE 7.  I'm not seeing it on OS X 10.10 however.\n\nI've tested other Java apps with the same setup and they don't have duplicate timestamps so this appears to be Elasticsearch specific.\n\nGCDateStamps also get duplicated if we enable them via ES_JAVA_OPTS e.g. -\n\n```\n2015-07-03T13:29:43.859+0000: 594133.063: [GC2015-07-03T13:29:43.859+0000: 594133.063: [ParNew: 281570K->11211K(306688K), 0.0516960 secs] 2889367K->2619012K(15673088K), 0.0517990 secs] [Times: user=0.20 sys=0.00, real=0.05 secs]\n2015-07-03T13:30:24.341+0000: 594173.544: [GC2015-07-03T13:30:24.341+0000: 594173.544: [ParNew: 283851K->10915K(306688K), 0.0490020 secs] 2891652K->2618718K(15673088K), 0.0491160 secs] [Times: user=0.19 sys=0.01, real=0.05 secs]\n2015-07-03T13:31:16.119+0000: 594225.322: [GC2015-07-03T13:31:16.119+0000: 594225.322: [ParNew: 283555K->10013K(306688K), 0.0528850 secs] 2891358K->2618616K(15673088K), 0.0529900 secs] [Times: user=0.21 sys=0.00, real=0.05 secs]\n2015-07-03T13:31:56.255+0000: 594265.458: [GC2015-07-03T13:31:56.255+0000: 594265.458: [ParNew: 282653K->11148K(306688K), 0.0504550 secs] 2891256K->2619756K(15673088K), 0.0505590 secs] [Times: user=0.20 sys=0.00, real=0.05 secs]\n2015-07-03T13:32:46.685+0000: 594315.888: [GC2015-07-03T13:32:46.685+0000: 594315.888: [ParNew: 283788K->12110K(306688K), 0.0531040 secs] 2892396K->2620723K(15673088K), 0.0532130 secs] [Times: user=0.21 sys=0.00, real=0.06 secs]\n```\n\nThis is causing problems when trying to parse the logs in our logging system.\n\nAny suggestions would be appreciated.\n\nThanks,\n\nMatt.\n","closed_by":{"login":"mattmonkey83","id":7162708,"node_id":"MDQ6VXNlcjcxNjI3MDg=","avatar_url":"https://avatars2.githubusercontent.com/u/7162708?v=4","gravatar_id":"","url":"https://api.github.com/users/mattmonkey83","html_url":"https://github.com/mattmonkey83","followers_url":"https://api.github.com/users/mattmonkey83/followers","following_url":"https://api.github.com/users/mattmonkey83/following{/other_user}","gists_url":"https://api.github.com/users/mattmonkey83/gists{/gist_id}","starred_url":"https://api.github.com/users/mattmonkey83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattmonkey83/subscriptions","organizations_url":"https://api.github.com/users/mattmonkey83/orgs","repos_url":"https://api.github.com/users/mattmonkey83/repos","events_url":"https://api.github.com/users/mattmonkey83/events{/privacy}","received_events_url":"https://api.github.com/users/mattmonkey83/received_events","type":"User","site_admin":false},"performed_via_github_app":null}