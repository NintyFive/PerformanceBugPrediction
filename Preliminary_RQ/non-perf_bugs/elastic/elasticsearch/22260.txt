{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/22260","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22260/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22260/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22260/events","html_url":"https://github.com/elastic/elasticsearch/issues/22260","id":196409424,"node_id":"MDU6SXNzdWUxOTY0MDk0MjQ=","number":22260,"title":"Add Ability to Create Index Based on Alias Name For Index Templates","user":{"login":"eladmena","id":20152625,"node_id":"MDQ6VXNlcjIwMTUyNjI1","avatar_url":"https://avatars2.githubusercontent.com/u/20152625?v=4","gravatar_id":"","url":"https://api.github.com/users/eladmena","html_url":"https://github.com/eladmena","followers_url":"https://api.github.com/users/eladmena/followers","following_url":"https://api.github.com/users/eladmena/following{/other_user}","gists_url":"https://api.github.com/users/eladmena/gists{/gist_id}","starred_url":"https://api.github.com/users/eladmena/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eladmena/subscriptions","organizations_url":"https://api.github.com/users/eladmena/orgs","repos_url":"https://api.github.com/users/eladmena/repos","events_url":"https://api.github.com/users/eladmena/events{/privacy}","received_events_url":"https://api.github.com/users/eladmena/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2016-12-19T13:07:25Z","updated_at":"2016-12-20T07:25:00Z","closed_at":"2016-12-19T14:40:51Z","author_association":"NONE","active_lock_reason":null,"body":"Index templates allow specifying that alias(es) will be created once a index is dynamically created.\r\nWhen adding a new document the index matching the name will be created.\r\n\r\nAs I'd prefer consumer to use the alias rather than the index, it means that the when using templates the initial document PUT should be with the index name and only then use the alias name, which beats the purpose of index templates as I need different behaviour for the first put.\r\n\r\nfor example for this template\r\n{\r\n  \"template\": \"**XXX_***\",\r\n  \"mappings\": {\r\n    \"type01\": {\r\n      \"properties\": {\r\n        \"field01\": {\"type\": \"text\"}\r\n      }\r\n    }\r\n  },\r\n  \"aliases\": {\r\n\t\"{index}_alias\" : {}\r\n  }\r\n}\r\n\r\nput for XXX_A_alias will create:\r\n\r\n- index named XXX_A_alias\r\n\r\n- alias named XXX_A_alias_alias\r\nwhile the intention was to create index named XXX_A and alias named XXX_A_alias\r\n\r\nIt would be best to add **preferAliasAsSourceName** property to infer index name from the alias, in case the matched name also matches the alias.\r\nie: \r\n{\r\n  \"template\": \"**XXX_***\",\r\n  \"mappings\": {\r\n    \"type01\": {\r\n      \"properties\": {\r\n        \"field01\": {\"type\": \"text\"}\r\n      }\r\n    }\r\n  },\r\n  **\"preferAliasAsSourceName\": true,**\r\n  \"aliases\": {\r\n\t\"{index}_alias\" : {}\r\n  }\r\n}\r\n\r\nXXX_A_alias matches the alias name, and {index} = XXX_A as such the index name will be XXX_A","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}