[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/441376658","html_url":"https://github.com/elastic/elasticsearch/issues/35874#issuecomment-441376658","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35874","id":441376658,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTM3NjY1OA==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2018-11-24T15:48:48Z","updated_at":"2018-11-24T15:48:48Z","author_association":"MEMBER","body":"This seems to be failing 100% of the time now (on Jenkins as well as locally). Trying to fix it now","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/441379941","html_url":"https://github.com/elastic/elasticsearch/issues/35874#issuecomment-441379941","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35874","id":441379941,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTM3OTk0MQ==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2018-11-24T16:40:41Z","updated_at":"2018-11-24T16:40:41Z","author_association":"MEMBER","body":"@ywelsch I think this commit to 6.x https://github.com/elastic/elasticsearch/commit/10796ea0e98744598b5a480fcfd828696d882564 is causing this (you made a change to the blob repo verification there that is not throwing in the `master` BwC tests).\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/441381190","html_url":"https://github.com/elastic/elasticsearch/issues/35874#issuecomment-441381190","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35874","id":441381190,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTM4MTE5MA==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2018-11-24T17:00:44Z","updated_at":"2018-11-24T17:00:44Z","author_association":"MEMBER","body":"Maybe we could merge https://github.com/elastic/elasticsearch/pull/35876 to get builds green again until this is fixed in `6.x`?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/441393490","html_url":"https://github.com/elastic/elasticsearch/issues/35874#issuecomment-441393490","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35874","id":441393490,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTM5MzQ5MA==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2018-11-24T20:26:17Z","updated_at":"2018-11-24T20:26:17Z","author_association":"MEMBER","body":"Muted in `master` for now via https://github.com/elastic/elasticsearch/commit/05620ccaafe5b8357d8729c9e1101391bb95732a","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/441561020","html_url":"https://github.com/elastic/elasticsearch/issues/35874#issuecomment-441561020","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35874","id":441561020,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTU2MTAyMA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-11-26T08:48:36Z","updated_at":"2018-11-26T08:48:36Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/441566426","html_url":"https://github.com/elastic/elasticsearch/issues/35874#issuecomment-441566426","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35874","id":441566426,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTU2NjQyNg==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2018-11-26T09:07:33Z","updated_at":"2018-11-26T09:07:33Z","author_association":"CONTRIBUTOR","body":"I've looked at the cause of this: The problem with this failure was that it only occurred once the PR #35731 was backported to 6.6, as the rolling-upgrade tests on master would now be doing something illegal with a 6.6 node. This is unfortunately impossible to catch with our standard PR testing, as we typically don't test the combination of master + backport. I have taken the fix by @original-brownbear and backported that fix to 6.x (6.6) as well, as it will otherwise break again once we have 6.6.1 or 6.7 running rolling-upgrade tests from 6.6.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/441622437","html_url":"https://github.com/elastic/elasticsearch/issues/35874#issuecomment-441622437","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35874","id":441622437,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTYyMjQzNw==","user":{"login":"iverase","id":29038686,"node_id":"MDQ6VXNlcjI5MDM4Njg2","avatar_url":"https://avatars1.githubusercontent.com/u/29038686?v=4","gravatar_id":"","url":"https://api.github.com/users/iverase","html_url":"https://github.com/iverase","followers_url":"https://api.github.com/users/iverase/followers","following_url":"https://api.github.com/users/iverase/following{/other_user}","gists_url":"https://api.github.com/users/iverase/gists{/gist_id}","starred_url":"https://api.github.com/users/iverase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iverase/subscriptions","organizations_url":"https://api.github.com/users/iverase/orgs","repos_url":"https://api.github.com/users/iverase/repos","events_url":"https://api.github.com/users/iverase/events{/privacy}","received_events_url":"https://api.github.com/users/iverase/received_events","type":"User","site_admin":false},"created_at":"2018-11-26T12:29:59Z","updated_at":"2018-11-26T12:29:59Z","author_association":"CONTRIBUTOR","body":"I will reopen this issue as we have plenty of failures of the same test during the weekend. For example:\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+default-distro/117/console\r\n\r\nError:\r\n\r\n```\r\njava.lang.AssertionError: Failure at [old_cluster/10_basic:3]: expected [2xx] status code but api [snapshot.create_repository] returned [500 Internal Server Error] [---\r\nerror:\r\n  root_cause:\r\n  - type: \"repository_verification_exception\"\r\n    reason: \"[my_repo] path  is not accessible on master node\"\r\n    stack_trace: \"RepositoryVerificationException[[my_repo] path  is not accessible\\\r\n      \\ on master node]; nested: IOException[snapshot.test];\\n\\tat org.elasticsearch.repositories.blobstore.BlobStoreRepository.startVerification(BlobStoreRepository.java:647)\\n\\\r\n      \\tat org.elasticsearch.repositories.RepositoriesService.lambda$verifyRepository$2(RepositoriesService.java:221)\\n\\\r\n      \\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:627)\\n\\\r\n```\r\n\r\nReproducing line (it does not happen locally):\r\n\r\n```\r\n./gradlew :qa:rolling-upgrade:v6.6.0#oldClusterTestRunner \\\r\n  -Dtests.seed=497A6860F4F8DF5F \\\r\n  -Dtests.class=org.elasticsearch.upgrades.UpgradeClusterClientYamlTestSuiteIT \\\r\n  -Dtests.method=\"test {p0=old_cluster/10_basic/Create things in the cluster state that we'll validate are there after the upgrade}\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=es-PA \\\r\n  -Dtests.timezone=Pacific/Majuro \\\r\n  -Dtests.distribution=zip \\\r\n  -Dcompiler.java=11 \\\r\n  -Druntime.java=8 \\\r\n  -Dtests.rest.suite=old_cluster\r\n```\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/441623596","html_url":"https://github.com/elastic/elasticsearch/issues/35874#issuecomment-441623596","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35874","id":441623596,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTYyMzU5Ng==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2018-11-26T12:34:37Z","updated_at":"2018-11-26T12:37:06Z","author_association":"CONTRIBUTOR","body":"[That failure](https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+default-distro/117/console) was from before the fix was pushed, see log output of CI run:\r\n\r\n```\r\ngit checkout -f 4711c5cdf35dcee963ce210e2d2da15469c755ec\r\n```\r\n\r\n@iverase Do you have any failure since adding the fix 05620cc?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/441636596","html_url":"https://github.com/elastic/elasticsearch/issues/35874#issuecomment-441636596","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35874","id":441636596,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTYzNjU5Ng==","user":{"login":"iverase","id":29038686,"node_id":"MDQ6VXNlcjI5MDM4Njg2","avatar_url":"https://avatars1.githubusercontent.com/u/29038686?v=4","gravatar_id":"","url":"https://api.github.com/users/iverase","html_url":"https://github.com/iverase","followers_url":"https://api.github.com/users/iverase/followers","following_url":"https://api.github.com/users/iverase/following{/other_user}","gists_url":"https://api.github.com/users/iverase/gists{/gist_id}","starred_url":"https://api.github.com/users/iverase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iverase/subscriptions","organizations_url":"https://api.github.com/users/iverase/orgs","repos_url":"https://api.github.com/users/iverase/repos","events_url":"https://api.github.com/users/iverase/events{/privacy}","received_events_url":"https://api.github.com/users/iverase/received_events","type":"User","site_admin":false},"created_at":"2018-11-26T13:21:47Z","updated_at":"2018-11-26T13:21:47Z","author_association":"CONTRIBUTOR","body":"No, I did not realise that the fix was done a few hours ago. Failures are from the weekend.\r\n\r\nSorry for the noise.","performed_via_github_app":null}]