{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/20919","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20919/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20919/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20919/events","html_url":"https://github.com/elastic/elasticsearch/issues/20919","id":182846653,"node_id":"MDU6SXNzdWUxODI4NDY2NTM=","number":20919,"title":"Template validation is wrongfully identical to index validation","user":{"login":"acarstoiu","id":9536601,"node_id":"MDQ6VXNlcjk1MzY2MDE=","avatar_url":"https://avatars2.githubusercontent.com/u/9536601?v=4","gravatar_id":"","url":"https://api.github.com/users/acarstoiu","html_url":"https://github.com/acarstoiu","followers_url":"https://api.github.com/users/acarstoiu/followers","following_url":"https://api.github.com/users/acarstoiu/following{/other_user}","gists_url":"https://api.github.com/users/acarstoiu/gists{/gist_id}","starred_url":"https://api.github.com/users/acarstoiu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acarstoiu/subscriptions","organizations_url":"https://api.github.com/users/acarstoiu/orgs","repos_url":"https://api.github.com/users/acarstoiu/repos","events_url":"https://api.github.com/users/acarstoiu/events{/privacy}","received_events_url":"https://api.github.com/users/acarstoiu/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2016-10-13T17:06:53Z","updated_at":"2016-10-17T15:45:12Z","closed_at":"2016-10-13T18:31:23Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**: 2.4.1\n\nAfter upgrading to the said version from 2.3 we were greeted with a nasty surprise. Templates are now validated upfront, as if they were _complete_ objects, which they are certainly **not**. This design error implemented in #8802 is also cooked for 5.0.\n\nWhen a new index is created, all templates are scanned for a match between their pattern and the index name. All applicable templates are then merged in the order indicated by the `order` property and it's the resulting settings and mappings that are applied to the new index.\n\nThen why validate templates for completeness?! It's plain silly, and _not even documented_. \n\n**Example:**\nAll analyzers are defined in a common template that has pattern `*` and order `0`. These analyzers can used throughout all indices and it's up to the higher order templates to make actual use of them.\nThis arrangement is now impossible, as you're using the same validator for templates as for an index mapping (which rightfully checks that all referred anlyzers are present).\n\nThe mapping validation code should be more insightful and refrain from such checks when working on templates.\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}