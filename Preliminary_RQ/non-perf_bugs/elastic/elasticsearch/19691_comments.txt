[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/236266247","html_url":"https://github.com/elastic/elasticsearch/issues/19691#issuecomment-236266247","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19691","id":236266247,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNjI2NjI0Nw==","user":{"login":"matthughes","id":173132,"node_id":"MDQ6VXNlcjE3MzEzMg==","avatar_url":"https://avatars1.githubusercontent.com/u/173132?v=4","gravatar_id":"","url":"https://api.github.com/users/matthughes","html_url":"https://github.com/matthughes","followers_url":"https://api.github.com/users/matthughes/followers","following_url":"https://api.github.com/users/matthughes/following{/other_user}","gists_url":"https://api.github.com/users/matthughes/gists{/gist_id}","starred_url":"https://api.github.com/users/matthughes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matthughes/subscriptions","organizations_url":"https://api.github.com/users/matthughes/orgs","repos_url":"https://api.github.com/users/matthughes/repos","events_url":"https://api.github.com/users/matthughes/events{/privacy}","received_events_url":"https://api.github.com/users/matthughes/received_events","type":"User","site_admin":false},"created_at":"2016-07-29T19:02:01Z","updated_at":"2016-07-29T19:02:01Z","author_association":"CONTRIBUTOR","body":"Right now that mapping above isn't considered valid.  ES blows up with:\n\n```\nMapperParsingException[Failed to parse mapping [event]: Mapping definition for [metadata] has unsupported parameters:  [coerce : true]]; nested: MapperParsingException[Mapping definition for [metadata] has unsupported parameters:  [coerce : true]];\n    at org.elasticsearch.cluster.metadata.MetaDataCreateIndexService$1.execute(MetaDataCreateIndexService.java:332)\n    at org.elasticsearch.cluster.ClusterStateUpdateTask.execute(ClusterStateUpdateTask.java:45)\n    at org.elasticsearch.cluster.service.InternalClusterService.runTasksForExecutor(InternalClusterService.java:468)\n    at org.elasticsearch.cluster.service.InternalClusterService$UpdateTask.run(InternalClusterService.java:772)\n    at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.runAndClean(PrioritizedEsThreadPoolExecutor.java:231)\n    at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:194)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:744)\nCaused by: MapperParsingException[Mapping definition for [metadata] has unsupported parameters:  [coerce : true]]\n    at org.elasticsearch.index.mapper.DocumentMapperParser.checkNoRemainingFields(DocumentMapperParser.java:171)\n    at org.elasticsearch.index.mapper.DocumentMapperParser.checkNoRemainingFields(DocumentMapperParser.java:165)\n    at org.elasticsearch.index.mapper.object.ObjectMapper$TypeParser.parseProperties(ObjectMapper.java:307)\n    at org.elasticsearch.index.mapper.object.ObjectMapper$TypeParser.parseObjectOrDocumentTypeProperties(ObjectMapper.java:218)\n    at org.elasticsearch.index.mapper.object.ObjectMapper$TypeParser.parse(ObjectMapper.java:193)\n    at org.elasticsearch.index.mapper.object.ObjectMapper$TypeParser.parseProperties(ObjectMapper.java:305)\n    at org.elasticsearch.index.mapper.object.ObjectMapper$TypeParser.parseObjectOrDocumentTypeProperties(ObjectMapper.java:218)\n    at org.elasticsearch.index.mapper.object.RootObjectMapper$TypeParser.parse(RootObjectMapper.java:139)\n    at org.elasticsearch.index.mapper.DocumentMapperParser.parse(DocumentMapperParser.java:118)\n    at org.elasticsearch.index.mapper.DocumentMapperParser.parse(DocumentMapperParser.java:99)\n    at org.elasticsearch.index.mapper.MapperService.parse(MapperService.java:498)\n    at org.elasticsearch.index.mapper.MapperService.merge(MapperService.java:288)\n    at org.elasticsearch.cluster.metadata.MetaDataCreateIndexService$1.execute(MetaDataCreateIndexService.java:329)\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/236392024","html_url":"https://github.com/elastic/elasticsearch/issues/19691#issuecomment-236392024","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19691","id":236392024,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNjM5MjAyNA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2016-07-30T21:55:47Z","updated_at":"2016-07-30T21:55:47Z","author_association":"CONTRIBUTOR","body":"I am not a fan of this feature. Either we could make string fields automatically coerce objects to strings but this would be quite trappy in my opinion: I can certainly imagine users complaining that elasticsearch does not reject documents that do not comply with the mappings. Or we would need a mapping option to enable this behaviour like numerics have to automatically parse strings, but I don't like it either as we already have too many options on mappings. I would rather rely on clients to provide a string that contains escaped json.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/239140019","html_url":"https://github.com/elastic/elasticsearch/issues/19691#issuecomment-239140019","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19691","id":239140019,"node_id":"MDEyOklzc3VlQ29tbWVudDIzOTE0MDAxOQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-08-11T11:53:09Z","updated_at":"2016-08-11T11:53:09Z","author_association":"CONTRIBUTOR","body":"This is a duplicate of https://github.com/elastic/elasticsearch/issues/17918 where we decided against doing it.\n","performed_via_github_app":null}]