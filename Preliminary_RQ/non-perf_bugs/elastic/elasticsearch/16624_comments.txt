[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/199872677","html_url":"https://github.com/elastic/elasticsearch/issues/16624#issuecomment-199872677","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16624","id":199872677,"node_id":"MDEyOklzc3VlQ29tbWVudDE5OTg3MjY3Nw==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2016-03-22T15:42:41Z","updated_at":"2016-03-22T15:42:41Z","author_association":"MEMBER","body":"@rkalhans The functionality for resolving the config of an aggregation from its ancestors has been removed in 5.0 so this should not be an issue from 5.0 onwards. The reason it has been removed is that it is error prone and trappy since it can be hard to tell which ancestor will provide the config for an aggregation.\n\nAs far as fixing this in 2.x I'm not sure there is a lot we could do short of throwing a better exception if `config` is `null`. The problem is that we need to know what type of value source to look for in an ancestor and we can only know that if the config is not `null`. All of the built in aggregations will not have a `null` config, in the case that a field is not mapped on a shard, the config object is still built but `config.valid()` returns `false`. Without knowing what you are trying to do it is hard to provide a workaround for you but `ValuesSourceAggregatorFactory.resolveConfig()` should ensure that the `config` object is created, this is usually called in the `init()` method.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/201320847","html_url":"https://github.com/elastic/elasticsearch/issues/16624#issuecomment-201320847","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16624","id":201320847,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMTMyMDg0Nw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-03-25T14:52:46Z","updated_at":"2016-03-25T14:52:46Z","author_association":"CONTRIBUTOR","body":"thanks @colings86 - closing\n","performed_via_github_app":null}]