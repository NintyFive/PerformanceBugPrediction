[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/132585973","html_url":"https://github.com/elastic/elasticsearch/issues/12984#issuecomment-132585973","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12984","id":132585973,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMjU4NTk3Mw==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-08-19T13:10:20Z","updated_at":"2015-08-19T13:10:20Z","author_association":"CONTRIBUTOR","body":"can you provide example URLs for this please? It's not clear which misses what, thanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/132588166","html_url":"https://github.com/elastic/elasticsearch/issues/12984#issuecomment-132588166","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12984","id":132588166,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMjU4ODE2Ng==","user":{"login":"electrical","id":271677,"node_id":"MDQ6VXNlcjI3MTY3Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/271677?v=4","gravatar_id":"","url":"https://api.github.com/users/electrical","html_url":"https://github.com/electrical","followers_url":"https://api.github.com/users/electrical/followers","following_url":"https://api.github.com/users/electrical/following{/other_user}","gists_url":"https://api.github.com/users/electrical/gists{/gist_id}","starred_url":"https://api.github.com/users/electrical/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/electrical/subscriptions","organizations_url":"https://api.github.com/users/electrical/orgs","repos_url":"https://api.github.com/users/electrical/repos","events_url":"https://api.github.com/users/electrical/events{/privacy}","received_events_url":"https://api.github.com/users/electrical/received_events","type":"User","site_admin":false},"created_at":"2015-08-19T13:14:58Z","updated_at":"2015-08-19T13:14:58Z","author_association":"CONTRIBUTOR","body":"https://s3-eu-west-1.amazonaws.com/build.eu-west-1.elastic.co/origin/1.7/nightly/JDK7/elasticsearch-latest-SNAPSHOT.deb exists for example for the 1.7 branch but there is no rpm equivalent.\nFor 2.0 branch\n\nhttps://s3-eu-west-1.amazonaws.com/build-eu.elasticsearch.org/origin/2.0/nightly/JDK7/elasticsearch-latest-SNAPSHOT.noarch.rpm is empty because there rpm is not generated and the symlink we create in jenkins generates an empty file then.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/132594466","html_url":"https://github.com/elastic/elasticsearch/issues/12984#issuecomment-132594466","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12984","id":132594466,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMjU5NDQ2Ng==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2015-08-19T13:23:44Z","updated_at":"2015-08-19T13:30:42Z","author_association":"MEMBER","body":"It's a bug. Maven profiles are executed first then inner properties are evaluated.\n\nWe defined:\n\n``` xml\n    <properties>\n                <packaging.rpm.rpmbuild>/usr/bin/rpmbuild</packaging.rpm.rpmbuild>\n    </properties>\n```\n\nAnd \n\n``` xml\n    <profiles>\n        <profile>\n            <id>rpm</id>\n            <activation>\n                <file>\n                    <!-- Folks having /usr/bin/rpmbuild available will be able to build the rpm module -->\n                    <exists>${packaging.rpm.rpmbuild}</exists>\n                </file>\n            </activation>\n            <modules>\n                <module>rpm</module>\n            </modules>\n        </profile>\n    </profiles>\n```\n\nWhen the `profile` part is evaluated, `packaging.rpm.rpmbuild` has not been set yet.\nSo we end up to evaluate `<exists></exists>`.\n\nThat's why this profile is never executed, and the rpm module is not added to the reactor.\n\nI'll come with a fix.\n\nIn the meantime, running `mvn deploy -Dpackaging.rpm.rpmbuild=/usr/bin/rpmbuild` or `mvn deploy -Prpm` might solve the issue.\n","performed_via_github_app":null}]