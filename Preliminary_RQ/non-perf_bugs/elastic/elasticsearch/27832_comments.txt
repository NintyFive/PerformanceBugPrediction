[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/352723878","html_url":"https://github.com/elastic/elasticsearch/issues/27832#issuecomment-352723878","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27832","id":352723878,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjcyMzg3OA==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2017-12-19T11:38:04Z","updated_at":"2017-12-19T11:38:04Z","author_association":"CONTRIBUTOR","body":"For future reference, I found this looking at https://github.com/dstl/baleen/issues/3 and https://github.com/elastic/elasticsearch/issues/17407 seems related.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/352997379","html_url":"https://github.com/elastic/elasticsearch/issues/27832#issuecomment-352997379","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27832","id":352997379,"node_id":"MDEyOklzc3VlQ29tbWVudDM1Mjk5NzM3OQ==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2017-12-20T08:27:53Z","updated_at":"2017-12-20T08:27:53Z","author_association":"CONTRIBUTOR","body":"Ah, ok, I had my orientations mixed up after all, as @colings86 correctly guessed. This polygon's orientation is clockwise but it should be anticlockwise. We accept both for polygons that cross ≤180° of longitude but for wider polygons we assume that the incorrect orientation and excessive width is due to the date line:\r\n\r\nhttps://github.com/elastic/elasticsearch/blob/e6da564eb15945289c1fd0d29d9cd04e3090d51b/core/src/main/java/org/elasticsearch/common/geo/builders/PolygonBuilder.java#L654-L660\r\n\r\nWe then try and \"fix\" it by putting the western hemisphere on the east of the eastern hemisphere:\r\n\r\nhttps://github.com/elastic/elasticsearch/blob/e6da564eb15945289c1fd0d29d9cd04e3090d51b/core/src/main/java/org/elasticsearch/common/geo/builders/PolygonBuilder.java#L760-L766\r\n\r\nThe \"fixed\" shape does indeed self-intersect, and if I correctly orient the input shape then it is accepted.\r\n\r\n@nknize, how would you feel about deprecating this leniency-by-default? The Antarctica outlines in the linked issues are clockwise too, and span > 180° of longitude, so I guess they get \"fixed\" in the same way. The resulting message about a self-intersection or a duplicated point is mysterious because it's talking about a geometry that's quite different from the one the user sees.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/353009600","html_url":"https://github.com/elastic/elasticsearch/issues/27832#issuecomment-353009600","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27832","id":353009600,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzAwOTYwMA==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2017-12-20T09:22:21Z","updated_at":"2017-12-20T09:22:21Z","author_association":"CONTRIBUTOR","body":"Note that https://github.com/dstl/baleen/pull/39/files was a change that a user made to simplify an outline of Antarctica into one that ES accepts, but it still looks clockwise to me so I think the indexed shape is \"fixed\" as above, and therefore doesn't match the shape that they wanted to index.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/447022436","html_url":"https://github.com/elastic/elasticsearch/issues/27832#issuecomment-447022436","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27832","id":447022436,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NzAyMjQzNg==","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2018-12-13T16:03:04Z","updated_at":"2018-12-13T16:03:04Z","author_association":"MEMBER","body":"This looks like duplicate of #26286. Closing.","performed_via_github_app":null}]