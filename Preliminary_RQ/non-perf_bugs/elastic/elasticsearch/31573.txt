{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/31573","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31573/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31573/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31573/events","html_url":"https://github.com/elastic/elasticsearch/issues/31573","id":335734222,"node_id":"MDU6SXNzdWUzMzU3MzQyMjI=","number":31573,"title":"HELP!!!! Why the search took 237ms????  HELP!","user":{"login":"sd1026203","id":12806125,"node_id":"MDQ6VXNlcjEyODA2MTI1","avatar_url":"https://avatars2.githubusercontent.com/u/12806125?v=4","gravatar_id":"","url":"https://api.github.com/users/sd1026203","html_url":"https://github.com/sd1026203","followers_url":"https://api.github.com/users/sd1026203/followers","following_url":"https://api.github.com/users/sd1026203/following{/other_user}","gists_url":"https://api.github.com/users/sd1026203/gists{/gist_id}","starred_url":"https://api.github.com/users/sd1026203/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sd1026203/subscriptions","organizations_url":"https://api.github.com/users/sd1026203/orgs","repos_url":"https://api.github.com/users/sd1026203/repos","events_url":"https://api.github.com/users/sd1026203/events{/privacy}","received_events_url":"https://api.github.com/users/sd1026203/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-06-26T09:29:50Z","updated_at":"2018-06-26T12:59:11Z","closed_at":"2018-06-26T12:59:10Z","author_association":"NONE","active_lock_reason":null,"body":"The elasticsearch version is 6.2.4\r\nThe query source is below:\r\n`{\"from\":0,\"size\":20,\"query\":{\"bool\":{\"filter\":[{\"term\":{\"entityID\":{\"value\":28683680,\"boost\":1.0}}},{\"term\":{\"businessID\":{\"value\":1,\"boost\":1.0}}},{\"term\":{\"isdel\":{\"value\":0,\"boost\":1.0}}},{\"term\":{\"partnerID\":{\"value\":0,\"boost\":1.0}}},{\"bool\":{\"should\":[{\"term\":{\"checkStatus\":{\"value\":2,\"boost\":1.0}}},{\"term\":{\"checkStatus\":{\"value\":1,\"boost\":1.0}}}],\"adjust_pure_negative\":true,\"boost\":1.0}}],\"adjust_pure_negative\":true,\"boost\":1.0}},\"profile\":true,\"_source\":false,\"sort\":[{\"createdTime\":{\"order\":\"desc\"}}]}`\r\nThe profile is as below; Any one can tell me why it took 237ms? \r\n> {\r\n\"took\":237,\r\n\"timed_out\":false,\r\n\"_shards\":{\r\n\"total\":3,\r\n\"successful\":3,\r\n\"skipped\":0,\r\n\"failed\":0\r\n},\r\n\"hits\":{\r\n\"total\":133,\r\n\"max_score\":null,\r\n\"hits\":[\r\n{\r\n\"_index\":\"newpinglunsearchindex\",\r\n\"_type\":\"pinglunsearch\",\r\n\"_id\":\"1011521625796923392\",\r\n\"_score\":null,\r\n\"sort\":[\r\n1530000523414\r\n]\r\n},\r\n{\r\n\"_index\":\"newpinglunsearchindex\",\r\n\"_type\":\"pinglunsearch\",\r\n\"_id\":\"1011216755818782721\",\r\n\"_score\":null,\r\n\"sort\":[\r\n1529927836742\r\n]\r\n},\r\n{\r\n\"_index\":\"newpinglunsearchindex\",\r\n\"_type\":\"pinglunsearch\",\r\n\"_id\":\"1011215118995845120\",\r\n\"_score\":null,\r\n\"sort\":[\r\n1529927446494\r\n]\r\n},\r\n{\r\n\"_index\":\"newpinglunsearchindex\",\r\n\"_type\":\"pinglunsearch\",\r\n\"_id\":\"1010800364796010496\",\r\n\"_score\":null,\r\n\"sort\":[\r\n1529828561389\r\n]\r\n},\r\n{\r\n\"_index\":\"newpinglunsearchindex\",\r\n\"_type\":\"pinglunsearch\",\r\n\"_id\":\"1010699787260948480\",\r\n\"_score\":null,\r\n\"sort\":[\r\n1529804581846\r\n]\r\n},\r\n{\r\n\"_index\":\"newpinglunsearchindex\",\r\n\"_type\":\"pinglunsearch\",\r\n\"_id\":\"1010539799846617089\",\r\n\"_score\":null,\r\n\"sort\":[\r\n1529766437863\r\n]\r\n},\r\n{\r\n\"_index\":\"newpinglunsearchindex\",\r\n\"_type\":\"pinglunsearch\",\r\n\"_id\":\"1010455726826487808\",\r\n\"_score\":null,\r\n\"sort\":[\r\n1529746393292\r\n]\r\n},\r\n{\r\n\"_index\":\"newpinglunsearchindex\",\r\n\"_type\":\"pinglunsearch\",\r\n\"_id\":\"1010432912811646976\",\r\n\"_score\":null,\r\n\"sort\":[\r\n1529740954012\r\n]\r\n},\r\n{\r\n\"_index\":\"newpinglunsearchindex\",\r\n\"_type\":\"pinglunsearch\",\r\n\"_id\":\"1010419840294346752\",\r\n\"_score\":null,\r\n\"sort\":[\r\n1529737837287\r\n]\r\n},\r\n{\r\n\"_index\":\"newpinglunsearchindex\",\r\n\"_type\":\"pinglunsearch\",\r\n\"_id\":\"1010404237873545216\",\r\n\"_score\":null,\r\n\"sort\":[\r\n1529734117383\r\n]\r\n},\r\n{\r\n\"_index\":\"newpinglunsearchindex\",\r\n\"_type\":\"pinglunsearch\",\r\n\"_id\":\"1010403951759089664\",\r\n\"_score\":null,\r\n\"sort\":[\r\n1529734049166\r\n]\r\n},\r\n{\r\n\"_index\":\"newpinglunsearchindex\",\r\n\"_type\":\"pinglunsearch\",\r\n\"_id\":\"1010388934624038913\",\r\n\"_score\":null,\r\n\"sort\":[\r\n1529730468796\r\n]\r\n},\r\n{\r\n\"_index\":\"newpinglunsearchindex\",\r\n\"_type\":\"pinglunsearch\",\r\n\"_id\":\"1010386766143705088\",\r\n\"_score\":null,\r\n\"sort\":[\r\n1529729951797\r\n]\r\n},\r\n{\r\n\"_index\":\"newpinglunsearchindex\",\r\n\"_type\":\"pinglunsearch\",\r\n\"_id\":\"1010385596134223873\",\r\n\"_score\":null,\r\n\"sort\":[\r\n1529729672836\r\n]\r\n},\r\n{\r\n\"_index\":\"newpinglunsearchindex\",\r\n\"_type\":\"pinglunsearch\",\r\n\"_id\":\"1010369493777534976\",\r\n\"_score\":null,\r\n\"sort\":[\r\n1529725833746\r\n]\r\n},\r\n{\r\n\"_index\":\"newpinglunsearchindex\",\r\n\"_type\":\"pinglunsearch\",\r\n\"_id\":\"1010363319816585216\",\r\n\"_score\":null,\r\n\"sort\":[\r\n1529724361753\r\n]\r\n},\r\n{\r\n\"_index\":\"newpinglunsearchindex\",\r\n\"_type\":\"pinglunsearch\",\r\n\"_id\":\"1010337323566522368\",\r\n\"_score\":null,\r\n\"sort\":[\r\n1529718163765\r\n]\r\n},\r\n{\r\n\"_index\":\"newpinglunsearchindex\",\r\n\"_type\":\"pinglunsearch\",\r\n\"_id\":\"1010337285972975617\",\r\n\"_score\":null,\r\n\"sort\":[\r\n1529718154802\r\n]\r\n},\r\n{\r\n\"_index\":\"newpinglunsearchindex\",\r\n\"_type\":\"pinglunsearch\",\r\n\"_id\":\"1010337075989340161\",\r\n\"_score\":null,\r\n\"sort\":[\r\n1529718104739\r\n]\r\n},\r\n{\r\n\"_index\":\"newpinglunsearchindex\",\r\n\"_type\":\"pinglunsearch\",\r\n\"_id\":\"1010329739723833345\",\r\n\"_score\":null,\r\n\"sort\":[\r\n1529716355628\r\n]\r\n}\r\n]\r\n},\r\n\"profile\":{\r\n\"shards\":[\r\n{\r\n\"id\":\"[2QemTRuhSPSCZd5qrpvQig][newpinglunsearchindex][2]\",\r\n\"searches\":[\r\n{\r\n\"query\":[\r\n{\r\n\"type\":\"BooleanQuery\",\r\n\"description\":\"#entityID:[28683680 TO 28683680] #businessID:[1 TO 1] #isdel:[0 TO 0] #partnerID:[0 TO 0] #((checkStatus:[2 TO 2] checkStatus:[1 TO 1])~1)\",\r\n\"time_in_nanos\":1979733,\r\n\"breakdown\":{\r\n\"score\":0,\r\n\"build_scorer_count\":38,\r\n\"match_count\":0,\r\n\"create_weight\":6480,\r\n\"next_doc\":125866,\r\n\"match\":0,\r\n\"create_weight_count\":1,\r\n\"next_doc_count\":128,\r\n\"score_count\":0,\r\n\"build_scorer\":1847220,\r\n\"advance\":0,\r\n\"advance_count\":0\r\n},\r\n\"children\":[\r\n{\r\n\"type\":\"PointRangeQuery\",\r\n\"description\":\"entityID:[28683680 TO 28683680]\",\r\n\"time_in_nanos\":486265,\r\n\"breakdown\":{\r\n\"score\":0,\r\n\"build_scorer_count\":57,\r\n\"match_count\":0,\r\n\"create_weight\":1024,\r\n\"next_doc\":9547,\r\n\"match\":0,\r\n\"create_weight_count\":1,\r\n\"next_doc_count\":128,\r\n\"score_count\":0,\r\n\"build_scorer\":470234,\r\n\"advance\":5202,\r\n\"advance_count\":72\r\n}\r\n},\r\n{\r\n\"type\":\"PointRangeQuery\",\r\n\"description\":\"businessID:[1 TO 1]\",\r\n\"time_in_nanos\":298519,\r\n\"breakdown\":{\r\n\"score\":0,\r\n\"build_scorer_count\":57,\r\n\"match_count\":0,\r\n\"create_weight\":141,\r\n\"next_doc\":0,\r\n\"match\":0,\r\n\"create_weight_count\":1,\r\n\"next_doc_count\":0,\r\n\"score_count\":0,\r\n\"build_scorer\":288763,\r\n\"advance\":9399,\r\n\"advance_count\":158\r\n}\r\n},\r\n{\r\n\"type\":\"PointRangeQuery\",\r\n\"description\":\"isdel:[0 TO 0]\",\r\n\"time_in_nanos\":17524,\r\n\"breakdown\":{\r\n\"score\":0,\r\n\"build_scorer_count\":57,\r\n\"match_count\":0,\r\n\"create_weight\":129,\r\n\"next_doc\":0,\r\n\"match\":0,\r\n\"create_weight_count\":1,\r\n\"next_doc_count\":0,\r\n\"score_count\":0,\r\n\"build_scorer\":9457,\r\n\"advance\":7752,\r\n\"advance_count\":128\r\n}\r\n},\r\n{\r\n\"type\":\"PointRangeQuery\",\r\n\"description\":\"partnerID:[0 TO 0]\",\r\n\"time_in_nanos\":359384,\r\n\"breakdown\":{\r\n\"score\":0,\r\n\"build_scorer_count\":57,\r\n\"match_count\":0,\r\n\"create_weight\":136,\r\n\"next_doc\":0,\r\n\"match\":0,\r\n\"create_weight_count\":1,\r\n\"next_doc_count\":0,\r\n\"score_count\":0,\r\n\"build_scorer\":348358,\r\n\"advance\":10652,\r\n\"advance_count\":180\r\n}\r\n},\r\n{\r\n\"type\":\"BooleanQuery\",\r\n\"description\":\"(checkStatus:[2 TO 2] checkStatus:[1 TO 1])~1\",\r\n\"time_in_nanos\":667558,\r\n\"breakdown\":{\r\n\"score\":0,\r\n\"build_scorer_count\":57,\r\n\"match_count\":0,\r\n\"create_weight\":1709,\r\n\"next_doc\":0,\r\n\"match\":0,\r\n\"create_weight_count\":1,\r\n\"next_doc_count\":0,\r\n\"score_count\":0,\r\n\"build_scorer\":637181,\r\n\"advance\":28434,\r\n\"advance_count\":176\r\n},\r\n\"children\":[\r\n{\r\n\"type\":\"PointRangeQuery\",\r\n\"description\":\"checkStatus:[2 TO 2]\",\r\n\"time_in_nanos\":253413,\r\n\"breakdown\":{\r\n\"score\":0,\r\n\"build_scorer_count\":51,\r\n\"match_count\":0,\r\n\"create_weight\":201,\r\n\"next_doc\":0,\r\n\"match\":0,\r\n\"create_weight_count\":1,\r\n\"next_doc_count\":0,\r\n\"score_count\":0,\r\n\"build_scorer\":251306,\r\n\"advance\":1836,\r\n\"advance_count\":18\r\n}\r\n},\r\n{\r\n\"type\":\"PointRangeQuery\",\r\n\"description\":\"checkStatus:[1 TO 1]\",\r\n\"time_in_nanos\":334046,\r\n\"breakdown\":{\r\n\"score\":0,\r\n\"build_scorer_count\":51,\r\n\"match_count\":0,\r\n\"create_weight\":129,\r\n\"next_doc\":0,\r\n\"match\":0,\r\n\"create_weight_count\":1,\r\n\"next_doc_count\":0,\r\n\"score_count\":0,\r\n\"build_scorer\":329373,\r\n\"advance\":4407,\r\n\"advance_count\":85\r\n}\r\n}\r\n]\r\n}\r\n]\r\n}\r\n],\r\n\"rewrite_time\":6616,\r\n\"collector\":[\r\n{\r\n\"name\":\"CancellableCollector\",\r\n\"reason\":\"search_cancelled\",\r\n\"time_in_nanos\":49996,\r\n\"children\":[\r\n{\r\n\"name\":\"MultiCollector\",\r\n\"reason\":\"search_top_hits\",\r\n\"time_in_nanos\":40254\r\n}\r\n]\r\n}\r\n]\r\n}\r\n],\r\n\"aggregations\":[\r\n]\r\n},\r\n{\r\n\"id\":\"[S8c8O6OLTh6bhbIPa8RX0w][newpinglunsearchindex][1]\",\r\n\"searches\":[\r\n{\r\n\"query\":[],\r\n\"rewrite_time\":14402,\r\n\"collector\":[\r\n{\r\n\"name\":\"CancellableCollector\",\r\n\"reason\":\"search_cancelled\",\r\n\"time_in_nanos\":188447,\r\n\"children\":[\r\n{\r\n\"name\":\"MultiCollector\",\r\n\"reason\":\"search_top_hits\",\r\n\"time_in_nanos\":145904\r\n}\r\n]\r\n}\r\n]\r\n}\r\n],\r\n\"aggregations\":[\r\n]\r\n},\r\n{\r\n\"id\":\"[aUHyWwNZRPyfP3jYGYuSsg][newpinglunsearchindex][0]\",\r\n\"searches\":[\r\n{\r\n\"query\":[\r\n{\r\n\"type\":\"BooleanQuery\",\r\n\"description\":\"#entityID:[28683680 TO 28683680] #businessID:[1 TO 1] #isdel:[0 TO 0] #partnerID:[0 TO 0] #((checkStatus:[2 TO 2] checkStatus:[1 TO 1])~1)\",\r\n\"time_in_nanos\":1496860,\r\n\"breakdown\":{\r\n\"score\":0,\r\n\"build_scorer_count\":26,\r\n\"match_count\":0,\r\n\"create_weight\":6743,\r\n\"next_doc\":109439,\r\n\"match\":0,\r\n\"create_weight_count\":1,\r\n\"next_doc_count\":93,\r\n\"score_count\":0,\r\n\"build_scorer\":1380558,\r\n\"advance\":0,\r\n\"advance_count\":0\r\n},\r\n\"children\":[\r\n{\r\n\"type\":\"PointRangeQuery\",\r\n\"description\":\"entityID:[28683680 TO 28683680]\",\r\n\"time_in_nanos\":433773,\r\n\"breakdown\":{\r\n\"score\":0,\r\n\"build_scorer_count\":39,\r\n\"match_count\":0,\r\n\"create_weight\":1146,\r\n\"next_doc\":7898,\r\n\"match\":0,\r\n\"create_weight_count\":1,\r\n\"next_doc_count\":93,\r\n\"score_count\":0,\r\n\"build_scorer\":418940,\r\n\"advance\":5575,\r\n\"advance_count\":81\r\n}\r\n},\r\n{\r\n\"type\":\"PointRangeQuery\",\r\n\"description\":\"businessID:[1 TO 1]\",\r\n\"time_in_nanos\":198984,\r\n\"breakdown\":{\r\n\"score\":0,\r\n\"build_scorer_count\":39,\r\n\"match_count\":0,\r\n\"create_weight\":184,\r\n\"next_doc\":0,\r\n\"match\":0,\r\n\"create_weight_count\":1,\r\n\"next_doc_count\":0,\r\n\"score_count\":0,\r\n\"build_scorer\":189391,\r\n\"advance\":9257,\r\n\"advance_count\":112\r\n}\r\n},\r\n{\r\n\"type\":\"PointRangeQuery\",\r\n\"description\":\"isdel:[0 TO 0]\",\r\n\"time_in_nanos\":101801,\r\n\"breakdown\":{\r\n\"score\":0,\r\n\"build_scorer_count\":39,\r\n\"match_count\":0,\r\n\"create_weight\":174,\r\n\"next_doc\":0,\r\n\"match\":0,\r\n\"create_weight_count\":1,\r\n\"next_doc_count\":0,\r\n\"score_count\":0,\r\n\"build_scorer\":88680,\r\n\"advance\":12814,\r\n\"advance_count\":93\r\n}\r\n},\r\n{\r\n\"type\":\"PointRangeQuery\",\r\n\"description\":\"partnerID:[0 TO 0]\",\r\n\"time_in_nanos\":229277,\r\n\"breakdown\":{\r\n\"score\":0,\r\n\"build_scorer_count\":39,\r\n\"match_count\":0,\r\n\"create_weight\":173,\r\n\"next_doc\":0,\r\n\"match\":0,\r\n\"create_weight_count\":1,\r\n\"next_doc_count\":0,\r\n\"score_count\":0,\r\n\"build_scorer\":217545,\r\n\"advance\":11374,\r\n\"advance_count\":145\r\n}\r\n},\r\n{\r\n\"type\":\"BooleanQuery\",\r\n\"description\":\"(checkStatus:[2 TO 2] checkStatus:[1 TO 1])~1\",\r\n\"time_in_nanos\":399909,\r\n\"breakdown\":{\r\n\"score\":0,\r\n\"build_scorer_count\":39,\r\n\"match_count\":0,\r\n\"create_weight\":1723,\r\n\"next_doc\":0,\r\n\"match\":0,\r\n\"create_weight_count\":1,\r\n\"next_doc_count\":0,\r\n\"score_count\":0,\r\n\"build_scorer\":379347,\r\n\"advance\":18644,\r\n\"advance_count\":155\r\n},\r\n\"children\":[\r\n{\r\n\"type\":\"PointRangeQuery\",\r\n\"description\":\"checkStatus:[2 TO 2]\",\r\n\"time_in_nanos\":139999,\r\n\"breakdown\":{\r\n\"score\":0,\r\n\"build_scorer_count\":24,\r\n\"match_count\":0,\r\n\"create_weight\":183,\r\n\"next_doc\":0,\r\n\"match\":0,\r\n\"create_weight_count\":1,\r\n\"next_doc_count\":0,\r\n\"score_count\":0,\r\n\"build_scorer\":138697,\r\n\"advance\":1086,\r\n\"advance_count\":8\r\n}\r\n},\r\n{\r\n\"type\":\"PointRangeQuery\",\r\n\"description\":\"checkStatus:[1 TO 1]\",\r\n\"time_in_nanos\":204555,\r\n\"breakdown\":{\r\n\"score\":0,\r\n\"build_scorer_count\":24,\r\n\"match_count\":0,\r\n\"create_weight\":172,\r\n\"next_doc\":0,\r\n\"match\":0,\r\n\"create_weight_count\":1,\r\n\"next_doc_count\":0,\r\n\"score_count\":0,\r\n\"build_scorer\":201657,\r\n\"advance\":2655,\r\n\"advance_count\":46\r\n}\r\n}\r\n]\r\n}\r\n]\r\n}\r\n],\r\n\"rewrite_time\":7877,\r\n\"collector\":[\r\n{\r\n\"name\":\"CancellableCollector\",\r\n\"reason\":\"search_cancelled\",\r\n\"time_in_nanos\":46525,\r\n\"children\":[\r\n{\r\n\"name\":\"MultiCollector\",\r\n\"reason\":\"search_top_hits\",\r\n\"time_in_nanos\":38539\r\n}\r\n]\r\n}\r\n]\r\n}\r\n],\r\n\"aggregations\":[\r\n]\r\n}\r\n]\r\n}\r\n}","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}