[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/120450426","html_url":"https://github.com/elastic/elasticsearch/issues/12179#issuecomment-120450426","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12179","id":120450426,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMDQ1MDQyNg==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-07-10T16:22:35Z","updated_at":"2015-07-10T16:22:35Z","author_association":"MEMBER","body":"Does this late binding mean errors (missing fields) would not be surfaced until documents are percolated?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/120488216","html_url":"https://github.com/elastic/elasticsearch/issues/12179#issuecomment-120488216","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12179","id":120488216,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMDQ4ODIxNg==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2015-07-10T18:30:13Z","updated_at":"2015-07-10T18:30:13Z","author_association":"MEMBER","body":"yes, the errors would be known when documents are percolated, but because the the percolator queries haven't been parsed into their final form, it should be possible to add the missing field to the mapping.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/143598628","html_url":"https://github.com/elastic/elasticsearch/issues/12179#issuecomment-143598628","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12179","id":143598628,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MzU5ODYyOA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-09-27T22:23:03Z","updated_at":"2015-09-27T22:23:03Z","author_association":"CONTRIBUTOR","body":"Is it something we can move forward with now that query refactoring landed?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/143650645","html_url":"https://github.com/elastic/elasticsearch/issues/12179#issuecomment-143650645","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12179","id":143650645,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MzY1MDY0NQ==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2015-09-28T06:20:33Z","updated_at":"2015-09-28T06:20:33Z","author_association":"MEMBER","body":"> Is it something we can move forward with now that query refactoring landed?\n\nyes now that we have the infra for parsing into our own intermediate objects, we can look into migrating the percolator to actually make use of it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/143988833","html_url":"https://github.com/elastic/elasticsearch/issues/12179#issuecomment-143988833","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12179","id":143988833,"node_id":"MDEyOklzc3VlQ29tbWVudDE0Mzk4ODgzMw==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2015-09-29T08:40:38Z","updated_at":"2015-09-29T08:40:38Z","author_association":"MEMBER","body":"I chatted with @martijnvg about this. Using our own intermediate query objects would make it possible to only parse the json of percolator queries at index time (`QueryParser#fromXContent`) and delay the rest to the percolation time e.g. mappings, wildcards and now resolution (`QueryBuilder#toQuery`). This would allow us to potentially remove the need for strict field resolution in the percolator, similarly to what we did for aliases when we moved parsing to search time rather index time.\n\nOn the other hand, #13646 relies on calling `Query#extractTerms` in lucene so that we can index the terms extracted out of each query, and that requires calling `QueryBuilder#toQuery` at index time, which also requires again strict field resolution. It seems like these two are conflicting changes and #13646 is much more important as it brings bigger benefits, so maybe we should simply close this issue.\n","performed_via_github_app":null}]