[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/457565597","html_url":"https://github.com/elastic/elasticsearch/issues/37863#issuecomment-457565597","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37863","id":457565597,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NzU2NTU5Nw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-01-25T13:00:34Z","updated_at":"2019-01-25T13:00:34Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/458950806","html_url":"https://github.com/elastic/elasticsearch/issues/37863#issuecomment-458950806","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37863","id":458950806,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODk1MDgwNg==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2019-01-30T13:52:18Z","updated_at":"2019-01-30T13:52:18Z","author_association":"MEMBER","body":"heya @LucaWintergerst I don't see an empty response being returned. I rather get this (tested on 6.6.0):\r\n\r\n```\r\n{\r\n  \"took\" : 0,\r\n  \"timed_out\" : false,\r\n  \"_shards\" : {\r\n    \"total\" : 0,\r\n    \"successful\" : 0,\r\n    \"skipped\" : 0,\r\n    \"failed\" : 0\r\n  },\r\n  \"hits\" : {\r\n    \"total\" : 0,\r\n    \"max_score\" : 0.0,\r\n    \"hits\" : [ ]\r\n  }\r\n}\r\n```\r\n\r\nThe reason for this is that, when connecting to remote clusters is disabled, the node behaves as if the seeds were not configured and treats `remote_cluster:*` like a wildcard expression referring to local indices, which gets resolved to no indices. This is because there can be local indices matching that expression (see #26247 where we disallowed/deprecated using `:` in an index name), so we can't really assume that users are referring to a remote index and throw an error (we will be able to make that assumption in 8.0 only).\r\n\r\nThat said there are a couple of ways to detect that something is going wrong:\r\n\r\n- check `_shards.total`: `0` means the query did not run on any shards, which looks suspicious\r\n- use `allow_no_indices=false,ignore_unavailable=false` to have a strict behaviour, that way you get an exception whenever an index is mentioned that does not exist and the search fails\r\n\r\n@dimitris-athanasiou @droberts195 could you let me know if this work for you?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/458956756","html_url":"https://github.com/elastic/elasticsearch/issues/37863#issuecomment-458956756","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37863","id":458956756,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODk1Njc1Ng==","user":{"login":"dimitris-athanasiou","id":9351617,"node_id":"MDQ6VXNlcjkzNTE2MTc=","avatar_url":"https://avatars3.githubusercontent.com/u/9351617?v=4","gravatar_id":"","url":"https://api.github.com/users/dimitris-athanasiou","html_url":"https://github.com/dimitris-athanasiou","followers_url":"https://api.github.com/users/dimitris-athanasiou/followers","following_url":"https://api.github.com/users/dimitris-athanasiou/following{/other_user}","gists_url":"https://api.github.com/users/dimitris-athanasiou/gists{/gist_id}","starred_url":"https://api.github.com/users/dimitris-athanasiou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dimitris-athanasiou/subscriptions","organizations_url":"https://api.github.com/users/dimitris-athanasiou/orgs","repos_url":"https://api.github.com/users/dimitris-athanasiou/repos","events_url":"https://api.github.com/users/dimitris-athanasiou/events{/privacy}","received_events_url":"https://api.github.com/users/dimitris-athanasiou/received_events","type":"User","site_admin":false},"created_at":"2019-01-30T14:09:20Z","updated_at":"2019-01-30T14:09:20Z","author_association":"CONTRIBUTOR","body":"@javanna While we could probably fix the ML side using your suggestions, I still think other users could be bitten by this. Would it not be possible to throw an error instead? It seems like we know we're reaching a remote cluster and we know the node is disabled from doing so, so why not error?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/458961508","html_url":"https://github.com/elastic/elasticsearch/issues/37863#issuecomment-458961508","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37863","id":458961508,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODk2MTUwOA==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2019-01-30T14:23:19Z","updated_at":"2019-01-30T14:23:19Z","author_association":"MEMBER","body":"@dimitris-athanasiou I explained above why we cannot do it.\r\n\r\n> This is because there can be local indices matching that expression (see #26247 where we disallowed/deprecated using : in an index name), so we can't really assume that users are referring to a remote index and throw an error (we will be able to make that assumption in 8.0 only).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/458962738","html_url":"https://github.com/elastic/elasticsearch/issues/37863#issuecomment-458962738","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37863","id":458962738,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODk2MjczOA==","user":{"login":"dimitris-athanasiou","id":9351617,"node_id":"MDQ6VXNlcjkzNTE2MTc=","avatar_url":"https://avatars3.githubusercontent.com/u/9351617?v=4","gravatar_id":"","url":"https://api.github.com/users/dimitris-athanasiou","html_url":"https://github.com/dimitris-athanasiou","followers_url":"https://api.github.com/users/dimitris-athanasiou/followers","following_url":"https://api.github.com/users/dimitris-athanasiou/following{/other_user}","gists_url":"https://api.github.com/users/dimitris-athanasiou/gists{/gist_id}","starred_url":"https://api.github.com/users/dimitris-athanasiou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dimitris-athanasiou/subscriptions","organizations_url":"https://api.github.com/users/dimitris-athanasiou/orgs","repos_url":"https://api.github.com/users/dimitris-athanasiou/repos","events_url":"https://api.github.com/users/dimitris-athanasiou/events{/privacy}","received_events_url":"https://api.github.com/users/dimitris-athanasiou/received_events","type":"User","site_admin":false},"created_at":"2019-01-30T14:26:58Z","updated_at":"2019-01-30T14:26:58Z","author_association":"CONTRIBUTOR","body":"Ah, apologies, I misread that part.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/458964898","html_url":"https://github.com/elastic/elasticsearch/issues/37863#issuecomment-458964898","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37863","id":458964898,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODk2NDg5OA==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2019-01-30T14:33:08Z","updated_at":"2019-01-30T14:33:08Z","author_association":"MEMBER","body":"No worries, I will take care of updating this behaviour once we move master to 8.0, for now I will close this issue.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/476282128","html_url":"https://github.com/elastic/elasticsearch/issues/37863#issuecomment-476282128","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37863","id":476282128,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NjI4MjEyOA==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2019-03-25T16:43:14Z","updated_at":"2019-03-25T16:43:14Z","author_association":"MEMBER","body":"Reopening, we moved master to 8.0.0 and it's now possible to make this change. PR coming.","performed_via_github_app":null}]