[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/430543300","html_url":"https://github.com/elastic/elasticsearch/issues/34529#issuecomment-430543300","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34529","id":430543300,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMDU0MzMwMA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-10-17T08:46:43Z","updated_at":"2018-10-17T08:46:43Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search-aggs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/430566260","html_url":"https://github.com/elastic/elasticsearch/issues/34529#issuecomment-430566260","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34529","id":430566260,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMDU2NjI2MA==","user":{"login":"romseygeek","id":1347065,"node_id":"MDQ6VXNlcjEzNDcwNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/1347065?v=4","gravatar_id":"","url":"https://api.github.com/users/romseygeek","html_url":"https://github.com/romseygeek","followers_url":"https://api.github.com/users/romseygeek/followers","following_url":"https://api.github.com/users/romseygeek/following{/other_user}","gists_url":"https://api.github.com/users/romseygeek/gists{/gist_id}","starred_url":"https://api.github.com/users/romseygeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/romseygeek/subscriptions","organizations_url":"https://api.github.com/users/romseygeek/orgs","repos_url":"https://api.github.com/users/romseygeek/repos","events_url":"https://api.github.com/users/romseygeek/events{/privacy}","received_events_url":"https://api.github.com/users/romseygeek/received_events","type":"User","site_admin":false},"created_at":"2018-10-17T09:55:16Z","updated_at":"2018-10-17T09:55:16Z","author_association":"CONTRIBUTOR","body":"You're correct that fuzziness is applied after the stemmer.  Fuzzy queries work by expanding the output of the analysis chain against the terms dictionary, and there isn't really any way of doing things the other way around.\r\n\r\nThe english stemmer normalizes both `shade` and `shading` to `shade`, but normalizes `sahde` to `sahd`, which means that it is two edits away from `shade`, hence the miss.  You can try increasing the fuzziness factor to 2, but that of course has the trade-off of decreasing the precision of your results.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/430567201","html_url":"https://github.com/elastic/elasticsearch/issues/34529#issuecomment-430567201","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34529","id":430567201,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMDU2NzIwMQ==","user":{"login":"romseygeek","id":1347065,"node_id":"MDQ6VXNlcjEzNDcwNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/1347065?v=4","gravatar_id":"","url":"https://api.github.com/users/romseygeek","html_url":"https://github.com/romseygeek","followers_url":"https://api.github.com/users/romseygeek/followers","following_url":"https://api.github.com/users/romseygeek/following{/other_user}","gists_url":"https://api.github.com/users/romseygeek/gists{/gist_id}","starred_url":"https://api.github.com/users/romseygeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/romseygeek/subscriptions","organizations_url":"https://api.github.com/users/romseygeek/orgs","repos_url":"https://api.github.com/users/romseygeek/repos","events_url":"https://api.github.com/users/romseygeek/events{/privacy}","received_events_url":"https://api.github.com/users/romseygeek/received_events","type":"User","site_admin":false},"created_at":"2018-10-17T09:58:13Z","updated_at":"2018-10-17T09:58:13Z","author_association":"CONTRIBUTOR","body":"BTW, my usual response to issues with the english stemmer is to recommend trying the snowball stemmer and see if that helps, but it looks as though both of them leave the 'e' on the end of 'shade', so that won't help.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/431021594","html_url":"https://github.com/elastic/elasticsearch/issues/34529#issuecomment-431021594","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34529","id":431021594,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMTAyMTU5NA==","user":{"login":"alexandremottet","id":617692,"node_id":"MDQ6VXNlcjYxNzY5Mg==","avatar_url":"https://avatars0.githubusercontent.com/u/617692?v=4","gravatar_id":"","url":"https://api.github.com/users/alexandremottet","html_url":"https://github.com/alexandremottet","followers_url":"https://api.github.com/users/alexandremottet/followers","following_url":"https://api.github.com/users/alexandremottet/following{/other_user}","gists_url":"https://api.github.com/users/alexandremottet/gists{/gist_id}","starred_url":"https://api.github.com/users/alexandremottet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexandremottet/subscriptions","organizations_url":"https://api.github.com/users/alexandremottet/orgs","repos_url":"https://api.github.com/users/alexandremottet/repos","events_url":"https://api.github.com/users/alexandremottet/events{/privacy}","received_events_url":"https://api.github.com/users/alexandremottet/received_events","type":"User","site_admin":false},"created_at":"2018-10-18T14:04:27Z","updated_at":"2018-10-18T14:04:27Z","author_association":"NONE","body":"Ok, thanks for the tips, I will try it.\r\nI mainly wanted to know if it was possible to have an option to do the fuzzy stuff before the stem algorithm.\r\nI've was thinking that having the fuzziness algorithm before the stemming was more logical but maybe I'm wrong.","performed_via_github_app":null}]