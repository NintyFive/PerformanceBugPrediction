[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/316441065","html_url":"https://github.com/elastic/elasticsearch/issues/25792#issuecomment-316441065","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25792","id":316441065,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNjQ0MTA2NQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-07-19T16:24:24Z","updated_at":"2017-07-19T16:24:24Z","author_association":"CONTRIBUTOR","body":"What is the `salary` type in your mappings?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/316455268","html_url":"https://github.com/elastic/elasticsearch/issues/25792#issuecomment-316455268","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25792","id":316455268,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNjQ1NTI2OA==","user":{"login":"RuslanDidyk","id":8424894,"node_id":"MDQ6VXNlcjg0MjQ4OTQ=","avatar_url":"https://avatars3.githubusercontent.com/u/8424894?v=4","gravatar_id":"","url":"https://api.github.com/users/RuslanDidyk","html_url":"https://github.com/RuslanDidyk","followers_url":"https://api.github.com/users/RuslanDidyk/followers","following_url":"https://api.github.com/users/RuslanDidyk/following{/other_user}","gists_url":"https://api.github.com/users/RuslanDidyk/gists{/gist_id}","starred_url":"https://api.github.com/users/RuslanDidyk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RuslanDidyk/subscriptions","organizations_url":"https://api.github.com/users/RuslanDidyk/orgs","repos_url":"https://api.github.com/users/RuslanDidyk/repos","events_url":"https://api.github.com/users/RuslanDidyk/events{/privacy}","received_events_url":"https://api.github.com/users/RuslanDidyk/received_events","type":"User","site_admin":false},"created_at":"2017-07-19T17:14:31Z","updated_at":"2017-07-19T17:14:31Z","author_association":"NONE","body":"Sorry, there was a mistake:( It's okay right now.\r\n\r\n`salary` type is - float","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/316609433","html_url":"https://github.com/elastic/elasticsearch/issues/25792#issuecomment-316609433","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25792","id":316609433,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNjYwOTQzMw==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-07-20T06:27:53Z","updated_at":"2017-07-20T06:27:53Z","author_association":"CONTRIBUTOR","body":"This is due to the fact that you are retrieving the value from the `_source`, which is unaware of mappings. You might as well get an Integer or a Long if the number does not have a dot in its string representation.\r\n\r\nWe could use the field types that come from mappings in order to use the right types, but that would also come with drawbacks. For instance it is common to use floats rather than doubles to map floating-point numbers because they give smaller/faster indices however it might incur an accuracy loss. It might be ok for filtering/aggregating but the general contract of the `_source` is that it retains the original information of the json document.\r\n\r\nI believe this is something we should better document in the Java API.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/357332984","html_url":"https://github.com/elastic/elasticsearch/issues/25792#issuecomment-357332984","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25792","id":357332984,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NzMzMjk4NA==","user":{"login":"wang0109","id":177141,"node_id":"MDQ6VXNlcjE3NzE0MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/177141?v=4","gravatar_id":"","url":"https://api.github.com/users/wang0109","html_url":"https://github.com/wang0109","followers_url":"https://api.github.com/users/wang0109/followers","following_url":"https://api.github.com/users/wang0109/following{/other_user}","gists_url":"https://api.github.com/users/wang0109/gists{/gist_id}","starred_url":"https://api.github.com/users/wang0109/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wang0109/subscriptions","organizations_url":"https://api.github.com/users/wang0109/orgs","repos_url":"https://api.github.com/users/wang0109/repos","events_url":"https://api.github.com/users/wang0109/events{/privacy}","received_events_url":"https://api.github.com/users/wang0109/received_events","type":"User","site_admin":false},"created_at":"2018-01-12T19:33:11Z","updated_at":"2018-01-12T19:33:11Z","author_association":"NONE","body":"@jpountz Are you saying that if I POST a Json with say `{ \"salary\": 5 }` or `{\"salary\" : \"34.0\"}`, the mapping is ignored and whatever the Json gives will be saved into ES?  (so a `int` and a `String`, instead of `float`)..","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/357948802","html_url":"https://github.com/elastic/elasticsearch/issues/25792#issuecomment-357948802","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25792","id":357948802,"node_id":"MDEyOklzc3VlQ29tbWVudDM1Nzk0ODgwMg==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2018-01-16T12:45:20Z","updated_at":"2018-01-16T12:45:20Z","author_association":"CONTRIBUTOR","body":"@wang0109 The mapping defines how data is indexed and stored in doc-values. However, `_source` storage is unaware of the mappings indeed. When you get the source, Elasticsearch gives you back the same json document that had been posted at index time, it doesn't try to convert fields based on how they are mapped.\r\n\r\nThis means that for instance if you submit a numeric field (eg. mapped as `long`) as a string (`{\"foo\": \"42\"}`) then this field will still be returned as a string when fetching the source.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/358047772","html_url":"https://github.com/elastic/elasticsearch/issues/25792#issuecomment-358047772","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25792","id":358047772,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODA0Nzc3Mg==","user":{"login":"wang0109","id":177141,"node_id":"MDQ6VXNlcjE3NzE0MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/177141?v=4","gravatar_id":"","url":"https://api.github.com/users/wang0109","html_url":"https://github.com/wang0109","followers_url":"https://api.github.com/users/wang0109/followers","following_url":"https://api.github.com/users/wang0109/following{/other_user}","gists_url":"https://api.github.com/users/wang0109/gists{/gist_id}","starred_url":"https://api.github.com/users/wang0109/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wang0109/subscriptions","organizations_url":"https://api.github.com/users/wang0109/orgs","repos_url":"https://api.github.com/users/wang0109/repos","events_url":"https://api.github.com/users/wang0109/events{/privacy}","received_events_url":"https://api.github.com/users/wang0109/received_events","type":"User","site_admin":false},"created_at":"2018-01-16T17:53:03Z","updated_at":"2018-01-16T17:53:03Z","author_association":"NONE","body":"@jpountz in your example, if I do a range query using a lower bound and upper bound, does \"42\" get compared alphabetical ly as a string or numerically as a `long`? It seems that some sort of implicit conversion rule happens internally, is that the case?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/358294834","html_url":"https://github.com/elastic/elasticsearch/issues/25792#issuecomment-358294834","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25792","id":358294834,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODI5NDgzNA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2018-01-17T12:51:49Z","updated_at":"2018-01-17T12:51:49Z","author_association":"CONTRIBUTOR","body":"How terms compare to one another is going to depend solely on mappings, not how they are represented in the `_source`. Specifically numbers will use the numeric order and keywords the alphabetical order. The icu_collation_keyword field even allows to sort based on a collation: https://www.elastic.co/guide/en/elasticsearch/plugins/master/analysis-icu-collation-keyword-field.html","performed_via_github_app":null}]