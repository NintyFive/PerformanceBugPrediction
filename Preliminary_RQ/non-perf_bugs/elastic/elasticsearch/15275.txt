{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/15275","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15275/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15275/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15275/events","html_url":"https://github.com/elastic/elasticsearch/issues/15275","id":120738395,"node_id":"MDU6SXNzdWUxMjA3MzgzOTU=","number":15275,"title":"PUT `index/_mapping` doesn't work atm","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"labels":[{"id":163824881,"node_id":"MDU6TGFiZWwxNjM4MjQ4ODE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Indices%20APIs","name":":Core/Features/Indices APIs","color":"0e8a16","default":false,"description":"APIs to create and manage indices"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2015-12-07T10:05:41Z","updated_at":"2016-11-04T14:05:47Z","closed_at":"2016-11-04T14:05:47Z","author_association":"MEMBER","active_lock_reason":null,"body":"At the moment we define an endpoint which takes a PUT verb and `{index}/_mapping` as path. How every, when you try to use it, it fails:\n\n```\nPUT index/_mapping\n{\n  \"type\": {\n    \"properties\": {\n      \"field\": { \"type\": \"string\"}\n    }\n  }\n}\n```\n\nResults in:\n\n```\n{\n   \"error\": {\n      \"root_cause\": [\n         {\n            \"type\": \"action_request_validation_exception\",\n            \"reason\": \"Validation Failed: 1: mapping type is missing;\"\n         }\n      ],\n      \"type\": \"action_request_validation_exception\",\n      \"reason\": \"Validation Failed: 1: mapping type is missing;\"\n   },\n   \"status\": 400\n}\n```\n\nSniffing in the code it seems one has to supply a type in the URL, i.e., `PUT index/_mapping/type` and in which case you can omit or keep the type in the body (both works). However, trying to use two types, silently drops second type (if the first one matches the url pattern), or gets annoyed:\n\n```\nPUT index/_mapping/type\n{\n  \"type2\":{\n    \"properties\": {\n      \"field\": { \"type\": \"string\"}\n    }\n  },\n  \"type\":{\n    \"properties\": {\n      \"field\": { \"type\": \"string\"}\n    }\n  }\n}\n```\n\nresulting in\n\n```\n{\n   \"error\": {\n      \"root_cause\": [\n         {\n            \"type\": \"mapper_parsing_exception\",\n            \"reason\": \"Root mapping definition has unsupported parameters:  [type2 : {properties={field={type=string}}}] [type : {properties={field={type=string}}}]\"\n         }\n      ]\n}\n```\n\nImho we should support multiple types in one request, or alternatively disable the endpoint.\n\n/dd @pmusa \n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}