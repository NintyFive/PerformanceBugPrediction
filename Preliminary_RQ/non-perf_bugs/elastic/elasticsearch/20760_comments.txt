[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/251701866","html_url":"https://github.com/elastic/elasticsearch/issues/20760#issuecomment-251701866","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20760","id":251701866,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MTcwMTg2Ng==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2016-10-05T15:04:27Z","updated_at":"2016-10-05T15:04:27Z","author_association":"MEMBER","body":"Have we run into any situations where someone has actually hit this issue? I don't recall seeing any github issues about it before.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/251704335","html_url":"https://github.com/elastic/elasticsearch/issues/20760#issuecomment-251704335","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20760","id":251704335,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MTcwNDMzNQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-10-05T15:12:47Z","updated_at":"2016-10-05T15:12:47Z","author_association":"CONTRIBUTOR","body":"> I don't recall seeing any github issues about it before.\n\nI've seen it come through Elastic's support organization a few times. I expect this hasn't come up on github because Elasticsearch isn't the root cause of the issue.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/251806162","html_url":"https://github.com/elastic/elasticsearch/issues/20760#issuecomment-251806162","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20760","id":251806162,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MTgwNjE2Mg==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2016-10-05T21:33:35Z","updated_at":"2016-10-05T21:33:35Z","author_association":"CONTRIBUTOR","body":"I think I'd rather limit the total number of indices/shards in a cluster than the creation rate.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252206854","html_url":"https://github.com/elastic/elasticsearch/issues/20760#issuecomment-252206854","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20760","id":252206854,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjIwNjg1NA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-10-07T10:14:48Z","updated_at":"2016-10-07T10:14:48Z","author_association":"CONTRIBUTOR","body":"Discussed in FixItFriday.  There are two issues here: creating too many indices and creating indices faster than the master can cope. We suggest adding two safeguards:\n\n# max_shards_per_node\n\nThis setting would be checked on user actions like create index, restore snapshot, open index.  If the total number of shards in the cluster is greater than `max_shards_per_node * number_of_nodes` then the user action can be rejected.  This implementation allows the max value to be exceeded if (eg) a node fails, resulting in a lower total max shards per cluster.\n\nWe would default to a high number during 5.x (eg 1000), giving sysadmins the ability to set it to whatever makes sense for their cluster, and we can look at lowering this value for 6.0.\n\n# max_concurrent_index_creations\n\nThis would be a simple counter which counts the number of in-flight index creation requests.  New requests which would cause the max to be exceeded would be rejected.  The aim of this setting is not to queue up potentially thousands of index creations which could be caused by erroneously trying to create an index per document.  Default eg 30\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/252213610","html_url":"https://github.com/elastic/elasticsearch/issues/20760#issuecomment-252213610","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20760","id":252213610,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MjIxMzYxMA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-10-07T10:47:20Z","updated_at":"2016-10-07T10:47:20Z","author_association":"CONTRIBUTOR","body":"The `max_shards_per_node` change will be handled in https://github.com/elastic/elasticsearch/issues/20705\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/474777559","html_url":"https://github.com/elastic/elasticsearch/issues/20760#issuecomment-474777559","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20760","id":474777559,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDc3NzU1OQ==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2019-03-20T10:43:52Z","updated_at":"2019-03-20T10:43:52Z","author_association":"CONTRIBUTOR","body":"We now have a limit on the number of shards per node in a cluster, thanks to #34892.\r\n\r\nI've marked this as `team-discuss` because I would like to revisit the discussion about limiting the number of concurrent index creations, or applying another rate limit. I question how easy it would be to set this correctly. If using time-based indices then sometimes we might want to create many indices at the same time. Conversely, even if you could only create a single index at once I think the time it'd take to hit the shards-per-node limit is comparable with the time it'd take to react to a rogue client that's creating too many indices, so I don't think the concurrency limit helps much.\r\n\r\nIn short, I think we can close this.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/638190472","html_url":"https://github.com/elastic/elasticsearch/issues/20760#issuecomment-638190472","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20760","id":638190472,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODE5MDQ3Mg==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2020-06-03T13:17:21Z","updated_at":"2020-06-03T13:17:21Z","author_association":"CONTRIBUTOR","body":"We discussed this today and agreed to close this for the reasons I described above.","performed_via_github_app":null}]