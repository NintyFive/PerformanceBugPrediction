[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54604441","html_url":"https://github.com/elastic/elasticsearch/issues/3764#issuecomment-54604441","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3764","id":54604441,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjA0NDQx","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2014-09-05T09:40:01Z","updated_at":"2014-09-05T09:40:01Z","author_association":"CONTRIBUTOR","body":"@bleskes @martijnvg @kimchy Any thoughts about this issue?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/55883005","html_url":"https://github.com/elastic/elasticsearch/issues/3764#issuecomment-55883005","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3764","id":55883005,"node_id":"MDEyOklzc3VlQ29tbWVudDU1ODgzMDA1","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2014-09-17T11:54:06Z","updated_at":"2014-09-17T11:54:06Z","author_association":"MEMBER","body":"@andrewclegg I think we definitely be smarter about how we do this but it might help to explain how it works now. When a shard fails on a node, ES will try to assign it to _another_ node. If that possible, all is well. If that is not possible, it will retry to assign the shard again to the previous node, in the hope that it will go better this time. Does it explain what you're seeing?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/58173921","html_url":"https://github.com/elastic/elasticsearch/issues/3764#issuecomment-58173921","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3764","id":58173921,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MTczOTIx","user":{"login":"andrewclegg","id":578186,"node_id":"MDQ6VXNlcjU3ODE4Ng==","avatar_url":"https://avatars2.githubusercontent.com/u/578186?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewclegg","html_url":"https://github.com/andrewclegg","followers_url":"https://api.github.com/users/andrewclegg/followers","following_url":"https://api.github.com/users/andrewclegg/following{/other_user}","gists_url":"https://api.github.com/users/andrewclegg/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewclegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewclegg/subscriptions","organizations_url":"https://api.github.com/users/andrewclegg/orgs","repos_url":"https://api.github.com/users/andrewclegg/repos","events_url":"https://api.github.com/users/andrewclegg/events{/privacy}","received_events_url":"https://api.github.com/users/andrewclegg/received_events","type":"User","site_admin":false},"created_at":"2014-10-07T12:05:16Z","updated_at":"2014-10-07T12:05:16Z","author_association":"NONE","body":"@bleskes I honestly don't remember! I moved to a different team not long after that, and this question was in the context of a project that's no longer running.\n\nI _think_ it was an \"in theory\" question, motivated by a desire to figure out whether we had the right storage architecture -- I certainly don't remember any disk failures on that cluster. I was trying to work out whether the right thing to do (when you have nodes with multiple physical disks) is a \"JBOD\" configuration, with multiple data directories on different disks -- like in Hadoop -- or RAID.\n\nIf I remember correctly, ES stores each shard _across_ the available data directories, i.e. not all the segments from one shard will be in the same directory. But the downside of this would be that a failing disk could take out all the shards on the node -- as they could all lose some segments.\n\n(This was all on a pre-1.0 cluster so things may have changed a lot since then...?)\n\nMy idea was that ES could spot a specific disk failing, mark that disk as down, retrieve only the affected segments from other replicas, and place them on other disks. But it only makes sense to do this when you have large-ish servers with multiple disks (ours had 7 or 8 disks IIRC). Perhaps this is too complex in practice, and it's better to just migrate all the affected shards to other nodes. Feel free to close if that's a better way of doing it in the majority case.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/58179241","html_url":"https://github.com/elastic/elasticsearch/issues/3764#issuecomment-58179241","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3764","id":58179241,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MTc5MjQx","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2014-10-07T12:54:46Z","updated_at":"2014-10-07T12:54:46Z","author_association":"MEMBER","body":"@andrewclegg thx for the update. Yeah, I think it does make sense in theory but will end up being super complex to manage. I suggest we close for now? there is quite a lot of infra work that needs to happen before this is feasible.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/58342697","html_url":"https://github.com/elastic/elasticsearch/issues/3764#issuecomment-58342697","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3764","id":58342697,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MzQyNjk3","user":{"login":"andrewclegg","id":578186,"node_id":"MDQ6VXNlcjU3ODE4Ng==","avatar_url":"https://avatars2.githubusercontent.com/u/578186?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewclegg","html_url":"https://github.com/andrewclegg","followers_url":"https://api.github.com/users/andrewclegg/followers","following_url":"https://api.github.com/users/andrewclegg/following{/other_user}","gists_url":"https://api.github.com/users/andrewclegg/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewclegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewclegg/subscriptions","organizations_url":"https://api.github.com/users/andrewclegg/orgs","repos_url":"https://api.github.com/users/andrewclegg/repos","events_url":"https://api.github.com/users/andrewclegg/events{/privacy}","received_events_url":"https://api.github.com/users/andrewclegg/received_events","type":"User","site_admin":false},"created_at":"2014-10-08T11:14:03Z","updated_at":"2014-10-08T11:14:03Z","author_association":"NONE","body":"More than happy to close as \"not practically feasible\"...\n","performed_via_github_app":null}]