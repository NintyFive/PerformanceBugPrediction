{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/2745","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2745/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2745/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2745/events","html_url":"https://github.com/elastic/elasticsearch/issues/2745","id":11774706,"node_id":"MDU6SXNzdWUxMTc3NDcwNg==","number":2745,"title":"Binary Fields don't retain 'store' setting - assumes \"store\" : \"true\"","user":{"login":"bsandiford","id":3801581,"node_id":"MDQ6VXNlcjM4MDE1ODE=","avatar_url":"https://avatars2.githubusercontent.com/u/3801581?v=4","gravatar_id":"","url":"https://api.github.com/users/bsandiford","html_url":"https://github.com/bsandiford","followers_url":"https://api.github.com/users/bsandiford/followers","following_url":"https://api.github.com/users/bsandiford/following{/other_user}","gists_url":"https://api.github.com/users/bsandiford/gists{/gist_id}","starred_url":"https://api.github.com/users/bsandiford/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bsandiford/subscriptions","organizations_url":"https://api.github.com/users/bsandiford/orgs","repos_url":"https://api.github.com/users/bsandiford/repos","events_url":"https://api.github.com/users/bsandiford/events{/privacy}","received_events_url":"https://api.github.com/users/bsandiford/received_events","type":"User","site_admin":false},"labels":[{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2013-03-07T19:23:19Z","updated_at":"2013-03-08T01:53:05Z","closed_at":"2013-03-08T01:53:05Z","author_association":"NONE","active_lock_reason":null,"body":"Symptom - if you have a binary field 'blob' with \"store\":\"false\", then you MUST qualify the field name as \"_source:blob\" in order to retrieve it.  Details below:\n\nI figured out the bug in 0.19.4.\n\nBasically, we have mappings like this (in part):\n\n```\n\"mappings\" : {\n  \"_default_\" : {\n   \"properties\" : {\n      \"blob\" :      {\"type\" : \"binary\", \"store\" : \"false\", \"index\" : \"not_analyzed\", \"include_in_all\" : \"false\" }\n   }\n  }\n}\n```\n\nWhen starting 'from scratch' (i.e. indexing data for the first time), internally ES has BinaryFieldMapper element for \"blob\", where \"store\" is \"NO\", which is correct.\n\nHowever - when shutting down and re-starting ES, the BinaryFieldMapper entry that gets created has \"store\" set to \"YES\".  So, it tries in FetchPhase execute() to place the \"blob\" info into the fieldSelectorMapper, rather than into the extractFieldNames.  And, since there is no \"blob\" field other than in _source, it fails to retrieve the \"blob\" value.\n\nSo - the but appears to be that the \"store\" \"false\" is not being preserved properly when you just shut down ES and then start it up again.\n","closed_by":{"login":"bsandiford","id":3801581,"node_id":"MDQ6VXNlcjM4MDE1ODE=","avatar_url":"https://avatars2.githubusercontent.com/u/3801581?v=4","gravatar_id":"","url":"https://api.github.com/users/bsandiford","html_url":"https://github.com/bsandiford","followers_url":"https://api.github.com/users/bsandiford/followers","following_url":"https://api.github.com/users/bsandiford/following{/other_user}","gists_url":"https://api.github.com/users/bsandiford/gists{/gist_id}","starred_url":"https://api.github.com/users/bsandiford/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bsandiford/subscriptions","organizations_url":"https://api.github.com/users/bsandiford/orgs","repos_url":"https://api.github.com/users/bsandiford/repos","events_url":"https://api.github.com/users/bsandiford/events{/privacy}","received_events_url":"https://api.github.com/users/bsandiford/received_events","type":"User","site_admin":false},"performed_via_github_app":null}