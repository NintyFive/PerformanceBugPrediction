{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/35634","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35634/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35634/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35634/events","html_url":"https://github.com/elastic/elasticsearch/issues/35634","id":381589544,"node_id":"MDU6SXNzdWUzODE1ODk1NDQ=","number":35634,"title":"Configuration files in /etc should probably not be group-writable","user":{"login":"jcassee","id":20749,"node_id":"MDQ6VXNlcjIwNzQ5","avatar_url":"https://avatars1.githubusercontent.com/u/20749?v=4","gravatar_id":"","url":"https://api.github.com/users/jcassee","html_url":"https://github.com/jcassee","followers_url":"https://api.github.com/users/jcassee/followers","following_url":"https://api.github.com/users/jcassee/following{/other_user}","gists_url":"https://api.github.com/users/jcassee/gists{/gist_id}","starred_url":"https://api.github.com/users/jcassee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jcassee/subscriptions","organizations_url":"https://api.github.com/users/jcassee/orgs","repos_url":"https://api.github.com/users/jcassee/repos","events_url":"https://api.github.com/users/jcassee/events{/privacy}","received_events_url":"https://api.github.com/users/jcassee/received_events","type":"User","site_admin":false},"labels":[{"id":114977275,"node_id":"MDU6TGFiZWwxMTQ5NzcyNzU=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Packaging","name":":Delivery/Packaging","color":"0e8a16","default":false,"description":"RPM and deb packaging, tar and zip archives, shell and batch scripts"},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-11-16T12:59:28Z","updated_at":"2020-11-11T21:56:14Z","closed_at":"2018-11-19T23:22:45Z","author_association":"NONE","active_lock_reason":null,"body":"<!-- Bug report -->\r\n\r\nThis issue was opened to get wider discussion after a [conversation on the forum](https://discuss.elastic.co/t/debian-package-creates-configuration-file-writable-by-the-elasticsearch-process/156748/2).\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`):\r\nVersion: 6.4.3, Build: default/deb/fe40335/2018-10-30T23:17:19.084789Z, JVM: 10.0.2\r\n\r\n**Plugins installed**: none\r\n\r\n**JVM version** (`java -version`):\r\nopenjdk 10.0.2 2018-07-17\r\nOpenJDK Runtime Environment (build 10.0.2+13-Ubuntu-1ubuntu0.18.04.3)\r\nOpenJDK 64-Bit Server VM (build 10.0.2+13-Ubuntu-1ubuntu0.18.04.3, mixed mode)\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): \r\nLinux elk-test 4.15.0-39-generic #42-Ubuntu SMP Tue Oct 23 15:48:01 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux (Ubuntu 18.04)\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nConfiguration files installed in `/etc/elasticsearch` are group-writable:\r\n```\r\n$ ls -l /etc/elasticsearch\r\ndrwxr-s---  2 root elasticsearch 4096 Nov 14 00:33 ./\r\ndrwxr-xr-x 98 root root          4096 Nov 14 01:06 ../\r\n-rw-rw----  1 root elasticsearch  207 Nov 14 00:32 elasticsearch.keystore\r\n-rw-rw----  1 root elasticsearch 2869 Oct 31 00:22 elasticsearch.yml\r\n-rw-rw----  1 root elasticsearch 3009 Oct 31 00:22 jvm.options\r\n-rw-rw----  1 root elasticsearch 6380 Oct 31 00:22 log4j2.properties\r\n-rw-rw----  1 root elasticsearch  473 Oct 31 00:22 role_mapping.yml\r\n-rw-rw----  1 root elasticsearch  197 Oct 31 00:22 roles.yml\r\n-rw-rw----  1 root elasticsearch    0 Oct 31 00:22 users\r\n-rw-rw----  1 root elasticsearch    0 Oct 31 00:22 users_roles\r\n```\r\n\r\nThis means these files are writable by the elasticsearch process itself. I think removing the group write bit would be safer and less surprising to an administrator.\r\n\r\nThe group write bits were added in #20966 in order to allow operators to change the configuration without being root. However, as far as I known this is not usual practice and should probably not be the default. Also, many configuration settings can be changed using the [Cluster Update Settings API](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-update-settings.html).","closed_by":{"login":"jcassee","id":20749,"node_id":"MDQ6VXNlcjIwNzQ5","avatar_url":"https://avatars1.githubusercontent.com/u/20749?v=4","gravatar_id":"","url":"https://api.github.com/users/jcassee","html_url":"https://github.com/jcassee","followers_url":"https://api.github.com/users/jcassee/followers","following_url":"https://api.github.com/users/jcassee/following{/other_user}","gists_url":"https://api.github.com/users/jcassee/gists{/gist_id}","starred_url":"https://api.github.com/users/jcassee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jcassee/subscriptions","organizations_url":"https://api.github.com/users/jcassee/orgs","repos_url":"https://api.github.com/users/jcassee/repos","events_url":"https://api.github.com/users/jcassee/events{/privacy}","received_events_url":"https://api.github.com/users/jcassee/received_events","type":"User","site_admin":false},"performed_via_github_app":null}