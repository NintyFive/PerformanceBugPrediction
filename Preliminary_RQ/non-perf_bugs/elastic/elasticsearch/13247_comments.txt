[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/136730390","html_url":"https://github.com/elastic/elasticsearch/issues/13247#issuecomment-136730390","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13247","id":136730390,"node_id":"MDEyOklzc3VlQ29tbWVudDEzNjczMDM5MA==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2015-09-01T13:56:28Z","updated_at":"2015-09-01T13:56:28Z","author_association":"CONTRIBUTOR","body":"I think this functionality is also untested.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/136767406","html_url":"https://github.com/elastic/elasticsearch/issues/13247#issuecomment-136767406","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13247","id":136767406,"node_id":"MDEyOklzc3VlQ29tbWVudDEzNjc2NzQwNg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-09-01T15:51:37Z","updated_at":"2015-09-01T15:51:37Z","author_association":"CONTRIBUTOR","body":"@gmarz would you be able to take a look at this?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/136806576","html_url":"https://github.com/elastic/elasticsearch/issues/13247#issuecomment-136806576","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13247","id":136806576,"node_id":"MDEyOklzc3VlQ29tbWVudDEzNjgwNjU3Ng==","user":{"login":"gmarz","id":1594777,"node_id":"MDQ6VXNlcjE1OTQ3Nzc=","avatar_url":"https://avatars0.githubusercontent.com/u/1594777?v=4","gravatar_id":"","url":"https://api.github.com/users/gmarz","html_url":"https://github.com/gmarz","followers_url":"https://api.github.com/users/gmarz/followers","following_url":"https://api.github.com/users/gmarz/following{/other_user}","gists_url":"https://api.github.com/users/gmarz/gists{/gist_id}","starred_url":"https://api.github.com/users/gmarz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gmarz/subscriptions","organizations_url":"https://api.github.com/users/gmarz/orgs","repos_url":"https://api.github.com/users/gmarz/repos","events_url":"https://api.github.com/users/gmarz/events{/privacy}","received_events_url":"https://api.github.com/users/gmarz/received_events","type":"User","site_admin":false},"created_at":"2015-09-01T17:36:52Z","updated_at":"2015-09-01T17:36:52Z","author_association":"MEMBER","body":"I get the same thing as well:\n\n```\nException in thread \"main\" areSettings(InternalSettingsPreparer.java:87)\n    at org.elasticsearch.common.cli.CliTool.<init>(CliTool.java:108)\n    at org.elasticsearch.common.cli.CliTool.<init>(CliTool.java:101)\n    at org.elasticsearch.bootstrap.BootstrapCLIParser.<init>(BootstrapCLIParser.java:48)\n    at org.elasticsearch.bootstrap.Bootstrap.main(Bootstrap.java:226)\n    at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:28)\nThe data area passed to a system call is too small.\n\nFailed to start service\n```\n\nI'll start digging...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/136815246","html_url":"https://github.com/elastic/elasticsearch/issues/13247#issuecomment-136815246","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13247","id":136815246,"node_id":"MDEyOklzc3VlQ29tbWVudDEzNjgxNTI0Ng==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2015-09-01T18:10:29Z","updated_at":"2015-09-01T18:10:29Z","author_association":"CONTRIBUTOR","body":"> I think this functionality is also untested.\n\nVery much. I was looking at getting vagrant tests for this too but it'd be very different than the existing bats tests. And I'm not sure what the licenses are for running windows VMs for testing. If someone can point me to something that makes it clear that window's license lets people spin up VMs for testing then I'll dig more into it and try to use the same technique we use for linux. Without bash, I guess.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/138550586","html_url":"https://github.com/elastic/elasticsearch/issues/13247#issuecomment-138550586","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13247","id":138550586,"node_id":"MDEyOklzc3VlQ29tbWVudDEzODU1MDU4Ng==","user":{"login":"jochen-st","id":14176196,"node_id":"MDQ6VXNlcjE0MTc2MTk2","avatar_url":"https://avatars1.githubusercontent.com/u/14176196?v=4","gravatar_id":"","url":"https://api.github.com/users/jochen-st","html_url":"https://github.com/jochen-st","followers_url":"https://api.github.com/users/jochen-st/followers","following_url":"https://api.github.com/users/jochen-st/following{/other_user}","gists_url":"https://api.github.com/users/jochen-st/gists{/gist_id}","starred_url":"https://api.github.com/users/jochen-st/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jochen-st/subscriptions","organizations_url":"https://api.github.com/users/jochen-st/orgs","repos_url":"https://api.github.com/users/jochen-st/repos","events_url":"https://api.github.com/users/jochen-st/events{/privacy}","received_events_url":"https://api.github.com/users/jochen-st/received_events","type":"User","site_admin":false},"created_at":"2015-09-08T12:51:42Z","updated_at":"2015-09-08T13:01:14Z","author_association":"NONE","body":"I found that changes in elasticsarch.in.bat related to ES_GC_OPTS environment variables caused JAVA_OPTS environment variable to contain \"  \" two consecutive spaces. These are converted by service.bat into \";;\" two consecutive semicolons. This causes procrun to stop adding Java options to service and service start fails with:\n\n```\nJava HotSpot(TM) 64-Bit Server VM warning: Using the ParNew young collector with the Serial old \ncollector is deprecated and will likely be removed in a future release\nException in thread \"main\" areSettings(InternalSettingsPreparer.java:97)\nat org.elasticsearch.common.cli.CliTool.<init>(CliTool.java:107)\nat org.elasticsearch.common.cli.CliTool.<init>(CliTool.java:100)\nat org.elasticsearch.bootstrap.BootstrapCLIParser.<init>(BootstrapCLIParser.java:48)\nat org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:221)\nat org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:35)\n```\n\nHowever even after manipulating ES_GC_OPTS / JAVA_OPTS to not contain two consecutive spaces (and procrun taking all Java options), service start still fails with\n\n```\nERROR: command not specified\n```\n\nI found that this can be fixed by adding \"--StartParams start\" to service.bat line 162 (starts with \"%EXECUTABLE%\" //IS//%SERVICE_ID%)\n\nNow stopping fails with\n\n```\nMethod 'static void close(String[])' not found in Class org/elasticsearch/bootstrap/Elasticsearch\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/138554040","html_url":"https://github.com/elastic/elasticsearch/issues/13247#issuecomment-138554040","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13247","id":138554040,"node_id":"MDEyOklzc3VlQ29tbWVudDEzODU1NDA0MA==","user":{"login":"gmarz","id":1594777,"node_id":"MDQ6VXNlcjE1OTQ3Nzc=","avatar_url":"https://avatars0.githubusercontent.com/u/1594777?v=4","gravatar_id":"","url":"https://api.github.com/users/gmarz","html_url":"https://github.com/gmarz","followers_url":"https://api.github.com/users/gmarz/followers","following_url":"https://api.github.com/users/gmarz/following{/other_user}","gists_url":"https://api.github.com/users/gmarz/gists{/gist_id}","starred_url":"https://api.github.com/users/gmarz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gmarz/subscriptions","organizations_url":"https://api.github.com/users/gmarz/orgs","repos_url":"https://api.github.com/users/gmarz/repos","events_url":"https://api.github.com/users/gmarz/events{/privacy}","received_events_url":"https://api.github.com/users/gmarz/received_events","type":"User","site_admin":false},"created_at":"2015-09-08T13:05:56Z","updated_at":"2015-09-08T13:05:56Z","author_association":"MEMBER","body":"@jochen-st yea, that's one of the issues with the script.  The other, which you're running into now has to do with the fact that the new elasticsearch CLI now requires a [start](https://github.com/elastic/elasticsearch/blob/master/distribution/src/main/resources/bin/elasticsearch.bat#L46) argument, which the service doesn't pass.\n\nI'm working on a fix and will open a PR shortly.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/138593350","html_url":"https://github.com/elastic/elasticsearch/issues/13247#issuecomment-138593350","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13247","id":138593350,"node_id":"MDEyOklzc3VlQ29tbWVudDEzODU5MzM1MA==","user":{"login":"gmarz","id":1594777,"node_id":"MDQ6VXNlcjE1OTQ3Nzc=","avatar_url":"https://avatars0.githubusercontent.com/u/1594777?v=4","gravatar_id":"","url":"https://api.github.com/users/gmarz","html_url":"https://github.com/gmarz","followers_url":"https://api.github.com/users/gmarz/followers","following_url":"https://api.github.com/users/gmarz/following{/other_user}","gists_url":"https://api.github.com/users/gmarz/gists{/gist_id}","starred_url":"https://api.github.com/users/gmarz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gmarz/subscriptions","organizations_url":"https://api.github.com/users/gmarz/orgs","repos_url":"https://api.github.com/users/gmarz/repos","events_url":"https://api.github.com/users/gmarz/events{/privacy}","received_events_url":"https://api.github.com/users/gmarz/received_events","type":"User","site_admin":false},"created_at":"2015-09-08T15:01:15Z","updated_at":"2015-09-08T15:01:15Z","author_association":"MEMBER","body":"@jochen-st sorry, just realized I misread your comment and that you already discovered that the script doesn't pass the `start` param.  I just opened the above PR to address the startup issues.\n\nThe stopping issue is a bit more involved.  Apache Commons Daemon requires a static stop method (--StopMethod) in order to shutdown gracefully.  This use to exist (`org.elasticsearch.bootstrap.Elasticsearch.close()`) but was removed in ES 2.x.  The script was never updated, hence the error message.\n\nNot sure the reasoning for removing it and how it should be added back.  I'm going to open a new issue for this.\n","performed_via_github_app":null}]