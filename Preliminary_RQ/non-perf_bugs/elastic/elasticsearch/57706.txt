{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/57706","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57706/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57706/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57706/events","html_url":"https://github.com/elastic/elasticsearch/issues/57706","id":631253134,"node_id":"MDU6SXNzdWU2MzEyNTMxMzQ=","number":57706,"title":"\"updating number_of_replicas\" log messages for ILM-enabled but non-existent index","user":{"login":"pmuellr","id":25117,"node_id":"MDQ6VXNlcjI1MTE3","avatar_url":"https://avatars1.githubusercontent.com/u/25117?v=4","gravatar_id":"","url":"https://api.github.com/users/pmuellr","html_url":"https://github.com/pmuellr","followers_url":"https://api.github.com/users/pmuellr/followers","following_url":"https://api.github.com/users/pmuellr/following{/other_user}","gists_url":"https://api.github.com/users/pmuellr/gists{/gist_id}","starred_url":"https://api.github.com/users/pmuellr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pmuellr/subscriptions","organizations_url":"https://api.github.com/users/pmuellr/orgs","repos_url":"https://api.github.com/users/pmuellr/repos","events_url":"https://api.github.com/users/pmuellr/events{/privacy}","received_events_url":"https://api.github.com/users/pmuellr/received_events","type":"User","site_admin":false},"labels":[{"id":837246479,"node_id":"MDU6TGFiZWw4MzcyNDY0Nzk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Allocation","name":":Distributed/Allocation","color":"0e8a16","default":false,"description":"All issues relating to the decision making around placing a shard (both master logic & on the nodes)"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":1967496670,"node_id":"MDU6TGFiZWwxOTY3NDk2Njcw","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Distributed","name":"Team:Distributed","color":"fef2c0","default":false,"description":"Meta label for distributed team"}],"state":"closed","locked":false,"assignee":{"login":"henningandersen","id":33268011,"node_id":"MDQ6VXNlcjMzMjY4MDEx","avatar_url":"https://avatars2.githubusercontent.com/u/33268011?v=4","gravatar_id":"","url":"https://api.github.com/users/henningandersen","html_url":"https://github.com/henningandersen","followers_url":"https://api.github.com/users/henningandersen/followers","following_url":"https://api.github.com/users/henningandersen/following{/other_user}","gists_url":"https://api.github.com/users/henningandersen/gists{/gist_id}","starred_url":"https://api.github.com/users/henningandersen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henningandersen/subscriptions","organizations_url":"https://api.github.com/users/henningandersen/orgs","repos_url":"https://api.github.com/users/henningandersen/repos","events_url":"https://api.github.com/users/henningandersen/events{/privacy}","received_events_url":"https://api.github.com/users/henningandersen/received_events","type":"User","site_admin":false},"assignees":[{"login":"henningandersen","id":33268011,"node_id":"MDQ6VXNlcjMzMjY4MDEx","avatar_url":"https://avatars2.githubusercontent.com/u/33268011?v=4","gravatar_id":"","url":"https://api.github.com/users/henningandersen","html_url":"https://github.com/henningandersen","followers_url":"https://api.github.com/users/henningandersen/followers","following_url":"https://api.github.com/users/henningandersen/following{/other_user}","gists_url":"https://api.github.com/users/henningandersen/gists{/gist_id}","starred_url":"https://api.github.com/users/henningandersen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henningandersen/subscriptions","organizations_url":"https://api.github.com/users/henningandersen/orgs","repos_url":"https://api.github.com/users/henningandersen/repos","events_url":"https://api.github.com/users/henningandersen/events{/privacy}","received_events_url":"https://api.github.com/users/henningandersen/received_events","type":"User","site_admin":false}],"milestone":null,"comments":5,"created_at":"2020-06-05T01:52:15Z","updated_at":"2020-06-09T19:53:16Z","closed_at":"2020-06-09T19:53:16Z","author_association":"NONE","active_lock_reason":null,"body":"Starting in Kibana 7.8, we're creating a new index with an ILM policy associated with it.  We're seeing the following message logged every 10 minutes, which seems excessive, references a non-existent index, and it's not clear if there's some action that needs to be taken:\r\n\r\n```\r\n[o.e.c.r.a.AllocationService] updating number_of_replicas to [0] for indices [.kibana-event-log-7.8.0-000002]\r\n```\r\n\r\nA `cat/indices` only shows an index `.kibana-event-log-7.8.0-000001` - the `000002` version does not exist (AFAICT).\r\n\r\nSome info on our index / ILM:\r\n\r\n- the code to create the ILM policy and index template are here (hopefully it's easy to following; linked primarily just to show the JSON): https://github.com/elastic/kibana/blob/master/x-pack/plugins/event_log/server/es/documents.ts\r\n\r\n- the initial index is created empty with the following options:\r\n\r\n```\r\n{\r\n        aliases: {\r\n          \".kibana-event-log-7.8.0\": {\r\n            is_write_index: true,\r\n          },\r\n        },\r\n```\r\n\r\n- everything seems to be operating fine\r\n- there will be at least one document indexed into the index, shortly after it's created, and then in many cases won't have any documents indexed after that for some time - the messages start getting logged immediately after ES starts though\r\n\r\nThis issue was first posted in the Kibana repo: https://github.com/elastic/kibana/issues/68121","closed_by":{"login":"henningandersen","id":33268011,"node_id":"MDQ6VXNlcjMzMjY4MDEx","avatar_url":"https://avatars2.githubusercontent.com/u/33268011?v=4","gravatar_id":"","url":"https://api.github.com/users/henningandersen","html_url":"https://github.com/henningandersen","followers_url":"https://api.github.com/users/henningandersen/followers","following_url":"https://api.github.com/users/henningandersen/following{/other_user}","gists_url":"https://api.github.com/users/henningandersen/gists{/gist_id}","starred_url":"https://api.github.com/users/henningandersen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henningandersen/subscriptions","organizations_url":"https://api.github.com/users/henningandersen/orgs","repos_url":"https://api.github.com/users/henningandersen/repos","events_url":"https://api.github.com/users/henningandersen/events{/privacy}","received_events_url":"https://api.github.com/users/henningandersen/received_events","type":"User","site_admin":false},"performed_via_github_app":null}