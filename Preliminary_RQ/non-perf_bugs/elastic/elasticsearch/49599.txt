{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/49599","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49599/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49599/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49599/events","html_url":"https://github.com/elastic/elasticsearch/issues/49599","id":528764658,"node_id":"MDU6SXNzdWU1Mjg3NjQ2NTg=","number":49599,"title":"[downloads] elasticsearch-6.8.5.tar.gz incompatible with other versions","user":{"login":"missinglink","id":738069,"node_id":"MDQ6VXNlcjczODA2OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/738069?v=4","gravatar_id":"","url":"https://api.github.com/users/missinglink","html_url":"https://github.com/missinglink","followers_url":"https://api.github.com/users/missinglink/followers","following_url":"https://api.github.com/users/missinglink/following{/other_user}","gists_url":"https://api.github.com/users/missinglink/gists{/gist_id}","starred_url":"https://api.github.com/users/missinglink/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/missinglink/subscriptions","organizations_url":"https://api.github.com/users/missinglink/orgs","repos_url":"https://api.github.com/users/missinglink/repos","events_url":"https://api.github.com/users/missinglink/events{/privacy}","received_events_url":"https://api.github.com/users/missinglink/received_events","type":"User","site_admin":false},"labels":[{"id":106454670,"node_id":"MDU6TGFiZWwxMDY0NTQ2NzA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Build","name":":Delivery/Build","color":"0e8a16","default":false,"description":"Build or test infrastructure"},{"id":114977275,"node_id":"MDU6TGFiZWwxMTQ5NzcyNzU=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Packaging","name":":Delivery/Packaging","color":"0e8a16","default":false,"description":"RPM and deb packaging, tar and zip archives, shell and batch scripts"},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"},{"id":1620003210,"node_id":"MDU6TGFiZWwxNjIwMDAzMjEw","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v6.8.5","name":"v6.8.5","color":"dddddd","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2019-11-26T14:33:13Z","updated_at":"2020-11-11T21:47:20Z","closed_at":"2020-01-10T20:40:59Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Hi,\r\n\r\nYour current download of [elasticsearch-6.8.5.tar.gz](https://www.elastic.co/downloads/past-releases/elasticsearch-6-8-5) with the shasum of `a66773585c2195e22114922534f65069d669c774` has been generated in such a way that makes it incompatible with scripts which work with other versions in the 6 and 7 series.\r\n\r\nMore specifically it was previously possible to use the `--strip-components=1` argument for `tar` in order to remove the leading directory (which is versioned), an example of such a command would be:\r\n\r\n```bash\r\ncurl -Ls \"https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.8.5.tar.gz\" \\\r\n    | tar xvz --directory=/tmp/elasticsearch --strip-components=1;\r\n```\r\n\r\nYou can see in the output below that the `6.8.5` release has an inconsistency which wasn't present in the `6.8.4` release and is not present in the `7.4.2` release:\r\n\r\n**note the leading `./`**\r\n\r\n```bash\r\ntar tfz elasticsearch-6.8.4.tar.gz | grep 'elasticsearch-plugin$'\r\nelasticsearch-6.8.4/bin/elasticsearch-plugin\r\n\r\ntar tfz elasticsearch-6.8.5.tar.gz | grep 'elasticsearch-plugin$'\r\n./elasticsearch-6.8.5/bin/elasticsearch-plugin\r\n\r\ntar tfz elasticsearch-7.4.2-linux-x86_64.tar.gz | grep 'elasticsearch-plugin$'\r\nelasticsearch-7.4.2/bin/elasticsearch-plugin\r\n```\r\n\r\nI suspect you have made a change to your build script which is no longer setting the `-C, --directory=DIR` flag correctly.","closed_by":{"login":"missinglink","id":738069,"node_id":"MDQ6VXNlcjczODA2OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/738069?v=4","gravatar_id":"","url":"https://api.github.com/users/missinglink","html_url":"https://github.com/missinglink","followers_url":"https://api.github.com/users/missinglink/followers","following_url":"https://api.github.com/users/missinglink/following{/other_user}","gists_url":"https://api.github.com/users/missinglink/gists{/gist_id}","starred_url":"https://api.github.com/users/missinglink/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/missinglink/subscriptions","organizations_url":"https://api.github.com/users/missinglink/orgs","repos_url":"https://api.github.com/users/missinglink/repos","events_url":"https://api.github.com/users/missinglink/events{/privacy}","received_events_url":"https://api.github.com/users/missinglink/received_events","type":"User","site_admin":false},"performed_via_github_app":null}