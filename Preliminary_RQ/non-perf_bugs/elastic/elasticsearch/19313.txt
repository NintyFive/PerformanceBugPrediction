{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/19313","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19313/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19313/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19313/events","html_url":"https://github.com/elastic/elasticsearch/issues/19313","id":164394228,"node_id":"MDU6SXNzdWUxNjQzOTQyMjg=","number":19313,"title":"High CPU usage when idle ","user":{"login":"pip00","id":19933089,"node_id":"MDQ6VXNlcjE5OTMzMDg5","avatar_url":"https://avatars2.githubusercontent.com/u/19933089?v=4","gravatar_id":"","url":"https://api.github.com/users/pip00","html_url":"https://github.com/pip00","followers_url":"https://api.github.com/users/pip00/followers","following_url":"https://api.github.com/users/pip00/following{/other_user}","gists_url":"https://api.github.com/users/pip00/gists{/gist_id}","starred_url":"https://api.github.com/users/pip00/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pip00/subscriptions","organizations_url":"https://api.github.com/users/pip00/orgs","repos_url":"https://api.github.com/users/pip00/repos","events_url":"https://api.github.com/users/pip00/events{/privacy}","received_events_url":"https://api.github.com/users/pip00/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2016-07-07T20:00:29Z","updated_at":"2018-07-11T08:55:36Z","closed_at":"2016-07-07T20:04:19Z","author_association":"NONE","active_lock_reason":null,"body":"All of a sudden my ES data nodes started experiencing high CPU usage the cluster is completely idled nothing is being queried and Logstash is disabled at the moment. Any help would be appreciate it. I have attached the hot thread dump \n\n::: {elk}{-WMa7rZzTK-zmfOHen82yg}{}{:9300}{data=false, master=false}\n   Hot threads at 2016-07-07T15:36:28.156Z, interval=500ms, busiestThreads=3, ignoreIdleThreads=true:\n\n::: {es-1}{85Ud2FkPSS-aBJmVlv8OkA}{}{:9300}\n   Hot threads at 2016-07-07T15:36:32.992Z, interval=500ms, busiestThreads=3, ignoreIdleThreads=true:\n\n   96.2% (481.1ms out of 500ms) cpu usage by thread 'elasticsearch[es-1][management][T#4]'\n     9/10 snapshots sharing following 32 elements\n       java.io.FilePermission.init(FilePermission.java:203)\n       java.io.FilePermission.<init>(FilePermission.java:277)\n       java.lang.SecurityManager.checkRead(SecurityManager.java:888)\n       sun.nio.fs.UnixPath.checkRead(UnixPath.java:795)\n       sun.nio.fs.UnixFileAttributeViews$Basic.readAttributes(UnixFileAttributeViews.java:49)\n       sun.nio.fs.UnixFileSystemProvider.readAttributes(UnixFileSystemProvider.java:144)\n       sun.nio.fs.LinuxFileSystemProvider.readAttributes(LinuxFileSystemProvider.java:99)\n       java.nio.file.Files.readAttributes(Files.java:1737)\n       java.nio.file.Files.size(Files.java:2332)\n       org.apache.lucene.store.FSDirectory.fileLength(FSDirectory.java:210)\n       org.apache.lucene.store.FileSwitchDirectory.fileLength(FileSwitchDirectory.java:150)\n       org.apache.lucene.store.FilterDirectory.fileLength(FilterDirectory.java:67)\n       org.apache.lucene.store.FilterDirectory.fileLength(FilterDirectory.java:67)\n       org.elasticsearch.index.store.Store$StoreStatsCache.estimateSize(Store.java:1541)\n       org.elasticsearch.index.store.Store$StoreStatsCache.refresh(Store.java:1530)\n       org.elasticsearch.index.store.Store$StoreStatsCache.refresh(Store.java:1517)\n       org.elasticsearch.common.util.SingleObjectCache.getOrRefresh(SingleObjectCache.java:55)\n       org.elasticsearch.index.store.Store.stats(Store.java:293)\n       org.elasticsearch.index.shard.IndexShard.storeStats(IndexShard.java:702)\n       org.elasticsearch.action.admin.indices.stats.CommonStats.<init>(CommonStats.java:134)\n       org.elasticsearch.action.admin.indices.stats.TransportIndicesStatsAction.shardOperation(TransportIndicesStatsAction.java:165)\n       org.elasticsearch.action.admin.indices.stats.TransportIndicesStatsAction.shardOperation(TransportIndicesStatsAction.java:47)\n       org.elasticsearch.action.support.broadcast.node.TransportBroadcastByNodeAction$BroadcastByNodeTransportRequestHandler.onShardOperation(TransportBroadcastByNodeAction.java:420)\n       org.elasticsearch.action.support.broadcast.node.TransportBroadcastByNodeAction$BroadcastByNodeTransportRequestHandler.messageReceived(TransportBroadcastByNodeAction.java:399)\n       org.elasticsearch.action.support.broadcast.node.TransportBroadcastByNodeAction$BroadcastByNodeTransportRequestHandler.messageReceived(TransportBroadcastByNodeAction.java:386)\n       org.elasticsearch.transport.TransportRequestHandler.messageReceived(TransportRequestHandler.java:33)\n       org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:75)\n       org.elasticsearch.transport.TransportService$4.doRun(TransportService.java:376)\n       org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n       java.lang.Thread.run(Thread.java:745)\n     unique snapshot\n       sun.nio.fs.UnixNativeDispatcher.readdir(Native Method)\n       sun.nio.fs.UnixDirectoryStream$UnixDirectoryIterator.readNextEntry(UnixDirectoryStream.java:168)\n       sun.nio.fs.UnixDirectoryStream$UnixDirectoryIterator.hasNext(UnixDirectoryStream.java:201)\n       org.apache.lucene.store.FSDirectory.listAll(FSDirectory.java:192)\n       org.apache.lucene.store.FSDirectory.listAll(FSDirectory.java:203)\n       org.elasticsearch.index.store.FsDirectoryService$1.listAll(FsDirectoryService.java:127)\n       org.apache.lucene.store.FilterDirectory.listAll(FilterDirectory.java:57)\n       org.apache.lucene.store.FilterDirectory.listAll(FilterDirectory.java:57)\n       org.elasticsearch.index.store.Store$StoreStatsCache.estimateSize(Store.java:1538)\n       org.elasticsearch.index.store.Store$StoreStatsCache.refresh(Store.java:1530)\n       org.elasticsearch.index.store.Store$StoreStatsCache.refresh(Store.java:1517)\n       org.elasticsearch.common.util.SingleObjectCache.getOrRefresh(SingleObjectCache.java:55)\n       org.elasticsearch.index.store.Store.stats(Store.java:293)\n       org.elasticsearch.index.shard.IndexShard.storeStats(IndexShard.java:702)\n       org.elasticsearch.action.admin.indices.stats.CommonStats.<init>(CommonStats.java:134)\n       org.elasticsearch.action.admin.indices.stats.TransportIndicesStatsAction.shardOperation(TransportIndicesStatsAction.java:165)\n       org.elasticsearch.action.admin.indices.stats.TransportIndicesStatsAction.shardOperation(TransportIndicesStatsAction.java:47)\n       org.elasticsearch.action.support.broadcast.node.TransportBroadcastByNodeAction$BroadcastByNodeTransportRequestHandler.onShardOperation(TransportBroadcastByNodeAction.java:420)\n       org.elasticsearch.action.support.broadcast.node.TransportBroadcastByNodeAction$BroadcastByNodeTransportRequestHandler.messageReceived(TransportBroadcastByNodeAction.java:399)\n       org.elasticsearch.action.support.broadcast.node.TransportBroadcastByNodeAction$BroadcastByNodeTransportRequestHandler.messageReceived(TransportBroadcastByNodeAction.java:386)\n       org.elasticsearch.transport.TransportRequestHandler.messageReceived(TransportRequestHandler.java:33)\n       org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:75)\n       org.elasticsearch.transport.TransportService$4.doRun(TransportService.java:376)\n       org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n       java.lang.Thread.run(Thread.java:745)\n\n```\n6.0% (29.7ms out of 500ms) cpu usage by thread 'elasticsearch[es-1][bulk][T#4]'\n 2/10 snapshots sharing following 11 elements\n   org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnReplica(TransportShardBulkAction.java:68)\n   org.elasticsearch.action.support.replication.TransportReplicationAction$AsyncReplicaAction.doRun(TransportReplicationAction.java:392)\n   org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\n   org.elasticsearch.action.support.replication.TransportReplicationAction$ReplicaOperationTransportHandler.messageReceived(TransportReplicationAction.java:291)\n   org.elasticsearch.action.support.replication.TransportReplicationAction$ReplicaOperationTransportHandler.messageReceived(TransportReplicationAction.java:283)\n   org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:75)\n   org.elasticsearch.transport.netty.MessageChannelHandler$RequestHandler.doRun(MessageChannelHandler.java:300)\n   org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\n   java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n   java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n   java.lang.Thread.run(Thread.java:745)\n 7/10 snapshots sharing following 10 elements\n   sun.misc.Unsafe.park(Native Method)\n   java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n   java.util.concurrent.LinkedTransferQueue.awaitMatch(LinkedTransferQueue.java:737)\n   java.util.concurrent.LinkedTransferQueue.xfer(LinkedTransferQueue.java:647)\n   java.util.concurrent.LinkedTransferQueue.take(LinkedTransferQueue.java:1269)\n   org.elasticsearch.common.util.concurrent.SizeBlockingQueue.take(SizeBlockingQueue.java:161)\n   java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1067)\n   java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1127)\n   java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n   java.lang.Thread.run(Thread.java:745)\n unique snapshot\n   java.security.Permissions.implies(Permissions.java:178)\n   org.elasticsearch.bootstrap.ESPolicy.implies(ESPolicy.java:85)\n   java.security.ProtectionDomain.implies(ProtectionDomain.java:281)\n   java.security.AccessControlContext.checkPermission(AccessControlContext.java:450)\n   java.security.AccessController.checkPermission(AccessController.java:884)\n   java.lang.SecurityManager.checkPermission(SecurityManager.java:549)\n   java.lang.SecurityManager.checkWrite(SecurityManager.java:979)\n   sun.nio.fs.UnixChannelFactory.open(UnixChannelFactory.java:247)\n   sun.nio.fs.UnixChannelFactory.newFileChannel(UnixChannelFactory.java:136)\n   sun.nio.fs.UnixChannelFactory.newFileChannel(UnixChannelFactory.java:148)\n   sun.nio.fs.UnixFileSystemProvider.newFileChannel(UnixFileSystemProvider.java:175)\n   java.nio.channels.FileChannel.open(FileChannel.java:287)\n   java.nio.channels.FileChannel.open(FileChannel.java:335)\n   org.elasticsearch.index.translog.Checkpoint.write(Checkpoint.java:88)\n   org.elasticsearch.index.translog.TranslogWriter.writeCheckpoint(TranslogWriter.java:314)\n   org.elasticsearch.index.translog.TranslogWriter.checkpoint(TranslogWriter.java:304)\n   org.elasticsearch.index.translog.BufferingTranslogWriter.sync(BufferingTranslogWriter.java:132)\n   org.elasticsearch.index.translog.TranslogWriter.syncUpTo(TranslogWriter.java:288)\n   org.elasticsearch.index.translog.Translog.ensureSynced(Translog.java:672)\n   org.elasticsearch.index.shard.IndexShard.sync(IndexShard.java:1633)\n   org.elasticsearch.action.support.replication.TransportReplicationAction.processAfterWrite(TransportReplicationAction.java:1035)\n   org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:295)\n   org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:68)\n   org.elasticsearch.action.support.replication.TransportReplicationAction$PrimaryPhase.doRun(TransportReplicationAction.java:639)\n   org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\n   org.elasticsearch.action.support.replication.TransportReplicationAction$PrimaryOperationTransportHandler.messageReceived(TransportReplicationAction.java:279)\n   org.elasticsearch.action.support.replication.TransportReplicationAction$PrimaryOperationTransportHandler.messageReceived(TransportReplicationAction.java:271)\n   org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:75)\n   org.elasticsearch.transport.TransportService$4.doRun(TransportService.java:376)\n   org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\n   java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n   java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n   java.lang.Thread.run(Thread.java:745)\n\n4.9% (24.5ms out of 500ms) cpu usage by thread 'elasticsearch[es-1][bulk][T#3]'\n 2/10 snapshots sharing following 11 elements\n   org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnReplica(TransportShardBulkAction.java:68)\n   org.elasticsearch.action.support.replication.TransportReplicationAction$AsyncReplicaAction.doRun(TransportReplicationAction.java:392)\n   org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\n   org.elasticsearch.action.support.replication.TransportReplicationAction$ReplicaOperationTransportHandler.messageReceived(TransportReplicationAction.java:291)\n   org.elasticsearch.action.support.replication.TransportReplicationAction$ReplicaOperationTransportHandler.messageReceived(TransportReplicationAction.java:283)\n   org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:75)\n   org.elasticsearch.transport.netty.MessageChannelHandler$RequestHandler.doRun(MessageChannelHandler.java:300)\n   org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\n   java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n   java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n   java.lang.Thread.run(Thread.java:745)\n 8/10 snapshots sharing following 10 elements\n   sun.misc.Unsafe.park(Native Method)\n   java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n   java.util.concurrent.LinkedTransferQueue.awaitMatch(LinkedTransferQueue.java:737)\n   java.util.concurrent.LinkedTransferQueue.xfer(LinkedTransferQueue.java:647)\n   java.util.concurrent.LinkedTransferQueue.take(LinkedTransferQueue.java:1269)\n   org.elasticsearch.common.util.concurrent.SizeBlockingQueue.take(SizeBlockingQueue.java:161)\n   java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1067)\n   java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1127)\n   java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n   java.lang.Thread.run(Thread.java:745)\n```\n\n::: {es-3}{MjnDX2u9TUinY7Km-8cjMA}{}{:9300}\n   Hot threads at 2016-07-07T15:36:28.304Z, interval=500ms, busiestThreads=3, ignoreIdleThreads=true:\n\n   99.0% (494.9ms out of 500ms) cpu usage by thread 'elasticsearch[es-3][management][T#3]'\n     8/10 snapshots sharing following 30 elements\n       java.lang.SecurityManager.checkRead(SecurityManager.java:888)\n       sun.nio.fs.UnixPath.checkRead(UnixPath.java:795)\n       sun.nio.fs.UnixFileAttributeViews$Basic.readAttributes(UnixFileAttributeViews.java:49)\n       sun.nio.fs.UnixFileSystemProvider.readAttributes(UnixFileSystemProvider.java:144)\n       sun.nio.fs.LinuxFileSystemProvider.readAttributes(LinuxFileSystemProvider.java:99)\n       java.nio.file.Files.readAttributes(Files.java:1737)\n       java.nio.file.Files.size(Files.java:2332)\n       org.apache.lucene.store.FSDirectory.fileLength(FSDirectory.java:210)\n       org.apache.lucene.store.FileSwitchDirectory.fileLength(FileSwitchDirectory.java:150)\n       org.apache.lucene.store.FilterDirectory.fileLength(FilterDirectory.java:67)\n       org.apache.lucene.store.FilterDirectory.fileLength(FilterDirectory.java:67)\n       org.elasticsearch.index.store.Store$StoreStatsCache.estimateSize(Store.java:1541)\n       org.elasticsearch.index.store.Store$StoreStatsCache.refresh(Store.java:1530)\n       org.elasticsearch.index.store.Store$StoreStatsCache.refresh(Store.java:1517)\n       org.elasticsearch.common.util.SingleObjectCache.getOrRefresh(SingleObjectCache.java:55)\n       org.elasticsearch.index.store.Store.stats(Store.java:293)\n       org.elasticsearch.index.shard.IndexShard.storeStats(IndexShard.java:702)\n       org.elasticsearch.action.admin.indices.stats.CommonStats.<init>(CommonStats.java:134)\n       org.elasticsearch.action.admin.indices.stats.TransportIndicesStatsAction.shardOperation(TransportIndicesStatsAction.java:165)\n       org.elasticsearch.action.admin.indices.stats.TransportIndicesStatsAction.shardOperation(TransportIndicesStatsAction.java:47)\n       org.elasticsearch.action.support.broadcast.node.TransportBroadcastByNodeAction$BroadcastByNodeTransportRequestHandler.onShardOperation(TransportBroadcastByNodeAction.java:420)\n       org.elasticsearch.action.support.broadcast.node.TransportBroadcastByNodeAction$BroadcastByNodeTransportRequestHandler.messageReceived(TransportBroadcastByNodeAction.java:399)\n       org.elasticsearch.action.support.broadcast.node.TransportBroadcastByNodeAction$BroadcastByNodeTransportRequestHandler.messageReceived(TransportBroadcastByNodeAction.java:386)\n       org.elasticsearch.transport.TransportRequestHandler.messageReceived(TransportRequestHandler.java:33)\n       org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:75)\n       org.elasticsearch.transport.netty.MessageChannelHandler$RequestHandler.doRun(MessageChannelHandler.java:300)\n       org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n       java.lang.Thread.run(Thread.java:745)\n     2/10 snapshots sharing following 31 elements\n       sun.nio.fs.UnixNativeDispatcher.stat0(Native Method)\n       sun.nio.fs.UnixNativeDispatcher.stat(UnixNativeDispatcher.java:286)\n       sun.nio.fs.UnixFileAttributes.get(UnixFileAttributes.java:70)\n       sun.nio.fs.UnixFileAttributeViews$Basic.readAttributes(UnixFileAttributeViews.java:52)\n       sun.nio.fs.UnixFileSystemProvider.readAttributes(UnixFileSystemProvider.java:144)\n       sun.nio.fs.LinuxFileSystemProvider.readAttributes(LinuxFileSystemProvider.java:99)\n       java.nio.file.Files.readAttributes(Files.java:1737)\n       java.nio.file.Files.size(Files.java:2332)\n       org.apache.lucene.store.FSDirectory.fileLength(FSDirectory.java:210)\n       org.apache.lucene.store.FileSwitchDirectory.fileLength(FileSwitchDirectory.java:150)\n       org.apache.lucene.store.FilterDirectory.fileLength(FilterDirectory.java:67)\n       org.apache.lucene.store.FilterDirectory.fileLength(FilterDirectory.java:67)\n       org.elasticsearch.index.store.Store$StoreStatsCache.estimateSize(Store.java:1541)\n       org.elasticsearch.index.store.Store$StoreStatsCache.refresh(Store.java:1530)\n       org.elasticsearch.index.store.Store$StoreStatsCache.refresh(Store.java:1517)\n       org.elasticsearch.common.util.SingleObjectCache.getOrRefresh(SingleObjectCache.java:55)\n       org.elasticsearch.index.store.Store.stats(Store.java:293)\n       org.elasticsearch.index.shard.IndexShard.storeStats(IndexShard.java:702)\n       org.elasticsearch.action.admin.indices.stats.CommonStats.<init>(CommonStats.java:134)\n       org.elasticsearch.action.admin.indices.stats.TransportIndicesStatsAction.shardOperation(TransportIndicesStatsAction.java:165)\n       org.elasticsearch.action.admin.indices.stats.TransportIndicesStatsAction.shardOperation(TransportIndicesStatsAction.java:47)\n       org.elasticsearch.action.support.broadcast.node.TransportBroadcastByNodeAction$BroadcastByNodeTransportRequestHandler.onShardOperation(TransportBroadcastByNodeAction.java:420)\n       org.elasticsearch.action.support.broadcast.node.TransportBroadcastByNodeAction$BroadcastByNodeTransportRequestHandler.messageReceived(TransportBroadcastByNodeAction.java:399)\n       org.elasticsearch.action.support.broadcast.node.TransportBroadcastByNodeAction$BroadcastByNodeTransportRequestHandler.messageReceived(TransportBroadcastByNodeAction.java:386)\n       org.elasticsearch.transport.TransportRequestHandler.messageReceived(TransportRequestHandler.java:33)\n       org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:75)\n       org.elasticsearch.transport.netty.MessageChannelHandler$RequestHandler.doRun(MessageChannelHandler.java:300)\n       org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n       java.lang.Thread.run(Thread.java:745)\n\n::: {es-2}{qlxYBjbsSRC2okNPFV8baQ}{}{:9300}\n   Hot threads at 2016-07-07T15:36:33.434Z, interval=500ms, busiestThreads=3, ignoreIdleThreads=true:\n\n   97.5% (487.7ms out of 500ms) cpu usage by thread 'elasticsearch[es-2][management][T#2]'\n     6/10 snapshots sharing following 38 elements\n       java.io.UnixFileSystem.canonicalize0(Native Method)\n       java.io.UnixFileSystem.canonicalize(UnixFileSystem.java:172)\n       java.io.File.getCanonicalPath(File.java:618)\n       java.io.FilePermission$1.run(FilePermission.java:215)\n       java.io.FilePermission$1.run(FilePermission.java:203)\n       java.security.AccessController.doPrivileged(Native Method)\n       java.io.FilePermission.init(FilePermission.java:203)\n       java.io.FilePermission.<init>(FilePermission.java:277)\n       java.lang.SecurityManager.checkRead(SecurityManager.java:888)\n       sun.nio.fs.UnixPath.checkRead(UnixPath.java:795)\n       sun.nio.fs.UnixFileAttributeViews$Basic.readAttributes(UnixFileAttributeViews.java:49)\n       sun.nio.fs.UnixFileSystemProvider.readAttributes(UnixFileSystemProvider.java:144)\n       sun.nio.fs.LinuxFileSystemProvider.readAttributes(LinuxFileSystemProvider.java:99)\n       java.nio.file.Files.readAttributes(Files.java:1737)\n       java.nio.file.Files.size(Files.java:2332)\n       org.apache.lucene.store.FSDirectory.fileLength(FSDirectory.java:210)\n       org.apache.lucene.store.FileSwitchDirectory.fileLength(FileSwitchDirectory.java:150)\n       org.apache.lucene.store.FilterDirectory.fileLength(FilterDirectory.java:67)\n       org.apache.lucene.store.FilterDirectory.fileLength(FilterDirectory.java:67)\n       org.elasticsearch.index.store.Store$StoreStatsCache.estimateSize(Store.java:1541)\n       org.elasticsearch.index.store.Store$StoreStatsCache.refresh(Store.java:1530)\n       org.elasticsearch.index.store.Store$StoreStatsCache.refresh(Store.java:1517)\n       org.elasticsearch.common.util.SingleObjectCache.getOrRefresh(SingleObjectCache.java:55)\n       org.elasticsearch.index.store.Store.stats(Store.java:293)\n       org.elasticsearch.index.shard.IndexShard.storeStats(IndexShard.java:702)\n       org.elasticsearch.action.admin.indices.stats.CommonStats.<init>(CommonStats.java:134)\n       org.elasticsearch.action.admin.indices.stats.TransportIndicesStatsAction.shardOperation(TransportIndicesStatsAction.java:165)\n       org.elasticsearch.action.admin.indices.stats.TransportIndicesStatsAction.shardOperation(TransportIndicesStatsAction.java:47)\n       org.elasticsearch.action.support.broadcast.node.TransportBroadcastByNodeAction$BroadcastByNodeTransportRequestHandler.onShardOperation(TransportBroadcastByNodeAction.java:420)\n       org.elasticsearch.action.support.broadcast.node.TransportBroadcastByNodeAction$BroadcastByNodeTransportRequestHandler.messageReceived(TransportBroadcastByNodeAction.java:399)\n       org.elasticsearch.action.support.broadcast.node.TransportBroadcastByNodeAction$BroadcastByNodeTransportRequestHandler.messageReceived(TransportBroadcastByNodeAction.java:386)\n       org.elasticsearch.transport.TransportRequestHandler.messageReceived(TransportRequestHandler.java:33)\n       org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:75)\n       org.elasticsearch.transport.netty.MessageChannelHandler$RequestHandler.doRun(MessageChannelHandler.java:300)\n       org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n       java.lang.Thread.run(Thread.java:745)\n     4/10 snapshots sharing following 18 elements\n       org.elasticsearch.index.store.Store$StoreStatsCache.refresh(Store.java:1530)\n       org.elasticsearch.index.store.Store$StoreStatsCache.refresh(Store.java:1517)\n       org.elasticsearch.common.util.SingleObjectCache.getOrRefresh(SingleObjectCache.java:55)\n       org.elasticsearch.index.store.Store.stats(Store.java:293)\n       org.elasticsearch.index.shard.IndexShard.storeStats(IndexShard.java:702)\n       org.elasticsearch.action.admin.indices.stats.CommonStats.<init>(CommonStats.java:134)\n       org.elasticsearch.action.admin.indices.stats.TransportIndicesStatsAction.shardOperation(TransportIndicesStatsAction.java:165)\n       org.elasticsearch.action.admin.indices.stats.TransportIndicesStatsAction.shardOperation(TransportIndicesStatsAction.java:47)\n       org.elasticsearch.action.support.broadcast.node.TransportBroadcastByNodeAction$BroadcastByNodeTransportRequestHandler.onShardOperation(TransportBroadcastByNodeAction.java:420)\n       org.elasticsearch.action.support.broadcast.node.TransportBroadcastByNodeAction$BroadcastByNodeTransportRequestHandler.messageReceived(TransportBroadcastByNodeAction.java:399)\n       org.elasticsearch.action.support.broadcast.node.TransportBroadcastByNodeAction$BroadcastByNodeTransportRequestHandler.messageReceived(TransportBroadcastByNodeAction.java:386)\n       org.elasticsearch.transport.TransportRequestHandler.messageReceived(TransportRequestHandler.java:33)\n       org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:75)\n       org.elasticsearch.transport.netty.MessageChannelHandler$RequestHandler.doRun(MessageChannelHandler.java:300)\n       org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\n       java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n       java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n       java.lang.Thread.run(Thread.java:745)\n\n```\n8.3% (41.2ms out of 500ms) cpu usage by thread 'elasticsearch[es-2][refresh][T#1]'\n 2/10 snapshots sharing following 18 elements\n   org.apache.lucene.index.DocumentsWriter.doFlush(DocumentsWriter.java:503)\n   org.apache.lucene.index.DocumentsWriter.flushAllThreads(DocumentsWriter.java:615)\n   org.apache.lucene.index.IndexWriter.getReader(IndexWriter.java:424)\n   org.apache.lucene.index.StandardDirectoryReader.doOpenFromWriter(StandardDirectoryReader.java:286)\n   org.apache.lucene.index.StandardDirectoryReader.doOpenIfChanged(StandardDirectoryReader.java:261)\n   org.apache.lucene.index.StandardDirectoryReader.doOpenIfChanged(StandardDirectoryReader.java:251)\n   org.apache.lucene.index.FilterDirectoryReader.doOpenIfChanged(FilterDirectoryReader.java:104)\n   org.apache.lucene.index.DirectoryReader.openIfChanged(DirectoryReader.java:137)\n   org.apache.lucene.search.SearcherManager.refreshIfNeeded(SearcherManager.java:154)\n   org.apache.lucene.search.SearcherManager.refreshIfNeeded(SearcherManager.java:58)\n   org.apache.lucene.search.ReferenceManager.doMaybeRefresh(ReferenceManager.java:176)\n   org.apache.lucene.search.ReferenceManager.maybeRefreshBlocking(ReferenceManager.java:253)\n   org.elasticsearch.index.engine.InternalEngine.refresh(InternalEngine.java:672)\n   org.elasticsearch.index.shard.IndexShard.refresh(IndexShard.java:661)\n   org.elasticsearch.index.shard.IndexShard$EngineRefresher$1.run(IndexShard.java:1349)\n   java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n   java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n   java.lang.Thread.run(Thread.java:745)\n 5/10 snapshots sharing following 6 elements\n   java.util.concurrent.LinkedTransferQueue.xfer(LinkedTransferQueue.java:647)\n   java.util.concurrent.LinkedTransferQueue.poll(LinkedTransferQueue.java:1277)\n   java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1066)\n   java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1127)\n   java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n   java.lang.Thread.run(Thread.java:745)\n\n7.3% (36.5ms out of 500ms) cpu usage by thread 'elasticsearch[es-2][refresh][T#2]'\n 2/10 snapshots sharing following 15 elements\n   org.apache.lucene.index.StandardDirectoryReader.doOpenFromWriter(StandardDirectoryReader.java:286)\n   org.apache.lucene.index.StandardDirectoryReader.doOpenIfChanged(StandardDirectoryReader.java:261)\n   org.apache.lucene.index.StandardDirectoryReader.doOpenIfChanged(StandardDirectoryReader.java:251)\n   org.apache.lucene.index.FilterDirectoryReader.doOpenIfChanged(FilterDirectoryReader.java:104)\n   org.apache.lucene.index.DirectoryReader.openIfChanged(DirectoryReader.java:137)\n   org.apache.lucene.search.SearcherManager.refreshIfNeeded(SearcherManager.java:154)\n   org.apache.lucene.search.SearcherManager.refreshIfNeeded(SearcherManager.java:58)\n   org.apache.lucene.search.ReferenceManager.doMaybeRefresh(ReferenceManager.java:176)\n   org.apache.lucene.search.ReferenceManager.maybeRefreshBlocking(ReferenceManager.java:253)\n   org.elasticsearch.index.engine.InternalEngine.refresh(InternalEngine.java:672)\n   org.elasticsearch.index.shard.IndexShard.refresh(IndexShard.java:661)\n   org.elasticsearch.index.shard.IndexShard$EngineRefresher$1.run(IndexShard.java:1349)\n   java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n   java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n   java.lang.Thread.run(Thread.java:745)\n 5/10 snapshots sharing following 9 elements\n   sun.misc.Unsafe.park(Native Method)\n   java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n   java.util.concurrent.LinkedTransferQueue.awaitMatch(LinkedTransferQueue.java:734)\n   java.util.concurrent.LinkedTransferQueue.xfer(LinkedTransferQueue.java:647)\n   java.util.concurrent.LinkedTransferQueue.poll(LinkedTransferQueue.java:1277)\n   java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1066)\n   java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1127)\n   java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n   java.lang.Thread.run(Thread.java:745)\n```\n","closed_by":{"login":"abeyad","id":1631297,"node_id":"MDQ6VXNlcjE2MzEyOTc=","avatar_url":"https://avatars2.githubusercontent.com/u/1631297?v=4","gravatar_id":"","url":"https://api.github.com/users/abeyad","html_url":"https://github.com/abeyad","followers_url":"https://api.github.com/users/abeyad/followers","following_url":"https://api.github.com/users/abeyad/following{/other_user}","gists_url":"https://api.github.com/users/abeyad/gists{/gist_id}","starred_url":"https://api.github.com/users/abeyad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abeyad/subscriptions","organizations_url":"https://api.github.com/users/abeyad/orgs","repos_url":"https://api.github.com/users/abeyad/repos","events_url":"https://api.github.com/users/abeyad/events{/privacy}","received_events_url":"https://api.github.com/users/abeyad/received_events","type":"User","site_admin":false},"performed_via_github_app":null}