[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/720701","html_url":"https://github.com/elastic/elasticsearch/issues/645#issuecomment-720701","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/645","id":720701,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMDcwMQ==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2011-01-29T13:31:52Z","updated_at":"2011-01-29T13:31:52Z","author_association":"MEMBER","body":"The format in which the response will different because of the different highlighting implementation. I just pushed a fix for the fact that \"too wordish\" was returned.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/2971007","html_url":"https://github.com/elastic/elasticsearch/issues/645#issuecomment-2971007","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/645","id":2971007,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzEwMDc=","user":{"login":"weiweiwang","id":822994,"node_id":"MDQ6VXNlcjgyMjk5NA==","avatar_url":"https://avatars3.githubusercontent.com/u/822994?v=4","gravatar_id":"","url":"https://api.github.com/users/weiweiwang","html_url":"https://github.com/weiweiwang","followers_url":"https://api.github.com/users/weiweiwang/followers","following_url":"https://api.github.com/users/weiweiwang/following{/other_user}","gists_url":"https://api.github.com/users/weiweiwang/gists{/gist_id}","starred_url":"https://api.github.com/users/weiweiwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weiweiwang/subscriptions","organizations_url":"https://api.github.com/users/weiweiwang/orgs","repos_url":"https://api.github.com/users/weiweiwang/repos","events_url":"https://api.github.com/users/weiweiwang/events{/privacy}","received_events_url":"https://api.github.com/users/weiweiwang/received_events","type":"User","site_admin":false},"created_at":"2011-12-01T05:13:18Z","updated_at":"2011-12-01T05:13:18Z","author_association":"NONE","body":"in which version does this problem fixed? I still have this problem\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/6043647","html_url":"https://github.com/elastic/elasticsearch/issues/645#issuecomment-6043647","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/645","id":6043647,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDM2NDc=","user":{"login":"TwP","id":6323,"node_id":"MDQ6VXNlcjYzMjM=","avatar_url":"https://avatars0.githubusercontent.com/u/6323?v=4","gravatar_id":"","url":"https://api.github.com/users/TwP","html_url":"https://github.com/TwP","followers_url":"https://api.github.com/users/TwP/followers","following_url":"https://api.github.com/users/TwP/following{/other_user}","gists_url":"https://api.github.com/users/TwP/gists{/gist_id}","starred_url":"https://api.github.com/users/TwP/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TwP/subscriptions","organizations_url":"https://api.github.com/users/TwP/orgs","repos_url":"https://api.github.com/users/TwP/repos","events_url":"https://api.github.com/users/TwP/events{/privacy}","received_events_url":"https://api.github.com/users/TwP/received_events","type":"User","site_admin":false},"created_at":"2012-05-31T18:27:33Z","updated_at":"2012-05-31T18:27:33Z","author_association":"NONE","body":"@kimchy, this behavior is still present in ElasticSearch v0.19.3\n\nI ran @lukas-vlcek script above and the same erroneous behavior was observed. When `\"term_vector\" : \"with_positions_offsets\"` is used in the mapping the highlighted fields are concatenated into a single string. This behavior differs from the case where term vectors are not generated.\n\nI believe one bug was fixed. In the example above the extra tag string `\"two wordish\"` was included in the highlight results. This bug is fixed in the case where term vectors are **not** being used for highlighting.\n\nHowever, when term vectors are enabled and the fast-vector-highlighter is used, all the highlight tags are concatenated together into a single string.\n\n```\n{\n  \"took\" : 3,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 5,\n    \"successful\" : 5,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 1,\n    \"max_score\" : 0.16273327,\n    \"hits\" : [ {\n      \"_index\" : \"test\",\n      \"_type\" : \"one\",\n      \"_id\" : \"hx79P59ARRaOylM6yfYH2w\",\n      \"_score\" : 0.16273327, \"_source\" : { \"tags\" : [\"one word\",\"too wordish\",\"three words\"]},\n      \"highlight\" : {\n        \"tags\" : [ \"one <em>word</em> too wordish three <em>words</em>\" ]\n      }\n    } ]\n  }\n}\n```\n","performed_via_github_app":null}]