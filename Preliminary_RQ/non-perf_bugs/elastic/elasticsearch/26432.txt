{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/26432","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26432/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26432/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26432/events","html_url":"https://github.com/elastic/elasticsearch/issues/26432","id":253874328,"node_id":"MDU6SXNzdWUyNTM4NzQzMjg=","number":26432,"title":"Snapshot azure repository support for Azure China ","user":{"login":"ckalyanpur","id":5534986,"node_id":"MDQ6VXNlcjU1MzQ5ODY=","avatar_url":"https://avatars0.githubusercontent.com/u/5534986?v=4","gravatar_id":"","url":"https://api.github.com/users/ckalyanpur","html_url":"https://github.com/ckalyanpur","followers_url":"https://api.github.com/users/ckalyanpur/followers","following_url":"https://api.github.com/users/ckalyanpur/following{/other_user}","gists_url":"https://api.github.com/users/ckalyanpur/gists{/gist_id}","starred_url":"https://api.github.com/users/ckalyanpur/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ckalyanpur/subscriptions","organizations_url":"https://api.github.com/users/ckalyanpur/orgs","repos_url":"https://api.github.com/users/ckalyanpur/repos","events_url":"https://api.github.com/users/ckalyanpur/events{/privacy}","received_events_url":"https://api.github.com/users/ckalyanpur/received_events","type":"User","site_admin":false},"labels":[{"id":143077482,"node_id":"MDU6TGFiZWwxNDMwNzc0ODI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Snapshot/Restore","name":":Distributed/Snapshot/Restore","color":"0e8a16","default":false,"description":"Anything directly related to the `_snapshot/*` APIs"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-08-30T04:23:09Z","updated_at":"2018-02-14T13:52:49Z","closed_at":"2017-09-21T05:26:20Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the feature**:\r\n\r\nThe azure snapshot plugin currently takes a storage account name and key as an input and tries to retrieve the CloudStorageAccount by forming a connection string via the provided input. The domain in the default case is assumed to be '**core.windows.net**' which works for most of Microsoft's data centers. \r\n\r\nIn China, the domain is different, hence trying to store/restore a snapshot by using the storage account name and key alone as inputs does not work. The storage account access keys provide an EndpointSuffix attribute which indicates the domain to be used. As a feature, it will be nice to have an additional input attribute for the Endpoint Suffix with the default still being 'core.windows.net' if left unspecified.\r\n\r\nWe currently are running ES1.6 in china for our prod customers. In order to circumvent this, we had to include the EndpointSuffix portion as part of the account key input value since the connection string is formed through concatenation. It will be nice to have this as an explicit input.\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`): 1.6.2","closed_by":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"performed_via_github_app":null}