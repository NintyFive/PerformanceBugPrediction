[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/193934457","html_url":"https://github.com/elastic/elasticsearch/issues/17019#issuecomment-193934457","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17019","id":193934457,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MzkzNDQ1Nw==","user":{"login":"bobrik","id":89186,"node_id":"MDQ6VXNlcjg5MTg2","avatar_url":"https://avatars0.githubusercontent.com/u/89186?v=4","gravatar_id":"","url":"https://api.github.com/users/bobrik","html_url":"https://github.com/bobrik","followers_url":"https://api.github.com/users/bobrik/followers","following_url":"https://api.github.com/users/bobrik/following{/other_user}","gists_url":"https://api.github.com/users/bobrik/gists{/gist_id}","starred_url":"https://api.github.com/users/bobrik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bobrik/subscriptions","organizations_url":"https://api.github.com/users/bobrik/orgs","repos_url":"https://api.github.com/users/bobrik/repos","events_url":"https://api.github.com/users/bobrik/events{/privacy}","received_events_url":"https://api.github.com/users/bobrik/received_events","type":"User","site_admin":false},"created_at":"2016-03-08T19:31:30Z","updated_at":"2016-03-08T19:31:30Z","author_association":"CONTRIBUTOR","body":"Probably important detail: I optimized these indices to reduce segment count, maybe it removed `sync_id`.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/193938688","html_url":"https://github.com/elastic/elasticsearch/issues/17019#issuecomment-193938688","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17019","id":193938688,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MzkzODY4OA==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-03-08T19:45:38Z","updated_at":"2016-03-08T19:45:38Z","author_association":"MEMBER","body":"@bobrik I can confirm that force_merge/optimize removes the sync id marker, which is a big shame. \n\n@s1monw @mikemccand I think the easiest fix is to activate the shard after the force merge was done. Doing anything in the forceMerge logic in the engine will probably be tricky with concurrent writes. Do you agree/am I missing some lucene magic?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/193940531","html_url":"https://github.com/elastic/elasticsearch/issues/17019#issuecomment-193940531","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17019","id":193940531,"node_id":"MDEyOklzc3VlQ29tbWVudDE5Mzk0MDUzMQ==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-03-08T19:51:23Z","updated_at":"2016-03-08T19:51:23Z","author_association":"MEMBER","body":"or alternatively, maybe org.elasticsearch.index.engine.InternalEngine#tryRenewSyncCommit is what want use instead of flushing. It aquires a write lock, but I think it's fine for force merge... \n","performed_via_github_app":null}]