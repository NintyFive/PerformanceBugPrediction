[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/185926835","html_url":"https://github.com/elastic/elasticsearch/issues/16698#issuecomment-185926835","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16698","id":185926835,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NTkyNjgzNQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-02-18T21:19:34Z","updated_at":"2016-02-18T21:19:34Z","author_association":"CONTRIBUTOR","body":"Hi @paltryeffort \n\nWhen you delete all your data, you're also deleting the index template.  My suspicion is that logstash is taking time to re-add the index, which means that documents get indexed before the template has been received.  Could you rerun your tests and ensure that the template exists in Elasticsearch before you index any docs?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/189311224","html_url":"https://github.com/elastic/elasticsearch/issues/16698#issuecomment-189311224","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16698","id":189311224,"node_id":"MDEyOklzc3VlQ29tbWVudDE4OTMxMTIyNA==","user":{"login":"paltryeffort","id":5689739,"node_id":"MDQ6VXNlcjU2ODk3Mzk=","avatar_url":"https://avatars0.githubusercontent.com/u/5689739?v=4","gravatar_id":"","url":"https://api.github.com/users/paltryeffort","html_url":"https://github.com/paltryeffort","followers_url":"https://api.github.com/users/paltryeffort/followers","following_url":"https://api.github.com/users/paltryeffort/following{/other_user}","gists_url":"https://api.github.com/users/paltryeffort/gists{/gist_id}","starred_url":"https://api.github.com/users/paltryeffort/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paltryeffort/subscriptions","organizations_url":"https://api.github.com/users/paltryeffort/orgs","repos_url":"https://api.github.com/users/paltryeffort/repos","events_url":"https://api.github.com/users/paltryeffort/events{/privacy}","received_events_url":"https://api.github.com/users/paltryeffort/received_events","type":"User","site_admin":false},"created_at":"2016-02-26T14:52:07Z","updated_at":"2016-02-26T14:52:07Z","author_association":"NONE","body":"Hi @clintongormley \n\nYou are right. Logstash sends the template to elasticsearch and it works as expected. If I delete elasticsearch and restart a new one, Logstash never sends the template again or makes sure that the template is in place although it had to do a reconnect.\n\nI can reproduce this like this:\n- start logstash. It will print an error that it couldn't connect to elasticsearch but keeps running\n- start elasticsearch. Logstash automatically connects to elasticsearch once it's there and inserts data. The template never gets written!\n\nIt looks like the template only gets send **once** to elasticsearch and only if elasticsearch is reachable upon startup. I never observed that logstash would send or verify the template at any later stage.\n\nI am not sure if this is by design but I would expect logstash to make sure that the template is in place if it couldn't send it on startup and maybe also if the connection to elasticsearch dropped and it had to do a reconnect. I set template_overwrite to true but I guess this only has affect if the template on the logstash local disk changed but not on the elasticsearch side...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/189968616","html_url":"https://github.com/elastic/elasticsearch/issues/16698#issuecomment-189968616","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16698","id":189968616,"node_id":"MDEyOklzc3VlQ29tbWVudDE4OTk2ODYxNg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-02-28T23:32:50Z","updated_at":"2016-02-28T23:32:50Z","author_association":"CONTRIBUTOR","body":"@paltryeffort thanks for getting back with this info. I'd suggest bringing up this discussion on the logstash list instead.\n","performed_via_github_app":null}]