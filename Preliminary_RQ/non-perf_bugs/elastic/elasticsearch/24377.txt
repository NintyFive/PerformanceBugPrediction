{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/24377","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24377/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24377/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24377/events","html_url":"https://github.com/elastic/elasticsearch/issues/24377","id":224870911,"node_id":"MDU6SXNzdWUyMjQ4NzA5MTE=","number":24377,"title":"action.destructive_requires_name: true shows error on DELETE *, but deletes anyways","user":{"login":"pindarvanarman","id":19694707,"node_id":"MDQ6VXNlcjE5Njk0NzA3","avatar_url":"https://avatars2.githubusercontent.com/u/19694707?v=4","gravatar_id":"","url":"https://api.github.com/users/pindarvanarman","html_url":"https://github.com/pindarvanarman","followers_url":"https://api.github.com/users/pindarvanarman/followers","following_url":"https://api.github.com/users/pindarvanarman/following{/other_user}","gists_url":"https://api.github.com/users/pindarvanarman/gists{/gist_id}","starred_url":"https://api.github.com/users/pindarvanarman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pindarvanarman/subscriptions","organizations_url":"https://api.github.com/users/pindarvanarman/orgs","repos_url":"https://api.github.com/users/pindarvanarman/repos","events_url":"https://api.github.com/users/pindarvanarman/events{/privacy}","received_events_url":"https://api.github.com/users/pindarvanarman/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-04-27T18:21:27Z","updated_at":"2017-04-27T19:43:44Z","closed_at":"2017-04-27T19:43:44Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**:\r\n5.1.1\r\n\r\n**Plugins installed**: []\r\nXPACK\r\n\r\n**JVM version**:\r\n1.8.0\r\n\r\n**OS version**:\r\nCENTOS 7\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nConfiguration files show: \r\n    action.destructive_requires_name: true\r\n\r\nHowever if DELETE * is used, all indices are deleted.  This happens despite an error saying the operation is illegal.\r\n\r\n**Steps to reproduce**:\r\n\r\n    Set action.destructive_requires_name: true \r\n    \r\nDo:\r\n    POST /asdf/asdf/1\r\n    {\r\n        \"asdf\"  : 3\r\n    }\r\n\r\nUsing GET -cat/indices/as* will show you the indices.\r\n\r\nThen if you us DELETE as* you will get the following error\r\n\r\n    Error indicates acknowledgement of the feature\r\n    {\r\n       \"error\": {\r\n          \"root_cause\": [\r\n             {\r\n                \"type\": \"illegal_argument_exception\",\r\n                \"reason\": \"Wildcard expressions or all indices are not allowed\"\r\n             }\r\n          ],\r\n          \"type\": \"illegal_argument_exception\",\r\n          \"reason\": \"Wildcard expressions or all indices are not allowed\"\r\n       },\r\n       \"status\": 400\r\n    }\r\n    \r\nThat is expected behavior.  The problem is that if you check indices again with:\r\n\r\nGET -cat/indices/as* \r\n\r\nYou will notice the indices has been deleted.\r\n\r\nHave seen other people reports this problem but still looking for how it was resolved.\r\n\r\nThanks,\r\n","closed_by":{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false},"performed_via_github_app":null}