{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/4688","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4688/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4688/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4688/events","html_url":"https://github.com/elastic/elasticsearch/issues/4688","id":25403101,"node_id":"MDU6SXNzdWUyNTQwMzEwMQ==","number":4688,"title":"Failed to create Shard","user":{"login":"ArkeologeN","id":1951266,"node_id":"MDQ6VXNlcjE5NTEyNjY=","avatar_url":"https://avatars0.githubusercontent.com/u/1951266?v=4","gravatar_id":"","url":"https://api.github.com/users/ArkeologeN","html_url":"https://github.com/ArkeologeN","followers_url":"https://api.github.com/users/ArkeologeN/followers","following_url":"https://api.github.com/users/ArkeologeN/following{/other_user}","gists_url":"https://api.github.com/users/ArkeologeN/gists{/gist_id}","starred_url":"https://api.github.com/users/ArkeologeN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArkeologeN/subscriptions","organizations_url":"https://api.github.com/users/ArkeologeN/orgs","repos_url":"https://api.github.com/users/ArkeologeN/repos","events_url":"https://api.github.com/users/ArkeologeN/events{/privacy}","received_events_url":"https://api.github.com/users/ArkeologeN/received_events","type":"User","site_admin":false},"labels":[{"id":73544,"node_id":"MDU6TGFiZWw3MzU0NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Enon-issue","name":">non-issue","color":"cfcfcf","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2014-01-10T15:52:50Z","updated_at":"2014-01-11T16:57:15Z","closed_at":"2014-01-10T19:29:01Z","author_association":"NONE","active_lock_reason":null,"body":"We have the elasticsearch instance that doesn't have any production load yet. However, after indexing few records, we got following in logs:\n\n```\n[2014-01-09 15:14:30,583][WARN ][indices.cluster          ] [O'Hara, Miguel] [inbound][2] failed to create shard\norg.elasticsearch.index.shard.IndexShardCreationException: [inbound][2] failed to create shard\n        at org.elasticsearch.index.service.InternalIndexService.createShard(InternalIndexService.java:340)\n        at org.elasticsearch.indices.cluster.IndicesClusterStateService.applyInitializingShard(IndicesClusterStateService.java:567)\n        at org.elasticsearch.indices.cluster.IndicesClusterStateService.applyNewOrUpdatedShards(IndicesClusterStateService.java:532)\n        at org.elasticsearch.indices.cluster.IndicesClusterStateService.clusterChanged(IndicesClusterStateService.java:174)\n        at org.elasticsearch.cluster.service.InternalClusterService$2.run(InternalClusterService.java:321)\n        at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:95)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n        at java.lang.Thread.run(Thread.java:724)\nCaused by: java.io.IOException: directory '/usr/local/elasticsearch/data/kuew-search/nodes/0/indices/inbound/2/index' exists and is a directory, but cannot be listed: list() returned null\n        at org.apache.lucene.store.FSDirectory.listAll(FSDirectory.java:230)\n        at org.apache.lucene.store.FSDirectory.listAll(FSDirectory.java:241)\n        at org.apache.lucene.store.RateLimitedFSDirectory.listAll(RateLimitedFSDirectory.java:47)\n        at org.elasticsearch.index.store.Store.readChecksums(Store.java:189)\n        at org.elasticsearch.index.store.Store$StoreDirectory.<init>(Store.java:307)\n        at org.elasticsearch.index.store.Store.<init>(Store.java:82)\n        at sun.reflect.GeneratedConstructorAccessor13.newInstance(Unknown Source)\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:526)\n        at org.elasticsearch.common.inject.DefaultConstructionProxyFactory$1.newInstance(DefaultConstructionProxyFactory.java:54)\n        at org.elasticsearch.common.inject.ConstructorInjector.construct(ConstructorInjector.java:86)\n```\n\nWhile, in browser it says:\n\n```\n{\n  \"took\": 41,\n  \"timed_out\": false,\n  \"_shards\": {\n    \"total\": 5,\n    \"successful\": 1,\n    \"failed\": 4,\n    \"failures\": [\n      {\n        \"index\": \"inbound\",\n        \"shard\": 3,\n        \"status\": 500,\n        \"reason\": \"No active shards\"\n      },\n      {\n        \"index\": \"inbound\",\n        \"shard\": 4,\n        \"status\": 500,\n        \"reason\": \"No active shards\"\n      },\n      {\n        \"index\": \"inbound\",\n        \"shard\": 1,\n        \"status\": 500,\n        \"reason\": \"No active shards\"\n      },\n      {\n        \"index\": \"inbound\",\n        \"shard\": 2,\n        \"status\": 500,\n        \"reason\": \"No active shards\"\n      }\n    ]\n  },\n  \"hits\": {\n    \"total\": 49,\n    \"max_score\": 1,\n    \"hits\": []\n  }\n}\n```\n\n`PS:` we can see few records in `hits[]`.\n\nHelp appreciated.\n","closed_by":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"performed_via_github_app":null}