{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/32378","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32378/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32378/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32378/events","html_url":"https://github.com/elastic/elasticsearch/issues/32378","id":344573673,"node_id":"MDU6SXNzdWUzNDQ1NzM2NzM=","number":32378,"title":"][DEBUG][action.admin.cluster.health]  when i try to create a cluster on 2.4.0 ElasticSearch ","user":{"login":"Rostry","id":32547875,"node_id":"MDQ6VXNlcjMyNTQ3ODc1","avatar_url":"https://avatars3.githubusercontent.com/u/32547875?v=4","gravatar_id":"","url":"https://api.github.com/users/Rostry","html_url":"https://github.com/Rostry","followers_url":"https://api.github.com/users/Rostry/followers","following_url":"https://api.github.com/users/Rostry/following{/other_user}","gists_url":"https://api.github.com/users/Rostry/gists{/gist_id}","starred_url":"https://api.github.com/users/Rostry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rostry/subscriptions","organizations_url":"https://api.github.com/users/Rostry/orgs","repos_url":"https://api.github.com/users/Rostry/repos","events_url":"https://api.github.com/users/Rostry/events{/privacy}","received_events_url":"https://api.github.com/users/Rostry/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-07-25T19:20:31Z","updated_at":"2018-07-25T23:40:17Z","closed_at":"2018-07-25T20:20:57Z","author_association":"NONE","active_lock_reason":null,"body":"Hi i have an issue when i try to create a cluster with 2 nodes\r\n\r\nhere is the first configuration file:\r\n```\r\n# ======================== Elasticsearch Configuration =========================\r\n#\r\n# NOTE: Elasticsearch comes with reasonable defaults for most settings.\r\n#       Before you set out to tweak and tune the configuration, make sure you\r\n#       understand what are you trying to accomplish and the consequences.\r\n#\r\n# The primary way of configuring a node is via this file. This template lists\r\n# the most important settings you may want to configure for a production cluster.\r\n#\r\n# Please see the documentation for further information on configuration options:\r\n# <http://www.elastic.co/guide/en/elasticsearch/reference/current/setup-configuration.html>\r\n#\r\n# ---------------------------------- Cluster -----------------------------------\r\n#\r\n# Use a descriptive name for your cluster:\r\n#\r\n cluster.name: LiferayElasticSearch\r\n#\r\n# ------------------------------------ Node ------------------------------------\r\n#\r\n# Use a descriptive name for the node:\r\n#\r\n node.name: lisyx\r\n#\r\n# Add custom attributes to the node:\r\n#\r\n node.master: true\r\n node.data: true\r\n# node.rack: r1\r\n#\r\n# ----------------------------------- Paths ------------------------------------\r\n#\r\n# Path to directory where to store the data (separate multiple locations by comma):\r\n#\r\n# path.data: /path/to/data\r\n#\r\n# Path to log files:\r\n#\r\n# path.logs: /path/to/logs\r\n#\r\n# ----------------------------------- Memory -----------------------------------\r\n#\r\n# Lock the memory on startup:\r\n#\r\n# bootstrap.memory_lock: true\r\n#\r\n# Make sure that the `ES_HEAP_SIZE` environment variable is set to about half the memory\r\n# available on the system and that the owner of the process is allowed to use this limit.\r\n#\r\n# Elasticsearch performs poorly when the system is swapping the memory.\r\n#\r\n# ---------------------------------- Network -----------------------------------\r\n#\r\n# Set the bind address to a specific IP (IPv4 or IPv6):\r\n#\r\n network.host: 172.38.1.37\r\n#\r\n# Set a custom port for HTTP:\r\n#\r\n http.port: 9200\r\n#\r\n# For more information, see the documentation at:\r\n# <http://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html>\r\n#\r\n# --------------------------------- Discovery ----------------------------------\r\n#\r\n# Pass an initial list of hosts to perform discovery when new node is started:\r\n# The default list of hosts is [\"127.0.0.1\", \"[::1]\"]\r\n#\r\n discovery.zen.ping.unicast.hosts: [\"172.38.1.37\",\"172.38.3.167\"]\r\n#\r\n# Prevent the \"split brain\" by configuring the majority of nodes (total number of nodes / 2 + 1):\r\n#\r\n discovery.zen.minimum_master_nodes: 2\r\n#\r\n# For more information, see the documentation at:\r\n# <http://www.elastic.co/guide/en/elasticsearch/reference/current/modules-discovery.html>\r\n#\r\n# ---------------------------------- Gateway -----------------------------------\r\n#\r\n# Block initial recovery after a full cluster restart until N nodes are started:\r\n#\r\n# gateway.recover_after_nodes: 3\r\n#\r\n# For more information, see the documentation at:\r\n# <http://www.elastic.co/guide/en/elasticsearch/reference/current/modules-gateway.html>\r\n#\r\n# ---------------------------------- Various -----------------------------------\r\n#\r\n# Disable starting multiple nodes on a single system:\r\n#\r\n# node.max_local_storage_nodes: 1\r\n#\r\n# Require explicit names when deleting indices:\r\n#\r\n# action.destructive_requires_name: true\r\n\r\nand the second file configuration of the data node it¬¥s here.\r\n\r\n# ======================== Elasticsearch Configuration =========================\r\n#\r\n# NOTE: Elasticsearch comes with reasonable defaults for most settings.\r\n#       Before you set out to tweak and tune the configuration, make sure you\r\n#       understand what are you trying to accomplish and the consequences.\r\n#\r\n# The primary way of configuring a node is via this file. This template lists\r\n# the most important settings you may want to configure for a production cluster.\r\n#\r\n# Please see the documentation for further information on configuration options:\r\n# <http://www.elastic.co/guide/en/elasticsearch/reference/current/setup-configuration.html>\r\n#\r\n# ---------------------------------- Cluster -----------------------------------\r\n#\r\n# Use a descriptive name for your cluster:\r\n#\r\n cluster.name: LiferayElasticSearch\r\n#\r\n# ------------------------------------ Node ------------------------------------\r\n#\r\n# Use a descriptive name for the node:\r\n#\r\n node.name: lisyx-2\r\n#\r\n# Add custom attributes to the node:\r\n#\r\n# node.rack: r1\r\n#\r\n node.data: true\r\n# ----------------------------------- Paths ------------------------------------\r\n#\r\n# Path to directory where to store the data (separate multiple locations by comma):\r\n#\r\n# path.data: /path/to/data\r\n#\r\n# Path to log files:\r\n#\r\n# path.logs: /path/to/logs\r\n#\r\n# ----------------------------------- Memory -----------------------------------\r\n#\r\n# Lock the memory on startup:\r\n#\r\n# bootstrap.memory_lock: true\r\n#\r\n# Make sure that the `ES_HEAP_SIZE` environment variable is set to about half the memory\r\n# available on the system and that the owner of the process is allowed to use this limit.\r\n#\r\n# Elasticsearch performs poorly when the system is swapping the memory.\r\n#\r\n# ---------------------------------- Network -----------------------------------\r\n#\r\n# Set the bind address to a specific IP (IPv4 or IPv6):\r\n#\r\n network.host: 172.38.3.167\r\n#\r\n# Set a custom port for HTTP:\r\n#\r\n http.port: 9200\r\n#\r\n# For more information, see the documentation at:\r\n# <http://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html>\r\n#\r\n# --------------------------------- Discovery ----------------------------------\r\n#\r\n# Pass an initial list of hosts to perform discovery when new node is started:\r\n# The default list of hosts is [\"127.0.0.1\", \"[::1]\"]\r\n#\r\n discovery.zen.ping.unicast.hosts: [\"172.38.1.37\",\"172.38.3.167\"]\r\n#\r\n# Prevent the \"split brain\" by configuring the majority of nodes (total number of nodes / 2 + 1):\r\n#\r\n# discovery.zen.minimum_master_nodes: 3\r\n#\r\n# For more information, see the documentation at:\r\n# <http://www.elastic.co/guide/en/elasticsearch/reference/current/modules-discovery.html>\r\n#\r\n# ---------------------------------- Gateway -----------------------------------\r\n#\r\n# Block initial recovery after a full cluster restart until N nodes are started:\r\n#\r\n# gateway.recover_after_nodes: 3\r\n#\r\n# For more information, see the documentation at:\r\n# <http://www.elastic.co/guide/en/elasticsearch/reference/current/modules-gateway.html>\r\n#\r\n# ---------------------------------- Various -----------------------------------\r\n#\r\n# Disable starting multiple nodes on a single system:\r\n#\r\n# node.max_local_storage_nodes: 1\r\n#\r\n# Require explicit names when deleting indices:\r\n#\r\n# action.destructive_requires_name: true\r\n```\r\n\r\nCould you please help me i am getting this üëç \r\n\r\n\r\n\r\n[centos@ip-172-38-1-37 elasticsearch-2.4.0]$ curl -XGET '172.38.1.37:9200/_cluster/health?pretty'\r\n[2018-07-25 19:19:22,694][DEBUG][action.admin.cluster.health] [lisyx] no known master node, scheduling a retry\r\n[2018-07-25 19:19:30,095][DEBUG][action.admin.cluster.health] [lisyx] timed out while retrying [cluster:monitor/health] after failure (timeout [30s])\r\n[2018-07-25 19:19:30,096][WARN ][rest.suppressed          ] path: /_cluster/health, params: {pretty=}\r\nMasterNotDiscoveredException[null]\r\n        at org.elasticsearch.action.support.master.TransportMasterNodeAction$AsyncSingleAction$5.onTimeout(TransportMasterNodeAction.java:234)\r\n        at org.elasticsearch.cluster.ClusterStateObserver$ObserverClusterStateListener.onTimeout(ClusterStateObserver.java:236)\r\n        at org.elasticsearch.cluster.service.InternalClusterService$NotifyTimeout.run(InternalClusterService.java:804)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n        at java.lang.Thread.run(Thread.java:748)\r\n[2018-07-25 19:19:52,695][DEBUG][action.admin.cluster.health] [lisyx] timed out while retrying [cluster:monitor/health] after failure (timeout [30s])\r\n[2018-07-25 19:19:52,695][WARN ][rest.suppressed          ] path: /_cluster/health, params: {pretty=}\r\nMasterNotDiscoveredException[null]\r\n        at org.elasticsearch.action.support.master.TransportMasterNodeAction$AsyncSingleAction$5.onTimeout(TransportMasterNodeAction.java:234)\r\n        at org.elasticsearch.cluster.ClusterStateObserver$ObserverClusterStateListener.onTimeout(ClusterStateObserver.java:236)\r\n        at org.elasticsearch.cluster.service.InternalClusterService$NotifyTimeout.run(InternalClusterService.java:804)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n        at java.lang.Thread.run(Thread.java:748)\r\n{\r\n  \"error\" : {\r\n    \"root_cause\" : [ {\r\n      \"type\" : \"master_not_discovered_exception\",\r\n      \"reason\" : null\r\n    } ],\r\n    \"type\" : \"master_not_discovered_exception\",\r\n    \"reason\" : null\r\n  },\r\n  \"status\" : 503\r\n}\r\n\r\n\r\nThanks in advance for your kindly support!\r\n\r\n","closed_by":{"login":"tomcallahan","id":15988488,"node_id":"MDQ6VXNlcjE1OTg4NDg4","avatar_url":"https://avatars1.githubusercontent.com/u/15988488?v=4","gravatar_id":"","url":"https://api.github.com/users/tomcallahan","html_url":"https://github.com/tomcallahan","followers_url":"https://api.github.com/users/tomcallahan/followers","following_url":"https://api.github.com/users/tomcallahan/following{/other_user}","gists_url":"https://api.github.com/users/tomcallahan/gists{/gist_id}","starred_url":"https://api.github.com/users/tomcallahan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomcallahan/subscriptions","organizations_url":"https://api.github.com/users/tomcallahan/orgs","repos_url":"https://api.github.com/users/tomcallahan/repos","events_url":"https://api.github.com/users/tomcallahan/events{/privacy}","received_events_url":"https://api.github.com/users/tomcallahan/received_events","type":"User","site_admin":false},"performed_via_github_app":null}