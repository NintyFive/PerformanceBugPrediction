[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/351405267","html_url":"https://github.com/elastic/elasticsearch/issues/27773#issuecomment-351405267","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27773","id":351405267,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTQwNTI2Nw==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2017-12-13T14:23:05Z","updated_at":"2017-12-13T14:23:05Z","author_association":"CONTRIBUTOR","body":"This is not expected indeed, I mark this as a bug. Do you have a script that reproduces the issue all the time, or most of the time?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/351412655","html_url":"https://github.com/elastic/elasticsearch/issues/27773#issuecomment-351412655","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27773","id":351412655,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTQxMjY1NQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-12-13T14:49:20Z","updated_at":"2017-12-13T14:49:20Z","author_association":"MEMBER","body":"Are you sure, are there additional logs that would maybe explain the node stopped itself because of out of memory error, for example? Can you share more of the logs?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/351486846","html_url":"https://github.com/elastic/elasticsearch/issues/27773#issuecomment-351486846","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27773","id":351486846,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTQ4Njg0Ng==","user":{"login":"monotek","id":1069919,"node_id":"MDQ6VXNlcjEwNjk5MTk=","avatar_url":"https://avatars1.githubusercontent.com/u/1069919?v=4","gravatar_id":"","url":"https://api.github.com/users/monotek","html_url":"https://github.com/monotek","followers_url":"https://api.github.com/users/monotek/followers","following_url":"https://api.github.com/users/monotek/following{/other_user}","gists_url":"https://api.github.com/users/monotek/gists{/gist_id}","starred_url":"https://api.github.com/users/monotek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monotek/subscriptions","organizations_url":"https://api.github.com/users/monotek/orgs","repos_url":"https://api.github.com/users/monotek/repos","events_url":"https://api.github.com/users/monotek/events{/privacy}","received_events_url":"https://api.github.com/users/monotek/received_events","type":"User","site_admin":false},"created_at":"2017-12-13T18:53:56Z","updated_at":"2017-12-13T18:53:56Z","author_association":"NONE","body":"I'll look for the logs tomorrow. Not sure if still available or if I have to wait for it to happen again.\r\n\r\nUnfortunately I don't have a way to force it to happen. It's just from time when log amount is raised unexpectedly.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/351745665","html_url":"https://github.com/elastic/elasticsearch/issues/27773#issuecomment-351745665","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27773","id":351745665,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTc0NTY2NQ==","user":{"login":"monotek","id":1069919,"node_id":"MDQ6VXNlcjEwNjk5MTk=","avatar_url":"https://avatars1.githubusercontent.com/u/1069919?v=4","gravatar_id":"","url":"https://api.github.com/users/monotek","html_url":"https://github.com/monotek","followers_url":"https://api.github.com/users/monotek/followers","following_url":"https://api.github.com/users/monotek/following{/other_user}","gists_url":"https://api.github.com/users/monotek/gists{/gist_id}","starred_url":"https://api.github.com/users/monotek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monotek/subscriptions","organizations_url":"https://api.github.com/users/monotek/orgs","repos_url":"https://api.github.com/users/monotek/repos","events_url":"https://api.github.com/users/monotek/events{/privacy}","received_events_url":"https://api.github.com/users/monotek/received_events","type":"User","site_admin":false},"created_at":"2017-12-14T15:35:42Z","updated_at":"2017-12-14T15:35:42Z","author_association":"NONE","body":"This is the log, extracted from journald, showing everything from Node start to restart: https://gist.githubusercontent.com/monotek/038735443d335a118e7edc7569739bd9/raw/23058e40d2a4dd12e539af269add81cfef76396f/es","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/352639746","html_url":"https://github.com/elastic/elasticsearch/issues/27773#issuecomment-352639746","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27773","id":352639746,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjYzOTc0Ng==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-12-19T04:56:10Z","updated_at":"2017-12-19T04:56:10Z","author_association":"MEMBER","body":"Your JVM was killed with `SIGKILL`:\r\n\r\n```\r\nDec 12 12:37:25 server1.local systemd[1]: docker-qa.elasticsearch.001.service: main process exited, code=exited, status=137/n/a\r\n```\r\n\r\nI would check for your kernel logs for the OOM killer. I see that you have the heap set to 8g, how much physical memory is available to the OS?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/352657019","html_url":"https://github.com/elastic/elasticsearch/issues/27773#issuecomment-352657019","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27773","id":352657019,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjY1NzAxOQ==","user":{"login":"monotek","id":1069919,"node_id":"MDQ6VXNlcjEwNjk5MTk=","avatar_url":"https://avatars1.githubusercontent.com/u/1069919?v=4","gravatar_id":"","url":"https://api.github.com/users/monotek","html_url":"https://github.com/monotek","followers_url":"https://api.github.com/users/monotek/followers","following_url":"https://api.github.com/users/monotek/following{/other_user}","gists_url":"https://api.github.com/users/monotek/gists{/gist_id}","starred_url":"https://api.github.com/users/monotek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monotek/subscriptions","organizations_url":"https://api.github.com/users/monotek/orgs","repos_url":"https://api.github.com/users/monotek/repos","events_url":"https://api.github.com/users/monotek/events{/privacy}","received_events_url":"https://api.github.com/users/monotek/received_events","type":"User","site_admin":false},"created_at":"2017-12-19T07:00:21Z","updated_at":"2017-12-19T07:00:21Z","author_association":"NONE","body":"No, that's my manual restart. The machine has 64gb ram.\r\n\r\nIf oom killer would have had hit me I would not have to restart manually as the docker container would be restarted automatically by my systemd unit. \r\n\r\nThe docker container and the jvm process don't crash. They are still running so actually a crash and automatic restart would be better than a blocked cluster.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/352727330","html_url":"https://github.com/elastic/elasticsearch/issues/27773#issuecomment-352727330","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27773","id":352727330,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjcyNzMzMA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-12-19T11:49:24Z","updated_at":"2017-12-19T11:49:24Z","author_association":"MEMBER","body":"I do not think we are on the same page. You said that your “cluster is stopped”. I am interpreting this to mean that nodes are dying. I see zero evidence in your logs that this is the case, and now you’re telling us that you are restarting nodes so clearly I am not interpreting you correctly. Would you please explain what is happening, what do you mean by “blocked cluster”?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/352728908","html_url":"https://github.com/elastic/elasticsearch/issues/27773#issuecomment-352728908","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27773","id":352728908,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjcyODkwOA==","user":{"login":"monotek","id":1069919,"node_id":"MDQ6VXNlcjEwNjk5MTk=","avatar_url":"https://avatars1.githubusercontent.com/u/1069919?v=4","gravatar_id":"","url":"https://api.github.com/users/monotek","html_url":"https://github.com/monotek","followers_url":"https://api.github.com/users/monotek/followers","following_url":"https://api.github.com/users/monotek/following{/other_user}","gists_url":"https://api.github.com/users/monotek/gists{/gist_id}","starred_url":"https://api.github.com/users/monotek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monotek/subscriptions","organizations_url":"https://api.github.com/users/monotek/orgs","repos_url":"https://api.github.com/users/monotek/repos","events_url":"https://api.github.com/users/monotek/events{/privacy}","received_events_url":"https://api.github.com/users/monotek/received_events","type":"User","site_admin":false},"created_at":"2017-12-19T11:56:45Z","updated_at":"2017-12-19T11:56:45Z","author_association":"NONE","body":"I mean the cluster runs but does not accept inserting new logs.\r\nRestart of the cluster node which has the logs above solves the problem.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/352766941","html_url":"https://github.com/elastic/elasticsearch/issues/27773#issuecomment-352766941","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27773","id":352766941,"node_id":"MDEyOklzc3VlQ29tbWVudDM1Mjc2Njk0MQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-12-19T14:19:43Z","updated_at":"2017-12-19T14:19:56Z","author_association":"MEMBER","body":"Please upgrade to at least 5.6.4 (preferably 5.6.5), there are some bugs in the networking layer that lead to hung tasks that could potentially explain the behavior that you are describing here. At the least, I would like to rule this out as a possible cause.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/352768036","html_url":"https://github.com/elastic/elasticsearch/issues/27773#issuecomment-352768036","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27773","id":352768036,"node_id":"MDEyOklzc3VlQ29tbWVudDM1Mjc2ODAzNg==","user":{"login":"monotek","id":1069919,"node_id":"MDQ6VXNlcjEwNjk5MTk=","avatar_url":"https://avatars1.githubusercontent.com/u/1069919?v=4","gravatar_id":"","url":"https://api.github.com/users/monotek","html_url":"https://github.com/monotek","followers_url":"https://api.github.com/users/monotek/followers","following_url":"https://api.github.com/users/monotek/following{/other_user}","gists_url":"https://api.github.com/users/monotek/gists{/gist_id}","starred_url":"https://api.github.com/users/monotek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monotek/subscriptions","organizations_url":"https://api.github.com/users/monotek/orgs","repos_url":"https://api.github.com/users/monotek/repos","events_url":"https://api.github.com/users/monotek/events{/privacy}","received_events_url":"https://api.github.com/users/monotek/received_events","type":"User","site_admin":false},"created_at":"2017-12-19T14:22:41Z","updated_at":"2017-12-19T14:22:41Z","author_association":"NONE","body":"OK. But could take a while. I'm already kind of out of work this year.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/352772784","html_url":"https://github.com/elastic/elasticsearch/issues/27773#issuecomment-352772784","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27773","id":352772784,"node_id":"MDEyOklzc3VlQ29tbWVudDM1Mjc3Mjc4NA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-12-19T14:34:43Z","updated_at":"2017-12-19T14:34:43Z","author_association":"MEMBER","body":"Okay, I will close this issue. We can reopen if you report back that the issue persists after you upgrade.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/353011881","html_url":"https://github.com/elastic/elasticsearch/issues/27773#issuecomment-353011881","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27773","id":353011881,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzAxMTg4MQ==","user":{"login":"ilavender","id":3725133,"node_id":"MDQ6VXNlcjM3MjUxMzM=","avatar_url":"https://avatars3.githubusercontent.com/u/3725133?v=4","gravatar_id":"","url":"https://api.github.com/users/ilavender","html_url":"https://github.com/ilavender","followers_url":"https://api.github.com/users/ilavender/followers","following_url":"https://api.github.com/users/ilavender/following{/other_user}","gists_url":"https://api.github.com/users/ilavender/gists{/gist_id}","starred_url":"https://api.github.com/users/ilavender/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilavender/subscriptions","organizations_url":"https://api.github.com/users/ilavender/orgs","repos_url":"https://api.github.com/users/ilavender/repos","events_url":"https://api.github.com/users/ilavender/events{/privacy}","received_events_url":"https://api.github.com/users/ilavender/received_events","type":"User","site_admin":false},"created_at":"2017-12-20T09:31:42Z","updated_at":"2017-12-20T09:31:42Z","author_association":"NONE","body":"I'm experiencing same thing on 5.6.4\r\ntried thread_pool.bulk.queue_size: 1500 without success.\r\n\r\n`2017-12-20T09:30:36,614][ERROR][o.e.x.w.e.ExecutionService] [elasticsearch-logging-2] failed to delete triggered watch [ya_ykgCVSGOKZJjPdd8Rfg_elasticsearch_version_mismatch_6b058fee-353d-4ba6-bfde-471fafe98751-2017-12-20T09:20:35.295Z]\r\norg.elasticsearch.common.util.concurrent.EsRejectedExecutionException: rejected execution of org.elasticsearch.transport.TransportService$7@62ac02dc on EsThreadPoolExecutor[bulk, queue capacity = 1500, org.elasticsearch.common.util.concurrent.EsThreadPoolExecutor@7bc31748[Running, pool size = 4, active threads = 4, queued tasks = 1500, completed tasks = 2411]]` ","performed_via_github_app":null}]