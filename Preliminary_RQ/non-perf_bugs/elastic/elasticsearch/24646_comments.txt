[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/301088408","html_url":"https://github.com/elastic/elasticsearch/issues/24646#issuecomment-301088408","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24646","id":301088408,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTA4ODQwOA==","user":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"created_at":"2017-05-12T14:15:08Z","updated_at":"2017-05-12T14:15:08Z","author_association":"CONTRIBUTOR","body":"Related with examples of policy grant attempts: https://discuss.elastic.co/t/problem-with-python-scripting/75866","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/301102339","html_url":"https://github.com/elastic/elasticsearch/issues/24646#issuecomment-301102339","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24646","id":301102339,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTEwMjMzOQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-05-12T15:06:29Z","updated_at":"2017-05-12T15:09:24Z","author_association":"MEMBER","body":"This does not make sense (we grant read permissions to everything under plugins), and this does not reproduce for me (nor in our tests, of course). I think we need a more thorough reproduction.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/301168849","html_url":"https://github.com/elastic/elasticsearch/issues/24646#issuecomment-301168849","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24646","id":301168849,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTE2ODg0OQ==","user":{"login":"serj-p","id":2565455,"node_id":"MDQ6VXNlcjI1NjU0NTU=","avatar_url":"https://avatars0.githubusercontent.com/u/2565455?v=4","gravatar_id":"","url":"https://api.github.com/users/serj-p","html_url":"https://github.com/serj-p","followers_url":"https://api.github.com/users/serj-p/followers","following_url":"https://api.github.com/users/serj-p/following{/other_user}","gists_url":"https://api.github.com/users/serj-p/gists{/gist_id}","starred_url":"https://api.github.com/users/serj-p/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serj-p/subscriptions","organizations_url":"https://api.github.com/users/serj-p/orgs","repos_url":"https://api.github.com/users/serj-p/repos","events_url":"https://api.github.com/users/serj-p/events{/privacy}","received_events_url":"https://api.github.com/users/serj-p/received_events","type":"User","site_admin":false},"created_at":"2017-05-12T19:44:26Z","updated_at":"2017-05-12T19:44:26Z","author_association":"NONE","body":"@jasontedor I found what is causing the issue. As soon as I start using std python library it starts to fail. Elasticsearch 2.4 didn't behave like that, but I had security manager disabled.\r\n\r\nMinimal example to reproduce:\r\n```\r\ncurl -XPOST 127.0.0.1:9200/test_index/test_type -d '{\"test\":\"test\"}'\r\n\r\ncurl -XPOST 127.0.0.1:9200/_search -d '{\"aggs\": {\"test\":{\"scripted_metric\": {\"map_script\": {\"lang\": \"python\", \"inline\": \"lambda: 1\"}}}}}' --- works\r\n\r\ncurl -XPOST 127.0.0.1:9200/_search -d '{\"aggs\": {\"test\":{\"scripted_metric\": {\"map_script\": {\"lang\": \"python\", \"inline\": \"from collections import defaultdict;\"}}}}}' --- can't access jython-standalone-2.7.0.jar\r\n\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/301174876","html_url":"https://github.com/elastic/elasticsearch/issues/24646#issuecomment-301174876","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24646","id":301174876,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTE3NDg3Ng==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-05-12T20:13:32Z","updated_at":"2017-05-12T20:13:32Z","author_association":"MEMBER","body":"This indeed reproduces. Thank you, we will take a look.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/301471823","html_url":"https://github.com/elastic/elasticsearch/issues/24646#issuecomment-301471823","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24646","id":301471823,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTQ3MTgyMw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-05-15T13:17:28Z","updated_at":"2017-05-15T13:18:39Z","author_association":"MEMBER","body":"I spent some time looking into this. It looks like this plugin is a lacking a lot of permissions that would make this work due to the restrictions that we place on the script engine for security reasons. It will be difficult to track down exactly which permissions are needed to make this and other cases work without also introducing security issues.  I'll mark this as adopt-me in case anybody is motivated to fix it, but I must tell you that this plugin is deprecated and will be removed in 6.0.0, so it is quite likely that this will simply never be fixed.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/307508674","html_url":"https://github.com/elastic/elasticsearch/issues/24646#issuecomment-307508674","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24646","id":307508674,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNzUwODY3NA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-06-09T21:53:40Z","updated_at":"2017-06-09T21:53:40Z","author_association":"MEMBER","body":"I think we should close this. It's getting late in the 5.x development cycle for this to be picked up for a deprecated plugin. If someone disagrees, please comment or reopen.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/312697636","html_url":"https://github.com/elastic/elasticsearch/issues/24646#issuecomment-312697636","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24646","id":312697636,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjY5NzYzNg==","user":{"login":"SehgalDivij","id":17740040,"node_id":"MDQ6VXNlcjE3NzQwMDQw","avatar_url":"https://avatars3.githubusercontent.com/u/17740040?v=4","gravatar_id":"","url":"https://api.github.com/users/SehgalDivij","html_url":"https://github.com/SehgalDivij","followers_url":"https://api.github.com/users/SehgalDivij/followers","following_url":"https://api.github.com/users/SehgalDivij/following{/other_user}","gists_url":"https://api.github.com/users/SehgalDivij/gists{/gist_id}","starred_url":"https://api.github.com/users/SehgalDivij/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SehgalDivij/subscriptions","organizations_url":"https://api.github.com/users/SehgalDivij/orgs","repos_url":"https://api.github.com/users/SehgalDivij/repos","events_url":"https://api.github.com/users/SehgalDivij/events{/privacy}","received_events_url":"https://api.github.com/users/SehgalDivij/received_events","type":"User","site_admin":false},"created_at":"2017-07-03T17:17:52Z","updated_at":"2017-07-03T17:17:52Z","author_association":"NONE","body":"Lend me a hand here. I need to execute some super important python scripts but this gets in the way. Or suggest me the nearest alternative.(I'll try js in the meanwhile)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/312792516","html_url":"https://github.com/elastic/elasticsearch/issues/24646#issuecomment-312792516","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24646","id":312792516,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjc5MjUxNg==","user":{"login":"SehgalDivij","id":17740040,"node_id":"MDQ6VXNlcjE3NzQwMDQw","avatar_url":"https://avatars3.githubusercontent.com/u/17740040?v=4","gravatar_id":"","url":"https://api.github.com/users/SehgalDivij","html_url":"https://github.com/SehgalDivij","followers_url":"https://api.github.com/users/SehgalDivij/followers","following_url":"https://api.github.com/users/SehgalDivij/following{/other_user}","gists_url":"https://api.github.com/users/SehgalDivij/gists{/gist_id}","starred_url":"https://api.github.com/users/SehgalDivij/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SehgalDivij/subscriptions","organizations_url":"https://api.github.com/users/SehgalDivij/orgs","repos_url":"https://api.github.com/users/SehgalDivij/repos","events_url":"https://api.github.com/users/SehgalDivij/events{/privacy}","received_events_url":"https://api.github.com/users/SehgalDivij/received_events","type":"User","site_admin":false},"created_at":"2017-07-04T06:34:33Z","updated_at":"2017-07-04T06:34:33Z","author_association":"NONE","body":"Update. Seems like JS won't cut it. Reason: I cannot find enough learning material to get going with file based js scripts. ","performed_via_github_app":null}]