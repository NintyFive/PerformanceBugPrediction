{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/47038","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47038/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47038/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47038/events","html_url":"https://github.com/elastic/elasticsearch/issues/47038","id":497828608,"node_id":"MDU6SXNzdWU0OTc4Mjg2MDg=","number":47038,"title":"No easy way to fix incorrect persistent cluster setting","user":{"login":"sherry-ger","id":11432120,"node_id":"MDQ6VXNlcjExNDMyMTIw","avatar_url":"https://avatars2.githubusercontent.com/u/11432120?v=4","gravatar_id":"","url":"https://api.github.com/users/sherry-ger","html_url":"https://github.com/sherry-ger","followers_url":"https://api.github.com/users/sherry-ger/followers","following_url":"https://api.github.com/users/sherry-ger/following{/other_user}","gists_url":"https://api.github.com/users/sherry-ger/gists{/gist_id}","starred_url":"https://api.github.com/users/sherry-ger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sherry-ger/subscriptions","organizations_url":"https://api.github.com/users/sherry-ger/orgs","repos_url":"https://api.github.com/users/sherry-ger/repos","events_url":"https://api.github.com/users/sherry-ger/events{/privacy}","received_events_url":"https://api.github.com/users/sherry-ger/received_events","type":"User","site_admin":false},"labels":[{"id":881394071,"node_id":"MDU6TGFiZWw4ODEzOTQwNzE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Cluster%20Coordination","name":":Distributed/Cluster Coordination","color":"0e8a16","default":false,"description":"Cluster formation and cluster state publication, including cluster membership and fault detection."},{"id":111053151,"node_id":"MDU6TGFiZWwxMTEwNTMxNTE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/resiliency","name":"resiliency","color":"009800","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2019-09-24T17:36:23Z","updated_at":"2020-02-05T14:59:08Z","closed_at":"2020-02-05T14:59:08Z","author_association":"NONE","active_lock_reason":null,"body":"<!-- Bug report -->\r\n**Elasticsearch version** (`bin/elasticsearch --version`):\r\n7.3.0\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version** (`java -version`):\r\n\r\n**OS version** (`uname -a` if on a Unix-like system):\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\nWhile working to consolidate monitoring of the clusters, we applied the following dynamic setting to the cluster persistent settings `xpack.monitoring.exporters.cloud_monitoring.host`.  Unfortunately, there was a mistake in the host value as we included a `/` at the end.  For example, \r\n`https://myhost:9243/`\r\n\r\nThe command was accepted and applied by the cluster.  A bit later, the cluster became unresponsive.  Upon investigation, we saw the following error message in the log:\r\n\r\n```\r\norg.elasticsearch.common.settings.SettingsException: [xpack.monitoring.exporters.cloud_monitoring.host] invalid host: [https://myhost:9243/]\r\n```\r\n\r\nThree issues here:\r\n1. The setting was accepted by elasticsearch as valid when it is not\r\n2. The cluster became unresponsive\r\n3. There is not an easy way to fix the issue. (In the end, we were able to update the cluster state file via hex editor.)\r\n\r\n**Steps to reproduce**:\r\n\r\n1. Update cluster persistent setting `xpack.monitoring.exporters.cloud_monitoring.host`\r\n2. Set the value to `https://myhost:9243/` Please note `/` at the end\r\n3. Observe the setting is accepted as valid\r\n4. Cluster become unresponsive\r\n\r\n**Provide logs (if relevant)**:\r\n\r\n","closed_by":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"performed_via_github_app":null}