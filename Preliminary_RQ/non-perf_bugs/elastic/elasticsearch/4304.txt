{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/4304","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4304/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4304/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4304/events","html_url":"https://github.com/elastic/elasticsearch/issues/4304","id":23514598,"node_id":"MDU6SXNzdWUyMzUxNDU5OA==","number":4304,"title":"Corrupt ElasticSearch index - why the index won't restart?","user":{"login":"HenleyChiu","id":788695,"node_id":"MDQ6VXNlcjc4ODY5NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/788695?v=4","gravatar_id":"","url":"https://api.github.com/users/HenleyChiu","html_url":"https://github.com/HenleyChiu","followers_url":"https://api.github.com/users/HenleyChiu/followers","following_url":"https://api.github.com/users/HenleyChiu/following{/other_user}","gists_url":"https://api.github.com/users/HenleyChiu/gists{/gist_id}","starred_url":"https://api.github.com/users/HenleyChiu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HenleyChiu/subscriptions","organizations_url":"https://api.github.com/users/HenleyChiu/orgs","repos_url":"https://api.github.com/users/HenleyChiu/repos","events_url":"https://api.github.com/users/HenleyChiu/events{/privacy}","received_events_url":"https://api.github.com/users/HenleyChiu/received_events","type":"User","site_admin":false},"labels":[{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2013-11-30T03:27:35Z","updated_at":"2014-10-17T09:17:34Z","closed_at":"2014-10-17T09:17:34Z","author_association":"NONE","active_lock_reason":null,"body":"I had to restart my ElasticSearch instance, and when it tried to restart I see these errors. I have 3 indices, and 2 of them were able to restart properly, but the last one, which has 5 shards, only 1 of the shard was able to recover.\n\nI see these errors in the logs.\n\nWhat could be wrong? Is this a corrupt index?\n\nCaused by: java.io.IOException: Input/output error: NIOFSIndexInput(path=\"/home/sshadmin/elasticsearch-0.90.2/data/buzzsumo/nodes/0/indices/articles/4/index/_1nmus_es090_0.blm\")\n        at org.apache.lucene.store.NIOFSDirectory$NIOFSIndexInput.readInternal(NIOFSDirectory.java:191)\n        at org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:272)\n        at org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:51)\n        at org.apache.lucene.store.DataInput.readInt(DataInput.java:84)\n        at org.apache.lucene.store.BufferedIndexInput.readInt(BufferedIndexInput.java:181)\n        at org.apache.lucene.store.DataInput.readLong(DataInput.java:131)\n        at org.apache.lucene.store.BufferedIndexInput.readLong(BufferedIndexInput.java:194)\n        at org.elasticsearch.index.codec.postingsformat.BloomFilter.deserialize(BloomFilter.java:160)\n        at org.elasticsearch.index.codec.postingsformat.BloomFilterPostingsFormat$BloomFilteredFieldsProducer.<init>(BloomFilterPostingsFormat.java:136)\n        at org.elasticsearch.index.codec.postingsformat.BloomFilterPostingsFormat.fieldsProducer(BloomFilterPostingsFormat.java:100)\n        at org.elasticsearch.index.codec.postingsformat.ElasticSearch090PostingsFormat.fieldsProducer(ElasticSearch090PostingsFormat.java:81)\n        at org.apache.lucene.codecs.perfield.PerFieldPostingsFormat$FieldsReader.<init>(PerFieldPostingsFormat.java:194)\n        at org.apache.lucene.codecs.perfield.PerFieldPostingsFormat.fieldsProducer(PerFieldPostingsFormat.java:233)\n        at org.apache.lucene.index.SegmentCoreReaders.<init>(SegmentCoreReaders.java:127)\n        at org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:56)\n        at org.apache.lucene.index.ReadersAndLiveDocs.getReader(ReadersAndLiveDocs.java:121)\n        at org.apache.lucene.index.ReadersAndLiveDocs.getReadOnlyClone(ReadersAndLiveDocs.java:218)\n        at org.apache.lucene.index.StandardDirectoryReader.open(StandardDirectoryReader.java:100)\n        at org.apache.lucene.index.IndexWriter.getReader(IndexWriter.java:377)\n        at org.apache.lucene.index.DirectoryReader.open(DirectoryReader.java:111)\n        at org.apache.lucene.search.SearcherManager.<init>(SearcherManager.java:89)\n        at org.elasticsearch.index.engine.robin.RobinEngine.buildSearchManager(RobinEngine.java:1427)\n        at org.elasticsearch.index.engine.robin.RobinEngine.start(RobinEngine.java:275)\n        ... 6 more\n    Caused by: java.io.IOException: Input/output error\n        at sun.nio.ch.FileDispatcherImpl.pread0(Native Method)\n        at sun.nio.ch.FileDispatcherImpl.pread(Unknown Source)\n        at sun.nio.ch.IOUtil.readIntoNativeBuffer(Unknown Source)\n        at sun.nio.ch.IOUtil.read(Unknown Source)\n        at sun.nio.ch.FileChannelImpl.read(Unknown Source)\n        at org.apache.lucene.store.NIOFSDirectory$NIOFSIndexInput.readInternal(NIOFSDirectory.java:176)\n        ... 28 more\n    [2013-11-29 22:23:59,788][WARN ][indices.memory           ] [BuzzSumo Search 1] failed to set shard [articles][4] index buffer to [59.4mb]\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}