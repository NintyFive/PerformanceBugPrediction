{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/8693","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8693/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8693/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8693/events","html_url":"https://github.com/elastic/elasticsearch/issues/8693","id":50318581,"node_id":"MDU6SXNzdWU1MDMxODU4MQ==","number":8693,"title":"Improve fielddata mappings","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"labels":[{"id":141145460,"node_id":"MDU6TGFiZWwxNDExNDU0NjA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Mapping","name":":Search/Mapping","color":"0e8a16","default":false,"description":"How fields should be indexed"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":92913658,"node_id":"MDU6TGFiZWw5MjkxMzY1OA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/blocker","name":"blocker","color":"e11d21","default":false,"description":null},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":18,"created_at":"2014-11-27T19:17:03Z","updated_at":"2015-08-13T13:44:32Z","closed_at":"2015-08-10T10:44:43Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Currently, the settings for fielddata and doc_values is quite confusing. It would be nice to make it easier to understand.  For non-analyzed fields, these are the questions which need answering:\n1. Should fielddata be written to disk at index time?\n2. Should fielddata be available at search time, from disk, or in memory?\n3. If in memory, should fielddata be loaded eagerly or lazily?\n4. Regardless of disk or memory, should global ordinals be built eagerly or lazily?\n\nThis could be expressed as:\n\n```\n\"fielddata\": {\n  \"index_format\":    \"disk | disabled\",\n  \"search_format\":   \"disk | memory | eager_memory | disabled\",\n  \"global_ordinals\": \"lazy | eager\"\n}\n```\n\nIn the same way as we can use `analyzer` to set both `index_analyzer` and `search_analyzer`,  this could be condensed to:\n\n```\n\"fielddata\": {\n  \"format\":          \"disk | memory | eager_memory | disabled\",\n  \"global_ordinals\": \"lazy | eager\"\n}\n```\n\nAnalyzed string fields can't be written to disk, but they can support the `fst` format, so they would accept:\n\n```\n\"fielddata\": {\n  \"format\":          \"memory | eager_memory | fst | eager_fst | disabled\",\n  \"global_ordinals\": \"lazy | eager\"\n}\n```\n\nWe could possibly even support a very simple format for setting the fielddata format:\n\n```\n\"fielddata\": \"disk | memory | eager_memory | disabled\"            # not_analyzed\n\"fielddata\": \"memory | eager_memory | fst | eager_fst | disabled\" # analyzed\n```\n\n... which would set `global_ordinals` to `lazy``\n\nRegardless of which format is used to set fielddata, the mappings would be converted to the full `index_format`, `search_format`, `global_ordinals` layout.\n\n**Question:** Should `index_format` and `search_format` instead by `store_format` and `load_format`?\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}