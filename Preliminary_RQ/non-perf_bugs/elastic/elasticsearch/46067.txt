{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/46067","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46067/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46067/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46067/events","html_url":"https://github.com/elastic/elasticsearch/issues/46067","id":486299928,"node_id":"MDU6SXNzdWU0ODYyOTk5Mjg=","number":46067,"title":"EmailSslTests failures","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"labels":[{"id":912838879,"node_id":"MDU6TGFiZWw5MTI4Mzg4Nzk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Security/Security","name":":Security/Security","color":"0e8a16","default":false,"description":"Security issues without another label"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"assignees":[{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2019-08-28T10:43:46Z","updated_at":"2019-09-10T11:38:36Z","closed_at":"2019-09-10T11:38:36Z","author_association":"MEMBER","active_lock_reason":null,"body":"Some of the tests in EmailSslTests have failed twice in the last two days with the same error:\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.x+matrix-java-periodic/ES_BUILD_JAVA=openjdk12,ES_RUNTIME_JAVA=java8fips,nodes=general-purpose/171/\r\n\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.x+matrix-java-periodic/ES_BUILD_JAVA=openjdk12,ES_RUNTIME_JAVA=java8fips,nodes=general-purpose/170\r\n\r\n\r\n\r\n```\r\nTests with failures:\r\n- org.elasticsearch.xpack.watcher.actions.email.EmailSslTests.testCanSendMessageToSmtpServerByDisablingVerification\r\n- org.elasticsearch.xpack.watcher.actions.email.EmailSslTests.testFailureSendingMessageToSmtpServerWithUntrustedCertificateAuthority\r\n- org.elasticsearch.xpack.watcher.actions.email.EmailSslTests.testCanSendMessageToSmtpServerUsingTrustStore\r\n```\r\n\r\n```\r\nREPRODUCE WITH: ./gradlew :x-pack:plugin:watcher:test --tests \"org.elasticsearch.xpack.watcher.actions.email.EmailSslTests.testFailureSendingMessageToSmtpServerWithUntrustedCertificateAuthority\" -Dtests.seed=A1B1C9850FA48B30 -Dtests.security.manager=true -Dtests.locale=de -Dtests.timezone=Africa/Luanda -Dcompiler.java=12 -Druntime.java=8FIPS -Djavax.net.ssl.keyStorePassword=password -Djavax.net.ssl.trustStorePassword=password\r\n07:52:06   2> REPRODUCE WITH: ./gradlew :x-pack:plugin:watcher:test --tests \r\n```\r\n\r\n```\r\n07:52:06 org.elasticsearch.xpack.watcher.actions.email.EmailSslTests > testFailureSendingMessageToSmtpServerWithUntrustedCertificateAuthority FAILED\r\n07:52:06     java.lang.IllegalArgumentException: unknown object in getInstance: org.bouncycastle.asn1.ASN1Integer\r\n07:52:06         at org.bouncycastle.asn1.ASN1Sequence.getInstance(Unknown Source)\r\n07:52:06         at org.bouncycastle.asn1.bc.ObjectStore.<init>(Unknown Source)\r\n07:52:06         at org.bouncycastle.asn1.bc.ObjectStore.getInstance(Unknown Source)\r\n07:52:06         at org.bouncycastle.jcajce.provider.ProvBCFKS$BCFIPSKeyStoreSpi.engineLoad(Unknown Source)\r\n07:52:06         at java.security.KeyStore.load(KeyStore.java:1445)\r\n07:52:06         at org.elasticsearch.xpack.watcher.actions.email.EmailSslTests.startSmtpServer(EmailSslTests.java:56)\r\n07:52:06 \r\n07:52:06     java.lang.NullPointerException\r\n07:52:06         at org.elasticsearch.xpack.watcher.actions.email.EmailSslTests.stopSmtpServer(EmailSslTests.java:64)\r\n```\r\n\r\n```\r\n07:52:06 org.elasticsearch.xpack.watcher.actions.email.EmailSslTests > testCanSendMessageToSmtpServerByDisablingVerification FAILED\r\n07:52:06     java.lang.IllegalArgumentException: unknown object in getInstance: org.bouncycastle.asn1.ASN1Integer\r\n07:52:06         at org.bouncycastle.asn1.ASN1Sequence.getInstance(Unknown Source)\r\n07:52:06         at org.bouncycastle.asn1.bc.ObjectStore.<init>(Unknown Source)\r\n07:52:06         at org.bouncycastle.asn1.bc.ObjectStore.getInstance(Unknown Source)\r\n07:52:06         at org.bouncycastle.jcajce.provider.ProvBCFKS$BCFIPSKeyStoreSpi.engineLoad(Unknown Source)\r\n07:52:06         at java.security.KeyStore.load(KeyStore.java:1445)\r\n07:52:06         at org.elasticsearch.xpack.watcher.actions.email.EmailSslTests.startSmtpServer(EmailSslTests.java:56)\r\n07:52:06 \r\n07:52:06     java.lang.NullPointerException\r\n07:52:06         at org.elasticsearch.xpack.watcher.actions.email.EmailSslTests.stopSmtpServer(EmailSslTests.java:64)\r\n\r\n```\r\n","closed_by":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"performed_via_github_app":null}