{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/21785","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21785/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21785/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21785/events","html_url":"https://github.com/elastic/elasticsearch/issues/21785","id":191563378,"node_id":"MDU6SXNzdWUxOTE1NjMzNzg=","number":21785,"title":"Collapse results around a field value","user":{"login":"paullovessearch","id":1406946,"node_id":"MDQ6VXNlcjE0MDY5NDY=","avatar_url":"https://avatars3.githubusercontent.com/u/1406946?v=4","gravatar_id":"","url":"https://api.github.com/users/paullovessearch","html_url":"https://github.com/paullovessearch","followers_url":"https://api.github.com/users/paullovessearch/followers","following_url":"https://api.github.com/users/paullovessearch/following{/other_user}","gists_url":"https://api.github.com/users/paullovessearch/gists{/gist_id}","starred_url":"https://api.github.com/users/paullovessearch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paullovessearch/subscriptions","organizations_url":"https://api.github.com/users/paullovessearch/orgs","repos_url":"https://api.github.com/users/paullovessearch/repos","events_url":"https://api.github.com/users/paullovessearch/events{/privacy}","received_events_url":"https://api.github.com/users/paullovessearch/received_events","type":"User","site_admin":false},"labels":[{"id":141141324,"node_id":"MDU6TGFiZWwxNDExNDEzMjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Analytics/Aggregations","name":":Analytics/Aggregations","color":"0e8a16","default":false,"description":"Aggregations"},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":21,"created_at":"2016-11-24T16:52:12Z","updated_at":"2016-11-28T10:31:19Z","closed_at":"2016-11-28T10:31:19Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\nIf you are filing a feature request, please remove the above bug\r\nreport block and provide responses for all of the below items.\r\n-->\r\n\r\n**Describe the feature**:\r\n\r\nA method needs to be provided to collapse results around a field. This feature has many uses and purposes:\r\n\r\n- For web search:  To collapse results by domain ID\r\n- For ecommerce search:  To collapse SKUs by main product ID\r\n- For email and comments search:  To collapse threaded responses by thread ID\r\n- For document search:  To collapse versions of documents around similarity hash\r\n\r\nAnd the list goes on and on.\r\n\r\nNote that the cardinality of the field can be very large.\r\n\r\nThis feature can substantially improve search results quality by not allowing results to be cluttered up with many similar results. In other words, if you return (for example) three results per domain ID, this prevents one domain with many results from swamping the search results page.\r\n\r\nIdeally, results are sorted based on the highest-sorted record which belongs to the group of records with the same value in the field. Also, ideally, the top N documents (for example, N=3) for each field value would be provided with each result.\r\n\r\nOther search engines are able to provide this feature, including the FAST-ESP search engine and Solr Results Grouping.\r\n\r\nI would accept a solution which does not allow jumping to an arbitrary page number, but where users can only go from page 1 to page 2 to page 3, sequentially. I would even accept a solution where the total number of groups is an estimate. (others may feel differently, however, please chime in)\r\n\r\n","closed_by":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"performed_via_github_app":null}