[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/136798624","html_url":"https://github.com/elastic/elasticsearch/issues/13249#issuecomment-136798624","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13249","id":136798624,"node_id":"MDEyOklzc3VlQ29tbWVudDEzNjc5ODYyNA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-09-01T17:07:45Z","updated_at":"2015-09-01T17:07:45Z","author_association":"CONTRIBUTOR","body":"@s1monw could you take a look at this please?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/136814985","html_url":"https://github.com/elastic/elasticsearch/issues/13249#issuecomment-136814985","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13249","id":136814985,"node_id":"MDEyOklzc3VlQ29tbWVudDEzNjgxNDk4NQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-09-01T18:09:22Z","updated_at":"2015-09-01T18:09:22Z","author_association":"CONTRIBUTOR","body":"I don't understand what you are testing here. I can't see the priorities you are giving, I don't see if the replicas where allocated before and if not there will be no ordering as far as I can tell. I don't see if primaries got allocated first and I wonder what you expected to see sorry it's unclear.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/136815535","html_url":"https://github.com/elastic/elasticsearch/issues/13249#issuecomment-136815535","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13249","id":136815535,"node_id":"MDEyOklzc3VlQ29tbWVudDEzNjgxNTUzNQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2015-09-01T18:11:51Z","updated_at":"2015-09-01T18:11:51Z","author_association":"CONTRIBUTOR","body":"> I don't understand what you are testing here. I can't see the priorities you are giving, I don't see if the replicas where allocated before and if not there will be no ordering as far as I can tell. I don't see if primaries got allocated first and I wonder what you expected to see sorry it's unclear.\n\nI'm not familiar with the screenshot source but it looks like the indexes are recovering oldest to newest rather than newest to oldest. But I'm likely reading that wrong.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/136816994","html_url":"https://github.com/elastic/elasticsearch/issues/13249#issuecomment-136816994","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13249","id":136816994,"node_id":"MDEyOklzc3VlQ29tbWVudDEzNjgxNjk5NA==","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"created_at":"2015-09-01T18:18:21Z","updated_at":"2015-09-01T18:18:21Z","author_association":"MEMBER","body":"@s1monw \n\n> I don't understand what you are testing here.\n\nReplica recovery order with 2 nodes.\n1. I throttled recovery as shown.\n2. I took the second node offline.\n3. I deleted all of its `.marvel-*` indices from the offline node.\n4. I restarted the offline node and watched recovery.\n\n> I can't see the priorities you are giving.\n\nI only set `index.priority` after seeing the images above. I picked arbitrary indices in the middle of the group and gave higher values for them individually (e.g., `.marvel-2015.08.22` I gave the priority of 200). All of the creation dates are going to be roughly around midnight of the date of the index (no weirdness or cheating on creation of the indices).\n\n> I don't see if primaries got allocated first\n\nThey did. Synced flushed replica shards (not shown) also got recovered before these replicas were recovered.\n\n> I wonder what you expected to see sorry it's unclear.\n\nI expected to see what @nik9000 suggested: the newest to oldest recovery of the **replicas**. Basically, `.marvel-2015.08.28`'s replica should be recovered before `.marvel-2015.08.27`'s replica, which should be recovered before `.marvel-2015.08.26`'s replica (and so on).\n\nIt seems like the replica's do not consider priority in their recovery order and the oldest indices are being recovered.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/136819187","html_url":"https://github.com/elastic/elasticsearch/issues/13249#issuecomment-136819187","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13249","id":136819187,"node_id":"MDEyOklzc3VlQ29tbWVudDEzNjgxOTE4Nw==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-09-01T18:22:20Z","updated_at":"2015-09-01T18:22:20Z","author_association":"CONTRIBUTOR","body":"> I deleted all of its .marvel-\\* indices from the offline node.\n\nif you don't let the gateway allocator fetch any replicas to recover it won't respect priorities and will leave the rest to the shard balancer. The balancer will do it's own sorting at this point. This has never been implemented\n","performed_via_github_app":null}]