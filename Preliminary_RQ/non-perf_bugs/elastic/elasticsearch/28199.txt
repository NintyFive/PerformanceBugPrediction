{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/28199","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28199/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28199/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28199/events","html_url":"https://github.com/elastic/elasticsearch/issues/28199","id":288188751,"node_id":"MDU6SXNzdWUyODgxODg3NTE=","number":28199,"title":"bulk index in node throws \"Content-Type header [application/x-ldjson] is not supported\" error","user":{"login":"venkkiram","id":20689185,"node_id":"MDQ6VXNlcjIwNjg5MTg1","avatar_url":"https://avatars2.githubusercontent.com/u/20689185?v=4","gravatar_id":"","url":"https://api.github.com/users/venkkiram","html_url":"https://github.com/venkkiram","followers_url":"https://api.github.com/users/venkkiram/followers","following_url":"https://api.github.com/users/venkkiram/following{/other_user}","gists_url":"https://api.github.com/users/venkkiram/gists{/gist_id}","starred_url":"https://api.github.com/users/venkkiram/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/venkkiram/subscriptions","organizations_url":"https://api.github.com/users/venkkiram/orgs","repos_url":"https://api.github.com/users/venkkiram/repos","events_url":"https://api.github.com/users/venkkiram/events{/privacy}","received_events_url":"https://api.github.com/users/venkkiram/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-01-12T17:17:29Z","updated_at":"2018-01-12T18:02:51Z","closed_at":"2018-01-12T18:02:50Z","author_association":"NONE","active_lock_reason":null,"body":"**bulk index in node throws \"Content-Type header [application/x-ldjson] is not supported\" error**:\r\n--\r\n**Elasticsearch version** : 6.1.1\r\n**JVM version** : 1.8.0_121\r\n**OS version** : Windows 7\r\n**Node version** : v8.5.0\r\n\r\nwhile executing node-elasticsearch-tutorial-master program, I am unable to perform bulk indexing due to unsupported json content type version.\r\n\r\n> const bulkIndex = function bulkIndex(index, type, data) {\r\n>     let bulkBody = [];\r\n> \r\n>     data.forEach(item => {\r\n>       bulkBody.push({\r\n>         index: {\r\n>           _index: index,  _type: type, _id: item.id\r\n>         }\r\n>       });      \r\n>       bulkBody.push(item);\r\n>     });\r\n> \r\n>     esClient.bulk({body: bulkBody})\r\n>     .then(response => {\r\n>       let errorCount = 0;\r\n>       response.items.forEach(item => {\r\n>         if (item.index && item.index.error) {\r\n>           console.log(++errorCount, item.index.error);\r\n>         }\r\n>       });\r\n>       console.log(`Successfully indexed ${data.length - errorCount} out of ${data.length} items`);\r\n>     })\r\n>     .catch(console.err);\r\n>   };\r\n\r\nExecution of node index.js from command prompt gives following error.\r\n\r\n<- 406\r\n{\r\n \"error\": \"Content-Type header [application/x-ldjson] is not supported\",\r\n \"status\": 406\r\n}\r\n\r\nPlease advise me the direction to resolve the issue. \r\n\r\n\r\n\r\n","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}