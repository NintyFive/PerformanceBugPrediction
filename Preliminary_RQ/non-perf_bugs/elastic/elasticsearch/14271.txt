{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/14271","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14271/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14271/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14271/events","html_url":"https://github.com/elastic/elasticsearch/issues/14271","id":113081802,"node_id":"MDU6SXNzdWUxMTMwODE4MDI=","number":14271,"title":"Geo Location Context suggester misses entities within the precision distance","user":{"login":"lakshmithyagarajan","id":15268761,"node_id":"MDQ6VXNlcjE1MjY4NzYx","avatar_url":"https://avatars0.githubusercontent.com/u/15268761?v=4","gravatar_id":"","url":"https://api.github.com/users/lakshmithyagarajan","html_url":"https://github.com/lakshmithyagarajan","followers_url":"https://api.github.com/users/lakshmithyagarajan/followers","following_url":"https://api.github.com/users/lakshmithyagarajan/following{/other_user}","gists_url":"https://api.github.com/users/lakshmithyagarajan/gists{/gist_id}","starred_url":"https://api.github.com/users/lakshmithyagarajan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lakshmithyagarajan/subscriptions","organizations_url":"https://api.github.com/users/lakshmithyagarajan/orgs","repos_url":"https://api.github.com/users/lakshmithyagarajan/repos","events_url":"https://api.github.com/users/lakshmithyagarajan/events{/privacy}","received_events_url":"https://api.github.com/users/lakshmithyagarajan/received_events","type":"User","site_admin":false},"labels":[{"id":146833729,"node_id":"MDU6TGFiZWwxNDY4MzM3Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Suggesters","name":":Search/Suggesters","color":"0e8a16","default":false,"description":"\"Did you mean\" and suggestions as you type"},{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2015-10-23T19:08:12Z","updated_at":"2016-01-29T19:11:25Z","closed_at":"2016-01-29T19:11:25Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\n\nWe use the Completion/context suggester with geo hashes to power our autocomplete experience. ES client and server version is 1.3.4. We use 3 precisions: 4, 5 and 6. Neighbours are also enabled. \n\nHowever we noticed that some entities within the precision distance are not returned by the suggester. \n\nEg: Precision 5 is approx. 3 miles x 3 miles.\nWe make a suggestion request from this lat/lng: 37.297304, -122.044645, for a safeway that is located at 37.281433, -122.031138. But it does not show up for precision 5 suggestion request.\n\nThe safeway shows up for precisions 4 and 5 requests from a lat/lng very close to it. So it is a a valid entity.\n\nThis is consistently noticeable for all 3 precisions. Since neighbours are enabled we expect this to work correctly.\n\nIs this a known issue? Has this been fixed in the newer versions?\n\nHere is the completion suggester definition:\n\n{\n  \"entity\" : {\n    \"properties\" : {\n      \"name_suggest\" : {\n        \"type\" : \"completion\",\n        \"index_analyzer\" : \"standard_synonym_analyzer\",\n        \"search_analyzer\" : \"standard_synonym_analyzer\",\n        \"context\": {\n          \"location\": {\n            \"type\": \"geo\",\n            \"precision\": [4,5,6],\n            \"neighbours\": true\n          },\n          \"type\" : {\n            \"type\" : \"category\",\n            \"path\" : \"radius_type\",\n            \"default\" : [\"local\"]\n          }\n        }\n      }\n    }\n  }\n}\n\nThanks,\nLakshmi\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}