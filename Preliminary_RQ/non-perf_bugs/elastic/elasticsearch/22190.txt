{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/22190","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22190/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22190/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22190/events","html_url":"https://github.com/elastic/elasticsearch/issues/22190","id":195793729,"node_id":"MDU6SXNzdWUxOTU3OTM3Mjk=","number":22190,"title":"org.elasticsearch.index.reindex.ReindexClientYamlTestSuiteIT.test {yaml=reindex/90_remote/Reindex from remote that you can't connect to} fails on Windows","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"labels":[{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"assignees":[{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2016-12-15T12:29:32Z","updated_at":"2016-12-15T16:19:51Z","closed_at":"2016-12-15T16:19:51Z","author_association":"MEMBER","active_lock_reason":null,"body":"Build URL: http://build-us-00.elastic.co/job/es_core_master_windows-2012-r2/4418/consoleFull\r\n\r\nThis does not reproduce on my machine (maybe because this only reproduces on windows) and because its a YAML test unfortunately does not show any server stack trace. It seems to have been failing since 9th December.\r\n\r\n@nik9000 would you be able to take a look?\r\n\r\nReproduce command:\r\n```\r\ngradle :modules:reindex:integTest -Dtests.seed=32E1F100D3E3755 -Dtests.class=org.elasticsearch.index.reindex.ReindexClientYamlTestSuiteIT -Dtests.method=\"test {yaml=reindex/90_remote/Reindex from remote that you can't connect to}\" -Dtests.es.logger.level=DEBUG -Dtests.assertion.disabled=org.elasticsearch -Dtests.security.manager=true -Dtests.nightly=false -Dtests.heap.size=512m -Dtests.jvm.argline=\"-server -XX:+UseConcMarkSweepGC -XX:+UseCompressedOops -XX:+AggressiveOpts\" -Dtests.locale=nl-NL -Dtests.timezone=America/Hermosillo\r\n```\r\n\r\nError:\r\n```\r\n1> [2016-12-15T04:57:13,845][INFO ][o.e.i.r.ReindexClientYamlTestSuiteIT] Stash dump on failure [{\r\n  1>   \"stash\" : {\r\n  1>     \"body\" : {\r\n  1>       \"error\" : {\r\n  1>         \"root_cause\" : [\r\n  1>           {\r\n  1>             \"type\" : \"null_pointer_exception\",\r\n  1>             \"reason\" : \"charset\"\r\n  1>           }\r\n  1>         ],\r\n  1>         \"type\" : \"null_pointer_exception\",\r\n  1>         \"reason\" : \"charset\"\r\n  1>       },\r\n  1>       \"status\" : 500\r\n  1>     }\r\n  1>   }\r\n  1> }]\r\n\r\n  2> REPRODUCE WITH: gradle :modules:reindex:integTest -Dtests.seed=32E1F100D3E3755 -Dtests.class=org.elasticsearch.index.reindex.ReindexClientYamlTestSuiteIT -Dtests.method=\"test {yaml=reindex/90_remote/Reindex from remote that you can't connect to}\" -Dtests.es.logger.level=DEBUG -Dtests.assertion.disabled=org.elasticsearch -Dtests.security.manager=true -Dtests.nightly=false -Dtests.heap.size=512m -Dtests.jvm.argline=\"-server -XX:+UseConcMarkSweepGC -XX:+UseCompressedOops -XX:+AggressiveOpts\" -Dtests.locale=nl-NL -Dtests.timezone=America/Hermosillo\r\n\r\nFAILURE 1.79s | ReindexClientYamlTestSuiteIT.test {yaml=reindex/90_remote/Reindex from remote that you can't connect to} <<< FAILURES!\r\n   > Throwable #1: java.lang.AssertionError: Failure at [reindex/90_remote:303]: the error message was expected to match the provided regex but didn't\r\n   > Expected: Connection refused\r\n   >      but: was \"{root_cause=[{type=null_pointer_exception, reason=charset}], type=null_pointer_exception, reason=charset}\"\r\n   > \tat __randomizedtesting.SeedInfo.seed([32E1F100D3E3755:8B7A20CAA3C25AAD]:0)\r\n   > \tat org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.executeSection(ESClientYamlSuiteTestCase.java:374)\r\n   > \tat org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.test(ESClientYamlSuiteTestCase.java:354)\r\n   > \tat java.lang.Thread.run(Thread.java:745)\r\n   > Caused by: java.lang.AssertionError: the error message was expected to match the provided regex but didn't\r\n   > Expected: Connection refused\r\n   >      but: was \"{root_cause=[{type=null_pointer_exception, reason=charset}], type=null_pointer_exception, reason=charset}\"\r\n   > \tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \tat org.elasticsearch.test.rest.yaml.section.DoSection.execute(DoSection.java:156)\r\n   > \tat org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.executeSection(ESClientYamlSuiteTestCase.java:370)\r\n   > \t... 37 more\r\n```\r\n","closed_by":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"performed_via_github_app":null}