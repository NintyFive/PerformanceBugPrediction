{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/40898","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40898/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40898/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40898/events","html_url":"https://github.com/elastic/elasticsearch/issues/40898","id":429749168,"node_id":"MDU6SXNzdWU0Mjk3NDkxNjg=","number":40898,"title":"Monitoring emits many scary log messages on a freshly-installed cluster","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"labels":[{"id":912834056,"node_id":"MDU6TGFiZWw5MTI4MzQwNTY=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Monitoring","name":":Core/Features/Monitoring","color":"0e8a16","default":false,"description":""},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2019-04-05T13:14:09Z","updated_at":"2020-04-21T13:29:01Z","closed_at":"2020-04-21T13:22:13Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"When a new cluster starts up with monitoring enabled it emits multiple messages of the following form:\r\n\r\n`waiting for elected master node ... to setup local exporter [default_local] (does it have x-pack installed?)`\r\n\r\nThis message is shown on nodes other than the elected master each time (except the first) they receive a cluster state update from the elected master in which monitoring is not completely set up (i.e. a template or an ingest pipeline is missing).\r\n\r\nOne explanation for this is that the elected master is not configured to set up monitoring, perhaps because it does not have X-pack installed (hence the `does it have x-pack installed?`). However when a cluster is first forming the master has quite a few things to do, and may not get around to setting up monitoring for some time.\r\n\r\nI think we should not emit this message until the node has been waiting an unreasonably long time for the master to set these things up.\r\n\r\nI'm moving this comment from #28974 into its own issue because that issue appears to be about docs rather than about suppressing this warning.","closed_by":{"login":"danhermann","id":22777892,"node_id":"MDQ6VXNlcjIyNzc3ODky","avatar_url":"https://avatars0.githubusercontent.com/u/22777892?v=4","gravatar_id":"","url":"https://api.github.com/users/danhermann","html_url":"https://github.com/danhermann","followers_url":"https://api.github.com/users/danhermann/followers","following_url":"https://api.github.com/users/danhermann/following{/other_user}","gists_url":"https://api.github.com/users/danhermann/gists{/gist_id}","starred_url":"https://api.github.com/users/danhermann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danhermann/subscriptions","organizations_url":"https://api.github.com/users/danhermann/orgs","repos_url":"https://api.github.com/users/danhermann/repos","events_url":"https://api.github.com/users/danhermann/events{/privacy}","received_events_url":"https://api.github.com/users/danhermann/received_events","type":"User","site_admin":false},"performed_via_github_app":null}