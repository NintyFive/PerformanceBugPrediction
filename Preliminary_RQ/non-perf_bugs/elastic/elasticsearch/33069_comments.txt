[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/415193043","html_url":"https://github.com/elastic/elasticsearch/issues/33069#issuecomment-415193043","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33069","id":415193043,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNTE5MzA0Mw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-08-22T21:51:07Z","updated_at":"2018-08-22T21:51:07Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/415193050","html_url":"https://github.com/elastic/elasticsearch/issues/33069#issuecomment-415193050","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33069","id":415193050,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNTE5MzA1MA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-08-22T21:51:08Z","updated_at":"2018-08-22T21:51:08Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-docs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/415201052","html_url":"https://github.com/elastic/elasticsearch/issues/33069#issuecomment-415201052","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33069","id":415201052,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNTIwMTA1Mg==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2018-08-22T22:21:51Z","updated_at":"2018-08-22T22:21:51Z","author_association":"CONTRIBUTOR","body":"It turns out we've talked about this in the past and thought that it was safer *not* to have examples of these APIs because we really, really, really don't want folks copying and pasting them and losing data. Because these APIs lose data. That is the whole point. But my point stands: when you need them, you need them. And it is nice to have an example of the structure.\r\n\r\nI wonder if we could document them with the `allow_data_loss` flag set to false so if anyone copies and pastes them then they won't work. I really just want them documented so you see the structure, and the structure is still there if you set that flag to false.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/415299685","html_url":"https://github.com/elastic/elasticsearch/issues/33069#issuecomment-415299685","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33069","id":415299685,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNTI5OTY4NQ==","user":{"login":"vladimirdolzhenko","id":209440,"node_id":"MDQ6VXNlcjIwOTQ0MA==","avatar_url":"https://avatars0.githubusercontent.com/u/209440?v=4","gravatar_id":"","url":"https://api.github.com/users/vladimirdolzhenko","html_url":"https://github.com/vladimirdolzhenko","followers_url":"https://api.github.com/users/vladimirdolzhenko/followers","following_url":"https://api.github.com/users/vladimirdolzhenko/following{/other_user}","gists_url":"https://api.github.com/users/vladimirdolzhenko/gists{/gist_id}","starred_url":"https://api.github.com/users/vladimirdolzhenko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vladimirdolzhenko/subscriptions","organizations_url":"https://api.github.com/users/vladimirdolzhenko/orgs","repos_url":"https://api.github.com/users/vladimirdolzhenko/repos","events_url":"https://api.github.com/users/vladimirdolzhenko/events{/privacy}","received_events_url":"https://api.github.com/users/vladimirdolzhenko/received_events","type":"User","site_admin":false},"created_at":"2018-08-23T05:52:24Z","updated_at":"2018-08-23T05:52:24Z","author_association":"CONTRIBUTOR","body":"It will appear indirectly due to work of another dangerous piece: https://github.com/elastic/elasticsearch/issues/31389 \r\n\r\nit requires put a new allocation id and therefore provide command on how to `allocate_stale_primary` or in the worst scenario even `allocate_empty_primary`","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/415510825","html_url":"https://github.com/elastic/elasticsearch/issues/33069#issuecomment-415510825","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33069","id":415510825,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNTUxMDgyNQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2018-08-23T17:54:42Z","updated_at":"2018-08-23T17:54:42Z","author_association":"CONTRIBUTOR","body":"A small group of us talked about this and ended up pretty split but ultimately decided that the documentation that we have now is what we're going to stick with. The argument went like this:\r\n\r\nWe consider these command dangerous to copy and paste and execute.\r\n\r\nBut we consider these commands genuinely useful in certain circumstances: when you know you've lost data and there is no way to get it back, these commands put the index back into a state where you can write to them. Then you can work on getting the data base. If you have a recent backup then it is almost certainly better to restore the backup, flip an alias, and delete the broken index. But if you can't do that, then these commands are useful.\r\n\r\nBut we document how to send these command already. We just don't give examples. Knowing that you need these commands *probably* means that you are familiar enough with Elasticsearch to construct the command from the documentation.\r\n\r\nBut when you need these commands it means you've lost some data. Which *probably* means something catastrophic has happened and you are having a bad day. I know when I'm having a bad day I have a ton more trouble building commands from prose. Having an actual example will really help in these cases.\r\n\r\nBut when you are frustrated and having a bad day you are much more prone to making mistakes. This is exactly when you should slow down, read the prose a few times, then build the command. That makes triple sure that you understand the consequences of losing data.\r\n\r\n","performed_via_github_app":null}]