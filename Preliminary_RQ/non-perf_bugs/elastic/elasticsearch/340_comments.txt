[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/13272427","html_url":"https://github.com/elastic/elasticsearch/issues/340#issuecomment-13272427","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/340","id":13272427,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMjcyNDI3","user":{"login":"kitchen","id":178765,"node_id":"MDQ6VXNlcjE3ODc2NQ==","avatar_url":"https://avatars2.githubusercontent.com/u/178765?v=4","gravatar_id":"","url":"https://api.github.com/users/kitchen","html_url":"https://github.com/kitchen","followers_url":"https://api.github.com/users/kitchen/followers","following_url":"https://api.github.com/users/kitchen/following{/other_user}","gists_url":"https://api.github.com/users/kitchen/gists{/gist_id}","starred_url":"https://api.github.com/users/kitchen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kitchen/subscriptions","organizations_url":"https://api.github.com/users/kitchen/orgs","repos_url":"https://api.github.com/users/kitchen/repos","events_url":"https://api.github.com/users/kitchen/events{/privacy}","received_events_url":"https://api.github.com/users/kitchen/received_events","type":"User","site_admin":false},"created_at":"2013-02-08T01:22:36Z","updated_at":"2013-02-08T01:22:36Z","author_association":"NONE","body":"+1\n\nalso, it might be nice if even if you're running with replicas > 0 that it'll redistribute the shards on the node prior to shutdown, so that the cluster status always remains green. This prevents issues where you shut one node down and another crashes at the same time and you lose some shards.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/13272736","html_url":"https://github.com/elastic/elasticsearch/issues/340#issuecomment-13272736","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/340","id":13272736,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMjcyNzM2","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2013-02-08T01:32:25Z","updated_at":"2013-02-08T01:33:31Z","author_association":"MEMBER","body":"There is an option today, one can use shard allocation control to make sure the relevant node is not part of the shard placement. This will cause all shards to be moved away from the mentioned node. Once they moved, you can safely shutdown the node.\n\nSimplest way is to use the cluster update settings API, for example:\n\n```\ncurl -XPUT localhost:9200/_cluster/settings -d '{\n    \"transient\" : {\n        \"cluster.routing.allocation.exclude._ip\" : \"10.0.0.1\"\n    }\n}'\n```\n\nRegarding shutting down a node and losing another, its important to remember that the node being shutdown can always be brought back up and the data it holds will be used if needed.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/13273178","html_url":"https://github.com/elastic/elasticsearch/issues/340#issuecomment-13273178","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/340","id":13273178,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMjczMTc4","user":{"login":"kitchen","id":178765,"node_id":"MDQ6VXNlcjE3ODc2NQ==","avatar_url":"https://avatars2.githubusercontent.com/u/178765?v=4","gravatar_id":"","url":"https://api.github.com/users/kitchen","html_url":"https://github.com/kitchen","followers_url":"https://api.github.com/users/kitchen/followers","following_url":"https://api.github.com/users/kitchen/following{/other_user}","gists_url":"https://api.github.com/users/kitchen/gists{/gist_id}","starred_url":"https://api.github.com/users/kitchen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kitchen/subscriptions","organizations_url":"https://api.github.com/users/kitchen/orgs","repos_url":"https://api.github.com/users/kitchen/repos","events_url":"https://api.github.com/users/kitchen/events{/privacy}","received_events_url":"https://api.github.com/users/kitchen/received_events","type":"User","site_admin":false},"created_at":"2013-02-08T01:48:20Z","updated_at":"2013-02-08T01:48:20Z","author_association":"NONE","body":"very cool, thanks! I'll take a look at the allocation control API and see what other fun things it can do :)\n","performed_via_github_app":null}]