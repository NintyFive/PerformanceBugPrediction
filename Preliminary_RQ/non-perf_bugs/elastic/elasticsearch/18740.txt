{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/18740","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18740/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18740/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18740/events","html_url":"https://github.com/elastic/elasticsearch/issues/18740","id":158559664,"node_id":"MDU6SXNzdWUxNTg1NTk2NjQ=","number":18740,"title":"Creating array of IPs","user":{"login":"esamudio","id":6547184,"node_id":"MDQ6VXNlcjY1NDcxODQ=","avatar_url":"https://avatars0.githubusercontent.com/u/6547184?v=4","gravatar_id":"","url":"https://api.github.com/users/esamudio","html_url":"https://github.com/esamudio","followers_url":"https://api.github.com/users/esamudio/followers","following_url":"https://api.github.com/users/esamudio/following{/other_user}","gists_url":"https://api.github.com/users/esamudio/gists{/gist_id}","starred_url":"https://api.github.com/users/esamudio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/esamudio/subscriptions","organizations_url":"https://api.github.com/users/esamudio/orgs","repos_url":"https://api.github.com/users/esamudio/repos","events_url":"https://api.github.com/users/esamudio/events{/privacy}","received_events_url":"https://api.github.com/users/esamudio/received_events","type":"User","site_admin":false},"labels":[{"id":141145460,"node_id":"MDU6TGFiZWwxNDExNDU0NjA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Mapping","name":":Search/Mapping","color":"0e8a16","default":false,"description":"How fields should be indexed"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"},{"id":342561351,"node_id":"MDU6TGFiZWwzNDI1NjEzNTE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v2.4.0","name":"v2.4.0","color":"dddddd","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2016-06-05T15:29:17Z","updated_at":"2016-06-28T12:44:40Z","closed_at":"2016-06-13T08:41:59Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\nGitHub is reserved for bug reports and feature requests. The best place\nto ask a general question is at the Elastic Discourse forums at\nhttps://discuss.elastic.co. If you are in fact posting a bug report or\na feature request, please include one and only one of the below blocks\nin your new issue.\n-->\n\n<!--\nIf you are filing a bug report, please remove the below feature\nrequest block and provide responses for all of the below items.\n-->\n\n**Elasticsearch version**: 2.3.3\n\n**JVM version**: 1.8.0_91\n\n**OS version**: Ubuntu 14.04\n\n**Description of the problem including expected versus actual behavior**:\n\nAt first, I'm not sure if I misread the docs and this is not expected behavior, in which case, please look at this as an issue instead. Arrays of IPs don't seem to be able to be made. Whenever one pre-defines the mapping, and tries to create one, a type mismatch happens.\n\n**Steps to reproduce**:\nI'm following the ones someone suggested I follow on [the discussion board](https://discuss.elastic.co/t/how-to-store-array-of-ip/51461/2). Credit to msimos.\n1. I created a dummy index following the steps above. My dummy index is called \"com\".\n\n```\ncurl -XPUT 'http://localhost:9200/com' -d '{\n    \"mappings\": {\n        \"type\": {\n            \"properties\": {\n                \"ips\": {\n                    \"type\": \"ip\"\n                }\n            }\n        }\n    }\n}'\n```\n1. I then indexed the sample ip array into the \"com\" index in the \"anytype\" type with id \"1\".\n\n```\ncurl -XPOST 'http://localhost:9200/com/anytype/1' -d '{\n    \"ips\": [\"123.123.123.123\", \"10.0.0.1\"]\n}'\n```\n1. This gave me a type mismatch error:\n\n```\n{\n    \"error\": {\n        \"root_cause\": [{\n            \"type\": \"mapper_parsing_exception\",\n            \"reason\": \"failed to parse\"\n        }],\n        \"type\": \"mapper_parsing_exception\",\n        \"reason\": \"failed to parse\",\n        \"caused_by\": {\n            \"type\": \"illegal_state_exception\",\n            \"reason\": \"Mixing up field types: class org.elasticsearch.index.mapper.core.LongFieldMapper$LongFieldType != class org.elasticsearch.index.mapper.ip.IpFieldMapper$IpFieldType on field ips\"\n        }\n    },\n    \"status\": 400\n}\n```\n","closed_by":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"performed_via_github_app":null}