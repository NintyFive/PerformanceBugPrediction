[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/256561429","html_url":"https://github.com/elastic/elasticsearch/issues/21141#issuecomment-256561429","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21141","id":256561429,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjU2MTQyOQ==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-10-27T06:53:52Z","updated_at":"2016-10-27T06:53:52Z","author_association":"MEMBER","body":"@jordansissel the line you linked to removes the current host form the list of \"active\" ones so it won't be used again for a while. Then the request is retried. See comment as well:\n\n```\n //mark host dead and retry against next one\n```\n\nI presume you had some reason to think things are going wrong?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/256694724","html_url":"https://github.com/elastic/elasticsearch/issues/21141#issuecomment-256694724","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21141","id":256694724,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjY5NDcyNA==","user":{"login":"jordansissel","id":131818,"node_id":"MDQ6VXNlcjEzMTgxOA==","avatar_url":"https://avatars1.githubusercontent.com/u/131818?v=4","gravatar_id":"","url":"https://api.github.com/users/jordansissel","html_url":"https://github.com/jordansissel","followers_url":"https://api.github.com/users/jordansissel/followers","following_url":"https://api.github.com/users/jordansissel/following{/other_user}","gists_url":"https://api.github.com/users/jordansissel/gists{/gist_id}","starred_url":"https://api.github.com/users/jordansissel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jordansissel/subscriptions","organizations_url":"https://api.github.com/users/jordansissel/orgs","repos_url":"https://api.github.com/users/jordansissel/repos","events_url":"https://api.github.com/users/jordansissel/events{/privacy}","received_events_url":"https://api.github.com/users/jordansissel/received_events","type":"User","site_admin":false},"created_at":"2016-10-27T16:19:48Z","updated_at":"2016-10-27T16:19:48Z","author_association":"CONTRIBUTOR","body":"Ahh, you are right. I misread the code.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/256695416","html_url":"https://github.com/elastic/elasticsearch/issues/21141#issuecomment-256695416","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21141","id":256695416,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjY5NTQxNg==","user":{"login":"jordansissel","id":131818,"node_id":"MDQ6VXNlcjEzMTgxOA==","avatar_url":"https://avatars1.githubusercontent.com/u/131818?v=4","gravatar_id":"","url":"https://api.github.com/users/jordansissel","html_url":"https://github.com/jordansissel","followers_url":"https://api.github.com/users/jordansissel/followers","following_url":"https://api.github.com/users/jordansissel/following{/other_user}","gists_url":"https://api.github.com/users/jordansissel/gists{/gist_id}","starred_url":"https://api.github.com/users/jordansissel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jordansissel/subscriptions","organizations_url":"https://api.github.com/users/jordansissel/orgs","repos_url":"https://api.github.com/users/jordansissel/repos","events_url":"https://api.github.com/users/jordansissel/events{/privacy}","received_events_url":"https://api.github.com/users/jordansissel/received_events","type":"User","site_admin":false},"created_at":"2016-10-27T16:22:09Z","updated_at":"2016-10-27T16:22:09Z","author_association":"CONTRIBUTOR","body":"(I see a 429, I think, not being a `retryStatus` value, will mark the host alive and fire onDefinitiveFailure. I can use this to do my own retries on 429s)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/256772200","html_url":"https://github.com/elastic/elasticsearch/issues/21141#issuecomment-256772200","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21141","id":256772200,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Njc3MjIwMA==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2016-10-27T21:16:03Z","updated_at":"2016-10-27T21:16:03Z","author_association":"MEMBER","body":"429 is not a retry status. I think this is the same for all of our language clients though. @jordansissel did you mean that this should change? If so, @elastic/es-clients may want to comment on that.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/256862122","html_url":"https://github.com/elastic/elasticsearch/issues/21141#issuecomment-256862122","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21141","id":256862122,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Njg2MjEyMg==","user":{"login":"Mpdreamz","id":245275,"node_id":"MDQ6VXNlcjI0NTI3NQ==","avatar_url":"https://avatars3.githubusercontent.com/u/245275?v=4","gravatar_id":"","url":"https://api.github.com/users/Mpdreamz","html_url":"https://github.com/Mpdreamz","followers_url":"https://api.github.com/users/Mpdreamz/followers","following_url":"https://api.github.com/users/Mpdreamz/following{/other_user}","gists_url":"https://api.github.com/users/Mpdreamz/gists{/gist_id}","starred_url":"https://api.github.com/users/Mpdreamz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Mpdreamz/subscriptions","organizations_url":"https://api.github.com/users/Mpdreamz/orgs","repos_url":"https://api.github.com/users/Mpdreamz/repos","events_url":"https://api.github.com/users/Mpdreamz/events{/privacy}","received_events_url":"https://api.github.com/users/Mpdreamz/received_events","type":"User","site_admin":false},"created_at":"2016-10-28T08:12:01Z","updated_at":"2016-11-01T11:21:30Z","author_association":"MEMBER","body":"The client failover mechanism is more about failing fast and in a controlled/timely manner then it is about forcing requests to succeed.\n\nhttps://www.elastic.co/guide/en/elasticsearch/client/net-api/current/falling-over.html\nhttps://www.elastic.co/guide/en/elasticsearch/client/net-api/current/max-retries.html\n\nWhich is orthogonal to logstash needs, which is fine. As we discussed this year, the difference in status handling between beats+logstash and the clients is a good thing :)\n\nFrom a clients perspective:\n\n429 can be argued both ways, but in many cases it simply amplifies the load in cases where its less desirable. It could be a queue bounce, in which case we _might_ have better luck on a different node but we could also just amplify the load on the cluster by failing over. e.g each single request ends up being N requests as we attempt to fail over **fast**, registering more and more requests in the queues.\n\nThat said:\n\n429 would be a prime candidate for an incremental backoff retry mechanism but we currently have no such feature in the clients, should we? Some of us already have bulk helpers that support exponential retries of individual 429 bulk item failures.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/256941807","html_url":"https://github.com/elastic/elasticsearch/issues/21141#issuecomment-256941807","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21141","id":256941807,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Njk0MTgwNw==","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"created_at":"2016-10-28T14:52:24Z","updated_at":"2016-10-28T14:52:24Z","author_association":"MEMBER","body":"I also think that is more of a feature for a high level client, rather than a low level one.\n","performed_via_github_app":null}]