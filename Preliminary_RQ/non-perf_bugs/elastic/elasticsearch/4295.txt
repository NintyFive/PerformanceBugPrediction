{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/4295","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4295/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4295/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4295/events","html_url":"https://github.com/elastic/elasticsearch/issues/4295","id":23470400,"node_id":"MDU6SXNzdWUyMzQ3MDQwMA==","number":4295,"title":"index.routing.allocation not working as documented","user":{"login":"mohitanchlia","id":614804,"node_id":"MDQ6VXNlcjYxNDgwNA==","avatar_url":"https://avatars2.githubusercontent.com/u/614804?v=4","gravatar_id":"","url":"https://api.github.com/users/mohitanchlia","html_url":"https://github.com/mohitanchlia","followers_url":"https://api.github.com/users/mohitanchlia/followers","following_url":"https://api.github.com/users/mohitanchlia/following{/other_user}","gists_url":"https://api.github.com/users/mohitanchlia/gists{/gist_id}","starred_url":"https://api.github.com/users/mohitanchlia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mohitanchlia/subscriptions","organizations_url":"https://api.github.com/users/mohitanchlia/orgs","repos_url":"https://api.github.com/users/mohitanchlia/repos","events_url":"https://api.github.com/users/mohitanchlia/events{/privacy}","received_events_url":"https://api.github.com/users/mohitanchlia/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2013-11-28T23:46:14Z","updated_at":"2014-03-14T08:31:17Z","closed_at":"2014-03-13T16:16:05Z","author_association":"NONE","active_lock_reason":null,"body":"I have 2 nodes and I created an index and trying to use routing allocation so that I can keep indexes on specific set of nodes. We need this for multitenancy and isolation. But it doesn't seem to work. I see my index is getting created on both the nodes.\n\nI added to the yaml file for node .86. I only want this index to be stored on .86 node but it also is getting stored in .242 node. I have 2 nodes so far.\n\n node.group1: group2\n\nThen I added this setting:\n\n``` sh\ncurl -XPUT 10.80.140.86:9200/test4/_settings -d '{\n \"index.routing.allocation.include.group1\" : \"group2\",\n \"index.routing.allocation.exclude.group1\" : \"group1\"\n}'\n```\n\nHead shows this for 2 nodes:\n\n``` javascript\n{ name: 10.80.140.242\ntransport_address: inet[/10.80.140.242:9300]\n version: 0.90.6\nhttp_address: inet[/10.80.140.242:9200]\n attributes: {group1: group1\n }\n} \n{ name: 10.80.140.86\ntransport_address: inet[/10.80.140.86:9300]\n version: 0.90.6\nhttp_address: inet[/10.80.140.86:9200]\n attributes: {group1: group2\n }\n} \n\n\n{ state: open\nsettings: { index.number_of_replicas: 1\nindex.number_of_shards: 5\n index.version.created: 900699\nindex.uuid: Bqd1gRznTl6U5IUFDevLqA\n index.routing.allocation.include.group1: group2\nindex.routing.allocation.exclude.group1: group1\n }\nmappings: { }\naliases: [ ]\n}\n```\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}