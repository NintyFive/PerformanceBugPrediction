{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/9456","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9456/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9456/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9456/events","html_url":"https://github.com/elastic/elasticsearch/issues/9456","id":55742811,"node_id":"MDU6SXNzdWU1NTc0MjgxMQ==","number":9456,"title":"Curl works just fine but post from Node Request fails.","user":{"login":"ben-walters","id":2077780,"node_id":"MDQ6VXNlcjIwNzc3ODA=","avatar_url":"https://avatars1.githubusercontent.com/u/2077780?v=4","gravatar_id":"","url":"https://api.github.com/users/ben-walters","html_url":"https://github.com/ben-walters","followers_url":"https://api.github.com/users/ben-walters/followers","following_url":"https://api.github.com/users/ben-walters/following{/other_user}","gists_url":"https://api.github.com/users/ben-walters/gists{/gist_id}","starred_url":"https://api.github.com/users/ben-walters/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ben-walters/subscriptions","organizations_url":"https://api.github.com/users/ben-walters/orgs","repos_url":"https://api.github.com/users/ben-walters/repos","events_url":"https://api.github.com/users/ben-walters/events{/privacy}","received_events_url":"https://api.github.com/users/ben-walters/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2015-01-28T11:10:21Z","updated_at":"2016-01-21T07:25:22Z","closed_at":"2015-01-28T12:56:36Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\n\nI am very new to ES but have been getting along just fine until now. I have created a cluster and am able to insert documents to the index no worries.\n\nWhen i CURL from the command line, everything it returned as expected.\n\n```\ncurl -XPOST 'http://127.0.0.1:9200/mips/items/_search?pretty' -d '{\n    \"query\": {\n        \"bool\": {\n            \"must\": [\n                {\n                    \"match_all\": {}\n                }\n            ],\n            \"must_not\": [],\n            \"should\": []\n        }\n    }\n}'\n```\n\nReturns my results. But posting from Node using the following, returns me an error.\n\n```\n        request.post({\n            uri:'http://127.0.0.1:9200/mips/items/_search',\n            //body: logicq,\n            body: '{\n                \"query\": {\n                    \"bool\": {\n                        \"must\": [\n                            {\n                                \"match_all\": {}\n                            }\n                        ],\n                        \"must_not\": [],\n                        \"should\": []\n                    }\n                }\n            }',\n            json: true\n        },\n        function(err,obj) {\n            console.log('RETURNED')\n            if(err){\n                cb(JSON.stringify(err,undefined,2));\n            }else{\n                cb(JSON.stringify(obj,undefined,2));\n            }\n        })\n```\n\nError:\n\n```\n{\n  \"statusCode\": 400,\n  \"body\": {\n    \"error\": \"SearchPhaseExecutionException[Failed to execute phase [query_fetch], all shards failed; shardFailures {[wl2ivlWpRN2i1ZGKFQ3TbA][mips][0]: RemoteTransportException[[mips-db04][inet[/10.65.187.34:9300]][indices:data/read/search[phase/query+fetch]]]; nested: SearchParseException[[mips][0]: from[-1],size[-1]: Parse Failure [Failed to parse source [_na_]]]; nested: ElasticsearchParseException[Failed to derive xcontent from org.elasticsearch.common.bytes.ChannelBufferBytesReference@f23]; }]\",\n    \"status\": 400\n  },\n  \"headers\": {\n    \"content-type\": \"application/json; charset=UTF-8\",\n    \"content-length\": \"514\"\n  },\n  \"request\": {\n    \"uri\": {\n      \"protocol\": \"http:\",\n      \"slashes\": true,\n      \"auth\": null,\n      \"host\": \"10.65.187.28:9200\",\n      \"port\": \"9200\",\n      \"hostname\": \"10.65.187.28\",\n      \"hash\": null,\n      \"search\": null,\n      \"query\": null,\n      \"pathname\": \"/mips/_search\",\n      \"path\": \"/mips/_search\",\n      \"href\": \"http://10.65.187.28:9200/mips/_search\"\n    },\n    \"method\": \"POST\",\n    \"headers\": {\n      \"accept\": \"application/json\",\n      \"content-type\": \"application/json\",\n      \"content-length\": 2\n    }\n  }\n}\n```\n\nThanks\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}