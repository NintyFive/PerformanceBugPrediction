{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/8003","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8003/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8003/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8003/events","html_url":"https://github.com/elastic/elasticsearch/issues/8003","id":45042598,"node_id":"MDU6SXNzdWU0NTA0MjU5OA==","number":8003,"title":"Duplicate document found while searching with parent/child setup - ES 1.0","user":{"login":"govindm","id":3537896,"node_id":"MDQ6VXNlcjM1Mzc4OTY=","avatar_url":"https://avatars1.githubusercontent.com/u/3537896?v=4","gravatar_id":"","url":"https://api.github.com/users/govindm","html_url":"https://github.com/govindm","followers_url":"https://api.github.com/users/govindm/followers","following_url":"https://api.github.com/users/govindm/following{/other_user}","gists_url":"https://api.github.com/users/govindm/gists{/gist_id}","starred_url":"https://api.github.com/users/govindm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/govindm/subscriptions","organizations_url":"https://api.github.com/users/govindm/orgs","repos_url":"https://api.github.com/users/govindm/repos","events_url":"https://api.github.com/users/govindm/events{/privacy}","received_events_url":"https://api.github.com/users/govindm/received_events","type":"User","site_admin":false},"labels":[{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"assignees":[{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false}],"milestone":null,"comments":5,"created_at":"2014-10-06T21:58:11Z","updated_at":"2015-02-28T04:48:31Z","closed_at":"2015-02-28T04:48:31Z","author_association":"NONE","active_lock_reason":null,"body":"elasticsearchserver_node1:7104/metadata/asset/_search?q=_id:641804  returns two documents\nBut\nelasticsearchserver_node1:7104/metadata/asset/641804?parent=80018039 returns only one document\n\nThere was not update to the document after initial index.\n\nelasticsearchserver_node1:7104/metadata/asset/_search?q=_id:641804 returns following results\n# \n\n{\n    \"took\": 2,\n    \"timed_out\": false,\n    \"_shards\": {\n        \"total\": 10,\n        \"successful\": 10,\n        \"failed\": 0\n    },\n    \"hits\": {\n        \"total\": 2,\n        \"max_score\": 1,\n        \"hits\": [\n            {\n                \"_index\": \"metadata\",\n                \"_type\": \"asset\",\n                \"_id\": \"641804\",\n                \"_score\": 1,\n                \"_source\": {\n                    \"createdDate\": 1410901296000,\n                    \"lastUpdatedDate\": 1410901295989,\n                    \"id\": 641804,\n                    \"status\": \"NEW\",\n                    \"parentAssetId\": 0,\n                    \"masterAssetId\": null,\n                    \"source\": \"AUTOMATION\",\n                    \"spaceCode\": \"creative-services\",\n                    \"originatingAssetId\": null,\n                    \"spaceShareCount\": null,\n                    \"childCount\": null,\n                    \"isAllMainFilesPresent\": false,\n                    \"assetPath\": [],\n                    \"assetExtension\": {\n                        \"assetId\": 641804,\n                        \"territoryCode\": \"LATAM\",\n                        \"languageCode\": null,\n                        \"partnerProvidedLocalizedName\": null,\n                        \"personId\": 0,\n                        \"characterId\": 0\n                    },\n                    \"assetFiles\": [],\n                    \"assetAttributes\": [],\n                    \"sharedSpaceCodes\": [],\n                    \"futureEffectiveDate\": null,\n                    \"assetWindows\": [\n                        {\n                            \"partnerId\": \"dcbd39e0-eff9-11e2-882e-12313924e0a4\",\n                            \"windowStartDate\": 1416016800000,\n                            \"windowEndDate\": 1463281200000\n                        }\n                    ],\n                    \"assetSchema\": \"asset\",\n                    \"slaveAsset\": false,\n                    \"publishedDerivativePresent\": false,\n                    \"sharedAcrossSpace\": true,\n                    \"mainFiles\": [],\n                    \"folderTypeAsset\": false,\n                    \"genericAsset\": false,\n                    \"metaTypeAsset\": true,\n                    \"metaId\": 80018039,\n                    \"sourceFiles\": [],\n                    \"futurePublishedDerivativePresent\": false,\n                    \"characterAsset\": false,\n                    \"personAsset\": false,\n                    \"masterAsset\": false,\n                    \"timestamp\": 1410901295989,\n                    \"_parent\": \"80018039\"\n                }\n            },\n            {\n                \"_index\": \"movie_metadata\",\n                \"_type\": \"asset\",\n                \"_id\": \"641804\",\n                \"_score\": 1,\n                \"_source\": {\n                    \"_index\": \"metadata\",\n                    \"_type\": \"asset\",\n                    \"_id\": \"641804\",\n                    \"_score\": 1,\n                    \"_source\": {\n                        \"createdDate\": 1410901296000,\n                        \"lastUpdatedDate\": 1410901295989,\n                        \"id\": 641804,\n                        \"status\": \"NEW\",\n                        \"parentAssetId\": 0,\n                        \"masterAssetId\": null,\n                        \"source\": \"AUTOMATION\",\n                        \"spaceCode\": \"creative-services\",\n                        \"originatingAssetId\": null,\n                        \"spaceShareCount\": null,\n                        \"childCount\": null,\n                        \"isAllMainFilesPresent\": false,\n                        \"assetPath\": [],\n                        \"assetExtension\": {\n                            \"assetId\": 641804,\n                            \"territoryCode\": \"LATAM\",\n                            \"languageCode\": null,\n                            \"partnerProvidedLocalizedName\": null,\n                            \"personId\": 0,\n                            \"characterId\": 0\n                        },\n                        \"assetFiles\": [],\n                        \"assetAttributes\": [],\n                        \"sharedSpaceCodes\": [],\n                        \"futureEffectiveDate\": null,\n                        \"assetWindows\": [\n                            {\n                                \"partnerId\": \"dcbd39e0-eff9-11e2-882e-12313924e0a4\",\n                                \"windowStartDate\": 1416016800000,\n                                \"windowEndDate\": 1463281200000\n                            }\n                        ],\n                        \"assetSchema\": \"asset\",\n                        \"slaveAsset\": false,\n                        \"publishedDerivativePresent\": false,\n                        \"sharedAcrossSpace\": true,\n                        \"mainFiles\": [],\n                        \"folderTypeAsset\": false,\n                        \"genericAsset\": false,\n                        \"metaTypeAsset\": true,\n                        \"metaId\": 80018039,\n                        \"sourceFiles\": [],\n                        \"futurePublishedDerivativePresent\": false,\n                        \"characterAsset\": false,\n                        \"personAsset\": false,\n                        \"masterAsset\": false,\n                        \"timestamp\": 1410901295989,\n                        \"_parent\": \"80018039\"\n                    }\n                }\n            }\n        ]\n    }\n}\n# \n\nelasticsearchserver_node1:7104/metadata/asset/641804?parent=80018039  returns the following result\n\n{\n    \"_index\": \"movie_metadata\",\n    \"_type\": \"asset\",\n    \"_id\": \"641804\",\n    \"_version\": 1,\n    \"found\": true,\n    \"_source\": {\n        \"createdDate\": 1410901296000,\n        \"lastUpdatedDate\": 1410901295989,\n        \"id\": 641804,\n        \"status\": \"NEW\",\n        \"parentAssetId\": 0,\n        \"masterAssetId\": null,\n        \"source\": \"AUTOMATION\",\n        \"spaceCode\": \"creative-services\",\n        \"originatingAssetId\": null,\n        \"spaceShareCount\": null,\n        \"childCount\": null,\n        \"isAllMainFilesPresent\": false,\n        \"assetPath\": [],\n        \"assetExtension\": {\n            \"assetId\": 641804,\n            \"territoryCode\": \"LATAM\",\n            \"languageCode\": null,\n            \"partnerProvidedLocalizedName\": null,\n            \"personId\": 0,\n            \"characterId\": 0\n        },\n        \"assetFiles\": [],\n        \"assetAttributes\": [],\n        \"sharedSpaceCodes\": [],\n        \"futureEffectiveDate\": null,\n        \"assetWindows\": [\n            {\n                \"partnerId\": \"dcbd39e0-eff9-11e2-882e-12313924e0a4\",\n                \"windowStartDate\": 1416016800000,\n                \"windowEndDate\": 1463281200000\n            }\n        ],\n        \"assetSchema\": \"asset\",\n        \"slaveAsset\": false,\n        \"publishedDerivativePresent\": false,\n        \"sharedAcrossSpace\": true,\n        \"mainFiles\": [],\n        \"folderTypeAsset\": false,\n        \"genericAsset\": false,\n        \"metaTypeAsset\": true,\n        \"metaId\": 80018039,\n        \"sourceFiles\": [],\n        \"futurePublishedDerivativePresent\": false,\n        \"characterAsset\": false,\n        \"personAsset\": false,\n        \"masterAsset\": false,\n        \"timestamp\": 1410901295989,\n        \"_parent\": \"80018039\"\n    }\n}\n# \n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}