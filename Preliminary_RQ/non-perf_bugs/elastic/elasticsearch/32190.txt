{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/32190","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32190/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32190/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32190/events","html_url":"https://github.com/elastic/elasticsearch/issues/32190","id":342655532,"node_id":"MDU6SXNzdWUzNDI2NTU1MzI=","number":32190,"title":"[CI] SessionFactoryLoadBalancingTests testRoundRobinWithFailures fails","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"labels":[{"id":912838879,"node_id":"MDU6TGFiZWw5MTI4Mzg4Nzk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Security/Security","name":":Security/Security","color":"0e8a16","default":false,"description":"Security issues without another label"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false},"assignees":[{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false}],"milestone":null,"comments":9,"created_at":"2018-07-19T09:43:53Z","updated_at":"2019-02-20T18:37:26Z","closed_at":"2019-02-20T18:37:26Z","author_association":"MEMBER","active_lock_reason":null,"body":"https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.x+multijob-windows-compatibility/1190/console\r\n\r\nCould not reproduce with:\r\n```\r\nREPRODUCE WITH: gradlew :x-pack:plugin:security:test \\\r\n  -Dtests.seed=16B5154ACCB4889F \\\r\n  -Dtests.class=org.elasticsearch.xpack.security.authc.ldap.support.SessionFactoryLoadBalancingTests \\\r\n  -Dtests.method=\"testRoundRobinWithFailures\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=ar-QA \\\r\n  -Dtests.timezone=US/Central\r\n\r\nREPRODUCE WITH: gradlew :x-pack:plugin:security:test \\\r\n  -Dtests.seed=16B5154ACCB4889F \\\r\n  -Dtests.class=org.elasticsearch.xpack.security.authc.ldap.support.SessionFactoryLoadBalancingTests \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=en-US \\\r\n  -Dtests.timezone=UTC\r\n```\r\n\r\nLooks like there are connection issues:\r\n```\r\n10:27:12   2> WARNING: Suite execution timed out: org.elasticsearch.xpack.security.authc.ldap.support.SessionFactoryLoadBalancingTests\r\n10:27:12   1> java.net.BindException: Address already in use: connect\r\n10:27:12   2> ==== jstack at approximately timeout time ====\r\n10:27:12   1> \tat java.net.DualStackPlainSocketImpl.connect0(Native Method) ~[?:1.8.0_172]\r\n10:27:12   1> \tat java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79) ~[?:1.8.0_172]\r\n10:27:12   2> \"elasticsearch[SessionFactoryLoadBalancingTests thread pool][[timer]]\" ID=2333 TIMED_WAITING\r\n10:27:12   2> \tat java.lang.Thread.sleep(Native Method)\r\n10:27:12   1> \tat java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) ~[?:1.8.0_172]\r\n10:27:12   2> \tat org.elasticsearch.threadpool.ThreadPool$CachedTimeThread.run(ThreadPool.java:543)\r\n10:27:12   2> \"LDAP Listener Thread (listening on port 63056)\" ID=2331 RUNNABLE (in native code)\r\n10:27:12   2> \tat java.net.DualStackPlainSocketImpl.accept0(Native Method)\r\n10:27:12   2> \tat java.net.DualStackPlainSocketImpl.socketAccept(DualStackPlainSocketImpl.java:131)\r\n10:27:12   1> \tat java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) ~[?:1.8.0_172]\r\n10:27:12   1> \tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) ~[?:1.8.0_172]\r\n10:27:12   1> \tat java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172) ~[?:1.8.0_172]\r\n10:27:12   1> \tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) ~[?:1.8.0_172]\r\n10:27:12   1> \tat java.net.Socket.connect(Socket.java:589) ~[?:1.8.0_172]\r\n10:27:12   1> \tat org.elasticsearch.mocksocket.MockSocket.access$101(MockSocket.java:32) ~[mocksocket-1.2.jar:?]\r\n10:27:12   2> \tat java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)\r\n10:27:12   2> \tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:199)\r\n10:27:12   1> \tat org.elasticsearch.mocksocket.MockSocket.lambda$connect$0(MockSocket.java:66) ~[mocksocket-1.2.jar:?]\r\n10:27:12   1> \tat java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_172]\r\n10:27:12   1> \tat org.elasticsearch.mocksocket.MockSocket.connect(MockSocket.java:65) ~[mocksocket-1.2.jar:?]\r\n10:27:12   1> \tat org.elasticsearch.mocksocket.MockSocket.connect(MockSocket.java:59) ~[mocksocket-1.2.jar:?]\r\n10:27:12   2> \t- locked java.net.SocksSocketImpl@1d4bb36e\r\n10:27:12   1> \tat java.net.Socket.<init>(Socket.java:434) ~[?:1.8.0_172]\r\n10:27:12   1> \tat java.net.Socket.<init>(Socket.java:328) ~[?:1.8.0_172]\r\n10:27:12   1> \tat org.elasticsearch.mocksocket.MockSocket.<init>(MockSocket.java:54) ~[mocksocket-1.2.jar:?]\r\n```\r\n\r\nThis leads to test timeouts later.","closed_by":{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false},"performed_via_github_app":null}