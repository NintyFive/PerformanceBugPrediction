[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/592103454","html_url":"https://github.com/elastic/elasticsearch/issues/52912#issuecomment-592103454","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52912","id":592103454,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjEwMzQ1NA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-02-27T18:18:22Z","updated_at":"2020-02-27T18:18:22Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search (:Search/EQL)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/592109949","html_url":"https://github.com/elastic/elasticsearch/issues/52912#issuecomment-592109949","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52912","id":592109949,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjEwOTk0OQ==","user":{"login":"tsg","id":101817,"node_id":"MDQ6VXNlcjEwMTgxNw==","avatar_url":"https://avatars1.githubusercontent.com/u/101817?v=4","gravatar_id":"","url":"https://api.github.com/users/tsg","html_url":"https://github.com/tsg","followers_url":"https://api.github.com/users/tsg/followers","following_url":"https://api.github.com/users/tsg/following{/other_user}","gists_url":"https://api.github.com/users/tsg/gists{/gist_id}","starred_url":"https://api.github.com/users/tsg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tsg/subscriptions","organizations_url":"https://api.github.com/users/tsg/orgs","repos_url":"https://api.github.com/users/tsg/repos","events_url":"https://api.github.com/users/tsg/events{/privacy}","received_events_url":"https://api.github.com/users/tsg/received_events","type":"User","site_admin":false},"created_at":"2020-02-27T18:32:44Z","updated_at":"2020-02-27T18:32:44Z","author_association":"NONE","body":"I like optimizing for consistency with the other search APIs, so I like this solution. I imagine parameters like source filtering could be supported in the future?\r\n\r\nI'm not sure about normalizing `@timestamp`, for the SIEM team I think it's still better to keep consistency with the regular search API, as we're going to generally support both in the same places.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/592425485","html_url":"https://github.com/elastic/elasticsearch/issues/52912#issuecomment-592425485","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52912","id":592425485,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjQyNTQ4NQ==","user":{"login":"costin","id":76245,"node_id":"MDQ6VXNlcjc2MjQ1","avatar_url":"https://avatars3.githubusercontent.com/u/76245?v=4","gravatar_id":"","url":"https://api.github.com/users/costin","html_url":"https://github.com/costin","followers_url":"https://api.github.com/users/costin/followers","following_url":"https://api.github.com/users/costin/following{/other_user}","gists_url":"https://api.github.com/users/costin/gists{/gist_id}","starred_url":"https://api.github.com/users/costin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/costin/subscriptions","organizations_url":"https://api.github.com/users/costin/orgs","repos_url":"https://api.github.com/users/costin/repos","events_url":"https://api.github.com/users/costin/events{/privacy}","received_events_url":"https://api.github.com/users/costin/received_events","type":"User","site_admin":false},"created_at":"2020-02-28T09:22:34Z","updated_at":"2020-02-28T09:22:34Z","author_association":"MEMBER","body":"> I imagine parameters like source filtering could be supported in the future?\r\n\r\nSure - a potential downside is that filtering would be applied across all documents which are likely to have different mappings.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/592526545","html_url":"https://github.com/elastic/elasticsearch/issues/52912#issuecomment-592526545","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52912","id":592526545,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjUyNjU0NQ==","user":{"login":"stacey-gammon","id":16563603,"node_id":"MDQ6VXNlcjE2NTYzNjAz","avatar_url":"https://avatars3.githubusercontent.com/u/16563603?v=4","gravatar_id":"","url":"https://api.github.com/users/stacey-gammon","html_url":"https://github.com/stacey-gammon","followers_url":"https://api.github.com/users/stacey-gammon/followers","following_url":"https://api.github.com/users/stacey-gammon/following{/other_user}","gists_url":"https://api.github.com/users/stacey-gammon/gists{/gist_id}","starred_url":"https://api.github.com/users/stacey-gammon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stacey-gammon/subscriptions","organizations_url":"https://api.github.com/users/stacey-gammon/orgs","repos_url":"https://api.github.com/users/stacey-gammon/repos","events_url":"https://api.github.com/users/stacey-gammon/events{/privacy}","received_events_url":"https://api.github.com/users/stacey-gammon/received_events","type":"User","site_admin":false},"created_at":"2020-02-28T14:04:04Z","updated_at":"2020-02-28T14:04:04Z","author_association":"NONE","body":"Sorry I don't really follow this.  What do you mean by \"as the source will contain the insert time value\" .. what is the \"insert\" time value?\r\n\r\nWhat do you mean by `returning the document _source instead of individual fields in a straight forward way (especially when dealing with large metrics mappings that can have 100s or 1000s of fields).`\r\n\r\nIs the alternative approach something like:\r\n\r\n```\r\n\"hits\" : {\r\n        \"total\" : {\r\n            \"value\" : 1000,\r\n            \"relation\" : \"eq\"\r\n        },\r\n        \"@timestamp\": \"2009-11-15T14:12:12\",\r\n        \"events\" : [\r\n            {\r\n                \"_index\" : \"my_index\",\r\n                \"_id\" : \"0\",\r\n                \"_source\" : {\r\n                    \"date\" : \"2009-11-15T14:12:12\",\r\n                    \"event\": {\r\n                        \"type\": \"process\",\r\n                        ...\r\n                    },\r\n```\r\n\r\nor you mean something like this, with no `_source` and no\r\n\r\n```\r\n\"hits\" : {\r\n        \"total\" : {\r\n            \"value\" : 1000,\r\n            \"relation\" : \"eq\"\r\n        },\r\n        \"events\" : [\r\n            {\r\n               \"type\": \"process\",\r\n               \"@timestamp\": \"2009-11-15T14:12:12\",\r\n               ....\r\n            }],\r\n```\r\n\r\nOr wait!  Maybe you are talking about what you did (are doing?) for SQL to help Kibana out with a smaller response format and do something like:\r\n\r\n```\r\n\"hits\" : {\r\n        \"total\" : {\r\n            \"value\" : 1000,\r\n            \"relation\" : \"eq\"\r\n        },\r\n        \"columns\": [\"date\", \"type\", ...]\r\n        \"rows\" : [\r\n          [\"2009-11-15T14:12:12\", \"process\", ...]\r\n       ]\r\n``` \r\n\r\nSo the field names aren't repeated for every single row.  \r\n\r\nAm I at all close to understanding what you are talking about? :) \r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/593367373","html_url":"https://github.com/elastic/elasticsearch/issues/52912#issuecomment-593367373","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52912","id":593367373,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MzM2NzM3Mw==","user":{"login":"costin","id":76245,"node_id":"MDQ6VXNlcjc2MjQ1","avatar_url":"https://avatars3.githubusercontent.com/u/76245?v=4","gravatar_id":"","url":"https://api.github.com/users/costin","html_url":"https://github.com/costin","followers_url":"https://api.github.com/users/costin/followers","following_url":"https://api.github.com/users/costin/following{/other_user}","gists_url":"https://api.github.com/users/costin/gists{/gist_id}","starred_url":"https://api.github.com/users/costin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/costin/subscriptions","organizations_url":"https://api.github.com/users/costin/orgs","repos_url":"https://api.github.com/users/costin/repos","events_url":"https://api.github.com/users/costin/events{/privacy}","received_events_url":"https://api.github.com/users/costin/received_events","type":"User","site_admin":false},"created_at":"2020-03-02T11:56:48Z","updated_at":"2020-03-02T11:56:48Z","author_association":"MEMBER","body":"> What do you mean by \"as the source will contain the insert time value\" .. what is the \"insert\" time value?\r\n\r\nWhatever was sent to ES without any processing.\r\nReturning `_source` means the original document is returned in case of a match without manipulating its content.\r\n\r\nThis impacts fields that can have multiple values in particular dates - there might be multiple formats defined for a field and the `_source` will contain one of them.\r\nNormalizing a field (`timestamp`) means the normalized value will be added next to the `_source` in the response.\r\n\r\nTo wit:\r\n\r\n1. Current approach - similar to that of ES:\r\n```\r\n \"events\" : [\r\n            {\r\n                \"_index\" : \"my_index\",\r\n                \"_id\" : \"0\",\r\n                \"_source\" : {\r\n                    \"date\" : \"2009-11-15T14:12:12\",\r\n                    \"event\": {\r\n                        \"type\": \"process\",\r\n                        ...\r\n                    },\r\n```\r\nEssentially the `_source` and metadata about the document.\r\n\r\n2. Normalized timestamp :\r\n```\r\n \"events\" : [\r\n            {\r\n                \"_index\" : \"my_index\",\r\n                \"_id\" : \"0\",\r\n               \"@timestamp\":\"2009-11-15:12:34:56Z\"\r\n                \"_source\" : {\r\n                    \"date\" : \"2009-11-15T14:12:12\",\r\n                    \"event\": {\r\n                        \"type\": \"process\",\r\n                        ...\r\n                    },\r\n```\r\n\r\n`timestamp` is extracted and transformed (if needed) into a dedicated format (ISO) regardless of its source representation.\r\n\r\n3. Individual fields: \r\n```\r\n \"events\" : [\r\n            {\r\n                \"_index\" : \"my_index\",\r\n                \"_id\" : \"0\",\r\n               \"@timestamp\":\"2009-11-15:12:34:56Z\"\r\n               \"date\" : \"2009-11-15T14:12:12\",\r\n                 \"event\": {\r\n                     \"type\": \"process\",\r\n                      ...\r\n                 },\r\n```\r\nAll fields are extracted from `_source` - this however doesn't work on metrics since it hits various limitations on the number of maximum doc values or source fields that can be extracted.\r\n\r\nThis is a problem in SQL has as well however SQL takes this approach because:\r\na. the fields are required, the response being tabular\r\nb. SQL has projections, EQL does not. So extracting fields is ..useless.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/629266445","html_url":"https://github.com/elastic/elasticsearch/issues/52912#issuecomment-629266445","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52912","id":629266445,"node_id":"MDEyOklzc3VlQ29tbWVudDYyOTI2NjQ0NQ==","user":{"login":"costin","id":76245,"node_id":"MDQ6VXNlcjc2MjQ1","avatar_url":"https://avatars3.githubusercontent.com/u/76245?v=4","gravatar_id":"","url":"https://api.github.com/users/costin","html_url":"https://github.com/costin","followers_url":"https://api.github.com/users/costin/followers","following_url":"https://api.github.com/users/costin/following{/other_user}","gists_url":"https://api.github.com/users/costin/gists{/gist_id}","starred_url":"https://api.github.com/users/costin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/costin/subscriptions","organizations_url":"https://api.github.com/users/costin/orgs","repos_url":"https://api.github.com/users/costin/repos","events_url":"https://api.github.com/users/costin/events{/privacy}","received_events_url":"https://api.github.com/users/costin/received_events","type":"User","site_admin":false},"created_at":"2020-05-15T14:28:06Z","updated_at":"2020-05-15T14:28:06Z","author_association":"MEMBER","body":"As there has been no update since Mar 2nd, I'm closing this ticket. The response does not change and the document source will be returned in full.","performed_via_github_app":null}]