{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/3403","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3403/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3403/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3403/events","html_url":"https://github.com/elastic/elasticsearch/issues/3403","id":17337948,"node_id":"MDU6SXNzdWUxNzMzNzk0OA==","number":3403,"title":"Save percolation result to document itself","user":{"login":"skade","id":47542,"node_id":"MDQ6VXNlcjQ3NTQy","avatar_url":"https://avatars2.githubusercontent.com/u/47542?v=4","gravatar_id":"","url":"https://api.github.com/users/skade","html_url":"https://github.com/skade","followers_url":"https://api.github.com/users/skade/followers","following_url":"https://api.github.com/users/skade/following{/other_user}","gists_url":"https://api.github.com/users/skade/gists{/gist_id}","starred_url":"https://api.github.com/users/skade/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skade/subscriptions","organizations_url":"https://api.github.com/users/skade/orgs","repos_url":"https://api.github.com/users/skade/repos","events_url":"https://api.github.com/users/skade/events{/privacy}","received_events_url":"https://api.github.com/users/skade/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"assignees":[{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false}],"milestone":null,"comments":8,"created_at":"2013-07-29T12:58:39Z","updated_at":"2014-08-08T13:44:45Z","closed_at":"2014-08-08T13:44:45Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Referencing:\n\nhttps://github.com/elasticsearch/elasticsearch/issues/3173#issuecomment-21196963\nhttps://twitter.com/Argorak/statuses/357893281193017344\nhttps://twitter.com/jeroenrosenberg/status/361807942443479040\n\nI'd like to propose an additional feature for the percolator: save the result in the document itself (or a child document, avoiding updating the document). This could be used e.g. for tagging of input data for later search by certain rules.\n\nI often use the percolator to categorize incoming data. This data is given by external services and is messy, though fixable by simple \"search and clean\". We use the percolator to register (sometimes user-created) queries that map those entries to our internal values.\n\nCurrently, this works like this:\n- Percolate the document\n- Write the result to the target field\n- Index the document\n\nAllowing this within the percolation step itself would vastly reduce our network overhead in this case and (if bulk percolation happens) also allow us to do bulk actions in one step.\n\nThe interface could be similar to certain queries (like the `terms` query):\n\n`{\n   ... percolation parameters\n   \"save_to\": { \"path\": \"data.categories\" }\n}`\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}