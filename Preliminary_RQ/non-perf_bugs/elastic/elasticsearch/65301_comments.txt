[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/731044610","html_url":"https://github.com/elastic/elasticsearch/issues/65301#issuecomment-731044610","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/65301","id":731044610,"node_id":"MDEyOklzc3VlQ29tbWVudDczMTA0NDYxMA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-11-20T09:11:06Z","updated_at":"2020-11-20T09:11:06Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-analytics-geo (Team:Analytics)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/731101603","html_url":"https://github.com/elastic/elasticsearch/issues/65301#issuecomment-731101603","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/65301","id":731101603,"node_id":"MDEyOklzc3VlQ29tbWVudDczMTEwMTYwMw==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2020-11-20T11:01:36Z","updated_at":"2020-11-20T11:01:36Z","author_association":"CONTRIBUTOR","body":"This is me. I'll have a look in a few hours. Feel free to mute if it fails\na bunch.\n\nOn Fri, Nov 20, 2020, 04:11 Elastic Machine <notifications@github.com>\nwrote:\n\n> Pinging @elastic/es-analytics-geo\n> <https://github.com/orgs/elastic/teams/es-analytics-geo> (Team:Analytics)\n>\n> â€”\n> You are receiving this because you are on a team that was mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/elastic/elasticsearch/issues/65301#issuecomment-731044610>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AABUXIXXBKM7MHAKP4DVUU3SQYXDXANCNFSM4T4QF56Q>\n> .\n>\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/731244835","html_url":"https://github.com/elastic/elasticsearch/issues/65301#issuecomment-731244835","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/65301","id":731244835,"node_id":"MDEyOklzc3VlQ29tbWVudDczMTI0NDgzNQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2020-11-20T15:44:49Z","updated_at":"2020-11-20T15:44:49Z","author_association":"CONTRIBUTOR","body":"This one looks to be caused by #64454. I've pinged @swallez to see if he'd like to take it.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/731253167","html_url":"https://github.com/elastic/elasticsearch/issues/65301#issuecomment-731253167","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/65301","id":731253167,"node_id":"MDEyOklzc3VlQ29tbWVudDczMTI1MzE2Nw==","user":{"login":"swallez","id":213730,"node_id":"MDQ6VXNlcjIxMzczMA==","avatar_url":"https://avatars2.githubusercontent.com/u/213730?v=4","gravatar_id":"","url":"https://api.github.com/users/swallez","html_url":"https://github.com/swallez","followers_url":"https://api.github.com/users/swallez/followers","following_url":"https://api.github.com/users/swallez/following{/other_user}","gists_url":"https://api.github.com/users/swallez/gists{/gist_id}","starred_url":"https://api.github.com/users/swallez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/swallez/subscriptions","organizations_url":"https://api.github.com/users/swallez/orgs","repos_url":"https://api.github.com/users/swallez/repos","events_url":"https://api.github.com/users/swallez/events{/privacy}","received_events_url":"https://api.github.com/users/swallez/received_events","type":"User","site_admin":false},"created_at":"2020-11-20T15:59:27Z","updated_at":"2020-11-20T15:59:27Z","author_association":"MEMBER","body":"@nik9000 looking at it!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/731268687","html_url":"https://github.com/elastic/elasticsearch/issues/65301#issuecomment-731268687","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/65301","id":731268687,"node_id":"MDEyOklzc3VlQ29tbWVudDczMTI2ODY4Nw==","user":{"login":"swallez","id":213730,"node_id":"MDQ6VXNlcjIxMzczMA==","avatar_url":"https://avatars2.githubusercontent.com/u/213730?v=4","gravatar_id":"","url":"https://api.github.com/users/swallez","html_url":"https://github.com/swallez","followers_url":"https://api.github.com/users/swallez/followers","following_url":"https://api.github.com/users/swallez/following{/other_user}","gists_url":"https://api.github.com/users/swallez/gists{/gist_id}","starred_url":"https://api.github.com/users/swallez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/swallez/subscriptions","organizations_url":"https://api.github.com/users/swallez/orgs","repos_url":"https://api.github.com/users/swallez/repos","events_url":"https://api.github.com/users/swallez/events{/privacy}","received_events_url":"https://api.github.com/users/swallez/received_events","type":"User","site_admin":false},"created_at":"2020-11-20T16:27:25Z","updated_at":"2020-11-20T16:27:25Z","author_association":"MEMBER","body":"@nik9000 \r\n\r\nThe tests fails only with this seed. Debugging to understand why `filter` is `null` and causes this exception, I found that in `InternalMappedRareTerms` the `filter` variable ends up being `null` if all aggregations have `isMapped() == false`, which turns out to be the case with this seed.\r\n\r\nhttps://github.com/elastic/elasticsearch/blob/f7e840b012f6778cadb4d9e52fdbe44374c21ac5/server/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/InternalMappedRareTerms.java#L96-L98\r\n\r\nI don't know what should be the correct filter value in that case, so can you take back this issue?\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/731332005","html_url":"https://github.com/elastic/elasticsearch/issues/65301#issuecomment-731332005","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/65301","id":731332005,"node_id":"MDEyOklzc3VlQ29tbWVudDczMTMzMjAwNQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2020-11-20T18:16:46Z","updated_at":"2020-11-20T18:16:46Z","author_association":"CONTRIBUTOR","body":"Closed by 956ae93fdb9db47c4a55bb201eddae0f05bbd2d4 and 56605e4d9a7ca8423a85d9333ce12a4723c35d9e, both backports.","performed_via_github_app":null}]