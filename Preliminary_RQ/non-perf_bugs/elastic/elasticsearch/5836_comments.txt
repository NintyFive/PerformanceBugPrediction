[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/40616735","html_url":"https://github.com/elastic/elasticsearch/issues/5836#issuecomment-40616735","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5836","id":40616735,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNjE2NzM1","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2014-04-16T15:56:22Z","updated_at":"2014-04-16T15:56:22Z","author_association":"CONTRIBUTOR","body":"> Maybe it could fall back to decreasingly less sophisticated highlighters, until it just can't do anything. So if the request indicates the fvh be used, and that's not compatible with a particular field, it tries the postings highlighter, then the plain highlighter, then nothing.\n\nThe highlighters don't really have an order of sophistication.  You can order them by creation date (`plain`, `fvh`, `postings`) but that is about it.  Each one targets a specific set of stored data (nothing, term vectors, postings respectively).  `postings` is the only highlighter that supports sentence based fragmentation and it only supports it.  Ditto for some of the other assumptions it makes about scoring the fragments (BM25, ignore weights in the query).  With that in mind I don't know how this kind of thing is going to work.\n\nThis is part of the reason I stared work on https://github.com/wikimedia/search-highlighter .  It isn't a silver bullet for your concerns, but might help.\n\n> Additionally, I'd like to see a highlight parameter to exclude fields. Another use case we have is, \"I want to highlight all matched fields (whatever they are), except this array of 'large text' fields that I'm not currently showing the user\" -- this would really be a bit of a performance optimization, from the client. Our data model includes a couple of large text fields (10k+) per document that wouldn't need to be highlighted except at very specific times -- the other fields are small and generally need to be highlighted in one call to ES.\n\nAdding an exclusion pattern on top of the inclusion pattern makes sense to me.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/40618552","html_url":"https://github.com/elastic/elasticsearch/issues/5836#issuecomment-40618552","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5836","id":40618552,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNjE4NTUy","user":{"login":"eeeebbbbrrrr","id":5117238,"node_id":"MDQ6VXNlcjUxMTcyMzg=","avatar_url":"https://avatars3.githubusercontent.com/u/5117238?v=4","gravatar_id":"","url":"https://api.github.com/users/eeeebbbbrrrr","html_url":"https://github.com/eeeebbbbrrrr","followers_url":"https://api.github.com/users/eeeebbbbrrrr/followers","following_url":"https://api.github.com/users/eeeebbbbrrrr/following{/other_user}","gists_url":"https://api.github.com/users/eeeebbbbrrrr/gists{/gist_id}","starred_url":"https://api.github.com/users/eeeebbbbrrrr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eeeebbbbrrrr/subscriptions","organizations_url":"https://api.github.com/users/eeeebbbbrrrr/orgs","repos_url":"https://api.github.com/users/eeeebbbbrrrr/repos","events_url":"https://api.github.com/users/eeeebbbbrrrr/events{/privacy}","received_events_url":"https://api.github.com/users/eeeebbbbrrrr/received_events","type":"User","site_admin":false},"created_at":"2014-04-16T16:10:31Z","updated_at":"2014-04-16T16:10:31Z","author_association":"NONE","body":"Fair point on the \"order of sophistication\" bit.  Maybe instead it's a user provided list, in the order the user would like ES to try?  \n\nI'd also be okay with it just silently continuing to the next field if the current field's mapping isn't compatible with the specified highlighter.  That would be a BIG win for us.\n\nMaybe it's not obvious, but right now the highlighter API requires the process requesting highlights to have a fairly detailed understanding of the data model, otherwise the request fails with an exception.  This isn't really fair in a distributed environment, so I'm looking for ways to make ES more tolerant of ignorance.\n\nWhatdoyathinkaboutthat?\n\nWe request the entire value back (`\"number_of_fragments\": 0`), and so we're most interested in either getting back what `fvh` can give us (since it highlights phrases), or just nothing at all.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/40652194","html_url":"https://github.com/elastic/elasticsearch/issues/5836#issuecomment-40652194","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5836","id":40652194,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNjUyMTk0","user":{"login":"eeeebbbbrrrr","id":5117238,"node_id":"MDQ6VXNlcjUxMTcyMzg=","avatar_url":"https://avatars3.githubusercontent.com/u/5117238?v=4","gravatar_id":"","url":"https://api.github.com/users/eeeebbbbrrrr","html_url":"https://github.com/eeeebbbbrrrr","followers_url":"https://api.github.com/users/eeeebbbbrrrr/followers","following_url":"https://api.github.com/users/eeeebbbbrrrr/following{/other_user}","gists_url":"https://api.github.com/users/eeeebbbbrrrr/gists{/gist_id}","starred_url":"https://api.github.com/users/eeeebbbbrrrr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eeeebbbbrrrr/subscriptions","organizations_url":"https://api.github.com/users/eeeebbbbrrrr/orgs","repos_url":"https://api.github.com/users/eeeebbbbrrrr/repos","events_url":"https://api.github.com/users/eeeebbbbrrrr/events{/privacy}","received_events_url":"https://api.github.com/users/eeeebbbbrrrr/received_events","type":"User","site_admin":false},"created_at":"2014-04-16T21:05:40Z","updated_at":"2014-04-16T21:06:11Z","author_association":"NONE","body":"It was pretty easy to knock out a \"lenient\" property to convince ES to silently skip highlighting fields with incompatible highlighters.  So I did that in bc795448dd910d2ba2442ccdcd5c025926a2f28c.\n\nNext up will be an \"excludes\" array so that you can do:\n\n``` json\n{\n   \"highlight\": {\n       \"*\": {\n            \"type\": \"fvh\",\n            \"lenient\": true,\n            \"excludes\": [ \"bigfield1\", \"bigfield2\", \"...\" ]\n       }\n  }\n}\n```\n\nThoughts?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/40716970","html_url":"https://github.com/elastic/elasticsearch/issues/5836#issuecomment-40716970","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5836","id":40716970,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNzE2OTcw","user":{"login":"synhershko","id":212252,"node_id":"MDQ6VXNlcjIxMjI1Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/212252?v=4","gravatar_id":"","url":"https://api.github.com/users/synhershko","html_url":"https://github.com/synhershko","followers_url":"https://api.github.com/users/synhershko/followers","following_url":"https://api.github.com/users/synhershko/following{/other_user}","gists_url":"https://api.github.com/users/synhershko/gists{/gist_id}","starred_url":"https://api.github.com/users/synhershko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/synhershko/subscriptions","organizations_url":"https://api.github.com/users/synhershko/orgs","repos_url":"https://api.github.com/users/synhershko/repos","events_url":"https://api.github.com/users/synhershko/events{/privacy}","received_events_url":"https://api.github.com/users/synhershko/received_events","type":"User","site_admin":false},"created_at":"2014-04-17T14:02:32Z","updated_at":"2014-04-17T14:02:32Z","author_association":"CONTRIBUTOR","body":"> Maybe it's not obvious, but right now the highlighter API requires the process requesting\n> highlights to have a fairly detailed understanding of the data model, otherwise the request\n> fails with an exception. This isn't really fair in a distributed environment, so I'm looking for ways\n> to make ES more tolerant of ignorance.\n\nThis is very obvious, and I'd say pretty much by design. Yes ES tries to simplify things by auto-detecting mappings etc but as your system grows you'd see you really have to specify mappings on your own.\n\nKnowing the data model and carefully designing it and working intimately with it is pretty much a prerequisite, and not only with ES. And it's perfectly fair for a data-storage solution (or a search server, however you'd like to call it).\n\nI'm +1 for the `lenient` setting and the whitelist / blacklist approach for highlighting, although in my experience it is ususally just easier to be explicit about what you are trying to do. Going forward with maintaining a blacklist (aka `excludes`) is a show killer for systems that have an evolving data model (e.g. new fields being introduced)\n\nMy 2 cents.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/71881209","html_url":"https://github.com/elastic/elasticsearch/issues/5836#issuecomment-71881209","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5836","id":71881209,"node_id":"MDEyOklzc3VlQ29tbWVudDcxODgxMjA5","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"created_at":"2015-01-28T17:51:02Z","updated_at":"2015-01-28T17:51:02Z","author_association":"MEMBER","body":"Having an exclude mode will also be helpful for use cases like this one (https://github.com/elasticsearch/kibana/issues/2782).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/259781392","html_url":"https://github.com/elastic/elasticsearch/issues/5836#issuecomment-259781392","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5836","id":259781392,"node_id":"MDEyOklzc3VlQ29tbWVudDI1OTc4MTM5Mg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-11-10T19:18:42Z","updated_at":"2016-11-10T19:18:42Z","author_association":"CONTRIBUTOR","body":"Nothing further in 2.5 years, closing\n","performed_via_github_app":null}]