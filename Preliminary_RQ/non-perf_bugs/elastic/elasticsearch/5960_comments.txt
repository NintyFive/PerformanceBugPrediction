[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/41644787","html_url":"https://github.com/elastic/elasticsearch/issues/5960#issuecomment-41644787","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5960","id":41644787,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNjQ0Nzg3","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2014-04-29T06:18:08Z","updated_at":"2014-04-29T06:18:08Z","author_association":"MEMBER","body":"I am conflicted, if we remove this, and following the same logic, we should remove `DELETE /_index_`. On the other hand, can easily see how maybe someone can make a mistake here...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/41652268","html_url":"https://github.com/elastic/elasticsearch/issues/5960#issuecomment-41652268","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5960","id":41652268,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNjUyMjY4","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2014-04-29T08:28:10Z","updated_at":"2014-04-29T08:28:10Z","author_association":"MEMBER","body":"So may be we should introduce a new setting like `action.destructive_requires_confirmation` (default to `false`) and if set only allow operations like:\n\n```\n# Scenario 1: index level\nPUT /{index}\n\n# Will be rejected\nDELETE /{index}\n\n# will work\nDELETE /{index}/_confirm\n\n# Scenario 2: type level\nPOST /{index}/{type}\n{ \"foo\" : \"bar\" }\n\n# Will be rejected\nDELETE /{index}/{type}\n\n# Will work\nDELETE /{index}/{type}/_confirm\n```\n\nSo, we don't break anything with that change which is even better but we let OPS decide if we want to activate that feature or not.\n\nMay be there are some cleaner way to do this?\nI mean like we do with existing on disk indices which are not in cluster state. We can DELETE an index only after some minutes by setting `indices.delete.interval: 5m` (default to 0 - means immediate removal).\n\nIn that case, the index should not be available anymore for search but we could fire a command like:\n\n```\nDELETE /{index}/_cancel\n```\n\nAny other ideas? Or should we close this \"issue\"? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/41910512","html_url":"https://github.com/elastic/elasticsearch/issues/5960#issuecomment-41910512","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5960","id":41910512,"node_id":"MDEyOklzc3VlQ29tbWVudDQxOTEwNTEy","user":{"login":"ghoumard","id":1219245,"node_id":"MDQ6VXNlcjEyMTkyNDU=","avatar_url":"https://avatars1.githubusercontent.com/u/1219245?v=4","gravatar_id":"","url":"https://api.github.com/users/ghoumard","html_url":"https://github.com/ghoumard","followers_url":"https://api.github.com/users/ghoumard/followers","following_url":"https://api.github.com/users/ghoumard/following{/other_user}","gists_url":"https://api.github.com/users/ghoumard/gists{/gist_id}","starred_url":"https://api.github.com/users/ghoumard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghoumard/subscriptions","organizations_url":"https://api.github.com/users/ghoumard/orgs","repos_url":"https://api.github.com/users/ghoumard/repos","events_url":"https://api.github.com/users/ghoumard/events{/privacy}","received_events_url":"https://api.github.com/users/ghoumard/received_events","type":"User","site_admin":false},"created_at":"2014-05-01T13:41:00Z","updated_at":"2014-05-01T13:41:00Z","author_association":"NONE","body":"We make this mistake, so we definitively love to see a circuit-breaker here. \nI'm not sure about the indices.delete.interval: 5m  , but the action.destructive_requires_confirmation settings looks a good start.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/60361034","html_url":"https://github.com/elastic/elasticsearch/issues/5960#issuecomment-60361034","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5960","id":60361034,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMzYxMDM0","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-10-24T08:53:36Z","updated_at":"2014-10-24T08:53:36Z","author_association":"CONTRIBUTOR","body":"We talked about this today and feel that we should keep the existing API, and not try to provide too much protection as we will end up hurting existing users.\n\nWhat we can do is to reject DELETE requests which come with a body, when a body is not expected.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/60361243","html_url":"https://github.com/elastic/elasticsearch/issues/5960#issuecomment-60361243","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5960","id":60361243,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMzYxMjQz","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-10-24T08:55:30Z","updated_at":"2014-10-24T08:55:30Z","author_association":"CONTRIBUTOR","body":"Closed in favour of #8217\n","performed_via_github_app":null}]