{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/25261","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25261/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25261/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25261/events","html_url":"https://github.com/elastic/elasticsearch/issues/25261","id":236246471,"node_id":"MDU6SXNzdWUyMzYyNDY0NzE=","number":25261,"title":"Fixed order by bug in complex aggregations query","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars3.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-06-15T16:27:17Z","updated_at":"2017-06-15T16:36:00Z","closed_at":"2017-06-15T16:35:16Z","author_association":"NONE","active_lock_reason":null,"body":"<!-- Feature request -->\r\n**Describe the feature**:\r\n\r\nIf you have multiple group by columns,\r\nThere is a problem that order by is not set properly\r\nAt this time, order by is based on other equations such as sum, not count.\r\n\r\n<!-- Bug report -->\r\n\r\n**Elasticsearch version**: 5.0.1\r\n\r\n\r\n\r\n**like a this case**\r\n```\r\nselect id, docsNo, sum(hits) as hits\r\nfrom docs-*\r\nwhere playDate = \"2017-06-15\"\r\ngroup by id, docsNo\r\norder by hits desc\r\n```\r\n\r\nIn this case, sum is hidden in docsNo\r\nIt is ordered by the number of docs according to id.\r\n\r\n\r\ni want use this case, and i want fix it\r\n","closed_by":null,"performed_via_github_app":null}