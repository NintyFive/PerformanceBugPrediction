[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/171593044","html_url":"https://github.com/elastic/elasticsearch/issues/15979#issuecomment-171593044","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15979","id":171593044,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTU5MzA0NA==","user":{"login":"sabarnath","id":5635942,"node_id":"MDQ6VXNlcjU2MzU5NDI=","avatar_url":"https://avatars2.githubusercontent.com/u/5635942?v=4","gravatar_id":"","url":"https://api.github.com/users/sabarnath","html_url":"https://github.com/sabarnath","followers_url":"https://api.github.com/users/sabarnath/followers","following_url":"https://api.github.com/users/sabarnath/following{/other_user}","gists_url":"https://api.github.com/users/sabarnath/gists{/gist_id}","starred_url":"https://api.github.com/users/sabarnath/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sabarnath/subscriptions","organizations_url":"https://api.github.com/users/sabarnath/orgs","repos_url":"https://api.github.com/users/sabarnath/repos","events_url":"https://api.github.com/users/sabarnath/events{/privacy}","received_events_url":"https://api.github.com/users/sabarnath/received_events","type":"User","site_admin":false},"created_at":"2016-01-14T10:03:09Z","updated_at":"2016-01-14T10:03:09Z","author_association":"NONE","body":"Note : i have added my own plugins too.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/171600798","html_url":"https://github.com/elastic/elasticsearch/issues/15979#issuecomment-171600798","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15979","id":171600798,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTYwMDc5OA==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2016-01-14T10:31:26Z","updated_at":"2016-01-14T10:31:26Z","author_association":"MEMBER","body":"What happens if you don't install your plugin?\nAre you using the official distribution? Or are you building your own elasticsearch version?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/171609560","html_url":"https://github.com/elastic/elasticsearch/issues/15979#issuecomment-171609560","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15979","id":171609560,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTYwOTU2MA==","user":{"login":"sabarnath","id":5635942,"node_id":"MDQ6VXNlcjU2MzU5NDI=","avatar_url":"https://avatars2.githubusercontent.com/u/5635942?v=4","gravatar_id":"","url":"https://api.github.com/users/sabarnath","html_url":"https://github.com/sabarnath","followers_url":"https://api.github.com/users/sabarnath/followers","following_url":"https://api.github.com/users/sabarnath/following{/other_user}","gists_url":"https://api.github.com/users/sabarnath/gists{/gist_id}","starred_url":"https://api.github.com/users/sabarnath/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sabarnath/subscriptions","organizations_url":"https://api.github.com/users/sabarnath/orgs","repos_url":"https://api.github.com/users/sabarnath/repos","events_url":"https://api.github.com/users/sabarnath/events{/privacy}","received_events_url":"https://api.github.com/users/sabarnath/received_events","type":"User","site_admin":false},"created_at":"2016-01-14T10:45:00Z","updated_at":"2016-01-14T10:45:00Z","author_association":"NONE","body":"yes . I tried without our plugins we face some other issues,\n\n like below\nNote : We are upgrade the 1.5.1 into 2.1.1 , I just copied existing(1.5.1) data folder into current(2.1.1) version\n\n[2016-01-14 15:51:50,734][ERROR][gateway                  ] [es_f1_01] failed to read local state, exiting...\njava.lang.IllegalStateException: unable to upgrade the mappings for the index [medzo_vendor_thing], reason: [Mapper for [payload] conflicts with existing mapping in other types[mapper [payload.explanation] has different [store] values, mapper [payload.explanation] has different [omit_norms] values, cannot change from disable to enabled, mapper [payload.explanation] has different [analyzer]]]\n    at org.elasticsearch.cluster.metadata.MetaDataIndexUpgradeService.checkMappingsCompatibility(MetaDataIndexUpgradeService.java:339)\n    at org.elasticsearch.cluster.metadata.MetaDataIndexUpgradeService.upgradeIndexMetaData(MetaDataIndexUpgradeService.java:116)\n    at org.elasticsearch.gateway.GatewayMetaState.pre20Upgrade(GatewayMetaState.java:228)\n    at org.elasticsearch.gateway.GatewayMetaState.<init>(GatewayMetaState.java:87)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)\n    at org.elasticsearch.common.inject.DefaultConstructionProxyFactory$1.newInstance(DefaultConstructionProxyFactory.java:56)\n    at org.elasticsearch.common.inject.ConstructorInjector.construct(ConstructorInjector.java:86)\n    at org.elasticsearch.common.inject.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:104)\n    at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:47)\n    at org.elasticsearch.common.inject.InjectorImpl.callInContext(InjectorImpl.java:887)\n    at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:43)\n    at org.elasticsearch.common.inject.Scopes$1$1.get(Scopes.java:59)\n    at org.elasticsearch.common.inject.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:46)\n    at org.elasticsearch.common.inject.SingleParameterInjector.inject(SingleParameterInjector.java:42)\n    at org.elasticsearch.common.inject.SingleParameterInjector.getAll(SingleParameterInjector.java:66)\n    at org.elasticsearch.common.inject.ConstructorInjector.construct(ConstructorInjector.java:85)\n    at org.elasticsearch.common.inject.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:104)\n    at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:47)\n    at org.elasticsearch.common.inject.InjectorImpl.callInContext(InjectorImpl.java:887)\n    at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:43)\n    at org.elasticsearch.common.inject.Scopes$1$1.get(Scopes.java:59)\n    at org.elasticsearch.common.inject.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:46)\n    at org.elasticsearch.common.inject.InjectorBuilder$1.call(InjectorBuilder.java:201)\n    at org.elasticsearch.common.inject.InjectorBuilder$1.call(InjectorBuilder.java:193)\n    at org.elasticsearch.common.inject.InjectorImpl.callInContext(InjectorImpl.java:880)\n    at org.elasticsearch.common.inject.InjectorBuilder.loadEagerSingletons(InjectorBuilder.java:193)\n    at org.elasticsearch.common.inject.InjectorBuilder.injectDynamically(InjectorBuilder.java:175)\n    at org.elasticsearch.common.inject.InjectorBuilder.build(InjectorBuilder.java:110)\n    at org.elasticsearch.common.inject.Guice.createInjector(Guice.java:93)\n    at org.elasticsearch.common.inject.Guice.createInjector(Guice.java:70)\n    at org.elasticsearch.common.inject.ModulesBuilder.createInjector(ModulesBuilder.java:46)\n    at org.elasticsearch.node.Node.<init>(Node.java:200)\n    at org.elasticsearch.node.Node.<init>(Node.java:128)\n    at org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:145)\n    at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:178)\n    at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:285)\n    at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:35)\nCaused by: java.lang.IllegalArgumentException: Mapper for [payload] conflicts with existing mapping in other types[mapper [payload.explanation] has different [store] values, mapper [payload.explanation] has different [omit_norms] values, cannot change from disable to enabled, mapper [payload.explanation] has different [analyzer]]\n    at org.elasticsearch.index.mapper.MapperService.checkNewMappersCompatibility(MapperService.java:363)\n    at org.elasticsearch.index.mapper.MapperService.merge(MapperService.java:319)\n    at org.elasticsearch.index.mapper.MapperService.merge(MapperService.java:265)\n    at org.elasticsearch.cluster.metadata.MetaDataIndexUpgradeService.checkMappingsCompatibility(MetaDataIndexUpgradeService.java:333)\n    ... 39 more\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/171610998","html_url":"https://github.com/elastic/elasticsearch/issues/15979#issuecomment-171610998","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15979","id":171610998,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTYxMDk5OA==","user":{"login":"sabarnath","id":5635942,"node_id":"MDQ6VXNlcjU2MzU5NDI=","avatar_url":"https://avatars2.githubusercontent.com/u/5635942?v=4","gravatar_id":"","url":"https://api.github.com/users/sabarnath","html_url":"https://github.com/sabarnath","followers_url":"https://api.github.com/users/sabarnath/followers","following_url":"https://api.github.com/users/sabarnath/following{/other_user}","gists_url":"https://api.github.com/users/sabarnath/gists{/gist_id}","starred_url":"https://api.github.com/users/sabarnath/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sabarnath/subscriptions","organizations_url":"https://api.github.com/users/sabarnath/orgs","repos_url":"https://api.github.com/users/sabarnath/repos","events_url":"https://api.github.com/users/sabarnath/events{/privacy}","received_events_url":"https://api.github.com/users/sabarnath/received_events","type":"User","site_admin":false},"created_at":"2016-01-14T10:52:38Z","updated_at":"2016-01-14T10:52:38Z","author_association":"NONE","body":"Seems , We had own analyzer in setting of 1.5.1 not supporting current version .\n\nFollowing  error mapper : mapper [payload.explanation]\n\n\"explanation\": {\n\n```\n\"store\": true,\n\"norms\": {\n    \"enabled\": false\n},\n\"analyzer\": \"vmWhitespaceAnalyzer\",\n\"type\": \"string\"\n```\n\n## }\n\nSee this is our own custom analyzer : \n\n\"vmWhitespaceAnalyzer\":{\n                    \"type\":\"pattern\",\n                    \"flags\":\"DOTALL\",\n                    \"lowercase\":\"true\",\n                    \"pattern\":\"\\s+\",\n                    \"stopwords\":\"_none_\"\n                }\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/171615250","html_url":"https://github.com/elastic/elasticsearch/issues/15979#issuecomment-171615250","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15979","id":171615250,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTYxNTI1MA==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2016-01-14T11:12:31Z","updated_at":"2016-01-14T11:12:31Z","author_association":"MEMBER","body":"So without your plugin, elasticsearch is able to go further than:\n\n```\n[2016-01-14 15:18:50,490][INFO ][node ] [es_f1_01] initializing ...\n```\n\nAs I can now see:\n\n```\n[2016-01-14 15:51:50,734][ERROR][gateway ] [es_f1_01] failed to read local state, exiting...\n```\n\nWhich happens after plugin initialization.\n\nSo I'm closing this ticket because as you can see your plugin seems to be incorrect here. May be it was not upgraded???\nFeel free to follow up on discuss.elastic.co.\n\nAbout the other issue you are seeing, I'd also recommend asking on discuss as we and the community can better help you there.\n","performed_via_github_app":null}]