{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/7363","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7363/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7363/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7363/events","html_url":"https://github.com/elastic/elasticsearch/issues/7363","id":40781470,"node_id":"MDU6SXNzdWU0MDc4MTQ3MA==","number":7363,"title":"Unassigned shards","user":{"login":"arctica","id":870630,"node_id":"MDQ6VXNlcjg3MDYzMA==","avatar_url":"https://avatars2.githubusercontent.com/u/870630?v=4","gravatar_id":"","url":"https://api.github.com/users/arctica","html_url":"https://github.com/arctica","followers_url":"https://api.github.com/users/arctica/followers","following_url":"https://api.github.com/users/arctica/following{/other_user}","gists_url":"https://api.github.com/users/arctica/gists{/gist_id}","starred_url":"https://api.github.com/users/arctica/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arctica/subscriptions","organizations_url":"https://api.github.com/users/arctica/orgs","repos_url":"https://api.github.com/users/arctica/repos","events_url":"https://api.github.com/users/arctica/events{/privacy}","received_events_url":"https://api.github.com/users/arctica/received_events","type":"User","site_admin":false},"labels":[{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":17,"created_at":"2014-08-21T08:07:17Z","updated_at":"2014-08-25T16:15:44Z","closed_at":"2014-08-25T16:15:44Z","author_association":"NONE","active_lock_reason":null,"body":"I have set up an ELK system to monitor some webserver accesslogs and other stuff.\nStarted out with 1 webserver running logstash-forwarder and 1 server running logstash and elasticsearch. Then I added 2 other webservers also running logstash-forwarder. All seemed fine.\n\nBut as soon as I added another server with logstash + elasticsearch, I started to see unassigned shards, specifically replicas. I have the default of 5 shards and 1 replica.\n\nEvery day a few replica shards don't seem to get assigned to the other node.\nLogstash is version 1.4.2-1-2c0f5a1\nElasticsearch is version 1.3.1\nThey were installed using the official debian repositories from elasticsearch.org\n\nI was not able to spot any errors or other messages related to shard failures in the log on any of the ES nodes. Unassigned shards not only happen for logstash indices but also for marvel ones.\n\nRight now the cluster is operational but as soon as I get a hardware failure on one of the nodes I'll encounter dataloss.\n\nI tried to set replicas to 0 and cluster went to green. Set it back to 1 and the exact same shards are unassigned once again and cluster stays in yellow. I use the HQ plugin to monitor cluster state.\n\nWhat could be the cause for unassigned shards and how can I prevent this from happening?\nI have found quite a bunch of people having the same issue via google with various approaches how to solve this problem but nothing conclusive.\nRestarting any of the nodes, nor bringing the whole cluster down and back up helped.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}