{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/6384","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6384/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6384/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6384/events","html_url":"https://github.com/elastic/elasticsearch/issues/6384","id":34826248,"node_id":"MDU6SXNzdWUzNDgyNjI0OA==","number":6384,"title":"Data lose after downgrade from ES 1.2.0 to ES 1.1.1","user":{"login":"JeffreyZZ","id":7685299,"node_id":"MDQ6VXNlcjc2ODUyOTk=","avatar_url":"https://avatars3.githubusercontent.com/u/7685299?v=4","gravatar_id":"","url":"https://api.github.com/users/JeffreyZZ","html_url":"https://github.com/JeffreyZZ","followers_url":"https://api.github.com/users/JeffreyZZ/followers","following_url":"https://api.github.com/users/JeffreyZZ/following{/other_user}","gists_url":"https://api.github.com/users/JeffreyZZ/gists{/gist_id}","starred_url":"https://api.github.com/users/JeffreyZZ/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JeffreyZZ/subscriptions","organizations_url":"https://api.github.com/users/JeffreyZZ/orgs","repos_url":"https://api.github.com/users/JeffreyZZ/repos","events_url":"https://api.github.com/users/JeffreyZZ/events{/privacy}","received_events_url":"https://api.github.com/users/JeffreyZZ/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2014-06-03T01:53:53Z","updated_at":"2015-02-05T12:41:51Z","closed_at":"2014-06-03T05:40:18Z","author_association":"NONE","active_lock_reason":null,"body":"We have a test Elasticsearch cluster of version 1.1.1, and we upgraded to 1.2.0 recently. However because of ES 1.2.0 regression bug #6304, we decided to downgrade back to ES 1.1.1.    \n\nDuring the downgrade process, our Elasticsearch cluster went red and log indicated that Lucene data format of ES 1.2.0 cannot be handled by ES 1.1.1. \n# Error message\n\n[2014-06-03 01:39:30,526][WARN ][cluster.action.shard     ] [ES-DIAG-6-master] [logs-searchindexer-2014-06-03][4] received shard failed for [logs-searchindexer-2014-06-03][4], node[3joAufOMTieJkNXJ35Fg9Q], [P], s[INITIALIZING], indexUUID [BsSY5qHqSvOl-fQ8RXej0A], reason [Failed to start shard, message [IndexShardGatewayRecoveryException[[logs-searchindexer-2014-06-03][4] failed to fetch index version after copying it over]; nested: IndexShardGatewayRecoveryException[[logs-searchindexer-2014-06-03][4] shard allocated for local recovery (post api), should exist, but doesn't, current files: [segments_1, _checksums-1401755632980, write.lock]]; nested: IndexFormatTooNewException[Format version is not supported (resource: ChecksumIndexInput(MMapIndexInput(path=\"J:\\IndexStorage\\Data\\ES-Cluster-CiDiag\\nodes\\0\\indices\\logs-searchindexer-2014-06-03\\4\\index\\segments_1\"))): 2 (needs to be between 0 and 1)]; ]]\n","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}