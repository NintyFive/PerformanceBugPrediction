{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/29551","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29551/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29551/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29551/events","html_url":"https://github.com/elastic/elasticsearch/issues/29551","id":314958514,"node_id":"MDU6SXNzdWUzMTQ5NTg1MTQ=","number":29551,"title":"ElasticsearchStatusException[Elasticsearch exception [type=illegal_argument_exception, reason=request [/es_test/test/_search] contains unrecognized parameters: [batched_reduce_size], [typed_keys]]]","user":{"login":"kervin521","id":9798724,"node_id":"MDQ6VXNlcjk3OTg3MjQ=","avatar_url":"https://avatars0.githubusercontent.com/u/9798724?v=4","gravatar_id":"","url":"https://api.github.com/users/kervin521","html_url":"https://github.com/kervin521","followers_url":"https://api.github.com/users/kervin521/followers","following_url":"https://api.github.com/users/kervin521/following{/other_user}","gists_url":"https://api.github.com/users/kervin521/gists{/gist_id}","starred_url":"https://api.github.com/users/kervin521/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kervin521/subscriptions","organizations_url":"https://api.github.com/users/kervin521/orgs","repos_url":"https://api.github.com/users/kervin521/repos","events_url":"https://api.github.com/users/kervin521/events{/privacy}","received_events_url":"https://api.github.com/users/kervin521/received_events","type":"User","site_admin":false},"labels":[{"id":493198109,"node_id":"MDU6TGFiZWw0OTMxOTgxMDk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Java%20High%20Level%20REST%20Client","name":":Core/Features/Java High Level REST Client","color":"0e8a16","default":false,"description":"Expressive Java Client for Elasticsearch"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-04-17T08:36:15Z","updated_at":"2018-04-17T09:05:44Z","closed_at":"2018-04-17T09:05:19Z","author_association":"NONE","active_lock_reason":null,"body":"I use elasticsearch-rest-high-level-client to access elasticsearch Search API.\r\nIt has no problem in elasticsearch 5.4.1, but the below error occurs against elasticsearch 5.3.0 when executing this snippet.\r\n\r\n```\r\nSearchSourceBuilder search = new SearchSourceBuilder();\r\n\t\tsearch.query(boolquery);\r\n\t\tsearch.from((pageNo-1)*pageSize);\r\n\t\tsearch.size(pageSize);\r\n\t\tsearch.explain(false);\r\n\t\tSearchRequest request = new SearchRequest();\r\n\t\trequest.searchType(SearchType.DFS_QUERY_THEN_FETCH);\r\n\t\trequest.source(search);\r\n\t\trequest.indices(indexs.split(\",\"));\r\n\t\trequest.types(types.split(\",\"));\r\n\t\tSearchResponse response = client.search(request);\r\n```\r\n\r\n```\r\nElasticsearchStatusException[Elasticsearch exception [type=illegal_argument_exception, reason=request [/es_test/test/_search] contains unrecognized parameters: [batched_reduce_size], [typed_keys]]]\r\n\tat org.elasticsearch.rest.BytesRestResponse.errorFromXContent(BytesRestResponse.java:177)\r\n\tat org.elasticsearch.client.RestHighLevelClient.parseEntity(RestHighLevelClient.java:526)\r\n\tat org.elasticsearch.client.RestHighLevelClient.parseResponseException(RestHighLevelClient.java:502)\r\n\tat org.elasticsearch.client.RestHighLevelClient.performRequest(RestHighLevelClient.java:409)\r\n\tat org.elasticsearch.client.RestHighLevelClient.performRequestAndParseEntity(RestHighLevelClient.java:382)\r\n\tat org.elasticsearch.client.RestHighLevelClient.search(RestHighLevelClient.java:323)\r\n\tat com.ucloudlink.css.elasticsearch.api.HighRestElasticsearch.selectMatchAll(HighRestElasticsearch.java:511)\r\n\tat com.ucloudlink.css.elasticsearch.ElasticsearchRestTest.read21(ElasticsearchRestTest.java:86)\r\n\tat com.ucloudlink.css.elasticsearch.ElasticsearchRestTest.main(ElasticsearchRestTest.java:135)\r\n\tSuppressed: org.elasticsearch.client.ResponseException: GET http://localhost:9200/es_test/test/_search?typed_keys=true&ignore_unavailable=false&expand_wildcards=open&allow_no_indices=true&search_type=dfs_query_then_fetch&batched_reduce_size=512: HTTP/1.1 400 Bad Request\r\n{\"error\":{\"root_cause\":[{\"type\":\"illegal_argument_exception\",\"reason\":\"request [/es_test/test/_search] contains unrecognized parameters: [batched_reduce_size], [typed_keys]\"}],\"type\":\"illegal_argument_exception\",\"reason\":\"request [/es_test/test/_search] contains unrecognized parameters: [batched_reduce_size], [typed_keys]\"},\"status\":400}\r\n\t\tat org.elasticsearch.client.RestClient$1.completed(RestClient.java:354)\r\n\t\tat org.elasticsearch.client.RestClient$1.completed(RestClient.java:343)\r\n\t\tat org.apache.http.concurrent.BasicFuture.completed(BasicFuture.java:119)\r\n\t\tat org.apache.http.impl.nio.client.DefaultClientExchangeHandlerImpl.responseCompleted(DefaultClientExchangeHandlerImpl.java:177)\r\n\t\tat org.apache.http.nio.protocol.HttpAsyncRequestExecutor.processResponse(HttpAsyncRequestExecutor.java:436)\r\n\t\tat org.apache.http.nio.protocol.HttpAsyncRequestExecutor.inputReady(HttpAsyncRequestExecutor.java:326)\r\n\t\tat org.apache.http.impl.nio.DefaultNHttpClientConnection.consumeInput(DefaultNHttpClientConnection.java:265)\r\n\t\tat org.apache.http.impl.nio.client.InternalIODispatch.onInputReady(InternalIODispatch.java:81)\r\n\t\tat org.apache.http.impl.nio.client.InternalIODispatch.onInputReady(InternalIODispatch.java:39)\r\n\t\tat org.apache.http.impl.nio.reactor.AbstractIODispatch.inputReady(AbstractIODispatch.java:114)\r\n\t\tat org.apache.http.impl.nio.reactor.BaseIOReactor.readable(BaseIOReactor.java:162)\r\n\t\tat org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvent(AbstractIOReactor.java:337)\r\n\t\tat org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvents(AbstractIOReactor.java:315)\r\n\t\tat org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:276)\r\n\t\tat org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)\r\n\t\tat org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:588)\r\n\t\tat java.lang.Thread.run(Thread.java:748)\r\n```","closed_by":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"performed_via_github_app":null}