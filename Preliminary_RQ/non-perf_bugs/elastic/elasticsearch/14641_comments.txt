[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/155273673","html_url":"https://github.com/elastic/elasticsearch/issues/14641#issuecomment-155273673","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14641","id":155273673,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NTI3MzY3Mw==","user":{"login":"royrusso","id":654238,"node_id":"MDQ6VXNlcjY1NDIzOA==","avatar_url":"https://avatars3.githubusercontent.com/u/654238?v=4","gravatar_id":"","url":"https://api.github.com/users/royrusso","html_url":"https://github.com/royrusso","followers_url":"https://api.github.com/users/royrusso/followers","following_url":"https://api.github.com/users/royrusso/following{/other_user}","gists_url":"https://api.github.com/users/royrusso/gists{/gist_id}","starred_url":"https://api.github.com/users/royrusso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/royrusso/subscriptions","organizations_url":"https://api.github.com/users/royrusso/orgs","repos_url":"https://api.github.com/users/royrusso/repos","events_url":"https://api.github.com/users/royrusso/events{/privacy}","received_events_url":"https://api.github.com/users/royrusso/received_events","type":"User","site_admin":false},"created_at":"2015-11-10T03:29:21Z","updated_at":"2015-11-10T03:29:21Z","author_association":"NONE","body":"I seem to have tracked it down... On indexing, my epoch timestamps are float format, ie. 1390798800000.0\n\nES is ignoring them, perhaps because of...\n\n```\n        \"index.mapping.ignore_malformed\" : true,\n        \"index.mapping.coerce\" : true\n```\n\nI would've expected ES to \"coerce\" the float to an int and treat it as a epoch_millis, but instead it seems to be ignoring them altogether.\n\nNot sure if this is the expected behaviour, so feel free to open/close the issue depending.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157369314","html_url":"https://github.com/elastic/elasticsearch/issues/14641#issuecomment-157369314","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14641","id":157369314,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NzM2OTMxNA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-11-17T13:23:02Z","updated_at":"2015-11-17T13:23:02Z","author_association":"CONTRIBUTOR","body":"Hi @royrusso \n\nYour diagnosis seems correct.  I agree that we could coerce floats to longs for epoch_millis.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241472155","html_url":"https://github.com/elastic/elasticsearch/issues/14641#issuecomment-241472155","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14641","id":241472155,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTQ3MjE1NQ==","user":{"login":"tj","id":25254,"node_id":"MDQ6VXNlcjI1MjU0","avatar_url":"https://avatars2.githubusercontent.com/u/25254?v=4","gravatar_id":"","url":"https://api.github.com/users/tj","html_url":"https://github.com/tj","followers_url":"https://api.github.com/users/tj/followers","following_url":"https://api.github.com/users/tj/following{/other_user}","gists_url":"https://api.github.com/users/tj/gists{/gist_id}","starred_url":"https://api.github.com/users/tj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tj/subscriptions","organizations_url":"https://api.github.com/users/tj/orgs","repos_url":"https://api.github.com/users/tj/repos","events_url":"https://api.github.com/users/tj/events{/privacy}","received_events_url":"https://api.github.com/users/tj/received_events","type":"User","site_admin":false},"created_at":"2016-08-22T16:37:31Z","updated_at":"2016-08-22T16:38:29Z","author_association":"NONE","body":"üëç this is a pretty bad bug IMO, Go's json encoder may give you floats, and JSON numerical values by definition are floats, there's only the one type. Is there a workaround?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/268922141","html_url":"https://github.com/elastic/elasticsearch/issues/14641#issuecomment-268922141","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14641","id":268922141,"node_id":"MDEyOklzc3VlQ29tbWVudDI2ODkyMjE0MQ==","user":{"login":"aksarben09","id":605795,"node_id":"MDQ6VXNlcjYwNTc5NQ==","avatar_url":"https://avatars2.githubusercontent.com/u/605795?v=4","gravatar_id":"","url":"https://api.github.com/users/aksarben09","html_url":"https://github.com/aksarben09","followers_url":"https://api.github.com/users/aksarben09/followers","following_url":"https://api.github.com/users/aksarben09/following{/other_user}","gists_url":"https://api.github.com/users/aksarben09/gists{/gist_id}","starred_url":"https://api.github.com/users/aksarben09/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aksarben09/subscriptions","organizations_url":"https://api.github.com/users/aksarben09/orgs","repos_url":"https://api.github.com/users/aksarben09/repos","events_url":"https://api.github.com/users/aksarben09/events{/privacy}","received_events_url":"https://api.github.com/users/aksarben09/received_events","type":"User","site_admin":false},"created_at":"2016-12-23T00:46:12Z","updated_at":"2016-12-23T00:46:12Z","author_association":"NONE","body":"I got similar situation and ES rejects timestamp as floating point values returned by json parser. `coerce` does not seem to work with `date` type either. Is there any plan to either allow floating point as `date` or add `coerce` option to `date` type?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/276035624","html_url":"https://github.com/elastic/elasticsearch/issues/14641#issuecomment-276035624","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14641","id":276035624,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjAzNTYyNA==","user":{"login":"janko","id":795488,"node_id":"MDQ6VXNlcjc5NTQ4OA==","avatar_url":"https://avatars2.githubusercontent.com/u/795488?v=4","gravatar_id":"","url":"https://api.github.com/users/janko","html_url":"https://github.com/janko","followers_url":"https://api.github.com/users/janko/followers","following_url":"https://api.github.com/users/janko/following{/other_user}","gists_url":"https://api.github.com/users/janko/gists{/gist_id}","starred_url":"https://api.github.com/users/janko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janko/subscriptions","organizations_url":"https://api.github.com/users/janko/orgs","repos_url":"https://api.github.com/users/janko/repos","events_url":"https://api.github.com/users/janko/events{/privacy}","received_events_url":"https://api.github.com/users/janko/received_events","type":"User","site_admin":false},"created_at":"2017-01-30T11:08:25Z","updated_at":"2017-01-30T11:08:50Z","author_association":"NONE","body":"Just wanted to mention that I'm also having problems with this when upgrading from Elasticsearch 1.x to 2.x. Elasticsearch 1.x accepted floats with the `date_time` format, but now 2.x doesn't do that anymore, and I tried specifying `date_time||epoch_seconds`, but it still doesn't parse floats (where the part after decimal point represents milliseconds). So it doesn't seem like there is a way to get the old behaviour.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/320151011","html_url":"https://github.com/elastic/elasticsearch/issues/14641#issuecomment-320151011","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14641","id":320151011,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMDE1MTAxMQ==","user":{"login":"henridf","id":1022041,"node_id":"MDQ6VXNlcjEwMjIwNDE=","avatar_url":"https://avatars2.githubusercontent.com/u/1022041?v=4","gravatar_id":"","url":"https://api.github.com/users/henridf","html_url":"https://github.com/henridf","followers_url":"https://api.github.com/users/henridf/followers","following_url":"https://api.github.com/users/henridf/following{/other_user}","gists_url":"https://api.github.com/users/henridf/gists{/gist_id}","starred_url":"https://api.github.com/users/henridf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henridf/subscriptions","organizations_url":"https://api.github.com/users/henridf/orgs","repos_url":"https://api.github.com/users/henridf/repos","events_url":"https://api.github.com/users/henridf/events{/privacy}","received_events_url":"https://api.github.com/users/henridf/received_events","type":"User","site_admin":false},"created_at":"2017-08-04T04:05:13Z","updated_at":"2017-08-04T04:05:13Z","author_association":"NONE","body":"I ran into this too. For anyone else running into this (and using 5.x), one solution is to convert the timestamp in an ingest pipeline. Something like\r\n\r\n```json\r\n{\r\n    \"description\": \"my pipe\",\r\n    \"processors\": [\r\n        {\r\n            \"script\": {\r\n                \"lang\": \"painless\",\r\n                \"inline\": \" ctx.timestamp = (long) (ctx.timestamp * 1000) \"\r\n            }\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\nSimpler than adding logstash to the stack (unless it's already there of course...).\r\n\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/530510574","html_url":"https://github.com/elastic/elasticsearch/issues/14641#issuecomment-530510574","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14641","id":530510574,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDUxMDU3NA==","user":{"login":"sentient","id":183579,"node_id":"MDQ6VXNlcjE4MzU3OQ==","avatar_url":"https://avatars0.githubusercontent.com/u/183579?v=4","gravatar_id":"","url":"https://api.github.com/users/sentient","html_url":"https://github.com/sentient","followers_url":"https://api.github.com/users/sentient/followers","following_url":"https://api.github.com/users/sentient/following{/other_user}","gists_url":"https://api.github.com/users/sentient/gists{/gist_id}","starred_url":"https://api.github.com/users/sentient/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sentient/subscriptions","organizations_url":"https://api.github.com/users/sentient/orgs","repos_url":"https://api.github.com/users/sentient/repos","events_url":"https://api.github.com/users/sentient/events{/privacy}","received_events_url":"https://api.github.com/users/sentient/received_events","type":"User","site_admin":false},"created_at":"2019-09-11T18:37:44Z","updated_at":"2019-09-11T18:38:14Z","author_association":"NONE","body":"> I ran into this too. For anyone else running into this (and using 5.x), one solution is to convert the timestamp in an ingest pipeline. Something like\r\n> \r\n> ```json\r\n> {\r\n>     \"description\": \"my pipe\",\r\n>     \"processors\": [\r\n>         {\r\n>             \"script\": {\r\n>                 \"lang\": \"painless\",\r\n>                 \"inline\": \" ctx.timestamp = (long) (ctx.timestamp * 1000) \"\r\n>             }\r\n>         }\r\n>     ]\r\n> }\r\n> ```\r\n> \r\n> Simpler than adding logstash to the stack (unless it's already there of course...).\r\n\r\nThe float conversion was working for me in 6.5.4 \r\nbut I could not get it to work in 7.1.1\r\n\r\nusing the _ingest/pipeline workound. Thanks for sharing","performed_via_github_app":null}]