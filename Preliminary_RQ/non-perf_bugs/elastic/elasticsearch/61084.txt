{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/61084","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61084/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61084/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61084/events","html_url":"https://github.com/elastic/elasticsearch/issues/61084","id":678320130,"node_id":"MDU6SXNzdWU2NzgzMjAxMzA=","number":61084,"title":"Documentation suggestion on the top hits collapse example (rescore + collapse link)","user":{"login":"Morikko","id":7831572,"node_id":"MDQ6VXNlcjc4MzE1NzI=","avatar_url":"https://avatars0.githubusercontent.com/u/7831572?v=4","gravatar_id":"","url":"https://api.github.com/users/Morikko","html_url":"https://github.com/Morikko","followers_url":"https://api.github.com/users/Morikko/followers","following_url":"https://api.github.com/users/Morikko/following{/other_user}","gists_url":"https://api.github.com/users/Morikko/gists{/gist_id}","starred_url":"https://api.github.com/users/Morikko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Morikko/subscriptions","organizations_url":"https://api.github.com/users/Morikko/orgs","repos_url":"https://api.github.com/users/Morikko/repos","events_url":"https://api.github.com/users/Morikko/events{/privacy}","received_events_url":"https://api.github.com/users/Morikko/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":23715,"node_id":"MDU6TGFiZWwyMzcxNQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Edocs","name":">docs","color":"db755e","default":false,"description":"General docs changes"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":1967497573,"node_id":"MDU6TGFiZWwxOTY3NDk3NTcz","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Docs","name":"Team:Docs","color":"fef2c0","default":false,"description":"Meta label for docs team"},{"id":1967498216,"node_id":"MDU6TGFiZWwxOTY3NDk4MjE2","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Search","name":"Team:Search","color":"fef2c0","default":false,"description":"Meta label for search team"}],"state":"closed","locked":false,"assignee":{"login":"jrodewig","id":40268737,"node_id":"MDQ6VXNlcjQwMjY4NzM3","avatar_url":"https://avatars1.githubusercontent.com/u/40268737?v=4","gravatar_id":"","url":"https://api.github.com/users/jrodewig","html_url":"https://github.com/jrodewig","followers_url":"https://api.github.com/users/jrodewig/followers","following_url":"https://api.github.com/users/jrodewig/following{/other_user}","gists_url":"https://api.github.com/users/jrodewig/gists{/gist_id}","starred_url":"https://api.github.com/users/jrodewig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrodewig/subscriptions","organizations_url":"https://api.github.com/users/jrodewig/orgs","repos_url":"https://api.github.com/users/jrodewig/repos","events_url":"https://api.github.com/users/jrodewig/events{/privacy}","received_events_url":"https://api.github.com/users/jrodewig/received_events","type":"User","site_admin":false},"assignees":[{"login":"jrodewig","id":40268737,"node_id":"MDQ6VXNlcjQwMjY4NzM3","avatar_url":"https://avatars1.githubusercontent.com/u/40268737?v=4","gravatar_id":"","url":"https://api.github.com/users/jrodewig","html_url":"https://github.com/jrodewig","followers_url":"https://api.github.com/users/jrodewig/followers","following_url":"https://api.github.com/users/jrodewig/following{/other_user}","gists_url":"https://api.github.com/users/jrodewig/gists{/gist_id}","starred_url":"https://api.github.com/users/jrodewig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrodewig/subscriptions","organizations_url":"https://api.github.com/users/jrodewig/orgs","repos_url":"https://api.github.com/users/jrodewig/repos","events_url":"https://api.github.com/users/jrodewig/events{/privacy}","received_events_url":"https://api.github.com/users/jrodewig/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2020-08-13T10:11:30Z","updated_at":"2020-08-17T16:42:06Z","closed_at":"2020-08-17T16:42:06Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\nPlease first search existing issues for the feature you are requesting;\r\nit may already exist, even as a closed issue.\r\n-->\r\nI have implemented the top hits collapse example described here: https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-metrics-top-hits-aggregation.html#_field_collapse_example and got ideas to complete the documentation.\r\n\r\n## 1. Rescore limit\r\nThe first proposition would be to add that it won't work with a rescore query as the buckets are going to be sorted by the original score and the top hits are going to be sorted by the score rescored inside each bucket. If this behavior is rather a bug, I can create another issue.\r\n\r\n## 2. Reference to the collapsing feature\r\nThe second suggestion would be to add a link to the collapse feature (https://www.elastic.co/guide/en/elasticsearch/reference/7.8/collapse-search-results.html). I don't claim that this feature replaces the top hits aggregation as they are still needed for collapsing in the aggregations. But actually, I was looking for such a feature but I ended on the top hits page first. So I designed the query to fit the aggregation style whereas I could have only added a collapse section aside the main query. This reference will help to navigate through the documentation and discover the ES potential.\r\n\r\n<!--\r\nDescribe the feature.\r\n\r\nPlease give us as much context as possible about the feature. For example,\r\nyou could include a story about a time when you wanted to use the feature,\r\nand also tell us what you had to do instead. The last part is helpful\r\nbecause it gives us an idea of how much harder your life is without the\r\nfeature.\r\n\r\n-->\r\n","closed_by":{"login":"jrodewig","id":40268737,"node_id":"MDQ6VXNlcjQwMjY4NzM3","avatar_url":"https://avatars1.githubusercontent.com/u/40268737?v=4","gravatar_id":"","url":"https://api.github.com/users/jrodewig","html_url":"https://github.com/jrodewig","followers_url":"https://api.github.com/users/jrodewig/followers","following_url":"https://api.github.com/users/jrodewig/following{/other_user}","gists_url":"https://api.github.com/users/jrodewig/gists{/gist_id}","starred_url":"https://api.github.com/users/jrodewig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrodewig/subscriptions","organizations_url":"https://api.github.com/users/jrodewig/orgs","repos_url":"https://api.github.com/users/jrodewig/repos","events_url":"https://api.github.com/users/jrodewig/events{/privacy}","received_events_url":"https://api.github.com/users/jrodewig/received_events","type":"User","site_admin":false},"performed_via_github_app":null}