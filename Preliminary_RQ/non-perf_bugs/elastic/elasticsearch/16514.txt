{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/16514","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16514/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16514/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16514/events","html_url":"https://github.com/elastic/elasticsearch/issues/16514","id":132221906,"node_id":"MDU6SXNzdWUxMzIyMjE5MDY=","number":16514,"title":"ElasticSearch Allows Decimal For Type BYTE","user":{"login":"threejeez","id":1144520,"node_id":"MDQ6VXNlcjExNDQ1MjA=","avatar_url":"https://avatars3.githubusercontent.com/u/1144520?v=4","gravatar_id":"","url":"https://api.github.com/users/threejeez","html_url":"https://github.com/threejeez","followers_url":"https://api.github.com/users/threejeez/followers","following_url":"https://api.github.com/users/threejeez/following{/other_user}","gists_url":"https://api.github.com/users/threejeez/gists{/gist_id}","starred_url":"https://api.github.com/users/threejeez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/threejeez/subscriptions","organizations_url":"https://api.github.com/users/threejeez/orgs","repos_url":"https://api.github.com/users/threejeez/repos","events_url":"https://api.github.com/users/threejeez/events{/privacy}","received_events_url":"https://api.github.com/users/threejeez/received_events","type":"User","site_admin":false},"labels":[{"id":141145460,"node_id":"MDU6TGFiZWwxNDExNDU0NjA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Mapping","name":":Search/Mapping","color":"0e8a16","default":false,"description":"How fields should be indexed"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2016-02-08T18:26:48Z","updated_at":"2016-10-24T14:48:33Z","closed_at":"2016-10-24T14:48:33Z","author_association":"NONE","active_lock_reason":null,"body":"ElasticSearch documentation states:\n\n`The number types have the same ranges as corresponding Java types`\n\n[Java types](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html) is linked and states the following:\n\n`The byte data type is an 8-bit signed two's complement integer.`\n\nYet when I have a field mapped as type \"byte\" I can store a decimal when indexing it as a number. When I index the number as a string it gives me the correct error.\n\n**Mapping**\n\n```\nPOST /my_index\n{\n    \"mappings\": {\n        \"my_type\": {\n            \"properties\": {\n                \"my_byte\": {\n                    \"type\": \"byte\"\n                }\n            }\n        }\n    }\n}\n```\n\n**Index as number**\n\n```\nPOST /my_index/my_type\n{\n   \"my_byte\":  98.6\n}\n```\n\n```\n{\n   \"_index\": \"my_index\",\n   \"_type\": \"my_type\",\n   \"_id\": \"AVLCEWrzgBH0py33OQn-\",\n   \"_version\": 1,\n   \"_shards\": {\n      \"total\": 2,\n      \"successful\": 1,\n      \"failed\": 0\n   },\n   \"created\": true\n}\n```\n\n**GET request and response**\n\n```\nGET /my_index/my_type/AVLCEWrzgBH0py33OQn-\n```\n\n```\n{\n   \"_index\": \"my_index\",\n   \"_type\": \"my_type\",\n   \"_id\": \"AVLCEWrzgBH0py33OQn-\",\n   \"_version\": 1,\n   \"found\": true,\n   \"_source\": {\n      \"my_byte\": 98.6\n   }\n}\n```\n\n**Unsuccessful INDEX as string (correct behavior)**\n\n```\nPOST /my_index/my_type\n{\n    \"my_byte\":\"98.6\"\n}\n```\n\n```\n{\n   \"error\": {\n      \"root_cause\": [\n         {\n            \"type\": \"mapper_parsing_exception\",\n            \"reason\": \"failed to parse [my_byte]\"\n         }\n      ],\n      \"type\": \"mapper_parsing_exception\",\n      \"reason\": \"failed to parse [my_byte]\",\n      \"caused_by\": {\n         \"type\": \"number_format_exception\",\n         \"reason\": \"For input string: \\\"98.6\\\"\"\n      }\n   },\n   \"status\": 400\n}\n```\n","closed_by":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"performed_via_github_app":null}