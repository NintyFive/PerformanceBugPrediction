{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/28462","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28462/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28462/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28462/events","html_url":"https://github.com/elastic/elasticsearch/issues/28462","id":293247367,"node_id":"MDU6SXNzdWUyOTMyNDczNjc=","number":28462,"title":"Bug: Unified Highlighter does not care about fragment_size","user":{"login":"aslamy","id":11768586,"node_id":"MDQ6VXNlcjExNzY4NTg2","avatar_url":"https://avatars3.githubusercontent.com/u/11768586?v=4","gravatar_id":"","url":"https://api.github.com/users/aslamy","html_url":"https://github.com/aslamy","followers_url":"https://api.github.com/users/aslamy/followers","following_url":"https://api.github.com/users/aslamy/following{/other_user}","gists_url":"https://api.github.com/users/aslamy/gists{/gist_id}","starred_url":"https://api.github.com/users/aslamy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aslamy/subscriptions","organizations_url":"https://api.github.com/users/aslamy/orgs","repos_url":"https://api.github.com/users/aslamy/repos","events_url":"https://api.github.com/users/aslamy/events{/privacy}","received_events_url":"https://api.github.com/users/aslamy/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-01-31T17:34:05Z","updated_at":"2018-01-31T21:48:57Z","closed_at":"2018-01-31T21:48:57Z","author_association":"NONE","active_lock_reason":null,"body":"I have:\r\n\r\nElasticsearch 6.1.2\r\n\r\nMapping:\r\n\r\n```\r\nPUT my_index\r\n{  \r\n   \"mappings\":{  \r\n      \"my_type\":{  \r\n         \"properties\":{  \r\n            \"title\":{  \r\n               \"term_vector\":\"with_positions_offsets\",\r\n               \"type\":\"text\"\r\n            }\r\n         }\r\n      }\r\n   }\r\n}\r\n```\r\n```\r\nPUT my_index/my_type/1\r\n{  \r\n   \"title\":\"Hello. This is a test.\"\r\n}\r\n```\r\nSearch:\r\n```\r\n{  \r\n   \"query\":{  \r\n      \"match\":{  \r\n         \"title\":\"Hello\"\r\n      }\r\n   },\r\n   \"highlight\":{  \r\n\r\n      \"fields\":{  \r\n         \"title\":{  \r\n            \"fragment_size\":1000,\r\n            \"number_of_fragments\":1,\r\n\t    \"type\": \"unified\"\r\n         }\r\n      }\r\n   }\r\n}\r\n```\r\n\r\nResult:\r\n```\r\n{  \r\n   \"took\":0,\r\n   \"timed_out\":false,\r\n   \"_shards\":{  \r\n      \"total\":5,\r\n      \"successful\":5,\r\n      \"skipped\":0,\r\n      \"failed\":0\r\n   },\r\n   \"hits\":{  \r\n      \"total\":1,\r\n      \"max_score\":0.2876821,\r\n      \"hits\":[  \r\n         {  \r\n            \"_index\":\"my_index\",\r\n            \"_type\":\"my_type\",\r\n            \"_id\":\"1\",\r\n            \"_score\":0.2876821,\r\n            \"_source\":{  \r\n               \"title\":\"Hello. This is a test.\"\r\n            },\r\n            \"highlight\":{  \r\n               \"title\":[  \r\n                  \"<em>Hello</em>.\"\r\n               ]\r\n            }\r\n         }\r\n      ]\r\n   }\r\n}\r\n```\r\n\r\n\r\nProblem:\r\nIt seems that unified highlighter does not care about fragment size. When fragment_size is 1000 it should not split but it does split on first point (dot). I know if fragment_size = 0 then it not split, but that's not what I want.\r\nI have fields with many sentence I want to split around 256 characters, but highlighter splitting always on first point hit.","closed_by":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"performed_via_github_app":null}