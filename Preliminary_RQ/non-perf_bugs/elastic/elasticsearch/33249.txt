{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/33249","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33249/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33249/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33249/events","html_url":"https://github.com/elastic/elasticsearch/issues/33249","id":355321582,"node_id":"MDU6SXNzdWUzNTUzMjE1ODI=","number":33249,"title":"[CI] Several failures in LicensingTests","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"labels":[{"id":912841668,"node_id":"MDU6TGFiZWw5MTI4NDE2Njg=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Security/License","name":":Security/License","color":"0e8a16","default":false,"description":"License functionality for commercial features"},{"id":912838879,"node_id":"MDU6TGFiZWw5MTI4Mzg4Nzk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Security/Security","name":":Security/Security","color":"0e8a16","default":false,"description":"Security issues without another label"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false},"assignees":[{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2018-08-29T20:31:46Z","updated_at":"2019-01-10T15:50:19Z","closed_at":"2019-01-10T15:50:19Z","author_association":"MEMBER","active_lock_reason":null,"body":"Build: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+matrix-java-periodic/ES_BUILD_JAVA=java11,ES_RUNTIME_JAVA=java10,nodes=virtual&&linux/268/console\r\n\r\nNo local reproduction possible so far:\r\n```\r\nREPRODUCE WITH: ./gradlew :x-pack:plugin:security:test \\\r\n  -Dtests.seed=7387056134887B36 \\\r\n  -Dtests.class=org.elasticsearch.license.LicensingTests \\\r\n  -Dtests.method=\"testEnableDisableBehaviour\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=en-DK \\\r\n  -Dtests.timezone=Europe/Nicosia \\\r\n  -Dcompiler.java=11 \\\r\n  -Druntime.java=10\r\n\r\nREPRODUCE WITH: ./gradlew :x-pack:plugin:security:test \\\r\n  -Dtests.seed=7387056134887B36 \\\r\n  -Dtests.class=org.elasticsearch.license.LicensingTests \\\r\n  -Dtests.method=\"testEnableDisableBehaviour\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=en-DK \\\r\n  -Dtests.timezone=Europe/Nicosia \\\r\n  -Dcompiler.java=11 \\\r\n  -Druntime.java=10\r\n\r\nREPRODUCE WITH: ./gradlew :x-pack:plugin:security:test \\\r\n  -Dtests.seed=7387056134887B36 \\\r\n  -Dtests.class=org.elasticsearch.license.LicensingTests \\\r\n  -Dtests.method=\"testNodeJoinWithoutSecurityExplicitlyEnabled\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=en-DK \\\r\n  -Dtests.timezone=Europe/Nicosia \\\r\n  -Dcompiler.java=11 \\\r\n  -Druntime.java=10\r\n\r\nREPRODUCE WITH: ./gradlew :x-pack:plugin:security:test \\\r\n  -Dtests.seed=7387056134887B36 \\\r\n  -Dtests.class=org.elasticsearch.license.LicensingTests \\\r\n  -Dtests.method=\"testNodeJoinWithoutSecurityExplicitlyEnabled\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=en-DK \\\r\n  -Dtests.timezone=Europe/Nicosia \\\r\n  -Dcompiler.java=11 \\\r\n  -Druntime.java=10\r\n\r\nREPRODUCE WITH: ./gradlew :x-pack:plugin:security:test \\\r\n  -Dtests.seed=7387056134887B36 \\\r\n  -Dtests.class=org.elasticsearch.license.LicensingTests \\\r\n  -Dtests.method=\"testSecurityActionsByLicenseType\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=en-DK \\\r\n  -Dtests.timezone=Europe/Nicosia \\\r\n  -Dcompiler.java=11 \\\r\n  -Druntime.java=10\r\n\r\nREPRODUCE WITH: ./gradlew :x-pack:plugin:security:test \\\r\n  -Dtests.seed=7387056134887B36 \\\r\n  -Dtests.class=org.elasticsearch.license.LicensingTests \\\r\n  -Dtests.method=\"testSecurityActionsByLicenseType\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=en-DK \\\r\n  -Dtests.timezone=Europe/Nicosia \\\r\n  -Dcompiler.java=11 \\\r\n  -Druntime.java=10\r\n```\r\n\r\nThere are NoNodeAvailableExceptions in the log like this\r\n```\r\nNoNodeAvailableException[None of the configured nodes are available: [{#transport#-1}{u-pdTjagT32wM2-SiWN_tw}{127.0.0.1}{127.0.0.1:30480}]]\r\n\tat org.elasticsearch.client.transport.TransportClientNodesService.ensureNodesAreAvailable(TransportClientNodesService.java:349)\r\n\tat org.elasticsearch.client.transport.TransportClientNodesService.execute(TransportClientNodesService.java:247)\r\n\tat org.elasticsearch.client.transport.TransportProxyClient.execute(TransportProxyClient.java:57)\r\n\tat org.elasticsearch.client.transport.TransportClient.doExecute(TransportClient.java:381)\r\n\tat org.elasticsearch.client.support.AbstractClient.execute(AbstractClient.java:388)\r\n\tat org.elasticsearch.client.FilterClient.doExecute(FilterClient.java:65)\r\n\tat org.elasticsearch.client.support.AbstractClient.execute(AbstractClient.java:388)\r\n\tat org.elasticsearch.client.support.AbstractClient.execute(AbstractClient.java:377)\r\n\tat org.elasticsearch.action.ActionRequestBuilder.execute(ActionRequestBuilder.java:45)\r\n\tat org.elasticsearch.test.ESIntegTestCase.index(ESIntegTestCase.java:1284)\r\n\tat org.elasticsearch.license.LicensingTests.testEnableDisableBehaviour(LicensingTests.java:154)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat \r\n```\r\n\r\nBut there are also Warnings like this about missing master nodes:\r\n```\r\n19:24:27   1> [2018-08-29T20:24:17,131][WARN ][o.e.t.d.TestZenDiscovery ] [node_s1] not enough master nodes (has [1], but needed [2]), current nodes: nodes: \r\n19:24:27   1>    {node_s1}{E7lCWxY3ShOidywR3fs0RQ}{5ne4jBqbS4-Tb-hmwpLTrQ}{127.0.0.1}{127.0.0.1:30480}{xpack.installed=true}, local, master\r\n19:24:27   1>    {node_s0}{JANOf3tyRq6awWUkD2pajw}{J-27NZVhS0GygKaQUfcdAA}{127.0.0.1}{127.0.0.1:30479}{xpack.installed=true}\r\n19:24:27   1>    {node_sc2}{EH8xlnDsTQas9XOQeEv47A}{2yx3d8LCRi2eUGuyzjbPuA}{127.0.0.1}{127.0.0.1:30481}{xpack.installed=true}\r\n```\r\n\r\nSo I suspect something is also wrong in cluster formation.","closed_by":{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false},"performed_via_github_app":null}