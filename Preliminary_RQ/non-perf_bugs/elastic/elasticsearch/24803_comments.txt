[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/302779232","html_url":"https://github.com/elastic/elasticsearch/issues/24803#issuecomment-302779232","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24803","id":302779232,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjc3OTIzMg==","user":{"login":"danwhitacre","id":24685771,"node_id":"MDQ6VXNlcjI0Njg1Nzcx","avatar_url":"https://avatars0.githubusercontent.com/u/24685771?v=4","gravatar_id":"","url":"https://api.github.com/users/danwhitacre","html_url":"https://github.com/danwhitacre","followers_url":"https://api.github.com/users/danwhitacre/followers","following_url":"https://api.github.com/users/danwhitacre/following{/other_user}","gists_url":"https://api.github.com/users/danwhitacre/gists{/gist_id}","starred_url":"https://api.github.com/users/danwhitacre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danwhitacre/subscriptions","organizations_url":"https://api.github.com/users/danwhitacre/orgs","repos_url":"https://api.github.com/users/danwhitacre/repos","events_url":"https://api.github.com/users/danwhitacre/events{/privacy}","received_events_url":"https://api.github.com/users/danwhitacre/received_events","type":"User","site_admin":false},"created_at":"2017-05-19T18:35:53Z","updated_at":"2017-05-19T18:35:53Z","author_association":"NONE","body":"This might just be a doc issue, if incrementing the date is not supported through the rollover api.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/303052787","html_url":"https://github.com/elastic/elasticsearch/issues/24803#issuecomment-303052787","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24803","id":303052787,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzA1Mjc4Nw==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2017-05-22T09:47:49Z","updated_at":"2017-05-22T09:47:49Z","author_association":"CONTRIBUTOR","body":"I cannot reproduce this using ES v5.1.1. My steps:\r\n\r\n```\r\n# SET my system clock back 1 day (i.e. to `2017.05.21`) and start Elasticsearch\r\n\r\nPUT /%3Ctest-%7Bnow%2Fd%7D-1%3E \r\n{\r\n  \"aliases\": {\r\n    \"test-w\": {}\r\n  }\r\n}\r\n\r\n# readjust system clock back to `2017.05.22`\r\n\r\nPOST /test-w/_rollover \r\n{\r\n  \"conditions\": {\r\n    \"max_age\": \"0d\"\r\n  }\r\n}\r\n```\r\n\r\nwhich gives me:\r\n\r\n```\r\n{\r\n  \"old_index\": \"test-2017.05.21-1\",\r\n  \"new_index\": \"test-2017.05.22-000002\",\r\n  \"rolled_over\": true,\r\n  \"dry_run\": false,\r\n  \"acknowledged\": true,\r\n  \"shards_acknowledged\": true,\r\n  \"conditions\": {\r\n    \"[max_age: 0s]\": true\r\n  }\r\n}\r\n```\r\n\r\nCan you provide the output of `GET /test-2017.05.21-1/_settings` and `GET /test-2017.05.18-000002/_settings`?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/303113627","html_url":"https://github.com/elastic/elasticsearch/issues/24803#issuecomment-303113627","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24803","id":303113627,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzExMzYyNw==","user":{"login":"danwhitacre","id":24685771,"node_id":"MDQ6VXNlcjI0Njg1Nzcx","avatar_url":"https://avatars0.githubusercontent.com/u/24685771?v=4","gravatar_id":"","url":"https://api.github.com/users/danwhitacre","html_url":"https://github.com/danwhitacre","followers_url":"https://api.github.com/users/danwhitacre/followers","following_url":"https://api.github.com/users/danwhitacre/following{/other_user}","gists_url":"https://api.github.com/users/danwhitacre/gists{/gist_id}","starred_url":"https://api.github.com/users/danwhitacre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danwhitacre/subscriptions","organizations_url":"https://api.github.com/users/danwhitacre/orgs","repos_url":"https://api.github.com/users/danwhitacre/repos","events_url":"https://api.github.com/users/danwhitacre/events{/privacy}","received_events_url":"https://api.github.com/users/danwhitacre/received_events","type":"User","site_admin":false},"created_at":"2017-05-22T14:19:15Z","updated_at":"2017-05-22T14:19:15Z","author_association":"NONE","body":"@ywelsch So I tore down that cluster over the weekend so I don't have access to those indices anymore. Oddly enough though, when I tried to reproduce it right now, it rolled over the date just fine. Not sure what I did differently last week.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/303113755","html_url":"https://github.com/elastic/elasticsearch/issues/24803#issuecomment-303113755","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24803","id":303113755,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzExMzc1NQ==","user":{"login":"danwhitacre","id":24685771,"node_id":"MDQ6VXNlcjI0Njg1Nzcx","avatar_url":"https://avatars0.githubusercontent.com/u/24685771?v=4","gravatar_id":"","url":"https://api.github.com/users/danwhitacre","html_url":"https://github.com/danwhitacre","followers_url":"https://api.github.com/users/danwhitacre/followers","following_url":"https://api.github.com/users/danwhitacre/following{/other_user}","gists_url":"https://api.github.com/users/danwhitacre/gists{/gist_id}","starred_url":"https://api.github.com/users/danwhitacre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danwhitacre/subscriptions","organizations_url":"https://api.github.com/users/danwhitacre/orgs","repos_url":"https://api.github.com/users/danwhitacre/repos","events_url":"https://api.github.com/users/danwhitacre/events{/privacy}","received_events_url":"https://api.github.com/users/danwhitacre/received_events","type":"User","site_admin":false},"created_at":"2017-05-22T14:19:39Z","updated_at":"2017-05-22T14:19:39Z","author_association":"NONE","body":"Closing since I can't reproduce now.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/303114638","html_url":"https://github.com/elastic/elasticsearch/issues/24803#issuecomment-303114638","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24803","id":303114638,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzExNDYzOA==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2017-05-22T14:22:42Z","updated_at":"2017-05-22T14:22:42Z","author_association":"CONTRIBUTOR","body":"I wonder if it had to do with timezones. By default we assume UTC to calculate date math expressions.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/303120055","html_url":"https://github.com/elastic/elasticsearch/issues/24803#issuecomment-303120055","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24803","id":303120055,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzEyMDA1NQ==","user":{"login":"danwhitacre","id":24685771,"node_id":"MDQ6VXNlcjI0Njg1Nzcx","avatar_url":"https://avatars0.githubusercontent.com/u/24685771?v=4","gravatar_id":"","url":"https://api.github.com/users/danwhitacre","html_url":"https://github.com/danwhitacre","followers_url":"https://api.github.com/users/danwhitacre/followers","following_url":"https://api.github.com/users/danwhitacre/following{/other_user}","gists_url":"https://api.github.com/users/danwhitacre/gists{/gist_id}","starred_url":"https://api.github.com/users/danwhitacre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danwhitacre/subscriptions","organizations_url":"https://api.github.com/users/danwhitacre/orgs","repos_url":"https://api.github.com/users/danwhitacre/repos","events_url":"https://api.github.com/users/danwhitacre/events{/privacy}","received_events_url":"https://api.github.com/users/danwhitacre/received_events","type":"User","site_admin":false},"created_at":"2017-05-22T14:40:45Z","updated_at":"2017-05-22T14:40:45Z","author_association":"NONE","body":"Hmm I don't think it was that. I think I didn't do exactly what the doc asked. It seems I actually created the index with the explicit date rather than using date math to create the index. Then it doesn't rollover the date. Is that expected?\r\n\r\nLike so:\r\n```\r\nPUT /blah-2017.05.22-1\r\n{\r\n  \"aliases\": {\r\n    \"blah-w\": {}\r\n  }\r\n}\r\n\r\n# set system clock forward one day\r\n\r\nPOST /blah-w/_rollover\r\n{\r\n  \"conditions\": {\r\n    \"max_age\": \"0d\"\r\n  }\r\n}\r\n```\r\nyields\r\n```\r\n{\r\n  \"old_index\":\"blah-2017.05.22-1\",\r\n  \"new_index\":\"blah-2017.05.22-000002\",\r\n  \"rolled_over\":true,\r\n  \"dry_run\":false,\r\n  \"acknowledged\":true,\r\n  \"shards_acknowledged\":true,\r\n  \"conditions\":{\r\n    \"[max_age: 0s]\":true\r\n  }\r\n}\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/303122806","html_url":"https://github.com/elastic/elasticsearch/issues/24803#issuecomment-303122806","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24803","id":303122806,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzEyMjgwNg==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2017-05-22T14:49:40Z","updated_at":"2017-05-22T14:49:40Z","author_association":"CONTRIBUTOR","body":"> It seems I actually created the index with the explicit date rather than using date math to create the index. Then it doesn't rollover the date. Is that expected?\r\n\r\nYes, that does not work - that's why I asked for the index settings. When you create an index with a date math expression in it, we store the original name in a special setting `index.provided_name`. This allows us to use the correct date math expression when doing the rollover. If you manually create an index that misses this information, we cannot guess what the date math expression for the rollover index should be.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/303125201","html_url":"https://github.com/elastic/elasticsearch/issues/24803#issuecomment-303125201","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24803","id":303125201,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzEyNTIwMQ==","user":{"login":"danwhitacre","id":24685771,"node_id":"MDQ6VXNlcjI0Njg1Nzcx","avatar_url":"https://avatars0.githubusercontent.com/u/24685771?v=4","gravatar_id":"","url":"https://api.github.com/users/danwhitacre","html_url":"https://github.com/danwhitacre","followers_url":"https://api.github.com/users/danwhitacre/followers","following_url":"https://api.github.com/users/danwhitacre/following{/other_user}","gists_url":"https://api.github.com/users/danwhitacre/gists{/gist_id}","starred_url":"https://api.github.com/users/danwhitacre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danwhitacre/subscriptions","organizations_url":"https://api.github.com/users/danwhitacre/orgs","repos_url":"https://api.github.com/users/danwhitacre/repos","events_url":"https://api.github.com/users/danwhitacre/events{/privacy}","received_events_url":"https://api.github.com/users/danwhitacre/received_events","type":"User","site_admin":false},"created_at":"2017-05-22T14:57:18Z","updated_at":"2017-05-22T14:57:18Z","author_association":"NONE","body":"I see. Thanks. Last time I try to take a shortcut. :)","performed_via_github_app":null}]