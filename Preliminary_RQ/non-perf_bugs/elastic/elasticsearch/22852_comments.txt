[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/276053225","html_url":"https://github.com/elastic/elasticsearch/issues/22852#issuecomment-276053225","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22852","id":276053225,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjA1MzIyNQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-01-30T12:41:30Z","updated_at":"2017-01-30T12:41:30Z","author_association":"CONTRIBUTOR","body":"The \u001B`unlike` parameter is used to ensure that any of the words listed are not used as `like` terms.  It doesn't exclude documents that contain those terms.\r\n\r\nAlso, in this example you are running MLT with far too few docs.  If you examine the query that is actually being run, you will see that it is only searching for `and` and `by`:\r\n\r\n```\r\nPUT library\r\n{\r\n  \"settings\": {\r\n    \"number_of_shards\": 1\r\n  }\r\n}\r\n\r\nPOST _bulk\r\n{ \"index\": { \"_index\": \"library\", \"_type\": \"book\",\"_id\":1 }}\r\n{\"title\":\"Magic Of Thinking Big\", \"description\":\"Millions of people throughout the world have improved their lives using The Magic of Thinking Big. Dr. David J. Schwartz, long regarded as one of the foremost experts on motivation, will help you sell better, manage better, earn more money, and—most important of all—find greater happiness and peace of mind.\" }\r\n{ \"index\": { \"_index\": \"library\", \"_type\": \"book\",\"_id\":2 }}\r\n{\"title\":\"The Power of Positive Thinking\", \"description\":\"The book describes the power positive thinking has and how a firm belief in something, does actually help in achieving it\" }\r\n{ \"index\": { \"_index\": \"library\", \"_type\": \"book\",\"_id\":3 }}\r\n{\"title\":\"Think and Grow Rich\", \"description\":\"Think And Grow Rich has earned itself the reputation of being considered a textbook for actionable techniques that can help one get better at doing anything, not just by rich and wealthy, but also by people doing wonderful work in their respective fields. \" }\r\n{ \"index\": { \"_index\": \"library\", \"_type\": \"book\",\"_id\":4 }}\r\n{\"title\":\"The Magic of thinking Big\", \"description\":\"First published in 1959, David J Schwartz's classic teachings are as powerful today as they were then. Practical, empowering and hugely engaging, this book will not only inspire you, it will give you the tools to change your life for the better - starting from now.\" }\r\n{ \"index\": { \"_index\": \"library\", \"_type\": \"book\",\"_id\":5 }}\r\n{\"title\":\"How to Stop Worrying and Start Living\", \"description\":\"The book is written to help readers by changing their habit of worrying. The author Dale Carnegie has shared his personal experiences, wherein he was mostly unsatisfied and worried about lot of life situations.\" }\r\n{ \"index\": { \"_index\": \"library\", \"_type\": \"book\",\"_id\":6 }}\r\n{\"title\":\"Practicing The Power Of Now\", \"description\":\"To make the journey into The Power of Now we will need to leave our analytical mind and its false created self, the ego, behind.\" }\r\n\r\nGET library/_validate/query?explain&rewrite\r\n{\r\n  \"query\": {\r\n    \"more_like_this\": {\r\n      \"fields\": [\"title\",\"description\"], \r\n      \"like\": [\r\n        {\r\n          \"_index\": \"library\",\r\n          \"_type\": \"book\",\r\n          \"_id\": \"3\"\r\n        }\r\n      ],\r\n      \"unlike\": \"leave our analytical mind\",\r\n      \"min_term_freq\": 2,\r\n      \"min_doc_freq\": 2\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nreturns explanation:\r\n\r\n    \"(description:and description:by) -ConstantScore(_uid:book#3)\"","performed_via_github_app":null}]