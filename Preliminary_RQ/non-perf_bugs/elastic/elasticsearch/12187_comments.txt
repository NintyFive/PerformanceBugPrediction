[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/120455600","html_url":"https://github.com/elastic/elasticsearch/issues/12187#issuecomment-120455600","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12187","id":120455600,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMDQ1NTYwMA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2015-07-10T16:43:30Z","updated_at":"2015-07-10T16:43:30Z","author_association":"CONTRIBUTOR","body":"It's a fine proposal I'd love to try my hand at!  Unless someone else wants\nit. I won't be able to be 100% on it for a few weeks and don't want to\ncookie lick it but I do care deeply about the issue.\nOn Jul 10, 2015 12:03 PM, \"Clinton Gormley\" notifications@github.com\nwrote:\n\n> Admins faced with busy nodes have no way of knowing what bad queries users\n> are sending to their cluster. The _top/searches API should provide a list\n> of all currently executing queries, how long they have been executing, and\n> the ability to kill a query (where possible).\n> \n> This could be implemented as follows:\n> - a coordinating node adds an ID to each search, and keeps the search\n>   request in some data structure until it is complete\n> - a GET _top/search request will reach out to all nodes to retrieve\n>   currently running requests, their elapsed execution time, and which nodes\n>   they are running on\n> - POST _top/search/_kill/[searchid] will cause the coordinating node\n>   to update the timeout for the request to 0, killing the request as soon as\n>   possible (if possible)\n> \n> NOTE: a script like while (1) {...} is not killable without restarting\n> affected nodes. We can't use thread interrupts because they are buggy.\n> \n> Inspired by #4329 https://github.com/elastic/elasticsearch/issues/4329\n> \n> â€”\n> Reply to this email directly or view it on GitHub\n> https://github.com/elastic/elasticsearch/issues/12187.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/122783257","html_url":"https://github.com/elastic/elasticsearch/issues/12187#issuecomment-122783257","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12187","id":122783257,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMjc4MzI1Nw==","user":{"login":"jtharpla","id":2267289,"node_id":"MDQ6VXNlcjIyNjcyODk=","avatar_url":"https://avatars1.githubusercontent.com/u/2267289?v=4","gravatar_id":"","url":"https://api.github.com/users/jtharpla","html_url":"https://github.com/jtharpla","followers_url":"https://api.github.com/users/jtharpla/followers","following_url":"https://api.github.com/users/jtharpla/following{/other_user}","gists_url":"https://api.github.com/users/jtharpla/gists{/gist_id}","starred_url":"https://api.github.com/users/jtharpla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtharpla/subscriptions","organizations_url":"https://api.github.com/users/jtharpla/orgs","repos_url":"https://api.github.com/users/jtharpla/repos","events_url":"https://api.github.com/users/jtharpla/events{/privacy}","received_events_url":"https://api.github.com/users/jtharpla/received_events","type":"User","site_admin":false},"created_at":"2015-07-20T07:11:22Z","updated_at":"2015-07-20T07:11:22Z","author_association":"NONE","body":"This sounds very much like MongoDB's db.currentOp() and db.killOp(), both of which are immensely useful in the MongoDB world.  Can't wait to see this functionality in Elasticsearch as well.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/140524694","html_url":"https://github.com/elastic/elasticsearch/issues/12187#issuecomment-140524694","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12187","id":140524694,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MDUyNDY5NA==","user":{"login":"eskibars","id":2246002,"node_id":"MDQ6VXNlcjIyNDYwMDI=","avatar_url":"https://avatars0.githubusercontent.com/u/2246002?v=4","gravatar_id":"","url":"https://api.github.com/users/eskibars","html_url":"https://github.com/eskibars","followers_url":"https://api.github.com/users/eskibars/followers","following_url":"https://api.github.com/users/eskibars/following{/other_user}","gists_url":"https://api.github.com/users/eskibars/gists{/gist_id}","starred_url":"https://api.github.com/users/eskibars/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eskibars/subscriptions","organizations_url":"https://api.github.com/users/eskibars/orgs","repos_url":"https://api.github.com/users/eskibars/repos","events_url":"https://api.github.com/users/eskibars/events{/privacy}","received_events_url":"https://api.github.com/users/eskibars/received_events","type":"User","site_admin":false},"created_at":"2015-09-15T20:16:10Z","updated_at":"2015-09-15T20:16:10Z","author_association":"CONTRIBUTOR","body":"From a HTTP verb perspective, does it make sense to use DELETE rather than POST to kill the query?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/143148809","html_url":"https://github.com/elastic/elasticsearch/issues/12187#issuecomment-143148809","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12187","id":143148809,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MzE0ODgwOQ==","user":{"login":"srikanthbirada","id":5356758,"node_id":"MDQ6VXNlcjUzNTY3NTg=","avatar_url":"https://avatars2.githubusercontent.com/u/5356758?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanthbirada","html_url":"https://github.com/srikanthbirada","followers_url":"https://api.github.com/users/srikanthbirada/followers","following_url":"https://api.github.com/users/srikanthbirada/following{/other_user}","gists_url":"https://api.github.com/users/srikanthbirada/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanthbirada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanthbirada/subscriptions","organizations_url":"https://api.github.com/users/srikanthbirada/orgs","repos_url":"https://api.github.com/users/srikanthbirada/repos","events_url":"https://api.github.com/users/srikanthbirada/events{/privacy}","received_events_url":"https://api.github.com/users/srikanthbirada/received_events","type":"User","site_admin":false},"created_at":"2015-09-25T07:27:54Z","updated_at":"2015-09-25T07:27:54Z","author_association":"NONE","body":"Can we expect this feature for the coming elasticsearch-2.0 version ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/172651030","html_url":"https://github.com/elastic/elasticsearch/issues/12187#issuecomment-172651030","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12187","id":172651030,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MjY1MTAzMA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-01-18T20:55:09Z","updated_at":"2016-01-18T22:22:16Z","author_association":"CONTRIBUTOR","body":"It looks like the task management API will fulfill this need. Closing in favour of https://github.com/elastic/elasticsearch/issues/15117\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/172668737","html_url":"https://github.com/elastic/elasticsearch/issues/12187#issuecomment-172668737","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12187","id":172668737,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MjY2ODczNw==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-01-18T22:16:45Z","updated_at":"2016-01-18T22:16:45Z","author_association":"CONTRIBUTOR","body":"It might be useful to keep this around as an explicit use case for task management. It may be we get all these \"for free\" using stuff built into task management but it'd be nice to talk about this feature explicitly in docs, maybe have tests for it, etc.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/201483436","html_url":"https://github.com/elastic/elasticsearch/issues/12187#issuecomment-201483436","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12187","id":201483436,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMTQ4MzQzNg==","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"created_at":"2016-03-25T20:32:20Z","updated_at":"2016-03-25T20:32:20Z","author_association":"MEMBER","body":"Reopening based on @nik9000's comment.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/201484784","html_url":"https://github.com/elastic/elasticsearch/issues/12187#issuecomment-201484784","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12187","id":201484784,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMTQ4NDc4NA==","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"created_at":"2016-03-25T20:34:59Z","updated_at":"2016-03-25T20:34:59Z","author_association":"MEMBER","body":"+1 This is a fairly common request so it will be nice to track it separately, or close it once we have confirmed that it has been released with the task management api. thx!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/248938796","html_url":"https://github.com/elastic/elasticsearch/issues/12187#issuecomment-248938796","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12187","id":248938796,"node_id":"MDEyOklzc3VlQ29tbWVudDI0ODkzODc5Ng==","user":{"login":"neuroticnetworks","id":3965137,"node_id":"MDQ6VXNlcjM5NjUxMzc=","avatar_url":"https://avatars0.githubusercontent.com/u/3965137?v=4","gravatar_id":"","url":"https://api.github.com/users/neuroticnetworks","html_url":"https://github.com/neuroticnetworks","followers_url":"https://api.github.com/users/neuroticnetworks/followers","following_url":"https://api.github.com/users/neuroticnetworks/following{/other_user}","gists_url":"https://api.github.com/users/neuroticnetworks/gists{/gist_id}","starred_url":"https://api.github.com/users/neuroticnetworks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/neuroticnetworks/subscriptions","organizations_url":"https://api.github.com/users/neuroticnetworks/orgs","repos_url":"https://api.github.com/users/neuroticnetworks/repos","events_url":"https://api.github.com/users/neuroticnetworks/events{/privacy}","received_events_url":"https://api.github.com/users/neuroticnetworks/received_events","type":"User","site_admin":false},"created_at":"2016-09-22T15:31:58Z","updated_at":"2016-09-22T15:31:58Z","author_association":"NONE","body":"Being able to list running queries would be helpful; being able to kill bad ones if needed would be really helpful. \n\n> Admins faced with busy nodes have no way of knowing what bad queries users are sending to their cluster.\n\nThe key thing that stands out to me about this statement is that it has to do with logging queries at the cluster level. The slow query log doesn't do this. Without a view of queries being sent to the cluster, it's impossible to do any kind of reasoning about where you can get the most bang for your buck helping devs rewrite their queries and/or revising schemas to support the queries they need to run. \n\nIf the `_top/searches` API also had the option to log queries to ES, you could also start to do something like Percona does for MySQL with their Percona Query Digest tool (xref https://github.com/elastic/elasticsearch/issues/9172). \n\nIMO, adding a  `_top/searches` API (or perhaps an `active/_searches` API would make more sense, naming wise?) would be a godsend. If we can log those searches to Elastic when they complete, that would be ever better and would remove a tremendous blindspot that ops people have when trying to help devs reason about their queries and schemas. I really really really like what @clintongormley is suggesting here. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/249218547","html_url":"https://github.com/elastic/elasticsearch/issues/12187#issuecomment-249218547","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12187","id":249218547,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTIxODU0Nw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-09-23T15:09:14Z","updated_at":"2016-09-23T15:09:14Z","author_association":"CONTRIBUTOR","body":"This feature is being implemented as part of the task management API here https://github.com/elastic/elasticsearch/pull/20405\n\n> The key thing that stands out to me about this statement is that it has to do with logging queries at the cluster level. The slow query log doesn't do this. \n\nAgreed - this will be tackled separately.\n\nClosing in favour of #20405\n","performed_via_github_app":null}]