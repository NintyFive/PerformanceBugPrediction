{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/18764","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18764/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18764/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18764/events","html_url":"https://github.com/elastic/elasticsearch/issues/18764","id":158940571,"node_id":"MDU6SXNzdWUxNTg5NDA1NzE=","number":18764,"title":"error when performing the sum aggregation on integer field on ES v1.7.0","user":{"login":"david-ts","id":8592461,"node_id":"MDQ6VXNlcjg1OTI0NjE=","avatar_url":"https://avatars2.githubusercontent.com/u/8592461?v=4","gravatar_id":"","url":"https://api.github.com/users/david-ts","html_url":"https://github.com/david-ts","followers_url":"https://api.github.com/users/david-ts/followers","following_url":"https://api.github.com/users/david-ts/following{/other_user}","gists_url":"https://api.github.com/users/david-ts/gists{/gist_id}","starred_url":"https://api.github.com/users/david-ts/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/david-ts/subscriptions","organizations_url":"https://api.github.com/users/david-ts/orgs","repos_url":"https://api.github.com/users/david-ts/repos","events_url":"https://api.github.com/users/david-ts/events{/privacy}","received_events_url":"https://api.github.com/users/david-ts/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2016-06-07T14:40:49Z","updated_at":"2016-06-07T16:08:57Z","closed_at":"2016-06-07T16:08:57Z","author_association":"NONE","active_lock_reason":null,"body":"Elasticsearch version: 1.7.0\n\n`\"error\": \"SearchPhaseExecutionException[Failed to execute phase [query], all shards failed; shardFailures {[k9c_iGB6TM-myDJQElFHDA][bucketname][0]: ElasticsearchException[java.lang.NumberFormatException: Invalid shift value in prefixCoded bytes (is encoded value really an INT?)]; nested: UncheckedExecutionException[java.lang.NumberFormatException: Invalid shift value in prefixCoded bytes (is encoded value really an INT?)]; nested: NumberFormatException[Invalid shift value in prefixCoded bytes (is encoded value really an INT?)]; }`\n\nI'm running into the above error when executing the \"sum\" aggregation on a field that is defined as integer.  However, when I changed the mapping from integer to long, the \"sum\" aggregation worked without any issue.\n\nI can change the mapping from integer to long to work around my issue but is the \"sum\" aggregation on integer type field not supported on ES v1.7.0? I couldn't find any documentation regarding this restriction/limitation.\n\nThanks.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}