{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/44501","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44501/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44501/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44501/events","html_url":"https://github.com/elastic/elasticsearch/issues/44501","id":469289582,"node_id":"MDU6SXNzdWU0NjkyODk1ODI=","number":44501,"title":"Debian8 package test failure","user":{"login":"benwtrent","id":4357155,"node_id":"MDQ6VXNlcjQzNTcxNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/4357155?v=4","gravatar_id":"","url":"https://api.github.com/users/benwtrent","html_url":"https://github.com/benwtrent","followers_url":"https://api.github.com/users/benwtrent/followers","following_url":"https://api.github.com/users/benwtrent/following{/other_user}","gists_url":"https://api.github.com/users/benwtrent/gists{/gist_id}","starred_url":"https://api.github.com/users/benwtrent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benwtrent/subscriptions","organizations_url":"https://api.github.com/users/benwtrent/orgs","repos_url":"https://api.github.com/users/benwtrent/repos","events_url":"https://api.github.com/users/benwtrent/events{/privacy}","received_events_url":"https://api.github.com/users/benwtrent/received_events","type":"User","site_admin":false},"labels":[{"id":114977275,"node_id":"MDU6TGFiZWwxMTQ5NzcyNzU=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Packaging","name":":Delivery/Packaging","color":"0e8a16","default":false,"description":"RPM and deb packaging, tar and zip archives, shell and batch scripts"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"}],"state":"closed","locked":false,"assignee":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"assignees":[{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2019-07-17T15:31:13Z","updated_at":"2020-11-11T21:55:35Z","closed_at":"2019-09-30T09:04:58Z","author_association":"MEMBER","active_lock_reason":null,"body":"Example failure: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.3+packaging-tests/58/console\r\n\r\nThis is a strange failure, from what I can see in the logs, the packaging test for debian 8 retry continually to hit ES, but keep timing out.\r\n\r\n```\r\n10:09:53 .Jul 17, 2019 3:07:55 PM org.elasticsearch.packaging.test.DefaultNoJdkDebBasicTests setup\r\n10:09:53 INFO: [test80DeletePID_DIRandRestart]: before test\r\n10:09:53 Jul 17, 2019 3:07:56 PM org.apache.http.impl.execchain.RetryExec execute\r\n10:09:53 INFO: I/O exception (org.apache.http.NoHttpResponseException) caught when processing request to {}->http://localhost:9200: The target server failed to respond\r\n10:09:53 Jul 17, 2019 3:07:56 PM org.apache.http.impl.execchain.RetryExec execute\r\n10:09:53 INFO: Retrying request to {}->http://localhost:9200\r\n10:09:53 .Jul 17, 2019 3:08:04 PM org.elasticsearch.packaging.test.DefaultNoJdkDebBasicTests setup\r\n10:09:53 INFO: [test81CustomPathConfAndJvmOptions]: before test\r\n10:09:53 Jul 17, 2019 3:08:04 PM org.apache.http.impl.execchain.RetryExec execute\r\n10:09:53 INFO: I/O exception (org.apache.http.NoHttpResponseException) caught when processing request to {}->http://localhost:9200: The target server failed to respond\r\n10:09:53 Jul 17, 2019 3:08:04 PM org.apache.http.impl.execchain.RetryExec execute\r\n10:09:53 INFO: Retrying request to {}->http://localhost:9200\r\n```\r\n\r\nThis goes on for a while and then the build fails with the following:\r\n```\r\n10:09:53 There was 1 failure:\r\n10:09:53 1) test93ElasticsearchNodeCustomDataPathAndNotEsHomeWorkDir(org.elasticsearch.packaging.test.DefaultNoJdkLinuxTarTests)\r\n10:09:53 java.lang.RuntimeException: Command was not successful: [bash -c echo y | /tmp/elasticsearch/bin/elasticsearch-node unsafe-bootstrap] result: <org.elasticsearch.packaging.util.Shell$Result exitCode = [1] stdout = [------------------------------------------------------------------------\r\n10:09:53 \r\n10:09:53     WARNING: Elasticsearch MUST be stopped before running this tool.\r\n10:09:53 \r\n10:09:53 ] stderr = [future versions of Elasticsearch will require Java 11; your Java version from [/usr/lib/jvm/java-8-openjdk-amd64/jre] does not meet this requirement\r\n10:09:53 Exception in thread \"main\" ElasticsearchException[failed to lock node's directory, is Elasticsearch still running?]; nested: LockObtainFailedException[Lock held by another program: /tmp/nodes/0/node.lock];\r\n10:09:53 \tat org.elasticsearch.cluster.coordination.ElasticsearchNodeCommand.processNodePathsWithLock(ElasticsearchNodeCommand.java:85)\r\n10:09:53 \tat org.elasticsearch.cluster.coordination.ElasticsearchNodeCommand.execute(ElasticsearchNodeCommand.java:121)\r\n10:09:53 \tat org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:86)\r\n10:09:53 \tat org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124)\r\n10:09:53 \tat org.elasticsearch.cli.MultiCommand.execute(MultiCommand.java:77)\r\n10:09:53 \tat org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124)\r\n10:09:53 \tat org.elasticsearch.cli.Command.main(Command.java:90)\r\n10:09:53 \tat org.elasticsearch.cluster.coordination.NodeToolCli.main(NodeToolCli.java:47)\r\n10:09:53 Caused by: org.apache.lucene.store.LockObtainFailedException: Lock held by another program: /tmp/nodes/0/node.lock\r\n10:09:53 \tat org.apache.lucene.store.NativeFSLockFactory.obtainFSLock(NativeFSLockFactory.java:130)\r\n10:09:53 \tat org.apache.lucene.store.FSLockFactory.obtainLock(FSLockFactory.java:41)\r\n10:09:53 \tat org.apache.lucene.store.BaseDirectory.obtainLock(BaseDirectory.java:45)\r\n10:09:53 \tat org.elasticsearch.env.NodeEnvironment$NodeLock.<init>(NodeEnvironment.java:214)\r\n10:09:53 \tat org.elasticsearch.cluster.coordination.ElasticsearchNodeCommand.processNodePathsWithLock(ElasticsearchNodeCommand.java:77)\r\n10:09:53 \t... 7 more\r\n10:09:53 ]>\r\n10:09:53 \tat __randomizedtesting.SeedInfo.seed([62E284B94E79E33D:6C1F8ACAA8D82CE9]:0)\r\n10:09:53 \tat org.elasticsearch.packaging.util.Shell.runScript(Shell.java:94)\r\n10:09:53 \tat org.elasticsearch.packaging.util.Shell.run(Shell.java:61)\r\n10:09:53 \tat org.elasticsearch.packaging.test.ArchiveTestCase.test93ElasticsearchNodeCustomDataPathAndNotEsHomeWorkDir(ArchiveTestCase.java:438)\r\n10:09:53 \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n10:09:53 \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n10:09:53 \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n10:09:53 \tat java.base/java.lang.reflect.Method.invoke(Method.java:567)\r\n10:09:53 \tat com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1750)\r\n10:09:53 \tat com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:938)\r\n10:09:53 \tat com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:974)\r\n10:09:53 \tat org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:55)\r\n10:09:53 \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\r\n10:09:53 \tat com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:368)\r\n10:09:53 \tat com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:817)\r\n10:09:53 \tat com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:468)\r\n10:09:53 \tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:947)\r\n10:09:53 \tat com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:832)\r\n10:09:53 \tat com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:883)\r\n10:09:53 \tat com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:894)\r\n10:09:53 \tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\r\n10:09:53 \tat com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:368)\r\n10:09:53 \tat com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:817)\r\n10:09:53 \tat com.carrotsearch.randomizedtesting.ThreadLeakControl$2.evaluate(ThreadLeakControl.java:404)\r\n10:09:53 \tat com.carrotsearch.randomizedtesting.RandomizedRunner.runSuite(RandomizedRunner.java:708)\r\n10:09:53 \tat com.carrotsearch.randomizedtesting.RandomizedRunner.access$200(RandomizedRunner.java:138)\r\n10:09:53 \tat com.carrotsearch.randomizedtesting.RandomizedRunner$2.run(RandomizedRunner.java:629)\r\n10:09:53 \r\n10:09:53 FAILURES!!!\r\n10:09:53 Tests run: 278,  Failures: 1\r\n```\r\n","closed_by":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"performed_via_github_app":null}