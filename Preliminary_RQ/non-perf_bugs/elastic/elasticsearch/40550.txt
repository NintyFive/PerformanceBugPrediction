{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/40550","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40550/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40550/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40550/events","html_url":"https://github.com/elastic/elasticsearch/issues/40550","id":426119469,"node_id":"MDU6SXNzdWU0MjYxMTk0Njk=","number":40550,"title":"Project fails to build in IntelliJ IDEA 2019.1","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"labels":[{"id":106454670,"node_id":"MDU6TGFiZWwxMDY0NTQ2NzA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Build","name":":Delivery/Build","color":"0e8a16","default":false,"description":"Build or test infrastructure"},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-03-27T18:28:37Z","updated_at":"2020-11-11T21:49:19Z","closed_at":"2019-04-11T14:08:46Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"The latest version of IntelliJ, 2019.1 enforces some new [constraints around module content roots](https://youtrack.jetbrains.com/issue/IDEA-175569#focus=streamItem-27-3295004.0-0). It turns out that IntelliJ does not support multiple modules with the same sources context root. That is, two modules cannot share a single source directory. Gradle does in fact support such a scenario and models it correctly and we do this in a number of places in our build. While this seemed to work with IntelliJ 2018.3 I suspect it only coincidentally worked in scenarios where one root was production source and the other was test source due to implementation details in the IntelliJ project model. This is now outright disallowed and IntelliJ will remove the duplicate root definitions at import time.\r\n\r\n```\r\n2019-03-27 10:33:26,183 [ 914974]   WARN - .manage.ContentRootDataService - Path [/Users/mark/workspaces/elasticsearch/x-pack/license-tools/src/main/java] of module [elasticsearch.x-pack.license-tools.main] was removed from modules [elasticsearch.x-pack.plugin.core.test] \r\n```\r\n\r\nThere are a number of beneficial features in IntelliJ 2019.1 so we should try and sort this out. Likely by relying on project dependencies rather than shared source directories where possible, and potentially some refactoring where not.","closed_by":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"performed_via_github_app":null}