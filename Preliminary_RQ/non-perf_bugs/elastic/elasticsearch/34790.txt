{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/34790","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34790/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34790/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34790/events","html_url":"https://github.com/elastic/elasticsearch/issues/34790","id":373326127,"node_id":"MDU6SXNzdWUzNzMzMjYxMjc=","number":34790,"title":"lots of unassigned shards after master unexpectedly crashed ","user":{"login":"wangxiangyu","id":3917969,"node_id":"MDQ6VXNlcjM5MTc5Njk=","avatar_url":"https://avatars1.githubusercontent.com/u/3917969?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxiangyu","html_url":"https://github.com/wangxiangyu","followers_url":"https://api.github.com/users/wangxiangyu/followers","following_url":"https://api.github.com/users/wangxiangyu/following{/other_user}","gists_url":"https://api.github.com/users/wangxiangyu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxiangyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxiangyu/subscriptions","organizations_url":"https://api.github.com/users/wangxiangyu/orgs","repos_url":"https://api.github.com/users/wangxiangyu/repos","events_url":"https://api.github.com/users/wangxiangyu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxiangyu/received_events","type":"User","site_admin":false},"labels":[{"id":837246479,"node_id":"MDU6TGFiZWw4MzcyNDY0Nzk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Allocation","name":":Distributed/Allocation","color":"0e8a16","default":false,"description":"All issues relating to the decision making around placing a shard (both master logic & on the nodes)"},{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null},{"id":626717692,"node_id":"MDU6TGFiZWw2MjY3MTc2OTI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v5.4.3","name":"v5.4.3","color":"dddddd","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-10-24T06:35:19Z","updated_at":"2018-10-25T06:55:21Z","closed_at":"2018-10-25T06:55:20Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**  5.4.3\r\n\r\n**Plugins installed**: x-pack\r\n\r\n**JVM version** : 1.8.0_60\r\n\r\n**OS version** : Debian GNU/Linux 8\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nThere are three master node in my cluster.  One of them crashed unexpectedly.   About six hours later,  the crashed master node was  started again, lots of unassigned shard appeared. \r\n\r\nTry to call ``/_cluster/allocation/explain`` to get the unassigned reason,   response as follows:\r\n\r\n```\r\n\"allocate_explanation\": \"cannot allocate because a previous copy of the primary shard existed but can no longer be found on the nodes in the cluster\"\r\n```\r\nThese unassigned shards(index) were deleted during the crash time of master node. So Why these shards were in unassigned status when the crashed master node was up again instead of just deleted? \r\n","closed_by":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"performed_via_github_app":null}