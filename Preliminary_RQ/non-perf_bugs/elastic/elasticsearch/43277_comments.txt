[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/502724222","html_url":"https://github.com/elastic/elasticsearch/issues/43277#issuecomment-502724222","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43277","id":502724222,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjcyNDIyMg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-06-17T15:10:09Z","updated_at":"2019-06-17T15:10:09Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/502726251","html_url":"https://github.com/elastic/elasticsearch/issues/43277#issuecomment-502726251","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43277","id":502726251,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjcyNjI1MQ==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2019-06-17T15:15:07Z","updated_at":"2019-06-17T15:15:29Z","author_association":"CONTRIBUTOR","body":"Relates https://discuss.elastic.co/t/search-api-returns-zero-hits/185963 /cc @henningandersen.\r\n\r\nThis behaviour looks to be deliberate, although I will admit that I find it surprising too. The `gt` vs `gte` applies to the _integer_ number of time periods added or subtracted, so `\"gt\": \"now-2w\"` means the same as `\"gte\": \"now-1w\"` and, crucially, only returns hits from the last 7 days. Similarly, `\"gt\": \"now-1M\"` means the same as `\"gte\": \"now-0M\"` and thus does not return any hits from the past at all.\r\n\r\nLabelling this for team discussion in case my confusion here is misplaced.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/502887195","html_url":"https://github.com/elastic/elasticsearch/issues/43277#issuecomment-502887195","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43277","id":502887195,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjg4NzE5NQ==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2019-06-17T23:27:24Z","updated_at":"2019-06-17T23:27:24Z","author_association":"MEMBER","body":"Thanks for reporting @Sanjaygk. This is an actual bug that was introduced with the move to Java Time. The logic that we apply to exclude rounded values (`now/M`) is also applied to simple operation like `now-1M` in the Java date math parser. So instead of adding 1ms to get the values greater than `now-1M` we also add 1M to the result of the operation. I opened https://github.com/elastic/elasticsearch/pull/43303 to restore the original behavior.","performed_via_github_app":null}]