{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/43598","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43598/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43598/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43598/events","html_url":"https://github.com/elastic/elasticsearch/issues/43598","id":460522262,"node_id":"MDU6SXNzdWU0NjA1MjIyNjI=","number":43598,"title":"ILM Policy Example With Doc Count Limit Please","user":{"login":"andymjames","id":31216945,"node_id":"MDQ6VXNlcjMxMjE2OTQ1","avatar_url":"https://avatars0.githubusercontent.com/u/31216945?v=4","gravatar_id":"","url":"https://api.github.com/users/andymjames","html_url":"https://github.com/andymjames","followers_url":"https://api.github.com/users/andymjames/followers","following_url":"https://api.github.com/users/andymjames/following{/other_user}","gists_url":"https://api.github.com/users/andymjames/gists{/gist_id}","starred_url":"https://api.github.com/users/andymjames/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andymjames/subscriptions","organizations_url":"https://api.github.com/users/andymjames/orgs","repos_url":"https://api.github.com/users/andymjames/repos","events_url":"https://api.github.com/users/andymjames/events{/privacy}","received_events_url":"https://api.github.com/users/andymjames/received_events","type":"User","site_admin":false},"labels":[{"id":912828538,"node_id":"MDU6TGFiZWw5MTI4Mjg1Mzg=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/ILM+SLM","name":":Core/Features/ILM+SLM","color":"0e8a16","default":false,"description":"Index and Snapshot lifecycle management"},{"id":23715,"node_id":"MDU6TGFiZWwyMzcxNQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Edocs","name":">docs","color":"db755e","default":false,"description":"General docs changes"}],"state":"closed","locked":false,"assignee":{"login":"jrodewig","id":40268737,"node_id":"MDQ6VXNlcjQwMjY4NzM3","avatar_url":"https://avatars1.githubusercontent.com/u/40268737?v=4","gravatar_id":"","url":"https://api.github.com/users/jrodewig","html_url":"https://github.com/jrodewig","followers_url":"https://api.github.com/users/jrodewig/followers","following_url":"https://api.github.com/users/jrodewig/following{/other_user}","gists_url":"https://api.github.com/users/jrodewig/gists{/gist_id}","starred_url":"https://api.github.com/users/jrodewig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrodewig/subscriptions","organizations_url":"https://api.github.com/users/jrodewig/orgs","repos_url":"https://api.github.com/users/jrodewig/repos","events_url":"https://api.github.com/users/jrodewig/events{/privacy}","received_events_url":"https://api.github.com/users/jrodewig/received_events","type":"User","site_admin":false},"assignees":[{"login":"jrodewig","id":40268737,"node_id":"MDQ6VXNlcjQwMjY4NzM3","avatar_url":"https://avatars1.githubusercontent.com/u/40268737?v=4","gravatar_id":"","url":"https://api.github.com/users/jrodewig","html_url":"https://github.com/jrodewig","followers_url":"https://api.github.com/users/jrodewig/followers","following_url":"https://api.github.com/users/jrodewig/following{/other_user}","gists_url":"https://api.github.com/users/jrodewig/gists{/gist_id}","starred_url":"https://api.github.com/users/jrodewig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrodewig/subscriptions","organizations_url":"https://api.github.com/users/jrodewig/orgs","repos_url":"https://api.github.com/users/jrodewig/repos","events_url":"https://api.github.com/users/jrodewig/events{/privacy}","received_events_url":"https://api.github.com/users/jrodewig/received_events","type":"User","site_admin":false}],"milestone":null,"comments":5,"created_at":"2019-06-25T16:25:17Z","updated_at":"2019-10-24T14:39:05Z","closed_at":"2019-10-16T17:00:29Z","author_association":"NONE","active_lock_reason":null,"body":"<!-- Feature request -->\r\n\r\n**Describe the feature**:\r\nShort version:\r\nExtra ILM documentation that shows an example policy that rolls over because of a document count limit for the purpose of giving users an anchor for what a reasonable document count limit might be.\r\n\r\nLonger explanation with more context:\r\nI‚Äôd like to see some examples in the ILM documentation that use a document count limit. By reading the example with 50GB and 30d limits, I can see us implying that putting more than 50GB in an index is a bad idea, and we are nudging that for sparse data, grouping approximately monthly is effective.  What I can‚Äôt tell is what‚Äôs a recommended upper limit on doc count if that‚Äôs potentially my constraint‚Ä¶. My index pattern has 25 million docs across an 18-month window and it only takes up just over 7 GB of storage, so I‚Äôm thinking my ILM policy should maybe use a doc count limit combined with the 30 day time limit, but the docs don‚Äôt give me much to anchor my threshold, other than the separate page on basic concepts informing me that lucene has a hard limit of 2.1 billion docs per index.\r\n\r\nSort of separate, but also related, it's not clear at all what my process should be for migrating existing data into an ILM policy, since any timings are based on index creation, not document timestamp, so I think my default if I just remote reindex into the new cluster is going to leave me with basically a giant blob of the existing data as my first index, and then a bunch of much smaller ones following.\r\n\r\nI'm super excited about the feature, and generally I think I've been able to understand the docs well üëç ","closed_by":{"login":"andymjames","id":31216945,"node_id":"MDQ6VXNlcjMxMjE2OTQ1","avatar_url":"https://avatars0.githubusercontent.com/u/31216945?v=4","gravatar_id":"","url":"https://api.github.com/users/andymjames","html_url":"https://github.com/andymjames","followers_url":"https://api.github.com/users/andymjames/followers","following_url":"https://api.github.com/users/andymjames/following{/other_user}","gists_url":"https://api.github.com/users/andymjames/gists{/gist_id}","starred_url":"https://api.github.com/users/andymjames/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andymjames/subscriptions","organizations_url":"https://api.github.com/users/andymjames/orgs","repos_url":"https://api.github.com/users/andymjames/repos","events_url":"https://api.github.com/users/andymjames/events{/privacy}","received_events_url":"https://api.github.com/users/andymjames/received_events","type":"User","site_admin":false},"performed_via_github_app":null}