{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/13489","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13489/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13489/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13489/events","html_url":"https://github.com/elastic/elasticsearch/issues/13489","id":105886995,"node_id":"MDU6SXNzdWUxMDU4ODY5OTU=","number":13489,"title":"cat.recovery/10_basic is missing a recovery stage","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"labels":[{"id":165912659,"node_id":"MDU6TGFiZWwxNjU5MTI2NTk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/CAT%20APIs","name":":Core/Features/CAT APIs","color":"0e8a16","default":false,"description":"Text APIs behind /_cat"},{"id":60445228,"node_id":"MDU6TGFiZWw2MDQ0NTIyOA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest","name":">test","color":"5319e7","default":false,"description":"Issues or PRs that are addressing/adding tests"},{"id":260270551,"node_id":"MDU6TGFiZWwyNjAyNzA1NTE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v2.0.0-beta2","name":"v2.0.0-beta2","color":"dddddd","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"assignees":[{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2015-09-10T20:00:21Z","updated_at":"2016-03-10T18:16:07Z","closed_at":"2015-09-10T21:03:21Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"It looks like cat.recovery/10_basic is missing one of the constants from `RecoveryState`.\n\n```\nFAILURE 0.29s J3 | Rest2IT.test {yaml=cat.recovery/10_basic/Test cat recovery output} <<<\n   > Throwable #1: java.lang.AssertionError: field [$body] was expected to match the provided regex but didn't\n   > Expected: ^\n   > (\n   >   index1      \\s+\n   >   \\d          \\s+                                 # shard\n   >   \\d+         \\s+                                 # time\n   >   (store|replica|snapshot|relocating)     \\s+   # type\n   >   (init|index|start|translog|finalize|done) \\s+   # stage\n   >   [-\\w./]+    \\s+                                 # source_host\n   >   [-\\w./]+    \\s+                                 # target_host\n   >   [-\\w./]+    \\s+                                 # repository\n   >   [-\\w./]+    \\s+                                 # snapshot\n   >   \\d+         \\s+                                 # files\n   >   \\d+\\.\\d+%   \\s+                                 # files_percent\n   >   \\d+         \\s+                                 # bytes\n   >   \\d+\\.\\d+%   \\s+                                 # bytes_percent\n   >   \\d+         \\s+                                 # total_files\n   >   \\d+         \\s+                                 # total_bytes\n   >   \\d+         \\s+                                 # translog\n   >   -?\\d+\\.\\d+% \\s+                                 # translog_percent\n   >   -?\\d+       \\s+                                 # total_translog\n   >   \\n\n   > )+\n   > $\n   >      but: was \"index1 0 3  store   done         local local n/a n/a 0 0.0%   0   0.0%   0 0   0 100.0% 0 \\nindex1 0 48 replica verify_index local local n/a n/a 1 100.0% 130 100.0% 1 130 0 0.0%   1 \\n\"\n   >    at __randomizedtesting.SeedInfo.seed([ED06E3B0DDBF01F2:6552DC6A73436C0A]:0)\n   >    at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\n   >    at org.elasticsearch.test.rest.section.MatchAssertion.doAssert(MatchAssertion.java:55)\n   >    at org.elasticsearch.test.rest.section.Assertion.execute(Assertion.java:69)\n   >    at org.elasticsearch.test.rest.ESRestTestCase.test(ESRestTestCase.java:373)\n   >    at java.lang.Thread.run(Thread.java:745)\n  2> NOTE: leaving temporary files on disk at: /home/manybubbles/Workspaces/Elasticsearch/elasticsearch/core/target/J3/temp/org.elasticsearch.test.rest.Rest2IT_ED06E3B0DDBF01F2-001\n  2> NOTE: test params are: codec=Asserting(Lucene53): {}, docValues:{}, sim=RandomSimilarityProvider(queryNorm=true,coord=crazy): {}, locale=it_IT, timezone=Australia/Currie\n  2> NOTE: Linux 3.19.0-26-generic amd64/Oracle Corporation 1.8.0_45-internal (64-bit)/cpus=12,threads=1,free=388863912,total=517472256\n  2> NOTE: All tests run in this JVM: [UpdateMappingOnClusterIT, Rest2IT]\n```\n\nReproduction command:\n\n```\nmvn verify -Pdev -Dskip.unit.tests -pl org.elasticsearch:elasticsearch -Dtests.seed=ED06E3B0DDBF01F2 -Dtests.class=org.elasticsearch.test.rest.Rest2IT -Dtests.method=\"test {yaml=cat.recovery/10_basic/Test cat recovery output}\" -Des.logger.level=ERROR -Dtests.assertion.disabled=false -Dtests.security.manager=true -Dtests.heap.size=512m -Dtests.locale=it_IT -Dtests.timezone=Australia/Currie\n```\n\nI'm not sure which versions this effects.\n","closed_by":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"performed_via_github_app":null}