[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227176480","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227176480","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227176480,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzE3NjQ4MA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-06-20T15:27:35Z","updated_at":"2016-06-20T15:27:35Z","author_association":"CONTRIBUTOR","body":"@SergiuCip When you say:\n\n> and we had to remove some logs in order to reduce the disk space usage.\n\ndo you mean transaction logs or files in the `logs/` directory?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227178640","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227178640","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227178640,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzE3ODY0MA==","user":{"login":"uplexPaul","id":20047742,"node_id":"MDQ6VXNlcjIwMDQ3NzQy","avatar_url":"https://avatars2.githubusercontent.com/u/20047742?v=4","gravatar_id":"","url":"https://api.github.com/users/uplexPaul","html_url":"https://github.com/uplexPaul","followers_url":"https://api.github.com/users/uplexPaul/followers","following_url":"https://api.github.com/users/uplexPaul/following{/other_user}","gists_url":"https://api.github.com/users/uplexPaul/gists{/gist_id}","starred_url":"https://api.github.com/users/uplexPaul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uplexPaul/subscriptions","organizations_url":"https://api.github.com/users/uplexPaul/orgs","repos_url":"https://api.github.com/users/uplexPaul/repos","events_url":"https://api.github.com/users/uplexPaul/events{/privacy}","received_events_url":"https://api.github.com/users/uplexPaul/received_events","type":"User","site_admin":false},"created_at":"2016-06-20T15:34:40Z","updated_at":"2016-06-20T15:34:40Z","author_association":"NONE","body":"Hi. I am working with @SergiuCip on that issue\n\n@clintongormley:\nHe doesn't mean that we removed translog files. Just forget the sentence ;)\nBut it seems like we somehow lost translog files by moving indexes around or whatever.\n\nBut anyway, the main INDEX itself is intact (checked with lucene). So even if we don't have translog files anymore for these indices, they SHOULD be able to recover even without these translog when the index is not corrupted. That is, wat we would like to achieve.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227186837","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227186837","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227186837,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzE4NjgzNw==","user":{"login":"SergiuCip","id":4825638,"node_id":"MDQ6VXNlcjQ4MjU2Mzg=","avatar_url":"https://avatars2.githubusercontent.com/u/4825638?v=4","gravatar_id":"","url":"https://api.github.com/users/SergiuCip","html_url":"https://github.com/SergiuCip","followers_url":"https://api.github.com/users/SergiuCip/followers","following_url":"https://api.github.com/users/SergiuCip/following{/other_user}","gists_url":"https://api.github.com/users/SergiuCip/gists{/gist_id}","starred_url":"https://api.github.com/users/SergiuCip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergiuCip/subscriptions","organizations_url":"https://api.github.com/users/SergiuCip/orgs","repos_url":"https://api.github.com/users/SergiuCip/repos","events_url":"https://api.github.com/users/SergiuCip/events{/privacy}","received_events_url":"https://api.github.com/users/SergiuCip/received_events","type":"User","site_admin":false},"created_at":"2016-06-20T16:01:25Z","updated_at":"2016-06-20T16:01:25Z","author_association":"NONE","body":"@clintongormley: I am sorry for being ambigue :) what I meant was that we have deleted some logs from /var/log/elasticsearch because they were growing at fast rate because of the recovery process. as @uplexPaul mentioned we do have the translog.ckp but not the translog files itself. \n\nWhen you try to start elasticsearch with those indices it will complain that cannot start due to reasons that I have posted previously in my first post.\n\nAny help it is appreciated.\n\nThanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227188405","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227188405","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227188405,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzE4ODQwNQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-06-20T16:06:51Z","updated_at":"2016-06-20T16:06:51Z","author_association":"CONTRIBUTOR","body":"Sorry to ask but are you sure you're on 2.3.3?  On all nodes? We had a bug in early versions of 2.x which ended up with corrupt transaction logs after disk full, but I haven't heard reports of this since 2.3\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227189708","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227189708","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227189708,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzE4OTcwOA==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-06-20T16:11:12Z","updated_at":"2016-06-20T16:11:12Z","author_association":"MEMBER","body":"and one more clarification - you say you do have the translog.ckp file, but the exception  indicates differently:\n\n```\nNoSuchFileException[/var/lib/elasticsearch/elasticsearch/nodes/0/indices/logstash-2016.05.11/4/translog/translog.ckp];\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227190562","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227190562","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227190562,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzE5MDU2Mg==","user":{"login":"SergiuCip","id":4825638,"node_id":"MDQ6VXNlcjQ4MjU2Mzg=","avatar_url":"https://avatars2.githubusercontent.com/u/4825638?v=4","gravatar_id":"","url":"https://api.github.com/users/SergiuCip","html_url":"https://github.com/SergiuCip","followers_url":"https://api.github.com/users/SergiuCip/followers","following_url":"https://api.github.com/users/SergiuCip/following{/other_user}","gists_url":"https://api.github.com/users/SergiuCip/gists{/gist_id}","starred_url":"https://api.github.com/users/SergiuCip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergiuCip/subscriptions","organizations_url":"https://api.github.com/users/SergiuCip/orgs","repos_url":"https://api.github.com/users/SergiuCip/repos","events_url":"https://api.github.com/users/SergiuCip/events{/privacy}","received_events_url":"https://api.github.com/users/SergiuCip/received_events","type":"User","site_admin":false},"created_at":"2016-06-20T16:14:11Z","updated_at":"2016-06-20T16:14:11Z","author_association":"NONE","body":"@clintongormley Hi and thanks for the update, yes I beg your pardon we were running ES version 2.3.1 when the issue has occurred and then we updated to 2.3.3 \n\n@bleskes: So, we have tried everything ....keeping the .ckp file and tried to start ES but no luck...also I have tried to delete the .ckp file...and try to start ES but no luck either\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227223335","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227223335","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227223335,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzIyMzMzNQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-06-20T18:12:51Z","updated_at":"2016-06-20T18:12:51Z","author_association":"CONTRIBUTOR","body":"@SergiuCip I can see some EOF exceptions but I am missing the part where it says which file goes EOF is it possible to get the full exceptions? Do you also have the log from when this thing went disk full? Would be great to get all of the logs and exceptions traces\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227233974","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227233974","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227233974,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzIzMzk3NA==","user":{"login":"SergiuCip","id":4825638,"node_id":"MDQ6VXNlcjQ4MjU2Mzg=","avatar_url":"https://avatars2.githubusercontent.com/u/4825638?v=4","gravatar_id":"","url":"https://api.github.com/users/SergiuCip","html_url":"https://github.com/SergiuCip","followers_url":"https://api.github.com/users/SergiuCip/followers","following_url":"https://api.github.com/users/SergiuCip/following{/other_user}","gists_url":"https://api.github.com/users/SergiuCip/gists{/gist_id}","starred_url":"https://api.github.com/users/SergiuCip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergiuCip/subscriptions","organizations_url":"https://api.github.com/users/SergiuCip/orgs","repos_url":"https://api.github.com/users/SergiuCip/repos","events_url":"https://api.github.com/users/SergiuCip/events{/privacy}","received_events_url":"https://api.github.com/users/SergiuCip/received_events","type":"User","site_admin":false},"created_at":"2016-06-20T18:50:43Z","updated_at":"2016-06-20T18:50:43Z","author_association":"NONE","body":"@s1monw I will try to see if I can find it in the log where it says EOF, however, for the log when the disk started to become full, I am afraid that I don't have that anymore as that was the first log we started truncating because of fast size increase.\n\nI will do my best to provide you with as much logging as possible ;)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227395943","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227395943","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227395943,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzM5NTk0Mw==","user":{"login":"SergiuCip","id":4825638,"node_id":"MDQ6VXNlcjQ4MjU2Mzg=","avatar_url":"https://avatars2.githubusercontent.com/u/4825638?v=4","gravatar_id":"","url":"https://api.github.com/users/SergiuCip","html_url":"https://github.com/SergiuCip","followers_url":"https://api.github.com/users/SergiuCip/followers","following_url":"https://api.github.com/users/SergiuCip/following{/other_user}","gists_url":"https://api.github.com/users/SergiuCip/gists{/gist_id}","starred_url":"https://api.github.com/users/SergiuCip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergiuCip/subscriptions","organizations_url":"https://api.github.com/users/SergiuCip/orgs","repos_url":"https://api.github.com/users/SergiuCip/repos","events_url":"https://api.github.com/users/SergiuCip/events{/privacy}","received_events_url":"https://api.github.com/users/SergiuCip/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T10:03:12Z","updated_at":"2016-06-21T10:03:12Z","author_association":"NONE","body":"Good morning everyone!\n\nThank you for all the support along the way! As promised I have run the test again in order to have a detailed log and here it is: https://gist.github.com/SergiuCip/86dc26c3f67a526d7e4abc060c327eb4\n\nAlso please find attached the .ckp file for this log\n[translog.ckp.zip](https://github.com/elastic/elasticsearch/files/325266/translog.ckp.zip)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227399543","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227399543","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227399543,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzM5OTU0Mw==","user":{"login":"SergiuCip","id":4825638,"node_id":"MDQ6VXNlcjQ4MjU2Mzg=","avatar_url":"https://avatars2.githubusercontent.com/u/4825638?v=4","gravatar_id":"","url":"https://api.github.com/users/SergiuCip","html_url":"https://github.com/SergiuCip","followers_url":"https://api.github.com/users/SergiuCip/followers","following_url":"https://api.github.com/users/SergiuCip/following{/other_user}","gists_url":"https://api.github.com/users/SergiuCip/gists{/gist_id}","starred_url":"https://api.github.com/users/SergiuCip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergiuCip/subscriptions","organizations_url":"https://api.github.com/users/SergiuCip/orgs","repos_url":"https://api.github.com/users/SergiuCip/repos","events_url":"https://api.github.com/users/SergiuCip/events{/privacy}","received_events_url":"https://api.github.com/users/SergiuCip/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T10:20:08Z","updated_at":"2016-06-21T10:21:22Z","author_association":"NONE","body":"The EOF error occurs when I manually touch the translog-21.tlog file:\n\nhttps://gist.github.com/SergiuCip/984f26e1ac6cae562b35a48be7a27164\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227428334","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227428334","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227428334,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzQyODMzNA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T12:45:40Z","updated_at":"2016-06-21T12:45:40Z","author_association":"CONTRIBUTOR","body":"@SergiuCip thanks for all the files and infos, lemme ask some more questinons:\n- Do you still see a translog-20.ckp file sitting around and is there a translog-20.tlog file as well?\n- when you hit the disk full outage which exact ES version did you run sicne this looks pretty much like this https://github.com/elastic/elasticsearch/pull/15788\n- when you say the `The EOF error occurs when I manually touch the translog-21.tlog file:` does this mean the `translog-21.tlog` file didn't exists and you added it?\n- the original exception was a `FileNotFound` is this correct?\n\nthanks!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227429635","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227429635","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227429635,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzQyOTYzNQ==","user":{"login":"SergiuCip","id":4825638,"node_id":"MDQ6VXNlcjQ4MjU2Mzg=","avatar_url":"https://avatars2.githubusercontent.com/u/4825638?v=4","gravatar_id":"","url":"https://api.github.com/users/SergiuCip","html_url":"https://github.com/SergiuCip","followers_url":"https://api.github.com/users/SergiuCip/followers","following_url":"https://api.github.com/users/SergiuCip/following{/other_user}","gists_url":"https://api.github.com/users/SergiuCip/gists{/gist_id}","starred_url":"https://api.github.com/users/SergiuCip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergiuCip/subscriptions","organizations_url":"https://api.github.com/users/SergiuCip/orgs","repos_url":"https://api.github.com/users/SergiuCip/repos","events_url":"https://api.github.com/users/SergiuCip/events{/privacy}","received_events_url":"https://api.github.com/users/SergiuCip/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T12:51:11Z","updated_at":"2016-06-21T12:51:25Z","author_association":"NONE","body":"@s1monw You're welcome and thank you for helping me debug it.\n1. No I cannot see the translog-20.ckp file anywhere...I had to create it manually but again it complained.\n2. When the issue happen I was running version 3.2.1\n3. Yes it is correct. When you add the broken index these are the first lines of the log:\n\n[logstash-2016.05.12][[logstash-2016.05.12][3]] IndexShardRecoveryException[failed to recovery from gateway]; nested: EngineCreationFailureException[failed to create engine]; nes\nted: NoSuchFileException[/home/scorn/test_es/data/elasticsearch/nodes/0/indices/logstash-2016.05.12/3/translog/translog-21.tlog];\n    at org.elasticsearch.index.shard.StoreRecoveryService.recoverFromStore(StoreRecoveryService.java:250)\n    at org.elasticsearch.index.shard.StoreRecoveryService.access$100(StoreRecoveryService.java:56)\n    at org.elasticsearch.index.shard.StoreRecoveryService$1.run(StoreRecoveryService.java:129)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: [logstash-2016.05.12][[logstash-2016.05.12][3]] EngineCreationFailureException[failed to create engine]; nested: NoSuchFileException[/home/scorn/test_es/data/elasticse\narch/nodes/0/indices/logstash-2016.05.12/3/translog/translog-21.tlog];\n    at org.elasticsearch.index.engine.InternalEngine.<init>(InternalEngine.java:155)\n    at org.elasticsearch.index.engine.InternalEngineFactory.newReadWriteEngine(InternalEngineFactory.java:25)\n    at org.elasticsearch.index.shard.IndexShard.newEngine(IndexShard.java:1509)\n    at org.elasticsearch.index.shard.IndexShard.createNewEngine(IndexShard.java:1493)\n    at org.elasticsearch.index.shard.IndexShard.internalPerformTranslogRecovery(IndexShard.java:966)\n    at org.elasticsearch.index.shard.IndexShard.performTranslogRecovery(IndexShard.java:938)\n    at org.elasticsearch.index.shard.StoreRecoveryService.recoverFromStore(StoreRecoveryService.java:241)\n    ... 5 more\nCaused by: java.nio.file.NoSuchFileException: /home/scorn/test_es/data/elasticsearch/nodes/0/indices/logstash-2016.05.12/3/translog/translog-21.tlog\n    at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)\n    at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)\n    at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)\n    at sun.nio.fs.UnixFileSystemProvider.newFileChannel(UnixFileSystemProvider.java:177)\n    at java.nio.channels.FileChannel.open(FileChannel.java:287)\n    at java.nio.channels.FileChannel.open(FileChannel.java:335)\n    at org.elasticsearch.index.translog.Translog.openReader(Translog.java:374)\n    at org.elasticsearch.index.translog.Translog.recoverFromFiles(Translog.java:334)\n    at org.elasticsearch.index.translog.Translog.<init>(Translog.java:179)\n    at org.elasticsearch.index.engine.InternalEngine.openTranslog(InternalEngine.java:208)\n    at org.elasticsearch.index.engine.InternalEngine.<init>(InternalEngine.java:151)\n    ... 11 more\n[2016-06-21 09:41:30,949][WARN ][cluster.action.shard     ] [Advisor] [logstash-2016.05.12][3] received shard failed for target shard [[logstash-2016.05.12][3], node[Tgnuvv4DSTut\ngGCRQpR0ig], [P], v[3], s[INITIALIZING], a[id=ekDqqz2BQEi0ur8Fi7Ow1w], unassigned_info[[reason=CLUSTER_RECOVERED], at[2016-06-21T09:41:30.116Z]]], indexUUID [HLREui0SRAO1LZt8ybnT\nWA], message [failed recovery], failure [IndexShardRecoveryException[failed to recovery from gateway]; nested: EngineCreationFailureException[failed to create engine]; nested: No\nSuchFileException[/home/scorn/test_es/data/elasticsearch/nodes/0/indices/logstash-2016.05.12/3/translog/translog-21.tlog]; ]\n[logstash-2016.05.12][[logstash-2016.05.12][3]] IndexShardRecoveryException[failed to recovery from gateway]; nested: EngineCreationFailureException[failed to create engine]; nes\nted: NoSuchFileException[/home/scorn/test_es/data/elasticsearch/nodes/0/indices/logstash-2016.05.12/3/translog/translog-21.tlog];\n    at org.elasticsearch.index.shard.StoreRecoveryService.recoverFromStore(StoreRecoveryService.java:250)\n    at org.elasticsearch.index.shard.StoreRecoveryService.access$100(StoreRecoveryService.java:56)\n    at org.elasticsearch.index.shard.StoreRecoveryService$1.run(StoreRecoveryService.java:129)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: [logstash-2016.05.12][[logstash-2016.05.12][3]] EngineCreationFailureException[failed to create engine]; nested: NoSuchFileException[/home/scorn/test_es/data/elasticse\narch/nodes/0/indices/logstash-2016.05.12/3/translog/translog-21.tlog];\n\nThank you :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227436254","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227436254","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227436254,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzQzNjI1NA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T13:17:39Z","updated_at":"2016-06-21T13:17:39Z","author_association":"CONTRIBUTOR","body":"> When the issue happen I was running version 3.2.1\n\nI assume you mean 2.3.1? \n\n> No I cannot see the translog-20.ckp file anywhere...I had to create it manually but again it complained.\n\ncan I get a directory listing of `home/scorn/test_es/data/elasticsearch/nodes/0/indices/logstash-2016.05.12/3/translog/` or can you maybe even zip it?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227437914","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227437914","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227437914,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzQzNzkxNA==","user":{"login":"SergiuCip","id":4825638,"node_id":"MDQ6VXNlcjQ4MjU2Mzg=","avatar_url":"https://avatars2.githubusercontent.com/u/4825638?v=4","gravatar_id":"","url":"https://api.github.com/users/SergiuCip","html_url":"https://github.com/SergiuCip","followers_url":"https://api.github.com/users/SergiuCip/followers","following_url":"https://api.github.com/users/SergiuCip/following{/other_user}","gists_url":"https://api.github.com/users/SergiuCip/gists{/gist_id}","starred_url":"https://api.github.com/users/SergiuCip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergiuCip/subscriptions","organizations_url":"https://api.github.com/users/SergiuCip/orgs","repos_url":"https://api.github.com/users/SergiuCip/repos","events_url":"https://api.github.com/users/SergiuCip/events{/privacy}","received_events_url":"https://api.github.com/users/SergiuCip/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T13:23:48Z","updated_at":"2016-06-21T13:26:49Z","author_association":"NONE","body":"@s1monw Thank you,\n\nYes I meant 2.3.1 :) Sorry about that.\n\nAnd I will be sending you the compressed directory through email. \n\nPlease note that the translog-21.tlog are just touched files by me. The translog directory only contained translog.ckp\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227441304","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227441304","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227441304,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzQ0MTMwNA==","user":{"login":"SergiuCip","id":4825638,"node_id":"MDQ6VXNlcjQ4MjU2Mzg=","avatar_url":"https://avatars2.githubusercontent.com/u/4825638?v=4","gravatar_id":"","url":"https://api.github.com/users/SergiuCip","html_url":"https://github.com/SergiuCip","followers_url":"https://api.github.com/users/SergiuCip/followers","following_url":"https://api.github.com/users/SergiuCip/following{/other_user}","gists_url":"https://api.github.com/users/SergiuCip/gists{/gist_id}","starred_url":"https://api.github.com/users/SergiuCip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergiuCip/subscriptions","organizations_url":"https://api.github.com/users/SergiuCip/orgs","repos_url":"https://api.github.com/users/SergiuCip/repos","events_url":"https://api.github.com/users/SergiuCip/events{/privacy}","received_events_url":"https://api.github.com/users/SergiuCip/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T13:35:44Z","updated_at":"2016-06-21T13:35:44Z","author_association":"NONE","body":"@s1monw  And this is what I get when I do not have the translog-21.tlog files touched:\n\n[2016-06-21 13:15:11,257][WARN ][indices.cluster          ] [Timeslip] [[logstash-2016.05.11][2]] marking and sending shard failed due to [failed recovery]\n[logstash-2016.05.11][[logstash-2016.05.11][2]] IndexShardRecoveryException[failed to recovery from gateway]; nested: EngineCreationFailureException[failed to create engine]; nes\nted: EOFException;\n    at org.elasticsearch.index.shard.StoreRecoveryService.recoverFromStore(StoreRecoveryService.java:250)\n    at org.elasticsearch.index.shard.StoreRecoveryService.access$100(StoreRecoveryService.java:56)\n    at org.elasticsearch.index.shard.StoreRecoveryService$1.run(StoreRecoveryService.java:129)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: [logstash-2016.05.11][[logstash-2016.05.11][2]] EngineCreationFailureException[failed to create engine]; nested: EOFException;\n    at org.elasticsearch.index.engine.InternalEngine.<init>(InternalEngine.java:155)\n    at org.elasticsearch.index.engine.InternalEngineFactory.newReadWriteEngine(InternalEngineFactory.java:25)\n    at org.elasticsearch.index.shard.IndexShard.newEngine(IndexShard.java:1509)\n    at org.elasticsearch.index.shard.IndexShard.createNewEngine(IndexShard.java:1493)\n    at org.elasticsearch.index.shard.IndexShard.internalPerformTranslogRecovery(IndexShard.java:966)\n    at org.elasticsearch.index.shard.IndexShard.performTranslogRecovery(IndexShard.java:938)\n    at org.elasticsearch.index.shard.StoreRecoveryService.recoverFromStore(StoreRecoveryService.java:241)\n    ... 5 more\nCaused by: java.io.EOFException\n    at org.apache.lucene.store.InputStreamDataInput.readByte(InputStreamDataInput.java:37)\n    at org.apache.lucene.store.DataInput.readInt(DataInput.java:101)\n    at org.apache.lucene.store.DataInput.readLong(DataInput.java:157)\n    at org.elasticsearch.index.translog.Checkpoint.<init>(Checkpoint.java:54)\n    at org.elasticsearch.index.translog.Checkpoint.read(Checkpoint.java:83)\n    at org.elasticsearch.index.translog.Translog.readCheckpoint(Translog.java:1930)\n    at org.elasticsearch.index.translog.Translog.<init>(Translog.java:163)\n    at org.elasticsearch.index.engine.InternalEngine.openTranslog(InternalEngine.java:208)\n    at org.elasticsearch.index.engine.InternalEngine.<init>(InternalEngine.java:151)\n    ... 11 more\n[2016-06-21 13:15:11,263][WARN ][cluster.action.shard     ] [Timeslip] [logstash-2016.05.11][2] received shard failed for target shard [[logstash-2016.05.11][2], node[Ja7_6NXIR8i\nEzqxDnLi2Yg], [P], v[3], s[INITIALIZING], a[id=KCrRrfxmRA-O_bJcR3rp_w], unassigned_info[[reason=CLUSTER_RECOVERED], at[2016-06-21T13:15:10.560Z]]], indexUUID [HLREui0SRAO1LZt8ybn\nTWA], message [failed recovery], failure [IndexShardRecoveryException[failed to recovery from gateway]; nested: EngineCreationFailureException[failed to create engine]; nested: E\nOFException; ]\n[logstash-2016.05.11][[logstash-2016.05.11][2]] IndexShardRecoveryException[failed to recovery from gateway]; nested: EngineCreationFailureException[failed to create engine]; nes\nted: EOFException;\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227442947","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227442947","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227442947,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzQ0Mjk0Nw==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T13:41:28Z","updated_at":"2016-06-21T13:41:28Z","author_association":"CONTRIBUTOR","body":"> @s1monw And this is what I get when I do not have the translog-21.tlog files touched:\n\nwhat do you mean by _touched_?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227443558","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227443558","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227443558,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzQ0MzU1OA==","user":{"login":"SergiuCip","id":4825638,"node_id":"MDQ6VXNlcjQ4MjU2Mzg=","avatar_url":"https://avatars2.githubusercontent.com/u/4825638?v=4","gravatar_id":"","url":"https://api.github.com/users/SergiuCip","html_url":"https://github.com/SergiuCip","followers_url":"https://api.github.com/users/SergiuCip/followers","following_url":"https://api.github.com/users/SergiuCip/following{/other_user}","gists_url":"https://api.github.com/users/SergiuCip/gists{/gist_id}","starred_url":"https://api.github.com/users/SergiuCip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergiuCip/subscriptions","organizations_url":"https://api.github.com/users/SergiuCip/orgs","repos_url":"https://api.github.com/users/SergiuCip/repos","events_url":"https://api.github.com/users/SergiuCip/events{/privacy}","received_events_url":"https://api.github.com/users/SergiuCip/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T13:43:44Z","updated_at":"2016-06-21T13:43:44Z","author_association":"NONE","body":"@s1monw touch translog-21.tlog\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227449194","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227449194","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227449194,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzQ0OTE5NA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T14:02:17Z","updated_at":"2016-06-21T14:02:39Z","author_association":"CONTRIBUTOR","body":"ok there are several things that don't make sense:\n\n there is no way you get past this:\n\n```\nCaused by: java.io.EOFException\nat org.apache.lucene.store.InputStreamDataInput.readByte(InputStreamDataInput.java:37)\nat org.apache.lucene.store.DataInput.readInt(DataInput.java:101)\nat org.apache.lucene.store.DataInput.readLong(DataInput.java:157)\nat org.elasticsearch.index.translog.Checkpoint.(Checkpoint.java:54)\nat org.elasticsearch.index.translog.Checkpoint.read(Checkpoint.java:83)\nat org.elasticsearch.index.translog.Translog.readCheckpoint(Translog.java:1930)\nat org.elasticsearch.index.translog.Translog.(Translog.java:163)\nat org.elasticsearch.index.engine.InternalEngine.openTranslog(InternalEngine.java:208)\nat org.elasticsearch.index.engine.InternalEngine.(InternalEngine.java:151)\n```\n\nif you have the`translog-21.tlog` file or not given the file is really truncated so I wonder what your magic `touch` does. Also the files I got are via email have several `translog-21.tlog` files but they are not empty so there must be more to it than a touch? is it possible to get the original files not the ones you messed around with?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227450589","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227450589","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227450589,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzQ1MDU4OQ==","user":{"login":"uplexPaul","id":20047742,"node_id":"MDQ6VXNlcjIwMDQ3NzQy","avatar_url":"https://avatars2.githubusercontent.com/u/20047742?v=4","gravatar_id":"","url":"https://api.github.com/users/uplexPaul","html_url":"https://github.com/uplexPaul","followers_url":"https://api.github.com/users/uplexPaul/followers","following_url":"https://api.github.com/users/uplexPaul/following{/other_user}","gists_url":"https://api.github.com/users/uplexPaul/gists{/gist_id}","starred_url":"https://api.github.com/users/uplexPaul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uplexPaul/subscriptions","organizations_url":"https://api.github.com/users/uplexPaul/orgs","repos_url":"https://api.github.com/users/uplexPaul/repos","events_url":"https://api.github.com/users/uplexPaul/events{/privacy}","received_events_url":"https://api.github.com/users/uplexPaul/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T14:06:56Z","updated_at":"2016-06-21T14:06:56Z","author_association":"NONE","body":"@s1monw:\nThe original .tlog-Files are all lost. As we already said, we only have the ORIGINAL translog.ckp. @SergiuCip just tried to touch the file after elasticsearch was complaining about it couldn't find it. They were not there before. Possibly we lost them - we don't have them - we can't send them to you, sorry.\nThe files you have in your archive are really only the result of \"touch translog-21.tlog\"\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227456839","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227456839","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227456839,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzQ1NjgzOQ==","user":{"login":"SergiuCip","id":4825638,"node_id":"MDQ6VXNlcjQ4MjU2Mzg=","avatar_url":"https://avatars2.githubusercontent.com/u/4825638?v=4","gravatar_id":"","url":"https://api.github.com/users/SergiuCip","html_url":"https://github.com/SergiuCip","followers_url":"https://api.github.com/users/SergiuCip/followers","following_url":"https://api.github.com/users/SergiuCip/following{/other_user}","gists_url":"https://api.github.com/users/SergiuCip/gists{/gist_id}","starred_url":"https://api.github.com/users/SergiuCip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergiuCip/subscriptions","organizations_url":"https://api.github.com/users/SergiuCip/orgs","repos_url":"https://api.github.com/users/SergiuCip/repos","events_url":"https://api.github.com/users/SergiuCip/events{/privacy}","received_events_url":"https://api.github.com/users/SergiuCip/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T14:27:16Z","updated_at":"2016-06-21T14:27:53Z","author_association":"NONE","body":"@s1monw Yes @uplexPaul is right, the index translog directory contained only translog.ckp, the rest of the files inside the translog directory were gone. Therefore this is the issue of not being able to recover.\n\nSo one of my attempts to 'try' and recover it was to 'touch translog-21.tlog' and see what happens.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227457063","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227457063","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227457063,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzQ1NzA2Mw==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T14:28:01Z","updated_at":"2016-06-21T14:28:01Z","author_association":"CONTRIBUTOR","body":"> @s1monw Yes @uplexPaul is right, the index translog directory contained only translog.ckp, the rest of the files inside the translog directory were gone. Therefore this is the issue of not being able to recover.\n\nI understand but the translog.ckp files you send me are all fine - they are not broken or anything so I wonder if I got the wrong one?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227459453","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227459453","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227459453,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzQ1OTQ1Mw==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T14:35:30Z","updated_at":"2016-06-21T14:35:30Z","author_association":"CONTRIBUTOR","body":"you posted an exception that runs into `EOFException` and this is on a `translog.ckp` file. I read all of them and they are all good. Also the `translog-21.tlog` contain the translog headers so they must have been created by elasticsearch hence my confusion\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227459820","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227459820","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227459820,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzQ1OTgyMA==","user":{"login":"SergiuCip","id":4825638,"node_id":"MDQ6VXNlcjQ4MjU2Mzg=","avatar_url":"https://avatars2.githubusercontent.com/u/4825638?v=4","gravatar_id":"","url":"https://api.github.com/users/SergiuCip","html_url":"https://github.com/SergiuCip","followers_url":"https://api.github.com/users/SergiuCip/followers","following_url":"https://api.github.com/users/SergiuCip/following{/other_user}","gists_url":"https://api.github.com/users/SergiuCip/gists{/gist_id}","starred_url":"https://api.github.com/users/SergiuCip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergiuCip/subscriptions","organizations_url":"https://api.github.com/users/SergiuCip/orgs","repos_url":"https://api.github.com/users/SergiuCip/repos","events_url":"https://api.github.com/users/SergiuCip/events{/privacy}","received_events_url":"https://api.github.com/users/SergiuCip/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T14:36:37Z","updated_at":"2016-06-21T14:36:37Z","author_association":"NONE","body":"I have run now the space without the translog-21.tlog files touched and I get this:\n\nJun 21 14:34:43 log-01.novalocal elasticsearch[20591]: [2016-06-21 14:34:43,085][INFO ][gateway                  ] [Morph] recovered [1] indices into cluster_state\nJun 21 14:34:43 log-01.novalocal elasticsearch[20591]: [2016-06-21 14:34:43,087][INFO ][gateway                  ] [Morph] auto importing dangled indices [logstash-2016.05.12/OPE\n[scorn@log-01 0]$ sudo journalctl -eu elasticsearch_scorn\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.engine.InternalEngine.<init>(InternalEngine.java:155)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.engine.InternalEngineFactory.newReadWriteEngine(InternalEngineFactory.java:25)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.shard.IndexShard.newEngine(IndexShard.java:1509)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.shard.IndexShard.createNewEngine(IndexShard.java:1493)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.shard.IndexShard.internalPerformTranslogRecovery(IndexShard.java:966)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.shard.IndexShard.performTranslogRecovery(IndexShard.java:938)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.shard.StoreRecoveryService.recoverFromStore(StoreRecoveryService.java:241)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: ... 5 more\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: Caused by: java.io.EOFException\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.apache.lucene.store.InputStreamDataInput.readByte(InputStreamDataInput.java:37)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.apache.lucene.store.DataInput.readInt(DataInput.java:101)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.apache.lucene.store.DataInput.readLong(DataInput.java:157)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.translog.Checkpoint.<init>(Checkpoint.java:54)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.translog.Checkpoint.read(Checkpoint.java:83)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.translog.Translog.readCheckpoint(Translog.java:1930)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.translog.Translog.<init>(Translog.java:163)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.engine.InternalEngine.openTranslog(InternalEngine.java:208)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.engine.InternalEngine.<init>(InternalEngine.java:151)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: ... 11 more\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: [2016-06-21 14:34:44,811][WARN ][cluster.action.shard     ] [Morph] [logstash-2016.05.12][1] received shard failed for targ\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: [logstash-2016.05.12][[logstash-2016.05.12][1]] IndexShardRecoveryException[failed to recovery from gateway]; nested: Engin\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.shard.StoreRecoveryService.recoverFromStore(StoreRecoveryService.java:250)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.shard.StoreRecoveryService.access$100(StoreRecoveryService.java:56)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.shard.StoreRecoveryService$1.run(StoreRecoveryService.java:129)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at java.lang.Thread.run(Thread.java:745)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: Caused by: [logstash-2016.05.12][[logstash-2016.05.12][1]] EngineCreationFailureException[failed to create engine]; nested:\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.engine.InternalEngine.<init>(InternalEngine.java:155)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.engine.InternalEngineFactory.newReadWriteEngine(InternalEngineFactory.java:25)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.shard.IndexShard.newEngine(IndexShard.java:1509)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.shard.IndexShard.createNewEngine(IndexShard.java:1493)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.shard.IndexShard.internalPerformTranslogRecovery(IndexShard.java:966)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.shard.IndexShard.performTranslogRecovery(IndexShard.java:938)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.shard.StoreRecoveryService.recoverFromStore(StoreRecoveryService.java:241)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: ... 5 more\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: Caused by: java.io.EOFException\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.apache.lucene.store.InputStreamDataInput.readByte(InputStreamDataInput.java:37)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.apache.lucene.store.DataInput.readInt(DataInput.java:101)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.apache.lucene.store.DataInput.readLong(DataInput.java:157)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.translog.Checkpoint.<init>(Checkpoint.java:54)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.translog.Checkpoint.read(Checkpoint.java:83)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.translog.Translog.readCheckpoint(Translog.java:1930)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.translog.Translog.<init>(Translog.java:163)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.engine.InternalEngine.openTranslog(InternalEngine.java:208)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.engine.InternalEngine.<init>(InternalEngine.java:151)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: ... 11 more\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: [2016-06-21 14:34:44,811][WARN ][indices.cluster          ] [Morph] [[logstash-2016.05.12][3]] marking and sending shard fa\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: [logstash-2016.05.12][[logstash-2016.05.12][3]] IndexShardRecoveryException[failed to recovery from gateway]; nested: Engin\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.shard.StoreRecoveryService.recoverFromStore(StoreRecoveryService.java:250)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.shard.StoreRecoveryService.access$100(StoreRecoveryService.java:56)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at org.elasticsearch.index.shard.StoreRecoveryService$1.run(StoreRecoveryService.java:129)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\nJun 21 14:34:44 log-01.novalocal elasticsearch[20591]: at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227459978","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227459978","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227459978,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzQ1OTk3OA==","user":{"login":"SergiuCip","id":4825638,"node_id":"MDQ6VXNlcjQ4MjU2Mzg=","avatar_url":"https://avatars2.githubusercontent.com/u/4825638?v=4","gravatar_id":"","url":"https://api.github.com/users/SergiuCip","html_url":"https://github.com/SergiuCip","followers_url":"https://api.github.com/users/SergiuCip/followers","following_url":"https://api.github.com/users/SergiuCip/following{/other_user}","gists_url":"https://api.github.com/users/SergiuCip/gists{/gist_id}","starred_url":"https://api.github.com/users/SergiuCip/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergiuCip/subscriptions","organizations_url":"https://api.github.com/users/SergiuCip/orgs","repos_url":"https://api.github.com/users/SergiuCip/repos","events_url":"https://api.github.com/users/SergiuCip/events{/privacy}","received_events_url":"https://api.github.com/users/SergiuCip/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T14:37:08Z","updated_at":"2016-06-21T14:45:21Z","author_association":"NONE","body":"@s1monw And the header I have added in order to test it :) was not there at the beginning, I have copied from another index translog file which is working\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227467552","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227467552","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227467552,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzQ2NzU1Mg==","user":{"login":"uplexPaul","id":20047742,"node_id":"MDQ6VXNlcjIwMDQ3NzQy","avatar_url":"https://avatars2.githubusercontent.com/u/20047742?v=4","gravatar_id":"","url":"https://api.github.com/users/uplexPaul","html_url":"https://github.com/uplexPaul","followers_url":"https://api.github.com/users/uplexPaul/followers","following_url":"https://api.github.com/users/uplexPaul/following{/other_user}","gists_url":"https://api.github.com/users/uplexPaul/gists{/gist_id}","starred_url":"https://api.github.com/users/uplexPaul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uplexPaul/subscriptions","organizations_url":"https://api.github.com/users/uplexPaul/orgs","repos_url":"https://api.github.com/users/uplexPaul/repos","events_url":"https://api.github.com/users/uplexPaul/events{/privacy}","received_events_url":"https://api.github.com/users/uplexPaul/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T14:59:49Z","updated_at":"2016-06-21T14:59:49Z","author_association":"NONE","body":"@s1monw Just to exclude human mistakes i re-did the same than @SergiuCip already did. Took one of these indexes which don't want to recover on startup and tar-ed everything as i just tried to start it ~5mins ago. Also included the complete logfile. Sent to you via mail.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227472098","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227472098","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227472098,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzQ3MjA5OA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T15:13:42Z","updated_at":"2016-06-21T15:13:42Z","author_association":"CONTRIBUTOR","body":"thanks guys I am loooking again\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227503384","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227503384","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227503384,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzUwMzM4NA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T16:58:01Z","updated_at":"2016-06-21T16:58:01Z","author_association":"CONTRIBUTOR","body":"@uplexPaul @SergiuCip what filesystem are you guys running on? is this a shared FS by any chance?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227692479","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227692479","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227692479,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzY5MjQ3OQ==","user":{"login":"uplexPaul","id":20047742,"node_id":"MDQ6VXNlcjIwMDQ3NzQy","avatar_url":"https://avatars2.githubusercontent.com/u/20047742?v=4","gravatar_id":"","url":"https://api.github.com/users/uplexPaul","html_url":"https://github.com/uplexPaul","followers_url":"https://api.github.com/users/uplexPaul/followers","following_url":"https://api.github.com/users/uplexPaul/following{/other_user}","gists_url":"https://api.github.com/users/uplexPaul/gists{/gist_id}","starred_url":"https://api.github.com/users/uplexPaul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uplexPaul/subscriptions","organizations_url":"https://api.github.com/users/uplexPaul/orgs","repos_url":"https://api.github.com/users/uplexPaul/repos","events_url":"https://api.github.com/users/uplexPaul/events{/privacy}","received_events_url":"https://api.github.com/users/uplexPaul/received_events","type":"User","site_admin":false},"created_at":"2016-06-22T09:35:25Z","updated_at":"2016-06-22T09:35:25Z","author_association":"NONE","body":"@s1monw We are not running a shared volume (NFS mounted or smth. like that).\n\nOur elasticsearch is on a VM running on a VMWare ESXi-Host in a vSphere-Environment with storage attached (actually don't know how, but shouldn't matter).\n\nThe VM runs under CentOS Linux release 7.1.1503 (Core) with the following kernel version: 3.10.0-229.20.1.el7.x86_64\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227723491","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227723491","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227723491,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzcyMzQ5MQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-06-22T12:07:30Z","updated_at":"2016-06-22T12:07:30Z","author_association":"CONTRIBUTOR","body":"@uplexPaul @SergiuCip I looked into your files and the `translog.ckp` files are all fine. Now the question is how you got into this state and I don't have an answer to this. \nYet, I am still puzzled about the content of the `translog-21.tlog` files you send me since you said they where just _touched_. When I touch a file it has 0 bytes but the files I got from you have ~33 bytes which are actually ~33 valid bytes (the header). Do you have a good answer how they showed up half written?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227729150","html_url":"https://github.com/elastic/elasticsearch/issues/18972#issuecomment-227729150","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18972","id":227729150,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzcyOTE1MA==","user":{"login":"uplexPaul","id":20047742,"node_id":"MDQ6VXNlcjIwMDQ3NzQy","avatar_url":"https://avatars2.githubusercontent.com/u/20047742?v=4","gravatar_id":"","url":"https://api.github.com/users/uplexPaul","html_url":"https://github.com/uplexPaul","followers_url":"https://api.github.com/users/uplexPaul/followers","following_url":"https://api.github.com/users/uplexPaul/following{/other_user}","gists_url":"https://api.github.com/users/uplexPaul/gists{/gist_id}","starred_url":"https://api.github.com/users/uplexPaul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uplexPaul/subscriptions","organizations_url":"https://api.github.com/users/uplexPaul/orgs","repos_url":"https://api.github.com/users/uplexPaul/repos","events_url":"https://api.github.com/users/uplexPaul/events{/privacy}","received_events_url":"https://api.github.com/users/uplexPaul/received_events","type":"User","site_admin":false},"created_at":"2016-06-22T12:34:25Z","updated_at":"2016-06-22T12:34:25Z","author_association":"NONE","body":"@s1monw Yes i have an answer. @SergiuCip just catted some other translog files and copied the stuff there. Just forget these files, please - we created them and they were not created by elasticsearch.\n\nIts clear for me that you are searching for how this issue could have happened. But shoudln't you also address a fix for the behaviour of the current startup? Shouldn't it be able to correctly startup? And - when you say the translog.ckp-Files are fine. Why is elasticsearch trying to read from \"translog-21.tlog\" which is apparently not there? Why it's not just skipping this translog recovery. We would really love to access the data anyway and that should be the general goal, isn't it?\n","performed_via_github_app":null}]