{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/9857","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9857/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9857/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9857/events","html_url":"https://github.com/elastic/elasticsearch/issues/9857","id":58807836,"node_id":"MDU6SXNzdWU1ODgwNzgzNg==","number":9857,"title":"Snapshot  / restore module lets you restore an index with alias that conflicts with another index on restore destination.","user":{"login":"gheppner","id":412290,"node_id":"MDQ6VXNlcjQxMjI5MA==","avatar_url":"https://avatars2.githubusercontent.com/u/412290?v=4","gravatar_id":"","url":"https://api.github.com/users/gheppner","html_url":"https://github.com/gheppner","followers_url":"https://api.github.com/users/gheppner/followers","following_url":"https://api.github.com/users/gheppner/following{/other_user}","gists_url":"https://api.github.com/users/gheppner/gists{/gist_id}","starred_url":"https://api.github.com/users/gheppner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gheppner/subscriptions","organizations_url":"https://api.github.com/users/gheppner/orgs","repos_url":"https://api.github.com/users/gheppner/repos","events_url":"https://api.github.com/users/gheppner/events{/privacy}","received_events_url":"https://api.github.com/users/gheppner/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-02-24T21:23:51Z","updated_at":"2015-02-28T02:03:24Z","closed_at":"2015-02-28T02:03:24Z","author_association":"NONE","active_lock_reason":null,"body":"I've only tested this on 1.3.5, but after going through the release notes for every version since, including 1.4.x, I don't see it mentioned anywhere.\n\nI had an index named \"dev-blog\" on my 1.3.5 cluster. I restored a snapshot of a \"blog\" index from another (1.0.1) cluster. This \"blog\" index had a dev-blog alias associated with it, and I forgot to tell the restore process to not restore the aliases. \n\nThe restore completed successfully. However, I was unable to delete the dev-blog alias from the \"blog\" cluster. When trying to delete the alias ( curl -XDELETE 'localhost:9200/blog/_alias/dev-blog' ), this was returned instead:\n\n{\n  \"error\": \"RemoteTransportException[[xxxxxxxx:xxxx]][indices/aliases]]; nested: InvalidAliasNameException[[blog] Invalid alias name [dev-blog], an index exists with the same name as the alias]; \",\n  \"status\": 400\n}\n\nit was like this restore operation allowed the cluster to get into a state I could not get it out of.  To fix this, I had to snapshot the dev-blog index, delete it completely, and THEN i was able to issue the above delete command to remove the dev-blog alias from the blog index.\n\nEither the restore needs to check if there is a collision between aliases and index names before allowing the restore to happen, or the validation step being done as part of the DELETE needs to let this proceed. \n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}