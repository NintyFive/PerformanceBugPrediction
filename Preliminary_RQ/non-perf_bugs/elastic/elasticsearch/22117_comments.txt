[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/266448757","html_url":"https://github.com/elastic/elasticsearch/issues/22117#issuecomment-266448757","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22117","id":266448757,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NjQ0ODc1Nw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-12-12T14:46:58Z","updated_at":"2016-12-12T14:46:58Z","author_association":"CONTRIBUTOR","body":"@talevy any thoughts?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/266566506","html_url":"https://github.com/elastic/elasticsearch/issues/22117#issuecomment-266566506","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22117","id":266566506,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NjU2NjUwNg==","user":{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false},"created_at":"2016-12-12T22:00:21Z","updated_at":"2016-12-12T22:00:21Z","author_association":"CONTRIBUTOR","body":"I'll take a look at this","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/266603688","html_url":"https://github.com/elastic/elasticsearch/issues/22117#issuecomment-266603688","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22117","id":266603688,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NjYwMzY4OA==","user":{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false},"created_at":"2016-12-13T01:02:50Z","updated_at":"2016-12-13T01:02:50Z","author_association":"CONTRIBUTOR","body":"did some digging, this was definitely a bug on my end. Opened the PR above and tested it out with your example in Console, picks it up.\r\n\r\n<img width=\"1161\" alt=\"screen shot 2016-12-12 at 5 01 55 pm\" src=\"https://cloud.githubusercontent.com/assets/388837/21123296/b92f06ae-c08c-11e6-8b19-8f91fa3d6216.png\">\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/358177305","html_url":"https://github.com/elastic/elasticsearch/issues/22117#issuecomment-358177305","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22117","id":358177305,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODE3NzMwNQ==","user":{"login":"y0299","id":16109801,"node_id":"MDQ6VXNlcjE2MTA5ODAx","avatar_url":"https://avatars2.githubusercontent.com/u/16109801?v=4","gravatar_id":"","url":"https://api.github.com/users/y0299","html_url":"https://github.com/y0299","followers_url":"https://api.github.com/users/y0299/followers","following_url":"https://api.github.com/users/y0299/following{/other_user}","gists_url":"https://api.github.com/users/y0299/gists{/gist_id}","starred_url":"https://api.github.com/users/y0299/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/y0299/subscriptions","organizations_url":"https://api.github.com/users/y0299/orgs","repos_url":"https://api.github.com/users/y0299/repos","events_url":"https://api.github.com/users/y0299/events{/privacy}","received_events_url":"https://api.github.com/users/y0299/received_events","type":"User","site_admin":false},"created_at":"2018-01-17T02:42:32Z","updated_at":"2018-01-17T02:43:16Z","author_association":"NONE","body":"i want use grok processor in elasticsearch to parse some message, which have double quotes in text, like this `\"message\":\"192.168.1.2 \"GET\" 168\"`.\r\nand i use  \r\n```\r\ncurl -XPOST 'localhost:9200/_ingest/pipeline/_simulate?pretty' -H 'Content-Type: application/json' -d'\r\n{\r\n  \"pipeline\": {\r\n  \"description\" : \"parse multiple patterns\",\r\n  \"processors\": [\r\n    {\r\n      \"grok\": {\r\n        \"field\": \"message\",\r\n        \"patterns\": [\"%{IP:ip}\\\\s\"%{REQUEST:request}\"\\\\s%{NUM:num}\"],\r\n\t\t\"pattern_definitions\" : {\r\n          \"IP\" : \"\\\\S+\",\r\n\t\t  \"REQUEST\" : \"\\\\S+\",\r\n\t\t  \"NUM\" : \"\\\\d+\"\r\n        }\r\n      }\r\n    }\r\n  ]\r\n},\r\n\"docs\":[\r\n  {\r\n    \"_source\": {\r\n      \"message\": \"192.168.1.2 \"GET\" 168\"\r\n    }\r\n  }\r\n  ]\r\n}\r\n'\r\n```\r\nbut has error belows:\r\n```\r\n\"error\" : {\r\n    \"root_cause\" : [\r\n      {\r\n        \"type\" : \"parse_exception\",\r\n        \"reason\" : \"Failed to parse content to map\"\r\n      }\r\n    ],\r\n    \"type\" : \"parse_exception\",\r\n    \"reason\" : \"Failed to parse content to map\",\r\n    \"caused_by\" : {\r\n      \"type\" : \"json_parse_exception\",\r\n      \"reason\" : \"Unexpected character ('%' (code 37)): was expecting comma to separate Array entries\\n at [Source: org.elasticsearch.transport.netty4.ByteBufStreamInput@290fc36d; line: 9, column: 36]\"\r\n    }\r\n  },\r\n  \"status\" : 400\r\n}\r\n```\r\nI think the reason is the *\"* (double quotation) cannot support in grok processor patterns，can someone help me resolve this issues?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/358178810","html_url":"https://github.com/elastic/elasticsearch/issues/22117#issuecomment-358178810","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22117","id":358178810,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODE3ODgxMA==","user":{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false},"created_at":"2018-01-17T02:51:38Z","updated_at":"2018-01-17T02:51:38Z","author_association":"CONTRIBUTOR","body":"Hi @y0299!\r\n\r\nIndeed you need to escape the `\"` in the javascript.\r\n\r\nthe offending lines are\r\n\r\n```\r\n        \"patterns\": [\"%{IP:ip}\\\\s\"%{REQUEST:request}\"\\\\s%{NUM:num}\"],\r\n```\r\nand\r\n```\r\n      \"message\": \"192.168.1.2 \"GET\" 168\"\r\n```\r\n\r\nboth should escape the `\"` with a `\\` that preceeds it.\r\n\r\nlike so:\r\n```\r\n        \"patterns\": [\"%{IP:ip}\\\\s\\\"%{REQUEST:request}\\\"\\\\s%{NUM:num}\"],\r\n```\r\nand\r\n```\r\n      \"message\": \"192.168.1.2 \\\"GET\\\" 168\"\r\n```\r\n\r\nHope that helps!\r\n\r\nFor the future, it is best to ask for this type of help on [The Elastic Discuss Forum](https://discuss.elastic.co/) since you may even find your questions were already answered there!\r\nGithub is still great for posting bugs you may have found with our features in your use-cases.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/358180046","html_url":"https://github.com/elastic/elasticsearch/issues/22117#issuecomment-358180046","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22117","id":358180046,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODE4MDA0Ng==","user":{"login":"y0299","id":16109801,"node_id":"MDQ6VXNlcjE2MTA5ODAx","avatar_url":"https://avatars2.githubusercontent.com/u/16109801?v=4","gravatar_id":"","url":"https://api.github.com/users/y0299","html_url":"https://github.com/y0299","followers_url":"https://api.github.com/users/y0299/followers","following_url":"https://api.github.com/users/y0299/following{/other_user}","gists_url":"https://api.github.com/users/y0299/gists{/gist_id}","starred_url":"https://api.github.com/users/y0299/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/y0299/subscriptions","organizations_url":"https://api.github.com/users/y0299/orgs","repos_url":"https://api.github.com/users/y0299/repos","events_url":"https://api.github.com/users/y0299/events{/privacy}","received_events_url":"https://api.github.com/users/y0299/received_events","type":"User","site_admin":false},"created_at":"2018-01-17T02:59:24Z","updated_at":"2018-01-17T03:01:29Z","author_association":"NONE","body":"hi, @talevy ,thanks for giving me advice!\r\nbut i use \r\n```\r\ncurl -XPOST 'localhost:9200/_ingest/pipeline/_simulate?pretty' -H 'Content-Type: application/json' -d'\r\n{\r\n  \"pipeline\": {\r\n  \"description\" : \"parse multiple patterns\",\r\n  \"processors\": [\r\n    {\r\n      \"grok\": {\r\n        \"field\": \"message\",\r\n        \"patterns\": [\"%{IP:ip}\\\\s\\\"%{REQUEST:request}\\\"\\\\s%{NUM:num}\"],\r\n\t\t\"pattern_definitions\" : {\r\n          \"IP\" : \"\\\\S+\",\r\n\t\t  \"REQUEST\" : \"\\\\S+\",\r\n\t\t  \"NUM\" : \"\\\\d+\"\r\n        }\r\n      }\r\n    }\r\n  ]\r\n},\r\n\"docs\":[\r\n  {\r\n    \"_source\": {\r\n      \"message\": \"192.168.1.2 \"GET\" 168\"\r\n    }\r\n  }\r\n  ]\r\n}\r\n'\r\n```\r\nthere still has error occurs, like below:\r\n```\r\n\"error\" : {\r\n    \"root_cause\" : [\r\n      {\r\n        \"type\" : \"parse_exception\",\r\n        \"reason\" : \"Failed to parse content to map\"\r\n      }\r\n    ],\r\n    \"type\" : \"parse_exception\",\r\n    \"reason\" : \"Failed to parse content to map\",\r\n    \"caused_by\" : {\r\n      \"type\" : \"json_parse_exception\",\r\n      \"reason\" : \"Unexpected character ('G' (code 71)): was expecting comma to separate Object entries\\n at [Source: org.elasticsearch.transport.netty4.ByteBufStreamInput@6bcebab4; line: 22, column: 33]\"\r\n    }\r\n  },\r\n  \"status\" : 400\r\n}\r\n```\r\ndo i must change the log to `192.168.1.2 \\\"GET\\\" 168` ??","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/358181022","html_url":"https://github.com/elastic/elasticsearch/issues/22117#issuecomment-358181022","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22117","id":358181022,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODE4MTAyMg==","user":{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false},"created_at":"2018-01-17T03:05:52Z","updated_at":"2018-01-17T03:05:52Z","author_association":"CONTRIBUTOR","body":"you forgot the offending `\"` in the `message`.\r\n\r\nthis should work:\r\n\r\n```\r\ncurl -XPOST \"http://localhost:9200/_ingest/pipeline/_simulate?pretty\" -H 'Content-Type: application/json' -d'\r\n{\r\n  \"pipeline\": {\r\n  \"description\" : \"parse multiple patterns\",\r\n  \"processors\": [\r\n    {\r\n      \"grok\": {\r\n        \"field\": \"message\",\r\n        \"patterns\": [\"%{IP:ip}\\\\s\\\"%{REQUEST:request}\\\"\\\\s%{NUM:num}\"],\r\n\t\t\"pattern_definitions\" : {\r\n          \"IP\" : \"\\\\S+\",\r\n\t\t  \"REQUEST\" : \"\\\\S+\",\r\n\t\t  \"NUM\" : \"\\\\d+\"\r\n        }\r\n      }\r\n    }\r\n  ]\r\n},\r\n\"docs\":[\r\n  {\r\n    \"_source\": {\r\n      \"message\": \"192.168.1.2 \\\"GET\\\" 168\"\r\n    }\r\n  }\r\n  ]\r\n}'\r\n```\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/358181888","html_url":"https://github.com/elastic/elasticsearch/issues/22117#issuecomment-358181888","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22117","id":358181888,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODE4MTg4OA==","user":{"login":"y0299","id":16109801,"node_id":"MDQ6VXNlcjE2MTA5ODAx","avatar_url":"https://avatars2.githubusercontent.com/u/16109801?v=4","gravatar_id":"","url":"https://api.github.com/users/y0299","html_url":"https://github.com/y0299","followers_url":"https://api.github.com/users/y0299/followers","following_url":"https://api.github.com/users/y0299/following{/other_user}","gists_url":"https://api.github.com/users/y0299/gists{/gist_id}","starred_url":"https://api.github.com/users/y0299/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/y0299/subscriptions","organizations_url":"https://api.github.com/users/y0299/orgs","repos_url":"https://api.github.com/users/y0299/repos","events_url":"https://api.github.com/users/y0299/events{/privacy}","received_events_url":"https://api.github.com/users/y0299/received_events","type":"User","site_admin":false},"created_at":"2018-01-17T03:12:00Z","updated_at":"2018-01-17T03:12:00Z","author_association":"NONE","body":"en, this way can work, but i must change the original log `192.168.1.2 \"GET\" 168` to `192.168.1.2 \\\"GET\\\" 168`. but actually some log, which only has *\"* not with a blakslash`\\\"`，how can i process this?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/358820292","html_url":"https://github.com/elastic/elasticsearch/issues/22117#issuecomment-358820292","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22117","id":358820292,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODgyMDI5Mg==","user":{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false},"created_at":"2018-01-18T23:48:06Z","updated_at":"2018-01-18T23:48:06Z","author_association":"CONTRIBUTOR","body":"@y0299 I'm not sure I completely understand","performed_via_github_app":null}]