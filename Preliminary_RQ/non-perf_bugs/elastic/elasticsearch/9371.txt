{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/9371","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9371/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9371/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9371/events","html_url":"https://github.com/elastic/elasticsearch/issues/9371","id":54966547,"node_id":"MDU6SXNzdWU1NDk2NjU0Nw==","number":9371,"title":"Simplify analyzer settings","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"labels":[{"id":141145460,"node_id":"MDU6TGFiZWwxNDExNDU0NjA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Mapping","name":":Search/Mapping","color":"0e8a16","default":false,"description":"How fields should be indexed"},{"id":33660,"node_id":"MDU6TGFiZWwzMzY2MA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebreaking","name":">breaking","color":"d93f0b","default":false,"description":null},{"id":76184120,"node_id":"MDU6TGFiZWw3NjE4NDEyMA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v2.0.0-beta1","name":"v2.0.0-beta1","color":"dddddd","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2015-01-21T01:40:49Z","updated_at":"2015-01-28T21:44:16Z","closed_at":"2015-01-28T21:44:16Z","author_association":"MEMBER","active_lock_reason":null,"body":"We currently have the following settings on text fields and some other types: `analyzer`, `index_analyzer`, `search_analyzer`, and `search_quote_analyzer`.  I think we should simplify this by removing `index_analyzer`, and then add validation so that if you set one of these, you must also set the ones before it in the list.  Otherwise you get the current trappy behavior of being able to specify `search_analyzer` and not `index_analyzer`, which leads to using the `standard` analyzer at index time.  It also leaves the \"normal\" use case as setting just `analyzer`, and removes the weird case where you can set `analyzer`, `index_analyzer` and `search_analyzer`.\n\nAs an aside, I think we also need a mechanism to distinguish when parsing mappings between \"this is an api call\" and \"we are reading old mappings from cluster state\".  With this flag, we can then modify the mappings on parse, so that the old settings disappear when upgrading.  AFAIK right now, we only have the `indexVersionCreated()` which only says on what version the index was created, but updates could still happen for that index and the version would not change.\n","closed_by":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"performed_via_github_app":null}