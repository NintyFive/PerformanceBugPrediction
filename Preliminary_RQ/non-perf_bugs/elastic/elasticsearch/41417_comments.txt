[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/485489000","html_url":"https://github.com/elastic/elasticsearch/issues/41417#issuecomment-485489000","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41417","id":485489000,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTQ4OTAwMA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-04-22T17:40:39Z","updated_at":"2019-04-22T17:40:39Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/485534090","html_url":"https://github.com/elastic/elasticsearch/issues/41417#issuecomment-485534090","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41417","id":485534090,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTUzNDA5MA==","user":{"login":"gwbrown","id":1522844,"node_id":"MDQ6VXNlcjE1MjI4NDQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1522844?v=4","gravatar_id":"","url":"https://api.github.com/users/gwbrown","html_url":"https://github.com/gwbrown","followers_url":"https://api.github.com/users/gwbrown/followers","following_url":"https://api.github.com/users/gwbrown/following{/other_user}","gists_url":"https://api.github.com/users/gwbrown/gists{/gist_id}","starred_url":"https://api.github.com/users/gwbrown/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gwbrown/subscriptions","organizations_url":"https://api.github.com/users/gwbrown/orgs","repos_url":"https://api.github.com/users/gwbrown/repos","events_url":"https://api.github.com/users/gwbrown/events{/privacy}","received_events_url":"https://api.github.com/users/gwbrown/received_events","type":"User","site_admin":false},"created_at":"2019-04-22T20:05:09Z","updated_at":"2019-04-22T20:05:09Z","author_association":"CONTRIBUTOR","body":"I can definitely see the utility of this, but allowing an action to be defined multiple times within a single phase isn't possible in the current ILM architecture.\r\n\r\nAs I said though, this is definitely something that would be useful, and it's worth thinking about other ways we might be able to accomplish the same thing.  One option that comes to mind is just bundling this as an opt-in with additional parameter/parameters into the existing force-merge action (and any other actions this might be useful for), although that's likely not the only path we could take.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/485562767","html_url":"https://github.com/elastic/elasticsearch/issues/41417#issuecomment-485562767","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41417","id":485562767,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTU2Mjc2Nw==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2019-04-22T21:42:11Z","updated_at":"2019-04-22T21:42:11Z","author_association":"MEMBER","body":"It's more complicated because we say in ILM that we (Elasticsearch) are responsible for determining the best order to execute things, as soon as we would allow multiple steps within a phase, we have to have ordered phases that follow user order rather than our internal order.\r\n\r\nI agree that I can see the utility of this, and maybe we can discuss other solutions (like the one Gordon proposed).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/485567278","html_url":"https://github.com/elastic/elasticsearch/issues/41417#issuecomment-485567278","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41417","id":485567278,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTU2NzI3OA==","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"created_at":"2019-04-22T21:59:25Z","updated_at":"2019-04-22T21:59:25Z","author_association":"MEMBER","body":"+1 I like the idea of an opt-in flag where we will manage this automatically for the end user :)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/485574595","html_url":"https://github.com/elastic/elasticsearch/issues/41417#issuecomment-485574595","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41417","id":485574595,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NTU3NDU5NQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2019-04-22T22:29:46Z","updated_at":"2019-04-22T22:29:46Z","author_association":"MEMBER","body":"> Consider the use case of disabling replicas before force merge (not an uncommon practice to save on IO for very large indices).\r\n\r\nTaking a step back, I am not sure that this is something that we want to encourage. It leaves users without replicas during for an extended period of time (on large shards) and at risk of not having any copies available should the primary go offline, or more fatally if the primary is lost.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/486723269","html_url":"https://github.com/elastic/elasticsearch/issues/41417#issuecomment-486723269","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41417","id":486723269,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NjcyMzI2OQ==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2019-04-25T15:31:32Z","updated_at":"2019-04-25T15:31:32Z","author_association":"MEMBER","body":"We discussed this today and decided that there are a few things we don't want to do:\r\n\r\n- introduce ordered ILM actions\r\n- introduce a way for users to sabotage themselves on accident by removing replicas at unscheduled intervals\r\n\r\nAdditionally, while it may reduce IO in that force merging is not performed on multiple shards, it would still then require more network IO to re-sync any replicas created after dropping replicas and then performing thi merge.\r\n\r\nGiven those things, we decided that we don't want to pursue this currently.","performed_via_github_app":null}]