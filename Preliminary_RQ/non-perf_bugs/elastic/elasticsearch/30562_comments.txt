[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/388750248","html_url":"https://github.com/elastic/elasticsearch/issues/30562#issuecomment-388750248","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30562","id":388750248,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODc1MDI0OA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-05-14T09:13:44Z","updated_at":"2018-05-14T09:13:44Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-security","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/390967574","html_url":"https://github.com/elastic/elasticsearch/issues/30562#issuecomment-390967574","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30562","id":390967574,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDk2NzU3NA==","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2018-05-22T12:12:22Z","updated_at":"2018-05-22T12:12:22Z","author_association":"MEMBER","body":"Another instance: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.x+bwc-tests/887\r\n\r\n<details>\r\n\r\n> 00:00:43 IGNOR/A 0.04s | IndexAuditUpgradeIT.testDocsAuditedInOldCluster\r\n00:00:43    > Assumption #1: only runs against old cluster\r\n00:00:43   1> [2018-05-22T10:00:32,809][INFO ][o.e.u.IndexAuditUpgradeIT] [testDocsAuditedInUpgradedCluster]: before test\r\n00:00:43   1> [2018-05-22T10:00:32,825][ERROR][o.e.u.IndexAuditUpgradeIT] get settings response {.security_audit_log-2018.05.22={settings={index.version.created=5060199}}, .security_audit_log-2018.05.21={settings={index.version.created=5060199}}}\r\n00:00:43   1> [2018-05-22T10:00:43,225][INFO ][o.e.u.IndexAuditUpgradeIT] [testDocsAuditedInUpgradedCluster]: after test\r\n00:00:43   2> REPRODUCE WITH: ./gradlew :x-pack:qa:rolling-upgrade:with-system-key:v5.6.1#upgradedClusterTestRunner -Dtests.seed=D5E304FD8B648875 -Dtests.class=org.elasticsearch.upgrades.IndexAuditUpgradeIT -Dtests.method=\"testDocsAuditedInUpgradedCluster\" -Dtests.security.manager=true -Dtests.locale=ru -Dtests.timezone=AET\r\n00:00:43 FAILURE 10.4s | IndexAuditUpgradeIT.testDocsAuditedInUpgradedCluster <<< FAILURES!\r\n00:00:43    > Throwable #1: java.lang.AssertionError: Found node buckets [{doc_count=443, key=mixed-node-0}]\r\n00:00:43    > Expected: is <2>\r\n00:00:43    >      but: was <1>\r\n00:00:43    > \tat __randomizedtesting.SeedInfo.seed([D5E304FD8B648875:A8875756F34BCEDC]:0)\r\n00:00:43    > \tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n00:00:43    > \tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.assertNumUniqueNodeNameBuckets(IndexAuditUpgradeIT.java:126)\r\n00:00:43    > \tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.lambda$testDocsAuditedInUpgradedCluster$2(IndexAuditUpgradeIT.java:91)\r\n00:00:43    > \tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:767)\r\n00:00:43    > \tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:741)\r\n00:00:43    > \tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.testDocsAuditedInUpgradedCluster(IndexAuditUpgradeIT.java:89)\r\n00:00:43    > \tat java.lang.Thread.run(Thread.java:748)\r\n00:00:43    > \tSuppressed: java.lang.AssertionError: Found node buckets [{doc_count=443, key=mixed-node-0}]\r\n00:00:43    > Expected: is <2>\r\n00:00:43    >      but: was <1>\r\n00:00:43    > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.assertNumUniqueNodeNameBuckets(IndexAuditUpgradeIT.java:126)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.lambda$testDocsAuditedInUpgradedCluster$2(IndexAuditUpgradeIT.java:91)\r\n00:00:43    > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:755)\r\n00:00:43    > \t\t... 39 more\r\n00:00:43    > \tSuppressed: java.lang.AssertionError: Found node buckets [{doc_count=443, key=mixed-node-0}]\r\n00:00:43    > Expected: is <2>\r\n00:00:43    >      but: was <1>\r\n00:00:43    > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.assertNumUniqueNodeNameBuckets(IndexAuditUpgradeIT.java:126)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.lambda$testDocsAuditedInUpgradedCluster$2(IndexAuditUpgradeIT.java:91)\r\n00:00:43    > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:755)\r\n00:00:43    > \t\t... 39 more\r\n00:00:43    > \tSuppressed: java.lang.AssertionError: Found node buckets [{doc_count=443, key=mixed-node-0}]\r\n00:00:43    > Expected: is <2>\r\n00:00:43    >      but: was <1>\r\n00:00:43    > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.assertNumUniqueNodeNameBuckets(IndexAuditUpgradeIT.java:126)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.lambda$testDocsAuditedInUpgradedCluster$2(IndexAuditUpgradeIT.java:91)\r\n00:00:43    > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:755)\r\n00:00:43    > \t\t... 39 more\r\n00:00:43    > \tSuppressed: java.lang.AssertionError: Found node buckets [{doc_count=443, key=mixed-node-0}]\r\n00:00:43    > Expected: is <2>\r\n00:00:43    >      but: was <1>\r\n00:00:43    > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.assertNumUniqueNodeNameBuckets(IndexAuditUpgradeIT.java:126)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.lambda$testDocsAuditedInUpgradedCluster$2(IndexAuditUpgradeIT.java:91)\r\n00:00:43    > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:755)\r\n00:00:43    > \t\t... 39 more\r\n00:00:43    > \tSuppressed: java.lang.AssertionError: Found node buckets [{doc_count=443, key=mixed-node-0}]\r\n00:00:43    > Expected: is <2>\r\n00:00:43    >      but: was <1>\r\n00:00:43    > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.assertNumUniqueNodeNameBuckets(IndexAuditUpgradeIT.java:126)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.lambda$testDocsAuditedInUpgradedCluster$2(IndexAuditUpgradeIT.java:91)\r\n00:00:43    > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:755)\r\n00:00:43    > \t\t... 39 more\r\n00:00:43    > \tSuppressed: java.lang.AssertionError: Found node buckets [{doc_count=443, key=mixed-node-0}]\r\n00:00:43    > Expected: is <2>\r\n00:00:43    >      but: was <1>\r\n00:00:43    > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.assertNumUniqueNodeNameBuckets(IndexAuditUpgradeIT.java:126)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.lambda$testDocsAuditedInUpgradedCluster$2(IndexAuditUpgradeIT.java:91)\r\n00:00:43    > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:755)\r\n00:00:43    > \t\t... 39 more\r\n00:00:43    > \tSuppressed: java.lang.AssertionError: Found node buckets [{doc_count=443, key=mixed-node-0}]\r\n00:00:43    > Expected: is <2>\r\n00:00:43    >      but: was <1>\r\n00:00:43    > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.assertNumUniqueNodeNameBuckets(IndexAuditUpgradeIT.java:126)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.lambda$testDocsAuditedInUpgradedCluster$2(IndexAuditUpgradeIT.java:91)\r\n00:00:43    > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:755)\r\n00:00:43    > \t\t... 39 more\r\n00:00:43    > \tSuppressed: java.lang.AssertionError: Found node buckets [{doc_count=443, key=mixed-node-0}]\r\n00:00:43    > Expected: is <2>\r\n00:00:43    >      but: was <1>\r\n00:00:43    > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.assertNumUniqueNodeNameBuckets(IndexAuditUpgradeIT.java:126)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.lambda$testDocsAuditedInUpgradedCluster$2(IndexAuditUpgradeIT.java:91)\r\n00:00:43    > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:755)\r\n00:00:43    > \t\t... 39 more\r\n00:00:43    > \tSuppressed: java.lang.AssertionError: Found node buckets [{doc_count=443, key=mixed-node-0}]\r\n00:00:43    > Expected: is <2>\r\n00:00:43    >      but: was <1>\r\n00:00:43    > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.assertNumUniqueNodeNameBuckets(IndexAuditUpgradeIT.java:126)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.lambda$testDocsAuditedInUpgradedCluster$2(IndexAuditUpgradeIT.java:91)\r\n00:00:43    > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:755)\r\n00:00:43    > \t\t... 39 more\r\n00:00:43    > \tSuppressed: java.lang.AssertionError: Found node buckets [{doc_count=443, key=mixed-node-0}]\r\n00:00:43    > Expected: is <2>\r\n00:00:43    >      but: was <1>\r\n00:00:43    > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.assertNumUniqueNodeNameBuckets(IndexAuditUpgradeIT.java:126)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.lambda$testDocsAuditedInUpgradedCluster$2(IndexAuditUpgradeIT.java:91)\r\n00:00:43    > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:755)\r\n00:00:43    > \t\t... 39 more\r\n00:00:43    > \tSuppressed: java.lang.AssertionError: Found node buckets [{doc_count=443, key=mixed-node-0}]\r\n00:00:43    > Expected: is <2>\r\n00:00:43    >      but: was <1>\r\n00:00:43    > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.assertNumUniqueNodeNameBuckets(IndexAuditUpgradeIT.java:126)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.lambda$testDocsAuditedInUpgradedCluster$2(IndexAuditUpgradeIT.java:91)\r\n00:00:43    > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:755)\r\n00:00:43    > \t\t... 39 more\r\n00:00:43    > \tSuppressed: java.lang.AssertionError: Found node buckets [{doc_count=443, key=mixed-node-0}]\r\n00:00:43    > Expected: is <2>\r\n00:00:43    >      but: was <1>\r\n00:00:43    > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.assertNumUniqueNodeNameBuckets(IndexAuditUpgradeIT.java:126)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.lambda$testDocsAuditedInUpgradedCluster$2(IndexAuditUpgradeIT.java:91)\r\n00:00:43    > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:755)\r\n00:00:43    > \t\t... 39 more\r\n00:00:43    > \tSuppressed: java.lang.AssertionError: Found node buckets [{doc_count=443, key=mixed-node-0}]\r\n00:00:43    > Expected: is <2>\r\n00:00:43    >      but: was <1>\r\n00:00:43    > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.assertNumUniqueNodeNameBuckets(IndexAuditUpgradeIT.java:126)\r\n00:00:43    > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.lambda$testDocsAuditedInUpgradedCluster$2(IndexAuditUpgradeIT.java:91)\r\n00:00:43    > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:755)\r\n00:00:43    > \t\t... 39 more\r\n00:00:43   1> [2018-05-22T10:00:43,242][INFO ][o.e.u.IndexAuditUpgradeIT] [testDocsAuditedInMixedCluster]: before test\r\n00:00:43   1> [2018-05-22T10:00:43,263][INFO ][o.e.u.IndexAuditUpgradeIT] [testDocsAuditedInMixedCluster]: after test\r\n00:00:43 IGNOR/A 0.03s | IndexAuditUpgradeIT.testDocsAuditedInMixedCluster\r\n00:00:43    > Assumption #1: only runs against mixed cluster\r\n00:00:43   2> NOTE: leaving temporary files on disk at: /var/lib/jenkins/workspace/elastic+elasticsearch+6.x+bwc-tests/x-pack/qa/rolling-upgrade/with-system-key/build/testrun/v5.6.1#upgradedClusterTestRunner/J0/temp/org.elasticsearch.upgrades.IndexAuditUpgradeIT_D5E304FD8B648875-001\r\n00:00:43   2> NOTE: test params are: codec=Asserting(Lucene70): {}, docValues:{}, maxPointsInLeafNode=1735, maxMBSortInHeap=5.935387284784882, sim=RandomSimilarity(queryNorm=true): {}, locale=ru, timezone=AET\r\n00:00:43   2> NOTE: Linux 4.4.0-1057-aws amd64/Oracle Corporation 1.8.0_162 (64-bit)/cpus=16,threads=1,free=371099336,total=514850816\r\n00:00:43   2> NOTE: All tests run in this JVM: [WatchBackwardsCompatibilityIT, TokenBackwardsCompatibilityIT, IndexAuditUpgradeIT]\r\n00:00:43 Completed [3/4] in 10.54s, 3 tests, 1 failure, 2 skipped <<< FAILURES!\r\n00:00:43 \r\n00:00:48 Suite: org.elasticsearch.upgrades.UpgradeClusterClientYamlTestSuiteIT\r\n00:00:48 IGNOR/A 0.06s | UpgradeClusterClientYamlTestSuiteIT.test {p0=upgraded_cluster/30_ml_jobs_crud/Test model memory limit is updated}\r\n00:00:48    > Assumption #1: [upgraded_cluster/30_ml_jobs_crud/Test model memory limit is updated] skipped, reason: blacklisted\r\n00:00:48 Completed [4/4] in 4.81s, 10 tests, 1 skipped\r\n\r\n</details>","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/392755268","html_url":"https://github.com/elastic/elasticsearch/issues/30562#issuecomment-392755268","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30562","id":392755268,"node_id":"MDEyOklzc3VlQ29tbWVudDM5Mjc1NTI2OA==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2018-05-29T12:17:33Z","updated_at":"2018-05-29T12:17:33Z","author_association":"MEMBER","body":"Another one here: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.3+multijob-unix-compatibility/os=amazon/93/console\r\n\r\n```\r\nREPRODUCE WITH: ./gradlew :x-pack:qa:rolling-upgrade:with-system-key:v6.2.5-SNAPSHOT#upgradedClusterTestRunner \\\r\n  -Dtests.seed=7BF5E38B468E12ED \\\r\n  -Dtests.class=org.elasticsearch.upgrades.IndexAuditUpgradeIT \\\r\n  -Dtests.method=\"testDocsAuditedInUpgradedCluster\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=da-DK \\\r\n  -Dtests.timezone=America/St_Lucia\r\n```\r\n```\r\nFAILURE 10.7s | IndexAuditUpgradeIT.testDocsAuditedInUpgradedCluster <<< FAILURES!\r\n   > Throwable #1: java.lang.AssertionError: Found node buckets [{doc_count=3419, key=mixed-node-0}, {doc_count=3102, key=node-0}, {doc_count=1389, key=node-1}]\r\n   > Expected: is <4>\r\n   >      but: was <3>\r\n   > \tat __randomizedtesting.SeedInfo.seed([7BF5E38B468E12ED:691B0203EA15444]:0)\r\n   > \tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.assertNumUniqueNodeNameBuckets(IndexAuditUpgradeIT.java:127)\r\n   > \tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.lambda$testDocsAuditedInUpgradedCluster$2(IndexAuditUpgradeIT.java:92)\r\n   > \tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:767)\r\n   > \tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:741)\r\n   > \tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.testDocsAuditedInUpgradedCluster(IndexAuditUpgradeIT.java:90)\r\n   > \tat java.lang.Thread.run(Thread.java:748)\r\n   > \tSuppressed: java.lang.AssertionError: Found node buckets [{doc_count=3102, key=node-0}, {doc_count=3029, key=mixed-node-0}, {doc_count=1389, key=node-1}]\r\n   > Expected: is <4>\r\n   >      but: was <3>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.assertNumUniqueNodeNameBuckets(IndexAuditUpgradeIT.java:127)\r\n   > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.lambda$testDocsAuditedInUpgradedCluster$2(IndexAuditUpgradeIT.java:92)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:755)\r\n   > \t\t... 39 more\r\n   > \tSuppressed: java.lang.AssertionError: Found node buckets [{doc_count=3102, key=node-0}, {doc_count=3029, key=mixed-node-0}, {doc_count=1389, key=node-1}]\r\n   > Expected: is <4>\r\n   >      but: was <3>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.assertNumUniqueNodeNameBuckets(IndexAuditUpgradeIT.java:127)\r\n   > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.lambda$testDocsAuditedInUpgradedCluster$2(IndexAuditUpgradeIT.java:92)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:755)\r\n   > \t\t... 39 more\r\n   > \tSuppressed: java.lang.AssertionError: Found node buckets [{doc_count=3102, key=node-0}, {doc_count=3029, key=mixed-node-0}, {doc_count=1389, key=node-1}]\r\n   > Expected: is <4>\r\n   >      but: was <3>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.assertNumUniqueNodeNameBuckets(IndexAuditUpgradeIT.java:127)\r\n   > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.lambda$testDocsAuditedInUpgradedCluster$2(IndexAuditUpgradeIT.java:92)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:755)\r\n   > \t\t... 39 more\r\n   > \tSuppressed: java.lang.AssertionError: Found node buckets [{doc_count=3102, key=node-0}, {doc_count=3029, key=mixed-node-0}, {doc_count=1389, key=node-1}]\r\n   > Expected: is <4>\r\n   >      but: was <3>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.assertNumUniqueNodeNameBuckets(IndexAuditUpgradeIT.java:127)\r\n   > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.lambda$testDocsAuditedInUpgradedCluster$2(IndexAuditUpgradeIT.java:92)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:755)\r\n   > \t\t... 39 more\r\n   > \tSuppressed: java.lang.AssertionError: Found node buckets [{doc_count=3102, key=node-0}, {doc_count=3029, key=mixed-node-0}, {doc_count=1389, key=node-1}]\r\n   > Expected: is <4>\r\n   >      but: was <3>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.assertNumUniqueNodeNameBuckets(IndexAuditUpgradeIT.java:127)\r\n   > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.lambda$testDocsAuditedInUpgradedCluster$2(IndexAuditUpgradeIT.java:92)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:755)\r\n   > \t\t... 39 more\r\n   > \tSuppressed: java.lang.AssertionError: Found node buckets [{doc_count=3102, key=node-0}, {doc_count=3029, key=mixed-node-0}, {doc_count=1389, key=node-1}]\r\n   > Expected: is <4>\r\n   >      but: was <3>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.assertNumUniqueNodeNameBuckets(IndexAuditUpgradeIT.java:127)\r\n   > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.lambda$testDocsAuditedInUpgradedCluster$2(IndexAuditUpgradeIT.java:92)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:755)\r\n   > \t\t... 39 more\r\n   > \tSuppressed: java.lang.AssertionError: Found node buckets [{doc_count=3102, key=node-0}, {doc_count=3029, key=mixed-node-0}, {doc_count=1389, key=node-1}]\r\n   > Expected: is <4>\r\n   >      but: was <3>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.assertNumUniqueNodeNameBuckets(IndexAuditUpgradeIT.java:127)\r\n   > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.lambda$testDocsAuditedInUpgradedCluster$2(IndexAuditUpgradeIT.java:92)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:755)\r\n   > \t\t... 39 more\r\n   > \tSuppressed: java.lang.AssertionError: Found node buckets [{doc_count=3102, key=node-0}, {doc_count=3029, key=mixed-node-0}, {doc_count=1389, key=node-1}]\r\n   > Expected: is <4>\r\n   >      but: was <3>\r\n   > \t\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n   > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.assertNumUniqueNodeNameBuckets(IndexAuditUpgradeIT.java:127)\r\n   > \t\tat org.elasticsearch.upgrades.IndexAuditUpgradeIT.lambda$testDocsAuditedInUpgradedCluster$2(IndexAuditUpgradeIT.java:92)\r\n   > \t\tat org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:755)\r\n   > \t\t... 39 more\r\n   > \tSuppressed: java.lang.AssertionError: Found node buckets [{doc_count=3102, key=node-0}, {doc_count=3029, key=mixed-node-0}, {doc_count=1389, key=node-1}]\r\n   > Expected: is <4>\r\n   >      but: was <3>\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/395168645","html_url":"https://github.com/elastic/elasticsearch/issues/30562#issuecomment-395168645","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30562","id":395168645,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTE2ODY0NQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2018-06-06T18:29:26Z","updated_at":"2018-06-06T18:29:26Z","author_association":"CONTRIBUTOR","body":"I bumped into this when I was working on switching from two to three nodes in the rolling restart - it has to do with when a new master is elected with the new version. I believe I'll have fixed this when I backport #31112.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/395836160","html_url":"https://github.com/elastic/elasticsearch/issues/30562#issuecomment-395836160","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30562","id":395836160,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NTgzNjE2MA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2018-06-08T17:45:42Z","updated_at":"2018-06-08T17:45:42Z","author_association":"CONTRIBUTOR","body":"I'm fairly sure I fixed this as part of b88d3d314917f94e58d320dab6937fee5316ef66.","performed_via_github_app":null}]