[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/524718893","html_url":"https://github.com/elastic/elasticsearch/issues/45953#issuecomment-524718893","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45953","id":524718893,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDcxODg5Mw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-08-26T05:17:10Z","updated_at":"2019-08-26T05:17:10Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/526179384","html_url":"https://github.com/elastic/elasticsearch/issues/45953#issuecomment-526179384","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45953","id":526179384,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjE3OTM4NA==","user":{"login":"matriv","id":5058131,"node_id":"MDQ6VXNlcjUwNTgxMzE=","avatar_url":"https://avatars1.githubusercontent.com/u/5058131?v=4","gravatar_id":"","url":"https://api.github.com/users/matriv","html_url":"https://github.com/matriv","followers_url":"https://api.github.com/users/matriv/followers","following_url":"https://api.github.com/users/matriv/following{/other_user}","gists_url":"https://api.github.com/users/matriv/gists{/gist_id}","starred_url":"https://api.github.com/users/matriv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matriv/subscriptions","organizations_url":"https://api.github.com/users/matriv/orgs","repos_url":"https://api.github.com/users/matriv/repos","events_url":"https://api.github.com/users/matriv/events{/privacy}","received_events_url":"https://api.github.com/users/matriv/received_events","type":"User","site_admin":false},"created_at":"2019-08-29T13:14:14Z","updated_at":"2019-08-29T13:14:14Z","author_association":"CONTRIBUTOR","body":"Another failure: Log: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob-darwin-compatibility/177/console Build Scan: https://gradle-enterprise.elastic.co/s/2qcg42go5eelu\r\n\r\nJust in case any logs are lost you can find them [here](https://github.com/elastic/elasticsearch/files/3555678/console.log.zip)\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/526512481","html_url":"https://github.com/elastic/elasticsearch/issues/45953#issuecomment-526512481","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45953","id":526512481,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjUxMjQ4MQ==","user":{"login":"dimitris-athanasiou","id":9351617,"node_id":"MDQ6VXNlcjkzNTE2MTc=","avatar_url":"https://avatars3.githubusercontent.com/u/9351617?v=4","gravatar_id":"","url":"https://api.github.com/users/dimitris-athanasiou","html_url":"https://github.com/dimitris-athanasiou","followers_url":"https://api.github.com/users/dimitris-athanasiou/followers","following_url":"https://api.github.com/users/dimitris-athanasiou/following{/other_user}","gists_url":"https://api.github.com/users/dimitris-athanasiou/gists{/gist_id}","starred_url":"https://api.github.com/users/dimitris-athanasiou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dimitris-athanasiou/subscriptions","organizations_url":"https://api.github.com/users/dimitris-athanasiou/orgs","repos_url":"https://api.github.com/users/dimitris-athanasiou/repos","events_url":"https://api.github.com/users/dimitris-athanasiou/events{/privacy}","received_events_url":"https://api.github.com/users/dimitris-athanasiou/received_events","type":"User","site_admin":false},"created_at":"2019-08-30T08:31:39Z","updated_at":"2019-08-30T08:31:39Z","author_association":"CONTRIBUTOR","body":"And another: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob-darwin-compatibility/179/console. Build scan: https://gradle-enterprise.elastic.co/s/25mq3g7klb7yo","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/532159593","html_url":"https://github.com/elastic/elasticsearch/issues/45953#issuecomment-532159593","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45953","id":532159593,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjE1OTU5Mw==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2019-09-17T10:21:54Z","updated_at":"2019-09-17T15:01:26Z","author_association":"MEMBER","body":"Failed again in https://gradle-enterprise.elastic.co/s/n3eq7qadc2fkw now with proper logging -> looking into it.\r\n\r\nLooking at the logged result, we're running into the following recovery status here, so we're getting file based recovery for some reason:\r\n\r\n```json\r\n{\r\n  \"id\": 0,\r\n  \"type\": \"PEER\",\r\n  \"stage\": \"DONE\",\r\n  \"primary\": false,\r\n  \"start_time_in_millis\": 1568528459305,\r\n  \"stop_time_in_millis\": 1568528462022,\r\n  \"total_time_in_millis\": 2716,\r\n  \"source\": {\r\n    \"id\": \"lSlqjIzYSMuCDEaMaaBX2Q\",\r\n    \"host\": \"127.0.0.1\",\r\n    \"transport_address\": \"127.0.0.1:43829\",\r\n    \"ip\": \"127.0.0.1\",\r\n    \"name\": \"node_t0\"\r\n  },\r\n  \"target\": {\r\n    \"id\": \"a1xHmoR7QMWADf8NFSXTlg\",\r\n    \"host\": \"127.0.0.1\",\r\n    \"transport_address\": \"127.0.0.1:46451\",\r\n    \"ip\": \"127.0.0.1\",\r\n    \"name\": \"node_t3\"\r\n  },\r\n  \"index\": {\r\n    \"size\": {\r\n      \"total_in_bytes\": 33577,\r\n      \"reused_in_bytes\": 0,\r\n      \"recovered_in_bytes\": 33577,\r\n      \"percent\": \"100.0%\"\r\n    },\r\n    \"files\": {\r\n      \"total\": 47,\r\n      \"reused\": 0,\r\n      \"recovered\": 47,\r\n      \"percent\": \"100.0%\"\r\n    },\r\n    \"total_time_in_millis\": 1086,\r\n    \"source_throttle_time_in_millis\": 0,\r\n    \"target_throttle_time_in_millis\": 0\r\n  },\r\n  \"translog\": {\r\n    \"recovered\": 0,\r\n    \"total\": 0,\r\n    \"percent\": \"100.0%\",\r\n    \"total_on_start\": 0,\r\n    \"total_time_in_millis\": 859\r\n  },\r\n  \"verify_index\": {\r\n    \"check_index_time_in_millis\": 0,\r\n    \"total_time_in_millis\": 0\r\n  }\r\n}\r\n```\r\n\r\n... tracking down why that is now.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/532295463","html_url":"https://github.com/elastic/elasticsearch/issues/45953#issuecomment-532295463","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45953","id":532295463,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjI5NTQ2Mw==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2019-09-17T16:23:32Z","updated_at":"2019-09-17T16:23:32Z","author_association":"MEMBER","body":"This is reproducible in  100% of cases by adding a 30s sleep between setting the replica count to `1` and re-starting one of the stopped nodes at the end of the test:\r\n\r\ni.e. via:\r\n```java\r\n        assertAcked(client().admin().indices().prepareUpdateSettings(indexName)\r\n            .setSettings(Settings.builder().put(IndexMetaData.SETTING_NUMBER_OF_REPLICAS, 1)));\r\n        TimeUnit.SECONDS.sleep(30L);\r\n        internalCluster().startNode(randomFrom(firstNodeToStopDataPathSettings, secondNodeToStopDataPathSettings));\r\n        ensureGreen(indexName);\r\n```\r\n\r\n(using test seed `-Dtests.seed=DCCF65E24734AA2A` that is)","performed_via_github_app":null}]