{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/2927","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2927/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2927/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2927/events","html_url":"https://github.com/elastic/elasticsearch/issues/2927","id":13498770,"node_id":"MDU6SXNzdWUxMzQ5ODc3MA==","number":2927,"title":"Log conflicting options / directives","user":{"login":"btimby","id":669270,"node_id":"MDQ6VXNlcjY2OTI3MA==","avatar_url":"https://avatars0.githubusercontent.com/u/669270?v=4","gravatar_id":"","url":"https://api.github.com/users/btimby","html_url":"https://github.com/btimby","followers_url":"https://api.github.com/users/btimby/followers","following_url":"https://api.github.com/users/btimby/following{/other_user}","gists_url":"https://api.github.com/users/btimby/gists{/gist_id}","starred_url":"https://api.github.com/users/btimby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/btimby/subscriptions","organizations_url":"https://api.github.com/users/btimby/orgs","repos_url":"https://api.github.com/users/btimby/repos","events_url":"https://api.github.com/users/btimby/events{/privacy}","received_events_url":"https://api.github.com/users/btimby/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"assignees":[{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2013-04-22T18:33:06Z","updated_at":"2013-10-07T07:47:57Z","closed_at":"2013-10-07T07:47:57Z","author_association":"NONE","active_lock_reason":null,"body":"I ran into an issue today with ElasticSearch. The problem was my own bone-headedness. However, it took me longer to realize this than it should have.\n\nMy problem in a nutshell was that while troubleshooting some time ago, I had set total_shards_per_node to 4. For me, with 3 nodes and 12 shards (primaries) this number was too low. I had (incorrectly) assumed that shards referred to just primaries. I was recently trying to figure out where my replicas had all gone, and went to the mailing list for help.\n\nhttps://groups.google.com/forum/?fromgroups=#!topic/elasticsearch/vCZN2LR7K0U\n\nI have seen other systems (like Heartbeat) log a message when it has received conflicting instructions. On the one hand, I asked ES to make a replica for each shard. But on the other hand, I did not allocate enough shards per node to accommodate the replicas. The ES log file was completely silent, so I had nowhere except the ML to look for more information. I propose that in this situation, ES logs something like:\n\n\"WARNING: I need to store 24 shards, but total_shards_per_node \\* node_count == 12.\"\n\nP.S. I think that the terminology is a bit vague in regards to shards / replicas. Replicas are shards in some sense, but not in others. I would suggest separating the two, or introducing a term that applies to shards+replicas. For example, shard refers to primaries, replica refers to a copy of a shard, and **insert term here** refers to both (shards+replicas).\n","closed_by":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"performed_via_github_app":null}