[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/404448399","html_url":"https://github.com/elastic/elasticsearch/issues/31983#issuecomment-404448399","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31983","id":404448399,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNDQ0ODM5OQ==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2018-07-12T09:21:06Z","updated_at":"2018-07-12T09:21:06Z","author_association":"MEMBER","body":"Hi @halleystar ! Your question is better suited to the support forums over at https://discuss.elastic.co. We prefer to use Github issues only for bug reports and feature requests, and we think it's more likely this is a question than a bug report. I'm closing this as an issue here, but encourage you to ask this question in the forum instead. Many thanks.\r\nIf you open this question in the forum, could you also include what differences you observe with precision and sort in 5.6 compared to 1.7? To me it's not clear from the description above.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/404481953","html_url":"https://github.com/elastic/elasticsearch/issues/31983#issuecomment-404481953","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31983","id":404481953,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNDQ4MTk1Mw==","user":{"login":"halleystar","id":5334156,"node_id":"MDQ6VXNlcjUzMzQxNTY=","avatar_url":"https://avatars2.githubusercontent.com/u/5334156?v=4","gravatar_id":"","url":"https://api.github.com/users/halleystar","html_url":"https://github.com/halleystar","followers_url":"https://api.github.com/users/halleystar/followers","following_url":"https://api.github.com/users/halleystar/following{/other_user}","gists_url":"https://api.github.com/users/halleystar/gists{/gist_id}","starred_url":"https://api.github.com/users/halleystar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/halleystar/subscriptions","organizations_url":"https://api.github.com/users/halleystar/orgs","repos_url":"https://api.github.com/users/halleystar/repos","events_url":"https://api.github.com/users/halleystar/events{/privacy}","received_events_url":"https://api.github.com/users/halleystar/received_events","type":"User","site_admin":false},"created_at":"2018-07-12T11:33:24Z","updated_at":"2018-07-12T11:33:24Z","author_association":"NONE","body":"I don't think this is  a questionã€‚the same precision and the same Dsl but the result is diff\r\n\r\nin the case of elasticsearch1.7\r\n{\"took\":5,\"hits\":{\"total\":2,\"max_score\":1,\"hits\":[{\"_index\":\"gis-region\",\"_type\":\"region\",\"_id\":\"4\",\"_score\":1,\"_source\":{\"id\":470,\"region\":{\"coordinates\":[[[\"116.434225\",\"39.975287\"],[\"116.449568\",\"39.995107\"],[\"116.43970170867237\",\"39.99497761177407\"],[\"116.41369680731\",\"39.994408212752\"],[\"116.41369689850515\",\"39.99443664024678\"],[\"116.394484\",\"39.993918\"],[\"116.39572144035283\",\"39.99167941863296\"],[\"116.40043\",\"39.983206\"],[\"116.40043011431644\",\"39.98319769105138\"],[\"116.40052165971491\",\"39.98321634473732\"],[\"116.40052\",\"39.983323\"],[\"116.40094644633666\",\"39.98330290109479\"],[\"116.401634\",\"39.983443\"],[\"116.410042\",\"39.981093\"],[\"116.414031\",\"39.975205\"],[\"116.434225\",\"39.975287\"]]],\"type\":\"polygon\"}}},{\"_index\":\"gis-region\",\"_type\":\"region\",\"_id\":\"41\",\"_score\":1,\"_source\":{\"id\":472,\"region\":{\"coordinates\":[[[\"116.414246\",\"39.975163\"],[\"116.41421538644542\",\"39.97520574872182\"],[\"116.414031\",\"39.975205\"],[\"116.41078942906539\",\"39.979989750479554\"],[\"116.4099886912492\",\"39.9811078995676\"],[\"116.40550358152854\",\"39.98236146853092\"],[\"116.40159620813535\",\"39.98343529936638\"],[\"116.400484\",\"39.983069\"],[\"116.400664\",\"39.974665\"],[\"116.414246\",\"39.975163\"]]],\"type\":\"polygon\"}}}]}}\r\n\r\nthe result in the case of 5.6.4\r\n{\"hits\":{\"total\":1,\"max_score\":1,\"hits\":[{\"_index\":\"gis-region\",\"_type\":\"region\",\"_id\":\"41\",\"_score\":1,\"_source\":{\"id\":472,\"region\":{\"coordinates\":[[[\"116.414246\",\"39.975163\"],[\"116.41421538644542\",\"39.97520574872182\"],[\"116.414031\",\"39.975205\"],[\"116.41078942906539\",\"39.979989750479554\"],[\"116.4099886912492\",\"39.9811078995676\"],[\"116.40550358152854\",\"39.98236146853092\"],[\"116.40159620813535\",\"39.98343529936638\"],[\"116.400484\",\"39.983069\"],[\"116.400664\",\"39.974665\"],[\"116.414246\",\"39.975163\"]]],\"type\":\"polygon\"}}}]}}\r\n\r\nThe query DSL\r\n{\r\n\"query\" : {\r\n\"geo_shape\" : {\r\n\"region\" : {\r\n\"shape\" : {\r\n\"type\" : \"point\",\r\n\"coordinates\" : [\r\n116.414235,\r\n39.975154\r\n]\r\n},\r\n\"relation\" : \"intersects\"\r\n}\r\n}\r\n}\r\n}\r\n\r\nThe mapping\r\ncurl -X PUT 'http://127.0.0.1:9200/gis-region' -d '\r\n{\"mappings\" : {\"region\" : {\"properties\" : {\"id\": {\"type\":\"long\"},\"region\" : {\"type\": \"geo_shape\",\"tree\": \"geohash\",\"precision\": 26}}}}}","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/404507113","html_url":"https://github.com/elastic/elasticsearch/issues/31983#issuecomment-404507113","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31983","id":404507113,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNDUwNzExMw==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2018-07-12T13:11:58Z","updated_at":"2018-07-12T13:11:58Z","author_association":"MEMBER","body":"@halleystar lets discuss this in https://discuss.elastic.co/t/geo-shape-sort/139724 where I posted an answer.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/406165551","html_url":"https://github.com/elastic/elasticsearch/issues/31983#issuecomment-406165551","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31983","id":406165551,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNjE2NTU1MQ==","user":{"login":"halleystar","id":5334156,"node_id":"MDQ6VXNlcjUzMzQxNTY=","avatar_url":"https://avatars2.githubusercontent.com/u/5334156?v=4","gravatar_id":"","url":"https://api.github.com/users/halleystar","html_url":"https://github.com/halleystar","followers_url":"https://api.github.com/users/halleystar/followers","following_url":"https://api.github.com/users/halleystar/following{/other_user}","gists_url":"https://api.github.com/users/halleystar/gists{/gist_id}","starred_url":"https://api.github.com/users/halleystar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/halleystar/subscriptions","organizations_url":"https://api.github.com/users/halleystar/orgs","repos_url":"https://api.github.com/users/halleystar/repos","events_url":"https://api.github.com/users/halleystar/events{/privacy}","received_events_url":"https://api.github.com/users/halleystar/received_events","type":"User","site_admin":false},"created_at":"2018-07-19T06:10:17Z","updated_at":"2018-07-19T06:10:17Z","author_association":"NONE","body":"when i set the precision exactly. the index and bulk performance is very very slow then which in 1.7","performed_via_github_app":null}]