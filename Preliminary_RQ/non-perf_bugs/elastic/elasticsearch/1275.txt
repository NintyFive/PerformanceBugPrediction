{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/1275","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1275/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1275/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1275/events","html_url":"https://github.com/elastic/elasticsearch/issues/1275","id":1481171,"node_id":"MDU6SXNzdWUxNDgxMTcx","number":1275,"title":"Geofacet with boundingbox","user":{"login":"matsjg","id":83567,"node_id":"MDQ6VXNlcjgzNTY3","avatar_url":"https://avatars3.githubusercontent.com/u/83567?v=4","gravatar_id":"","url":"https://api.github.com/users/matsjg","html_url":"https://github.com/matsjg","followers_url":"https://api.github.com/users/matsjg/followers","following_url":"https://api.github.com/users/matsjg/following{/other_user}","gists_url":"https://api.github.com/users/matsjg/gists{/gist_id}","starred_url":"https://api.github.com/users/matsjg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matsjg/subscriptions","organizations_url":"https://api.github.com/users/matsjg/orgs","repos_url":"https://api.github.com/users/matsjg/repos","events_url":"https://api.github.com/users/matsjg/events{/privacy}","received_events_url":"https://api.github.com/users/matsjg/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"assignees":[{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2011-08-25T08:49:30Z","updated_at":"2013-07-03T12:03:44Z","closed_at":"2013-07-03T12:03:44Z","author_association":"NONE","active_lock_reason":null,"body":"Create a geo facet that uses a boundingbox instead of distance. \n\n``` javascript\n{\n  \"geo_bbox\": {\n       \"bbox\": [-180,90,180,-90],\n       \"spacing\": {\n           \"lat\": 0.0006993,\n           \"lon\": 0.0006993\n       },       \n       \"key_field\": \"location\",\n       \"value_field\": \"propery_value\"\n  }\n}\n```\n\nThe result is expanded to:\n\n``` javascript\n\"geotest\" : {\n    \"_type\" : \"geo_bbox\",\n    \"missing\" : 0,\n    \"bbox\": [-180,90,180,-90],\n    \"rows\": 200,\n    \"cols\": 200,\n    \"data\" : [\n        {\n          \"bbox\": [ 72, 18, 72.5, 17.5 ],\n          \"center\": { \n               \"lat\":  17.75,\n               \"lon\": 72.25\n          },\n         \"count\": 15168,\n         \"total_count\": 14897,\n         \"min\": 6500,\n         \"max\": 225000000,\n         \"total\": 37108379266,\n         \"mean\": 2490996.795730684\n    } \n    ]\n  }\n\n```\n\nThe idea is to provide a boundingbox and a gridsize/spacing. The spacing and outer boundingbox is expanded to {row} x {column} number of boundingboxes which is used to test the key against. The value_field (script_field etc) is used for calculations in the same manner as in term/term_stat facet.\n","closed_by":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"performed_via_github_app":null}