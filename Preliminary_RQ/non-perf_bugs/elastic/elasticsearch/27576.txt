{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/27576","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27576/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27576/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27576/events","html_url":"https://github.com/elastic/elasticsearch/issues/27576","id":277535181,"node_id":"MDU6SXNzdWUyNzc1MzUxODE=","number":27576,"title":"Cgroup Data missing from _nodes/stats","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"labels":[{"id":146836529,"node_id":"MDU6TGFiZWwxNDY4MzY1Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Stats","name":":Core/Features/Stats","color":"0e8a16","default":false,"description":"Statistics tracking and retrieval APIs"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"assignees":[{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2017-11-28T20:56:30Z","updated_at":"2017-11-28T21:11:05Z","closed_at":"2017-11-28T21:06:39Z","author_association":"MEMBER","active_lock_reason":null,"body":"It looks like something is weird in Elasticsearch 6.0.0 that is causing Cgroup data to drop from the `_nodes/stats` output.\r\n\r\n```http\r\nGET /_nodes/stats/os?pretty\r\n{\r\n  \"_nodes\": {\r\n    \"total\": 1,\r\n    \"successful\": 1,\r\n    \"failed\": 0\r\n  },\r\n  \"cluster_name\": \"my-cluster\",\r\n  \"nodes\": {\r\n    \"yeWhrz-9RgqEvCJ3nu83xg\": {\r\n      \"timestamp\": 1511902436830,\r\n      \"name\": \"my-node\",\r\n      \"transport_address\": \"1.2.3.4:9300\",\r\n      \"host\": \"1.2.3.4\",\r\n      \"ip\": \"1.2.3.4:9300\",\r\n      \"roles\": [\r\n        \"master\",\r\n        \"data\",\r\n        \"ingest\"\r\n      ],\r\n      \"os\": {\r\n        \"timestamp\": 1511902436831,\r\n        \"cpu\": {\r\n          \"percent\": 16,\r\n          \"load_average\": {\r\n            \"1m\": 6.63,\r\n            \"5m\": 5.16,\r\n            \"15m\": 4.84\r\n          }\r\n        },\r\n        \"mem\": {\r\n          \"total_in_bytes\": 257942405120,\r\n          \"free_in_bytes\": 17832869888,\r\n          \"used_in_bytes\": 240109535232,\r\n          \"free_percent\": 7,\r\n          \"used_percent\": 93\r\n        },\r\n        \"swap\": {\r\n          \"total_in_bytes\": 128974843904,\r\n          \"free_in_bytes\": 128814166016,\r\n          \"used_in_bytes\": 160677888\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nChecking the local machine, within its [Docker] container:\r\n\r\n```bash\r\nroot@d1777e91f438:/# cat /sys/fs/cgroup/cpu/cpu.cfs_quota_us\r\n218803\r\nroot@d1777e91f438:/# cat /sys/fs/cgroup/cpuacct/cpuacct.stat\r\nuser 1319337\r\nsystem 192099\r\n```","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}