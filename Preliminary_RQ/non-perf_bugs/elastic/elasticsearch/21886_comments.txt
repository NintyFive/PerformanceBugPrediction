[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/264164997","html_url":"https://github.com/elastic/elasticsearch/issues/21886#issuecomment-264164997","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21886","id":264164997,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDE2NDk5Nw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-12-01T12:46:15Z","updated_at":"2016-12-01T12:46:15Z","author_association":"CONTRIBUTOR","body":"What exactly would the API look like?  My concern here is in producing very large responses (esp when you have to combine results from different shards).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/264620944","html_url":"https://github.com/elastic/elasticsearch/issues/21886#issuecomment-264620944","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21886","id":264620944,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDYyMDk0NA==","user":{"login":"shaie","id":3469932,"node_id":"MDQ6VXNlcjM0Njk5MzI=","avatar_url":"https://avatars0.githubusercontent.com/u/3469932?v=4","gravatar_id":"","url":"https://api.github.com/users/shaie","html_url":"https://github.com/shaie","followers_url":"https://api.github.com/users/shaie/followers","following_url":"https://api.github.com/users/shaie/following{/other_user}","gists_url":"https://api.github.com/users/shaie/gists{/gist_id}","starred_url":"https://api.github.com/users/shaie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shaie/subscriptions","organizations_url":"https://api.github.com/users/shaie/orgs","repos_url":"https://api.github.com/users/shaie/repos","events_url":"https://api.github.com/users/shaie/events{/privacy}","received_events_url":"https://api.github.com/users/shaie/received_events","type":"User","site_admin":false},"created_at":"2016-12-03T06:30:06Z","updated_at":"2016-12-03T06:30:06Z","author_association":"CONTRIBUTOR","body":"Hey @clintongormley, sorry but somehow I didn't receive a notification about your response, so missed it.\r\n\r\nI was thinking of an API very similar to _field_stats, that looks like `/{index}/_term_stats?field=foo&terms=t1,t2,t3` (or have `terms` be of the form `field:term,field:term` or some other structure maybe JSON) and returns index/cluster-level stats of those terms, such as `docFreq` and `totalTermFreq`.\r\n\r\nIf it wasn't clear, I definitely don't think the API should return the stats of all terms of a field in the index, only select terms.\r\n\r\nI don't see how this API can be more expensive than _field_stats which combines the results from many shards as well. You'd go to each shard once with all requested terms, get back the response and sum them all up, no?\r\n\r\nWe can also restrict the API to at most X terms (maybe 100? just throwing a number) so that the request/response doesn't become too heavy.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/265184466","html_url":"https://github.com/elastic/elasticsearch/issues/21886#issuecomment-265184466","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21886","id":265184466,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTE4NDQ2Ng==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-12-06T15:46:09Z","updated_at":"2016-12-06T15:46:09Z","author_association":"CONTRIBUTOR","body":"I have concerns too, this is really a low level operation that should be executed locally or it should be an implementation detail of a another high-level feature. I don't see the usecase for such a primitive and term level is certainly very very expert. @shaie what is the usecase of such a feature? If you want to use this for some kind of query postprocessing then we can think about making the rescorer stuff pluggable? Another option where I can actually see this being useful is to extend our explain output somehow. when you search you can do `&explain=true` and you get lucene level explain output for each hit. Maybe there is a good way to extend this to also render the aggregated term statistics if they are present or only that ie. `explain_distributed_freqs` then the actual freq are coming back that are used for the query and nobody needs a second round trip. I can see that being useful.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/265397774","html_url":"https://github.com/elastic/elasticsearch/issues/21886#issuecomment-265397774","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21886","id":265397774,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTM5Nzc3NA==","user":{"login":"shaie","id":3469932,"node_id":"MDQ6VXNlcjM0Njk5MzI=","avatar_url":"https://avatars0.githubusercontent.com/u/3469932?v=4","gravatar_id":"","url":"https://api.github.com/users/shaie","html_url":"https://github.com/shaie","followers_url":"https://api.github.com/users/shaie/followers","following_url":"https://api.github.com/users/shaie/following{/other_user}","gists_url":"https://api.github.com/users/shaie/gists{/gist_id}","starred_url":"https://api.github.com/users/shaie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shaie/subscriptions","organizations_url":"https://api.github.com/users/shaie/orgs","repos_url":"https://api.github.com/users/shaie/repos","events_url":"https://api.github.com/users/shaie/events{/privacy}","received_events_url":"https://api.github.com/users/shaie/received_events","type":"User","site_admin":false},"created_at":"2016-12-07T09:25:58Z","updated_at":"2016-12-07T09:25:58Z","author_association":"CONTRIBUTOR","body":"The usecases involve indexing some data in an ES index/cluster, but accessing it from another system. In that case, being able to access the term statistics only from within the ES cluster is less useful. While your writeup about `explain` makes sense, I think your premise is that someone wants to access the term statistics to perform actions on the documents that are indexed within the **same** ES index, but this isn't the case.\r\n\r\nSo for example, consider that you're managing user profiles in an ES index. Each profile is indexed as one document and comprises a set of terms (and maybe even associated weights). Now consider another system which wants to answer a question like \"how important are the terms **t1** and **t2** to users\", where the importance might be measured by a combination of `totalTermFreq` and `sumDocFreq` which roughly tell how many users even care about the terms. It needs that in order to improve search quality for its data, which is indexed in a separate system (again, different data set, data source). It is not interested in a specific user's profile (that can be retrieved via `_termvectors`) but wants to use the user profiles information in order to apply better boosts to words that appear in queries that are sent to it.\r\n\r\nAnother example is related to \"learning\". Think about indexing some data source (say Wikipedia) and you want to use it in order to augment the search queries that are sent to you system, which may index Web news. Again, you're not interested in affecting the score of the Wikipedia results, but being able to access term statistics in the Wikipedia index can help you tune your search on Web news.\r\n\r\nI can provide more examples for sure, but they all follow the same idea - you don't necessarily want to access the terms statistics in order to use them for **the same** index.\r\n\r\nOut of curiosity, what's the usecase for the `_field_stats` API, and don't you think that it falls into the same category as `_terms_stats`?\r\n\r\nAnd about *expert use cases* - I see it as a pro if ES addresses both regular and expert users' use cases. But of course I'm biased ðŸ˜‰. And I understand that this sort of feature can be developed as a plug-in, which needs access to low-level Lucene API, however I think that having a REST API might help other (less expert) users, use the data in order to do innovative things with ES.\r\n\r\nI think I stated it somewhere, but if not - I am willing to do the work to add this API to ES (if you will agree to have it though)!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/265469334","html_url":"https://github.com/elastic/elasticsearch/issues/21886#issuecomment-265469334","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21886","id":265469334,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTQ2OTMzNA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-12-07T15:00:48Z","updated_at":"2016-12-07T15:00:48Z","author_association":"CONTRIBUTOR","body":"> If it wasn't clear, I definitely don't think the API should return the stats of all terms of a field in the index, only select terms.\r\n\r\nThis was my main concern - it limits the impact of this API, even when pulling back term stats from all shards.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/265469493","html_url":"https://github.com/elastic/elasticsearch/issues/21886#issuecomment-265469493","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21886","id":265469493,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTQ2OTQ5Mw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-12-07T15:01:25Z","updated_at":"2016-12-07T15:01:25Z","author_association":"CONTRIBUTOR","body":"That said, I don't understand the nitty gritty and so may be missing the reasons for @s1monw 's concerns","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/265473804","html_url":"https://github.com/elastic/elasticsearch/issues/21886#issuecomment-265473804","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21886","id":265473804,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTQ3MzgwNA==","user":{"login":"shaie","id":3469932,"node_id":"MDQ6VXNlcjM0Njk5MzI=","avatar_url":"https://avatars0.githubusercontent.com/u/3469932?v=4","gravatar_id":"","url":"https://api.github.com/users/shaie","html_url":"https://github.com/shaie","followers_url":"https://api.github.com/users/shaie/followers","following_url":"https://api.github.com/users/shaie/following{/other_user}","gists_url":"https://api.github.com/users/shaie/gists{/gist_id}","starred_url":"https://api.github.com/users/shaie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shaie/subscriptions","organizations_url":"https://api.github.com/users/shaie/orgs","repos_url":"https://api.github.com/users/shaie/repos","events_url":"https://api.github.com/users/shaie/events{/privacy}","received_events_url":"https://api.github.com/users/shaie/received_events","type":"User","site_admin":false},"created_at":"2016-12-07T15:16:40Z","updated_at":"2016-12-07T15:16:40Z","author_association":"CONTRIBUTOR","body":"> This was my main concern - it limits the impact of this API, even when pulling back term stats from all shards.\r\n\r\nIndeed, it does not allow you to extract the statistics of all terms of a field, but `_field_stats` does not allow you to retrieve stats of all fields too, only select ones. I think this is OK because I don't see a case for fetching stats for all terms of a field. If you can obtain stats for select terms, and the field statistics, you have enough information at hand to tell something *qualitative* about the terms you're interested in, and how they relate to the rest of the terms in the field.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/267321570","html_url":"https://github.com/elastic/elasticsearch/issues/21886#issuecomment-267321570","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21886","id":267321570,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NzMyMTU3MA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-12-15T12:59:08Z","updated_at":"2016-12-15T12:59:08Z","author_association":"CONTRIBUTOR","body":"> That said, I don't understand the nitty gritty and so may be missing the reasons for @s1monw 's concerns\r\n\r\nI think the biggest reason here is that it's very hard to remove any kind of API in a project like this so we need to make the right decisions here. I am still not convinced that such an API is used by more than 1% of the userbase and if that is the case I'd opt for the ask of a plugin. One thing we can do is to add a new `misc` plugin to elasticsearch core where we can add stuff like this. There we can define different BWC guarantees for the APIs and core remains lean. ideally we could also move field_stats to this project.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/267323597","html_url":"https://github.com/elastic/elasticsearch/issues/21886#issuecomment-267323597","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21886","id":267323597,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NzMyMzU5Nw==","user":{"login":"shaie","id":3469932,"node_id":"MDQ6VXNlcjM0Njk5MzI=","avatar_url":"https://avatars0.githubusercontent.com/u/3469932?v=4","gravatar_id":"","url":"https://api.github.com/users/shaie","html_url":"https://github.com/shaie","followers_url":"https://api.github.com/users/shaie/followers","following_url":"https://api.github.com/users/shaie/following{/other_user}","gists_url":"https://api.github.com/users/shaie/gists{/gist_id}","starred_url":"https://api.github.com/users/shaie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shaie/subscriptions","organizations_url":"https://api.github.com/users/shaie/orgs","repos_url":"https://api.github.com/users/shaie/repos","events_url":"https://api.github.com/users/shaie/events{/privacy}","received_events_url":"https://api.github.com/users/shaie/received_events","type":"User","site_admin":false},"created_at":"2016-12-15T13:09:42Z","updated_at":"2016-12-15T13:09:42Z","author_association":"CONTRIBUTOR","body":"Thanks @s1monw.\r\n\r\n> One thing we can do is to add a new misc plugin to elasticsearch core where we can add stuff like this\r\n\r\nHaving absolute no experience with ES plugins, what does it mean? Can a plugin expose its own REST APIs? Would they then follow the same other ES APIs (e.g. `/index/type/_term_stats?...`)?\r\n\r\nWill such a plugin be loaded by default with ES? I mean, is what you're proposing mostly concerns BWC guarantees, or it also means that whoever wants to use this plugin, will have to tell ES to load it?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/267324783","html_url":"https://github.com/elastic/elasticsearch/issues/21886#issuecomment-267324783","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21886","id":267324783,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NzMyNDc4Mw==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-12-15T13:16:15Z","updated_at":"2016-12-15T13:16:21Z","author_association":"CONTRIBUTOR","body":"> having absolute no experience with ES plugins, what does it mean? Can a plugin expose its own REST APIs? Would they then follow the same other ES APIs (e.g. /index/type/_term_stats?...)?\r\n\r\nyes it can do everything just like core here\r\n\r\n> Will such a plugin be loaded by default with ES? I mean, is what you're proposing mostly concerns BWC guarantees, or it also means that whoever wants to use this plugin, will have to tell ES to load it?\r\n\r\ncorrect, you have to run the plugin manager to install it. I don't even know if BWC is an issue here at this point","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/267329180","html_url":"https://github.com/elastic/elasticsearch/issues/21886#issuecomment-267329180","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21886","id":267329180,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NzMyOTE4MA==","user":{"login":"shaie","id":3469932,"node_id":"MDQ6VXNlcjM0Njk5MzI=","avatar_url":"https://avatars0.githubusercontent.com/u/3469932?v=4","gravatar_id":"","url":"https://api.github.com/users/shaie","html_url":"https://github.com/shaie","followers_url":"https://api.github.com/users/shaie/followers","following_url":"https://api.github.com/users/shaie/following{/other_user}","gists_url":"https://api.github.com/users/shaie/gists{/gist_id}","starred_url":"https://api.github.com/users/shaie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shaie/subscriptions","organizations_url":"https://api.github.com/users/shaie/orgs","repos_url":"https://api.github.com/users/shaie/repos","events_url":"https://api.github.com/users/shaie/events{/privacy}","received_events_url":"https://api.github.com/users/shaie/received_events","type":"User","site_admin":false},"created_at":"2016-12-15T13:38:50Z","updated_at":"2016-12-15T13:38:50Z","author_association":"CONTRIBUTOR","body":"OK then what do you recommend? Are you in favor at all about adding such an API/plugin, or still need to think about it?\r\n\r\nIf you do support it, I wouldn't mind (as said above) taking a shot at it, but would appreciate a pointer to how to start develop plugins.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/267329654","html_url":"https://github.com/elastic/elasticsearch/issues/21886#issuecomment-267329654","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21886","id":267329654,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NzMyOTY1NA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-12-15T13:41:14Z","updated_at":"2016-12-15T13:41:14Z","author_association":"CONTRIBUTOR","body":"I wonder what others think about such a misc plugin... @bleskes @jpountz @clintongormley ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/267550970","html_url":"https://github.com/elastic/elasticsearch/issues/21886#issuecomment-267550970","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21886","id":267550970,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NzU1MDk3MA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-12-16T09:18:21Z","updated_at":"2016-12-16T09:18:21Z","author_association":"CONTRIBUTOR","body":"> I think the biggest reason here is that it's very hard to remove any kind of API in a project like this so we need to make the right decisions here. I am still not convinced that such an API is used by more than 1% of the userbase and if that is the case I'd opt for the ask of a plugin. \r\n\r\nI completely agree with the above - makes sense\r\n\r\n> One thing we can do is to add a new misc plugin to elasticsearch core where we can add stuff like this. There we can define different BWC guarantees for the APIs and core remains lean. ideally we could also move field_stats to this project.\r\n\r\nWould the point of this misc plugin to be able to gain some insight into how many users are using the included features, so we can figure out which features should be moved to fully supported modules?  \r\n\r\nI'm not sure what a `misc` plugin gives you over having a plugin for a specific feature.  Also, having a plugin per feature makes it easy to see how popular it is: how many people install the plugin?\r\n\r\nAlso note that Kibana depends heavily on the field stats API, so moving that to be an optional plugin would break Kibana completely.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/267578915","html_url":"https://github.com/elastic/elasticsearch/issues/21886#issuecomment-267578915","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21886","id":267578915,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NzU3ODkxNQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-12-16T11:54:10Z","updated_at":"2016-12-16T11:54:10Z","author_association":"CONTRIBUTOR","body":"> I'm not sure what a misc plugin gives you over having a plugin for a specific feature. Also, having a plugin per feature makes it easy to see how popular it is: how many people install the plugin?\r\n\r\na plugin per feature is only useful IMO if the feature has a 3rd party dependency. Think of an analyzer etc. If we have 20 of these features we would have 20 plugins, what a mess.... I think we can have some kind of sandbox plugin that is marked experimental etc. where we can upgrade stuff to core if we think it's needed. \r\n\r\n> Also note that Kibana depends heavily on the field stats API, so moving that to be an optional plugin would break Kibana completely.\r\n\r\nreally? :) If it wouldn't I'd have deleted it by now. I think we need to work towards fixing that eventually.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/268327848","html_url":"https://github.com/elastic/elasticsearch/issues/21886#issuecomment-268327848","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21886","id":268327848,"node_id":"MDEyOklzc3VlQ29tbWVudDI2ODMyNzg0OA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2016-12-20T19:01:54Z","updated_at":"2016-12-20T19:01:54Z","author_association":"CONTRIBUTOR","body":"I guess my biggest concern is about backward compatibility. For instance we changed the way numerics are stored in 5.x, and the new data structure we use cannot give you things like doc freqs in constant time. It was hard already, and if we had had this API at that time, that would have been another break to deal with. So we should be totally clear about the fact that this feature may change in unexpected ways at any time. I think putting this kind of things in a plugin helps convey this message.\r\n\r\n> If it wouldn't I'd have deleted it by now. I think we need to work towards fixing that eventually.\r\n\r\n+++++++","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/268651714","html_url":"https://github.com/elastic/elasticsearch/issues/21886#issuecomment-268651714","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21886","id":268651714,"node_id":"MDEyOklzc3VlQ29tbWVudDI2ODY1MTcxNA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-12-21T21:56:30Z","updated_at":"2016-12-21T21:56:30Z","author_association":"CONTRIBUTOR","body":"@clintongormley I guess we can go with a plugin here, lets make sure this only works for string/keyword fields and not for numerics and get the semantic clear. @shaie do you wanna take a stab at it?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/268731184","html_url":"https://github.com/elastic/elasticsearch/issues/21886#issuecomment-268731184","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21886","id":268731184,"node_id":"MDEyOklzc3VlQ29tbWVudDI2ODczMTE4NA==","user":{"login":"shaie","id":3469932,"node_id":"MDQ6VXNlcjM0Njk5MzI=","avatar_url":"https://avatars0.githubusercontent.com/u/3469932?v=4","gravatar_id":"","url":"https://api.github.com/users/shaie","html_url":"https://github.com/shaie","followers_url":"https://api.github.com/users/shaie/followers","following_url":"https://api.github.com/users/shaie/following{/other_user}","gists_url":"https://api.github.com/users/shaie/gists{/gist_id}","starred_url":"https://api.github.com/users/shaie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shaie/subscriptions","organizations_url":"https://api.github.com/users/shaie/orgs","repos_url":"https://api.github.com/users/shaie/repos","events_url":"https://api.github.com/users/shaie/events{/privacy}","received_events_url":"https://api.github.com/users/shaie/received_events","type":"User","site_admin":false},"created_at":"2016-12-22T06:49:09Z","updated_at":"2016-12-22T06:49:09Z","author_association":"CONTRIBUTOR","body":"I certainly would like to give it a try :). Can you point me to an example plugin, preferably one that adds REST APIs, so I can get a head start? Also, FYI that I'm going to be on some PTO in the coming weeks, so it might take me some time, but would definitely want to do it. @s1monw, any guidance will be appreciated!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/268733577","html_url":"https://github.com/elastic/elasticsearch/issues/21886#issuecomment-268733577","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21886","id":268733577,"node_id":"MDEyOklzc3VlQ29tbWVudDI2ODczMzU3Nw==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-12-22T07:06:41Z","updated_at":"2016-12-22T07:06:41Z","author_association":"CONTRIBUTOR","body":"The closes I can think of is the reindex module, [here](https://github.com/elastic/elasticsearch/blob/master/modules/reindex/src/main/java/org/elasticsearch/index/reindex/ReindexPlugin.java) is the plugin class for it. RestHandlers are registered [here](https://github.com/elastic/elasticsearch/blob/master/modules/reindex/src/main/java/org/elasticsearch/index/reindex/ReindexPlugin.java#L55). If you start a plugin it should be under `/plugins` not under `/modules`. In oder to make the build pick it up you gotta edit [this](https://github.com/elastic/elasticsearch/blob/master/settings.gradle) file too and add your plugin to it. Also I'd just start by copying an existing [one](https://github.com/elastic/elasticsearch/tree/master/plugins/store-smb)? it has [rest-tests](https://github.com/elastic/elasticsearch/blob/master/plugins/store-smb/src/test/resources/rest-api-spec/test/store_smb/10_basic.yaml) as well as unittests etc. and is minimal. I won't be around for a week or so but feel free to ask questions or open a new PR to discuss ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/376035590","html_url":"https://github.com/elastic/elasticsearch/issues/21886#issuecomment-376035590","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21886","id":376035590,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NjAzNTU5MA==","user":{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false},"created_at":"2018-03-26T03:21:02Z","updated_at":"2018-03-26T03:21:02Z","author_association":"CONTRIBUTOR","body":"This feature request is an interesting idea but since its opening we have not seen enough feedback that it is a feature we should pursue. We prefer to close this issue as a clear indication that we are not going to work on this at this time. We are always open to reconsidering this in the future based on compelling feedback; despite this issue being closed please feel free to leave feedback on the proposal (including +1s).","performed_via_github_app":null}]