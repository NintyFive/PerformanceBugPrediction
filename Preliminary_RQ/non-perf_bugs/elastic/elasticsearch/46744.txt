{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/46744","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46744/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46744/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46744/events","html_url":"https://github.com/elastic/elasticsearch/issues/46744","id":493996054,"node_id":"MDU6SXNzdWU0OTM5OTYwNTQ=","number":46744,"title":"The JSON spec parser should support the new format","user":{"login":"delvedor","id":4865608,"node_id":"MDQ6VXNlcjQ4NjU2MDg=","avatar_url":"https://avatars0.githubusercontent.com/u/4865608?v=4","gravatar_id":"","url":"https://api.github.com/users/delvedor","html_url":"https://github.com/delvedor","followers_url":"https://api.github.com/users/delvedor/followers","following_url":"https://api.github.com/users/delvedor/following{/other_user}","gists_url":"https://api.github.com/users/delvedor/gists{/gist_id}","starred_url":"https://api.github.com/users/delvedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/delvedor/subscriptions","organizations_url":"https://api.github.com/users/delvedor/orgs","repos_url":"https://api.github.com/users/delvedor/repos","events_url":"https://api.github.com/users/delvedor/events{/privacy}","received_events_url":"https://api.github.com/users/delvedor/received_events","type":"User","site_admin":false},"labels":[{"id":152517143,"node_id":"MDU6TGFiZWwxNTI1MTcxNDM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/REST%20API","name":":Core/Infra/REST API","color":"0e8a16","default":false,"description":"REST infrastructure and utilities"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-09-16T11:37:29Z","updated_at":"2019-09-23T15:00:38Z","closed_at":"2019-09-23T15:00:38Z","author_association":"MEMBER","active_lock_reason":null,"body":"While working on https://github.com/elastic/elasticsearch/pull/46522, @polyfractal has discovered that the [parsing for `_common.json`](https://github.com/elastic/elasticsearch/blob/master/test/framework/src/main/java/org/elasticsearch/test/rest/yaml/restspec/ClientYamlSuiteRestSpec.java#L103-L123) assumes there is only one object to parse, while the new spec format there are two objects.\r\n\r\nThe parser needs to be updated to adopt the new structure of the JSON spec.\r\nFollowing, the difference between the old format and the new one.\r\n\r\n```diff\r\n-  \"description\": \"Parameters that are accepted by all API endpoints.\",\r\n-  \"documentation\": \"https://www.elastic.co/guide/en/elasticsearch/reference/current/common-options.html\",\r\n+  \"documentation\": {\r\n+    \"url\": \"https://www.elastic.co/guide/en/elasticsearch/reference/current/common-options.html\",\r\n+    \"description\": \"Parameters that are accepted by all API endpoints.\"\r\n+  },\r\n```\r\n\r\ncc @Mpdreamz ","closed_by":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"performed_via_github_app":null}