[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384836356","html_url":"https://github.com/elastic/elasticsearch/issues/30197#issuecomment-384836356","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30197","id":384836356,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDgzNjM1Ng==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-04-27T01:29:35Z","updated_at":"2018-04-27T01:29:35Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-security","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/384836357","html_url":"https://github.com/elastic/elasticsearch/issues/30197#issuecomment-384836357","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30197","id":384836357,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NDgzNjM1Nw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-04-27T01:29:36Z","updated_at":"2018-04-27T01:29:36Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/416173023","html_url":"https://github.com/elastic/elasticsearch/issues/30197#issuecomment-416173023","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30197","id":416173023,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNjE3MzAyMw==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2018-08-27T09:40:30Z","updated_at":"2018-08-27T09:40:30Z","author_association":"CONTRIBUTOR","body":"I think this can be achieved in Elasticsearch today by tuning the log4j configuration to write more verbose logs to an appender with a sufficiently enthusiastic rollover policy and a short retention window.\r\n\r\nOf course this still imposes the overhead of formatting all the extra messages and writing them out. I think it's essential to format the messages eagerly in any case: if not, the objects needed to format them later may mutate (yielding misleading messages) and the formatted messages may take up much less space than the data we need to format them (e.g. [a copy of the whole cluster state](https://github.com/elastic/elasticsearch/blob/e1e8cf382f629ae9576cd5b1d7a8add023e7dea6/server/src/main/java/org/elasticsearch/cluster/service/ClusterApplierService.java#L421-L425)). Writing the verbose messages out only to delete them a short while later _sounds_ expensive, but I'm not sure it'll be so bad if it only hits the filesystem cache (i.e. goes to a separate filesystem from the data paths to avoid this data being caught up in `fsync()` calls).\r\n\r\nI'm adding the discuss label to raise this with the wider team.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/417475554","html_url":"https://github.com/elastic/elasticsearch/issues/30197#issuecomment-417475554","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30197","id":417475554,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNzQ3NTU1NA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-08-30T21:38:46Z","updated_at":"2018-08-30T21:38:46Z","author_association":"MEMBER","body":"We discussed this during our weekly team discussion meeting (Fix-it-Friday) and concluded that we should not introduce this functionality:\r\n - we think that the cost and complexity this feature is not worth it given that we do not see it being used much, and our assumption that most of the time when an \"interesting\" situation occurs an operator is not going to have time to grab the logs before they roll again\r\n - trace logging is performance taxing on Elasticsearch when it is under any kind of load, even on fast disks, so it's unlikely that anyone would have this feature enabled given the implications there","performed_via_github_app":null}]