[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/717182816","html_url":"https://github.com/elastic/elasticsearch/issues/64203#issuecomment-717182816","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/64203","id":717182816,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNzE4MjgxNg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-10-27T11:37:57Z","updated_at":"2020-10-27T11:37:57Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features (:Core/Features/Ingest)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/717240837","html_url":"https://github.com/elastic/elasticsearch/issues/64203#issuecomment-717240837","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/64203","id":717240837,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNzI0MDgzNw==","user":{"login":"joegallo","id":187034,"node_id":"MDQ6VXNlcjE4NzAzNA==","avatar_url":"https://avatars2.githubusercontent.com/u/187034?v=4","gravatar_id":"","url":"https://api.github.com/users/joegallo","html_url":"https://github.com/joegallo","followers_url":"https://api.github.com/users/joegallo/followers","following_url":"https://api.github.com/users/joegallo/following{/other_user}","gists_url":"https://api.github.com/users/joegallo/gists{/gist_id}","starred_url":"https://api.github.com/users/joegallo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joegallo/subscriptions","organizations_url":"https://api.github.com/users/joegallo/orgs","repos_url":"https://api.github.com/users/joegallo/repos","events_url":"https://api.github.com/users/joegallo/events{/privacy}","received_events_url":"https://api.github.com/users/joegallo/received_events","type":"User","site_admin":false},"created_at":"2020-10-27T13:24:53Z","updated_at":"2020-10-27T13:24:53Z","author_association":"CONTRIBUTOR","body":"Related to #36949, which added the `assertDatabaseExistence` checks.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/717495835","html_url":"https://github.com/elastic/elasticsearch/issues/64203#issuecomment-717495835","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/64203","id":717495835,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNzQ5NTgzNQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2020-10-27T19:51:53Z","updated_at":"2020-10-27T19:51:53Z","author_association":"MEMBER","body":">Not sure what the correct approach to this is. Either we should update the docs to reflect that it can not have the same file name or we should disable the check.\r\n\r\nI want to clarify that this is deliberate, because those are not custom databases. We ensure that the built-in databases are loaded from the ingest-geoip module path, and custom databases are treated as configuration files from the config directory. One reason we did this was to ensure that users didn't have stale database files sitting around from the time when these database files *were* unpackaged from the ingest-geoip plugin into the configuration directory, but we transitioned to bundling them as part of the distribution when we made ingest-geoip a module instead of a plugin. This check ensures we don't load stale databases, but also that we aren't leniently and silently ignore them, which would be surprising to a user.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/718653943","html_url":"https://github.com/elastic/elasticsearch/issues/64203#issuecomment-718653943","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/64203","id":718653943,"node_id":"MDEyOklzc3VlQ29tbWVudDcxODY1Mzk0Mw==","user":{"login":"jakommo","id":6436143,"node_id":"MDQ6VXNlcjY0MzYxNDM=","avatar_url":"https://avatars2.githubusercontent.com/u/6436143?v=4","gravatar_id":"","url":"https://api.github.com/users/jakommo","html_url":"https://github.com/jakommo","followers_url":"https://api.github.com/users/jakommo/followers","following_url":"https://api.github.com/users/jakommo/following{/other_user}","gists_url":"https://api.github.com/users/jakommo/gists{/gist_id}","starred_url":"https://api.github.com/users/jakommo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakommo/subscriptions","organizations_url":"https://api.github.com/users/jakommo/orgs","repos_url":"https://api.github.com/users/jakommo/repos","events_url":"https://api.github.com/users/jakommo/events{/privacy}","received_events_url":"https://api.github.com/users/jakommo/received_events","type":"User","site_admin":false},"created_at":"2020-10-29T10:57:59Z","updated_at":"2020-10-29T10:57:59Z","author_association":"CONTRIBUTOR","body":"Thanks for the background @jasontedor. Still not sure I understand what the correct approach would be then?\r\n\r\nAre you saying this should only be used for custom databases but not to \"update\" to a more recent MaxMind DB? \r\nI created this after helping a user that wanted to update the `GeoLite2-City.mmdb` to get more recent IP data, without updating Elasticsearch. \r\n\r\nIf we fail this on purpose for the reasons you outlined, then I think we should mention it in the docs, because currently they suggest that `GeoLite2-City.mmdb` is the default value for `database_file` in the config dir. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/718736201","html_url":"https://github.com/elastic/elasticsearch/issues/64203#issuecomment-718736201","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/64203","id":718736201,"node_id":"MDEyOklzc3VlQ29tbWVudDcxODczNjIwMQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2020-10-29T12:59:42Z","updated_at":"2020-10-29T12:59:42Z","author_association":"MEMBER","body":"@jakommo I think a user could \"update\" these databases by treating them as custom, namely giving them a name that distinguishes them from the built-in databases such as `GeoLite2-2020-10-29-City.mmdb` and then referring to them in the processor definition:\r\n\r\n```\r\n    ...\r\n    {\r\n      \"geoip\": {\r\n        \"field\": ...\r\n        \"database_file\": \"GeoLite2-2020-10-29-City.mmdb\",\r\n        ...\r\n      }\r\n    }\r\n    ...\r\n```\r\n\r\nNote that the extension must be `-(City|Country|ASN).mmdb`.\r\n\r\nI opened #64340.","performed_via_github_app":null}]