[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/336669851","html_url":"https://github.com/elastic/elasticsearch/issues/26943#issuecomment-336669851","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26943","id":336669851,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNjY2OTg1MQ==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2017-10-14T21:50:08Z","updated_at":"2017-10-14T21:50:08Z","author_association":"MEMBER","body":"@xzer I tried to reproduce this, but without any luck. Can you elaborate on perhaps the type of data (an example document and mapping would be great) and query/aggregations that you are running?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/340392410","html_url":"https://github.com/elastic/elasticsearch/issues/26943#issuecomment-340392410","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26943","id":340392410,"node_id":"MDEyOklzc3VlQ29tbWVudDM0MDM5MjQxMA==","user":{"login":"liud","id":1195329,"node_id":"MDQ6VXNlcjExOTUzMjk=","avatar_url":"https://avatars1.githubusercontent.com/u/1195329?v=4","gravatar_id":"","url":"https://api.github.com/users/liud","html_url":"https://github.com/liud","followers_url":"https://api.github.com/users/liud/followers","following_url":"https://api.github.com/users/liud/following{/other_user}","gists_url":"https://api.github.com/users/liud/gists{/gist_id}","starred_url":"https://api.github.com/users/liud/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liud/subscriptions","organizations_url":"https://api.github.com/users/liud/orgs","repos_url":"https://api.github.com/users/liud/repos","events_url":"https://api.github.com/users/liud/events{/privacy}","received_events_url":"https://api.github.com/users/liud/received_events","type":"User","site_admin":false},"created_at":"2017-10-30T09:42:02Z","updated_at":"2017-10-30T09:42:02Z","author_association":"NONE","body":"I met the same issue, please help.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/340490698","html_url":"https://github.com/elastic/elasticsearch/issues/26943#issuecomment-340490698","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26943","id":340490698,"node_id":"MDEyOklzc3VlQ29tbWVudDM0MDQ5MDY5OA==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2017-10-30T15:56:59Z","updated_at":"2017-10-30T15:56:59Z","author_association":"MEMBER","body":"@liud I'm still hoping for a better reproduction of this, do you have a working reproduction?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/340648176","html_url":"https://github.com/elastic/elasticsearch/issues/26943#issuecomment-340648176","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26943","id":340648176,"node_id":"MDEyOklzc3VlQ29tbWVudDM0MDY0ODE3Ng==","user":{"login":"liud","id":1195329,"node_id":"MDQ6VXNlcjExOTUzMjk=","avatar_url":"https://avatars1.githubusercontent.com/u/1195329?v=4","gravatar_id":"","url":"https://api.github.com/users/liud","html_url":"https://github.com/liud","followers_url":"https://api.github.com/users/liud/followers","following_url":"https://api.github.com/users/liud/following{/other_user}","gists_url":"https://api.github.com/users/liud/gists{/gist_id}","starred_url":"https://api.github.com/users/liud/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liud/subscriptions","organizations_url":"https://api.github.com/users/liud/orgs","repos_url":"https://api.github.com/users/liud/repos","events_url":"https://api.github.com/users/liud/events{/privacy}","received_events_url":"https://api.github.com/users/liud/received_events","type":"User","site_admin":false},"created_at":"2017-10-31T03:17:50Z","updated_at":"2017-10-31T03:25:28Z","author_association":"NONE","body":"@dakrone \r\n\r\nDescribe the feature:\r\nelasticsearch-5.6.1\r\nelasticsearch plugins : readonlyrest\r\nkibana-5.6.1\r\nlinux x86_64 2.6.32.43\r\njvm 1.8.0_144\r\n\r\nThere were no other query requests when I started kibana, and found estimated_size only increases\r\nI crawlled the http packet sent from kibana\r\n\r\n\r\nHEAD / HTTP/1.1\r\nAuthorization: Basic a2liYW5hOnRlc3Rfa2liYW5h\r\nHost: 10.133.8.72:8200\r\nContent-Length: 0\r\nConnection: keep-alive\r\n\r\nHTTP/1.1 200 OK\r\nx-ror-kibana_access: rw\r\nx-ror-available-groups: kibana_base\r\nX-RR-User: kibana\r\ncontent-type: application/json; charset=UTF-8\r\ncontent-length: 362\r\n\r\nGET /_nodes?filter_path=nodes.*.version%2Cnodes.*.http.publish_address%2Cnodes.*.ip HTTP/1.1\r\nAuthorization: Basic a2liYW5hOnRlc3Rfa2liYW5h\r\nHost: 10.133.8.72:8200\r\nContent-Length: 0\r\nConnection: keep-alive\r\n\r\nHTTP/1.1 200 OK\r\nx-ror-kibana_access: rw\r\nx-ror-available-groups: kibana_base\r\nX-RR-User: kibana\r\ncontent-type: application/json; charset=UTF-8\r\ncontent-length: 121\r\n\r\n{\"nodes\":{\"zfJglW84TbmHwld2BeJ0dw\":{\"ip\":\"10.133.8.72\",\"version\":\"5.6.1\",\"http\":{\"publish_address\":\"10.133.8.72:8200\"}}}}GET /_nodes/_local?filter_path=nodes.*.settings.tribe HTTP/1.1\r\nAuthorization: Basic a2liYW5hOnRlc3Rfa2liYW5h\r\nHost: 10.133.8.72:8200\r\nContent-Length: 0\r\nConnection: keep-alive\r\n\r\nHTTP/1.1 200 OK\r\nx-ror-kibana_access: rw\r\nx-ror-available-groups: kibana_base\r\nX-RR-User: kibana\r\ncontent-type: application/json; charset=UTF-8\r\ncontent-length: 2\r\n\r\n{}POST /_mget HTTP/1.1\r\nAuthorization: Basic a2liYW5hOnRlc3Rfa2liYW5h\r\ncontent-type: application/json\r\nHost: 10.133.8.72:8200\r\nContent-Length: 62\r\nConnection: keep-alive\r\n\r\n{\"docs\":[{\"_index\":\".kibana\",\"_type\":\"config\",\"_id\":\"5.6.1\"}]}HTTP/1.1 200 OK\r\nx-ror-kibana_access: rw\r\nx-ror-available-groups: kibana_base\r\nX-RR-User: kibana\r\ncontent-type: application/json; charset=UTF-8\r\ncontent-length: 155\r\n\r\n{\"docs\":[{\"_index\":\".kibana\",\"_type\":\"config\",\"_id\":\"5.6.1\",\"_version\":2,\"found\":true,\"_source\":{\"buildNum\":15533,\"defaultIndex\":\"AV9SX9txRDfVRTQGun0h\"}}]}GET /_cluster/health/.kibana?timeout=5s HTTP/1.1\r\nAuthorization: Basic a2liYW5hOnRlc3Rfa2liYW5h\r\nHost: 10.133.8.72:8200\r\nContent-Length: 0\r\nConnection: keep-alive\r\n\r\nHTTP/1.1 200 OK\r\nx-ror-kibana_access: rw\r\nx-ror-available-groups: kibana_base\r\nX-RR-User: kibana\r\ncontent-type: application/json; charset=UTF-8\r\ncontent-length: 397\r\n\r\n{\"cluster_name\":\"es5-qdcc-test-cluster\",\"status\":\"yellow\",\"timed_out\":false,\"number_of_nodes\":1,\"number_of_data_nodes\":1,\"active_primary_shards\":1,\"active_shards\":1,\"relocating_shards\":0,\"initializing_shards\":0,\"unassigned_shards\":1,\"delayed_unassigned_shards\":0,\"number_of_pending_tasks\":0,\"number_of_in_flight_fetch\":0,\"task_max_waiting_in_queue_millis\":0,\"active_shards_percent_as_number\":50.0}GET /.kibana/_mappings HTTP/1.1\r\nAuthorization: Basic a2liYW5hOnRlc3Rfa2liYW5h\r\nHost: 10.133.8.72:8200\r\nContent-Length: 0\r\nConnection: keep-alive\r\n\r\nHTTP/1.1 200 OK\r\nx-ror-kibana_access: rw\r\nx-ror-available-groups: kibana_base\r\nX-RR-User: kibana\r\ncontent-type: application/json; charset=UTF-8\r\ncontent-length: 2394\r\n\r\n{\".kibana\":{\"mappings\":{\"url\":{\"dynamic\":\"strict\",\"properties\":{\"accessCount\":{\"type\":\"long\"},\"accessDate\":{\"type\":\"date\"},\"createDate\":{\"type\":\"date\"},\"url\":{\"type\":\"text\",\"fields\":{\"keyword\":{\"type\":\"keyword\",\"ignore_above\":2048}}}}},\"timelion-sheet\":{\"dynamic\":\"strict\",\"properties\":{\"description\":{\"type\":\"text\"},\"hits\":{\"type\":\"integer\"},\"kibanaSavedObjectMeta\":{\"properties\":{\"searchSourceJSON\":{\"type\":\"text\"}}},\"timelion_chart_height\":{\"type\":\"integer\"},\"timelion_columns\":{\"type\":\"integer\"},\"timelion_interval\":{\"type\":\"keyword\"},\"timelion_other_interval\":{\"type\":\"keyword\"},\"timelion_rows\":{\"type\":\"integer\"},\"timelion_sheet\":{\"type\":\"text\"},\"title\":{\"type\":\"text\"},\"version\":{\"type\":\"integer\"}}},\"_default_\":{\"dynamic\":\"strict\"},\"config\":{\"dynamic\":\"true\",\"properties\":{\"buildNum\":{\"type\":\"keyword\"},\"defaultIndex\":{\"type\":\"text\",\"fields\":{\"keyword\":{\"type\":\"keyword\",\"ignore_above\":256}}}}},\"search\":{\"dynamic\":\"strict\",\"properties\":{\"columns\":{\"type\":\"keyword\"},\"description\":{\"type\":\"text\"},\"hits\":{\"type\":\"integer\"},\"kibanaSavedObjectMeta\":{\"properties\":{\"searchSourceJSON\":{\"type\":\"text\"}}},\"sort\":{\"type\":\"keyword\"},\"title\":{\"type\":\"text\"},\"version\":{\"type\":\"integer\"}}},\"visualization\":{\"dynamic\":\"strict\",\"properties\":{\"description\":{\"type\":\"text\"},\"kibanaSavedObjectMeta\":{\"properties\":{\"searchSourceJSON\":{\"type\":\"text\"}}},\"savedSearchId\":{\"type\":\"keyword\"},\"title\":{\"type\":\"text\"},\"uiStateJSON\":{\"type\":\"text\"},\"version\":{\"type\":\"integer\"},\"visState\":{\"type\":\"text\"}}},\"dashboard\":{\"dynamic\":\"strict\",\"properties\":{\"description\":{\"type\":\"text\"},\"hits\":{\"type\":\"integer\"},\"kibanaSavedObjectMeta\":{\"properties\":{\"searchSourceJSON\":{\"type\":\"text\"}}},\"optionsJSON\":{\"type\":\"text\"},\"panelsJSON\":{\"type\":\"text\"},\"refreshInterval\":{\"properties\":{\"display\":{\"type\":\"keyword\"},\"pause\":{\"type\":\"boolean\"},\"section\":{\"type\":\"integer\"},\"value\":{\"type\":\"integer\"}}},\"timeFrom\":{\"type\":\"keyword\"},\"timeRestore\":{\"type\":\"boolean\"},\"timeTo\":{\"type\":\"keyword\"},\"title\":{\"type\":\"text\"},\"uiStateJSON\":{\"type\":\"text\"},\"version\":{\"type\":\"integer\"}}},\"index-pattern\":{\"dynamic\":\"strict\",\"properties\":{\"fieldFormatMap\":{\"type\":\"text\"},\"fields\":{\"type\":\"text\"},\"intervalName\":{\"type\":\"keyword\"},\"notExpandable\":{\"type\":\"boolean\"},\"sourceFilters\":{\"type\":\"text\"},\"timeFieldName\":{\"type\":\"keyword\"},\"title\":{\"type\":\"text\"}}},\"server\":{\"dynamic\":\"strict\",\"properties\":{\"uuid\":{\"type\":\"keyword\"}}}}}}POST /.kibana/_search?size=1000&from=0 HTTP/1.1\r\nAuthorization: Basic a2liYW5hOnRlc3Rfa2liYW5h\r\ncontent-type: application/json\r\nHost: 10.133.8.72:8200\r\nContent-Length: 277\r\nConnection: keep-alive\r\n\r\n{\"version\":true,\"query\":{\"bool\":{\"must\":[{\"match_all\":{}}],\"filter\":[{\"bool\":{\"should\":[{\"term\":{\"_type\":\"config\"}},{\"term\":{\"type\":\"config\"}}]}}]}},\"sort\":[{\"buildNum\":{\"order\":\"desc\",\"unmapped_type\":\"keyword\"}},{\"config.buildNum\":{\"order\":\"desc\",\"unmapped_type\":\"keyword\"}}]}HTTP/1.1 200 OK\r\nx-ror-kibana_access: rw\r\nx-ror-available-groups: kibana_base\r\nX-RR-User: kibana\r\ncontent-type: application/json; charset=UTF-8\r\ncontent-length: 301\r\n\r\n{\"took\":1,\"timed_out\":false,\"_shards\":{\"total\":1,\"successful\":1,\"skipped\":0,\"failed\":0},\"hits\":{\"total\":1,\"max_score\":null,\"hits\":[{\"_index\":\".kibana\",\"_type\":\"config\",\"_id\":\"5.6.1\",\"_version\":2,\"_score\":null,\"_source\":{\"buildNum\":15533,\"defaultIndex\":\"AV9SX9txRDfVRTQGun0h\"},\"sort\":[\"15533\",null]}]}}HEAD / HTTP/1.1\r\nAuthorization: Basic a2liYW5hOnRlc3Rfa2liYW5h\r\nHost: 10.133.8.72:8200\r\nContent-Length: 0\r\nConnection: keep-alive\r\n\r\nHTTP/1.1 200 OK\r\nx-ror-kibana_access: rw\r\nx-ror-available-groups: kibana_base\r\nX-RR-User: kibana\r\ncontent-type: application/json; charset=UTF-8\r\ncontent-length: 362\r\n\r\nGET /_nodes?filter_path=nodes.*.version%2Cnodes.*.http.publish_address%2Cnodes.*.ip HTTP/1.1\r\nAuthorization: Basic a2liYW5hOnRlc3Rfa2liYW5h\r\nHost: 10.133.8.72:8200\r\nContent-Length: 0\r\nConnection: keep-alive\r\n\r\nHTTP/1.1 200 OK\r\nx-ror-kibana_access: rw\r\nx-ror-available-groups: kibana_base\r\nX-RR-User: kibana\r\ncontent-type: application/json; charset=UTF-8\r\ncontent-length: 121\r\n\r\n{\"nodes\":{\"zfJglW84TbmHwld2BeJ0dw\":{\"ip\":\"10.133.8.72\",\"version\":\"5.6.1\",\"http\":{\"publish_address\":\"10.133.8.72:8200\"}}}}GET /_nodes/_local?filter_path=nodes.*.settings.tribe HTTP/1.1\r\nAuthorization: Basic a2liYW5hOnRlc3Rfa2liYW5h\r\nHost: 10.133.8.72:8200\r\nContent-Length: 0\r\nConnection: keep-alive\r\n\r\nHTTP/1.1 200 OK\r\nx-ror-kibana_access: rw\r\nx-ror-available-groups: kibana_base\r\nX-RR-User: kibana\r\ncontent-type: application/json; charset=UTF-8\r\ncontent-length: 2\r\n\r\n{}POST /_mget HTTP/1.1\r\nAuthorization: Basic a2liYW5hOnRlc3Rfa2liYW5h\r\ncontent-type: application/json\r\nHost: 10.133.8.72:8200\r\nContent-Length: 62\r\nConnection: keep-alive\r\n\r\n{\"docs\":[{\"_index\":\".kibana\",\"_type\":\"config\",\"_id\":\"5.6.1\"}]}HTTP/1.1 200 OK\r\nx-ror-kibana_access: rw\r\nx-ror-available-groups: kibana_base\r\nX-RR-User: kibana\r\ncontent-type: application/json; charset=UTF-8\r\ncontent-length: 155\r\n\r\n{\"docs\":[{\"_index\":\".kibana\",\"_type\":\"config\",\"_id\":\"5.6.1\",\"_version\":2,\"found\":true,\"_source\":{\"buildNum\":15533,\"defaultIndex\":\"AV9SX9txRDfVRTQGun0h\"}}]}GET /_cluster/health/.kibana?timeout=5s HTTP/1.1\r\nAuthorization: Basic a2liYW5hOnRlc3Rfa2liYW5h\r\nHost: 10.133.8.72:8200\r\nContent-Length: 0\r\nConnection: keep-alive\r\n\r\nHTTP/1.1 200 OK\r\nx-ror-kibana_access: rw\r\nx-ror-available-groups: kibana_base\r\nX-RR-User: kibana\r\ncontent-type: application/json; charset=UTF-8\r\ncontent-length: 397\r\n\r\n{\"cluster_name\":\"es5-qdcc-test-cluster\",\"status\":\"yellow\",\"timed_out\":false,\"number_of_nodes\":1,\"number_of_data_nodes\":1,\"active_primary_shards\":1,\"active_shards\":1,\"relocating_shards\":0,\"initializing_shards\":0,\"unassigned_shards\":1,\"delayed_unassigned_shards\":0,\"number_of_pending_tasks\":0,\"number_of_in_flight_fetch\":0,\"task_max_waiting_in_queue_millis\":0,\"active_shards_percent_as_number\":50.0}GET /.kibana/_mappings HTTP/1.1\r\nAuthorization: Basic a2liYW5hOnRlc3Rfa2liYW5h\r\nHost: 10.133.8.72:8200\r\nContent-Length: 0\r\nConnection: keep-alive\r\n\r\nHTTP/1.1 200 OK\r\nx-ror-kibana_access: rw\r\nx-ror-available-groups: kibana_base\r\nX-RR-User: kibana\r\ncontent-type: application/json; charset=UTF-8\r\ncontent-length: 2394\r\n\r\n{\".kibana\":{\"mappings\":{\"url\":{\"dynamic\":\"strict\",\"properties\":{\"accessCount\":{\"type\":\"long\"},\"accessDate\":{\"type\":\"date\"},\"createDate\":{\"type\":\"date\"},\"url\":{\"type\":\"text\",\"fields\":{\"keyword\":{\"type\":\"keyword\",\"ignore_above\":2048}}}}},\"timelion-sheet\":{\"dynamic\":\"strict\",\"properties\":{\"description\":{\"type\":\"text\"},\"hits\":{\"type\":\"integer\"},\"kibanaSavedObjectMeta\":{\"properties\":{\"searchSourceJSON\":{\"type\":\"text\"}}},\"timelion_chart_height\":{\"type\":\"integer\"},\"timelion_columns\":{\"type\":\"integer\"},\"timelion_interval\":{\"type\":\"keyword\"},\"timelion_other_interval\":{\"type\":\"keyword\"},\"timelion_rows\":{\"type\":\"integer\"},\"timelion_sheet\":{\"type\":\"text\"},\"title\":{\"type\":\"text\"},\"version\":{\"type\":\"integer\"}}},\"_default_\":{\"dynamic\":\"strict\"},\"config\":{\"dynamic\":\"true\",\"properties\":{\"buildNum\":{\"type\":\"keyword\"},\"defaultIndex\":{\"type\":\"text\",\"fields\":{\"keyword\":{\"type\":\"keyword\",\"ignore_above\":256}}}}},\"search\":{\"dynamic\":\"strict\",\"properties\":{\"columns\":{\"type\":\"keyword\"},\"description\":{\"type\":\"text\"},\"hits\":{\"type\":\"integer\"},\"kibanaSavedObjectMeta\":{\"properties\":{\"searchSourceJSON\":{\"type\":\"text\"}}},\"sort\":{\"type\":\"keyword\"},\"title\":{\"type\":\"text\"},\"version\":{\"type\":\"integer\"}}},\"visualization\":{\"dynamic\":\"strict\",\"properties\":{\"description\":{\"type\":\"text\"},\"kibanaSavedObjectMeta\":{\"properties\":{\"searchSourceJSON\":{\"type\":\"text\"}}},\"savedSearchId\":{\"type\":\"keyword\"},\"title\":{\"type\":\"text\"},\"uiStateJSON\":{\"type\":\"text\"},\"version\":{\"type\":\"integer\"},\"visState\":{\"type\":\"text\"}}},\"dashboard\":{\"dynamic\":\"strict\",\"properties\":{\"description\":{\"type\":\"text\"},\"hits\":{\"type\":\"integer\"},\"kibanaSavedObjectMeta\":{\"properties\":{\"searchSourceJSON\":{\"type\":\"text\"}}},\"optionsJSON\":{\"type\":\"text\"},\"panelsJSON\":{\"type\":\"text\"},\"refreshInterval\":{\"properties\":{\"display\":{\"type\":\"keyword\"},\"pause\":{\"type\":\"boolean\"},\"section\":{\"type\":\"integer\"},\"value\":{\"type\":\"integer\"}}},\"timeFrom\":{\"type\":\"keyword\"},\"timeRestore\":{\"type\":\"boolean\"},\"timeTo\":{\"type\":\"keyword\"},\"title\":{\"type\":\"text\"},\"uiStateJSON\":{\"type\":\"text\"},\"version\":{\"type\":\"integer\"}}},\"index-pattern\":{\"dynamic\":\"strict\",\"properties\":{\"fieldFormatMap\":{\"type\":\"text\"},\"fields\":{\"type\":\"text\"},\"intervalName\":{\"type\":\"keyword\"},\"notExpandable\":{\"type\":\"boolean\"},\"sourceFilters\":{\"type\":\"text\"},\"timeFieldName\":{\"type\":\"keyword\"},\"title\":{\"type\":\"text\"}}},\"server\":{\"dynamic\":\"strict\",\"properties\":{\"uuid\":{\"type\":\"keyword\"}}}}}}POST /.kibana/_search?size=1000&from=0 HTTP/1.1\r\nAuthorization: Basic a2liYW5hOnRlc3Rfa2liYW5h\r\ncontent-type: application/json\r\nHost: 10.133.8.72:8200\r\nContent-Length: 277\r\nConnection: keep-alive\r\n\r\n{\"version\":true,\"query\":{\"bool\":{\"must\":[{\"match_all\":{}}],\"filter\":[{\"bool\":{\"should\":[{\"term\":{\"_type\":\"config\"}},{\"term\":{\"type\":\"config\"}}]}}]}},\"sort\":[{\"buildNum\":{\"order\":\"desc\",\"unmapped_type\":\"keyword\"}},{\"config.buildNum\":{\"order\":\"desc\",\"unmapped_type\":\"keyword\"}}]}HTTP/1.1 200 OK\r\nx-ror-kibana_access: rw\r\nx-ror-available-groups: kibana_base\r\nX-RR-User: kibana\r\ncontent-type: application/json; charset=UTF-8\r\ncontent-length: 301\r\n\r\n\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/340648193","html_url":"https://github.com/elastic/elasticsearch/issues/26943#issuecomment-340648193","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26943","id":340648193,"node_id":"MDEyOklzc3VlQ29tbWVudDM0MDY0ODE5Mw==","user":{"login":"liud","id":1195329,"node_id":"MDQ6VXNlcjExOTUzMjk=","avatar_url":"https://avatars1.githubusercontent.com/u/1195329?v=4","gravatar_id":"","url":"https://api.github.com/users/liud","html_url":"https://github.com/liud","followers_url":"https://api.github.com/users/liud/followers","following_url":"https://api.github.com/users/liud/following{/other_user}","gists_url":"https://api.github.com/users/liud/gists{/gist_id}","starred_url":"https://api.github.com/users/liud/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liud/subscriptions","organizations_url":"https://api.github.com/users/liud/orgs","repos_url":"https://api.github.com/users/liud/repos","events_url":"https://api.github.com/users/liud/events{/privacy}","received_events_url":"https://api.github.com/users/liud/received_events","type":"User","site_admin":false},"created_at":"2017-10-31T03:17:58Z","updated_at":"2017-10-31T03:17:58Z","author_association":"NONE","body":"ES log\r\n\r\n[2017-10-30T19:54:47,167][INFO ][o.e.p.r.a.ACL            ] ^[[36mALLOWED by '{ block=kibana_base, match=true }' req={ ID:2016606753-1505744276#2982213, TYP:MainRequest, CGR:N/A, USR:kibana, BRS:false, ACT:cluster:monitor/\r\nmain, OA:10.133.8.72, IDX:<N/A>, MET:HEAD, PTH:/, CNT:<N/A>, HDR:Authorization,Connection,Content-Length,Host, HIS:[admin->[groups->false]], [spark_base->[groups->false]], [read_svr->[groups->false]], [write_svr->[groups->\r\nfalse]], [kibana_base->[kibana_access->true, indices->true, auth_key_sha1->true]] } ^[[0m\r\n[2017-10-30T19:54:47,168][INFO ][o.e.p.r.a.ACL            ] ^[[36mALLOWED by '{ block=kibana_base, match=true }' req={ ID:986856368-1194762014#2982214, TYP:NodesInfoRequest, CGR:N/A, USR:kibana, BRS:false, ACT:cluster:moni\r\ntor/nodes/info, OA:10.133.8.72, IDX:<N/A>, MET:GET, PTH:/_nodes?filter_path=nodes.*.version%2Cnodes.*.http.publish_address%2Cnodes.*.ip, CNT:<N/A>, HDR:Authorization,Connection,Content-Length,Host, HIS:[admin->[groups->fal\r\nse]], [read_svr->[groups->false]], [spark_base->[groups->false]], [kibana_base->[kibana_access->true, indices->true, auth_key_sha1->true]], [write_svr->[groups->false]] } ^[[0m\r\n[2017-10-30T19:54:47,170][INFO ][o.e.p.r.a.ACL            ] ^[[36mALLOWED by '{ block=kibana_base, match=true }' req={ ID:766038084-1060559657#2982216, TYP:NodesInfoRequest, CGR:N/A, USR:kibana, BRS:false, ACT:cluster:moni\r\ntor/nodes/info, OA:10.133.8.72, IDX:<N/A>, MET:GET, PTH:/_nodes/_local?filter_path=nodes.*.settings.tribe, CNT:<N/A>, HDR:Authorization,Connection,Content-Length,Host, HIS:[kibana_base->[kibana_access->true, indices->true,\r\n auth_key_sha1->true]], [write_svr->[groups->false]], [admin->[groups->false]], [spark_base->[groups->false]], [read_svr->[groups->false]] } ^[[0m\r\n[2017-10-30T19:54:47,172][INFO ][o.e.p.r.a.ACL            ] ^[[36mALLOWED by '{ block=kibana_base, match=true }' req={ ID:1252873296-58776014#2982218, TYP:MultiGetRequest, CGR:N/A, USR:kibana, BRS:false, ACT:indices:data/r\r\nead/mget, OA:10.133.8.72, IDX:.kibana, MET:POST, PTH:/_mget, CNT:<OMITTED, LENGTH=62>, HDR:Authorization,Connection,Content-Length,content-type,Host, HIS:[admin->[groups->false]], [spark_base->[groups->false]], [kibana_bas\r\ne->[kibana_access->true, indices->true, auth_key_sha1->true]], [read_svr->[groups->false]], [write_svr->[groups->false]] } ^[[0m\r\n[2017-10-30T19:54:47,172][INFO ][o.e.p.r.a.ACL            ] ^[[36mALLOWED by '{ block=kibana_base, match=true }' req={ ID:1252873296-1685101926#2982219, TYP:MultiGetShardRequest, CGR:N/A, USR:kibana, BRS:false, ACT:indices\r\n:data/read/mget[shard], OA:10.133.8.72, IDX:.kibana, MET:POST, PTH:/_mget, CNT:<OMITTED, LENGTH=62>, HDR:Authorization,Connection,Content-Length,content-type,Host, HIS:[write_svr->[groups->false]], [admin->[groups->false]]\r\n, [read_svr->[groups->false]], [kibana_base->[kibana_access->true, indices->true, auth_key_sha1->true]], [spark_base->[groups->false]] } ^[[0m\r\n[2017-10-30T19:54:47,174][INFO ][o.e.p.r.a.ACL            ] ^[[36mALLOWED by '{ block=kibana_base, match=true }' req={ ID:162489314-75288848#2982221, TYP:ClusterHealthRequest, CGR:N/A, USR:kibana, BRS:false, ACT:cluster:mo\r\nnitor/health, OA:10.133.8.72, IDX:.kibana, MET:GET, PTH:/_cluster/health/.kibana?timeout=5s, CNT:<N/A>, HDR:Authorization,Connection,Content-Length,Host, HIS:[spark_base->[groups->false]], [kibana_base->[kibana_access->tru\r\ne, indices->true, auth_key_sha1->true]], [admin->[groups->false]], [write_svr->[groups->false]], [read_svr->[groups->false]] } ^[[0m\r\n[2017-10-30T19:54:47,175][INFO ][o.e.p.r.a.ACL            ] ^[[36mALLOWED by '{ block=kibana_base, match=true }' req={ ID:1280699424-1859389884#2982222, TYP:GetIndexRequest, CGR:N/A, USR:kibana, BRS:false, ACT:indices:admi\r\nn/get, OA:10.133.8.72, IDX:.kibana, MET:GET, PTH:/.kibana/_mappings, CNT:<N/A>, HDR:Authorization,Connection,Content-Length,Host, HIS:[write_svr->[groups->false]], [admin->[groups->false]], [read_svr->[groups->false]], [ki\r\nbana_base->[kibana_access->true, indices->true, auth_key_sha1->true]], [spark_base->[groups->false]] } ^[[0m\r\n[2017-10-30T19:54:47,177][INFO ][o.e.p.r.a.ACL            ] ^[[36mALLOWED by '{ block=kibana_base, match=true }' req={ ID:425378103--189071578#2982223, TYP:SearchRequest, CGR:N/A, USR:kibana, BRS:false, ACT:indices:data/re\r\nad/search, OA:10.133.8.72, IDX:.kibana, MET:POST, PTH:/.kibana/_search?size=1000&from=0, CNT:<OMITTED, LENGTH=277>, HDR:Authorization,Connection,Content-Length,content-type,Host, HIS:[admin->[groups->false]], [kibana_base-\r\n>[kibana_access->true, indices->true, auth_key_sha1->true]], [read_svr->[groups->false]], [spark_base->[groups->false]], [write_svr->[groups->false]] } ^[[0m\r\n[2017-10-30T19:54:47,179][INFO ][o.e.p.r.a.ACL            ] ^[[35mFORBIDDEN by default req={ ID:1919140401-1104816419#2982225, TYP:ClusterStateRequest, CGR:N/A, USR:kibana(?), BRS:false, ACT:cluster:monitor/state, OA:10.13\r\n3.8.72, IDX:, MET:GET, PTH:/_cluster/settings?include_defaults=true&filter_path=**.script.engine.*.inline, CNT:<N/A>, HDR:Authorization,Connection,Content-Length,Host, HIS:[kibana_base->[kibana_access->false, auth_key_sha1\r\n->true]], [head->[auth_key_sha1->false]], [admin->[groups->false]], [write_svr->[groups->false]], [spark_base->[groups->false]], [read_svr->[groups->false]] } ^[[0m","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/345584216","html_url":"https://github.com/elastic/elasticsearch/issues/26943#issuecomment-345584216","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26943","id":345584216,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTU4NDIxNg==","user":{"login":"xzer","id":1311634,"node_id":"MDQ6VXNlcjEzMTE2MzQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1311634?v=4","gravatar_id":"","url":"https://api.github.com/users/xzer","html_url":"https://github.com/xzer","followers_url":"https://api.github.com/users/xzer/followers","following_url":"https://api.github.com/users/xzer/following{/other_user}","gists_url":"https://api.github.com/users/xzer/gists{/gist_id}","starred_url":"https://api.github.com/users/xzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xzer/subscriptions","organizations_url":"https://api.github.com/users/xzer/orgs","repos_url":"https://api.github.com/users/xzer/repos","events_url":"https://api.github.com/users/xzer/events{/privacy}","received_events_url":"https://api.github.com/users/xzer/received_events","type":"User","site_admin":false},"created_at":"2017-11-20T03:47:11Z","updated_at":"2017-11-20T03:47:11Z","author_association":"NONE","body":"@dakrone I am sorry for reply so late, because I was being concentrated on our production release in last month.\r\n\r\nAt first, I have to apologize that we finally found that the breaker count leak is caused by a plugin which is created by other team for some special aggregation process.\r\n\r\nAnd still, I have question for the request limit break, as I described in my initial description, according tot he document, the request limit breaker should be counted per request, but we found it is calculated based on a global counter, which is obviously not per request. So is the document wrong or the implementation size? ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/347262812","html_url":"https://github.com/elastic/elasticsearch/issues/26943#issuecomment-347262812","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26943","id":347262812,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzI2MjgxMg==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2017-11-27T17:41:31Z","updated_at":"2017-11-27T17:41:31Z","author_association":"MEMBER","body":"@xzer the request breaker is a global breaker for *all* requests in the system, so the bytes are counted for a particular request, but the limit is global.\r\n\r\nGoing to close this now since it was caused by a plugin.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/347384822","html_url":"https://github.com/elastic/elasticsearch/issues/26943#issuecomment-347384822","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26943","id":347384822,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzM4NDgyMg==","user":{"login":"xzer","id":1311634,"node_id":"MDQ6VXNlcjEzMTE2MzQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1311634?v=4","gravatar_id":"","url":"https://api.github.com/users/xzer","html_url":"https://github.com/xzer","followers_url":"https://api.github.com/users/xzer/followers","following_url":"https://api.github.com/users/xzer/following{/other_user}","gists_url":"https://api.github.com/users/xzer/gists{/gist_id}","starred_url":"https://api.github.com/users/xzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xzer/subscriptions","organizations_url":"https://api.github.com/users/xzer/orgs","repos_url":"https://api.github.com/users/xzer/repos","events_url":"https://api.github.com/users/xzer/events{/privacy}","received_events_url":"https://api.github.com/users/xzer/received_events","type":"User","site_admin":false},"created_at":"2017-11-28T01:34:05Z","updated_at":"2017-11-28T01:40:05Z","author_association":"NONE","body":"@dakrone according to the official document as following, we understood that it means the breaker is per-request, not in global. So I believe the document need to be modified to clarify how the breaker is working.\r\n\r\n> **Request circuit breakeredit**\r\n> The request circuit breaker allows Elasticsearch to prevent per-request data structures (for example, memory used for calculating aggregations during a request) from exceeding a certain amount of memory.\r\n> \r\n> indices.breaker.request.limit\r\n> 　　Limit for request breaker, defaults to 60% of JVM heap\r\n> indices.breaker.request.overhead\r\n> 　　A constant that all request estimations are multiplied with to determine a final estimation. Defaults to 1\r\n>\r\n>\r\n> **In flight requests circuit breakeredit**\r\n> The in flight requests circuit breaker allows Elasticsearch to limit the memory usage of all currently active incoming requests on transport or HTTP level from exceeding a certain amount of memory on a node. The memory usage is based on the content length of the request itself.\r\n> \r\n> network.breaker.inflight_requests.limit\r\n> 　　Limit for in flight requests breaker, defaults to 100% of JVM heap. This means that it is bound by the limit configured for the parent circuit breaker.\r\n> network.breaker.inflight_requests.overhead\r\n> 　　A constant that all in flight requests estimations are multiplied with to determine a final estimation. Defaults to 1\r\n\r\nAnd also, what's different between the \"indices.breaker.request.limit\" and \"network.breaker.inflight_requests.limit\"? According to the source, both are same counted globally.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/347395886","html_url":"https://github.com/elastic/elasticsearch/issues/26943#issuecomment-347395886","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26943","id":347395886,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzM5NTg4Ng==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2017-11-28T02:42:13Z","updated_at":"2017-11-28T02:42:13Z","author_association":"MEMBER","body":"@xzer for the difference between the request and inflight_request breakers, I'm adding a bit more info about them here: https://github.com/elastic/elasticsearch/pull/27116/files#diff-c35a409b177f40a4be365a147eefa2f9R45\r\n\r\nFor what I meant for \"per-request\" versus \"global\", I mean the 60% limit is global, and each request increments the amount, so let's say you have 3 concurrent requests, using 10%, 8%, and 5%, so globally it's 23% usage, even though the actual \"use\" is per-request (meaning it's released when the request is finished).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/347397247","html_url":"https://github.com/elastic/elasticsearch/issues/26943#issuecomment-347397247","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26943","id":347397247,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzM5NzI0Nw==","user":{"login":"xzer","id":1311634,"node_id":"MDQ6VXNlcjEzMTE2MzQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1311634?v=4","gravatar_id":"","url":"https://api.github.com/users/xzer","html_url":"https://github.com/xzer","followers_url":"https://api.github.com/users/xzer/followers","following_url":"https://api.github.com/users/xzer/following{/other_user}","gists_url":"https://api.github.com/users/xzer/gists{/gist_id}","starred_url":"https://api.github.com/users/xzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xzer/subscriptions","organizations_url":"https://api.github.com/users/xzer/orgs","repos_url":"https://api.github.com/users/xzer/repos","events_url":"https://api.github.com/users/xzer/events{/privacy}","received_events_url":"https://api.github.com/users/xzer/received_events","type":"User","site_admin":false},"created_at":"2017-11-28T02:50:55Z","updated_at":"2017-11-28T02:50:55Z","author_association":"NONE","body":"@dakrone thanks for your information and now I understand the difference between them.\r\n\r\nBut I still wish the document to be modified to explain what is per-request and what is global as you explained here. The current description is really misleading readers.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/347401754","html_url":"https://github.com/elastic/elasticsearch/issues/26943#issuecomment-347401754","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26943","id":347401754,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzQwMTc1NA==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2017-11-28T03:21:12Z","updated_at":"2017-11-28T03:21:12Z","author_association":"MEMBER","body":"Sure, I will work on a PR to explain then better, thanks for the suggestion!\n\nOn Nov 27, 2017 7:50 PM, \"xzer\" <notifications@github.com> wrote:\n\n@dakrone <https://github.com/dakrone> thanks for your information and now I\nunderstand the difference between them.\n\nBut I still wish the document to be modified to explain what is per-request\nand what is global as you explained here. The current description is really\nmisleading readers.\n\n—\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\n<https://github.com/elastic/elasticsearch/issues/26943#issuecomment-347397247>,\nor mute the thread\n<https://github.com/notifications/unsubscribe-auth/AABKdFZGhii8F6ucKMAjXiRk5IO3bVNCks5s63URgaJpZM4PzruR>\n.\n","performed_via_github_app":null}]