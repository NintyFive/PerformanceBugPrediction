{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/22446","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22446/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22446/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22446/events","html_url":"https://github.com/elastic/elasticsearch/issues/22446","id":198953726,"node_id":"MDU6SXNzdWUxOTg5NTM3MjY=","number":22446,"title":"Add Ability to Infer Index Name from Alias When Using Index Templates","user":{"login":"eladmena","id":20152625,"node_id":"MDQ6VXNlcjIwMTUyNjI1","avatar_url":"https://avatars2.githubusercontent.com/u/20152625?v=4","gravatar_id":"","url":"https://api.github.com/users/eladmena","html_url":"https://github.com/eladmena","followers_url":"https://api.github.com/users/eladmena/followers","following_url":"https://api.github.com/users/eladmena/following{/other_user}","gists_url":"https://api.github.com/users/eladmena/gists{/gist_id}","starred_url":"https://api.github.com/users/eladmena/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eladmena/subscriptions","organizations_url":"https://api.github.com/users/eladmena/orgs","repos_url":"https://api.github.com/users/eladmena/repos","events_url":"https://api.github.com/users/eladmena/events{/privacy}","received_events_url":"https://api.github.com/users/eladmena/received_events","type":"User","site_admin":false},"labels":[{"id":163824881,"node_id":"MDU6TGFiZWwxNjM4MjQ4ODE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Indices%20APIs","name":":Core/Features/Indices APIs","color":"0e8a16","default":false,"description":"APIs to create and manage indices"},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2017-01-05T13:17:28Z","updated_at":"2018-11-17T18:47:53Z","closed_at":"2017-12-11T13:24:12Z","author_association":"NONE","active_lock_reason":null,"body":"When using index templates the first creation of a document will use the index name and create alias(es) based on the template definition.\r\nI'd like to add the ability to infer the index name from one of the aliases.\r\n\r\nThis is needed when using context based indices (for example index per project id) and wanting to use aliases for all requests.\r\nOtherwise the first create of a document should be with the index name and later calls with the alias name, and if already using different behaviour for first create request and subsequent ones one can create the index on its own so index templates will not help for this case.\r\nHaving this feature allows a uniform way for accessing documents.\r\n\r\nNote by default this feature is off for any given template, unless explicitly specifying **infer_index_name_from_alias** = true in the template definition.\r\n\r\n## Usage example:\r\n```\r\nPUT /_template/template_1\r\n{\r\n  \"template\": \"project-*\",\r\n  \"settings\": {\r\n    \"number_of_shards\": 1,\r\n\t\"number_of_replicas\" : 0\r\n  },\r\n  \"mappings\": {\r\n    \"type01\": {\r\n      \"dynamic\": \"strict\",\r\n      \"properties\": {\r\n        \"field01\": {\"type\": \"text\"}\r\n      }\r\n    }\r\n  },\r\n  \"aliases\": {\r\n\t\"{index}-read\" : {},\r\n\t\"{index}-write\" : {}\r\n  },\r\n  \"infer_index_name_from_alias\" : true\r\n}\r\n```\r\nusing the **infer_index_name_from_alias** = true, it specifies that when this template matches try to infer the index name from the alias.\r\n\r\nthus when calling:\r\n```\r\nPOST /project-01-write/type01/\r\n{\r\n    \"field01\" : \"aaaaa\"\r\n}\r\n```\r\n\r\nIndex **proect-01** will be created and aliases **project01-read** & **project01-write**\r\nIf **infer_index_name_from_alias** is false or not set index name will be **project01-write** and aliases will be **project01-write-read** & **project01-write-write**.\r\n\r\nThis is already implemented, tested & documented in https://github.com/eladmena/elasticsearch\r\n\r\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}