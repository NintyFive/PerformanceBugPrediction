[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/130655230","html_url":"https://github.com/elastic/elasticsearch/issues/7758#issuecomment-130655230","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7758","id":130655230,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMDY1NTIzMA==","user":{"login":"cristiboariu","id":2500147,"node_id":"MDQ6VXNlcjI1MDAxNDc=","avatar_url":"https://avatars0.githubusercontent.com/u/2500147?v=4","gravatar_id":"","url":"https://api.github.com/users/cristiboariu","html_url":"https://github.com/cristiboariu","followers_url":"https://api.github.com/users/cristiboariu/followers","following_url":"https://api.github.com/users/cristiboariu/following{/other_user}","gists_url":"https://api.github.com/users/cristiboariu/gists{/gist_id}","starred_url":"https://api.github.com/users/cristiboariu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cristiboariu/subscriptions","organizations_url":"https://api.github.com/users/cristiboariu/orgs","repos_url":"https://api.github.com/users/cristiboariu/repos","events_url":"https://api.github.com/users/cristiboariu/events{/privacy}","received_events_url":"https://api.github.com/users/cristiboariu/received_events","type":"User","site_admin":false},"created_at":"2015-08-13T12:39:59Z","updated_at":"2015-08-13T12:39:59Z","author_association":"NONE","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/241225095","html_url":"https://github.com/elastic/elasticsearch/issues/7758#issuecomment-241225095","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7758","id":241225095,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MTIyNTA5NQ==","user":{"login":"qwerty4030","id":874677,"node_id":"MDQ6VXNlcjg3NDY3Nw==","avatar_url":"https://avatars2.githubusercontent.com/u/874677?v=4","gravatar_id":"","url":"https://api.github.com/users/qwerty4030","html_url":"https://github.com/qwerty4030","followers_url":"https://api.github.com/users/qwerty4030/followers","following_url":"https://api.github.com/users/qwerty4030/following{/other_user}","gists_url":"https://api.github.com/users/qwerty4030/gists{/gist_id}","starred_url":"https://api.github.com/users/qwerty4030/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qwerty4030/subscriptions","organizations_url":"https://api.github.com/users/qwerty4030/orgs","repos_url":"https://api.github.com/users/qwerty4030/repos","events_url":"https://api.github.com/users/qwerty4030/events{/privacy}","received_events_url":"https://api.github.com/users/qwerty4030/received_events","type":"User","site_admin":false},"created_at":"2016-08-20T21:37:25Z","updated_at":"2016-08-20T21:37:25Z","author_association":"CONTRIBUTOR","body":"On latest master this causes an NPE. I'll take a look, it seems like a similar fix to #18957.\n\n```\nPUT disable_source\n{\n  \"settings\": {\n    \"number_of_replicas\": 0,\n    \"number_of_shards\": 1\n  },\n  \"mappings\": {\n    \"type\": {\n      \"_source\": {\n        \"enabled\": false\n      }\n    }\n  }\n}\n\nPOST disable_source/type/1\n{\n  \"text1\": \"hello1\",\n  \"text2\": \"hello2\"\n}\n\nPOST disable_source/_search\n{\n  \"_source\": [\n    \"text1\",\n    \"text2\"\n  ]\n}\n```\n\nNPE response:\n\n```\n{\n   \"error\": {\n      \"root_cause\": [\n         {\n            \"type\": \"null_pointer_exception\",\n            \"reason\": null\n         }\n      ],\n      \"type\": \"search_phase_execution_exception\",\n      \"reason\": \"all shards failed\",\n      \"phase\": \"query_fetch\",\n      \"grouped\": true,\n      \"failed_shards\": [\n         {\n            \"shard\": 0,\n            \"index\": \"disable_source\",\n            \"node\": \"71DMW_mRRzKDjQFNDpU4Iw\",\n            \"reason\": {\n               \"type\": \"null_pointer_exception\",\n               \"reason\": null\n            }\n         }\n      ],\n      \"caused_by\": {\n         \"type\": \"null_pointer_exception\",\n         \"reason\": null\n      }\n   },\n   \"status\": 500\n}\n```\n","performed_via_github_app":null}]