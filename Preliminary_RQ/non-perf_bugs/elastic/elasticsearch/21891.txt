{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/21891","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21891/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21891/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21891/events","html_url":"https://github.com/elastic/elasticsearch/issues/21891","id":192620076,"node_id":"MDU6SXNzdWUxOTI2MjAwNzY=","number":21891,"title":"Improve the System Configuration docs in regards to SystemD and best practices","user":{"login":"abraxxa","id":301990,"node_id":"MDQ6VXNlcjMwMTk5MA==","avatar_url":"https://avatars1.githubusercontent.com/u/301990?v=4","gravatar_id":"","url":"https://api.github.com/users/abraxxa","html_url":"https://github.com/abraxxa","followers_url":"https://api.github.com/users/abraxxa/followers","following_url":"https://api.github.com/users/abraxxa/following{/other_user}","gists_url":"https://api.github.com/users/abraxxa/gists{/gist_id}","starred_url":"https://api.github.com/users/abraxxa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abraxxa/subscriptions","organizations_url":"https://api.github.com/users/abraxxa/orgs","repos_url":"https://api.github.com/users/abraxxa/repos","events_url":"https://api.github.com/users/abraxxa/events{/privacy}","received_events_url":"https://api.github.com/users/abraxxa/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2016-11-30T16:55:09Z","updated_at":"2017-03-14T00:32:36Z","closed_at":"2016-11-30T17:19:38Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**: 5.0.2\r\n\r\n**Plugins installed**: x-pack\r\n\r\n**JVM version**: OpenJDK 1.8.0_111/25.111-b14\r\n\r\n**OS version**: Debian 8 64bit\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nWhen upgrading a cluster it's very time consuming to edit the deb package provided config files for every node as apt upgrade asks when it detects a diff.\r\nThis isn't an issue when the files in /etc/elasticsearch are untouched and the configuration is instead done via a systemd override file as described in [Systemd configuration](https://www.elastic.co/guide/en/elasticsearch/reference/current/setting-system-settings.html#systemd).\r\nMy issue was that the information is split up between this doc and e.g. [Set JVM heap size via jvm.options](https://www.elastic.co/guide/en/elasticsearch/reference/current/heap-size.html).\r\nEach section shows how to set the values in the package provided files and something how do to it differently for SysV and/or SystemD, sometimes even differentation between RPM and DEB based distros making it hard to find the right one.\r\nThis is related to #16781.\r\n\r\n**Describe the feature**:\r\nPlease restructure the docs to show the best-practice way of doing it first and not to edit package provided files.\r\nHaving a clear distinction between SysV and SystemD would also help.\r\nIf you don't want to change the basic structure from config options to SysV/SystemD please at least add a section for those two to every page in the [Important System Configuration](https://www.elastic.co/guide/en/elasticsearch/reference/current/system-config.html).\r\n\r\nProviding a sample systemd override file which sets the important config options would be a great help too, mine currently looks like that:\r\n\r\n/etc/systemd/system/elasticsearch.service.d/elasticsearch.conf:\r\n```\r\n[Service]\r\nLimitMEMLOCK=infinity\r\nEnvironment=DATA_DIR=/data/elasticsearch\r\nEnvironment=\"ES_JAVA_OPTS=-Xms16g -Xmx16g\"\r\n```\r\n\r\nThanks!\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}