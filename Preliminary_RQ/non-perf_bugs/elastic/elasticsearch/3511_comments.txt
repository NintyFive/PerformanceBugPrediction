[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/22639200","html_url":"https://github.com/elastic/elasticsearch/issues/3511#issuecomment-22639200","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3511","id":22639200,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjM5MjAw","user":{"login":"lmenezes","id":750074,"node_id":"MDQ6VXNlcjc1MDA3NA==","avatar_url":"https://avatars1.githubusercontent.com/u/750074?v=4","gravatar_id":"","url":"https://api.github.com/users/lmenezes","html_url":"https://github.com/lmenezes","followers_url":"https://api.github.com/users/lmenezes/followers","following_url":"https://api.github.com/users/lmenezes/following{/other_user}","gists_url":"https://api.github.com/users/lmenezes/gists{/gist_id}","starred_url":"https://api.github.com/users/lmenezes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmenezes/subscriptions","organizations_url":"https://api.github.com/users/lmenezes/orgs","repos_url":"https://api.github.com/users/lmenezes/repos","events_url":"https://api.github.com/users/lmenezes/events{/privacy}","received_events_url":"https://api.github.com/users/lmenezes/received_events","type":"User","site_admin":false},"created_at":"2013-08-14T14:25:28Z","updated_at":"2013-08-14T14:25:28Z","author_association":"CONTRIBUTOR","body":"Just noticed that it might no be easy to appreciate the error, but for the broken examples the results for the highlight are \n[fünf,] and [fünf,sechs], when it should be only [fünf].\nfor the working example, only vier is highlighted, as expected.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/22640253","html_url":"https://github.com/elastic/elasticsearch/issues/3511#issuecomment-22640253","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3511","id":22640253,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjQwMjUz","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-08-14T14:40:20Z","updated_at":"2013-08-14T14:40:20Z","author_association":"CONTRIBUTOR","body":"this is puzzeling... I am looking into it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/22669120","html_url":"https://github.com/elastic/elasticsearch/issues/3511#issuecomment-22669120","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3511","id":22669120,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjY5MTIw","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-08-14T21:36:00Z","updated_at":"2013-08-14T21:37:10Z","author_association":"CONTRIBUTOR","body":"ok I think I understand what is going on here. The problem is that `word_delimiter_filter` (btw. the last broken filter in Lucene) is messing up the offsets that are corrected by the char filter ie. whey you pass `eins, fünf,sechs` through the `char_filter` and `whitespace` tokenizer you end up with 2 tokens `eins,` and `fuenf,sechs`. The tokenizer already corrected the offset to end at 16 (actually 17 since we did `ü -> ue` but we correct that since the original value that might be used for highlighting in a stored field / source has length 16) but 'word_delimiter' tries to be smart and checks the chars making it span the entire original token. \n\nThe bottom line is 1. don't use `word_delimiter` if you want reliable highlighting. 2. if you still use it don't use `char_filter`, you might be able to do this with yet another filter but from the top of my head this seems not straight forward. I can totally see how a TokenFilter that does the same as the `char_filter` here could be useful. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/22688055","html_url":"https://github.com/elastic/elasticsearch/issues/3511#issuecomment-22688055","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3511","id":22688055,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjg4MDU1","user":{"login":"lmenezes","id":750074,"node_id":"MDQ6VXNlcjc1MDA3NA==","avatar_url":"https://avatars1.githubusercontent.com/u/750074?v=4","gravatar_id":"","url":"https://api.github.com/users/lmenezes","html_url":"https://github.com/lmenezes","followers_url":"https://api.github.com/users/lmenezes/followers","following_url":"https://api.github.com/users/lmenezes/following{/other_user}","gists_url":"https://api.github.com/users/lmenezes/gists{/gist_id}","starred_url":"https://api.github.com/users/lmenezes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmenezes/subscriptions","organizations_url":"https://api.github.com/users/lmenezes/orgs","repos_url":"https://api.github.com/users/lmenezes/repos","events_url":"https://api.github.com/users/lmenezes/events{/privacy}","received_events_url":"https://api.github.com/users/lmenezes/received_events","type":"User","site_admin":false},"created_at":"2013-08-15T06:51:54Z","updated_at":"2013-08-15T06:51:54Z","author_association":"CONTRIBUTOR","body":"@s1monw guess We should not expect a fix on lucene level for the word_delimiter, right? \nalso, just so that we don't end up building a tokenfilter as a plugin that does the same as the char_filter, could something like that be added in ES in the near future? I guess it could be pretty useful for cases like that for a lot of people\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/22689428","html_url":"https://github.com/elastic/elasticsearch/issues/3511#issuecomment-22689428","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3511","id":22689428,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjg5NDI4","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-08-15T07:42:58Z","updated_at":"2013-08-15T07:42:58Z","author_association":"CONTRIBUTOR","body":"@lmenezes I think we have a couple of options here.\n- add a token filter that does the same thing as the `mapping_char_filter` - this seems like a good one to me since I guess lots of users might have a need for it ie. diacritics removal / mapping or folding filters like you do where some filters don't to the right thing like ascii folding ü -> u\n- fix word delimiter filter to not mess with offsets. \n- make work delimiter filter a tokenizer and support offsets correctly.\n\nI kind of like all of these options while in the meanwhile I am pretty much done with word_delimiter that I'd wanna deprecate it entirely and make it a tokenizer instead to actually fix the root of the problem.  What do you think?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/22689466","html_url":"https://github.com/elastic/elasticsearch/issues/3511#issuecomment-22689466","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3511","id":22689466,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjg5NDY2","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2013-08-15T07:44:22Z","updated_at":"2013-08-15T07:44:22Z","author_association":"CONTRIBUTOR","body":"I know that @jpountz has it on his list of things to do: https://issues.apache.org/jira/browse/LUCENE-5111\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/22689711","html_url":"https://github.com/elastic/elasticsearch/issues/3511#issuecomment-22689711","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3511","id":22689711,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjg5NzEx","user":{"login":"lmenezes","id":750074,"node_id":"MDQ6VXNlcjc1MDA3NA==","avatar_url":"https://avatars1.githubusercontent.com/u/750074?v=4","gravatar_id":"","url":"https://api.github.com/users/lmenezes","html_url":"https://github.com/lmenezes","followers_url":"https://api.github.com/users/lmenezes/followers","following_url":"https://api.github.com/users/lmenezes/following{/other_user}","gists_url":"https://api.github.com/users/lmenezes/gists{/gist_id}","starred_url":"https://api.github.com/users/lmenezes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmenezes/subscriptions","organizations_url":"https://api.github.com/users/lmenezes/orgs","repos_url":"https://api.github.com/users/lmenezes/repos","events_url":"https://api.github.com/users/lmenezes/events{/privacy}","received_events_url":"https://api.github.com/users/lmenezes/received_events","type":"User","site_admin":false},"created_at":"2013-08-15T07:52:01Z","updated_at":"2013-08-15T07:52:01Z","author_association":"CONTRIBUTOR","body":"@s1monw  \n\neverything sounds good, but \"make work delimiter filter a tokenizer and support offsets correctly\" wouldn't really solve the problem here. you use word_delimiter as a tokenizer and you end up with \"one two\" as a single token, unless there is something here that i don't see.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/22689746","html_url":"https://github.com/elastic/elasticsearch/issues/3511#issuecomment-22689746","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3511","id":22689746,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjg5NzQ2","user":{"login":"lmenezes","id":750074,"node_id":"MDQ6VXNlcjc1MDA3NA==","avatar_url":"https://avatars1.githubusercontent.com/u/750074?v=4","gravatar_id":"","url":"https://api.github.com/users/lmenezes","html_url":"https://github.com/lmenezes","followers_url":"https://api.github.com/users/lmenezes/followers","following_url":"https://api.github.com/users/lmenezes/following{/other_user}","gists_url":"https://api.github.com/users/lmenezes/gists{/gist_id}","starred_url":"https://api.github.com/users/lmenezes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmenezes/subscriptions","organizations_url":"https://api.github.com/users/lmenezes/orgs","repos_url":"https://api.github.com/users/lmenezes/repos","events_url":"https://api.github.com/users/lmenezes/events{/privacy}","received_events_url":"https://api.github.com/users/lmenezes/received_events","type":"User","site_admin":false},"created_at":"2013-08-15T07:53:12Z","updated_at":"2013-08-15T07:53:12Z","author_association":"CONTRIBUTOR","body":"@clintongormley cool :)\nbut having a token filter that does the same as the char_filter isn't a bad idea anyway.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/22689813","html_url":"https://github.com/elastic/elasticsearch/issues/3511#issuecomment-22689813","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3511","id":22689813,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjg5ODEz","user":{"login":"lmenezes","id":750074,"node_id":"MDQ6VXNlcjc1MDA3NA==","avatar_url":"https://avatars1.githubusercontent.com/u/750074?v=4","gravatar_id":"","url":"https://api.github.com/users/lmenezes","html_url":"https://github.com/lmenezes","followers_url":"https://api.github.com/users/lmenezes/followers","following_url":"https://api.github.com/users/lmenezes/following{/other_user}","gists_url":"https://api.github.com/users/lmenezes/gists{/gist_id}","starred_url":"https://api.github.com/users/lmenezes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmenezes/subscriptions","organizations_url":"https://api.github.com/users/lmenezes/orgs","repos_url":"https://api.github.com/users/lmenezes/repos","events_url":"https://api.github.com/users/lmenezes/events{/privacy}","received_events_url":"https://api.github.com/users/lmenezes/received_events","type":"User","site_admin":false},"created_at":"2013-08-15T07:55:29Z","updated_at":"2013-08-15T07:55:29Z","author_association":"CONTRIBUTOR","body":"sorry about using this issue to get attention to another issue, but what about https://github.com/elasticsearch/elasticsearch/issues/3505 ?\nEven though I can totally live without it, since we are going back to normal highlighter anyway...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/26149901","html_url":"https://github.com/elastic/elasticsearch/issues/3511#issuecomment-26149901","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3511","id":26149901,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTQ5OTAx","user":{"login":"lmenezes","id":750074,"node_id":"MDQ6VXNlcjc1MDA3NA==","avatar_url":"https://avatars1.githubusercontent.com/u/750074?v=4","gravatar_id":"","url":"https://api.github.com/users/lmenezes","html_url":"https://github.com/lmenezes","followers_url":"https://api.github.com/users/lmenezes/followers","following_url":"https://api.github.com/users/lmenezes/following{/other_user}","gists_url":"https://api.github.com/users/lmenezes/gists{/gist_id}","starred_url":"https://api.github.com/users/lmenezes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmenezes/subscriptions","organizations_url":"https://api.github.com/users/lmenezes/orgs","repos_url":"https://api.github.com/users/lmenezes/repos","events_url":"https://api.github.com/users/lmenezes/events{/privacy}","received_events_url":"https://api.github.com/users/lmenezes/received_events","type":"User","site_admin":false},"created_at":"2013-10-11T16:13:05Z","updated_at":"2013-10-11T16:13:05Z","author_association":"CONTRIBUTOR","body":"do we have any update on this?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/26174476","html_url":"https://github.com/elastic/elasticsearch/issues/3511#issuecomment-26174476","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3511","id":26174476,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTc0NDc2","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-10-11T21:10:04Z","updated_at":"2013-10-11T21:10:04Z","author_association":"CONTRIBUTOR","body":"I don't think we will get to fix the root of the problem here any time soon. I think the only option is to not use word delimiter together with highlighting until it is fixed. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/48463228","html_url":"https://github.com/elastic/elasticsearch/issues/3511#issuecomment-48463228","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3511","id":48463228,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDYzMjI4","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-07-09T12:29:37Z","updated_at":"2014-07-09T12:29:37Z","author_association":"CONTRIBUTOR","body":"I'm not sure this is just the WDF.  If character filters change the length of the string, it also messes with highlighting.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/48463642","html_url":"https://github.com/elastic/elasticsearch/issues/3511#issuecomment-48463642","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3511","id":48463642,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDYzNjQy","user":{"login":"lmenezes","id":750074,"node_id":"MDQ6VXNlcjc1MDA3NA==","avatar_url":"https://avatars1.githubusercontent.com/u/750074?v=4","gravatar_id":"","url":"https://api.github.com/users/lmenezes","html_url":"https://github.com/lmenezes","followers_url":"https://api.github.com/users/lmenezes/followers","following_url":"https://api.github.com/users/lmenezes/following{/other_user}","gists_url":"https://api.github.com/users/lmenezes/gists{/gist_id}","starred_url":"https://api.github.com/users/lmenezes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmenezes/subscriptions","organizations_url":"https://api.github.com/users/lmenezes/orgs","repos_url":"https://api.github.com/users/lmenezes/repos","events_url":"https://api.github.com/users/lmenezes/events{/privacy}","received_events_url":"https://api.github.com/users/lmenezes/received_events","type":"User","site_admin":false},"created_at":"2014-07-09T12:34:13Z","updated_at":"2014-07-09T12:34:13Z","author_association":"CONTRIBUTOR","body":"@clintongormley cleaning up old issues? :) \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/48467841","html_url":"https://github.com/elastic/elasticsearch/issues/3511#issuecomment-48467841","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3511","id":48467841,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NDY3ODQx","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-07-09T13:15:46Z","updated_at":"2014-07-09T13:15:46Z","author_association":"CONTRIBUTOR","body":"How could you tell :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148042264","html_url":"https://github.com/elastic/elasticsearch/issues/3511#issuecomment-148042264","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3511","id":148042264,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODA0MjI2NA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-10-14T12:59:55Z","updated_at":"2015-10-14T12:59:55Z","author_association":"CONTRIBUTOR","body":"Probably related to https://issues.apache.org/jira/browse/LUCENE-6595\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148049730","html_url":"https://github.com/elastic/elasticsearch/issues/3511#issuecomment-148049730","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3511","id":148049730,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODA0OTczMA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-10-14T13:31:15Z","updated_at":"2015-10-14T13:31:15Z","author_association":"CONTRIBUTOR","body":"This actually works correctly now for the plain highlighter case, which returns:\n\n```\n\"eins, <em>fünf</em>, sechs\"\n```\n\nThe FVH works _almost_ correctly, it returns:\n\n```\n\"eins, <em>fünf,</em> sechs\"\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/258670129","html_url":"https://github.com/elastic/elasticsearch/issues/3511#issuecomment-258670129","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3511","id":258670129,"node_id":"MDEyOklzc3VlQ29tbWVudDI1ODY3MDEyOQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-11-06T09:43:36Z","updated_at":"2016-11-06T09:43:36Z","author_association":"CONTRIBUTOR","body":"I've just understood this issue properly for the first time. You're using a whitespace tokenizer with `fünf,sechs`, so the analyzer with the WDF returns \"fuenf\", \"sechs\", \"fuenfsechs\", so it ends up selecting the longest matching token.\n\nOf course, the same thing could be said for `vier,sechs`, but I think that's where the issue of the character filter changing the length of the string comes into play.\n\nI think all we can do here is wait for https://issues.apache.org/jira/browse/LUCENE-6595 to be resolved.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/262994946","html_url":"https://github.com/elastic/elasticsearch/issues/3511#issuecomment-262994946","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3511","id":262994946,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mjk5NDk0Ng==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-11-25T16:45:50Z","updated_at":"2016-11-25T16:45:50Z","author_association":"CONTRIBUTOR","body":"Here's some more info:\r\n\r\n```\r\nPOST foo/_analyze\r\n{\r\n  \"field\": \"content\",\r\n  \"text\": \"fünf,sechs\" \r\n}\r\n```\r\nReturns:\r\n```\r\n{\r\n  \"tokens\": [\r\n    {\r\n      \"token\": \"fuenf\",\r\n      \"start_offset\": 0,\r\n      \"end_offset\": 10,\r\n      \"type\": \"word\",\r\n      \"position\": 0\r\n    },\r\n    {\r\n      \"token\": \"sechs\",\r\n      \"start_offset\": 0,\r\n      \"end_offset\": 10,\r\n      \"type\": \"word\",\r\n      \"position\": 1\r\n    },\r\n    {\r\n      \"token\": \"fuenfsechs\",\r\n      \"start_offset\": 0,\r\n      \"end_offset\": 10,\r\n      \"type\": \"word\",\r\n      \"position\": 1\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nWhile\r\n```\r\nPOST foo/_analyze\r\n{\r\n  \"field\": \"content\",\r\n  \"text\": \"vier,sechs\" \r\n}\r\n```\r\n\r\nReturns:\r\n```\r\n{\r\n  \"tokens\": [\r\n    {\r\n      \"token\": \"vier\",\r\n      \"start_offset\": 0,\r\n      \"end_offset\": 4,\r\n      \"type\": \"word\",\r\n      \"position\": 0\r\n    },\r\n    {\r\n      \"token\": \"viersechs\",\r\n      \"start_offset\": 0,\r\n      \"end_offset\": 10,\r\n      \"type\": \"word\",\r\n      \"position\": 0\r\n    },\r\n    {\r\n      \"token\": \"sechs\",\r\n      \"start_offset\": 5,\r\n      \"end_offset\": 10,\r\n      \"type\": \"word\",\r\n      \"position\": 1\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nSo this is an analysis bug, not a highlighting bug.  And is probably due to https://issues.apache.org/jira/browse/LUCENE-6595\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/373811306","html_url":"https://github.com/elastic/elasticsearch/issues/3511#issuecomment-373811306","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3511","id":373811306,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MzgxMTMwNg==","user":{"login":"mayya-sharipova","id":5738841,"node_id":"MDQ6VXNlcjU3Mzg4NDE=","avatar_url":"https://avatars1.githubusercontent.com/u/5738841?v=4","gravatar_id":"","url":"https://api.github.com/users/mayya-sharipova","html_url":"https://github.com/mayya-sharipova","followers_url":"https://api.github.com/users/mayya-sharipova/followers","following_url":"https://api.github.com/users/mayya-sharipova/following{/other_user}","gists_url":"https://api.github.com/users/mayya-sharipova/gists{/gist_id}","starred_url":"https://api.github.com/users/mayya-sharipova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayya-sharipova/subscriptions","organizations_url":"https://api.github.com/users/mayya-sharipova/orgs","repos_url":"https://api.github.com/users/mayya-sharipova/repos","events_url":"https://api.github.com/users/mayya-sharipova/events{/privacy}","received_events_url":"https://api.github.com/users/mayya-sharipova/received_events","type":"User","site_admin":false},"created_at":"2018-03-16T18:52:32Z","updated_at":"2018-03-16T18:52:41Z","author_association":"CONTRIBUTOR","body":"We are closing this issue for now, as nothing we can do for it at the Elastic Search level. The problem should be fixed with Lucene's  char filter and word delimiter filter.","performed_via_github_app":null}]