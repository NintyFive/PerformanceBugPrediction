[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/436826904","html_url":"https://github.com/elastic/elasticsearch/issues/35356#issuecomment-436826904","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35356","id":436826904,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNjgyNjkwNA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-11-08T00:21:59Z","updated_at":"2018-11-08T00:21:59Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/436914296","html_url":"https://github.com/elastic/elasticsearch/issues/35356#issuecomment-436914296","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35356","id":436914296,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNjkxNDI5Ng==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2018-11-08T08:35:34Z","updated_at":"2018-11-08T08:35:34Z","author_association":"MEMBER","body":"I don't see this as a bug. This is in line with the explanation of how policies work. A policy will enter a phase when the min age is met (the original one) and will progress through the phase, if the policy changes we do not pick up on the changes until the next phase so I do not expect the phase to be re-run if the min_age changes. This would be extremely difficult to implement in any case because the shrink action would not be able to work if it is run multiple times and even if it could it would open weird, hard to resolve edge cases where e.g. the index start with 6 shards and in the original policy is shrunk to 1 shard but in the updated policy is shrunk to 2 shards, in this case the index would get stuck because of re-running the warm phase.\r\n\r\nI think its quite reasonable and easy to explain that the policy is run forward-only and once we have started doing something (like a phase) we won't go back and run it later.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/437060624","html_url":"https://github.com/elastic/elasticsearch/issues/35356#issuecomment-437060624","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35356","id":437060624,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNzA2MDYyNA==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2018-11-08T16:31:02Z","updated_at":"2018-11-08T16:31:02Z","author_association":"MEMBER","body":"> I think its quite reasonable and easy to explain that the policy is run forward-only and once we have started doing something (like a phase) we won't go back and run it later.\r\n\r\nThe issue with this is that the behavior between changing an index's policy (from `my_lifecycle3` to `newpolicy`) is different than removing `my_lifecycle3` and then setting the policy to `newpolicy`. To me that seems like a bug, since I would expect changing the policy to be the same as removing the original and then setting the new policy.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/437299372","html_url":"https://github.com/elastic/elasticsearch/issues/35356#issuecomment-437299372","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35356","id":437299372,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNzI5OTM3Mg==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2018-11-09T09:20:01Z","updated_at":"2018-11-09T09:21:08Z","author_association":"MEMBER","body":"The remove API is not removing the policy though, its clearing IM entirely form the index, so its never going to be the same as setting a different policy. Setting the index to a different policy is equivalent to clearing the `index.lifecycle.name` setting and then re-setting it.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/437934510","html_url":"https://github.com/elastic/elasticsearch/issues/35356#issuecomment-437934510","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35356","id":437934510,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNzkzNDUxMA==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2018-11-12T16:01:45Z","updated_at":"2018-11-12T16:01:45Z","author_association":"MEMBER","body":"We discussed this and decided that there's not really a good way to satisfy the issue where we don't want to re-run phases (for example, we can't re-rollover or re-shrink once we've done those things). As that is the case, we're going to document the existing behavior (probably alongside the documentation about phase JSON caching).\r\n\r\nI'll change this from a bug to a documentation task","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/448257600","html_url":"https://github.com/elastic/elasticsearch/issues/35356#issuecomment-448257600","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35356","id":448257600,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0ODI1NzYwMA==","user":{"login":"jakelandis","id":976291,"node_id":"MDQ6VXNlcjk3NjI5MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/976291?v=4","gravatar_id":"","url":"https://api.github.com/users/jakelandis","html_url":"https://github.com/jakelandis","followers_url":"https://api.github.com/users/jakelandis/followers","following_url":"https://api.github.com/users/jakelandis/following{/other_user}","gists_url":"https://api.github.com/users/jakelandis/gists{/gist_id}","starred_url":"https://api.github.com/users/jakelandis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakelandis/subscriptions","organizations_url":"https://api.github.com/users/jakelandis/orgs","repos_url":"https://api.github.com/users/jakelandis/repos","events_url":"https://api.github.com/users/jakelandis/events{/privacy}","received_events_url":"https://api.github.com/users/jakelandis/received_events","type":"User","site_admin":false},"created_at":"2018-12-18T15:23:36Z","updated_at":"2018-12-18T15:23:36Z","author_association":"CONTRIBUTOR","body":"Should add some documentation to https://www.elastic.co/guide/en/elasticsearch/reference/6.x/_updates_to_executing_policies.html","performed_via_github_app":null}]