[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/278883220","html_url":"https://github.com/elastic/elasticsearch/issues/23099#issuecomment-278883220","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23099","id":278883220,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODg4MzIyMA==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2017-02-10T08:13:06Z","updated_at":"2017-02-10T08:13:06Z","author_association":"MEMBER","body":"@pickypg I'm assigning this to you as it seems you plan to pick this up. We can debate whether node stats should return errors to the users (rather than log them under WARN) but this is not the cause of this issue. I believe this goes wrong now because we stopped wrapping up internal engine exceptions and that confuses the logic [here](https://github.com/elastic/elasticsearch/blob/master/core/src/main/java/org/elasticsearch/indices/IndicesService.java#L319). I think we should teach that clause about AlreadyClosedException. The shard was just closed concurrently to the stats call, which is not a problem ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/278991770","html_url":"https://github.com/elastic/elasticsearch/issues/23099#issuecomment-278991770","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23099","id":278991770,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODk5MTc3MA==","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"created_at":"2017-02-10T16:31:27Z","updated_at":"2017-02-10T16:31:27Z","author_association":"MEMBER","body":"@bleskes I totally agree that this is a fake failure, but I do wonder about the value of ever throwing away exceptions to a `TransportNodesAction`?\r\n\r\nIn addition to making the appropriate fix here, I wonder if a secondary fix would be to remove the `accumulateExceptions` method on it?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/279201076","html_url":"https://github.com/elastic/elasticsearch/issues/23099#issuecomment-279201076","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23099","id":279201076,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTIwMTA3Ng==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2017-02-12T07:02:07Z","updated_at":"2017-02-12T07:02:07Z","author_association":"MEMBER","body":"> In addition to making the appropriate fix here, I wonder if a secondary fix would be to remove the accumulateExceptions method on it?\r\n\r\nI tend to agree - we should report what happened to the use. It will put an extra burden on finding the right exceptions to ignore, but I think it's the right tradeoff. IMO it should be a separate change.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/279240920","html_url":"https://github.com/elastic/elasticsearch/issues/23099#issuecomment-279240920","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23099","id":279240920,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTI0MDkyMA==","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"created_at":"2017-02-12T19:15:57Z","updated_at":"2017-02-12T19:15:57Z","author_association":"MEMBER","body":"Agree it should be a separate change.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/305658523","html_url":"https://github.com/elastic/elasticsearch/issues/23099#issuecomment-305658523","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23099","id":305658523,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTY1ODUyMw==","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"created_at":"2017-06-02T00:44:19Z","updated_at":"2017-06-28T14:59:37Z","author_association":"MEMBER","body":"Going to fix this by:\r\n\r\n- [x] Catching `AlreadyClosedException` #25016\r\n- [x] Eliminating `accumulateExceptions` from `TransportNodesAction` (thus always accumulating exceptions) #25017","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/308970571","html_url":"https://github.com/elastic/elasticsearch/issues/23099#issuecomment-308970571","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23099","id":308970571,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODk3MDU3MQ==","user":{"login":"mats16","id":5158858,"node_id":"MDQ6VXNlcjUxNTg4NTg=","avatar_url":"https://avatars0.githubusercontent.com/u/5158858?v=4","gravatar_id":"","url":"https://api.github.com/users/mats16","html_url":"https://github.com/mats16","followers_url":"https://api.github.com/users/mats16/followers","following_url":"https://api.github.com/users/mats16/following{/other_user}","gists_url":"https://api.github.com/users/mats16/gists{/gist_id}","starred_url":"https://api.github.com/users/mats16/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mats16/subscriptions","organizations_url":"https://api.github.com/users/mats16/orgs","repos_url":"https://api.github.com/users/mats16/repos","events_url":"https://api.github.com/users/mats16/events{/privacy}","received_events_url":"https://api.github.com/users/mats16/received_events","type":"User","site_admin":false},"created_at":"2017-06-16T08:48:38Z","updated_at":"2017-06-16T10:10:18Z","author_association":"NONE","body":"This is also occurring with `docker.elastic.co/elasticsearch/elasticsearch:5.4.1`","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/311722643","html_url":"https://github.com/elastic/elasticsearch/issues/23099#issuecomment-311722643","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23099","id":311722643,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTcyMjY0Mw==","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"created_at":"2017-06-28T16:58:50Z","updated_at":"2017-06-28T16:58:50Z","author_association":"MEMBER","body":"This was merged and backported to the respective branches both PRs. Thanks!","performed_via_github_app":null}]