[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/443192579","html_url":"https://github.com/elastic/elasticsearch/issues/36115#issuecomment-443192579","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36115","id":443192579,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MzE5MjU3OQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-11-30T12:42:45Z","updated_at":"2018-11-30T12:42:45Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/445895083","html_url":"https://github.com/elastic/elasticsearch/issues/36115#issuecomment-445895083","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36115","id":445895083,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NTg5NTA4Mw==","user":{"login":"jakelandis","id":976291,"node_id":"MDQ6VXNlcjk3NjI5MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/976291?v=4","gravatar_id":"","url":"https://api.github.com/users/jakelandis","html_url":"https://github.com/jakelandis","followers_url":"https://api.github.com/users/jakelandis/followers","following_url":"https://api.github.com/users/jakelandis/following{/other_user}","gists_url":"https://api.github.com/users/jakelandis/gists{/gist_id}","starred_url":"https://api.github.com/users/jakelandis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakelandis/subscriptions","organizations_url":"https://api.github.com/users/jakelandis/orgs","repos_url":"https://api.github.com/users/jakelandis/repos","events_url":"https://api.github.com/users/jakelandis/events{/privacy}","received_events_url":"https://api.github.com/users/jakelandis/received_events","type":"User","site_admin":false},"created_at":"2018-12-10T17:13:33Z","updated_at":"2018-12-10T17:15:00Z","author_association":"CONTRIBUTOR","body":"We discussed this our area sync and came to the following conclusions:\r\n\r\n* For 7.0.0 - Ensure the fully BWC change is implemented by default via the `rest_total_hits_as_int` as described on https://github.com/elastic/elasticsearch/pull/35849\r\n* For 7.0.0 - Ensure that there is a setting that can change the default behavior, such that consumers can effectively remove `rest_total_hits_as_int` and opt-in to the performance benefits from https://github.com/elastic/elasticsearch/issues/33028\r\n* For 8.0.0 - Flip the default behavior such that `rest_total_hits_as_int` is not sent, but still allowing consumers to opt-in into 'legacy' behavior.\r\n* Between 7.0.0 and 8.0.0 define a migration plan. Automation is ideal (i.e. re-write watches), but is tricky to get correct for all cases and we can't account for clients that store watches in source control that don't have a bi-directional sync. Depredations, warnings, blogs, etc. can all be used to help inform that this change is coming and to be prepared. \r\n\r\nWill leave this issue open until:\r\n* 7.0.0 concerns are resolved\r\n* 8.0.0 `blocker` issue logged \r\n* 7.0.0 -> 8.0.0 migration issue logged\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/446132183","html_url":"https://github.com/elastic/elasticsearch/issues/36115#issuecomment-446132183","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36115","id":446132183,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NjEzMjE4Mw==","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2018-12-11T09:28:11Z","updated_at":"2018-12-11T09:28:11Z","author_association":"MEMBER","body":"The first part is already implemented, see [here](https://github.com/elastic/elasticsearch/blob/master/x-pack/plugin/watcher/src/main/java/org/elasticsearch/xpack/watcher/input/search/ExecutableSearchInput.java#L92) for the search input and [here](https://github.com/elastic/elasticsearch/blob/master/x-pack/plugin/watcher/src/main/java/org/elasticsearch/xpack/watcher/transform/search/ExecutableSearchTransform.java#L57)\r\n\r\nThe second part is partially implemented, see [here](https://github.com/elastic/elasticsearch/blob/master/x-pack/plugin/watcher/src/main/java/org/elasticsearch/xpack/watcher/support/search/WatcherSearchTemplateRequest.java#L284), when a search request is parsed. We just need to add a proper test for this, but it seems to me that this is already working and the user can set `rest_total_hits_as_int` to false in the search request.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/447675969","html_url":"https://github.com/elastic/elasticsearch/issues/36115#issuecomment-447675969","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36115","id":447675969,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NzY3NTk2OQ==","user":{"login":"jakelandis","id":976291,"node_id":"MDQ6VXNlcjk3NjI5MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/976291?v=4","gravatar_id":"","url":"https://api.github.com/users/jakelandis","html_url":"https://github.com/jakelandis","followers_url":"https://api.github.com/users/jakelandis/followers","following_url":"https://api.github.com/users/jakelandis/following{/other_user}","gists_url":"https://api.github.com/users/jakelandis/gists{/gist_id}","starred_url":"https://api.github.com/users/jakelandis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakelandis/subscriptions","organizations_url":"https://api.github.com/users/jakelandis/orgs","repos_url":"https://api.github.com/users/jakelandis/repos","events_url":"https://api.github.com/users/jakelandis/events{/privacy}","received_events_url":"https://api.github.com/users/jakelandis/received_events","type":"User","site_admin":false},"created_at":"2018-12-16T21:07:43Z","updated_at":"2018-12-16T21:07:43Z","author_association":"CONTRIBUTOR","body":"It looks like the default for `rest_total_hits_as_int` is set to false in master. We will need to change the default to true for 7.x. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/460477658","html_url":"https://github.com/elastic/elasticsearch/issues/36115#issuecomment-460477658","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36115","id":460477658,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDQ3NzY1OA==","user":{"login":"jakelandis","id":976291,"node_id":"MDQ6VXNlcjk3NjI5MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/976291?v=4","gravatar_id":"","url":"https://api.github.com/users/jakelandis","html_url":"https://github.com/jakelandis","followers_url":"https://api.github.com/users/jakelandis/followers","following_url":"https://api.github.com/users/jakelandis/following{/other_user}","gists_url":"https://api.github.com/users/jakelandis/gists{/gist_id}","starred_url":"https://api.github.com/users/jakelandis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakelandis/subscriptions","organizations_url":"https://api.github.com/users/jakelandis/orgs","repos_url":"https://api.github.com/users/jakelandis/repos","events_url":"https://api.github.com/users/jakelandis/events{/privacy}","received_events_url":"https://api.github.com/users/jakelandis/received_events","type":"User","site_admin":false},"created_at":"2019-02-05T01:15:56Z","updated_at":"2019-02-05T01:15:56Z","author_association":"CONTRIBUTOR","body":"`rest_total_hits_as_int` has been defaulted to true in master (7.x) via https://github.com/elastic/elasticsearch/pull/36697","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/460480217","html_url":"https://github.com/elastic/elasticsearch/issues/36115#issuecomment-460480217","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36115","id":460480217,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDQ4MDIxNw==","user":{"login":"jakelandis","id":976291,"node_id":"MDQ6VXNlcjk3NjI5MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/976291?v=4","gravatar_id":"","url":"https://api.github.com/users/jakelandis","html_url":"https://github.com/jakelandis","followers_url":"https://api.github.com/users/jakelandis/followers","following_url":"https://api.github.com/users/jakelandis/following{/other_user}","gists_url":"https://api.github.com/users/jakelandis/gists{/gist_id}","starred_url":"https://api.github.com/users/jakelandis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakelandis/subscriptions","organizations_url":"https://api.github.com/users/jakelandis/orgs","repos_url":"https://api.github.com/users/jakelandis/repos","events_url":"https://api.github.com/users/jakelandis/events{/privacy}","received_events_url":"https://api.github.com/users/jakelandis/received_events","type":"User","site_admin":false},"created_at":"2019-02-05T01:28:11Z","updated_at":"2019-02-05T01:28:11Z","author_association":"CONTRIBUTOR","body":"closing this issue as resolved with \r\n\r\n7.x passive default: #36697\r\n8.0.0 blocker issue: #38387","performed_via_github_app":null}]