{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/2677","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2677/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2677/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2677/events","html_url":"https://github.com/elastic/elasticsearch/issues/2677","id":11308226,"node_id":"MDU6SXNzdWUxMTMwODIyNg==","number":2677,"title":"Maven Surefire Issue","user":{"login":"bagdemir","id":1160613,"node_id":"MDQ6VXNlcjExNjA2MTM=","avatar_url":"https://avatars0.githubusercontent.com/u/1160613?v=4","gravatar_id":"","url":"https://api.github.com/users/bagdemir","html_url":"https://github.com/bagdemir","followers_url":"https://api.github.com/users/bagdemir/followers","following_url":"https://api.github.com/users/bagdemir/following{/other_user}","gists_url":"https://api.github.com/users/bagdemir/gists{/gist_id}","starred_url":"https://api.github.com/users/bagdemir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagdemir/subscriptions","organizations_url":"https://api.github.com/users/bagdemir/orgs","repos_url":"https://api.github.com/users/bagdemir/repos","events_url":"https://api.github.com/users/bagdemir/events{/privacy}","received_events_url":"https://api.github.com/users/bagdemir/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"assignees":[{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2013-02-22T22:13:20Z","updated_at":"2013-06-28T11:32:33Z","closed_at":"2013-06-28T11:32:33Z","author_association":"NONE","active_lock_reason":null,"body":"My integration test starts within the setUp() method a new elasticsearch \"master\" + \"data\" node and in the test method using client node i want to perform some operations on that master node. Everything runs without any problem if i run the test case within the Eclipse but as soon as i try to package my application and the tests are being run, i get following exception. The problem is that our CI server can not run these tests, too.  Here is how i configure the server node:\n        map.put(\"cluster.name\", clusterName);\n        map.put(\"node.name\", \"search-engine-test\");\n        map.put(\"node.master\", true);\n        map.put(\"node.data\", true);\n        map.put(\"node.client\", false);\n        map.put(\"node.gateway.type\", \"none\");\n        map.put(\"node.http.enabled\", true);\n        map.put(\"path.data\", \"target/elasticsearch\");\n        map.put(\"index.number_of_shards\", 1);\n        map.put(\"index.number_of_replicas\", 0);\n        map.put(\"index.store.type\", \"memory\");\n\nand here is how the client node configured:\n        map.put(\"cluster.name\", clusterName);\n        map.put(\"node.name\", DEFAULT_NODE_NAME);\n        map.put(\"node.master\", false);\n        map.put(\"node.data\", false);\n        map.put(\"node.client\", true);\n        map.put(\"discovery.zen.ping.multicast.enabled\", false);\n        map.put(\"discovery.zen.ping.unicast.hosts\", \"127.0.0.1\");\n\ni appreciate your help !\n\nTests run: 49, Failures: 0, Errors: 24, Skipped: 0, Time elapsed: 6.648 sec <<< FAILURE!\nall(de.guj.searchengine.domain.search.ElasticSearchQueryIntegrationTest)  Time elapsed: 0.126 sec  <<< ERROR!\norg.elasticsearch.cluster.block.ClusterBlockException: blocked by: [SERVICE_UNAVAILABLE/1/state not recovered / initialized];[SERVICE_UNAVAILABLE/2/no master];\n        at org.elasticsearch.cluster.block.ClusterBlocks.globalBlockedException(ClusterBlocks.java:138)\n        at org.elasticsearch.action.admin.indices.status.TransportIndicesStatusAction.checkGlobalBlock(TransportIndicesStatusAction.java:103)\n        at org.elasticsearch.action.admin.indices.status.TransportIndicesStatusAction.checkGlobalBlock(TransportIndicesStatusAction.java:59)\n        at org.elasticsearch.action.support.broadcast.TransportBroadcastOperationAction$AsyncBroadcastAction.<init>(TransportBroadcastOperationAction.java:136)\n        at org.elasticsearch.action.support.broadcast.TransportBroadcastOperationAction.doExecute(TransportBroadcastOperationAction.java:73)\n        at org.elasticsearch.action.support.broadcast.TransportBroadcastOperationAction.doExecute(TransportBroadcastOperationAction.java:44)\n        at org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:61)\n        at org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:47)\n        at org.elasticsearch.client.node.NodeIndicesAdminClient.execute(NodeIndicesAdminClient.java:64)\n        at org.elasticsearch.client.support.AbstractIndicesAdminClient.status(AbstractIndicesAdminClient.java:333)\n","closed_by":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"performed_via_github_app":null}