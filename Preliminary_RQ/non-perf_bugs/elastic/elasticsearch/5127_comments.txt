[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/35110751","html_url":"https://github.com/elastic/elasticsearch/issues/5127#issuecomment-35110751","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5127","id":35110751,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTEwNzUx","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2014-02-14T18:28:42Z","updated_at":"2014-02-14T18:28:42Z","author_association":"MEMBER","body":"Hi @roytmana , \ndo you mean that highlighting was working fine with the same query in 0.90? Can you post a recreation please?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/35111199","html_url":"https://github.com/elastic/elasticsearch/issues/5127#issuecomment-35111199","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5127","id":35111199,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTExMTk5","user":{"login":"roytmana","id":2524911,"node_id":"MDQ6VXNlcjI1MjQ5MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2524911?v=4","gravatar_id":"","url":"https://api.github.com/users/roytmana","html_url":"https://github.com/roytmana","followers_url":"https://api.github.com/users/roytmana/followers","following_url":"https://api.github.com/users/roytmana/following{/other_user}","gists_url":"https://api.github.com/users/roytmana/gists{/gist_id}","starred_url":"https://api.github.com/users/roytmana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roytmana/subscriptions","organizations_url":"https://api.github.com/users/roytmana/orgs","repos_url":"https://api.github.com/users/roytmana/repos","events_url":"https://api.github.com/users/roytmana/events{/privacy}","received_events_url":"https://api.github.com/users/roytmana/received_events","type":"User","site_admin":false},"created_at":"2014-02-14T18:33:50Z","updated_at":"2014-02-14T18:33:50Z","author_association":"NONE","body":"I already migrated everything including index metadata to 1.0 so I can't\nconfirm with 100% certainty it was working in 0.90 but if you recall you\nand I were working on exactly the same issue a while ago and I believe it\nwas fixed.\n\nBefore I start working on a recreation (need to put it together from\nscratch) Do you think that it should NOT work by design?\n\nOn Fri, Feb 14, 2014 at 1:29 PM, Luca Cavanna notifications@github.comwrote:\n\n> Hi @roytmana https://github.com/roytmana ,\n> do you mean that highlighting was working fine with the same query in\n> 0.90? Can you post a recreation please?\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/elasticsearch/elasticsearch/issues/5127#issuecomment-35110751\n> .\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/35111204","html_url":"https://github.com/elastic/elasticsearch/issues/5127#issuecomment-35111204","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5127","id":35111204,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTExMjA0","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-02-14T18:33:52Z","updated_at":"2014-02-14T18:33:52Z","author_association":"CONTRIBUTOR","body":"wait that has just been implemented in [lucene](https://issues.apache.org/jira/browse/LUCENE-5415) - I don't think we have support for MTQ in postings highlighter yet? This is coming with Lucene 4.7 \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/35111993","html_url":"https://github.com/elastic/elasticsearch/issues/5127#issuecomment-35111993","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5127","id":35111993,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTExOTkz","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2014-02-14T18:42:38Z","updated_at":"2014-02-14T18:43:05Z","author_association":"MEMBER","body":"@roytmana I'm asking because I do remember I worked on this and we didn't touch anything in 1.0, thus I expect it to work on both 0.90 and 1.0. We also have tests for this which are green all the time.\n\n@s1monw we have our own custom postings highlighter, to which we added support for wildcards a while ago. Once lucene 4.7 is released I'll have a look at this again though ;)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/35113283","html_url":"https://github.com/elastic/elasticsearch/issues/5127#issuecomment-35113283","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5127","id":35113283,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTEzMjgz","user":{"login":"roytmana","id":2524911,"node_id":"MDQ6VXNlcjI1MjQ5MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2524911?v=4","gravatar_id":"","url":"https://api.github.com/users/roytmana","html_url":"https://github.com/roytmana","followers_url":"https://api.github.com/users/roytmana/followers","following_url":"https://api.github.com/users/roytmana/following{/other_user}","gists_url":"https://api.github.com/users/roytmana/gists{/gist_id}","starred_url":"https://api.github.com/users/roytmana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roytmana/subscriptions","organizations_url":"https://api.github.com/users/roytmana/orgs","repos_url":"https://api.github.com/users/roytmana/repos","events_url":"https://api.github.com/users/roytmana/events{/privacy}","received_events_url":"https://api.github.com/users/roytmana/received_events","type":"User","site_admin":false},"created_at":"2014-02-14T18:56:57Z","updated_at":"2014-02-14T18:56:57Z","author_association":"NONE","body":"@javanna  let me create a recreation and test with it explicitly specifying highlighter in query. maybe something else has changed. I will post it shortly\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/35116475","html_url":"https://github.com/elastic/elasticsearch/issues/5127#issuecomment-35116475","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5127","id":35116475,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTE2NDc1","user":{"login":"roytmana","id":2524911,"node_id":"MDQ6VXNlcjI1MjQ5MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2524911?v=4","gravatar_id":"","url":"https://api.github.com/users/roytmana","html_url":"https://github.com/roytmana","followers_url":"https://api.github.com/users/roytmana/followers","following_url":"https://api.github.com/users/roytmana/following{/other_user}","gists_url":"https://api.github.com/users/roytmana/gists{/gist_id}","starred_url":"https://api.github.com/users/roytmana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roytmana/subscriptions","organizations_url":"https://api.github.com/users/roytmana/orgs","repos_url":"https://api.github.com/users/roytmana/repos","events_url":"https://api.github.com/users/roytmana/events{/privacy}","received_events_url":"https://api.github.com/users/roytmana/received_events","type":"User","site_admin":false},"created_at":"2014-02-14T19:31:43Z","updated_at":"2014-02-14T19:31:43Z","author_association":"NONE","body":"It does not work. Here is a recreation (note I could not test actual curl as it does not take json on windows so I used different tools so excuse me if the curl syntax is broken )  \n\n```\ncurl  -XDELETE http://localhost:9200/test\n\ncurl  -XPOST http://localhost:9200/test -d '{\n  \"settings\": {\n    \"number_of_shards\": 1,\n    \"number_of_replicas\": 0\n  },\n  \"mappings\": {\n    \"ht\": {\n      \"dynamic\": \"strict\",\n      \"properties\": {\n        \"name\": {\n          \"type\": \"string\",\n          \"index_options\": \"offsets\"\n        }\n      }\n    }\n  }\n}'\n\ncurl  -XPOST http://localhost:9200/test/ht -d '{\"name\":\"photo equipment\"}'\ncurl  -XPOST http://localhost:9200/test/ht -d '{\"name\":\"photography\"}'\n\ncurl -XPOST \"http://localhost:8680/ec-search/test/ht/_search\" -d'\n{\n   \"query\": {\n      \"bool\": {\n         \"should\": [\n            {\n               \"simple_query_string\": {\n                  \"fields\": [\n                     \"_all\"\n                  ],\n                  \"query\": \"photo\"\n               }\n            }\n         ]\n      }\n   },\n   \"highlight\": {\n      \"fields\": {\n         \"name\": {\n            \"type\": \"postings\"\n         }\n      }\n   }\n}'\n\ncurl -XPOST \"http://localhost:8680/ec-search/test/ht/_search\" -d'\n{\n   \"query\": {\n      \"bool\": {\n         \"should\": [\n            {\n               \"simple_query_string\": {\n                  \"fields\": [\n                     \"_all\"\n                  ],\n                  \"query\": \"photo*\"\n               }\n            }\n         ]\n      }\n   },\n   \"highlight\": {\n      \"fields\": {\n         \"name\": {\n            \"type\": \"postings\"\n         }\n      }\n   }\n}'\n```\n\nFirst (no wildcard) query returned highlight\n\n```\n{\n   \"took\": 2,\n   \"timed_out\": false,\n   \"_shards\": {\n      \"total\": 1,\n      \"successful\": 1,\n      \"failed\": 0\n   },\n   \"hits\": {\n      \"total\": 1,\n      \"max_score\": 0.625,\n      \"hits\": [\n         {\n            \"_index\": \"test\",\n            \"_type\": \"ht\",\n            \"_id\": \"XU_c0rhUSBiu2KfVPjP-sg\",\n            \"_score\": 0.625,\n            \"_source\": {\n               \"name\": \"photo equipment\"\n            },\n            \"highlight\": {\n               \"name\": [\n                  \"<em>photo</em> equipment\"\n               ]\n            }\n         }\n      ]\n   }\n}\n```\n\nsecond did not: \n\n```\n{\n   \"took\": 1,\n   \"timed_out\": false,\n   \"_shards\": {\n      \"total\": 1,\n      \"successful\": 1,\n      \"failed\": 0\n   },\n   \"hits\": {\n      \"total\": 2,\n      \"max_score\": 1,\n      \"hits\": [\n         {\n            \"_index\": \"test\",\n            \"_type\": \"ht\",\n            \"_id\": \"XU_c0rhUSBiu2KfVPjP-sg\",\n            \"_score\": 1,\n            \"_source\": {\n               \"name\": \"photo equipment\"\n            }\n         },\n         {\n            \"_index\": \"test\",\n            \"_type\": \"ht\",\n            \"_id\": \"tJOe5F7kQJiSMjOvTNPwpg\",\n            \"_score\": 1,\n            \"_source\": {\n               \"name\": \"photography\"\n            }\n         }\n      ]\n   }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/35125352","html_url":"https://github.com/elastic/elasticsearch/issues/5127#issuecomment-35125352","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5127","id":35125352,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTI1MzUy","user":{"login":"roytmana","id":2524911,"node_id":"MDQ6VXNlcjI1MjQ5MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2524911?v=4","gravatar_id":"","url":"https://api.github.com/users/roytmana","html_url":"https://github.com/roytmana","followers_url":"https://api.github.com/users/roytmana/followers","following_url":"https://api.github.com/users/roytmana/following{/other_user}","gists_url":"https://api.github.com/users/roytmana/gists{/gist_id}","starred_url":"https://api.github.com/users/roytmana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roytmana/subscriptions","organizations_url":"https://api.github.com/users/roytmana/orgs","repos_url":"https://api.github.com/users/roytmana/repos","events_url":"https://api.github.com/users/roytmana/events{/privacy}","received_events_url":"https://api.github.com/users/roytmana/received_events","type":"User","site_admin":false},"created_at":"2014-02-14T21:12:34Z","updated_at":"2014-02-14T21:12:34Z","author_association":"NONE","body":"Another observation that is not directly related to the wildcards issue.\n\nWhen query is done on the _all field while highlighting is done on specific fields contributing to all, it works well when the fields are of string type. When the fields are numeric or date there will be no highlighting. However highlighting is done if searching on those numeric/date fields individually\n\nI guess it can't be helped due to field type loss in _all? But if it did work it would have been really great.\n\nPlease let me know if I should create a ticket for it or not\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/35252442","html_url":"https://github.com/elastic/elasticsearch/issues/5127#issuecomment-35252442","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5127","id":35252442,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjUyNDQy","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2014-02-17T12:26:36Z","updated_at":"2014-02-17T12:26:57Z","author_association":"MEMBER","body":"Hi @roytmana thanks for the recreation, I'm looking into this.\nThe problem is the same against both 0.90 and 1.0, wildcards do work but only when they are in the top-level query :) and not within compound queries. The fact that you query a specific type makes it a filtered query, which triggers this issue.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/35772929","html_url":"https://github.com/elastic/elasticsearch/issues/5127#issuecomment-35772929","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5127","id":35772929,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NzcyOTI5","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2014-02-21T20:59:29Z","updated_at":"2014-02-21T20:59:29Z","author_association":"MEMBER","body":"This was solved in #5143.\n","performed_via_github_app":null}]