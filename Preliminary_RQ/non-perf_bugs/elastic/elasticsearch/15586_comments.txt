[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/167920878","html_url":"https://github.com/elastic/elasticsearch/issues/15586#issuecomment-167920878","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15586","id":167920878,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NzkyMDg3OA==","user":{"login":"eskibars","id":2246002,"node_id":"MDQ6VXNlcjIyNDYwMDI=","avatar_url":"https://avatars0.githubusercontent.com/u/2246002?v=4","gravatar_id":"","url":"https://api.github.com/users/eskibars","html_url":"https://github.com/eskibars","followers_url":"https://api.github.com/users/eskibars/followers","following_url":"https://api.github.com/users/eskibars/following{/other_user}","gists_url":"https://api.github.com/users/eskibars/gists{/gist_id}","starred_url":"https://api.github.com/users/eskibars/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eskibars/subscriptions","organizations_url":"https://api.github.com/users/eskibars/orgs","repos_url":"https://api.github.com/users/eskibars/repos","events_url":"https://api.github.com/users/eskibars/events{/privacy}","received_events_url":"https://api.github.com/users/eskibars/received_events","type":"User","site_admin":false},"created_at":"2015-12-30T02:33:41Z","updated_at":"2015-12-30T02:33:41Z","author_association":"CONTRIBUTOR","body":"It seems you'd have only 2 options:\n1. Don't prompt for a password.  The only way this works is if you store the password somewhere.  That \"somewhere\" could be a config file, an environment variable, or a command line parameter.  The password would either have to be in plaintext in that location or encrypted using something that would be trivial for anybody to decrypt.  That is, if we decided to encrypt a password here, we'd have to pick either an arbitrary key (which somebody could easily look at in the source code) or make the key be passed in a config file, environment variable, or command line parameter, which would all suffer the same security issue as storing the plaintext password.  So we've chosen plaintext here because the alternative doesn't really give you any more security.\n2. Prompt for a password, requiring an interactive terminal.\n\nES supports prompt, environment variable, command-line parameters, and config files for passing it data.  Is there a missing option?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/167922150","html_url":"https://github.com/elastic/elasticsearch/issues/15586#issuecomment-167922150","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15586","id":167922150,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NzkyMjE1MA==","user":{"login":"joshuar","id":7401,"node_id":"MDQ6VXNlcjc0MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/7401?v=4","gravatar_id":"","url":"https://api.github.com/users/joshuar","html_url":"https://github.com/joshuar","followers_url":"https://api.github.com/users/joshuar/followers","following_url":"https://api.github.com/users/joshuar/following{/other_user}","gists_url":"https://api.github.com/users/joshuar/gists{/gist_id}","starred_url":"https://api.github.com/users/joshuar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshuar/subscriptions","organizations_url":"https://api.github.com/users/joshuar/orgs","repos_url":"https://api.github.com/users/joshuar/repos","events_url":"https://api.github.com/users/joshuar/events{/privacy}","received_events_url":"https://api.github.com/users/joshuar/received_events","type":"User","site_admin":false},"created_at":"2015-12-30T02:45:43Z","updated_at":"2015-12-30T02:47:51Z","author_association":"MEMBER","body":"Hi @eskibars,\n\nI believe there is an option 3: fetch the secret from an external application and pass this to ES (either programmatically if possible or via stdin). This appears to be a relatively common approach used where there are strict requirements of not storing passwords in plain-text on disk.\n\nThe following is a shell script that will call out to an external program to provide the secrets and pass them to ES when prompted:\n\n```\n#!/usr/bin/env bash\n\n{\n    script -qec /path/to/bin/elasticsearch <<EOF /dev/null\n$(/some/program that gets the keystore pass)\n$(/some/program that gets the truststore pass)\nEOF\n} > /dev/null\n```\n\nThis fools ES into thinking its running in an interactive terminal via the `script` program.  It would be much nicer to be able to just echo or pass those inputs in directly with, for example, shell piping. It's more pain than it should be.  If I can get around the requirement to have an interactive terminal enforced by ES, why have it at all?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/170376343","html_url":"https://github.com/elastic/elasticsearch/issues/15586#issuecomment-170376343","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15586","id":170376343,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDM3NjM0Mw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-01-10T18:11:22Z","updated_at":"2016-01-10T18:11:22Z","author_association":"CONTRIBUTOR","body":"Your password would then be available to anybody who can run that command?  if that's the case, then why not just put it in the config file.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/170398263","html_url":"https://github.com/elastic/elasticsearch/issues/15586#issuecomment-170398263","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15586","id":170398263,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDM5ODI2Mw==","user":{"login":"joshuar","id":7401,"node_id":"MDQ6VXNlcjc0MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/7401?v=4","gravatar_id":"","url":"https://api.github.com/users/joshuar","html_url":"https://github.com/joshuar","followers_url":"https://api.github.com/users/joshuar/followers","following_url":"https://api.github.com/users/joshuar/following{/other_user}","gists_url":"https://api.github.com/users/joshuar/gists{/gist_id}","starred_url":"https://api.github.com/users/joshuar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshuar/subscriptions","organizations_url":"https://api.github.com/users/joshuar/orgs","repos_url":"https://api.github.com/users/joshuar/repos","events_url":"https://api.github.com/users/joshuar/events{/privacy}","received_events_url":"https://api.github.com/users/joshuar/received_events","type":"User","site_admin":false},"created_at":"2016-01-10T22:03:39Z","updated_at":"2016-01-10T22:03:39Z","author_association":"MEMBER","body":"To adhere to security guidelines (regardless of whether those security guidelines are meaningful) for compliance in a particular industry.  Some guidelines (_cough_ PCI _cough_) explicitly forbid storing passwords in plain-text in any file.  It also means you can have a centralised source of truth for passwords rather than have them littered through a bunch of config files on multiple servers.  And the program itself may have an audit log that allows you to see when the secret is being requested and by whom and potentially other features that could restrict the access beyond file permissions.  See emerging software like [Vault](https://vaultproject.io/).\n\nBesides the security standpoint, having a central source of the passwords could be useful. It seems pointless to require an interactive terminal if I can just get around it.  Do we expect people with a 100 node cluster to enter shell into those 100 servers and  enter a password each time?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/171477957","html_url":"https://github.com/elastic/elasticsearch/issues/15586#issuecomment-171477957","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15586","id":171477957,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTQ3Nzk1Nw==","user":{"login":"eskibars","id":2246002,"node_id":"MDQ6VXNlcjIyNDYwMDI=","avatar_url":"https://avatars0.githubusercontent.com/u/2246002?v=4","gravatar_id":"","url":"https://api.github.com/users/eskibars","html_url":"https://github.com/eskibars","followers_url":"https://api.github.com/users/eskibars/followers","following_url":"https://api.github.com/users/eskibars/following{/other_user}","gists_url":"https://api.github.com/users/eskibars/gists{/gist_id}","starred_url":"https://api.github.com/users/eskibars/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eskibars/subscriptions","organizations_url":"https://api.github.com/users/eskibars/orgs","repos_url":"https://api.github.com/users/eskibars/repos","events_url":"https://api.github.com/users/eskibars/events{/privacy}","received_events_url":"https://api.github.com/users/eskibars/received_events","type":"User","site_admin":false},"created_at":"2016-01-14T00:07:26Z","updated_at":"2016-01-14T00:07:26Z","author_association":"CONTRIBUTOR","body":"Do you happen to know which requirement imposes ban on \"plain-text in any file?\"  I had a brief look at [PCI-DSS](https://www.pcisecuritystandards.org/documents/PCI_DSS_v3.pdf) provides not only requirements, but also guidance and testing procedures for each requirement, so I want to make sure that any implementation we do would not just \"not be what we have now,\" but also pass whatever testing/guidance is provided.  I think we'd need to read over the requirement/testing/guidance to make any proper decision here.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/171483228","html_url":"https://github.com/elastic/elasticsearch/issues/15586#issuecomment-171483228","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15586","id":171483228,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTQ4MzIyOA==","user":{"login":"joshuar","id":7401,"node_id":"MDQ6VXNlcjc0MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/7401?v=4","gravatar_id":"","url":"https://api.github.com/users/joshuar","html_url":"https://github.com/joshuar","followers_url":"https://api.github.com/users/joshuar/followers","following_url":"https://api.github.com/users/joshuar/following{/other_user}","gists_url":"https://api.github.com/users/joshuar/gists{/gist_id}","starred_url":"https://api.github.com/users/joshuar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshuar/subscriptions","organizations_url":"https://api.github.com/users/joshuar/orgs","repos_url":"https://api.github.com/users/joshuar/repos","events_url":"https://api.github.com/users/joshuar/events{/privacy}","received_events_url":"https://api.github.com/users/joshuar/received_events","type":"User","site_admin":false},"created_at":"2016-01-14T00:28:43Z","updated_at":"2016-01-14T00:28:43Z","author_association":"MEMBER","body":"When I looked at the guidelines, it looked like this one was applicable:\n\n```\n8.2.1 Using strong cryptography,\nrender all authentication credentials\n(such as passwords/phrases)\nunreadable during transmission and\nstorage on all system components.\n```\n\nIt possibly comes down to an interpretation here, but that reads that passwords should not be plain-text in files. \"Unreadable\" in that requirement could also be interpreted as \"unreadable to everything except the program that needs it\".\n\nExcluding encryption, what's the reason for requiring a human here? Wouldn't it be beneficial to allow users to not store these credentials in the config _and_ also not need to interactively enter them on node start-up?  Why can't it be a non-human process?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/171488836","html_url":"https://github.com/elastic/elasticsearch/issues/15586#issuecomment-171488836","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15586","id":171488836,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTQ4ODgzNg==","user":{"login":"eskibars","id":2246002,"node_id":"MDQ6VXNlcjIyNDYwMDI=","avatar_url":"https://avatars0.githubusercontent.com/u/2246002?v=4","gravatar_id":"","url":"https://api.github.com/users/eskibars","html_url":"https://github.com/eskibars","followers_url":"https://api.github.com/users/eskibars/followers","following_url":"https://api.github.com/users/eskibars/following{/other_user}","gists_url":"https://api.github.com/users/eskibars/gists{/gist_id}","starred_url":"https://api.github.com/users/eskibars/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eskibars/subscriptions","organizations_url":"https://api.github.com/users/eskibars/orgs","repos_url":"https://api.github.com/users/eskibars/repos","events_url":"https://api.github.com/users/eskibars/events{/privacy}","received_events_url":"https://api.github.com/users/eskibars/received_events","type":"User","site_admin":false},"created_at":"2016-01-14T01:01:43Z","updated_at":"2016-01-14T01:01:43Z","author_association":"CONTRIBUTOR","body":"It's not the \"what is the current status/why is it this way now\" but \"what's the concrete, required alternative\" that we should be focusing on in a GitHub ticket.\n\nThere are a number of ways to pass variables to ES, which I'm sure you're aware of.  You can do elasticsearch -Des.foo=bar, set the password in an environmental variable, use the config with plaintext, or use the config with prompt.\\* variables.  There are valuable cases for each of these, across various use cases.  If you wanted to avoid a prompt and not store the something on disk, you could use an environmental variable or command line parameters if those suit a particular use case better.\n\nI'm just not seeing/understanding any alternative that actually provides an additional tangible security benefit to these options.  If there's a requirement that actually provides real benefit/requirement that we can't meet, I do want to understand what that exact requirement is.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/171525626","html_url":"https://github.com/elastic/elasticsearch/issues/15586#issuecomment-171525626","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15586","id":171525626,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTUyNTYyNg==","user":{"login":"joshuar","id":7401,"node_id":"MDQ6VXNlcjc0MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/7401?v=4","gravatar_id":"","url":"https://api.github.com/users/joshuar","html_url":"https://github.com/joshuar","followers_url":"https://api.github.com/users/joshuar/followers","following_url":"https://api.github.com/users/joshuar/following{/other_user}","gists_url":"https://api.github.com/users/joshuar/gists{/gist_id}","starred_url":"https://api.github.com/users/joshuar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshuar/subscriptions","organizations_url":"https://api.github.com/users/joshuar/orgs","repos_url":"https://api.github.com/users/joshuar/repos","events_url":"https://api.github.com/users/joshuar/events{/privacy}","received_events_url":"https://api.github.com/users/joshuar/received_events","type":"User","site_admin":false},"created_at":"2016-01-14T04:16:25Z","updated_at":"2016-01-14T04:16:25Z","author_association":"MEMBER","body":"Passing environment variables or command-line arguments violates the \"don't exchange passwords in plain-text in transport\" requirements of these security guidelines.  So we're stuck with the prompting option.  But if I have 200 nodes, I have to enter a password 200 times.  What if the person who manages Elasticsearch shouldn't have access to that password.  Why is a human considered better security than a program? \n\nSecurity plugins like Shield are implementing solutions to handle this that will most likely mean you don't need this prompt option but you'll still store the password in plain-text briefly.  That may still violate some security guidelines and can still be exploited.   What about community/third-party plugins that need sensitive data in the config? By only allowing humans to provide this information, aren't we missing out on making it easier for users to automate their deployments without comprising flexibility and security?  \n\nSolutions like Vault do provide a tangible security benefit here.  You abstract a secret away from operations.  You get a central, controlled secret store.  You get auditing of who/what/when/where of passwords in that store.  You get policies on password aging/changing enforced more easily. There may be a whole chain of steps that unlock that vet the request and unlock that one secret. You eliminate the often faulty wetware. \n\nThe biggest direct benefit today would be allowing users who have strict security requirements around secrets another option for presenting them to Elasticsearch automatically.\n\nSo my original intention for this discussion was, why make humans required for entering passwords when a program like Vault can handle this as well?  However, this topic touches issues like PCI/security guideline compliance.  It is also beneficial to allowing an external source to provide non-secret config options to Elasticsearch without needing to modify the config file on every node when these change.  \n\nSo do we really need to **only** require humans to use the `${prompt.*}` options, especially when you can get around it anyway? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/261369769","html_url":"https://github.com/elastic/elasticsearch/issues/15586#issuecomment-261369769","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15586","id":261369769,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTM2OTc2OQ==","user":{"login":"jordansissel","id":131818,"node_id":"MDQ6VXNlcjEzMTgxOA==","avatar_url":"https://avatars1.githubusercontent.com/u/131818?v=4","gravatar_id":"","url":"https://api.github.com/users/jordansissel","html_url":"https://github.com/jordansissel","followers_url":"https://api.github.com/users/jordansissel/followers","following_url":"https://api.github.com/users/jordansissel/following{/other_user}","gists_url":"https://api.github.com/users/jordansissel/gists{/gist_id}","starred_url":"https://api.github.com/users/jordansissel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jordansissel/subscriptions","organizations_url":"https://api.github.com/users/jordansissel/orgs","repos_url":"https://api.github.com/users/jordansissel/repos","events_url":"https://api.github.com/users/jordansissel/events{/privacy}","received_events_url":"https://api.github.com/users/jordansissel/received_events","type":"User","site_admin":false},"created_at":"2016-11-17T21:07:38Z","updated_at":"2016-11-17T21:07:38Z","author_association":"CONTRIBUTOR","body":"I forget what link brought me here, but I have a suggestion.\n\nThe Java KeyStore has facilities for storing all sorts of data and protecting it with encryption. Can we reuse this for the storage unit and allow references (possibly implied based on the setting name) to data in the KeyStore?\n\nIdea is that this would prompt the user on startup for the keystore passphrase and then Elasticsearch could read the secrets it wants from this store.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/372944206","html_url":"https://github.com/elastic/elasticsearch/issues/15586#issuecomment-372944206","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15586","id":372944206,"node_id":"MDEyOklzc3VlQ29tbWVudDM3Mjk0NDIwNg==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2018-03-14T08:40:43Z","updated_at":"2018-03-14T08:40:56Z","author_association":"MEMBER","body":"Setting prompting was removed in #27216. The keystore prompting is a separate issue that will be handled through init systems.","performed_via_github_app":null}]