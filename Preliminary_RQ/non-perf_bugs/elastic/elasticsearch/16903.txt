{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/16903","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16903/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16903/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16903/events","html_url":"https://github.com/elastic/elasticsearch/issues/16903","id":137845687,"node_id":"MDU6SXNzdWUxMzc4NDU2ODc=","number":16903,"title":"Apply a wildcard query to a nested object.","user":{"login":"aghatnekar","id":17003034,"node_id":"MDQ6VXNlcjE3MDAzMDM0","avatar_url":"https://avatars1.githubusercontent.com/u/17003034?v=4","gravatar_id":"","url":"https://api.github.com/users/aghatnekar","html_url":"https://github.com/aghatnekar","followers_url":"https://api.github.com/users/aghatnekar/followers","following_url":"https://api.github.com/users/aghatnekar/following{/other_user}","gists_url":"https://api.github.com/users/aghatnekar/gists{/gist_id}","starred_url":"https://api.github.com/users/aghatnekar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aghatnekar/subscriptions","organizations_url":"https://api.github.com/users/aghatnekar/orgs","repos_url":"https://api.github.com/users/aghatnekar/repos","events_url":"https://api.github.com/users/aghatnekar/events{/privacy}","received_events_url":"https://api.github.com/users/aghatnekar/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2016-03-02T11:19:10Z","updated_at":"2016-03-02T11:43:48Z","closed_at":"2016-03-02T11:43:48Z","author_association":"NONE","active_lock_reason":null,"body":"I have the below structure (small part of a very large elastic-search document)\n\n```\nsample: {\n   {\n       \"md5sum\":\"4002cbda13066720513d1c9d55dba809\",\n       \"id\":1,\n       \"sha256sum\":\"1c6e77ec49413bf7043af2058f147fb147c4ee741fb478872f072d063f2338c5\",\n       \"sha1sum\":\"ba1e6e9a849fb4e13e92b33d023d40a0f105f908\",\n       \"created_at\":\"2016-02-02T14:25:19+00:00\",\n       \"updated_at\":\"2016-02-11T20:43:22+00:00\",\n       \"file_size\":188416,\n       \"type\":{\n          \"name\":\"EXE\"\n       },\n       \"tags\":[\n\n       ],\n       \"sampleSources\":[\n          {\n             \"filename\":\"4002cbda13066720513d1c9d55dba809\",\n             \"source\":{\n                \"name\":\"default\"\n             }\n          },\n         {\n             \"filename\":\"4002cbda13066720332513d1c9d55dba809\",\n             \"source\":{\n                \"name\":\"default\"\n             }\n          }\n       ]\n    }\n}\n```\n\nThe filter I would like to use is to find by the 'name' contained within `sample.sampleSources.source` using elastic search. I would like to use the wildcard query for the name. Below is the query I am trying.\n\n```\nGET /app/sample/_search\n{\n   \"query\": {\n      \"nested\": {\n         \"path\": \"sampleSources.source\",\n         \"query\": {\n             \"wildcard\": {\n                \"sampleSources.source.name\": \"def*\"\n             }\n         }\n      }\n   }\n} \n```\n\nBelow is the mapping\n\n```\n{  \n   \"app\":{  \n      \"mappings\":{  \n         \"sample\":{  \n            \"sampleSources\":{  \n               \"type\":\"nested\",\n               \"properties\":{  \n                  \"filename\":{  \n                     \"type\":\"string\"\n                  },\n                  \"source\":{  \n                     \"type\":\"nested\",\n                     \"properties\":{  \n                        \"name\":{  \n                           \"type\":\"string\"\n                        }\n                     }\n                  }\n               }\n            }\n         }\n      }\n   }\n}\n```\n\nThe elastic search version which I have is 1.5.2, lucene version 4.10.4. I don't see a reason why this not not work, can someone please guide? \n\nP.S. Utmost apologies, since I feel the issues in here relate to elastic search as a whole not in the actual application of it.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}