{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/36076","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36076/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36076/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36076/events","html_url":"https://github.com/elastic/elasticsearch/issues/36076","id":385878622,"node_id":"MDU6SXNzdWUzODU4Nzg2MjI=","number":36076,"title":"Option to Zip Snapshots into a Large File Instead of Many Small Files ","user":{"login":"mahaffey","id":25523383,"node_id":"MDQ6VXNlcjI1NTIzMzgz","avatar_url":"https://avatars0.githubusercontent.com/u/25523383?v=4","gravatar_id":"","url":"https://api.github.com/users/mahaffey","html_url":"https://github.com/mahaffey","followers_url":"https://api.github.com/users/mahaffey/followers","following_url":"https://api.github.com/users/mahaffey/following{/other_user}","gists_url":"https://api.github.com/users/mahaffey/gists{/gist_id}","starred_url":"https://api.github.com/users/mahaffey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mahaffey/subscriptions","organizations_url":"https://api.github.com/users/mahaffey/orgs","repos_url":"https://api.github.com/users/mahaffey/repos","events_url":"https://api.github.com/users/mahaffey/events{/privacy}","received_events_url":"https://api.github.com/users/mahaffey/received_events","type":"User","site_admin":false},"labels":[{"id":143077482,"node_id":"MDU6TGFiZWwxNDMwNzc0ODI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Snapshot/Restore","name":":Distributed/Snapshot/Restore","color":"0e8a16","default":false,"description":"Anything directly related to the `_snapshot/*` APIs"},{"id":23172,"node_id":"MDU6TGFiZWwyMzE3Mg==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Efeature","name":">feature","color":"006b75","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-11-29T18:57:06Z","updated_at":"2018-12-12T15:22:04Z","closed_at":"2018-12-12T15:21:56Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\n\r\n** Please read the guidelines below. **\r\n\r\nIssues that do not follow these guidelines are likely to be closed.\r\n\r\n1.  GitHub is reserved for bug reports and feature requests. The best place to\r\n    ask a general question is at the Elastic [forums](https://discuss.elastic.co).\r\n    GitHub is not the place for general questions.\r\n\r\n2.  Is this bug report or feature request for a supported OS? If not, it\r\n    is likely to be closed.  See https://www.elastic.co/support/matrix#show_os\r\n\r\n3.  Please fill out EITHER the feature request block or the bug report block\r\n    below, and delete the other block.\r\n\r\n-->\r\n\r\n<!-- Feature request -->\r\n\r\n**Describe the feature**:\r\n\r\nFor my use case as an ELK stack, each day is its own index. Once an index is greater than x days old, I take a snapshot and send it to AWS S3. This sends S3 many small files, some of which are only a few bytes in size. I would like to be able to further archive these to S3 Glacier after another period of time in order to save on storage costs.\r\n\r\nThe issue is that archiving from S3 standard storage to S3 Glacier storage results in 40KB of metadata for each object (file), which of course I would be charged for. 40KB times thousands of small byte sized files would result in tons of uneccessary expenses/overhead. If each index snapshot was zipped into one large file (probably in the many MB range in size) this could be a feasible long term archival solution.\r\n\r\nI also would not want to affect the abilty to restore them easily with the snapshot restore API.\r\n\r\nThanks\r\n","closed_by":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"performed_via_github_app":null}