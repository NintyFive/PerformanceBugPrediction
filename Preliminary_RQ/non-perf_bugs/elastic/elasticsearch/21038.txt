{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/21038","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21038/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21038/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21038/events","html_url":"https://github.com/elastic/elasticsearch/issues/21038","id":184188216,"node_id":"MDU6SXNzdWUxODQxODgyMTY=","number":21038,"title":"can't start Elastic Search due to translog missing \"NoSuchFileException\"","user":{"login":"superhero","id":839818,"node_id":"MDQ6VXNlcjgzOTgxOA==","avatar_url":"https://avatars2.githubusercontent.com/u/839818?v=4","gravatar_id":"","url":"https://api.github.com/users/superhero","html_url":"https://github.com/superhero","followers_url":"https://api.github.com/users/superhero/followers","following_url":"https://api.github.com/users/superhero/following{/other_user}","gists_url":"https://api.github.com/users/superhero/gists{/gist_id}","starred_url":"https://api.github.com/users/superhero/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/superhero/subscriptions","organizations_url":"https://api.github.com/users/superhero/orgs","repos_url":"https://api.github.com/users/superhero/repos","events_url":"https://api.github.com/users/superhero/events{/privacy}","received_events_url":"https://api.github.com/users/superhero/received_events","type":"User","site_admin":false},"labels":[{"id":836542781,"node_id":"MDU6TGFiZWw4MzY1NDI3ODE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Engine","name":":Distributed/Engine","color":"0e8a16","default":false,"description":"Anything around managing Lucene and the Translog in an open shard."},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false},"assignees":[{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2016-10-20T10:11:05Z","updated_at":"2018-03-16T02:42:11Z","closed_at":"2018-03-16T02:42:11Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**:\n**JVM version**:\n**OS version**:\nusing docker latest, so current version is 2.4.1\n\n**Plugins installed**: []\nno plugins\n\n**Description of the problem including expected versus actual behavior**:\n**Provide logs (if relevant)**:\n**Steps to reproduce**:\nWhen restarting the container, I get the following error 5 times for each index, different files and different folders but all are translogs:\n\n```\njava.nio.file.NoSuchFileException: /usr/share/elasticsearch/data/elasticsearch/nodes/0/indices/log/1/translog/translog-8011864828733919272.tlog\n    at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)\n    at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)\n    at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)\n    at sun.nio.fs.UnixFileSystemProvider.implDelete(UnixFileSystemProvider.java:244)\n    at sun.nio.fs.AbstractFileSystemProvider.delete(AbstractFileSystemProvider.java:103)\n    at java.nio.file.Files.delete(Files.java:1126)\n    at org.elasticsearch.index.translog.Translog.recoverFromFiles(Translog.java:324)\n    at org.elasticsearch.index.translog.Translog.<init>(Translog.java:166)\n    at org.elasticsearch.index.engine.InternalEngine.openTranslog(InternalEngine.java:209)\n    at org.elasticsearch.index.engine.InternalEngine.<init>(InternalEngine.java:152)\n    at org.elasticsearch.index.engine.InternalEngineFactory.newReadWriteEngine(InternalEngineFactory.java:25)\n    at org.elasticsearch.index.shard.IndexShard.newEngine(IndexShard.java:1408)\n    at org.elasticsearch.index.shard.IndexShard.createNewEngine(IndexShard.java:1403)\n    at org.elasticsearch.index.shard.IndexShard.internalPerformTranslogRecovery(IndexShard.java:906)\n    at org.elasticsearch.index.shard.IndexShard.performTranslogRecovery(IndexShard.java:883)\n    at org.elasticsearch.index.shard.StoreRecoveryService.recoverFromStore(StoreRecoveryService.java:245)\n    at org.elasticsearch.index.shard.StoreRecoveryService.access$100(StoreRecoveryService.java:56)\n    at org.elasticsearch.index.shard.StoreRecoveryService$1.run(StoreRecoveryService.java:129)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n[2016-10-20 09:40:27,880][WARN ][index.translog           ] [Crimson and the Raven] [log][4] failed to delete temp file /usr/share/elasticsearch/data/elasticsearch/nodes/0/indices/log/4/translog/translog-2986338167181911992.tlog\n```\n\nThe folder `/usr/share/elasticsearch/data/elasticsearch/nodes/0/indices/log/1/translog` contains `translog-165.ckp`, `translog-165.tlog`, `translog-166.tlog` and `translog.ckp`\n","closed_by":{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false},"performed_via_github_app":null}