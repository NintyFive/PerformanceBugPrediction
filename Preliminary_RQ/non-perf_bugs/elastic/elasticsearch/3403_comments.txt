[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/21718628","html_url":"https://github.com/elastic/elasticsearch/issues/3403#issuecomment-21718628","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3403","id":21718628,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNzE4NjI4","user":{"login":"jeroenr","id":332726,"node_id":"MDQ6VXNlcjMzMjcyNg==","avatar_url":"https://avatars1.githubusercontent.com/u/332726?v=4","gravatar_id":"","url":"https://api.github.com/users/jeroenr","html_url":"https://github.com/jeroenr","followers_url":"https://api.github.com/users/jeroenr/followers","following_url":"https://api.github.com/users/jeroenr/following{/other_user}","gists_url":"https://api.github.com/users/jeroenr/gists{/gist_id}","starred_url":"https://api.github.com/users/jeroenr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeroenr/subscriptions","organizations_url":"https://api.github.com/users/jeroenr/orgs","repos_url":"https://api.github.com/users/jeroenr/repos","events_url":"https://api.github.com/users/jeroenr/events{/privacy}","received_events_url":"https://api.github.com/users/jeroenr/received_events","type":"User","site_admin":false},"created_at":"2013-07-29T13:12:29Z","updated_at":"2013-07-29T13:12:29Z","author_association":"NONE","body":"This sounds really useful for my use case. I'm writing a chat application with an elasticsearch backend for geo spatial search. Users can enable a service to get notified as soon as a chat candidate comes available within their range.\n\nCurrently, it works like this:\n- User A gets online and finds no chat candidates\n- User A enables the notification service and goes offline awaiting the notification. This is stored using partial doc update.\n- User B gets online. Besides the search for online matching candidates, I do a second (asynchronous) search for matching offline users with the notification service enabled.\n- The second query finds user A and pushes user A to user B\n\nI was hoping to implement this more gracefully using the percolator. When a user enables the notification service I'd like to register a percolate query that's executed when the index changes. If matches are found for the percolate query I would like to push the resulting documents to the user that registered the percolate query.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/23366927","html_url":"https://github.com/elastic/elasticsearch/issues/3403#issuecomment-23366927","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3403","id":23366927,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMzY2OTI3","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2013-08-27T20:14:29Z","updated_at":"2013-08-27T20:14:29Z","author_association":"MEMBER","body":"I'm unsure about this feature, it can save traffic from / to the cluster, but it can result in a lot of write operations in the cluster without any way to limit it. A document being percolated can match with many percolator queries, I think it is better to just both use the multi percolate api and bulk api from the client side.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/23546097","html_url":"https://github.com/elastic/elasticsearch/issues/3403#issuecomment-23546097","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3403","id":23546097,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNTQ2MDk3","user":{"login":"skade","id":47542,"node_id":"MDQ6VXNlcjQ3NTQy","avatar_url":"https://avatars2.githubusercontent.com/u/47542?v=4","gravatar_id":"","url":"https://api.github.com/users/skade","html_url":"https://github.com/skade","followers_url":"https://api.github.com/users/skade/followers","following_url":"https://api.github.com/users/skade/following{/other_user}","gists_url":"https://api.github.com/users/skade/gists{/gist_id}","starred_url":"https://api.github.com/users/skade/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skade/subscriptions","organizations_url":"https://api.github.com/users/skade/orgs","repos_url":"https://api.github.com/users/skade/repos","events_url":"https://api.github.com/users/skade/events{/privacy}","received_events_url":"https://api.github.com/users/skade/received_events","type":"User","site_admin":false},"created_at":"2013-08-30T08:00:11Z","updated_at":"2013-08-30T08:00:11Z","author_association":"CONTRIBUTOR","body":"@martijnvg The way I am proposing it (save the result of the percolation to a field of the doc or a child doc), the number of write operations would be bounded: at most one per doc, depending on the implementation.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/23605886","html_url":"https://github.com/elastic/elasticsearch/issues/3403#issuecomment-23605886","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3403","id":23605886,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNjA1ODg2","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2013-08-31T13:02:10Z","updated_at":"2013-09-02T19:16:29Z","author_association":"MEMBER","body":"@skade A percolate request can match with millions of queries (the requests scatters to all targeted shards) how would you save that kind of results? Save all matches to one document or save it as separate documents? In the first case this one document would be massive and in the second case the number of write operations is unbounded.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/23678074","html_url":"https://github.com/elastic/elasticsearch/issues/3403#issuecomment-23678074","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3403","id":23678074,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNjc4MDc0","user":{"login":"skade","id":47542,"node_id":"MDQ6VXNlcjQ3NTQy","avatar_url":"https://avatars2.githubusercontent.com/u/47542?v=4","gravatar_id":"","url":"https://api.github.com/users/skade","html_url":"https://github.com/skade","followers_url":"https://api.github.com/users/skade/followers","following_url":"https://api.github.com/users/skade/following{/other_user}","gists_url":"https://api.github.com/users/skade/gists{/gist_id}","starred_url":"https://api.github.com/users/skade/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skade/subscriptions","organizations_url":"https://api.github.com/users/skade/orgs","repos_url":"https://api.github.com/users/skade/repos","events_url":"https://api.github.com/users/skade/events{/privacy}","received_events_url":"https://api.github.com/users/skade/received_events","type":"User","site_admin":false},"created_at":"2013-09-02T20:55:54Z","updated_at":"2013-09-02T20:55:54Z","author_association":"CONTRIBUTOR","body":"@martijnvg No, I never talked about a document per hit.\n\nThe other argument a bit arguing the edge-case. If I save all to one document - which I would probably do externally anyways - it is in my hands to keep the data managable. The hypothetical case of a vey big document would strike in any case.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/23730280","html_url":"https://github.com/elastic/elasticsearch/issues/3403#issuecomment-23730280","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3403","id":23730280,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNzMwMjgw","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2013-09-03T17:19:20Z","updated_at":"2013-09-03T17:19:20Z","author_association":"MEMBER","body":"> No, I never talked about a document per hit.\n\nOk, then I misunderstood you, so just one child doc for all percolate matches. \n\nBut I still don't understand how you would manage what matches go into the document and what matches don't get in. Obviously one can select a few percolate queries that need to be executed (limiting by query or filter), but I'm thinking about the case where more than just a few queries match with a document being percolated.\n\nThe other doubt I have is that having this feature in the percolate api, makes this api also effectively a write and read api, which doesn't seem too nice to me.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/23731477","html_url":"https://github.com/elastic/elasticsearch/issues/3403#issuecomment-23731477","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3403","id":23731477,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNzMxNDc3","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2013-09-03T17:33:34Z","updated_at":"2013-09-03T17:33:34Z","author_association":"MEMBER","body":"I also feel that the amount of configuration options that will go with this feature will make it quite complex (how do they percolation matches end up actually being indexed - child doc, additional elements, merging logic, ...). I also don't think people will actually pay that much compared to just doing it on the client side, and retaining the flexibility involved there.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/51601893","html_url":"https://github.com/elastic/elasticsearch/issues/3403#issuecomment-51601893","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3403","id":51601893,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjAxODkz","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-08-08T13:44:45Z","updated_at":"2014-08-08T13:44:45Z","author_association":"CONTRIBUTOR","body":"Agreed on the complexity issue here, and everybody will have a slightly different use case which needs extra options to support it.  Much simpler to do exactly what you need client side.  I'm going to close this one.\n","performed_via_github_app":null}]