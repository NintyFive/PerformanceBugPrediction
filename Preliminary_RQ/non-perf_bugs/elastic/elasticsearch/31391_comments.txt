[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/398298349","html_url":"https://github.com/elastic/elasticsearch/issues/31391#issuecomment-398298349","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31391","id":398298349,"node_id":"MDEyOklzc3VlQ29tbWVudDM5ODI5ODM0OQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-06-19T07:13:14Z","updated_at":"2018-06-19T07:13:14Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search-aggs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/398421889","html_url":"https://github.com/elastic/elasticsearch/issues/31391#issuecomment-398421889","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31391","id":398421889,"node_id":"MDEyOklzc3VlQ29tbWVudDM5ODQyMTg4OQ==","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2018-06-19T14:35:42Z","updated_at":"2018-06-19T14:35:42Z","author_association":"MEMBER","body":"The `enabled` setting can be applied only to the mapping type and to object fields. In case of the static mapping, elasticsearch would automatically deduce that `first` and `last` are objects based on the presence of the `enable` setting. In case of the dynamic setting, we use the actual type of the field (string) and the `enabled` flag has a strange side effect of disabling multifield but not the actual field. \u0001\r\n\r\nA workaround is to explicitly define `first` and `last` as objects:\r\n```\r\nPUT my_index\r\n{\r\n  \"mappings\": {\r\n    \"_doc\": {\r\n      \"dynamic_templates\": [\r\n        {\r\n          \"full_name\": {\r\n            \"path_match\":   \"name.*\",\r\n            \"path_unmatch\": \"*.middle\",\r\n            \"mapping\": {\r\n              \"type\": \"object\",\r\n              \"enabled\": false\r\n            }\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}\r\n```\r\nThat will work, but it's not really a good option since `first` and `last` are not really objects, so a better solution might be to just disable indexing on these fields\r\n```\r\nPUT my_index\r\n{\r\n  \"mappings\": {\r\n    \"_doc\": {\r\n      \"dynamic_templates\": [\r\n        {\r\n          \"full_name\": {\r\n            \"path_match\":   \"name.*\",\r\n            \"path_unmatch\": \"*.middle\",\r\n            \"mapping\": {\r\n              \"index\": false\r\n            }\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/398487612","html_url":"https://github.com/elastic/elasticsearch/issues/31391#issuecomment-398487612","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31391","id":398487612,"node_id":"MDEyOklzc3VlQ29tbWVudDM5ODQ4NzYxMg==","user":{"login":"derkcrezee","id":6048665,"node_id":"MDQ6VXNlcjYwNDg2NjU=","avatar_url":"https://avatars2.githubusercontent.com/u/6048665?v=4","gravatar_id":"","url":"https://api.github.com/users/derkcrezee","html_url":"https://github.com/derkcrezee","followers_url":"https://api.github.com/users/derkcrezee/followers","following_url":"https://api.github.com/users/derkcrezee/following{/other_user}","gists_url":"https://api.github.com/users/derkcrezee/gists{/gist_id}","starred_url":"https://api.github.com/users/derkcrezee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/derkcrezee/subscriptions","organizations_url":"https://api.github.com/users/derkcrezee/orgs","repos_url":"https://api.github.com/users/derkcrezee/repos","events_url":"https://api.github.com/users/derkcrezee/events{/privacy}","received_events_url":"https://api.github.com/users/derkcrezee/received_events","type":"User","site_admin":false},"created_at":"2018-06-19T17:51:16Z","updated_at":"2018-06-19T17:51:16Z","author_association":"NONE","body":"Thanks for the reply. These are both good workarounds indeed. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/483420346","html_url":"https://github.com/elastic/elasticsearch/issues/31391#issuecomment-483420346","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31391","id":483420346,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MzQyMDM0Ng==","user":{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false},"created_at":"2019-04-15T21:10:48Z","updated_at":"2019-04-15T21:10:48Z","author_association":"MEMBER","body":"I'll close this out -- while the behavior is subtle, it does not seem like there's a bug.","performed_via_github_app":null}]