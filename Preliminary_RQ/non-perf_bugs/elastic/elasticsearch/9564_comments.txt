[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/72894540","html_url":"https://github.com/elastic/elasticsearch/issues/9564#issuecomment-72894540","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9564","id":72894540,"node_id":"MDEyOklzc3VlQ29tbWVudDcyODk0NTQw","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-02-04T17:07:25Z","updated_at":"2015-02-04T17:07:25Z","author_association":"CONTRIBUTOR","body":"Whoa, no good.  I will dig ... looks like a Lucene bug.\n\nMike McCandless\n\nhttp://blog.mikemccandless.com\n\nOn Wed, Feb 4, 2015 at 12:00 PM, Will notifications@github.com wrote:\n\n> Hey there.\n> \n> After upgrading from elasticsearch 1.3.4 to 1.4.2, I noticed some odd\n> behavior with a particular regexp my application was making. It seems\n> related to the 'min-to-max' qualifier. Also, someone in IRC recommend I\n> mention @mikemccand https://github.com/mikemccand here. Thanks!\n> \n> The following works fine:\n> \n> curl -XPOST 127.0.0.1:9200/_search -d '{\"sort\":[\"path\"],\"query\":{\"regexp\":{\"path\":\"0(.[0-9]*){0,1}\"}}}'\n> \n> The following causes an exception, notice the change from 1 to 2:\n> \n> curl -XPOST 127.0.0.1:9200/_search -d '{\"sort\":[\"path\"],\"query\":{\"regexp\":{\"path\":\"0(.[0-9]*){0,2}\"}}}'\n> \n> Here's the response:\n> \n> {\"error\": \"SearchPhaseExecutionException[Failed to execute phase [query], all shards failed; hardFailures {[0f-WyJPsQSGVoGRSCAH1-w][catalog_0.1][0]: SearchParseException[[catalog_0.1][0]: from[-1],size[-1],sort[<custom:\\\"path\\\": org.elasticsearch.index.fielddata.fieldcomparator.BytesRefFieldComparatorSource@39c8716>]: Parse Failure [Failed to parse source [{\\\"sort\\\":[\\\"path\\\"],\\\"query\\\":{\\\"regexp\\\":{\\\"path\\\":\\\"0(.[0-9]_){0,3}\\\"}}}]]]; nested: IllegalStateException[from state (2) already had transitions added]; }{[0f-WyJPsQSGVoGRSCAH1-w][catalog_0.2][0]: SearchParseException[[catalog_0.2][0]: from[-1],size[-1],sort[<custom:\\\"path\\\": org.elasticsearch.index.fielddata.fieldcomparator.BytesRefFieldComparatorSource@511653fa>]: Parse Failure [Failed to parse source [{\\\"sort\\\":[\\\"path\\\"],\\\"query\\\":{\\\"regexp\\\":{\\\"path\\\":\\\"0(.[0-9]_){0,3}\\\"}}}]]]; nested: IllegalStateException[from state (2) already had transitions added]; }{[0f-WyJPsQSGVoGRSCAH1-w][catalog_0.1][1]: Sea\n>  rchParseException[[catalog_0.1][1]: from[-1],size[-1],sort[<custom:\\\"path\\\": org.elasticsearch.index.fielddata.fieldcomparator.BytesRefFieldComparatorSource@525169ca>]: Parse Failure [Failed to parse source [{\\\"sort\\\":[\\\"path\\\"],\\\"query\\\":{\\\"regexp\\\":{\\\"path\\\":\\\"0(.[0-9]_){0,3}\\\"}}}]]]; nested: IllegalStateException[from state (2) already had transitions added]; }{[0f-WyJPsQSGVoGRSCAH1-w][catalog_0.2][1]: SearchParseException[[catalog_0.2][1]: from[-1],size[-1],sort[<custom:\\\"path\\\": org.elasticsearch.index.fielddata.fieldcomparator.BytesRefFieldComparatorSource@2e31771f>]: Parse Failure [Failed to parse source [{\\\"sort\\\":[\\\"path\\\"],\\\"query\\\":{\\\"regexp\\\":{\\\"path\\\":\\\"0(.[0-9]_){0,3}\\\"}}}]]]; nested: IllegalStateException[from state (2) already had transitions added]; }{[0f-WyJPsQSGVoGRSCAH1-w][catalog_0.1][2]: SearchParseException[[catalog_0.1][2]: from[-1],size[-1],sort[<custom:\\\"path\\\": org.elasticsearch.index.fielddata.fieldcomparator.BytesRefFieldComparatorSource@7\n>  a434645>]: Parse Failure [Failed to parse source [{\\\"sort\\\":[\\\"path\\\"],\\\"query\\\":{\\\"regexp\\\":{\\\"path\\\":\\\"0(.[0-9]_){0,3}\\\"}}}]]]; nested: IllegalStateException[from state (2) already had transitions added]; }{[0f-WyJPsQSGVoGRSCAH1-w][catalog_0.2][2]: SearchParseException[[catalog_0.2][2]: from[-1],size[-1],sort[<custom:\\\"path\\\": org.elasticsearch.index.fielddata.fieldcomparator.BytesRefFieldComparatorSource@5641b256>]: Parse Failure [Failed to parse source [{\\\"sort\\\":[\\\"path\\\"],\\\"query\\\":{\\\"regexp\\\":{\\\"path\\\":\\\"0(.[0-9]_){0,3}\\\"}}}]]]; nested: IllegalStateException[from state (2) already had transitions added]; }{[0f-WyJPsQSGVoGRSCAH1-w][catalog_0.1][3]: SearchParseException[[catalog_0.1][3]: from[-1],size[-1],sort[<custom:\\\"path\\\": org.elasticsearch.index.fielddata.fieldcomparator.BytesRefFieldComparatorSource@56bcf6a7>]: Parse Failure [Failed to parse source [{\\\"sort\\\":[\\\"path\\\"],\\\"query\\\":{\\\"regexp\\\":{\\\"path\\\":\\\"0(.[0-9]_){0,3}\\\"}}}]]]; nested: IllegalStateExceptio\n>  n[from state (2) already had transitions added]; }{[0f-WyJPsQSGVoGRSCAH1-w][catalog_0.2][3]: SearchParseException[[catalog_0.2][3]: from[-1],size[-1],sort[<custom:\\\"path\\\": org.elasticsearch.index.fielddata.fieldcomparator.BytesRefFieldComparatorSource@16fdf9f4>]: Parse Failure [Failed to parse source [{\\\"sort\\\":[\\\"path\\\"],\\\"query\\\":{\\\"regexp\\\":{\\\"path\\\":\\\"0(.[0-9]_){0,3}\\\"}}}]]]; nested: IllegalStateException[from state (2) already had transitions added]; }{[0f-WyJPsQSGVoGRSCAH1-w][catalog_0.1][4]: SearchParseException[[catalog_0.1][4]: from[-1],size[-1],sort[<custom:\\\"path\\\": org.elasticsearch.index.fielddata.fieldcomparator.BytesRefFieldComparatorSource@484338f9>]: Parse Failure [Failed to parse source [{\\\"sort\\\":[\\\"path\\\"],\\\"query\\\":{\\\"regexp\\\":{\\\"path\\\":\\\"0(.[0-9]_){0,3}\\\"}}}]]]; nested: IllegalStateException[from state (2) already had transitions added]; }{[0f-WyJPsQSGVoGRSCAH1-w][catalog_0.2][4]: SearchParseException[[catalog_0.2][4]: from[-1],size[-1],sort[<cu\n>  stom:\\\"path\\\": org.elasticsearch.index.fielddata.fieldcomparator.BytesRefFieldComparatorSource@711adf93>]: Parse Failure [Failed to parse source [{\\\"sort\\\":[\\\"path\\\"],\\\"query\\\":{\\\"regexp\\\":{\\\"path\\\":\\\"0(.[0-9]_){0,3}\\\"}}}]]]; nested: IllegalStateException[from state (2) already had transitions added]; }]\", \"status\": 400}\n> \n> â€”\n> Reply to this email directly or view it on GitHub\n> https://github.com/elasticsearch/elasticsearch/issues/9564.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/72899599","html_url":"https://github.com/elastic/elasticsearch/issues/9564#issuecomment-72899599","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9564","id":72899599,"node_id":"MDEyOklzc3VlQ29tbWVudDcyODk5NTk5","user":{"login":"wkf","id":2183550,"node_id":"MDQ6VXNlcjIxODM1NTA=","avatar_url":"https://avatars3.githubusercontent.com/u/2183550?v=4","gravatar_id":"","url":"https://api.github.com/users/wkf","html_url":"https://github.com/wkf","followers_url":"https://api.github.com/users/wkf/followers","following_url":"https://api.github.com/users/wkf/following{/other_user}","gists_url":"https://api.github.com/users/wkf/gists{/gist_id}","starred_url":"https://api.github.com/users/wkf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wkf/subscriptions","organizations_url":"https://api.github.com/users/wkf/orgs","repos_url":"https://api.github.com/users/wkf/repos","events_url":"https://api.github.com/users/wkf/events{/privacy}","received_events_url":"https://api.github.com/users/wkf/received_events","type":"User","site_admin":false},"created_at":"2015-02-04T17:33:16Z","updated_at":"2015-02-04T17:33:16Z","author_association":"NONE","body":"Awesome, thanks for the help!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/72929319","html_url":"https://github.com/elastic/elasticsearch/issues/9564#issuecomment-72929319","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9564","id":72929319,"node_id":"MDEyOklzc3VlQ29tbWVudDcyOTI5MzE5","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-02-04T20:11:30Z","updated_at":"2015-02-04T20:11:30Z","author_association":"CONTRIBUTOR","body":"OK this exception was fixed in\nhttps://issues.apache.org/jira/browse/LUCENE-6046, which was included in\nLucene 4.10.3.\n\nBut Elasticsearch 1.4.2 is still based on Lucene 4.10.2 (1.5.0 will use\n4.10.3).\n\nI think we should upgrade Elasticsearch to Lucene 4.10.3 for the next 1.4.x\nrelease; I'll open a PR.\n\nMike McCandless\n\nhttp://blog.mikemccandless.com\n\nOn Wed, Feb 4, 2015 at 12:33 PM, Will notifications@github.com wrote:\n\n> Awesome, thanks for the help!\n> \n> â€”\n> Reply to this email directly or view it on GitHub\n> https://github.com/elasticsearch/elasticsearch/issues/9564#issuecomment-72899599\n> .\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/72965816","html_url":"https://github.com/elastic/elasticsearch/issues/9564#issuecomment-72965816","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9564","id":72965816,"node_id":"MDEyOklzc3VlQ29tbWVudDcyOTY1ODE2","user":{"login":"wkf","id":2183550,"node_id":"MDQ6VXNlcjIxODM1NTA=","avatar_url":"https://avatars3.githubusercontent.com/u/2183550?v=4","gravatar_id":"","url":"https://api.github.com/users/wkf","html_url":"https://github.com/wkf","followers_url":"https://api.github.com/users/wkf/followers","following_url":"https://api.github.com/users/wkf/following{/other_user}","gists_url":"https://api.github.com/users/wkf/gists{/gist_id}","starred_url":"https://api.github.com/users/wkf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wkf/subscriptions","organizations_url":"https://api.github.com/users/wkf/orgs","repos_url":"https://api.github.com/users/wkf/repos","events_url":"https://api.github.com/users/wkf/events{/privacy}","received_events_url":"https://api.github.com/users/wkf/received_events","type":"User","site_admin":false},"created_at":"2015-02-04T23:49:02Z","updated_at":"2015-02-04T23:49:02Z","author_association":"NONE","body":"Great, thanks a lot for looking in to this.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/73233026","html_url":"https://github.com/elastic/elasticsearch/issues/9564#issuecomment-73233026","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9564","id":73233026,"node_id":"MDEyOklzc3VlQ29tbWVudDczMjMzMDI2","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-02-06T13:02:10Z","updated_at":"2015-02-06T13:02:10Z","author_association":"CONTRIBUTOR","body":"OK this is fixed:\nhttps://github.com/elasticsearch/elasticsearch/commit/6bc797d508dabdf8e9e056c3b5db8148e7777a9c\n\nWill be in Elasticsearch 1.4.3...\n\nMike McCandless\n\nhttp://blog.mikemccandless.com\n\nOn Wed, Feb 4, 2015 at 6:49 PM, Will notifications@github.com wrote:\n\n> Great, thanks a lot for looking in to this.\n> \n> â€”\n> Reply to this email directly or view it on GitHub\n> https://github.com/elasticsearch/elasticsearch/issues/9564#issuecomment-72965816\n> .\n","performed_via_github_app":null}]