{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/39810","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39810/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39810/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39810/events","html_url":"https://github.com/elastic/elasticsearch/issues/39810","id":418509932,"node_id":"MDU6SXNzdWU0MTg1MDk5MzI=","number":39810,"title":"Enhance geo*_grid results with geometry information","user":{"login":"nyurik","id":1641515,"node_id":"MDQ6VXNlcjE2NDE1MTU=","avatar_url":"https://avatars0.githubusercontent.com/u/1641515?v=4","gravatar_id":"","url":"https://api.github.com/users/nyurik","html_url":"https://github.com/nyurik","followers_url":"https://api.github.com/users/nyurik/followers","following_url":"https://api.github.com/users/nyurik/following{/other_user}","gists_url":"https://api.github.com/users/nyurik/gists{/gist_id}","starred_url":"https://api.github.com/users/nyurik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nyurik/subscriptions","organizations_url":"https://api.github.com/users/nyurik/orgs","repos_url":"https://api.github.com/users/nyurik/repos","events_url":"https://api.github.com/users/nyurik/events{/privacy}","received_events_url":"https://api.github.com/users/nyurik/received_events","type":"User","site_admin":false},"labels":[{"id":141079527,"node_id":"MDU6TGFiZWwxNDEwNzk1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Analytics/Geo","name":":Analytics/Geo","color":"0e8a16","default":false,"description":"Indexing, search aggregations of geo points and shapes"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":1967499105,"node_id":"MDU6TGFiZWwxOTY3NDk5MTA1","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Analytics","name":"Team:Analytics","color":"fef2c0","default":false,"description":"Meta label for analytics/geo team"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2019-03-07T20:58:50Z","updated_at":"2020-11-09T19:12:05Z","closed_at":"2020-11-09T19:12:05Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"The new `geotile_grid`, as well as the older `geohash_grid` return bucket keys in an algorithm-specific format. This make adaption slower because it requires each client to have a copy of the key decoding algorithm in order to figure out the extent of each bucket.\r\n\r\nI would like to propose for all geo grids to include an additional value for each bucket - the geometry of the bucket.  For example, if the bucket is a rectangular shape (`geotile_grid`, `geohash_grid`, `pluscode_grid`, etc), the response would look like this:\r\n\r\n```js\r\n{\r\n  \"key\": \"0/0/0\", // geotile_grid key representing the whole world\r\n  \"geo\": [[-180,-90],[-180,90],[180,90],[180,-90]],  // GeoJSON-encoded four corners\r\n  \"count\": 42,\r\n}\r\n```\r\n\r\nFor the non-rectangular geo grids like `geohex_grid`, the `\"geo\"` value would look different, e.g. have 6 geo points for the hex cell.\r\n\r\nBenefits: simpler client - rapid developer adaption because there is no need to decode complex key into geoshape, client does not have to know the details of the hashing algorithm.\r\nCons: slightly larger resultset (each bucket will have at least 4 lat/lng pairs)\r\n\r\nOptionally, we could make this into an by-request feature - e.g. the user has to request extra geo data with an optional request parameter.","closed_by":{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false},"performed_via_github_app":null}