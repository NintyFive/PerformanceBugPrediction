[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/126328306","html_url":"https://github.com/elastic/elasticsearch/issues/12557#issuecomment-126328306","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12557","id":126328306,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNjMyODMwNg==","user":{"login":"lytvynenkoinvest","id":10185219,"node_id":"MDQ6VXNlcjEwMTg1MjE5","avatar_url":"https://avatars0.githubusercontent.com/u/10185219?v=4","gravatar_id":"","url":"https://api.github.com/users/lytvynenkoinvest","html_url":"https://github.com/lytvynenkoinvest","followers_url":"https://api.github.com/users/lytvynenkoinvest/followers","following_url":"https://api.github.com/users/lytvynenkoinvest/following{/other_user}","gists_url":"https://api.github.com/users/lytvynenkoinvest/gists{/gist_id}","starred_url":"https://api.github.com/users/lytvynenkoinvest/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lytvynenkoinvest/subscriptions","organizations_url":"https://api.github.com/users/lytvynenkoinvest/orgs","repos_url":"https://api.github.com/users/lytvynenkoinvest/repos","events_url":"https://api.github.com/users/lytvynenkoinvest/events{/privacy}","received_events_url":"https://api.github.com/users/lytvynenkoinvest/received_events","type":"User","site_admin":false},"created_at":"2015-07-30T13:41:52Z","updated_at":"2015-07-30T13:41:52Z","author_association":"NONE","body":"NettyTransportChannel.sendResponse(Throwable error) line 120 ->\nThrowableObjectOutputStream.canSerialize(error) line 85 ->\nThrowableObjectOutputStream.serialize(T t) line 74 ->\nThrowableObjectInputStream(InputStream in) line 40: constructor does not use classloader from settings\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/126330393","html_url":"https://github.com/elastic/elasticsearch/issues/12557#issuecomment-126330393","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12557","id":126330393,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNjMzMDM5Mw==","user":{"login":"lytvynenkoinvest","id":10185219,"node_id":"MDQ6VXNlcjEwMTg1MjE5","avatar_url":"https://avatars0.githubusercontent.com/u/10185219?v=4","gravatar_id":"","url":"https://api.github.com/users/lytvynenkoinvest","html_url":"https://github.com/lytvynenkoinvest","followers_url":"https://api.github.com/users/lytvynenkoinvest/followers","following_url":"https://api.github.com/users/lytvynenkoinvest/following{/other_user}","gists_url":"https://api.github.com/users/lytvynenkoinvest/gists{/gist_id}","starred_url":"https://api.github.com/users/lytvynenkoinvest/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lytvynenkoinvest/subscriptions","organizations_url":"https://api.github.com/users/lytvynenkoinvest/orgs","repos_url":"https://api.github.com/users/lytvynenkoinvest/repos","events_url":"https://api.github.com/users/lytvynenkoinvest/events{/privacy}","received_events_url":"https://api.github.com/users/lytvynenkoinvest/received_events","type":"User","site_admin":false},"created_at":"2015-07-30T13:47:40Z","updated_at":"2015-07-30T13:47:40Z","author_association":"NONE","body":"It would be great if classloader will be passed to canSerialize method like this: ThrowableObjectOutputStream.canSerialize(error, transport.settings().getClassLoader())\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/127923186","html_url":"https://github.com/elastic/elasticsearch/issues/12557#issuecomment-127923186","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12557","id":127923186,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNzkyMzE4Ng==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-08-05T08:59:39Z","updated_at":"2015-08-05T08:59:39Z","author_association":"CONTRIBUTOR","body":"Hi @lytvynenkoinvest \n\nWhich version is this in?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/127943125","html_url":"https://github.com/elastic/elasticsearch/issues/12557#issuecomment-127943125","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12557","id":127943125,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNzk0MzEyNQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-08-05T09:59:37Z","updated_at":"2015-08-05T09:59:37Z","author_association":"CONTRIBUTOR","body":"Are you running this with assertions enabeld ie. during unittests? can you provide more information about this?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/127956317","html_url":"https://github.com/elastic/elasticsearch/issues/12557#issuecomment-127956317","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12557","id":127956317,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNzk1NjMxNw==","user":{"login":"lytvynenkoinvest","id":10185219,"node_id":"MDQ6VXNlcjEwMTg1MjE5","avatar_url":"https://avatars0.githubusercontent.com/u/10185219?v=4","gravatar_id":"","url":"https://api.github.com/users/lytvynenkoinvest","html_url":"https://github.com/lytvynenkoinvest","followers_url":"https://api.github.com/users/lytvynenkoinvest/followers","following_url":"https://api.github.com/users/lytvynenkoinvest/following{/other_user}","gists_url":"https://api.github.com/users/lytvynenkoinvest/gists{/gist_id}","starred_url":"https://api.github.com/users/lytvynenkoinvest/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lytvynenkoinvest/subscriptions","organizations_url":"https://api.github.com/users/lytvynenkoinvest/orgs","repos_url":"https://api.github.com/users/lytvynenkoinvest/repos","events_url":"https://api.github.com/users/lytvynenkoinvest/events{/privacy}","received_events_url":"https://api.github.com/users/lytvynenkoinvest/received_events","type":"User","site_admin":false},"created_at":"2015-08-05T11:07:30Z","updated_at":"2015-08-05T11:07:30Z","author_association":"NONE","body":" not unit tests.\nthere are 2 classloaders: \n1) classloader that loads class in which I create and start embedded node, and \n2) threadcontextclassloader that does not contains classes of elasticsearch.\nFirst classloader I set to settings that I put to NodeBuilder.\nThen I start 2 nodes in the same cluster, and  I send requests to index(with create=true) in first node.\nPeriodicaly, first node redirects index requests to second node(round robin).\nWhen second node throws DocumentAlreadyExistsException, the second node checks can this exception be serialized or not. there is the method that serializes exception to byte array and deserializes it and tries to load this class(as I described in issue).\nBut, to load class it uses threadcontext classloader, not classloader from settings (it is first classloader from list above).\nBut, ThreadContext classloader does not contain this class and the method throws NotSerializable exception.\n\n> Среда,  5 августа 2015, 3:00 -07:00 от Simon Willnauer notifications@github.com:\n> \n> Are you running this with assertions enabeld ie. during unittests? can you provide more information about this?\n> —\n> Reply to this email directly or view it on GitHub .\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/127956344","html_url":"https://github.com/elastic/elasticsearch/issues/12557#issuecomment-127956344","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12557","id":127956344,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNzk1NjM0NA==","user":{"login":"lytvynenkoinvest","id":10185219,"node_id":"MDQ6VXNlcjEwMTg1MjE5","avatar_url":"https://avatars0.githubusercontent.com/u/10185219?v=4","gravatar_id":"","url":"https://api.github.com/users/lytvynenkoinvest","html_url":"https://github.com/lytvynenkoinvest","followers_url":"https://api.github.com/users/lytvynenkoinvest/followers","following_url":"https://api.github.com/users/lytvynenkoinvest/following{/other_user}","gists_url":"https://api.github.com/users/lytvynenkoinvest/gists{/gist_id}","starred_url":"https://api.github.com/users/lytvynenkoinvest/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lytvynenkoinvest/subscriptions","organizations_url":"https://api.github.com/users/lytvynenkoinvest/orgs","repos_url":"https://api.github.com/users/lytvynenkoinvest/repos","events_url":"https://api.github.com/users/lytvynenkoinvest/events{/privacy}","received_events_url":"https://api.github.com/users/lytvynenkoinvest/received_events","type":"User","site_admin":false},"created_at":"2015-08-05T11:07:40Z","updated_at":"2015-08-05T11:07:40Z","author_association":"NONE","body":" 1.7.1\n\n> Среда,  5 августа 2015, 2:00 -07:00 от Clinton Gormley notifications@github.com:\n> \n> Hi  @lytvynenkoinvest\n> Which version is this in?\n> —\n> Reply to this email directly or view it on GitHub .\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/175122404","html_url":"https://github.com/elastic/elasticsearch/issues/12557#issuecomment-175122404","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12557","id":175122404,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NTEyMjQwNA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-01-26T17:11:28Z","updated_at":"2016-01-26T17:11:28Z","author_association":"CONTRIBUTOR","body":"This has been completely rewritten in 2.0. Closing\n","performed_via_github_app":null}]