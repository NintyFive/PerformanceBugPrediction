{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/26594","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26594/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26594/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26594/events","html_url":"https://github.com/elastic/elasticsearch/issues/26594","id":256950705,"node_id":"MDU6SXNzdWUyNTY5NTA3MDU=","number":26594,"title":"JNA support for IBM power platform","user":{"login":"bounddog","id":13214117,"node_id":"MDQ6VXNlcjEzMjE0MTE3","avatar_url":"https://avatars3.githubusercontent.com/u/13214117?v=4","gravatar_id":"","url":"https://api.github.com/users/bounddog","html_url":"https://github.com/bounddog","followers_url":"https://api.github.com/users/bounddog/followers","following_url":"https://api.github.com/users/bounddog/following{/other_user}","gists_url":"https://api.github.com/users/bounddog/gists{/gist_id}","starred_url":"https://api.github.com/users/bounddog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bounddog/subscriptions","organizations_url":"https://api.github.com/users/bounddog/orgs","repos_url":"https://api.github.com/users/bounddog/repos","events_url":"https://api.github.com/users/bounddog/events{/privacy}","received_events_url":"https://api.github.com/users/bounddog/received_events","type":"User","site_admin":false},"labels":[{"id":144797810,"node_id":"MDU6TGFiZWwxNDQ3OTc4MTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Core","name":":Core/Infra/Core","color":"0e8a16","default":false,"description":"Core issues without another label"},{"id":605514703,"node_id":"MDU6TGFiZWw2MDU1MTQ3MDM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v5.4.2","name":"v5.4.2","color":"dddddd","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-09-12T07:55:47Z","updated_at":"2017-09-12T08:21:40Z","closed_at":"2017-09-12T08:21:40Z","author_association":"NONE","active_lock_reason":null,"body":"I installed the elasticsearch v5.4.2 on IBM power 64 platform, and found errors in elasticsearch log:\r\n\r\n[2017-09-11T05:15:46,883][WARN ][o.e.b.Natives            ] unable to load JNA native support library, native methods will be disabled.\r\njava.lang.UnsatisfiedLinkError: Native library (com/sun/jna/linux-ppc64le/libjnidispatch.so) not found in resource path ([\r\n....\r\n])\r\n        at com.sun.jna.Native.loadNativeDispatchLibraryFromClasspath(Native.java:962) ~[jna-4.4.0.jar:4.4.0 (b0)]\r\n        at com.sun.jna.Native.loadNativeDispatchLibrary(Native.java:922) ~[jna-4.4.0.jar:4.4.0 (b0)]\r\n        at com.sun.jna.Native.<clinit>(Native.java:190) ~[jna-4.4.0.jar:4.4.0 (b0)]\r\n        at sun.misc.Unsafe.ensureClassInitialized(Native Method) ~[?:1.8.0]\r\n        at java.lang.J9VMInternals.initialize(J9VMInternals.java:82) ~[?:2.6 (06-16-2017)]\r\n        at java.lang.Class.forName(Class.java:287) ~[?:2.6 (06-16-2017)]\r\n        at org.elasticsearch.bootstrap.Natives.<clinit>(Natives.java:45) [elasticsearch-5.4.2.jar:5.4.2]\r\n        at org.elasticsearch.bootstrap.Bootstrap.initializeNatives(Bootstrap.java:125) [elasticsearch-5.4.2.jar:5.4.2]\r\n        at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:194) [elasticsearch-5.4.2.jar:5.4.2]\r\n        at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:350) [elasticsearch-5.4.2.jar:5.4.2]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:123) [elasticsearch-5.4.2.jar:5.4.2]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:114) [elasticsearch-5.4.2.jar:5.4.2]\r\n        at org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:67) [elasticsearch-5.4.2.jar:5.4.2]\r\n        at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:122) [elasticsearch-5.4.2.jar:5.4.2]\r\n        at org.elasticsearch.cli.Command.main(Command.java:88) [elasticsearch-5.4.2.jar:5.4.2]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:91) [elasticsearch-5.4.2.jar:5.4.2]\r\n        at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:84) [elasticsearch-5.4.2.jar:5.4.2]\r\n[2017-09-11T05:15:46,890][WARN ][o.e.b.Natives            ] cannot register console handler because JNA is not available\r\n[2017-09-11T05:15:46,892][WARN ][o.e.b.Natives            ] cannot getrlimit RLIMIT_NPROC because JNA is not available\r\n[2017-09-11T05:15:46,892][WARN ][o.e.b.Natives            ] cannot getrlimit RLIMIT_AS beacuse JNA is not available\r\n\r\nI checked the jna-4.4.0.jar shipped in elasticsearch, it doesn't have native library for other platform support, only have windows and x86-64 support.\r\n\r\nI compared the jna-4.4.0.jar from elasticsearch with the official one downloaded from https://github.com/java-native-access/jna#download, it seems elastic team had simplified the jar, removed other platforms support.  \r\n\r\n \r\n\r\n","closed_by":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"performed_via_github_app":null}