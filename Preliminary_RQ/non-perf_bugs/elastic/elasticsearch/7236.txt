{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/7236","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7236/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7236/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7236/events","html_url":"https://github.com/elastic/elasticsearch/issues/7236","id":40054875,"node_id":"MDU6SXNzdWU0MDA1NDg3NQ==","number":7236,"title":"MapperParsingException: Root type mapping not empty after parsing (while creating mapping with dynamic template)","user":{"login":"mohsinh","id":3380065,"node_id":"MDQ6VXNlcjMzODAwNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/3380065?v=4","gravatar_id":"","url":"https://api.github.com/users/mohsinh","html_url":"https://github.com/mohsinh","followers_url":"https://api.github.com/users/mohsinh/followers","following_url":"https://api.github.com/users/mohsinh/following{/other_user}","gists_url":"https://api.github.com/users/mohsinh/gists{/gist_id}","starred_url":"https://api.github.com/users/mohsinh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mohsinh/subscriptions","organizations_url":"https://api.github.com/users/mohsinh/orgs","repos_url":"https://api.github.com/users/mohsinh/repos","events_url":"https://api.github.com/users/mohsinh/events{/privacy}","received_events_url":"https://api.github.com/users/mohsinh/received_events","type":"User","site_admin":false},"labels":[{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2014-08-12T13:32:35Z","updated_at":"2014-08-12T14:06:26Z","closed_at":"2014-08-12T14:06:26Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Hi\n\nES version : 1.3.1\n(Note : same code works with ES version 0.90.x)\n\ni copied sample dynamic template mapping from [elasticsearch documentation](http://www.elasticsearch.org/guide/en/elasticsearch/guide/current/custom-dynamic-mapping.html), which is as below. And getting same exception...\n\n{\nerror: MapperParsingException[Root type mapping not empty after parsing! Remaining fields: [mappings : {my_type={dynamic_templates=[{es={match=_es, match_mapping_type=string, mapping={type=string, analyzer=spanish}}}, {en={match=, match_mapping_type=string, mapping={type=string, analyzer=english}}}]}}]]\nstatus: 400\n}\n\n[2014-08-12 14:21:16,089][DEBUG][action.admin.indices.mapping.put] [Piper] failed to put mappings on indices [[test]], type [my_type]\norg.elasticsearch.index.mapper.MapperParsingException: Root type mapping not empty after parsing! Remaining fields:   [mappings : {my_type={dynamic_templates=[{es={match=__es, match_mapping_type=string, mapping={type=string, analyzer=spanish}}}, {en={match=_, match_mapping_type=string, mapping={type=string, analyzer=english}}}]}}]\n    at org.elasticsearch.index.mapper.DocumentMapperParser.parse(DocumentMapperParser.java:276)\n    at org.elasticsearch.index.mapper.DocumentMapperParser.parseCompressed(DocumentMapperParser.java:190)\n    at org.elasticsearch.index.mapper.MapperService.parse(MapperService.java:447)\n    at org.elasticsearch.index.mapper.MapperService.parse(MapperService.java:437)\n    at org.elasticsearch.cluster.metadata.MetaDataMappingService$4.execute(MetaDataMappingService.java:503)\n    at org.elasticsearch.cluster.service.InternalClusterService$UpdateTask.run(InternalClusterService.java:328)\n    at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:153)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n\nAny pointer ?\n\n``` java\nPUT /my_index\n{\n    \"mappings\": {\n        \"my_type\": {\n            \"dynamic_templates\": [\n                { \"es\": {\n                      \"match\":              \"*_es\", \n                      \"match_mapping_type\": \"string\",\n                      \"mapping\": {\n                          \"type\":           \"string\",\n                          \"analyzer\":       \"spanish\"\n                      }\n                }},\n                { \"en\": {\n                      \"match\":              \"*\", \n                      \"match_mapping_type\": \"string\",\n                      \"mapping\": {\n                          \"type\":           \"string\",\n                          \"analyzer\":       \"english\"\n                      }\n                }}\n            ]\n}}}\n```\n\nprobably related to issue# [6304](https://github.com/elasticsearch/elasticsearch/issues/6304)\n","closed_by":{"login":"mohsinh","id":3380065,"node_id":"MDQ6VXNlcjMzODAwNjU=","avatar_url":"https://avatars0.githubusercontent.com/u/3380065?v=4","gravatar_id":"","url":"https://api.github.com/users/mohsinh","html_url":"https://github.com/mohsinh","followers_url":"https://api.github.com/users/mohsinh/followers","following_url":"https://api.github.com/users/mohsinh/following{/other_user}","gists_url":"https://api.github.com/users/mohsinh/gists{/gist_id}","starred_url":"https://api.github.com/users/mohsinh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mohsinh/subscriptions","organizations_url":"https://api.github.com/users/mohsinh/orgs","repos_url":"https://api.github.com/users/mohsinh/repos","events_url":"https://api.github.com/users/mohsinh/events{/privacy}","received_events_url":"https://api.github.com/users/mohsinh/received_events","type":"User","site_admin":false},"performed_via_github_app":null}