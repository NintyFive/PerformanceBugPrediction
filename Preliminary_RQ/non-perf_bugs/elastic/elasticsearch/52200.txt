{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/52200","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52200/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52200/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52200/events","html_url":"https://github.com/elastic/elasticsearch/issues/52200","id":563203291,"node_id":"MDU6SXNzdWU1NjMyMDMyOTE=","number":52200,"title":"[Transform] transform can not be disabled on a subset of master-e/data nodes","user":{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false},"labels":[{"id":1272783040,"node_id":"MDU6TGFiZWwxMjcyNzgzMDQw","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:ml/Transform","name":":ml/Transform","color":"0e8a16","default":false,"description":"Transform"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-02-11T13:22:38Z","updated_at":"2020-03-02T08:01:19Z","closed_at":"2020-03-02T08:01:19Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Affected versions**:7.2 ->\r\n\r\n**Problem:** Transform uses the persistent task framework and places its task on a node out of  all data nodes. The placement is based on load and can not be controlled.\r\n\r\n**Mitigation:** Do not disable transform on a subset of nodes. The limitation has been document in #52194\r\n\r\n**Important remark:** The transform task uses very few resources, it only coordinates the data flow between search and index operations. The resource heavy tasks, be it search/data aggregations and indexing run on the data node that holds the corresponding shards. \r\n\r\n## Solution\r\n\r\nTransform should allow to control on which nodes it runs. This can be done similar to ML which uses a `node.ml` setting. Transform should add a `node.transform` setting to explicitly disable transform on a certain node. In addition to that `xpack.transform.enabled: false` should implicitly disable transform assignment on that node (although we think disabling the plugin is not the right way to do it).\r\n\r\nRelated issue: #50033","closed_by":{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false},"performed_via_github_app":null}