[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/48915030","html_url":"https://github.com/elastic/elasticsearch/issues/6852#issuecomment-48915030","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6852","id":48915030,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4OTE1MDMw","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2014-07-14T15:33:14Z","updated_at":"2014-07-14T15:33:14Z","author_association":"MEMBER","body":"At this time, arbitrary objects are serialized with toString() when converted to json.  What exactly are you trying to encoded (more than just the simple String example you have here?)? Could you encode the data as multiple parameters?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/48919930","html_url":"https://github.com/elastic/elasticsearch/issues/6852#issuecomment-48919930","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6852","id":48919930,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4OTE5OTMw","user":{"login":"DavidGOrtega","id":414967,"node_id":"MDQ6VXNlcjQxNDk2Nw==","avatar_url":"https://avatars2.githubusercontent.com/u/414967?v=4","gravatar_id":"","url":"https://api.github.com/users/DavidGOrtega","html_url":"https://github.com/DavidGOrtega","followers_url":"https://api.github.com/users/DavidGOrtega/followers","following_url":"https://api.github.com/users/DavidGOrtega/following{/other_user}","gists_url":"https://api.github.com/users/DavidGOrtega/gists{/gist_id}","starred_url":"https://api.github.com/users/DavidGOrtega/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DavidGOrtega/subscriptions","organizations_url":"https://api.github.com/users/DavidGOrtega/orgs","repos_url":"https://api.github.com/users/DavidGOrtega/repos","events_url":"https://api.github.com/users/DavidGOrtega/events{/privacy}","received_events_url":"https://api.github.com/users/DavidGOrtega/received_events","type":"User","site_admin":false},"created_at":"2014-07-14T16:09:02Z","updated_at":"2014-07-14T16:09:18Z","author_association":"NONE","body":"I left ObjectTest as a valid example of Object that can no be deseralized/casted. \nMy objects are  more complex so far but the essence is the same: the native script can't cast to the original object.\n\nI have seen that sending Lists or Maps works but also for Strings or numbers, oviously, if the serialization is done by toString method the only thing I'm going to have on the other side is going to be the pointer reference.\n\nI dont understand why they are being converted to json. It's java code talking to java code. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/48923154","html_url":"https://github.com/elastic/elasticsearch/issues/6852#issuecomment-48923154","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6852","id":48923154,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4OTIzMTU0","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2014-07-14T16:33:39Z","updated_at":"2014-07-14T16:33:48Z","author_association":"MEMBER","body":"> I dont understand why they are being converted to json. It's java code talking to java code.\n\nYou're code is building a request, with java code, to send to the ES server. The request is serialized into json when sent to the server.\n\nIf you _really_ need this, then you could implement toString() in your object to serialize to a byte array, then to a base64 string.  In your script constructor, then decode the base64 and back to unserialize.  But this would be _horribly_ inefficient.  It would be better to just pass your data as json-\"isable\" to the parameters.   \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/48926813","html_url":"https://github.com/elastic/elasticsearch/issues/6852#issuecomment-48926813","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6852","id":48926813,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4OTI2ODEz","user":{"login":"DavidGOrtega","id":414967,"node_id":"MDQ6VXNlcjQxNDk2Nw==","avatar_url":"https://avatars2.githubusercontent.com/u/414967?v=4","gravatar_id":"","url":"https://api.github.com/users/DavidGOrtega","html_url":"https://github.com/DavidGOrtega","followers_url":"https://api.github.com/users/DavidGOrtega/followers","following_url":"https://api.github.com/users/DavidGOrtega/following{/other_user}","gists_url":"https://api.github.com/users/DavidGOrtega/gists{/gist_id}","starred_url":"https://api.github.com/users/DavidGOrtega/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DavidGOrtega/subscriptions","organizations_url":"https://api.github.com/users/DavidGOrtega/orgs","repos_url":"https://api.github.com/users/DavidGOrtega/repos","events_url":"https://api.github.com/users/DavidGOrtega/events{/privacy}","received_events_url":"https://api.github.com/users/DavidGOrtega/received_events","type":"User","site_admin":false},"created_at":"2014-07-14T17:02:14Z","updated_at":"2014-07-14T17:02:14Z","author_association":"NONE","body":"> You're code is building a request, with java code, to send to the ES server. The request is serialized into json when sent to the server.\n\nIn reality is a request inside a rest plugin. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/48927772","html_url":"https://github.com/elastic/elasticsearch/issues/6852#issuecomment-48927772","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6852","id":48927772,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4OTI3Nzcy","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2014-07-14T17:10:03Z","updated_at":"2014-07-14T17:10:03Z","author_association":"MEMBER","body":"In summary, you either need to explicitly serialize your object to json friendly structures when adding to the parameters map, or implement toString with your own deserialization upon extraction from parameters in your script.\n","performed_via_github_app":null}]