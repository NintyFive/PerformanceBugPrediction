[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/441561565","html_url":"https://github.com/elastic/elasticsearch/issues/35882#issuecomment-441561565","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35882","id":441561565,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTU2MTU2NQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-11-26T08:50:23Z","updated_at":"2018-11-26T08:50:23Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/456059092","html_url":"https://github.com/elastic/elasticsearch/issues/35882#issuecomment-456059092","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35882","id":456059092,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjA1OTA5Mg==","user":{"login":"lipsill","id":39668292,"node_id":"MDQ6VXNlcjM5NjY4Mjky","avatar_url":"https://avatars0.githubusercontent.com/u/39668292?v=4","gravatar_id":"","url":"https://api.github.com/users/lipsill","html_url":"https://github.com/lipsill","followers_url":"https://api.github.com/users/lipsill/followers","following_url":"https://api.github.com/users/lipsill/following{/other_user}","gists_url":"https://api.github.com/users/lipsill/gists{/gist_id}","starred_url":"https://api.github.com/users/lipsill/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lipsill/subscriptions","organizations_url":"https://api.github.com/users/lipsill/orgs","repos_url":"https://api.github.com/users/lipsill/repos","events_url":"https://api.github.com/users/lipsill/events{/privacy}","received_events_url":"https://api.github.com/users/lipsill/received_events","type":"User","site_admin":false},"created_at":"2019-01-21T12:33:55Z","updated_at":"2019-01-21T12:33:55Z","author_association":"CONTRIBUTOR","body":"I had a look at this and the issue seems to be that `_aliases` support two separate fields `index` and `indices`. If an `index` is provided, ES will take the expression as is (without splitting it by `,`), and then try to resolve it. Hence ES cannot find the expression `test-*,-test-1`. \r\nIf `\"index\":\"test-*\"` is provided, both `test-1` and `test-2` are deleted. If you want to delete only `test-2`, please use `\"indices\" : [\"test-*\", \"-test-1\"]` \r\n\r\nTo delete `test-2` using `_aliases` endpoint\r\n```\r\nPOST _aliases\r\n{\r\n  \"actions\": [{\r\n    \"remove_index\": {\r\n      \"indices\": [\"test-*\", \"-test-1\"]\r\n    }\r\n  }]\r\n}\r\n```\r\nTo delete `test-1` and `test-2`\r\n```\r\nPOST _aliases\r\n{\r\n  \"actions\": [{\r\n    \"remove_index\": {\r\n      \"index\": \"test-*\"\r\n    }\r\n  }]\r\n}\r\n```\r\n```\r\nPOST _aliases\r\n{\r\n  \"actions\": [{\r\n    \"remove_index\": {\r\n      \"index\": \"test-*,-test-1\"\r\n    }\r\n  }]\r\n}\r\n```\r\nresults in \r\n```\r\n\"type\" : \"index_not_found_exception\",\r\n\"reason\" : \"no such index\",\r\n\"resource.type\" : \"index_or_alias\",\r\n\"resource.id\" : \"test-*,-test-1\",\r\n```\r\n\r\nThis difference is also documented in [Multiple Indices](https://www.elastic.co/guide/en/elasticsearch/reference/master/multi-index.html) Note\r\n> Single index APIs such as the Document APIs and the single-index alias APIs do not support multiple indices.\r\n\r\n@exe-dealer @colings86 I *think* that `_aliases` works as documented. \r\n\r\nAnother option is to change the alias API\r\n- split the `index` by comma - this will align it with the other APIs that support multiple indices\r\n- split the `index` by comma and deprecate `indices` to avoid any further confusion","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/457791144","html_url":"https://github.com/elastic/elasticsearch/issues/35882#issuecomment-457791144","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35882","id":457791144,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1Nzc5MTE0NA==","user":{"login":"exe-dealer","id":3988889,"node_id":"MDQ6VXNlcjM5ODg4ODk=","avatar_url":"https://avatars2.githubusercontent.com/u/3988889?v=4","gravatar_id":"","url":"https://api.github.com/users/exe-dealer","html_url":"https://github.com/exe-dealer","followers_url":"https://api.github.com/users/exe-dealer/followers","following_url":"https://api.github.com/users/exe-dealer/following{/other_user}","gists_url":"https://api.github.com/users/exe-dealer/gists{/gist_id}","starred_url":"https://api.github.com/users/exe-dealer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/exe-dealer/subscriptions","organizations_url":"https://api.github.com/users/exe-dealer/orgs","repos_url":"https://api.github.com/users/exe-dealer/repos","events_url":"https://api.github.com/users/exe-dealer/events{/privacy}","received_events_url":"https://api.github.com/users/exe-dealer/received_events","type":"User","site_admin":false},"created_at":"2019-01-26T02:00:17Z","updated_at":"2019-01-26T02:00:17Z","author_association":"NONE","body":"I would never guess that \"indices\" accepts wildcards and even negation. \r\n`\"indices\": [\"test-*\", \"-test-1\"]` solves my problem, thank you @lipsill ","performed_via_github_app":null}]