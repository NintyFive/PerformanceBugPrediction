{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/20877","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20877/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20877/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20877/events","html_url":"https://github.com/elastic/elasticsearch/issues/20877","id":182460578,"node_id":"MDU6SXNzdWUxODI0NjA1Nzg=","number":20877,"title":"Scoring bug in 2.3","user":{"login":"drount","id":354385,"node_id":"MDQ6VXNlcjM1NDM4NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/354385?v=4","gravatar_id":"","url":"https://api.github.com/users/drount","html_url":"https://github.com/drount","followers_url":"https://api.github.com/users/drount/followers","following_url":"https://api.github.com/users/drount/following{/other_user}","gists_url":"https://api.github.com/users/drount/gists{/gist_id}","starred_url":"https://api.github.com/users/drount/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drount/subscriptions","organizations_url":"https://api.github.com/users/drount/orgs","repos_url":"https://api.github.com/users/drount/repos","events_url":"https://api.github.com/users/drount/events{/privacy}","received_events_url":"https://api.github.com/users/drount/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":16,"created_at":"2016-10-12T08:06:03Z","updated_at":"2016-10-17T16:24:03Z","closed_at":"2016-10-17T16:24:03Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**: 2.3\n\n**Plugins installed**: []\n\n**JVM version**:\nDeployed on AWS\n**OS version**:\nDeployed on AWS\n**Description of the problem including expected versus actual behavior**:\n\nI have a database deployed in Amazon Elasticsearch with about 20M documents. The document schema defines simple analysers and fields are all are strings. There is 1 replica and 1 shard. _all is disabled.\n\nA query to a field with exactly the same value as the field in document I am looking for results in other documents being scored higher. Doing an explain, results in a weird results:\n\nQuery:\n\n{'query': {'bool': {'must': [{'match': {'title': 'todo el mundo lo sabe'}}]}}}\n\nResult:\nhttp://pastebin.com/vdxzc6nM\n\nAs you can see, the result of the last value of the explain and the final _score is different.\n\nFor other documents, this is not the case. The result of explain is the same as the result of _score.\n\nIs this a bug?\n\nThank you. \n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}