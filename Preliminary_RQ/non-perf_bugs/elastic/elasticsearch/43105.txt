{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/43105","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43105/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43105/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43105/events","html_url":"https://github.com/elastic/elasticsearch/issues/43105","id":454761253,"node_id":"MDU6SXNzdWU0NTQ3NjEyNTM=","number":43105,"title":"Cancel search request when its underlying connection gets closed","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":23172,"node_id":"MDU6TGFiZWwyMzE3Mg==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Efeature","name":">feature","color":"006b75","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-06-11T15:33:17Z","updated_at":"2019-12-16T22:18:08Z","closed_at":"2019-12-16T22:18:07Z","author_association":"MEMBER","active_lock_reason":null,"body":"Every search request is associated with an internal task that can be found through the list tasks API. Such task can be cancelled and throughout the execution of a search request we make the best effort of stopping it whenever the corresponding parent task has been cancelled by calling the cancel task API.\r\n\r\nFrom a user perspective, cancelling a query could be made easier. One has to call list tasks, find out which task is associated with which query, which involves listing the tasks from each node in the cluster. Once the task has been found, the cancel task API can be called providing the task id as argument.\r\n\r\nA way to simplify cancelling queries would be to detect whenever the underlying connection gets closed, which is what happens when a request times out on the client side, and pro-actively cancel the corresponding task. There would be no additional calls required, and queries would get cancelled automatically which would improve things on the server-side too as we would no longer rely on users to remember that they have to cancel their queries.","closed_by":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"performed_via_github_app":null}