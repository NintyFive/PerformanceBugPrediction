[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227021288","html_url":"https://github.com/elastic/elasticsearch/issues/18961#issuecomment-227021288","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18961","id":227021288,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzAyMTI4OA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-06-19T21:27:12Z","updated_at":"2016-06-19T21:27:12Z","author_association":"CONTRIBUTOR","body":"It depends....  I can have a look at this on Monday probably.\nOn Jun 19, 2016 2:43 PM, \"Robert Muir\" notifications@github.com wrote:\n\n> I want to revamp this doc, i really do. But right now the examples in\n> there aren't really being tested. I can put garbage methods in scripts and\n> nothing fails. Perhaps its only compiling them and not actually running\n> them against any documents, I don't know...\n> \n> â€”\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> https://github.com/elastic/elasticsearch/issues/18961, or mute the\n> thread\n> https://github.com/notifications/unsubscribe/AANLooD47dTKWuHY_KDuEshfsNFNLEk7ks5qNY3MgaJpZM4I5OUr\n> .\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227023089","html_url":"https://github.com/elastic/elasticsearch/issues/18961#issuecomment-227023089","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18961","id":227023089,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzAyMzA4OQ==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2016-06-19T22:03:12Z","updated_at":"2016-06-19T22:03:12Z","author_association":"CONTRIBUTOR","body":"Thanks... It may be a simple bug in the examples themselves. Generated yaml seemed ok but no expert... I just have the feeling no actual docs are being hit\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227111263","html_url":"https://github.com/elastic/elasticsearch/issues/18961#issuecomment-227111263","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18961","id":227111263,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzExMTI2Mw==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2016-06-20T10:55:13Z","updated_at":"2016-06-20T10:55:13Z","author_association":"CONTRIBUTOR","body":"here is an example of what i'm trying that isn't provoking any fail. Of course this will compile, but if it were actually to run on any document it would crap out:\n\n```\n--- a/docs/reference/modules/scripting/painless.asciidoc\n+++ b/docs/reference/modules/scripting/painless.asciidoc\n@@ -109,7 +109,7 @@ GET hockey/_search\n     \"total_goals\": {\n       \"script\": {\n         \"lang\": \"painless\",\n-        \"inline\": \"int total = 0; for (int i = 0; i < doc['goals'].length; ++i) { total += doc['goals'][i]; } return total;\"\n+        \"inline\": \"doc['goals'].bogusMethod()\"\n       }\n     }\n   }\n```\n\nSince we have a lot of dynamic functionality i want it to catch me if i screw up. Part of the problem I think is that our examples are too lenient? I imagine having a lot of these to explain various syntax and stuff like that... Is there another way to encode checks other than `//TESTRESPONSE` ? Or another way to put it, a way to do `//TESTRESPONSE` but without it being user-visible in the docs?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227180400","html_url":"https://github.com/elastic/elasticsearch/issues/18961#issuecomment-227180400","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18961","id":227180400,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzE4MDQwMA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-06-20T15:40:25Z","updated_at":"2016-06-20T15:40:25Z","author_association":"CONTRIBUTOR","body":"> Or another way to put it, a way to do //TESTRESPONSE but without it being user-visible in the docs?\n\nYes, use comment blocks:\n\n```\n////////////////////\nNone of this is visible:\n\n[source,js]\n---------------\nPUT foo/bar/1\n{ \"foo\": 5 }\n---------------\n// TEST\n////////////////////\n\nThis example is visible:\n\n[source,js]\n---------------\nGET foo/_search\n{\n  \"script_fields\": {\n    \"my_field\": {\n      \"script\": {\n        \"lang\": \"painless\",\n        \"inline\": \"doc['foo'].value+1\"\n      }\n    }\n  }\n}\n---------------\n// CONSOLE\n// TEST[continued]\n\n////////////////////\nThe response can be hidden as well\n\n[source,js]\n---------------\n{\n  \"took\": 2,\n  \"timed_out\": false,\n  \"_shards\": {\n    \"total\": 5,\n    \"successful\": 5,\n    \"failed\": 0\n  },\n  \"hits\": {\n    \"total\": 1,\n    \"max_score\": 1,\n    \"hits\": [\n      {\n        \"_index\": \"foo\",\n        \"_type\": \"bar\",\n        \"_id\": \"1\",\n        \"_score\": 1,\n        \"fields\": {\n          \"my_field\": [\n            6\n          ]\n        }\n      }\n    ]\n  }\n}\n---------------\n// TESTRESPONSE[s/\"took\".*/\"took\": \"$body.took\",/]\n////////////////////\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227182141","html_url":"https://github.com/elastic/elasticsearch/issues/18961#issuecomment-227182141","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18961","id":227182141,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzE4MjE0MQ==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2016-06-20T15:46:15Z","updated_at":"2016-06-20T15:46:15Z","author_association":"CONTRIBUTOR","body":"thanks @clintongormley \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227440953","html_url":"https://github.com/elastic/elasticsearch/issues/18961#issuecomment-227440953","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18961","id":227440953,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzQ0MDk1Mw==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T13:34:29Z","updated_at":"2016-06-21T13:34:29Z","author_association":"CONTRIBUTOR","body":"I merged https://github.com/elastic/elasticsearch/pull/18979 which might make the comments not a required thing for painless. You bogusMethod example fails now. I'm going to close this because I think it is enough. If not, open it again.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227442727","html_url":"https://github.com/elastic/elasticsearch/issues/18961#issuecomment-227442727","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/18961","id":227442727,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzQ0MjcyNw==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2016-06-21T13:40:35Z","updated_at":"2016-06-21T13:40:35Z","author_association":"CONTRIBUTOR","body":"@nik9000 thanks a lot for looking into this!\n","performed_via_github_app":null}]