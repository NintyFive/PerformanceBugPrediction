[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/75062924","html_url":"https://github.com/elastic/elasticsearch/issues/9762#issuecomment-75062924","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9762","id":75062924,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MDYyOTI0","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-02-19T14:45:03Z","updated_at":"2015-02-19T14:45:03Z","author_association":"CONTRIBUTOR","body":"Elasticsearch duplicates your content depending on what it needs to do with it:\n- it has a store which typically stores the `_source` and is useful to give data back\n- it has an inverted index that is used for searching/filtering\n- and finally \"fielddata\" which is a columnar view on your data that it uses for aggregations and sorting.\n\nThis last thing is what is useful in your case. However elasticsearch does not store fielddata by default but builds it in memory from the inverted index on the first time that you need it. This is why you can only sort and aggregate on fields that are indexed by default.\n\nIf you don't need to search but only to aggregate on these fields, you can disable indexing (index: no) but you need to tell elasticsearch to store fielddata at indexing time. The name of this feature is called `doc_values`, see http://www.elasticsearch.org/guide/en/elasticsearch/guide/current/doc-values.html.\n\nAlso note that `index: no` will prevent you from not only searching for individual terms, but also running range, prefix, wildcard queries or filters.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/75068851","html_url":"https://github.com/elastic/elasticsearch/issues/9762#issuecomment-75068851","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9762","id":75068851,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MDY4ODUx","user":{"login":"kamaradclimber","id":503537,"node_id":"MDQ6VXNlcjUwMzUzNw==","avatar_url":"https://avatars1.githubusercontent.com/u/503537?v=4","gravatar_id":"","url":"https://api.github.com/users/kamaradclimber","html_url":"https://github.com/kamaradclimber","followers_url":"https://api.github.com/users/kamaradclimber/followers","following_url":"https://api.github.com/users/kamaradclimber/following{/other_user}","gists_url":"https://api.github.com/users/kamaradclimber/gists{/gist_id}","starred_url":"https://api.github.com/users/kamaradclimber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kamaradclimber/subscriptions","organizations_url":"https://api.github.com/users/kamaradclimber/orgs","repos_url":"https://api.github.com/users/kamaradclimber/repos","events_url":"https://api.github.com/users/kamaradclimber/events{/privacy}","received_events_url":"https://api.github.com/users/kamaradclimber/received_events","type":"User","site_admin":false},"created_at":"2015-02-19T15:17:18Z","updated_at":"2015-02-19T15:17:18Z","author_association":"NONE","body":"thanks a lot for the detailed explaination\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/197849954","html_url":"https://github.com/elastic/elasticsearch/issues/9762#issuecomment-197849954","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9762","id":197849954,"node_id":"MDEyOklzc3VlQ29tbWVudDE5Nzg0OTk1NA==","user":{"login":"ivanprostran","id":17903028,"node_id":"MDQ6VXNlcjE3OTAzMDI4","avatar_url":"https://avatars3.githubusercontent.com/u/17903028?v=4","gravatar_id":"","url":"https://api.github.com/users/ivanprostran","html_url":"https://github.com/ivanprostran","followers_url":"https://api.github.com/users/ivanprostran/followers","following_url":"https://api.github.com/users/ivanprostran/following{/other_user}","gists_url":"https://api.github.com/users/ivanprostran/gists{/gist_id}","starred_url":"https://api.github.com/users/ivanprostran/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivanprostran/subscriptions","organizations_url":"https://api.github.com/users/ivanprostran/orgs","repos_url":"https://api.github.com/users/ivanprostran/repos","events_url":"https://api.github.com/users/ivanprostran/events{/privacy}","received_events_url":"https://api.github.com/users/ivanprostran/received_events","type":"User","site_admin":false},"created_at":"2016-03-17T12:07:41Z","updated_at":"2016-03-17T12:07:41Z","author_association":"NONE","body":"> If you don't need to search but only to aggregate on these fields, you can disable indexing (index: no) but you need to tell elasticsearch to store fielddata at indexing time. The name of this feature is called doc_values,\n\nI have done that but I'm still having the same visualization problem in Kibana v4.2.2 (elastic 2.2.x).\n\nSome field definition is as follows:\n\n\"SomeCounterToSumOrAgregate\": {\n                    \"type\": \"long\",\"store\":\"yes\",\"index\": \"no\",\"doc_values\": true\n    },\n\nand I am not able to sum/aggregate it because *\\* Kibana doesn't show it.*\\* as already stated in the subject.\n\nIf I'm not wrong \"doc_values\" feature is an optimization for \"fielddata\" according to the official documentation --> https://www.elastic.co/guide/en/elasticsearch/guide/current/doc-values.html.\n\n...And there is nothing wrong with that, actually Elastic back-end  returns the data properly as stated in documentation, so  this is clearly Kibana's behavior. \n\nI would appreciate any suggestion on how to make Kibana show  non-indexed fields (visualization)\nTo be more specific I'm not even clear about  whether it is a bug or feature.\nWhat I understand is the following: I don't need massive unique data (counters, bytes or something like that) to be indexed. It is clearly unnecessary overhead.\n\nThanks !\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/477117540","html_url":"https://github.com/elastic/elasticsearch/issues/9762#issuecomment-477117540","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9762","id":477117540,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzExNzU0MA==","user":{"login":"surabhi1029","id":17429946,"node_id":"MDQ6VXNlcjE3NDI5OTQ2","avatar_url":"https://avatars2.githubusercontent.com/u/17429946?v=4","gravatar_id":"","url":"https://api.github.com/users/surabhi1029","html_url":"https://github.com/surabhi1029","followers_url":"https://api.github.com/users/surabhi1029/followers","following_url":"https://api.github.com/users/surabhi1029/following{/other_user}","gists_url":"https://api.github.com/users/surabhi1029/gists{/gist_id}","starred_url":"https://api.github.com/users/surabhi1029/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surabhi1029/subscriptions","organizations_url":"https://api.github.com/users/surabhi1029/orgs","repos_url":"https://api.github.com/users/surabhi1029/repos","events_url":"https://api.github.com/users/surabhi1029/events{/privacy}","received_events_url":"https://api.github.com/users/surabhi1029/received_events","type":"User","site_admin":false},"created_at":"2019-03-27T11:56:38Z","updated_at":"2019-03-28T07:10:51Z","author_association":"NONE","body":"@kamaradclimber I am trying to use \"doc_values\": true in my mapping, however it is throwing mapping parser exception: \"reason\": \"Mapping definition for [stats] has unsupported parameters:  [doc_values : true]\"\r\n\r\nMy es version: 6.0.0\r\npayload i am using:\r\nPUT filebeat-6.2.2-2019.03.27\r\n{\r\n\t\"mappings\": {\r\n\t\t\"_default_\": {\r\n\t\t\t\"_all\": {\r\n\t\t\t\t\"enabled\": false\r\n\t\t\t}\r\n\t\t},\r\n\t\t\"doc\": {\r\n\t\t\t\"properties\": {\r\n\t\t\t\t\"name\": {\r\n\t\t\t\t\t\"type\": \"keyword\"\r\n\t\t\t\t},\r\n\t\t\t\t\"dt\": {\r\n\t\t\t\t\t\"enabled\": false\r\n\t\t\t\t},\r\n\t\t\t\t\"cb\": {\r\n\t\t\t\t\t\"enabled\": false\r\n\t\t\t\t},\r\n\t\t\t\t\"cd\": {\r\n\t\t\t\t\t\"enabled\": false\r\n\t\t\t\t},\r\n\t\t\t\t\"delivered_at\": {\r\n\t\t\t\t\t\"enabled\": false\r\n\t\t\t\t},\r\n\t\t\t\t\"app\": {\r\n\t\t\t\t\t\"type\": \"keyword\"\r\n\t\t\t\t},\r\n\t\t\t\t\"md\": {\r\n\t\t\t\t\t\"enabled\": false\r\n\t\t\t\t},\r\n\t\t\t\t\"read_at\": {\r\n\t\t\t\t\t\"enabled\": false\r\n\t\t\t\t},\r\n\t\t\t\t\"rp\": {\r\n\t\t\t\t\t\"enabled\": false\r\n\t\t\t\t},\r\n\t\t\t\t\"vendor\": {\r\n\t\t\t\t\t\"enabled\": false\r\n\t\t\t\t},\r\n\t\t\t\t\"ch\": {\r\n\t\t\t\t\t\"type\": \"keyword\"\r\n\t\t\t\t},\r\n\t\t\t\t\"message\": {\r\n\t\t\t\t\t\"type\": \"text\"\r\n\t\t\t\t},\r\n\t\t\t\t\"nid\": {\r\n\t\t\t\t\t\"type\": \"keyword\"\r\n\t\t\t\t},\r\n\t\t\t\t\"nm\": {\r\n\t\t\t\t\t\"type\": \"keyword\"\r\n\t\t\t\t},\r\n\t\t\t\t\"primary_id\": {\r\n\t\t\t\t\t\"type\": \"keyword\"\r\n\t\t\t\t},\r\n\t\t\t\t\"st\": {\r\n\t\t\t\t\t\"type\": \"long\"\r\n\t\t\t\t},\r\n\t\t\t\t\"tag\": {\r\n\t\t\t\t\t\"properties\": {\r\n\t\t\t\t\t\t\"key\": {\r\n\t\t\t\t\t\t\t\"type\": \"keyword\",\r\n\t\t\t\t\t\t\t\"ignore_above\": 1024\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\"value\": {\r\n\t\t\t\t\t\t\t\"type\": \"keyword\",\r\n\t\t\t\t\t\t\t\"ignore_above\": 1024\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t\"stats\": {\r\n\t\t\t\t  \"type\": \"object\",\r\n\t\t\t\t  \"enabled\": false,\r\n\t\t\t\t  \"doc_values\": true\r\n        }\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t},\r\n\t\t\"_settings\": {\r\n    \"index.mapping.total_fields.limit\": 30000\r\n    \r\n  }\r\n}\r\n\r\nPlease  help.\r\n","performed_via_github_app":null}]