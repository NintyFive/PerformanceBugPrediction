{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/9023","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9023/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9023/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9023/events","html_url":"https://github.com/elastic/elasticsearch/issues/9023","id":52614393,"node_id":"MDU6SXNzdWU1MjYxNDM5Mw==","number":9023,"title":"Odd shard distribution in Elasticsearch 1.4.2","user":{"login":"vichargrave","id":260028,"node_id":"MDQ6VXNlcjI2MDAyOA==","avatar_url":"https://avatars2.githubusercontent.com/u/260028?v=4","gravatar_id":"","url":"https://api.github.com/users/vichargrave","html_url":"https://github.com/vichargrave","followers_url":"https://api.github.com/users/vichargrave/followers","following_url":"https://api.github.com/users/vichargrave/following{/other_user}","gists_url":"https://api.github.com/users/vichargrave/gists{/gist_id}","starred_url":"https://api.github.com/users/vichargrave/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vichargrave/subscriptions","organizations_url":"https://api.github.com/users/vichargrave/orgs","repos_url":"https://api.github.com/users/vichargrave/repos","events_url":"https://api.github.com/users/vichargrave/events{/privacy}","received_events_url":"https://api.github.com/users/vichargrave/received_events","type":"User","site_admin":false},"labels":[{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":157995132,"node_id":"MDU6TGFiZWwxNTc5OTUxMzI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v1.3.8","name":"v1.3.8","color":"dddddd","default":false,"description":null},{"id":157995054,"node_id":"MDU6TGFiZWwxNTc5OTUwNTQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v1.4.3","name":"v1.4.3","color":"dddddd","default":false,"description":null},{"id":127700367,"node_id":"MDU6TGFiZWwxMjc3MDAzNjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v1.5.0","name":"v1.5.0","color":"dddddd","default":false,"description":null},{"id":76184120,"node_id":"MDU6TGFiZWw3NjE4NDEyMA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v2.0.0-beta1","name":"v2.0.0-beta1","color":"dddddd","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"assignees":[{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false}],"milestone":null,"comments":46,"created_at":"2014-12-22T02:14:49Z","updated_at":"2015-11-06T18:55:35Z","closed_at":"2015-01-06T14:52:51Z","author_association":"NONE","active_lock_reason":null,"body":"I'm using a 4 node Elasticsearch cluster to ingest tweets from one of the public Twitter streams.  After upgrading my from 1.3.2 to 1.4.2 I'm noticing an odd behavior with respect to how shards are distributed across the nodes.  Whereas with 1.3.2 the 5 primary shards and 1 replica set of shards were evenly distributed across all 4 nodes, now I'm seeing this behavior:\n1. All the primary shards are saved to one node\n2. The replicas are split between two other nodes\n3. The fourth node receives no shards at all\n\nI'm using default values for these settings:\n\ncluster.routing.allocation.balance.shard\ncluster.routing.allocation.balance.index\ncluster.routing.allocation.balance.primary\ncluster.routing.allocation.balance.threshold\n\nHowever I've set cluster.routing.allocation.balance.shard to 0.6f and cluster.routing.allocation.balance.primary to 0.06f in the hope that these settings will coerce Elasticsearch to distribute the shards more evenly.   \n\nIs this issue a bug?\n","closed_by":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"performed_via_github_app":null}