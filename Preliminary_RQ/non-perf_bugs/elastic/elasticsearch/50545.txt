{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/50545","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50545/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50545/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50545/events","html_url":"https://github.com/elastic/elasticsearch/issues/50545","id":544316211,"node_id":"MDU6SXNzdWU1NDQzMTYyMTE=","number":50545,"title":"elasticsearch Java Rest Client  request time cost","user":{"login":"yffmonday","id":40086003,"node_id":"MDQ6VXNlcjQwMDg2MDAz","avatar_url":"https://avatars0.githubusercontent.com/u/40086003?v=4","gravatar_id":"","url":"https://api.github.com/users/yffmonday","html_url":"https://github.com/yffmonday","followers_url":"https://api.github.com/users/yffmonday/followers","following_url":"https://api.github.com/users/yffmonday/following{/other_user}","gists_url":"https://api.github.com/users/yffmonday/gists{/gist_id}","starred_url":"https://api.github.com/users/yffmonday/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yffmonday/subscriptions","organizations_url":"https://api.github.com/users/yffmonday/orgs","repos_url":"https://api.github.com/users/yffmonday/repos","events_url":"https://api.github.com/users/yffmonday/events{/privacy}","received_events_url":"https://api.github.com/users/yffmonday/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-01-01T06:06:56Z","updated_at":"2020-01-02T14:56:44Z","closed_at":"2020-01-02T14:56:43Z","author_association":"NONE","active_lock_reason":null,"body":"\r\nI use  Java Rest Client （6.6.0 vesion）to send request to ES。here is my basic config for REST Client:\r\n    private static final int CONNECT_TIMEOUT = 10000;\r\n    private static final int SOCKET_TIMEOUT = 10000;\r\n    private static final int CONNECTION_REQUEST_TIMEOUT = 10000;\r\n    private static final int MAX_CONNECT_NUM = 300;\r\n    private static final int MAX_CONNECT_PER_ROUTE = 200;\r\nWe have a api which is a msearch request, and we use CAT to detect the api performance. To our surprise,mearcha api time cost is under 60ms most of the time，however sometime it will be over 400ms. At same time,I found network IO of ES cluster is normal. Accroding to my study,  Java Rest Client  use HttpAsyncClient to send request, and has a connection manager pool，so time cost of request should not be tremble.\r\n\r\n","closed_by":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"performed_via_github_app":null}