{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/1580","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1580/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1580/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1580/events","html_url":"https://github.com/elastic/elasticsearch/issues/1580","id":2695897,"node_id":"MDU6SXNzdWUyNjk1ODk3","number":1580,"title":"Date Histogram Facet: Improve time zone handling, add factor option","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"labels":[{"id":33660,"node_id":"MDU6TGFiZWwzMzY2MA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebreaking","name":">breaking","color":"d93f0b","default":false,"description":null},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":174398,"node_id":"MDU6TGFiZWwxNzQzOTg=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.19.0.RC1","name":"v0.19.0.RC1","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2011-12-31T22:09:31Z","updated_at":"2014-04-30T14:14:25Z","closed_at":"2011-12-31T22:10:12Z","author_association":"MEMBER","active_lock_reason":null,"body":"The current date histogram handling is incorrect when it comes to handing timezone. It applies the time zone when doing day level resolution and above (but still return the milliseconds offseted by \"-\" instead of \"+\"), and below it won't allow to get back the results based on a specific time zone. So, the logic changed a bit (and defaults):\n\nA new `pre_zone` and `post_zone` parameters allowed, but default to `UTC`. When setting the current `time_zone`, it will set `pre_zone`. (backward comp. change!). The idea is that the value stored in ES (milliseconds since epoch in UTC) is applied the `pre_zone`, rounded, and then applied `post_zone`.\n\nThe new `factor` parameter allows to use date histogram on long fields that store different resolution than milliseconds. For example, a field that stores seconds since epoch can pass a factor of 1000 which will allow to still use the date histogram.\n","closed_by":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"performed_via_github_app":null}