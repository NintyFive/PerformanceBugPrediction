{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/414","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/414/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/414/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/414/events","html_url":"https://github.com/elastic/elasticsearch/issues/414","id":353841,"node_id":"MDU6SXNzdWUzNTM4NDE=","number":414,"title":"Geo Overhaul (work with multiple locations)","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"labels":[{"id":33660,"node_id":"MDU6TGFiZWwzMzY2MA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebreaking","name":">breaking","color":"d93f0b","default":false,"description":null},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":49729,"node_id":"MDU6TGFiZWw0OTcyOQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.12.0","name":"v0.12.0","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2010-10-08T20:30:50Z","updated_at":"2010-10-13T01:34:53Z","closed_at":"2010-10-09T03:31:28Z","author_association":"MEMBER","active_lock_reason":null,"body":"The current geo support does not work well when a document as multiple locations. For this reason, the structure of how geo information is indexed requires changing.\n\nNote, sadly, this requires both reindexing of the data if geo features are used, and requires to predefine the `geo_point` type for geo location objects (where before, just an object with `lat` and `lon` fields were enough).\n\nThe `geo_point` has been changed. Now, a string representation (lat,lon) is always stored under the object name, for example:\n\n```\n{\n    \"pin\" : {\n        \"location\" : {\n            \"lat\" : 40.12,\n            \"lon\" : -71.34\n        }\n    }\n}\n```\n\nWill cause a field called `location` with the \"40.12,-71.34\" value to be stored. lat/lon are not stored by default now, since they are not needed, geohash can still be enabled as well.\n\nThe new options for `geo_point` are:\n- `lat_lon`: Set to `true` to also index a `lat` and `lon` fields.\n- `geohash`: Set to `true` to also index a `geohash` (under `pin.location.geohash` in our example).\n- `geo_precision`: The geohash precision. Defaults to `12`.\n\nWhen loading a geo point in a script using the `doc[...]` notion, a value (for example: `doc['location'].value`) returns a `GeoPoint`, which allows to access `lat`, `lon`, and `geohash` within the script (much simpler to be used in scripts compared to previously).\n","closed_by":null,"performed_via_github_app":null}