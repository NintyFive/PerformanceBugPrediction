[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/161341746","html_url":"https://github.com/elastic/elasticsearch/issues/15117#issuecomment-161341746","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15117","id":161341746,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTM0MTc0Ng==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2015-12-02T15:52:06Z","updated_at":"2015-12-02T15:52:06Z","author_association":"CONTRIBUTOR","body":"I wonder if we need a way to store the results of a task until they are fetched? I'm thinking of something like update-by-query which would be a task because it is long running, cancelable, etc. But it wants to return counts of how many documents it updated and things like that. Maybe just write them to an index? Maybe with a ttl?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/161347394","html_url":"https://github.com/elastic/elasticsearch/issues/15117#issuecomment-161347394","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15117","id":161347394,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTM0NzM5NA==","user":{"login":"raf64flo","id":133268,"node_id":"MDQ6VXNlcjEzMzI2OA==","avatar_url":"https://avatars2.githubusercontent.com/u/133268?v=4","gravatar_id":"","url":"https://api.github.com/users/raf64flo","html_url":"https://github.com/raf64flo","followers_url":"https://api.github.com/users/raf64flo/followers","following_url":"https://api.github.com/users/raf64flo/following{/other_user}","gists_url":"https://api.github.com/users/raf64flo/gists{/gist_id}","starred_url":"https://api.github.com/users/raf64flo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raf64flo/subscriptions","organizations_url":"https://api.github.com/users/raf64flo/orgs","repos_url":"https://api.github.com/users/raf64flo/repos","events_url":"https://api.github.com/users/raf64flo/events{/privacy}","received_events_url":"https://api.github.com/users/raf64flo/received_events","type":"User","site_admin":false},"created_at":"2015-12-02T16:08:43Z","updated_at":"2015-12-02T16:08:43Z","author_association":"NONE","body":"Nice remark of @nik9000 about long task results availability after its end, as it is already done for snapshots.\nBut I'd prefer a TTL or/and a dedicated query to drop the result instead of only drop on fetch, which could be problematic in my opinion.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/161348433","html_url":"https://github.com/elastic/elasticsearch/issues/15117#issuecomment-161348433","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15117","id":161348433,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTM0ODQzMw==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2015-12-02T16:10:52Z","updated_at":"2015-12-02T16:10:52Z","author_association":"CONTRIBUTOR","body":"> But I'd prefer a TTL or/and a dedicated query to drop the result instead of only drop on fetch, which could be problematic in my opinion.\n\nYeah - drop on fetch would be rough.\n\nNot all tasks will want to do this but I think some would like it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/161372493","html_url":"https://github.com/elastic/elasticsearch/issues/15117#issuecomment-161372493","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15117","id":161372493,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTM3MjQ5Mw==","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2015-12-02T17:29:19Z","updated_at":"2015-12-02T17:29:19Z","author_association":"MEMBER","body":"@nik9000 is the goal to make results available after the task finished? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/161379934","html_url":"https://github.com/elastic/elasticsearch/issues/15117#issuecomment-161379934","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15117","id":161379934,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTM3OTkzNA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2015-12-02T17:53:41Z","updated_at":"2015-12-02T17:53:41Z","author_association":"CONTRIBUTOR","body":"> @nik9000 is the goal to make results available after the task finished?\n\nYeah. In the case of update-by-query it'd be just to make the status available. The most \"convenient\" way to do it seems like write it to an index with a ttl - but I think I'm just stuck on that idea because it came to me. The point is that after the task is done you'll want to see what its results were for some period of time. You'd want some place you could fetch the results by task id, some way to clear out results when you've finished with them, some way for them to clear themselves out if you don't read them back soon enough.\n\nI don't think it needs to come at iteration 1, but at some point it'd be nice.\n\nLook at delete-by-query, it makes some effort to build a nice results object. Once it becomes a \"task\" it'll have nothing to do with the fancy result object.\n\nAnother thing that might be useful is to make an API that'd block until the task was finished and return the result of it. Or just fetch the result if it was already finished. This'd be super useful in general but kind of required for the REST tests because they don't have loops and things.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/161414119","html_url":"https://github.com/elastic/elasticsearch/issues/15117#issuecomment-161414119","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15117","id":161414119,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTQxNDExOQ==","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2015-12-02T19:54:23Z","updated_at":"2015-12-02T19:54:23Z","author_association":"MEMBER","body":"I think traditionally we do that in two places - 1) log files for per-operation level and 2) in stats as combined metric. I can see how we might want to have a third way, but I think the biggest question here is lifecycle of this result. Persistence (even temporary persistence) of results is very unclear to me unless the result is associated with some persistent object (such as snapshot). So, I would rather make it an option to block and get result if you are interested in the result.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/161422248","html_url":"https://github.com/elastic/elasticsearch/issues/15117#issuecomment-161422248","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15117","id":161422248,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTQyMjI0OA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2015-12-02T20:22:04Z","updated_at":"2015-12-02T20:22:04Z","author_association":"CONTRIBUTOR","body":"> So, I would rather make it an option to block and get result if you are interested in the result\n\nI don't know if that'll be enough in the end though. Imagine the delete-by-query operation that takes 30 minutes too complete. Its too long for any blocking to be reliable - all kinds of http equipment will time you out after 5 minutes and something is bound to sneak in and get you a `connection reset by peer`.\n\nSo you'd have to build in a retry to the blocking. But if results aren't persisted, at least for a little while, then there is always the possibility that the job will finish between one request timing out and the next one starting. A low possibility but an icky one.\n\nSomething like a TTL on the result with explicit commands to read the result and delete it would work. These results wouldn't be huge documents so we could probably keep them in memory, certainly if they were serialized xContent or implemented Accountable or something.\n\nIts complicated but I can't think of how else to report on tasks that are \"do a thing\" rather than \"make a thing\".\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/161674043","html_url":"https://github.com/elastic/elasticsearch/issues/15117#issuecomment-161674043","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15117","id":161674043,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTY3NDA0Mw==","user":{"login":"niemyjski","id":1020579,"node_id":"MDQ6VXNlcjEwMjA1Nzk=","avatar_url":"https://avatars3.githubusercontent.com/u/1020579?v=4","gravatar_id":"","url":"https://api.github.com/users/niemyjski","html_url":"https://github.com/niemyjski","followers_url":"https://api.github.com/users/niemyjski/followers","following_url":"https://api.github.com/users/niemyjski/following{/other_user}","gists_url":"https://api.github.com/users/niemyjski/gists{/gist_id}","starred_url":"https://api.github.com/users/niemyjski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niemyjski/subscriptions","organizations_url":"https://api.github.com/users/niemyjski/orgs","repos_url":"https://api.github.com/users/niemyjski/repos","events_url":"https://api.github.com/users/niemyjski/events{/privacy}","received_events_url":"https://api.github.com/users/niemyjski/received_events","type":"User","site_admin":false},"created_at":"2015-12-03T15:24:22Z","updated_at":"2015-12-03T15:24:22Z","author_association":"CONTRIBUTOR","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162240407","html_url":"https://github.com/elastic/elasticsearch/issues/15117#issuecomment-162240407","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15117","id":162240407,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MjI0MDQwNw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-12-05T19:42:16Z","updated_at":"2015-12-05T19:42:16Z","author_association":"CONTRIBUTOR","body":"Another user of task mgmt: the forced merge API\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/162633511","html_url":"https://github.com/elastic/elasticsearch/issues/15117#issuecomment-162633511","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15117","id":162633511,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MjYzMzUxMQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2015-12-07T19:28:56Z","updated_at":"2015-12-07T19:28:56Z","author_association":"CONTRIBUTOR","body":"> Another user of task mgmt: the forced merge API\n\nI wonder if we should add a list of users to the top, like, below the requirements. I'm happy to work on retrofitting some of our long running requests to make their status more fetch-able and to make them more cancel-able but we should should make a list/tag the old issues.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/166460652","html_url":"https://github.com/elastic/elasticsearch/issues/15117#issuecomment-166460652","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15117","id":166460652,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NjQ2MDY1Mg==","user":{"login":"jprante","id":635745,"node_id":"MDQ6VXNlcjYzNTc0NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/635745?v=4","gravatar_id":"","url":"https://api.github.com/users/jprante","html_url":"https://github.com/jprante","followers_url":"https://api.github.com/users/jprante/followers","following_url":"https://api.github.com/users/jprante/following{/other_user}","gists_url":"https://api.github.com/users/jprante/gists{/gist_id}","starred_url":"https://api.github.com/users/jprante/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jprante/subscriptions","organizations_url":"https://api.github.com/users/jprante/orgs","repos_url":"https://api.github.com/users/jprante/repos","events_url":"https://api.github.com/users/jprante/events{/privacy}","received_events_url":"https://api.github.com/users/jprante/received_events","type":"User","site_admin":false},"created_at":"2015-12-21T23:44:47Z","updated_at":"2015-12-21T23:44:47Z","author_association":"CONTRIBUTOR","body":"Will it be possible to suspend/resume tasks by API? For perpetual tasks? Or to schedule tasks by a cron-like specification? It seems not, since the task design discusses TransportAction only, which means the lifetime of a task is \"one-shot\", corresponding to a request/response roundtrip of an action executed by a user?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/166668545","html_url":"https://github.com/elastic/elasticsearch/issues/15117#issuecomment-166668545","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15117","id":166668545,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NjY2ODU0NQ==","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2015-12-22T16:39:31Z","updated_at":"2015-12-22T16:39:31Z","author_association":"MEMBER","body":"@jprante at the moment we are targeting use cases where tasks have clear start, stop and finite running time. We might extend it to perpetual tasks in the future, but this is not on the immediate road map.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/166672189","html_url":"https://github.com/elastic/elasticsearch/issues/15117#issuecomment-166672189","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15117","id":166672189,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NjY3MjE4OQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2015-12-22T16:53:56Z","updated_at":"2015-12-22T16:53:56Z","author_association":"CONTRIBUTOR","body":"> Will it be possible to suspend/resume tasks by API?\n\nI suspect that'll be opt-in in the same way that cancel will be opt-in. Reindex will probably opt in because it'll want to have API controlled throttling. So you could set the throttle to 0 and it'd just stop.  The bulk request powering it would timeout pretty soon, making the whole thing fail though.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/171148961","html_url":"https://github.com/elastic/elasticsearch/issues/15117#issuecomment-171148961","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15117","id":171148961,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTE0ODk2MQ==","user":{"login":"wuranbo","id":10477132,"node_id":"MDQ6VXNlcjEwNDc3MTMy","avatar_url":"https://avatars3.githubusercontent.com/u/10477132?v=4","gravatar_id":"","url":"https://api.github.com/users/wuranbo","html_url":"https://github.com/wuranbo","followers_url":"https://api.github.com/users/wuranbo/followers","following_url":"https://api.github.com/users/wuranbo/following{/other_user}","gists_url":"https://api.github.com/users/wuranbo/gists{/gist_id}","starred_url":"https://api.github.com/users/wuranbo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wuranbo/subscriptions","organizations_url":"https://api.github.com/users/wuranbo/orgs","repos_url":"https://api.github.com/users/wuranbo/repos","events_url":"https://api.github.com/users/wuranbo/events{/privacy}","received_events_url":"https://api.github.com/users/wuranbo/received_events","type":"User","site_admin":false},"created_at":"2016-01-13T03:19:06Z","updated_at":"2016-01-13T03:19:06Z","author_association":"NONE","body":"We will has the internal result of a long-term-running task? For example:\nThe query will retrieve total 100 shards on 10 elastic node, each node has 10 shards. We can get the result immediately when the first shard is done. Then the second shard is done, we reduce the result to the former, send notify to the API, so the user can update their view. When all the shards are done, send notify that the task is done.\nSo we can execute this long-term-running task in background with less thread one shard by another, release the CPU resources for the high-priority task. And the user can update the views of long-term-running task frequently, got a better user experience.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/171514150","html_url":"https://github.com/elastic/elasticsearch/issues/15117#issuecomment-171514150","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15117","id":171514150,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTUxNDE1MA==","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2016-01-14T02:48:53Z","updated_at":"2016-01-14T02:48:53Z","author_association":"MEMBER","body":"@wuranbo you don't need task manager to do that. You can do it already by simply sending 100 requests with different [shards preferences](https://www.elastic.co/guide/en/elasticsearch/reference/2.1/search-request-preference.html) and then keep track of the responses on the client side. When you get 100th response - the \"task\" is done. Since sort keys are returned with every result you can easily merge sort the results as they are coming in. Personally, I don't think that the complexity of such solution and overhead of communication will make it worthwhile but all technical capability are already there, so you can give it a shot.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/171518542","html_url":"https://github.com/elastic/elasticsearch/issues/15117#issuecomment-171518542","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15117","id":171518542,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTUxODU0Mg==","user":{"login":"wuranbo","id":10477132,"node_id":"MDQ6VXNlcjEwNDc3MTMy","avatar_url":"https://avatars3.githubusercontent.com/u/10477132?v=4","gravatar_id":"","url":"https://api.github.com/users/wuranbo","html_url":"https://github.com/wuranbo","followers_url":"https://api.github.com/users/wuranbo/followers","following_url":"https://api.github.com/users/wuranbo/following{/other_user}","gists_url":"https://api.github.com/users/wuranbo/gists{/gist_id}","starred_url":"https://api.github.com/users/wuranbo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wuranbo/subscriptions","organizations_url":"https://api.github.com/users/wuranbo/orgs","repos_url":"https://api.github.com/users/wuranbo/repos","events_url":"https://api.github.com/users/wuranbo/events{/privacy}","received_events_url":"https://api.github.com/users/wuranbo/received_events","type":"User","site_admin":false},"created_at":"2016-01-14T03:24:31Z","updated_at":"2016-01-14T03:24:31Z","author_association":"NONE","body":"@imotov　thanks very much for your reply. You are right! This can pleasure most needs I want. I have checked out the shards preferences API. The shards preferences looks only set the shards (lucene's index) where the query retrieve from. The only API which can not be merged simply is cardinality, unless with a huge communication cost. Am I right? For the others, the cost looks like fine.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/171520991","html_url":"https://github.com/elastic/elasticsearch/issues/15117#issuecomment-171520991","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15117","id":171520991,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTUyMDk5MQ==","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2016-01-14T03:46:56Z","updated_at":"2016-01-14T03:46:56Z","author_association":"MEMBER","body":"@wuranbo it depends. In some use cases the communication and retrieval overhead can be overwhelming. Let's say you would like to show 25 results on the page. If you let elasticsearch to do its thing, it will only have to pull 25 results from the disk thanks to the [query_then_fetch execution](https://www.elastic.co/guide/en/elasticsearch/reference/2.1/search-request-search-type.html#query-then-fetch) strategy. However, if you will execute a request against each shard separately, you will get first 25 results that you can display as soon as the first shard finishes, but eventually elasticsearch will have to pull 2500 results from the disk since each shard doesn't know which records to pull and has to pull all top 25 in case one of them should be displayed in the top 25. So, unless your intention is to retrieve everything, the overhead of populating top N results can be quite big. \n\nSince it turns into a search strategy discussion, let's move it to https://discuss.elastic.co/ if you have any other questions. I would like to keep the discussion here focused on Task Management. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/171528320","html_url":"https://github.com/elastic/elasticsearch/issues/15117#issuecomment-171528320","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15117","id":171528320,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTUyODMyMA==","user":{"login":"wuranbo","id":10477132,"node_id":"MDQ6VXNlcjEwNDc3MTMy","avatar_url":"https://avatars3.githubusercontent.com/u/10477132?v=4","gravatar_id":"","url":"https://api.github.com/users/wuranbo","html_url":"https://github.com/wuranbo","followers_url":"https://api.github.com/users/wuranbo/followers","following_url":"https://api.github.com/users/wuranbo/following{/other_user}","gists_url":"https://api.github.com/users/wuranbo/gists{/gist_id}","starred_url":"https://api.github.com/users/wuranbo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wuranbo/subscriptions","organizations_url":"https://api.github.com/users/wuranbo/orgs","repos_url":"https://api.github.com/users/wuranbo/repos","events_url":"https://api.github.com/users/wuranbo/events{/privacy}","received_events_url":"https://api.github.com/users/wuranbo/received_events","type":"User","site_admin":false},"created_at":"2016-01-14T04:43:16Z","updated_at":"2016-01-14T04:43:16Z","author_association":"NONE","body":"@imotov got it , I have moved to https://discuss.elastic.co/t/how-get-the-just-enough-information-when-manually-merge-the-search-result-by-shards/39184/1 . Thank you very much again.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/182810662","html_url":"https://github.com/elastic/elasticsearch/issues/15117#issuecomment-182810662","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15117","id":182810662,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MjgxMDY2Mg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-02-11T11:02:53Z","updated_at":"2016-02-11T11:02:53Z","author_association":"CONTRIBUTOR","body":"@imotov would be good to report how long a task has been running in the tasks API as well.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/182884490","html_url":"https://github.com/elastic/elasticsearch/issues/15117#issuecomment-182884490","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15117","id":182884490,"node_id":"MDEyOklzc3VlQ29tbWVudDE4Mjg4NDQ5MA==","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2016-02-11T14:22:24Z","updated_at":"2016-02-11T14:22:24Z","author_association":"MEMBER","body":"@clintongormley good idea, I have added it to the description \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/279723462","html_url":"https://github.com/elastic/elasticsearch/issues/15117#issuecomment-279723462","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15117","id":279723462,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTcyMzQ2Mg==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2017-02-14T14:35:42Z","updated_at":"2017-02-14T14:35:42Z","author_association":"CONTRIBUTOR","body":"@imotov, is this done now? I think we've decided not to do the \"task can survive restart\" thing, right?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/397335335","html_url":"https://github.com/elastic/elasticsearch/issues/15117#issuecomment-397335335","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15117","id":397335335,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NzMzNTMzNQ==","user":{"login":"oleg-andreyev","id":1244112,"node_id":"MDQ6VXNlcjEyNDQxMTI=","avatar_url":"https://avatars1.githubusercontent.com/u/1244112?v=4","gravatar_id":"","url":"https://api.github.com/users/oleg-andreyev","html_url":"https://github.com/oleg-andreyev","followers_url":"https://api.github.com/users/oleg-andreyev/followers","following_url":"https://api.github.com/users/oleg-andreyev/following{/other_user}","gists_url":"https://api.github.com/users/oleg-andreyev/gists{/gist_id}","starred_url":"https://api.github.com/users/oleg-andreyev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oleg-andreyev/subscriptions","organizations_url":"https://api.github.com/users/oleg-andreyev/orgs","repos_url":"https://api.github.com/users/oleg-andreyev/repos","events_url":"https://api.github.com/users/oleg-andreyev/events{/privacy}","received_events_url":"https://api.github.com/users/oleg-andreyev/received_events","type":"User","site_admin":false},"created_at":"2018-06-14T15:24:06Z","updated_at":"2018-06-14T18:07:25Z","author_association":"NONE","body":"@clintongormley @imotov #15975 it was closed in favor of this ticket, so can we retrieve information about _forcemerge?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/397741377","html_url":"https://github.com/elastic/elasticsearch/issues/15117#issuecomment-397741377","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15117","id":397741377,"node_id":"MDEyOklzc3VlQ29tbWVudDM5Nzc0MTM3Nw==","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2018-06-15T21:02:05Z","updated_at":"2018-06-15T21:02:05Z","author_association":"MEMBER","body":"@oleg-andreyev thanks! I have reopened #15975. ","performed_via_github_app":null}]