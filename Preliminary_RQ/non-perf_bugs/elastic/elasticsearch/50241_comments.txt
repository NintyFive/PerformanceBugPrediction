[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/566357023","html_url":"https://github.com/elastic/elasticsearch/issues/50241#issuecomment-566357023","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50241","id":566357023,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjM1NzAyMw==","user":{"login":"njustyq","id":34452367,"node_id":"MDQ6VXNlcjM0NDUyMzY3","avatar_url":"https://avatars2.githubusercontent.com/u/34452367?v=4","gravatar_id":"","url":"https://api.github.com/users/njustyq","html_url":"https://github.com/njustyq","followers_url":"https://api.github.com/users/njustyq/followers","following_url":"https://api.github.com/users/njustyq/following{/other_user}","gists_url":"https://api.github.com/users/njustyq/gists{/gist_id}","starred_url":"https://api.github.com/users/njustyq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/njustyq/subscriptions","organizations_url":"https://api.github.com/users/njustyq/orgs","repos_url":"https://api.github.com/users/njustyq/repos","events_url":"https://api.github.com/users/njustyq/events{/privacy}","received_events_url":"https://api.github.com/users/njustyq/received_events","type":"User","site_admin":false},"created_at":"2019-12-17T02:55:04Z","updated_at":"2019-12-17T02:55:04Z","author_association":"NONE","body":"@elasticmachine Can someone check it out for me?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/566407177","html_url":"https://github.com/elastic/elasticsearch/issues/50241#issuecomment-566407177","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50241","id":566407177,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjQwNzE3Nw==","user":{"login":"njustyq","id":34452367,"node_id":"MDQ6VXNlcjM0NDUyMzY3","avatar_url":"https://avatars2.githubusercontent.com/u/34452367?v=4","gravatar_id":"","url":"https://api.github.com/users/njustyq","html_url":"https://github.com/njustyq","followers_url":"https://api.github.com/users/njustyq/followers","following_url":"https://api.github.com/users/njustyq/following{/other_user}","gists_url":"https://api.github.com/users/njustyq/gists{/gist_id}","starred_url":"https://api.github.com/users/njustyq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/njustyq/subscriptions","organizations_url":"https://api.github.com/users/njustyq/orgs","repos_url":"https://api.github.com/users/njustyq/repos","events_url":"https://api.github.com/users/njustyq/events{/privacy}","received_events_url":"https://api.github.com/users/njustyq/received_events","type":"User","site_admin":false},"created_at":"2019-12-17T06:50:26Z","updated_at":"2019-12-17T06:50:26Z","author_association":"NONE","body":"@jimczi  Could you please take a look at it for me？","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/566454428","html_url":"https://github.com/elastic/elasticsearch/issues/50241#issuecomment-566454428","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50241","id":566454428,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjQ1NDQyOA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-12-17T09:18:22Z","updated_at":"2019-12-17T09:18:22Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features (:Core/Features/Monitoring)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/566497460","html_url":"https://github.com/elastic/elasticsearch/issues/50241#issuecomment-566497460","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50241","id":566497460,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjQ5NzQ2MA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2019-12-17T11:13:54Z","updated_at":"2019-12-17T11:13:54Z","author_association":"MEMBER","body":"@njustyq Please stop pinging people directly. Someone will look at your issue, yet so expectations are clear, there is no implicit nor explicit SLA here.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/566501850","html_url":"https://github.com/elastic/elasticsearch/issues/50241#issuecomment-566501850","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50241","id":566501850,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjUwMTg1MA==","user":{"login":"njustyq","id":34452367,"node_id":"MDQ6VXNlcjM0NDUyMzY3","avatar_url":"https://avatars2.githubusercontent.com/u/34452367?v=4","gravatar_id":"","url":"https://api.github.com/users/njustyq","html_url":"https://github.com/njustyq","followers_url":"https://api.github.com/users/njustyq/followers","following_url":"https://api.github.com/users/njustyq/following{/other_user}","gists_url":"https://api.github.com/users/njustyq/gists{/gist_id}","starred_url":"https://api.github.com/users/njustyq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/njustyq/subscriptions","organizations_url":"https://api.github.com/users/njustyq/orgs","repos_url":"https://api.github.com/users/njustyq/repos","events_url":"https://api.github.com/users/njustyq/events{/privacy}","received_events_url":"https://api.github.com/users/njustyq/received_events","type":"User","site_admin":false},"created_at":"2019-12-17T11:27:19Z","updated_at":"2019-12-17T11:27:19Z","author_association":"NONE","body":"@jasontedor sorry，I'm just a little anxious. Thx for your attention to my issue.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/567194821","html_url":"https://github.com/elastic/elasticsearch/issues/50241#issuecomment-567194821","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50241","id":567194821,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NzE5NDgyMQ==","user":{"login":"jakelandis","id":976291,"node_id":"MDQ6VXNlcjk3NjI5MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/976291?v=4","gravatar_id":"","url":"https://api.github.com/users/jakelandis","html_url":"https://github.com/jakelandis","followers_url":"https://api.github.com/users/jakelandis/followers","following_url":"https://api.github.com/users/jakelandis/following{/other_user}","gists_url":"https://api.github.com/users/jakelandis/gists{/gist_id}","starred_url":"https://api.github.com/users/jakelandis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakelandis/subscriptions","organizations_url":"https://api.github.com/users/jakelandis/orgs","repos_url":"https://api.github.com/users/jakelandis/repos","events_url":"https://api.github.com/users/jakelandis/events{/privacy}","received_events_url":"https://api.github.com/users/jakelandis/received_events","type":"User","site_admin":false},"created_at":"2019-12-18T20:14:16Z","updated_at":"2019-12-18T20:14:16Z","author_association":"CONTRIBUTOR","body":"@njustyq The master node is responsible for collecting all of the data needed to push to monitoring. I suspect that your environment has a very large number of shards (the usual culprit for high memory usage for monitoring with indices:monitor/stats) and/or other large number of things that the collectors need to collect: https://www.elastic.co/guide/en/elasticsearch/reference/6.8/es-monitoring-collectors.html. \r\n\r\nI think this may be the case where more memory is needed for master, or have less things in your cluster (i.e. shards) that need to be monitored.   \r\n\r\nNewer versions of the Elastic stack (6.5+) allow for you turn off the collectors and let Metricbeat do the work, which I believe would help here. https://www.elastic.co/guide/en/elasticsearch/reference/6.5/configuring-metricbeat.html \r\n\r\nI am going to close this issue, as I can not find anything actionable for a bug or enhancement change. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/567383846","html_url":"https://github.com/elastic/elasticsearch/issues/50241#issuecomment-567383846","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50241","id":567383846,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NzM4Mzg0Ng==","user":{"login":"njustyq","id":34452367,"node_id":"MDQ6VXNlcjM0NDUyMzY3","avatar_url":"https://avatars2.githubusercontent.com/u/34452367?v=4","gravatar_id":"","url":"https://api.github.com/users/njustyq","html_url":"https://github.com/njustyq","followers_url":"https://api.github.com/users/njustyq/followers","following_url":"https://api.github.com/users/njustyq/following{/other_user}","gists_url":"https://api.github.com/users/njustyq/gists{/gist_id}","starred_url":"https://api.github.com/users/njustyq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/njustyq/subscriptions","organizations_url":"https://api.github.com/users/njustyq/orgs","repos_url":"https://api.github.com/users/njustyq/repos","events_url":"https://api.github.com/users/njustyq/events{/privacy}","received_events_url":"https://api.github.com/users/njustyq/received_events","type":"User","site_admin":false},"created_at":"2019-12-19T08:13:44Z","updated_at":"2019-12-19T08:13:44Z","author_association":"NONE","body":"> @njustyq The master node is responsible for collecting all of the data needed to push to monitoring. I suspect that your environment has a very large number of shards (the usual culprit for high memory usage for monitoring with indices:monitor/stats) and/or other large number of things that the collectors need to collect: https://www.elastic.co/guide/en/elasticsearch/reference/6.8/es-monitoring-collectors.html.\r\n> \r\n> I think this may be the case where more memory is needed for master, or have less things in your cluster (i.e. shards) that need to be monitored.\r\n> \r\n> Newer versions of the Elastic stack (6.5+) allow for you turn off the collectors and let Metricbeat do the work, which I believe would help here. https://www.elastic.co/guide/en/elasticsearch/reference/6.5/configuring-metricbeat.html\r\n> \r\n> I am going to close this issue, as I can not find anything actionable for a bug or enhancement change.\r\n\r\nI had checked the network between the master node and the data node, and it was ok.\r\nWhy are there accumulated so many RequestHolder in the clientHandlers which hold like indices:monitor/stats[n],indices:monitor/recovery[n] or cluster:monitor/stats[n].\r\n\r\nWhen i check the log from master node,and it is so many collect timeout log like \"[ERROR][o.e.x.m.c.i.IndexStatsCollector] [Master_9.38.149.191_0] collector [index-stats] timed out when collecting data\", \"ReceiveTimeoutTransportException: [Data238_0][9.38.1.238:1110][cluster:monitor/nodes/stats[n]] request_id [528073222] timed out after [15000ms]\"\r\nand in the Data238_0(data node),there is no log until master leave. The log  as follows:","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/567392101","html_url":"https://github.com/elastic/elasticsearch/issues/50241#issuecomment-567392101","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/50241","id":567392101,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NzM5MjEwMQ==","user":{"login":"njustyq","id":34452367,"node_id":"MDQ6VXNlcjM0NDUyMzY3","avatar_url":"https://avatars2.githubusercontent.com/u/34452367?v=4","gravatar_id":"","url":"https://api.github.com/users/njustyq","html_url":"https://github.com/njustyq","followers_url":"https://api.github.com/users/njustyq/followers","following_url":"https://api.github.com/users/njustyq/following{/other_user}","gists_url":"https://api.github.com/users/njustyq/gists{/gist_id}","starred_url":"https://api.github.com/users/njustyq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/njustyq/subscriptions","organizations_url":"https://api.github.com/users/njustyq/orgs","repos_url":"https://api.github.com/users/njustyq/repos","events_url":"https://api.github.com/users/njustyq/events{/privacy}","received_events_url":"https://api.github.com/users/njustyq/received_events","type":"User","site_admin":false},"created_at":"2019-12-19T08:39:16Z","updated_at":"2019-12-19T08:39:16Z","author_association":"NONE","body":"@jakelandis  There  are the log of master and data ,thx for checking it out.\r\nmaster log:\r\n![master日志](https://user-images.githubusercontent.com/34452367/71157992-07c81c00-227e-11ea-8cee-58e971529a0d.png)\r\n\r\ndata log:\r\n![data日志](https://user-images.githubusercontent.com/34452367/71158004-0dbdfd00-227e-11ea-90d6-1dada763117f.png)\r\n\r\n","performed_via_github_app":null}]