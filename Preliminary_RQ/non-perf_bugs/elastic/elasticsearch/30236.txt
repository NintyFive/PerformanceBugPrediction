{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/30236","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30236/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30236/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30236/events","html_url":"https://github.com/elastic/elasticsearch/issues/30236","id":318716822,"node_id":"MDU6SXNzdWUzMTg3MTY4MjI=","number":30236,"title":"\"Native controller process has stopped - no new native processes can be started\" after setting host","user":{"login":"szabgab","id":48833,"node_id":"MDQ6VXNlcjQ4ODMz","avatar_url":"https://avatars2.githubusercontent.com/u/48833?v=4","gravatar_id":"","url":"https://api.github.com/users/szabgab","html_url":"https://github.com/szabgab","followers_url":"https://api.github.com/users/szabgab/followers","following_url":"https://api.github.com/users/szabgab/following{/other_user}","gists_url":"https://api.github.com/users/szabgab/gists{/gist_id}","starred_url":"https://api.github.com/users/szabgab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szabgab/subscriptions","organizations_url":"https://api.github.com/users/szabgab/orgs","repos_url":"https://api.github.com/users/szabgab/repos","events_url":"https://api.github.com/users/szabgab/events{/privacy}","received_events_url":"https://api.github.com/users/szabgab/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-04-29T13:24:45Z","updated_at":"2018-04-29T13:57:01Z","closed_at":"2018-04-29T13:44:09Z","author_association":"NONE","active_lock_reason":null,"body":"Using 6.2.4 on Ubuntu 17.10 (2Gb mem)\r\nRunning `./bin/elasticsearch` allows me to access port 9200 from the same machine but it seems to only listen to 127.0.0.1 So I've changed `config/elasticsearch.yml` and added\r\n\r\n```\r\nnetwork.host: MY_IP_HERE\r\n```\r\n\r\nThen I tried:\r\n\r\n```\r\nnetwork.host: 0.0.0.0\r\n```\r\n\r\nand started elasticsearch again using ./bin/elasticsearch\r\n\r\nIn both cases Elastic crashed with the following output:\r\n\r\n```\r\n[2018-04-29T13:14:56,406][INFO ][o.e.n.Node               ] [] initializing ...\r\n[2018-04-29T13:14:56,560][INFO ][o.e.e.NodeEnvironment    ] [Lk908pC] using [1] data paths, mounts [[/ (/dev/vda1)]], net usable_space [44.2gb], net total_space [48.2gb], types [ext4]\r\n[2018-04-29T13:14:56,561][INFO ][o.e.e.NodeEnvironment    ] [Lk908pC] heap size [1015.6mb], compressed ordinary object pointers [true]\r\n[2018-04-29T13:14:56,604][INFO ][o.e.n.Node               ] node name [Lk908pC] derived from node ID [Lk908pCgTYCMysIyaauLHg]; set [node.name] to override\r\n[2018-04-29T13:14:56,605][INFO ][o.e.n.Node               ] version[6.2.4], pid[30891], build[ccec39f/2018-04-12T20:37:28.497551Z], OS[Linux/4.13.0-39-generic/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/1.8.0_162/25.162-b12]\r\n[2018-04-29T13:14:56,606][INFO ][o.e.n.Node               ] JVM arguments [-Xms1g, -Xmx1g, -XX:+UseConcMarkSweepGC, -XX:CMSInitiatingOccupancyFraction=75, -XX:+UseCMSInitiatingOccupancyOnly, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Djava.io.tmpdir=/tmp/elasticsearch.GFPyerTL, -XX:+HeapDumpOnOutOfMemoryError, -XX:+PrintGCDetails, -XX:+PrintGCDateStamps, -XX:+PrintTenuringDistribution, -XX:+PrintGCApplicationStoppedTime, -Xloggc:logs/gc.log, -XX:+UseGCLogFileRotation, -XX:NumberOfGCLogFiles=32, -XX:GCLogFileSize=64m, -Des.path.home=/home/gabor/elasticsearch-6.2.4, -Des.path.conf=/home/gabor/elasticsearch-6.2.4/config]\r\n[2018-04-29T13:15:02,391][INFO ][o.e.p.PluginsService     ] [Lk908pC] loaded module [aggs-matrix-stats]\r\n[2018-04-29T13:15:02,396][INFO ][o.e.p.PluginsService     ] [Lk908pC] loaded module [analysis-common]\r\n[2018-04-29T13:15:02,397][INFO ][o.e.p.PluginsService     ] [Lk908pC] loaded module [ingest-common]\r\n[2018-04-29T13:15:02,397][INFO ][o.e.p.PluginsService     ] [Lk908pC] loaded module [lang-expression]\r\n[2018-04-29T13:15:02,398][INFO ][o.e.p.PluginsService     ] [Lk908pC] loaded module [lang-mustache]\r\n[2018-04-29T13:15:02,399][INFO ][o.e.p.PluginsService     ] [Lk908pC] loaded module [lang-painless]\r\n[2018-04-29T13:15:02,400][INFO ][o.e.p.PluginsService     ] [Lk908pC] loaded module [mapper-extras]\r\n[2018-04-29T13:15:02,400][INFO ][o.e.p.PluginsService     ] [Lk908pC] loaded module [parent-join]\r\n[2018-04-29T13:15:02,400][INFO ][o.e.p.PluginsService     ] [Lk908pC] loaded module [percolator]\r\n[2018-04-29T13:15:02,401][INFO ][o.e.p.PluginsService     ] [Lk908pC] loaded module [rank-eval]\r\n[2018-04-29T13:15:02,401][INFO ][o.e.p.PluginsService     ] [Lk908pC] loaded module [reindex]\r\n[2018-04-29T13:15:02,401][INFO ][o.e.p.PluginsService     ] [Lk908pC] loaded module [repository-url]\r\n[2018-04-29T13:15:02,402][INFO ][o.e.p.PluginsService     ] [Lk908pC] loaded module [transport-netty4]\r\n[2018-04-29T13:15:02,402][INFO ][o.e.p.PluginsService     ] [Lk908pC] loaded module [tribe]\r\n[2018-04-29T13:15:02,403][INFO ][o.e.p.PluginsService     ] [Lk908pC] loaded plugin [x-pack-core]\r\n[2018-04-29T13:15:02,403][INFO ][o.e.p.PluginsService     ] [Lk908pC] loaded plugin [x-pack-deprecation]\r\n[2018-04-29T13:15:02,403][INFO ][o.e.p.PluginsService     ] [Lk908pC] loaded plugin [x-pack-graph]\r\n[2018-04-29T13:15:02,403][INFO ][o.e.p.PluginsService     ] [Lk908pC] loaded plugin [x-pack-logstash]\r\n[2018-04-29T13:15:02,407][INFO ][o.e.p.PluginsService     ] [Lk908pC] loaded plugin [x-pack-ml]\r\n[2018-04-29T13:15:02,407][INFO ][o.e.p.PluginsService     ] [Lk908pC] loaded plugin [x-pack-monitoring]\r\n[2018-04-29T13:15:02,407][INFO ][o.e.p.PluginsService     ] [Lk908pC] loaded plugin [x-pack-security]\r\n[2018-04-29T13:15:02,408][INFO ][o.e.p.PluginsService     ] [Lk908pC] loaded plugin [x-pack-upgrade]\r\n[2018-04-29T13:15:02,408][INFO ][o.e.p.PluginsService     ] [Lk908pC] loaded plugin [x-pack-watcher]\r\n[2018-04-29T13:15:10,327][INFO ][o.e.x.m.j.p.l.CppLogMessageHandler] [controller/30941] [Main.cc@128] controller (64 bit): Version 6.2.4 (Build 524e7fe231abc1) Copyright (c) 2018 Elasticsearch BV\r\n[2018-04-29T13:15:14,622][DEBUG][o.e.a.ActionModule       ] Using REST wrapper from plugin org.elasticsearch.xpack.security.Security\r\n[2018-04-29T13:15:15,442][INFO ][o.e.d.DiscoveryModule    ] [Lk908pC] using discovery type [zen]\r\n[2018-04-29T13:15:17,402][INFO ][o.e.n.Node               ] initialized\r\n[2018-04-29T13:15:17,408][INFO ][o.e.n.Node               ] [Lk908pC] starting ...\r\n[2018-04-29T13:15:17,810][INFO ][o.e.t.TransportService   ] [Lk908pC] publish_address {67.205.141.187:9300}, bound_addresses {[::]:9300}\r\n[2018-04-29T13:15:17,892][INFO ][o.e.b.BootstrapChecks    ] [Lk908pC] bound or publishing to a non-loopback address, enforcing bootstrap checks\r\nERROR: [1] bootstrap checks failed\r\n[1]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]\r\n[2018-04-29T13:15:17,956][INFO ][o.e.n.Node               ] [Lk908pC] stopping ...\r\n[2018-04-29T13:15:17,998][INFO ][o.e.n.Node               ] [Lk908pC] stopped\r\n[2018-04-29T13:15:18,000][INFO ][o.e.n.Node               ] [Lk908pC] closing ...\r\n[2018-04-29T13:15:18,026][INFO ][o.e.n.Node               ] [Lk908pC] closed\r\n```\r\n\r\nFollowing the instructions here\r\nhttps://www.elastic.co/guide/en/elasticsearch/reference/current/vm-max-map-count.html\r\nand adding more virtual memory solved the problem, but it still seems to be a problem if changing the host has such an impact.\r\n\r\n\r\n","closed_by":{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false},"performed_via_github_app":null}