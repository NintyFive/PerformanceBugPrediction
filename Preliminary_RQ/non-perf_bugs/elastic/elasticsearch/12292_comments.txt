[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/121995671","html_url":"https://github.com/elastic/elasticsearch/issues/12292#issuecomment-121995671","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12292","id":121995671,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMTk5NTY3MQ==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2015-07-16T15:37:15Z","updated_at":"2015-07-16T15:37:15Z","author_association":"MEMBER","body":"From talking to @clintongormley and @kimchy, the `root_cause` is actually correct here as it is supposed to stop at the `script_exception` since the `mustache_exception` is a implementation detail. The problem here is that there is a difference in implementation between the exception checking on the Java client REST tests and the JS REST tests (and possibly other clients too). The Java client REST tests implementation presumably gets an Exception object (rather than a JSON representation) and will check the messages for all causes (maybe @javanna can confirm that?) whereas the JS Client REST tests implementation checks the rendered JSON and looks only at the `root_cause.reason` field. So the question is which implementation to change. Should the Java implementation only check the root cause as defined by the ExceptionsHelper? or should the JS implementation (and other clients potentially) be changed to check all `reason` fields under `error`?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/121997005","html_url":"https://github.com/elastic/elasticsearch/issues/12292#issuecomment-121997005","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12292","id":121997005,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMTk5NzAwNQ==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2015-07-16T15:41:25Z","updated_at":"2015-07-16T15:41:25Z","author_association":"MEMBER","body":"Looking at [DoSection](https://github.com/elastic/elasticsearch/blob/4c981ff4bfc250080d521af105b5e8589c9fc517/core/src/test/java/org/elasticsearch/test/rest/section/DoSection.java#L105) it looks like we take the string value of the `error` object in the JSON response and try to match it to the regex.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/122249324","html_url":"https://github.com/elastic/elasticsearch/issues/12292#issuecomment-122249324","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12292","id":122249324,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMjI0OTMyNA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-07-17T11:16:46Z","updated_at":"2015-07-17T11:16:46Z","author_association":"CONTRIBUTOR","body":"@spalger Shouldn't you just be including the rest of the structured data in the exception object that youc reate? and rendering it as part of stringification?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/122348520","html_url":"https://github.com/elastic/elasticsearch/issues/12292#issuecomment-122348520","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12292","id":122348520,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMjM0ODUyMA==","user":{"login":"spalger","id":1329312,"node_id":"MDQ6VXNlcjEzMjkzMTI=","avatar_url":"https://avatars1.githubusercontent.com/u/1329312?v=4","gravatar_id":"","url":"https://api.github.com/users/spalger","html_url":"https://github.com/spalger","followers_url":"https://api.github.com/users/spalger/followers","following_url":"https://api.github.com/users/spalger/following{/other_user}","gists_url":"https://api.github.com/users/spalger/gists{/gist_id}","starred_url":"https://api.github.com/users/spalger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spalger/subscriptions","organizations_url":"https://api.github.com/users/spalger/orgs","repos_url":"https://api.github.com/users/spalger/repos","events_url":"https://api.github.com/users/spalger/events{/privacy}","received_events_url":"https://api.github.com/users/spalger/received_events","type":"User","site_admin":false},"created_at":"2015-07-17T17:27:27Z","updated_at":"2015-07-17T17:27:27Z","author_association":"MEMBER","body":"Yeah @clintongormley, I'm going to revamp the exception message a bit to include the related issue information so that the test will pass and the errors will be more informative. Thanks all :)\n","performed_via_github_app":null}]