[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/27785351","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-27785351","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":27785351,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzg1MzUx","user":{"login":"richardwilly98","id":118560,"node_id":"MDQ6VXNlcjExODU2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/118560?v=4","gravatar_id":"","url":"https://api.github.com/users/richardwilly98","html_url":"https://github.com/richardwilly98","followers_url":"https://api.github.com/users/richardwilly98/followers","following_url":"https://api.github.com/users/richardwilly98/following{/other_user}","gists_url":"https://api.github.com/users/richardwilly98/gists{/gist_id}","starred_url":"https://api.github.com/users/richardwilly98/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardwilly98/subscriptions","organizations_url":"https://api.github.com/users/richardwilly98/orgs","repos_url":"https://api.github.com/users/richardwilly98/repos","events_url":"https://api.github.com/users/richardwilly98/events{/privacy}","received_events_url":"https://api.github.com/users/richardwilly98/received_events","type":"User","site_admin":false},"created_at":"2013-11-05T16:03:09Z","updated_at":"2013-11-05T16:03:09Z","author_association":"CONTRIBUTOR","body":"More details here [1]\n\n[1] - https://groups.google.com/forum/#!topic/elasticsearch/hkBqWisL4UI\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/27930836","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-27930836","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":27930836,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTMwODM2","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2013-11-07T01:24:02Z","updated_at":"2013-11-07T01:24:02Z","author_association":"MEMBER","body":"I briefly looked at this issue and it looks like the problem is caused by race condition in creation of river's `_meta` document and propagation of cluster state with the new river mapping. Basically, river creation and startup fails when [RiversRouter](https://github.com/elasticsearch/elasticsearch/blob/master/src/main/java/org/elasticsearch/river/routing/RiversRouter.java#L110) tries to load `_meta` record for the new river mapping and this `_meta` document doesn't exist yet. \n\nI can only reproduce it if the `_river` index doesn't exists or exists but doesn't have any types in it. After I create the first [dummy river](http://www.elasticsearch.org/guide/en/elasticsearch/rivers/current/how-it-works.html), all other rivers seem to work just fine.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/27956385","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-27956385","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":27956385,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTU2Mzg1","user":{"login":"richardwilly98","id":118560,"node_id":"MDQ6VXNlcjExODU2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/118560?v=4","gravatar_id":"","url":"https://api.github.com/users/richardwilly98","html_url":"https://github.com/richardwilly98","followers_url":"https://api.github.com/users/richardwilly98/followers","following_url":"https://api.github.com/users/richardwilly98/following{/other_user}","gists_url":"https://api.github.com/users/richardwilly98/gists{/gist_id}","starred_url":"https://api.github.com/users/richardwilly98/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardwilly98/subscriptions","organizations_url":"https://api.github.com/users/richardwilly98/orgs","repos_url":"https://api.github.com/users/richardwilly98/repos","events_url":"https://api.github.com/users/richardwilly98/events{/privacy}","received_events_url":"https://api.github.com/users/richardwilly98/received_events","type":"User","site_admin":false},"created_at":"2013-11-07T11:47:29Z","updated_at":"2013-11-07T11:47:29Z","author_association":"CONTRIBUTOR","body":"Even with your suggestion in my \"@BeforeSuite\" method:\n\n``` java\n    private void registerDummyRiver() {\n        if (!node.client().admin().indices().prepareExists(\"_river\").get().isExists()) {\n            node.client().admin().indices().prepareCreate(\"_river\").get();\n        }\n        if (!node.client().prepareGet(\"_river\", \"my_dummy\", \"_meta\").get().isExists()) {\n            node.client().prepareIndex(\"_river\", \"my_dummy\", \"_meta\").setSource(\"{ \\\"type\\\": \\\"dummy\\\" }\").get();\n        }\n        refreshIndex(\"_river\");\n        Assert.assertTrue(node.client().prepareGet(\"_river\", \"my_dummy\", \"_meta\").get().isExists());\n    }\n\n```\n\nI still have tests failing randomly.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/28159096","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-28159096","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":28159096,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MTU5MDk2","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2013-11-10T20:04:17Z","updated_at":"2013-11-10T20:04:17Z","author_association":"MEMBER","body":"I pushed a fix for this. Could you confirm it fixes the issue you are experiencing?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/28206675","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-28206675","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":28206675,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MjA2Njc1","user":{"login":"richardwilly98","id":118560,"node_id":"MDQ6VXNlcjExODU2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/118560?v=4","gravatar_id":"","url":"https://api.github.com/users/richardwilly98","html_url":"https://github.com/richardwilly98","followers_url":"https://api.github.com/users/richardwilly98/followers","following_url":"https://api.github.com/users/richardwilly98/following{/other_user}","gists_url":"https://api.github.com/users/richardwilly98/gists{/gist_id}","starred_url":"https://api.github.com/users/richardwilly98/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardwilly98/subscriptions","organizations_url":"https://api.github.com/users/richardwilly98/orgs","repos_url":"https://api.github.com/users/richardwilly98/repos","events_url":"https://api.github.com/users/richardwilly98/events{/privacy}","received_events_url":"https://api.github.com/users/richardwilly98/received_events","type":"User","site_admin":false},"created_at":"2013-11-11T15:04:32Z","updated_at":"2013-11-11T15:04:32Z","author_association":"CONTRIBUTOR","body":"@javanna it definitely help in my integration test.  \nAll test are now passing after a small change when the river is created.\n\nIn 0.90.5 it looks like `node.client().prepareIndex(\"_river\", \"my_dummy\", \"_meta\")` and wait for 1 second was enough to ensure that the river was registered and started.\n\nSo as workaround I am checking a flag attribute set by `river.start()` method.\n\nWould it make sense to have such feature in ES api?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/28226266","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-28226266","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":28226266,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MjI2MjY2","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2013-11-11T18:38:13Z","updated_at":"2013-11-11T18:38:13Z","author_association":"MEMBER","body":"I'm not sure I got where you put the 1 second wait with 0.90.5. \n\nAnyways, with 0.90.6 there is a different problem, as we send the mapping update to the master node (when you create the river type by indexing the `_meta` document) before actually indexing the documen. The mapping update on the master should trigger the river start, but it needs the `_meta` document to be available, which is not the case, thus in most cases rivers won't get started.\n\nMy fix addresses this for rivers by scheduling a retry (actually a few of them just in case) if the `_meta` document isn't found. I think this should be enough, could you confirm this?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/28235569","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-28235569","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":28235569,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MjM1NTY5","user":{"login":"richardwilly98","id":118560,"node_id":"MDQ6VXNlcjExODU2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/118560?v=4","gravatar_id":"","url":"https://api.github.com/users/richardwilly98","html_url":"https://github.com/richardwilly98","followers_url":"https://api.github.com/users/richardwilly98/followers","following_url":"https://api.github.com/users/richardwilly98/following{/other_user}","gists_url":"https://api.github.com/users/richardwilly98/gists{/gist_id}","starred_url":"https://api.github.com/users/richardwilly98/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardwilly98/subscriptions","organizations_url":"https://api.github.com/users/richardwilly98/orgs","repos_url":"https://api.github.com/users/richardwilly98/repos","events_url":"https://api.github.com/users/richardwilly98/events{/privacy}","received_events_url":"https://api.github.com/users/richardwilly98/received_events","type":"User","site_admin":false},"created_at":"2013-11-11T20:27:18Z","updated_at":"2013-11-11T20:27:18Z","author_association":"CONTRIBUTOR","body":"As I said all test are now passing so your fix addresses the issue.\n\nI am just trying to understand how I could make sure from my integration test when the river is really started. Right now (and it was already the case before I assume) there is no way to tell that from the api so it has to be built in the river.  \n\nIs that correct?\n\nThanks a lot for the fix.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/28238919","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-28238919","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":28238919,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MjM4OTE5","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2013-11-11T21:08:57Z","updated_at":"2013-11-11T21:09:38Z","author_association":"MEMBER","body":"Ok thanks @richardwilly98 , got it, I just wanted to make sure no other workarounds are needed.\n\nI got what you are asking, you can have a wait and check if something happened (for instance check if an index is expected to be created is there). You are right, you need to handle this in the river itself. Would be even better to have different retries and a maximum wait time. We are going to package our test classes as a separate jar with the next release, so that those classes can easily be used to test plugins; the method that you'd need in this case is `ElasticsearchTestCase#awaitBusy`. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/28279162","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-28279162","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":28279162,"node_id":"MDEyOklzc3VlQ29tbWVudDI4Mjc5MTYy","user":{"login":"jprante","id":635745,"node_id":"MDQ6VXNlcjYzNTc0NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/635745?v=4","gravatar_id":"","url":"https://api.github.com/users/jprante","html_url":"https://github.com/jprante","followers_url":"https://api.github.com/users/jprante/followers","following_url":"https://api.github.com/users/jprante/following{/other_user}","gists_url":"https://api.github.com/users/jprante/gists{/gist_id}","starred_url":"https://api.github.com/users/jprante/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jprante/subscriptions","organizations_url":"https://api.github.com/users/jprante/orgs","repos_url":"https://api.github.com/users/jprante/repos","events_url":"https://api.github.com/users/jprante/events{/privacy}","received_events_url":"https://api.github.com/users/jprante/received_events","type":"User","site_admin":false},"created_at":"2013-11-12T09:29:33Z","updated_at":"2013-11-12T09:29:33Z","author_association":"CONTRIBUTOR","body":"Tests with JDBC river now pass with ES 0.90.7-SNAPSHOT.\n\nThanks @javanna !\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/28649104","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-28649104","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":28649104,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjQ5MTA0","user":{"login":"richardwilly98","id":118560,"node_id":"MDQ6VXNlcjExODU2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/118560?v=4","gravatar_id":"","url":"https://api.github.com/users/richardwilly98","html_url":"https://github.com/richardwilly98","followers_url":"https://api.github.com/users/richardwilly98/followers","following_url":"https://api.github.com/users/richardwilly98/following{/other_user}","gists_url":"https://api.github.com/users/richardwilly98/gists{/gist_id}","starred_url":"https://api.github.com/users/richardwilly98/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardwilly98/subscriptions","organizations_url":"https://api.github.com/users/richardwilly98/orgs","repos_url":"https://api.github.com/users/richardwilly98/repos","events_url":"https://api.github.com/users/richardwilly98/events{/privacy}","received_events_url":"https://api.github.com/users/richardwilly98/received_events","type":"User","site_admin":false},"created_at":"2013-11-17T14:10:56Z","updated_at":"2013-11-17T14:10:56Z","author_association":"CONTRIBUTOR","body":"@javanna unfortunately I am still having issues with ES 0.90.7 where rivers are not started.\n\nI have post a gist [1] with ES log level to DEBUG.  \nStarting line 6982 you can see the sequence after `node.client().prepareIndex(\"_river\", river, \"_meta\").setSource(settings).get();` I wait up to 30 seconds but the river does not start.\n\nIn my scenario rivers are started about 50 times and 14 of them fail.\n\n[1] - https://gist.github.com/richardwilly98/7513822/raw/16e30de3f7c7e78a56b9e1bfa68c8fbbb48ad132/gistfile1.txt\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/28685950","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-28685950","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":28685950,"node_id":"MDEyOklzc3VlQ29tbWVudDI4Njg1OTUw","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2013-11-18T09:57:15Z","updated_at":"2013-11-18T09:57:15Z","author_association":"MEMBER","body":"@richardwilly98 that's odd. We currently retry registering the river for max 5 times, one attempt per second, in case the `_meta` document is not found when the master node gets the mapping update caused by the index operation of the `_meta` doc itself. That would mean that in your case, the `_meta` document takes more than 5 seconds to show up after its mapping update, which sounds strange.\n\nDid anything change since you previously said that the issue was fixed? I'm curious on how you create the river. Is the river already registered in the cluster state or do you recreate everything from scratch in your tests?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/28691952","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-28691952","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":28691952,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjkxOTUy","user":{"login":"richardwilly98","id":118560,"node_id":"MDQ6VXNlcjExODU2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/118560?v=4","gravatar_id":"","url":"https://api.github.com/users/richardwilly98","html_url":"https://github.com/richardwilly98","followers_url":"https://api.github.com/users/richardwilly98/followers","following_url":"https://api.github.com/users/richardwilly98/following{/other_user}","gists_url":"https://api.github.com/users/richardwilly98/gists{/gist_id}","starred_url":"https://api.github.com/users/richardwilly98/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardwilly98/subscriptions","organizations_url":"https://api.github.com/users/richardwilly98/orgs","repos_url":"https://api.github.com/users/richardwilly98/repos","events_url":"https://api.github.com/users/richardwilly98/events{/privacy}","received_events_url":"https://api.github.com/users/richardwilly98/received_events","type":"User","site_admin":false},"created_at":"2013-11-18T11:44:43Z","updated_at":"2013-11-18T11:44:43Z","author_association":"CONTRIBUTOR","body":"@javanna last time I have only executed the test on a dummy river which register only 1 river but did not test it on the real river.\n- River is created using this code [1].\n- River is delete using this code [2].\n\n[1] - https://github.com/richardwilly98/elasticsearch-river-mongodb/blob/master/src/test/java/org/elasticsearch/river/mongodb/RiverMongoDBTestAbstract.java#L300\n[2] - https://github.com/richardwilly98/elasticsearch-river-mongodb/blob/master/src/test/java/org/elasticsearch/river/mongodb/RiverMongoDBTestAbstract.java#L378\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/28697849","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-28697849","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":28697849,"node_id":"MDEyOklzc3VlQ29tbWVudDI4Njk3ODQ5","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2013-11-18T13:35:48Z","updated_at":"2013-11-18T13:35:48Z","author_association":"MEMBER","body":"@richardwilly98 I spent some time looking at your log file. I do see that 5 attempts are not enough in some cases, but it's hard to understand why and if it's a test problem or not. Do you have failures on the same tests or random ones? Can you make logging more specific to rivers, log when the before test method starts and ends, same for the after method and run it again? Maybe that would help understanding what's going on.\n\n@jprante everything ok with your river or do you have the same problem?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/28698473","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-28698473","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":28698473,"node_id":"MDEyOklzc3VlQ29tbWVudDI4Njk4NDcz","user":{"login":"richardwilly98","id":118560,"node_id":"MDQ6VXNlcjExODU2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/118560?v=4","gravatar_id":"","url":"https://api.github.com/users/richardwilly98","html_url":"https://github.com/richardwilly98","followers_url":"https://api.github.com/users/richardwilly98/followers","following_url":"https://api.github.com/users/richardwilly98/following{/other_user}","gists_url":"https://api.github.com/users/richardwilly98/gists{/gist_id}","starred_url":"https://api.github.com/users/richardwilly98/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardwilly98/subscriptions","organizations_url":"https://api.github.com/users/richardwilly98/orgs","repos_url":"https://api.github.com/users/richardwilly98/repos","events_url":"https://api.github.com/users/richardwilly98/events{/privacy}","received_events_url":"https://api.github.com/users/richardwilly98/received_events","type":"User","site_admin":false},"created_at":"2013-11-18T13:45:58Z","updated_at":"2013-11-18T13:45:58Z","author_association":"CONTRIBUTOR","body":"@javanna \nThe failures are random. The same tests work fine with ES 0.90.5.\nWhat king of information should I log in before / after test method?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/28701832","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-28701832","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":28701832,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzAxODMy","user":{"login":"jprante","id":635745,"node_id":"MDQ6VXNlcjYzNTc0NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/635745?v=4","gravatar_id":"","url":"https://api.github.com/users/jprante","html_url":"https://github.com/jprante","followers_url":"https://api.github.com/users/jprante/followers","following_url":"https://api.github.com/users/jprante/following{/other_user}","gists_url":"https://api.github.com/users/jprante/gists{/gist_id}","starred_url":"https://api.github.com/users/jprante/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jprante/subscriptions","organizations_url":"https://api.github.com/users/jprante/orgs","repos_url":"https://api.github.com/users/jprante/repos","events_url":"https://api.github.com/users/jprante/events{/privacy}","received_events_url":"https://api.github.com/users/jprante/received_events","type":"User","site_admin":false},"created_at":"2013-11-18T14:32:16Z","updated_at":"2013-11-18T14:32:16Z","author_association":"CONTRIBUTOR","body":"@javanna With 0.90.7, I can create JDBC river instances flawlessly (a manual test succeeds, also junit tests). If required, I could spend some time on setting up random test creations of river instances.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/28703165","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-28703165","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":28703165,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzAzMTY1","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2013-11-18T14:48:23Z","updated_at":"2013-11-18T14:48:47Z","author_association":"MEMBER","body":"Thanks @jprante for your feedback! We do have a test for river creation now, which is part of our randomized tests that countinuously run. That test never failed since I added it, maybe it's just not nasty enough.\n\n@richardwilly98 I just want to be able to read those logs properly. From the big log you attached it's hard to understand when a test method starts, what is part of the before test and what is part of the after test cleanup. We need to isolate the failures in order to understand what caused them.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/28704162","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-28704162","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":28704162,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzA0MTYy","user":{"login":"richardwilly98","id":118560,"node_id":"MDQ6VXNlcjExODU2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/118560?v=4","gravatar_id":"","url":"https://api.github.com/users/richardwilly98","html_url":"https://github.com/richardwilly98","followers_url":"https://api.github.com/users/richardwilly98/followers","following_url":"https://api.github.com/users/richardwilly98/following{/other_user}","gists_url":"https://api.github.com/users/richardwilly98/gists{/gist_id}","starred_url":"https://api.github.com/users/richardwilly98/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardwilly98/subscriptions","organizations_url":"https://api.github.com/users/richardwilly98/orgs","repos_url":"https://api.github.com/users/richardwilly98/repos","events_url":"https://api.github.com/users/richardwilly98/events{/privacy}","received_events_url":"https://api.github.com/users/richardwilly98/received_events","type":"User","site_admin":false},"created_at":"2013-11-18T14:59:36Z","updated_at":"2013-11-18T14:59:36Z","author_association":"CONTRIBUTOR","body":"@javanna I understand I will produce better logs and isolate a working test and a failed one.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/28712059","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-28712059","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":28712059,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzEyMDU5","user":{"login":"richardwilly98","id":118560,"node_id":"MDQ6VXNlcjExODU2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/118560?v=4","gravatar_id":"","url":"https://api.github.com/users/richardwilly98","html_url":"https://github.com/richardwilly98","followers_url":"https://api.github.com/users/richardwilly98/followers","following_url":"https://api.github.com/users/richardwilly98/following{/other_user}","gists_url":"https://api.github.com/users/richardwilly98/gists{/gist_id}","starred_url":"https://api.github.com/users/richardwilly98/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardwilly98/subscriptions","organizations_url":"https://api.github.com/users/richardwilly98/orgs","repos_url":"https://api.github.com/users/richardwilly98/repos","events_url":"https://api.github.com/users/richardwilly98/events{/privacy}","received_events_url":"https://api.github.com/users/richardwilly98/received_events","type":"User","site_admin":false},"created_at":"2013-11-18T16:19:31Z","updated_at":"2013-11-18T16:19:31Z","author_association":"CONTRIBUTOR","body":"@javanna \nI have posted a new gist [1]. It contains 2 file:\n- RiverMongoInitialImportTest a successful test\n- RiverMongoInitialTimestampTest test where river is not started\n\n[1] - https://gist.github.com/richardwilly98/7530444/edit\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/28781503","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-28781503","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":28781503,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzgxNTAz","user":{"login":"richardwilly98","id":118560,"node_id":"MDQ6VXNlcjExODU2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/118560?v=4","gravatar_id":"","url":"https://api.github.com/users/richardwilly98","html_url":"https://github.com/richardwilly98","followers_url":"https://api.github.com/users/richardwilly98/followers","following_url":"https://api.github.com/users/richardwilly98/following{/other_user}","gists_url":"https://api.github.com/users/richardwilly98/gists{/gist_id}","starred_url":"https://api.github.com/users/richardwilly98/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardwilly98/subscriptions","organizations_url":"https://api.github.com/users/richardwilly98/orgs","repos_url":"https://api.github.com/users/richardwilly98/repos","events_url":"https://api.github.com/users/richardwilly98/events{/privacy}","received_events_url":"https://api.github.com/users/richardwilly98/received_events","type":"User","site_admin":false},"created_at":"2013-11-19T11:03:29Z","updated_at":"2013-11-19T11:03:29Z","author_association":"CONTRIBUTOR","body":"@javanna \nDo not spend time on analyzing the logs. That might be due to the way river closing is handled on my side.\nI will keep you updated.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/28790804","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-28790804","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":28790804,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzkwODA0","user":{"login":"richardwilly98","id":118560,"node_id":"MDQ6VXNlcjExODU2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/118560?v=4","gravatar_id":"","url":"https://api.github.com/users/richardwilly98","html_url":"https://github.com/richardwilly98","followers_url":"https://api.github.com/users/richardwilly98/followers","following_url":"https://api.github.com/users/richardwilly98/following{/other_user}","gists_url":"https://api.github.com/users/richardwilly98/gists{/gist_id}","starred_url":"https://api.github.com/users/richardwilly98/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardwilly98/subscriptions","organizations_url":"https://api.github.com/users/richardwilly98/orgs","repos_url":"https://api.github.com/users/richardwilly98/repos","events_url":"https://api.github.com/users/richardwilly98/events{/privacy}","received_events_url":"https://api.github.com/users/richardwilly98/received_events","type":"User","site_admin":false},"created_at":"2013-11-19T13:48:46Z","updated_at":"2013-11-19T13:48:46Z","author_association":"CONTRIBUTOR","body":"@javanna \nI had an issue on my side where one thread was not correctly stopped on closing the river.\nI am not sure the reason tests were still successful with ES 0.90.5...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/28795806","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-28795806","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":28795806,"node_id":"MDEyOklzc3VlQ29tbWVudDI4Nzk1ODA2","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2013-11-19T14:54:38Z","updated_at":"2013-11-19T14:54:38Z","author_association":"MEMBER","body":"Ok, thanks @richardwilly98 . Does it mean that all your tests are consistently green now?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/28796024","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-28796024","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":28796024,"node_id":"MDEyOklzc3VlQ29tbWVudDI4Nzk2MDI0","user":{"login":"richardwilly98","id":118560,"node_id":"MDQ6VXNlcjExODU2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/118560?v=4","gravatar_id":"","url":"https://api.github.com/users/richardwilly98","html_url":"https://github.com/richardwilly98","followers_url":"https://api.github.com/users/richardwilly98/followers","following_url":"https://api.github.com/users/richardwilly98/following{/other_user}","gists_url":"https://api.github.com/users/richardwilly98/gists{/gist_id}","starred_url":"https://api.github.com/users/richardwilly98/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardwilly98/subscriptions","organizations_url":"https://api.github.com/users/richardwilly98/orgs","repos_url":"https://api.github.com/users/richardwilly98/repos","events_url":"https://api.github.com/users/richardwilly98/events{/privacy}","received_events_url":"https://api.github.com/users/richardwilly98/received_events","type":"User","site_admin":false},"created_at":"2013-11-19T14:57:08Z","updated_at":"2013-11-19T14:57:08Z","author_association":"CONTRIBUTOR","body":"Yes\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/28796601","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-28796601","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":28796601,"node_id":"MDEyOklzc3VlQ29tbWVudDI4Nzk2NjAx","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2013-11-19T15:03:45Z","updated_at":"2013-11-19T15:03:45Z","author_association":"MEMBER","body":"Cool, glad to hear that!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/32823842","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-32823842","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":32823842,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODIzODQy","user":{"login":"ryan1234","id":1672337,"node_id":"MDQ6VXNlcjE2NzIzMzc=","avatar_url":"https://avatars3.githubusercontent.com/u/1672337?v=4","gravatar_id":"","url":"https://api.github.com/users/ryan1234","html_url":"https://github.com/ryan1234","followers_url":"https://api.github.com/users/ryan1234/followers","following_url":"https://api.github.com/users/ryan1234/following{/other_user}","gists_url":"https://api.github.com/users/ryan1234/gists{/gist_id}","starred_url":"https://api.github.com/users/ryan1234/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryan1234/subscriptions","organizations_url":"https://api.github.com/users/ryan1234/orgs","repos_url":"https://api.github.com/users/ryan1234/repos","events_url":"https://api.github.com/users/ryan1234/events{/privacy}","received_events_url":"https://api.github.com/users/ryan1234/received_events","type":"User","site_admin":false},"created_at":"2014-01-21T06:08:36Z","updated_at":"2014-01-21T06:08:36Z","author_association":"NONE","body":"I'm having similar problems with 0.90.9 and the JDBC river plugin. I have a simple two node cluster and the JDBC river seems to not start roughly 4 out of 5 times. I have another custom river running and that always starts and runs. The DEBUG log for my cluster is obviously very verbose. What does a retry look like in the logs? \n\nFrom reading through the logs I can't seem to find any errors or warnings about starting the JDBC river.  When I restart the master node it just seems to ignore that river altogether.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/32824235","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-32824235","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":32824235,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODI0MjM1","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2014-01-21T06:20:02Z","updated_at":"2014-01-21T06:20:02Z","author_association":"MEMBER","body":"Are you using templates?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/32824322","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-32824322","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":32824322,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODI0MzIy","user":{"login":"ryan1234","id":1672337,"node_id":"MDQ6VXNlcjE2NzIzMzc=","avatar_url":"https://avatars3.githubusercontent.com/u/1672337?v=4","gravatar_id":"","url":"https://api.github.com/users/ryan1234","html_url":"https://github.com/ryan1234","followers_url":"https://api.github.com/users/ryan1234/followers","following_url":"https://api.github.com/users/ryan1234/following{/other_user}","gists_url":"https://api.github.com/users/ryan1234/gists{/gist_id}","starred_url":"https://api.github.com/users/ryan1234/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryan1234/subscriptions","organizations_url":"https://api.github.com/users/ryan1234/orgs","repos_url":"https://api.github.com/users/ryan1234/repos","events_url":"https://api.github.com/users/ryan1234/events{/privacy}","received_events_url":"https://api.github.com/users/ryan1234/received_events","type":"User","site_admin":false},"created_at":"2014-01-21T06:22:24Z","updated_at":"2014-01-21T06:22:24Z","author_association":"NONE","body":"Sorry for my ignorance, but what is a template?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/32824399","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-32824399","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":32824399,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODI0Mzk5","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2014-01-21T06:24:38Z","updated_at":"2014-01-21T06:24:38Z","author_association":"MEMBER","body":"Forget my previous comment. There is an issue #4577 which I think could produce this when you have more than one river running.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/32824566","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-32824566","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":32824566,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODI0NTY2","user":{"login":"ryan1234","id":1672337,"node_id":"MDQ6VXNlcjE2NzIzMzc=","avatar_url":"https://avatars3.githubusercontent.com/u/1672337?v=4","gravatar_id":"","url":"https://api.github.com/users/ryan1234","html_url":"https://github.com/ryan1234","followers_url":"https://api.github.com/users/ryan1234/followers","following_url":"https://api.github.com/users/ryan1234/following{/other_user}","gists_url":"https://api.github.com/users/ryan1234/gists{/gist_id}","starred_url":"https://api.github.com/users/ryan1234/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryan1234/subscriptions","organizations_url":"https://api.github.com/users/ryan1234/orgs","repos_url":"https://api.github.com/users/ryan1234/repos","events_url":"https://api.github.com/users/ryan1234/events{/privacy}","received_events_url":"https://api.github.com/users/ryan1234/received_events","type":"User","site_admin":false},"created_at":"2014-01-21T06:28:55Z","updated_at":"2014-01-21T06:28:55Z","author_association":"NONE","body":"We don't have any templates defined. I have seen an example where more than one river runs successfully one our cluster. Is it a rare use case to have more than one river running?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/32954527","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-32954527","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":32954527,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTU0NTI3","user":{"login":"ryan1234","id":1672337,"node_id":"MDQ6VXNlcjE2NzIzMzc=","avatar_url":"https://avatars3.githubusercontent.com/u/1672337?v=4","gravatar_id":"","url":"https://api.github.com/users/ryan1234","html_url":"https://github.com/ryan1234","followers_url":"https://api.github.com/users/ryan1234/followers","following_url":"https://api.github.com/users/ryan1234/following{/other_user}","gists_url":"https://api.github.com/users/ryan1234/gists{/gist_id}","starred_url":"https://api.github.com/users/ryan1234/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryan1234/subscriptions","organizations_url":"https://api.github.com/users/ryan1234/orgs","repos_url":"https://api.github.com/users/ryan1234/repos","events_url":"https://api.github.com/users/ryan1234/events{/privacy}","received_events_url":"https://api.github.com/users/ryan1234/received_events","type":"User","site_admin":false},"created_at":"2014-01-21T19:36:30Z","updated_at":"2014-01-21T19:36:30Z","author_association":"NONE","body":"Some additional notes:\n- I ended up scaling down from a cluster of two nodes to one node. The rivers start reliably on one node for whatever reason.  For the time being we'll scale that node up and hopefully in a month or two we'll work through this issue.\n- In this function: https://github.com/elasticsearch/elasticsearch/blob/master/src/main/java/org/elasticsearch/river/routing/RiversRouter.java#L113 I see various logging lines as Elastic looks for the `_meta` documents.  I can't find any of the `_meta document found.` or the `failed to get/parse _meta for` lines in my log file even though it is set to DEBUG.  I would assume no matter what, when a master node is restarted for a cluster that one of those lines would be logged.\n- I keep seeing lines like this in my log:\n\n[2014-01-21 19:27:59,091][DEBUG][river.cluster            ] [Isaac] processing [reroute_rivers_node_changed]: execute\n[2014-01-21 19:27:59,097][DEBUG][river.cluster            ] [Isaac] processing [reroute_rivers_node_changed]: no change in cluster_state\n- The missing log lines plus the \"no change in cluster_state\" make me think the `updateRiverClusterState` function is never getting fired.  Am I way off on that?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/32967238","html_url":"https://github.com/elastic/elasticsearch/issues/4089#issuecomment-32967238","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4089","id":32967238,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTY3MjM4","user":{"login":"jprante","id":635745,"node_id":"MDQ6VXNlcjYzNTc0NQ==","avatar_url":"https://avatars1.githubusercontent.com/u/635745?v=4","gravatar_id":"","url":"https://api.github.com/users/jprante","html_url":"https://github.com/jprante","followers_url":"https://api.github.com/users/jprante/followers","following_url":"https://api.github.com/users/jprante/following{/other_user}","gists_url":"https://api.github.com/users/jprante/gists{/gist_id}","starred_url":"https://api.github.com/users/jprante/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jprante/subscriptions","organizations_url":"https://api.github.com/users/jprante/orgs","repos_url":"https://api.github.com/users/jprante/repos","events_url":"https://api.github.com/users/jprante/events{/privacy}","received_events_url":"https://api.github.com/users/jprante/received_events","type":"User","site_admin":false},"created_at":"2014-01-21T21:47:28Z","updated_at":"2014-01-21T21:47:28Z","author_association":"CONTRIBUTOR","body":"@ryan1234 is it possible you can try JDBC river 1.0.0.RC1.2 if the problem still persists? I just tested a simple MySQL river with two nodes in all combinations with 1.0.0.RC1.2 but I have no problems with starting rivers.\n","performed_via_github_app":null}]