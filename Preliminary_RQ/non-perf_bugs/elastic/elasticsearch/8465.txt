{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/8465","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8465/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8465/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8465/events","html_url":"https://github.com/elastic/elasticsearch/issues/8465","id":48626571,"node_id":"MDU6SXNzdWU0ODYyNjU3MQ==","number":8465,"title":"Documents missing after adding a new node","user":{"login":"aadithya","id":519138,"node_id":"MDQ6VXNlcjUxOTEzOA==","avatar_url":"https://avatars0.githubusercontent.com/u/519138?v=4","gravatar_id":"","url":"https://api.github.com/users/aadithya","html_url":"https://github.com/aadithya","followers_url":"https://api.github.com/users/aadithya/followers","following_url":"https://api.github.com/users/aadithya/following{/other_user}","gists_url":"https://api.github.com/users/aadithya/gists{/gist_id}","starred_url":"https://api.github.com/users/aadithya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aadithya/subscriptions","organizations_url":"https://api.github.com/users/aadithya/orgs","repos_url":"https://api.github.com/users/aadithya/repos","events_url":"https://api.github.com/users/aadithya/events{/privacy}","received_events_url":"https://api.github.com/users/aadithya/received_events","type":"User","site_admin":false},"labels":[{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"assignees":[{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false}],"milestone":null,"comments":9,"created_at":"2014-11-13T11:38:58Z","updated_at":"2015-04-01T13:26:50Z","closed_at":"2015-04-01T13:26:50Z","author_association":"NONE","active_lock_reason":null,"body":"1. Create a new Elasticsearch cluster with 2 nodes and 5000 documents.\n2. Add  a new node with zone awareness in a different zone. \n3. Exclude IPs and delete the first 2 nodes.\n4. Delete 20 documents.\n5. Add 2 new nodes with zone awareness in a different zone.\n6. Exclude IPs and delete the old single node.\n7. Add back the same 20 documents.\n8. Add a new node with zone awareness in a different zone.\n\nWe can now see inconsistent document counts returned from each of the nodes. If we flush we see the correct 5000 documents. But if we exclude IPs and delete the 2 old nodes we see data loss and only 4980 documents. The newly added 20 documents go missing.\n","closed_by":{"login":"aadithya","id":519138,"node_id":"MDQ6VXNlcjUxOTEzOA==","avatar_url":"https://avatars0.githubusercontent.com/u/519138?v=4","gravatar_id":"","url":"https://api.github.com/users/aadithya","html_url":"https://github.com/aadithya","followers_url":"https://api.github.com/users/aadithya/followers","following_url":"https://api.github.com/users/aadithya/following{/other_user}","gists_url":"https://api.github.com/users/aadithya/gists{/gist_id}","starred_url":"https://api.github.com/users/aadithya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aadithya/subscriptions","organizations_url":"https://api.github.com/users/aadithya/orgs","repos_url":"https://api.github.com/users/aadithya/repos","events_url":"https://api.github.com/users/aadithya/events{/privacy}","received_events_url":"https://api.github.com/users/aadithya/received_events","type":"User","site_admin":false},"performed_via_github_app":null}