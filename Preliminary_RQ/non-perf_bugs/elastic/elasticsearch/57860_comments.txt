[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/641019233","html_url":"https://github.com/elastic/elasticsearch/issues/57860#issuecomment-641019233","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57860","id":641019233,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MTAxOTIzMw==","user":{"login":"alexklibisz","id":8015228,"node_id":"MDQ6VXNlcjgwMTUyMjg=","avatar_url":"https://avatars2.githubusercontent.com/u/8015228?v=4","gravatar_id":"","url":"https://api.github.com/users/alexklibisz","html_url":"https://github.com/alexklibisz","followers_url":"https://api.github.com/users/alexklibisz/followers","following_url":"https://api.github.com/users/alexklibisz/following{/other_user}","gists_url":"https://api.github.com/users/alexklibisz/gists{/gist_id}","starred_url":"https://api.github.com/users/alexklibisz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexklibisz/subscriptions","organizations_url":"https://api.github.com/users/alexklibisz/orgs","repos_url":"https://api.github.com/users/alexklibisz/repos","events_url":"https://api.github.com/users/alexklibisz/events{/privacy}","received_events_url":"https://api.github.com/users/alexklibisz/received_events","type":"User","site_admin":false},"created_at":"2020-06-09T04:22:43Z","updated_at":"2020-06-09T04:22:43Z","author_association":"NONE","body":"I suspect this part of the code might be relevant: https://github.com/elastic/elasticsearch/blob/bd64da096088af2a52cea7b9e48252a27294d27b/buildSrc/src/main/java/org/elasticsearch/gradle/testclusters/ElasticsearchNode.java#L461\r\n\r\nIs there any way to turn on more verbose logging to show the exact command being invoked?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/641134006","html_url":"https://github.com/elastic/elasticsearch/issues/57860#issuecomment-641134006","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57860","id":641134006,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MTEzNDAwNg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-06-09T08:49:07Z","updated_at":"2020-06-09T08:49:07Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra (:Core/Infra/Build)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/641556732","html_url":"https://github.com/elastic/elasticsearch/issues/57860#issuecomment-641556732","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57860","id":641556732,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MTU1NjczMg==","user":{"login":"breskeby","id":77300,"node_id":"MDQ6VXNlcjc3MzAw","avatar_url":"https://avatars3.githubusercontent.com/u/77300?v=4","gravatar_id":"","url":"https://api.github.com/users/breskeby","html_url":"https://github.com/breskeby","followers_url":"https://api.github.com/users/breskeby/followers","following_url":"https://api.github.com/users/breskeby/following{/other_user}","gists_url":"https://api.github.com/users/breskeby/gists{/gist_id}","starred_url":"https://api.github.com/users/breskeby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/breskeby/subscriptions","organizations_url":"https://api.github.com/users/breskeby/orgs","repos_url":"https://api.github.com/users/breskeby/repos","events_url":"https://api.github.com/users/breskeby/events{/privacy}","received_events_url":"https://api.github.com/users/breskeby/received_events","type":"User","site_admin":false},"created_at":"2020-06-09T20:39:49Z","updated_at":"2020-06-09T20:39:49Z","author_association":"CONTRIBUTOR","body":"Thank you @alexklibisz for reporting. I'll look into this and come back to you in the next couple of days.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/641560163","html_url":"https://github.com/elastic/elasticsearch/issues/57860#issuecomment-641560163","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57860","id":641560163,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MTU2MDE2Mw==","user":{"login":"alexklibisz","id":8015228,"node_id":"MDQ6VXNlcjgwMTUyMjg=","avatar_url":"https://avatars2.githubusercontent.com/u/8015228?v=4","gravatar_id":"","url":"https://api.github.com/users/alexklibisz","html_url":"https://github.com/alexklibisz","followers_url":"https://api.github.com/users/alexklibisz/followers","following_url":"https://api.github.com/users/alexklibisz/following{/other_user}","gists_url":"https://api.github.com/users/alexklibisz/gists{/gist_id}","starred_url":"https://api.github.com/users/alexklibisz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexklibisz/subscriptions","organizations_url":"https://api.github.com/users/alexklibisz/orgs","repos_url":"https://api.github.com/users/alexklibisz/repos","events_url":"https://api.github.com/users/alexklibisz/events{/privacy}","received_events_url":"https://api.github.com/users/alexklibisz/received_events","type":"User","site_admin":false},"created_at":"2020-06-09T20:46:18Z","updated_at":"2020-06-09T20:46:18Z","author_association":"NONE","body":"> Thank you @alexklibisz for reporting. I'll look into this and come back to you in the next couple of days.\r\n\r\nThanks! ðŸ˜„ \r\n\r\nIf you have any pointers about where to look, I'm happy to do so as well. I'm not really familiar with the `buildSrc` part of the repo but could probably find my way around given a general direction.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/641649838","html_url":"https://github.com/elastic/elasticsearch/issues/57860#issuecomment-641649838","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57860","id":641649838,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MTY0OTgzOA==","user":{"login":"alexklibisz","id":8015228,"node_id":"MDQ6VXNlcjgwMTUyMjg=","avatar_url":"https://avatars2.githubusercontent.com/u/8015228?v=4","gravatar_id":"","url":"https://api.github.com/users/alexklibisz","html_url":"https://github.com/alexklibisz","followers_url":"https://api.github.com/users/alexklibisz/followers","following_url":"https://api.github.com/users/alexklibisz/following{/other_user}","gists_url":"https://api.github.com/users/alexklibisz/gists{/gist_id}","starred_url":"https://api.github.com/users/alexklibisz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexklibisz/subscriptions","organizations_url":"https://api.github.com/users/alexklibisz/orgs","repos_url":"https://api.github.com/users/alexklibisz/repos","events_url":"https://api.github.com/users/alexklibisz/events{/privacy}","received_events_url":"https://api.github.com/users/alexklibisz/received_events","type":"User","site_admin":false},"created_at":"2020-06-10T00:28:41Z","updated_at":"2020-06-10T00:28:41Z","author_association":"NONE","body":"Note there's an easier repro. In the elasticsearch repo, running\r\n\r\n```\r\n./gradlew --stacktrace :example-plugins:rescore:run --debug-jvm\r\n```\r\n\r\nfails with the same error.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/641676593","html_url":"https://github.com/elastic/elasticsearch/issues/57860#issuecomment-641676593","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57860","id":641676593,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MTY3NjU5Mw==","user":{"login":"alexklibisz","id":8015228,"node_id":"MDQ6VXNlcjgwMTUyMjg=","avatar_url":"https://avatars2.githubusercontent.com/u/8015228?v=4","gravatar_id":"","url":"https://api.github.com/users/alexklibisz","html_url":"https://github.com/alexklibisz","followers_url":"https://api.github.com/users/alexklibisz/followers","following_url":"https://api.github.com/users/alexklibisz/following{/other_user}","gists_url":"https://api.github.com/users/alexklibisz/gists{/gist_id}","starred_url":"https://api.github.com/users/alexklibisz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexklibisz/subscriptions","organizations_url":"https://api.github.com/users/alexklibisz/orgs","repos_url":"https://api.github.com/users/alexklibisz/repos","events_url":"https://api.github.com/users/alexklibisz/events{/privacy}","received_events_url":"https://api.github.com/users/alexklibisz/received_events","type":"User","site_admin":false},"created_at":"2020-06-10T02:09:34Z","updated_at":"2020-06-10T02:44:22Z","author_association":"NONE","body":"Good news:\r\n\r\nThe issue seems to be fixed by reverting the changes in this PR: https://github.com/elastic/elasticsearch/pull/48188\r\n\r\nI'm not sure what that intention of that PR was, but if you revert its changes, the gradle task arrives at the log line `Running elasticsearch in debug mode, node{:example-plugins:rescore:integTest-0} suspending until connected on debugPort 8000`.\r\n\r\nAlso if you set the debug port to 5000 or 5006 it works.. I guess there's something else running on 5005?\r\n\r\nI have no clue why it says that it's failing on the `./bin/elasticsearch-plugin` script. It seems like this is the last place it gets before exceptions start: https://github.com/elastic/elasticsearch/blob/007ec1f13517b4e525d42ad20f4d6b543e4696dd/buildSrc/src/minimumRuntime/java/org/elasticsearch/gradle/LoggedExec.java#L123\r\n\r\nIf I set a break point there, I can manually run the `./bin/elasticsearch-plugin` script and it exits with `0`.\r\n\r\nHopefully that helps a bit.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/641805593","html_url":"https://github.com/elastic/elasticsearch/issues/57860#issuecomment-641805593","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57860","id":641805593,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MTgwNTU5Mw==","user":{"login":"breskeby","id":77300,"node_id":"MDQ6VXNlcjc3MzAw","avatar_url":"https://avatars3.githubusercontent.com/u/77300?v=4","gravatar_id":"","url":"https://api.github.com/users/breskeby","html_url":"https://github.com/breskeby","followers_url":"https://api.github.com/users/breskeby/followers","following_url":"https://api.github.com/users/breskeby/following{/other_user}","gists_url":"https://api.github.com/users/breskeby/gists{/gist_id}","starred_url":"https://api.github.com/users/breskeby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/breskeby/subscriptions","organizations_url":"https://api.github.com/users/breskeby/orgs","repos_url":"https://api.github.com/users/breskeby/repos","events_url":"https://api.github.com/users/breskeby/events{/privacy}","received_events_url":"https://api.github.com/users/breskeby/received_events","type":"User","site_admin":false},"created_at":"2020-06-10T07:50:28Z","updated_at":"2020-06-10T07:50:44Z","author_association":"CONTRIBUTOR","body":"@alexklibisz The motivation behind that change is described here: https://github.com/elastic/elasticsearch/pull/48188#issue-329254100 So it fails to run as it expects the debug server to be already active. We probably can add a warning when this `--debug-jvm` flag is used that a debugging server process is expected the app can connect too. WDTY? //cc @alpar-t has ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/642014052","html_url":"https://github.com/elastic/elasticsearch/issues/57860#issuecomment-642014052","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57860","id":642014052,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MjAxNDA1Mg==","user":{"login":"alexklibisz","id":8015228,"node_id":"MDQ6VXNlcjgwMTUyMjg=","avatar_url":"https://avatars2.githubusercontent.com/u/8015228?v=4","gravatar_id":"","url":"https://api.github.com/users/alexklibisz","html_url":"https://github.com/alexklibisz","followers_url":"https://api.github.com/users/alexklibisz/followers","following_url":"https://api.github.com/users/alexklibisz/following{/other_user}","gists_url":"https://api.github.com/users/alexklibisz/gists{/gist_id}","starred_url":"https://api.github.com/users/alexklibisz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexklibisz/subscriptions","organizations_url":"https://api.github.com/users/alexklibisz/orgs","repos_url":"https://api.github.com/users/alexklibisz/repos","events_url":"https://api.github.com/users/alexklibisz/events{/privacy}","received_events_url":"https://api.github.com/users/alexklibisz/received_events","type":"User","site_admin":false},"created_at":"2020-06-10T13:35:53Z","updated_at":"2020-06-10T13:35:53Z","author_association":"NONE","body":"@breskeby Ahh. I see. Yes re-starting the debug server several times used to be annoying. \r\n\r\nTo make sure I understand, the correct debugging workflow is:\r\n\r\n1. Run the `Debug Elasticsearch` remote configuration in IntelliJ (or start some other debugger).\r\n2. Run the gradle command with `--debug-jvm`\r\n\r\nI tried that with the rescore plugin and it starts up without issues.\r\n\r\nAnd yes it would be very helpful if you could add a warning, especially since the problem seems to manifest via the `./bin/elasticsearch-plugin` script.","performed_via_github_app":null}]