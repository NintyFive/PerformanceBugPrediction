[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/81832855","html_url":"https://github.com/elastic/elasticsearch/issues/10107#issuecomment-81832855","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10107","id":81832855,"node_id":"MDEyOklzc3VlQ29tbWVudDgxODMyODU1","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2015-03-16T17:40:49Z","updated_at":"2015-03-16T17:40:49Z","author_association":"MEMBER","body":"@grantr this is going to be tough because the `doc['timestamp']` would be loaded from field data or doc_values, however, the document doesn't yet exist in the index, so there's nowhere to load field data from?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/81835243","html_url":"https://github.com/elastic/elasticsearch/issues/10107#issuecomment-81835243","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10107","id":81835243,"node_id":"MDEyOklzc3VlQ29tbWVudDgxODM1MjQz","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2015-03-16T17:44:26Z","updated_at":"2015-03-16T17:44:26Z","author_association":"MEMBER","body":"In order to support this, I think we would need to parse the document itself and provide a way of accessing it (perhaps just using `_source` would work, I don't know) in a script.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/81835377","html_url":"https://github.com/elastic/elasticsearch/issues/10107#issuecomment-81835377","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10107","id":81835377,"node_id":"MDEyOklzc3VlQ29tbWVudDgxODM1Mzc3","user":{"login":"grantr","id":680,"node_id":"MDQ6VXNlcjY4MA==","avatar_url":"https://avatars3.githubusercontent.com/u/680?v=4","gravatar_id":"","url":"https://api.github.com/users/grantr","html_url":"https://github.com/grantr","followers_url":"https://api.github.com/users/grantr/followers","following_url":"https://api.github.com/users/grantr/following{/other_user}","gists_url":"https://api.github.com/users/grantr/gists{/gist_id}","starred_url":"https://api.github.com/users/grantr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grantr/subscriptions","organizations_url":"https://api.github.com/users/grantr/orgs","repos_url":"https://api.github.com/users/grantr/repos","events_url":"https://api.github.com/users/grantr/events{/privacy}","received_events_url":"https://api.github.com/users/grantr/received_events","type":"User","site_admin":false},"created_at":"2015-03-16T17:44:38Z","updated_at":"2015-03-16T17:44:38Z","author_association":"NONE","body":"@dakrone The index request has the document in hand, so it doesn't have to come from the index. I figured it could be passed to the script somehow.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/81841366","html_url":"https://github.com/elastic/elasticsearch/issues/10107#issuecomment-81841366","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10107","id":81841366,"node_id":"MDEyOklzc3VlQ29tbWVudDgxODQxMzY2","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2015-03-16T17:53:27Z","updated_at":"2015-03-16T17:53:27Z","author_association":"MEMBER","body":"@grantr yeah, it would be the `_source` equivalent (pre-analysis) instead of `doc` equivalent (post-analysis)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/81844942","html_url":"https://github.com/elastic/elasticsearch/issues/10107#issuecomment-81844942","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10107","id":81844942,"node_id":"MDEyOklzc3VlQ29tbWVudDgxODQ0OTQy","user":{"login":"grantr","id":680,"node_id":"MDQ6VXNlcjY4MA==","avatar_url":"https://avatars3.githubusercontent.com/u/680?v=4","gravatar_id":"","url":"https://api.github.com/users/grantr","html_url":"https://github.com/grantr","followers_url":"https://api.github.com/users/grantr/followers","following_url":"https://api.github.com/users/grantr/following{/other_user}","gists_url":"https://api.github.com/users/grantr/gists{/gist_id}","starred_url":"https://api.github.com/users/grantr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grantr/subscriptions","organizations_url":"https://api.github.com/users/grantr/orgs","repos_url":"https://api.github.com/users/grantr/repos","events_url":"https://api.github.com/users/grantr/events{/privacy}","received_events_url":"https://api.github.com/users/grantr/received_events","type":"User","site_admin":false},"created_at":"2015-03-16T18:00:24Z","updated_at":"2015-03-16T18:00:24Z","author_association":"NONE","body":"@dakrone that's fine. the `doc['timestamp']` example was just pseudocode. I wouldn't expect the document to have already gone through the indexing pipeline. I expect 99% of the use cases for this would be looking at dates and numbers, and the other 1% at non-analyzed strings.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/85428511","html_url":"https://github.com/elastic/elasticsearch/issues/10107#issuecomment-85428511","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10107","id":85428511,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDI4NTEx","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2015-03-24T09:58:06Z","updated_at":"2015-03-24T09:58:06Z","author_association":"MEMBER","body":"I marked this for discussion. I am -1 on this specific proposal, I think it would slow indexing down and, while scripting is very appealing and powerful, I am not sure I would want to see it supported here, feels scary.\n\nWhy would you want to write into a different index depending on document fields though? When it comes to logging, there usually is a single index (the most recent one?) that you would write into out of the indices that the alias points to. We could add a new property to the multi-index alias that holds the index name for write operations, which needs to be a single index and part of the indices that the alias points to for reads. If not specified, behaviour remains the same as now (no write will happen). Thoughts?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/85610507","html_url":"https://github.com/elastic/elasticsearch/issues/10107#issuecomment-85610507","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10107","id":85610507,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjEwNTA3","user":{"login":"grantr","id":680,"node_id":"MDQ6VXNlcjY4MA==","avatar_url":"https://avatars3.githubusercontent.com/u/680?v=4","gravatar_id":"","url":"https://api.github.com/users/grantr","html_url":"https://github.com/grantr","followers_url":"https://api.github.com/users/grantr/followers","following_url":"https://api.github.com/users/grantr/following{/other_user}","gists_url":"https://api.github.com/users/grantr/gists{/gist_id}","starred_url":"https://api.github.com/users/grantr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grantr/subscriptions","organizations_url":"https://api.github.com/users/grantr/orgs","repos_url":"https://api.github.com/users/grantr/repos","events_url":"https://api.github.com/users/grantr/events{/privacy}","received_events_url":"https://api.github.com/users/grantr/received_events","type":"User","site_admin":false},"created_at":"2015-03-24T17:32:54Z","updated_at":"2015-03-24T17:32:54Z","author_association":"NONE","body":"Thanks for your thoughts @javanna!\n\n> Why would you want to write into a different index depending on document fields though?\n\nSpecifying a single write index would be a good start, but doesn't fit our use case. For one of our time-series indices used for tracking exceptions, it isn't enough to always write to the most recent index. Documents might be queued or in flight during the rollover, causing some documents to be indexed in the wrong index.\n\nWe also move documents that are marked as interesting (i.e. viewed by a human) out of rotating indices and into a permanent index so that links to them never expire. The index must be deterministic so we can find the interesting documents to be moved later.\n\nAnother use case is splitting a large mutable index into multiple smaller ones for better maintainability. Documents would be bucketed by id or some other field.\n\n> I think it would slow indexing down\n\nScripting might slow indexing slightly, but the user who needs this functionality pays that cost whether it's in the app or in Elasticsearch, so the end-to-end latency is the same.\n\n> I am not sure I would want to see it supported here, feels scary.\n\nWhat about scripting support here feels scary? It doesn't seem any scarier than running scripts on searches, where a misbehaving or poorly written script could take a node down. Scripting in any context is a power feature that needs to be used with care.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/89754690","html_url":"https://github.com/elastic/elasticsearch/issues/10107#issuecomment-89754690","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10107","id":89754690,"node_id":"MDEyOklzc3VlQ29tbWVudDg5NzU0Njkw","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-04-05T11:12:02Z","updated_at":"2015-04-05T11:12:02Z","author_association":"CONTRIBUTOR","body":"It feels to me like the right place for this is logstash, which already does things like using the timestamp to determine which index the document should be sent to.  Logstash is an ETL pipeline, but Elasticsearch isn't.  I'd much rather not add this kind of complexity to ES.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/90252485","html_url":"https://github.com/elastic/elasticsearch/issues/10107#issuecomment-90252485","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10107","id":90252485,"node_id":"MDEyOklzc3VlQ29tbWVudDkwMjUyNDg1","user":{"login":"grantr","id":680,"node_id":"MDQ6VXNlcjY4MA==","avatar_url":"https://avatars3.githubusercontent.com/u/680?v=4","gravatar_id":"","url":"https://api.github.com/users/grantr","html_url":"https://github.com/grantr","followers_url":"https://api.github.com/users/grantr/followers","following_url":"https://api.github.com/users/grantr/following{/other_user}","gists_url":"https://api.github.com/users/grantr/gists{/gist_id}","starred_url":"https://api.github.com/users/grantr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grantr/subscriptions","organizations_url":"https://api.github.com/users/grantr/orgs","repos_url":"https://api.github.com/users/grantr/repos","events_url":"https://api.github.com/users/grantr/events{/privacy}","received_events_url":"https://api.github.com/users/grantr/received_events","type":"User","site_admin":false},"created_at":"2015-04-06T21:37:58Z","updated_at":"2015-04-06T21:37:58Z","author_association":"NONE","body":"> Logstash is an ETL pipeline, but Elasticsearch isn't.\n\nThe recent deprecation of rivers makes this statement more acceptable. Elasticsearch definitely was an ETL pipeline until then.\n\nI still don't understand the resistance to this feature, but it seems pretty definite, so I'll close this. We'll implement it as a proxy most likely.\n","performed_via_github_app":null}]