[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/516319339","html_url":"https://github.com/elastic/elasticsearch/issues/44976#issuecomment-516319339","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44976","id":516319339,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjMxOTMzOQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-07-30T08:26:26Z","updated_at":"2019-07-30T08:26:26Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/521642372","html_url":"https://github.com/elastic/elasticsearch/issues/44976#issuecomment-521642372","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44976","id":521642372,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTY0MjM3Mg==","user":{"login":"andrershov","id":600624,"node_id":"MDQ6VXNlcjYwMDYyNA==","avatar_url":"https://avatars1.githubusercontent.com/u/600624?v=4","gravatar_id":"","url":"https://api.github.com/users/andrershov","html_url":"https://github.com/andrershov","followers_url":"https://api.github.com/users/andrershov/followers","following_url":"https://api.github.com/users/andrershov/following{/other_user}","gists_url":"https://api.github.com/users/andrershov/gists{/gist_id}","starred_url":"https://api.github.com/users/andrershov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrershov/subscriptions","organizations_url":"https://api.github.com/users/andrershov/orgs","repos_url":"https://api.github.com/users/andrershov/repos","events_url":"https://api.github.com/users/andrershov/events{/privacy}","received_events_url":"https://api.github.com/users/andrershov/received_events","type":"User","site_admin":false},"created_at":"2019-08-15T13:33:47Z","updated_at":"2019-08-15T13:33:47Z","author_association":"CONTRIBUTOR","body":"@rtkjliviero could you please elaborate on \r\n\r\n> This is particularly relevant when nodes do not use 9200 as their HTTP port - for example, in a multi-node testing situation on a single host.\r\n\r\nusage scenario.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/521651836","html_url":"https://github.com/elastic/elasticsearch/issues/44976#issuecomment-521651836","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44976","id":521651836,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTY1MTgzNg==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2019-08-15T14:01:34Z","updated_at":"2019-08-15T14:01:34Z","author_association":"MEMBER","body":"I think that the user is asking if we can expose the http address of the remote nodes. We have removed that as it required a remote call to each of the nodes when calling remote info, given that the http port is not part of the info kept around about each remote node, while the transport port is.\r\n\r\nPlease correct me if I am wrong. \r\n\r\nI would also be curious to hear what the usecase is for this.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/522021612","html_url":"https://github.com/elastic/elasticsearch/issues/44976#issuecomment-522021612","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44976","id":522021612,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjAyMTYxMg==","user":{"login":"rtkjliviero","id":49073300,"node_id":"MDQ6VXNlcjQ5MDczMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/49073300?v=4","gravatar_id":"","url":"https://api.github.com/users/rtkjliviero","html_url":"https://github.com/rtkjliviero","followers_url":"https://api.github.com/users/rtkjliviero/followers","following_url":"https://api.github.com/users/rtkjliviero/following{/other_user}","gists_url":"https://api.github.com/users/rtkjliviero/gists{/gist_id}","starred_url":"https://api.github.com/users/rtkjliviero/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rtkjliviero/subscriptions","organizations_url":"https://api.github.com/users/rtkjliviero/orgs","repos_url":"https://api.github.com/users/rtkjliviero/repos","events_url":"https://api.github.com/users/rtkjliviero/events{/privacy}","received_events_url":"https://api.github.com/users/rtkjliviero/received_events","type":"User","site_admin":false},"created_at":"2019-08-16T14:08:01Z","updated_at":"2019-08-16T14:08:01Z","author_association":"NONE","body":"@javanna is correct - I should have been more clear.  Thanks!\r\n\r\nMy particular use case is:\r\n1. I have internal tooling which wraps some elasticsearch-py functionality.\r\n2. As part of testing that tooling, I am bringing up several Docker containers running Elasticsearch. These containers are configured used to set up a few clusters.  Each is configured as a remote node to a single coordinator node, for `<reasons>`.  For the sake of consistency, I would prefer to have the local port exposed by a given Docker and the http.port used by its corresponding Elasticsearch instance be the same.\r\n3. I then run a series of tests against my internal tooling, using those the coordinator node and/or the remote clusters as targets.\r\n4. To do so, I have to either assume every cluster uses http.port 9200 (which is fine until one doesn't \"in the wild\" or in production), or maintain a mapping of which cluster uses which port (which is a bit fragile).\r\n\r\n...but in general, there is no guarantee that a remote node is using port 9200 for http - it could be configured to use any arbitrary port.  I'm using a single \"coordinator\" node connected to several remote clusters to facilitate CCS, but I'd like to be able to perform actions on them which are not covered by CCS functionality.  To do so I'd like to have a way of discovering the correct port so that I can connect to the cluster directly when necessary.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/522043138","html_url":"https://github.com/elastic/elasticsearch/issues/44976#issuecomment-522043138","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44976","id":522043138,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjA0MzEzOA==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2019-08-16T15:08:39Z","updated_at":"2019-08-16T15:08:39Z","author_association":"MEMBER","body":"Thanks for the explanation @rtkjliviero ! Why would it be fragile to keep track of the different nodes and their http ports? I rather think that it would be a burden to have to maintain this redundant info (the http port of remote nodes), or make remote calls to be able to return it when it's not needed. It would be much cleaner to track which nodes run on which http port externally, as nodes are started.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/522064496","html_url":"https://github.com/elastic/elasticsearch/issues/44976#issuecomment-522064496","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44976","id":522064496,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjA2NDQ5Ng==","user":{"login":"rtkjliviero","id":49073300,"node_id":"MDQ6VXNlcjQ5MDczMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/49073300?v=4","gravatar_id":"","url":"https://api.github.com/users/rtkjliviero","html_url":"https://github.com/rtkjliviero","followers_url":"https://api.github.com/users/rtkjliviero/followers","following_url":"https://api.github.com/users/rtkjliviero/following{/other_user}","gists_url":"https://api.github.com/users/rtkjliviero/gists{/gist_id}","starred_url":"https://api.github.com/users/rtkjliviero/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rtkjliviero/subscriptions","organizations_url":"https://api.github.com/users/rtkjliviero/orgs","repos_url":"https://api.github.com/users/rtkjliviero/repos","events_url":"https://api.github.com/users/rtkjliviero/events{/privacy}","received_events_url":"https://api.github.com/users/rtkjliviero/received_events","type":"User","site_admin":false},"created_at":"2019-08-16T16:11:26Z","updated_at":"2019-08-16T16:11:26Z","author_association":"NONE","body":"> I rather think that it would be a burden to have to maintain this redundant info (the http port of remote nodes)\r\n\r\nThat's kind of what I meant - I'll have to maintain a separate mapping which could change at any time (say I start using another hypothetical tool that reserves one of the non-9200 ports I have already chosen, and I have to change my config).  Ideally I would just maintain a single docker-compose file, and detect the correct http.port values at runtime by using the `_remote/info` enpdoint (or its API equivalent, of course).\r\n\r\nIn my case I can certainly track the nodes and their ports externally, since I'm defining the test environment.  But in a \"live\" environment, I might not have that information.  In that case I'd never be able to reliable connect to a node that wasn't using `http.port==9200`.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/523828487","html_url":"https://github.com/elastic/elasticsearch/issues/44976#issuecomment-523828487","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44976","id":523828487,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMzgyODQ4Nw==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2019-08-22T09:33:30Z","updated_at":"2019-08-22T09:33:30Z","author_association":"MEMBER","body":"I see what you mean, it's a burden somehow, but it makes little sense for Elasticsearch to do this with the only goal of simplifying application's code, given that it can be done externally.\r\n\r\nOn the mapping possibly changing at anytime: the http port can only change by modifying the config file and restarting the node.\r\n\r\nI also don't follow the point around a \"live\" environment: If you want to connect to your nodes and send requests to them, you need to know their http ports, no matter which cluster they belong to. And that is decided when the node has started. That is why the record of all the nodes and their http addresses should be kept outside of Elasticsearch, in my opinion.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/526617805","html_url":"https://github.com/elastic/elasticsearch/issues/44976#issuecomment-526617805","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44976","id":526617805,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjYxNzgwNQ==","user":{"login":"andrershov","id":600624,"node_id":"MDQ6VXNlcjYwMDYyNA==","avatar_url":"https://avatars1.githubusercontent.com/u/600624?v=4","gravatar_id":"","url":"https://api.github.com/users/andrershov","html_url":"https://github.com/andrershov","followers_url":"https://api.github.com/users/andrershov/followers","following_url":"https://api.github.com/users/andrershov/following{/other_user}","gists_url":"https://api.github.com/users/andrershov/gists{/gist_id}","starred_url":"https://api.github.com/users/andrershov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrershov/subscriptions","organizations_url":"https://api.github.com/users/andrershov/orgs","repos_url":"https://api.github.com/users/andrershov/repos","events_url":"https://api.github.com/users/andrershov/events{/privacy}","received_events_url":"https://api.github.com/users/andrershov/received_events","type":"User","site_admin":false},"created_at":"2019-08-30T14:14:38Z","updated_at":"2019-08-30T14:14:38Z","author_association":"CONTRIBUTOR","body":"@rtkjliviero as far as I understand, you want to get remote node ports by invoking `GET /_remote/info`. And this is possible because `seeds` in the response will be comma-separated `hostname:port` entries. The PR you are referring to removes DNS lookup (A record) of the seed nodes, so previously this API call was returning `ip:port` entries in the `seeds` field.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/526624380","html_url":"https://github.com/elastic/elasticsearch/issues/44976#issuecomment-526624380","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44976","id":526624380,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjYyNDM4MA==","user":{"login":"andrershov","id":600624,"node_id":"MDQ6VXNlcjYwMDYyNA==","avatar_url":"https://avatars1.githubusercontent.com/u/600624?v=4","gravatar_id":"","url":"https://api.github.com/users/andrershov","html_url":"https://github.com/andrershov","followers_url":"https://api.github.com/users/andrershov/followers","following_url":"https://api.github.com/users/andrershov/following{/other_user}","gists_url":"https://api.github.com/users/andrershov/gists{/gist_id}","starred_url":"https://api.github.com/users/andrershov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrershov/subscriptions","organizations_url":"https://api.github.com/users/andrershov/orgs","repos_url":"https://api.github.com/users/andrershov/repos","events_url":"https://api.github.com/users/andrershov/events{/privacy}","received_events_url":"https://api.github.com/users/andrershov/received_events","type":"User","site_admin":false},"created_at":"2019-08-30T14:32:23Z","updated_at":"2019-08-30T14:32:23Z","author_association":"CONTRIBUTOR","body":"@rtkjliviero I've just realized that you're asking about HTTP ports, not transport ports. The PR you've linked is about different change.\r\nProbably the correct PR is this one https://github.com/elastic/elasticsearch/pull/29568 where we dropped the support for HTTP info of the remote cluster.\r\nI agree with @javanna that this is not a change we want to make, given that it can be done externally.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/526678216","html_url":"https://github.com/elastic/elasticsearch/issues/44976#issuecomment-526678216","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44976","id":526678216,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjY3ODIxNg==","user":{"login":"rtkjliviero","id":49073300,"node_id":"MDQ6VXNlcjQ5MDczMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/49073300?v=4","gravatar_id":"","url":"https://api.github.com/users/rtkjliviero","html_url":"https://github.com/rtkjliviero","followers_url":"https://api.github.com/users/rtkjliviero/followers","following_url":"https://api.github.com/users/rtkjliviero/following{/other_user}","gists_url":"https://api.github.com/users/rtkjliviero/gists{/gist_id}","starred_url":"https://api.github.com/users/rtkjliviero/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rtkjliviero/subscriptions","organizations_url":"https://api.github.com/users/rtkjliviero/orgs","repos_url":"https://api.github.com/users/rtkjliviero/repos","events_url":"https://api.github.com/users/rtkjliviero/events{/privacy}","received_events_url":"https://api.github.com/users/rtkjliviero/received_events","type":"User","site_admin":false},"created_at":"2019-08-30T17:10:37Z","updated_at":"2019-08-30T17:10:37Z","author_association":"NONE","body":"Understood, that's fair.  Thanks for taking the time to discuss this, @javanna and @andrershov! \r\n (And thanks also for linking the correct PR)\r\n\r\nI'll go ahead and close this issue.","performed_via_github_app":null}]