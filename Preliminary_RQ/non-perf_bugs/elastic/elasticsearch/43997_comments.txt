[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/508689418","html_url":"https://github.com/elastic/elasticsearch/issues/43997#issuecomment-508689418","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43997","id":508689418,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODY4OTQxOA==","user":{"login":"dliappis","id":1754575,"node_id":"MDQ6VXNlcjE3NTQ1NzU=","avatar_url":"https://avatars0.githubusercontent.com/u/1754575?v=4","gravatar_id":"","url":"https://api.github.com/users/dliappis","html_url":"https://github.com/dliappis","followers_url":"https://api.github.com/users/dliappis/followers","following_url":"https://api.github.com/users/dliappis/following{/other_user}","gists_url":"https://api.github.com/users/dliappis/gists{/gist_id}","starred_url":"https://api.github.com/users/dliappis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dliappis/subscriptions","organizations_url":"https://api.github.com/users/dliappis/orgs","repos_url":"https://api.github.com/users/dliappis/repos","events_url":"https://api.github.com/users/dliappis/events{/privacy}","received_events_url":"https://api.github.com/users/dliappis/received_events","type":"User","site_admin":false},"created_at":"2019-07-05T09:07:07Z","updated_at":"2019-07-05T09:07:07Z","author_association":"CONTRIBUTOR","body":"Thanks very much for your interest in Elasticsearch.\r\n\r\nNote that the Docker image in use (https://hub.docker.com/r/sebp/elk)\r\nis not a [docker image maintained by Elastic](https://www.docker.elastic.co).\r\n\r\nOne thing you could attempt is, assuming that you use a Docker volume or bind\r\nmount for your data and it's named `esdata` for example, to bind mount it to the \r\nofficial elasticsearch docker image and try something like:\r\n\r\n```\r\ndocker run --rm -u 1000:0 -v esdata:/usr/share/elasticsearch/data -ti docker.elastic.co/elasticsearch/elasticsearch:7.2.0 /bin/bash\r\n\r\n$ bin/elasticsearch-shard remove-corrupted-data --index <your index> --shard-id 0\r\n...\r\nOpening Lucene index at /usr/share/elasticsearch/data/nodes/0/indices/yOhM_rjQQui-9TEmWLN2GQ/0/index\r\n\r\n\r\n >> Lucene index is clean at /usr/share/elasticsearch/data/nodes/0/indices/yOhM_rjQQui-9TEmWLN2GQ/0/index\r\n\r\n\r\nOpening translog at /usr/share/elasticsearch/data/nodes/0/indices/yOhM_rjQQui-9TEmWLN2GQ/0/translog\r\n\r\n\r\n >> Translog is clean at /usr/share/elasticsearch/data/nodes/0/indices/yOhM_rjQQui-9TEmWLN2GQ/0/translog\r\n\r\nException in thread \"main\" ElasticsearchException[Shard does not seem to be corrupted at /usr/share/elasticsearch/data/nodes/0/indices/yOhM_rjQQui-9TEmWLN2GQ/0]\r\n...\r\n```\r\n\r\nThe above command overrides launching Elasticsearch and worked for me on a \"twitter\" index I created earlier.\r\n\r\nSince this appears to be a user question and the NPE couldn't be reproduced,\r\nwe'd like to direct these kinds of things to the [forums](https://discuss.elastic.co/).\r\nIf you can stop by there, we'd appreciate it. This allows us to use GitHub for verified \r\nbug reports, feature requests, and pull requests.\r\n\r\nThere's an active community in the [forums](https://discuss.elastic.co/)\r\nthat should be able to help get an answer to your question. As such, I \r\nhope you don't mind that I close this.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/508835166","html_url":"https://github.com/elastic/elasticsearch/issues/43997#issuecomment-508835166","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43997","id":508835166,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODgzNTE2Ng==","user":{"login":"craigsheppard","id":4712485,"node_id":"MDQ6VXNlcjQ3MTI0ODU=","avatar_url":"https://avatars0.githubusercontent.com/u/4712485?v=4","gravatar_id":"","url":"https://api.github.com/users/craigsheppard","html_url":"https://github.com/craigsheppard","followers_url":"https://api.github.com/users/craigsheppard/followers","following_url":"https://api.github.com/users/craigsheppard/following{/other_user}","gists_url":"https://api.github.com/users/craigsheppard/gists{/gist_id}","starred_url":"https://api.github.com/users/craigsheppard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/craigsheppard/subscriptions","organizations_url":"https://api.github.com/users/craigsheppard/orgs","repos_url":"https://api.github.com/users/craigsheppard/repos","events_url":"https://api.github.com/users/craigsheppard/events{/privacy}","received_events_url":"https://api.github.com/users/craigsheppard/received_events","type":"User","site_admin":false},"created_at":"2019-07-05T18:32:26Z","updated_at":"2019-07-05T18:32:47Z","author_association":"NONE","body":"Thanks! I understand :)\r\n\r\nFYI I attempted with the official docker container and it now gives a more descriptive `java.io.EOFException` error:\r\n\r\n```\r\n...\r\nOpening translog at /usr/share/elasticsearch/data/nodes/0/indices/8WitgzPDQvCiYJcnnli1sQ/1/translog\r\n\r\nread past EOF. pos [51026] length: [4] end: [51026]\r\n```\r\n\r\nI will follow up on the forms. Thank you for your help!","performed_via_github_app":null}]