[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/243841673","html_url":"https://github.com/elastic/elasticsearch/issues/20262#issuecomment-243841673","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20262","id":243841673,"node_id":"MDEyOklzc3VlQ29tbWVudDI0Mzg0MTY3Mw==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-08-31T17:39:26Z","updated_at":"2016-08-31T17:39:26Z","author_association":"CONTRIBUTOR","body":"I think either? If we write with vlong we really should validate the values are >= 0. We default to `-1` in `OsStats`, not 0. Maybe we should just default to a null `TimeValue`?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/243841948","html_url":"https://github.com/elastic/elasticsearch/issues/20262#issuecomment-243841948","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20262","id":243841948,"node_id":"MDEyOklzc3VlQ29tbWVudDI0Mzg0MTk0OA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-08-31T17:40:21Z","updated_at":"2016-08-31T17:40:21Z","author_association":"CONTRIBUTOR","body":"I do think it is a bit weird to allow negative bytes, though not super weird. Think of the answer to \"how many bytes would be left free after I assigned this shard to my node with a full disk?\" It'd be a negative number in bytes....\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/243850963","html_url":"https://github.com/elastic/elasticsearch/issues/20262#issuecomment-243850963","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20262","id":243850963,"node_id":"MDEyOklzc3VlQ29tbWVudDI0Mzg1MDk2Mw==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2016-08-31T18:09:49Z","updated_at":"2016-08-31T18:09:49Z","author_association":"MEMBER","body":"> We default to -1 in OsStats, not 0.\n\nin #20255 we will also have potentially `0` as a default for cumulative memory values. I think that -1 should rather be null, and we should use `writeOptionalWriteable` for that. Not sure where negative values may actually make sense, but accepting something that we won't serialize seems really wrong, so I am leaning towards changing serialization here first of all (at least 0 does make sense for a byte size value).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/243851463","html_url":"https://github.com/elastic/elasticsearch/issues/20262#issuecomment-243851463","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20262","id":243851463,"node_id":"MDEyOklzc3VlQ29tbWVudDI0Mzg1MTQ2Mw==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-08-31T18:11:27Z","updated_at":"2016-08-31T18:11:27Z","author_association":"CONTRIBUTOR","body":"vlong can write 0 though, so that is ok?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/243880261","html_url":"https://github.com/elastic/elasticsearch/issues/20262#issuecomment-243880261","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20262","id":243880261,"node_id":"MDEyOklzc3VlQ29tbWVudDI0Mzg4MDI2MQ==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2016-08-31T19:52:12Z","updated_at":"2016-08-31T19:52:12Z","author_association":"MEMBER","body":"> vlong can write 0 though, so that is ok?\n\nyes, forget about that bit... >= 0 is not the same as > 0 :) sorry for the noise there.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/243994688","html_url":"https://github.com/elastic/elasticsearch/issues/20262#issuecomment-243994688","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20262","id":243994688,"node_id":"MDEyOklzc3VlQ29tbWVudDI0Mzk5NDY4OA==","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2016-09-01T07:09:02Z","updated_at":"2016-09-01T07:09:02Z","author_association":"MEMBER","body":"Duplicate of #19809\n\nByteSizeValue as well as TimeValue need more love as well as the whole Stats stuff. I plan to work on this as soon as possible and @abeyad proposed his help too\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/244010063","html_url":"https://github.com/elastic/elasticsearch/issues/20262#issuecomment-244010063","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20262","id":244010063,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDAxMDA2Mw==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2016-09-01T08:22:52Z","updated_at":"2016-09-01T08:22:52Z","author_association":"MEMBER","body":"thanks for pointing that out. although #19809 seems broader than this one it definitely covers this issue, closing in favour of #19809 .  Let's just not forget that once we fix all this we can probably stop creating ByteSizeValue instances on demand to work around the fact that -1 cannot be serialized.\n","performed_via_github_app":null}]