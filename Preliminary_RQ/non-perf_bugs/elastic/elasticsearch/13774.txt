{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/13774","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13774/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13774/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13774/events","html_url":"https://github.com/elastic/elasticsearch/issues/13774","id":108165613,"node_id":"MDU6SXNzdWUxMDgxNjU2MTM=","number":13774,"title":"testDeserializeCorruptionException fails with java9 jigsaw build","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"labels":[{"id":60445228,"node_id":"MDU6TGFiZWw2MDQ0NTIyOA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest","name":">test","color":"5319e7","default":false,"description":"Issues or PRs that are addressing/adding tests"},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"},{"id":246685314,"node_id":"MDU6TGFiZWwyNDY2ODUzMTQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v5.0.0-alpha1","name":"v5.0.0-alpha1","color":"dddddd","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-09-24T16:26:34Z","updated_at":"2015-11-17T14:36:14Z","closed_at":"2015-11-17T14:36:14Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"I added assume()'s for these problems before, but new ones are creeping in. We should try to plan for the situation. The basics are that StackTraceElement gets a new member with java 9 jigsaw, the module, and we (obviously) lose it during serialization, this causes the current testing scheme to fail: note that `java.base@9.0` that gets lost. Can we test it better so we don't have this issue?\n\n```\nSuite: org.elasticsearch.index.store.StoreTests\n  2> REPRODUCE WITH: mvn test -Pdev -pl org.elasticsearch:elasticsearch -Dtests.seed=DAD1B0AD9C20C7 -Dtests.class=org.elasticsearch.index.store.StoreTests -Dtests.method=\"testDeserializeCorruptionException\" -Des.logger.level=ERROR -Dtests.assertion.disabled=false -Dtests.security.manager=true -Dtests.heap.size=512m -Dtests.locale=hu_HU -Dtests.timezone=America/Atka\nFAILURE 0.06s J1 | StoreTests.testDeserializeCorruptionException <<<\n   > Throwable #1: org.junit.ComparisonFailure: expected:<...ccessorImpl.invoke0([java.base@9.0/Native Method)\n   >    at java.lang.Thread.run(java.base@9.0/]Thread.java:746)\n   > > but was:<...ccessorImpl.invoke0([Native Method)\n   >    at java.lang.Thread.run(]Thread.java:746)\n   > >\n   >    at __randomizedtesting.SeedInfo.seed([DAD1B0AD9C20C7:A8459C7FBBB8F26E]:0)\n   >    at org.elasticsearch.index.store.StoreTests.testDeserializeCorruptionException(StoreTests.java:1295)\n   >    at java.lang.Thread.run(java.base@9.0/Thread.java:746)\n```\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}