{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/40557","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40557/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40557/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40557/events","html_url":"https://github.com/elastic/elasticsearch/issues/40557","id":426153035,"node_id":"MDU6SXNzdWU0MjYxNTMwMzU=","number":40557,"title":"SQL: LIKE not treating whitespaces correctly -- version 6.7.0","user":{"login":"broodfusion","id":11618564,"node_id":"MDQ6VXNlcjExNjE4NTY0","avatar_url":"https://avatars0.githubusercontent.com/u/11618564?v=4","gravatar_id":"","url":"https://api.github.com/users/broodfusion","html_url":"https://github.com/broodfusion","followers_url":"https://api.github.com/users/broodfusion/followers","following_url":"https://api.github.com/users/broodfusion/following{/other_user}","gists_url":"https://api.github.com/users/broodfusion/gists{/gist_id}","starred_url":"https://api.github.com/users/broodfusion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/broodfusion/subscriptions","organizations_url":"https://api.github.com/users/broodfusion/orgs","repos_url":"https://api.github.com/users/broodfusion/repos","events_url":"https://api.github.com/users/broodfusion/events{/privacy}","received_events_url":"https://api.github.com/users/broodfusion/received_events","type":"User","site_admin":false},"labels":[{"id":912794284,"node_id":"MDU6TGFiZWw5MTI3OTQyODQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Query%20Languages/SQL","name":":Query Languages/SQL","color":"0e8a16","default":false,"description":"SQL querying"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":1283161565,"node_id":"MDU6TGFiZWwxMjgzMTYxNTY1","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v6.7.1","name":"v6.7.1","color":"dddddd","default":false,"description":""},{"id":1302526309,"node_id":"MDU6TGFiZWwxMzAyNTI2MzA5","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v7.0.0-rc2","name":"v7.0.0-rc2","color":"dddddd","default":false,"description":""},{"id":1222918656,"node_id":"MDU6TGFiZWwxMjIyOTE4NjU2","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v7.2.0","name":"v7.2.0","color":"DDDDDD","default":false,"description":""},{"id":1194435738,"node_id":"MDU6TGFiZWwxMTk0NDM1NzM4","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v8.0.0","name":"v8.0.0","color":"dddddd","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"astefan","id":893749,"node_id":"MDQ6VXNlcjg5Mzc0OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/893749?v=4","gravatar_id":"","url":"https://api.github.com/users/astefan","html_url":"https://github.com/astefan","followers_url":"https://api.github.com/users/astefan/followers","following_url":"https://api.github.com/users/astefan/following{/other_user}","gists_url":"https://api.github.com/users/astefan/gists{/gist_id}","starred_url":"https://api.github.com/users/astefan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astefan/subscriptions","organizations_url":"https://api.github.com/users/astefan/orgs","repos_url":"https://api.github.com/users/astefan/repos","events_url":"https://api.github.com/users/astefan/events{/privacy}","received_events_url":"https://api.github.com/users/astefan/received_events","type":"User","site_admin":false},"assignees":[{"login":"astefan","id":893749,"node_id":"MDQ6VXNlcjg5Mzc0OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/893749?v=4","gravatar_id":"","url":"https://api.github.com/users/astefan","html_url":"https://github.com/astefan","followers_url":"https://api.github.com/users/astefan/followers","following_url":"https://api.github.com/users/astefan/following{/other_user}","gists_url":"https://api.github.com/users/astefan/gists{/gist_id}","starred_url":"https://api.github.com/users/astefan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astefan/subscriptions","organizations_url":"https://api.github.com/users/astefan/orgs","repos_url":"https://api.github.com/users/astefan/repos","events_url":"https://api.github.com/users/astefan/events{/privacy}","received_events_url":"https://api.github.com/users/astefan/received_events","type":"User","site_admin":false}],"milestone":null,"comments":5,"created_at":"2019-03-27T19:50:13Z","updated_at":"2019-04-03T14:37:38Z","closed_at":"2019-04-01T15:10:52Z","author_association":"NONE","active_lock_reason":null,"body":"<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`): `6.7.0`\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version** (`java -version`): \r\n```\r\njava version \"1.8.0_181\"\r\nJava(TM) SE Runtime Environment (build 1.8.0_181-b13)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.181-b13, mixed mode)\r\n```\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): `MacOS Mojave 10.14.4`\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nI noticed that when using `LIKE`, in this case `LIKE 'B 4E%'`, under the hood it's no longer using a wildcard query, but instead `query_string` (from the translate API):\r\n```\r\n\"bool\" : {\r\n      \"must\" : [\r\n        {\r\n          \"query_string\" : {\r\n            \"query\" : \"B 4E*\",\r\n            \"fields\" : [\r\n              \"station.keyword^1.0\"\r\n            ],\r\n            \"type\" : \"best_fields\",\r\n            \"default_operator\" : \"or\",\r\n            \"max_determinized_states\" : 10000,\r\n            \"enable_position_increments\" : true,\r\n            \"fuzziness\" : \"AUTO\",\r\n            \"fuzzy_prefix_length\" : 0,\r\n            \"fuzzy_max_expansions\" : 50,\r\n            \"phrase_slop\" : 0,\r\n            \"escape\" : false,\r\n            \"auto_generate_synonyms_phrase_query\" : true,\r\n            \"fuzzy_transpositions\" : true,\r\n            \"boost\" : 1.0\r\n          }\r\n        },\r\n```\r\nProblem I'm having is that my `LIKE` clause above has whitespaces and it's not treated correctly as it was before with the `wildcard`. I believe that because of the whitespace I have above, the query is trying to match on `B` or `4E%`, but I want `B 4E%`...\r\n\r\nThe hacky solution I came up with was to replace the whitespaces with underscore, so `B 4E%` became `B_4E%` which then gave me the expected response data. \r\n\r\nCan anyone please advise on this issue? Thanks\r\n\r\n","closed_by":{"login":"astefan","id":893749,"node_id":"MDQ6VXNlcjg5Mzc0OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/893749?v=4","gravatar_id":"","url":"https://api.github.com/users/astefan","html_url":"https://github.com/astefan","followers_url":"https://api.github.com/users/astefan/followers","following_url":"https://api.github.com/users/astefan/following{/other_user}","gists_url":"https://api.github.com/users/astefan/gists{/gist_id}","starred_url":"https://api.github.com/users/astefan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astefan/subscriptions","organizations_url":"https://api.github.com/users/astefan/orgs","repos_url":"https://api.github.com/users/astefan/repos","events_url":"https://api.github.com/users/astefan/events{/privacy}","received_events_url":"https://api.github.com/users/astefan/received_events","type":"User","site_admin":false},"performed_via_github_app":null}