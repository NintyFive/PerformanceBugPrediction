[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/53391988","html_url":"https://github.com/elastic/elasticsearch/issues/7450#issuecomment-53391988","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7450","id":53391988,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzkxOTg4","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-08-26T08:49:24Z","updated_at":"2014-08-26T08:49:24Z","author_association":"CONTRIBUTOR","body":"Related to #5532\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64952214","html_url":"https://github.com/elastic/elasticsearch/issues/7450#issuecomment-64952214","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7450","id":64952214,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTUyMjE0","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-11-29T13:42:34Z","updated_at":"2014-11-29T13:42:34Z","author_association":"CONTRIBUTOR","body":"I'm unable to replicate this bug.  Things seem to work as expected (as long as the `location` field exists in the same index):\n\n```\nDELETE /t \n\nPUT /t\n{\n  \"mappings\": {\n    \"t\": {\n      \"properties\": {\n        \"location\": {\n          \"type\": \"geo_point\"\n        }\n      }\n    }\n  }\n}\n\nPUT /t/t/1\n{\n  \"bar\": \"one\",\n  \"location\": \"0,0\"\n}\n\nPUT /t/t/2\n{\n  \"bar\": \"two\"\n}\n```\n\nTry changing `bar` to `one` | `two` | `three`:\n\n```\nGET _search\n{\n  \"query\": {\n    \"match\": {\n      \"bar\": \"one\"\n    }\n  },\n  \"sort\": [\n    {\n      \"_geo_distance\": {\n        \"location\": {\n          \"lat\": 40,\n          \"lon\": -70\n        },\n        \"order\": \"asc\"\n      }\n    }\n  ]\n}\n```\n\nI think the original cause of your exception probably came from either:\n1. searching across indices, where one index didn't include the `location` field (#5532)\n2. having two fields called `location`, one of which was not a geo-point (#4081)\n\nClosing in favour of the already open issues above.  If you have more detail that points to a different bug, please feel free to reopen.\n","performed_via_github_app":null}]