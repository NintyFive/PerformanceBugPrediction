{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/33341","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33341/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33341/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33341/events","html_url":"https://github.com/elastic/elasticsearch/issues/33341","id":356369241,"node_id":"MDU6SXNzdWUzNTYzNjkyNDE=","number":33341,"title":"Make the JAR hell check optional","user":{"login":"jmnarloch","id":1581045,"node_id":"MDQ6VXNlcjE1ODEwNDU=","avatar_url":"https://avatars3.githubusercontent.com/u/1581045?v=4","gravatar_id":"","url":"https://api.github.com/users/jmnarloch","html_url":"https://github.com/jmnarloch","followers_url":"https://api.github.com/users/jmnarloch/followers","following_url":"https://api.github.com/users/jmnarloch/following{/other_user}","gists_url":"https://api.github.com/users/jmnarloch/gists{/gist_id}","starred_url":"https://api.github.com/users/jmnarloch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmnarloch/subscriptions","organizations_url":"https://api.github.com/users/jmnarloch/orgs","repos_url":"https://api.github.com/users/jmnarloch/repos","events_url":"https://api.github.com/users/jmnarloch/events{/privacy}","received_events_url":"https://api.github.com/users/jmnarloch/received_events","type":"User","site_admin":false},"labels":[{"id":106454670,"node_id":"MDU6TGFiZWwxMDY0NTQ2NzA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Build","name":":Delivery/Build","color":"0e8a16","default":false,"description":"Build or test infrastructure"},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2018-09-03T06:10:08Z","updated_at":"2020-11-11T21:50:31Z","closed_at":"2018-09-04T03:40:50Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\n\r\n** Please read the guidelines below. **\r\n\r\nIssues that do not follow these guidelines are likely to be closed.\r\n\r\n1.  GitHub is reserved for bug reports and feature requests. The best place to\r\n    ask a general question is at the Elastic [forums](https://discuss.elastic.co).\r\n    GitHub is not the place for general questions.\r\n\r\n2.  Is this bug report or feature request for a supported OS? If not, it\r\n    is likely to be closed.  See https://www.elastic.co/support/matrix#show_os\r\n\r\n3.  Please fill out EITHER the feature request block or the bug report block\r\n    below, and delete the other block.\r\n\r\n-->\r\n\r\n<!-- Feature request -->\r\n\r\n**Describe the feature**: I wish to be able to disable jar hell check completely. Currently this is a to much nuclear option to have it work in every possible client developer environment. The problem that I am facing is that I am not able to make the tests running because of Mockito dependencies. The problem is that I don't own all of my 3-rd party dependencies and if any of the packages either decides to repackage the same classes I am stuck and not able to proceed. The alternative that I was considered was pretty much forking the entire ESTestCase code together with bootstrap package, but because of the package level visibility it pretty much means need to fork over almost everything.\r\n\r\nThe only thing that I would expect is support for env variable `es.jarhell.check=false` or similar.\r\n\r\n<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`): 6.3.0\r\n\r\n**Plugins installed**: [NA]\r\n\r\n**JVM version** (`java -version`): java 10.0.2 2018-07-17\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): Darwin 15.6.0 Darwin Kernel Version 15.6.0: Thu Jun 21 20:07:40 PDT 2018; root:xnu-3248.73.11~1/RELEASE_X86_64 x86_64\r\n\r\n**Description of the problem including expected versus actual behavior**: Jar hell check is making the integration test unecessary hard to onboard. \r\n\r\n**Steps to reproduce**: Importing any dependency that uses jarjar to package either mockito, guava or any other 3rd library causing the jar hell check to report errors.\r\n\r\nPlease include a *minimal* but *complete* recreation of the problem, including\r\n(e.g.) index creation, mappings, settings, query etc.  The easier you make for\r\nus to reproduce it, the more likely that somebody will take the time to look at it.\r\n\r\n 1.\r\n 2.\r\n 3.\r\n\r\n**Provide logs (if relevant)**:\r\n\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}