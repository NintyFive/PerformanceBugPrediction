[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/376795846","html_url":"https://github.com/elastic/elasticsearch/issues/29275#issuecomment-376795846","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29275","id":376795846,"node_id":"MDEyOklzc3VlQ29tbWVudDM3Njc5NTg0Ng==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2018-03-28T07:56:11Z","updated_at":"2018-03-28T07:56:11Z","author_association":"MEMBER","body":"The profile api currently only profiles that query and aggregation parts. It doesn't measure the fetch phase nor the network overhead. I suggest you look at those.\r\n\r\nIMO I think there are two things to do here:\r\n1) Potentially add a profiler for the fetch phase.\r\n2) Document the above to avoid confusion.\r\n\r\n@owenericsson if you have any more questions please open up a thread on discuss.elastic.co and we can dive deeper. We keep github for bugs and features requests.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/376795902","html_url":"https://github.com/elastic/elasticsearch/issues/29275#issuecomment-376795902","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29275","id":376795902,"node_id":"MDEyOklzc3VlQ29tbWVudDM3Njc5NTkwMg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-03-28T07:56:25Z","updated_at":"2018-03-28T07:56:25Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search-aggs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/376798334","html_url":"https://github.com/elastic/elasticsearch/issues/29275#issuecomment-376798334","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29275","id":376798334,"node_id":"MDEyOklzc3VlQ29tbWVudDM3Njc5ODMzNA==","user":{"login":"owenericsson","id":1845529,"node_id":"MDQ6VXNlcjE4NDU1Mjk=","avatar_url":"https://avatars2.githubusercontent.com/u/1845529?v=4","gravatar_id":"","url":"https://api.github.com/users/owenericsson","html_url":"https://github.com/owenericsson","followers_url":"https://api.github.com/users/owenericsson/followers","following_url":"https://api.github.com/users/owenericsson/following{/other_user}","gists_url":"https://api.github.com/users/owenericsson/gists{/gist_id}","starred_url":"https://api.github.com/users/owenericsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owenericsson/subscriptions","organizations_url":"https://api.github.com/users/owenericsson/orgs","repos_url":"https://api.github.com/users/owenericsson/repos","events_url":"https://api.github.com/users/owenericsson/events{/privacy}","received_events_url":"https://api.github.com/users/owenericsson/received_events","type":"User","site_admin":false},"created_at":"2018-03-28T08:05:31Z","updated_at":"2018-03-28T08:05:31Z","author_association":"NONE","body":"hi @bleskes ,\r\nthanks for the reply, and also apologize for posting in the wrong place.\r\n\r\nback to this problem\r\n1. i have set the size to 0, so there shouldn't be the fetch overhead.\r\n2. when i remove the \"aggs\" part, the time cost back to a normal level  (< 100ms). So i am sure that the  overhead must be from the aggs \r\n\r\nBTW. the field type of the term aggregation i used is 'keyword', and do you think this overhead is from the GlobalOrdinals ? anyway i think it is very unlikely this overhead is from the network.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/376800452","html_url":"https://github.com/elastic/elasticsearch/issues/29275#issuecomment-376800452","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29275","id":376800452,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NjgwMDQ1Mg==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2018-03-28T08:13:31Z","updated_at":"2018-03-28T08:13:31Z","author_association":"MEMBER","body":"OK, that changes things (although my comments are still valid in general). I will defer for someone from the search area to pick this up.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/376812504","html_url":"https://github.com/elastic/elasticsearch/issues/29275#issuecomment-376812504","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29275","id":376812504,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NjgxMjUwNA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2018-03-28T08:56:02Z","updated_at":"2018-03-28T08:56:02Z","author_association":"CONTRIBUTOR","body":"Most likely most execution time is taken by something which is not measured by the profile, like the time it took to build global ordinals, time spent in the queue, time spent merging shard responses on the coordinating node, etc. I agree we shoud at least document this.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/376815426","html_url":"https://github.com/elastic/elasticsearch/issues/29275#issuecomment-376815426","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29275","id":376815426,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NjgxNTQyNg==","user":{"login":"owenericsson","id":1845529,"node_id":"MDQ6VXNlcjE4NDU1Mjk=","avatar_url":"https://avatars2.githubusercontent.com/u/1845529?v=4","gravatar_id":"","url":"https://api.github.com/users/owenericsson","html_url":"https://github.com/owenericsson","followers_url":"https://api.github.com/users/owenericsson/followers","following_url":"https://api.github.com/users/owenericsson/following{/other_user}","gists_url":"https://api.github.com/users/owenericsson/gists{/gist_id}","starred_url":"https://api.github.com/users/owenericsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owenericsson/subscriptions","organizations_url":"https://api.github.com/users/owenericsson/orgs","repos_url":"https://api.github.com/users/owenericsson/repos","events_url":"https://api.github.com/users/owenericsson/events{/privacy}","received_events_url":"https://api.github.com/users/owenericsson/received_events","type":"User","site_admin":false},"created_at":"2018-03-28T09:06:03Z","updated_at":"2018-03-28T09:06:03Z","author_association":"NONE","body":"one more thing need attention\r\nI created my index with 11 shards, by using a routing key which means for the Search above, only one shard owns all the result data.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/444687802","html_url":"https://github.com/elastic/elasticsearch/issues/29275#issuecomment-444687802","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29275","id":444687802,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NDY4NzgwMg==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2018-12-05T23:14:22Z","updated_at":"2018-12-05T23:14:22Z","author_association":"MEMBER","body":"Closing this with adding documentation in #36252, some other improvements to the way the Profile API works are tracked in https://github.com/elastic/elasticsearch/issues/21073","performed_via_github_app":null}]