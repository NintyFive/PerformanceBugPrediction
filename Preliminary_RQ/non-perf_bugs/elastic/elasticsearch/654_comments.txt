[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/719225","html_url":"https://github.com/elastic/elasticsearch/issues/654#issuecomment-719225","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/654","id":719225,"node_id":"MDEyOklzc3VlQ29tbWVudDcxOTIyNQ==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2011-01-28T20:29:42Z","updated_at":"2011-01-28T20:29:42Z","author_association":"MEMBER","body":"I copied the logic from grails JsonBuilder: https://github.com/grails/grails-core/blob/master/src/java/grails/util/JSonBuilder.java. Not a groovy expert, but wanted to get the same \"json feeling\" as in grails.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/720599","html_url":"https://github.com/elastic/elasticsearch/issues/654#issuecomment-720599","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/654","id":720599,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMDU5OQ==","user":{"login":"spn","id":550010,"node_id":"MDQ6VXNlcjU1MDAxMA==","avatar_url":"https://avatars1.githubusercontent.com/u/550010?v=4","gravatar_id":"","url":"https://api.github.com/users/spn","html_url":"https://github.com/spn","followers_url":"https://api.github.com/users/spn/followers","following_url":"https://api.github.com/users/spn/following{/other_user}","gists_url":"https://api.github.com/users/spn/gists{/gist_id}","starred_url":"https://api.github.com/users/spn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spn/subscriptions","organizations_url":"https://api.github.com/users/spn/orgs","repos_url":"https://api.github.com/users/spn/repos","events_url":"https://api.github.com/users/spn/events{/privacy}","received_events_url":"https://api.github.com/users/spn/received_events","type":"User","site_admin":false},"created_at":"2011-01-29T11:45:04Z","updated_at":"2011-01-29T11:45:04Z","author_association":"NONE","body":"for me the following worked fine:\n1. Making GXContentBuilder extends GroovyObjectSupport.\n2. Changing getProperty() method to:\n       def getProperty(String propName) {\n           if (current?.containsKey(propName)) {\n               return current[propName]\n           } else {\n               return super.getProperty(propName)\n           }\n       }\n   https://github.com/spn/elasticsearch-grails-plugin/blob/master/src/groovy/org/grails/plugins/elasticsearch/util/GXContentBuilder.groovy\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/722473","html_url":"https://github.com/elastic/elasticsearch/issues/654#issuecomment-722473","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/654","id":722473,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMjQ3Mw==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2011-01-30T13:27:59Z","updated_at":"2011-01-30T13:27:59Z","author_association":"MEMBER","body":"Interesting!. I can't really judge the implications of this change because of my lack of groovy knowledge :). Wondering why grails are not doing the same? Maybe it makes sense to ping the grails mailing list?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/724795","html_url":"https://github.com/elastic/elasticsearch/issues/654#issuecomment-724795","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/654","id":724795,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNDc5NQ==","user":{"login":"spn","id":550010,"node_id":"MDQ6VXNlcjU1MDAxMA==","avatar_url":"https://avatars1.githubusercontent.com/u/550010?v=4","gravatar_id":"","url":"https://api.github.com/users/spn","html_url":"https://github.com/spn","followers_url":"https://api.github.com/users/spn/followers","following_url":"https://api.github.com/users/spn/following{/other_user}","gists_url":"https://api.github.com/users/spn/gists{/gist_id}","starred_url":"https://api.github.com/users/spn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spn/subscriptions","organizations_url":"https://api.github.com/users/spn/orgs","repos_url":"https://api.github.com/users/spn/repos","events_url":"https://api.github.com/users/spn/events{/privacy}","received_events_url":"https://api.github.com/users/spn/received_events","type":"User","site_admin":false},"created_at":"2011-01-31T14:07:17Z","updated_at":"2011-01-31T14:07:17Z","author_association":"NONE","body":"well, Grails IS doing the same sometimes eg look at https://github.com/grails/grails-core/blob/master/src/java/grails/spring/BeanBuilder.java\n\n(actually, in your case the class is written in Groovy so you don't need to extend GroovyObjectSupport. But it still has to fallback to standard property resolution)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/724802","html_url":"https://github.com/elastic/elasticsearch/issues/654#issuecomment-724802","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/654","id":724802,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNDgwMg==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2011-01-31T14:09:22Z","updated_at":"2011-01-31T14:09:22Z","author_association":"MEMBER","body":"What I mean is that it does not do it for JsnoBuilder, wondering what the reason for that is, and thought it might make sense to ping the list?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/727752","html_url":"https://github.com/elastic/elasticsearch/issues/654#issuecomment-727752","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/654","id":727752,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNzc1Mg==","user":{"login":"spn","id":550010,"node_id":"MDQ6VXNlcjU1MDAxMA==","avatar_url":"https://avatars1.githubusercontent.com/u/550010?v=4","gravatar_id":"","url":"https://api.github.com/users/spn","html_url":"https://github.com/spn","followers_url":"https://api.github.com/users/spn/followers","following_url":"https://api.github.com/users/spn/following{/other_user}","gists_url":"https://api.github.com/users/spn/gists{/gist_id}","starred_url":"https://api.github.com/users/spn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spn/subscriptions","organizations_url":"https://api.github.com/users/spn/orgs","repos_url":"https://api.github.com/users/spn/repos","events_url":"https://api.github.com/users/spn/events{/privacy}","received_events_url":"https://api.github.com/users/spn/received_events","type":"User","site_admin":false},"created_at":"2011-02-01T07:47:57Z","updated_at":"2011-02-01T07:47:57Z","author_association":"NONE","body":"That's right. JsonBuilder uses Builder API, which is sort of high-level tree-oriented; it does not require you to manage properties and methods (BuilderSupport class is doing it internally)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/727928","html_url":"https://github.com/elastic/elasticsearch/issues/654#issuecomment-727928","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/654","id":727928,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNzkyOA==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2011-02-01T09:26:52Z","updated_at":"2011-02-01T09:26:52Z","author_association":"MEMBER","body":"I'm sorry, I sent the wrong link to the JsonBuilder used in grails. This is the one ES is based on: https://github.com/grails/grails-core/blob/master/src/java/grails/web/JSONBuilder.groovy .\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/728240","html_url":"https://github.com/elastic/elasticsearch/issues/654#issuecomment-728240","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/654","id":728240,"node_id":"MDEyOklzc3VlQ29tbWVudDcyODI0MA==","user":{"login":"spn","id":550010,"node_id":"MDQ6VXNlcjU1MDAxMA==","avatar_url":"https://avatars1.githubusercontent.com/u/550010?v=4","gravatar_id":"","url":"https://api.github.com/users/spn","html_url":"https://github.com/spn","followers_url":"https://api.github.com/users/spn/followers","following_url":"https://api.github.com/users/spn/following{/other_user}","gists_url":"https://api.github.com/users/spn/gists{/gist_id}","starred_url":"https://api.github.com/users/spn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spn/subscriptions","organizations_url":"https://api.github.com/users/spn/orgs","repos_url":"https://api.github.com/users/spn/repos","events_url":"https://api.github.com/users/spn/events{/privacy}","received_events_url":"https://api.github.com/users/spn/received_events","type":"User","site_admin":false},"created_at":"2011-02-01T11:57:23Z","updated_at":"2011-02-01T11:57:23Z","author_association":"NONE","body":"it looks to me you have a small difference from the original JSONBuilder:\n    private buildRoot(Closure c) {\n        c.delegate = this\n        //c.resolveStrategy = Closure.DELEGATE_FIRST\n        root = [:]\n        current = root\n        def returnValue = c.call()\n        if (!root) {\n            return returnValue\n        }\n        return root\n    }\n\nLooking at GXContentBuilder, c.resolveStrategy is _NOT_ commented out. This is a serious difference, because it affects delegation rules (by default, closure delegates to OWNER_FIRST, and owner is \"client\" code which uses variables).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/728279","html_url":"https://github.com/elastic/elasticsearch/issues/654#issuecomment-728279","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/654","id":728279,"node_id":"MDEyOklzc3VlQ29tbWVudDcyODI3OQ==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2011-02-01T12:16:20Z","updated_at":"2011-02-01T12:16:20Z","author_association":"MEMBER","body":"Right, but then it makes a big difference when used in scripts... . Thats why in the builder you can control what it is (static var...). But, I will change it so the default will be OWNER_FIRST.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/728281","html_url":"https://github.com/elastic/elasticsearch/issues/654#issuecomment-728281","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/654","id":728281,"node_id":"MDEyOklzc3VlQ29tbWVudDcyODI4MQ==","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2011-02-01T12:16:59Z","updated_at":"2011-02-01T12:16:59Z","author_association":"MEMBER","body":"Groovy client doesn&#39;t bind to any variables outside the closure, closed by 0dfa3dc8a23af7f012eeba3498eadb40dbb29966.\n","performed_via_github_app":null}]