{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/65117","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/65117/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/65117/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/65117/events","html_url":"https://github.com/elastic/elasticsearch/issues/65117","id":744514100,"node_id":"MDU6SXNzdWU3NDQ1MTQxMDA=","number":65117,"title":"HistoryTemplateHttpMappingsTests#testHttpFields failure","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"labels":[{"id":912845062,"node_id":"MDU6TGFiZWw5MTI4NDUwNjI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Watcher","name":":Core/Features/Watcher","color":"0e8a16","default":false,"description":""},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"},{"id":1967496097,"node_id":"MDU6TGFiZWwxOTY3NDk2MDk3","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Core/Features","name":"Team:Core/Features","color":"fef2c0","default":false,"description":"Meta label for core/features team"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-11-17T08:15:59Z","updated_at":"2020-11-18T12:16:57Z","closed_at":"2020-11-18T12:16:57Z","author_association":"MEMBER","active_lock_reason":null,"body":"**Build scan**:\r\n\r\n[Last failure](https://gradle-enterprise.elastic.co/s/2jcvbp2gehjaw)\r\n[Other failure](https://gradle-enterprise.elastic.co/s/zewljhi2l4nww)\r\n\r\n**Repro line**:\r\n\r\n```\r\n./gradlew ':x-pack:plugin:watcher:internalClusterTest' --tests \"org.elasticsearch.xpack.watcher.history.HistoryTemplateHttpMappingsTests.testHttpFields\" \\\r\n  -Dtests.seed=7B65E35E8F2C5B8A \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=ar-IQ \\\r\n  -Dtests.timezone=America/Fort_Wayne \\\r\n  -Druntime.java=11\r\n```\r\n\r\n**Reproduces locally?**:\r\nCould not reproduce locally after 1,000 iterations.\r\n\r\n**Applicable branches**:\r\n\r\nmaster only\r\n\r\n**Failure history**:\r\n\r\nCould be related to https://github.com/elastic/elasticsearch/issues/64252\r\n\r\n**Failure**:\r\n\r\n```\r\njava.lang.AssertionError: watch was triggered on [0] schedulers, expected [1]\r\nExpected: a value equal to or greater than <1L>\r\n     but: <0L> was less than <1L>\r\n\tat __randomizedtesting.SeedInfo.seed([E2D763563C560E94:3D3C8E6F2D1B6E6F]:0)\r\n\tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)\r\n\tat org.junit.Assert.assertThat(Assert.java:956)\r\n\tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase$TimeWarp.trigger(AbstractWatcherIntegrationTestCase.java:606)\r\n\tat org.elasticsearch.xpack.watcher.test.AbstractWatcherIntegrationTestCase$TimeWarp.trigger(AbstractWatcherIntegrationTestCase.java:591)\r\n\tat org.elasticsearch.xpack.watcher.history.HistoryTemplateHttpMappingsTests.testHttpFields(HistoryTemplateHttpMappingsTests.java:84)\r\n```\r\n\r\n","closed_by":{"login":"probakowski","id":3896475,"node_id":"MDQ6VXNlcjM4OTY0NzU=","avatar_url":"https://avatars1.githubusercontent.com/u/3896475?v=4","gravatar_id":"","url":"https://api.github.com/users/probakowski","html_url":"https://github.com/probakowski","followers_url":"https://api.github.com/users/probakowski/followers","following_url":"https://api.github.com/users/probakowski/following{/other_user}","gists_url":"https://api.github.com/users/probakowski/gists{/gist_id}","starred_url":"https://api.github.com/users/probakowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/probakowski/subscriptions","organizations_url":"https://api.github.com/users/probakowski/orgs","repos_url":"https://api.github.com/users/probakowski/repos","events_url":"https://api.github.com/users/probakowski/events{/privacy}","received_events_url":"https://api.github.com/users/probakowski/received_events","type":"User","site_admin":false},"performed_via_github_app":null}