[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/36580626","html_url":"https://github.com/elastic/elasticsearch/issues/5302#issuecomment-36580626","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5302","id":36580626,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTgwNjI2","user":{"login":"dsturnbull","id":17399,"node_id":"MDQ6VXNlcjE3Mzk5","avatar_url":"https://avatars0.githubusercontent.com/u/17399?v=4","gravatar_id":"","url":"https://api.github.com/users/dsturnbull","html_url":"https://github.com/dsturnbull","followers_url":"https://api.github.com/users/dsturnbull/followers","following_url":"https://api.github.com/users/dsturnbull/following{/other_user}","gists_url":"https://api.github.com/users/dsturnbull/gists{/gist_id}","starred_url":"https://api.github.com/users/dsturnbull/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dsturnbull/subscriptions","organizations_url":"https://api.github.com/users/dsturnbull/orgs","repos_url":"https://api.github.com/users/dsturnbull/repos","events_url":"https://api.github.com/users/dsturnbull/events{/privacy}","received_events_url":"https://api.github.com/users/dsturnbull/received_events","type":"User","site_admin":false},"created_at":"2014-03-04T00:57:54Z","updated_at":"2014-03-04T00:57:54Z","author_association":"NONE","body":"We think this is because of jumbo frames on the m3.xlarge instances. Will close this soon if this turns out to be the case.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52506681","html_url":"https://github.com/elastic/elasticsearch/issues/5302#issuecomment-52506681","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5302","id":52506681,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTA2Njgx","user":{"login":"mccraigmccraig","id":29339,"node_id":"MDQ6VXNlcjI5MzM5","avatar_url":"https://avatars1.githubusercontent.com/u/29339?v=4","gravatar_id":"","url":"https://api.github.com/users/mccraigmccraig","html_url":"https://github.com/mccraigmccraig","followers_url":"https://api.github.com/users/mccraigmccraig/followers","following_url":"https://api.github.com/users/mccraigmccraig/following{/other_user}","gists_url":"https://api.github.com/users/mccraigmccraig/gists{/gist_id}","starred_url":"https://api.github.com/users/mccraigmccraig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mccraigmccraig/subscriptions","organizations_url":"https://api.github.com/users/mccraigmccraig/orgs","repos_url":"https://api.github.com/users/mccraigmccraig/repos","events_url":"https://api.github.com/users/mccraigmccraig/events{/privacy}","received_events_url":"https://api.github.com/users/mccraigmccraig/received_events","type":"User","site_admin":false},"created_at":"2014-08-18T15:16:43Z","updated_at":"2014-08-18T15:23:15Z","author_association":"NONE","body":"i'm seeing the same behaviour : nodes running in a docker container timeout while attempting to contact (non-docker) nodes on the unicast zen discovery gossip-router list\n\nin addition, i see these errors logged on a gossip router node :\n\n[2014-08-18 15:03:24,281][WARN ][transport.netty          ] [Jigsaw] exception caught on transport layer [[id: 0x4f2c96d7]], closing connection\njava.net.SocketException: Network is unreachable\n    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)\n    at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)\n    at org.elasticsearch.common.netty.channel.socket.nio.NioClientBoss.connect(NioClientBoss.java:150)\n    at org.elasticsearch.common.netty.channel.socket.nio.NioClientBoss.processSelectedKeys(NioClientBoss.java:105)\n    at org.elasticsearch.common.netty.channel.socket.nio.NioClientBoss.process(NioClientBoss.java:79)\n    at org.elasticsearch.common.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:318)\n    at org.elasticsearch.common.netty.channel.socket.nio.NioClientBoss.run(NioClientBoss.java:42)\n    at org.elasticsearch.common.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\n    at org.elasticsearch.common.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:744)\n\nwhich i would guess indicates that the master is trying to reach the slave on it's guest ip-address/port rather than it's host ip-address/port\n\ni'm using \n- ubuntu 14.01\n- ES 1.3.2 from official deb repos\n- docker.io 0.9.1~dfsg1-2 from official deb repos\n- AWS t2.micro for ES master (straight on ubuntu)\n- AWS m3.medium for slaves (in docker container)\n- ES dockerfile from : https://github.com/dockerfile/elasticsearch\n\nES master has config :\n\ncluster.name: es-01\nnode.master: true\nnode.data: false\ndiscovery.zen.minimum_master_nodes: 1\ndiscovery.zen.ping.multicast.enabled: false\ndiscovery.zen.ping.unicast.hosts: [\"192.168.0.5\"]\n\nES slave has config :\n\ncluster.name: es-01\nnode.master: false\nnode.data: true\ndiscovery.zen.minimum_master_nodes: 1\ndiscovery.zen.ping.multicast.enabled: false\ndiscovery.zen.ping.unicast.hosts: [\"192.168.0.5\"]\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/59489299","html_url":"https://github.com/elastic/elasticsearch/issues/5302#issuecomment-59489299","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5302","id":59489299,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDg5Mjk5","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-10-17T09:31:40Z","updated_at":"2014-10-17T09:31:40Z","author_association":"CONTRIBUTOR","body":"@drewr @joehillen @ESamir @electrical Any ideas about networking issues with Docker and EC2?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/59494899","html_url":"https://github.com/elastic/elasticsearch/issues/5302#issuecomment-59494899","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5302","id":59494899,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDk0ODk5","user":{"login":"ESamir","id":9035864,"node_id":"MDQ6VXNlcjkwMzU4NjQ=","avatar_url":"https://avatars1.githubusercontent.com/u/9035864?v=4","gravatar_id":"","url":"https://api.github.com/users/ESamir","html_url":"https://github.com/ESamir","followers_url":"https://api.github.com/users/ESamir/followers","following_url":"https://api.github.com/users/ESamir/following{/other_user}","gists_url":"https://api.github.com/users/ESamir/gists{/gist_id}","starred_url":"https://api.github.com/users/ESamir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ESamir/subscriptions","organizations_url":"https://api.github.com/users/ESamir/orgs","repos_url":"https://api.github.com/users/ESamir/repos","events_url":"https://api.github.com/users/ESamir/events{/privacy}","received_events_url":"https://api.github.com/users/ESamir/received_events","type":"User","site_admin":false},"created_at":"2014-10-17T10:28:37Z","updated_at":"2014-10-17T10:28:37Z","author_association":"NONE","body":" @dsturnbull  and @mccraigmccraig   are different issue \n\n @dsturnbull  it is  possible the issue is caused by Jumbo frames  causing  network latency this can happened on low bandwidth links .\n\n@mccraigmccraig  the issue is a configuration issue  , How did you configure the connection to Docker host from container , if you didn't check this discussion  https://github.com/docker/docker/issues/8395\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/59498247","html_url":"https://github.com/elastic/elasticsearch/issues/5302#issuecomment-59498247","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5302","id":59498247,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NDk4MjQ3","user":{"login":"electrical","id":271677,"node_id":"MDQ6VXNlcjI3MTY3Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/271677?v=4","gravatar_id":"","url":"https://api.github.com/users/electrical","html_url":"https://github.com/electrical","followers_url":"https://api.github.com/users/electrical/followers","following_url":"https://api.github.com/users/electrical/following{/other_user}","gists_url":"https://api.github.com/users/electrical/gists{/gist_id}","starred_url":"https://api.github.com/users/electrical/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/electrical/subscriptions","organizations_url":"https://api.github.com/users/electrical/orgs","repos_url":"https://api.github.com/users/electrical/repos","events_url":"https://api.github.com/users/electrical/events{/privacy}","received_events_url":"https://api.github.com/users/electrical/received_events","type":"User","site_admin":false},"created_at":"2014-10-17T11:07:42Z","updated_at":"2014-10-17T11:07:42Z","author_association":"CONTRIBUTOR","body":"The thing with docker containers is that by default it exposes the port on the bridge interface from docker.\nYou can setup it in a way that it forwards that port to a random port on the host interface.\n\nas an example:\nBridge docker0 has range 192.168.1.0/24\n\nInstance-A has IP 192.168.1.10\nInstance-B has IP 192.168.1.11\n\nBoth instances have port 9200 open on that IP.\nIf you want to publish the ports they get assigned to either a random port number on the host interface or you could define the port. ( see -p or -P options on `docker run --help` )\n\nAn other option is to set the network ( option --net=host ) of the containers to the host network directly.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/59504440","html_url":"https://github.com/elastic/elasticsearch/issues/5302#issuecomment-59504440","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5302","id":59504440,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NTA0NDQw","user":{"login":"trampoline","id":158043,"node_id":"MDQ6VXNlcjE1ODA0Mw==","avatar_url":"https://avatars1.githubusercontent.com/u/158043?v=4","gravatar_id":"","url":"https://api.github.com/users/trampoline","html_url":"https://github.com/trampoline","followers_url":"https://api.github.com/users/trampoline/followers","following_url":"https://api.github.com/users/trampoline/following{/other_user}","gists_url":"https://api.github.com/users/trampoline/gists{/gist_id}","starred_url":"https://api.github.com/users/trampoline/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trampoline/subscriptions","organizations_url":"https://api.github.com/users/trampoline/orgs","repos_url":"https://api.github.com/users/trampoline/repos","events_url":"https://api.github.com/users/trampoline/events{/privacy}","received_events_url":"https://api.github.com/users/trampoline/received_events","type":"User","site_admin":false},"created_at":"2014-10-17T12:19:03Z","updated_at":"2014-10-17T12:20:28Z","author_association":"NONE","body":"@ESamir it's a while back, but iirc :\n- i let docker manage a couple of ports, so ports 9200 and 9300 on the ES guest were routed from random ports on the host\n- the difficulty was how ES instances should communicate their visible (host) ip and port : there is the network.bind_host and network.publish_host config params for the ip address, but there aren't equivalent bind/publish params for tcp and http ports\n- which means either --net=host or the ports have to be mapped to the same port numbers on the host\n\ni went with --net=host\n\n(oops. wrong github login. i am also @mccraigmccraig)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/59506016","html_url":"https://github.com/elastic/elasticsearch/issues/5302#issuecomment-59506016","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5302","id":59506016,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NTA2MDE2","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-10-17T12:35:04Z","updated_at":"2014-10-17T12:35:04Z","author_association":"CONTRIBUTOR","body":"@mccraigmccraig I've just looked through the code and there are settings for http.bind/publish_host, they're just not documented.  I'll fix that.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/59506307","html_url":"https://github.com/elastic/elasticsearch/issues/5302#issuecomment-59506307","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5302","id":59506307,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NTA2MzA3","user":{"login":"mccraigmccraig","id":29339,"node_id":"MDQ6VXNlcjI5MzM5","avatar_url":"https://avatars1.githubusercontent.com/u/29339?v=4","gravatar_id":"","url":"https://api.github.com/users/mccraigmccraig","html_url":"https://github.com/mccraigmccraig","followers_url":"https://api.github.com/users/mccraigmccraig/followers","following_url":"https://api.github.com/users/mccraigmccraig/following{/other_user}","gists_url":"https://api.github.com/users/mccraigmccraig/gists{/gist_id}","starred_url":"https://api.github.com/users/mccraigmccraig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mccraigmccraig/subscriptions","organizations_url":"https://api.github.com/users/mccraigmccraig/orgs","repos_url":"https://api.github.com/users/mccraigmccraig/repos","events_url":"https://api.github.com/users/mccraigmccraig/events{/privacy}","received_events_url":"https://api.github.com/users/mccraigmccraig/received_events","type":"User","site_admin":false},"created_at":"2014-10-17T12:38:12Z","updated_at":"2014-10-17T12:38:12Z","author_association":"NONE","body":"@clintongormley i think it was a lack of bind/publish settings for ports that were causing my problem... (the http.bind/publish_host is documented in the annotated elasticsearch.yml config file i've got)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/59509350","html_url":"https://github.com/elastic/elasticsearch/issues/5302#issuecomment-59509350","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5302","id":59509350,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NTA5MzUw","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-10-17T13:05:13Z","updated_at":"2014-10-17T13:05:13Z","author_association":"CONTRIBUTOR","body":"@mccraigmccraig gotcha. I've open #8137 for that, and I've documented the http.*host settings.\n\nthanks\n","performed_via_github_app":null}]