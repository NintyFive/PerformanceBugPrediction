[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/261504662","html_url":"https://github.com/elastic/elasticsearch/issues/21377#issuecomment-261504662","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21377","id":261504662,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTUwNDY2Mg==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2016-11-18T10:55:52Z","updated_at":"2016-11-18T10:55:52Z","author_association":"CONTRIBUTOR","body":"We discussed this internally and there are a couple of issues that we see with adding this. Lemme elaborate:\n- since we are using network communication internally (transport) on port 9300 this might give you a false level of security. In such a case how would forming a cluster work if you are binding to a file socket?\n- it seems like the usecase is pretty rare that you want to secure from access from within local host, in such a case I think we should not add complexity to ES but rather use some virtualization to hide ES from the users and put apache HTTPD with mod_proxy in front of it for the extra level of security?\n\nWe decided to close this for these reasons for now.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/273232897","html_url":"https://github.com/elastic/elasticsearch/issues/21377#issuecomment-273232897","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21377","id":273232897,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MzIzMjg5Nw==","user":{"login":"CarlEklof","id":25162958,"node_id":"MDQ6VXNlcjI1MTYyOTU4","avatar_url":"https://avatars1.githubusercontent.com/u/25162958?v=4","gravatar_id":"","url":"https://api.github.com/users/CarlEklof","html_url":"https://github.com/CarlEklof","followers_url":"https://api.github.com/users/CarlEklof/followers","following_url":"https://api.github.com/users/CarlEklof/following{/other_user}","gists_url":"https://api.github.com/users/CarlEklof/gists{/gist_id}","starred_url":"https://api.github.com/users/CarlEklof/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CarlEklof/subscriptions","organizations_url":"https://api.github.com/users/CarlEklof/orgs","repos_url":"https://api.github.com/users/CarlEklof/repos","events_url":"https://api.github.com/users/CarlEklof/events{/privacy}","received_events_url":"https://api.github.com/users/CarlEklof/received_events","type":"User","site_admin":false},"created_at":"2017-01-17T17:10:22Z","updated_at":"2017-01-18T17:17:02Z","author_association":"NONE","body":"Unix sockets are a very simple (thus reliable) way of enforcing security in a wide variety of situations. The utility of this is rapidly increasing. Not all problems require a cluster, and if you don't HAVE to build a cluster, you certainly do not want to. The number of cores per machine is making clustering across machines less and less necessary, and there are huge incentives to centralize (performance, simplicity of code and administration). We have pretty cheap machines with 128 cores now, and even then, a lot of problems can be decomposed in a way so that it's not the ES that needs to be clustered, but a different layer in the stack.\r\n\r\n * Any time you only need the application to talk with other local (to the same machine) applications. No need to configure more complicated network settings (specific ip-bindings, firewalls, machine firewalld, etc.)\r\n * Security. Most machine hacks work by port-scanning and exploiting bugs/vulnerabilities in code. So, if you CAN get by with local communication, you absolutely should. Of course you can lock down the machine, which we should be doing anyway, but why leave your jewelry by the front door?  \r\n * Control. You can block access using the full set of file-system and mount options, including chroots.\r\n * It's much easier to isolate and identify services by location on a hierarchical filesystem than a port-number.\r\n * Using ports adds the problem of port conflicts when running more than one server on a machine.\r\n\r\nSpecifically, to your points\r\n 1) Providing both socket and network communications should not be hard. Network and socket communication use almost all the same code, at least in C and there are plenty of libraries of pre-written code for doing sockets in Java (http://stackoverflow.com/questions/170600/unix-socket-implementation-for-java). Having all of the internal communication be over open ports that anyone can connect to is a security concern that should be addressed regardless. Putting that on the people who administer the network is a unnecessary leap in complexity.\r\n\r\n 2) It is not at all rare. I've worked with hundreds of companies setting up IT infrastructure and have seen many of them using Unix sockets for the same reasons I've outlined above. Using virtualization to hide ES is a huge leap in complexity compared to just having ES communicate on Unix Sockets.\r\n\r\nAlso note that curl (the ES defacto standard CLI), has supported communication via unix sockets since version 7.40 (now on 7.52).\r\n\r\nGiven that securing ES is such a huge issue (https://www.google.com/search?q=securing%20elasticsearch), and that supporting unix sockets is so simple compared to other solutions, it seems like a great feature to add.\r\n\r\nThanks! I am impressed with what ES overall.\r\n\r\n-Carl","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/286832522","html_url":"https://github.com/elastic/elasticsearch/issues/21377#issuecomment-286832522","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21377","id":286832522,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjgzMjUyMg==","user":{"login":"bkreider","id":1699478,"node_id":"MDQ6VXNlcjE2OTk0Nzg=","avatar_url":"https://avatars2.githubusercontent.com/u/1699478?v=4","gravatar_id":"","url":"https://api.github.com/users/bkreider","html_url":"https://github.com/bkreider","followers_url":"https://api.github.com/users/bkreider/followers","following_url":"https://api.github.com/users/bkreider/following{/other_user}","gists_url":"https://api.github.com/users/bkreider/gists{/gist_id}","starred_url":"https://api.github.com/users/bkreider/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bkreider/subscriptions","organizations_url":"https://api.github.com/users/bkreider/orgs","repos_url":"https://api.github.com/users/bkreider/repos","events_url":"https://api.github.com/users/bkreider/events{/privacy}","received_events_url":"https://api.github.com/users/bkreider/received_events","type":"User","site_admin":false},"created_at":"2017-03-15T18:14:39Z","updated_at":"2017-03-15T18:14:39Z","author_association":"NONE","body":"> it seems like the usecase is pretty rare that you want to secure from access from within local host, in such a case I think we should not add complexity to ES but rather use some virtualization to hide ES from the users and put apache HTTPD with mod_proxy in front of it for the extra level of security?\r\n\r\nUnix domain sockets are more simple than TCP sockets.  Also, ES is nice to use with a single-server application that provides cheap text search.   I was shocked when I found out that ES doesn't support them.  Most servers support them, because they are so fundamental.  It so easy to secure unix domain sockets using standard file permissions.   This is much easier than (mis)configuring authentication although one would be wise to layer their security. \r\n\r\nI just realized that everything I'm saying has been said much better by @CarlEklof.  ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/405246930","html_url":"https://github.com/elastic/elasticsearch/issues/21377#issuecomment-405246930","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21377","id":405246930,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNTI0NjkzMA==","user":{"login":"dinamic","id":11616,"node_id":"MDQ6VXNlcjExNjE2","avatar_url":"https://avatars0.githubusercontent.com/u/11616?v=4","gravatar_id":"","url":"https://api.github.com/users/dinamic","html_url":"https://github.com/dinamic","followers_url":"https://api.github.com/users/dinamic/followers","following_url":"https://api.github.com/users/dinamic/following{/other_user}","gists_url":"https://api.github.com/users/dinamic/gists{/gist_id}","starred_url":"https://api.github.com/users/dinamic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dinamic/subscriptions","organizations_url":"https://api.github.com/users/dinamic/orgs","repos_url":"https://api.github.com/users/dinamic/repos","events_url":"https://api.github.com/users/dinamic/events{/privacy}","received_events_url":"https://api.github.com/users/dinamic/received_events","type":"User","site_admin":false},"created_at":"2018-07-16T13:27:30Z","updated_at":"2018-07-16T13:27:30Z","author_association":"NONE","body":"It has been 2 years since the issue was closed. It may be a time to revise this.\r\n\r\n@s1monw do you think that if you discuss this issue internally you might want to consider implementing a unix socket now?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/422111929","html_url":"https://github.com/elastic/elasticsearch/issues/21377#issuecomment-422111929","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21377","id":422111929,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMjExMTkyOQ==","user":{"login":"cloudnull","id":2066292,"node_id":"MDQ6VXNlcjIwNjYyOTI=","avatar_url":"https://avatars2.githubusercontent.com/u/2066292?v=4","gravatar_id":"","url":"https://api.github.com/users/cloudnull","html_url":"https://github.com/cloudnull","followers_url":"https://api.github.com/users/cloudnull/followers","following_url":"https://api.github.com/users/cloudnull/following{/other_user}","gists_url":"https://api.github.com/users/cloudnull/gists{/gist_id}","starred_url":"https://api.github.com/users/cloudnull/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cloudnull/subscriptions","organizations_url":"https://api.github.com/users/cloudnull/orgs","repos_url":"https://api.github.com/users/cloudnull/repos","events_url":"https://api.github.com/users/cloudnull/events{/privacy}","received_events_url":"https://api.github.com/users/cloudnull/received_events","type":"User","site_admin":false},"created_at":"2018-09-17T17:58:38Z","updated_at":"2018-09-17T17:58:38Z","author_association":"NONE","body":"+1 This would be a great feature to have! -cc @s1monw ","performed_via_github_app":null}]