{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/49568","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49568/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49568/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49568/events","html_url":"https://github.com/elastic/elasticsearch/issues/49568","id":528341364,"node_id":"MDU6SXNzdWU1MjgzNDEzNjQ=","number":49568,"title":"WKT and GeoJSON's shape types need proper capitalization","user":{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false},"labels":[{"id":141079527,"node_id":"MDU6TGFiZWwxNDEwNzk1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Analytics/Geo","name":":Analytics/Geo","color":"0e8a16","default":false,"description":"Indexing, search aggregations of geo points and shapes"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"assignees":[{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2019-11-25T21:16:24Z","updated_at":"2019-12-20T14:47:43Z","closed_at":"2019-12-20T14:47:43Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**situation**\r\n\r\nElasticsearch's WKT and GeoJSON writers lowercase a shape's type.\r\nSo WKT's `POINT` is written as `point`, and GeoJSON's `Point` is written \r\nas `point`. The specs for these formats explicitly define proper capitalization\r\nrules.\r\n\r\nAnother point: Elasticsearch's parsers are case-insensitive... need to determine\r\nwhether that is OK to keep.\r\n\r\nThe only place that this seems to be a user-facing problem is with the\r\nCircle Processor:\r\n\r\n```\r\nPUT circles/_doc/1?pipeline=polygonize_circles\r\n{ \"circle\": \"CIRCLE (30 10 40)\" }\r\n\r\nPUT circles/_doc/2?pipeline=polygonize_circles\r\n{ \"circle\": { \"type\": \"circle\", \"coordinates\": [101, 1], \"radius\": \"100m\" } }\r\n\r\nGET circles/_search?filter_path=hits.hits._source.circle\r\n...\r\n        \"_source\" : {\r\n          \"circle\" : \"polygon ((30.000365257263184 10.0, 30.000111397193788 10.00034284530941, 29.999706043744222 10.000213571721195, 29.999706043744222 9.999786428278805, 30.000111397193788 9.99965715469059, 30.000365257263184 10.0))\"\r\n        }\r\n      },\r\n      {\r\n        \"_source\" : {\r\n          \"circle\" : {\r\n            \"type\" : \"polygon\",\r\n            \"coordinates\" : [\r\n              [\r\n                [\r\n                  101.00090026855469,\r\n                  1.0\r\n                ],\r\n                ...\r\n```\r\n\r\n**GeoJSON Spec**\r\n\r\nlink: https://tools.ietf.org/html/rfc7946\r\n\r\n> Inside this document, the term \"geometry type\" refers to seven\r\n      case-sensitive strings: \"Point\", \"MultiPoint\", \"LineString\",\r\n      \"MultiLineString\", \"Polygon\", \"MultiPolygon\", and\r\n      \"GeometryCollection\".\r\n\r\n**WKT Spec**\r\n\r\nlink: http://docs.opengeospatial.org/is/18-010r7/18-010r7.html\r\n\r\n> Keywords are case-insensitive. Where human readability of the string is important, as in this document, keywords are normally in upper case.\r\n\r\n**Proposed Fix**\r\n\r\nTo adhere to the GeoJSON spec, it is important that proper capitalization \r\nof the geometry types are used. The WKT spec is flexible, but since it is \r\ncommon practice to capitalize the types for human-readability, it would be \r\nnice to capitalize them in WKT as well.","closed_by":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"performed_via_github_app":null}