[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/559062923","html_url":"https://github.com/elastic/elasticsearch/issues/21759#issuecomment-559062923","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21759","id":559062923,"node_id":"MDEyOklzc3VlQ29tbWVudDU1OTA2MjkyMw==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2019-11-27T12:14:41Z","updated_at":"2019-11-27T12:14:41Z","author_association":"MEMBER","body":"I'm closing this one. \r\n\r\nThe initial ask of using `CancellableThreads` to fix this isn't viable because we can't safely interrupt threads blocked inside SDK code (the SDK may handle an `InterruptedException` in ways that corrupt its internal state in some cases).\r\nThere isn't really any other way but interrupting to stop a blobstore write when it's stuck in the way described this PR with the current blocking, stream-based APIs. As the practical relevancy of this problem is very low and it's mainly been an inconvenience (that was easy to work around) in some tests I'm closing this.","performed_via_github_app":null}]