[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/458921289","html_url":"https://github.com/elastic/elasticsearch/issues/38027#issuecomment-458921289","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38027","id":458921289,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODkyMTI4OQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-01-30T12:08:27Z","updated_at":"2019-01-30T12:08:27Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/458921292","html_url":"https://github.com/elastic/elasticsearch/issues/38027#issuecomment-458921292","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38027","id":458921292,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODkyMTI5Mg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-01-30T12:08:28Z","updated_at":"2019-01-30T12:08:28Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/458921533","html_url":"https://github.com/elastic/elasticsearch/issues/38027#issuecomment-458921533","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38027","id":458921533,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODkyMTUzMw==","user":{"login":"pgomulka","id":11137008,"node_id":"MDQ6VXNlcjExMTM3MDA4","avatar_url":"https://avatars0.githubusercontent.com/u/11137008?v=4","gravatar_id":"","url":"https://api.github.com/users/pgomulka","html_url":"https://github.com/pgomulka","followers_url":"https://api.github.com/users/pgomulka/followers","following_url":"https://api.github.com/users/pgomulka/following{/other_user}","gists_url":"https://api.github.com/users/pgomulka/gists{/gist_id}","starred_url":"https://api.github.com/users/pgomulka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgomulka/subscriptions","organizations_url":"https://api.github.com/users/pgomulka/orgs","repos_url":"https://api.github.com/users/pgomulka/repos","events_url":"https://api.github.com/users/pgomulka/events{/privacy}","received_events_url":"https://api.github.com/users/pgomulka/received_events","type":"User","site_admin":false},"created_at":"2019-01-30T12:09:25Z","updated_at":"2019-01-30T12:09:25Z","author_association":"CONTRIBUTOR","body":"assertion failure log\r\n```\r\njava.lang.AssertionError: expected:<0> but was:<1>\r\n\tat __randomizedtesting.SeedInfo.seed([75F3403255B8F3AF:11EEACEEE6CAC19C]:0)\r\n\tat org.junit.Assert.fail(Assert.java:88)\r\n\tat org.junit.Assert.failNotEquals(Assert.java:834)\r\n\tat org.junit.Assert.assertEquals(Assert.java:645)\r\n\tat org.junit.Assert.assertEquals(Assert.java:631)\r\n\tat org.elasticsearch.xpack.ccr.CcrRepositoryIT.testIndividualActionsTimeout(CcrRepositoryIT.java:370)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/459372184","html_url":"https://github.com/elastic/elasticsearch/issues/38027#issuecomment-459372184","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38027","id":459372184,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTM3MjE4NA==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-01-31T14:51:38Z","updated_at":"2019-01-31T14:51:38Z","author_association":"CONTRIBUTOR","body":"Seems like this fails less often but there are still failures \r\n\r\n## Example build failure\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob-unix-compatibility/os=ubuntu-14.04&&virtual/215/console\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+intake/1684/console\r\n\r\n## Reproduction line \r\ndoes not reproduce locally\r\n```\r\n./gradlew :x-pack:plugin:ccr:internalClusterTest -Dtests.seed=36B1DA4D705F0B8F -Dtests.class=org.elasticsearch.xpack.ccr.CcrRepositoryIT -Dtests.method=\"testIndividualActionsTimeout\" -Dtests.security.manager=true -Dtests.locale=mt -Dtests.timezone=Atlantic/Madeira -Dcompiler.java=11 -Druntime.java=8\r\n```\r\n\r\n## Example relevant log:\r\n```\r\n11:26:45   1> org.apache.lucene.util.SetOnce$AlreadySetException: The object cannot be set twice!\r\n11:26:45   1> \tat org.apache.lucene.util.SetOnce.set(SetOnce.java:69) ~[lucene-core-8.0.0-snapshot-83f9835.jar:8.0.0-snapshot-83f9835 83f9835a47a00a2ec58a4cf5fc0d492497cf7898 - jpountz - 2019-01-21 13:06:00]\r\n11:26:45   1> \tat org.elasticsearch.common.logging.NodeAndClusterIdConverter.setNodeIdAndClusterId(NodeAndClusterIdConverter.java:59) ~[elasticsearch-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]\r\n11:26:45   1> \tat org.elasticsearch.common.logging.NodeAndClusterIdStateListener.onNewClusterState(NodeAndClusterIdStateListener.java:69) ~[elasticsearch-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]\r\n11:26:45   1> \tat org.elasticsearch.cluster.ClusterStateObserver$ContextPreservingListener.onNewClusterState(ClusterStateObserver.java:308) ~[elasticsearch-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]\r\n11:26:45   1> \tat org.elasticsearch.cluster.ClusterStateObserver$ObserverClusterStateListener.clusterChanged(ClusterStateObserver.java:193) ~[elasticsearch-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]\r\n11:26:45   1> \tat org.elasticsearch.cluster.service.ClusterApplierService.lambda$callClusterStateListeners$6(ClusterApplierService.java:481) ~[elasticsearch-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]\r\n11:26:45   1> \tat java.util.concurrent.ConcurrentHashMap$KeySpliterator.forEachRemaining(ConcurrentHashMap.java:3527) [?:1.8.0_202]\r\n11:26:45   1> \tat java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:743) [?:1.8.0_202]\r\n11:26:45   1> \tat java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:580) [?:1.8.0_202]\r\n11:26:45   1> \tat org.elasticsearch.cluster.service.ClusterApplierService.callClusterStateListeners(ClusterApplierService.java:478) [elasticsearch-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]\r\n11:26:45   1> \tat org.elasticsearch.cluster.service.ClusterApplierService.applyChanges(ClusterApplierService.java:467) [elasticsearch-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]\r\n11:26:45   1> \tat org.elasticsearch.cluster.service.ClusterApplierService.runTask(ClusterApplierService.java:414) [elasticsearch-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]\r\n11:26:45   1> \tat org.elasticsearch.cluster.service.ClusterApplierService$UpdateTask.run(ClusterApplierService.java:165) [elasticsearch-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]\r\n11:26:45   1> \tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:681) [elasticsearch-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]\r\n11:26:45   1> \tat org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.runAndClean(PrioritizedEsThreadPoolExecutor.java:252) [elasticsearch-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]\r\n11:26:45   1> \tat org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:215) [elasticsearch-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]\r\n11:26:45   1> \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_202]\r\n11:26:45   1> \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_202]\r\n11:26:45   1> \tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_202]\r\n\r\n\r\n11:26:45 FAILURE 14.9s J3 | CcrRepositoryIT.testIndividualActionsTimeout <<< FAILURES!\r\n11:26:45    > Throwable #1: java.lang.AssertionError: \r\n11:26:45    > Expected: a value greater than <0>\r\n11:26:45    >      but: <0> was equal to <0>\r\n11:26:45    > \tat __randomizedtesting.SeedInfo.seed([36B1DA4D705F0B8F:52AC3691C32D39BC]:0)\r\n11:26:45    > \tat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\r\n11:26:45    > \tat org.elasticsearch.xpack.ccr.CcrRepositoryIT.testIndividualActionsTimeout(CcrRepositoryIT.java:372)\r\n11:26:45    > \tat java.lang.Thread.run(Thread.java:748)\r\n```\r\n\r\n## Frequency\r\n\r\n6 time Today ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/459415533","html_url":"https://github.com/elastic/elasticsearch/issues/38027#issuecomment-459415533","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/38027","id":459415533,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTQxNTUzMw==","user":{"login":"pgomulka","id":11137008,"node_id":"MDQ6VXNlcjExMTM3MDA4","avatar_url":"https://avatars0.githubusercontent.com/u/11137008?v=4","gravatar_id":"","url":"https://api.github.com/users/pgomulka","html_url":"https://github.com/pgomulka","followers_url":"https://api.github.com/users/pgomulka/followers","following_url":"https://api.github.com/users/pgomulka/following{/other_user}","gists_url":"https://api.github.com/users/pgomulka/gists{/gist_id}","starred_url":"https://api.github.com/users/pgomulka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgomulka/subscriptions","organizations_url":"https://api.github.com/users/pgomulka/orgs","repos_url":"https://api.github.com/users/pgomulka/repos","events_url":"https://api.github.com/users/pgomulka/events{/privacy}","received_events_url":"https://api.github.com/users/pgomulka/received_events","type":"User","site_admin":false},"created_at":"2019-01-31T16:43:54Z","updated_at":"2019-02-01T15:42:54Z","author_association":"CONTRIBUTOR","body":"The exceptions from the NodeAndClusterIdListener should be fixed with this PR\r\nhttps://github.com/elastic/elasticsearch/pull/38110\r\nBut these were not the cause of the test failure (the exception is caught in `ClusterApplierService` and just logs `failed to notify ClusterStateListener`+stacktrace)","performed_via_github_app":null}]