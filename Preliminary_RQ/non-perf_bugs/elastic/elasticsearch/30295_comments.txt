[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/385634061","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-385634061","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":385634061,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NTYzNDA2MQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-05-01T09:31:50Z","updated_at":"2018-05-01T09:31:50Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/386219450","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-386219450","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":386219450,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NjIxOTQ1MA==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2018-05-03T08:05:15Z","updated_at":"2018-05-03T08:53:27Z","author_association":"CONTRIBUTOR","body":"@andyb-elastic saw a similar failure some time back and this failure included the Elasticsearch logs which said this:\r\n\r\n```\r\n# [2018-02-27T10:45:38,258][INFO ][o.e.n.Node               ] initialized\r\n# [2018-02-27T10:45:38,258][INFO ][o.e.n.Node               ] [OpH_qGq] starting ...\r\n# [2018-02-27T10:45:38,409][INFO ][o.e.t.TransportService   ] [OpH_qGq] publish_address {127.0.0.1:9300}, bound_addresses {127.0.0.1:9300}\r\n# [2018-02-27T10:45:38,422][WARN ][o.e.b.BootstrapChecks    ] [OpH_qGq] max file descriptors [4096] for elasticsearch process is too low, increase to at least [65536]\r\n# [2018-02-27T10:45:41,463][INFO ][o.e.c.s.MasterService    ] [OpH_qGq] zen-disco-elected-as-master ([0] nodes joined), reason: master node changed {previous [], current [{OpH_qGq}{OpH_qGqbSjOWzlsc2tPxfg}{3UZwOqnAT5KXgUcXlqfCxA}{127.0.0.1}{127.0.0.1:9300}{ml.machine_memory=8# [2018-02-27T10:45:41,463][INFO ][o.e.c.s.MasterService    ] [OpH_qGq] zen-disco-elected-as-master ([0] nodes joined), reason: master node changed {previous [], current [{OpH_qGq}{OpH_qGqbSjOWzlsc2tPxfg}{3UZwOqnAT5KXgUcXlqfCxA}{127.0.0.1}{127.0.0.1:9300}{ml.machine_memory=8\r\n370659328, ml.max_open_jobs=20, ml.enabled=true}]}\r\n# [2018-02-27T10:45:41,467][INFO ][o.e.c.s.ClusterApplierService] [OpH_qGq] master node changed {previous [], current [{OpH_qGq}{OpH_qGqbSjOWzlsc2tPxfg}{3UZwOqnAT5KXgUcXlqfCxA}{127.0.0.1}{127.0.0.1:9300}{ml.machine_memory=8370659328, ml.max_open_jobs=20, ml.enabled=true}]}, reason: apply cluster state (from master [master {OpH_qGq}{OpH_qGqbSjOWzlsc2tPxfg}{3UZwOqnAT5KXgUcXlqfCxA}{127.0.0.1}{127.0.0.1:9300}{ml.machine_memory=8370659328, ml.max_open_jobs=20, ml.enabled=true} committed version [1] source [zen-disco-elected-as-master ([0] nodes joined)]])\r\n# [2018-02-27T10:45:41,477][INFO ][o.e.x.s.t.n.SecurityNetty4HttpServerTransport] [OpH_qGq] publish_address {127.0.0.1:9200}, bound_addresses {127.0.0.1:9200}\r\n# [2018-02-27T10:45:41,478][INFO ][o.e.n.Node               ] [OpH_qGq] started\r\n# [2018-02-27T10:45:41,652][INFO ][o.e.g.GatewayService     ] [OpH_qGq] recovered [0] indices into cluster_state\r\n# [2018-02-27T10:46:11,661][DEBUG][o.e.a.a.i.t.p.TransportPutIndexTemplateAction] [OpH_qGq] failed to put template [.monitoring-beats]\r\n# org.elasticsearch.cluster.metadata.ProcessClusterEventTimeoutException: failed to process cluster event (create-index-template [.monitoring-beats], cause [api]) within 30s\r\n# \tat org.elasticsearch.cluster.service.MasterService$Batcher.lambda$onTimeout$0(MasterService.java:125) ~[elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n# \tat java.util.ArrayList.forEach(ArrayList.java:1249) ~[?:1.8.0_144]\r\n# \tat org.elasticsearch.cluster.service.MasterService$Batcher.lambda$onTimeout$1(MasterService.java:124) ~[elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n# \tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:573) [elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n# \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_144]\r\n370659328, ml.max_open_jobs=20, ml.enabled=true}]}\r\n# [2018-02-27T10:45:41,467][INFO ][o.e.c.s.ClusterApplierService] [OpH_qGq] master node changed {previous [], current [{OpH_qGq}{OpH_qGqbSjOWzlsc2tPxfg}{3UZwOqnAT5KXgUcXlqfCxA}{127.0.0.1}{127.0.0.1:9300}{ml.machine_memory=8370659328, ml.max_open_jobs=20, ml.enabled=true}]}, reason: apply cluster state (from master [master {OpH_qGq}{OpH_qGqbSjOWzlsc2tPxfg}{3UZwOqnAT5KXgUcXlqfCxA}{127.0.0.1}{127.0.0.1:9300}{ml.machine_memory=8370659328, ml.max_open_jobs=20, ml.enabled=true} committed version [1] source [zen-disco-elected-as-master ([0] nodes joined)]])\r\n# [2018-02-27T10:45:41,477][INFO ][o.e.x.s.t.n.SecurityNetty4HttpServerTransport] [OpH_qGq] publish_address {127.0.0.1:9200}, bound_addresses {127.0.0.1:9200}\r\n# [2018-02-27T10:45:41,478][INFO ][o.e.n.Node               ] [OpH_qGq] started\r\n# [2018-02-27T10:45:41,652][INFO ][o.e.g.GatewayService     ] [OpH_qGq] recovered [0] indices into cluster_state\r\n# [2018-02-27T10:46:11,661][DEBUG][o.e.a.a.i.t.p.TransportPutIndexTemplateAction] [OpH_qGq] failed to put template [.monitoring-beats]\r\n# org.elasticsearch.cluster.metadata.ProcessClusterEventTimeoutException: failed to process cluster event (create-index-template [.monitoring-beats], cause [api]) within 30s\r\n# \tat org.elasticsearch.cluster.service.MasterService$Batcher.lambda$onTimeout$0(MasterService.java:125) ~[elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n# \tat java.util.ArrayList.forEach(ArrayList.java:1249) ~[?:1.8.0_144]\r\n# \tat org.elasticsearch.cluster.service.MasterService$Batcher.lambda$onTimeout$1(MasterService.java:124) ~[elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n# \tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:573) [elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n# \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_144]\r\n# \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1# \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1\r\n.8.0_144]\r\n# \tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_144]\r\n...\r\n```\r\n\r\nNot sure why the Elasticsearch log wasn't included in the build failure above but it'd be mighty useful if it could appear in future.\r\n\r\nIf it is the same situation then this is failing to put a bunch of index templates within the 30 seconds timeout. It's not a network issue, since this is a one-node cluster. It'd be useful to see `DEBUG` logging from:\r\n\r\n    org.elasticsearch.action.support.master.TransportMasterNodeAction\r\n    org.elasticsearch.action.admin.indices.template.put.TransportPutIndexTemplateAction\r\n\r\n(edited - I originally mentioned mappings, but this is not that)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/387109824","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-387109824","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":387109824,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NzEwOTgyNA==","user":{"login":"andyb-elastic","id":29205940,"node_id":"MDQ6VXNlcjI5MjA1OTQw","avatar_url":"https://avatars2.githubusercontent.com/u/29205940?v=4","gravatar_id":"","url":"https://api.github.com/users/andyb-elastic","html_url":"https://github.com/andyb-elastic","followers_url":"https://api.github.com/users/andyb-elastic/followers","following_url":"https://api.github.com/users/andyb-elastic/following{/other_user}","gists_url":"https://api.github.com/users/andyb-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/andyb-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyb-elastic/subscriptions","organizations_url":"https://api.github.com/users/andyb-elastic/orgs","repos_url":"https://api.github.com/users/andyb-elastic/repos","events_url":"https://api.github.com/users/andyb-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/andyb-elastic/received_events","type":"User","site_admin":false},"created_at":"2018-05-07T15:49:53Z","updated_at":"2018-05-07T15:49:53Z","author_association":"CONTRIBUTOR","body":"Another similar one\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+packaging-tests/2658/console\r\n[build-2658-opensuse.txt](https://github.com/elastic/elasticsearch/files/1980526/build-2658-opensuse.txt)\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/387129633","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-387129633","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":387129633,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NzEyOTYzMw==","user":{"login":"andyb-elastic","id":29205940,"node_id":"MDQ6VXNlcjI5MjA1OTQw","avatar_url":"https://avatars2.githubusercontent.com/u/29205940?v=4","gravatar_id":"","url":"https://api.github.com/users/andyb-elastic","html_url":"https://github.com/andyb-elastic","followers_url":"https://api.github.com/users/andyb-elastic/followers","following_url":"https://api.github.com/users/andyb-elastic/following{/other_user}","gists_url":"https://api.github.com/users/andyb-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/andyb-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyb-elastic/subscriptions","organizations_url":"https://api.github.com/users/andyb-elastic/orgs","repos_url":"https://api.github.com/users/andyb-elastic/repos","events_url":"https://api.github.com/users/andyb-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/andyb-elastic/received_events","type":"User","site_admin":false},"created_at":"2018-05-07T16:53:29Z","updated_at":"2018-05-07T16:53:29Z","author_association":"CONTRIBUTOR","body":"And another\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+packaging-tests/2660/console\r\n[build-2660-opensuse.txt](https://github.com/elastic/elasticsearch/files/1980709/build-2660-opensuse.txt)\r\n\r\n@DaveCTurner do you have a recommendation for any logging I can add to get more information about why the node is failing to process these cluster state events?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/387149428","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-387149428","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":387149428,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NzE0OTQyOA==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2018-05-07T17:57:44Z","updated_at":"2018-05-07T17:57:44Z","author_association":"CONTRIBUTOR","body":"The logs seem somewhat garbled - messages seem to be duplicated in a funny order. Nonetheless, this bit seems unusually slow:\r\n\r\n```\r\n# [2018-05-06T06:46:39,483][INFO ][o.e.c.m.MetaDataIndexTemplateService] [I3r5omj] adding template [.monitoring-es] for index patterns [.monitoring-es-6-*]\r\n# [2018-05-06T06:46:43,843][INFO ][o.e.c.m.MetaDataIndexTemplateService] [I3r5omj] adding template [.monitoring-beats] for index patterns [.monitoring-beats-6-*]\r\n# [2018-05-06T06:46:48,220][INFO ][o.e.c.m.MetaDataIndexTemplateService] [I3r5omj] adding template [.monitoring-alerts] for index patterns [.monitoring-alerts-6]\r\n# [2018-05-06T06:46:52,596][INFO ][o.e.c.m.MetaDataIndexTemplateService] [I3r5omj] adding template [.monitoring-kibana] for index patterns [.monitoring-kibana-6-*]\r\nopen_jobs=20, ml.enabled=true}]}, reason: apply cluster state (from master [master {I3r5omj}{I3r5omjKR5evfgfM8ftPbA}{v_6FY1TySDyGEKnupaxjCg}{127.0.0.1}{127.0.0.1:9300}{ml.machine_memory=8370659328, ml.max_open_jobs=20, ml.enabled=true} committed version [1] source [zen-disco-elected-as-master ([0] nodes joined)[, ]]])\r\n# [2018-05-06T06:46:18,995][INFO ][o.e.x.s.t.n.SecurityNetty4HttpServerTransport] [I3r5omj] publish_address {127.0.0.1:9200}, bound_addresses {127.0.0.1:9200}\r\n# [2018-05-06T06:46:18,995][INFO ][o.e.n.Node               ] [I3r5omj] started\r\n# [2018-05-06T06:46:23,813][INFO ][o.e.g.GatewayService     ] [I3r5omj] recovered [0] indices into cluster_state\r\n# [2018-05-06T06:46:23,931][INFO ][o.e.c.m.MetaDataIndexTemplateService] [I3r5omj] adding template [.watch-history-7] for index patterns [.watcher-history-7*]\r\n# [2018-05-06T06:46:28,449][INFO ][o.e.c.m.MetaDataIndexTemplateService] [I3r5omj] adding template [.watches] for index patterns [.watches*]\r\n# [2018-05-06T06:46:32,919][INFO ][o.e.c.m.MetaDataIndexTemplateService] [I3r5omj] adding template [.triggered_watches] for index patterns [.triggered_watches*]\r\n# [2018-05-06T06:46:35,044][INFO ][o.e.c.m.MetaDataIndexTemplateService] [I3r5omj] adding template [.monitoring-logstash] for index patterns [.monitoring-logstash-6-*]\r\n# [2018-05-06T06:46:39,483][INFO ][o.e.c.m.MetaDataIndexTemplateService] [I3r5omj] adding template [.monitoring-es] for index patterns [.monitoring-es-6-*]\r\n# [2018-05-06T06:46:43,843][INFO ][o.e.c.m.MetaDataIndexTemplateService] [I3r5omj] adding template [.monitoring-beats] for index patterns [.monitoring-beats-6-*]\r\n# [2018-05-06T06:46:48,220][INFO ][o.e.c.m.MetaDataIndexTemplateService] [I3r5omj] adding template [.monitoring-alerts] for index patterns [.monitoring-alerts-6]\r\n# [2018-05-06T06:46:52,596][INFO ][o.e.c.m.MetaDataIndexTemplateService] [I3r5omj] adding template [.monitoring-kibana] for index patterns [.monitoring-kibana-6-*]\r\n# [2018-05-06T06:46:53,834][ERROR][o.e.x.m.e.l.LocalExporter] failed to set monitoring pipeline [xpack_# [2018-05-06T06:46:53,834][ERROR][o.e.x.m.e.l.LocalExporter] failed to set monitoring pipeline [xpack_\r\nmonitoring_6]\r\n# org.elasticsearch.cluster.metadata.ProcessClusterEventTimeoutException: failed to process cluster event (put-pipeline-xpack_monitoring_6) within 30s\r\n```\r\n\r\nOn my laptop it takes <1s to make all the templates:\r\n\r\n```\r\n[2018-05-07T18:25:36,684][WARN ][o.e.x.s.a.s.m.NativeRoleMappingStore] [0MEKNSQ] Failed to clear cache for realms [[]]\r\n[2018-05-07T18:25:36,726][INFO ][o.e.g.GatewayService     ] [0MEKNSQ] recovered [0] indices into cluster_state\r\n[2018-05-07T18:25:36,884][INFO ][o.e.c.m.MetaDataIndexTemplateService] [0MEKNSQ] adding template [.watch-history-7] for index patterns [.watcher-history-7*]\r\n[2018-05-07T18:25:36,924][INFO ][o.e.c.m.MetaDataIndexTemplateService] [0MEKNSQ] adding template [.triggered_watches] for index patterns [.triggered_watches*]\r\n[2018-05-07T18:25:36,955][INFO ][o.e.c.m.MetaDataIndexTemplateService] [0MEKNSQ] adding template [.watches] for index patterns [.watches*]\r\n[2018-05-07T18:25:37,020][INFO ][o.e.c.m.MetaDataIndexTemplateService] [0MEKNSQ] adding template [.monitoring-logstash] for index patterns [.monitoring-logstash-6-*]\r\n[2018-05-07T18:25:37,070][INFO ][o.e.c.m.MetaDataIndexTemplateService] [0MEKNSQ] adding template [.monitoring-es] for index patterns [.monitoring-es-6-*]\r\n[2018-05-07T18:25:37,107][INFO ][o.e.c.m.MetaDataIndexTemplateService] [0MEKNSQ] adding template [.monitoring-alerts] for index patterns [.monitoring-alerts-6]\r\n[2018-05-07T18:25:37,148][INFO ][o.e.c.m.MetaDataIndexTemplateService] [0MEKNSQ] adding template [.monitoring-beats] for index patterns [.monitoring-beats-6-*]\r\n[2018-05-07T18:25:37,180][INFO ][o.e.c.m.MetaDataIndexTemplateService] [0MEKNSQ] adding template [.monitoring-kibana] for index patterns [.monitoring-kibana-6-*]\r\n[2018-05-07T18:25:37,319][INFO ][o.e.l.LicenseService     ] [0MEKNSQ] license [6aae53f8-5ecf-4fc8-b66a-50f5e31c3ee7] mode [basic] - valid\r\n```\r\n\r\nPerhaps this will shed a little more light into where the time is going:\r\n\r\n```\r\nlogger.org.elasticsearch.indices: DEBUG\r\nlogger.org.elasticsearch.gateway: TRACE\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/392003568","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-392003568","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":392003568,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjAwMzU2OA==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2018-05-25T09:55:02Z","updated_at":"2018-05-25T09:55:02Z","author_association":"CONTRIBUTOR","body":"https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+packaging-tests/2717/console is another instance of this.\r\n\r\nAgain the outermost error is:\r\n\r\n```\r\n07:01:21 # Connection failure to: http://127.0.0.1:9200/_xpack/security/user/kibana/_password?pretty failed: Read timed out\r\n```\r\n\r\nand the error in the Elasticsearch log is:\r\n\r\n```\r\n07:01:21 # [2018-05-25T07:01:13,198][ERROR][o.e.x.m.e.l.LocalExporter] failed to set monitoring pipeline [xpack_monitoring_2]\r\n07:01:21 # org.elasticsearch.cluster.metadata.ProcessClusterEventTimeoutException: failed to process cluster event (put-pipeline-xpack_monitoring_2) within 30s\r\n07:01:21 # org.elasticsearch.cluster.metadata.ProcessClusterEventTimeoutException: failed to process cluster event (put-pipeline-xpack_monitoring_2) within 30s\r\n07:01:21 # \tat org.elasticsearch.cluster.service.MasterService$Batcher.lambda$onTimeout$0(MasterService.java:124) ~[elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n07:01:21 # \tat org.elasticsearch.cluster.service.MasterService$Batcher.lambda$onTimeout$0(MasterService.java:124) ~[elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n07:01:21 # \tat java.util.ArrayList.forEach(ArrayList.java:1249) ~[?:1.8.0_144]\r\n07:01:21 # \tat java.util.ArrayList.forEach(ArrayList.java:1249) ~[?:1.8.0_144]\r\n07:01:21 # \tat org.elasticsearch.cluster.service.MasterService$Batcher.lambda$onTimeout$1(MasterService.java:123) ~[elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n07:01:21 # \tat org.elasticsearch.cluster.service.MasterService$Batcher.lambda$onTimeout$1(MasterService.java:123) ~[elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n07:01:21 # \tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:625) [elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n07:01:21 # \tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:625) [elasticsearch-7.0.0-alpha1-SNAPSHOT.jar:7.0.0-alpha1-SNAPSHOT]\r\n07:01:21 # \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_144]\r\n07:01:21 # \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_144]\r\n07:01:21 # \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_144]\r\n07:01:21 # \tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_144]\r\n07:01:21 # \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_144]\r\n07:01:21 # \tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_144]\r\n```\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/392016516","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-392016516","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":392016516,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjAxNjUxNg==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2018-05-25T10:51:22Z","updated_at":"2018-05-25T10:51:22Z","author_association":"CONTRIBUTOR","body":"Similar story: adding templates is slow:\r\n\r\n```\r\n# [2018-05-25T07:00:43,002][INFO ][o.e.g.GatewayService     ] [rWPAvXn] recovered [0] indices into cluster_state\r\n# [2018-05-25T07:00:43,134][INFO ][o.e.c.m.MetaDataIndexTemplateService] [rWPAvXn] adding template [.watches] for index patterns [.watches*]\r\n# [2018-05-25T07:00:43,871][INFO ][o.e.c.m.MetaDataIndexTemplateService] [rWPAvXn] adding template [.watch-history-8] for index patterns [.watcher-history-8*]\r\n# [2018-05-25T07:00:43,134][INFO ][o.e.c.m.MetaDataIndexTemplateService] [rWPAvXn] adding template [.watches] for index patterns [.watches*]\r\n# [2018-05-25T07:00:43,871][INFO ][o.e.c.m.MetaDataIndexTemplateService] [rWPAvXn] adding template [.watch-history-8] for index patterns [.watcher-history-8*]\r\n# [2018-05-25T07:00:44,744][INFO ][o.e.c.m.MetaDataIndexTemplateService] [rWPAvXn] adding template [.triggered_watches] for index patterns [.triggered_watches*]\r\n# [2018-05-25T07:00:49,884][INFO ][o.e.c.m.MetaDataIndexTemplateService] [rWPAvXn] adding template [.monitoring-logstash] for index patterns [.monitoring-logstash-6-*]\r\n# [2018-05-25T07:00:44,744][INFO ][o.e.c.m.MetaDataIndexTemplateService] [rWPAvXn] adding template [.triggered_watches] for index patterns [.triggered_watches*]\r\n# [2018-05-25T07:00:49,884][INFO ][o.e.c.m.MetaDataIndexTemplateService] [rWPAvXn] adding template [.monitoring-logstash] for index patterns [.monitoring-logstash-6-*]\r\n# [2018-05-25T07:00:54,904][INFO ][o.e.c.m.MetaDataIndexTemplateService] [rWPAvXn] adding template [.monitoring-es] for index patterns [.monitoring-es-6-*]\r\n# [2018-05-25T07:00:59,906][INFO ][o.e.c.m.MetaDataIndexTemplateService] [rWPAvXn] adding template [.monitoring-beats] for index patterns [.monitoring-beats-6-*]\r\n# [2018-05-25T07:00:54,904][INFO ][o.e.c.m.MetaDataIndexTemplateService] [rWPAvXn] adding template [.monitoring-es] for index patterns [.monitoring-es-6-*]\r\n# [2018-05-25T07:00:59,906][INFO ][o.e.c.m.MetaDataIndexTemplateService] [rWPAvXn] adding template [.monitoring-beats] for index patterns [.monitoring-beats-6-*]\r\n# [2018-05-25T07:01:04,968][INFO ][o.e.c.m.MetaDataIndexTemplateService] [rWPAvXn] adding template [.monitoring-alerts] for index patterns [.monitoring-alerts-6]\r\n# [2018-05-25T07:01:09,960][INFO ][o.e.c.m.MetaDataIndexTemplateService] [rWPAvXn] adding template [.monitoring-kibana] for index patterns [.monitoring-kibana-6-*]\r\n# [2018-05-25T07:01:04,968][INFO ][o.e.c.m.MetaDataIndexTemplateService] [rWPAvXn] adding template [.monitoring-alerts] for index patterns [.monitoring-alerts-6]\r\n# [2018-05-25T07:01:09,960][INFO ][o.e.c.m.MetaDataIndexTemplateService] [rWPAvXn] adding template [.monitoring-kibana] for index patterns [.monitoring-kibana-6-*]\r\n# [2018-05-25T07:01:13,010][ERROR][o.e.x.m.e.l.LocalExporter] failed to set monitoring pipeline [xpack_monitoring_6]\r\n```\r\n\r\n@andyb-elastic it doesn't look like we're getting extra detail yet. Could you check these settings are being applied in the right places?\r\n\r\n```\r\nlogger.org.elasticsearch.indices: DEBUG\r\nlogger.org.elasticsearch.gateway: TRACE\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/392102603","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-392102603","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":392102603,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjEwMjYwMw==","user":{"login":"andyb-elastic","id":29205940,"node_id":"MDQ6VXNlcjI5MjA1OTQw","avatar_url":"https://avatars2.githubusercontent.com/u/29205940?v=4","gravatar_id":"","url":"https://api.github.com/users/andyb-elastic","html_url":"https://github.com/andyb-elastic","followers_url":"https://api.github.com/users/andyb-elastic/followers","following_url":"https://api.github.com/users/andyb-elastic/following{/other_user}","gists_url":"https://api.github.com/users/andyb-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/andyb-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyb-elastic/subscriptions","organizations_url":"https://api.github.com/users/andyb-elastic/orgs","repos_url":"https://api.github.com/users/andyb-elastic/repos","events_url":"https://api.github.com/users/andyb-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/andyb-elastic/received_events","type":"User","site_admin":false},"created_at":"2018-05-25T15:55:52Z","updated_at":"2018-05-25T15:55:52Z","author_association":"CONTRIBUTOR","body":"They're not applied because I didn't follow up on this, my bad. I'll add them now","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/392216727","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-392216727","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":392216727,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjIxNjcyNw==","user":{"login":"andyb-elastic","id":29205940,"node_id":"MDQ6VXNlcjI5MjA1OTQw","avatar_url":"https://avatars2.githubusercontent.com/u/29205940?v=4","gravatar_id":"","url":"https://api.github.com/users/andyb-elastic","html_url":"https://github.com/andyb-elastic","followers_url":"https://api.github.com/users/andyb-elastic/followers","following_url":"https://api.github.com/users/andyb-elastic/following{/other_user}","gists_url":"https://api.github.com/users/andyb-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/andyb-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyb-elastic/subscriptions","organizations_url":"https://api.github.com/users/andyb-elastic/orgs","repos_url":"https://api.github.com/users/andyb-elastic/repos","events_url":"https://api.github.com/users/andyb-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/andyb-elastic/received_events","type":"User","site_admin":false},"created_at":"2018-05-25T23:58:40Z","updated_at":"2018-05-25T23:58:40Z","author_association":"CONTRIBUTOR","body":"Setting that logging the right way ended up being a little involved, I'll push it next week in the interest of not breaking the build Friday afternoon","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/392607676","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-392607676","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":392607676,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjYwNzY3Ng==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2018-05-28T21:44:28Z","updated_at":"2018-05-28T21:44:28Z","author_association":"MEMBER","body":"This looks very similar to me: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.x+packaging-tests/890/console\r\n\r\n@andyb-elastic not sure which additional detail you are looking for, maybe this one shows more?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/392879412","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-392879412","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":392879412,"node_id":"MDEyOklzc3VlQ29tbWVudDM5Mjg3OTQxMg==","user":{"login":"andyb-elastic","id":29205940,"node_id":"MDQ6VXNlcjI5MjA1OTQw","avatar_url":"https://avatars2.githubusercontent.com/u/29205940?v=4","gravatar_id":"","url":"https://api.github.com/users/andyb-elastic","html_url":"https://github.com/andyb-elastic","followers_url":"https://api.github.com/users/andyb-elastic/followers","following_url":"https://api.github.com/users/andyb-elastic/following{/other_user}","gists_url":"https://api.github.com/users/andyb-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/andyb-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyb-elastic/subscriptions","organizations_url":"https://api.github.com/users/andyb-elastic/orgs","repos_url":"https://api.github.com/users/andyb-elastic/repos","events_url":"https://api.github.com/users/andyb-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/andyb-elastic/received_events","type":"User","site_admin":false},"created_at":"2018-05-29T18:09:24Z","updated_at":"2018-05-29T18:09:24Z","author_association":"CONTRIBUTOR","body":"I turned on the logging David suggested when the tests run on opensuse https://github.com/elastic/elasticsearch/commit/ba8bb1d4a15fd5d26357ea0cc7c04b28645b50bf\r\n\r\n@cbuescher it's likely the same, it's hard to tell since it looks like that one didn't dump the server logs. The details we're looking for is more information about why the server sometimes takes a long time to start on opensuse","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/393795024","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-393795024","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":393795024,"node_id":"MDEyOklzc3VlQ29tbWVudDM5Mzc5NTAyNA==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2018-06-01T07:44:10Z","updated_at":"2018-06-01T07:44:10Z","author_association":"CONTRIBUTOR","body":"@jasontedor can you assign someone to address these test failures? ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/393893742","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-393893742","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":393893742,"node_id":"MDEyOklzc3VlQ29tbWVudDM5Mzg5Mzc0Mg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-06-01T14:14:32Z","updated_at":"2018-06-01T14:14:32Z","author_association":"MEMBER","body":"I think this is caused by internal infrastructure issues. I will follow up internally.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/397034709","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-397034709","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":397034709,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NzAzNDcwOQ==","user":{"login":"andyb-elastic","id":29205940,"node_id":"MDQ6VXNlcjI5MjA1OTQw","avatar_url":"https://avatars2.githubusercontent.com/u/29205940?v=4","gravatar_id":"","url":"https://api.github.com/users/andyb-elastic","html_url":"https://github.com/andyb-elastic","followers_url":"https://api.github.com/users/andyb-elastic/followers","following_url":"https://api.github.com/users/andyb-elastic/following{/other_user}","gists_url":"https://api.github.com/users/andyb-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/andyb-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyb-elastic/subscriptions","organizations_url":"https://api.github.com/users/andyb-elastic/orgs","repos_url":"https://api.github.com/users/andyb-elastic/repos","events_url":"https://api.github.com/users/andyb-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/andyb-elastic/received_events","type":"User","site_admin":false},"created_at":"2018-06-13T18:13:39Z","updated_at":"2018-06-13T18:13:39Z","author_association":"CONTRIBUTOR","body":"Here's one with the logging turned up. I'm not sure it really revealed anything, or at least I don't see any additional detail on why the template creation is slow.\r\n\r\n[packaging-2774.txt](https://github.com/elastic/elasticsearch/files/2099255/packaging-2774.txt)\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+packaging-tests/2774/consoleText","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/397035783","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-397035783","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":397035783,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NzAzNTc4Mw==","user":{"login":"andyb-elastic","id":29205940,"node_id":"MDQ6VXNlcjI5MjA1OTQw","avatar_url":"https://avatars2.githubusercontent.com/u/29205940?v=4","gravatar_id":"","url":"https://api.github.com/users/andyb-elastic","html_url":"https://github.com/andyb-elastic","followers_url":"https://api.github.com/users/andyb-elastic/followers","following_url":"https://api.github.com/users/andyb-elastic/following{/other_user}","gists_url":"https://api.github.com/users/andyb-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/andyb-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyb-elastic/subscriptions","organizations_url":"https://api.github.com/users/andyb-elastic/orgs","repos_url":"https://api.github.com/users/andyb-elastic/repos","events_url":"https://api.github.com/users/andyb-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/andyb-elastic/received_events","type":"User","site_admin":false},"created_at":"2018-06-13T18:17:12Z","updated_at":"2018-06-13T18:17:12Z","author_association":"CONTRIBUTOR","body":"I turned up `org.elasticsearch.indices` logging to TRACE and `org.elasticsearch.cluster` to DEBUG https://github.com/elastic/elasticsearch/commit/01d64b128b214c2ac5afc1b0b514dd0d45e60c1b","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/397203872","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-397203872","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":397203872,"node_id":"MDEyOklzc3VlQ29tbWVudDM5NzIwMzg3Mg==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2018-06-14T07:48:14Z","updated_at":"2018-06-14T07:48:14Z","author_association":"CONTRIBUTOR","body":"The log is still suggestive of extremely slow IO when writing updated cluster states to disk. More detail from `logger.org.elasticsearch.cluster` is a good move, thanks, and I also opened #31319 because we currently only log the start of the write, not the end.\r\n\r\n```\r\n# [2018-06-13T07:01:12,159][DEBUG][o.e.i.IndicesService     ] [eIhOL9F] creating Index [[Uo4Ce-TTSfWnn5cLyKCReQ/ZwtuWREBSMeWp4v-LQ8hrQ]], shards [1]/[0] - reason [create index]\r\n# [2018-06-13T07:01:12,262][DEBUG][o.e.i.IndicesService     ] [eIhOL9F] [Uo4Ce-TTSfWnn5cLyKCReQ] closing ... (reason [NO_LONGER_ASSIGNED])\r\n# [2018-06-13T07:01:12,262][DEBUG][o.e.i.IndicesService     ] [eIhOL9F] [Uo4Ce-TTSfWnn5cLyKCReQ/ZwtuWREBSMeWp4v-LQ8hrQ] closing index service (reason [NO_LONGER_ASSIGNED][ created for parsing template mapping])\r\n# [2018-06-13T07:01:12,263][DEBUG][o.e.i.IndicesService     ] [eIhOL9F] [Uo4Ce-TTSfWnn5cLyKCReQ/ZwtuWREBSMeWp4v-LQ8hrQ] closed... (reason [NO_LONGER_ASSIGNED][ created for parsing template mapping])\r\n# [2018-06-13T07:01:12,263][INFO ][o.e.c.m.MetaDataIndexTemplateService] [eIhOL9F] adding template [.triggered_watches] for index patterns [.triggered_watches*]\r\n# [2018-06-13T07:01:12,270][TRACE][o.e.g.MetaStateService   ] [eIhOL9F] [_global] writing state, reason [changed]\r\n# [2018-06-13T07:01:16,680][DEBUG][o.e.i.IndicesService     ] [eIhOL9F] creating Index [[ngefNOwdS4OHzxLC6TD_Gg/hwwgND-gSp6iMN5daYAsHg]], shards [1]/[0] - reason [create index]\r\n# [2018-06-13T07:01:16,684][DEBUG][o.e.i.IndicesService     ] [eIhOL9F] [ngefNOwdS4OHzxLC6TD_Gg] closing ... (reason [N# [2018-06-13T07:01:16,684][DEBUG][o.e.i.IndicesService     ] [eIhOL9F] [ngefNOwdS4OHzxLC6TD_Gg] closing ... (reason [N\r\n# [2018-06-13T07:01:16,684][DEBUG][o.e.i.IndicesService     ] [eIhOL9F] [ngefNOwdS4OHzxLC6TD_Gg/hwwgND-gSp6iMN5daYAsHg] closing index service (reason [NO_LONGER_ASSIGNED][ created for parsing template mapping])\r\n# [2018-06-13T07:01:16,684][DEBUG][o.e.i.IndicesService     ] [eIhOL9F] [ngefNOwdS4OHzxLC6TD_Gg/hwwgND-gSp6iMN5daYAsHg] closed... (reason [NO_LONGER_ASSIGNED][ created for parsing template mapping])\r\n# [2018-06-13T07:01:16,684][INFO ][o.e.c.m.MetaDataIndexTemplateService] [eIhOL9F] adding template [.watches] for index patterns [.watches*]\r\n# [2018-06-13T07:01:16,685][TRACE][o.e.g.MetaStateService   ] [eIhOL9F] [_global] writing state, reason [changed]\r\n# [2018-06-13T07:01:20,988][DEBUG][o.e.i.IndicesService     ] [eIhOL9F] creating Index [[WAeaTyI4TnK3jFmYrKOvAg/En2gqm75SuW_w5EQxYfTog]], shards [1]/[0] - reason [create index]\r\n# [2018-06-13T07:01:21,001][DEBUG][o.e.i.IndicesService     ] [eIhOL9F] [WAeaTyI4TnK3jFmYrKOvAg] closing ... (reason [NO_LONGER_ASSIGNED])\r\n# [2018-06-13T07:01:21,001][DEBUG][o.e.i.IndicesService     ] [eIhOL9F] [WAeaTyI4TnK3jFmYrKOvAg/En2gqm75SuW_w5EQxYfTog] closing index service (reason [NO_LONGER_ASSIGNED][ created for parsing template mapping])\r\n# [2018-06-13T07:01:21,001][INFO ][o.e.c.m.MetaDataIndexTemplateService] [eIhOL9F] adding template [.watch-history-8] for index patterns [.watcher-history-8*]\r\n# [2018-06-13T07:01:21,002][TRACE][o.e.g.MetaStateService   ] [eIhOL9F] [_global] writing state, reason [changed]\r\n# [2018-06-13T07:01:25,044][DEBUG][o.e.i.IndicesService     ] [eIhOL9F] creating Index [[opPILoh1TcuBw9CXG-GNPg/ULbJ2LOERo-GoWAEkGbHJA]], shards [1]/[0] - reason [create index]\r\n# [2018-06-13T07:01:25,050][DEBUG][o.e.i.IndicesService     ] [eIhOL9F] [opPILoh1TcuBw9CXG-GNPg] closing ... (reason [NO_LONGER_ASSIGNED])\r\n# [2018-06-13T07:01:25,050][DEBUG][o.e.i.IndicesService     ] [eIhOL9F] [opPILoh1TcuBw9CXG-GNPg/ULbJ2LOERo-GoWAEkGbHJA] closing index service (reason [NO_LONGER_ASSIGNED][ created for parsing template mapping])\r\n# [2018-06-13T07:01:25,050][DEBUG][o.e.i.IndicesService     ] [eIhOL9F] [opPILoh1TcuBw9CXG-GNPg/ULbJ2LOERo-GoWAEkGbHJA] closed... (reason [NO_LONGER_ASSIGNED][ created for parsing template mapping])\r\n# [2018-06-13T07:01:25,050][INFO ][o.e.c.m.MetaDataIndexTemplateService] [eIhOL9F] adding template [.monitoring-logstash] for index patterns [.monitoring-logstash-6-*]\r\n# [2018-06-13T07:01:25,056][TRACE][o.e.g.MetaStateService   ] [eIhOL9F] [_global] writing state, reason [changed]\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/400316241","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-400316241","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":400316241,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMDMxNjI0MQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2018-06-26T13:51:11Z","updated_at":"2018-06-26T13:51:11Z","author_association":"CONTRIBUTOR","body":"Again! https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.x+packaging-tests/977/console:\r\n\r\n\r\n```\r\n12:59:50 > Task :x-pack:qa:vagrant:vagrantOpensuse42#batsPackagingTest\r\n12:59:50 Task ':x-pack:qa:vagrant:vagrantOpensuse42#batsPackagingTest' is not up-to-date because:\r\n12:59:50   Task has not declared any outputs despite executing actions.\r\n12:59:50 Starting process 'command 'vagrant''. Working directory: /var/lib/jenkins/workspace/elastic+elasticsearch+6.x+packaging-tests/x-pack/qa/vagrant Command: vagrant ssh opensuse-42 --command cd $PACKAGING_ARCHIVES && sudo bats --tap $BATS_TESTS/*.bats\r\n12:59:50 Successfully started process 'command 'vagrant''\r\n12:59:50 1..41\r\n12:59:51 ok 1 [X-PACK] install default distribution\r\n12:59:53 ok 2 [X-PACK] verify x-pack installation\r\n12:59:54 ok 3 [X-PACK] verify croneval works\r\n13:00:01 ok 4 [TAR BOOTSTRAP PASSWORD] add bootstrap.password setting\r\n13:00:11 ok 5 [TAR BOOTSTRAP PASSWORD] test bootstrap.password is in setting list\r\n13:00:13 ok 6 [TAR BOOTSTRAP PASSWORD] test auto generated passwords with modified bootstrap.password\r\n13:00:14 ok 7 [TAR BOOTSTRAP PASSWORD] test elasticsearch-sql-cli\r\n13:00:15 ok 8 [TAR BOOTSTRAP PASSWORD] test elasticsearch-sql-cli when user refuses password\r\n13:00:15 ok 9 [TAR BOOTSTRAP PASSWORD] stop Elasticsearch\r\n13:00:23 ok 10 [RPM BOOTSTRAP PASSWORD] add bootstrap.password setting\r\n13:00:43 ok 11 [RPM BOOTSTRAP PASSWORD] test bootstrap.password is in setting list\r\n13:00:46 ok 12 [RPM BOOTSTRAP PASSWORD] test auto generated passwords with modified bootstrap.password\r\n13:00:47 ok 13 [RPM BOOTSTRAP PASSWORD] test elasticsearch-sql-cli\r\n13:00:48 ok 14 [RPM BOOTSTRAP PASSWORD] test elasticsearch-sql-cli when user refuses password\r\n13:00:49 ok 15 [RPM BOOTSTRAP PASSWORD] stop Elasticsearch\r\n13:02:13 not ok 16 [TAR SETUP PASSWORD] test auto generated passwords\r\n13:02:13 not ok 16 [TAR SETUP PASSWORD] test auto generated passwords\r\n13:02:13 # (in test file /project/build/packaging/bats/tests/30_tar_setup_passwords.bats, line 60)\r\n13:02:13 # (in test file /project/build/packaging/bats/tests/30_tar_setup_passwords.bats, line 60)\r\n13:02:13 #   `false' failed\r\n13:02:13 #   `false' failed\r\n13:02:13 # Unpacking tarball to /tmp/elasticsearch\r\n13:02:13 # checking for bin file elasticsearch-certgen\r\n13:02:13 # checking for bin file elasticsearch-certgen.bat\r\n13:02:13 # checking for bin file elasticsearch-certutil\r\n13:02:13 # checking for bin file elasticsearch-certutil.bat\r\n13:02:13 # checking for bin file elasticsearch-croneval\r\n13:02:13 # checking for bin file elasticsearch-croneval.bat\r\n13:02:13 # checking for bin file elasticsearch-migrate\r\n13:02:13 # checking for bin file elasticsearch-migrate.bat\r\n13:02:13 # checking for bin file elasticsearch-saml-metadata\r\n13:02:13 # checking for bin file elasticsearch-saml-metadata.bat\r\n13:02:13 # checking for bin file elasticsearch-setup-passwords\r\n13:02:13 # checking for bin file elasticsearch-setup-passwords.bat\r\n13:02:13 # checking for bin file elasticsearch-sql-cli\r\n13:02:13 # checking for bin file elasticsearch-sql-cli.bat\r\n13:02:13 # checking for bin file elasticsearch-sql-cli-6.4.0-SNAPSHOT.jar\r\n13:02:13 # checking for bin file elasticsearch-syskeygen\r\n13:02:13 # checking for bin file elasticsearch-syskeygen.bat\r\n13:02:13 # checking for bin file elasticsearch-users\r\n13:02:13 # checking for bin file elasticsearch-users.bat\r\n13:02:13 # checking for bin file x-pack-env\r\n13:02:13 # checking for bin file x-pack-env.bat\r\n13:02:13 # checking for bin file x-pack-security-env\r\n13:02:13 # checking for bin file x-pack-security-env.bat\r\n13:02:13 # checking for bin file x-pack-watcher-env\r\n13:02:13 # checking for bin file x-pack-watcher-env.bat\r\n13:02:14 # elasticsearch\r\n13:02:14 # elasticsearch.bat\r\n13:02:14 # elasticsearch-certgen\r\n13:02:14 # elasticsearch-certgen.bat\r\n13:02:14 # elasticsearch-certutil\r\n13:02:14 # elasticsearch-certutil.bat\r\n13:02:14 # elasticsearch-cli\r\n13:02:14 # elasticsearch-cli.bat\r\n13:02:14 # elasticsearch-croneval\r\n13:02:14 # elasticsearch-croneval.bat\r\n13:02:14 # elasticsearch-env\r\n13:02:14 # elasticsearch-env.bat\r\n13:02:14 # elasticsearch-keystore\r\n13:02:14 # elasticsearch-keystore.bat\r\n13:02:14 # elasticsearch-migrate\r\n13:02:14 # elasticsearch-migrate.bat\r\n13:02:14 # elasticsearch-plugin\r\n13:02:14 # elasticsearch-plugin.bat\r\n13:02:14 # elasticsearch-saml-metadata\r\n13:02:14 # elasticsearch-saml-metadata.bat\r\n13:02:14 # elasticsearch-service.bat\r\n13:02:14 # elasticsearch-service-mgr.exe\r\n13:02:14 # elasticsearch-service-x64.exe\r\n13:02:14 # elasticsearch-setup-passwords\r\n13:02:14 # elasticsearch-setup-passwords.bat\r\n13:02:14 # elasticsearch-sql-cli\r\n13:02:14 # elasticsearch-sql-cli-6.4.0-SNAPSHOT.jar\r\n13:02:14 # elasticsearch-sql-cli.bat\r\n13:02:14 # elasticsearch-syskeygen\r\n13:02:14 # Unpacking tarball to /tmp/elasticsearch\r\n13:02:14 # checking for bin file elasticsearch-certgen\r\n13:02:14 # checking for bin file elasticsearch-certgen.bat\r\n13:02:14 # checking for bin file elasticsearch-certutil\r\n13:02:14 # checking for bin file elasticsearch-certutil.bat\r\n13:02:14 # checking for bin file elasticsearch-croneval\r\n13:02:14 # checking for bin file elasticsearch-croneval.bat\r\n13:02:14 # checking for bin file elasticsearch-migrate\r\n13:02:14 # checking for bin file elasticsearch-migrate.bat\r\n13:02:14 # checking for bin file elasticsearch-saml-metadata\r\n13:02:14 # checking for bin file elasticsearch-saml-metadata.bat\r\n13:02:14 # checking for bin file elasticsearch-setup-passwords\r\n13:02:14 # checking for bin file elasticsearch-setup-passwords.bat\r\n13:02:14 # checking for bin file elasticsearch-sql-cli\r\n13:02:14 # checking for bin file elasticsearch-sql-cli.bat\r\n13:02:14 # checking for bin file elasticsearch-sql-cli-6.4.0-SNAPSHOT.jar\r\n13:02:14 # checking for bin file elasticsearch-syskeygen\r\n13:02:14 # checking for bin file elasticsearch-syskeygen.bat\r\n13:02:14 # checking for bin file elasticsearch-users\r\n13:02:14 # checking for bin file elasticsearch-users.bat\r\n13:02:14 # checking for bin file x-pack-env\r\n13:02:14 # checking for bin file x-pack-env.bat\r\n13:02:14 # checking for bin file x-pack-security-env\r\n13:02:14 # checking for bin file x-pack-security-env.bat\r\n13:02:14 # checking for bin file x-pack-watcher-env\r\n13:02:14 # checking for bin file x-pack-watcher-env.bat\r\n13:02:14 # elasticsearch\r\n13:02:14 # elasticsearch.bat\r\n13:02:14 # elasticsearch-certgen\r\n13:02:14 # elasticsearch-certgen.bat\r\n13:02:14 # elasticsearch-certutil\r\n13:02:14 # elasticsearch-certutil.bat\r\n13:02:14 # elasticsearch-cli\r\n13:02:14 # elasticsearch-cli.bat\r\n13:02:14 # elasticsearch-croneval\r\n13:02:14 # elasticsearch-croneval.bat\r\n13:02:14 # elasticsearch-env\r\n13:02:14 # elasticsearch-env.bat\r\n13:02:14 # elasticsearch-keystore\r\n13:02:14 # elasticsearch-keystore.bat\r\n13:02:14 # elasticsearch-migrate\r\n13:02:14 # elasticsearch-migrate.bat\r\n13:02:14 # elasticsearch-plugin\r\n13:02:14 # elasticsearch-plugin.bat\r\n13:02:14 # elasticsearch-saml-metadata\r\n13:02:14 # elasticsearch-saml-metadata.bat\r\n13:02:14 # elasticsearch-service.bat\r\n13:02:14 # elasticsearch-service-mgr.exe\r\n13:02:14 # elasticsearch-service-x64.exe\r\n13:02:14 # elasticsearch-setup-passwords\r\n13:02:14 # elasticsearch-setup-passwords.bat\r\n13:02:14 # elasticsearch-sql-cli\r\n13:02:14 # elasticsearch-sql-cli-6.4.0-SNAPSHOT.jar\r\n13:02:14 # elasticsearch-sql-cli.bat\r\n13:02:14 # elasticsearch-syskeygen\r\n13:02:14 # el# el\r\n13:02:14 asticsearch-syskeygen.bat\r\n13:02:14 # elasticsearch-translog\r\n13:02:14 # elasticsearch-translog.bat\r\n13:02:14 # elasticsearch-users\r\n13:02:14 # elasticsearch-users.bat\r\n13:02:14 # x-pack\r\n13:02:14 # x-pack-env\r\n13:02:14 # x-pack-env.bat\r\n13:02:14 # x-pack-security-env\r\n13:02:14 # x-pack-security-env.bat\r\n13:02:14 # x-pack-watcher-env\r\n13:02:14 # x-pack-watcher-env.bat\r\n13:02:14 # Expected x-pack elasticsearch-setup-passwords tool exit code to be zero\r\n13:02:14 # Initiating the setup of passwords for reserved users elastic,kibana,logstash_system,beats_system.\r\n13:02:14 # The passwords will be randomly generated and printed to the console.\r\n13:02:14 # Please confirm that you would like to continue [y/N]\r\n13:02:14 # \r\n13:02:14 # \r\n13:02:14 # Connection failure to: http://127.0.0.1:9200/_xpack/security/user/kibana/_password?pretty failed: Read timed out\r\n13:02:14 # \r\n13:02:14 # ERROR: Failed to set password for user [kibana].\r\n13:02:14 asticsearch-syskeygen.bat\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/401464157","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-401464157","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":401464157,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMTQ2NDE1Nw==","user":{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false},"created_at":"2018-06-29T20:22:56Z","updated_at":"2018-06-29T20:22:56Z","author_association":"MEMBER","body":"Another instance, this time in `25_package_bootstrap_password.bats`: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+packaging-tests/2823/console\r\n\r\nFull log: [bats-packaging-log.txt](https://github.com/elastic/elasticsearch/files/2150804/bats-packaging-log.txt)\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/401464938","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-401464938","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":401464938,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMTQ2NDkzOA==","user":{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false},"created_at":"2018-06-29T20:26:28Z","updated_at":"2018-07-03T15:59:35Z","author_association":"MEMBER","body":"@andyb-elastic do you think we should disable these tests while we investigate? I'm not familiar with how to best isolate + mute the bats tests.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/401955392","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-401955392","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":401955392,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMTk1NTM5Mg==","user":{"login":"andyb-elastic","id":29205940,"node_id":"MDQ6VXNlcjI5MjA1OTQw","avatar_url":"https://avatars2.githubusercontent.com/u/29205940?v=4","gravatar_id":"","url":"https://api.github.com/users/andyb-elastic","html_url":"https://github.com/andyb-elastic","followers_url":"https://api.github.com/users/andyb-elastic/followers","following_url":"https://api.github.com/users/andyb-elastic/following{/other_user}","gists_url":"https://api.github.com/users/andyb-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/andyb-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyb-elastic/subscriptions","organizations_url":"https://api.github.com/users/andyb-elastic/orgs","repos_url":"https://api.github.com/users/andyb-elastic/repos","events_url":"https://api.github.com/users/andyb-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/andyb-elastic/received_events","type":"User","site_admin":false},"created_at":"2018-07-02T22:21:04Z","updated_at":"2018-07-02T22:21:04Z","author_association":"CONTRIBUTOR","body":"cc @polyfractal since he commented on another one of these issues\r\n\r\nWe're unable to reproduce this outside of CI so we're collecting logging in the CI runs to debug it. I can disable these tests on opensuse, but I'm not sure how else to get insight into what's happening.\r\n\r\nI'll at least leave them enabled on master and disable them on the other branches we test so there aren't so many failures - does that sound reasonable @rjernst @nik9000 \r\n\r\nAlso just to make it easier for people on triage to find this issue here's another way that this can look in the logs\r\n\r\n```\r\n# /project/build/packaging/bats/utils/xpack.bash: connect: Cannot assign requested address\r\n# /project/build/packaging/bats/utils/xpack.bash: line 100: /dev/tcp/localhost/9200: Cannot assign requested address\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/401987495","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-401987495","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":401987495,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMTk4NzQ5NQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2018-07-03T01:44:15Z","updated_at":"2018-07-03T01:44:15Z","author_association":"MEMBER","body":"Sounds reasonable to me.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/402055585","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-402055585","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":402055585,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMjA1NTU4NQ==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2018-07-03T08:26:37Z","updated_at":"2018-07-03T08:26:37Z","author_association":"CONTRIBUTOR","body":"This happened again in https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.x+packaging-tests/997/console\r\n\r\nThe full log attached in https://github.com/elastic/elasticsearch/issues/30295#issuecomment-401464157 contains the new trace logging from #31319 and seems to confirm @DaveCTurner's theory from https://github.com/elastic/elasticsearch/issues/30295#issuecomment-397203872.  For example, storing cluster state version 2 took 6 seconds:\r\n\r\n```\r\n# [2018-06-29T15:31:24,286][DEBUG][o.e.c.s.MasterService    ] [fqeOyku] cluster state updated, version [2], source [# [2018-06-29T15:31:24,286][DEBUG][o.e.c.s.MasterService    ] [fqeOyku] cluster state updated, version [2], source [\r\nlocal-gateway-elected-state]\r\n# [2018-06-29T15:31:24,286][DEBUG][o.e.c.s.MasterService    ] [fqeOyku] publishing cluster state version [2]\r\n# [2018-06-29T15:31:24,286][DEBUG][o.e.c.s.ClusterApplierService] [fqeOyku] processing [apply cluster state (from master [master {fqeOyku}{fqeOykunSeWpa5zpqiinkw}{Ospb1N7bSOmKqY9FlOJ6QA}{127.0.0.1}{127.0.0.1:9300}{ml.machine_memory=8370659328, xpack.installed=true, ml.max_open_jobs=20, ml.enabled=true} committed version [2] source [local-gateway-elected-state]])]: execute\r\n# [2018-06-29T15:31:24,286][DEBUG][o.e.c.s.ClusterApplierService] [fqeOyku] cluster state updated, version [2], source [apply cluster state (from master [master {fqeOyku}{fqeOykunSeWpa5zpqiinkw}{Ospb1N7bSOmKqY9FlOJ6QA}{127.0.0.1}{127.0.0.1:9300}{ml.machine_memory=8370659328, xpack.installed=true, ml.max_open_jobs=20, ml.enabled=true} committed version [2] source [local-gateway-elected-state]])]\r\n# [2018-06-29T15:31:24,286][DEBUG][o.e.c.s.ClusterApplierService] [fqeOyku] applying cluster state version 2\r\n# [2018-06-29T15:31:24,286][DEBUG][o.e.c.s.ClusterApplierService] [fqeOyku] apply cluster state with version 2\r\n# [2018-06-29T15:31:24,287][TRACE][o.e.g.MetaStateService   ] [fqeOyku] [_global] writing state, reason [changed]\r\n# [2018-06-29T15:31:28,799][TRACE][o.e.i.IndexingMemoryController] [fqeOyku] total indexing heap bytes used [0b] vs indices.memory.index_buffer_size [99mb], currently writing bytes [0b]\r\n# [2018-06-29T15:31:30,456][TRACE][o.e.g.MetaDataStateFormat] written state to /var/lib/elasticsearch/nodes/0/_state/global-1.st\r\n# [2018-06-29T15:31:30,457][TRACE][o.e.g.MetaDataStateFormat] cleaned up /var/lib/elasticsearch/nodes/0/_state/global-1.st.tmp\r\n# [2018-06-29T15:31:30,457][TRACE][o.e.g.MetaDataStateFormat] cleanupOldFiles: cleaning up /var/lib/elasticsearch/nodes/0\r\n# [2018-06-29T15:31:30,457][TRACE][o.e.g.MetaDataStateFormat] cleanupOldFiles: cleaned up /var/lib/elasticsearch/nodes/0/_state/global-0.st\r\n# [2018-06-29T15:31:30,457][TRACE][o.e.g.MetaStateService   ] [fqeOyku] [_global] state written\r\nlocal-gateway-elected-state]\r\n# [2018-06-29T15:31:24,286][DEBUG][o.e.c.s.MasterService    ] [fqeOyku] publishing cluster state version [2]\r\n# [2018-06-29T15:31:24,286][DEBUG][o.e.c.s.ClusterApplierService] [fqeOyku] processing [apply cluster state (from master [master {fqeOyku}{fqeOykunSeWpa5zpqiinkw}{Ospb1N7bSOmKqY9FlOJ6QA}{127.0.0.1}{127.0.0.1:9300}{ml.machine_memory=8370659328, xpack.installed=true, ml.max_open_jobs=20, ml.enabled=true} committed version [2] source [local-gateway-elected-state]])]: execute\r\n# [2018-06-29T15:31:24,286][DEBUG][o.e.c.s.ClusterApplierService] [fqeOyku] cluster state updated, version [2], source [apply cluster state (from master [master {fqeOyku}{fqeOykunSeWpa5zpqiinkw}{Ospb1N7bSOmKqY9FlOJ6QA}{127.0.0.1}{127.0.0.1:9300}{ml.machine_memory=8370659328, xpack.installed=true, ml.max_open_jobs=20, ml.enabled=true} committed version [2] source [local-gateway-elected-state]])]\r\n# [2018-06-29T15:31:24,286][DEBUG][o.e.c.s.ClusterApplierService] [fqeOyku] applying cluster state version 2\r\n# [2018-06-29T15:31:24,286][DEBUG][o.e.c.s.ClusterApplierService] [fqeOyku] apply cluster state with version 2\r\n# [2018-06-29T15:31:24,287][TRACE][o.e.g.MetaStateService   ] [fqeOyku] [_global] writing state, reason [changed]\r\n# [2018-06-29T15:31:28,799][TRACE][o.e.i.IndexingMemoryController] [fqeOyku] total indexing heap bytes used [0b] vs indices.memory.index_buffer_size [99mb], currently writing bytes [0b]\r\n# [2018-06-29T15:31:30,456][TRACE][o.e.g.MetaDataStateFormat] written state to /var/lib/elasticsearch/nodes/0/_state/global-1.st\r\n# [2018-06-29T15:31:30,457][TRACE][o.e.g.MetaDataStateFormat] cleaned up /var/lib/elasticsearch/nodes/0/_state/global-1.st.tmp\r\n# [2018-06-29T15:31:30,457][TRACE][o.e.g.MetaDataStateFormat] cleanupOldFiles: cleaning up /var/lib/elasticsearch/nodes/0\r\n# [2018-06-29T15:31:30,457][TRACE][o.e.g.MetaDataStateFormat] cleanupOldFiles: cleaned up /var/lib/elasticsearch/nodes/0/_state/global-0.st\r\n# [2018-06-29T15:31:30,457][TRACE][o.e.g.MetaStateService   ] [fqeOyku] [_global] state written\r\n# [# [\r\n2018-06-29T15:31:30,457][DEBUG][o.e.c.s.ClusterApplierService] [fqeOyku] set locally applied cluster state to version 2\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/402069112","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-402069112","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":402069112,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMjA2OTExMg==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2018-07-03T09:13:22Z","updated_at":"2018-07-03T09:13:22Z","author_association":"CONTRIBUTOR","body":"I found https://www.electricmonk.nl/log/2016/03/14/terrible-virtualbox-disk-performance/, which recommends enabling the \"Host I/O Cache\" for better SATA disk performance in VirtualBox.\r\n\r\nI wonder if this is also relevant: https://forums.virtualbox.org/viewtopic.php?f=1&t=61428\r\n\r\nIt claims that IDE controllers are _much_ faster than SATA controllers in VirtualBox.  However, as pointed out in the comments, the main reason could be that IDE controllers have Host I/O Cache enabled by default and SATA controllers don't (which tallies with what the first link says).  The reason for that decision seems to be the risk of data loss in the VM if there's a power failure on the host, but we don't care about that in packaging tests: http://www.virtualbox.org/manual/ch05.html#iocaching\r\n\r\nInterestingly the VM used for the opensuse-42 VM has a SATA controller with Host I/O Cache switched off:\r\n\r\n```\r\n    <StorageControllers>\r\n      <StorageController name=\"IDE Controller\" type=\"PIIX4\" PortCount=\"2\" useHostIOCache=\"true\" Bootable=\"true\"/>\r\n      <StorageController name=\"SATA Controller\" type=\"AHCI\" PortCount=\"1\" useHostIOCache=\"false\" Bootable=\"true\" IDE0MasterEmulationPort=\"0\" IDE0SlaveEmulationPort=\"1\" IDE1MasterEmulationPort=\"2\" IDE1SlaveEmulationPort=\"3\">\r\n        <AttachedDevice type=\"HardDisk\" hotpluggable=\"false\" port=\"0\" device=\"0\">\r\n          <Image uuid=\"{cb0669e5-d742-4549-a85b-1be6ab5ca55c}\"/>\r\n        </AttachedDevice>\r\n      </StorageController>\r\n    </StorageControllers>\r\n```\r\n\r\nIn contrast the centos-6 VM which doesn't suffer from slow writes only has an IDE controller with Host I/O Cache enabled - it has _no SATA controller_:\r\n\r\n```\r\n    <StorageControllers>\r\n      <StorageController name=\"IDE Controller\" type=\"PIIX4\" PortCount=\"2\" useHostIOCache=\"true\" Bootable=\"true\">\r\n        <AttachedDevice type=\"HardDisk\" hotpluggable=\"false\" port=\"0\" device=\"0\">\r\n          <Image uuid=\"{bda286eb-5d96-4970-b89c-3b7dd570fde8}\"/>\r\n        </AttachedDevice>\r\n      </StorageController>\r\n    </StorageControllers>\r\n```\r\n\r\nThis is all just an unsubstantiated theory at the moment.  I'm not sure how to change these low level VirtualBox settings from within the Vagrant config file.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/402214020","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-402214020","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":402214020,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMjIxNDAyMA==","user":{"login":"andyb-elastic","id":29205940,"node_id":"MDQ6VXNlcjI5MjA1OTQw","avatar_url":"https://avatars2.githubusercontent.com/u/29205940?v=4","gravatar_id":"","url":"https://api.github.com/users/andyb-elastic","html_url":"https://github.com/andyb-elastic","followers_url":"https://api.github.com/users/andyb-elastic/followers","following_url":"https://api.github.com/users/andyb-elastic/following{/other_user}","gists_url":"https://api.github.com/users/andyb-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/andyb-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyb-elastic/subscriptions","organizations_url":"https://api.github.com/users/andyb-elastic/orgs","repos_url":"https://api.github.com/users/andyb-elastic/repos","events_url":"https://api.github.com/users/andyb-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/andyb-elastic/received_events","type":"User","site_admin":false},"created_at":"2018-07-03T16:20:04Z","updated_at":"2018-07-03T16:20:04Z","author_association":"CONTRIBUTOR","body":"I disabled these tests on opensuse and sles on 6.x, 6.3, and 5.6 https://github.com/elastic/elasticsearch/pull/31749\r\n\r\nThanks for the info @droberts195 that looks promising, I'll try setting the controller in the Vagrantfile","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/402888970","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-402888970","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":402888970,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMjg4ODk3MA==","user":{"login":"andyb-elastic","id":29205940,"node_id":"MDQ6VXNlcjI5MjA1OTQw","avatar_url":"https://avatars2.githubusercontent.com/u/29205940?v=4","gravatar_id":"","url":"https://api.github.com/users/andyb-elastic","html_url":"https://github.com/andyb-elastic","followers_url":"https://api.github.com/users/andyb-elastic/followers","following_url":"https://api.github.com/users/andyb-elastic/following{/other_user}","gists_url":"https://api.github.com/users/andyb-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/andyb-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyb-elastic/subscriptions","organizations_url":"https://api.github.com/users/andyb-elastic/orgs","repos_url":"https://api.github.com/users/andyb-elastic/repos","events_url":"https://api.github.com/users/andyb-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/andyb-elastic/received_events","type":"User","site_admin":false},"created_at":"2018-07-06T00:24:19Z","updated_at":"2018-07-06T00:24:19Z","author_association":"CONTRIBUTOR","body":"It seems like configuring the disk to be attached to the ide controller would be more appropriate to do when the image is built, it looks like we do something similar for sles https://github.com/elastic/infra/blob/a8344443005bf72d8b674e12583e0d5c7a338d6a/packer/packer-sles-vagrantcloud.json#L137-L148\r\n\r\nI ran into an issue with the packer build for the opensuse vbox image, so that may need to be resolved first. If it's tricky I think we can also set it by calling `storageattach` in the Vagrantfile https://github.com/elastic/infra/issues/5852","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/404153605","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-404153605","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":404153605,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNDE1MzYwNQ==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2018-07-11T12:37:04Z","updated_at":"2018-07-11T12:37:04Z","author_association":"CONTRIBUTOR","body":"More of this: URL: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.x+packaging-tests/1022/console","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/404488106","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-404488106","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":404488106,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNDQ4ODEwNg==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2018-07-12T11:59:09Z","updated_at":"2018-07-12T11:59:09Z","author_association":"MEMBER","body":"A similar failure of this today: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.x+packaging-tests/1024/console\r\n\r\n```\r\n03:45:36 Starting process 'command 'vagrant''. Working directory: /var/lib/jenkins/workspace/elastic+elasticsearch+6.x+packaging-tests/qa/vagrant Command: vagrant ssh opensuse-42 --command sudo bash \"$PACKAGING_TESTS/run-tests.sh\"\r\n03:45:36 Successfully started process 'command 'vagrant''\r\n03:45:36 JUnit version 4.12\r\n03:49:43 .....E..E.E........................\r\n03:49:43 Time: 247.113\r\n03:49:43 There were 3 failures:\r\n03:49:43 1) test50StartAndStop(org.elasticsearch.packaging.test.DefaultTarTests)\r\n03:49:43 java.net.SocketTimeoutException: Read timed out\r\n03:49:43 \tat java.net.SocketInputStream.socketRead0(Native Method)\r\n03:49:43 \tat java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\r\n03:49:43 \tat java.net.SocketInputStream.read(SocketInputStream.java:171)\r\n03:49:43 \tat java.net.SocketInputStream.read(SocketInputStream.java:141)\r\n03:49:43 \tat org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137)\r\n03:49:43 \tat org.apache.http.impl.io.SessionInputBufferImpl.fillBuffer(SessionInputBufferImpl.java:153)\r\n03:49:43 \tat org.apache.http.impl.io.SessionInputBufferImpl.readLine(SessionInputBufferImpl.java:282)\r\n03:49:43 \tat org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:140)\r\n03:49:43 \tat org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:57)\r\n03:49:43 \tat org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:259)\r\n03:49:43 \tat org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(DefaultBHttpClientConnection.java:163)\r\n03:49:43 \tat org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(CPoolProxy.java:167)\r\n03:49:43 \tat org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:273)\r\n03:49:43 \tat org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125)\r\n03:49:43 \tat org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:271)\r\n03:49:43 \tat org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)\r\n03:49:43 \tat org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)\r\n03:49:43 \tat org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)\r\n03:49:43 \tat org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)\r\n03:49:43 \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)\r\n03:49:43 \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:55)\r\n03:49:43 \tat org.apache.http.client.fluent.Request.internalExecute(Request.java:173)\r\n03:49:43 \tat org.apache.http.client.fluent.Request.execute(Request.java:177)\r\n03:49:43 \tat org.elasticsearch.packaging.util.ServerUtils.makeRequest(ServerUtils.java:113)\r\n03:49:43 \tat org.elasticsearch.packaging.util.ServerUtils.runElasticsearchTests(ServerUtils.java:98)\r\n03:49:43 \tat org.elasticsearch.packaging.test.ArchiveTestCase.test50StartAndStop(ArchiveTestCase.java:196)\r\n03:49:43 \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n03:49:43 \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n03:49:43 \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n03:49:43 \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n03:49:43 \tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n03:49:43 \tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n03:49:43 \tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n03:49:43 \tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n03:49:43 \tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n03:49:43 \tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n03:49:43 \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\r\n03:49:43 \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\r\n03:49:43 \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n03:49:43 \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n03:49:43 \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n03:49:43 \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n03:49:43 \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n03:49:43 \tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n03:49:43 \tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n03:49:43 \tat org.junit.runners.Suite.runChild(Suite.java:128)\r\n03:49:43 \tat org.junit.runners.Suite.runChild(Suite.java:27)\r\n03:49:43 \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n03:49:43 \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n03:49:43 \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n03:49:43 \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n03:49:43 \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n03:49:43 \tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n03:49:43 \tat org.junit.runners.Suite.runChild(Suite.java:128)\r\n03:49:43 \tat org.junit.runners.Suite.runChild(Suite.java:27)\r\n03:49:43 \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n03:49:43 \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n03:49:43 \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n03:49:43 \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n03:49:43 \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n03:49:43 \tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n03:49:43 \tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n03:49:43 \tat org.junit.runner.JUnitCore.run(JUnitCore.java:115)\r\n03:49:43 \tat org.junit.runner.JUnitCore.runMain(JUnitCore.java:77)\r\n03:49:43 \tat org.junit.runner.JUnitCore.main(JUnitCore.java:36)\r\n03:49:43 \tat org.elasticsearch.packaging.VMTestRunner.main(VMTestRunner.java:34)\r\n03:49:43 2) test70CustomPathConfAndJvmOptions(org.elasticsearch.packaging.test.DefaultTarTests)\r\n03:49:43 java.net.SocketTimeoutException: Read timed out\r\n03:49:43 \tat java.net.SocketInputStream.socketRead0(Native Method)\r\n03:49:43 \tat java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\r\n03:49:43 \tat java.net.SocketInputStream.read(SocketInputStream.java:171)\r\n03:49:43 \tat java.net.SocketInputStream.read(SocketInputStream.java:141)\r\n03:49:43 \tat org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137)\r\n03:49:43 \tat org.apache.http.impl.io.SessionInputBufferImpl.fillBuffer(SessionInputBufferImpl.java:153)\r\n03:49:43 \tat org.apache.http.impl.io.SessionInputBufferImpl.readLine(SessionInputBufferImpl.java:282)\r\n03:49:43 \tat org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:140)\r\n03:49:43 \tat org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:57)\r\n03:49:43 \tat org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:259)\r\n03:49:43 \tat org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(DefaultBHttpClientConnection.java:163)\r\n03:49:43 \tat org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(CPoolProxy.java:167)\r\n03:49:43 \tat org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:273)\r\n03:49:43 \tat org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125)\r\n03:49:43 \tat org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:271)\r\n03:49:43 \tat org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)\r\n03:49:43 \tat org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)\r\n03:49:43 \tat org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)\r\n03:49:43 \tat org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)\r\n03:49:43 \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)\r\n03:49:43 \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:55)\r\n03:49:43 \tat org.apache.http.client.fluent.Request.internalExecute(Request.java:173)\r\n03:49:43 \tat org.apache.http.client.fluent.Request.execute(Request.java:177)\r\n03:49:43 \tat org.elasticsearch.packaging.util.ServerUtils.makeRequest(ServerUtils.java:113)\r\n03:49:43 \tat org.elasticsearch.packaging.util.ServerUtils.waitForElasticsearch(ServerUtils.java:93)\r\n03:49:43 \tat org.elasticsearch.packaging.util.ServerUtils.waitForElasticsearch(ServerUtils.java:45)\r\n03:49:43 \tat org.elasticsearch.packaging.util.Archives.runElasticsearch(Archives.java:302)\r\n03:49:43 \tat org.elasticsearch.packaging.test.ArchiveTestCase.test70CustomPathConfAndJvmOptions(ArchiveTestCase.java:258)\r\n03:49:43 \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n03:49:43 \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n03:49:43 \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n03:49:43 \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n03:49:43 \tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n03:49:43 \tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n03:49:43 \tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n03:49:43 \tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n03:49:43 \tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n03:49:43 \tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n03:49:43 \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\r\n03:49:43 \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\r\n03:49:43 \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n03:49:43 \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n03:49:43 \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n03:49:43 \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n03:49:43 \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n03:49:43 \tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n03:49:43 \tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n03:49:43 \tat org.junit.runners.Suite.runChild(Suite.java:128)\r\n03:49:43 \tat org.junit.runners.Suite.runChild(Suite.java:27)\r\n03:49:43 \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n03:49:43 \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n03:49:43 \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n03:49:43 \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n03:49:43 \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n03:49:43 \tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n03:49:43 \tat org.junit.runners.Suite.runChild(Suite.java:128)\r\n03:49:43 \tat org.junit.runners.Suite.runChild(Suite.java:27)\r\n03:49:43 \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n03:49:43 \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n03:49:43 \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n03:49:43 \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n03:49:43 \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n03:49:43 \tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n03:49:43 \tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n03:49:43 \tat org.junit.runner.JUnitCore.run(JUnitCore.java:115)\r\n03:49:43 \tat org.junit.runner.JUnitCore.runMain(JUnitCore.java:77)\r\n03:49:43 \tat org.junit.runner.JUnitCore.main(JUnitCore.java:36)\r\n03:49:43 \tat org.elasticsearch.packaging.VMTestRunner.main(VMTestRunner.java:34)\r\n03:49:43 3) test80RelativePathConf(org.elasticsearch.packaging.test.DefaultTarTests)\r\n03:49:43 java.net.SocketTimeoutException: Read timed out\r\n03:49:43 \tat java.net.SocketInputStream.socketRead0(Native Method)\r\n03:49:43 \tat java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\r\n03:49:43 \tat java.net.SocketInputStream.read(SocketInputStream.java:171)\r\n03:49:43 \tat java.net.SocketInputStream.read(SocketInputStream.java:141)\r\n03:49:43 \tat org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137)\r\n03:49:43 \tat org.apache.http.impl.io.SessionInputBufferImpl.fillBuffer(SessionInputBufferImpl.java:153)\r\n03:49:43 \tat org.apache.http.impl.io.SessionInputBufferImpl.readLine(SessionInputBufferImpl.java:282)\r\n03:49:43 \tat org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:140)\r\n03:49:43 \tat org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:57)\r\n03:49:43 \tat org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:259)\r\n03:49:43 \tat org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(DefaultBHttpClientConnection.java:163)\r\n03:49:43 \tat org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(CPoolProxy.java:167)\r\n03:49:43 \tat org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:273)\r\n03:49:43 \tat org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125)\r\n03:49:43 \tat org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:271)\r\n03:49:43 \tat org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)\r\n03:49:43 \tat org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)\r\n03:49:43 \tat org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)\r\n03:49:43 \tat org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)\r\n03:49:43 \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)\r\n03:49:43 \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:55)\r\n03:49:43 \tat org.apache.http.client.fluent.Request.internalExecute(Request.java:173)\r\n03:49:43 \tat org.apache.http.client.fluent.Request.execute(Request.java:177)\r\n03:49:43 \tat org.elasticsearch.packaging.util.ServerUtils.makeRequest(ServerUtils.java:113)\r\n03:49:43 \tat org.elasticsearch.packaging.util.ServerUtils.waitForElasticsearch(ServerUtils.java:93)\r\n03:49:43 \tat org.elasticsearch.packaging.util.ServerUtils.waitForElasticsearch(ServerUtils.java:45)\r\n03:49:43 \tat org.elasticsearch.packaging.util.Archives.runElasticsearch(Archives.java:302)\r\n03:49:43 \tat org.elasticsearch.packaging.test.ArchiveTestCase.test80RelativePathConf(ArchiveTestCase.java:303)\r\n03:49:43 \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n03:49:43 \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n03:49:43 \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n03:49:43 \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n03:49:43 \tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n03:49:43 \tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n03:49:43 \tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n03:49:43 \tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n03:49:43 \tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n03:49:43 \tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n03:49:43 \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\r\n03:49:43 \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\r\n03:49:43 \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n03:49:43 \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n03:49:43 \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n03:49:43 \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n03:49:43 \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n03:49:43 \tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n03:49:43 \tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n03:49:43 \tat org.junit.runners.Suite.runChild(Suite.java:128)\r\n03:49:43 \tat org.junit.runners.Suite.runChild(Suite.java:27)\r\n03:49:43 \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n03:49:43 \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n03:49:43 \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n03:49:43 \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n03:49:43 \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n03:49:43 \tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n03:49:43 \tat org.junit.runners.Suite.runChild(Suite.java:128)\r\n03:49:43 \tat org.junit.runners.Suite.runChild(Suite.java:27)\r\n03:49:43 \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n03:49:43 \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n03:49:43 \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n03:49:43 \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n03:49:43 \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n03:49:43 \tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n03:49:43 \tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n03:49:43 \tat org.junit.runner.JUnitCore.run(JUnitCore.java:115)\r\n03:49:43 \tat org.junit.runner.JUnitCore.runMain(JUnitCore.java:77)\r\n03:49:43 \tat org.junit.runner.JUnitCore.main(JUnitCore.java:36)\r\n03:49:43 \tat org.elasticsearch.packaging.VMTestRunner.main(VMTestRunner.java:34)\r\n03:49:43 \r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/404490304","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-404490304","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":404490304,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNDQ5MDMwNA==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2018-07-12T12:08:25Z","updated_at":"2018-07-12T12:08:25Z","author_association":"MEMBER","body":"This build failure failed differently then the others reported here, but looking in the logs a lot of things time out, so assume it is caused by the same issue (super slow IO): https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+packaging-tests/2860/console\r\n\r\n```\r\n23:47:43 # Testing if ES ports are open:\r\n23:47:43 # port 9200 on host 127.0.0.1 is open\r\n23:47:43 # /project/build/packaging/bats/utils/utils.bash: connect: Connection refused\r\n23:47:43 # Testing if ES ports are open:\r\n23:47:43 # port 9200 on host 127.0.0.1 is open\r\n23:47:43 # /project/build/packaging/bats/utils/utils.bash: connect: Connection refused\r\n23:47:43 # /project/build/packaging/bats/utils/utils.bash: line 428: /dev/tcp/127.0.0.1/9201: Connection refused\r\n23:47:43 # /project/build/packaging/bats/utils/utils.bash: line 428: /dev/tcp/127.0.0.1/9201: Connection refused\r\n23:47:43 # port 9201 on host 127.0.0.1 is not open\r\n23:47:43 # port 9201 on host 127.0.0.1 is not open\r\n23:47:57 not ok 13 [RPM BOOTSTRAP PASSWORD] test elasticsearch-sql-cli\r\n23:47:57 not ok 13 [RPM BOOTSTRAP PASSWORD] test elasticsearch-sql-cli\r\n23:47:57 # (in test file /project/build/packaging/bats/tests/25_package_bootstrap_password.bats, line 146)\r\n23:47:57 # (in test file /project/build/packaging/bats/tests/25_package_bootstrap_password.bats, line 146)\r\n23:47:57 #   `false' failed\r\n23:47:57 #   `false' failed\r\n23:47:57 # {\r\n23:47:57 #   \"error\" : {\r\n23:47:57 #     \"root_cause\" : [\r\n23:47:57 #       {\r\n23:47:57 #         \"type\" : \"security_exception\",\r\n23:47:57 #         \"reason\" : \"failed to authenticate user [elastic]\",\r\n23:47:57 #         \"header\" : {\r\n23:47:57 #           \"WWW-Authenticate\" : \"Basic realm=\\\"security\\\" charset=\\\"UTF-8\\\"\"\r\n23:47:57 #         }\r\n23:47:57 #       }\r\n23:47:57 #     ],\r\n23:47:57 #     \"type\" : \"security_exception\",\r\n23:47:57 #     \"reason\" : \"failed to authenticate user [elastic]\",\r\n23:47:57 #     \"header\" : {\r\n23:47:57 #       \"WWW-Authenticate\" : \"Basic realm=\\\"security\\\" charset=\\\"UTF-8\\\"\"\r\n23:47:57 #     }\r\n23:47:57 #   },\r\n23:47:57 #   \"status\" : 401\r\n23:47:57 # }\r\n23:47:57 # SQL cli failed:\\nJul 11, 2018 11:47:51 PM org.jline.utils.Log logr\r\n23:47:57 # WARNING: Unable to create a system terminal, creating a dumb terminal (enable debug logging for more information)\r\n23:47:57 # password: Client Exception [java.sql.SQLInvalidAuthorizationSpecException: failed to authenticate user [elastic]]\r\n23:47:57 # org.elasticsearch.xpack.sql.client.ClientException: java.sql.SQLInvalidAuthorizationSpecException: failed to authenticate user [elastic]\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.cli.command.CliSession.checkConnection(CliSession.java:65)\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.cli.Cli.checkConnection(Cli.java:130)\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.cli.Cli.execute(Cli.java:120)\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.cli.Cli.execute(Cli.java:102)\r\n23:47:57 # \tat org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124)\r\n23:47:57 # \tat org.elasticsearch.cli.Command.main(Command.java:90)\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.cli.Cli.main(Cli.java:50)\r\n23:47:57 # Caused by: java.sql.SQLInvalidAuthorizationSpecException: failed to authenticate user [elastic]\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.client.JreHttpUrlConnection$SqlExceptionType.asException(JreHttpUrlConnection.java:306)\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.client.JreHttpUrlConnection.parserError(JreHttpUrlConnection.java:183)\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.client.JreHttpUrlConnection.request(JreHttpUrlConnection.java:158)\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.client.HttpClient.lambda$get$4(HttpClient.java:122)\r\n23:47:57 # {\r\n23:47:57 #   \"error\" : {\r\n23:47:57 #     \"root_cause\" : [\r\n23:47:57 #       {\r\n23:47:57 #         \"type\" : \"security_exception\",\r\n23:47:57 #         \"reason\" : \"failed to authenticate user [elastic]\",\r\n23:47:57 #         \"header\" : {\r\n23:47:57 #           \"WWW-Authenticate\" : \"Basic realm=\\\"security\\\" charset=\\\"UTF-8\\\"\"\r\n23:47:57 #         }\r\n23:47:57 #       }\r\n23:47:57 #     ],\r\n23:47:57 #     \"type\" : \"security_exception\",\r\n23:47:57 #     \"reason\" : \"failed to authenticate user [elastic]\",\r\n23:47:57 #     \"header\" : {\r\n23:47:57 #       \"WWW-Authenticate\" : \"Basic realm=\\\"security\\\" charset=\\\"UTF-8\\\"\"\r\n23:47:57 #     }\r\n23:47:57 #   },\r\n23:47:57 #   \"status\" : 401\r\n23:47:57 # }\r\n23:47:57 # SQL cli failed:\\nJul 11, 2018 11:47:51 PM org.jline.utils.Log logr\r\n23:47:57 # WARNING: Unable to create a system terminal, creating a dumb terminal (enable debug logging for more information)\r\n23:47:57 # password: Client Exception [java.sql.SQLInvalidAuthorizationSpecException: failed to authenticate user [elastic]]\r\n23:47:57 # org.elasticsearch.xpack.sql.client.ClientException: java.sql.SQLInvalidAuthorizationSpecException: failed to authenticate user [elastic]\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.cli.command.CliSession.checkConnection(CliSession.java:65)\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.cli.Cli.checkConnection(Cli.java:130)\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.cli.Cli.execute(Cli.java:120)\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.cli.Cli.execute(Cli.java:102)\r\n23:47:57 # \tat org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124)\r\n23:47:57 # \tat org.elasticsearch.cli.Command.main(Command.java:90)\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.cli.Cli.main(Cli.java:50)\r\n23:47:57 # Caused by: java.sql.SQLInvalidAuthorizationSpecException: failed to authenticate user [elastic]\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.client.JreHttpUrlConnection$SqlExceptionType.asException(JreHttpUrlConnection.java:306)\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.client.JreHttpUrlConnection.parserError(JreHttpUrlConnection.java:183)\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.client.JreHttpUrlConnection.request(JreHttpUrlConnection.java:158)\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.client.HttpClient.lambda$get$4(HttpClient.java:122)\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.client.JreHttpUrlConnection.http(JreHttpUrlConnection.java# \tat org.elasticsearch.xpack.sql.client.JreHttpUrlConnection.http(JreHttpUrlConnection.java\r\n23:47:57 :62)\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.client.HttpClient.lambda$get$5(HttpClient.java:121)\r\n23:47:57 # \tat java.security.AccessController.doPrivileged(Native Method)\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.client.HttpClient.get(HttpClient.java:120)\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.client.HttpClient.serverInfo(HttpClient.java:60)\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.cli.command.CliSession.checkConnection(CliSession.java:63)\r\n23:47:57 # \t... 6 more\r\n23:47:57 # ERROR: Cannot communicate with the server http://elastic@127.0.0.1:9200. This version of CLI only works with Elasticsearch version v7.0.0-alpha1 [e955ffc]\r\n23:47:57 :62)\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.client.HttpClient.lambda$get$5(HttpClient.java:121)\r\n23:47:57 # \tat java.security.AccessController.doPrivileged(Native Method)\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.client.HttpClient.get(HttpClient.java:120)\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.client.HttpClient.serverInfo(HttpClient.java:60)\r\n23:47:57 # \tat org.elasticsearch.xpack.sql.cli.command.CliSession.checkConnection(CliSession.java:63)\r\n23:47:57 # \t... 6 more\r\n23:47:57 # ERROR: Cannot communicate with the server http://elastic@127.0.0.1:9200. This version of CLI only works with Elasticsearch version v7.0.0-alpha1 [e955ffc]\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/404659738","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-404659738","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":404659738,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNDY1OTczOA==","user":{"login":"andyb-elastic","id":29205940,"node_id":"MDQ6VXNlcjI5MjA1OTQw","avatar_url":"https://avatars2.githubusercontent.com/u/29205940?v=4","gravatar_id":"","url":"https://api.github.com/users/andyb-elastic","html_url":"https://github.com/andyb-elastic","followers_url":"https://api.github.com/users/andyb-elastic/followers","following_url":"https://api.github.com/users/andyb-elastic/following{/other_user}","gists_url":"https://api.github.com/users/andyb-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/andyb-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyb-elastic/subscriptions","organizations_url":"https://api.github.com/users/andyb-elastic/orgs","repos_url":"https://api.github.com/users/andyb-elastic/repos","events_url":"https://api.github.com/users/andyb-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/andyb-elastic/received_events","type":"User","site_admin":false},"created_at":"2018-07-12T21:41:21Z","updated_at":"2018-07-12T21:41:21Z","author_association":"CONTRIBUTOR","body":"Been at this for a while - I'm not sure swapping the disk to the other controller will work in the Vagrantfile. The commands to do it are basically \r\n\r\n```\r\n# disconnect the disk from the sata controller\r\nvboxmanage storageattach [machine id] \\\r\n  --storagectl 'SATA Controller' \\\r\n  --device 0 \\\r\n  --port 0 \\\r\n  --type hdd \\\r\n  --medium none\r\n\r\n# attach the disk to the ide controller\r\nvboxmanage storageattach [machine id] \\\r\n  --storagectl 'IDE Controller' \\\r\n  --device 0 \\\r\n  --port 0 \\\r\n  --type hdd \\\r\n  --medium [disk path or uuid]\r\n```\r\n\r\nYou need to know the disk path or uuid, and to get that from `vboxmanage showvminfo` you need to know the machine id, which doesn't exist at the point where you can run `vboxmanage showvminfo`, because the machine hasn't been created.\r\n\r\nI'm going to take another shot at doing this in the packer build","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/405380708","html_url":"https://github.com/elastic/elasticsearch/issues/30295#issuecomment-405380708","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30295","id":405380708,"node_id":"MDEyOklzc3VlQ29tbWVudDQwNTM4MDcwOA==","user":{"login":"andyb-elastic","id":29205940,"node_id":"MDQ6VXNlcjI5MjA1OTQw","avatar_url":"https://avatars2.githubusercontent.com/u/29205940?v=4","gravatar_id":"","url":"https://api.github.com/users/andyb-elastic","html_url":"https://github.com/andyb-elastic","followers_url":"https://api.github.com/users/andyb-elastic/followers","following_url":"https://api.github.com/users/andyb-elastic/following{/other_user}","gists_url":"https://api.github.com/users/andyb-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/andyb-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyb-elastic/subscriptions","organizations_url":"https://api.github.com/users/andyb-elastic/orgs","repos_url":"https://api.github.com/users/andyb-elastic/repos","events_url":"https://api.github.com/users/andyb-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/andyb-elastic/received_events","type":"User","site_admin":false},"created_at":"2018-07-16T21:01:18Z","updated_at":"2018-07-16T21:01:18Z","author_association":"CONTRIBUTOR","body":"I merged #32053 to turn on host io caching for the opensuse box and re-enabled the tests for the suse boxes on master 14d7e2c7b2d3761a361edd720f98353f856936a4\r\n\r\nWe'll see how they do on the opensuse box - I'm not sure where to start on the sles box as it has its disk on the ide controller. It's possible that it's unrelated to what we're seeing here","performed_via_github_app":null}]