[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/434710006","html_url":"https://github.com/elastic/elasticsearch/issues/35132#issuecomment-434710006","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35132","id":434710006,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDcxMDAwNg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-10-31T14:33:20Z","updated_at":"2018-10-31T14:33:20Z","author_association":"COLLABORATOR","body":"Pinging @elastic/ml-core","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/434734077","html_url":"https://github.com/elastic/elasticsearch/issues/35132#issuecomment-434734077","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35132","id":434734077,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDczNDA3Nw==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2018-10-31T15:34:23Z","updated_at":"2018-10-31T15:34:23Z","author_association":"CONTRIBUTOR","body":"This happens because the majority of messages in the input file have an `extra_timestamp` of the form `Mar 30 12:31:20 CDT`.  But there is one message that has `Mar 30 13:31:19.038 EDT` for its `extra_timestamp`.\r\n\r\nThe Grok pattern `SYSLOGTIMESTAMP` will consume the `.038` in the odd one out, but the date format for syslog timestamps doesn't accept fractional seconds.\r\n\r\nBecause one of the timestamps is in a different format, it's arguably more correct not to detect the field as a timestamp, because the timestamp parsing will fail for that message.\r\n\r\nThis problem comes under the theme of \"Grok patterns are more lenient than date parsing patterns\".  Because of the need to maintain backwards compatibility there is no trivial solution to this problem.  I don't think we should try to rush a fix into 6.5, especially as the feature is experimental.  One possible fix would be to have both a strict regex as well as a lenient Grok pattern for each candidate pattern in the `GrokPatternCreator`, and only detect a field if the strict regular expression matches.  But more thought and testing is required.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/490539147","html_url":"https://github.com/elastic/elasticsearch/issues/35132#issuecomment-490539147","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35132","id":490539147,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5MDUzOTE0Nw==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2019-05-08T15:42:49Z","updated_at":"2019-05-08T15:42:49Z","author_association":"CONTRIBUTOR","body":"I tested this with the changes of #41948 and the problem is solved.  The mappings after changing `ipaddress` to `ipaddress1` are:\r\n\r\n```\r\n    \"mappings\" : {\r\n      \"_meta\" : {\r\n        \"created_by\" : \"ml-file-data-visualizer\"\r\n      },\r\n      \"properties\" : {\r\n        \"@timestamp\" : {\r\n          \"type\" : \"date\"\r\n        },\r\n        \"extra_timestamp\" : {\r\n          \"type\" : \"date\",\r\n          \"format\" : \"MMM dd HH:mm:ss||MMM  d HH:mm:ss||MMM dd HH:mm:ss.SSS||MMM  d HH:mm:ss.SSS\"\r\n        },\r\n        \"field\" : {\r\n          \"type\" : \"long\"\r\n        },\r\n        \"field2\" : {\r\n          \"type\" : \"long\"\r\n        },\r\n        \"ipaddress1\" : {\r\n          \"type\" : \"ip\"\r\n        },\r\n        \"message\" : {\r\n          \"type\" : \"text\"\r\n        }\r\n      }\r\n    }\r\n```\r\n\r\n`extra_timestamp` survives as a date.","performed_via_github_app":null}]