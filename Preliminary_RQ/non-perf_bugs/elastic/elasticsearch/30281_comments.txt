[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/385554898","html_url":"https://github.com/elastic/elasticsearch/issues/30281#issuecomment-385554898","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30281","id":385554898,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NTU1NDg5OA==","user":{"login":"josenrihernand","id":22355359,"node_id":"MDQ6VXNlcjIyMzU1MzU5","avatar_url":"https://avatars1.githubusercontent.com/u/22355359?v=4","gravatar_id":"","url":"https://api.github.com/users/josenrihernand","html_url":"https://github.com/josenrihernand","followers_url":"https://api.github.com/users/josenrihernand/followers","following_url":"https://api.github.com/users/josenrihernand/following{/other_user}","gists_url":"https://api.github.com/users/josenrihernand/gists{/gist_id}","starred_url":"https://api.github.com/users/josenrihernand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josenrihernand/subscriptions","organizations_url":"https://api.github.com/users/josenrihernand/orgs","repos_url":"https://api.github.com/users/josenrihernand/repos","events_url":"https://api.github.com/users/josenrihernand/events{/privacy}","received_events_url":"https://api.github.com/users/josenrihernand/received_events","type":"User","site_admin":false},"created_at":"2018-04-30T23:07:21Z","updated_at":"2018-04-30T23:07:21Z","author_association":"NONE","body":"I'd like to send additional info about this issue:\r\n\r\nIf I try to get the Elasticsearch version with 2G (intead of 4g) for Java Heap size, I get the version smoothly:\r\n\r\n**ES_JAVA_OPTS=\"-Xms2g -Xmx2g\"** /usr/share/elasticsearch/bin/elasticsearch --version\r\n**Version: 5.6.8, Build: 688ecce/2018-02-16T16:46:30.010Z, JVM: 1.8.0_171**\r\n\r\nHowever, if I try with 4G (which is the actually Heap Size of the JVM), I get the error message:\r\n\r\n**ES_JAVA_OPTS=\"-Xms4g -Xmx4g\"** /usr/share/elasticsearch/bin/elasticsearch --version\r\n\r\n------------------------------------------------------------------------\r\nOpenJDK 64-Bit Server VM warning: INFO: os::commit_memory(0x00000006ca660000, 4120510464, 0) failed; error='Cannot allocate memory' (errno=12)\r\n\r\nThere is insufficient memory for the Java Runtime Environment to continue.\r\nNative memory allocation (mmap) failed to map 4120510464 bytes for committing reserved memory.\r\nAn error report file with more information is saved as:\r\n/var/log/elasticsearch/hs_err_pid18376.log\r\n------------------------------------------------------------------------\r\n\r\nfree -m\r\n             total       used       free     shared    buffers     cached\r\nMem:          7979       5115       2863          0         58        343\r\n-/+ buffers/cache:       4713       3265\r\nSwap:            0          0          0\r\n\r\nSo, the question is, why I get this error, considering there is enough free memory and, more important, the Heap size configured is actually 4g (not 2g) ?\r\n\r\nThanks in advance!\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/385559395","html_url":"https://github.com/elastic/elasticsearch/issues/30281#issuecomment-385559395","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30281","id":385559395,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NTU1OTM5NQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-04-30T23:34:12Z","updated_at":"2018-04-30T23:34:12Z","author_association":"MEMBER","body":"This is probably an environment issue and not an Elasticsearch issue. I would check your overcommit settings. Either way, Elastic provides a [forum](https://discuss.elastic.co) for asking general questions and instead prefers to use GitHub only for verified bug reports and feature requests. There's an active community there that should be able to help get an answer to your question. As such, I hope you don't mind that I close this.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/385560667","html_url":"https://github.com/elastic/elasticsearch/issues/30281#issuecomment-385560667","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30281","id":385560667,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NTU2MDY2Nw==","user":{"login":"josenrihernand","id":22355359,"node_id":"MDQ6VXNlcjIyMzU1MzU5","avatar_url":"https://avatars1.githubusercontent.com/u/22355359?v=4","gravatar_id":"","url":"https://api.github.com/users/josenrihernand","html_url":"https://github.com/josenrihernand","followers_url":"https://api.github.com/users/josenrihernand/followers","following_url":"https://api.github.com/users/josenrihernand/following{/other_user}","gists_url":"https://api.github.com/users/josenrihernand/gists{/gist_id}","starred_url":"https://api.github.com/users/josenrihernand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josenrihernand/subscriptions","organizations_url":"https://api.github.com/users/josenrihernand/orgs","repos_url":"https://api.github.com/users/josenrihernand/repos","events_url":"https://api.github.com/users/josenrihernand/events{/privacy}","received_events_url":"https://api.github.com/users/josenrihernand/received_events","type":"User","site_admin":false},"created_at":"2018-04-30T23:42:16Z","updated_at":"2018-04-30T23:42:16Z","author_association":"NONE","body":"Ok @jasontedor , I will open the issue in the forum provided. thanks. This issue can be closed.","performed_via_github_app":null}]