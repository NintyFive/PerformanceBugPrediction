[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/432383743","html_url":"https://github.com/elastic/elasticsearch/issues/34772#issuecomment-432383743","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34772","id":432383743,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjM4Mzc0Mw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-10-23T19:20:26Z","updated_at":"2018-10-23T19:20:26Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-security","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/432389580","html_url":"https://github.com/elastic/elasticsearch/issues/34772#issuecomment-432389580","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34772","id":432389580,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjM4OTU4MA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-10-23T19:37:56Z","updated_at":"2018-10-23T19:37:56Z","author_association":"MEMBER","body":"Yes!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/432390598","html_url":"https://github.com/elastic/elasticsearch/issues/34772#issuecomment-432390598","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34772","id":432390598,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjM5MDU5OA==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2018-10-23T19:40:54Z","updated_at":"2018-10-23T19:40:54Z","author_association":"CONTRIBUTOR","body":"I let that slip after 6.4 ,I'll be taking it up shortly ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/441434778","html_url":"https://github.com/elastic/elasticsearch/issues/34772#issuecomment-441434778","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34772","id":441434778,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTQzNDc3OA==","user":{"login":"LuisAlvelaMendes","id":36206773,"node_id":"MDQ6VXNlcjM2MjA2Nzcz","avatar_url":"https://avatars3.githubusercontent.com/u/36206773?v=4","gravatar_id":"","url":"https://api.github.com/users/LuisAlvelaMendes","html_url":"https://github.com/LuisAlvelaMendes","followers_url":"https://api.github.com/users/LuisAlvelaMendes/followers","following_url":"https://api.github.com/users/LuisAlvelaMendes/following{/other_user}","gists_url":"https://api.github.com/users/LuisAlvelaMendes/gists{/gist_id}","starred_url":"https://api.github.com/users/LuisAlvelaMendes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LuisAlvelaMendes/subscriptions","organizations_url":"https://api.github.com/users/LuisAlvelaMendes/orgs","repos_url":"https://api.github.com/users/LuisAlvelaMendes/repos","events_url":"https://api.github.com/users/LuisAlvelaMendes/events{/privacy}","received_events_url":"https://api.github.com/users/LuisAlvelaMendes/received_events","type":"User","site_admin":false},"created_at":"2018-11-25T11:51:01Z","updated_at":"2018-11-25T11:51:01Z","author_association":"NONE","body":"I'm not so sure I understand this issue .. I presume you're talking about classes like \" FIPS140JKSKeystoreBootstrapCheck\" and so forth, the ones called \"FIPS140(..)\". The idea would be to refactor them as subclasses of a FIPSChecks, changing their name but leaving all of their functionality the same?\r\n\r\nHere's a somewhat illustrative diagram: \r\n(I removed the FIPS140 repetition for subclasses and also the designation \"Bootstrap\".\r\n![org elasticsearch xpack security_](https://user-images.githubusercontent.com/36206773/48978753-5e2d5000-f0a8-11e8-96e6-a38944a03805.png)\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/441436343","html_url":"https://github.com/elastic/elasticsearch/issues/34772#issuecomment-441436343","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34772","id":441436343,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTQzNjM0Mw==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2018-11-25T12:18:28Z","updated_at":"2018-11-25T12:18:28Z","author_association":"CONTRIBUTOR","body":"Hi @LuisAlvelaMendes, thank you for your interest in this issue. The idea is that we want to remove all the FIPS 140 related checks (the ones you have correctly identified above) from being [Bootstrap Checks](https://www.elastic.co/guide/en/elasticsearch/reference/master/bootstrap-checks.html) as the FIPS checks are always enforced. `FIPSChecks` will not implement `BootstrapCheck`\r\n\r\nIn the benefit of not duplicating effort, note that I removed the `help_wanted` label a few days ago because I have this on my plate for one of the next minor releases. That said, I haven't actually started working on it yet so if this is something that interests you, I'd gladly work with you to get this merged if you still want to work on it","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/441436580","html_url":"https://github.com/elastic/elasticsearch/issues/34772#issuecomment-441436580","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34772","id":441436580,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTQzNjU4MA==","user":{"login":"LuisAlvelaMendes","id":36206773,"node_id":"MDQ6VXNlcjM2MjA2Nzcz","avatar_url":"https://avatars3.githubusercontent.com/u/36206773?v=4","gravatar_id":"","url":"https://api.github.com/users/LuisAlvelaMendes","html_url":"https://github.com/LuisAlvelaMendes","followers_url":"https://api.github.com/users/LuisAlvelaMendes/followers","following_url":"https://api.github.com/users/LuisAlvelaMendes/following{/other_user}","gists_url":"https://api.github.com/users/LuisAlvelaMendes/gists{/gist_id}","starred_url":"https://api.github.com/users/LuisAlvelaMendes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LuisAlvelaMendes/subscriptions","organizations_url":"https://api.github.com/users/LuisAlvelaMendes/orgs","repos_url":"https://api.github.com/users/LuisAlvelaMendes/repos","events_url":"https://api.github.com/users/LuisAlvelaMendes/events{/privacy}","received_events_url":"https://api.github.com/users/LuisAlvelaMendes/received_events","type":"User","site_admin":false},"created_at":"2018-11-25T12:22:27Z","updated_at":"2018-11-25T12:22:27Z","author_association":"NONE","body":"@jkakavas I'd like to work with you on this issue, yes,","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/441772221","html_url":"https://github.com/elastic/elasticsearch/issues/34772#issuecomment-441772221","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34772","id":441772221,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTc3MjIyMQ==","user":{"login":"LuisAlvelaMendes","id":36206773,"node_id":"MDQ6VXNlcjM2MjA2Nzcz","avatar_url":"https://avatars3.githubusercontent.com/u/36206773?v=4","gravatar_id":"","url":"https://api.github.com/users/LuisAlvelaMendes","html_url":"https://github.com/LuisAlvelaMendes","followers_url":"https://api.github.com/users/LuisAlvelaMendes/followers","following_url":"https://api.github.com/users/LuisAlvelaMendes/following{/other_user}","gists_url":"https://api.github.com/users/LuisAlvelaMendes/gists{/gist_id}","starred_url":"https://api.github.com/users/LuisAlvelaMendes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LuisAlvelaMendes/subscriptions","organizations_url":"https://api.github.com/users/LuisAlvelaMendes/orgs","repos_url":"https://api.github.com/users/LuisAlvelaMendes/repos","events_url":"https://api.github.com/users/LuisAlvelaMendes/events{/privacy}","received_events_url":"https://api.github.com/users/LuisAlvelaMendes/received_events","type":"User","site_admin":false},"created_at":"2018-11-26T19:44:14Z","updated_at":"2018-11-26T19:44:14Z","author_association":"NONE","body":"@jkakavas I understand now that FIPSChecks will require it's own FIPSInterface - however, my problem is understanding \"BootstrapContext\" better.\r\n\r\nI suppose these FIPS 140 related checks will have to receive a FIPSContext to make decisions on instead of a BootstrapContext - I simply don't understand what the difference between a FIPS context and a Bootstrap one is, won't they both need the settings and metadata of the node?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/444054648","html_url":"https://github.com/elastic/elasticsearch/issues/34772#issuecomment-444054648","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34772","id":444054648,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NDA1NDY0OA==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2018-12-04T10:40:32Z","updated_at":"2018-12-04T10:40:32Z","author_association":"CONTRIBUTOR","body":"Hi @LuisAlvelaMendes , apologies for the late reply. This fell through the cracks of my to-do list. \r\n\r\nThere is a conceptual difference. Bootstrap checks are meant to be enforced only on production mode ( not on development mode ) and thus adding the FIPS checks as Bootstrap checks in the beginning was an abuse of the interface ( as FIPS checks should *always* be enforced ). \r\nYou can make decisions for the FIPS checks by looking at the settings only. \r\n\r\nA fitting place to call the checks is in [`createComponents`](https://github.com/elastic/elasticsearch/blob/8a85b2eadadc2307d30afd24e24c25b6dfb8d298/x-pack/plugin/security/src/main/java/org/elasticsearch/xpack/security/Security.java#L383) of the Security plugin","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/444653067","html_url":"https://github.com/elastic/elasticsearch/issues/34772#issuecomment-444653067","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34772","id":444653067,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NDY1MzA2Nw==","user":{"login":"LuisAlvelaMendes","id":36206773,"node_id":"MDQ6VXNlcjM2MjA2Nzcz","avatar_url":"https://avatars3.githubusercontent.com/u/36206773?v=4","gravatar_id":"","url":"https://api.github.com/users/LuisAlvelaMendes","html_url":"https://github.com/LuisAlvelaMendes","followers_url":"https://api.github.com/users/LuisAlvelaMendes/followers","following_url":"https://api.github.com/users/LuisAlvelaMendes/following{/other_user}","gists_url":"https://api.github.com/users/LuisAlvelaMendes/gists{/gist_id}","starred_url":"https://api.github.com/users/LuisAlvelaMendes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LuisAlvelaMendes/subscriptions","organizations_url":"https://api.github.com/users/LuisAlvelaMendes/orgs","repos_url":"https://api.github.com/users/LuisAlvelaMendes/repos","events_url":"https://api.github.com/users/LuisAlvelaMendes/events{/privacy}","received_events_url":"https://api.github.com/users/LuisAlvelaMendes/received_events","type":"User","site_admin":false},"created_at":"2018-12-05T21:21:09Z","updated_at":"2018-12-05T21:24:59Z","author_association":"NONE","body":"@jkakavas What about the license check? Where it reads:\r\n\r\n License license = LicenseService.getLicense(**context.metaData**);\r\n\r\n if (license != null && ALLOWED_LICENSE_OPERATION_MODES.contains(license.operationMode()) == false) {\r\n          return FIPSCheckResult.failure(\"FIPS mode is only allowed with a Platinum or Trial license\");\r\n} \r\n\r\nDoesn't that require the context's metadata?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/446704951","html_url":"https://github.com/elastic/elasticsearch/issues/34772#issuecomment-446704951","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34772","id":446704951,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NjcwNDk1MQ==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2018-12-12T19:04:22Z","updated_at":"2018-12-12T19:04:22Z","author_association":"CONTRIBUTOR","body":"@LuisAlvelaMendes \r\n\r\nWe can use `getLicenseState()` from `Security.java` to get an `XPackLicenseState` and implement an `isFipsAllowed()` in there","performed_via_github_app":null}]