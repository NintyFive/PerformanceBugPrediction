{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/26790","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26790/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26790/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26790/events","html_url":"https://github.com/elastic/elasticsearch/issues/26790","id":260612421,"node_id":"MDU6SXNzdWUyNjA2MTI0MjE=","number":26790,"title":"[Node-107] disconnected from Loadbalancer due to explicit disconnect call","user":{"login":"ersoyvatansever","id":3853431,"node_id":"MDQ6VXNlcjM4NTM0MzE=","avatar_url":"https://avatars3.githubusercontent.com/u/3853431?v=4","gravatar_id":"","url":"https://api.github.com/users/ersoyvatansever","html_url":"https://github.com/ersoyvatansever","followers_url":"https://api.github.com/users/ersoyvatansever/followers","following_url":"https://api.github.com/users/ersoyvatansever/following{/other_user}","gists_url":"https://api.github.com/users/ersoyvatansever/gists{/gist_id}","starred_url":"https://api.github.com/users/ersoyvatansever/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ersoyvatansever/subscriptions","organizations_url":"https://api.github.com/users/ersoyvatansever/orgs","repos_url":"https://api.github.com/users/ersoyvatansever/repos","events_url":"https://api.github.com/users/ersoyvatansever/events{/privacy}","received_events_url":"https://api.github.com/users/ersoyvatansever/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-09-26T12:53:56Z","updated_at":"2017-09-26T13:30:52Z","closed_at":"2017-09-26T13:28:32Z","author_association":"NONE","active_lock_reason":null,"body":"Using v1.7.4 on 1 cluster 3 data node, 1 master and 1 loadbalancer.\r\nThis issue fires from a week.  I dont know what happend and start to fire this issue.\r\nCan any one \r\n\r\nLOG1 :\r\n[2017-09-26 15:24:06,545][DEBUG][transport.netty          ] [Node-107] disconnecting from [[Loadbalancer][aiZsZddTTG6qK_suRpZlyQ][PENTAv3ELSM16][inet[/xxx:9300]]{data=false, master=false}] due to explicit disconnect call\r\n[2017-09-26 15:24:06,546][TRACE][transport.tracer         ] [Node-107] [1115893][cluster:monitor/nodes/info[n]] received request\r\n[2017-09-26 15:24:06,547][TRACE][transport.tracer         ] [Node-107] [1115893][cluster:monitor/nodes/info[n]] sent response\r\n[2017-09-26 15:24:06,547][TRACE][transport.netty          ] [Node-107] disconnected from [[Loadbalancer][aiZsZddTTG6qK_suRpZlyQ][PENTAv3ELSM16][inet[/xxx:9300]]{data=false, master=false}] due to explicit disconnect call\r\n[2017-09-26 15:24:06,549][TRACE][transport.tracer         ] [Node-107] [254013][internal:discovery/zen/publish] sent response\r\n[2017-09-26 15:24:06,549][TRACE][transport.tracer         ] [Node-107] [61330242][indices:data/read/search[phase/query]] sent response\r\n[2017-09-26 15:24:06,549][TRACE][transport.tracer         ] [Node-107] [61330238][indices:data/read/search[phase/query]] sent response\r\n\r\nLOG2 :\r\n[2017-09-26 00:00:06,675][DEBUG][transport.netty          ] [Loadbalancer] connected to node [[Master-105][c2tvdIkXQICHhRlIgS7_vQ][MasterElastic][inet[/xxx:9300]]{data=false, master=true}]\r\n[2017-09-26 00:00:06,675][DEBUG][discovery.zen.publish    ] [Loadbalancer] received cluster state version 63441\r\n[2017-09-26 00:00:06,675][DEBUG][cluster.service          ] [Loadbalancer] processing [zen-disco-receive(from master [[Master-105][c2tvdIkXQICHhRlIgS7_vQ][MasterElastic][inet[/xxx:9300]]{data=false, master=true}])]: execute\r\n[2017-09-26 00:00:06,675][DEBUG][discovery.zen.fd         ] [Loadbalancer] [master] restarting fault detection against master [[Master-105][c2tvdIkXQICHhRlIgS7_vQ][MasterElastic][inet[/xxx:9300]]{data=false, master=true}], reason [new cluster state received and we are monitoring the wrong master [null]]\r\n[2017-09-26 00:00:06,675][DEBUG][discovery.zen            ] [Loadbalancer] got first state from fresh master [c2tvdIkXQICHhRlIgS7_vQ]\r\n[2017-09-26 00:00:06,675][DEBUG][cluster.service          ] [Loadbalancer] cluster state updated, version [63441], source [zen-disco-receive(from master [[Master-105][c2tvdIkXQICHhRlIgS7_vQ][MasterElastic][inet[/xxx:9300]]{data=false, master=true}])]\r\n[2017-09-26 00:00:06,675][INFO ][cluster.service          ] [Loadbalancer] detected_master [Master-105][c2tvdIkXQICHhRlIgS7_vQ][MasterElastic][inet[/xxx:9300]]{data=false, master=true}, added {[Master-105][c2tvdIkXQICHhRlIgS7_vQ][MasterElastic][inet[/xxx:9300]]{data=false, master=true},}, reason: zen-disco-receive(from master [[Master-105][c2tvdIkXQICHhRlIgS7_vQ][MasterElastic][inet[/xxx:9300]]{data=false, master=true}])\r\n[2017-09-26 00:00:06,675][DEBUG][cluster.service          ] [Loadbalancer] set local cluster state to version 63441\r\n[2017-09-26 00:00:06,675][DEBUG][cluster.service          ] [Loadbalancer] processing [zen-disco-receive(from master [[Master-105][c2tvdIkXQICHhRlIgS7_vQ][MasterElastic][inet[/xxx:9300]]{data=false, master=true}])]: took 1ms done applying updated cluster_state (version: 63441)\r\n[2017-09-26 00:00:06,690][DEBUG][cluster.service          ] [Loadbalancer] processing [finalize_join ([Master-105][c2tvdIkXQICHhRlIgS7_vQ][MasterElastic][inet[/xxx:9300]]{data=false, master=true})]: execute\r\n[2017-09-26 00:00:06,690][DEBUG][cluster.service          ] [Loadbalancer] processing [finalize_join ([Master-105][c2tvdIkXQICHhRlIgS7_vQ][MasterElastic][inet[/xxx:9300]]{data=false, master=true})]: took 0s no change in cluster_state\r\n\r\n\r\n\r\n\r\nHere is my loadbalancer's yml file.\r\n\r\n##################### Elasticsearch Configuration Example #####################\r\n\r\ncluster.name: penta-elasticsearch\r\n\r\nnode.name: \"Node-166\"\r\nindex.routing.allocation.disable_allocation: false\r\n\r\nnode.master: false\r\nnode.data: false\r\n\r\n\r\nindex.refresh_interval: 10s\r\n\r\nindex.number_of_shards: 5\r\n\r\nindex.number_of_replicas: 1\r\n\r\nbootstrap.mlockall: true\r\nnetwork.host: xx.xx.x.xxx\r\n\r\ntransport.tcp.port: 9300\r\n\r\ntransport.tcp.compress: true\r\nhttp.port: 9200\r\n\r\nindex.query.bool.max_clause_count: 1000000\r\n","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}