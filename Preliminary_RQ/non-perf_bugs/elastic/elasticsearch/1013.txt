{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/1013","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1013/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1013/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/1013/events","html_url":"https://github.com/elastic/elasticsearch/issues/1013","id":1034155,"node_id":"MDU6SXNzdWUxMDM0MTU1","number":1013,"title":"org.elasticsearch.index.IndexShardMissingException","user":{"login":"damienbrz","id":229829,"node_id":"MDQ6VXNlcjIyOTgyOQ==","avatar_url":"https://avatars2.githubusercontent.com/u/229829?v=4","gravatar_id":"","url":"https://api.github.com/users/damienbrz","html_url":"https://github.com/damienbrz","followers_url":"https://api.github.com/users/damienbrz/followers","following_url":"https://api.github.com/users/damienbrz/following{/other_user}","gists_url":"https://api.github.com/users/damienbrz/gists{/gist_id}","starred_url":"https://api.github.com/users/damienbrz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/damienbrz/subscriptions","organizations_url":"https://api.github.com/users/damienbrz/orgs","repos_url":"https://api.github.com/users/damienbrz/repos","events_url":"https://api.github.com/users/damienbrz/events{/privacy}","received_events_url":"https://api.github.com/users/damienbrz/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2011-06-10T02:33:14Z","updated_at":"2011-06-10T07:58:05Z","closed_at":"2011-06-10T02:34:57Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\n\nIm just starting with elasticsearch and I have this issue when im importing all the users.\n\nIm trying to import 732 users.\n\n``` ruby\nclass Search < ActiveRecord::Base\n\n  def self.index_users\n    require 'rubygems'\n    require 'yajl/json_gem'\n    require 'tire'\n\n    users = []\n\n    User.all.each do |user|\n      users << {\n        :id => user.id,\n        :first_name => user.first_name,\n        :last_name => user.last_name,\n        :employee_t4 => user.employee_t4,\n        :description => user.description,\n        :shop_id => user.shop_id,\n        :email => user.email,\n        :role_id => user.role_id,\n        :active => user.active\n      }\n    end\n\n    Tire.index 'users' do\n\n      delete\n      create\n\n      import users\n\n      refresh\n\n    end\n  end\nend\n```\n\nAnd i got this error:\n\n``` sh\n[2011-06-10 12:10:35,387][INFO ][cluster.metadata         ] [Veritas] [users] creating index, cause [api], shards [5]/[1], mappings []\n[2011-06-10 12:10:35,613][DEBUG][action.admin.indices.status] [Veritas] [users][4], node[lrOEzptuSEOoxTGJT4n-Sg], [P], s[INITIALIZING]: Failed to execute [org.elasticsearch.action.admin.indices.status.IndicesStatusRequest@7e64eff0]\norg.elasticsearch.index.IndexShardMissingException: [users][4] missing\n    at org.elasticsearch.index.service.InternalIndexService.shardSafe(InternalIndexService.java:161)\n    at org.elasticsearch.action.admin.indices.status.TransportIndicesStatusAction.shardOperation(TransportIndicesStatusAction.java:150)\n    at org.elasticsearch.action.admin.indices.status.TransportIndicesStatusAction.shardOperation(TransportIndicesStatusAction.java:59)\n    at org.elasticsearch.action.support.broadcast.TransportBroadcastOperationAction$AsyncBroadcastAction.performOperation(TransportBroadcastOperationAction.java:238)\n    at org.elasticsearch.action.support.broadcast.TransportBroadcastOperationAction$AsyncBroadcastAction.access$200(TransportBroadcastOperationAction.java:126)\n    at org.elasticsearch.action.support.broadcast.TransportBroadcastOperationAction$AsyncBroadcastAction$1.run(TransportBroadcastOperationAction.java:195)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:680)\n[2011-06-10 12:10:35,808][INFO ][cluster.metadata         ] [Veritas] [users] update_mapping [document] (dynamic)\n```\n\nThe problem is only 10 Users are imported.\n\nAny idea why ?\n\nThanks \n","closed_by":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"performed_via_github_app":null}