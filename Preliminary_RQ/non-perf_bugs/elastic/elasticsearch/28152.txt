{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/28152","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28152/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28152/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28152/events","html_url":"https://github.com/elastic/elasticsearch/issues/28152","id":287079198,"node_id":"MDU6SXNzdWUyODcwNzkxOTg=","number":28152,"title":"Add support for \"unmapped_type\" and \"missing\" options for _geo_distance sorting","user":{"login":"achselschweisz","id":1628348,"node_id":"MDQ6VXNlcjE2MjgzNDg=","avatar_url":"https://avatars1.githubusercontent.com/u/1628348?v=4","gravatar_id":"","url":"https://api.github.com/users/achselschweisz","html_url":"https://github.com/achselschweisz","followers_url":"https://api.github.com/users/achselschweisz/followers","following_url":"https://api.github.com/users/achselschweisz/following{/other_user}","gists_url":"https://api.github.com/users/achselschweisz/gists{/gist_id}","starred_url":"https://api.github.com/users/achselschweisz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/achselschweisz/subscriptions","organizations_url":"https://api.github.com/users/achselschweisz/orgs","repos_url":"https://api.github.com/users/achselschweisz/repos","events_url":"https://api.github.com/users/achselschweisz/events{/privacy}","received_events_url":"https://api.github.com/users/achselschweisz/received_events","type":"User","site_admin":false},"labels":[{"id":141079527,"node_id":"MDU6TGFiZWwxNDEwNzk1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Analytics/Geo","name":":Analytics/Geo","color":"0e8a16","default":false,"description":"Indexing, search aggregations of geo points and shapes"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"assignees":[{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2018-01-09T12:55:10Z","updated_at":"2018-06-07T15:11:14Z","closed_at":"2018-06-07T15:11:14Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the feature**:  Support \"unmapped_type\" and \"missing\" options for _geo_distance sorting\r\n\r\nCurrently it is not possible to add said keywords to a _geo_distance search, internally only the FieldSortBuilder seems to support this.\r\n\r\nNormally one can use the \"unmapped_type\" and \"missing\" options for sorting on fields which might not be present in all documents / indexes (e.g. when searching via an index alias).\r\n\r\nHowever, the feature is NOT supported in the GeoDistanceSortBuilder, hence a search will not return any results for documents which do not have a geo_point field to sort on.\r\n\r\n---------------------------------------------------------------------------------------\r\nON A SIDENOTE (my $0.2)\r\n\r\nIn general I do think that the sorting behaviour is not implemented correctly. \r\nWhy?\r\nSearching and sorting are two different things. Documents which are found, but do not match the given sorting criteria should simply be returned at the \"bottom\" of the (sorted) list.\r\n\r\nElasticsearch however, REMOVES them from the search results. IMO this is simply wrong.\r\n\r\nHence either the relevant keywords should be supported by said SortBuilder OR the implementation must be \"corrected\" :-)\r\n\r\nCheerio!\r\n","closed_by":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"performed_via_github_app":null}