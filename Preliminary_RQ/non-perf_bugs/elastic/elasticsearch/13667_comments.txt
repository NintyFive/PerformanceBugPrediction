[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/141903363","html_url":"https://github.com/elastic/elasticsearch/issues/13667#issuecomment-141903363","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13667","id":141903363,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MTkwMzM2Mw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-09-21T08:04:48Z","updated_at":"2015-09-21T08:04:48Z","author_association":"CONTRIBUTOR","body":"> Indexes with \"number_of_replicas\": 2 will not place one shard per zone, rather place a couple of replicas (?even primary?) in the spot zone. \n\nI've tried this out on 1.7.1 and 2.0.0-beta2 and it behaves correctly.  At least one shard copy is placed in each zone, and a second copy is only placed in a zone if more replicas than zones are specified. A primary could well be placed in the spot zone, but that shouldn't be an issue.\n\nCan you provide some more info about that you're seeing, because it seems to be working correctly to me.\n\nThat said, awareness should really only be used with zones of the same size (see https://github.com/elastic/elasticsearch/issues/12431) and having shard copies on mixed box types drags the performance of the expensive boxes down to the level of the cheap boxes.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/141979178","html_url":"https://github.com/elastic/elasticsearch/issues/13667#issuecomment-141979178","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13667","id":141979178,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MTk3OTE3OA==","user":{"login":"klahnakoski","id":2334429,"node_id":"MDQ6VXNlcjIzMzQ0Mjk=","avatar_url":"https://avatars3.githubusercontent.com/u/2334429?v=4","gravatar_id":"","url":"https://api.github.com/users/klahnakoski","html_url":"https://github.com/klahnakoski","followers_url":"https://api.github.com/users/klahnakoski/followers","following_url":"https://api.github.com/users/klahnakoski/following{/other_user}","gists_url":"https://api.github.com/users/klahnakoski/gists{/gist_id}","starred_url":"https://api.github.com/users/klahnakoski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/klahnakoski/subscriptions","organizations_url":"https://api.github.com/users/klahnakoski/orgs","repos_url":"https://api.github.com/users/klahnakoski/repos","events_url":"https://api.github.com/users/klahnakoski/events{/privacy}","received_events_url":"https://api.github.com/users/klahnakoski/received_events","type":"User","site_admin":false},"created_at":"2015-09-21T13:34:36Z","updated_at":"2015-09-21T13:34:36Z","author_association":"NONE","body":"Thank you for looking into this.  \n\nI looked at #12431, I can not say I understand the code completely, but it may be the cause:  I did bring the node in the `secondary` zone down for a while.  During that downtime, the both replicas moved to the `spot` zone.  When the `secondary` was brought back up, it never got back its replicas.  But now I am speculating.\n\nThank you for noting the degradation issues I may experience when it comes to cheap nodes:  I am aware of this; the 'cheap' nodes actually have more memory, more CPU, and more space than may \"expensive\" nodes; they are just unreliable.\n\nLast night, I had turned off all machines in the `spot` zone, and reduced to one replica so I would have quorum, and bulk indexing would proceed.  I have turned the `spot` machines back on, and set replicas to 2, but it will be a few hours for the shards to copy over, and then I can get back to you.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/141982487","html_url":"https://github.com/elastic/elasticsearch/issues/13667#issuecomment-141982487","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13667","id":141982487,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MTk4MjQ4Nw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-09-21T13:44:08Z","updated_at":"2015-09-21T13:44:08Z","author_association":"CONTRIBUTOR","body":"> During that downtime, the both replicas moved to the spot zone. When the secondary was brought back up, it never got back its replicas. \n\nThis sounds like you were using ordinary awareness instead of forced awareness.  With forced awareness, the shards in the secondary zone become unassigned, rather than being assigned to a different zone.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/142004273","html_url":"https://github.com/elastic/elasticsearch/issues/13667#issuecomment-142004273","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13667","id":142004273,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MjAwNDI3Mw==","user":{"login":"klahnakoski","id":2334429,"node_id":"MDQ6VXNlcjIzMzQ0Mjk=","avatar_url":"https://avatars3.githubusercontent.com/u/2334429?v=4","gravatar_id":"","url":"https://api.github.com/users/klahnakoski","html_url":"https://github.com/klahnakoski","followers_url":"https://api.github.com/users/klahnakoski/followers","following_url":"https://api.github.com/users/klahnakoski/following{/other_user}","gists_url":"https://api.github.com/users/klahnakoski/gists{/gist_id}","starred_url":"https://api.github.com/users/klahnakoski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/klahnakoski/subscriptions","organizations_url":"https://api.github.com/users/klahnakoski/orgs","repos_url":"https://api.github.com/users/klahnakoski/repos","events_url":"https://api.github.com/users/klahnakoski/events{/privacy}","received_events_url":"https://api.github.com/users/klahnakoski/received_events","type":"User","site_admin":false},"created_at":"2015-09-21T14:46:47Z","updated_at":"2015-09-21T14:46:47Z","author_association":"NONE","body":"I _think_ I am using forced awareness (as per my config file)\n\n```\ncluster.routing.allocation.awareness.force.zone.values: primary,secondary,spot\n```\n\nI continue to look at #12431, and I do not know how it manages balance properly when it never calculates/uses the quorum size.   Looking at [1], I am more convinced it is the cause:  When `secondary` is missing we have:\n\n```\nshardCount==5\naveragePerAttribute==1\nleftoverPerAttribute==1\ncurrentNodeCount==2\n```\n\nWhich allocates a shard to the spot zone.  When `secondary` comes back I have \n\n```\nshardCount==6\naveragePerAttribute==2\nleftoverPerAttribute==0\ncurrentNodeCount==3\n```\n\nwhich prevents allocation to the `secondary` node.\n\nI am still waiting for my replicas to recover.\n\n[1] https://github.com/elastic/elasticsearch/blob/c57951780e0132c50b723d78038ab73e10d176c5/core/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AwarenessAllocationDecider.java#L222\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/142094480","html_url":"https://github.com/elastic/elasticsearch/issues/13667#issuecomment-142094480","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13667","id":142094480,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MjA5NDQ4MA==","user":{"login":"klahnakoski","id":2334429,"node_id":"MDQ6VXNlcjIzMzQ0Mjk=","avatar_url":"https://avatars3.githubusercontent.com/u/2334429?v=4","gravatar_id":"","url":"https://api.github.com/users/klahnakoski","html_url":"https://github.com/klahnakoski","followers_url":"https://api.github.com/users/klahnakoski/followers","following_url":"https://api.github.com/users/klahnakoski/following{/other_user}","gists_url":"https://api.github.com/users/klahnakoski/gists{/gist_id}","starred_url":"https://api.github.com/users/klahnakoski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/klahnakoski/subscriptions","organizations_url":"https://api.github.com/users/klahnakoski/orgs","repos_url":"https://api.github.com/users/klahnakoski/repos","events_url":"https://api.github.com/users/klahnakoski/events{/privacy}","received_events_url":"https://api.github.com/users/klahnakoski/received_events","type":"User","site_admin":false},"created_at":"2015-09-21T20:06:16Z","updated_at":"2015-09-21T20:06:16Z","author_association":"NONE","body":"I am having a tough time replicating the issue.  The large index takes too long.  And the small indexes behave just fine.   I am still looking for the sequence of actions that cause the unbalance, and will get back to you when I can, or I have given up.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/142143912","html_url":"https://github.com/elastic/elasticsearch/issues/13667#issuecomment-142143912","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13667","id":142143912,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MjE0MzkxMg==","user":{"login":"klahnakoski","id":2334429,"node_id":"MDQ6VXNlcjIzMzQ0Mjk=","avatar_url":"https://avatars3.githubusercontent.com/u/2334429?v=4","gravatar_id":"","url":"https://api.github.com/users/klahnakoski","html_url":"https://github.com/klahnakoski","followers_url":"https://api.github.com/users/klahnakoski/followers","following_url":"https://api.github.com/users/klahnakoski/following{/other_user}","gists_url":"https://api.github.com/users/klahnakoski/gists{/gist_id}","starred_url":"https://api.github.com/users/klahnakoski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/klahnakoski/subscriptions","organizations_url":"https://api.github.com/users/klahnakoski/orgs","repos_url":"https://api.github.com/users/klahnakoski/repos","events_url":"https://api.github.com/users/klahnakoski/events{/privacy}","received_events_url":"https://api.github.com/users/klahnakoski/received_events","type":"User","site_admin":false},"created_at":"2015-09-22T00:14:53Z","updated_at":"2015-09-22T11:55:26Z","author_association":"NONE","body":"I gave up on `unittest` where I saw the problem, and I set {\"index.routing.allocation.exclude.zone\" : \"spot\"} to pevent it from moving shards \n\nFor the `saved_queries`, I set the replicas to 3\n\n![resumed secondary](https://cloud.githubusercontent.com/assets/2334429/10007178/2c869192-6091-11e5-9c8b-d9ac1cc70d8d.png)\n\nThen I set the replicas back down to 2.  I would expect the shards to properly balance, like they usually do, but this time they do not.\n\n![replicas back to 2](https://cloud.githubusercontent.com/assets/2334429/10007191/424d9f3e-6091-11e5-96a0-9f23d5c3c266.png)\n\nand you see the two replicas stick to the `spot` zone.  Now I kill the spot instances\n\n![no spot](https://cloud.githubusercontent.com/assets/2334429/10007293/09bf62e6-6092-11e5-9f48-9e6ccb13690b.png)\n\nThe problem now is that there is no quorum, and I can not index more documents.  Also, this state seems to persist; the two replicas never come back, even after a long while.\n\n![after a while](https://cloud.githubusercontent.com/assets/2334429/10008437/8214a4ea-609c-11e5-8de8-d446dd422e36.png)\n\nAssuming a sequence like this does not loose all copies of a shard, I can fix this by setting replicas to zero, and then back to the value I wish.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/142196234","html_url":"https://github.com/elastic/elasticsearch/issues/13667#issuecomment-142196234","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13667","id":142196234,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MjE5NjIzNA==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-09-22T06:54:39Z","updated_at":"2015-09-22T06:54:39Z","author_association":"MEMBER","body":"I think I understand what’s going on. The forced awareness and the exclude rules are conflicting. The forced awareness tells ES it must spread out evenly across the awareness values, using the spot zone and not assigning shards if the spot zone is not there. The exclude rules prevents the spot zone from being used. The reason why this only kicks in once the shard no is reduce and then increased again is that exclude rules will try to move existing shards but will not unassigned them if that’s impossible. Once the replica count is decreased and increase the exclude does prevent the allocation of the _new_ shards on the spot zone, and the forced awareness prevents them from being allocated anywhere else. Makes sense?\n\n> On 22 Sep 2015, at 02:15, Kyle Lahnakoski notifications@github.com wrote:\n> \n> I gave up on unittest where I saw the problem, and I set {\"index.routing.allocation.exclude.zone\" : \"spot\"} to pevent it from moving shards\n> \n> For the saved_queries, I set the replicas to 3\n> \n> Then I set the replicas back down to 2. I would expect the shards to properly balance, like they usually do, but this time they do not.\n> \n> and you see the two replicas stick to the spot zone. Now I kill the spot instances\n> \n> The problem now is that there is no quorum, and I can not index more documents. Also, this state seems to persist; the two replicas never come back, even after a long while.\n> \n> Assuming a sequence like this does not loose all copies of a shard, I can fix this by setting replicas to zero, and then back to the value I wish.\n> \n> —\n> Reply to this email directly or view it on GitHub.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/142265123","html_url":"https://github.com/elastic/elasticsearch/issues/13667#issuecomment-142265123","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13667","id":142265123,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MjI2NTEyMw==","user":{"login":"klahnakoski","id":2334429,"node_id":"MDQ6VXNlcjIzMzQ0Mjk=","avatar_url":"https://avatars3.githubusercontent.com/u/2334429?v=4","gravatar_id":"","url":"https://api.github.com/users/klahnakoski","html_url":"https://github.com/klahnakoski","followers_url":"https://api.github.com/users/klahnakoski/followers","following_url":"https://api.github.com/users/klahnakoski/following{/other_user}","gists_url":"https://api.github.com/users/klahnakoski/gists{/gist_id}","starred_url":"https://api.github.com/users/klahnakoski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/klahnakoski/subscriptions","organizations_url":"https://api.github.com/users/klahnakoski/orgs","repos_url":"https://api.github.com/users/klahnakoski/repos","events_url":"https://api.github.com/users/klahnakoski/events{/privacy}","received_events_url":"https://api.github.com/users/klahnakoski/received_events","type":"User","site_admin":false},"created_at":"2015-09-22T11:55:02Z","updated_at":"2015-09-22T11:55:02Z","author_association":"NONE","body":"Sorry for the confusion:  Only the `unittest` index has an exclude rule, but my comment was about the lifecycle of the `saved_queries` index.   I only mentioned `unittest` to explain why the shards where not moving over time. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/142294833","html_url":"https://github.com/elastic/elasticsearch/issues/13667#issuecomment-142294833","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13667","id":142294833,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MjI5NDgzMw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-09-22T13:50:34Z","updated_at":"2015-09-22T13:50:34Z","author_association":"CONTRIBUTOR","body":"@klahnakoski try using the cluster reroute api to assign a replica for shard 0 to the secondary node, with the \"explain\" parameter.  That'll tell us why Elasticsearch doesn't want to assign the shard to that node.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/142307676","html_url":"https://github.com/elastic/elasticsearch/issues/13667#issuecomment-142307676","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13667","id":142307676,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MjMwNzY3Ng==","user":{"login":"klahnakoski","id":2334429,"node_id":"MDQ6VXNlcjIzMzQ0Mjk=","avatar_url":"https://avatars3.githubusercontent.com/u/2334429?v=4","gravatar_id":"","url":"https://api.github.com/users/klahnakoski","html_url":"https://github.com/klahnakoski","followers_url":"https://api.github.com/users/klahnakoski/followers","following_url":"https://api.github.com/users/klahnakoski/following{/other_user}","gists_url":"https://api.github.com/users/klahnakoski/gists{/gist_id}","starred_url":"https://api.github.com/users/klahnakoski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/klahnakoski/subscriptions","organizations_url":"https://api.github.com/users/klahnakoski/orgs","repos_url":"https://api.github.com/users/klahnakoski/repos","events_url":"https://api.github.com/users/klahnakoski/events{/privacy}","received_events_url":"https://api.github.com/users/klahnakoski/received_events","type":"User","site_admin":false},"created_at":"2015-09-22T14:38:46Z","updated_at":"2015-09-22T14:38:46Z","author_association":"NONE","body":"Where does the \"explain\" parameter go?  As a sibling property to \"command\"?  or sibling of \"allocate\"? or sibling of \"index\"?   [1] is vague.\n\n[1]https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-reroute.html\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/142357650","html_url":"https://github.com/elastic/elasticsearch/issues/13667#issuecomment-142357650","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13667","id":142357650,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MjM1NzY1MA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-09-22T17:34:50Z","updated_at":"2015-09-22T17:34:50Z","author_association":"CONTRIBUTOR","body":"This should work:\n\n```\nPOST _cluster/reroute?explain\n{\n  \"commands\": [\n    {\n      \"allocate\": {\n        \"index\": \"saved_queries20150510_160318\",\n        \"shard\": 0,\n        \"node\": \"secondary\"\n      }\n    }\n  ]\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/142476848","html_url":"https://github.com/elastic/elasticsearch/issues/13667#issuecomment-142476848","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13667","id":142476848,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MjQ3Njg0OA==","user":{"login":"klahnakoski","id":2334429,"node_id":"MDQ6VXNlcjIzMzQ0Mjk=","avatar_url":"https://avatars3.githubusercontent.com/u/2334429?v=4","gravatar_id":"","url":"https://api.github.com/users/klahnakoski","html_url":"https://github.com/klahnakoski","followers_url":"https://api.github.com/users/klahnakoski/followers","following_url":"https://api.github.com/users/klahnakoski/following{/other_user}","gists_url":"https://api.github.com/users/klahnakoski/gists{/gist_id}","starred_url":"https://api.github.com/users/klahnakoski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/klahnakoski/subscriptions","organizations_url":"https://api.github.com/users/klahnakoski/orgs","repos_url":"https://api.github.com/users/klahnakoski/repos","events_url":"https://api.github.com/users/klahnakoski/events{/privacy}","received_events_url":"https://api.github.com/users/klahnakoski/received_events","type":"User","site_admin":false},"created_at":"2015-09-23T02:59:47Z","updated_at":"2015-09-23T02:59:47Z","author_association":"NONE","body":"Sorry for the delay, it took a while for me to get back to the mis-allocated state.  When I ran the command, the shard moved back to the secondary.  I have a copy of the _explain_, but it does not have any complaints in it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/146315877","html_url":"https://github.com/elastic/elasticsearch/issues/13667#issuecomment-146315877","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13667","id":146315877,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NjMxNTg3Nw==","user":{"login":"nikonyrh","id":1690501,"node_id":"MDQ6VXNlcjE2OTA1MDE=","avatar_url":"https://avatars0.githubusercontent.com/u/1690501?v=4","gravatar_id":"","url":"https://api.github.com/users/nikonyrh","html_url":"https://github.com/nikonyrh","followers_url":"https://api.github.com/users/nikonyrh/followers","following_url":"https://api.github.com/users/nikonyrh/following{/other_user}","gists_url":"https://api.github.com/users/nikonyrh/gists{/gist_id}","starred_url":"https://api.github.com/users/nikonyrh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nikonyrh/subscriptions","organizations_url":"https://api.github.com/users/nikonyrh/orgs","repos_url":"https://api.github.com/users/nikonyrh/repos","events_url":"https://api.github.com/users/nikonyrh/events{/privacy}","received_events_url":"https://api.github.com/users/nikonyrh/received_events","type":"User","site_admin":false},"created_at":"2015-10-07T20:17:28Z","updated_at":"2015-10-07T20:48:40Z","author_association":"NONE","body":"I have an other scenario (if it is too different maybe a new issue or the mailing list would be more suitable?), help or links to documentation would be greatly appreciated.\n\nI have a few hundred GB of indexes on my \"production\" node (just one machine in the cluster as it is for my hobby projects). I am trying to run benchmarks for five of the indexes, each of which is about 18 GB in 4 shards. I would like to test how much faster queries and aggregations I would get by joining my gaming laptop to the cluster but I don't want it to receive any master shards.\n\nIn my understanding I would lose data if  the only existing shard (at the moment all indexes have zero replicas) is transferred to the laptop, I stop that node and delete the data folder. Am I correct? New documents are constantly being indexed to other indexed which aren't part of this experiment.\n\nI thought I could set \"node.master\" to false to block primary shards being transferred to the node but clearly this isn't the case, transferring starts immediately when the laptop joins the cluster.\n\nSimply put: how do I prevent laptop node from receiving primary shards? I only want to transfer replica shards to the laptop and have all primary shards staying safely on the current master node.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/146522701","html_url":"https://github.com/elastic/elasticsearch/issues/13667#issuecomment-146522701","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13667","id":146522701,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NjUyMjcwMQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-10-08T12:27:29Z","updated_at":"2015-10-08T12:27:29Z","author_association":"CONTRIBUTOR","body":"@nikonyrh please ask questions like these in the forum: https://discuss.elastic.co/\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/374539218","html_url":"https://github.com/elastic/elasticsearch/issues/13667#issuecomment-374539218","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13667","id":374539218,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NDUzOTIxOA==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2018-03-20T09:59:08Z","updated_at":"2018-03-20T09:59:08Z","author_association":"CONTRIBUTOR","body":"This issue hasn't seen any activity in quite a long time, and seems to be about a fairly specialised situation. We prefer to close this issue as a clear indication that we are not going to work on this at this time. We are always open to reconsidering this in the future based on compelling feedback; despite this issue being closed please feel free to leave feedback (including +1s).","performed_via_github_app":null}]