{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/16224","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16224/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16224/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16224/events","html_url":"https://github.com/elastic/elasticsearch/issues/16224","id":128798975,"node_id":"MDU6SXNzdWUxMjg3OTg5NzU=","number":16224,"title":"Elasticsearch get stuck while indexing a few record","user":{"login":"dam0vm3nt","id":2409466,"node_id":"MDQ6VXNlcjI0MDk0NjY=","avatar_url":"https://avatars1.githubusercontent.com/u/2409466?v=4","gravatar_id":"","url":"https://api.github.com/users/dam0vm3nt","html_url":"https://github.com/dam0vm3nt","followers_url":"https://api.github.com/users/dam0vm3nt/followers","following_url":"https://api.github.com/users/dam0vm3nt/following{/other_user}","gists_url":"https://api.github.com/users/dam0vm3nt/gists{/gist_id}","starred_url":"https://api.github.com/users/dam0vm3nt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dam0vm3nt/subscriptions","organizations_url":"https://api.github.com/users/dam0vm3nt/orgs","repos_url":"https://api.github.com/users/dam0vm3nt/repos","events_url":"https://api.github.com/users/dam0vm3nt/events{/privacy}","received_events_url":"https://api.github.com/users/dam0vm3nt/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2016-01-26T11:52:34Z","updated_at":"2016-03-01T08:57:12Z","closed_at":"2016-01-26T12:13:47Z","author_association":"NONE","active_lock_reason":null,"body":"I have an embedded instance of an `elasticsearch` node (no tcp) used to provide a fast indexed search engine on a big and complex relational database.\n\nThe index is kept aligned with the db by a background thread (this is a very common usage pattern for ES).\n\nThe problem is that after a while we start seeing exception like the following, and we have to stop and restart the server to make it work again:\n\n```\nCaused by: EsRejectedExecutionException[rejected execution of org.elasticsearch.action.support.replication.TransportReplicationAction$PrimaryPhase$1@1133ea1 on EsThreadPoolExecutor[index, queue capacity = 200, org.elasticsearch.common.util.concurrent.EsThreadPoolExecutor@1ff3ea[Running, pool size = 2, active threads = 2, queued tasks = 200, completed tasks = 5]]]\nat org.elasticsearch.common.util.concurrent.EsAbortPolicy.rejectedExecution(EsAbortPolicy.java:50)\nat java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:823)\nat java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1369)\nat org.elasticsearch.common.util.concurrent.EsThreadPoolExecutor.execute(EsThreadPoolExecutor.java:85)\nat org.elasticsearch.action.support.replication.TransportReplicationAction$PrimaryPhase.routeRequestOrPerformLocally(TransportReplicationAction.java:444)\nat org.elasticsearch.action.support.replication.TransportReplicationAction$PrimaryPhase.doRun(TransportReplicationAction.java:386)\nat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\nat org.elasticsearch.action.support.replication.TransportReplicationAction.doExecute(TransportReplicationAction.java:120)\nat org.elasticsearch.action.index.TransportIndexAction.innerExecute(TransportIndexAction.java:135)\nat org.elasticsearch.action.index.TransportIndexAction.doExecute(TransportIndexAction.java:119)\nat org.elasticsearch.action.index.TransportIndexAction.doExecute(TransportIndexAction.java:66)\nat org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:70)\nat org.elasticsearch.client.node.NodeClient.doExecute(NodeClient.java:58)\n```\n\nNo other exception are visibile in the logs except this one. Seams like something il locked inside ES and when it reaches the fatal number of 200 stuck \"things\" it will stop working.\n\nElastic search is version : 2.1.1\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}