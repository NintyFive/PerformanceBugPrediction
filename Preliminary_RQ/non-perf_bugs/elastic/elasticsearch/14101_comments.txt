[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/147971331","html_url":"https://github.com/elastic/elasticsearch/issues/14101#issuecomment-147971331","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14101","id":147971331,"node_id":"MDEyOklzc3VlQ29tbWVudDE0Nzk3MTMzMQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-10-14T08:22:21Z","updated_at":"2015-10-14T08:22:21Z","author_association":"CONTRIBUTOR","body":"@colings86 could you comment on this please?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148011627","html_url":"https://github.com/elastic/elasticsearch/issues/14101#issuecomment-148011627","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14101","id":148011627,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODAxMTYyNw==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2015-10-14T10:47:28Z","updated_at":"2015-10-14T10:47:28Z","author_association":"MEMBER","body":"In order to be able to use an aggregation for sorting the terms aggregation it must currently be a numeric metric aggregation. Pipeline Aggregations are a different family of aggregations than the Metric Aggregations and cannot be used for sorting. You couldn't sort using a Pipeline aggregation because they are only executed in the reduce phase on the coordinating node and so you do not have the information on the shard in order to be able to sort the shards buckets to pick the top N to send to the coordinating node.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148037055","html_url":"https://github.com/elastic/elasticsearch/issues/14101#issuecomment-148037055","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14101","id":148037055,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODAzNzA1NQ==","user":{"login":"bkj","id":6086781,"node_id":"MDQ6VXNlcjYwODY3ODE=","avatar_url":"https://avatars0.githubusercontent.com/u/6086781?v=4","gravatar_id":"","url":"https://api.github.com/users/bkj","html_url":"https://github.com/bkj","followers_url":"https://api.github.com/users/bkj/followers","following_url":"https://api.github.com/users/bkj/following{/other_user}","gists_url":"https://api.github.com/users/bkj/gists{/gist_id}","starred_url":"https://api.github.com/users/bkj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bkj/subscriptions","organizations_url":"https://api.github.com/users/bkj/orgs","repos_url":"https://api.github.com/users/bkj/repos","events_url":"https://api.github.com/users/bkj/events{/privacy}","received_events_url":"https://api.github.com/users/bkj/received_events","type":"User","site_admin":false},"created_at":"2015-10-14T12:40:03Z","updated_at":"2015-10-14T12:40:03Z","author_association":"NONE","body":"Thanks for the answer -- that's sortof what I was guessing.  Do you think it's possible to order the results by using something else?  Like the `scripted_metric` aggregation that allows user defined `map`, `combine`, and `reduce` scripts?  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148296297","html_url":"https://github.com/elastic/elasticsearch/issues/14101#issuecomment-148296297","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14101","id":148296297,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODI5NjI5Nw==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2015-10-15T06:41:16Z","updated_at":"2015-10-15T06:41:16Z","author_association":"MEMBER","body":"Copied from a similar conversation on the Discuss forums here: https://discuss.elastic.co/t/ordering-terms-aggregation-based-on-pipeline-metric/31839/2\n\nThe Scripted Metric Aggregation is part of the Metric Aggregation family but is not a Numeric Metric Aggregation since it returns an arbitrary object. However, there is an issue open in the Elasticsearch repo to add the ability to sort by an attribute of the Scripted Metric Aggregation: https://github.com/elastic/elasticsearch/issues/8486\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148384624","html_url":"https://github.com/elastic/elasticsearch/issues/14101#issuecomment-148384624","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14101","id":148384624,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODM4NDYyNA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-10-15T13:23:48Z","updated_at":"2015-10-15T13:23:48Z","author_association":"CONTRIBUTOR","body":"Closing in favour of #8486\n","performed_via_github_app":null}]