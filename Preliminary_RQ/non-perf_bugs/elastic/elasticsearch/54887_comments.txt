[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/610365281","html_url":"https://github.com/elastic/elasticsearch/issues/54887#issuecomment-610365281","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54887","id":610365281,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDM2NTI4MQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-04-07T12:45:51Z","updated_at":"2020-04-07T12:45:51Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed (:Distributed/Task Management)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/615351627","html_url":"https://github.com/elastic/elasticsearch/issues/54887#issuecomment-615351627","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54887","id":615351627,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNTM1MTYyNw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-04-17T16:48:07Z","updated_at":"2020-04-17T16:48:07Z","author_association":"COLLABORATOR","body":"Pinging @elastic/ml-core (:ml)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/615351724","html_url":"https://github.com/elastic/elasticsearch/issues/54887#issuecomment-615351724","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54887","id":615351724,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNTM1MTcyNA==","user":{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false},"created_at":"2020-04-17T16:48:19Z","updated_at":"2020-04-17T16:54:36Z","author_association":"MEMBER","body":"> [2020-04-07T05:23:07,037][WARN ][o.e.x.s.a.AuthorizationService] [v8.0.0-1] denying access as action [internal:admin/tasks/ban] is not an index or cluster action\r\n\r\nI took a look at the failure. The warning was logged when we were sending unban requests; thus, it should not be the cause of the failure. I have integrated https://github.com/elastic/elasticsearch/pull/55404 to make sure that unban requests will be sent in the right context. \r\n\r\n@droberts195 Would you like to continue investigating this failure, or let's close and wait for the next occurrence? I have removed my assignment and updated the label as I think the task framework issue is resolved. Thank you for reporting this :).\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/616070738","html_url":"https://github.com/elastic/elasticsearch/issues/54887#issuecomment-616070738","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54887","id":616070738,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNjA3MDczOA==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2020-04-19T07:58:50Z","updated_at":"2020-04-19T07:58:50Z","author_association":"CONTRIBUTOR","body":"OK, I think the ML problem is probably that we need to wait for indices to have their replicas allocated before upgrading during the rolling upgrade tests.  There's a message in the log of this test `Updated analytics task state to [failed] with reason [all shards failed]`.  This happens in the mixed cluster.  So I guess what happened is that the old cluster part of the ML test that failed was randomly selected to go last in the old cluster, it created an index, then the node that the primary was allocated to got killed for the rolling upgrade, then in the mixed cluster that index was completely lost.  We have had this problem in other tests in the past and have solved it by waiting for green status on all indices that must survive rolling upgrade in the old cluster tests so that we can be sure they have both primary and replica allocated before a node is killed.","performed_via_github_app":null}]