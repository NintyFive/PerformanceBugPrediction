{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/11781","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11781/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11781/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11781/events","html_url":"https://github.com/elastic/elasticsearch/issues/11781","id":89622606,"node_id":"MDU6SXNzdWU4OTYyMjYwNg==","number":11781,"title":"Provide warning in log files when shards cannot be allocated due to version differences","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"labels":[{"id":836504707,"node_id":"MDU6TGFiZWw4MzY1MDQ3MDc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Distributed","name":":Distributed/Distributed","color":"0e8a16","default":false,"description":"A catch all label for anything in the Distributed Area. If you aren't sure, use this one."},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2015-06-19T17:54:35Z","updated_at":"2018-02-13T19:28:17Z","closed_at":"2015-12-04T14:42:02Z","author_association":"MEMBER","active_lock_reason":null,"body":"This is related to https://github.com/elastic/elasticsearch/issues/9471 previously filed.\n\nThis is to simulate a condition during rolling restart upgrade.  When performing rolling restart upgrade and there are nodes in the cluster running an older version (eg. 1.4, node1 below) and a newer version (eg. 1.5, node_name below).  If new indices are created repeatedly during this time, some of the replica shards can become unassigned (expected).  \n\n![image](https://cloud.githubusercontent.com/assets/7216393/8259654/faedf854-1672-11e5-9949-57dc8dc4b70a.png)\n\nAnd a reroute command (if you attempt to allocate the replicas manually: https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-reroute.html) will return the following intuitive explanation:\n\n``` json\n            {\n               \"decider\": \"node_version\",\n               \"decision\": \"NO\",\n               \"explanation\": \"target node version [1.4.2] is older than source node version [1.5.0]\"\n            },\n```\n\nThis is great, except that the administrator has no way of telling from the logs unless they go and try to run the reroute command with explain directly because we don't appear to be logging anything into the log files indicating the reason (not even at cluster.service: TRACE level).\n\nThis is a request to provide this information right at the INFO or WARN level so that the admins will know that there is not enough (newer verison, eg. 1.5.0) to allocate those replicas at that point in time.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}