{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/42001","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42001/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42001/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42001/events","html_url":"https://github.com/elastic/elasticsearch/issues/42001","id":442156729,"node_id":"MDU6SXNzdWU0NDIxNTY3Mjk=","number":42001,"title":"Default search.max_buckets setting blocking Elasticsearch monitoring to load nodes data","user":{"login":"jehutywong","id":13827736,"node_id":"MDQ6VXNlcjEzODI3NzM2","avatar_url":"https://avatars1.githubusercontent.com/u/13827736?v=4","gravatar_id":"","url":"https://api.github.com/users/jehutywong","html_url":"https://github.com/jehutywong","followers_url":"https://api.github.com/users/jehutywong/followers","following_url":"https://api.github.com/users/jehutywong/following{/other_user}","gists_url":"https://api.github.com/users/jehutywong/gists{/gist_id}","starred_url":"https://api.github.com/users/jehutywong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jehutywong/subscriptions","organizations_url":"https://api.github.com/users/jehutywong/orgs","repos_url":"https://api.github.com/users/jehutywong/repos","events_url":"https://api.github.com/users/jehutywong/events{/privacy}","received_events_url":"https://api.github.com/users/jehutywong/received_events","type":"User","site_admin":false},"labels":[{"id":912834056,"node_id":"MDU6TGFiZWw5MTI4MzQwNTY=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Monitoring","name":":Core/Features/Monitoring","color":"0e8a16","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-05-09T10:08:24Z","updated_at":"2019-05-22T14:47:05Z","closed_at":"2019-05-22T14:47:05Z","author_association":"NONE","active_lock_reason":null,"body":"\r\n<!-- Bug report -->\r\n\r\nElasticsearch Version: 7.0.1\r\nKibana Version: 7.0.1\r\n\r\n**Plugins installed**: []\r\n\r\nJDK 8\r\n\r\n**OS version** (`uname -a` if on a Unix-like system):\r\nCentos 7 x86_64\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nIn Kibana -> monitoring-> nodes, the table list show \"No items found\", other views in monitoring work. It turns out that the default 10000 search.max_buckets setting is blocking the list to load.\r\n\r\nupdated limit to 20000 even don;t enough. 30000 works for me\r\n\r\n**Steps to reproduce**:\r\n\r\nPlease include a *minimal* but *complete* recreation of the problem, including\r\n(e.g.) index creation, mappings, settings, query etc.  The easier you make for\r\nus to reproduce it, the more likely that somebody will take the time to look at it.\r\n\r\n 1. i have 56 nodes in the cluster\r\n 2. go to Kibana -> monitoring-> nodes, you will see \"No items found\"\r\n\r\n**Provide logs (if relevant)**:\r\nsample log:\r\nCaused by: org.elasticsearch.search.aggregations.MultiBucketConsumerService$TooManyBucketsException: Trying to create too many buckets. Must be less than or equal to: [10000] but was [10016]. This limit can be set by changing the [search.max_buckets] cluster level setting.\r\n\r\nReference:\r\nhttps://discuss.elastic.co/t/elasticsearch-monitoring-no-data-in-nodes-view/180104","closed_by":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"performed_via_github_app":null}