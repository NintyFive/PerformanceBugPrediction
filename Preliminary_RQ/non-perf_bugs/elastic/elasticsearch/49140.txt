{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/49140","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49140/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49140/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49140/events","html_url":"https://github.com/elastic/elasticsearch/issues/49140","id":523336408,"node_id":"MDU6SXNzdWU1MjMzMzY0MDg=","number":49140,"title":"Memory estimation endpoint returns \"0\" for non-empty dataset.","user":{"login":"przemekwitek","id":19312454,"node_id":"MDQ6VXNlcjE5MzEyNDU0","avatar_url":"https://avatars3.githubusercontent.com/u/19312454?v=4","gravatar_id":"","url":"https://api.github.com/users/przemekwitek","html_url":"https://github.com/przemekwitek","followers_url":"https://api.github.com/users/przemekwitek/followers","following_url":"https://api.github.com/users/przemekwitek/following{/other_user}","gists_url":"https://api.github.com/users/przemekwitek/gists{/gist_id}","starred_url":"https://api.github.com/users/przemekwitek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/przemekwitek/subscriptions","organizations_url":"https://api.github.com/users/przemekwitek/orgs","repos_url":"https://api.github.com/users/przemekwitek/repos","events_url":"https://api.github.com/users/przemekwitek/events{/privacy}","received_events_url":"https://api.github.com/users/przemekwitek/received_events","type":"User","site_admin":false},"labels":[{"id":912833043,"node_id":"MDU6TGFiZWw5MTI4MzMwNDM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:ml","name":":ml","color":"0e8a16","default":false,"description":"Machine learning"}],"state":"closed","locked":false,"assignee":{"login":"przemekwitek","id":19312454,"node_id":"MDQ6VXNlcjE5MzEyNDU0","avatar_url":"https://avatars3.githubusercontent.com/u/19312454?v=4","gravatar_id":"","url":"https://api.github.com/users/przemekwitek","html_url":"https://github.com/przemekwitek","followers_url":"https://api.github.com/users/przemekwitek/followers","following_url":"https://api.github.com/users/przemekwitek/following{/other_user}","gists_url":"https://api.github.com/users/przemekwitek/gists{/gist_id}","starred_url":"https://api.github.com/users/przemekwitek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/przemekwitek/subscriptions","organizations_url":"https://api.github.com/users/przemekwitek/orgs","repos_url":"https://api.github.com/users/przemekwitek/repos","events_url":"https://api.github.com/users/przemekwitek/events{/privacy}","received_events_url":"https://api.github.com/users/przemekwitek/received_events","type":"User","site_admin":false},"assignees":[{"login":"przemekwitek","id":19312454,"node_id":"MDQ6VXNlcjE5MzEyNDU0","avatar_url":"https://avatars3.githubusercontent.com/u/19312454?v=4","gravatar_id":"","url":"https://api.github.com/users/przemekwitek","html_url":"https://github.com/przemekwitek","followers_url":"https://api.github.com/users/przemekwitek/followers","following_url":"https://api.github.com/users/przemekwitek/following{/other_user}","gists_url":"https://api.github.com/users/przemekwitek/gists{/gist_id}","starred_url":"https://api.github.com/users/przemekwitek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/przemekwitek/subscriptions","organizations_url":"https://api.github.com/users/przemekwitek/orgs","repos_url":"https://api.github.com/users/przemekwitek/repos","events_url":"https://api.github.com/users/przemekwitek/events{/privacy}","received_events_url":"https://api.github.com/users/przemekwitek/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2019-11-15T08:50:21Z","updated_at":"2019-11-19T10:20:27Z","closed_at":"2019-11-19T10:20:27Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Dataset: barcelona_accidents\r\n\r\nWith the following request:\r\n```\r\n{\r\n  \"source\": {\r\n    \"index\": \"barcelona_accidents\"\r\n  },\r\n  \"analysis\": {\r\n    \"outlier_detection\": {}\r\n  }\r\n}\r\n```\r\n'_estimate_memory_usage' endpoint returns the following response:\r\n```\r\n{\r\n  \"expected_memory_without_disk\" : \"0\",\r\n  \"expected_memory_with_disk\" : \"0\"\r\n}\r\n```\r\n\r\nApparently problem lies in data extraction, as the following search query produced by data extractor yields no results:\r\n```\r\n{\r\n  \"size\": 0,\r\n  \"query\": {\r\n    \"bool\": {\r\n      \"filter\": [\r\n        {\r\n          \"exists\": {\r\n            \"field\": \"day\",\r\n            \"boost\": 1\r\n          }\r\n        },\r\n        {\r\n          \"exists\": {\r\n            \"field\": \"doc.day\",\r\n            \"boost\": 1\r\n          }\r\n        },\r\n        {\r\n          \"exists\": {\r\n            \"field\": \"doc.hour\",\r\n            \"boost\": 1\r\n          }\r\n        },\r\n        {\r\n          \"exists\": {\r\n            \"field\": \"doc.location.lat\",\r\n            \"boost\": 1\r\n          }\r\n        },\r\n        {\r\n          \"exists\": {\r\n            \"field\": \"doc.location.lon\",\r\n            \"boost\": 1\r\n          }\r\n        },\r\n        {\r\n          \"exists\": {\r\n            \"field\": \"doc.mild_injuries\",\r\n            \"boost\": 1\r\n          }\r\n        },\r\n        {\r\n          \"exists\": {\r\n            \"field\": \"doc.serious_injuries\",\r\n            \"boost\": 1\r\n          }\r\n        },\r\n        {\r\n          \"exists\": {\r\n            \"field\": \"doc.vehicles_involved\",\r\n            \"boost\": 1\r\n          }\r\n        },\r\n        {\r\n          \"exists\": {\r\n            \"field\": \"doc.victims\",\r\n            \"boost\": 1\r\n          }\r\n        },\r\n        {\r\n          \"exists\": {\r\n            \"field\": \"hour\",\r\n            \"boost\": 1\r\n          }\r\n        },\r\n        {\r\n          \"exists\": {\r\n            \"field\": \"mild_injuries\",\r\n            \"boost\": 1\r\n          }\r\n        },\r\n        {\r\n          \"exists\": {\r\n            \"field\": \"serious_injuries\",\r\n            \"boost\": 1\r\n          }\r\n        },\r\n        {\r\n          \"exists\": {\r\n            \"field\": \"vehicles_involved\",\r\n            \"boost\": 1\r\n          }\r\n        },\r\n        {\r\n          \"exists\": {\r\n            \"field\": \"victims\",\r\n            \"boost\": 1\r\n          }\r\n        }\r\n      ],\r\n      \"adjust_pure_negative\": true,\r\n      \"boost\": 1\r\n    }\r\n  },\r\n  \"track_total_hits\": 2147483647\r\n}\r\n```\r\n\r\nIt starts working fine, however if fields without a `doc.` prefix are removed from the query.","closed_by":{"login":"przemekwitek","id":19312454,"node_id":"MDQ6VXNlcjE5MzEyNDU0","avatar_url":"https://avatars3.githubusercontent.com/u/19312454?v=4","gravatar_id":"","url":"https://api.github.com/users/przemekwitek","html_url":"https://github.com/przemekwitek","followers_url":"https://api.github.com/users/przemekwitek/followers","following_url":"https://api.github.com/users/przemekwitek/following{/other_user}","gists_url":"https://api.github.com/users/przemekwitek/gists{/gist_id}","starred_url":"https://api.github.com/users/przemekwitek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/przemekwitek/subscriptions","organizations_url":"https://api.github.com/users/przemekwitek/orgs","repos_url":"https://api.github.com/users/przemekwitek/repos","events_url":"https://api.github.com/users/przemekwitek/events{/privacy}","received_events_url":"https://api.github.com/users/przemekwitek/received_events","type":"User","site_admin":false},"performed_via_github_app":null}