{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/9131","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9131/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9131/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9131/events","html_url":"https://github.com/elastic/elasticsearch/issues/9131","id":53367011,"node_id":"MDU6SXNzdWU1MzM2NzAxMQ==","number":9131,"title":"De-duplication during indexing","user":{"login":"c2h5oh","id":446070,"node_id":"MDQ6VXNlcjQ0NjA3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/446070?v=4","gravatar_id":"","url":"https://api.github.com/users/c2h5oh","html_url":"https://github.com/c2h5oh","followers_url":"https://api.github.com/users/c2h5oh/followers","following_url":"https://api.github.com/users/c2h5oh/following{/other_user}","gists_url":"https://api.github.com/users/c2h5oh/gists{/gist_id}","starred_url":"https://api.github.com/users/c2h5oh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/c2h5oh/subscriptions","organizations_url":"https://api.github.com/users/c2h5oh/orgs","repos_url":"https://api.github.com/users/c2h5oh/repos","events_url":"https://api.github.com/users/c2h5oh/events{/privacy}","received_events_url":"https://api.github.com/users/c2h5oh/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-01-05T06:04:59Z","updated_at":"2015-01-05T12:01:34Z","closed_at":"2015-01-05T12:01:34Z","author_association":"NONE","active_lock_reason":null,"body":"### Problem\n\nRight now to prevent duplicates in index you have two options:\n- generate id based on document content in your application. Problems:\n  - simple methods (md5 checksum of field or fields for example) work only with 1:1 matches\n  - more complex methods require document processing and that forces you to duplicate parts of ES in your app (stemming, stopwords etc) and even then you only detect a duplicate if end result matches 1:1 whatever you have in ES\n- search for each document in ES before inserting it. Problems:\n  - doesn't work with bulk inserts (and is unusable in many places just because of this)\n  - at least doubles item-by-item insert time (2 separate requests)\n  - isn't atomic\n### Possible solution\n\nFeature similar to Solr de-duplication https://cwiki.apache.org/confluence/display/solr/De-Duplication\nbut instead of simple signatures offered by Solr, something using https://github.com/larsga/Duke (or parts of it)\nThere is already a plugin doing this for search https://github.com/YannBrrd/elasticsearch-entity-resolution\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}