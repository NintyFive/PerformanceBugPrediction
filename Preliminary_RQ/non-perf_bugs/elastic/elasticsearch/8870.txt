{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/8870","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8870/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8870/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8870/events","html_url":"https://github.com/elastic/elasticsearch/issues/8870","id":51553271,"node_id":"MDU6SXNzdWU1MTU1MzI3MQ==","number":8870,"title":"Remove possibility for conflicting field definitions and ambiguous field resolution","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"labels":[{"id":141145460,"node_id":"MDU6TGFiZWwxNDExNDU0NjA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Mapping","name":":Search/Mapping","color":"0e8a16","default":false,"description":"How fields should be indexed"},{"id":33660,"node_id":"MDU6TGFiZWwzMzY2MA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebreaking","name":">breaking","color":"d93f0b","default":false,"description":null},{"id":158399402,"node_id":"MDU6TGFiZWwxNTgzOTk0MDI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Meta","name":"Meta","color":"e11d21","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":22,"created_at":"2014-12-10T12:35:34Z","updated_at":"2015-08-16T10:54:42Z","closed_at":"2015-08-16T10:54:42Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Fields with the same name in different types in the same index should have the same mapping.  Previously, this has been advised as \"best practice\", but relying on advice has proved insufficient (see #4081 for the many issues that have resulted from allowing conflicting field definitions).  Instead we need to enforce this in the API.\n\nThis issue (which replaces #4081) is a meta issue listing all of the changes that need to be made:\n- [x] #8871 - Internally, field mappings should be stored at the index level, rather than at the type level. Types are essentially a way of grouping fields. While the mapping APIs will not change, an exception will be thrown if an attempt is made to map a field in one type in a way that conflicts with the mapping of a field with same name in another type. The _parent field is the one exception - this field will remain at the type level.  \n- [x] #8872 Always require the full path for field names (wildcards still allowed), and remove the ability to prepend the full path with the `_type`.\n- [x] #8874 Remove type-level `analyzer`, `search_analyzer`, `index_analyzer` settings.\n- [x] #9279 Remove per-document `_analyzer`\n- [x] #8143 Remove the ability to change the mapping for `_uid`, `_id`, `_index`, `_type`, `_field_names`.\n- [x] #6730 Deprecate extracting `_routing` and `_id` from document fields, but should still be possible to set `_routing` to required. \n- [x] #8142 Always store `_timestamp`, `_ttl`, `_routing`, `_parent` as these are required for reindexing.\n- [x] #8142 Should we also always require that the `_source` field should be stored? Disabling source prevents reindexing, updates, and out-of-the-box highlighting.  Perhaps with the new compression options (#8863), the ability to disable the `_source` field is less useful?\n- [x] #8875 Remove the `_boost` field (deprecated in v1.0.0.RC1).\n- [x] #8877 Remove the ability to delete mappings.\n- [x] #6677 Deprecate `index_name` and `path` settings\n- [x] #9443 Allow the user to upgrade mappings removing old settings without requiring reindexing (where possible)\n- [x] #9927 Throw an exception if field mappings is invalid\n## Alternatives:\n- Fields with different types can be renamed to distinguish their purpose, eg `login_name` vs `login_date`.\n- Different types can be separated into different indices.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}