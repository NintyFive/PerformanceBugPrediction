[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/352874346","html_url":"https://github.com/elastic/elasticsearch/issues/27913#issuecomment-352874346","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27913","id":352874346,"node_id":"MDEyOklzc3VlQ29tbWVudDM1Mjg3NDM0Ng==","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"created_at":"2017-12-19T20:17:49Z","updated_at":"2017-12-19T20:17:49Z","author_association":"MEMBER","body":"Just FYI @kertal, incase you are unaware, updates are actually deletes + index operations under the hood.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/353006597","html_url":"https://github.com/elastic/elasticsearch/issues/27913#issuecomment-353006597","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27913","id":353006597,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzAwNjU5Nw==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2017-12-20T09:09:31Z","updated_at":"2017-12-20T09:09:31Z","author_association":"CONTRIBUTOR","body":"> Just FYI @kertal, incase you are unaware, updates are actually deletes + index operations under the hood.\r\n\r\nthat is true but it's not the deletes you see here. I think, @kertal correct me if I am wrong you are interested in how many [_update](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-update.html) calls the shard receives, correct? Or are you interested in how many documents have a version != 1?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/353010022","html_url":"https://github.com/elastic/elasticsearch/issues/27913#issuecomment-353010022","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27913","id":353010022,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzAxMDAyMg==","user":{"login":"kertal","id":463851,"node_id":"MDQ6VXNlcjQ2Mzg1MQ==","avatar_url":"https://avatars0.githubusercontent.com/u/463851?v=4","gravatar_id":"","url":"https://api.github.com/users/kertal","html_url":"https://github.com/kertal","followers_url":"https://api.github.com/users/kertal/followers","following_url":"https://api.github.com/users/kertal/following{/other_user}","gists_url":"https://api.github.com/users/kertal/gists{/gist_id}","starred_url":"https://api.github.com/users/kertal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kertal/subscriptions","organizations_url":"https://api.github.com/users/kertal/orgs","repos_url":"https://api.github.com/users/kertal/repos","events_url":"https://api.github.com/users/kertal/events{/privacy}","received_events_url":"https://api.github.com/users/kertal/received_events","type":"User","site_admin":false},"created_at":"2017-12-20T09:23:58Z","updated_at":"2017-12-20T09:23:58Z","author_association":"NONE","body":"@pickypg \r\nyes, i know, each update combines a delete + index operations\r\n@s1monw \r\ni'd be interested in both numbers (correct me, when i'm doing an upsert, initially, there's no delete op, all following updates will also result in an delete op, right?).\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/353016714","html_url":"https://github.com/elastic/elasticsearch/issues/27913#issuecomment-353016714","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27913","id":353016714,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzAxNjcxNA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2017-12-20T09:50:14Z","updated_at":"2017-12-20T09:50:14Z","author_association":"CONTRIBUTOR","body":"so you are saying you really want to know how often we didn't only append a document but also deleted. ie. called IndexWriter#updateDocument? @kertal can you explain what the usecase is here? the stats might be accurate since we might retry a document in some situations","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/353839005","html_url":"https://github.com/elastic/elasticsearch/issues/27913#issuecomment-353839005","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27913","id":353839005,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzgzOTAwNQ==","user":{"login":"kertal","id":463851,"node_id":"MDQ6VXNlcjQ2Mzg1MQ==","avatar_url":"https://avatars0.githubusercontent.com/u/463851?v=4","gravatar_id":"","url":"https://api.github.com/users/kertal","html_url":"https://github.com/kertal","followers_url":"https://api.github.com/users/kertal/followers","following_url":"https://api.github.com/users/kertal/following{/other_user}","gists_url":"https://api.github.com/users/kertal/gists{/gist_id}","starred_url":"https://api.github.com/users/kertal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kertal/subscriptions","organizations_url":"https://api.github.com/users/kertal/orgs","repos_url":"https://api.github.com/users/kertal/repos","events_url":"https://api.github.com/users/kertal/events{/privacy}","received_events_url":"https://api.github.com/users/kertal/received_events","type":"User","site_admin":false},"created_at":"2017-12-25T06:58:37Z","updated_at":"2017-12-25T06:58:37Z","author_association":"NONE","body":"merry xmas, and thanks for the awesome software you're building!\r\n \r\nin the application i'm building i ran into issues with update performance\r\n\r\nhttps://discuss.elastic.co/t/update-performance-very-low-indexing-rate/103183\r\n\r\nsadly i could no longer update this discussion to describe the solution i've found\r\n\r\nso in short, i've got a summary record in ES that was updated by every SIP signaling message), which caused poor performance. I've been fixing that by using the logstash aggregate plugin, which increased the performance (10x in some cases). However, i still had the issue in situations with very high message frequency. I've build a little bash script, telling me, how much new records were appended, some more metrics, etc. Then i also wanted the number of updates, that was the point when i went to discuss.elastic.co\r\n\r\ni'm fine with the solutions we discussed here:\r\nhttps://discuss.elastic.co/t/update-stats/110667/7\r\n\r\nhowever, i think it would be nice to have the update/upsert metrics in the stats, maybe it would also help other people finding possible bottlenecks.\r\n\r\nin my case, i know the final solution, already built a Prove of concept version. I'm using logstash to forward the signaling messages to a redis store, i'm using an external script to get this messages, aggregate them, query and update existing summary records, send these records the ES. This solution doubled the performance as far as i can see (and it's only single threaded at the moment), and i haven't discovered a possible bottleneck so far  ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/366260498","html_url":"https://github.com/elastic/elasticsearch/issues/27913#issuecomment-366260498","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27913","id":366260498,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjI2MDQ5OA==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2018-02-16T15:07:05Z","updated_at":"2018-02-16T15:07:05Z","author_association":"MEMBER","body":"We talked about it in FixedIt friday and the consensus was that indices stats (which are a sum of shard level stats) are supposed to give you insight into the current state of the Engine. From the Engine perspective there is no update, just a \"reindex\" which counts as index. As Simon pointed out, one can derive a reindex from the total doc count compared to the doc count. We don't see how it's possible to add a reliable update counter. I'm going to close this for now. Feel free to comment if you have any questions.","performed_via_github_app":null}]