[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/465133494","html_url":"https://github.com/elastic/elasticsearch/issues/39109#issuecomment-465133494","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39109","id":465133494,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NTEzMzQ5NA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-02-19T13:46:40Z","updated_at":"2019-02-19T13:46:40Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-analytics-geo","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/465575364","html_url":"https://github.com/elastic/elasticsearch/issues/39109#issuecomment-465575364","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39109","id":465575364,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NTU3NTM2NA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2019-02-20T13:33:54Z","updated_at":"2019-02-20T13:33:54Z","author_association":"CONTRIBUTOR","body":"Related to #37947. cc @mayya-sharipova ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/465575894","html_url":"https://github.com/elastic/elasticsearch/issues/39109#issuecomment-465575894","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39109","id":465575894,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NTU3NTg5NA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2019-02-20T13:35:35Z","updated_at":"2019-02-20T13:35:35Z","author_association":"CONTRIBUTOR","body":"@deimsdeutsch Can you give us more information on what your use-case is? For instance are you trying to compute the nearest neighbors to a query vector?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/465962632","html_url":"https://github.com/elastic/elasticsearch/issues/39109#issuecomment-465962632","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39109","id":465962632,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NTk2MjYzMg==","user":{"login":"mayya-sharipova","id":5738841,"node_id":"MDQ6VXNlcjU3Mzg4NDE=","avatar_url":"https://avatars1.githubusercontent.com/u/5738841?v=4","gravatar_id":"","url":"https://api.github.com/users/mayya-sharipova","html_url":"https://github.com/mayya-sharipova","followers_url":"https://api.github.com/users/mayya-sharipova/followers","following_url":"https://api.github.com/users/mayya-sharipova/following{/other_user}","gists_url":"https://api.github.com/users/mayya-sharipova/gists{/gist_id}","starred_url":"https://api.github.com/users/mayya-sharipova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayya-sharipova/subscriptions","organizations_url":"https://api.github.com/users/mayya-sharipova/orgs","repos_url":"https://api.github.com/users/mayya-sharipova/repos","events_url":"https://api.github.com/users/mayya-sharipova/events{/privacy}","received_events_url":"https://api.github.com/users/mayya-sharipova/received_events","type":"User","site_admin":false},"created_at":"2019-02-21T11:19:00Z","updated_at":"2019-02-21T11:19:00Z","author_association":"CONTRIBUTOR","body":"@deimsdeutsch  Adding a new Euclidean distance function to a [dense_vector] (https://www.elastic.co/guide/en/elasticsearch/reference/master/dense-vector.html) is very easy, but it will be again use CPU.  I don't think we currently have plans for using GPU for calculations, it may require a lot of investigations. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/465976547","html_url":"https://github.com/elastic/elasticsearch/issues/39109#issuecomment-465976547","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39109","id":465976547,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NTk3NjU0Nw==","user":{"login":"deimsdeutsch","id":39468654,"node_id":"MDQ6VXNlcjM5NDY4NjU0","avatar_url":"https://avatars1.githubusercontent.com/u/39468654?v=4","gravatar_id":"","url":"https://api.github.com/users/deimsdeutsch","html_url":"https://github.com/deimsdeutsch","followers_url":"https://api.github.com/users/deimsdeutsch/followers","following_url":"https://api.github.com/users/deimsdeutsch/following{/other_user}","gists_url":"https://api.github.com/users/deimsdeutsch/gists{/gist_id}","starred_url":"https://api.github.com/users/deimsdeutsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deimsdeutsch/subscriptions","organizations_url":"https://api.github.com/users/deimsdeutsch/orgs","repos_url":"https://api.github.com/users/deimsdeutsch/repos","events_url":"https://api.github.com/users/deimsdeutsch/events{/privacy}","received_events_url":"https://api.github.com/users/deimsdeutsch/received_events","type":"User","site_admin":false},"created_at":"2019-02-21T12:09:04Z","updated_at":"2019-02-21T12:09:04Z","author_association":"NONE","body":"@jpountz \r\nImage similarity. Not nearest neighbor but https://stackoverflow.com/questions/1401712/how-can-the-euclidean-distance-be-calculated-with-numpy\r\n\r\n@mayya-sharipova \r\nYou people have no idea how many people would want this feature. Almost every smart city project would be using this on PetaByte scale.\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/481835330","html_url":"https://github.com/elastic/elasticsearch/issues/39109#issuecomment-481835330","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39109","id":481835330,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MTgzNTMzMA==","user":{"login":"dexception","id":31848222,"node_id":"MDQ6VXNlcjMxODQ4MjIy","avatar_url":"https://avatars3.githubusercontent.com/u/31848222?v=4","gravatar_id":"","url":"https://api.github.com/users/dexception","html_url":"https://github.com/dexception","followers_url":"https://api.github.com/users/dexception/followers","following_url":"https://api.github.com/users/dexception/following{/other_user}","gists_url":"https://api.github.com/users/dexception/gists{/gist_id}","starred_url":"https://api.github.com/users/dexception/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dexception/subscriptions","organizations_url":"https://api.github.com/users/dexception/orgs","repos_url":"https://api.github.com/users/dexception/repos","events_url":"https://api.github.com/users/dexception/events{/privacy}","received_events_url":"https://api.github.com/users/dexception/received_events","type":"User","site_admin":false},"created_at":"2019-04-10T19:45:22Z","updated_at":"2019-04-10T19:45:22Z","author_association":"NONE","body":"+1 \r\nWould love to have this feature using cuda. This can increase the performance 100 times. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/481994286","html_url":"https://github.com/elastic/elasticsearch/issues/39109#issuecomment-481994286","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39109","id":481994286,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MTk5NDI4Ng==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2019-04-11T07:08:39Z","updated_at":"2019-04-11T07:08:39Z","author_association":"CONTRIBUTOR","body":"@tveasey @stevedodson I heard via @benwtrent that you have been investigating running some computations on the GPU, you might want to have a look at this issue.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/482030214","html_url":"https://github.com/elastic/elasticsearch/issues/39109#issuecomment-482030214","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39109","id":482030214,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MjAzMDIxNA==","user":{"login":"tveasey","id":7591487,"node_id":"MDQ6VXNlcjc1OTE0ODc=","avatar_url":"https://avatars3.githubusercontent.com/u/7591487?v=4","gravatar_id":"","url":"https://api.github.com/users/tveasey","html_url":"https://github.com/tveasey","followers_url":"https://api.github.com/users/tveasey/followers","following_url":"https://api.github.com/users/tveasey/following{/other_user}","gists_url":"https://api.github.com/users/tveasey/gists{/gist_id}","starred_url":"https://api.github.com/users/tveasey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tveasey/subscriptions","organizations_url":"https://api.github.com/users/tveasey/orgs","repos_url":"https://api.github.com/users/tveasey/repos","events_url":"https://api.github.com/users/tveasey/events{/privacy}","received_events_url":"https://api.github.com/users/tveasey/received_events","type":"User","site_admin":false},"created_at":"2019-04-11T08:58:39Z","updated_at":"2019-04-11T09:54:53Z","author_association":"CONTRIBUTOR","body":"The way we're thinking about using GPUs in ML is for model inference and possibly training (making use of some existing framework). These would be run using the persistent task framework and pass the work to processes running on specific nodes in the cluster. \r\n\r\nIf this is for image similarity then I'd have thought this would be for lookup of similar images and the natural approach is (some form of) approximate nearest neighbours search, which wouldn't benefit from hardware acceleration. (If one wants to compute an embedding of an image (with a convnet to create the vectors), a good use case for a GPU, and run this inside the cluster then that would be a fit for what's on our roadmap.)\r\n\r\nIn general, I think without having a clearer definition of the problem to be solved it is difficult to say whether using a GPU is advantageous: for many cases, reading vectors from disk and returning results over the network to an application would be the bottleneck not any computations done with them.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/482044649","html_url":"https://github.com/elastic/elasticsearch/issues/39109#issuecomment-482044649","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39109","id":482044649,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MjA0NDY0OQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2019-04-11T09:41:00Z","updated_at":"2019-04-11T09:41:00Z","author_association":"CONTRIBUTOR","body":"@deimsdeutsch Can you clarify your use-case based on @tveasey's above comments?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/482089231","html_url":"https://github.com/elastic/elasticsearch/issues/39109#issuecomment-482089231","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39109","id":482089231,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MjA4OTIzMQ==","user":{"login":"deimsdeutsch","id":39468654,"node_id":"MDQ6VXNlcjM5NDY4NjU0","avatar_url":"https://avatars1.githubusercontent.com/u/39468654?v=4","gravatar_id":"","url":"https://api.github.com/users/deimsdeutsch","html_url":"https://github.com/deimsdeutsch","followers_url":"https://api.github.com/users/deimsdeutsch/followers","following_url":"https://api.github.com/users/deimsdeutsch/following{/other_user}","gists_url":"https://api.github.com/users/deimsdeutsch/gists{/gist_id}","starred_url":"https://api.github.com/users/deimsdeutsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deimsdeutsch/subscriptions","organizations_url":"https://api.github.com/users/deimsdeutsch/orgs","repos_url":"https://api.github.com/users/deimsdeutsch/repos","events_url":"https://api.github.com/users/deimsdeutsch/events{/privacy}","received_events_url":"https://api.github.com/users/deimsdeutsch/received_events","type":"User","site_admin":false},"created_at":"2019-04-11T12:13:17Z","updated_at":"2019-04-11T12:13:17Z","author_association":"NONE","body":"Just want to calculate Euclidean distance on 1 billion vectors...using gpu would help in computing the same parallely on cuda cores. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/482113325","html_url":"https://github.com/elastic/elasticsearch/issues/39109#issuecomment-482113325","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39109","id":482113325,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MjExMzMyNQ==","user":{"login":"tveasey","id":7591487,"node_id":"MDQ6VXNlcjc1OTE0ODc=","avatar_url":"https://avatars3.githubusercontent.com/u/7591487?v=4","gravatar_id":"","url":"https://api.github.com/users/tveasey","html_url":"https://github.com/tveasey","followers_url":"https://api.github.com/users/tveasey/followers","following_url":"https://api.github.com/users/tveasey/following{/other_user}","gists_url":"https://api.github.com/users/tveasey/gists{/gist_id}","starred_url":"https://api.github.com/users/tveasey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tveasey/subscriptions","organizations_url":"https://api.github.com/users/tveasey/orgs","repos_url":"https://api.github.com/users/tveasey/repos","events_url":"https://api.github.com/users/tveasey/events{/privacy}","received_events_url":"https://api.github.com/users/tveasey/received_events","type":"User","site_admin":false},"created_at":"2019-04-11T13:26:32Z","updated_at":"2019-04-11T13:26:32Z","author_association":"CONTRIBUTOR","body":"I still think this observation applies:\r\n>  reading vectors from disk and returning results over the network to an application would be the bottleneck not any computations done with them\r\n\r\nActually loading 1B vectors from disk and sending back 1B floats (assuming this is what is needed) would be more expensive than computing 1B distances on CPU, so compute won't be the bottleneck. If you're saying what you need is all, n (n-1) / 2, pairwise distances, then I think there are more serious problems: what would you do with the 10^18 or so floats, etc.\r\n\r\nMost applications using distances care primarily about nearest neighbours (to each point) where the requirement is to avoid brute force complexity. The techniques for doing this wouldn't benefit from using a GPU.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/483330810","html_url":"https://github.com/elastic/elasticsearch/issues/39109#issuecomment-483330810","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39109","id":483330810,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MzMzMDgxMA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2019-04-15T16:48:24Z","updated_at":"2019-04-15T16:48:24Z","author_association":"CONTRIBUTOR","body":"Closing based on the above discussion. Thanks for your inputs @deimsdeutsch and @tveasey !","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/560147626","html_url":"https://github.com/elastic/elasticsearch/issues/39109#issuecomment-560147626","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39109","id":560147626,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDE0NzYyNg==","user":{"login":"dexception","id":31848222,"node_id":"MDQ6VXNlcjMxODQ4MjIy","avatar_url":"https://avatars3.githubusercontent.com/u/31848222?v=4","gravatar_id":"","url":"https://api.github.com/users/dexception","html_url":"https://github.com/dexception","followers_url":"https://api.github.com/users/dexception/followers","following_url":"https://api.github.com/users/dexception/following{/other_user}","gists_url":"https://api.github.com/users/dexception/gists{/gist_id}","starred_url":"https://api.github.com/users/dexception/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dexception/subscriptions","organizations_url":"https://api.github.com/users/dexception/orgs","repos_url":"https://api.github.com/users/dexception/repos","events_url":"https://api.github.com/users/dexception/events{/privacy}","received_events_url":"https://api.github.com/users/dexception/received_events","type":"User","site_admin":false},"created_at":"2019-12-01T19:19:41Z","updated_at":"2019-12-01T19:19:41Z","author_association":"NONE","body":"I hope you guys take a second look at this issue because setting up a CPU cluster when you can handle this on a single machine with a good GPU plus with Cuda Blas library you add additional operations.","performed_via_github_app":null}]