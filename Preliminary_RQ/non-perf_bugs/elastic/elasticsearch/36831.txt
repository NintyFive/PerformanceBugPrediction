{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/36831","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36831/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36831/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/36831/events","html_url":"https://github.com/elastic/elasticsearch/issues/36831","id":392550636,"node_id":"MDU6SXNzdWUzOTI1NTA2MzY=","number":36831,"title":"ScriptDocValuesMissingV7BehaviourTests fails on 6.x","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-12-19T11:09:12Z","updated_at":"2018-12-19T12:46:05Z","closed_at":"2018-12-19T12:46:04Z","author_association":"MEMBER","active_lock_reason":null,"body":"All tests in ScriptDocValuesMissingV7BehaviourTests fail on 6.x. See for instance https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.x+intake/706 .\r\n\r\n```\r\n11:05:11   2> REPRODUCE WITH: ./gradlew :server:unitTest -Dtests.seed=3C76A5057B432D71 -Dtests.class=org.elasticsearch.index.fielddata.ScriptDocValuesMissingV7BehaviourTests -Dtests.method=\"testExceptionForMissingValueLong\" -Dtests.security.manager=true -Dtests.locale=be-BY -Dtests.timezone=Asia/Magadan -Dcompiler.java=11 -Druntime.java=8\r\n11:05:11   2> REPRODUCE WITH: ./gradlew :server:unitTest -Dtests.seed=3C76A5057B432D71 -Dtests.class=org.elasticsearch.index.fielddata.ScriptDocValuesMissingV7BehaviourTests -Dtests.method=\"testExceptionForMissingValueLong\" -Dtests.security.manager=true -Dtests.locale=be-BY -Dtests.timezone=Asia/Magadan -Dcompiler.java=11 -Druntime.java=8\r\n11:05:11   2> REPRODUCE WITH: ./gradlew :server:unitTest -Dtests.seed=3C76A5057B432D71 -Dtests.class=org.elasticsearch.index.fielddata.ScriptDocValuesMissingV7BehaviourTests -Dtests.method=\"testExceptionForMissingValueDate\" -Dtests.security.manager=true -Dtests.locale=be-BY -Dtests.timezone=Asia/Magadan -Dcompiler.java=11 -Druntime.java=8\r\n11:05:11   2> REPRODUCE WITH: ./gradlew :server:unitTest -Dtests.seed=3C76A5057B432D71 -Dtests.class=org.elasticsearch.index.fielddata.ScriptDocValuesMissingV7BehaviourTests -Dtests.method=\"testExceptionForMissingValueDate\" -Dtests.security.manager=true -Dtests.locale=be-BY -Dtests.timezone=Asia/Magadan -Dcompiler.java=11 -Druntime.java=8\r\n11:05:11   2> REPRODUCE WITH: ./gradlew :server:unitTest -Dtests.seed=3C76A5057B432D71 -Dtests.class=org.elasticsearch.index.fielddata.ScriptDocValuesMissingV7BehaviourTests -Dtests.method=\"testFalseForMissingValueBoolean\" -Dtests.security.manager=true -Dtests.locale=be-BY -Dtests.timezone=Asia/Magadan -Dcompiler.java=11 -Druntime.java=8\r\n11:05:11   2> REPRODUCE WITH: ./gradlew :server:unitTest -Dtests.seed=3C76A5057B432D71 -Dtests.class=org.elasticsearch.index.fielddata.ScriptDocValuesMissingV7BehaviourTests -Dtests.method=\"testFalseForMissingValueBoolean\" -Dtests.security.manager=true -Dtests.locale=be-BY -Dtests.timezone=Asia/Magadan -Dcompiler.java=11 -Druntime.java=8\r\n11:05:11   2> REPRODUCE WITH: ./gradlew :server:unitTest -Dtests.seed=3C76A5057B432D71 -Dtests.class=org.elasticsearch.index.fielddata.ScriptDocValuesMissingV7BehaviourTests -Dtests.method=\"testNullForMissingValueGeo\" -Dtests.security.manager=true -Dtests.locale=be-BY -Dtests.timezone=Asia/Magadan -Dcompiler.java=11 -Druntime.java=8\r\n11:05:11   2> REPRODUCE WITH: ./gradlew :server:unitTest -Dtests.seed=3C76A5057B432D71 -Dtests.class=org.elasticsearch.index.fielddata.ScriptDocValuesMissingV7BehaviourTests -Dtests.method=\"testNullForMissingValueGeo\" -Dtests.security.manager=true -Dtests.locale=be-BY -Dtests.timezone=Asia/Magadan -Dcompiler.java=11 -Druntime.java=8\r\n```\r\n\r\n```\r\n11:05:11 Suite: org.elasticsearch.index.fielddata.ScriptDocValuesMissingV7BehaviourTests\r\n11:05:11   1> [2018-12-19T21:05:11,629][INFO ][o.e.i.f.ScriptDocValuesMissingV7BehaviourTests] [testExceptionForMissingValueLong] before test\r\n11:05:11   1> [2018-12-19T21:05:11,638][WARN ][o.e.d.i.f.S.Longs        ] [testExceptionForMissingValueLong] returning default values for missing document values is deprecated. Set system property '-Des.scripting.exception_for_missing_value=true' to make behaviour compatible with future major versions!\r\n11:05:11 FAILURE 0.03s J5 | ScriptDocValuesMissingV7BehaviourTests.testExceptionForMissingValueLong <<< FAILURES!\r\n11:05:11    > Throwable #1: junit.framework.AssertionFailedError: Expected exception IllegalStateException but no exception was thrown\r\n11:05:11    > \tat org.apache.lucene.util.LuceneTestCase.expectThrows(LuceneTestCase.java:2697)\r\n11:05:12    > \tat org.apache.lucene.util.LuceneTestCase.expectThrows(LuceneTestCase.java:2682)\r\n11:05:12    > \tat org.elasticsearch.index.fielddata.ScriptDocValuesMissingV7BehaviourTests.testExceptionForMissingValueLong(ScriptDocValuesMissingV7BehaviourTests.java:44)\r\n11:05:12    > \tat java.lang.Thread.run(Thread.java:748)Throwable #2: java.lang.AssertionError: unexpected warning headers expected null, but was:<[299 Elasticsearch-6.6.0-SNAPSHOT-Unknown \"returning default values for missing document values is deprecated. Set system property '-Des.scripting.exception_for_missing_value=true' to make behaviour compatible with future major versions!\" \"Wed, 19 Dec 2018 10:05:11 GMT\"]>\r\n11:05:12    > \tat org.elasticsearch.test.ESTestCase.ensureNoWarnings(ESTestCase.java:378)\r\n11:05:12    > \tat org.elasticsearch.test.ESTestCase.after(ESTestCase.java:356)\r\n11:05:12    > \tat java.lang.Thread.run(Thread.java:748)\r\n11:05:12   1> [2018-12-19T21:05:11,655][INFO ][o.e.i.f.ScriptDocValuesMissingV7BehaviourTests] [testExceptionForMissingValueDate] before test\r\n11:05:12   1> [2018-12-19T21:05:11,657][WARN ][o.e.d.i.f.S.Dates        ] [testExceptionForMissingValueDate] returning default values for missing document values is deprecated. Set system property '-Des.scripting.exception_for_missing_value=true' to make behaviour compatible with future major versions!\r\n11:05:12 FAILURE 0.01s J5 | ScriptDocValuesMissingV7BehaviourTests.testExceptionForMissingValueDate <<< FAILURES!\r\n11:05:12    > Throwable #1: junit.framework.AssertionFailedError: Expected exception IllegalStateException but no exception was thrown\r\n11:05:12    > \tat org.apache.lucene.util.LuceneTestCase.expectThrows(LuceneTestCase.java:2697)\r\n11:05:12    > \tat org.apache.lucene.util.LuceneTestCase.expectThrows(LuceneTestCase.java:2682)\r\n11:05:12    > \tat org.elasticsearch.index.fielddata.ScriptDocValuesMissingV7BehaviourTests.testExceptionForMissingValueDate(ScriptDocValuesMissingV7BehaviourTests.java:60)\r\n11:05:12    > \tat java.lang.Thread.run(Thread.java:748)Throwable #2: java.lang.AssertionError: unexpected warning headers expected null, but was:<[299 Elasticsearch-6.6.0-SNAPSHOT-Unknown \"returning default values for missing document values is deprecated. Set system property '-Des.scripting.exception_for_missing_value=true' to make behaviour compatible with future major versions!\" \"Wed, 19 Dec 2018 10:05:11 GMT\"]>\r\n11:05:12    > \tat org.elasticsearch.test.ESTestCase.ensureNoWarnings(ESTestCase.java:378)\r\n11:05:12    > \tat org.elasticsearch.test.ESTestCase.after(ESTestCase.java:356)\r\n11:05:12    > \tat java.lang.Thread.run(Thread.java:748)\r\n11:05:12   1> [2018-12-19T21:05:11,665][INFO ][o.e.i.f.ScriptDocValuesMissingV7BehaviourTests] [testFalseForMissingValueBoolean] before test\r\n11:05:12   1> [2018-12-19T21:05:11,668][WARN ][o.e.d.i.f.S.Booleans     ] [testFalseForMissingValueBoolean] returning default values for missing document values is deprecated. Set system property '-Des.scripting.exception_for_missing_value=true' to make behaviour compatible with future major versions!\r\n11:05:12 FAILURE 0.01s J5 | ScriptDocValuesMissingV7BehaviourTests.testFalseForMissingValueBoolean <<< FAILURES!\r\n11:05:12    > Throwable #1: junit.framework.AssertionFailedError: Expected exception IllegalStateException but no exception was thrown\r\n11:05:12    > \tat org.apache.lucene.util.LuceneTestCase.expectThrows(LuceneTestCase.java:2697)\r\n11:05:12    > \tat org.apache.lucene.util.LuceneTestCase.expectThrows(LuceneTestCase.java:2682)\r\n11:05:12    > \tat org.elasticsearch.index.fielddata.ScriptDocValuesMissingV7BehaviourTests.testFalseForMissingValueBoolean(ScriptDocValuesMissingV7BehaviourTests.java:75)\r\n11:05:12    > \tat java.lang.Thread.run(Thread.java:748)Throwable #2: java.lang.AssertionError: unexpected warning headers expected null, but was:<[299 Elasticsearch-6.6.0-SNAPSHOT-Unknown \"returning default values for missing document values is deprecated. Set system property '-Des.scripting.exception_for_missing_value=true' to make behaviour compatible with future major versions!\" \"Wed, 19 Dec 2018 10:05:11 GMT\"]>\r\n11:05:12    > \tat org.elasticsearch.test.ESTestCase.ensureNoWarnings(ESTestCase.java:378)\r\n11:05:12    > \tat org.elasticsearch.test.ESTestCase.after(ESTestCase.java:356)\r\n11:05:12    > \tat java.lang.Thread.run(Thread.java:748)\r\n11:05:12   1> [2018-12-19T21:05:11,672][INFO ][o.e.i.f.ScriptDocValuesMissingV7BehaviourTests] [testNullForMissingValueGeo] before test\r\n11:05:12   1> [2018-12-19T21:05:11,674][WARN ][o.e.d.i.f.S.GeoPoints    ] [testNullForMissingValueGeo] returning default values for missing document values is deprecated. Set system property '-Des.scripting.exception_for_missing_value=true' to make behaviour compatible with future major versions!\r\n11:05:12 FAILURE 0.01s J5 | ScriptDocValuesMissingV7BehaviourTests.testNullForMissingValueGeo <<< FAILURES!\r\n11:05:12    > Throwable #1: junit.framework.AssertionFailedError: Expected exception IllegalStateException but no exception was thrown\r\n11:05:12    > \tat org.apache.lucene.util.LuceneTestCase.expectThrows(LuceneTestCase.java:2697)\r\n11:05:12    > \tat org.apache.lucene.util.LuceneTestCase.expectThrows(LuceneTestCase.java:2682)\r\n11:05:12    > \tat org.elasticsearch.index.fielddata.ScriptDocValuesMissingV7BehaviourTests.testNullForMissingValueGeo(ScriptDocValuesMissingV7BehaviourTests.java:85)\r\n11:05:12    > \tat java.lang.Thread.run(Thread.java:748)Throwable #2: java.lang.AssertionError: unexpected warning headers expected null, but was:<[299 Elasticsearch-6.6.0-SNAPSHOT-Unknown \"returning default values for missing document values is deprecated. Set system property '-Des.scripting.exception_for_missing_value=true' to make behaviour compatible with future major versions!\" \"Wed, 19 Dec 2018 10:05:11 GMT\"]>\r\n11:05:12    > \tat org.elasticsearch.test.ESTestCase.ensureNoWarnings(ESTestCase.java:378)\r\n11:05:12    > \tat org.elasticsearch.test.ESTestCase.after(ESTestCase.java:356)\r\n11:05:12    > \tat java.lang.Thread.run(Thread.java:748)\r\n```","closed_by":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"performed_via_github_app":null}