[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/434655410","html_url":"https://github.com/elastic/elasticsearch/issues/35123#issuecomment-434655410","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35123","id":434655410,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDY1NTQxMA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-10-31T11:40:21Z","updated_at":"2018-10-31T11:40:21Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search-aggs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/434681720","html_url":"https://github.com/elastic/elasticsearch/issues/35123#issuecomment-434681720","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35123","id":434681720,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDY4MTcyMA==","user":{"login":"Murukaen","id":6375875,"node_id":"MDQ6VXNlcjYzNzU4NzU=","avatar_url":"https://avatars1.githubusercontent.com/u/6375875?v=4","gravatar_id":"","url":"https://api.github.com/users/Murukaen","html_url":"https://github.com/Murukaen","followers_url":"https://api.github.com/users/Murukaen/followers","following_url":"https://api.github.com/users/Murukaen/following{/other_user}","gists_url":"https://api.github.com/users/Murukaen/gists{/gist_id}","starred_url":"https://api.github.com/users/Murukaen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Murukaen/subscriptions","organizations_url":"https://api.github.com/users/Murukaen/orgs","repos_url":"https://api.github.com/users/Murukaen/repos","events_url":"https://api.github.com/users/Murukaen/events{/privacy}","received_events_url":"https://api.github.com/users/Murukaen/received_events","type":"User","site_admin":false},"created_at":"2018-10-31T13:14:27Z","updated_at":"2018-10-31T13:14:27Z","author_association":"NONE","body":"It seems that adding a \"weight\" of 1 to the function(s) fixes the issue. Was the \"weight\" mandatory in this scenario?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/434835646","html_url":"https://github.com/elastic/elasticsearch/issues/35123#issuecomment-434835646","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35123","id":434835646,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDgzNTY0Ng==","user":{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false},"created_at":"2018-10-31T20:26:58Z","updated_at":"2018-10-31T20:26:58Z","author_association":"MEMBER","body":"@Murukaen thank you for filing this issue. From stepping through the code I think there is a bug around how we treat `boost` and `boost_mode` when there is only one function provided. It shouldn't be mandatory to specify `weight` in this situation.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/435194376","html_url":"https://github.com/elastic/elasticsearch/issues/35123#issuecomment-435194376","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35123","id":435194376,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNTE5NDM3Ng==","user":{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false},"created_at":"2018-11-01T21:31:33Z","updated_at":"2018-11-01T21:31:33Z","author_association":"MEMBER","body":"When only one function was provided and no explicit `boost_mode` was specified, we sometimes incorrectly used a function's default `score_mode` in place of `boost_mode`. This meant that in certain circumstances, we would use `replace` instead of the default `multiply`, which overrides not just the subquery score, but also the `boost` applied to the query. As of #35148 we always use the correct `boost_mode`, and so the example in the issue comment should work in future versions.\r\n\r\nAs a note, I am a bit confused by the behavior of the `replace` mode described above: I would expect it to replace the subquery's score, but not to touch the overall query `boost`, which should apply to the `function_score` query as a whole. However, we are actively working to replace `function_score` and I'm not sure the effort + complexity of changing this is worth it.","performed_via_github_app":null}]