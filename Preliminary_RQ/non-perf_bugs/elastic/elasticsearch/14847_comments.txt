[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157870448","html_url":"https://github.com/elastic/elasticsearch/issues/14847#issuecomment-157870448","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14847","id":157870448,"node_id":"MDEyOklzc3VlQ29tbWVudDE1Nzg3MDQ0OA==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2015-11-18T21:29:55Z","updated_at":"2015-11-18T21:29:55Z","author_association":"CONTRIBUTOR","body":"we are missing stderr in general. we should stop using gradle's logging\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157915817","html_url":"https://github.com/elastic/elasticsearch/issues/14847#issuecomment-157915817","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14847","id":157915817,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NzkxNTgxNw==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-11-19T01:19:04Z","updated_at":"2015-11-19T01:19:19Z","author_association":"MEMBER","body":"I've opened #14850 to improve various aspects of how output is handled for tests. I don't think it handles this issue though, as with --info logging (which we have in jenkins) we are already getting the INFO ant messages, which is what extraneous jvm output is logged at by junit4. I did improve the case when _not_ running with --info, so that you will still see this output.\n\nI also investigated piping stderr and stdout directly. This doesn't work for extraneous jvm output, since we have no control over that (things the jvm outputs directly, disregarding when System.out/err is changed). This is what junit4 logs on its own, and I've opened an issue there to improve the situation: randomizedtesting/randomizedtesting#222\n\nFor regular test stderr/stdout, the problem with not using gradle's logging is the stderr and stdout is captured while ant is running. Stderr actually comes through (as ant log messages) but stdout does not, when we are running with gradle's normal logging level (both appear when run with --info). I did fix a number of things in the referenced PR, though, which I think will improve the situation greatly. But unless we can actually reproduce the crash (or even know why it crashed and thus what was expected to be output that would indicate the reason for the crash), I don't know what else we could do here.\n\nFor reference, this is the original jenkins job that failed:\nhttp://build-us-00.elastic.co/job/es_core_master_strong/5550/\n\nFWIW, I looked through maven jenkins jobs for crashes, and found this one, which has no more information than that which we saw with gradle:\nhttp://build-us-00.elastic.co/job/es_core_2x_metal/454/console\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/157916149","html_url":"https://github.com/elastic/elasticsearch/issues/14847#issuecomment-157916149","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14847","id":157916149,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NzkxNjE0OQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-11-19T01:21:18Z","updated_at":"2015-11-19T01:21:18Z","author_association":"MEMBER","body":"Given that the maven job referenced above, I don't think there is anything to do here with regards to gradle, so I am closing this issue.\n","performed_via_github_app":null}]