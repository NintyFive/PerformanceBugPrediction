[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/617213421","html_url":"https://github.com/elastic/elasticsearch/issues/55530#issuecomment-617213421","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55530","id":617213421,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNzIxMzQyMQ==","user":{"login":"itiyamas","id":45985097,"node_id":"MDQ6VXNlcjQ1OTg1MDk3","avatar_url":"https://avatars3.githubusercontent.com/u/45985097?v=4","gravatar_id":"","url":"https://api.github.com/users/itiyamas","html_url":"https://github.com/itiyamas","followers_url":"https://api.github.com/users/itiyamas/followers","following_url":"https://api.github.com/users/itiyamas/following{/other_user}","gists_url":"https://api.github.com/users/itiyamas/gists{/gist_id}","starred_url":"https://api.github.com/users/itiyamas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/itiyamas/subscriptions","organizations_url":"https://api.github.com/users/itiyamas/orgs","repos_url":"https://api.github.com/users/itiyamas/repos","events_url":"https://api.github.com/users/itiyamas/events{/privacy}","received_events_url":"https://api.github.com/users/itiyamas/received_events","type":"User","site_admin":false},"created_at":"2020-04-21T14:24:48Z","updated_at":"2020-04-21T14:24:48Z","author_association":"NONE","body":"This is the change that I tested. Not made changes to the recovery part though: https://gist.github.com/itiyamas/0568a4af2b97ac5870cc5f9c3dd7679a","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/617281015","html_url":"https://github.com/elastic/elasticsearch/issues/55530#issuecomment-617281015","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55530","id":617281015,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNzI4MTAxNQ==","user":{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false},"created_at":"2020-04-21T16:50:44Z","updated_at":"2020-04-21T16:50:44Z","author_association":"MEMBER","body":"Hi @itiyamas, \r\n\r\nThank you for your interest in Elasticsearch.\r\n\r\nWe discussed this idea [before](https://github.com/elastic/elasticsearch/pull/46203#issuecomment-528092181) and decided not to pursue it because the cleanup logic will be more complicated and less safe. \r\n\r\nRelates to #46203","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/617282049","html_url":"https://github.com/elastic/elasticsearch/issues/55530#issuecomment-617282049","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55530","id":617282049,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNzI4MjA0OQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-04-21T16:52:24Z","updated_at":"2020-04-21T16:52:24Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed (:Distributed/Engine)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/617768352","html_url":"https://github.com/elastic/elasticsearch/issues/55530#issuecomment-617768352","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55530","id":617768352,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNzc2ODM1Mg==","user":{"login":"itiyamas","id":45985097,"node_id":"MDQ6VXNlcjQ1OTg1MDk3","avatar_url":"https://avatars3.githubusercontent.com/u/45985097?v=4","gravatar_id":"","url":"https://api.github.com/users/itiyamas","html_url":"https://github.com/itiyamas","followers_url":"https://api.github.com/users/itiyamas/followers","following_url":"https://api.github.com/users/itiyamas/following{/other_user}","gists_url":"https://api.github.com/users/itiyamas/gists{/gist_id}","starred_url":"https://api.github.com/users/itiyamas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/itiyamas/subscriptions","organizations_url":"https://api.github.com/users/itiyamas/orgs","repos_url":"https://api.github.com/users/itiyamas/repos","events_url":"https://api.github.com/users/itiyamas/events{/privacy}","received_events_url":"https://api.github.com/users/itiyamas/received_events","type":"User","site_admin":false},"created_at":"2020-04-22T13:08:07Z","updated_at":"2020-04-22T13:08:07Z","author_association":"NONE","body":"Sorry for not going through it earlier, but this is a bit different from the earlier one. \r\n\r\nHere, you are not moving sync outside write lock, but doing it just once within the writeLock. The sync is followed by file deletes outside the write lock.  Executing sync outside writeLock is less safe and more complicated as you need to handle a lot of edge cases, but here you just delete a contiguous location of translog files from minGen, which is not complicated in my opinion.\r\n\r\n","performed_via_github_app":null}]