[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/161246355","html_url":"https://github.com/elastic/elasticsearch/issues/14732#issuecomment-161246355","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14732","id":161246355,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTI0NjM1NQ==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2015-12-02T10:08:50Z","updated_at":"2015-12-02T11:08:34Z","author_association":"CONTRIBUTOR","body":"The issue here is that, due to concurrently running tests, the nodes cannot find each other. A funny asymmetry in the joining process actually happens in the test.\n\nSteps:\n- Test starts one master node (node_t0). It is bound to publish port 9480.\n- Test starts second node (node_t1). It is bound to port 9486 due to **other tests/processes blocking ports** in range 9481-9485. Port 9486 is out of range of the normal pinging process (UnicastZenPing.LIMIT_LOCAL_PORTS_COUNT, which is 5). However, node_t1 can find node_t0 (which is in range) and both build a two node cluster.\n- The test kills node_t0, and node_t1 becomes master in single-node cluster.\n- Test starts a third node (node_t2). It is bound to publish port 9480 (which has become free as node_t0 left). With its pinging process, it cannot find the current master node_t1, however. As consequence, node_t2 becomes master as well (split brain). Test fails.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/161263139","html_url":"https://github.com/elastic/elasticsearch/issues/14732#issuecomment-161263139","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14732","id":161263139,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTI2MzEzOQ==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2015-12-02T11:09:22Z","updated_at":"2015-12-02T11:09:22Z","author_association":"CONTRIBUTOR","body":"@nik9000 Could this be related to #14774? As this test failure was 19 days ago already, maybe it is fixed now as part of your changes?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/183911930","html_url":"https://github.com/elastic/elasticsearch/issues/14732#issuecomment-183911930","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14732","id":183911930,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MzkxMTkzMA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-02-14T16:19:51Z","updated_at":"2016-02-14T16:19:51Z","author_association":"CONTRIBUTOR","body":"Old test failure. Closing\n","performed_via_github_app":null}]