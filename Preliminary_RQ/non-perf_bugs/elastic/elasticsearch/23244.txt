{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/23244","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23244/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23244/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23244/events","html_url":"https://github.com/elastic/elasticsearch/issues/23244","id":208562922,"node_id":"MDU6SXNzdWUyMDg1NjI5MjI=","number":23244,"title":"Removal of the allocate_replica allocation command","user":{"login":"abeyad","id":1631297,"node_id":"MDQ6VXNlcjE2MzEyOTc=","avatar_url":"https://avatars2.githubusercontent.com/u/1631297?v=4","gravatar_id":"","url":"https://api.github.com/users/abeyad","html_url":"https://github.com/abeyad","followers_url":"https://api.github.com/users/abeyad/followers","following_url":"https://api.github.com/users/abeyad/following{/other_user}","gists_url":"https://api.github.com/users/abeyad/gists{/gist_id}","starred_url":"https://api.github.com/users/abeyad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abeyad/subscriptions","organizations_url":"https://api.github.com/users/abeyad/orgs","repos_url":"https://api.github.com/users/abeyad/repos","events_url":"https://api.github.com/users/abeyad/events{/privacy}","received_events_url":"https://api.github.com/users/abeyad/received_events","type":"User","site_admin":false},"labels":[{"id":837246479,"node_id":"MDU6TGFiZWw4MzcyNDY0Nzk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Allocation","name":":Distributed/Allocation","color":"0e8a16","default":false,"description":"All issues relating to the decision making around placing a shard (both master logic & on the nodes)"},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null},{"id":777829541,"node_id":"MDU6TGFiZWw3Nzc4Mjk1NDE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v6.0.3","name":"v6.0.3","color":"dddddd","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2017-02-17T21:34:30Z","updated_at":"2018-03-27T19:38:41Z","closed_at":"2018-03-27T19:38:41Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"There are several possible allocation commands that can be issued as part of a `/_cluster/reroute` request.  One of these commands is to allocate a replica shard with the command `allocate_replica`.    This issue is to propose and discuss removal of the `allocate_replica` command.  If a replica cannot be allocated in the cluster, it means either shard allocation rules have been setup to prevent its allocation, or there aren't enough nodes to hold the primary and all replica shard copies.  In the case of the former, the solution is to fix the allocation settings to allow the replica to be allocated.  In the case of the latter, startup more nodes.  \r\n\r\nIts not clear what utility the `allocate_replica` command provides and in the worst case, it masks a more serious issue with cluster settings that is preventing the master node from allocating the replica shard.\r\n\r\nRelates #18819","closed_by":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"performed_via_github_app":null}