{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/37860","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37860/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37860/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37860/events","html_url":"https://github.com/elastic/elasticsearch/issues/37860","id":403087120,"node_id":"MDU6SXNzdWU0MDMwODcxMjA=","number":37860,"title":"There are serious bugs in installing the latest version！！！！","user":{"login":"Hello-Linux","id":17851645,"node_id":"MDQ6VXNlcjE3ODUxNjQ1","avatar_url":"https://avatars1.githubusercontent.com/u/17851645?v=4","gravatar_id":"","url":"https://api.github.com/users/Hello-Linux","html_url":"https://github.com/Hello-Linux","followers_url":"https://api.github.com/users/Hello-Linux/followers","following_url":"https://api.github.com/users/Hello-Linux/following{/other_user}","gists_url":"https://api.github.com/users/Hello-Linux/gists{/gist_id}","starred_url":"https://api.github.com/users/Hello-Linux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Hello-Linux/subscriptions","organizations_url":"https://api.github.com/users/Hello-Linux/orgs","repos_url":"https://api.github.com/users/Hello-Linux/repos","events_url":"https://api.github.com/users/Hello-Linux/events{/privacy}","received_events_url":"https://api.github.com/users/Hello-Linux/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-01-25T10:06:25Z","updated_at":"2019-01-25T13:16:06Z","closed_at":"2019-01-25T13:15:58Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version** (`bin/elasticsearch --version`):\r\n/usr/share/elasticsearch/bin/elasticsearch --version\r\nVersion: 6.5.4, Build: default/rpm/d2ef93d/2018-12-17T21:17:40.758843Z, JVM: 1.8.0_201\r\n\r\n**Plugins installed**: []\r\nNo\r\n\r\n**JVM version** (`java -version`):\r\n\r\njava -version\r\njava version \"1.8.0_201\"\r\nJava(TM) SE Runtime Environment (build 1.8.0_201-b09)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.201-b09, mixed mode)\r\n\r\n**OS version** (`uname -a` if on a Unix-like system):\r\nCentOS-7.5\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\n**Steps to reproduce**:\r\n\r\nI've installed it several times using yum,but was failed. I have change the /etc/security/limits.conf\r\nhere is:\r\n\\* soft nproc 102400\r\n\\* hard nproc 102400\r\n\\* soft nofile 102400\r\n\\* hard nofile 102400\r\n\\* soft memlock unlimited \r\n\\* hard memlock unlimited\r\nBut I get prompted this warn every time whenI restart the service\r\nThe picture below\r\n![error1](https://user-images.githubusercontent.com/17851645/51739167-c067f880-20cb-11e9-87ec-a41b2f86849d.png)\r\n![error2](https://user-images.githubusercontent.com/17851645/51739186-cc53ba80-20cb-11e9-917a-f08c20d594ee.png)\r\n\r\nI have modified these system parameters why does it still prompt these warnings, finally caused my service to die!\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n**Provide logs (if relevant)**:\r\n\r\n[2019-01-25T17:49:55,105][WARN ][o.e.b.JNANatives         ] [unknown] Unable to lock JVM Memory: error=12, reason=Cannot allocate memory\r\n[2019-01-25T17:49:55,107][WARN ][o.e.b.JNANatives         ] [unknown] This can result in part of the JVM being swapped out.\r\n[2019-01-25T17:49:55,107][WARN ][o.e.b.JNANatives         ] [unknown] Increase RLIMIT_MEMLOCK, soft limit: 65536, hard limit: 65536\r\n[2019-01-25T17:49:55,107][WARN ][o.e.b.JNANatives         ] [unknown] These can be adjusted by modifying /etc/security/limits.conf, for example:\r\n        # allow user 'elasticsearch' mlockall\r\n        elasticsearch soft memlock unlimited\r\n        elasticsearch hard memlock unlimited\r\n[2019-01-25T17:49:55,107][WARN ][o.e.b.JNANatives         ] [unknown] If you are logged in interactively, you will have to re-login for the new limits to take effect.\r\n[2019-01-25T17:49:55,342][INFO ][o.e.e.NodeEnvironment    ] [Sl7aPdf] using [1] data paths, mounts [[/ (rootfs)]], net usable_space [45gb], net total_space [108.1gb], types [rootfs]\r\n[2019-01-25T17:49:55,342][INFO ][o.e.e.NodeEnvironment    ] [Sl7aPdf] heap size [990.7mb], compressed ordinary object pointers [true]\r\n[2019-01-25T17:49:55,344][INFO ][o.e.n.Node               ] [Sl7aPdf] node name derived from node ID [Sl7aPdfCQn6jCqiE04PMhg]; set [node.name] to override\r\n[2019-01-25T17:49:55,345][INFO ][o.e.n.Node               ] [Sl7aPdf] version[6.5.4], pid[1668], build[default/rpm/d2ef93d/2018-12-17T21:17:40.758843Z], OS[Linux/3.10.0-862.el7.x86_64/amd64], JVM[Oracle Corporation/Java HotSpot(TM) 64-Bit Server VM/1.8.0_201/25.201-b09]\r\n[2019-01-25T17:49:55,345][INFO ][o.e.n.Node               ] [Sl7aPdf] JVM arguments [-Xms1g, -Xmx1g, -XX:+UseConcMarkSweepGC, -XX:CMSInitiatingOccupancyFraction=75, -XX:+UseCMSInitiatingOccupancyOnly, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Djava.io.tmpdir=/tmp/elasticsearch.lgcGnukG, -XX:+HeapDumpOnOutOfMemoryError, -XX:HeapDumpPath=/var/lib/elasticsearch, -XX:ErrorFile=/var/log/elasticsearch/hs_err_pid%p.log, -XX:+PrintGCDetails, -XX:+PrintGCDateStamps, -XX:+PrintTenuringDistribution, -XX:+PrintGCApplicationStoppedTime, -Xloggc:/var/log/elasticsearch/gc.log, -XX:+UseGCLogFileRotation, -XX:NumberOfGCLogFiles=32, -XX:GCLogFileSize=64m, -Des.path.home=/usr/share/elasticsearch, -Des.path.conf=/etc/elasticsearch, -Des.distribution.flavor=default, -Des.distribution.type=rpm]\r\n[2019-01-25T17:49:57,102][INFO ][o.e.p.PluginsService     ] [Sl7aPdf] loaded module [aggs-matrix-stats]\r\n\r\n\r\nMy elasticsearch yaml is:\r\n\r\n\\# ======================== Elasticsearch Configuration \\=========================\r\n\\#\r\n\\# NOTE: Elasticsearch comes with reasonable defaults for most settings.\r\n\\#       Before you set out to tweak and tune the configuration, make sure you\r\n\\#       understand what are you trying to accomplish and the consequences.\r\n\\#\r\n\\# The primary way of configuring a node is via this file. This template lists\r\n\\# the most important settings you may want to configure for a production cluster.\r\n\\#\r\n\\# Please consult the documentation for further information on configuration options:\r\n\\# https://www.elastic.co/guide/en/elasticsearch/reference/index.html\r\n\\#\r\n\\# ---------------------------------- Cluster -----------------------------------\r\n\\#\r\n\\# Use a descriptive name for your cluster:\r\n\\#\r\ncluster.name: elasticsearch\r\n\\#\r\n\\# ------------------------------------ Node ------------------------------------\r\n\\#\r\n\\# Use a descriptive name for the node:\r\n\\#\r\n\\#node.name: node-1\r\n\\#\r\n\\# Add custom attributes to the node:\r\n\\#\r\n\\#node.attr.rack: r1\r\n\\#\r\n\\# ----------------------------------- Paths ------------------------------------\r\n\\#\r\n\\# Path to directory where to store the data (separate multiple locations by comma):\r\n\\#\r\npath.data: /var/lib/elasticsearch\r\n\\#\r\n\\# Path to log files:\r\n\\#\r\npath.logs: /var/log/elasticsearch\r\n\\#\r\n\\# ----------------------------------- Memory -----------------------------------\r\n\\#\r\n\\# Lock the memory on startup:\r\n\\#\r\nbootstrap.memory_lock: true\r\n\\#\r\n\\# Make sure that the heap size is set to about half the memory available\r\n\\# on the system and that the owner of the process is allowed to use this\r\n\\# limit.\r\n\\#\r\n\\# Elasticsearch performs poorly when the system is swapping the memory.\r\n\\#\r\n\\# ---------------------------------- Network -----------------------------------\r\n\\#\r\n\\# Set the bind address to a specific IP (IPv4 or IPv6):\r\n\\#\r\nnetwork.host: 192.168.1.202\r\n\\#\r\n\\# Set a custom port for HTTP:\r\n\\#\r\nhttp.port: 9200\r\n\\#\r\n\\# For more information, consult the network module documentation.\r\n\\#\r\n\\# --------------------------------- Discovery ----------------------------------\r\n\\#\r\n\\# Pass an initial list of hosts to perform discovery when new node is started:\r\n\\# The default list of hosts is [\"127.0.0.1\", \"[::1]\"]\r\n\\#\r\ndiscovery.zen.ping.unicast.hosts: [\"192.168.1.202\"]\r\n\\#\r\n\\# Prevent the \"split brain\" by configuring the majority of nodes (total number of master-eligible nodes \\\\2 + 1):\r\n\\#\r\n\\#discovery.zen.minimum_master_nodes: \r\n\\#\r\n\\# For more information, consult the zen discovery module documentation.\r\n\\#\r\n\\# ---------------------------------- Gateway -----------------------------------\r\n\\#\r\n\\# Block initial recovery after a full cluster restart until N nodes are started:\r\n\\#\r\n\\#gateway.recover_after_nodes: 3\r\n\\#\r\n\\# For more information, consult the gateway module documentation.\r\n\\#\r\n\\# ---------------------------------- Various -----------------------------------\r\n\\#\r\n\\# Require explicit names when deleting indices:\r\n\\#\r\n\\#action.destructive_requires_name: true","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}