{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/51626","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51626/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51626/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51626/events","html_url":"https://github.com/elastic/elasticsearch/issues/51626","id":556965536,"node_id":"MDU6SXNzdWU1NTY5NjU1MzY=","number":51626,"title":"Documentation precision about heap size and docker","user":{"login":"soullivaneuh","id":1698357,"node_id":"MDQ6VXNlcjE2OTgzNTc=","avatar_url":"https://avatars0.githubusercontent.com/u/1698357?v=4","gravatar_id":"","url":"https://api.github.com/users/soullivaneuh","html_url":"https://github.com/soullivaneuh","followers_url":"https://api.github.com/users/soullivaneuh/followers","following_url":"https://api.github.com/users/soullivaneuh/following{/other_user}","gists_url":"https://api.github.com/users/soullivaneuh/gists{/gist_id}","starred_url":"https://api.github.com/users/soullivaneuh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/soullivaneuh/subscriptions","organizations_url":"https://api.github.com/users/soullivaneuh/orgs","repos_url":"https://api.github.com/users/soullivaneuh/repos","events_url":"https://api.github.com/users/soullivaneuh/events{/privacy}","received_events_url":"https://api.github.com/users/soullivaneuh/received_events","type":"User","site_admin":false},"labels":[{"id":114977275,"node_id":"MDU6TGFiZWwxMTQ5NzcyNzU=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Packaging","name":":Delivery/Packaging","color":"0e8a16","default":false,"description":"RPM and deb packaging, tar and zip archives, shell and batch scripts"},{"id":23715,"node_id":"MDU6TGFiZWwyMzcxNQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Edocs","name":">docs","color":"db755e","default":false,"description":"General docs changes"},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"}],"state":"closed","locked":false,"assignee":{"login":"pugnascotia","id":8696382,"node_id":"MDQ6VXNlcjg2OTYzODI=","avatar_url":"https://avatars1.githubusercontent.com/u/8696382?v=4","gravatar_id":"","url":"https://api.github.com/users/pugnascotia","html_url":"https://github.com/pugnascotia","followers_url":"https://api.github.com/users/pugnascotia/followers","following_url":"https://api.github.com/users/pugnascotia/following{/other_user}","gists_url":"https://api.github.com/users/pugnascotia/gists{/gist_id}","starred_url":"https://api.github.com/users/pugnascotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pugnascotia/subscriptions","organizations_url":"https://api.github.com/users/pugnascotia/orgs","repos_url":"https://api.github.com/users/pugnascotia/repos","events_url":"https://api.github.com/users/pugnascotia/events{/privacy}","received_events_url":"https://api.github.com/users/pugnascotia/received_events","type":"User","site_admin":false},"assignees":[{"login":"pugnascotia","id":8696382,"node_id":"MDQ6VXNlcjg2OTYzODI=","avatar_url":"https://avatars1.githubusercontent.com/u/8696382?v=4","gravatar_id":"","url":"https://api.github.com/users/pugnascotia","html_url":"https://github.com/pugnascotia","followers_url":"https://api.github.com/users/pugnascotia/followers","following_url":"https://api.github.com/users/pugnascotia/following{/other_user}","gists_url":"https://api.github.com/users/pugnascotia/gists{/gist_id}","starred_url":"https://api.github.com/users/pugnascotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pugnascotia/subscriptions","organizations_url":"https://api.github.com/users/pugnascotia/orgs","repos_url":"https://api.github.com/users/pugnascotia/repos","events_url":"https://api.github.com/users/pugnascotia/events{/privacy}","received_events_url":"https://api.github.com/users/pugnascotia/received_events","type":"User","site_admin":false}],"milestone":null,"comments":7,"created_at":"2020-01-29T16:13:08Z","updated_at":"2020-11-11T21:54:44Z","closed_at":"2020-02-06T09:34:54Z","author_association":"NONE","active_lock_reason":null,"body":"This is not really a bug report nor a feature request, but a possible documentation issue.\r\n\r\nOn the [docker-compose guideline](https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html#docker), you recommend to use `ES_JAVA_OPTS`, but not on the [jvm.options configuration guide](https://www.elastic.co/guide/en/elasticsearch/reference/master/jvm-options.html).\r\n\r\nWell, the env way looks better with docker. However, I saw a notice on [this guide](https://www.elastic.co/guide/en/elasticsearch/reference/current/heap-size.html): \r\n\r\n> It is also possible to set the heap size via an environment variable. This can be done by commenting out the Xms and Xmx settings in the jvm.options file and setting these values via ES_JAVA_OPTS\r\n\r\nBut the options **are** present on the config file from the official docker image. So, to make it working, I have to build a custom one removing those options:\r\n\r\n```Dockerfile\r\nFROM docker.elastic.co/elasticsearch/elasticsearch:6.3.2 as search\r\nRUN sed --in-place '/^-Xm[s,x]/d' config/jvm.options\r\n```\r\n\r\nOtherwise, the env usage does not work at all.\r\n\r\nI'm maybe missing something, but the options should not be configured by default on the docker image if you recommend to use ENV vars, right?\r\n\r\nI think the Dockerfile and/or the docs need some update/clarification.\r\n\r\nThoughts? ","closed_by":{"login":"pugnascotia","id":8696382,"node_id":"MDQ6VXNlcjg2OTYzODI=","avatar_url":"https://avatars1.githubusercontent.com/u/8696382?v=4","gravatar_id":"","url":"https://api.github.com/users/pugnascotia","html_url":"https://github.com/pugnascotia","followers_url":"https://api.github.com/users/pugnascotia/followers","following_url":"https://api.github.com/users/pugnascotia/following{/other_user}","gists_url":"https://api.github.com/users/pugnascotia/gists{/gist_id}","starred_url":"https://api.github.com/users/pugnascotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pugnascotia/subscriptions","organizations_url":"https://api.github.com/users/pugnascotia/orgs","repos_url":"https://api.github.com/users/pugnascotia/repos","events_url":"https://api.github.com/users/pugnascotia/events{/privacy}","received_events_url":"https://api.github.com/users/pugnascotia/received_events","type":"User","site_admin":false},"performed_via_github_app":null}