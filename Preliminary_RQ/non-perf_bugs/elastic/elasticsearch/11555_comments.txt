[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/111498656","html_url":"https://github.com/elastic/elasticsearch/issues/11555#issuecomment-111498656","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11555","id":111498656,"node_id":"MDEyOklzc3VlQ29tbWVudDExMTQ5ODY1Ng==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-06-12T13:50:34Z","updated_at":"2015-06-12T13:50:34Z","author_association":"CONTRIBUTOR","body":"Hi @vineet85 \n\nYou've uploaded half a recreation which is missing a bunch of stuff.  I can't tell where the problem is without a working example. Please could you update.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/111875444","html_url":"https://github.com/elastic/elasticsearch/issues/11555#issuecomment-111875444","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11555","id":111875444,"node_id":"MDEyOklzc3VlQ29tbWVudDExMTg3NTQ0NA==","user":{"login":"vineet85","id":12549304,"node_id":"MDQ6VXNlcjEyNTQ5MzA0","avatar_url":"https://avatars0.githubusercontent.com/u/12549304?v=4","gravatar_id":"","url":"https://api.github.com/users/vineet85","html_url":"https://github.com/vineet85","followers_url":"https://api.github.com/users/vineet85/followers","following_url":"https://api.github.com/users/vineet85/following{/other_user}","gists_url":"https://api.github.com/users/vineet85/gists{/gist_id}","starred_url":"https://api.github.com/users/vineet85/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vineet85/subscriptions","organizations_url":"https://api.github.com/users/vineet85/orgs","repos_url":"https://api.github.com/users/vineet85/repos","events_url":"https://api.github.com/users/vineet85/events{/privacy}","received_events_url":"https://api.github.com/users/vineet85/received_events","type":"User","site_admin":false},"created_at":"2015-06-14T20:52:33Z","updated_at":"2015-06-14T20:52:33Z","author_association":"NONE","body":"Sorry - here is the complete mapping and steps to re-create:-\n\nMapping:-\n{\n  \"settings\": {\n    \"index\": {\n      \"number_of_replicas\": 1,\n      \"number_of_shards\": 5,\n      \"analysis\": {\n        \"analyzer\": {\n          \"customfieldvalue\": {\n            \"tokenizer\": \"whitespace\",\n            \"filter\": [\n              \"lowercase\"\n            ],\n            \"type\": \"custom\"\n          },\n          \"customfullText\": {\n            \"tokenizer\": \"standard\",\n            \"filter\": [\n              \"lowercase\",\n              \"porter_stem\"\n            ],\n            \"type\": \"custom\"\n          },\n          \"customfullTextExact\": {\n            \"tokenizer\": \"whitespace\",\n            \"type\": \"custom\"\n          }\n        }\n      }\n    }\n  },\n  \"mappings\": {\n    \"document\": {\n      \"_all\": {\n        \"enabled\": false\n      },\n      \"properties\": {}\n    },\n    \"documentmetadatavalue\": {\n      \"_source\": {\n        \"enabled\": true,\n        \"excludes\": [\n          \"fulltext\"\n        ]\n      },\n      \"_all\": {\n        \"enabled\": false\n      },\n      \"_parent\": {\n        \"type\": \"document\"\n      },\n      \"properties\": {\n        \"fieldid\": {\n          \"index\": \"not_analyzed\",\n          \"doc_values\": true,\n          \"type\": \"string\"\n        },\n        \"fieldvalue\": {\n          \"type\": \"multi_field\",\n          \"fields\": {\n            \"fieldvalue\": {\n              \"analyzer\": \"standard\",\n              \"type\": \"string\"\n            },\n            \"original\": {\n              \"index\": \"not_analyzed\",\n              \"doc_values\": true,\n              \"type\": \"string\"\n            },\n            \"stemmed\": {\n              \"analyzer\": \"english\",\n              \"type\": \"string\"\n            },\n            \"exact\": {\n              \"analyzer\": \"customfieldvalue\",\n              \"type\": \"string\"\n            },\n            \"date\": {\n              \"index\": \"not_analyzed\",\n              \"format\": \"date\",\n              \"ignore_malformed\": true,\n              \"type\": \"date\"\n            },\n            \"integer\": {\n              \"index\": \"not_analyzed\",\n              \"doc_values\": true,\n              \"ignore_malformed\": true,\n              \"type\": \"double\"\n            },\n            \"boolean\": {\n              \"index\": \"not_analyzed\",\n              \"type\": \"boolean\"\n            }\n          }\n        },\n        \"parent\": {\n          \"type\": \"string\"\n        },\n        \"fulltext\": {\n          \"type\": \"multi_field\",\n          \"fields\": {\n            \"fulltext\": {\n              \"analyzer\": \"customfullText\",\n              \"type\": \"string\"\n            },\n            \"exact\": {\n              \"analyzer\": \"customfullTextExact\",\n              \"type\": \"string\"\n            }\n          }\n        }\n      }\n    }\n  }\n}\n\nRe-creation:-\nPOST estester/document/1\n{\n\n}\nPOST estester/document/2\n{\n\n}\nPOST estester/document/3\n{\n\n}\n\nPOST /estester/documentmetadatavalue/1?parent=1\n{\n  \"parent\": \"1\",\n  \"fieldid\": \"CREATEDDATE\",\n  \"fieldvalue\": \"06/14/2015\"\n}\n\nPOST /estester/documentmetadatavalue/2?parent=2\n{\n  \"parent\": \"2\",\n  \"fieldid\": \"CREATEDDATE\",\n  \"fieldvalue\": \"06/15/2015\"\n}\n\nPOST /estester/documentmetadatavalue/3?parent=3\n{\n  \"parent\": \"3\",\n  \"fieldid\": \"CREATEDDATE\",\n  \"fieldvalue\": \"06/17/2015\"\n}\n\nPOST /estester/documentmetadatavalue/4?parent=1\n{\n  \"parent\": \"1\",\n  \"fieldid\": \"FILETYPE\",\n  \"fieldvalue\": \"Microsoft Word\"\n}\n\nPOST /estester/documentmetadatavalue/5?parent=2\n{\n  \"parent\": \"2\",\n  \"fieldid\": \"FILETYPE\",\n  \"fieldvalue\": \"PDF\"\n}\n\nPOST /estester/documentmetadatavalue/6?parent=3\n{\n  \"parent\": \"3\",\n  \"fieldid\": \"FILETYPE\",\n  \"fieldvalue\": \"text\"\n}\n\nGET /estester/documentmetadatavalue/_search?search_type=count\n{\n    \"size\": 100,\n    \"aggs\": {\n        \"field_aggregation\": {\n            \"filter\": {\n                \"term\": {\n                    \"fieldid\": \"CREATEDDATE\"\n                }\n            },\n            \"aggs\": {\n                \"field_aggregation_values\": {\n                    \"terms\": {\n                        \"field\": \"fieldvalue.original\",\n                        \"size\": 0\n                    },\n                    \"aggs\": {\n                      \"field_aggregation\": {\n                          \"filter\": {\n                              \"term\": {\n                                  \"fieldid\": \"FILETYPE\"\n                              }\n                          },\n                          \"aggs\": {\n                              \"field_aggregation_values\": {\n                                  \"terms\": {\n                                      \"field\": \"fieldvalue.original\",\n                                      \"size\": 0\n                                  }\n                              }\n                          }\n                      }\n                    }\n                }\n            }\n        }\n    }\n}\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/111975607","html_url":"https://github.com/elastic/elasticsearch/issues/11555#issuecomment-111975607","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11555","id":111975607,"node_id":"MDEyOklzc3VlQ29tbWVudDExMTk3NTYwNw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-06-15T08:25:37Z","updated_at":"2015-06-15T08:25:37Z","author_association":"CONTRIBUTOR","body":"Thanks @vineet85 - You're making a number of mistakes here, but none of them point to bugs in Elasticsearch. A better place to ask this question is in the forum: http://discuss.elastic.co/\n\nthanks\n","performed_via_github_app":null}]