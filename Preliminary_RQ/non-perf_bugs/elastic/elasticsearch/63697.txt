{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/63697","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63697/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63697/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63697/events","html_url":"https://github.com/elastic/elasticsearch/issues/63697","id":721674021,"node_id":"MDU6SXNzdWU3MjE2NzQwMjE=","number":63697,"title":"Expose only a subset of precommit tasks to 3rd party developers","user":{"login":"jakelandis","id":976291,"node_id":"MDQ6VXNlcjk3NjI5MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/976291?v=4","gravatar_id":"","url":"https://api.github.com/users/jakelandis","html_url":"https://github.com/jakelandis","followers_url":"https://api.github.com/users/jakelandis/followers","following_url":"https://api.github.com/users/jakelandis/following{/other_user}","gists_url":"https://api.github.com/users/jakelandis/gists{/gist_id}","starred_url":"https://api.github.com/users/jakelandis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakelandis/subscriptions","organizations_url":"https://api.github.com/users/jakelandis/orgs","repos_url":"https://api.github.com/users/jakelandis/repos","events_url":"https://api.github.com/users/jakelandis/events{/privacy}","received_events_url":"https://api.github.com/users/jakelandis/received_events","type":"User","site_admin":false},"labels":[{"id":106454670,"node_id":"MDU6TGFiZWwxMDY0NTQ2NzA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Build","name":":Delivery/Build","color":"0e8a16","default":false,"description":"Build or test infrastructure"},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"}],"state":"closed","locked":false,"assignee":{"login":"breskeby","id":77300,"node_id":"MDQ6VXNlcjc3MzAw","avatar_url":"https://avatars3.githubusercontent.com/u/77300?v=4","gravatar_id":"","url":"https://api.github.com/users/breskeby","html_url":"https://github.com/breskeby","followers_url":"https://api.github.com/users/breskeby/followers","following_url":"https://api.github.com/users/breskeby/following{/other_user}","gists_url":"https://api.github.com/users/breskeby/gists{/gist_id}","starred_url":"https://api.github.com/users/breskeby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/breskeby/subscriptions","organizations_url":"https://api.github.com/users/breskeby/orgs","repos_url":"https://api.github.com/users/breskeby/repos","events_url":"https://api.github.com/users/breskeby/events{/privacy}","received_events_url":"https://api.github.com/users/breskeby/received_events","type":"User","site_admin":false},"assignees":[{"login":"breskeby","id":77300,"node_id":"MDQ6VXNlcjc3MzAw","avatar_url":"https://avatars3.githubusercontent.com/u/77300?v=4","gravatar_id":"","url":"https://api.github.com/users/breskeby","html_url":"https://github.com/breskeby","followers_url":"https://api.github.com/users/breskeby/followers","following_url":"https://api.github.com/users/breskeby/following{/other_user}","gists_url":"https://api.github.com/users/breskeby/gists{/gist_id}","starred_url":"https://api.github.com/users/breskeby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/breskeby/subscriptions","organizations_url":"https://api.github.com/users/breskeby/orgs","repos_url":"https://api.github.com/users/breskeby/repos","events_url":"https://api.github.com/users/breskeby/events{/privacy}","received_events_url":"https://api.github.com/users/breskeby/received_events","type":"User","site_admin":false}],"milestone":null,"comments":10,"created_at":"2020-10-14T18:10:25Z","updated_at":"2020-11-19T08:45:20Z","closed_at":"2020-11-19T08:45:20Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"The `precommit` task enforces Elasticsearch specific constraints that don't always apply to 3rd party developers. We should not (by default) expose all the `precommit` tasks for plugin developers. Rather, we should differentiate between `internal` and `external` precommit task. \r\n\r\neasy repro:\r\n\r\ninstall https://github.com/spinscale/cookiecutter-elasticsearch-ingest-processor\r\ncookiecutter gh:spinscale/cookiecutter-elasticsearch-ingest-processor\r\naccept all defaults\r\ncd ingest-awesome\r\n./gradlew tasks --all\r\n\r\n```\r\nBuild tasks\r\n-----------\r\nassemble - Assembles the outputs of this project.\r\nbuild - Assembles and tests this project.\r\nbuildDependents - Assembles and tests this project and all projects that depend on it.\r\nbuildNeeded - Assembles and tests this project and all projects it depends on.\r\nclasses - Assembles main classes.\r\nclean - Deletes the build directory.\r\njar - Assembles a jar archive containing the main classes.\r\njavadocJar - Assembles a jar containing javadocs.\r\nsourcesJar - Assembles a jar containing source files.\r\ntestClasses - Assembles test classes.\r\n\r\nBuild Setup tasks\r\n-----------------\r\ninit - Initializes a new Gradle build.\r\nwrapper - Generates Gradle wrapper files.\r\n\r\nDocumentation tasks\r\n-------------------\r\njavadoc - Generates Javadoc API documentation for the main source code.\r\n\r\nES cluster formation tasks\r\n--------------------------\r\nlistTestClusters - Lists all ES clusters configured for this project\r\n\r\nHelp tasks\r\n----------\r\nbuildEnvironment - Displays all buildscript dependencies declared in root project 'ingest-awesome'.\r\ncomponents - Displays the components produced by root project 'ingest-awesome'. [incubating]\r\ndependencies - Displays all dependencies declared in root project 'ingest-awesome'.\r\ndependencyInsight - Displays the insight into a specific dependency in root project 'ingest-awesome'.\r\ndependentComponents - Displays the dependent components of components in root project 'ingest-awesome'. [incubating]\r\nhelp - Displays a help message.\r\nmodel - Displays the configuration model of root project 'ingest-awesome'. [incubating]\r\noutgoingVariants - Displays the outgoing variants of root project 'ingest-awesome'.\r\nprojects - Displays the sub-projects of root project 'ingest-awesome'.\r\nproperties - Displays the properties of root project 'ingest-awesome'.\r\ntasks - Displays the tasks runnable from root project 'ingest-awesome'.\r\n\r\nIDE tasks\r\n---------\r\ncleanIdea - Cleans IDEA project files (IML, IPR)\r\nidea - Generates IDEA project files (IML, IPR, IWS)\r\nopenIdea - Opens the IDEA project\r\n\r\nPublishing tasks\r\n----------------\r\ngenerateMetadataFileForNebulaPublication - Generates the Gradle metadata file for publication 'nebula'.\r\ngeneratePomFileForNebulaPublication - Generates the Maven POM file for publication 'nebula'.\r\npublish - Publishes all publications produced by this project.\r\npublishNebulaPublicationToMavenLocal - Publishes Maven publication 'nebula' to the local Maven repository.\r\npublishToMavenLocal - Publishes all Maven publications produced by this project to the local Maven cache.\r\n\r\nVerification tasks\r\n------------------\r\ncheck - Runs all checks.\r\nprecommit - Runs all non-test checks\r\ntest - Runs the unit tests.\r\n\r\nOther tasks\r\n-----------\r\nbundlePlugin\r\ncheckstyle\r\ncheckstyleMain - Run Checkstyle analysis for main classes\r\ncheckstyleTest - Run Checkstyle analysis for test classes\r\ncleanIdeaModule\r\ncleanIdeaProject\r\ncleanIdeaWorkspace\r\ncompileJava - Compiles main Java source.\r\ncompileTestJava - Compiles test Java source.\r\ncopyCheckstyleConf\r\ncopyPluginPropertiesTemplate\r\ncopyRestApiSpecsTask\r\ncopyYamlTestsTask\r\ndependenciesInfo - Create a CSV file with dependencies information.\r\ndependencyLicenses\r\nextract-linux-x64-jdk-adoptopenjdk-8u242+b08\r\nextractElasticsearch7.9.2\r\nfilepermissions - Checks java source files for correct file permissions\r\nforbiddenApis - Runs forbidden-apis checks.\r\nforbiddenApisMain - Runs forbidden-apis checks on 'main' classes.\r\nforbiddenApisResources\r\nforbiddenApisTest - Runs forbidden-apis checks on 'test' classes.\r\nforbiddenPatterns - Checks source files for invalid patterns like nocommits or tabs\r\ngenerateNotice - Create a notice file from dependencies\r\ngeneratePom\r\nideaModule - Generates IDEA module files (IML)\r\nideaProject - Generates IDEA project file (IPR)\r\nideaWorkspace - Generates an IDEA workspace file (IWS)\r\nintegTest\r\nintegTestRunner\r\njarHell - Runs CheckJarHell on the configured classpath\r\nlicenseHeaders - Checks sources for missing, incorrect, or unacceptable license headers\r\nloggerUsageCheck - Runs LoggerUsageCheck on output directories of all source sets\r\npluginProperties\r\nprepareKotlinBuildScriptModel\r\nprocessResources - Processes main resources.\r\nprocessTestResources - Processes test resources.\r\nrun\r\ntestingConventions - Tests various testing conventions\r\nthirdPartyAudit\r\nthirdPartyAuditResources\r\nupdateShas - Updates the sha files for the dependencyLicenses check\r\nvalidateNebulaPom\r\nvalidatePom\r\n\r\n```\r\n\r\n","closed_by":{"login":"breskeby","id":77300,"node_id":"MDQ6VXNlcjc3MzAw","avatar_url":"https://avatars3.githubusercontent.com/u/77300?v=4","gravatar_id":"","url":"https://api.github.com/users/breskeby","html_url":"https://github.com/breskeby","followers_url":"https://api.github.com/users/breskeby/followers","following_url":"https://api.github.com/users/breskeby/following{/other_user}","gists_url":"https://api.github.com/users/breskeby/gists{/gist_id}","starred_url":"https://api.github.com/users/breskeby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/breskeby/subscriptions","organizations_url":"https://api.github.com/users/breskeby/orgs","repos_url":"https://api.github.com/users/breskeby/repos","events_url":"https://api.github.com/users/breskeby/events{/privacy}","received_events_url":"https://api.github.com/users/breskeby/received_events","type":"User","site_admin":false},"performed_via_github_app":null}