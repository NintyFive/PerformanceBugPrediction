[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/245712806","html_url":"https://github.com/elastic/elasticsearch/issues/20392#issuecomment-245712806","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20392","id":245712806,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NTcxMjgwNg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-09-08T19:30:18Z","updated_at":"2016-09-08T19:30:18Z","author_association":"CONTRIBUTOR","body":"@jimferenczi would you mind taking a look?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/245884247","html_url":"https://github.com/elastic/elasticsearch/issues/20392#issuecomment-245884247","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20392","id":245884247,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NTg4NDI0Nw==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2016-09-09T11:05:42Z","updated_at":"2016-09-09T11:05:42Z","author_association":"MEMBER","body":"@clintongormley, I opened https://github.com/elastic/elasticsearch/pull/20400 \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/279694959","html_url":"https://github.com/elastic/elasticsearch/issues/20392#issuecomment-279694959","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20392","id":279694959,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTY5NDk1OQ==","user":{"login":"vinothkgithub","id":25769399,"node_id":"MDQ6VXNlcjI1NzY5Mzk5","avatar_url":"https://avatars1.githubusercontent.com/u/25769399?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothkgithub","html_url":"https://github.com/vinothkgithub","followers_url":"https://api.github.com/users/vinothkgithub/followers","following_url":"https://api.github.com/users/vinothkgithub/following{/other_user}","gists_url":"https://api.github.com/users/vinothkgithub/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothkgithub/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothkgithub/subscriptions","organizations_url":"https://api.github.com/users/vinothkgithub/orgs","repos_url":"https://api.github.com/users/vinothkgithub/repos","events_url":"https://api.github.com/users/vinothkgithub/events{/privacy}","received_events_url":"https://api.github.com/users/vinothkgithub/received_events","type":"User","site_admin":false},"created_at":"2017-02-14T12:29:25Z","updated_at":"2017-02-14T12:29:25Z","author_association":"NONE","body":"Wildcards support with FunctionScoreQuery is issue is fixed ? If yes in which version of ES it is supported? Is there a  patch available to fix this issue in ES 2.4.0 version?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/279695227","html_url":"https://github.com/elastic/elasticsearch/issues/20392#issuecomment-279695227","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20392","id":279695227,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTY5NTIyNw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-02-14T12:30:51Z","updated_at":"2017-02-14T12:30:51Z","author_association":"CONTRIBUTOR","body":"@vinothkgithub see https://github.com/elastic/elasticsearch/pull/20400 - it's fixed in 2.4.1","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/279713342","html_url":"https://github.com/elastic/elasticsearch/issues/20392#issuecomment-279713342","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20392","id":279713342,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTcxMzM0Mg==","user":{"login":"vinothkgithub","id":25769399,"node_id":"MDQ6VXNlcjI1NzY5Mzk5","avatar_url":"https://avatars1.githubusercontent.com/u/25769399?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothkgithub","html_url":"https://github.com/vinothkgithub","followers_url":"https://api.github.com/users/vinothkgithub/followers","following_url":"https://api.github.com/users/vinothkgithub/following{/other_user}","gists_url":"https://api.github.com/users/vinothkgithub/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothkgithub/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothkgithub/subscriptions","organizations_url":"https://api.github.com/users/vinothkgithub/orgs","repos_url":"https://api.github.com/users/vinothkgithub/repos","events_url":"https://api.github.com/users/vinothkgithub/events{/privacy}","received_events_url":"https://api.github.com/users/vinothkgithub/received_events","type":"User","site_admin":false},"created_at":"2017-02-14T13:57:21Z","updated_at":"2017-02-14T13:57:21Z","author_association":"NONE","body":"Tried the below query in 2.4.1 and 2.4.4 but it is not highlighting wildcard search in FunctionScoreQuery Any suggestions ?\r\nRequest Query:\r\n\r\n{\r\n  \"query\" : {\r\n    \"function_score\" : {\r\n      \"query\" : {\r\n        \"function_score\" : {\r\n          \"query\" : {\r\n            \"query_string\" : {\r\n                \"fields\":[\"content\",\"title\"],\r\n              \"query\" : \"rec*\",\r\n              \"default_operator\" : \"and\",\r\n              \"auto_generate_phrase_queries\" : false\r\n            }\r\n          },\r\n          \"functions\" : [ {\r\n            \"filter\" : {\r\n              \"match\" : {\r\n                \"content\" : {\r\n                  \"query\" : \"rec*\",\r\n                  \"type\" : \"phrase\"\r\n                }\r\n              }\r\n            },\r\n            \"weight\" : 20.0\r\n          }, {\r\n            \"filter\" : {\r\n              \"match\" : {\r\n                \"title\" : {\r\n                  \"query\" : \"rec*\",\r\n                  \"type\" : \"phrase\"\r\n                }\r\n              }\r\n            },\r\n            \"weight\" : 20.0\r\n          } ]\r\n        }\r\n      },\r\n      \"functions\" : [ ]\r\n    }\r\n  },\r\n  \"explain\" : true,\r\n  \"fields\" : [\"title\",\"content\"],\r\n  \"highlight\" : {\r\n    \"fields\" : {\r\n      \"content\":{},\r\n      \"title\":{}\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nResponse:\r\n{\r\n  \"took\": 19,\r\n  \"timed_out\": false,\r\n  \"_shards\": {\r\n    \"total\": 5,\r\n    \"successful\": 5,\r\n    \"failed\": 0\r\n  },\r\n  \"hits\": {\r\n    \"total\": 3,\r\n    \"max_score\": 20,\r\n    \"hits\": [\r\n      {\r\n        \"_shard\": 0,\r\n        \"_node\": \"gfwiOjHuR-uvQE8cyhRhQA\",\r\n        \"_index\": \"book\",\r\n        \"_type\": \"samplebook\",\r\n        \"_id\": \"AVo83CXrro3C9qemkLzo\",\r\n        \"_score\": 20,\r\n        \"fields\": {\r\n          \"title\": [\r\n            \"book2\"\r\n          ],\r\n          \"content\": [\r\n            \"sample books rec\"\r\n          ]\r\n        },\r\n        \"_explanation\": {\r\n          \"value\": 20,\r\n          \"description\": \"sum of:\",\r\n          \"details\": [\r\n            {\r\n              \"value\": 20,\r\n              \"description\": \"function score, product of:\",\r\n              \"details\": [\r\n                {\r\n                  \"value\": 1,\r\n                  \"description\": \"max of:\",\r\n                  \"details\": [\r\n                    {\r\n                      \"value\": 1,\r\n                      \"description\": \"content:rec*, product of:\",\r\n                      \"details\": [\r\n                        {\r\n                          \"value\": 1,\r\n                          \"description\": \"boost\",\r\n                          \"details\": []\r\n                        },\r\n                        {\r\n                          \"value\": 1,\r\n                          \"description\": \"queryNorm\",\r\n                          \"details\": []\r\n                        }\r\n                      ]\r\n                    }\r\n                  ]\r\n                },\r\n                {\r\n                  \"value\": 20,\r\n                  \"description\": \"min of:\",\r\n                  \"details\": [\r\n                    {\r\n                      \"value\": 20,\r\n                      \"description\": \"function score, score mode [multiply]\",\r\n                      \"details\": [\r\n                        {\r\n                          \"value\": 20,\r\n                          \"description\": \"function score, product of:\",\r\n                          \"details\": [\r\n                            {\r\n                              \"value\": 1,\r\n                              \"description\": \"match filter: content:rec\",\r\n                              \"details\": []\r\n                            },\r\n                            {\r\n                              \"value\": 20,\r\n                              \"description\": \"product of:\",\r\n                              \"details\": [\r\n                                {\r\n                                  \"value\": 1,\r\n                                  \"description\": \"constant score 1.0 - no function provided\",\r\n                                  \"details\": []\r\n                                },\r\n                                {\r\n                                  \"value\": 20,\r\n                                  \"description\": \"weight\",\r\n                                  \"details\": []\r\n                                }\r\n                              ]\r\n                            }\r\n                          ]\r\n                        }\r\n                      ]\r\n                    },\r\n                    {\r\n                      \"value\": 3.4028235e+38,\r\n                      \"description\": \"maxBoost\",\r\n                      \"details\": []\r\n                    }\r\n                  ]\r\n                }\r\n              ]\r\n            },\r\n            {\r\n              \"value\": 0,\r\n              \"description\": \"match on required clause, product of:\",\r\n              \"details\": [\r\n                {\r\n                  \"value\": 0,\r\n                  \"description\": \"# clause\",\r\n                  \"details\": []\r\n                },\r\n                {\r\n                  \"value\": 1,\r\n                  \"description\": \"_type:samplebook, product of:\",\r\n                  \"details\": [\r\n                    {\r\n                      \"value\": 1,\r\n                      \"description\": \"boost\",\r\n                      \"details\": []\r\n                    },\r\n                    {\r\n                      \"value\": 1,\r\n                      \"description\": \"queryNorm\",\r\n                      \"details\": []\r\n                    }\r\n                  ]\r\n                }\r\n              ]\r\n            }\r\n          ]\r\n        }\r\n      },\r\n      {\r\n        \"_shard\": 3,\r\n        \"_node\": \"gfwiOjHuR-uvQE8cyhRhQA\",\r\n        \"_index\": \"book\",\r\n        \"_type\": \"samplebook\",\r\n        \"_id\": \"AVo83AThro3C9qemkLzn\",\r\n        \"_score\": 1,\r\n       \"fields\": {\r\n          \"title\": [\r\n            \"book\"\r\n          ],\r\n          \"content\": [\r\n            \"sample books recom\"\r\n          ]\r\n        },\r\n        \"_explanation\": {\r\n          \"value\": 1,\r\n          \"description\": \"sum of:\",\r\n          \"details\": [\r\n            {\r\n              \"value\": 1,\r\n              \"description\": \"max of:\",\r\n              \"details\": [\r\n                {\r\n                  \"value\": 1,\r\n                  \"description\": \"content:rec*, product of:\",\r\n                  \"details\": [\r\n                    {\r\n                      \"value\": 1,\r\n                      \"description\": \"boost\",\r\n                      \"details\": []\r\n                    },\r\n                    {\r\n                      \"value\": 1,\r\n                      \"description\": \"queryNorm\",\r\n                      \"details\": []\r\n                    }\r\n                  ]\r\n                }\r\n              ]\r\n            },\r\n            {\r\n              \"value\": 0,\r\n              \"description\": \"match on required clause, product of:\",\r\n              \"details\": [\r\n                {\r\n                  \"value\": 0,\r\n                  \"description\": \"# clause\",\r\n                  \"details\": []\r\n                },\r\n                {\r\n                  \"value\": 1,\r\n                  \"description\": \"_type:samplebook, product of:\",\r\n                  \"details\": [\r\n                    {\r\n                      \"value\": 1,\r\n                      \"description\": \"boost\",\r\n                      \"details\": []\r\n                    },\r\n                    {\r\n                      \"value\": 1,\r\n                      \"description\": \"queryNorm\",\r\n                      \"details\": []\r\n                    }\r\n                  ]\r\n                }\r\n              ]\r\n            }\r\n          ]\r\n        }\r\n      },\r\n      {\r\n        \"_shard\": 4,\r\n        \"_node\": \"gfwiOjHuR-uvQE8cyhRhQA\",\r\n        \"_index\": \"book\",\r\n        \"_type\": \"samplebook\",\r\n        \"_id\": \"AVo82-Ufro3C9qemkLzm\",\r\n        \"_score\": 1,\r\n        \"fields\": {\r\n          \"title\": [\r\n            \"book\"\r\n          ],\r\n          \"content\": [\r\n            \"sample books recommended\"\r\n          ]\r\n        },\r\n        \"_explanation\": {\r\n          \"value\": 1,\r\n          \"description\": \"sum of:\",\r\n          \"details\": [\r\n            {\r\n              \"value\": 1,\r\n              \"description\": \"max of:\",\r\n              \"details\": [\r\n                {\r\n                  \"value\": 1,\r\n                  \"description\": \"content:rec*, product of:\",\r\n                  \"details\": [\r\n                    {\r\n                      \"value\": 1,\r\n                      \"description\": \"boost\",\r\n                      \"details\": []\r\n                    },\r\n                    {\r\n                      \"value\": 1,\r\n                      \"description\": \"queryNorm\",\r\n                      \"details\": []\r\n                    }\r\n                  ]\r\n                }\r\n              ]\r\n            },\r\n            {\r\n              \"value\": 0,\r\n              \"description\": \"match on required clause, product of:\",\r\n              \"details\": [\r\n                {\r\n                  \"value\": 0,\r\n                  \"description\": \"# clause\",\r\n                  \"details\": []\r\n                },\r\n                {\r\n                  \"value\": 1,\r\n                  \"description\": \"_type:samplebook, product of:\",\r\n                  \"details\": [\r\n                    {\r\n                      \"value\": 1,\r\n                      \"description\": \"boost\",\r\n                      \"details\": []\r\n                    },\r\n                    {\r\n                      \"value\": 1,\r\n                      \"description\": \"queryNorm\",\r\n                      \"details\": []\r\n                    }\r\n                  ]\r\n                }\r\n              ]\r\n            }\r\n          ]\r\n        }\r\n      }\r\n    ]\r\n  }\r\n}","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/279725486","html_url":"https://github.com/elastic/elasticsearch/issues/20392#issuecomment-279725486","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20392","id":279725486,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTcyNTQ4Ng==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2017-02-14T14:42:57Z","updated_at":"2017-02-14T14:42:57Z","author_association":"MEMBER","body":"> Tried the below query in 2.4.1 and 2.4.4 but it is not highlighting wildcard search in FunctionScoreQuery Any suggestions ?\r\n\r\nYou have a nested `function_score` inside a `function_score`:\r\n````\r\n\"query\" : {\r\n   \"function_score\" : {\r\n       \"query\" : {\r\n           \"function_score\" : {\r\n````\r\n\r\nAny reason why ? I don't see a use case for this but you're right it's not working. The highlighter extracts the query inside the `function_score` but not recursively. \r\nYou can just remove the parent function score in your recreation and the terms are correctly highlighted.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/280003577","html_url":"https://github.com/elastic/elasticsearch/issues/20392#issuecomment-280003577","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20392","id":280003577,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDAwMzU3Nw==","user":{"login":"vinothkgithub","id":25769399,"node_id":"MDQ6VXNlcjI1NzY5Mzk5","avatar_url":"https://avatars1.githubusercontent.com/u/25769399?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothkgithub","html_url":"https://github.com/vinothkgithub","followers_url":"https://api.github.com/users/vinothkgithub/followers","following_url":"https://api.github.com/users/vinothkgithub/following{/other_user}","gists_url":"https://api.github.com/users/vinothkgithub/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothkgithub/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothkgithub/subscriptions","organizations_url":"https://api.github.com/users/vinothkgithub/orgs","repos_url":"https://api.github.com/users/vinothkgithub/repos","events_url":"https://api.github.com/users/vinothkgithub/events{/privacy}","received_events_url":"https://api.github.com/users/vinothkgithub/received_events","type":"User","site_admin":false},"created_at":"2017-02-15T12:56:10Z","updated_at":"2017-02-15T12:56:10Z","author_association":"NONE","body":"Thanks , Tired with one function_score as suggested still it is not highlighting any  configuration required?\r\n\r\n{\r\n      \"query\" : {\r\n        \"function_score\" : {\r\n          \"query\" : {\r\n            \"query_string\" : {\r\n                \"fields\":[\"content\",\"title\"],\r\n              \"query\" : \"rec*\",\r\n              \"default_operator\" : \"and\",\r\n              \"auto_generate_phrase_queries\" : false\r\n            }\r\n          },\r\n          \"functions\" : [ {\r\n            \"filter\" : {\r\n              \"match\" : {\r\n                \"content\" : {\r\n                  \"query\" : \"rec*\",\r\n                  \"type\" : \"phrase\"\r\n                }\r\n              }\r\n            },\r\n            \"weight\" : 20.0\r\n          }, {\r\n            \"filter\" : {\r\n              \"match\" : {\r\n                \"title\" : {\r\n                  \"query\" : \"rec*\",\r\n                  \"type\" : \"phrase\"\r\n                }\r\n              }\r\n            },\r\n            \"weight\" : 20.0\r\n          } ]\r\n        }\r\n      },\r\n  \"explain\" : true,\r\n  \"fields\" : [\"title\",\"content\"],\r\n  \"highlight\" : {\r\n    \"fields\" : {\r\n      \"content\":{},\r\n      \"title\":{}\r\n    }\r\n  }\r\n}\r\n\r\n\r\nResponse:\r\n\r\n{\r\n  \"took\": 17,\r\n  \"timed_out\": false,\r\n  \"_shards\": {\r\n    \"total\": 5,\r\n    \"successful\": 5,\r\n    \"failed\": 0\r\n  },\r\n  \"hits\": {\r\n    \"total\": 3,\r\n    \"max_score\": 1,\r\n    \"hits\": [\r\n      {\r\n        \"_shard\": 0,\r\n        \"_node\": \"1NPwf1MBTcC4hZTIpiTO8Q\",\r\n        \"_index\": \"book\",\r\n        \"_type\": \"samplebook\",\r\n        \"_id\": \"AVo9aOYUmOpf6AthWiL6\",\r\n        \"_score\": 1,\r\n        \"fields\": {\r\n          \"title\": [\r\n            \"samplebook\"\r\n          ],\r\n          \"content\": [\r\n            \"this sample book is recommended\"\r\n          ]\r\n        },\r\n        \"_explanation\": {\r\n          \"value\": 1,\r\n          \"description\": \"sum of:\",\r\n          \"details\": [\r\n            {\r\n              \"value\": 1,\r\n              \"description\": \"max of:\",\r\n              \"details\": [\r\n                {\r\n                  \"value\": 1,\r\n                  \"description\": \"content:rec*, product of:\",\r\n                  \"details\": [\r\n                    {\r\n                      \"value\": 1,\r\n                      \"description\": \"boost\",\r\n                      \"details\": []\r\n                    },\r\n                    {\r\n                      \"value\": 1,\r\n                      \"description\": \"queryNorm\",\r\n                      \"details\": []\r\n                    }\r\n                  ]\r\n                }\r\n              ]\r\n            },\r\n            {\r\n              \"value\": 0,\r\n              \"description\": \"match on required clause, product of:\",\r\n              \"details\": [\r\n                {\r\n                  \"value\": 0,\r\n                  \"description\": \"# clause\",\r\n                  \"details\": []\r\n                },\r\n                {\r\n                  \"value\": 1,\r\n                  \"description\": \"_type:samplebook, product of:\",\r\n                  \"details\": [\r\n                    {\r\n                      \"value\": 1,\r\n                      \"description\": \"boost\",\r\n                      \"details\": []\r\n                    },\r\n                    {\r\n                      \"value\": 1,\r\n                      \"description\": \"queryNorm\",\r\n                      \"details\": []\r\n                    }\r\n                  ]\r\n                }\r\n              ]\r\n            }\r\n          ]\r\n        }\r\n      },\r\n      {\r\n        \"_shard\": 1,\r\n        \"_node\": \"1NPwf1MBTcC4hZTIpiTO8Q\",\r\n        \"_index\": \"book\",\r\n        \"_type\": \"samplebook\",\r\n        \"_id\": \"AVo9aTMomOpf6AthWiL7\",\r\n        \"_score\": 1,\r\n        \"fields\": {\r\n          \"title\": [\r\n            \"samplebook1\"\r\n          ],\r\n          \"content\": [\r\n            \"this sample book is recom\"\r\n          ]\r\n        },\r\n        \"_explanation\": {\r\n          \"value\": 1,\r\n          \"description\": \"sum of:\",\r\n          \"details\": [\r\n            {\r\n              \"value\": 1,\r\n              \"description\": \"max of:\",\r\n              \"details\": [\r\n                {\r\n                  \"value\": 1,\r\n                  \"description\": \"content:rec*, product of:\",\r\n                  \"details\": [\r\n                    {\r\n                      \"value\": 1,\r\n                      \"description\": \"boost\",\r\n                      \"details\": []\r\n                    },\r\n                    {\r\n                      \"value\": 1,\r\n                      \"description\": \"queryNorm\",\r\n                      \"details\": []\r\n                    }\r\n                  ]\r\n                }\r\n              ]\r\n            },\r\n            {\r\n              \"value\": 0,\r\n              \"description\": \"match on required clause, product of:\",\r\n              \"details\": [\r\n                {\r\n                  \"value\": 0,\r\n                  \"description\": \"# clause\",\r\n                  \"details\": []\r\n                },\r\n                {\r\n                  \"value\": 1,\r\n                  \"description\": \"_type:samplebook, product of:\",\r\n                  \"details\": [\r\n                    {\r\n                      \"value\": 1,\r\n                      \"description\": \"boost\",\r\n                      \"details\": []\r\n                    },\r\n                    {\r\n                      \"value\": 1,\r\n                      \"description\": \"queryNorm\",\r\n                      \"details\": []\r\n                    }\r\n                  ]\r\n                }\r\n              ]\r\n            }\r\n          ]\r\n        }\r\n      },\r\n      {\r\n        \"_shard\": 4,\r\n        \"_node\": \"1NPwf1MBTcC4hZTIpiTO8Q\",\r\n        \"_index\": \"book\",\r\n        \"_type\": \"samplebook\",\r\n        \"_id\": \"AVo9aXRBmOpf6AthWiL8\",\r\n        \"_score\": 1,\r\n        \"fields\": {\r\n          \"title\": [\r\n            \"samplebook2\"\r\n          ],\r\n          \"content\": [\r\n            \"this sample book is recorded\"\r\n          ]\r\n        },\r\n        \"_explanation\": {\r\n          \"value\": 1,\r\n          \"description\": \"sum of:\",\r\n          \"details\": [\r\n            {\r\n              \"value\": 1,\r\n              \"description\": \"max of:\",\r\n              \"details\": [\r\n                {\r\n                  \"value\": 1,\r\n                  \"description\": \"content:rec*, product of:\",\r\n                  \"details\": [\r\n                    {\r\n                      \"value\": 1,\r\n                      \"description\": \"boost\",\r\n                      \"details\": []\r\n                    },\r\n                    {\r\n                      \"value\": 1,\r\n                      \"description\": \"queryNorm\",\r\n                      \"details\": []\r\n                    }\r\n                  ]\r\n                }\r\n              ]\r\n            },\r\n            {\r\n              \"value\": 0,\r\n              \"description\": \"match on required clause, product of:\",\r\n              \"details\": [\r\n                {\r\n                  \"value\": 0,\r\n                  \"description\": \"# clause\",\r\n                  \"details\": []\r\n                },\r\n                {\r\n                  \"value\": 1,\r\n                  \"description\": \"_type:samplebook, product of:\",\r\n                  \"details\": [\r\n                    {\r\n                      \"value\": 1,\r\n                      \"description\": \"boost\",\r\n                      \"details\": []\r\n                    },\r\n                    {\r\n                      \"value\": 1,\r\n                      \"description\": \"queryNorm\",\r\n                      \"details\": []\r\n                    }\r\n                  ]\r\n                }\r\n              ]\r\n            }\r\n          ]\r\n        }\r\n      }\r\n    ]\r\n  }\r\n}\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/280009830","html_url":"https://github.com/elastic/elasticsearch/issues/20392#issuecomment-280009830","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20392","id":280009830,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDAwOTgzMA==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2017-02-15T13:25:56Z","updated_at":"2017-02-15T13:25:56Z","author_association":"MEMBER","body":"@vinothkgithub your example works with 2.4.4\r\nThe fix in 2.4.1 was incomplete and required another fix ;)\r\nPlease upgrade to 2.4.4","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/280593716","html_url":"https://github.com/elastic/elasticsearch/issues/20392#issuecomment-280593716","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20392","id":280593716,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDU5MzcxNg==","user":{"login":"vinothkgithub","id":25769399,"node_id":"MDQ6VXNlcjI1NzY5Mzk5","avatar_url":"https://avatars1.githubusercontent.com/u/25769399?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothkgithub","html_url":"https://github.com/vinothkgithub","followers_url":"https://api.github.com/users/vinothkgithub/followers","following_url":"https://api.github.com/users/vinothkgithub/following{/other_user}","gists_url":"https://api.github.com/users/vinothkgithub/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothkgithub/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothkgithub/subscriptions","organizations_url":"https://api.github.com/users/vinothkgithub/orgs","repos_url":"https://api.github.com/users/vinothkgithub/repos","events_url":"https://api.github.com/users/vinothkgithub/events{/privacy}","received_events_url":"https://api.github.com/users/vinothkgithub/received_events","type":"User","site_admin":false},"created_at":"2017-02-17T09:00:01Z","updated_at":"2017-02-17T09:00:01Z","author_association":"NONE","body":"Thanks, it works Good :-)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/284381505","html_url":"https://github.com/elastic/elasticsearch/issues/20392#issuecomment-284381505","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20392","id":284381505,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDM4MTUwNQ==","user":{"login":"rkalhans","id":5341933,"node_id":"MDQ6VXNlcjUzNDE5MzM=","avatar_url":"https://avatars1.githubusercontent.com/u/5341933?v=4","gravatar_id":"","url":"https://api.github.com/users/rkalhans","html_url":"https://github.com/rkalhans","followers_url":"https://api.github.com/users/rkalhans/followers","following_url":"https://api.github.com/users/rkalhans/following{/other_user}","gists_url":"https://api.github.com/users/rkalhans/gists{/gist_id}","starred_url":"https://api.github.com/users/rkalhans/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rkalhans/subscriptions","organizations_url":"https://api.github.com/users/rkalhans/orgs","repos_url":"https://api.github.com/users/rkalhans/repos","events_url":"https://api.github.com/users/rkalhans/events{/privacy}","received_events_url":"https://api.github.com/users/rkalhans/received_events","type":"User","site_admin":false},"created_at":"2017-03-06T12:20:18Z","updated_at":"2017-03-06T12:22:52Z","author_association":"NONE","body":"Hello,\r\n\r\nI tested this in ES 2.4.4 and I can still see this issue when I use wild card in query string. \r\nHere is my query\r\n```\r\nPOST workitemsearchshared_0_1/workItemContract/_search\r\n{\r\n   \"highlight\": {\r\n      \"pre_tags\": [\r\n         \"<highlighthit>\"\r\n      ],\r\n      \"post_tags\": [\r\n         \"</highlighthit>\"\r\n      ],\r\n      \"fields\": {\r\n         \"fields.str|title|system$\": {}\r\n      },\r\n      \"require_field_match\": true\r\n   },\r\n   \"fields\": [\r\n      \"fields.str|title|system$\"\r\n   ],\r\n   \"query\": {\r\n      \"function_score\": {\r\n         \"query\": {\r\n            \"query_string\": {\r\n               \"query\": \"park*\",\r\n               \"fields\": [\r\n                  \"fields.str|title|system$\"\r\n               ]\r\n            }\r\n         },\r\n         \"functions\": [\r\n            {\r\n               \"filter\": {\r\n                  \"term\": {\r\n                     \"fields.str|title|system$\": \"parkour\"\r\n                  }\r\n               },\r\n               \"weight\": 8\r\n            }\r\n         ]\r\n      }\r\n  }\r\n}\r\n```\r\n**Highlighting working here**\r\n\r\n![highitingworking](https://cloud.githubusercontent.com/assets/5341933/23609530/7e2dda2c-0294-11e7-9762-731b1523dc25.PNG)\r\n\r\n**Highlighting not working here**\r\n\r\n![notworking](https://cloud.githubusercontent.com/assets/5341933/23609531/80776a78-0294-11e7-9809-7a82a41c2b62.PNG)\r\n\r\n**Server build etc.**\r\n![server](https://cloud.githubusercontent.com/assets/5341933/23609642/f6273f64-0294-11e7-9428-77054e1a15d1.PNG)\r\n","performed_via_github_app":null}]