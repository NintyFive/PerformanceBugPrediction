[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/604416117","html_url":"https://github.com/elastic/elasticsearch/issues/54261#issuecomment-604416117","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54261","id":604416117,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDQxNjExNw==","user":{"login":"jbogp","id":2500203,"node_id":"MDQ6VXNlcjI1MDAyMDM=","avatar_url":"https://avatars3.githubusercontent.com/u/2500203?v=4","gravatar_id":"","url":"https://api.github.com/users/jbogp","html_url":"https://github.com/jbogp","followers_url":"https://api.github.com/users/jbogp/followers","following_url":"https://api.github.com/users/jbogp/following{/other_user}","gists_url":"https://api.github.com/users/jbogp/gists{/gist_id}","starred_url":"https://api.github.com/users/jbogp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbogp/subscriptions","organizations_url":"https://api.github.com/users/jbogp/orgs","repos_url":"https://api.github.com/users/jbogp/repos","events_url":"https://api.github.com/users/jbogp/events{/privacy}","received_events_url":"https://api.github.com/users/jbogp/received_events","type":"User","site_admin":false},"created_at":"2020-03-26T12:57:58Z","updated_at":"2020-03-26T12:57:58Z","author_association":"NONE","body":"Actually upon further investigation, I found out that removing all numerical fields from the `terms` list makes to rollup behave normally.\r\nNumerical fields should be added in the histogram category not terms. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/604417768","html_url":"https://github.com/elastic/elasticsearch/issues/54261#issuecomment-604417768","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54261","id":604417768,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDQxNzc2OA==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2020-03-26T13:01:32Z","updated_at":"2020-03-26T13:01:32Z","author_association":"MEMBER","body":"@jbogp Was just about to reply to this :)  Glad you fixed your problem, although that still sounds buggy to me... numerics _should_ work with the terms aggregation.  I'll investigate and open a subsequent bug report.  Thanks for raising this!\r\n\r\nRegarding logs, there should be an error log somewhere if the search_failures counter is incrementing.  You'll probably need to track down the node that's running the rollup job to check the search failure there.  You can find the node using the [Tasks API](https://www.elastic.co/guide/en/elasticsearch/reference/current/tasks.html), look for the node running a Rollup task.  And then check those logs.\r\n\r\nAs an aside, we know this is a real pain: there's a todo to expose the \"most recent error\" in the stats somehow, so that you don't have to go digging through logs when something goes wrong.  ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/605651619","html_url":"https://github.com/elastic/elasticsearch/issues/54261#issuecomment-605651619","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/54261","id":605651619,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNTY1MTYxOQ==","user":{"login":"jbogp","id":2500203,"node_id":"MDQ6VXNlcjI1MDAyMDM=","avatar_url":"https://avatars3.githubusercontent.com/u/2500203?v=4","gravatar_id":"","url":"https://api.github.com/users/jbogp","html_url":"https://github.com/jbogp","followers_url":"https://api.github.com/users/jbogp/followers","following_url":"https://api.github.com/users/jbogp/following{/other_user}","gists_url":"https://api.github.com/users/jbogp/gists{/gist_id}","starred_url":"https://api.github.com/users/jbogp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbogp/subscriptions","organizations_url":"https://api.github.com/users/jbogp/orgs","repos_url":"https://api.github.com/users/jbogp/repos","events_url":"https://api.github.com/users/jbogp/events{/privacy}","received_events_url":"https://api.github.com/users/jbogp/received_events","type":"User","site_admin":false},"created_at":"2020-03-29T15:11:07Z","updated_at":"2020-03-29T15:11:07Z","author_association":"NONE","body":"@polyfractal Thank you for replying, I agree it is a bit buggy, have you been able to reproduce it? Also I'll point out that the UI on kibana to create rollup jobs actually shows you the numerical fields of your index when creating the \"terms\" section (whereas it doesn't show the keyword fields in the histogram section), so it feels like it's definitely supposed to work :)\r\n\r\nHope this helps !","performed_via_github_app":null}]