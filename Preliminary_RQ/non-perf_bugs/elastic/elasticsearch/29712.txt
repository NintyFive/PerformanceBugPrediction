{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/29712","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29712/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29712/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29712/events","html_url":"https://github.com/elastic/elasticsearch/issues/29712","id":317447121,"node_id":"MDU6SXNzdWUzMTc0NDcxMjE=","number":29712,"title":"Security index and auto expand replicas","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"labels":[{"id":912837951,"node_id":"MDU6TGFiZWw5MTI4Mzc5NTE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Security/Authentication","name":":Security/Authentication","color":"0e8a16","default":false,"description":"Logging in, Usernames/passwords, Realms (Native/LDAP/AD/SAML/PKI/etc)"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-02-10T17:34:56Z","updated_at":"2018-08-24T18:51:24Z","closed_at":"2018-08-24T18:51:24Z","author_association":"COLLABORATOR","active_lock_reason":null,"body":"*Original comment by @jaymode:*\n\nWhen developing the users and roles API, a decision was made to use auto-expand replicas for the `.security` index so that users/roles were local to every data node (`\"auto_expand_replicas\" : \"0-all\"`). \n\nSecurity also caches users for 20 minutes since the last successful authentication on each node and roles are cached until they have been modified. I feel like we are duplicating efforts here by doing this and should instead use a sane limit for auto-expand replicas. Expanding to all nodes also doesn't really provide much if users are using dedicated client nodes as the user/role still needs to be retrieved from a data node if it is not cached.\n\nSo far we have not seen negative side effects from this, but if we decide to use this index for something with a much higher volume such as sessions, then we are adding a lot of load to the cluster since we have to replicate the operation to every data node.\n\n@jasontedor @bleskes curious on your thoughts about this\n\n\n","closed_by":{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false},"performed_via_github_app":null}