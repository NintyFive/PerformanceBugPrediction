[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/452099755","html_url":"https://github.com/elastic/elasticsearch/issues/37206#issuecomment-452099755","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37206","id":452099755,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjA5OTc1NQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-01-07T22:09:57Z","updated_at":"2019-01-07T22:09:57Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-analytics-geo","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/465905790","html_url":"https://github.com/elastic/elasticsearch/issues/37206#issuecomment-465905790","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37206","id":465905790,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NTkwNTc5MA==","user":{"login":"babadofar","id":379628,"node_id":"MDQ6VXNlcjM3OTYyOA==","avatar_url":"https://avatars2.githubusercontent.com/u/379628?v=4","gravatar_id":"","url":"https://api.github.com/users/babadofar","html_url":"https://github.com/babadofar","followers_url":"https://api.github.com/users/babadofar/followers","following_url":"https://api.github.com/users/babadofar/following{/other_user}","gists_url":"https://api.github.com/users/babadofar/gists{/gist_id}","starred_url":"https://api.github.com/users/babadofar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/babadofar/subscriptions","organizations_url":"https://api.github.com/users/babadofar/orgs","repos_url":"https://api.github.com/users/babadofar/repos","events_url":"https://api.github.com/users/babadofar/events{/privacy}","received_events_url":"https://api.github.com/users/babadofar/received_events","type":"User","site_admin":false},"created_at":"2019-02-21T08:23:19Z","updated_at":"2019-02-21T08:23:19Z","author_association":"NONE","body":"What is the status on this? I really need this for my maps. Anything I could help you out with? the @elastic/es-analytics-geo repo is not public, I guess.  ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/466171700","html_url":"https://github.com/elastic/elasticsearch/issues/37206#issuecomment-466171700","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37206","id":466171700,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NjE3MTcwMA==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2019-02-21T21:22:11Z","updated_at":"2019-02-21T21:22:11Z","author_association":"MEMBER","body":"No concrete status update right now.  We're still discussing how to go about encoding shapes into doc values (there are several limitations/considerations that we need to work around).  When we have some news moving forward -- a plan or something similar -- we'll make an update here :)\r\n\r\n> the elastic/es-analytics-geo repo is not public, I guess.\r\n\r\nThe `@elastic/es-analytics-geo` team is just an alias that we use to ping internal email lists, so that different sub-teams can get notified about new issues in their area.  There's no additional repo or anything like that :)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/474408729","html_url":"https://github.com/elastic/elasticsearch/issues/37206#issuecomment-474408729","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37206","id":474408729,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDQwODcyOQ==","user":{"login":"thomasneirynck","id":1833023,"node_id":"MDQ6VXNlcjE4MzMwMjM=","avatar_url":"https://avatars2.githubusercontent.com/u/1833023?v=4","gravatar_id":"","url":"https://api.github.com/users/thomasneirynck","html_url":"https://github.com/thomasneirynck","followers_url":"https://api.github.com/users/thomasneirynck/followers","following_url":"https://api.github.com/users/thomasneirynck/following{/other_user}","gists_url":"https://api.github.com/users/thomasneirynck/gists{/gist_id}","starred_url":"https://api.github.com/users/thomasneirynck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thomasneirynck/subscriptions","organizations_url":"https://api.github.com/users/thomasneirynck/orgs","repos_url":"https://api.github.com/users/thomasneirynck/repos","events_url":"https://api.github.com/users/thomasneirynck/events{/privacy}","received_events_url":"https://api.github.com/users/thomasneirynck/received_events","type":"User","site_admin":false},"created_at":"2019-03-19T14:58:23Z","updated_at":"2019-03-19T14:58:58Z","author_association":"NONE","body":"This would be a prerequisite for enabling layer-fitting in the Kibana Maps-app. This is now only possible for document-layers backed by a `geo_point` field. cf. https://github.com/elastic/kibana/issues/33509\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/509623854","html_url":"https://github.com/elastic/elasticsearch/issues/37206#issuecomment-509623854","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37206","id":509623854,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTYyMzg1NA==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2019-07-09T12:34:22Z","updated_at":"2019-07-09T12:34:22Z","author_association":"CONTRIBUTOR","body":"I had a look at the in-progress branch, this looks great. I also have some thoughts, which I'm logging here for the record:\r\n - EdgeTree only indexes the minY values, should it also index the maxY, minX and maxX values by alternatively splitting on each of these fields like we do for multi-points?\r\n - Serialization is a bit wasteful in terms of space: we don't need to serialize separately minY, maxY, y1 and y2: we could just recompute minY and maxY at deserialization time? Furthermore we could move from a fixed-length encoding to variable-length. My understanding is that we only leverage fixed length encoding in order to know how many bytes serializing the left child requires before actually serializing it. We could do it by serializing into a BytesStreamOutput first. It makes indexing a bit more memory-intensive, but this sounds worth the space savings to me.\r\n - GeometryTreeReader#intersects iterates over sub geometries linearly and returns true as soon as one matches. Should we build a tree there as well to avoid this linear scan?\r\n - This is the kind of functionality that it would be nice to have microbenchmarks for (the `benchmarks` sub folder in the root directory).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/509739060","html_url":"https://github.com/elastic/elasticsearch/issues/37206#issuecomment-509739060","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37206","id":509739060,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTczOTA2MA==","user":{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false},"created_at":"2019-07-09T17:44:38Z","updated_at":"2019-07-09T17:44:38Z","author_association":"CONTRIBUTOR","body":"thank you for taking a look, Adrien! I generally agree with all of your bullet points.\r\nresponses inline...\r\n\r\n> I had a look at the in-progress branch, this looks great. I also have some thoughts, which I'm logging here for the record:\r\n> \r\n> * EdgeTree only indexes the minY values, should it also index the maxY, minX and maxX values by alternatively splitting on each of these fields like we do for multi-points?\r\n\r\nI will discuss this with Ignacio and Nick, It follows the existing edgetree implementation in Lucene, and it does not do this, most likely for more efficient point-in-polygon calculation using the infinite ray algorithm.\r\n\r\n> * Serialization is a bit wasteful in terms of space: we don't need to serialize separately minY, maxY, y1 and y2: we could just recompute minY and maxY at deserialization time? Furthermore we could move from a fixed-length encoding to variable-length. My understanding is that we only leverage fixed length encoding in order to know how many bytes serializing the left child requires before actually serializing it. We could do it by serializing into a BytesStreamOutput first. It makes indexing a bit more memory-intensive, but this sounds worth the space savings to me.\r\n\r\nI will explore this! I wanted to first get something to benchmark, and then we can iterate to see the tradeoffs in more quantitative terms. I do agree, though, it would be great to reduce the storage size.\r\n\r\n> * GeometryTreeReader#intersects iterates over sub geometries linearly and returns true as soon as one matches. Should we build a tree there as well to avoid this linear scan?\r\n\r\nI forgot to comment this as a TODO, but this is very much a TODO item to make this into a tree. it was left as a linear scan for now to focus on the sub-trees first.\r\n\r\n> * This is the kind of functionality that it would be nice to have microbenchmarks for (the `benchmarks` sub folder in the root directory).\r\n\r\nI wasn't too familiar with this module, I will add a TODO in the meta-issue to add micro-benchmarks here! thank you for the suggestion.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/621420093","html_url":"https://github.com/elastic/elasticsearch/issues/37206#issuecomment-621420093","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37206","id":621420093,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMTQyMDA5Mw==","user":{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false},"created_at":"2020-04-29T19:37:31Z","updated_at":"2020-04-29T19:37:31Z","author_association":"CONTRIBUTOR","body":"This issue has gone through a lot of evolution, so this comment is meant to give an update on where things landed.\r\n\r\nThe work for adding geo_shape support for geo_centroid, geo_bounds, geotile_grid, geohash_grid aggregations was accomplished in x-pack by way of the following PRs:\r\n\r\n- geotile_grid/geohash_grid (https://github.com/elastic/elasticsearch/pull/55966)\r\n- geo_centroid (https://github.com/elastic/elasticsearch/pull/55602)\r\n- geo_bounds (https://github.com/elastic/elasticsearch/pull/55328)\r\n\r\nThis is achieved by implementing by migrating geo_shape mapper registration\r\nto a module (https://github.com/elastic/elasticsearch/pull/53562) and then defining the geo_shape with doc values in the spatial plugin (https://github.com/elastic/elasticsearch/pull/55037)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/624176153","html_url":"https://github.com/elastic/elasticsearch/issues/37206#issuecomment-624176153","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37206","id":624176153,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNDE3NjE1Mw==","user":{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false},"created_at":"2020-05-05T16:57:51Z","updated_at":"2020-05-05T16:57:51Z","author_association":"CONTRIBUTOR","body":"update from the last comment above:\r\n\r\ngeo_bounds, geo_centroid, geotile_grid, geohash_grid support for geo_shape \r\nis now merged and supported in 7.8 and master (8.0).\r\n\r\nClosing this issue to reflect that. at the time of closing Documentation and the topic of geo_distance agg support are still TODOs. documentation is happening shortly, while the geo_distance agg support will require more discussion and future development","performed_via_github_app":null}]