{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/26075","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26075/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26075/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26075/events","html_url":"https://github.com/elastic/elasticsearch/issues/26075","id":248322525,"node_id":"MDU6SXNzdWUyNDgzMjI1MjU=","number":26075,"title":"fatal error on the network layer on es + kibana dashboard system","user":{"login":"lks21c","id":3079144,"node_id":"MDQ6VXNlcjMwNzkxNDQ=","avatar_url":"https://avatars2.githubusercontent.com/u/3079144?v=4","gravatar_id":"","url":"https://api.github.com/users/lks21c","html_url":"https://github.com/lks21c","followers_url":"https://api.github.com/users/lks21c/followers","following_url":"https://api.github.com/users/lks21c/following{/other_user}","gists_url":"https://api.github.com/users/lks21c/gists{/gist_id}","starred_url":"https://api.github.com/users/lks21c/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lks21c/subscriptions","organizations_url":"https://api.github.com/users/lks21c/orgs","repos_url":"https://api.github.com/users/lks21c/repos","events_url":"https://api.github.com/users/lks21c/events{/privacy}","received_events_url":"https://api.github.com/users/lks21c/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-08-07T06:54:49Z","updated_at":"2017-08-07T11:55:37Z","closed_at":"2017-08-07T11:55:36Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Hi, I'm running 11 physical nodes with es and kibana to serve dashboard system using my company's big data.\r\n\r\nI indexed about 500GB data into es and maintain 3 masters, 11 data nodes and 2 client nodes(to avoid cluster failure and to make aggr efficent).\r\n\r\nMy problem is that es client node(which connects to kibana) frequently dies with below logs.\r\n\r\nI suspect client node drops after serving heavy aggregation request.\r\nBut, I'm suspicious why fatal error on the network layer occurs because of heavy aggr.\r\n\r\nSo I want to know the root cause and some configuration to avoid this issue.\r\nI already set memory lock in elasticsearch.yml but is there anything else that I can do?\r\n\r\nThanks for reading this.\r\n\r\n<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`):\r\n5.5.0\r\n\r\n**Plugins installed**: [x-pack]\r\n\r\n**JVM version** (`java -version`):oracle jdk 1.8.0_72\r\n\r\n**OS version** (`uname -a` if on a Unix-like system):centos 6.8\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n\r\n**Steps to reproduce**:\r\n\r\nPlease include a *minimal* but *complete* recreation of the problem, including\r\n(e.g.) index creation, mappings, settings, query etc.  The easier you make for\r\nus to reproduce it, the more likely that somebody will take the time to look at it.\r\n\r\n 1. I think this happens when heavy aggr from kibana is requested.\r\n 2.\r\n 3.\r\n\r\n**Provide logs (if relevant)**:\r\n\r\n\r\n```\r\n[2017-08-07T12:41:03,612][INFO ][o.e.d.z.ZenDiscovery     ] [client-mpalyes06] master_left [{master-mpalyes01}{0eS18FIcSsSPWBAiMEqQLA}{VmvWR8a2SXKJsIdJ_5QCYQ}{mpalyes01}{172.18.100.209:19010}], reason [failed to ping, tried [3] times, each with  maximum [30s] timeout]\r\n[2017-08-07T12:41:03,621][WARN ][o.e.d.z.ZenDiscovery     ] [client-mpalyes06] master left (reason = failed to ping, tried [3] times, each with  maximum [30s] timeout), current nodes: nodes: \r\n   {master-mpalyes01}{0eS18FIcSsSPWBAiMEqQLA}{VmvWR8a2SXKJsIdJ_5QCYQ}{mpalyes01}{172.18.100.209:19010}, master\r\n   {data-mpalyes04}{HHak7ledRhSnbc3X5H6obA}{TNp7jFQ5QJqaUeag5yl9GA}{mpalyes04}{172.18.100.212:19110}\r\n   {data-mpalyes08}{SfKsA6_mT2S6Tfx8cgKnAw}{YLEYX3nvQpmLQBxBoGc7Hw}{mpalyes08}{172.18.100.192:19110}\r\n   {data-mpalyes06}{BkPlDj4sTPqgWRB7pfCmgQ}{vRks3Oy6SKW7nd9c-P7RyA}{mpalyes06}{172.18.100.214:19110}\r\n   {data-mpalyes10}{5zQG38wnRcuC3ga4YoBbMQ}{I1bUw2eLRju58Ar1DPLTcw}{mpalyes10}{172.18.100.193:19110}\r\n   {client-mpalyes05}{HIYj1dn8S8mURRiXJNoVQg}{YtmkHe0zRYepYuqdDwAfgQ}{mpalyes05}{172.18.100.213:19210}\r\n   {data-mpalyes03}{DfTF2Ti4S_WqP4MxWyRMHA}{882rm-0hSRKZnxUM1XRzsA}{mpalyes03}{172.18.100.211:19110}\r\n   {data-mpalyes11}{mHQnmXiBS_WVn4Pu9OlFhA}{gAaGWX7WSbSYI6lVdxkngQ}{mpalyes11}{172.18.100.195:19110}\r\n   {data-mpalyes01}{fOyjaXFwStC84D5ulRSjaQ}{k42YkNN7QAe2oe8dzQtvxg}{mpalyes01}{172.18.100.209:19110}\r\n   {data-mpalyes09}{gQN9UN2XSm2-VtLhGlt1BA}{UXYy3a9yRDC5y6QihliHnQ}{mpalyes09}{172.18.100.194:19110}\r\n   {data-mpalyes05}{RpR888-jR36OkUVekNC9pg}{ciWDC1epSEyf7-xImHaEaA}{mpalyes05}{172.18.100.213:19110}\r\n   {client-mpalyes06}{RFsf_xhhRaC2l9RQ1NfYrw}{MlekE8HlRrKsRYdkIUF_jg}{mpalyes06}{172.18.100.214:19210}, local\r\n   {data-mpalyes07}{C-CsxnULShObXi6m7G-V_Q}{aQb2kg2BQgS8lzMyrfyMXA}{mpalyes07}{172.18.100.131:19110}\r\n   {data-mpalyes02}{Qf7U_EK5QaewJAeEASzpCA}{mc8FfITVSzaSFr7cJ9yZbQ}{mpalyes02}{172.18.100.210:19110}\r\n   {master-mpalyes03}{r53e2-F3T42tjgKJuTF8sg}{_rGpkV6vScmpCVczu6QCnw}{mpalyes03}{172.18.100.211:19010}\r\n   {master-mpalyes02}{ZdhNZbDbQJCWEazRDav_6w}{6rfj1cwhT6SztvdQsQmwqQ}{mpalyes02}{172.18.100.210:19010}\r\n\r\n[2017-08-07T12:41:03,712][ERROR][o.e.t.n.Netty4Utils      ] fatal error on the network layer\r\n\tat org.elasticsearch.transport.netty4.Netty4Utils.maybeDie(Netty4Utils.java:179)\r\n\tat org.elasticsearch.transport.netty4.Netty4MessageChannelHandler.exceptionCaught(Netty4MessageChannelHandler.java:83)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:285)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.notifyHandlerException(AbstractChannelHandlerContext.java:850)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:364)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:297)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:413)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\r\n\tat io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1267)\r\n\tat io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1078)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:489)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:428)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1334)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:926)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:134)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:644)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:544)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:498)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:458)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n[2017-08-07T12:41:03,714][ERROR][o.e.t.n.Netty4Utils      ] fatal error on the network layer\r\n\tat org.elasticsearch.transport.netty4.Netty4Utils.maybeDie(Netty4Utils.java:179)\r\n\tat org.elasticsearch.transport.netty4.Netty4MessageChannelHandler.exceptionCaught(Netty4MessageChannelHandler.java:83)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:285)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.notifyHandlerException(AbstractChannelHandlerContext.java:850)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:364)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:297)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:413)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\r\n\tat io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1267)\r\n\tat io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1078)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:489)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:428)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1334)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:926)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:134)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:644)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:544)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:498)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:458)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n[2017-08-07T12:41:03,715][ERROR][o.e.t.n.Netty4Utils      ] fatal error on the network layer\r\n\tat org.elasticsearch.transport.netty4.Netty4Utils.maybeDie(Netty4Utils.java:179)\r\n\tat org.elasticsearch.transport.netty4.Netty4MessageChannelHandler.exceptionCaught(Netty4MessageChannelHandler.java:83)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:285)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.notifyHandlerException(AbstractChannelHandlerContext.java:850)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:364)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:297)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:413)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\r\n\tat io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1267)\r\n\tat io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1078)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:489)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:428)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1334)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:926)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:134)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:644)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:544)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:498)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:458)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n[2017-08-07T12:41:03,731][ERROR][o.e.t.n.Netty4Utils      ] fatal error on the network layer\r\n\tat org.elasticsearch.transport.netty4.Netty4Utils.maybeDie(Netty4Utils.java:179)\r\n\tat org.elasticsearch.transport.netty4.Netty4MessageChannelHandler.exceptionCaught(Netty4MessageChannelHandler.java:83)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:285)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.notifyHandlerException(AbstractChannelHandlerContext.java:850)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:364)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:297)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:413)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\r\n\tat io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1267)\r\n\tat io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1078)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:489)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:428)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1334)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:926)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:134)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:644)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:544)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:498)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:458)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n[2017-08-07T12:41:03,729][ERROR][o.e.t.n.Netty4Utils      ] fatal error on the network layer\r\n\tat org.elasticsearch.transport.netty4.Netty4Utils.maybeDie(Netty4Utils.java:179)\r\n\tat org.elasticsearch.transport.netty4.Netty4MessageChannelHandler.exceptionCaught(Netty4MessageChannelHandler.java:83)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:285)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.notifyHandlerException(AbstractChannelHandlerContext.java:850)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:364)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:297)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:413)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\r\n\tat io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1267)\r\n\tat io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1078)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:489)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:428)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1334)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:926)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:134)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:644)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:544)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:498)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:458)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n[2017-08-07T12:41:03,789][WARN ][c.f.s.s.t.SearchGuardSSLNettyTransport] [client-mpalyes06] Someone (/172.18.97.58:56650) speaks transport plaintext instead of ssl, will close the channel\r\n[2017-08-07T12:41:03,724][ERROR][o.e.b.ElasticsearchUncaughtExceptionHandler] [client-mpalyes06] fatal error in thread [Thread-8], exiting\r\njava.lang.OutOfMemoryError: Java heap space\r\n[2017-08-07T12:41:17,707][WARN ][o.e.m.j.JvmGcMonitorService] [client-mpalyes06] [gc][old][8507][53] duration [13.6s], collections [1]/[13.9s], total [13.6s]/[7.6m], memory [19.7gb]->[19.8gb]/[19.8gb], all_pools {[young] [1.4gb]->[1.4gb]/[1.4gb]}{[survivor] [81.6mb]->[180.8mb]/[191.3mb]}{[old] [18.1gb]->[18.1gb]/[18.1gb]}\r\n[2017-08-07T12:41:17,709][WARN ][o.e.m.j.JvmGcMonitorService] [client-mpalyes06] [gc][8507] overhead, spent [13.6s] collecting in the last [13.9s]\r\n[2017-08-07T12:42:33,964][WARN ][o.e.m.j.JvmGcMonitorService] [client-mpalyes06] [gc][old][8508][55] duration [26.7s], collections [2]/[13.9s], total [26.7s]/[8.1m], memory [19.8gb]->[19.8gb]/[19.8gb], all_pools {[young] [1.4gb]->[1.4gb]/[1.4gb]}{[survivor] [180.8mb]->[189.9mb]/[191.3mb]}{[old] [18.1gb]->[18.1gb]/[18.1gb]}\r\n[2017-08-07T12:42:33,964][WARN ][o.e.m.j.JvmGcMonitorService] [client-mpalyes06] [gc][8508] overhead, spent [26.7s] collecting in the last [13.9s]\r\n[2017-08-07T12:42:33,964][INFO ][o.e.d.z.ZenDiscovery     ] [client-mpalyes06] failed to send join request to master [{master-mpalyes01}{0eS18FIcSsSPWBAiMEqQLA}{VmvWR8a2SXKJsIdJ_5QCYQ}{mpalyes01}{172.18.100.209:19010}], reason [ElasticsearchTimeoutException[java.util.concurrent.TimeoutException: Timeout waiting for task.]; nested: TimeoutException[Timeout waiting for task.]; ]\r\n[2017-08-07T13:30:55,801][INFO ][o.e.n.Node               ] [client-mpalyes06] initializing ...\r\n[2017-08-07T13:30:56,014][INFO ][o.e.e.NodeEnvironment    ] [client-mpalyes06] using [23] data paths, mounts [[/data23 (/dev/sdx1), /data1 (/dev/sdb1), /data20 (/dev/sdu1), /data2 (/dev/sdc1), /data3 (/dev/sdd1), /data19 (/dev/sdt1), /data21 (/dev/sdv1), /data22 (/dev/sdw1), /data9 (/dev/sdj1), /data13 (/dev/sdn1), /data12 (/dev/sdm1), /data11 (/dev/sdl1), /data8 (/dev/sdi1), /data14 (/dev/sdo1), /data7 (/dev/sdh1), /data15 (/dev/sdp1), /data4 (/dev/sde1), /data18 (/dev/sds1), /data5 (/dev/sdf1), /data17 (/dev/sdr1), /data6 (/dev/sdg1), /data16 (/dev/sdq1), /data10 (/dev/sdk1)]], net usable_space [19.4tb], net total_space [20.5tb], spins? [possibly], types [ext4]\r\n[2017-08-07T13:30:56,015][INFO ][o.e.e.NodeEnvironment    ] [client-mpalyes06] heap size [19.8gb], compressed ordinary object pointers [true]\r\n[2017-08-07T13:30:56,036][INFO ][o.e.n.Node               ] [client-mpalyes06] node name [client-mpalyes06], node ID [RFsf_xhhRaC2l9RQ1NfYrw]\r\n[2017-08-07T13:30:56,036][INFO ][o.e.n.Node               ] [client-mpalyes06] version[5.5.0], pid[35121], build[260387d/2017-06-30T23:16:05.735Z], OS[Linux/2.6.32-642.15.1.el6.x86_64/amd64], JVM[Oracle Corporation/Java HotSpot(TM) 64-Bit Server VM/1.8.0_72/25.72-b15]\r\n[2017-08-07T13:30:56,036][INFO ][o.e.n.Node               ] [client-mpalyes06] JVM arguments [-Xms20g, -Xmx20g, -XX:+UseConcMarkSweepGC, -XX:CMSInitiatingOccupancyFraction=75, -XX:+UseCMSInitiatingOccupancyOnly, -XX:+DisableExplicitGC, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -Djdk.io.permissionsUseCanonicalPath=true, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Dlog4j.skipJansi=true, -XX:+HeapDumpOnOutOfMemoryError, -Des.path.home=/home/hadoop/elasticsearch/elasticsearch-client]\r\n[2017-08-07T13:30:57,715][INFO ][c.f.s.SearchGuardPlugin  ] Clustername: alyes\r\n[2017-08-07T13:30:57,716][WARN ][c.f.s.SearchGuardPlugin  ] \r\n```","closed_by":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"performed_via_github_app":null}