{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/5773","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5773/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5773/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5773/events","html_url":"https://github.com/elastic/elasticsearch/issues/5773","id":31293370,"node_id":"MDU6SXNzdWUzMTI5MzM3MA==","number":5773,"title":"Geo: Valid complex polygons fail to parse","user":{"login":"marcuswr","id":6935249,"node_id":"MDQ6VXNlcjY5MzUyNDk=","avatar_url":"https://avatars1.githubusercontent.com/u/6935249?v=4","gravatar_id":"","url":"https://api.github.com/users/marcuswr","html_url":"https://github.com/marcuswr","followers_url":"https://api.github.com/users/marcuswr/followers","following_url":"https://api.github.com/users/marcuswr/following{/other_user}","gists_url":"https://api.github.com/users/marcuswr/gists{/gist_id}","starred_url":"https://api.github.com/users/marcuswr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcuswr/subscriptions","organizations_url":"https://api.github.com/users/marcuswr/orgs","repos_url":"https://api.github.com/users/marcuswr/repos","events_url":"https://api.github.com/users/marcuswr/events{/privacy}","received_events_url":"https://api.github.com/users/marcuswr/received_events","type":"User","site_admin":false},"labels":[{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":111540092,"node_id":"MDU6TGFiZWwxMTE1NDAwOTI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v1.4.0.Beta1","name":"v1.4.0.Beta1","color":"dddddd","default":false,"description":null},{"id":76184120,"node_id":"MDU6TGFiZWw3NjE4NDEyMA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v2.0.0-beta1","name":"v2.0.0-beta1","color":"dddddd","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"assignees":[{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false}],"milestone":null,"comments":14,"created_at":"2014-04-11T00:12:40Z","updated_at":"2014-07-29T08:40:13Z","closed_at":"2014-07-24T14:19:09Z","author_association":"NONE","active_lock_reason":null,"body":"posting certain valid geojson polygons results in the following exception:\n\norg.elasticsearch.index.mapper.MapperParsingException: failed to parse [geometry] at org.elasticsearch.index.mapper.geo.GeoShapeFieldMapper.parse(GeoShapeFieldMapper.java:249)\n...\n\ncurl -XDELETE 'http://localhost:9200/test'\n\ncurl -XPOST 'http://localhost:9200/test' -d '{\n  \"mappings\":{\n    \"test\":{\n      \"properties\":{\n        \"geometry\":{\n          \"type\":\"geo_shape\",\n          \"tree\":\"quadtree\",\n          \"tree_levels\":14,\n          \"distance_error_pct\":0.0\n        }\n      }\n    }\n  }\n}'\n\ncurl -XPOST 'http://localhost:9200/test/test/1' -d '{\n  \"geometry\":{\n    \"type\":\"Polygon\",\n    \"coordinates\":[\n      [[-85.0018514,37.1311314],\n       [-85.0016645,37.1315293],\n       [-85.0016246,37.1317069],\n       [-85.0016526,37.1318183],\n       [-85.0017119,37.1319196],\n       [-85.0019371,37.1321182],\n       [-85.0019972,37.1322115],\n       [-85.0019942,37.1323234],\n       [-85.0019543,37.1324336],\n       [-85.001906,37.1324985],\n       [-85.001834,37.1325497],\n       [-85.0016965,37.1325907],\n       [-85.0016011,37.1325873],\n       [-85.0014816,37.1325353],\n       [-85.0011755,37.1323509],\n       [-85.000955,37.1322802],\n       [-85.0006241,37.1322529],\n       [-85.0000002,37.1322307],\n       [-84.9994,37.1323001],\n       [-84.999109,37.1322864],\n       [-84.998934,37.1322415],\n       [-84.9988639,37.1321888],\n       [-84.9987841,37.1320944],\n       [-84.9987208,37.131954],\n       [-84.998736,37.1316611],\n       [-84.9988091,37.131334],\n       [-84.9989283,37.1311337],\n       [-84.9991943,37.1309198],\n       [-84.9993573,37.1308459],\n       [-84.9995888,37.1307924],\n       [-84.9998746,37.130806],\n       [-85.0000002,37.1308358],\n       [-85.0004984,37.1310658],\n       [-85.0008008,37.1311625],\n       [-85.0009461,37.1311684],\n       [-85.0011373,37.1311515],\n       [-85.0016455,37.1310491],\n       [-85.0018514,37.1311314]],\n      [[-85.0000002,37.1317672],\n       [-85.0001983,37.1317538],\n       [-85.0003378,37.1317582],\n       [-85.0004697,37.131792],\n       [-85.0008048,37.1319439],\n       [-85.0009342,37.1319838],\n       [-85.0010184,37.1319463],\n       [-85.0010618,37.13184],\n       [-85.0010057,37.1315102],\n       [-85.000977,37.1314403],\n       [-85.0009182,37.1313793],\n       [-85.0005366,37.1312209],\n       [-85.000224,37.1311466],\n       [-85.000087,37.1311356],\n       [-85.0000002,37.1311433],\n       [-84.9995021,37.1312336],\n       [-84.9993308,37.1312859],\n       [-84.9992567,37.1313252],\n       [-84.9991868,37.1314277],\n       [-84.9991593,37.1315381],\n       [-84.9991841,37.1316527],\n       [-84.9992329,37.1317117],\n       [-84.9993527,37.1317788],\n       [-84.9994931,37.1318061],\n       [-84.9996815,37.1317979],\n       [-85.0000002,37.1317672]]]\n  }\n}'\n\nExpected:\n  {\"ok\":true,\"_index\":\"test\",\"_type\":\"test\",\"_id\":\"1\",\"_version\":1}\nActual:\n  {\"error\":\"MapperParsingException[failed to parse [geometry]]; nested: ArrayIndexOutOfBoundsException[-1]; \",\"status\":400}\n\nThis is an issue with es-1.1.0.  The same requests execute successfully against es-0.2.4.\n\nIt is possible to view and validate the data in qgis.\n\n![screen shot 2014-04-10 at 5 01 56 pm](https://cloud.githubusercontent.com/assets/6935249/2675061/cc6cfc7a-c10d-11e3-9829-7c80f8075fe8.png)\n","closed_by":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"performed_via_github_app":null}