[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/95526894","html_url":"https://github.com/elastic/elasticsearch/issues/10704#issuecomment-95526894","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10704","id":95526894,"node_id":"MDEyOklzc3VlQ29tbWVudDk1NTI2ODk0","user":{"login":"nilsga","id":42919,"node_id":"MDQ6VXNlcjQyOTE5","avatar_url":"https://avatars0.githubusercontent.com/u/42919?v=4","gravatar_id":"","url":"https://api.github.com/users/nilsga","html_url":"https://github.com/nilsga","followers_url":"https://api.github.com/users/nilsga/followers","following_url":"https://api.github.com/users/nilsga/following{/other_user}","gists_url":"https://api.github.com/users/nilsga/gists{/gist_id}","starred_url":"https://api.github.com/users/nilsga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nilsga/subscriptions","organizations_url":"https://api.github.com/users/nilsga/orgs","repos_url":"https://api.github.com/users/nilsga/repos","events_url":"https://api.github.com/users/nilsga/events{/privacy}","received_events_url":"https://api.github.com/users/nilsga/received_events","type":"User","site_admin":false},"created_at":"2015-04-23T10:26:07Z","updated_at":"2015-04-23T10:26:07Z","author_association":"NONE","body":"Do you have any thread dumps for when this happens? We seem to have some blocking issues with the TransportClient as well, and I'm curious if it could be the same thing we're experiencing. So comparing the thread dumps would be helpful.\n\nAlso, is this something you experienced after upgrading from some other version? If yes, which version were you running previosly?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/96390979","html_url":"https://github.com/elastic/elasticsearch/issues/10704#issuecomment-96390979","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10704","id":96390979,"node_id":"MDEyOklzc3VlQ29tbWVudDk2MzkwOTc5","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-04-26T14:20:33Z","updated_at":"2015-04-26T14:20:33Z","author_association":"CONTRIBUTOR","body":"@TheGreatYamcha could you upload some code demonstrating the problem?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/96706827","html_url":"https://github.com/elastic/elasticsearch/issues/10704#issuecomment-96706827","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10704","id":96706827,"node_id":"MDEyOklzc3VlQ29tbWVudDk2NzA2ODI3","user":{"login":"TheGreatYamcha","id":10838193,"node_id":"MDQ6VXNlcjEwODM4MTkz","avatar_url":"https://avatars3.githubusercontent.com/u/10838193?v=4","gravatar_id":"","url":"https://api.github.com/users/TheGreatYamcha","html_url":"https://github.com/TheGreatYamcha","followers_url":"https://api.github.com/users/TheGreatYamcha/followers","following_url":"https://api.github.com/users/TheGreatYamcha/following{/other_user}","gists_url":"https://api.github.com/users/TheGreatYamcha/gists{/gist_id}","starred_url":"https://api.github.com/users/TheGreatYamcha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TheGreatYamcha/subscriptions","organizations_url":"https://api.github.com/users/TheGreatYamcha/orgs","repos_url":"https://api.github.com/users/TheGreatYamcha/repos","events_url":"https://api.github.com/users/TheGreatYamcha/events{/privacy}","received_events_url":"https://api.github.com/users/TheGreatYamcha/received_events","type":"User","site_admin":false},"created_at":"2015-04-27T15:25:12Z","updated_at":"2015-04-27T15:25:38Z","author_association":"NONE","body":"I managed to fix the problem. This was the original code:\n\n``` java\nOrFilterBuilder fb = FilterBuilders.orFilter();\n\nfor (String key : indexValueMap.keySet()) {\nfb.add(FilterBuilders.indicesFilter(\n  FilterBuilders.termFilter(\"hashedValue\", indexValueMap.get(key)), key).noMatchFilter(\"none\"));\n}\nFilteredQueryBuilder qb = QueryBuilders.filteredQuery(null, fb);\nSearchResponse sr = client.prepareSearch().setPostFilter(fb).execute().actionGet();\n```\n\nand then I simply changed the last line to:\n\n``` java\nSearchResponse sr = client.prepareSearch().setQuery(qb).execute().actionGet();\n```\n\nand everything worked i.e. I wasn't able to reproduce the problem.\nAlthough the second code was significantly faster even on a single thread, so it might be that with this, there wasn't enough threads to replicate to problem.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/108871478","html_url":"https://github.com/elastic/elasticsearch/issues/10704#issuecomment-108871478","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10704","id":108871478,"node_id":"MDEyOklzc3VlQ29tbWVudDEwODg3MTQ3OA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-06-04T12:24:47Z","updated_at":"2015-06-04T12:24:47Z","author_association":"CONTRIBUTOR","body":"Closed by https://github.com/elastic/elasticsearch/pull/10940\n","performed_via_github_app":null}]