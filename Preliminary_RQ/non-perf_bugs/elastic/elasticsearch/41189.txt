{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/41189","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41189/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41189/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41189/events","html_url":"https://github.com/elastic/elasticsearch/issues/41189","id":433194803,"node_id":"MDU6SXNzdWU0MzMxOTQ4MDM=","number":41189,"title":"[Springboot]Rest High Level Client 7.0 can't use search method, missing  org.elasticsearch.action.search.SearchRequest","user":{"login":"wdrdres3qew5ts21","id":25000903,"node_id":"MDQ6VXNlcjI1MDAwOTAz","avatar_url":"https://avatars2.githubusercontent.com/u/25000903?v=4","gravatar_id":"","url":"https://api.github.com/users/wdrdres3qew5ts21","html_url":"https://github.com/wdrdres3qew5ts21","followers_url":"https://api.github.com/users/wdrdres3qew5ts21/followers","following_url":"https://api.github.com/users/wdrdres3qew5ts21/following{/other_user}","gists_url":"https://api.github.com/users/wdrdres3qew5ts21/gists{/gist_id}","starred_url":"https://api.github.com/users/wdrdres3qew5ts21/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wdrdres3qew5ts21/subscriptions","organizations_url":"https://api.github.com/users/wdrdres3qew5ts21/orgs","repos_url":"https://api.github.com/users/wdrdres3qew5ts21/repos","events_url":"https://api.github.com/users/wdrdres3qew5ts21/events{/privacy}","received_events_url":"https://api.github.com/users/wdrdres3qew5ts21/received_events","type":"User","site_admin":false},"labels":[{"id":493198109,"node_id":"MDU6TGFiZWw0OTMxOTgxMDk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Java%20High%20Level%20REST%20Client","name":":Core/Features/Java High Level REST Client","color":"0e8a16","default":false,"description":"Expressive Java Client for Elasticsearch"},{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":16,"created_at":"2019-04-15T09:58:02Z","updated_at":"2020-06-25T13:48:40Z","closed_at":"2019-04-15T11:45:04Z","author_association":"NONE","active_lock_reason":null,"body":"I use Elasticsearch 7.0 (Latest Release) fresh new installing scratch without any upgrade from previous version. But I confront the problem when I try to use searching method. \r\nIt said that can't find  org.elasticsearch.action.search.SearchRequest.\r\nSpring Boot: 2.1.3.\r\nElasticsearch: 7.0\r\nhttps://www.elastic.co/guide/en/elasticsearch/client/java-rest/current/java-rest-high-getting-started-maven.html\r\n\r\n![image](https://user-images.githubusercontent.com/25000903/56123640-0a5fcc80-5f9f-11e9-8ef5-2cdf2c255128.png)\r\n\r\n![image](https://user-images.githubusercontent.com/25000903/56123844-8528e780-5f9f-11e9-81da-4ac854a1913c.png)\r\n\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/25000903/56122638-1185db00-5f9d-11e9-8be8-3bdb491bb96f.png)\r\n\r\n![image](https://user-images.githubusercontent.com/25000903/56123461-ae954380-5f9e-11e9-85da-9bf82e4f0f3e.png)\r\n\r\n\r\nAn attempt was made to call the method org.elasticsearch.action.search.SearchRequest.isCcsMinimizeRoundtrips()Z but it does not exist. Its class, org.elasticsearch.action.search.SearchRequest\r\n\r\n-------------------------------------------------\r\n\r\n2019-04-15 16:49:32.710  INFO 10024 --- [  restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8585\r\n2019-04-15 16:49:33.923  INFO 10024 --- [  restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8585. Will be trying the next url if available\r\n2019-04-15 16:49:33.923  WARN 10024 --- [  restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for \"http://localhost:8585/eventservice/dev\": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect\r\n2019-04-15 16:49:33.927  INFO 10024 --- [  restartedMain] meetu.eventservice.EventApplication      : The following profiles are active: dev\r\n2019-04-15 16:49:35.784  INFO 10024 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data repositories in DEFAULT mode.\r\n2019-04-15 16:49:35.865  INFO 10024 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 74ms. Found 1 repository interfaces.\r\n2019-04-15 16:49:36.025  WARN 10024 --- [  restartedMain] o.s.boot.actuate.endpoint.EndpointId     : Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.\r\n2019-04-15 16:49:36.676  INFO 10024 --- [  restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=f2bca617-8dd7-3ecd-b3de-930b00a90448\r\n2019-04-15 16:49:36.998  INFO 10024 --- [  restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.autoconfigure.ConfigurationPropertiesRebinderAutoConfiguration' of type [org.springframework.cloud.autoconfigure.ConfigurationPropertiesRebinderAutoConfiguration$$EnhancerBySpringCGLIB$$d500f354] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\r\n2019-04-15 16:49:38.542  INFO 10024 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 3002 (http)\r\n2019-04-15 16:49:38.592  INFO 10024 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2019-04-15 16:49:38.592  INFO 10024 --- [  restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.16]\r\n2019-04-15 16:49:38.624  INFO 10024 --- [  restartedMain] o.a.catalina.core.AprLifecycleListener   : The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: [C:\\Program Files\\Java\\jdk1.8.0_171\\bin;C:\\WINDOWS\\Sun\\Java\\bin;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\Program Files (x86)\\Common Files\\Oracle\\Java\\javapath;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\nodejs\\;C:\\Program Files\\Git\\cmd;C:\\Program Files (x86)\\Yarn\\bin\\;C:\\Program Files\\PuTTY\\;C:\\JMeter\\bin;C:\\Program Files\\Java\\jre1.8.0_171\\bin;C:\\Users\\wdrdr\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\Python 3.6;C:\\Program Files\\Microsoft VS Code\\bin;C:\\Program Files\\Microsoft\\Web Platform Installer\\;C:\\Program Files\\Dart\\dart-sdk\\bin;C:\\Program Files (x86)\\Google\\Chrome\\Application;C:\\Program Files\\IBM\\Cloud\\bin;C:\\Program Files\\Java\\jdk1.8.0_171\\bin;C:\\Program Files\\Intel\\WiFi\\bin\\;C:\\Program Files\\Common Files\\Intel\\WirelessCommon\\;C:\\ProgramData\\chocolatey\\bin;C:\\Program Files\\Cloud Foundry;C:\\Program Files\\OpenVPN\\bin;C:\\gradle-5.3.1\\bin;C:\\Go\\bin;C:\\Users\\wdrdr\\AppData\\Local\\Programs\\Python\\Python36\\Scripts\\;C:\\Users\\wdrdr\\AppData\\Local\\Programs\\Python\\Python36\\;C:\\Users\\wdrdr\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\wdrdr\\AppData\\Roaming\\npm;C:\\Program Files\\Microsoft VS Code\\bin;C:\\Users\\wdrdr\\AppData\\Local\\Yarn\\bin;C:\\Program Files\\Docker Toolbox;C:\\flutter\\bin;C:\\Program Files\\apache-maven-3.5.4\\bin;C:\\Program Files\\Intel\\WiFi\\bin\\;C:\\Program Files\\Common Files\\Intel\\WirelessCommon\\;C:\\Program Files\\heroku\\bin;C:\\Go\\bin;C:\\Users\\wdrdr\\go\\bin;D:\\ProjectCode\\monstache\\windows-amd64;C:\\Users\\wdrdr\\.git-secrets;C:\\Users\\wdrdr\\go\\bin;.]\r\n2019-04-15 16:49:38.942  INFO 10024 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2019-04-15 16:49:38.943  INFO 10024 --- [  restartedMain] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 4985 ms\r\n2019-04-15 16:49:39.275  WARN 10024 --- [  restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.\r\n2019-04-15 16:49:39.275  INFO 10024 --- [  restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.\r\n2019-04-15 16:49:39.303  INFO 10024 --- [  restartedMain] c.netflix.config.DynamicPropertyFactory  : DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@4e7051c3\r\n2019-04-15 16:49:40.940  INFO 10024 --- [  restartedMain] org.mongodb.driver.cluster               : Cluster created with settings {hosts=[137.116.148.122:27017], mode=MULTIPLE, requiredClusterType=UNKNOWN, serverSelectionTimeout='30000 ms', maxWaitQueueSize=500}\r\n2019-04-15 16:49:40.940  INFO 10024 --- [  restartedMain] org.mongodb.driver.cluster               : Adding discovered server 137.116.148.122:27017 to client view of cluster\r\n2019-04-15 16:49:41.203  INFO 10024 --- [6.148.122:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:285}] to 137.116.148.122:27017\r\n2019-04-15 16:49:41.257  INFO 10024 --- [6.148.122:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=137.116.148.122:27017, type=STANDALONE, state=CONNECTED, ok=true, version=ServerVersion{versionList=[4, 0, 9]}, minWireVersion=0, maxWireVersion=7, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=48410200}\r\n2019-04-15 16:49:41.260  INFO 10024 --- [6.148.122:27017] org.mongodb.driver.cluster               : Discovered cluster type of STANDALONE\r\n2019-04-15 16:49:42.757  INFO 10024 --- [  restartedMain] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:286}] to 137.116.148.122:27017\r\n2019-04-15 16:49:45.450  WARN 10024 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : Unable to start LiveReload server\r\nStarting Configuration\r\norg.elasticsearch.client.RestHighLevelClient@74ea932c\r\nDESKTOP-PPV70M1\r\nQcQaiLakT66vkBV26hIrZA\r\ntrue\r\n2019-04-15 16:49:46.108  WARN 10024 --- [  restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'eventController': Unsatisfied dependency expressed through field 'eventService'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'eventService': Unsatisfied dependency expressed through field 'restHighLevelClient'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'restHighLevelClient' defined in class path resource [meetu/eventservice/config/ElasticConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.elasticsearch.client.RestHighLevelClient]: Factory method 'restHighLevelClient' threw exception; nested exception is java.lang.NoSuchMethodError: org.elasticsearch.action.search.SearchRequest.isCcsMinimizeRoundtrips()Z\r\n2019-04-15 16:49:46.114  INFO 10024 --- [  restartedMain] org.mongodb.driver.connection            : Closed connection [connectionId{localValue:2, serverValue:286}] to 137.116.148.122:27017 because the pool has been closed.\r\n2019-04-15 16:49:46.122  INFO 10024 --- [  restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\n2019-04-15 16:49:46.143  INFO 10024 --- [  restartedMain] ConditionEvaluationReportLoggingListener : \r\n\r\nError starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\r\n2019-04-15 16:49:46.148 ERROR 10024 --- [  restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : \r\n\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nAn attempt was made to call the method org.elasticsearch.action.search.SearchRequest.isCcsMinimizeRoundtrips()Z but it does not exist. Its class, org.elasticsearch.action.search.SearchRequest, is available from the following locations:\r\n\r\n    jar:file:/C:/Users/wdrdr/.m2/repository/org/elasticsearch/elasticsearch/6.4.3/elasticsearch-6.4.3.jar!/org/elasticsearch/action/search/SearchRequest.class\r\n\r\nIt was loaded from the following location:\r\n\r\n    file:/C:/Users/wdrdr/.m2/repository/org/elasticsearch/elasticsearch/6.4.3/elasticsearch-6.4.3.jar\r\n\r\n\r\nAction:\r\n\r\nCorrect the classpath of your application so that it contains a single, compatible version of org.elasticsearch.action.search.SearchRequest\r\n\r\n------------------------------------------------\r\n# pom.xml\r\n\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n    <modelVersion>4.0.0</modelVersion>\r\n    <parent>\r\n        <groupId>org.springframework.boot</groupId>\r\n        <artifactId>spring-boot-starter-parent</artifactId>\r\n        <version>2.1.3.RELEASE</version>\r\n        <relativePath/> <!-- lookup parent from repository -->\r\n    </parent>\r\n    <groupId>com.meetu</groupId>\r\n    <artifactId>event</artifactId>\r\n    <version>0.0.1-SNAPSHOT</version>\r\n    <name>EventService</name>\r\n    <description>Demo project for Spring Boot</description>\r\n\r\n    <properties>\r\n        <java.version>1.8</java.version>\r\n        <spring-cloud.version>Greenwich.SR1</spring-cloud.version>\r\n    </properties>\r\n\r\n    <dependencies>\r\n        <dependency>\r\n            <groupId>org.elasticsearch.client</groupId>\r\n            <artifactId>elasticsearch-rest-high-level-client</artifactId>\r\n            <version>7.0.0</version>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-actuator</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework.cloud</groupId>\r\n            <artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework.cloud</groupId>\r\n            <artifactId>spring-cloud-starter-config</artifactId>\r\n        </dependency>\r\n        <!-- Dependency For Generate QR Code -->\r\n        <dependency>\r\n            <groupId>com.google.zxing</groupId>\r\n            <artifactId>core</artifactId>\r\n            <version>3.3.3</version>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>com.google.zxing</groupId>\r\n            <artifactId>javase</artifactId>\r\n            <version>3.3.0</version>\r\n        </dependency>\r\n        <!-- Core Of Spring Framework-->\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-data-mongodb</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-web</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-devtools</artifactId>\r\n            <scope>runtime</scope>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-test</artifactId>\r\n            <scope>test</scope>\r\n        </dependency>\r\n    </dependencies>\r\n    \r\n    <dependencyManagement>\r\n        <dependencies>\r\n            <dependency>\r\n                <groupId>org.springframework.cloud</groupId>\r\n                <artifactId>spring-cloud-dependencies</artifactId>\r\n                <version>${spring-cloud.version}</version>\r\n                <type>pom</type>\r\n                <scope>import</scope>\r\n            </dependency>\r\n        </dependencies>\r\n    </dependencyManagement>\r\n    <build>\r\n        <plugins>\r\n            <plugin>\r\n                <groupId>org.springframework.boot</groupId>\r\n                <artifactId>spring-boot-maven-plugin</artifactId>\r\n            </plugin>\r\n        </plugins>\r\n    </build>\r\n\r\n</project>\r\n\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}