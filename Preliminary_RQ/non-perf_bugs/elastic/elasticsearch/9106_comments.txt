[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69311793","html_url":"https://github.com/elastic/elasticsearch/issues/9106#issuecomment-69311793","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9106","id":69311793,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MzExNzkz","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-01-09T09:31:49Z","updated_at":"2015-01-09T09:31:49Z","author_association":"CONTRIBUTOR","body":"Could this be related to https://github.com/elasticsearch/elasticsearch/issues/9126? If the index creation API starts waiting for yellow by default then maybe the health status could only take into account the newly created index once the index creation request terminates (including timeouts)?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/132948479","html_url":"https://github.com/elastic/elasticsearch/issues/9106#issuecomment-132948479","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9106","id":132948479,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMjk0ODQ3OQ==","user":{"login":"barakcoh","id":566186,"node_id":"MDQ6VXNlcjU2NjE4Ng==","avatar_url":"https://avatars3.githubusercontent.com/u/566186?v=4","gravatar_id":"","url":"https://api.github.com/users/barakcoh","html_url":"https://github.com/barakcoh","followers_url":"https://api.github.com/users/barakcoh/followers","following_url":"https://api.github.com/users/barakcoh/following{/other_user}","gists_url":"https://api.github.com/users/barakcoh/gists{/gist_id}","starred_url":"https://api.github.com/users/barakcoh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/barakcoh/subscriptions","organizations_url":"https://api.github.com/users/barakcoh/orgs","repos_url":"https://api.github.com/users/barakcoh/repos","events_url":"https://api.github.com/users/barakcoh/events{/privacy}","received_events_url":"https://api.github.com/users/barakcoh/received_events","type":"User","site_admin":false},"created_at":"2015-08-20T09:20:15Z","updated_at":"2015-08-20T09:20:15Z","author_association":"NONE","body":"+1\n\nMarvel is causing us a sub-second `red` status _every day_ at midnight and it's quite annoying to constantly see it in the `Shard Allocation` section. We also have the above alert in place. If it happens to query the cluster at that exact time people will get a Twillio call in the middle of the night which is less than ideal.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/145568655","html_url":"https://github.com/elastic/elasticsearch/issues/9106#issuecomment-145568655","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9106","id":145568655,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NTU2ODY1NQ==","user":{"login":"jhansen-tt","id":10874004,"node_id":"MDQ6VXNlcjEwODc0MDA0","avatar_url":"https://avatars0.githubusercontent.com/u/10874004?v=4","gravatar_id":"","url":"https://api.github.com/users/jhansen-tt","html_url":"https://github.com/jhansen-tt","followers_url":"https://api.github.com/users/jhansen-tt/followers","following_url":"https://api.github.com/users/jhansen-tt/following{/other_user}","gists_url":"https://api.github.com/users/jhansen-tt/gists{/gist_id}","starred_url":"https://api.github.com/users/jhansen-tt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jhansen-tt/subscriptions","organizations_url":"https://api.github.com/users/jhansen-tt/orgs","repos_url":"https://api.github.com/users/jhansen-tt/repos","events_url":"https://api.github.com/users/jhansen-tt/events{/privacy}","received_events_url":"https://api.github.com/users/jhansen-tt/received_events","type":"User","site_admin":false},"created_at":"2015-10-05T15:24:41Z","updated_at":"2015-10-05T15:24:41Z","author_association":"NONE","body":"+1\nWhat can I do to help fix this?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/149368818","html_url":"https://github.com/elastic/elasticsearch/issues/9106#issuecomment-149368818","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9106","id":149368818,"node_id":"MDEyOklzc3VlQ29tbWVudDE0OTM2ODgxOA==","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"created_at":"2015-10-19T22:44:48Z","updated_at":"2015-10-19T22:44:48Z","author_association":"MEMBER","body":"+1 Use case:  Indexing a ton of data via Logstash _hourly_ indices and seeing red every hour ..\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/149641600","html_url":"https://github.com/elastic/elasticsearch/issues/9106#issuecomment-149641600","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9106","id":149641600,"node_id":"MDEyOklzc3VlQ29tbWVudDE0OTY0MTYwMA==","user":{"login":"mikemccand","id":796508,"node_id":"MDQ6VXNlcjc5NjUwOA==","avatar_url":"https://avatars0.githubusercontent.com/u/796508?v=4","gravatar_id":"","url":"https://api.github.com/users/mikemccand","html_url":"https://github.com/mikemccand","followers_url":"https://api.github.com/users/mikemccand/followers","following_url":"https://api.github.com/users/mikemccand/following{/other_user}","gists_url":"https://api.github.com/users/mikemccand/gists{/gist_id}","starred_url":"https://api.github.com/users/mikemccand/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikemccand/subscriptions","organizations_url":"https://api.github.com/users/mikemccand/orgs","repos_url":"https://api.github.com/users/mikemccand/repos","events_url":"https://api.github.com/users/mikemccand/events{/privacy}","received_events_url":"https://api.github.com/users/mikemccand/received_events","type":"User","site_admin":false},"created_at":"2015-10-20T17:34:06Z","updated_at":"2015-10-20T17:34:06Z","author_association":"CONTRIBUTOR","body":"+1, the cluster should never go red unless data loss has occurred ... this is a nasty bug in our cluster health.\n\nIt's like the smoke alarms that go off in my house when it's too dusty or we are cooking something \"unusual\".\n\n#9126 seems very much related.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/149656987","html_url":"https://github.com/elastic/elasticsearch/issues/9106#issuecomment-149656987","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9106","id":149656987,"node_id":"MDEyOklzc3VlQ29tbWVudDE0OTY1Njk4Nw==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-10-20T18:27:30Z","updated_at":"2015-10-20T18:27:30Z","author_association":"MEMBER","body":"@mikemccand it is related though slightly different. Even if we hold back the create index response until the index is green/yellow etc an independent monitoring of cluster health will report it's status.\n\nI'm +100 on solving this but I couldn't come up - to date - with a proper solution. When we create an index we add unassigned primaries + replicas to the routing table. We try to assign the primaries immediately (which may fail because of throttling) and publish the cluster state to the nodes for the primaries to initialize. Here lies the problem - a cluster state with initializing primaries is technically red. Only once the shards are started do we move to yellow. One we could say that a cluster health should ignore initialzing/unassigned shards which are guaranteed to not contain data but then what happens when those primaries can _not_ be assigned (because of allocation filtering or whatever)? we should still communicate that somehow as the situation is wrong. I'd love to hear an elegant suggestion here... \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/149669939","html_url":"https://github.com/elastic/elasticsearch/issues/9106#issuecomment-149669939","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9106","id":149669939,"node_id":"MDEyOklzc3VlQ29tbWVudDE0OTY2OTkzOQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2015-10-20T19:06:14Z","updated_at":"2015-10-20T19:06:14Z","author_association":"CONTRIBUTOR","body":"I had this trouble to - every time I did an online mapping change I had to rebuild the index and stream one index to another - and I had 1600 indexes to do. Icinga generally thought Elasticsearch was flapping at that time because it was.\n\nMaybe ignore indexes less than 60 seconds old in overall cluster state. The index itself should be red, but maybe not the whole cluster.\n\nAny solution to this is going to break a whole lot of tests somewhere but is probably worth it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/159386340","html_url":"https://github.com/elastic/elasticsearch/issues/9106#issuecomment-159386340","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9106","id":159386340,"node_id":"MDEyOklzc3VlQ29tbWVudDE1OTM4NjM0MA==","user":{"login":"felipegs","id":420000,"node_id":"MDQ6VXNlcjQyMDAwMA==","avatar_url":"https://avatars3.githubusercontent.com/u/420000?v=4","gravatar_id":"","url":"https://api.github.com/users/felipegs","html_url":"https://github.com/felipegs","followers_url":"https://api.github.com/users/felipegs/followers","following_url":"https://api.github.com/users/felipegs/following{/other_user}","gists_url":"https://api.github.com/users/felipegs/gists{/gist_id}","starred_url":"https://api.github.com/users/felipegs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/felipegs/subscriptions","organizations_url":"https://api.github.com/users/felipegs/orgs","repos_url":"https://api.github.com/users/felipegs/repos","events_url":"https://api.github.com/users/felipegs/events{/privacy}","received_events_url":"https://api.github.com/users/felipegs/received_events","type":"User","site_admin":false},"created_at":"2015-11-24T19:50:42Z","updated_at":"2015-11-24T19:50:42Z","author_association":"NONE","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/164555334","html_url":"https://github.com/elastic/elasticsearch/issues/9106#issuecomment-164555334","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9106","id":164555334,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NDU1NTMzNA==","user":{"login":"bashok001","id":2344626,"node_id":"MDQ6VXNlcjIzNDQ2MjY=","avatar_url":"https://avatars2.githubusercontent.com/u/2344626?v=4","gravatar_id":"","url":"https://api.github.com/users/bashok001","html_url":"https://github.com/bashok001","followers_url":"https://api.github.com/users/bashok001/followers","following_url":"https://api.github.com/users/bashok001/following{/other_user}","gists_url":"https://api.github.com/users/bashok001/gists{/gist_id}","starred_url":"https://api.github.com/users/bashok001/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bashok001/subscriptions","organizations_url":"https://api.github.com/users/bashok001/orgs","repos_url":"https://api.github.com/users/bashok001/repos","events_url":"https://api.github.com/users/bashok001/events{/privacy}","received_events_url":"https://api.github.com/users/bashok001/received_events","type":"User","site_admin":false},"created_at":"2015-12-14T20:49:58Z","updated_at":"2015-12-14T20:49:58Z","author_association":"NONE","body":"+1 Very much needed. Our alarms are going off every couple of days. I worry that continuing the practice of waiting it out will one day cost us dearly one day when there is a real problem.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/199940917","html_url":"https://github.com/elastic/elasticsearch/issues/9106#issuecomment-199940917","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9106","id":199940917,"node_id":"MDEyOklzc3VlQ29tbWVudDE5OTk0MDkxNw==","user":{"login":"jeffkirk1","id":485983,"node_id":"MDQ6VXNlcjQ4NTk4Mw==","avatar_url":"https://avatars3.githubusercontent.com/u/485983?v=4","gravatar_id":"","url":"https://api.github.com/users/jeffkirk1","html_url":"https://github.com/jeffkirk1","followers_url":"https://api.github.com/users/jeffkirk1/followers","following_url":"https://api.github.com/users/jeffkirk1/following{/other_user}","gists_url":"https://api.github.com/users/jeffkirk1/gists{/gist_id}","starred_url":"https://api.github.com/users/jeffkirk1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeffkirk1/subscriptions","organizations_url":"https://api.github.com/users/jeffkirk1/orgs","repos_url":"https://api.github.com/users/jeffkirk1/repos","events_url":"https://api.github.com/users/jeffkirk1/events{/privacy}","received_events_url":"https://api.github.com/users/jeffkirk1/received_events","type":"User","site_admin":false},"created_at":"2016-03-22T18:02:31Z","updated_at":"2016-03-22T18:40:44Z","author_association":"NONE","body":"+1 I'm experiencing this issue daily as well, coincidental with Marvel index reloads. Elasticsearch 2.2.0. Temporarily disabled Marvel refreshes to compensate but obviously that's not a great long term solution.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/210244977","html_url":"https://github.com/elastic/elasticsearch/issues/9106#issuecomment-210244977","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9106","id":210244977,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMDI0NDk3Nw==","user":{"login":"majormoses","id":3145127,"node_id":"MDQ6VXNlcjMxNDUxMjc=","avatar_url":"https://avatars3.githubusercontent.com/u/3145127?v=4","gravatar_id":"","url":"https://api.github.com/users/majormoses","html_url":"https://github.com/majormoses","followers_url":"https://api.github.com/users/majormoses/followers","following_url":"https://api.github.com/users/majormoses/following{/other_user}","gists_url":"https://api.github.com/users/majormoses/gists{/gist_id}","starred_url":"https://api.github.com/users/majormoses/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/majormoses/subscriptions","organizations_url":"https://api.github.com/users/majormoses/orgs","repos_url":"https://api.github.com/users/majormoses/repos","events_url":"https://api.github.com/users/majormoses/events{/privacy}","received_events_url":"https://api.github.com/users/majormoses/received_events","type":"User","site_admin":false},"created_at":"2016-04-15T01:54:14Z","updated_at":"2016-04-15T01:54:14Z","author_association":"CONTRIBUTOR","body":"@nik9000 \n\n> Maybe ignore indexes less than 60 seconds old in overall cluster state. The index itself should be red, but maybe not the whole cluster.\n\nThis makes sense to me\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/228747185","html_url":"https://github.com/elastic/elasticsearch/issues/9106#issuecomment-228747185","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9106","id":228747185,"node_id":"MDEyOklzc3VlQ29tbWVudDIyODc0NzE4NQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-06-27T13:36:24Z","updated_at":"2016-06-27T13:36:24Z","author_association":"CONTRIBUTOR","body":"Fixed by https://github.com/elastic/elasticsearch/pull/18737\n","performed_via_github_app":null}]