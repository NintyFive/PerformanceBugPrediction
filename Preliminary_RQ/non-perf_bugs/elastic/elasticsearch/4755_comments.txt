[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/91598471","html_url":"https://github.com/elastic/elasticsearch/issues/4755#issuecomment-91598471","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4755","id":91598471,"node_id":"MDEyOklzc3VlQ29tbWVudDkxNTk4NDcx","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2015-04-10T15:50:23Z","updated_at":"2015-04-10T15:50:23Z","author_association":"MEMBER","body":"I think we can add something like this to the indices level of the cluster health API, so something like:\n\n``` json\n{\n  \"active_primary_shards\": 1,\n  \"active_shards\": 1,\n  \"cluster_name\": \"elasticsearch\",\n  \"indices\": {\n    \"test\": {\n      \"active_primary_shards\": 1,\n      \"active_shards\": 1,\n      \"initializing_shards\": 0,\n      \"number_of_replicas\": 1,\n      \"number_of_shards\": 1,\n      \"relocating_shards\": 0,\n      \"status\": \"yellow\",\n      \"unassigned_shards\": 1,\n      \"has_quorum\": true\n    }\n  },\n  \"initializing_shards\": 0,\n  \"number_of_data_nodes\": 1,\n  \"number_of_nodes\": 1,\n  \"number_of_pending_tasks\": 0,\n  \"relocating_shards\": 0,\n  \"status\": \"yellow\",\n  \"timed_out\": false,\n  \"unassigned_shards\": 1\n}\n```\n\n(see the `has_quorum` key)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/91908531","html_url":"https://github.com/elastic/elasticsearch/issues/4755#issuecomment-91908531","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4755","id":91908531,"node_id":"MDEyOklzc3VlQ29tbWVudDkxOTA4NTMx","user":{"login":"rore","id":571498,"node_id":"MDQ6VXNlcjU3MTQ5OA==","avatar_url":"https://avatars2.githubusercontent.com/u/571498?v=4","gravatar_id":"","url":"https://api.github.com/users/rore","html_url":"https://github.com/rore","followers_url":"https://api.github.com/users/rore/followers","following_url":"https://api.github.com/users/rore/following{/other_user}","gists_url":"https://api.github.com/users/rore/gists{/gist_id}","starred_url":"https://api.github.com/users/rore/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rore/subscriptions","organizations_url":"https://api.github.com/users/rore/orgs","repos_url":"https://api.github.com/users/rore/repos","events_url":"https://api.github.com/users/rore/events{/privacy}","received_events_url":"https://api.github.com/users/rore/received_events","type":"User","site_admin":false},"created_at":"2015-04-11T19:15:57Z","updated_at":"2015-04-11T19:15:57Z","author_association":"NONE","body":"Having it per index is still problematic to monitor. The idea here was that the global cluster health indicator will reflect the state. Like today, if you have only one index that isn't fully allocated the cluster health indicates it. But there's a big difference between a \"yellow\" that is caused by some not allocated replicates but still allows writes, and a \"yellow\" when there's no quorum and writes will fail. The cluster health currently doesn't differentiate between those states.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/92100722","html_url":"https://github.com/elastic/elasticsearch/issues/4755#issuecomment-92100722","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4755","id":92100722,"node_id":"MDEyOklzc3VlQ29tbWVudDkyMTAwNzIy","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-04-12T19:04:39Z","updated_at":"2015-04-12T19:04:39Z","author_association":"MEMBER","body":"To me, yellow means “cluster is fully functional albeit not conforming to the required replication factor”. Red means that some operations can not be performed. With this definition in mind, I think we should signal an shard (and thus index & cluster) as red if one can not index into it due to the `write_consistency` settings (which also be `all` , and not `quorum`)\n\n> On 11 Apr 2015, at 21:16, Rotem Hermon notifications@github.com wrote:\n> \n> Having it per index is still problematic to monitor. The idea here was that the global cluster health indicator will reflect the state. Like today, if you have only one index that isn't fully allocated the cluster health indicates it. But there's a big difference between a \"yellow\" that is caused by some not allocated replicates but still allows writes, and a \"yellow\" when there's no quorum and writes will fail. The cluster health currently doesn't differentiate between those states.\n> \n> —\n> Reply to this email directly or view it on GitHub.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/93392641","html_url":"https://github.com/elastic/elasticsearch/issues/4755#issuecomment-93392641","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4755","id":93392641,"node_id":"MDEyOklzc3VlQ29tbWVudDkzMzkyNjQx","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2015-04-15T13:18:56Z","updated_at":"2015-04-15T13:19:11Z","author_association":"MEMBER","body":"I tend to agree with @rore here. We could improve the colors that we use depending on the cluster level `action.write_consistency` setting (note that it can be overridden per request though). I am not a big fan of returning `red` for an index that would be yellow but cannot be written into. Maybe a new color would help. I don't think this is ready to be an adoptme though, given that we are still discussing it? Maybe we should mark for discussion instead? :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/156392577","html_url":"https://github.com/elastic/elasticsearch/issues/4755#issuecomment-156392577","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4755","id":156392577,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NjM5MjU3Nw==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-11-13T10:34:59Z","updated_at":"2015-11-13T10:34:59Z","author_association":"CONTRIBUTOR","body":"We just discussed this in Fixit Friday. Having indices that don't have a quorum reported RED or YELLOW seems problematic, so it appears we would either need to:\n- add a new color (ORANGE?) (@javanna's suggestion)\n- add a new flag (`has_quorum`?) on the index and cluster levels (@dakrone's suggestion)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/249834184","html_url":"https://github.com/elastic/elasticsearch/issues/4755#issuecomment-249834184","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4755","id":249834184,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTgzNDE4NA==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2016-09-27T11:04:47Z","updated_at":"2016-09-27T11:04:47Z","author_association":"MEMBER","body":"@abeyad I think this is no longer applicable with the quorum changes you added at index creation?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/249847756","html_url":"https://github.com/elastic/elasticsearch/issues/4755#issuecomment-249847756","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4755","id":249847756,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTg0Nzc1Ng==","user":{"login":"abeyad","id":1631297,"node_id":"MDQ6VXNlcjE2MzEyOTc=","avatar_url":"https://avatars2.githubusercontent.com/u/1631297?v=4","gravatar_id":"","url":"https://api.github.com/users/abeyad","html_url":"https://github.com/abeyad","followers_url":"https://api.github.com/users/abeyad/followers","following_url":"https://api.github.com/users/abeyad/following{/other_user}","gists_url":"https://api.github.com/users/abeyad/gists{/gist_id}","starred_url":"https://api.github.com/users/abeyad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abeyad/subscriptions","organizations_url":"https://api.github.com/users/abeyad/orgs","repos_url":"https://api.github.com/users/abeyad/repos","events_url":"https://api.github.com/users/abeyad/events{/privacy}","received_events_url":"https://api.github.com/users/abeyad/received_events","type":"User","site_admin":false},"created_at":"2016-09-27T12:16:07Z","updated_at":"2016-09-27T12:16:07Z","author_association":"CONTRIBUTOR","body":"The default as of 5.0 is to only require the primary shard to be active before indexing, which is the same as `!= RED`.  The only time we can't in the `YELLOW` cluster state is if `wait_for_active_shards` has been explicitly changed to a different value. In this situation, someone can just pass `wait_for_active_shards` as a request parameter to the indexing operation, and the indexing operation will wait for the requisite number of shards to be active before proceeding with the write (or it will timeout).  So I don't believe there is anything more to do for this.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/249848206","html_url":"https://github.com/elastic/elasticsearch/issues/4755#issuecomment-249848206","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4755","id":249848206,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTg0ODIwNg==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2016-09-27T12:18:22Z","updated_at":"2016-09-27T12:18:22Z","author_association":"MEMBER","body":"Great! I'm going to close this then, we can always re-open if needed\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/250008591","html_url":"https://github.com/elastic/elasticsearch/issues/4755#issuecomment-250008591","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4755","id":250008591,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MDAwODU5MQ==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2016-09-27T21:45:32Z","updated_at":"2016-09-27T21:45:32Z","author_association":"MEMBER","body":"This issue is about getting info through cluster health about whether indexing would pass our \"consistency\" checks. We have now renamed write consistency to wait for active shards and made things much better, but do we have that piece of info now in cluster health? Or maybe we don't need to add it anymore? Sorry if I misunderstood or I am missing anything ;)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/250016275","html_url":"https://github.com/elastic/elasticsearch/issues/4755#issuecomment-250016275","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4755","id":250016275,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MDAxNjI3NQ==","user":{"login":"abeyad","id":1631297,"node_id":"MDQ6VXNlcjE2MzEyOTc=","avatar_url":"https://avatars2.githubusercontent.com/u/1631297?v=4","gravatar_id":"","url":"https://api.github.com/users/abeyad","html_url":"https://github.com/abeyad","followers_url":"https://api.github.com/users/abeyad/followers","following_url":"https://api.github.com/users/abeyad/following{/other_user}","gists_url":"https://api.github.com/users/abeyad/gists{/gist_id}","starred_url":"https://api.github.com/users/abeyad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abeyad/subscriptions","organizations_url":"https://api.github.com/users/abeyad/orgs","repos_url":"https://api.github.com/users/abeyad/repos","events_url":"https://api.github.com/users/abeyad/events{/privacy}","received_events_url":"https://api.github.com/users/abeyad/received_events","type":"User","site_admin":false},"created_at":"2016-09-27T22:20:13Z","updated_at":"2016-09-27T22:20:13Z","author_association":"CONTRIBUTOR","body":"@javanna in 5.0, by default, if the cluster health is YELLOW, it means the \"consistency\" check will pass for write operations. If a user wants to increase the number of active shards to wait on before indexing proceeds, they can do so by setting the `wait_for_active_shards` parameter on the indexing operation, so at that point, they are in control of the value they give.  If a user wants to make sure that the value they give for the indexing operation would proceed, they can always do a health check first e.g. `/_cluster/health/{index_name}?wait_for_active_shards={n}`.  Not sure if that answers your question.. feel free to ask again if I wasn't clear :)\n","performed_via_github_app":null}]