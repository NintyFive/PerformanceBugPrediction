[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/131735739","html_url":"https://github.com/elastic/elasticsearch/issues/12925#issuecomment-131735739","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12925","id":131735739,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMTczNTczOQ==","user":{"login":"wadekun","id":6241705,"node_id":"MDQ6VXNlcjYyNDE3MDU=","avatar_url":"https://avatars1.githubusercontent.com/u/6241705?v=4","gravatar_id":"","url":"https://api.github.com/users/wadekun","html_url":"https://github.com/wadekun","followers_url":"https://api.github.com/users/wadekun/followers","following_url":"https://api.github.com/users/wadekun/following{/other_user}","gists_url":"https://api.github.com/users/wadekun/gists{/gist_id}","starred_url":"https://api.github.com/users/wadekun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wadekun/subscriptions","organizations_url":"https://api.github.com/users/wadekun/orgs","repos_url":"https://api.github.com/users/wadekun/repos","events_url":"https://api.github.com/users/wadekun/events{/privacy}","received_events_url":"https://api.github.com/users/wadekun/received_events","type":"User","site_admin":false},"created_at":"2015-08-17T08:55:33Z","updated_at":"2015-08-17T08:56:29Z","author_association":"NONE","body":"i forget to modify the hosts............\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/477478528","html_url":"https://github.com/elastic/elasticsearch/issues/12925#issuecomment-477478528","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12925","id":477478528,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzQ3ODUyOA==","user":{"login":"lemonsoftltd","id":30117203,"node_id":"MDQ6VXNlcjMwMTE3MjAz","avatar_url":"https://avatars1.githubusercontent.com/u/30117203?v=4","gravatar_id":"","url":"https://api.github.com/users/lemonsoftltd","html_url":"https://github.com/lemonsoftltd","followers_url":"https://api.github.com/users/lemonsoftltd/followers","following_url":"https://api.github.com/users/lemonsoftltd/following{/other_user}","gists_url":"https://api.github.com/users/lemonsoftltd/gists{/gist_id}","starred_url":"https://api.github.com/users/lemonsoftltd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lemonsoftltd/subscriptions","organizations_url":"https://api.github.com/users/lemonsoftltd/orgs","repos_url":"https://api.github.com/users/lemonsoftltd/repos","events_url":"https://api.github.com/users/lemonsoftltd/events{/privacy}","received_events_url":"https://api.github.com/users/lemonsoftltd/received_events","type":"User","site_admin":false},"created_at":"2019-03-28T07:20:11Z","updated_at":"2019-03-28T07:20:11Z","author_association":"NONE","body":"In my centos7, /etc/hosts file is:\r\n> 127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4\r\n> ::1         localhost localhost.localdomain localhost6 localhost6.localdomain6\r\n> 10.0.0.1\tes1\r\n> 10.0.0.2\tes2\r\n\r\nIn master node /etc/elasticsearch/elasticsearch.yml file is:\r\n> cluster.name: delastic\r\n> node.name: master-1\r\n> node.master: true\r\n> node.data: true\r\n> path.data: /var/lib/elasticsearch\r\n> path.logs: /var/log/elasticsearch\r\n> network.host: 10.0.0.1\r\n> http.port: 9200\r\n> discovery.zen.ping.unicast.hosts: [“es1” , “es2”]\r\n\r\nI have DNSMasq instead of nameserver and its dns records. In bash, I checked that:\r\n\r\n> [root@dhpc01 ~]# **ping es2 -c 2**\r\n> PING es2 (10.0.0.2) 56(84) bytes of data.\r\n> 64 bytes from dhpc02 (10.0.0.2): icmp_seq=1 ttl=64 time=0.207 ms\r\n> 64 bytes from dhpc02 (10.0.0.2): icmp_seq=2 ttl=64 time=0.184 ms\r\n> --- es2 ping statistics ---\r\n> 2 packets transmitted, 2 received, 0% packet loss, time 999ms\r\n> rtt min/avg/max/mdev = 0.184/0.195/0.207/0.018 ms\r\n\r\n> [root@dhpc01 ~]# **nslookup es2**\r\n> ;; Got SERVFAIL reply from 193.140.25.30, trying next server\r\n> Server:         127.0.0.1\r\n> Address:        127.0.0.1#53\r\n> Name:   es2\r\n> Address: 10.0.0.2\r\n\r\nIn log file of elasticsearch, I still see the same error:\r\n> [2019-03-27T17:54:30,271][WARN ][o.e.d.z.UnicastZenPing   ] [master-1] **failed to resolve host** [“es2”]\r\n> java.net.**UnknownHostException**: “es2”\r\n> \tat java.net.InetAddress.getAllByName0(InetAddress.java:1281) ~[?:1.8.0_191]\r\n> \tat java.net.InetAddress.getAllByName(InetAddress.java:1193) ~[?:1.8.0_191]\r\n> \tat java.net.InetAddress.getAllByName(InetAddress.java:1127) ~[?:1.8.0_191]\r\n> \tat org.elasticsearch.transport.TcpTransport.parse(TcpTransport.java:550) ~[elasticsearch-6.6.2.jar:6.6.2]\r\n> \tat org.elasticsearch.transport.TcpTransport.addressesFromString(TcpTransport.java:503) ~[elasticsearch-6.6.2.jar:6.6.2]\r\n> \tat org.elasticsearch.transport.TransportService.addressesFromString(TransportService.java:738) ~[elasticsearch-6.6.2.jar:6.6.2]\r\n> \tat org.elasticsearch.discovery.zen.UnicastZenPing.lambda$resolveHostsLists$0(UnicastZenPing.java:189) ~[elasticsearch-6.6.2.jar:6.6.2]\r\n> \tat java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[?:1.8.0_191]\r\n> \tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:660) [elasticsearch-6.6.2.jar:6.6.2]\r\n> \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_191]\r\n> \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_191]\r\n> \tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_191]\r\n\r\nWhat is the problem in my configuration or centos system? My elasticsearch version is 6.6.2 installed from RPM package.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/477483390","html_url":"https://github.com/elastic/elasticsearch/issues/12925#issuecomment-477483390","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12925","id":477483390,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzQ4MzM5MA==","user":{"login":"lemonsoftltd","id":30117203,"node_id":"MDQ6VXNlcjMwMTE3MjAz","avatar_url":"https://avatars1.githubusercontent.com/u/30117203?v=4","gravatar_id":"","url":"https://api.github.com/users/lemonsoftltd","html_url":"https://github.com/lemonsoftltd","followers_url":"https://api.github.com/users/lemonsoftltd/followers","following_url":"https://api.github.com/users/lemonsoftltd/following{/other_user}","gists_url":"https://api.github.com/users/lemonsoftltd/gists{/gist_id}","starred_url":"https://api.github.com/users/lemonsoftltd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lemonsoftltd/subscriptions","organizations_url":"https://api.github.com/users/lemonsoftltd/orgs","repos_url":"https://api.github.com/users/lemonsoftltd/repos","events_url":"https://api.github.com/users/lemonsoftltd/events{/privacy}","received_events_url":"https://api.github.com/users/lemonsoftltd/received_events","type":"User","site_admin":false},"created_at":"2019-03-28T07:38:55Z","updated_at":"2019-03-28T07:38:55Z","author_association":"NONE","body":"> \r\n> \r\n> In my centos7, /etc/hosts file is:\r\n> \r\n> > 127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4\r\n> > ::1         localhost localhost.localdomain localhost6 localhost6.localdomain6\r\n> > 10.0.0.1\tes1\r\n> > 10.0.0.2\tes2\r\n> \r\n> In master node /etc/elasticsearch/elasticsearch.yml file is:\r\n> \r\n> > cluster.name: delastic\r\n> > node.name: master-1\r\n> > node.master: true\r\n> > node.data: true\r\n> > path.data: /var/lib/elasticsearch\r\n> > path.logs: /var/log/elasticsearch\r\n> > network.host: 10.0.0.1\r\n> > http.port: 9200\r\n> > discovery.zen.ping.unicast.hosts: [“es1” , “es2”]\r\n> \r\n> I have DNSMasq instead of nameserver and its dns records. In bash, I checked that:\r\n> \r\n> > [root@dhpc01 ~]# **ping es2 -c 2**\r\n> > PING es2 (10.0.0.2) 56(84) bytes of data.\r\n> > 64 bytes from dhpc02 (10.0.0.2): icmp_seq=1 ttl=64 time=0.207 ms\r\n> > 64 bytes from dhpc02 (10.0.0.2): icmp_seq=2 ttl=64 time=0.184 ms\r\n> > --- es2 ping statistics ---\r\n> > 2 packets transmitted, 2 received, 0% packet loss, time 999ms\r\n> > rtt min/avg/max/mdev = 0.184/0.195/0.207/0.018 ms\r\n> \r\n> > [root@dhpc01 ~]# **nslookup es2**\r\n> > ;; Got SERVFAIL reply from 193.140.25.30, trying next server\r\n> > Server:         127.0.0.1\r\n> > Address:        127.0.0.1#53\r\n> > Name:   es2\r\n> > Address: 10.0.0.2\r\n> \r\n> In log file of elasticsearch, I still see the same error:\r\n> \r\n> > [2019-03-27T17:54:30,271][WARN ][o.e.d.z.UnicastZenPing   ] [master-1] **failed to resolve host** [“es2”]\r\n> > java.net.**UnknownHostException**: “es2”\r\n> > at java.net.InetAddress.getAllByName0(InetAddress.java:1281) ~[?:1.8.0_191]\r\n> > at java.net.InetAddress.getAllByName(InetAddress.java:1193) ~[?:1.8.0_191]\r\n> > at java.net.InetAddress.getAllByName(InetAddress.java:1127) ~[?:1.8.0_191]\r\n> > at org.elasticsearch.transport.TcpTransport.parse(TcpTransport.java:550) ~[elasticsearch-6.6.2.jar:6.6.2]\r\n> > at org.elasticsearch.transport.TcpTransport.addressesFromString(TcpTransport.java:503) ~[elasticsearch-6.6.2.jar:6.6.2]\r\n> > at org.elasticsearch.transport.TransportService.addressesFromString(TransportService.java:738) ~[elasticsearch-6.6.2.jar:6.6.2]\r\n> > at org.elasticsearch.discovery.zen.UnicastZenPing.lambda$resolveHostsLists$0(UnicastZenPing.java:189) ~[elasticsearch-6.6.2.jar:6.6.2]\r\n> > at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[?:1.8.0_191]\r\n> > at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:660) [elasticsearch-6.6.2.jar:6.6.2]\r\n> > at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_191]\r\n> > at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_191]\r\n> > at java.lang.Thread.run(Thread.java:748) [?:1.8.0_191]\r\n> \r\n> What is the problem in my configuration or centos system? My elasticsearch version is 6.6.2 installed from RPM package.\r\n\r\nAfter updating Java, the error still present:\r\n[2019-03-28T10:38:33,996][WARN ][o.e.d.z.UnicastZenPing   ] [master-1] failed to resolve host [“es2”]\r\njava.net.UnknownHostException: “es2”: Temporary failure in name resolution\r\n\tat java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method) ~[?:1.8.0_201]\r\n\tat java.net.InetAddress$2.lookupAllHostAddr(InetAddress.java:929) ~[?:1.8.0_201]\r\n\tat java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1324) ~[?:1.8.0_201]\r\n\tat java.net.InetAddress.getAllByName0(InetAddress.java:1277) ~[?:1.8.0_201]\r\n\tat java.net.InetAddress.getAllByName(InetAddress.java:1193) ~[?:1.8.0_201]\r\n\tat java.net.InetAddress.getAllByName(InetAddress.java:1127) ~[?:1.8.0_201]\r\n\tat org.elasticsearch.transport.TcpTransport.parse(TcpTransport.java:550) ~[elasticsearch-6.6.2.jar:6.6.2]\r\n\tat org.elasticsearch.transport.TcpTransport.addressesFromString(TcpTransport.java:503) ~[elasticsearch-6.6.2.jar:6.6.2]\r\n\tat org.elasticsearch.transport.TransportService.addressesFromString(TransportService.java:738) ~[elasticsearch-6.6.2.jar:6.6.2]\r\n\tat org.elasticsearch.discovery.zen.UnicastZenPing.lambda$resolveHostsLists$0(UnicastZenPing.java:189) ~[elasticsearch-6.6.2.jar:6.6.2]\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[?:1.8.0_201]\r\n\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:660) [elasticsearch-6.6.2.jar:6.6.2]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_201]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_201]\r\n\tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_201]","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/477501860","html_url":"https://github.com/elastic/elasticsearch/issues/12925#issuecomment-477501860","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12925","id":477501860,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzUwMTg2MA==","user":{"login":"lemonsoftltd","id":30117203,"node_id":"MDQ6VXNlcjMwMTE3MjAz","avatar_url":"https://avatars1.githubusercontent.com/u/30117203?v=4","gravatar_id":"","url":"https://api.github.com/users/lemonsoftltd","html_url":"https://github.com/lemonsoftltd","followers_url":"https://api.github.com/users/lemonsoftltd/followers","following_url":"https://api.github.com/users/lemonsoftltd/following{/other_user}","gists_url":"https://api.github.com/users/lemonsoftltd/gists{/gist_id}","starred_url":"https://api.github.com/users/lemonsoftltd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lemonsoftltd/subscriptions","organizations_url":"https://api.github.com/users/lemonsoftltd/orgs","repos_url":"https://api.github.com/users/lemonsoftltd/repos","events_url":"https://api.github.com/users/lemonsoftltd/events{/privacy}","received_events_url":"https://api.github.com/users/lemonsoftltd/received_events","type":"User","site_admin":false},"created_at":"2019-03-28T08:43:19Z","updated_at":"2019-03-28T08:43:19Z","author_association":"NONE","body":"I can reach both IP address or hostname(resolved by dnsmasq) on bash:\r\n\r\n> [root@dhpc01 ~]# curl 10.0.0.2:9200\r\n> {\r\n>   \"name\" : \"es2\",\r\n>   \"cluster_name\" : \"demir-elastic\",\r\n>   \"cluster_uuid\" : \"_na_\",\r\n>   \"version\" : {\r\n>     \"number\" : \"6.6.2\",\r\n>     \"build_flavor\" : \"default\",\r\n>     \"build_type\" : \"rpm\",\r\n>     \"build_hash\" : \"3bd3e59\",\r\n>     \"build_date\" : \"2019-03-06T15:16:26.864148Z\",\r\n>     \"build_snapshot\" : false,\r\n>     \"lucene_version\" : \"7.6.0\",\r\n>     \"minimum_wire_compatibility_version\" : \"5.6.0\",\r\n>     \"minimum_index_compatibility_version\" : \"5.0.0\"\r\n>   },\r\n>   \"tagline\" : \"You Know, for Search\"\r\n> }\r\n\r\n> [root@dhpc01 ~]# curl es2:9200\r\n> {\r\n>   \"name\" : \"es2\",\r\n>   \"cluster_name\" : \"demir-elastic\",\r\n>   \"cluster_uuid\" : \"_na_\",\r\n>   \"version\" : {\r\n>     \"number\" : \"6.6.2\",\r\n>     \"build_flavor\" : \"default\",\r\n>     \"build_type\" : \"rpm\",\r\n>     \"build_hash\" : \"3bd3e59\",\r\n>     \"build_date\" : \"2019-03-06T15:16:26.864148Z\",\r\n>     \"build_snapshot\" : false,\r\n>     \"lucene_version\" : \"7.6.0\",\r\n>     \"minimum_wire_compatibility_version\" : \"5.6.0\",\r\n>     \"minimum_index_compatibility_version\" : \"5.0.0\"\r\n>   },\r\n>   \"tagline\" : \"You Know, for Search\"\r\n> }\r\n","performed_via_github_app":null}]