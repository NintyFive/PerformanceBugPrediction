{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/8884","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8884/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8884/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8884/events","html_url":"https://github.com/elastic/elasticsearch/issues/8884","id":51587584,"node_id":"MDU6SXNzdWU1MTU4NzU4NA==","number":8884,"title":"CORS - Unable to enable only a specified domain (localhost)","user":{"login":"putztzu","id":1753315,"node_id":"MDQ6VXNlcjE3NTMzMTU=","avatar_url":"https://avatars2.githubusercontent.com/u/1753315?v=4","gravatar_id":"","url":"https://api.github.com/users/putztzu","html_url":"https://github.com/putztzu","followers_url":"https://api.github.com/users/putztzu/followers","following_url":"https://api.github.com/users/putztzu/following{/other_user}","gists_url":"https://api.github.com/users/putztzu/gists{/gist_id}","starred_url":"https://api.github.com/users/putztzu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/putztzu/subscriptions","organizations_url":"https://api.github.com/users/putztzu/orgs","repos_url":"https://api.github.com/users/putztzu/repos","events_url":"https://api.github.com/users/putztzu/events{/privacy}","received_events_url":"https://api.github.com/users/putztzu/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2014-12-10T17:38:52Z","updated_at":"2014-12-11T13:34:03Z","closed_at":"2014-12-11T13:34:03Z","author_association":"NONE","active_lock_reason":null,"body":"Posted with no response to date to the ES Google Groups\nhttps://groups.google.com/forum/#!topic/elasticsearch/WAOmzL6ztSI\n\nIn summary:\nAm able to enable CORS for <all> domains.\nBut, unable to enable only a specified domain (localhost) using the RegEx string described in the ES API Documentation\nhttp://www.elasticsearch.org/guide/en/elasticsearch/reference/current/modules-http.html\n\nThe exact entries I made to elasticsearch.yml are described in the Google Groups post described above, the last entry should be exactly as described in the ES API documentation.\n\nAlthough I don't think the type of web frontend should matter, my setup can be easily replicated with the following steps on a single node ES 1.4 (updated to latest release). Running on openSUSE 13.2 but I don't think that should matter although the script I created to enable cors in elasticsearch.yml is specific to the path on a Linux deployment.\n\nSteps to replicate what I have done (although as I described this problem should probably be seen in <all> web frontends like Kibana)\n1. Clone the NFL Aggregations demo project. Recommend my fork which includes enable_cors.sh\n   git clone https://github.com/putztzu/nfl-elastic-aggregations.git\n2. Upload the nfl data and mappings as described in the blog, with minor modifications\n   http://www.elasticsearch.org/blog/data-visualization-elasticsearch-aggregations/\n\nI don't know if it's possible to express a local path to a location different than default, so I changed directory as follows to upload mappings and data as follows\nFrom Project root\ncurl -XPOST localhost:9200/nfl?pretty\nFrom Project root/dataset/mappings/\ncurl -XPUT localhost:9200/nfl/2013/_mapping?pretty -d @nfl_mapping.json\nFrom Project root/dataset/\ncurl -XPOST localhost:9200/nfl/2013/_bulk?pretty --data-binary @nfl_2013.json\n1. You can run any webserver you wish, in my case I ran node and nodemon(optionally). If you wish to do so also, the webserver.js file is setup for localhost port 80. I recommend running your webserver and testing index.html now to prove cors is disabled by default. But, you can deploy using any other webserver (eg python as described in the ES documentation is fine). \n\nAfter each elasticsearch.yml modification that follows, you will need to restart the ES service (or app)\n4. Enable cors (all domains)\nIf you are running on a Linux system with the default yml location /etc/elasticsearch/elasticsearch.yml, just execute the \"enable_cors\" script which appends the required ES API command to enable cors. Refresh your browser to prove it works.\n1. Now, using a text editor of your choice, modify the second to last line in the elasticsearch.yml file as I describe in my Google post. The last described try should be exactly what is described in the Elasticsearch API documentation.\n\nThx for looking at this...\nTony\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}