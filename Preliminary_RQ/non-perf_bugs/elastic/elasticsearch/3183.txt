{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/3183","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3183/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3183/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3183/events","html_url":"https://github.com/elastic/elasticsearch/issues/3183","id":15542367,"node_id":"MDU6SXNzdWUxNTU0MjM2Nw==","number":3183,"title":"Too many open files issue even after increasing limit to 65K on Ubuntu","user":{"login":"samonderous","id":1582392,"node_id":"MDQ6VXNlcjE1ODIzOTI=","avatar_url":"https://avatars3.githubusercontent.com/u/1582392?v=4","gravatar_id":"","url":"https://api.github.com/users/samonderous","html_url":"https://github.com/samonderous","followers_url":"https://api.github.com/users/samonderous/followers","following_url":"https://api.github.com/users/samonderous/following{/other_user}","gists_url":"https://api.github.com/users/samonderous/gists{/gist_id}","starred_url":"https://api.github.com/users/samonderous/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samonderous/subscriptions","organizations_url":"https://api.github.com/users/samonderous/orgs","repos_url":"https://api.github.com/users/samonderous/repos","events_url":"https://api.github.com/users/samonderous/events{/privacy}","received_events_url":"https://api.github.com/users/samonderous/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"assignees":[{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2013-06-14T04:50:07Z","updated_at":"2013-06-14T06:31:40Z","closed_at":"2013-06-14T06:31:40Z","author_association":"NONE","active_lock_reason":null,"body":"Still getting a stack trace when I try to copy an index with just 143 entries over to another index.  ulimit -a shows 65K set for the max open files.d\n\nCaused by: java.io.FileNotFoundException: /usr/local/share/elasticsearch/data/elasticsearch/nodes/0/indices/contacts-new/\n1/index/_5.fdx (Too many open files)\n        at java.io.RandomAccessFile.open(Native Method)\n        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:233)\n        at org.apache.lucene.store.SimpleFSDirectory$SimpleFSIndexInput$Descriptor.<init>(SimpleFSDirectory.java:71)\n        at org.apache.lucene.store.SimpleFSDirectory$SimpleFSIndexInput.<init>(SimpleFSDirectory.java:98)\n        at org.apache.lucene.store.NIOFSDirectory$NIOFSIndexInput.<init>(NIOFSDirectory.java:92)\n        at org.apache.lucene.store.NIOFSDirectory.openInput(NIOFSDirectory.java:79)\n        at org.elasticsearch.index.store.Store$StoreDirectory.openInput(Store.java:537)\n        at org.apache.lucene.index.FieldsReader.<init>(FieldsReader.java:133)\n        at org.apache.lucene.index.SegmentCoreReaders.openDocStores(SegmentCoreReaders.java:234)\n        at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:118)\n        at org.apache.lucene.index.IndexWriter$ReaderPool.get(IndexWriter.java:696)\n        at org.apache.lucene.index.IndexWriter$ReaderPool.getReadOnlyClone(IndexWriter.java:654)\n        at org.apache.lucene.index.DirectoryReader.<init>(DirectoryReader.java:142)\n        at org.apache.lucene.index.ReadOnlyDirectoryReader.<init>(ReadOnlyDirectoryReader.java:36)\n        at org.apache.lucene.index.IndexWriter.getReader(IndexWriter.java:451)\n        at org.apache.lucene.index.IndexWriter.getReader(IndexWriter.java:399)\n        at org.apache.lucene.index.IndexReader.open(IndexReader.java:296)\n        at org.apache.lucene.search.SearcherManager.<init>(SearcherManager.java:82)\n        at org.elasticsearch.index.engine.robin.RobinEngine.buildSearchManager(RobinEngine.java:1428)\n        at org.elasticsearch.index.engine.robin.RobinEngine.start(RobinEngine.java:271)\n        ... 6 more\n[2013-06-14 04:45:28,671][WARN ][cluster.action.shard     ] [Emplate] sending failed shard for [contacts-new][1], node[gbLiKgx3T0qcVQpmsmj3gQ], [P], s[INITIALIZING], reason [Failed to start shard, message [IndexShardGatewayRecoveryException[[contacts-new][1] failed recovery]; nested: EngineCreationFailureException[[contacts-new][1] failed to open reader on writer]; nested: FileNotFoundException[/usr/local/share/elasticsearch/data/elasticsearch/nodes/0/indices/contacts-new/1/index/_5.fdx (Too many open files)]; ]]\n","closed_by":{"login":"samonderous","id":1582392,"node_id":"MDQ6VXNlcjE1ODIzOTI=","avatar_url":"https://avatars3.githubusercontent.com/u/1582392?v=4","gravatar_id":"","url":"https://api.github.com/users/samonderous","html_url":"https://github.com/samonderous","followers_url":"https://api.github.com/users/samonderous/followers","following_url":"https://api.github.com/users/samonderous/following{/other_user}","gists_url":"https://api.github.com/users/samonderous/gists{/gist_id}","starred_url":"https://api.github.com/users/samonderous/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samonderous/subscriptions","organizations_url":"https://api.github.com/users/samonderous/orgs","repos_url":"https://api.github.com/users/samonderous/repos","events_url":"https://api.github.com/users/samonderous/events{/privacy}","received_events_url":"https://api.github.com/users/samonderous/received_events","type":"User","site_admin":false},"performed_via_github_app":null}