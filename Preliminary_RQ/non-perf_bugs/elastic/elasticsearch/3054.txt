{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/3054","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3054/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3054/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3054/events","html_url":"https://github.com/elastic/elasticsearch/issues/3054","id":14450214,"node_id":"MDU6SXNzdWUxNDQ1MDIxNA==","number":3054,"title":"Error while using wildcard in multifield query_string query","user":{"login":"eliaslevy","id":725218,"node_id":"MDQ6VXNlcjcyNTIxOA==","avatar_url":"https://avatars1.githubusercontent.com/u/725218?v=4","gravatar_id":"","url":"https://api.github.com/users/eliaslevy","html_url":"https://github.com/eliaslevy","followers_url":"https://api.github.com/users/eliaslevy/followers","following_url":"https://api.github.com/users/eliaslevy/following{/other_user}","gists_url":"https://api.github.com/users/eliaslevy/gists{/gist_id}","starred_url":"https://api.github.com/users/eliaslevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eliaslevy/subscriptions","organizations_url":"https://api.github.com/users/eliaslevy/orgs","repos_url":"https://api.github.com/users/eliaslevy/repos","events_url":"https://api.github.com/users/eliaslevy/events{/privacy}","received_events_url":"https://api.github.com/users/eliaslevy/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2013-05-17T12:37:29Z","updated_at":"2013-05-21T09:03:45Z","closed_at":"2013-05-21T09:03:45Z","author_association":"NONE","active_lock_reason":null,"body":"I've indexed some data with a field named \"observed\" that is an object with two other fields named \"filename\" and \"pathname\".  These fields are analyzed and have multiple values.\n\nThe following query executed without problems:\n\n``` json\n\"query_string\" : { \n  \"fields\" : [\"observed.filename\", \"observed.pathname\"], \n  \"query\" : \"Autorun\", \n  \"use_dis_max\" : true \n}\n```\n\nbut when I change it to the following it fails:\n\n``` json\n\"query_string\" : {\n  \"fields\" : [\"observed.*\"],\n  \"query\" : \"Autorun\",\n  \"use_dis_max\" : true\n}\n```\n\nwith the error:\n\n\"SearchPhaseExecutionException[Failed to execute phase [query], total failure; shardFailures {[jHW46VKNS_G6Cnrdzko_WA][file_analysis][0]: SearchParseException[[file_analysis][0]: from[-1],size[-1]: Parse Failure [Failed to parse source [{\\t\\\"query\\\": {\\t    \\\"query_string\\\" : {\\t        \\\"fields\\\" : [\\\"observed._\\\"],\\t        \\\"query\\\" : \\\"Autorun\\\",\\t        \\\"use_dis_max\\\" : true\\t    }\\t}}]]]; nested: NumberFormatException[For input string: \\\"Autorun\\\"]; }{[jHW46VKNS_G6Cnrdzko_WA][file_analysis][1]: SearchParseException[[file_analysis][1]: from[-1],size[-1]: Parse Failure [Failed to parse source [{\\t\\\"query\\\": {\\t    \\\"query_string\\\" : {\\t        \\\"fields\\\" : [\\\"observed._\\\"],\\t        \\\"query\\\" : \\\"Autorun\\\",\\t        \\\"use_dis_max\\\" : true\\t    }\\t}}]]]; nested: NumberFormatException[For input string: \\\"Autorun\\\"]; }]\n\nWhy is that?  The docs indicate it should work.\n\nAlso odd is that the following works:\n\n``` json\n\"query_string\" : {\n  \"fields\" : [\"observed.f*\"],\n  \"query\" : \"Autorun\",\n  \"use_dis_max\" : true\n}\n```\n\nbut this fails:\n\n``` json\n\"query_string\" : {\n  \"fields\" : [\"observed.p*\"],\n  \"query\" : \"Autorun\",\n  \"use_dis_max\" : true\n}\n```\n\nI am Running 0.90.0.  The mapping for the fields looks like:\n\n``` json\n\"observed\" : {\n  \"type\": \"object\",\n  \"properties\" : {\n    \"pathname\"  : { \"type\": \"string\", \"analyzer\": \"path\"              },\n    \"filename\"  : {\n      \"type\": \"multi_field\",\n      \"fields\": {\n        \"filename\": { \"type\": \"string\", \"analyzer\": \"path\"              },\n        \"whole\"   : { \"type\": \"string\", \"analyzer\": \"lowercase_keyword\" }\n      }\n    }\n  }\n}\n```\n\nThere are some other fields in there as well.\n","closed_by":{"login":"eliaslevy","id":725218,"node_id":"MDQ6VXNlcjcyNTIxOA==","avatar_url":"https://avatars1.githubusercontent.com/u/725218?v=4","gravatar_id":"","url":"https://api.github.com/users/eliaslevy","html_url":"https://github.com/eliaslevy","followers_url":"https://api.github.com/users/eliaslevy/followers","following_url":"https://api.github.com/users/eliaslevy/following{/other_user}","gists_url":"https://api.github.com/users/eliaslevy/gists{/gist_id}","starred_url":"https://api.github.com/users/eliaslevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eliaslevy/subscriptions","organizations_url":"https://api.github.com/users/eliaslevy/orgs","repos_url":"https://api.github.com/users/eliaslevy/repos","events_url":"https://api.github.com/users/eliaslevy/events{/privacy}","received_events_url":"https://api.github.com/users/eliaslevy/received_events","type":"User","site_admin":false},"performed_via_github_app":null}