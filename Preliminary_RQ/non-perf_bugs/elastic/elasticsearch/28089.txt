{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/28089","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28089/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28089/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28089/events","html_url":"https://github.com/elastic/elasticsearch/issues/28089","id":286165679,"node_id":"MDU6SXNzdWUyODYxNjU2Nzk=","number":28089,"title":"Unified highlighter: include additional context outside of highlighted sentence to reach target fragment_size","user":{"login":"marshalium","id":237643,"node_id":"MDQ6VXNlcjIzNzY0Mw==","avatar_url":"https://avatars2.githubusercontent.com/u/237643?v=4","gravatar_id":"","url":"https://api.github.com/users/marshalium","html_url":"https://github.com/marshalium","followers_url":"https://api.github.com/users/marshalium/followers","following_url":"https://api.github.com/users/marshalium/following{/other_user}","gists_url":"https://api.github.com/users/marshalium/gists{/gist_id}","starred_url":"https://api.github.com/users/marshalium/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marshalium/subscriptions","organizations_url":"https://api.github.com/users/marshalium/orgs","repos_url":"https://api.github.com/users/marshalium/repos","events_url":"https://api.github.com/users/marshalium/events{/privacy}","received_events_url":"https://api.github.com/users/marshalium/received_events","type":"User","site_admin":false},"labels":[{"id":111549183,"node_id":"MDU6TGFiZWwxMTE1NDkxODM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Highlighting","name":":Search/Highlighting","color":"0e8a16","default":false,"description":"How a query matched a document"},{"id":23172,"node_id":"MDU6TGFiZWwyMzE3Mg==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Efeature","name":">feature","color":"006b75","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-01-05T01:33:59Z","updated_at":"2019-03-07T15:32:21Z","closed_at":"2018-01-11T12:26:12Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the feature**\r\n\r\nCurrently, the unified highlighter can only provide context by including the sentence the highlighted word is in. This is sometimes a very short highlight. For example, given text in a field like this:\r\n\r\n```\r\nSome leading context. A short sentence. Some more content. And even more context around that sentence.\r\n```\r\n\r\nRunning a query for the term `sentence` using the unified highlighter and `fragment_size` set to `300`, results in a highlight that, while it includes the word that we're looking for, does not provide much context and is nowhere close to the target size requested:\r\n\r\n```\r\nA short <em>sentence</em>.\r\n```\r\n\r\nIn contrast, run the same query with the plain highlighter results in a highlight with much more useful context (and in this case another highlighted word!):\r\n\r\n```\r\nSome leading context. A short <em>sentence</em>. Some more content. And even more context around that <em>sentence</em>.\r\n```\r\n\r\nThe unified highlighter should include as much context as possible without going over the target fragment size. This will result in more consistently sized highlights (which is nice for visual consistency) and will provide more useful context in cases where the highlight occurs in a short sentence.\r\n\r\ncc: @colings86","closed_by":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"performed_via_github_app":null}