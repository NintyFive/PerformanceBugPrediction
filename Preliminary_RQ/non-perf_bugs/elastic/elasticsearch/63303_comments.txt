[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/704076934","html_url":"https://github.com/elastic/elasticsearch/issues/63303#issuecomment-704076934","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63303","id":704076934,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDA3NjkzNA==","user":{"login":"dweiss","id":199470,"node_id":"MDQ6VXNlcjE5OTQ3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/199470?v=4","gravatar_id":"","url":"https://api.github.com/users/dweiss","html_url":"https://github.com/dweiss","followers_url":"https://api.github.com/users/dweiss/followers","following_url":"https://api.github.com/users/dweiss/following{/other_user}","gists_url":"https://api.github.com/users/dweiss/gists{/gist_id}","starred_url":"https://api.github.com/users/dweiss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dweiss/subscriptions","organizations_url":"https://api.github.com/users/dweiss/orgs","repos_url":"https://api.github.com/users/dweiss/repos","events_url":"https://api.github.com/users/dweiss/events{/privacy}","received_events_url":"https://api.github.com/users/dweiss/received_events","type":"User","site_admin":false},"created_at":"2020-10-06T07:07:34Z","updated_at":"2020-10-06T07:07:34Z","author_association":"CONTRIBUTOR","body":"The problem is somewhere in manual parsing of refs. I don't know the reason why it has to be custom code - this comment:\r\n\r\n```\r\n    public static GitInfo gitInfo(File rootDir) {\r\n        try {\r\n            /*\r\n             * We want to avoid forking another process to run git rev-parse HEAD. Instead, we will read the refs manually. \r\n```\r\n\r\nIf you used a jgit dependency from within the build script (plugin) then it wouldn't have to be a forked process and jgit is fairly good at making sense of any git repository structure. Is this custom code really worth maintenance over a minor speed gain?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/704236732","html_url":"https://github.com/elastic/elasticsearch/issues/63303#issuecomment-704236732","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63303","id":704236732,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDIzNjczMg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-10-06T12:32:16Z","updated_at":"2020-10-06T12:32:16Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra (:Core/Infra/Build)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/704237413","html_url":"https://github.com/elastic/elasticsearch/issues/63303#issuecomment-704237413","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63303","id":704237413,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDIzNzQxMw==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2020-10-06T12:33:41Z","updated_at":"2020-10-06T12:33:41Z","author_association":"MEMBER","body":"@dweiss sorry to hear you are having trouble.\r\nI  just tried a clean checkout on 34aaa8d and that particular goal in `build-tools` was working.\r\nMy environment:\r\n```\r\ngit version 2.24.3 (Apple Git-128)\r\nopenjdk version \"14.0.1\" 2020-04-14\r\n```\r\n\r\nI think @elastic/es-core-infra is best equiped to answer your question.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/704241548","html_url":"https://github.com/elastic/elasticsearch/issues/63303#issuecomment-704241548","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63303","id":704241548,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDI0MTU0OA==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2020-10-06T12:41:29Z","updated_at":"2020-10-06T12:41:29Z","author_association":"CONTRIBUTOR","body":"Same thing is happening in CI on Windows every day - see https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob-windows-compatibility/os=windows-2012-r2\r\n\r\nI opened #63232 for this yesterday.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/704243248","html_url":"https://github.com/elastic/elasticsearch/issues/63303#issuecomment-704243248","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63303","id":704243248,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDI0MzI0OA==","user":{"login":"dweiss","id":199470,"node_id":"MDQ6VXNlcjE5OTQ3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/199470?v=4","gravatar_id":"","url":"https://api.github.com/users/dweiss","html_url":"https://github.com/dweiss","followers_url":"https://api.github.com/users/dweiss/followers","following_url":"https://api.github.com/users/dweiss/following{/other_user}","gists_url":"https://api.github.com/users/dweiss/gists{/gist_id}","starred_url":"https://api.github.com/users/dweiss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dweiss/subscriptions","organizations_url":"https://api.github.com/users/dweiss/orgs","repos_url":"https://api.github.com/users/dweiss/repos","events_url":"https://api.github.com/users/dweiss/events{/privacy}","received_events_url":"https://api.github.com/users/dweiss/received_events","type":"User","site_admin":false},"created_at":"2020-10-06T12:44:42Z","updated_at":"2020-10-06T12:44:42Z","author_association":"CONTRIBUTOR","body":"I think this is git version specific, not operating system specific. I didn't look at ref parsing code deeply... why bother if you can use jgit for this - these folks have to provide support for various git flavors anyway.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/704409011","html_url":"https://github.com/elastic/elasticsearch/issues/63303#issuecomment-704409011","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63303","id":704409011,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDQwOTAxMQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2020-10-06T16:48:57Z","updated_at":"2020-10-06T16:48:57Z","author_association":"MEMBER","body":"@mark-vieira Can you comment on not using jgit? I remember you moved us away from that for the performance gains, but it seems we either need that, or need better handling of the many ways git repositories can look?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/704414810","html_url":"https://github.com/elastic/elasticsearch/issues/63303#issuecomment-704414810","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63303","id":704414810,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDQxNDgxMA==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2020-10-06T16:59:22Z","updated_at":"2020-10-06T16:59:22Z","author_association":"CONTRIBUTOR","body":"The reason for not using `jgit` was that it doesn't support worktrees.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/704439821","html_url":"https://github.com/elastic/elasticsearch/issues/63303#issuecomment-704439821","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63303","id":704439821,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDQzOTgyMQ==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2020-10-06T17:43:59Z","updated_at":"2020-10-06T17:43:59Z","author_association":"CONTRIBUTOR","body":"This seems to be specific to the git repo we are initializing for the purposes of our functional tests. This same logic works for the \"outer\" build so something different is going on in the test setup. @breskeby do you mind investigating this? We might have to add some additional logging to capture what's going on and why the `refs/` directory doesn't contain what we expect it to.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/704484196","html_url":"https://github.com/elastic/elasticsearch/issues/63303#issuecomment-704484196","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63303","id":704484196,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDQ4NDE5Ng==","user":{"login":"dweiss","id":199470,"node_id":"MDQ6VXNlcjE5OTQ3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/199470?v=4","gravatar_id":"","url":"https://api.github.com/users/dweiss","html_url":"https://github.com/dweiss","followers_url":"https://api.github.com/users/dweiss/followers","following_url":"https://api.github.com/users/dweiss/following{/other_user}","gists_url":"https://api.github.com/users/dweiss/gists{/gist_id}","starred_url":"https://api.github.com/users/dweiss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dweiss/subscriptions","organizations_url":"https://api.github.com/users/dweiss/orgs","repos_url":"https://api.github.com/users/dweiss/repos","events_url":"https://api.github.com/users/dweiss/events{/privacy}","received_events_url":"https://api.github.com/users/dweiss/received_events","type":"User","site_admin":false},"created_at":"2020-10-06T18:54:09Z","updated_at":"2020-10-06T18:54:09Z","author_association":"CONTRIBUTOR","body":"bq. This seems to be specific to the git repo we are initializing for the purposes of our functional tests.\r\n\r\nPrecisely because the same code works at the top-level.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/705385468","html_url":"https://github.com/elastic/elasticsearch/issues/63303#issuecomment-705385468","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63303","id":705385468,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTM4NTQ2OA==","user":{"login":"breskeby","id":77300,"node_id":"MDQ6VXNlcjc3MzAw","avatar_url":"https://avatars3.githubusercontent.com/u/77300?v=4","gravatar_id":"","url":"https://api.github.com/users/breskeby","html_url":"https://github.com/breskeby","followers_url":"https://api.github.com/users/breskeby/followers","following_url":"https://api.github.com/users/breskeby/following{/other_user}","gists_url":"https://api.github.com/users/breskeby/gists{/gist_id}","starred_url":"https://api.github.com/users/breskeby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/breskeby/subscriptions","organizations_url":"https://api.github.com/users/breskeby/orgs","repos_url":"https://api.github.com/users/breskeby/repos","events_url":"https://api.github.com/users/breskeby/events{/privacy}","received_events_url":"https://api.github.com/users/breskeby/received_events","type":"User","site_admin":false},"created_at":"2020-10-08T07:26:02Z","updated_at":"2020-10-08T07:26:02Z","author_association":"CONTRIBUTOR","body":"I pushed a fix for #63232 which should also fix this issue here. @dweiss can you confirm this is fixed on the latest master?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/705440127","html_url":"https://github.com/elastic/elasticsearch/issues/63303#issuecomment-705440127","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63303","id":705440127,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTQ0MDEyNw==","user":{"login":"dweiss","id":199470,"node_id":"MDQ6VXNlcjE5OTQ3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/199470?v=4","gravatar_id":"","url":"https://api.github.com/users/dweiss","html_url":"https://github.com/dweiss","followers_url":"https://api.github.com/users/dweiss/followers","following_url":"https://api.github.com/users/dweiss/following{/other_user}","gists_url":"https://api.github.com/users/dweiss/gists{/gist_id}","starred_url":"https://api.github.com/users/dweiss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dweiss/subscriptions","organizations_url":"https://api.github.com/users/dweiss/orgs","repos_url":"https://api.github.com/users/dweiss/repos","events_url":"https://api.github.com/users/dweiss/events{/privacy}","received_events_url":"https://api.github.com/users/dweiss/received_events","type":"User","site_admin":false},"created_at":"2020-10-08T09:13:06Z","updated_at":"2020-10-08T09:13:06Z","author_association":"CONTRIBUTOR","body":"Still failing with the same error [ed4d1e3d3e45091]. Build scan:\r\nhttps://gradle.com/s/drogbhf6kmcak\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/705442442","html_url":"https://github.com/elastic/elasticsearch/issues/63303#issuecomment-705442442","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63303","id":705442442,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTQ0MjQ0Mg==","user":{"login":"dweiss","id":199470,"node_id":"MDQ6VXNlcjE5OTQ3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/199470?v=4","gravatar_id":"","url":"https://api.github.com/users/dweiss","html_url":"https://github.com/dweiss","followers_url":"https://api.github.com/users/dweiss/followers","following_url":"https://api.github.com/users/dweiss/following{/other_user}","gists_url":"https://api.github.com/users/dweiss/gists{/gist_id}","starred_url":"https://api.github.com/users/dweiss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dweiss/subscriptions","organizations_url":"https://api.github.com/users/dweiss/orgs","repos_url":"https://api.github.com/users/dweiss/repos","events_url":"https://api.github.com/users/dweiss/events{/privacy}","received_events_url":"https://api.github.com/users/dweiss/received_events","type":"User","site_admin":false},"created_at":"2020-10-08T09:16:47Z","updated_at":"2020-10-08T09:16:47Z","author_association":"CONTRIBUTOR","body":"But I think it fails for a different reason - the test fails with:\r\n```\r\n* What went wrong: |  \r\n-- | --\r\n  | Execution failed for task ':distribution:bwc:bugfix:buildBwcDarwinTar'. |  \r\n  | > JAVA14_HOME required\r\n```\r\n\r\nI think it should complain about it at the master build level, not from within the test. I exported this env variable and then it passes.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/705442660","html_url":"https://github.com/elastic/elasticsearch/issues/63303#issuecomment-705442660","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63303","id":705442660,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTQ0MjY2MA==","user":{"login":"dweiss","id":199470,"node_id":"MDQ6VXNlcjE5OTQ3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/199470?v=4","gravatar_id":"","url":"https://api.github.com/users/dweiss","html_url":"https://github.com/dweiss","followers_url":"https://api.github.com/users/dweiss/followers","following_url":"https://api.github.com/users/dweiss/following{/other_user}","gists_url":"https://api.github.com/users/dweiss/gists{/gist_id}","starred_url":"https://api.github.com/users/dweiss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dweiss/subscriptions","organizations_url":"https://api.github.com/users/dweiss/orgs","repos_url":"https://api.github.com/users/dweiss/repos","events_url":"https://api.github.com/users/dweiss/events{/privacy}","received_events_url":"https://api.github.com/users/dweiss/received_events","type":"User","site_admin":false},"created_at":"2020-10-08T09:17:09Z","updated_at":"2020-10-08T09:17:09Z","author_association":"CONTRIBUTOR","body":"with JAVA14_HOME set:\r\nhttps://gradle.com/s/ivggjxqkovgxg","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/705514216","html_url":"https://github.com/elastic/elasticsearch/issues/63303#issuecomment-705514216","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63303","id":705514216,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTUxNDIxNg==","user":{"login":"breskeby","id":77300,"node_id":"MDQ6VXNlcjc3MzAw","avatar_url":"https://avatars3.githubusercontent.com/u/77300?v=4","gravatar_id":"","url":"https://api.github.com/users/breskeby","html_url":"https://github.com/breskeby","followers_url":"https://api.github.com/users/breskeby/followers","following_url":"https://api.github.com/users/breskeby/following{/other_user}","gists_url":"https://api.github.com/users/breskeby/gists{/gist_id}","starred_url":"https://api.github.com/users/breskeby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/breskeby/subscriptions","organizations_url":"https://api.github.com/users/breskeby/orgs","repos_url":"https://api.github.com/users/breskeby/repos","events_url":"https://api.github.com/users/breskeby/events{/privacy}","received_events_url":"https://api.github.com/users/breskeby/received_events","type":"User","site_admin":false},"created_at":"2020-10-08T11:44:00Z","updated_at":"2020-10-08T11:44:00Z","author_association":"CONTRIBUTOR","body":"@dweiss that seems unrelated to this particular issue. I'm closing this ticket","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/705515207","html_url":"https://github.com/elastic/elasticsearch/issues/63303#issuecomment-705515207","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63303","id":705515207,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTUxNTIwNw==","user":{"login":"dweiss","id":199470,"node_id":"MDQ6VXNlcjE5OTQ3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/199470?v=4","gravatar_id":"","url":"https://api.github.com/users/dweiss","html_url":"https://github.com/dweiss","followers_url":"https://api.github.com/users/dweiss/followers","following_url":"https://api.github.com/users/dweiss/following{/other_user}","gists_url":"https://api.github.com/users/dweiss/gists{/gist_id}","starred_url":"https://api.github.com/users/dweiss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dweiss/subscriptions","organizations_url":"https://api.github.com/users/dweiss/orgs","repos_url":"https://api.github.com/users/dweiss/repos","events_url":"https://api.github.com/users/dweiss/events{/privacy}","received_events_url":"https://api.github.com/users/dweiss/received_events","type":"User","site_admin":false},"created_at":"2020-10-08T11:46:19Z","updated_at":"2020-10-08T11:46:19Z","author_association":"CONTRIBUTOR","body":"Maybe the cause is unrelated but the net effect for somebody who checks out elasticsearch and runs tests is the same... Running with JDK14 it will end with a cryptic test failure. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/705515560","html_url":"https://github.com/elastic/elasticsearch/issues/63303#issuecomment-705515560","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63303","id":705515560,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTUxNTU2MA==","user":{"login":"breskeby","id":77300,"node_id":"MDQ6VXNlcjc3MzAw","avatar_url":"https://avatars3.githubusercontent.com/u/77300?v=4","gravatar_id":"","url":"https://api.github.com/users/breskeby","html_url":"https://github.com/breskeby","followers_url":"https://api.github.com/users/breskeby/followers","following_url":"https://api.github.com/users/breskeby/following{/other_user}","gists_url":"https://api.github.com/users/breskeby/gists{/gist_id}","starred_url":"https://api.github.com/users/breskeby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/breskeby/subscriptions","organizations_url":"https://api.github.com/users/breskeby/orgs","repos_url":"https://api.github.com/users/breskeby/repos","events_url":"https://api.github.com/users/breskeby/events{/privacy}","received_events_url":"https://api.github.com/users/breskeby/received_events","type":"User","site_admin":false},"created_at":"2020-10-08T11:47:09Z","updated_at":"2020-10-08T11:47:09Z","author_association":"CONTRIBUTOR","body":"sorry I misunderstood your message. yeah fixing this here makes sense","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/705515752","html_url":"https://github.com/elastic/elasticsearch/issues/63303#issuecomment-705515752","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63303","id":705515752,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTUxNTc1Mg==","user":{"login":"dweiss","id":199470,"node_id":"MDQ6VXNlcjE5OTQ3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/199470?v=4","gravatar_id":"","url":"https://api.github.com/users/dweiss","html_url":"https://github.com/dweiss","followers_url":"https://api.github.com/users/dweiss/followers","following_url":"https://api.github.com/users/dweiss/following{/other_user}","gists_url":"https://api.github.com/users/dweiss/gists{/gist_id}","starred_url":"https://api.github.com/users/dweiss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dweiss/subscriptions","organizations_url":"https://api.github.com/users/dweiss/orgs","repos_url":"https://api.github.com/users/dweiss/repos","events_url":"https://api.github.com/users/dweiss/events{/privacy}","received_events_url":"https://api.github.com/users/dweiss/received_events","type":"User","site_admin":false},"created_at":"2020-10-08T11:47:33Z","updated_at":"2020-10-08T11:47:33Z","author_association":"CONTRIBUTOR","body":"I think so too.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/705538840","html_url":"https://github.com/elastic/elasticsearch/issues/63303#issuecomment-705538840","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63303","id":705538840,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTUzODg0MA==","user":{"login":"breskeby","id":77300,"node_id":"MDQ6VXNlcjc3MzAw","avatar_url":"https://avatars3.githubusercontent.com/u/77300?v=4","gravatar_id":"","url":"https://api.github.com/users/breskeby","html_url":"https://github.com/breskeby","followers_url":"https://api.github.com/users/breskeby/followers","following_url":"https://api.github.com/users/breskeby/following{/other_user}","gists_url":"https://api.github.com/users/breskeby/gists{/gist_id}","starred_url":"https://api.github.com/users/breskeby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/breskeby/subscriptions","organizations_url":"https://api.github.com/users/breskeby/orgs","repos_url":"https://api.github.com/users/breskeby/repos","events_url":"https://api.github.com/users/breskeby/events{/privacy}","received_events_url":"https://api.github.com/users/breskeby/received_events","type":"User","site_admin":false},"created_at":"2020-10-08T12:36:44Z","updated_at":"2020-10-08T12:36:51Z","author_association":"CONTRIBUTOR","body":"I changed the mocked git repo to build to rely on JDK12_HOME which is documented to be required by the elasticsearch build in our `contributing.md` file. Can you double check @dweiss ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/705552934","html_url":"https://github.com/elastic/elasticsearch/issues/63303#issuecomment-705552934","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63303","id":705552934,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTU1MjkzNA==","user":{"login":"dweiss","id":199470,"node_id":"MDQ6VXNlcjE5OTQ3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/199470?v=4","gravatar_id":"","url":"https://api.github.com/users/dweiss","html_url":"https://github.com/dweiss","followers_url":"https://api.github.com/users/dweiss/followers","following_url":"https://api.github.com/users/dweiss/following{/other_user}","gists_url":"https://api.github.com/users/dweiss/gists{/gist_id}","starred_url":"https://api.github.com/users/dweiss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dweiss/subscriptions","organizations_url":"https://api.github.com/users/dweiss/orgs","repos_url":"https://api.github.com/users/dweiss/repos","events_url":"https://api.github.com/users/dweiss/events{/privacy}","received_events_url":"https://api.github.com/users/dweiss/received_events","type":"User","site_admin":false},"created_at":"2020-10-08T13:03:15Z","updated_at":"2020-10-08T13:03:15Z","author_association":"CONTRIBUTOR","body":"Documented is one thing but could the build *fail* if you don't have any of the env. variables set? This is the key I think.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/705553237","html_url":"https://github.com/elastic/elasticsearch/issues/63303#issuecomment-705553237","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63303","id":705553237,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTU1MzIzNw==","user":{"login":"dweiss","id":199470,"node_id":"MDQ6VXNlcjE5OTQ3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/199470?v=4","gravatar_id":"","url":"https://api.github.com/users/dweiss","html_url":"https://github.com/dweiss","followers_url":"https://api.github.com/users/dweiss/followers","following_url":"https://api.github.com/users/dweiss/following{/other_user}","gists_url":"https://api.github.com/users/dweiss/gists{/gist_id}","starred_url":"https://api.github.com/users/dweiss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dweiss/subscriptions","organizations_url":"https://api.github.com/users/dweiss/orgs","repos_url":"https://api.github.com/users/dweiss/repos","events_url":"https://api.github.com/users/dweiss/events{/privacy}","received_events_url":"https://api.github.com/users/dweiss/received_events","type":"User","site_admin":false},"created_at":"2020-10-08T13:03:46Z","updated_at":"2020-10-08T13:03:46Z","author_association":"CONTRIBUTOR","body":"I mean fail with a reasonable message like \"JDK12_HOME is not set, see contributing.md\"... :)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/705557687","html_url":"https://github.com/elastic/elasticsearch/issues/63303#issuecomment-705557687","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63303","id":705557687,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTU1NzY4Nw==","user":{"login":"breskeby","id":77300,"node_id":"MDQ6VXNlcjc3MzAw","avatar_url":"https://avatars3.githubusercontent.com/u/77300?v=4","gravatar_id":"","url":"https://api.github.com/users/breskeby","html_url":"https://github.com/breskeby","followers_url":"https://api.github.com/users/breskeby/followers","following_url":"https://api.github.com/users/breskeby/following{/other_user}","gists_url":"https://api.github.com/users/breskeby/gists{/gist_id}","starred_url":"https://api.github.com/users/breskeby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/breskeby/subscriptions","organizations_url":"https://api.github.com/users/breskeby/orgs","repos_url":"https://api.github.com/users/breskeby/repos","events_url":"https://api.github.com/users/breskeby/events{/privacy}","received_events_url":"https://api.github.com/users/breskeby/received_events","type":"User","site_admin":false},"created_at":"2020-10-08T13:11:06Z","updated_at":"2020-10-08T13:11:06Z","author_association":"CONTRIBUTOR","body":"I've created https://github.com/elastic/elasticsearch/issues/63480 as a follow up. I agree that ideally the build would fail as early as possible when certain prerequisites are not met. But For now I think we can close this issue as when you follow contributing.md in your es setup the build-tools should not fail anymore.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/705557827","html_url":"https://github.com/elastic/elasticsearch/issues/63303#issuecomment-705557827","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63303","id":705557827,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTU1NzgyNw==","user":{"login":"dweiss","id":199470,"node_id":"MDQ6VXNlcjE5OTQ3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/199470?v=4","gravatar_id":"","url":"https://api.github.com/users/dweiss","html_url":"https://github.com/dweiss","followers_url":"https://api.github.com/users/dweiss/followers","following_url":"https://api.github.com/users/dweiss/following{/other_user}","gists_url":"https://api.github.com/users/dweiss/gists{/gist_id}","starred_url":"https://api.github.com/users/dweiss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dweiss/subscriptions","organizations_url":"https://api.github.com/users/dweiss/orgs","repos_url":"https://api.github.com/users/dweiss/repos","events_url":"https://api.github.com/users/dweiss/events{/privacy}","received_events_url":"https://api.github.com/users/dweiss/received_events","type":"User","site_admin":false},"created_at":"2020-10-08T13:11:21Z","updated_at":"2020-10-08T13:11:21Z","author_association":"CONTRIBUTOR","body":"Thanks Rene. I don't intend to be a pain but if it happened to me then it's likely to happen to more people... Better improve it once.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/705557931","html_url":"https://github.com/elastic/elasticsearch/issues/63303#issuecomment-705557931","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/63303","id":705557931,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTU1NzkzMQ==","user":{"login":"dweiss","id":199470,"node_id":"MDQ6VXNlcjE5OTQ3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/199470?v=4","gravatar_id":"","url":"https://api.github.com/users/dweiss","html_url":"https://github.com/dweiss","followers_url":"https://api.github.com/users/dweiss/followers","following_url":"https://api.github.com/users/dweiss/following{/other_user}","gists_url":"https://api.github.com/users/dweiss/gists{/gist_id}","starred_url":"https://api.github.com/users/dweiss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dweiss/subscriptions","organizations_url":"https://api.github.com/users/dweiss/orgs","repos_url":"https://api.github.com/users/dweiss/repos","events_url":"https://api.github.com/users/dweiss/events{/privacy}","received_events_url":"https://api.github.com/users/dweiss/received_events","type":"User","site_admin":false},"created_at":"2020-10-08T13:11:32Z","updated_at":"2020-10-08T13:11:32Z","author_association":"CONTRIBUTOR","body":"Correct, works. Thanks!","performed_via_github_app":null}]