[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/533703075","html_url":"https://github.com/elastic/elasticsearch/issues/46928#issuecomment-533703075","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46928","id":533703075,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzcwMzA3NQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-09-20T20:45:57Z","updated_at":"2019-09-20T20:45:57Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/538382204","html_url":"https://github.com/elastic/elasticsearch/issues/46928#issuecomment-538382204","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46928","id":538382204,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODM4MjIwNA==","user":{"login":"thePanz","id":226021,"node_id":"MDQ6VXNlcjIyNjAyMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/226021?v=4","gravatar_id":"","url":"https://api.github.com/users/thePanz","html_url":"https://github.com/thePanz","followers_url":"https://api.github.com/users/thePanz/followers","following_url":"https://api.github.com/users/thePanz/following{/other_user}","gists_url":"https://api.github.com/users/thePanz/gists{/gist_id}","starred_url":"https://api.github.com/users/thePanz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thePanz/subscriptions","organizations_url":"https://api.github.com/users/thePanz/orgs","repos_url":"https://api.github.com/users/thePanz/repos","events_url":"https://api.github.com/users/thePanz/events{/privacy}","received_events_url":"https://api.github.com/users/thePanz/received_events","type":"User","site_admin":false},"created_at":"2019-10-04T12:47:19Z","updated_at":"2019-10-04T12:47:19Z","author_association":"NONE","body":"Any update @jimczi ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542091520","html_url":"https://github.com/elastic/elasticsearch/issues/46928#issuecomment-542091520","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46928","id":542091520,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjA5MTUyMA==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2019-10-15T08:05:28Z","updated_at":"2019-10-15T08:05:28Z","author_association":"MEMBER","body":"We discussed this issue internally and decided that we'll update the documentation to explain the limitation. We have a limit in terms of number of fields per mapping so I suppose that you changed the default to allow more than 1000 fields ? If so you also need to increase the maximum number of boolean clause that a query can have: https://www.elastic.co/guide/en/elasticsearch/reference/current/search-settings.html\r\nWe transform any `exists` query on object fields into sub-clauses that check the existence of the leaves so you'll need to set the `indices.query.bool.max_clause_count` to the maximum number of sub-fields that you have for a single object field.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542091618","html_url":"https://github.com/elastic/elasticsearch/issues/46928#issuecomment-542091618","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46928","id":542091618,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjA5MTYxOA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-10-15T08:05:42Z","updated_at":"2019-10-15T08:05:42Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-docs (>docs)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542176953","html_url":"https://github.com/elastic/elasticsearch/issues/46928#issuecomment-542176953","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46928","id":542176953,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjE3Njk1Mw==","user":{"login":"thePanz","id":226021,"node_id":"MDQ6VXNlcjIyNjAyMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/226021?v=4","gravatar_id":"","url":"https://api.github.com/users/thePanz","html_url":"https://github.com/thePanz","followers_url":"https://api.github.com/users/thePanz/followers","following_url":"https://api.github.com/users/thePanz/following{/other_user}","gists_url":"https://api.github.com/users/thePanz/gists{/gist_id}","starred_url":"https://api.github.com/users/thePanz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thePanz/subscriptions","organizations_url":"https://api.github.com/users/thePanz/orgs","repos_url":"https://api.github.com/users/thePanz/repos","events_url":"https://api.github.com/users/thePanz/events{/privacy}","received_events_url":"https://api.github.com/users/thePanz/received_events","type":"User","site_admin":false},"created_at":"2019-10-15T12:00:16Z","updated_at":"2019-10-15T12:04:31Z","author_association":"NONE","body":"@jimczi thank you for the update, a note in the documentation would be great!\r\n\r\nJust one comment:  the `exists` query is transformed to check the existence of leaves, why not checking the existence of nodes 1 step from the requested property only?\r\n\r\nFrom my example above: why not transforming `_exists_:propertyA` to check the existence of `propertyA01` to `propertyA80` (the set of nodes reachable with 1 step from the `propertyA`)?\r\n\r\nThis would lead to creating a fewer queries. WDYT?\r\n\r\n*update1* yes, I can confirm that the `mapping.total_fields.limit`has been changed from the default value to 100k ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542596937","html_url":"https://github.com/elastic/elasticsearch/issues/46928#issuecomment-542596937","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46928","id":542596937,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjU5NjkzNw==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2019-10-16T08:49:21Z","updated_at":"2019-10-16T08:49:21Z","author_association":"MEMBER","body":"> Just one comment: the exists query is transformed to check the existence of leaves, why not checking the existence of nodes 1 step from the requested property only?\r\n\r\nBecause we don't index object fields, we need to find the leaves associated to the requested object because that's what we can search for. In previous versions of Elasticsearch we used to index all field names present in a document in a special field to speed up `exists` queries. However indexing these field names is costly so we now rely on the fact that we have forward iterator on concrete fields (doc values) to perform these queries. \r\n\r\n> update1 yes, I can confirm that the mapping.total_fields.limithas been changed from the default value to 100k\r\n\r\nYou could maybe use a different model to limit the explosion of fields ? For instance a nested field with a `key` and a `value` where `key` would act as a field name and `value` is the content. You can then write nested query that search for the conjunction of a `key` (the field name) and a `value` ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/542804327","html_url":"https://github.com/elastic/elasticsearch/issues/46928#issuecomment-542804327","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46928","id":542804327,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MjgwNDMyNw==","user":{"login":"jrodewig","id":40268737,"node_id":"MDQ6VXNlcjQwMjY4NzM3","avatar_url":"https://avatars1.githubusercontent.com/u/40268737?v=4","gravatar_id":"","url":"https://api.github.com/users/jrodewig","html_url":"https://github.com/jrodewig","followers_url":"https://api.github.com/users/jrodewig/followers","following_url":"https://api.github.com/users/jrodewig/following{/other_user}","gists_url":"https://api.github.com/users/jrodewig/gists{/gist_id}","starred_url":"https://api.github.com/users/jrodewig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrodewig/subscriptions","organizations_url":"https://api.github.com/users/jrodewig/orgs","repos_url":"https://api.github.com/users/jrodewig/repos","events_url":"https://api.github.com/users/jrodewig/events{/privacy}","received_events_url":"https://api.github.com/users/jrodewig/received_events","type":"User","site_admin":false},"created_at":"2019-10-16T17:19:30Z","updated_at":"2019-10-16T17:19:30Z","author_association":"CONTRIBUTOR","body":"I've opened #48153 to note in the docs that `index.mapping.nested_objects.limit` and `indices.query.bool.max_clause_count` should be increased together. All feedback welcome!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/543577146","html_url":"https://github.com/elastic/elasticsearch/issues/46928#issuecomment-543577146","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46928","id":543577146,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MzU3NzE0Ng==","user":{"login":"thePanz","id":226021,"node_id":"MDQ6VXNlcjIyNjAyMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/226021?v=4","gravatar_id":"","url":"https://api.github.com/users/thePanz","html_url":"https://github.com/thePanz","followers_url":"https://api.github.com/users/thePanz/followers","following_url":"https://api.github.com/users/thePanz/following{/other_user}","gists_url":"https://api.github.com/users/thePanz/gists{/gist_id}","starred_url":"https://api.github.com/users/thePanz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thePanz/subscriptions","organizations_url":"https://api.github.com/users/thePanz/orgs","repos_url":"https://api.github.com/users/thePanz/repos","events_url":"https://api.github.com/users/thePanz/events{/privacy}","received_events_url":"https://api.github.com/users/thePanz/received_events","type":"User","site_admin":false},"created_at":"2019-10-18T07:49:36Z","updated_at":"2019-10-18T07:49:36Z","author_association":"NONE","body":"@jrodewig : a mention on the `mapping.total_fields.limit` should be adde too, not only to `index.mapping.nested_objects.limit`","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/543728359","html_url":"https://github.com/elastic/elasticsearch/issues/46928#issuecomment-543728359","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/46928","id":543728359,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MzcyODM1OQ==","user":{"login":"jrodewig","id":40268737,"node_id":"MDQ6VXNlcjQwMjY4NzM3","avatar_url":"https://avatars1.githubusercontent.com/u/40268737?v=4","gravatar_id":"","url":"https://api.github.com/users/jrodewig","html_url":"https://github.com/jrodewig","followers_url":"https://api.github.com/users/jrodewig/followers","following_url":"https://api.github.com/users/jrodewig/following{/other_user}","gists_url":"https://api.github.com/users/jrodewig/gists{/gist_id}","starred_url":"https://api.github.com/users/jrodewig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jrodewig/subscriptions","organizations_url":"https://api.github.com/users/jrodewig/orgs","repos_url":"https://api.github.com/users/jrodewig/repos","events_url":"https://api.github.com/users/jrodewig/events{/privacy}","received_events_url":"https://api.github.com/users/jrodewig/received_events","type":"User","site_admin":false},"created_at":"2019-10-18T12:54:37Z","updated_at":"2019-10-18T12:54:37Z","author_association":"CONTRIBUTOR","body":"Thanks @thePanz . I've relocated the note in the PR.","performed_via_github_app":null}]