{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/5024","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5024/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5024/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5024/events","html_url":"https://github.com/elastic/elasticsearch/issues/5024","id":26986562,"node_id":"MDU6SXNzdWUyNjk4NjU2Mg==","number":5024,"title":"CommonTermsQuery should support querying fields other than its source of commonness","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2014-02-05T18:46:02Z","updated_at":"2014-03-31T17:26:24Z","closed_at":"2014-03-31T17:26:24Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"I'd like to be able to do a CommonTermsQuery against multiple fields.  One field would determine if the term is common and the others would be ORed together.  Something like:\n\n``` js\n{ \"common\": {\n  \"body\": {\n    \"high_freq_operator\": \"and\",\n    \"fields\": [\"title\", \"body\"],\n    \"query\": \"nelly the elephant not as a cartoon\",\n  }\n} }\n```\n\nwould become something like:\n\n``` js\n{ \"bool\": {\n  \"must\": {\n    \"bool\": {\n      \"must\": [\n        { \"bool\": {\n          \"should\": [{ \"term\": { \"title\": \"nelly\"}}, { \"term\": { \"body\": \"nelly\"}}],\n          \"minimum_should_match\": 1\n        },\n        { \"bool\": {\n          \"should\": [{ \"term\": { \"title\": \"elephant\"}}, { \"term\": { \"body\": \"elephant\"}}],\n          \"minimum_should_match\": 1\n        },\n        { \"bool\": {\n          \"should\": [{ \"term\": { \"title\": \"cartoon\"}}, { \"term\": { \"body\": \"cartoon\"}}],\n          \"minimum_should_match\": 1\n        }\n      ]\n    }\n  },\n  \"should\": {\n    \"bool\": {\n      \"should\": [\n        { \"bool\": {\n          \"should\": [{ \"term\": { \"title\": \"the\"}}, { \"term\": { \"body\": \"the\"}}],\n          \"minimum_should_match\": 1\n        },\n        { \"bool\": {\n          \"should\": [{ \"term\": { \"title\": \"not\"}}, { \"term\": { \"body\": \"not\"}}],\n          \"minimum_should_match\": 1\n        },\n        { \"bool\": {\n          \"should\": [{ \"term\": { \"title\": \"as\"}}, { \"term\": { \"body\": \"as\"}}],\n          \"minimum_should_match\": 1\n        },\n        { \"bool\": {\n          \"should\": [{ \"term\": { \"title\": \"a\"}}, { \"term\": { \"body\": \"a\"}}],\n          \"minimum_should_match\": 1\n        }\n      ]\n    }\n  }\n} }\n```\n\nThis bug has a Lucene twin: https://issues.apache.org/jira/browse/LUCENE-5435\n","closed_by":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"performed_via_github_app":null}