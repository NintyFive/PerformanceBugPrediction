[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/623478908","html_url":"https://github.com/elastic/elasticsearch/issues/56113#issuecomment-623478908","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56113","id":623478908,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMzQ3ODkwOA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-05-04T13:55:25Z","updated_at":"2020-05-04T13:55:25Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search (:Search/Analysis)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/623904308","html_url":"https://github.com/elastic/elasticsearch/issues/56113#issuecomment-623904308","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56113","id":623904308,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMzkwNDMwOA==","user":{"login":"telendt","id":85191,"node_id":"MDQ6VXNlcjg1MTkx","avatar_url":"https://avatars2.githubusercontent.com/u/85191?v=4","gravatar_id":"","url":"https://api.github.com/users/telendt","html_url":"https://github.com/telendt","followers_url":"https://api.github.com/users/telendt/followers","following_url":"https://api.github.com/users/telendt/following{/other_user}","gists_url":"https://api.github.com/users/telendt/gists{/gist_id}","starred_url":"https://api.github.com/users/telendt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/telendt/subscriptions","organizations_url":"https://api.github.com/users/telendt/orgs","repos_url":"https://api.github.com/users/telendt/repos","events_url":"https://api.github.com/users/telendt/events{/privacy}","received_events_url":"https://api.github.com/users/telendt/received_events","type":"User","site_admin":false},"created_at":"2020-05-05T07:39:08Z","updated_at":"2020-05-05T07:39:08Z","author_association":"CONTRIBUTOR","body":"If you're ok with adding this feature (support for rules with multiple tokens on LHS into stemmer override token filter so that they work similarly to contraction rules in synonym token filter) then I can prepare a PR for that.\r\n\r\nThis looks like a low-risk and low-effort change to me, although this issue is also probably a low priority 🤷‍♂️ ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/624247501","html_url":"https://github.com/elastic/elasticsearch/issues/56113#issuecomment-624247501","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56113","id":624247501,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNDI0NzUwMQ==","user":{"login":"mayya-sharipova","id":5738841,"node_id":"MDQ6VXNlcjU3Mzg4NDE=","avatar_url":"https://avatars1.githubusercontent.com/u/5738841?v=4","gravatar_id":"","url":"https://api.github.com/users/mayya-sharipova","html_url":"https://github.com/mayya-sharipova","followers_url":"https://api.github.com/users/mayya-sharipova/followers","following_url":"https://api.github.com/users/mayya-sharipova/following{/other_user}","gists_url":"https://api.github.com/users/mayya-sharipova/gists{/gist_id}","starred_url":"https://api.github.com/users/mayya-sharipova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayya-sharipova/subscriptions","organizations_url":"https://api.github.com/users/mayya-sharipova/orgs","repos_url":"https://api.github.com/users/mayya-sharipova/repos","events_url":"https://api.github.com/users/mayya-sharipova/events{/privacy}","received_events_url":"https://api.github.com/users/mayya-sharipova/received_events","type":"User","site_admin":false},"created_at":"2020-05-05T19:05:18Z","updated_at":"2020-05-05T19:05:18Z","author_association":"CONTRIBUTOR","body":"@telendt Thank you for submitting this issue.\r\nWhat's happening is that the LSH of the rule is saved as is. So if you don't do the tokenization, your rule gets applied:\r\n```js\r\nGET test/_analyze\r\n{\r\n  \"text\": \"swimming, swims\",\r\n  \"tokenizer\": \"keyword\", \r\n  \"filter\": [\"stems\"]\r\n}\r\n```\r\nreturns \r\n```js\r\n{\r\n    \"tokens\": [\r\n        {\r\n            \"token\": \"swim\",\r\n            \"start_offset\": 0,\r\n            \"end_offset\": 15,\r\n            \"type\": \"word\",\r\n            \"position\": 0\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\nIt indeed would be nice for `stemmer_override` filter to support contraction rules, but I think this should be done on Lucene side.  elasticsearch passes rules to the underlying Lucene filters, and it is up to Lucene filters to process these rules. So I would suggest to submit an issue in [Lucene Jira](https://issues.apache.org/jira/projects/LUCENE/issues).\r\nI will be closing this issue on the elasticsearch side.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/624260497","html_url":"https://github.com/elastic/elasticsearch/issues/56113#issuecomment-624260497","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56113","id":624260497,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNDI2MDQ5Nw==","user":{"login":"telendt","id":85191,"node_id":"MDQ6VXNlcjg1MTkx","avatar_url":"https://avatars2.githubusercontent.com/u/85191?v=4","gravatar_id":"","url":"https://api.github.com/users/telendt","html_url":"https://github.com/telendt","followers_url":"https://api.github.com/users/telendt/followers","following_url":"https://api.github.com/users/telendt/following{/other_user}","gists_url":"https://api.github.com/users/telendt/gists{/gist_id}","starred_url":"https://api.github.com/users/telendt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/telendt/subscriptions","organizations_url":"https://api.github.com/users/telendt/orgs","repos_url":"https://api.github.com/users/telendt/repos","events_url":"https://api.github.com/users/telendt/events{/privacy}","received_events_url":"https://api.github.com/users/telendt/received_events","type":"User","site_admin":false},"created_at":"2020-05-05T19:30:48Z","updated_at":"2020-05-05T19:30:48Z","author_association":"CONTRIBUTOR","body":"@mayya-sharipova:\r\n> What's happening is that the LSH of the rule is saved as is [...]\r\n\r\nYes, but only because you chose to do so. \r\n\r\nAFAIK Solr's StemmerOverrideFilterFactory accepts tab separated dictionary file. There's no confusion there as the format is different than synonyms mapping format (comma separated with `=>`). You chose similar format (with `=>`) and thus the confusion.\r\n\r\nIs it common to stem tokens containing comas? If not I don't see why:\r\n```\r\nswimming, swims => swim\r\n```\r\ncould not result in:\r\n```java\r\nbuilder.add(\"swimming\", \"swim\");\r\nbuilder.add(\"swims\", \"swim\");\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/624269896","html_url":"https://github.com/elastic/elasticsearch/issues/56113#issuecomment-624269896","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56113","id":624269896,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNDI2OTg5Ng==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2020-05-05T19:49:06Z","updated_at":"2020-05-05T19:49:06Z","author_association":"MEMBER","body":"> Yes, but only because you chose to do so.\r\n\r\nAgreed, the parsing is done in the factory that is defined in Elasticsearch so the decision is ours. We don't need to change anything in Lucene. I don't have a strong opinion regarding the decision but we shouldn't accept bad rules silently. We should validate that the left side is a single term or accept a list of terms but I agree that the current situation is confusing so I am reopening the issue.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/624282526","html_url":"https://github.com/elastic/elasticsearch/issues/56113#issuecomment-624282526","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56113","id":624282526,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNDI4MjUyNg==","user":{"login":"mayya-sharipova","id":5738841,"node_id":"MDQ6VXNlcjU3Mzg4NDE=","avatar_url":"https://avatars1.githubusercontent.com/u/5738841?v=4","gravatar_id":"","url":"https://api.github.com/users/mayya-sharipova","html_url":"https://github.com/mayya-sharipova","followers_url":"https://api.github.com/users/mayya-sharipova/followers","following_url":"https://api.github.com/users/mayya-sharipova/following{/other_user}","gists_url":"https://api.github.com/users/mayya-sharipova/gists{/gist_id}","starred_url":"https://api.github.com/users/mayya-sharipova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayya-sharipova/subscriptions","organizations_url":"https://api.github.com/users/mayya-sharipova/orgs","repos_url":"https://api.github.com/users/mayya-sharipova/repos","events_url":"https://api.github.com/users/mayya-sharipova/events{/privacy}","received_events_url":"https://api.github.com/users/mayya-sharipova/received_events","type":"User","site_admin":false},"created_at":"2020-05-05T20:15:38Z","updated_at":"2020-05-05T20:15:53Z","author_association":"CONTRIBUTOR","body":"Thanks @jimczi for weighing in. \r\n\r\n@telendt ok, great! Your patch to elasticsearch is welcome.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/624557926","html_url":"https://github.com/elastic/elasticsearch/issues/56113#issuecomment-624557926","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56113","id":624557926,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNDU1NzkyNg==","user":{"login":"telendt","id":85191,"node_id":"MDQ6VXNlcjg1MTkx","avatar_url":"https://avatars2.githubusercontent.com/u/85191?v=4","gravatar_id":"","url":"https://api.github.com/users/telendt","html_url":"https://github.com/telendt","followers_url":"https://api.github.com/users/telendt/followers","following_url":"https://api.github.com/users/telendt/following{/other_user}","gists_url":"https://api.github.com/users/telendt/gists{/gist_id}","starred_url":"https://api.github.com/users/telendt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/telendt/subscriptions","organizations_url":"https://api.github.com/users/telendt/orgs","repos_url":"https://api.github.com/users/telendt/repos","events_url":"https://api.github.com/users/telendt/events{/privacy}","received_events_url":"https://api.github.com/users/telendt/received_events","type":"User","site_admin":false},"created_at":"2020-05-06T10:07:05Z","updated_at":"2020-05-06T10:07:05Z","author_association":"CONTRIBUTOR","body":"Cool. It might take me some time to set up my environment and get familiar with the code but I will try to provide a PR in the following days.","performed_via_github_app":null}]