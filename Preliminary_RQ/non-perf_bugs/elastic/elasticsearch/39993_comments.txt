[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/472423767","html_url":"https://github.com/elastic/elasticsearch/issues/39993#issuecomment-472423767","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39993","id":472423767,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjQyMzc2Nw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-03-13T13:34:34Z","updated_at":"2019-03-13T13:34:34Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/472640268","html_url":"https://github.com/elastic/elasticsearch/issues/39993#issuecomment-472640268","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39993","id":472640268,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjY0MDI2OA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2019-03-13T23:04:41Z","updated_at":"2019-03-13T23:04:41Z","author_association":"MEMBER","body":"The add-file type was specifically added for GCS credential support. The plain `add` is for string (SecureStringSetting in the code) credentials, but for GCS the entire file is encrypted (SecureFileSetting in the code).\r\n\r\nYou are right the docs are not clear about that; it should be simple to fix. Additionally, long term I would like to have the type required by the setting be enforced when adding to the keystore, but there is a lot of high hanging fruit to get there (we don't even know what setting names are valid when the keystore tool runs).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/472761399","html_url":"https://github.com/elastic/elasticsearch/issues/39993#issuecomment-472761399","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39993","id":472761399,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3Mjc2MTM5OQ==","user":{"login":"thna123459","id":17447917,"node_id":"MDQ6VXNlcjE3NDQ3OTE3","avatar_url":"https://avatars1.githubusercontent.com/u/17447917?v=4","gravatar_id":"","url":"https://api.github.com/users/thna123459","html_url":"https://github.com/thna123459","followers_url":"https://api.github.com/users/thna123459/followers","following_url":"https://api.github.com/users/thna123459/following{/other_user}","gists_url":"https://api.github.com/users/thna123459/gists{/gist_id}","starred_url":"https://api.github.com/users/thna123459/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thna123459/subscriptions","organizations_url":"https://api.github.com/users/thna123459/orgs","repos_url":"https://api.github.com/users/thna123459/repos","events_url":"https://api.github.com/users/thna123459/events{/privacy}","received_events_url":"https://api.github.com/users/thna123459/received_events","type":"User","site_admin":false},"created_at":"2019-03-14T09:01:36Z","updated_at":"2019-03-14T09:01:36Z","author_association":"NONE","body":"Mixing two distinct types of data in a single keystore breaks credential management through Puppet, and I do not see how that can be fixed at this time. Should I open a bug report on `puppet-elasticsearch`? https://github.com/elastic/puppet-elasticsearch/blob/master/lib/puppet/provider/elasticsearch_keystore/elasticsearch_keystore.rb\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/477723896","html_url":"https://github.com/elastic/elasticsearch/issues/39993#issuecomment-477723896","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39993","id":477723896,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzcyMzg5Ng==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2019-03-28T18:45:08Z","updated_at":"2019-03-28T18:46:06Z","author_association":"MEMBER","body":"> Mixing two distinct types of data in a single keystore breaks credential management\r\n\r\nI'm not sure what you mean. The keystore has 2 distinct types of keys right now, there is no mixing. Currently GCS is the only user of the second \"file\" type. The existence of this second type was partly due encoding issues when I originally added secure GCS settings. At that time, the elasticsearch keystore wrapped a java keystore.\r\n\r\nI've opened https://github.com/elastic/elasticsearch/pull/40605 to improve the docs. Please do open an issue for puppet-elasticsearch.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/477726280","html_url":"https://github.com/elastic/elasticsearch/issues/39993#issuecomment-477726280","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39993","id":477726280,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzcyNjI4MA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2019-03-28T18:51:46Z","updated_at":"2019-03-28T18:51:46Z","author_association":"MEMBER","body":"> The existence of this second type was partly due encoding issues\r\n\r\nAnother reason is the interface internally needs to be different for the two types. The \"file\" type is exposed in code as reading an InputStream, while all the other string settings are exposed as SecureString objects.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/477916442","html_url":"https://github.com/elastic/elasticsearch/issues/39993#issuecomment-477916442","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39993","id":477916442,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NzkxNjQ0Mg==","user":{"login":"thna123459","id":17447917,"node_id":"MDQ6VXNlcjE3NDQ3OTE3","avatar_url":"https://avatars1.githubusercontent.com/u/17447917?v=4","gravatar_id":"","url":"https://api.github.com/users/thna123459","html_url":"https://github.com/thna123459","followers_url":"https://api.github.com/users/thna123459/followers","following_url":"https://api.github.com/users/thna123459/following{/other_user}","gists_url":"https://api.github.com/users/thna123459/gists{/gist_id}","starred_url":"https://api.github.com/users/thna123459/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thna123459/subscriptions","organizations_url":"https://api.github.com/users/thna123459/orgs","repos_url":"https://api.github.com/users/thna123459/repos","events_url":"https://api.github.com/users/thna123459/events{/privacy}","received_events_url":"https://api.github.com/users/thna123459/received_events","type":"User","site_admin":false},"created_at":"2019-03-29T08:43:27Z","updated_at":"2019-03-29T08:44:08Z","author_association":"NONE","body":"File credentials require an actual clear text file on the file system, therefore:\r\n1. It looks really strange to require a secret to be in a clear text file to add it to an encrypted/obfuscated keystore (?)\r\n2. Puppet is now unable to manage Elasticsearch keystore files because it cannot handle this new corner case. It is possible to work around that by not using Puppet, but that is inconvenient.\r\n\r\nI suggest that `add-file` should read credentials from stdin too (if it already does, please indicate how?).","performed_via_github_app":null}]