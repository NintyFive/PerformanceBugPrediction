[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/687014200","html_url":"https://github.com/elastic/elasticsearch/issues/61959#issuecomment-687014200","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61959","id":687014200,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzAxNDIwMA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-09-04T08:45:22Z","updated_at":"2020-09-04T08:45:22Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed (:Distributed/Engine)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/687014366","html_url":"https://github.com/elastic/elasticsearch/issues/61959#issuecomment-687014366","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61959","id":687014366,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzAxNDM2Ng==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2020-09-04T08:45:45Z","updated_at":"2020-09-04T08:45:45Z","author_association":"CONTRIBUTOR","body":"Relates https://github.com/elastic/elasticsearch/pull/61768","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/687513130","html_url":"https://github.com/elastic/elasticsearch/issues/61959#issuecomment-687513130","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61959","id":687513130,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzUxMzEzMA==","user":{"login":"sohami","id":22159459,"node_id":"MDQ6VXNlcjIyMTU5NDU5","avatar_url":"https://avatars1.githubusercontent.com/u/22159459?v=4","gravatar_id":"","url":"https://api.github.com/users/sohami","html_url":"https://github.com/sohami","followers_url":"https://api.github.com/users/sohami/followers","following_url":"https://api.github.com/users/sohami/following{/other_user}","gists_url":"https://api.github.com/users/sohami/gists{/gist_id}","starred_url":"https://api.github.com/users/sohami/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sohami/subscriptions","organizations_url":"https://api.github.com/users/sohami/orgs","repos_url":"https://api.github.com/users/sohami/repos","events_url":"https://api.github.com/users/sohami/events{/privacy}","received_events_url":"https://api.github.com/users/sohami/received_events","type":"User","site_admin":false},"created_at":"2020-09-05T01:38:17Z","updated_at":"2020-09-05T01:38:17Z","author_association":"NONE","body":"@ywelsch - I was also thinking that shouldn't there be a timed wait while acquiring the throttle lock `throttle.acquireThrottle`. In cases when a write thread takes the lock and end up blocking somewhere in the Lucene layer (because of some bug), that may end up blocking all the other indexing thread as well since they will wait indefinitely for this throttle lock. Instead based on timed throttle, if a writer thread doesn't get the lock its request can be rejected by the engine.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/688163230","html_url":"https://github.com/elastic/elasticsearch/issues/61959#issuecomment-688163230","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61959","id":688163230,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODE2MzIzMA==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2020-09-07T08:34:28Z","updated_at":"2020-09-07T08:34:28Z","author_association":"CONTRIBUTOR","body":"I think the untimed lock is fine. I'm not aware of any such bug, and I would rather not like the system to silently work around such a bug if it were to exist.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/690876503","html_url":"https://github.com/elastic/elasticsearch/issues/61959#issuecomment-690876503","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/61959","id":690876503,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MDg3NjUwMw==","user":{"login":"sohami","id":22159459,"node_id":"MDQ6VXNlcjIyMTU5NDU5","avatar_url":"https://avatars1.githubusercontent.com/u/22159459?v=4","gravatar_id":"","url":"https://api.github.com/users/sohami","html_url":"https://github.com/sohami","followers_url":"https://api.github.com/users/sohami/followers","following_url":"https://api.github.com/users/sohami/following{/other_user}","gists_url":"https://api.github.com/users/sohami/gists{/gist_id}","starred_url":"https://api.github.com/users/sohami/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sohami/subscriptions","organizations_url":"https://api.github.com/users/sohami/orgs","repos_url":"https://api.github.com/users/sohami/repos","events_url":"https://api.github.com/users/sohami/events{/privacy}","received_events_url":"https://api.github.com/users/sohami/received_events","type":"User","site_admin":false},"created_at":"2020-09-11T05:07:55Z","updated_at":"2020-09-11T05:11:50Z","author_association":"NONE","body":"While investigating this issue only I found the case where one of the write thread was blocked indefinitely. I have opened a bug with Lucene here: https://issues.apache.org/jira/browse/LUCENE-9508. \r\nIn my opinion it is not silently working around the bug, instead it is making sure that write thread pool doesn't get blocked on that lock indefinitely, when indexing is anyways blocked in the Lucene layer. One bad index can end up consuming the entire write thread pool in such cases.","performed_via_github_app":null}]