[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/414707089","html_url":"https://github.com/elastic/elasticsearch/issues/33030#issuecomment-414707089","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33030","id":414707089,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDcwNzA4OQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-08-21T15:03:56Z","updated_at":"2018-08-21T15:03:56Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/414707098","html_url":"https://github.com/elastic/elasticsearch/issues/33030#issuecomment-414707098","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33030","id":414707098,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDcwNzA5OA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-08-21T15:03:57Z","updated_at":"2018-08-21T15:03:57Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/414760935","html_url":"https://github.com/elastic/elasticsearch/issues/33030#issuecomment-414760935","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33030","id":414760935,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDc2MDkzNQ==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2018-08-21T17:43:37Z","updated_at":"2018-08-21T17:43:58Z","author_association":"CONTRIBUTOR","body":"The issue here is that we should not simply drop the file-based discovery plugin, because this would be a breaking change to any scripts that provision ES nodes with this plugin installed. I propose:\r\n\r\n- in 6.x, move the implementation of `FileBasedUnicastHostsProvider` into `server`, but leave the `discovery-file` plugin in existence as an empty plugin that logs a deprecation warning if used.\r\n\r\n- in 7.0, remove the now-empty `discovery-file` plugin.\r\n\r\nThis means that setting `discovery.zen.hosts_provider: file` will continue to work as it does now with the plugin installed; furthermore it will also start to work if the plugin is not installed. Installing the plugin will become a no-op in 6.x (except for the deprecation warning) so can be removed from provisioning scripting at leisure. @franekrichardson does this plan work for you?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/414950650","html_url":"https://github.com/elastic/elasticsearch/issues/33030#issuecomment-414950650","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33030","id":414950650,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDk1MDY1MA==","user":{"login":"franekrichardson","id":17855575,"node_id":"MDQ6VXNlcjE3ODU1NTc1","avatar_url":"https://avatars0.githubusercontent.com/u/17855575?v=4","gravatar_id":"","url":"https://api.github.com/users/franekrichardson","html_url":"https://github.com/franekrichardson","followers_url":"https://api.github.com/users/franekrichardson/followers","following_url":"https://api.github.com/users/franekrichardson/following{/other_user}","gists_url":"https://api.github.com/users/franekrichardson/gists{/gist_id}","starred_url":"https://api.github.com/users/franekrichardson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/franekrichardson/subscriptions","organizations_url":"https://api.github.com/users/franekrichardson/orgs","repos_url":"https://api.github.com/users/franekrichardson/repos","events_url":"https://api.github.com/users/franekrichardson/events{/privacy}","received_events_url":"https://api.github.com/users/franekrichardson/received_events","type":"User","site_admin":false},"created_at":"2018-08-22T08:14:42Z","updated_at":"2018-08-22T08:14:42Z","author_association":"NONE","body":"@DaveCTurner yes thats very manageable for us :+1: ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/416383382","html_url":"https://github.com/elastic/elasticsearch/issues/33030#issuecomment-416383382","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33030","id":416383382,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNjM4MzM4Mg==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2018-08-27T22:01:02Z","updated_at":"2018-08-27T22:01:02Z","author_association":"MEMBER","body":"@ywelsch What about adding file based discovery as a dependency of the test framework? It would slightly complicate the file based discovery unit tests, but we didn't add it to server in the first place for a reason right?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/416383912","html_url":"https://github.com/elastic/elasticsearch/issues/33030#issuecomment-416383912","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33030","id":416383912,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNjM4MzkxMg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-08-27T22:03:17Z","updated_at":"2018-08-27T22:03:17Z","author_association":"MEMBER","body":"Thatâ€™s not enough, it needs to be available as production code for external-to-us  reasons. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/416390458","html_url":"https://github.com/elastic/elasticsearch/issues/33030#issuecomment-416390458","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33030","id":416390458,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNjM5MDQ1OA==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2018-08-27T22:32:33Z","updated_at":"2018-08-27T22:32:33Z","author_association":"MEMBER","body":">  it needs to be available as production code for external-to-us reasons.\r\n\r\nThat was not in this issue description? I only see test uses.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/416392182","html_url":"https://github.com/elastic/elasticsearch/issues/33030#issuecomment-416392182","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33030","id":416392182,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNjM5MjE4Mg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-08-27T22:40:44Z","updated_at":"2018-08-27T22:40:44Z","author_association":"MEMBER","body":"@rjernst I will reach out to discuss.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/416549641","html_url":"https://github.com/elastic/elasticsearch/issues/33030#issuecomment-416549641","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33030","id":416549641,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNjU0OTY0MQ==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2018-08-28T11:26:03Z","updated_at":"2018-08-28T11:26:03Z","author_association":"CONTRIBUTOR","body":"I was not aware of a non-test-related reason for doing this. I am also not aware of the reasons why we kept it out of `server`. Moving it in seems benign - it's a small piece of code and does nothing unless configured - but that is not a convincing argument if there are other ways to achieve the same ends.\r\n\r\nAre there other plugins that are available to integ and REST tests? I ask so I can look at the plumbing involved.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/416551881","html_url":"https://github.com/elastic/elasticsearch/issues/33030#issuecomment-416551881","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33030","id":416551881,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNjU1MTg4MQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-08-28T11:35:32Z","updated_at":"2018-08-28T12:28:59Z","author_association":"MEMBER","body":"> I was not aware of a non-test-related reason for doing this.\r\n\r\nThere are non-test production use-cases, for example cloud providers and Docker. One of the big advantages of file-based discovery is that we reload the file when discovery is needed so that hosts can be dynamically added. This is unlike the unicast host list which is not dynamic. That it is a file is also convenient for deployment.\r\n\r\n> I am also not aware of the reasons why we kept it out of `server`.\r\n\r\nI am not either. And I do not see a compelling reason to keep it out of `server`. I think it can go directly in `server` but if that is unsatisfactory to some then we can make it a `lib` (I think the overhead is not worth it, and the isolation buys us very little).\r\n\r\n> Are there other plugins that are available to integ and REST tests?\r\n\r\nWe make the `elasticsearch-nio` library available, but not the `transport-nio` plugin. There is not precedence for making plugins available to the test framework.\r\n\r\nLet us go with the simple approach of moving to `server`.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/416555075","html_url":"https://github.com/elastic/elasticsearch/issues/33030#issuecomment-416555075","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/33030","id":416555075,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNjU1NTA3NQ==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2018-08-28T11:48:40Z","updated_at":"2018-08-28T11:48:40Z","author_association":"CONTRIBUTOR","body":"Makes sense, thanks @jasontedor.","performed_via_github_app":null}]