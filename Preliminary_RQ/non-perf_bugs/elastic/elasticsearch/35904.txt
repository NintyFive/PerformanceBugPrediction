{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/35904","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35904/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35904/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35904/events","html_url":"https://github.com/elastic/elasticsearch/issues/35904","id":384292611,"node_id":"MDU6SXNzdWUzODQyOTI2MTE=","number":35904,"title":"Failure in test {yaml=painless/30_search/Exception on negative score}","user":{"login":"iverase","id":29038686,"node_id":"MDQ6VXNlcjI5MDM4Njg2","avatar_url":"https://avatars1.githubusercontent.com/u/29038686?v=4","gravatar_id":"","url":"https://api.github.com/users/iverase","html_url":"https://github.com/iverase","followers_url":"https://api.github.com/users/iverase/followers","following_url":"https://api.github.com/users/iverase/following{/other_user}","gists_url":"https://api.github.com/users/iverase/gists{/gist_id}","starred_url":"https://api.github.com/users/iverase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iverase/subscriptions","organizations_url":"https://api.github.com/users/iverase/orgs","repos_url":"https://api.github.com/users/iverase/repos","events_url":"https://api.github.com/users/iverase/events{/privacy}","received_events_url":"https://api.github.com/users/iverase/received_events","type":"User","site_admin":false},"labels":[{"id":418189364,"node_id":"MDU6TGFiZWw0MTgxODkzNjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Ranking","name":":Search/Ranking","color":"0e8a16","default":false,"description":"Scoring, rescoring, rank evaluation."},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-11-26T11:42:01Z","updated_at":"2018-11-26T15:45:57Z","closed_at":"2018-11-26T15:45:57Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"This test failed in:\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob-unix-compatibility/os=debian/79/console\r\n\r\n\r\nThe error is: \r\n\r\n```\r\njava.lang.AssertionError: Failure at [painless/30_search:463]: expected [400] status code but api [search] returned [200 OK] [{\"took\":39,\"timed_out\":false,\"_shards\":{\"total\":2,\"successful\":1,\"skipped\":0,\"failed\":1,\"failures\":[{\"shard\":0,\"index\":\"test\",\"node\":\"NFi9eDrdQ5WQvhylFyC61w\",\"reason\":{\"type\":\"illegal_argument_exception\",\"reason\":\"script score function must not produce negative scores, but got: [-9.0]\"}}]},\"hits\":{\"total\":0,\"max_score\":null,\"hits\":[]}}]\r\n\tat __randomizedtesting.SeedInfo.seed([A614BD8726AD3F08:2E40825D885152F0]:0)\r\n\tat org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.executeSection(ESClientYamlSuiteTestCase.java:407)\r\n\tat org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.test(ESClientYamlSuiteTestCase.java:384)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n```\r\n\r\nThe REPRO command is:\r\n\r\n```\r\nREPRODUCE WITH: ./gradlew :modules:lang-painless:integTestRunner \\\r\n  -Dtests.seed=A614BD8726AD3F08 \\\r\n  -Dtests.class=org.elasticsearch.painless.LangPainlessClientYamlTestSuiteIT \\\r\n  -Dtests.method=\"test {yaml=painless/30_search/Exception on negative score}\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=mk-MK \\\r\n  -Dtests.timezone=America/Campo_Grande \\\r\n  -Dcompiler.java=11 \\\r\n  -Druntime.java=8\r\n```\r\n\r\nreproduces locally.\r\n","closed_by":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"performed_via_github_app":null}