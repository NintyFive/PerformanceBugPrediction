[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/13765018","html_url":"https://github.com/elastic/elasticsearch/issues/2663#issuecomment-13765018","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2663","id":13765018,"node_id":"MDEyOklzc3VlQ29tbWVudDEzNzY1MDE4","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2013-02-19T10:02:39Z","updated_at":"2013-02-19T10:02:39Z","author_association":"MEMBER","body":"Yes, changing routing / parent value is trappy. We could implement this nicely via the update api with a script.\n\n```\ncurl -XPOST 'localhost:9200/index/type/1/_update' -d '{\n   \"script\" : \"ctx._routing = newRouting\",\n   \"params\" : {\n        \"newRouting\" : \"my_new_routing\"\n    }\n}'\n```\n\nAt the moment only updating `_ttl` and `_timestamp` is supported via this way.\nI guess when indexing existing docs via index api, something like `old_route` / `old_parent` is the way to go.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/13977716","html_url":"https://github.com/elastic/elasticsearch/issues/2663#issuecomment-13977716","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2663","id":13977716,"node_id":"MDEyOklzc3VlQ29tbWVudDEzOTc3NzE2","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2013-02-22T22:53:37Z","updated_at":"2013-02-22T22:53:37Z","author_association":"MEMBER","body":"Note that its very delicate to update routing using the update API, effectively, you need to delete the doc from one shard, and update it in another shard..., we don't do those now...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/48027688","html_url":"https://github.com/elastic/elasticsearch/issues/2663#issuecomment-48027688","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2663","id":48027688,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDI3Njg4","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-07-04T10:07:38Z","updated_at":"2014-07-04T10:07:38Z","author_association":"CONTRIBUTOR","body":"We should disallow changing the routing value during an update request.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/68059875","html_url":"https://github.com/elastic/elasticsearch/issues/2663#issuecomment-68059875","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2663","id":68059875,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDU5ODc1","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-12-24T15:51:15Z","updated_at":"2014-12-24T15:51:15Z","author_association":"CONTRIBUTOR","body":"It looks like you can't change id, routing or parent values during an update request, so this appears to work already. Closing\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/234726116","html_url":"https://github.com/elastic/elasticsearch/issues/2663#issuecomment-234726116","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2663","id":234726116,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNDcyNjExNg==","user":{"login":"zanona","id":32017,"node_id":"MDQ6VXNlcjMyMDE3","avatar_url":"https://avatars3.githubusercontent.com/u/32017?v=4","gravatar_id":"","url":"https://api.github.com/users/zanona","html_url":"https://github.com/zanona","followers_url":"https://api.github.com/users/zanona/followers","following_url":"https://api.github.com/users/zanona/following{/other_user}","gists_url":"https://api.github.com/users/zanona/gists{/gist_id}","starred_url":"https://api.github.com/users/zanona/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zanona/subscriptions","organizations_url":"https://api.github.com/users/zanona/orgs","repos_url":"https://api.github.com/users/zanona/repos","events_url":"https://api.github.com/users/zanona/events{/privacy}","received_events_url":"https://api.github.com/users/zanona/received_events","type":"User","site_admin":false},"created_at":"2016-07-23T16:09:37Z","updated_at":"2016-07-23T16:14:46Z","author_association":"NONE","body":"Just wondering if transferring parent ownership is still something not possible?\n\nLet's say a company has many members as children. If I, as the admin/owner of the company wants to transfer the ownership of the company to another user, then using parent/child relationship wouldn't be possible since I would need to update the parent value and so all the members of the company point to the new shard? How would you guys work with this kind of situation?\n\nWould the solution still be deleting the document and all its children and re-create them pointing to the new parent?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/235627976","html_url":"https://github.com/elastic/elasticsearch/issues/2663#issuecomment-235627976","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2663","id":235627976,"node_id":"MDEyOklzc3VlQ29tbWVudDIzNTYyNzk3Ng==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-07-27T15:45:17Z","updated_at":"2016-07-27T15:45:17Z","author_association":"CONTRIBUTOR","body":"> Would the solution still be deleting the document and all its children and re-create them pointing to the new parent?\n\nyes\n","performed_via_github_app":null}]