[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/265450727","html_url":"https://github.com/elastic/elasticsearch/issues/22029#issuecomment-265450727","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22029","id":265450727,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTQ1MDcyNw==","user":{"login":"Mpdreamz","id":245275,"node_id":"MDQ6VXNlcjI0NTI3NQ==","avatar_url":"https://avatars3.githubusercontent.com/u/245275?v=4","gravatar_id":"","url":"https://api.github.com/users/Mpdreamz","html_url":"https://github.com/Mpdreamz","followers_url":"https://api.github.com/users/Mpdreamz/followers","following_url":"https://api.github.com/users/Mpdreamz/following{/other_user}","gists_url":"https://api.github.com/users/Mpdreamz/gists{/gist_id}","starred_url":"https://api.github.com/users/Mpdreamz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Mpdreamz/subscriptions","organizations_url":"https://api.github.com/users/Mpdreamz/orgs","repos_url":"https://api.github.com/users/Mpdreamz/repos","events_url":"https://api.github.com/users/Mpdreamz/events{/privacy}","received_events_url":"https://api.github.com/users/Mpdreamz/received_events","type":"User","site_admin":false},"created_at":"2016-12-07T13:46:39Z","updated_at":"2016-12-07T13:46:51Z","author_association":"MEMBER","body":"Ok digging a bit further back it seems something has changed in how this is returned \r\n\r\nElasticsearch 2.1.1 used to return:\r\n\r\n```json\r\n\"publish_address\" : \"elastic.co/35.160.254.14:9200\"\r\n```\r\n\r\nBut in 2.4.6 and 5.x the cname part is dropped\r\n\r\n```json\r\n\"publish_address\" : \"35.160.254.14:9200\"\r\n````\r\n\r\nIn the .net client sniffing we give precedence to the part returned before the `/` as the hostname for the calls that we do.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/299440518","html_url":"https://github.com/elastic/elasticsearch/issues/22029#issuecomment-299440518","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22029","id":299440518,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTQ0MDUxOA==","user":{"login":"soenkeliebau","id":1070361,"node_id":"MDQ6VXNlcjEwNzAzNjE=","avatar_url":"https://avatars2.githubusercontent.com/u/1070361?v=4","gravatar_id":"","url":"https://api.github.com/users/soenkeliebau","html_url":"https://github.com/soenkeliebau","followers_url":"https://api.github.com/users/soenkeliebau/followers","following_url":"https://api.github.com/users/soenkeliebau/following{/other_user}","gists_url":"https://api.github.com/users/soenkeliebau/gists{/gist_id}","starred_url":"https://api.github.com/users/soenkeliebau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/soenkeliebau/subscriptions","organizations_url":"https://api.github.com/users/soenkeliebau/orgs","repos_url":"https://api.github.com/users/soenkeliebau/repos","events_url":"https://api.github.com/users/soenkeliebau/events{/privacy}","received_events_url":"https://api.github.com/users/soenkeliebau/received_events","type":"User","site_admin":false},"created_at":"2017-05-05T11:22:57Z","updated_at":"2017-05-05T12:10:47Z","author_association":"CONTRIBUTOR","body":"This behavior can create issues in environments where sniffing is used in conjunction with ssl certificates.\r\n\r\nWe currently have set up Logstash with ssl certificate checking and sniffing enabled. However our server certificates only contain the fqdns, not the server ip addresses, which I believe is not unusual (even if I don't condone it). \r\nSince ES always returns the ip address in publish_address, Logstash will try connecting to the ip address and reject the certificate, as it is only valid for the fqdn.\r\n\r\nI think it is fine for the publish_address to be resolved to an ip if it is inherited from network_host. But if it is explicitly configured to be something else I think we should presume that the user knows what he/she is trying to accomplish and return the configured string. If that breaks communication - well, shouldn't have fiddled with it :)\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/313726889","html_url":"https://github.com/elastic/elasticsearch/issues/22029#issuecomment-313726889","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22029","id":313726889,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMzcyNjg4OQ==","user":{"login":"HonzaKral","id":32132,"node_id":"MDQ6VXNlcjMyMTMy","avatar_url":"https://avatars0.githubusercontent.com/u/32132?v=4","gravatar_id":"","url":"https://api.github.com/users/HonzaKral","html_url":"https://github.com/HonzaKral","followers_url":"https://api.github.com/users/HonzaKral/followers","following_url":"https://api.github.com/users/HonzaKral/following{/other_user}","gists_url":"https://api.github.com/users/HonzaKral/gists{/gist_id}","starred_url":"https://api.github.com/users/HonzaKral/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HonzaKral/subscriptions","organizations_url":"https://api.github.com/users/HonzaKral/orgs","repos_url":"https://api.github.com/users/HonzaKral/repos","events_url":"https://api.github.com/users/HonzaKral/events{/privacy}","received_events_url":"https://api.github.com/users/HonzaKral/received_events","type":"User","site_admin":false},"created_at":"2017-07-07T16:16:42Z","updated_at":"2017-07-07T16:16:42Z","author_association":"MEMBER","body":"Since the user here explicitly asked for `publish_host` to be set, there is a clear expectation of what should happen - the node should be reached via that value (0). By resolving it into an IP address elasticsearch made that impossible in many cases like when using ssl. This is clearly a bug.\r\n\r\n0 - https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-network.html#advanced-network-settings","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/315991663","html_url":"https://github.com/elastic/elasticsearch/issues/22029#issuecomment-315991663","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22029","id":315991663,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNTk5MTY2Mw==","user":{"login":"soenkeliebau","id":1070361,"node_id":"MDQ6VXNlcjEwNzAzNjE=","avatar_url":"https://avatars2.githubusercontent.com/u/1070361?v=4","gravatar_id":"","url":"https://api.github.com/users/soenkeliebau","html_url":"https://github.com/soenkeliebau","followers_url":"https://api.github.com/users/soenkeliebau/followers","following_url":"https://api.github.com/users/soenkeliebau/following{/other_user}","gists_url":"https://api.github.com/users/soenkeliebau/gists{/gist_id}","starred_url":"https://api.github.com/users/soenkeliebau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/soenkeliebau/subscriptions","organizations_url":"https://api.github.com/users/soenkeliebau/orgs","repos_url":"https://api.github.com/users/soenkeliebau/repos","events_url":"https://api.github.com/users/soenkeliebau/events{/privacy}","received_events_url":"https://api.github.com/users/soenkeliebau/received_events","type":"User","site_admin":false},"created_at":"2017-07-18T08:14:19Z","updated_at":"2017-07-18T08:14:19Z","author_association":"CONTRIBUTOR","body":"I'm happy to work on this if everybody agrees on the behavior as stated above:\r\n- keep behavior as is if publish_address is not set\r\n- return the configured value if publish_address is set\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/321418712","html_url":"https://github.com/elastic/elasticsearch/issues/22029#issuecomment-321418712","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22029","id":321418712,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMTQxODcxMg==","user":{"login":"inqueue","id":6099128,"node_id":"MDQ6VXNlcjYwOTkxMjg=","avatar_url":"https://avatars2.githubusercontent.com/u/6099128?v=4","gravatar_id":"","url":"https://api.github.com/users/inqueue","html_url":"https://github.com/inqueue","followers_url":"https://api.github.com/users/inqueue/followers","following_url":"https://api.github.com/users/inqueue/following{/other_user}","gists_url":"https://api.github.com/users/inqueue/gists{/gist_id}","starred_url":"https://api.github.com/users/inqueue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/inqueue/subscriptions","organizations_url":"https://api.github.com/users/inqueue/orgs","repos_url":"https://api.github.com/users/inqueue/repos","events_url":"https://api.github.com/users/inqueue/events{/privacy}","received_events_url":"https://api.github.com/users/inqueue/received_events","type":"User","site_admin":false},"created_at":"2017-08-10T00:39:34Z","updated_at":"2017-08-10T00:39:34Z","author_association":"MEMBER","body":"Also impacts sniffing in the Java client: https://github.com/elastic/elasticsearch/issues/26125","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/321657277","html_url":"https://github.com/elastic/elasticsearch/issues/22029#issuecomment-321657277","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22029","id":321657277,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMTY1NzI3Nw==","user":{"login":"andrewvc","id":131427,"node_id":"MDQ6VXNlcjEzMTQyNw==","avatar_url":"https://avatars2.githubusercontent.com/u/131427?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewvc","html_url":"https://github.com/andrewvc","followers_url":"https://api.github.com/users/andrewvc/followers","following_url":"https://api.github.com/users/andrewvc/following{/other_user}","gists_url":"https://api.github.com/users/andrewvc/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewvc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewvc/subscriptions","organizations_url":"https://api.github.com/users/andrewvc/orgs","repos_url":"https://api.github.com/users/andrewvc/repos","events_url":"https://api.github.com/users/andrewvc/events{/privacy}","received_events_url":"https://api.github.com/users/andrewvc/received_events","type":"User","site_admin":false},"created_at":"2017-08-10T19:58:52Z","updated_at":"2017-08-10T19:58:52Z","author_association":"CONTRIBUTOR","body":"@javanna / @jasontedor is there any plan to address this issue in ES? This is a pretty nasty situation we're in, where clients can't use TLS in the predominant way its used, with domains, when using sniffing, which is a feature we highly encourage our users to use?\r\n\r\nShould I direct this issue to someone in particular?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/321660544","html_url":"https://github.com/elastic/elasticsearch/issues/22029#issuecomment-321660544","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22029","id":321660544,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMTY2MDU0NA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-08-10T20:12:34Z","updated_at":"2017-08-10T20:12:34Z","author_association":"MEMBER","body":"You can direct it to me. I'm on the tail-end of a vacation and will be available again next Monday; I'll take a look when I'm back. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/322833707","html_url":"https://github.com/elastic/elasticsearch/issues/22029#issuecomment-322833707","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22029","id":322833707,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMjgzMzcwNw==","user":{"login":"Dinomoe","id":5458576,"node_id":"MDQ6VXNlcjU0NTg1NzY=","avatar_url":"https://avatars2.githubusercontent.com/u/5458576?v=4","gravatar_id":"","url":"https://api.github.com/users/Dinomoe","html_url":"https://github.com/Dinomoe","followers_url":"https://api.github.com/users/Dinomoe/followers","following_url":"https://api.github.com/users/Dinomoe/following{/other_user}","gists_url":"https://api.github.com/users/Dinomoe/gists{/gist_id}","starred_url":"https://api.github.com/users/Dinomoe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Dinomoe/subscriptions","organizations_url":"https://api.github.com/users/Dinomoe/orgs","repos_url":"https://api.github.com/users/Dinomoe/repos","events_url":"https://api.github.com/users/Dinomoe/events{/privacy}","received_events_url":"https://api.github.com/users/Dinomoe/received_events","type":"User","site_admin":false},"created_at":"2017-08-16T16:53:48Z","updated_at":"2017-08-16T17:46:53Z","author_association":"NONE","body":"Hey Party People,\r\nAny word on this? \r\nThanks\r\n-Kobar","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/412122604","html_url":"https://github.com/elastic/elasticsearch/issues/22029#issuecomment-412122604","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22029","id":412122604,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMjEyMjYwNA==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2018-08-10T15:42:56Z","updated_at":"2018-08-10T15:42:56Z","author_association":"MEMBER","body":"picking this up as discussed with @jasontedor ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/441114609","html_url":"https://github.com/elastic/elasticsearch/issues/22029#issuecomment-441114609","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22029","id":441114609,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTExNDYwOQ==","user":{"login":"alexjfisher","id":146471,"node_id":"MDQ6VXNlcjE0NjQ3MQ==","avatar_url":"https://avatars1.githubusercontent.com/u/146471?v=4","gravatar_id":"","url":"https://api.github.com/users/alexjfisher","html_url":"https://github.com/alexjfisher","followers_url":"https://api.github.com/users/alexjfisher/followers","following_url":"https://api.github.com/users/alexjfisher/following{/other_user}","gists_url":"https://api.github.com/users/alexjfisher/gists{/gist_id}","starred_url":"https://api.github.com/users/alexjfisher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexjfisher/subscriptions","organizations_url":"https://api.github.com/users/alexjfisher/orgs","repos_url":"https://api.github.com/users/alexjfisher/repos","events_url":"https://api.github.com/users/alexjfisher/events{/privacy}","received_events_url":"https://api.github.com/users/alexjfisher/received_events","type":"User","site_admin":false},"created_at":"2018-11-22T20:19:18Z","updated_at":"2018-11-22T20:19:18Z","author_association":"NONE","body":"I've set jvm option `-Des.http.cname_in_publish_address=true` in `/etc/elasticsearch/instance01/jvm.options` with elasticsearch 6.5.0 and this still doesn't work for me. :(\r\n\r\nI only have the IP address being advertised, not the hostname I've set as `http.publish_host`","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/441179293","html_url":"https://github.com/elastic/elasticsearch/issues/22029#issuecomment-441179293","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22029","id":441179293,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTE3OTI5Mw==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2018-11-23T08:31:38Z","updated_at":"2018-11-23T08:31:38Z","author_association":"MEMBER","body":"Sorry about that. This was an oversight on my end. I forgot to back port the fix to `6.x` early enough for it to go into `6.5`. I handled this now in #35838 last night but it will only make it into `6.6` now.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/441180454","html_url":"https://github.com/elastic/elasticsearch/issues/22029#issuecomment-441180454","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22029","id":441180454,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTE4MDQ1NA==","user":{"login":"alexjfisher","id":146471,"node_id":"MDQ6VXNlcjE0NjQ3MQ==","avatar_url":"https://avatars1.githubusercontent.com/u/146471?v=4","gravatar_id":"","url":"https://api.github.com/users/alexjfisher","html_url":"https://github.com/alexjfisher","followers_url":"https://api.github.com/users/alexjfisher/followers","following_url":"https://api.github.com/users/alexjfisher/following{/other_user}","gists_url":"https://api.github.com/users/alexjfisher/gists{/gist_id}","starred_url":"https://api.github.com/users/alexjfisher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexjfisher/subscriptions","organizations_url":"https://api.github.com/users/alexjfisher/orgs","repos_url":"https://api.github.com/users/alexjfisher/repos","events_url":"https://api.github.com/users/alexjfisher/events{/privacy}","received_events_url":"https://api.github.com/users/alexjfisher/received_events","type":"User","site_admin":false},"created_at":"2018-11-23T08:38:10Z","updated_at":"2018-11-23T08:38:10Z","author_association":"NONE","body":"Ah, shame.  It can't make it into 6.5.2? It made it into the [6.5.0 release notes](https://www.elastic.co/guide/en/elasticsearch/reference/current/release-notes-6.5.0.html#bug-6.5.0).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/441181292","html_url":"https://github.com/elastic/elasticsearch/issues/22029#issuecomment-441181292","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22029","id":441181292,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTE4MTI5Mg==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2018-11-23T08:42:54Z","updated_at":"2018-11-23T08:42:54Z","author_association":"MEMBER","body":"> Ah, shame. It can't make it into 6.5.2? It made it into the 6.5.0 release notes.\r\n\r\nUnfortunately not. Sorry again for the the oversight.","performed_via_github_app":null}]