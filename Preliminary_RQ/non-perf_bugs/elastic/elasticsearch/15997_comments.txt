[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/171728494","html_url":"https://github.com/elastic/elasticsearch/issues/15997#issuecomment-171728494","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15997","id":171728494,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTcyODQ5NA==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2016-01-14T18:20:03Z","updated_at":"2016-01-14T18:20:03Z","author_association":"MEMBER","body":"I should note, if you explicitly set `_source` in your update it works as expected:\n\n``` js\nPUT /data/_mapping/data\n{\n   \"_source\": {\n      \"enabled\": false\n   },\n   \"properties\": {\n      \"long\": {\n         \"type\": \"long\"\n      }\n   }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/171766611","html_url":"https://github.com/elastic/elasticsearch/issues/15997#issuecomment-171766611","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15997","id":171766611,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTc2NjYxMQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2016-01-14T20:12:41Z","updated_at":"2016-01-14T20:12:41Z","author_association":"MEMBER","body":"It looks to me like this would also be an issue with some other metadata mappers, eg `_timestamp`. The issue is currently when initializing the builder for a type (eg when parsing mappings), we use the current fieldtype for each current metadata mapper to get a metadata mapper for that specific type (so that by default it will match the metadata mapper used by other document types). However, we really need the entire metadata mapper, since there are settings like this that are not part of the field type. Also, SourceFieldMapper does not even use the existing field type (although that does not matter in this case).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/171938807","html_url":"https://github.com/elastic/elasticsearch/issues/15997#issuecomment-171938807","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15997","id":171938807,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTkzODgwNw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-01-15T11:32:42Z","updated_at":"2016-01-15T11:32:42Z","author_association":"CONTRIBUTOR","body":"Same thing goes for `_parent`:\n\n```\nPUT t \n{\n  \"mappings\": {\n    \"parent\": {},\n    \"child\": {\n      \"_parent\": {\n        \"type\": \"parent\"\n      }\n    }\n  }\n}\n\nPUT t/_mapping/child\n{\n  \"properties\": {}\n}\n```\n\nReturns:\n\n```\n{\n  \"error\": {\n    \"root_cause\": [\n      {\n        \"type\": \"illegal_argument_exception\",\n        \"reason\": \"The _parent field's type option can't be changed: [parent]->[null]\"\n      }\n    ],\n    \"type\": \"illegal_argument_exception\",\n    \"reason\": \"The _parent field's type option can't be changed: [parent]->[null]\"\n  },\n  \"status\": 400\n}\n```\n","performed_via_github_app":null}]