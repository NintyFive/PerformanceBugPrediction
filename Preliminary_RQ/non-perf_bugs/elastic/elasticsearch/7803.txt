{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/7803","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7803/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7803/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7803/events","html_url":"https://github.com/elastic/elasticsearch/issues/7803","id":43247060,"node_id":"MDU6SXNzdWU0MzI0NzA2MA==","number":7803,"title":"_cat/recovery stage done but not 100%","user":{"login":"lefce","id":8833711,"node_id":"MDQ6VXNlcjg4MzM3MTE=","avatar_url":"https://avatars3.githubusercontent.com/u/8833711?v=4","gravatar_id":"","url":"https://api.github.com/users/lefce","html_url":"https://github.com/lefce","followers_url":"https://api.github.com/users/lefce/followers","following_url":"https://api.github.com/users/lefce/following{/other_user}","gists_url":"https://api.github.com/users/lefce/gists{/gist_id}","starred_url":"https://api.github.com/users/lefce/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lefce/subscriptions","organizations_url":"https://api.github.com/users/lefce/orgs","repos_url":"https://api.github.com/users/lefce/repos","events_url":"https://api.github.com/users/lefce/events{/privacy}","received_events_url":"https://api.github.com/users/lefce/received_events","type":"User","site_admin":false},"labels":[{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"assignees":[{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2014-09-19T14:54:49Z","updated_at":"2015-04-07T15:17:50Z","closed_at":"2015-04-07T15:17:50Z","author_association":"NONE","active_lock_reason":null,"body":"I have two clusters each three nodes running elasticsearch version: 1.3.2, build: dee175d.\n\nNetwork issues disconnected one node each cluster - they periodically rejoined and disconnected before completing shard recovery - finally they rejoined again and completed recovery successfully.\n\ncluster state is green and all shards are in state started on both clusters.\n\nBut if I call _cat/recovery api I get a lot of shard-entries with **stage done** but **below 100 percent**.\n\nMaybe there is a small bug in the file_percent and bytes_percent calculation?\n\nExample of one index - in about 70% of the entries files_percent and bytes_percent are below 100%\n\n```\nindex             shard time   type       stage source_host          target_host          repository snapshot files files_percent bytes      bytes_percent\nmyindex.1       0     341    replica    done  esnode2 esnode1 n/a        n/a      13    38.5%         3366643    0.0%          \nmyindex.1       0     573    replica    done  esnode1 esnode2 n/a        n/a      13    7.7%          3366643    0.0%          \nmyindex.1       0     4992   replica    done  esnode1 esnode3 n/a        n/a      13    7.7%          3366643    0.0%          \nmyindex.1       1     433    replica    done  esnode2 esnode1 n/a        n/a      16    56.3%         626683     13.3%         \nmyindex.1       1     641    replica    done  esnode1 esnode2 n/a        n/a      16    6.3%          628222     0.1%          \nmyindex.1       1     2332   replica    done  esnode1 esnode3 n/a        n/a      16    12.5%         628222     0.1%          \nmyindex.1       2     736    replica    done  esnode2 esnode1 n/a        n/a      38    68.4%         3119317    50.4%         \nmyindex.1       2     666    replica    done  esnode1 esnode2 n/a        n/a      41    12.2%         3131721    0.1%          \nmyindex.1       2     1498   replica    done  esnode1 esnode3 n/a        n/a      41    12.2%         3131721    0.1%          \nmyindex.1       3     4611   replica    done  esnode2 esnode1 n/a        n/a      23    91.3%         9763636    99.7%         \nmyindex.1       3     724    replica    done  esnode1 esnode2 n/a        n/a      23    4.3%          9763636    0.0%          \nmyindex.1       3     30222  replica    done  esnode1 esnode3 n/a        n/a      23    4.3%          9763636    0.0%          \n```\n","closed_by":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"performed_via_github_app":null}