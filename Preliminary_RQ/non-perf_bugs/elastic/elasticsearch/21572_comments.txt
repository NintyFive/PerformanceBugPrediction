[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/260711516","html_url":"https://github.com/elastic/elasticsearch/issues/21572#issuecomment-260711516","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21572","id":260711516,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDcxMTUxNg==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2016-11-15T17:39:45Z","updated_at":"2016-11-15T17:39:45Z","author_association":"CONTRIBUTOR","body":"I think the issue is with `_all` indeed. The error suggests you have multiple types, could you share all your mappings of your index?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/260717023","html_url":"https://github.com/elastic/elasticsearch/issues/21572#issuecomment-260717023","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21572","id":260717023,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDcxNzAyMw==","user":{"login":"sricci82","id":11392806,"node_id":"MDQ6VXNlcjExMzkyODA2","avatar_url":"https://avatars1.githubusercontent.com/u/11392806?v=4","gravatar_id":"","url":"https://api.github.com/users/sricci82","html_url":"https://github.com/sricci82","followers_url":"https://api.github.com/users/sricci82/followers","following_url":"https://api.github.com/users/sricci82/following{/other_user}","gists_url":"https://api.github.com/users/sricci82/gists{/gist_id}","starred_url":"https://api.github.com/users/sricci82/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sricci82/subscriptions","organizations_url":"https://api.github.com/users/sricci82/orgs","repos_url":"https://api.github.com/users/sricci82/repos","events_url":"https://api.github.com/users/sricci82/events{/privacy}","received_events_url":"https://api.github.com/users/sricci82/received_events","type":"User","site_admin":false},"created_at":"2016-11-15T18:00:17Z","updated_at":"2016-11-15T18:01:00Z","author_association":"NONE","body":"Here is it:\n\n```\n{\n  \"hotspot_stats\": {\n    \"properties\": {\n      \"@timestamp\": {\n        \"format\": \"strict_date_optional_time||epoch_millis\",\n        \"type\": \"date\"\n      },\n      \"hotspot\": {\n        \"type\": \"string\"\n      },\n      \"count\": {\n        \"type\": \"long\"\n      },\n      \"ap\": {\n        \"type\": \"string\"\n      }\n    }\n  },\n  \"regtable\": {\n    \"dynamic_templates\": [\n      {\n        \"strings\": {\n          \"mapping\": {\n            \"index\": \"not_analyzed\",\n            \"type\": \"string\"\n          },\n          \"match_mapping_type\": \"string\"\n        }\n      }\n    ],\n    \"_all\": {\n      \"enabled\": false\n    },\n    \"properties\": {\n      \"mac-address\": {\n        \"index\": \"not_analyzed\",\n        \"type\": \"string\"\n      },\n      \"@timestamp\": {\n        \"format\": \"strict_date_optional_time||epoch_millis\",\n        \"type\": \"date\"\n      },\n      \"distance\": {\n        \"type\": \"long\"\n      },\n      \"tx-signal-ch0\": {\n        \"type\": \"long\"\n      },\n      \"wireless-comment\": {\n        \"index\": \"not_analyzed\",\n        \"type\": \"string\"\n      },\n      \"signal-to-noise\": {\n        \"type\": \"long\"\n      },\n      \"rx-signal-ch0\": {\n        \"type\": \"long\"\n      },\n      \"tx-bytes\": {\n        \"type\": \"long\"\n      },\n      \"rx-signal-ch1\": {\n        \"type\": \"long\"\n      },\n      \"tx-signal-ch1\": {\n        \"type\": \"long\"\n      },\n      \"rx-bytes\": {\n        \"type\": \"long\"\n      }\n    }\n  }\n}\n```\n\nJust took from the production node (working on 2.3.4).\n\nS.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/260723905","html_url":"https://github.com/elastic/elasticsearch/issues/21572#issuecomment-260723905","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21572","id":260723905,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDcyMzkwNQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2016-11-15T18:25:22Z","updated_at":"2016-11-15T18:25:22Z","author_association":"CONTRIBUTOR","body":"I tried an upgrade with the above mapping from 2.3.4 to 5.0.1 and it worked so I suspect there is another issue. In which Elasticsearch version was your index created? You can call `curl -XGET localhost:9200/_settings?pretty` to see it, it is stored under the `version.created` key with a cryptic format, but I should be able to translate it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/260724639","html_url":"https://github.com/elastic/elasticsearch/issues/21572#issuecomment-260724639","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21572","id":260724639,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDcyNDYzOQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2016-11-15T18:28:05Z","updated_at":"2016-11-15T18:28:05Z","author_association":"CONTRIBUTOR","body":"It is also suspicious that the error complains about a `search_analyzer` while your mappings seem to use the defaults. Can you make sure that this error is not be caused by another index that sets an explicit search_analyzer (or maybe just analyzer)? When you call `curl -XGET localhost:9200/_mappings?pretty` on your 2.x cluster, is there any occurrence of `search_analyzer` or `analyzer`?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/260727279","html_url":"https://github.com/elastic/elasticsearch/issues/21572#issuecomment-260727279","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21572","id":260727279,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDcyNzI3OQ==","user":{"login":"sricci82","id":11392806,"node_id":"MDQ6VXNlcjExMzkyODA2","avatar_url":"https://avatars1.githubusercontent.com/u/11392806?v=4","gravatar_id":"","url":"https://api.github.com/users/sricci82","html_url":"https://github.com/sricci82","followers_url":"https://api.github.com/users/sricci82/followers","following_url":"https://api.github.com/users/sricci82/following{/other_user}","gists_url":"https://api.github.com/users/sricci82/gists{/gist_id}","starred_url":"https://api.github.com/users/sricci82/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sricci82/subscriptions","organizations_url":"https://api.github.com/users/sricci82/orgs","repos_url":"https://api.github.com/users/sricci82/repos","events_url":"https://api.github.com/users/sricci82/events{/privacy}","received_events_url":"https://api.github.com/users/sricci82/received_events","type":"User","site_admin":false},"created_at":"2016-11-15T18:38:08Z","updated_at":"2016-11-15T18:38:08Z","author_association":"NONE","body":"```\n{\n  \"index\": {\n    \"creation_date\": \"1464732109539\",\n    \"number_of_shards\": \"1\",\n    \"number_of_replicas\": \"0\",\n    \"uuid\": \"CBIJn2uRQfa3um_SWi9z0g\",\n    \"version\": {\n      \"created\": \"2030199\"\n    }\n  }\n}\n```\n\n```\ncurl  -sXGET localhost:9200/_mappings?pretty | grep -i 'analyzer'\nroot@elastic-01:~#\n```\n\nThanks for your time.\n\nBest Regards,\nSimone.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/272452286","html_url":"https://github.com/elastic/elasticsearch/issues/21572#issuecomment-272452286","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21572","id":272452286,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjQ1MjI4Ng==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2017-01-13T14:15:37Z","updated_at":"2017-01-13T14:15:37Z","author_association":"CONTRIBUTOR","body":"We've found the issue and fixed it in #22236 which has been released as part of ES v5.1.2. Please try the upgrade again using ES v5.1.2.","performed_via_github_app":null}]