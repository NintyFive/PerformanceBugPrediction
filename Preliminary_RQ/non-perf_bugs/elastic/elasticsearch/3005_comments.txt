[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17557510","html_url":"https://github.com/elastic/elasticsearch/issues/3005#issuecomment-17557510","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3005","id":17557510,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NTU3NTEw","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2013-05-07T17:37:26Z","updated_at":"2013-05-07T17:37:26Z","author_association":"MEMBER","body":"The problem is that the top level element in the doc is called `type`, which matches the mapping name `type`, so when providing a doc with a top level object name as the mapping name, it will just treat that object. This is to support the following case and not have \"double\" `type1` mapping:\n\n```\ncurl -XPUT localhost:9200/index/type1/1 - d '{\n   \"type1\" : {\n        ....\n   }\n}\n```\n\nSo, in your case, make sure the mapping name is not the same as the top level element if you don't provide your json docs wrapped with the type name.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17566219","html_url":"https://github.com/elastic/elasticsearch/issues/3005#issuecomment-17566219","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3005","id":17566219,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NTY2MjE5","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2013-05-07T19:54:29Z","updated_at":"2013-05-07T19:54:29Z","author_association":"CONTRIBUTOR","body":"Does anybody use that double type (ie url + json)?  This seems like an alternative which could be removed fairly painlessly.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17595143","html_url":"https://github.com/elastic/elasticsearch/issues/3005#issuecomment-17595143","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3005","id":17595143,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NTk1MTQz","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2013-05-08T09:30:42Z","updated_at":"2013-05-08T09:31:14Z","author_association":"MEMBER","body":"Cool! I didn't know this was supposed to happen. I already changed the type name. \n\nOn the other hand I'm not quite sure if anybody is actually using this feature. I would expect elasticsearch not to care too much about the content of my documents and give me a mapping like this:\n\n```\n{\n  \"type1\" : {\n    \"properties\" : {\n        \"type1\" : {\n            \"type\" : \"object\",\n            \"properties\" : {\n                ......\n            }\n        },\n        \"type2\" : {\n            \"type\" : \"object\",\n            \"properties\" : {\n                ......\n            }\n        }\n    }\n  }\n}\n```\n\nMy two cents: I would prefer to have the `type1` subobject even if it's the only existing subobject in my documents rather than have my `type2` subobject ignored.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17595331","html_url":"https://github.com/elastic/elasticsearch/issues/3005#issuecomment-17595331","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3005","id":17595331,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NTk1MzMx","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2013-05-08T09:35:19Z","updated_at":"2013-05-08T09:35:19Z","author_association":"MEMBER","body":"It all goes back to the early history of elasticsearch, a lot of users were confused about the double mapping when they were wrapping the document they were indexing with the type name (some auto domain_objects -> json tools do that). I agree that we could fail the indexing request if there is something we don't expect.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17595611","html_url":"https://github.com/elastic/elasticsearch/issues/3005#issuecomment-17595611","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3005","id":17595611,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NTk1NjEx","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2013-05-08T09:42:14Z","updated_at":"2013-05-08T09:42:14Z","author_association":"MEMBER","body":"I see! Well, if you want to be more backwards compatible you can probably check if the top level object with the type name is the only one available in the document (thus probably not needed) in order to avoid ignoring other nested objects, but I don't like this option that much myself.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17595906","html_url":"https://github.com/elastic/elasticsearch/issues/3005#issuecomment-17595906","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3005","id":17595906,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NTk1OTA2","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2013-05-08T09:49:31Z","updated_at":"2013-05-08T09:49:31Z","author_association":"CONTRIBUTOR","body":"Yeah, I'd prefer there to be just one definitive way to do it, so that we don't have to guess.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/29506526","html_url":"https://github.com/elastic/elasticsearch/issues/3005#issuecomment-29506526","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3005","id":29506526,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NTA2NTI2","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2013-11-29T10:05:07Z","updated_at":"2013-11-29T10:05:07Z","author_association":"CONTRIBUTOR","body":"Would be good to resolve this issue in 1.0, even though it requires breaking bwc.\n\nThe body of an indexing request should be just that: the body, not possibly the body wrapped in the type.  Type should be specified only in the URL.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/29507591","html_url":"https://github.com/elastic/elasticsearch/issues/3005#issuecomment-29507591","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3005","id":29507591,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NTA3NTkx","user":{"login":"timeu","id":374296,"node_id":"MDQ6VXNlcjM3NDI5Ng==","avatar_url":"https://avatars2.githubusercontent.com/u/374296?v=4","gravatar_id":"","url":"https://api.github.com/users/timeu","html_url":"https://github.com/timeu","followers_url":"https://api.github.com/users/timeu/followers","following_url":"https://api.github.com/users/timeu/following{/other_user}","gists_url":"https://api.github.com/users/timeu/gists{/gist_id}","starred_url":"https://api.github.com/users/timeu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timeu/subscriptions","organizations_url":"https://api.github.com/users/timeu/orgs","repos_url":"https://api.github.com/users/timeu/repos","events_url":"https://api.github.com/users/timeu/events{/privacy}","received_events_url":"https://api.github.com/users/timeu/received_events","type":"User","site_admin":false},"created_at":"2013-11-29T10:25:05Z","updated_at":"2013-11-29T10:25:05Z","author_association":"NONE","body":"I think this issue is also related to has_parent and has_child queries/filters:\n\nhttps://groups.google.com/d/msg/elasticsearch/8yTX17uoFiU/xGjYd4tfEzAJ\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/30758508","html_url":"https://github.com/elastic/elasticsearch/issues/3005#issuecomment-30758508","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3005","id":30758508,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNzU4NTA4","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2013-12-17T15:12:44Z","updated_at":"2013-12-17T15:12:44Z","author_association":"CONTRIBUTOR","body":"Closed this issue in favour of:\n- #4483 \n- #4484\n- #4081 \n","performed_via_github_app":null}]