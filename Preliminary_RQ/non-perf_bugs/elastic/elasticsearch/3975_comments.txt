[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/50126606","html_url":"https://github.com/elastic/elasticsearch/issues/3975#issuecomment-50126606","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3975","id":50126606,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTI2NjA2","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-07-25T09:19:20Z","updated_at":"2014-07-25T09:19:20Z","author_association":"CONTRIBUTOR","body":"Doesn't make sense to include numeric fields in a multi-match query - closing\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69012564","html_url":"https://github.com/elastic/elasticsearch/issues/3975#issuecomment-69012564","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3975","id":69012564,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MDEyNTY0","user":{"login":"felipelrz","id":7086419,"node_id":"MDQ6VXNlcjcwODY0MTk=","avatar_url":"https://avatars0.githubusercontent.com/u/7086419?v=4","gravatar_id":"","url":"https://api.github.com/users/felipelrz","html_url":"https://github.com/felipelrz","followers_url":"https://api.github.com/users/felipelrz/followers","following_url":"https://api.github.com/users/felipelrz/following{/other_user}","gists_url":"https://api.github.com/users/felipelrz/gists{/gist_id}","starred_url":"https://api.github.com/users/felipelrz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/felipelrz/subscriptions","organizations_url":"https://api.github.com/users/felipelrz/orgs","repos_url":"https://api.github.com/users/felipelrz/repos","events_url":"https://api.github.com/users/felipelrz/events{/privacy}","received_events_url":"https://api.github.com/users/felipelrz/received_events","type":"User","site_admin":false},"created_at":"2015-01-07T11:56:10Z","updated_at":"2015-01-07T20:57:39Z","author_association":"NONE","body":"@clintongormley, what if I do want to include numeric fields in a multi_match query (or any other sort of query)? What is the best approach, in this particular case?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69799224","html_url":"https://github.com/elastic/elasticsearch/issues/3975#issuecomment-69799224","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3975","id":69799224,"node_id":"MDEyOklzc3VlQ29tbWVudDY5Nzk5MjI0","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-01-13T19:03:13Z","updated_at":"2015-01-13T19:03:13Z","author_association":"CONTRIBUTOR","body":"Hmm, the more I think about this, the more I think that we should handle this better.\n\nA query string query like:\n\n```\nGET /t/_validate/query?explain\n{\n  \"query\": {\n    \"query_string\": {\n      \"query\": \"bar 1\",\n      \"fields\": [\"text\",\"num\"],\n      \"lenient\": true\n    }\n  }\n}\n```\n\nresults in:\n\n```\n\"(text:bar) (text:1 | num:[1 TO 1])\"\n```\n\nwhile the equivalent multi-match just ignores the `num` field completely:\n\n```\n\"((text:bar text:1))\"\n```\n\nHowever, a multi-match query for just a number seems to work:\n\n```\nGET /t/_validate/query?explain\n{\n  \"query\": {\n    \"multi_match\": {\n      \"query\": \"1\",\n      \"fields\": [\"text\",\"num\"],\n      \"lenient\": true\n    }\n  }\n}\n\n\"(num:[1 TO 1] | text:1)\"\n```\n\nPossibly, when using the `lenient` option on numeric fields, we should apply a whitespace analyzer to the string and discard anything which isn't a number.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/86887796","html_url":"https://github.com/elastic/elasticsearch/issues/3975#issuecomment-86887796","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3975","id":86887796,"node_id":"MDEyOklzc3VlQ29tbWVudDg2ODg3Nzk2","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2015-03-27T10:06:04Z","updated_at":"2015-03-27T10:06:04Z","author_association":"MEMBER","body":"The `lenient` flag current let you ignore values that don't fit specific fields (like when you try to search a numeric field with a string value that doesn't convert to a number). We discussed it and we feel this is good enough. It would be an overkill to try to parse the string looking for numbers in it. I'm closing this as I think @eltu 's issue is covered by this. @clintongormley if you feel differently, I think we should have a different issue for it and re-discuss.  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/167577538","html_url":"https://github.com/elastic/elasticsearch/issues/3975#issuecomment-167577538","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3975","id":167577538,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NzU3NzUzOA==","user":{"login":"jreinke","id":598419,"node_id":"MDQ6VXNlcjU5ODQxOQ==","avatar_url":"https://avatars2.githubusercontent.com/u/598419?v=4","gravatar_id":"","url":"https://api.github.com/users/jreinke","html_url":"https://github.com/jreinke","followers_url":"https://api.github.com/users/jreinke/followers","following_url":"https://api.github.com/users/jreinke/following{/other_user}","gists_url":"https://api.github.com/users/jreinke/gists{/gist_id}","starred_url":"https://api.github.com/users/jreinke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jreinke/subscriptions","organizations_url":"https://api.github.com/users/jreinke/orgs","repos_url":"https://api.github.com/users/jreinke/repos","events_url":"https://api.github.com/users/jreinke/events{/privacy}","received_events_url":"https://api.github.com/users/jreinke/received_events","type":"User","site_admin":false},"created_at":"2015-12-28T14:05:12Z","updated_at":"2015-12-28T14:05:12Z","author_association":"NONE","body":"The `lenient` parameter seems to be ignored when using `cross_fields` type and multiple numeric fields:\n\n```\ncurl -XPUT http://localhost:9200/blog/post/1?pretty=1 -d '{\"foo\":123, \"bar\":\"xyzzy\", \"baz\":456}'\n```\n\n**Search is OK with 1 numeric field**\n\n```\ncurl -XGET http://localhost:9200/blog/post/_search?pretty=1 -d '{\"query\": {\"multi_match\": {\"type\": \"cross_fields\", \"query\": \"xyzzy\", \"lenient\": true, \"fields\": [\"foo\", \"bar\"]}}}'\n```\n\n```\n{\n  \"took\" : 2,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 5,\n    \"successful\" : 5,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 1,\n    \"max_score\" : 0.30685282,\n    \"hits\" : [ {\n      \"_index\" : \"blog\",\n      \"_type\" : \"post\",\n      \"_id\" : \"1\",\n      \"_score\" : 0.30685282,\n      \"_source\":{\"foo\":123, \"bar\":\"xyzzy\", \"baz\":456}\n    } ]\n  }\n}\n```\n\n**Search fails with 2 numeric fields**\n\n```\ncurl -XGET http://localhost:9200/blog/post/_search?pretty=1 -d '{\"query\": {\"multi_match\": {\"type\": \"cross_fields\", \"query\": \"xyzzy\", \"lenient\": true, \"fields\": [\"foo\", \"bar\", \"baz\"]}}}'\n```\n\n```\n{\n  \"error\" : {\n    \"root_cause\" : [ {\n      \"type\" : \"number_format_exception\",\n      \"reason\" : \"For input string: \\\"xyzzy\\\"\"\n    } ],\n    \"type\" : \"search_phase_execution_exception\",\n    \"reason\" : \"all shards failed\",\n    \"phase\" : \"query\",\n    \"grouped\" : true,\n    \"failed_shards\" : [ {\n      \"shard\" : 0,\n      \"index\" : \"blog\",\n      \"node\" : \"0TxGVVWsSu2qX63hZdOv2w\",\n      \"reason\" : {\n        \"type\" : \"number_format_exception\",\n        \"reason\" : \"For input string: \\\"xyzzy\\\"\"\n      }\n    } ]\n  },\n  \"status\" : 400\n}\n```\n\nAm I missing something?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/365252320","html_url":"https://github.com/elastic/elasticsearch/issues/3975#issuecomment-365252320","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3975","id":365252320,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTI1MjMyMA==","user":{"login":"FabianKoestring","id":1252701,"node_id":"MDQ6VXNlcjEyNTI3MDE=","avatar_url":"https://avatars2.githubusercontent.com/u/1252701?v=4","gravatar_id":"","url":"https://api.github.com/users/FabianKoestring","html_url":"https://github.com/FabianKoestring","followers_url":"https://api.github.com/users/FabianKoestring/followers","following_url":"https://api.github.com/users/FabianKoestring/following{/other_user}","gists_url":"https://api.github.com/users/FabianKoestring/gists{/gist_id}","starred_url":"https://api.github.com/users/FabianKoestring/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FabianKoestring/subscriptions","organizations_url":"https://api.github.com/users/FabianKoestring/orgs","repos_url":"https://api.github.com/users/FabianKoestring/repos","events_url":"https://api.github.com/users/FabianKoestring/events{/privacy}","received_events_url":"https://api.github.com/users/FabianKoestring/received_events","type":"User","site_admin":false},"created_at":"2018-02-13T12:26:55Z","updated_at":"2018-02-13T12:26:55Z","author_association":"NONE","body":"`lenient` works perfectly for me.","performed_via_github_app":null}]