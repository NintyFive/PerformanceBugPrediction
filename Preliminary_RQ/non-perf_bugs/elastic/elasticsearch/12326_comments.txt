[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/122571108","html_url":"https://github.com/elastic/elasticsearch/issues/12326#issuecomment-122571108","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12326","id":122571108,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMjU3MTEwOA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2015-07-18T17:39:06Z","updated_at":"2015-07-18T17:39:06Z","author_association":"CONTRIBUTOR","body":"It's not a bad idea. I always dislike highlighter things in es now because\nyou have to do everything three times.\nOn Jul 18, 2015 12:55 PM, \"Alex Ksikes\" notifications@github.com wrote:\n\n> Introduction\n> \n> On queries composed of many terms, for example when using More Like This\n> (MLT) or an Item Query\n> https://github.com/elastic/elasticsearch/issues/12293, it is often\n> quite desirable to explain the results returned. This helps users form a\n> mental model about the underlying matching algorithm, and subsequently\n> removes some of the magic around these types of queries.\n> \n> Currently, developers have two out of the box options in order to provide\n> such a functionality: explain\n> https://www.elastic.co/guide/en/elasticsearch/reference/master/search-explain.html\n> and highlighting\n> https://www.elastic.co/guide/en/elasticsearch/reference/master/search-request-highlighting.html.\n> Explain is useful for debugging, but has some unfortunate performance\n> implications. Its output is also quite verbose. Highlighting is useful to\n> show the matched keywords in context, but it only provides a partial\n> understanding of scoring.\n> \n> What we would need instead is something in between highlighting and\n> explain. Something which would not only highlight the terms in context but\n> also provide the level of importance that term had in scoring each\n> document. This would provide a best of both worlds solution. In fact, the\n> idea isn't new! Lucene already provides a GradientFormatter, though it is\n> not used at the moment in Elasticsearch.\n> \n> Let us further illustrate our point with an example.\n> Example\n> \n> In the example below, the user has asked for movies similar to the movie\n> Terminator 2. Under the hood an MLT query was triggered which then\n> generated a query composed of the salient terms in the requested document.\n> The matching terms are then highlighted within each returned document, but\n> with some additional hints as to their level of importance in scoring. The\n> greater the intensity of the highlight, the more important that term is in\n> computing the score of the document.\n> \n> [image: itensity_highlighter2]\n> https://cloud.githubusercontent.com/assets/43475/8762299/59560490-2d75-11e5-8ae8-16a89278e8d1.png\n> \n> In this example, we can see that the first movie has less terms matching\n> the query than the second movie. However, these terms are highlighted with\n> greater intensities, which explains why that movie is ranked higher in the\n> result set. If the user did not have the intensity of the highlight, he\n> could be puzzled as to why this is the case. For example, he could wrongly\n> assume that more terms matching means greater scoring. Here we not only\n> know why the document matched, but also how the score was probably computed\n> (which terms participated in the scoring and to what extent).\n> API usage\n> \n> We could return all the per-query-term scores, but maybe such an output\n> would be too verbose, and too close to just using explain. Instead, and\n> this is not set in stone, we could highlight the terms in context with\n> style. In order to do so, we can introduce a with_intensities option\n> which would take an integer representing the number of possible intensities.\n> \n> Here is how the above example could have been generated:\n> \n> GET /tmdb/movies/_search\n> {\n>   \"query\": {\n>     \"more_like_this\": {\n>       \"like\": {\n>         \"_id\": 280\n>       }\n>     }\n>   },\n>   \"highlight\": {\n>     \"fields\": {\n>       \"plot\": {\n>         \"number_of_fragments\": 0,\n>         \"with_intensities\": 4\n>       }\n>     }\n>   }\n> }\n> \n> And the response:\n> \n> {\n>   ...\n>   \"hits\": {\n>     \"total\": 3,\n>     \"max_score\": 10.2301,\n>     \"hits\": [\n>       {\n>         ...\n>         \"highlight\": {\n>           \"plot\": [It's been 10 years since John <em class=\"hlt4\">Connor</em> saved Earth from<em class=\"hlt3\">Judgment Day</em>, and he's now living under the radar, steering\n> clear of using anything <em class=\"hlt4\">Skynet</em> can trace. That is, until he\n> encounters T-X, a <em class=\"hlt1\">robotic</em> <em class=\"hlt2\">assassin</em> ordered\n> to finish what <em class=\"hlt4\">T-1000</em> started. Good thing <em class=\"hlt4\">Connor</em>'sformer nemesis, the <em class=\"hlt4\">Terminator</em>, is back to aid the now-adult<em class=\"hlt4\">Connor</em> … just like he promised.]        }      },      ...    ]  }}\n> \n> Implementation Notes\n> \n> As previously mentioned, Lucene does provide a GradientFormatter and a\n> SpanGradientFormatter which can be used with the plain highlighter. Another\n> possibility would include adding the option to retain the per-query-term\n> scores to plain highlighter and/or to fast vector highlighter, that is\n> retaining the scores which were used to compute the score given to each\n> fragment. There are roughly the same term scores which were used to compute\n> the score of the document before highlighting.\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/elastic/elasticsearch/issues/12326.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/375380993","html_url":"https://github.com/elastic/elasticsearch/issues/12326#issuecomment-375380993","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12326","id":375380993,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NTM4MDk5Mw==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2018-03-22T17:00:18Z","updated_at":"2018-03-22T17:00:18Z","author_association":"MEMBER","body":"This feature request is an interesting idea but since its opening we have not seen enough feedback that it is a feature we should pursue. We prefer to close this issue as a clear indication that we are not going to work on this at this time. We are always open to reconsidering this in the future based on compelling feedback; despite this issue being closed please feel free to leave feedback on the proposal (including +1s).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/401325081","html_url":"https://github.com/elastic/elasticsearch/issues/12326#issuecomment-401325081","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12326","id":401325081,"node_id":"MDEyOklzc3VlQ29tbWVudDQwMTMyNTA4MQ==","user":{"login":"hilmiger","id":10297999,"node_id":"MDQ6VXNlcjEwMjk3OTk5","avatar_url":"https://avatars2.githubusercontent.com/u/10297999?v=4","gravatar_id":"","url":"https://api.github.com/users/hilmiger","html_url":"https://github.com/hilmiger","followers_url":"https://api.github.com/users/hilmiger/followers","following_url":"https://api.github.com/users/hilmiger/following{/other_user}","gists_url":"https://api.github.com/users/hilmiger/gists{/gist_id}","starred_url":"https://api.github.com/users/hilmiger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hilmiger/subscriptions","organizations_url":"https://api.github.com/users/hilmiger/orgs","repos_url":"https://api.github.com/users/hilmiger/repos","events_url":"https://api.github.com/users/hilmiger/events{/privacy}","received_events_url":"https://api.github.com/users/hilmiger/received_events","type":"User","site_admin":false},"created_at":"2018-06-29T11:17:12Z","updated_at":"2018-06-29T11:17:12Z","author_association":"NONE","body":"Hey,\r\n\r\nAcutally we are interested about this feature. \r\nBut not for just scoring part, if it will be possible to add term vectors(positions, offsets etc.) to response, it would be wonderful.\r\n\r\nWe really liked if you reconsider to at least discuss this. ","performed_via_github_app":null}]