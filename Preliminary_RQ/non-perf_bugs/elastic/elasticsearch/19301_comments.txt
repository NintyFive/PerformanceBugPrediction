[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/231055897","html_url":"https://github.com/elastic/elasticsearch/issues/19301#issuecomment-231055897","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19301","id":231055897,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTA1NTg5Nw==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2016-07-07T11:48:29Z","updated_at":"2016-07-07T11:49:47Z","author_association":"MEMBER","body":"My thoughts on this:\n\n> In general, do we think that the compressed response limitation is a big deal? \n\nGiven that (some) other language clients also don't support it out of the box, I'd say no. It may make a difference for requests with larger bodies (like bulk requests) but I have experienced that it's sometimes worse in the higher percentile latencies (99th percentile and up) for smaller requests like search requests.\n\n> async client doesn't seem as widely used as the sync one\n\nThat may be true but the question is whether there are more mature alternatives than the Apache async client.\n\nRegarding the suggested alternatives:\n\n> Support both clients and use one or the other depending on the method called, or have two different RestClient implementations\n\nI'd tend not to do that because this could likely get a maintenance nightmare or a huge time sink when hunting for bugs. If we use just one implementation internally something either breaks or it doesn't (or always behaves slow or whatever) but at least it does not depend whether users choose the sync or the async version of our API.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/231069168","html_url":"https://github.com/elastic/elasticsearch/issues/19301#issuecomment-231069168","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19301","id":231069168,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTA2OTE2OA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-07-07T12:55:53Z","updated_at":"2016-07-07T12:55:53Z","author_association":"CONTRIBUTOR","body":"I also like the idea of having one implementation internally. Implementing the synchronous version of the API by doing the async call and blocking on the future seems fairly sane. I think it is worth looking at the performance impacts of it though.\n\nRegarding maturity - it might be worth looking at something like okhttp. I get the sense httpclient async doesn't see all that much use. It feels kind of like an afterthought. okhttp doesn't break sync and async into two libraries which gives me the sense that async is more a core design choice. I don't know if it is a good choice, just an option that might be worth looking into.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/231070145","html_url":"https://github.com/elastic/elasticsearch/issues/19301#issuecomment-231070145","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19301","id":231070145,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTA3MDE0NQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-07-07T12:59:54Z","updated_at":"2016-07-07T12:59:54Z","author_association":"CONTRIBUTOR","body":"I just checked - okhttp only depends on okio which depends on nothing. Collectively they pull in animal sniffer and android as optional dependencies. We wouldn't ship either one but we'd still have to poke the third party audit a bit.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/231073523","html_url":"https://github.com/elastic/elasticsearch/issues/19301#issuecomment-231073523","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19301","id":231073523,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTA3MzUyMw==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2016-07-07T13:13:50Z","updated_at":"2016-07-07T13:13:50Z","author_association":"MEMBER","body":"> I think it is worth looking at the performance impacts of it though.\n\nYes! #19281 will help.\n\n> Regarding maturity - it might be worth looking at something like okhttp\n\nLast time I checked, I didn't find a way to send get requests with a body with it, and that didn't seem like something that could be patched (https://github.com/square/okhttp/blob/master/okhttp/src/main/java/okhttp3/internal/http/HttpMethod.java#L36). Maybe that one per se shouldn't be a reason not to consider it though, not sure.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/231083929","html_url":"https://github.com/elastic/elasticsearch/issues/19301#issuecomment-231083929","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19301","id":231083929,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTA4MzkyOQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-07-07T13:53:12Z","updated_at":"2016-07-07T13:53:12Z","author_association":"CONTRIBUTOR","body":"> Maybe that one per se shouldn't be a reason not to consider it though, not sure.\n\nFor better or worse we support GET with a body and we need to test it and the http client is the thing that does that.\n\nI opened https://github.com/square/okhttp/issues/2706. Even if they wanted to implement it simple timing may make us using it impossible. But I figured it was worth a shot.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/231327834","html_url":"https://github.com/elastic/elasticsearch/issues/19301#issuecomment-231327834","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19301","id":231327834,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTMyNzgzNA==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2016-07-08T10:29:27Z","updated_at":"2016-07-08T10:29:46Z","author_association":"MEMBER","body":"We discussed this in FixItFriday. Everybody agrees that we should go with only one http client implementation otherwise things would become hard to maintain. We will go with apache async http client and see how that works out. It is not a huge deal to change the underlying implementation later anyways, besides user configuration that would need to be adapted. Closing.\n","performed_via_github_app":null}]