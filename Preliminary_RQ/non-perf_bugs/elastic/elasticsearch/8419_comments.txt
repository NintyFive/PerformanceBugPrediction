[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/62372238","html_url":"https://github.com/elastic/elasticsearch/issues/8419#issuecomment-62372238","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8419","id":62372238,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMzcyMjM4","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2014-11-10T11:30:40Z","updated_at":"2014-11-10T11:30:40Z","author_association":"MEMBER","body":"The initial idea was to only give the elasticsearch user write permission to the data dir, however I see that this leads to the problem, that only root can install plugins actually... I will take a look, if we do the same in the debian package and if we do it might make sense to rethink this strategy.\n\nI guess by opening this ticket, you agree to this approach? :-)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/62501517","html_url":"https://github.com/elastic/elasticsearch/issues/8419#issuecomment-62501517","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8419","id":62501517,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNTAxNTE3","user":{"login":"atrepca","id":2030087,"node_id":"MDQ6VXNlcjIwMzAwODc=","avatar_url":"https://avatars2.githubusercontent.com/u/2030087?v=4","gravatar_id":"","url":"https://api.github.com/users/atrepca","html_url":"https://github.com/atrepca","followers_url":"https://api.github.com/users/atrepca/followers","following_url":"https://api.github.com/users/atrepca/following{/other_user}","gists_url":"https://api.github.com/users/atrepca/gists{/gist_id}","starred_url":"https://api.github.com/users/atrepca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atrepca/subscriptions","organizations_url":"https://api.github.com/users/atrepca/orgs","repos_url":"https://api.github.com/users/atrepca/repos","events_url":"https://api.github.com/users/atrepca/events{/privacy}","received_events_url":"https://api.github.com/users/atrepca/received_events","type":"User","site_admin":false},"created_at":"2014-11-11T04:44:39Z","updated_at":"2014-11-11T04:44:39Z","author_association":"NONE","body":"The approach of rethinking the strategy? Sure :smile:\n\nTrying to install a plugin as the elasticsearch user (provided you go around `/sbin/nologin`) fails (as expected) with:\n\n```\n$ sudo su -s /bin/bash -c \"/usr/share/elasticsearch/bin/plugin install lukas-vlcek/bigdesk\" elasticsearch\n-> Installing lukas-vlcek/bigdesk...\n\nFailed to install lukas-vlcek/bigdesk, reason: plugin directory /usr/share/elasticsearch/plugins is read only\n```\n\nLooks to be the same for the debian package, the `adduser` command is invoked with `--no-create-home` in [postinst](https://github.com/elasticsearch/elasticsearch/blob/master/src/deb/control/postinst#L24-26) so I guess it's created later on as root too.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/65090795","html_url":"https://github.com/elastic/elasticsearch/issues/8419#issuecomment-65090795","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8419","id":65090795,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MDkwNzk1","user":{"login":"t-lo","id":71888,"node_id":"MDQ6VXNlcjcxODg4","avatar_url":"https://avatars2.githubusercontent.com/u/71888?v=4","gravatar_id":"","url":"https://api.github.com/users/t-lo","html_url":"https://github.com/t-lo","followers_url":"https://api.github.com/users/t-lo/followers","following_url":"https://api.github.com/users/t-lo/following{/other_user}","gists_url":"https://api.github.com/users/t-lo/gists{/gist_id}","starred_url":"https://api.github.com/users/t-lo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/t-lo/subscriptions","organizations_url":"https://api.github.com/users/t-lo/orgs","repos_url":"https://api.github.com/users/t-lo/repos","events_url":"https://api.github.com/users/t-lo/events{/privacy}","received_events_url":"https://api.github.com/users/t-lo/received_events","type":"User","site_admin":false},"created_at":"2014-12-01T16:28:07Z","updated_at":"2014-12-01T16:28:07Z","author_association":"CONTRIBUTOR","body":"Both RPM and DEB seem to be affected. Actually, `/usr/share/elasticsearch/plugins` doesn't even exist after a fresh install. It would be rather simple though to create this directory and give ownership to the elasticsearch user. That would be two additional lines in both `src/deb/control/postinst` and `src/rpm/scripts/postinstall`, correspondingly.\n\nSince changing the ownership of `/usr/share/elasticsearch/plugins` suffices to resolve the plugin install issue I recommend to change ownership only for this subdirectory.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66621089","html_url":"https://github.com/elastic/elasticsearch/issues/8419#issuecomment-66621089","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8419","id":66621089,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NjIxMDg5","user":{"login":"t-lo","id":71888,"node_id":"MDQ6VXNlcjcxODg4","avatar_url":"https://avatars2.githubusercontent.com/u/71888?v=4","gravatar_id":"","url":"https://api.github.com/users/t-lo","html_url":"https://github.com/t-lo","followers_url":"https://api.github.com/users/t-lo/followers","following_url":"https://api.github.com/users/t-lo/following{/other_user}","gists_url":"https://api.github.com/users/t-lo/gists{/gist_id}","starred_url":"https://api.github.com/users/t-lo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/t-lo/subscriptions","organizations_url":"https://api.github.com/users/t-lo/orgs","repos_url":"https://api.github.com/users/t-lo/repos","events_url":"https://api.github.com/users/t-lo/events{/privacy}","received_events_url":"https://api.github.com/users/t-lo/received_events","type":"User","site_admin":false},"created_at":"2014-12-11T13:51:43Z","updated_at":"2014-12-11T13:51:43Z","author_association":"CONTRIBUTOR","body":"This issue was resolved by pull request #8732 which essentially has been merged already.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66627310","html_url":"https://github.com/elastic/elasticsearch/issues/8419#issuecomment-66627310","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8419","id":66627310,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NjI3MzEw","user":{"login":"atrepca","id":2030087,"node_id":"MDQ6VXNlcjIwMzAwODc=","avatar_url":"https://avatars2.githubusercontent.com/u/2030087?v=4","gravatar_id":"","url":"https://api.github.com/users/atrepca","html_url":"https://github.com/atrepca","followers_url":"https://api.github.com/users/atrepca/followers","following_url":"https://api.github.com/users/atrepca/following{/other_user}","gists_url":"https://api.github.com/users/atrepca/gists{/gist_id}","starred_url":"https://api.github.com/users/atrepca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atrepca/subscriptions","organizations_url":"https://api.github.com/users/atrepca/orgs","repos_url":"https://api.github.com/users/atrepca/repos","events_url":"https://api.github.com/users/atrepca/events{/privacy}","received_events_url":"https://api.github.com/users/atrepca/received_events","type":"User","site_admin":false},"created_at":"2014-12-11T14:39:06Z","updated_at":"2014-12-11T14:39:06Z","author_association":"NONE","body":"Thanks for fixing @t-lo, marking as closed.\n","performed_via_github_app":null}]