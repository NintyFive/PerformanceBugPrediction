{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/14167","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14167/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14167/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14167/events","html_url":"https://github.com/elastic/elasticsearch/issues/14167","id":111867544,"node_id":"MDU6SXNzdWUxMTE4Njc1NDQ=","number":14167,"title":"Bool query: apply minimumShouldMatch when explicitly set regardless of existing clauses","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2015-10-16T16:41:45Z","updated_at":"2018-02-14T13:30:46Z","closed_at":"2016-01-05T16:22:13Z","author_association":"MEMBER","active_lock_reason":null,"body":"We internally adjust the minimum should match value depending on how many optional clauses we have. That works well in many cases, but we end up overriding an explicitly set value for instance if we have less optional clauses than the current value (see https://github.com/elastic/elasticsearch/blob/master/core/src/main/java/org/elasticsearch/common/lucene/search/Queries.java#L175). Let's say for example that we have no optional clauses and minimum should match is set to 1, we internally adjust it to 0 right before executing the query. I was discussing this today with @jpountz and this behaviour seemed odd, which is why I am opening this issue for discussion.\n","closed_by":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"performed_via_github_app":null}