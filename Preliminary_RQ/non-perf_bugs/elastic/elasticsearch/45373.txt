{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/45373","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45373/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45373/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45373/events","html_url":"https://github.com/elastic/elasticsearch/issues/45373","id":478909257,"node_id":"MDU6SXNzdWU0Nzg5MDkyNTc=","number":45373,"title":"Highlight breaks when setting fuzziness to 0","user":{"login":"michal-lyson","id":1773149,"node_id":"MDQ6VXNlcjE3NzMxNDk=","avatar_url":"https://avatars3.githubusercontent.com/u/1773149?v=4","gravatar_id":"","url":"https://api.github.com/users/michal-lyson","html_url":"https://github.com/michal-lyson","followers_url":"https://api.github.com/users/michal-lyson/followers","following_url":"https://api.github.com/users/michal-lyson/following{/other_user}","gists_url":"https://api.github.com/users/michal-lyson/gists{/gist_id}","starred_url":"https://api.github.com/users/michal-lyson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michal-lyson/subscriptions","organizations_url":"https://api.github.com/users/michal-lyson/orgs","repos_url":"https://api.github.com/users/michal-lyson/repos","events_url":"https://api.github.com/users/michal-lyson/events{/privacy}","received_events_url":"https://api.github.com/users/michal-lyson/received_events","type":"User","site_admin":false},"labels":[{"id":111549183,"node_id":"MDU6TGFiZWwxMTE1NDkxODM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Highlighting","name":":Search/Highlighting","color":"0e8a16","default":false,"description":"How a query matched a document"},{"id":1967498216,"node_id":"MDU6TGFiZWwxOTY3NDk4MjE2","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Search","name":"Team:Search","color":"fef2c0","default":false,"description":"Meta label for search team"}],"state":"closed","locked":false,"assignee":{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false},"assignees":[{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false}],"milestone":null,"comments":6,"created_at":"2019-08-09T10:10:35Z","updated_at":"2020-08-06T17:54:39Z","closed_at":"2020-08-06T17:54:39Z","author_association":"NONE","active_lock_reason":null,"body":"<!-- Bug report -->\r\n\r\n**Elasticsearch version** \r\n7.3.0\r\n\r\n**Description**:\r\nWhen we run a search query with highlight and fuzziness explicitly set to 0, the search result is returned but without the highlight. It was working fine with elastic 7.2.0, it is also working if we set the fuzziness to different value or we delete it.\r\n\r\n**Steps to reproduce**:\r\n1. Create simple index, add some data:\r\n```\r\nPUT test\r\n{\r\n    \"settings\" : {\r\n        \"number_of_shards\" : 1\r\n    },\r\n    \"mappings\" : {\r\n        \"properties\" : {\r\n            \"field1\" : { \"type\" : \"text\" }\r\n        }\r\n    }\r\n}\r\n\r\nPUT test/_doc/1\r\n{\r\n    \"field1\" : \"value1\"\r\n}\r\n\r\nPUT test/_doc/2\r\n{\r\n    \"field1\" : \"other\"\r\n}\r\n```\r\n2. Send a search request with highlight and fuzziness set to 0:\r\n\r\n```\r\nPOST test/_search\r\n{\r\n  \"highlight\": {\r\n    \"fields\": {\r\n      \"field1\": {}\r\n    }\r\n  },\r\n  \"query\": {\r\n        \"fuzzy\" : {\r\n            \"field1\" : {\r\n                \"value\": \"value1\",\r\n                \"fuzziness\": 0\r\n            }\r\n        }\r\n  }\r\n}\r\n```\r\n**Expected:**\r\nHits returned with highlight\r\n**Actual:**\r\nHits returned without highlight\r\n","closed_by":{"login":"jtibshirani","id":7461306,"node_id":"MDQ6VXNlcjc0NjEzMDY=","avatar_url":"https://avatars3.githubusercontent.com/u/7461306?v=4","gravatar_id":"","url":"https://api.github.com/users/jtibshirani","html_url":"https://github.com/jtibshirani","followers_url":"https://api.github.com/users/jtibshirani/followers","following_url":"https://api.github.com/users/jtibshirani/following{/other_user}","gists_url":"https://api.github.com/users/jtibshirani/gists{/gist_id}","starred_url":"https://api.github.com/users/jtibshirani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtibshirani/subscriptions","organizations_url":"https://api.github.com/users/jtibshirani/orgs","repos_url":"https://api.github.com/users/jtibshirani/repos","events_url":"https://api.github.com/users/jtibshirani/events{/privacy}","received_events_url":"https://api.github.com/users/jtibshirani/received_events","type":"User","site_admin":false},"performed_via_github_app":null}