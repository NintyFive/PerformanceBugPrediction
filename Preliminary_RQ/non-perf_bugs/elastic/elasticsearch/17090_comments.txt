[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/196278908","html_url":"https://github.com/elastic/elasticsearch/issues/17090#issuecomment-196278908","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17090","id":196278908,"node_id":"MDEyOklzc3VlQ29tbWVudDE5NjI3ODkwOA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-03-14T12:02:20Z","updated_at":"2016-03-14T12:02:20Z","author_association":"CONTRIBUTOR","body":"Hi @ukouryou \n\nIt looks like you have mixed versions of Elasticsearch running.  Perhaps a 1.x client trying to talk to your 2.x cluser?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/196619775","html_url":"https://github.com/elastic/elasticsearch/issues/17090#issuecomment-196619775","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17090","id":196619775,"node_id":"MDEyOklzc3VlQ29tbWVudDE5NjYxOTc3NQ==","user":{"login":"ukouryou","id":2289988,"node_id":"MDQ6VXNlcjIyODk5ODg=","avatar_url":"https://avatars3.githubusercontent.com/u/2289988?v=4","gravatar_id":"","url":"https://api.github.com/users/ukouryou","html_url":"https://github.com/ukouryou","followers_url":"https://api.github.com/users/ukouryou/followers","following_url":"https://api.github.com/users/ukouryou/following{/other_user}","gists_url":"https://api.github.com/users/ukouryou/gists{/gist_id}","starred_url":"https://api.github.com/users/ukouryou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ukouryou/subscriptions","organizations_url":"https://api.github.com/users/ukouryou/orgs","repos_url":"https://api.github.com/users/ukouryou/repos","events_url":"https://api.github.com/users/ukouryou/events{/privacy}","received_events_url":"https://api.github.com/users/ukouryou/received_events","type":"User","site_admin":false},"created_at":"2016-03-15T02:24:29Z","updated_at":"2016-03-15T02:26:03Z","author_association":"NONE","body":"@clintongormley thanks for your replay, I get the log when the elasticsearch server start up,I didn't talk to server with client\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/196938985","html_url":"https://github.com/elastic/elasticsearch/issues/17090#issuecomment-196938985","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17090","id":196938985,"node_id":"MDEyOklzc3VlQ29tbWVudDE5NjkzODk4NQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-03-15T17:33:43Z","updated_at":"2016-03-15T17:33:43Z","author_association":"CONTRIBUTOR","body":"@ukouryou it looks like you DO have a client or node hanging around somewhere.  That message indicates that some other node/client tried to connect to this node and sent a malformed request.  Likely it is malformed because it has a different major version.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/197124437","html_url":"https://github.com/elastic/elasticsearch/issues/17090#issuecomment-197124437","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17090","id":197124437,"node_id":"MDEyOklzc3VlQ29tbWVudDE5NzEyNDQzNw==","user":{"login":"ukouryou","id":2289988,"node_id":"MDQ6VXNlcjIyODk5ODg=","avatar_url":"https://avatars3.githubusercontent.com/u/2289988?v=4","gravatar_id":"","url":"https://api.github.com/users/ukouryou","html_url":"https://github.com/ukouryou","followers_url":"https://api.github.com/users/ukouryou/followers","following_url":"https://api.github.com/users/ukouryou/following{/other_user}","gists_url":"https://api.github.com/users/ukouryou/gists{/gist_id}","starred_url":"https://api.github.com/users/ukouryou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ukouryou/subscriptions","organizations_url":"https://api.github.com/users/ukouryou/orgs","repos_url":"https://api.github.com/users/ukouryou/repos","events_url":"https://api.github.com/users/ukouryou/events{/privacy}","received_events_url":"https://api.github.com/users/ukouryou/received_events","type":"User","site_admin":false},"created_at":"2016-03-16T02:46:43Z","updated_at":"2016-03-16T02:46:43Z","author_association":"NONE","body":"@clintongormley I have scaned the whole intranet, no other node exist.\nI found that if I removed   network.host: 0.0.0.0 in the elasticsearch.yml,it works ok\n\n> 1be54772214b elasticsearch # ./bin/elasticsearch -Des.insecure.allow.root=true \n> [2016-03-16 10:34:51,492][WARN ][bootstrap                ] running as ROOT user. this is a bad idea!\n> [2016-03-16 10:34:51,650][INFO ][node                     ] [Amphibian] version[2.2.0], pid[407], build[8ff36d1/2016-01-27T13:32:39Z]\n> [2016-03-16 10:34:51,650][INFO ][node                     ] [Amphibian] initializing ...\n> [2016-03-16 10:34:52,001][INFO ][plugins                  ] [Amphibian] modules [lang-expression, lang-groovy], plugins [head, analysis-smartcn], sites [head]\n> [2016-03-16 10:34:52,012][INFO ][env                      ] [Amphibian] using [1] data paths, mounts [[/opt/elasticsearch-2.2.0/data (/dev/sda2)]], net usable_space [23.7gb], net total_space [39.2gb], spins? [possibly], types [ext4]\n> [2016-03-16 10:34:52,012][INFO ][env                      ] [Amphibian] heap size [989.8mb], compressed ordinary object pointers [true]\n> [2016-03-16 10:34:52,980][INFO ][node                     ] [Amphibian] initialized\n> [2016-03-16 10:34:52,980][INFO ][node                     ] [Amphibian] starting ...\n> [2016-03-16 10:34:53,027][INFO ][transport                ] [Amphibian] publish_address {127.0.0.1:9300}, bound_addresses {127.0.0.1:9300}\n> [2016-03-16 10:34:53,032][INFO ][discovery                ] [Amphibian] elasticsearch/ndsNzXynSQCfhbty1ePJag\n> [2016-03-16 10:34:56,047][INFO ][cluster.service          ] [Amphibian] new_master {Amphibian}{ndsNzXynSQCfhbty1ePJag}{127.0.0.1}{127.0.0.1:9300}, reason: zen-disco-join(elected_as_master, [0] joins received)\n> [2016-03-16 10:34:56,057][INFO ][http                     ] [Amphibian] publish_address {127.0.0.1:9200}, bound_addresses {127.0.0.1:9200}\n> [2016-03-16 10:34:56,057][INFO ][node                     ] [Amphibian] started\n> [2016-03-16 10:34:56,134][INFO ][gateway                  ] [Amphibian] recovered [0] indices into cluster_state\n\nbut I want to access it outside of the docker, any other suggestions?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/197239204","html_url":"https://github.com/elastic/elasticsearch/issues/17090#issuecomment-197239204","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17090","id":197239204,"node_id":"MDEyOklzc3VlQ29tbWVudDE5NzIzOTIwNA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-03-16T10:02:42Z","updated_at":"2016-03-16T10:02:42Z","author_association":"CONTRIBUTOR","body":"@bleskes any idea what might be going on here?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/197274968","html_url":"https://github.com/elastic/elasticsearch/issues/17090#issuecomment-197274968","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17090","id":197274968,"node_id":"MDEyOklzc3VlQ29tbWVudDE5NzI3NDk2OA==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-03-16T11:29:04Z","updated_at":"2016-03-16T11:29:04Z","author_association":"MEMBER","body":"I too strongly suspect there is an old 1.x client sending info requests to the cluster (we used those in 1.x to check that a node is alive).\n\nCan you double check the source ip, 172.17.42.1 ?\n\nNote that we you don't bound to 0.0.0.0 the ES node is not accepting any request from the outside and thus can't be reached by that client.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/197670955","html_url":"https://github.com/elastic/elasticsearch/issues/17090#issuecomment-197670955","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17090","id":197670955,"node_id":"MDEyOklzc3VlQ29tbWVudDE5NzY3MDk1NQ==","user":{"login":"ukouryou","id":2289988,"node_id":"MDQ6VXNlcjIyODk5ODg=","avatar_url":"https://avatars3.githubusercontent.com/u/2289988?v=4","gravatar_id":"","url":"https://api.github.com/users/ukouryou","html_url":"https://github.com/ukouryou","followers_url":"https://api.github.com/users/ukouryou/followers","following_url":"https://api.github.com/users/ukouryou/following{/other_user}","gists_url":"https://api.github.com/users/ukouryou/gists{/gist_id}","starred_url":"https://api.github.com/users/ukouryou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ukouryou/subscriptions","organizations_url":"https://api.github.com/users/ukouryou/orgs","repos_url":"https://api.github.com/users/ukouryou/repos","events_url":"https://api.github.com/users/ukouryou/events{/privacy}","received_events_url":"https://api.github.com/users/ukouryou/received_events","type":"User","site_admin":false},"created_at":"2016-03-17T03:05:02Z","updated_at":"2016-03-17T03:05:02Z","author_association":"NONE","body":"@bleskes I have a  physical server ,run the ifconfig command , the output as follows\n\n>  ifconfig\n> docker0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500\n>         inet 172.17.42.1  netmask 255.255.0.0  broadcast 0.0.0.0\n>         ether 0a:ea:37:dc:d9:29  txqueuelen 0  (Ethernet)\n>         RX packets 75912870  bytes 5869903197 (5.4 GiB)\n>         RX errors 0  dropped 0  overruns 0  frame 0\n>         TX packets 76830962  bytes 13987928119 (13.0 GiB)\n>         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n> \n> eno1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500\n>         inet 192.168.5.201  netmask 255.255.255.0  broadcast 192.168.5.255\n>         ether 34:17:eb:c2:3d:cc  txqueuelen 1000  (Ethernet)\n>         RX packets 16581382  bytes 9437015715 (8.7 GiB)\n>         RX errors 0  dropped 3874435  overruns 0  frame 0\n>         TX packets 9692374  bytes 5086146362 (4.7 GiB)\n>         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n>         device interrupt 20  memory 0xf7100000-f7120000  \n> \n> lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536\n>         inet 127.0.0.1  netmask 255.0.0.0\n>         loop  txqueuelen 0  (Local Loopback)\n>         RX packets 982  bytes 314975 (307.5 KiB)\n>         RX errors 0  dropped 0  overruns 0  frame 0\n>         TX packets 982  bytes 314975 (307.5 KiB)\n>         TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nI have installed docker on this physical server, and also a docker container name **elasticsearch** on this server, I got the issue in the container  **elasticserach** ,  172.17.42.1 is ther ip address of the docker0, did I make it clear?\n\nI also found that It works ok with these configurations outside of the docker container \n\n> andy@andy:~/work/elasticsearch-2.2.0$ ./bin/elasticsearch -Dnetwork.host=0.0.0.0\n> [2016-03-17 10:52:12,591][INFO ][node                     ] [Maestro] version[2.2.0], pid[6771], build[8ff36d1/2016-01-27T13:32:39Z]\n> [2016-03-17 10:52:12,592][INFO ][node                     ] [Maestro] initializing ...\n> [2016-03-17 10:52:12,903][INFO ][plugins                  ] [Maestro] modules [lang-expression, lang-groovy], plugins [head, analysis-smartcn], sites [head]\n> [2016-03-17 10:52:12,914][INFO ][env                      ] [Maestro] using [1] data paths, mounts [[/ (/dev/sda2)]], net usable_space [833.6gb], net total_space [908.5gb], spins? [possibly], types [ext4]\n> [2016-03-17 10:52:12,915][INFO ][env                      ] [Maestro] heap size [989.8mb], compressed ordinary object pointers [true]\n> [2016-03-17 10:52:13,931][INFO ][node                     ] [Maestro] initialized\n> [2016-03-17 10:52:13,931][INFO ][node                     ] [Maestro] starting ...\n> [2016-03-17 10:52:13,974][INFO ][transport                ] [Maestro] publish_address {172.17.0.1:9300}, bound_addresses {[::]:9300}\n> [2016-03-17 10:52:13,980][INFO ][discovery                ] [Maestro] elasticsearch/-3ILE2hWR3WkR3icKpYqVA\n> [2016-03-17 10:52:17,026][INFO ][cluster.service          ] [Maestro] new_master {Maestro}{-3ILE2hWR3WkR3icKpYqVA}{172.17.0.1}{172.17.0.1:9300}, reason: zen-disco-join(elected_as_master, [0] joins received)\n> [2016-03-17 10:52:17,036][INFO ][http                     ] [Maestro] publish_address {172.17.0.1:9200}, bound_addresses {[::]:9200}\n> [2016-03-17 10:52:17,036][INFO ][node                     ] [Maestro] started\n> [2016-03-17 10:52:17,112][INFO ][gateway                  ] [Maestro] recovered [0] indices into cluster_state\n\nIs this a clue?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/197746366","html_url":"https://github.com/elastic/elasticsearch/issues/17090#issuecomment-197746366","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17090","id":197746366,"node_id":"MDEyOklzc3VlQ29tbWVudDE5Nzc0NjM2Ng==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-03-17T07:57:49Z","updated_at":"2016-03-17T07:57:59Z","author_association":"MEMBER","body":"I'm not a docker user so I might be wrong here, but  doesn't the -p 9300:9300 parameter mean that that port will accept connection from anywhere on our network (not only docker containers in the same network)? The symptoms you describe match and old client trying to connect. I can't tell where it comes from, nor do I see anything that will point in another direction. Sorry, but my I advice is to continue digging in that direction. Let us know if you have any new information.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/198181677","html_url":"https://github.com/elastic/elasticsearch/issues/17090#issuecomment-198181677","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17090","id":198181677,"node_id":"MDEyOklzc3VlQ29tbWVudDE5ODE4MTY3Nw==","user":{"login":"ukouryou","id":2289988,"node_id":"MDQ6VXNlcjIyODk5ODg=","avatar_url":"https://avatars3.githubusercontent.com/u/2289988?v=4","gravatar_id":"","url":"https://api.github.com/users/ukouryou","html_url":"https://github.com/ukouryou","followers_url":"https://api.github.com/users/ukouryou/followers","following_url":"https://api.github.com/users/ukouryou/following{/other_user}","gists_url":"https://api.github.com/users/ukouryou/gists{/gist_id}","starred_url":"https://api.github.com/users/ukouryou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ukouryou/subscriptions","organizations_url":"https://api.github.com/users/ukouryou/orgs","repos_url":"https://api.github.com/users/ukouryou/repos","events_url":"https://api.github.com/users/ukouryou/events{/privacy}","received_events_url":"https://api.github.com/users/ukouryou/received_events","type":"User","site_admin":false},"created_at":"2016-03-18T03:13:19Z","updated_at":"2016-03-18T03:13:19Z","author_association":"NONE","body":"@bleskes @clintongormley you are right, I got the old client in an unused docker container,it works fine after stopped that container,thanks for your help \n","performed_via_github_app":null}]