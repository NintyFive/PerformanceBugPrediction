[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/352782013","html_url":"https://github.com/elastic/elasticsearch/issues/27903#issuecomment-352782013","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27903","id":352782013,"node_id":"MDEyOklzc3VlQ29tbWVudDM1Mjc4MjAxMw==","user":{"login":"gmoskovicz","id":1675411,"node_id":"MDQ6VXNlcjE2NzU0MTE=","avatar_url":"https://avatars3.githubusercontent.com/u/1675411?v=4","gravatar_id":"","url":"https://api.github.com/users/gmoskovicz","html_url":"https://github.com/gmoskovicz","followers_url":"https://api.github.com/users/gmoskovicz/followers","following_url":"https://api.github.com/users/gmoskovicz/following{/other_user}","gists_url":"https://api.github.com/users/gmoskovicz/gists{/gist_id}","starred_url":"https://api.github.com/users/gmoskovicz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gmoskovicz/subscriptions","organizations_url":"https://api.github.com/users/gmoskovicz/orgs","repos_url":"https://api.github.com/users/gmoskovicz/repos","events_url":"https://api.github.com/users/gmoskovicz/events{/privacy}","received_events_url":"https://api.github.com/users/gmoskovicz/received_events","type":"User","site_admin":false},"created_at":"2017-12-19T14:57:20Z","updated_at":"2017-12-19T14:57:20Z","author_association":"CONTRIBUTOR","body":"CC @jimczi as we discussed this.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/355576121","html_url":"https://github.com/elastic/elasticsearch/issues/27903#issuecomment-355576121","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27903","id":355576121,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTU3NjEyMQ==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2018-01-05T15:05:03Z","updated_at":"2018-01-05T15:05:03Z","author_association":"MEMBER","body":"We discussed this in FixItFriday and wanted to ask the following:\r\n\r\nCould you explain why is it necessary to know the index the suggestion came from? When running suggest you are asking Elasticsearch for suggested search terms across a set of shards to give the user a hint on what to search for so I don't see why it matter which index that suggestion is derived from?\r\n\r\nWe think, instead you should use the _msearch API to issue a suggest request to each index if you want  the results separated per index.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/355579420","html_url":"https://github.com/elastic/elasticsearch/issues/27903#issuecomment-355579420","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27903","id":355579420,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTU3OTQyMA==","user":{"login":"gmoskovicz","id":1675411,"node_id":"MDQ6VXNlcjE2NzU0MTE=","avatar_url":"https://avatars3.githubusercontent.com/u/1675411?v=4","gravatar_id":"","url":"https://api.github.com/users/gmoskovicz","html_url":"https://github.com/gmoskovicz","followers_url":"https://api.github.com/users/gmoskovicz/followers","following_url":"https://api.github.com/users/gmoskovicz/following{/other_user}","gists_url":"https://api.github.com/users/gmoskovicz/gists{/gist_id}","starred_url":"https://api.github.com/users/gmoskovicz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gmoskovicz/subscriptions","organizations_url":"https://api.github.com/users/gmoskovicz/orgs","repos_url":"https://api.github.com/users/gmoskovicz/repos","events_url":"https://api.github.com/users/gmoskovicz/events{/privacy}","received_events_url":"https://api.github.com/users/gmoskovicz/received_events","type":"User","site_admin":false},"created_at":"2018-01-05T15:17:57Z","updated_at":"2018-01-05T15:17:57Z","author_association":"CONTRIBUTOR","body":">Could you explain why is it necessary to know the index the suggestion came from? When running suggest you are asking Elasticsearch for suggested search terms across a set of shards to give the user a hint on what to search for so I don't see why it matter which index that suggestion is derived from?\r\n\r\n@colings86 imagine you have `N` projects under your account, and you have a search box where you want to type something, and show not only the suggestion but also which project that suggestion is coming from. And of course, say we have a single index per project (for example in a legal use case). I think that this isn't possible without either doing an msearch across each one of the projects, from where you need to know first the index names (all the projects that you have access).\r\n\r\nThis could be very easy if we have a way to return the suggestion along with the index that it was found.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/355590057","html_url":"https://github.com/elastic/elasticsearch/issues/27903#issuecomment-355590057","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27903","id":355590057,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTU5MDA1Nw==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2018-01-05T15:58:18Z","updated_at":"2018-01-05T15:58:18Z","author_association":"MEMBER","body":"But my question is, why is it useful to show the project the suggestion is coming from? What you have asked of Elasticsearch is \"given this context of data (shards/indexes/query), give me some suggestions on what I can search for given what I have already typed\". So you are supplying the context of data you want the suggestions in and therefore I think its correct that we should merge equivalent suggestions from different indexes in the same way as we should merge equivalent suggestions from the different shards in the same index. We do this for aggregations which is similar in that you are asking for an aggregated view of the data over multiple shards. \r\n\r\nIf you care about separating suggestions by index (or even be some other criteria on the documents e.g. a project field) then personally I think this should be done with multiple suggest calls using the _msearch API and targetting each request in the _msearch with the correct index/query/etc.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/356909759","html_url":"https://github.com/elastic/elasticsearch/issues/27903#issuecomment-356909759","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/27903","id":356909759,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NjkwOTc1OQ==","user":{"login":"gmoskovicz","id":1675411,"node_id":"MDQ6VXNlcjE2NzU0MTE=","avatar_url":"https://avatars3.githubusercontent.com/u/1675411?v=4","gravatar_id":"","url":"https://api.github.com/users/gmoskovicz","html_url":"https://github.com/gmoskovicz","followers_url":"https://api.github.com/users/gmoskovicz/followers","following_url":"https://api.github.com/users/gmoskovicz/following{/other_user}","gists_url":"https://api.github.com/users/gmoskovicz/gists{/gist_id}","starred_url":"https://api.github.com/users/gmoskovicz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gmoskovicz/subscriptions","organizations_url":"https://api.github.com/users/gmoskovicz/orgs","repos_url":"https://api.github.com/users/gmoskovicz/repos","events_url":"https://api.github.com/users/gmoskovicz/events{/privacy}","received_events_url":"https://api.github.com/users/gmoskovicz/received_events","type":"User","site_admin":false},"created_at":"2018-01-11T11:39:22Z","updated_at":"2018-01-11T11:39:22Z","author_association":"CONTRIBUTOR","body":"> If you care about separating suggestions by index (or even be some other criteria on the documents e.g. a project field) then personally I think this should be done with multiple suggest calls using the _msearch API and targetting each request in the _msearch with the correct index/query/etc.\r\n\r\nSounds good. Thanks!","performed_via_github_app":null}]