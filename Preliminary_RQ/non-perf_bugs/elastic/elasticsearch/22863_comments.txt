[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/276165482","html_url":"https://github.com/elastic/elasticsearch/issues/22863#issuecomment-276165482","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22863","id":276165482,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjE2NTQ4Mg==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2017-01-30T19:33:02Z","updated_at":"2017-01-30T19:33:02Z","author_association":"MEMBER","body":"> However, we then lose the type information when storing data in the index\r\n\r\nDo you mean `_source`? Isn't this always json? Or, it should be?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/276172381","html_url":"https://github.com/elastic/elasticsearch/issues/22863#issuecomment-276172381","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22863","id":276172381,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjE3MjM4MQ==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2017-01-30T19:57:23Z","updated_at":"2017-01-30T19:57:23Z","author_association":"MEMBER","body":"> Do you mean _source? Isn't this always json? Or, it should be?\r\n\r\nI was not sure either, but as far as I can see, and I hope I am wrong, we simply store the bytes array of the incoming document, whatever content type that is. the conversion from a type to another happens when returning the source.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/276172652","html_url":"https://github.com/elastic/elasticsearch/issues/22863#issuecomment-276172652","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22863","id":276172652,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjE3MjY1Mg==","user":{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false},"created_at":"2017-01-30T19:58:21Z","updated_at":"2017-01-30T19:58:21Z","author_association":"MEMBER","body":"> Do you mean _source? Isn't this always json?\r\n\r\nCorrect `_source`. I just traced through the code to be sure and we take the bytes from the user and store them in the source field without modification; if the source is filtered we still convert it back to the original type.\r\n\r\n> Or, it should be?\r\n\r\nI think that's tricky since the idea of `_source` is to store the original document so it can retrieved later on. From our docs:\r\n\r\n> The _source field contains the original JSON document body that was passed at index time. The _source field itself is not indexed (and thus is not searchable), but it is stored so that it can be returned when executing fetch requests, like get or search.\r\n\r\nMaybe we intended it to always be `JSON` at some point or it is a docs bug...","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/276175473","html_url":"https://github.com/elastic/elasticsearch/issues/22863#issuecomment-276175473","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22863","id":276175473,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjE3NTQ3Mw==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2017-01-30T20:08:50Z","updated_at":"2017-01-30T20:09:24Z","author_association":"MEMBER","body":"The debate about whether `_source` should be the exact original bytes has been discussed in many issues. One in particular would allow us to remove the `stored` feature of mappings, and possibly compress better: #9034. I only bring this up because any solutions here seem complex (eg having an additional field `_source_content_type`..what happens if it is not correctly updated? What happens with update scripts?), so maybe we can avoid the need for it and get better compression with a similar amount of work.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/277250905","html_url":"https://github.com/elastic/elasticsearch/issues/22863#issuecomment-277250905","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22863","id":277250905,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzI1MDkwNQ==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2017-02-03T13:51:04Z","updated_at":"2017-02-03T13:51:04Z","author_association":"MEMBER","body":"we discussed this on fix it friday and as before this boils down to knowing how much performance boost (if at all) alternative/binary JSON formats (most notably Smile) gives us. This will help motivate keeping the current accept all methodology or give us the data we need to remove it and settle on, probably, textual JSON. I will talk to @danielmitterdorfer  to see when we can make this happen.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/277432108","html_url":"https://github.com/elastic/elasticsearch/issues/22863#issuecomment-277432108","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22863","id":277432108,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzQzMjEwOA==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2017-02-04T09:44:03Z","updated_at":"2017-02-04T09:44:03Z","author_association":"MEMBER","body":"Double checking (as remove was mentioned above) that this issue is not about removing support for any currently supported format. I'd expect the outcome of this issue to be about whether it is necessary to store in the translog and in the lucene index exactly the same bytes that were received, in any supported content type, rather than settling on a format and handling conversions internally.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/277638754","html_url":"https://github.com/elastic/elasticsearch/issues/22863#issuecomment-277638754","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22863","id":277638754,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzYzODc1NA==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2017-02-06T10:11:21Z","updated_at":"2017-02-06T10:11:21Z","author_association":"MEMBER","body":"@javanna Indeed this is issue is about explicitly storing the content type of a document alongside wherever we store the original documents bytes (translog and lucene). This is needed if we are going to remove the automatic content detection but are going to keep supporting multiple formats. However, if end up removing supporting multiple formats (or converting convenience formats like YAML to JSON) we don't need this explicit information. I hope this clarifies why these are tied together.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/277651219","html_url":"https://github.com/elastic/elasticsearch/issues/22863#issuecomment-277651219","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22863","id":277651219,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzY1MTIxOQ==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2017-02-06T11:06:28Z","updated_at":"2017-02-06T11:06:28Z","author_association":"MEMBER","body":"Things are clear on my end, yet I think I should clarify that we should not discuss again if we want to remove support for multiple formats at REST, cause that won't happen anytime soon, see #22811 . The two options here are 1) we add the type to translog and index 2) we settle on one internal format and internally convert all of the others (for bw comp we will still need some auto-detection).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/376591040","html_url":"https://github.com/elastic/elasticsearch/issues/22863#issuecomment-376591040","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22863","id":376591040,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NjU5MTA0MA==","user":{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false},"created_at":"2018-03-27T16:35:14Z","updated_at":"2018-03-27T16:35:14Z","author_association":"MEMBER","body":"Closing for now as we are in favor to remove support for CBOR, Smile and Yaml. We will reconsider this in the future.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/376645928","html_url":"https://github.com/elastic/elasticsearch/issues/22863#issuecomment-376645928","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22863","id":376645928,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NjY0NTkyOA==","user":{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false},"created_at":"2018-03-27T19:28:09Z","updated_at":"2018-03-27T19:28:09Z","author_association":"MEMBER","body":"To be clear, this was closed in favour of #22811.","performed_via_github_app":null}]