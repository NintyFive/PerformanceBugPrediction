{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/24189","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24189/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24189/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24189/events","html_url":"https://github.com/elastic/elasticsearch/issues/24189","id":222761002,"node_id":"MDU6SXNzdWUyMjI3NjEwMDI=","number":24189,"title":"org.elasticsearch.http.netty4.Netty4ClientYamlTestSuiteIT.test fails","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"labels":[{"id":60445228,"node_id":"MDU6TGFiZWw2MDQ0NTIyOA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest","name":">test","color":"5319e7","default":false,"description":"Issues or PRs that are addressing/adding tests"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"assignees":[{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2017-04-19T14:39:17Z","updated_at":"2017-04-19T14:59:15Z","closed_at":"2017-04-19T14:57:00Z","author_association":"MEMBER","active_lock_reason":null,"body":"Example build failure: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+5.1+multijob-unix-compatibility/os=oraclelinux/206/consoleFull\r\n\r\nExample trace:\r\n\r\n```\r\nERROR   60.0s | Netty4ClientYamlTestSuiteIT.test {yaml=create/60_refresh/When refresh url parameter is an empty string that means \"refresh immediately\"} <<< FAILURES!\r\n   > Throwable #1: java.io.IOException: listener timeout after waiting for [30000] ms\r\n   > \tat org.elasticsearch.client.RestClient$SyncResponseListener.get(RestClient.java:617)\r\n   > \tat org.elasticsearch.client.RestClient.performRequest(RestClient.java:212)\r\n   > \tat org.elasticsearch.client.RestClient.performRequest(RestClient.java:184)\r\n   > \tat org.elasticsearch.client.RestClient.performRequest(RestClient.java:163)\r\n   > \tat org.elasticsearch.test.rest.yaml.ClientYamlTestClient.readMasterAndMinNodeVersion(ClientYamlTestClient.java:96)\r\n   > \tat org.elasticsearch.test.rest.yaml.ClientYamlTestClient.<init>(ClientYamlTestClient.java:74)\r\n   > \tat org.elasticsearch.test.rest.yaml.ClientYamlTestExecutionContext.initClient(ClientYamlTestExecutionContext.java:121)\r\n   > \tat org.elasticsearch.test.rest.yaml.ESClientYamlSuiteTestCase.reset(ESClientYamlSuiteTestCase.java:248)\r\n   > \tat java.lang.Thread.run(Thread.java:745)Throwable #2: java.io.IOException: listener timeout after waiting for [30000] ms\r\n   > \tat org.elasticsearch.client.RestClient$SyncResponseListener.get(RestClient.java:617)\r\n   > \tat org.elasticsearch.client.RestClient.performRequest(RestClient.java:212)\r\n   > \tat org.elasticsearch.client.RestClient.performRequest(RestClient.java:184)\r\n   > \tat org.elasticsearch.client.RestClient.performRequest(RestClient.java:146)\r\n   > \tat org.elasticsearch.test.rest.ESRestTestCase.wipeCluster(ESRestTestCase.java:167)\r\n   > \tat org.elasticsearch.test.rest.ESRestTestCase.after(ESRestTestCase.java:123)\r\n   > \tat java.lang.Thread.run(Thread.java:745)\r\n```\r\n\r\n* Branch 5.1\r\n* Reproduction line: `REPRODUCE WITH: gradle :modules:transport-netty4:integTest -Dtests.seed=14C8E6DEC5497F59 -Dtests.class=org.elasticsearch.http.netty4.Netty4ClientYamlTestSuiteIT -Dtests.method=\"test {yaml=create/60_refresh/When refresh url parameter is an empty string that means \"refresh immediately\"}\" -Dtests.security.manager=true -Dtests.locale=es-CR -Dtests.timezone=Antarctica/Troll` (does not reproduce locally)\r\n* Frequency: This failure has never occurred in CI within the last year. It does not reproduce locally.\r\n\r\nThe trace above however just shows the victim. The real problem is that Netty is not responding. Attached are the [complete contents of the build folder](https://github.com/elastic/elasticsearch/files/935194/build-netty4.zip) in the Netty 4 module from the mentioned build.\r\n\r\n\r\nInitially assigning to you Jason, but please feel free to reassign.","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}