[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44466588","html_url":"https://github.com/elastic/elasticsearch/issues/6301#issuecomment-44466588","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6301","id":44466588,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NDY2NTg4","user":{"login":"skratchdot","id":434470,"node_id":"MDQ6VXNlcjQzNDQ3MA==","avatar_url":"https://avatars1.githubusercontent.com/u/434470?v=4","gravatar_id":"","url":"https://api.github.com/users/skratchdot","html_url":"https://github.com/skratchdot","followers_url":"https://api.github.com/users/skratchdot/followers","following_url":"https://api.github.com/users/skratchdot/following{/other_user}","gists_url":"https://api.github.com/users/skratchdot/gists{/gist_id}","starred_url":"https://api.github.com/users/skratchdot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skratchdot/subscriptions","organizations_url":"https://api.github.com/users/skratchdot/orgs","repos_url":"https://api.github.com/users/skratchdot/repos","events_url":"https://api.github.com/users/skratchdot/events{/privacy}","received_events_url":"https://api.github.com/users/skratchdot/received_events","type":"User","site_admin":false},"created_at":"2014-05-28T21:25:13Z","updated_at":"2014-05-28T21:28:35Z","author_association":"NONE","body":"I'd love to see this fixed as well (or at least understand the problem).  I'm running into a similar issue when using a nested aggregation.  For instance, here's a stripped down example query (and the resulting error):\n\n``` json\n{\n    \"query\": {\n        \"term\": {\n            \"foo\": \"bar\"\n        }\n    },\n    \"aggs\": {\n        \"types\": {\n            \"terms\": {\n                \"field\": \"_type\"\n            },\n            \"aggs\": {\n                \"time_last_hour\": {\n                    \"filter\": {\n                        \"range\": {\n                            \"date\": {\n                                \"from\": \"now-1H/H\"\n                            }\n                        }\n                    },\n                    \"aggs\": {\n                        \"graph\": {\n                            \"date_histogram\": {\n                                \"field\": \"date\",\n                                \"interval\": \"1m\",\n                                \"min_doc_count\": 0,\n                                \"extended_bounds\": {\n                                    \"min\": \"now-1H\",\n                                    \"max\": \"now\"\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n```\n\nerror:\n\n``` json\n{\n    error: ReduceSearchPhaseException[Failed to execute phase[query], [reduce]];\n    nested: UnsupportedOperationException;\n    status: 503\n}\n```\n\nIf I remove the \"min\" or \"max\" from the \"extended_bounds\", I don't get an error.\n\nExample Response:\n\n``` json\n{\n    \"took\": 5,\n    \"timed_out\": false,\n    \"_shards\": {\n        \"total\": 5,\n        \"successful\": 5,\n        \"failed\": 0\n    },\n    \"hits\": {\n        \"total\": 10582,\n        \"max_score\": 0.0,\n        \"hits\": []\n    },\n    \"aggregations\": {\n        \"types\": {\n            \"buckets\": [{\n                \"key\": \"foo\",\n                \"doc_count\": 5318,\n                \"time_last_hour\": {\n                    \"doc_count\": 0,\n                    \"graph\": {\n                        \"buckets\": []\n                    }\n                }\n            }, {\n                \"key\": \"bar\",\n                \"doc_count\": 5263,\n                \"time_last_hour\": {\n                    \"doc_count\": 0,\n                    \"graph\": {\n                        \"buckets\": []\n                    }\n                }\n            }, {\n                \"key\": \"baz\",\n                \"doc_count\": 1,\n                \"time_last_hour\": {\n                    \"doc_count\": 0,\n                    \"graph\": {\n                        \"buckets\": []\n                    }\n                }\n            }]\n        }\n    }\n}\n```\n\nEven if there are no results in my filter from the last hour, I would like the histogram to be populated with 60 minutes worth of \"doc_count=0\" data.\n\n_Sorry if this is not the correct place for my comment.  Elasticsearch might be working as intended- and I just don't understand how date_histogram is supposed to work with filters and extended_bounds_\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/47976642","html_url":"https://github.com/elastic/elasticsearch/issues/6301#issuecomment-47976642","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6301","id":47976642,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3OTc2NjQy","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-07-03T19:52:07Z","updated_at":"2014-07-03T19:52:07Z","author_association":"CONTRIBUTOR","body":"@uboness this appears to have been fixed? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/48212236","html_url":"https://github.com/elastic/elasticsearch/issues/6301#issuecomment-48212236","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6301","id":48212236,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MjEyMjM2","user":{"login":"jbrook","id":861705,"node_id":"MDQ6VXNlcjg2MTcwNQ==","avatar_url":"https://avatars1.githubusercontent.com/u/861705?v=4","gravatar_id":"","url":"https://api.github.com/users/jbrook","html_url":"https://github.com/jbrook","followers_url":"https://api.github.com/users/jbrook/followers","following_url":"https://api.github.com/users/jbrook/following{/other_user}","gists_url":"https://api.github.com/users/jbrook/gists{/gist_id}","starred_url":"https://api.github.com/users/jbrook/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbrook/subscriptions","organizations_url":"https://api.github.com/users/jbrook/orgs","repos_url":"https://api.github.com/users/jbrook/repos","events_url":"https://api.github.com/users/jbrook/events{/privacy}","received_events_url":"https://api.github.com/users/jbrook/received_events","type":"User","site_admin":false},"created_at":"2014-07-07T17:47:26Z","updated_at":"2014-07-07T17:47:26Z","author_association":"CONTRIBUTOR","body":"We are running into this bug with 1.2.1. We are not using routing - just nested aggregations with extended_bounds. Is this fixed on master?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/48212447","html_url":"https://github.com/elastic/elasticsearch/issues/6301#issuecomment-48212447","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6301","id":48212447,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MjEyNDQ3","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-07-07T17:49:01Z","updated_at":"2014-07-07T17:49:01Z","author_association":"CONTRIBUTOR","body":"@jbrook can you upload a simple recreation please?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/48212559","html_url":"https://github.com/elastic/elasticsearch/issues/6301#issuecomment-48212559","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6301","id":48212559,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MjEyNTU5","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-07-07T17:49:44Z","updated_at":"2014-07-07T17:49:44Z","author_association":"CONTRIBUTOR","body":"@jpountz do you know what the status of this ticket is?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/50025525","html_url":"https://github.com/elastic/elasticsearch/issues/6301#issuecomment-50025525","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6301","id":50025525,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDI1NTI1","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2014-07-24T14:30:53Z","updated_at":"2014-07-24T14:30:53Z","author_association":"CONTRIBUTOR","body":"@jbrook @clintongormley I expect this too have been fixed via https://github.com/elasticsearch/elasticsearch/pull/6484\n","performed_via_github_app":null}]