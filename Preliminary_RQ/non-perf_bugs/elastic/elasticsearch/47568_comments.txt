[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/538876514","html_url":"https://github.com/elastic/elasticsearch/issues/47568#issuecomment-538876514","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47568","id":538876514,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODg3NjUxNA==","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2019-10-07T07:38:42Z","updated_at":"2019-10-07T07:38:42Z","author_association":"MEMBER","body":"Hi @hiaselhans! I might be out of date, but I don't think that there's a single standard way to detect bots from user agent information? I think that in any case you have to rely on a predefined set of identifiers?\r\n\r\nBefore opening a pull request maybe you could expand on how you'd like to implement the feature?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/538876667","html_url":"https://github.com/elastic/elasticsearch/issues/47568#issuecomment-538876667","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47568","id":538876667,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODg3NjY2Nw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-10-07T07:39:12Z","updated_at":"2019-10-07T07:39:12Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features (:Core/Features/Ingest)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/539099226","html_url":"https://github.com/elastic/elasticsearch/issues/47568#issuecomment-539099226","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47568","id":539099226,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTA5OTIyNg==","user":{"login":"hiaselhans","id":5046381,"node_id":"MDQ6VXNlcjUwNDYzODE=","avatar_url":"https://avatars2.githubusercontent.com/u/5046381?v=4","gravatar_id":"","url":"https://api.github.com/users/hiaselhans","html_url":"https://github.com/hiaselhans","followers_url":"https://api.github.com/users/hiaselhans/followers","following_url":"https://api.github.com/users/hiaselhans/following{/other_user}","gists_url":"https://api.github.com/users/hiaselhans/gists{/gist_id}","starred_url":"https://api.github.com/users/hiaselhans/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hiaselhans/subscriptions","organizations_url":"https://api.github.com/users/hiaselhans/orgs","repos_url":"https://api.github.com/users/hiaselhans/repos","events_url":"https://api.github.com/users/hiaselhans/events{/privacy}","received_events_url":"https://api.github.com/users/hiaselhans/received_events","type":"User","site_admin":false},"created_at":"2019-10-07T16:37:22Z","updated_at":"2019-10-07T16:37:22Z","author_association":"NONE","body":"Hi @tlrx!\r\n\r\nthanks for the answer. \r\nThere might be no standard way to do it but for me a simple check for the words (\"bot\", \"spider\") works pretty good. in my user agents, when i filter for the bot boolean i have only real browsers left.\r\nIt's just additional information at more less no cost for me.\r\n\r\nhere's what i did in my pipeline:\r\n\r\n`\r\n\r\n      \"script\": {\r\n        \"source\": \"if (ctx.request?.user_agent != null){ boolean bot = false; String user_agent = ctx.request.user_agent.toLowerCase(); if (user_agent.contains('bot') || user_agent.contains('spider')) {bot = true;} ctx.request.browser.bot = bot;}\"\r\n      }\r\n`","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/540604471","html_url":"https://github.com/elastic/elasticsearch/issues/47568#issuecomment-540604471","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47568","id":540604471,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDYwNDQ3MQ==","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2019-10-10T14:08:32Z","updated_at":"2019-10-10T14:08:32Z","author_association":"MEMBER","body":"Thanks @hiaselhans for your detailed response!\r\n\r\n> Would a pull request have chances to be merged for this..?\r\n\r\nBecause there's no standard way to detect robots user agent, I don't think that a PR which searches for `bot` or `spider` and adds a field is likely to be accepted (what do you think @jakelandis?).\r\n\r\nWhat you are doing today using script is the right thing to do. Note that we're working on the Enrich processor (see #32789) and this feature could also be used in the future to lookup user agents from an Elasticsearch index and tag them as robots :)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/540957981","html_url":"https://github.com/elastic/elasticsearch/issues/47568#issuecomment-540957981","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47568","id":540957981,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDk1Nzk4MQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2019-10-11T07:56:32Z","updated_at":"2019-10-11T07:56:32Z","author_association":"MEMBER","body":"I'm also not sure whether checking for the existence of `bot` or `spider` in the user agent string is something that should be a built-in feature in the useragent processor. I will label this issue as team-discuss and get back to this.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/543686595","html_url":"https://github.com/elastic/elasticsearch/issues/47568#issuecomment-543686595","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47568","id":543686595,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MzY4NjU5NQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2019-10-18T11:27:44Z","updated_at":"2019-10-18T11:27:44Z","author_association":"MEMBER","body":"I'm closing this issue. Just checking whether a `bot` or `spider` phrase occurs in the useragent name isn't sufficient for the this processor to automatically detect whether a useragent is a bot. That decision should be made in [the upstream uap-core project](https://github.com/ua-parser/uap-core). If this basic/incomplete bot detection is desired then that should be done by using the `script` processor.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/549130257","html_url":"https://github.com/elastic/elasticsearch/issues/47568#issuecomment-549130257","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47568","id":549130257,"node_id":"MDEyOklzc3VlQ29tbWVudDU0OTEzMDI1Nw==","user":{"login":"hiaselhans","id":5046381,"node_id":"MDQ6VXNlcjUwNDYzODE=","avatar_url":"https://avatars2.githubusercontent.com/u/5046381?v=4","gravatar_id":"","url":"https://api.github.com/users/hiaselhans","html_url":"https://github.com/hiaselhans","followers_url":"https://api.github.com/users/hiaselhans/followers","following_url":"https://api.github.com/users/hiaselhans/following{/other_user}","gists_url":"https://api.github.com/users/hiaselhans/gists{/gist_id}","starred_url":"https://api.github.com/users/hiaselhans/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hiaselhans/subscriptions","organizations_url":"https://api.github.com/users/hiaselhans/orgs","repos_url":"https://api.github.com/users/hiaselhans/repos","events_url":"https://api.github.com/users/hiaselhans/events{/privacy}","received_events_url":"https://api.github.com/users/hiaselhans/received_events","type":"User","site_admin":false},"created_at":"2019-11-03T12:09:08Z","updated_at":"2019-11-03T12:09:08Z","author_association":"NONE","body":"ok. no worries.\r\nDo you think it is worth to put a PR for the corresponding docs or just drop it?","performed_via_github_app":null}]