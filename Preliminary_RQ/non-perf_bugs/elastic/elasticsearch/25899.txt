{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/25899","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25899/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25899/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25899/events","html_url":"https://github.com/elastic/elasticsearch/issues/25899","id":245655985,"node_id":"MDU6SXNzdWUyNDU2NTU5ODU=","number":25899,"title":"Mix of transport and REST API breaks index template merging","user":{"login":"izerobit","id":17596277,"node_id":"MDQ6VXNlcjE3NTk2Mjc3","avatar_url":"https://avatars1.githubusercontent.com/u/17596277?v=4","gravatar_id":"","url":"https://api.github.com/users/izerobit","html_url":"https://github.com/izerobit","followers_url":"https://api.github.com/users/izerobit/followers","following_url":"https://api.github.com/users/izerobit/following{/other_user}","gists_url":"https://api.github.com/users/izerobit/gists{/gist_id}","starred_url":"https://api.github.com/users/izerobit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/izerobit/subscriptions","organizations_url":"https://api.github.com/users/izerobit/orgs","repos_url":"https://api.github.com/users/izerobit/repos","events_url":"https://api.github.com/users/izerobit/events{/privacy}","received_events_url":"https://api.github.com/users/izerobit/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2017-07-26T09:12:12Z","updated_at":"2017-08-04T08:02:23Z","closed_at":"2017-08-04T08:02:15Z","author_association":"NONE","active_lock_reason":null,"body":"es version: 5.2.2\r\nwe have to index template like this\r\n```json\r\n{\r\n  \"elog-default\": {\r\n    \"order\": 0,\r\n    \"template\": \"elog_*\",\r\n    \"settings\": {\r\n      \"index\": {\r\n        \"mapper\": {\r\n          \"dynamic\": \"true\"\r\n        },\r\n        \"mapping\": {\r\n          \"ignore_malformed\": \"true\"\r\n        },\r\n        \"refresh_interval\": \"30s\",\r\n        \"analysis\": {\r\n          \"analyzer\": {\r\n            \"default_search\": {\r\n              \"lowercase\": \"true\",\r\n              \"pattern\": \"\\W|_\",\r\n              \"type\": \"pattern\"\r\n            },\r\n            \"default\": {\r\n              \"lowercase\": \"true\",\r\n              \"pattern\": \"\\W|_\",\r\n              \"type\": \"pattern\"\r\n            }\r\n          }\r\n        },\r\n        \"number_of_shards\": \"9\",\r\n        \"number_of_replicas\": \"1\"\r\n      }\r\n    },\r\n    \"mappings\": {\r\n      \"elog\": {\r\n        \"_all\": {\r\n          \"enabled\": false\r\n        },\r\n        \"properties\": {\r\n          \"_ip\": {\r\n            \"ignore_above\": \"32766\",\r\n            \"type\": \"keyword\"\r\n          },\r\n          \"_log\": {\r\n            \"type\": \"text\"\r\n          },\r\n          \"_collectTime\": {\r\n            \"format\": \"yyyy-MM-dd HH:mm:ss\",\r\n            \"type\": \"date\"\r\n          },\r\n          \"_hostName\": {\r\n            \"type\": \"text\"\r\n          },\r\n          \"_fileName\": {\r\n            \"type\": \"text\"\r\n          },\r\n          \"_sortedId\": {\r\n            \"ignore_above\": \"32766\",\r\n            \"type\": \"keyword\"\r\n          }\r\n        }\r\n      }\r\n    },\r\n    \"aliases\": {}\r\n  }\r\n}\r\n```\r\n\r\nthe another \r\n\r\n```json\r\n{\r\n  \"elog-esearch-canal\": {\r\n    \"order\": 1,\r\n    \"template\": \"elog_esearch-canal-20*\",\r\n    \"settings\": {},\r\n    \"mappings\": {\r\n      \"elog\": {\r\n        \"properties\": {\r\n          \"logLevel\": {\r\n            \"ignore_above\": \"32766\",\r\n            \"type\": \"keyword\"\r\n          },\r\n          \"_log\": {\r\n            \"type\": \"text\"\r\n          },\r\n          \"_time\": {\r\n            \"format\": \"yyyy-MM-dd HH:mm:ss\",\r\n            \"type\": \"date\"\r\n          }\r\n        }\r\n      }\r\n    },\r\n    \"aliases\": {}\r\n  }\r\n}\r\n```\r\n\r\nthen create index \r\nelog_esearch-canal-20991\r\nresult is like this \r\n\r\n```json\r\n{\r\n  \"settings\": {\r\n    \"index\": {\r\n      \"mapping\": {\r\n        \"ignore_malformed\": \"true\"\r\n      },\r\n      \"refresh_interval\": \"30s\",\r\n      \"number_of_shards\": \"9\",\r\n      \"provided_name\": \"elog_esearch-canal-20991\",\r\n      \"mapper\": {\r\n        \"dynamic\": \"true\"\r\n      },\r\n      \"creation_date\": \"1501059220807\",\r\n      \"analysis\": {\r\n        \"analyzer\": {\r\n          \"default_search\": {\r\n            \"lowercase\": \"true\",\r\n            \"pattern\": \"\\W|_\",\r\n            \"type\": \"pattern\"\r\n          },\r\n          \"default\": {\r\n            \"lowercase\": \"true\",\r\n            \"pattern\": \"\\W|_\",\r\n            \"type\": \"pattern\"\r\n          }\r\n        }\r\n      },\r\n      \"number_of_replicas\": \"1\",\r\n      \"uuid\": \"eeEUja1NSSKpfgv6GwrWoA\",\r\n      \"version\": {\r\n        \"created\": \"5020299\"\r\n      }\r\n    }\r\n  },\r\n  \"mappings\": {\r\n    \"elog\": {\r\n      \"_all\": {\r\n        \"search_analyzer\": \"default_search\",\r\n        \"analyzer\": \"default\",\r\n        \"enabled\": false\r\n      },\r\n      \"properties\": {\r\n        \"logLevel\": {\r\n          \"ignore_above\": 32766,\r\n          \"type\": \"keyword\"\r\n        },\r\n        \"_ip\": {\r\n          \"ignore_above\": 32766,\r\n          \"type\": \"keyword\"\r\n        },\r\n        \"_log\": {\r\n          \"search_analyzer\": \"default_search\",\r\n          \"analyzer\": \"default\",\r\n          \"type\": \"text\"\r\n        },\r\n        \"_collectTime\": {\r\n          \"format\": \"yyyy-MM-dd HH:mm:ss\",\r\n          \"type\": \"date\"\r\n        },\r\n        \"_hostName\": {\r\n          \"search_analyzer\": \"default_search\",\r\n          \"analyzer\": \"default\",\r\n          \"type\": \"text\"\r\n        },\r\n        \"_fileName\": {\r\n          \"search_analyzer\": \"default_search\",\r\n          \"analyzer\": \"default\",\r\n          \"type\": \"text\"\r\n        },\r\n        \"_sortedId\": {\r\n          \"ignore_above\": 32766,\r\n          \"type\": \"keyword\"\r\n        },\r\n        \"_time\": {\r\n          \"format\": \"yyyy-MM-dd HH:mm:ss\",\r\n          \"type\": \"date\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nthis is what we want.\r\nthen I modify the first template elog-default refresh_interval to \"31s\" in kibana devtool get&put \r\nand then create index elog_esearch-canal-20992\r\n```json\r\n{\r\n  \"state\": \"open\",\r\n  \"settings\": {\r\n    \"index\": {\r\n      \"mapping\": {\r\n        \"ignore_malformed\": \"true\"\r\n      },\r\n      \"refresh_interval\": \"31s\",\r\n      \"number_of_shards\": \"9\",\r\n      \"provided_name\": \"elog_esearch-canal-20992\",\r\n      \"mapper\": {\r\n        \"dynamic\": \"true\"\r\n      },\r\n      \"creation_date\": \"1501059247497\",\r\n      \"analysis\": {\r\n        \"analyzer\": {\r\n          \"default_search\": {\r\n            \"lowercase\": \"true\",\r\n            \"pattern\": \"\\W|_\",\r\n            \"type\": \"pattern\"\r\n          },\r\n          \"default\": {\r\n            \"lowercase\": \"true\",\r\n            \"pattern\": \"\\W|_\",\r\n            \"type\": \"pattern\"\r\n          }\r\n        }\r\n      },\r\n      \"number_of_replicas\": \"1\",\r\n      \"uuid\": \"7X6jKVxbTvGKNCG1V3FKhQ\",\r\n      \"version\": {\r\n        \"created\": \"5020299\"\r\n      }\r\n    }\r\n  },\r\n  \"mappings\": {\r\n    \"elog\": {\r\n      \"_all\": {\r\n        \"search_analyzer\": \"default_search\",\r\n        \"analyzer\": \"default\",\r\n        \"enabled\": false\r\n      },\r\n      \"properties\": {\r\n        \"_ip\": {\r\n          \"ignore_above\": 32766,\r\n          \"type\": \"keyword\"\r\n        },\r\n        \"_log\": {\r\n          \"search_analyzer\": \"default_search\",\r\n          \"analyzer\": \"default\",\r\n          \"type\": \"text\"\r\n        },\r\n        \"_collectTime\": {\r\n          \"format\": \"yyyy-MM-dd HH:mm:ss\",\r\n          \"type\": \"date\"\r\n        },\r\n        \"_hostName\": {\r\n          \"search_analyzer\": \"default_search\",\r\n          \"analyzer\": \"default\",\r\n          \"type\": \"text\"\r\n        },\r\n        \"_fileName\": {\r\n          \"search_analyzer\": \"default_search\",\r\n          \"analyzer\": \"default\",\r\n          \"type\": \"text\"\r\n        },\r\n        \"_sortedId\": {\r\n          \"ignore_above\": 32766,\r\n          \"type\": \"keyword\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nsome properties like logLevel missing，I tried several times，the result same","closed_by":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"performed_via_github_app":null}