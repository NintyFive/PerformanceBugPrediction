[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/27871727","html_url":"https://github.com/elastic/elasticsearch/issues/4105#issuecomment-27871727","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4105","id":27871727,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODcxNzI3","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2013-11-06T13:09:48Z","updated_at":"2013-11-06T13:09:48Z","author_association":"CONTRIBUTOR","body":"Would it make sense to add this rewrite method rather than opening up the plugin mechanism for this. I think it's generally useful. ie others can benefit from it as well?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/27874670","html_url":"https://github.com/elastic/elasticsearch/issues/4105#issuecomment-27874670","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4105","id":27874670,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODc0Njcw","user":{"login":"pweerd","id":1112783,"node_id":"MDQ6VXNlcjExMTI3ODM=","avatar_url":"https://avatars0.githubusercontent.com/u/1112783?v=4","gravatar_id":"","url":"https://api.github.com/users/pweerd","html_url":"https://github.com/pweerd","followers_url":"https://api.github.com/users/pweerd/followers","following_url":"https://api.github.com/users/pweerd/following{/other_user}","gists_url":"https://api.github.com/users/pweerd/gists{/gist_id}","starred_url":"https://api.github.com/users/pweerd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pweerd/subscriptions","organizations_url":"https://api.github.com/users/pweerd/orgs","repos_url":"https://api.github.com/users/pweerd/repos","events_url":"https://api.github.com/users/pweerd/events{/privacy}","received_events_url":"https://api.github.com/users/pweerd/received_events","type":"User","site_admin":false},"created_at":"2013-11-06T13:55:27Z","updated_at":"2013-11-06T13:55:27Z","author_association":"NONE","body":"Hi Simon,Adding makes sense.Currently I'm playing with a way how to handle compound terms.I don't exactly know what I want. The direction is clear, but the exact implementation isn't.Playing with queryBoosts, doing and/or, etc.So for me it makes sense to have a way to plugin my own rewriter...Btw: for me to play, I created a custom query that behaves like a match query, but supports extra rewrites.Creating such a custom query is a pain, because I cannot leverage the ES base implementation.It would be nice if the parser called a protected method like:     protected boolean handleUnkownValue ( XContentParser parser, MatchQuery query) {         return false;     }If this method returns false, the normal QueryParsingException will be raised, otherwise, !\n parsing will go on.In this way, I can simply inherit the standard ES query parsers, do some extra stuff, and there I go...What is your opinion about this?Kind regards,Peter----- Original Message -----From: \"Simon Willnauer\" notifications@github.comTo: \"elasticsearch/elasticsearch\" elasticsearch@noreply.github.comSent: Wednesday, November 06 2013 02:10:45 PMSubject: Re: [elasticsearch] Custom rewrite methods (#4105)Would it make sense to add this rewrite method rather than opening up the plugin mechanism for this. I think it's generally useful. ie others can benefit from it as well?\n\n???Reply to this email directly or view it on GitHub.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/32522219","html_url":"https://github.com/elastic/elasticsearch/issues/4105#issuecomment-32522219","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4105","id":32522219,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNTIyMjE5","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2014-01-16T19:47:21Z","updated_at":"2014-01-16T19:47:21Z","author_association":"MEMBER","body":"Hey Peter,\n\nI started to look into this and I want to make sure we implement what you need. You refer to rewrite methods but those only get applied if you set fuzziness. On the other hand you mention dealing with compound words, which are typically implemented using a token filter and adding tokens with 0 position increment. \n\nI want to make sure we implement something that would help in your use case - can you please clarify?\n\nCheers,\nBoaz\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/32740665","html_url":"https://github.com/elastic/elasticsearch/issues/4105#issuecomment-32740665","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4105","id":32740665,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzQwNjY1","user":{"login":"pweerd","id":1112783,"node_id":"MDQ6VXNlcjExMTI3ODM=","avatar_url":"https://avatars0.githubusercontent.com/u/1112783?v=4","gravatar_id":"","url":"https://api.github.com/users/pweerd","html_url":"https://github.com/pweerd","followers_url":"https://api.github.com/users/pweerd/followers","following_url":"https://api.github.com/users/pweerd/following{/other_user}","gists_url":"https://api.github.com/users/pweerd/gists{/gist_id}","starred_url":"https://api.github.com/users/pweerd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pweerd/subscriptions","organizations_url":"https://api.github.com/users/pweerd/orgs","repos_url":"https://api.github.com/users/pweerd/repos","events_url":"https://api.github.com/users/pweerd/events{/privacy}","received_events_url":"https://api.github.com/users/pweerd/received_events","type":"User","site_admin":false},"created_at":"2014-01-20T08:10:46Z","updated_at":"2014-01-20T08:10:46Z","author_association":"NONE","body":"Ha Boaz,\n\nThanks for picking this up.\n\nIndeed, I noticed that rewriting is not done on normal behavior.\n\nMy usecase is that I want do do special things with for instance bed&breakfast or B&B.\n\nI created my own query (derived from multi_match) for now and \n\n1)      split the input text by spaces to separate individual terms\n\n2)      for each term, split the term by using the defined filter. Say into <A> and <B>.\n\n3)      Now, search for:\n\na.       each term (1.0)\n\nb.      AB (0.95)\n\nc.       A AND B (0.8)  (weights adjustable)\n\nBy the way, I also changed the way multi_match behaves:\n\nMultimatch favores the individual terms to be in the same field, but in most situations it doesn’t matter in what field the hit is.\n\nSo I search for each terms in all fields (combining them with a dismax) and combine the term-results with an OR or an AND.\n\nThe scores are highly different, and it behaves more like _my_ intuition.\n\nIs this clear to you? And does it make sense?\n\nThanks,\n\nPeter \n\nVan: Boaz Leskes [mailto:notifications@github.com] \nVerzonden: donderdag 16 januari 2014 20:48\nAan: elasticsearch/elasticsearch\nCC: pweerd\nOnderwerp: Re: [elasticsearch] Custom rewrite methods (#4105)\n\nHey Peter,\n\nI started to look into this and I want to make sure we implement what you need. You refer to rewrite methods but those only get applied if you set fuzziness. On the other hand you mention dealing with compound words, which are typically implemented using a token filter and adding tokens with 0 position increment. \n\nI want to make sure we implement something that would help in your use case - can you please clarify?\n\nCheers,\nBoaz\n\n—\nReply to this email directly or view it on GitHub https://github.com/elasticsearch/elasticsearch/issues/4105#issuecomment-32522219 .Afbeelding verwijderd door afzender.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/33702839","html_url":"https://github.com/elastic/elasticsearch/issues/4105#issuecomment-33702839","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4105","id":33702839,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzAyODM5","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2014-01-30T16:13:22Z","updated_at":"2014-01-30T16:13:22Z","author_association":"MEMBER","body":"Hi Peter,\n\nI'm not sure I follow, but this is becoming a discussion about how to best approach a problem. Can you move it to the google group (I will respond there)? if we need concrete features developed we can open tickets from them here.\n\nThanks,\nBoaz\n","performed_via_github_app":null}]