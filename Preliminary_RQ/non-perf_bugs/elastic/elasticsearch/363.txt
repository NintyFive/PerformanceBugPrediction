{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/363","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/363/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/363/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/363/events","html_url":"https://github.com/elastic/elasticsearch/issues/363","id":309370,"node_id":"MDU6SXNzdWUzMDkzNzA=","number":363,"title":"Geo search across anti-meridian doesn't work","user":{"login":"andreiz","id":40809,"node_id":"MDQ6VXNlcjQwODA5","avatar_url":"https://avatars0.githubusercontent.com/u/40809?v=4","gravatar_id":"","url":"https://api.github.com/users/andreiz","html_url":"https://github.com/andreiz","followers_url":"https://api.github.com/users/andreiz/followers","following_url":"https://api.github.com/users/andreiz/following{/other_user}","gists_url":"https://api.github.com/users/andreiz/gists{/gist_id}","starred_url":"https://api.github.com/users/andreiz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreiz/subscriptions","organizations_url":"https://api.github.com/users/andreiz/orgs","repos_url":"https://api.github.com/users/andreiz/repos","events_url":"https://api.github.com/users/andreiz/events{/privacy}","received_events_url":"https://api.github.com/users/andreiz/received_events","type":"User","site_admin":false},"labels":[{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":45098,"node_id":"MDU6TGFiZWw0NTA5OA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.11.0","name":"v0.11.0","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2010-09-09T16:34:22Z","updated_at":"2010-11-09T15:11:11Z","closed_at":"2010-09-10T20:04:18Z","author_association":"NONE","active_lock_reason":null,"body":"It seems that ES does not like bounding boxes that extend across the \nantimeridian (180Â° meridian). If I specify a box with top left corner \nto the left of the meridian, and bottom right on the right, it treats \nit as if the box wrapped around the wrong (long) way around the Earth.\n\n```\ncurl -XPUT 'http://localhost:9200/bug/' -d'{ index: { number_of_shards: 1, number_of_replicas: 0 } }'\ncurl -XPUT 'http://localhost:9200/bug/test/_mapping' -d '{\n  \"test\" : {\n      \"properties\" : {\n            \"user\" : {\"type\" : \"string\", \"index\" : \"not_analyzed\"},\n            \"title\" : {\"type\" : \"string\", \"boost\" : 2.0},\n            \"notes\" : {\"type\" : \"string\"},\n            \"tags\" : {\"type\" : \"string\", \"index_name\" : \"tag\"},\n            \"created\" : {\"type\" : \"date\", \"format\" : \"YYYY-MM-DD HH:mm:ss\"},\n            \"geo\" : {\"type\" : \"geo_point\"},\n            \"privacy\" : {\"type\" : \"integer\"}\n        }\n    }\n}'\n\ncurl -XPUT \"http://localhost:9200/bug/test/1\" -d'{\"tags\": [\"geotagged\", \"w\", \"incendio\", \"puglia\", \"vacanze\", \"peschici\", \"estate2007\", \"leconseguenzedellincendio\"], \"notes\": \"\", \"created\": \"2007-08-22 02:52:15\", \"privacy\": 1000, \"user\": \"liberodicrederci\", \"title\": \"incendio peschici\", \"geo\": {\"lat\": 21.5, \"lon\": -158.2}}'\ncurl -XPUT \"http://localhost:9200/bug/test/2\" -d'{\"tags\": [\"geotagged\", \"w\", \"incendio\", \"puglia\", \"vacanze\", \"peschici\", \"estate2007\", \"leconseguenzedellincendio\"], \"notes\": \"\", \"created\": \"2007-08-22 02:52:15\", \"privacy\": 1000, \"user\": \"liberodicrederci\", \"title\": \"incendio peschici\", \"geo\": {\"lat\": 29.5, \"lon\": -108.6}}'\n\ncurl -XPOST \"http://localhost:9200/bug/test/_search?pretty=true\" -d'\n{\n    \"query\": {\n        \"constant_score\": {\n            \"filter\": {\n                \"geo_bounding_box\": {\n                    \"geo\": {\n                        \"top_left\" : {\n                            \"lat\" : 32.5,\n                            \"lon\" : 169.1\n                        },\n                        \"bottom_right\" : {\n                            \"lat\" : 5.8,\n                            \"lon\" : -140.6\n                        }\n                    }\n                }\n            }\n        }\n    }\n}'\n```\n","closed_by":null,"performed_via_github_app":null}