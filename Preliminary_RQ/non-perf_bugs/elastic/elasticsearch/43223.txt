{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/43223","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43223/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43223/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43223/events","html_url":"https://github.com/elastic/elasticsearch/issues/43223","id":456117588,"node_id":"MDU6SXNzdWU0NTYxMTc1ODg=","number":43223,"title":"DiscoveryNodeRoleIT.testExplicitlyHasAdditionalRole fails on 7.x","user":{"login":"pgomulka","id":11137008,"node_id":"MDQ6VXNlcjExMTM3MDA4","avatar_url":"https://avatars0.githubusercontent.com/u/11137008?v=4","gravatar_id":"","url":"https://api.github.com/users/pgomulka","html_url":"https://github.com/pgomulka","followers_url":"https://api.github.com/users/pgomulka/followers","following_url":"https://api.github.com/users/pgomulka/following{/other_user}","gists_url":"https://api.github.com/users/pgomulka/gists{/gist_id}","starred_url":"https://api.github.com/users/pgomulka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgomulka/subscriptions","organizations_url":"https://api.github.com/users/pgomulka/orgs","repos_url":"https://api.github.com/users/pgomulka/repos","events_url":"https://api.github.com/users/pgomulka/events{/privacy}","received_events_url":"https://api.github.com/users/pgomulka/received_events","type":"User","site_admin":false},"labels":[{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-06-14T08:11:34Z","updated_at":"2019-06-14T13:33:47Z","closed_at":"2019-06-14T13:33:47Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"The test is failing on 7.x with following stacktrace:\r\n```\r\njava.lang.AssertionError:\r\n--\r\nExpected: a collection containing <DiscoveryNodeRole{roleName='additional', roleNameAbbreviation='a'}>\r\nbut: mismatches were: [was <DiscoveryNodeRole{roleName='ingest', roleNameAbbreviation='i'}>, was <DiscoveryNodeRole{roleName='data', roleNameAbbreviation='d'}>, was <DiscoveryNodeRole{roleName='additional', roleNameAbbreviation='a'}>, was <DiscoveryNodeRole{roleName='master', roleNameAbbreviation='m'}>]\r\nat __randomizedtesting.SeedInfo.seed([DE1C54CA25478013:CEC687B84041F96F]:0)\r\nat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)\r\nat org.junit.Assert.assertThat(Assert.java:956)\r\nat org.junit.Assert.assertThat(Assert.java:923)\r\nat org.elasticsearch.cluster.node.DiscoveryNodeRoleIT.runTestNodeHasAdditionalRole(DiscoveryNodeRoleIT.java:97)\r\nat org.elasticsearch.cluster.node.DiscoveryNodeRoleIT.testExplicitlyHasAdditionalRole(DiscoveryNodeRoleIT.java:80)\r\n```\r\n\r\nhttps://build-stats.elastic.co/app/kibana#/discover?_g=(refreshInterval:(pause:!t,value:0),time:(from:'2019-06-11T22:00:00.000Z',mode:absolute,to:'2019-06-15T21:59:59.999Z'))&_a=(columns:!(_source),index:b646ed00-7efc-11e8-bf69-63c8ef516157,interval:auto,query:(language:lucene,query:DiscoveryNodeRoleIT),sort:!(process.time-start,desc))\r\n\r\none of the failed build:\r\nhttps://scans.gradle.com/s/erubw2qjmdbak/console-log#L1284\r\n\r\nReproduce line - reproduces locally\r\n```\r\n./gradlew :server:integTest --tests \"org.elasticsearch.cluster.node.DiscoveryNodeRoleIT.testExplicitlyHasAdditionalRole\" -Dtests.seed=DE1C54CA25478013 -Dtests.security.manager=true -Dtests.locale=ar-IQ -Dtests.timezone=Australia/NSW -Dcompiler.java=12 -Druntime.java=8\r\n```","closed_by":{"login":"pgomulka","id":11137008,"node_id":"MDQ6VXNlcjExMTM3MDA4","avatar_url":"https://avatars0.githubusercontent.com/u/11137008?v=4","gravatar_id":"","url":"https://api.github.com/users/pgomulka","html_url":"https://github.com/pgomulka","followers_url":"https://api.github.com/users/pgomulka/followers","following_url":"https://api.github.com/users/pgomulka/following{/other_user}","gists_url":"https://api.github.com/users/pgomulka/gists{/gist_id}","starred_url":"https://api.github.com/users/pgomulka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgomulka/subscriptions","organizations_url":"https://api.github.com/users/pgomulka/orgs","repos_url":"https://api.github.com/users/pgomulka/repos","events_url":"https://api.github.com/users/pgomulka/events{/privacy}","received_events_url":"https://api.github.com/users/pgomulka/received_events","type":"User","site_admin":false},"performed_via_github_app":null}