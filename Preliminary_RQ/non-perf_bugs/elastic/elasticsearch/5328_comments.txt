[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/36765715","html_url":"https://github.com/elastic/elasticsearch/issues/5328#issuecomment-36765715","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5328","id":36765715,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NzY1NzE1","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2014-03-05T17:00:46Z","updated_at":"2014-03-05T17:00:46Z","author_association":"MEMBER","body":"This problem occurs because Elasticsearch [first tries](https://github.com/elasticsearch/elasticsearch/blob/master/src/main/java/org/elasticsearch/cluster/metadata/MappingMetaData.java#L165) to parse timestamp as long (number of milliseconds since epoch). So, your timestamp is getting interpreted as `Thu, 27 Oct 2033 12:48:30 GMT`, while your ranges are getting interpreted correctly as you expect. We could flip this logic in parsing timestamp and try parsing using format first, but then it will break interface for all users who are using milliseconds (with default format just a number is interpreted as year). So, I am not really sure what would be a good solution here, but two possible workarounds here are 1) to use a format that doesn't look like long or 2) switch to milliseconds on the timestamp field. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/36766399","html_url":"https://github.com/elastic/elasticsearch/issues/5328#issuecomment-36766399","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5328","id":36766399,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NzY2Mzk5","user":{"login":"karol-gwaj","id":1188157,"node_id":"MDQ6VXNlcjExODgxNTc=","avatar_url":"https://avatars3.githubusercontent.com/u/1188157?v=4","gravatar_id":"","url":"https://api.github.com/users/karol-gwaj","html_url":"https://github.com/karol-gwaj","followers_url":"https://api.github.com/users/karol-gwaj/followers","following_url":"https://api.github.com/users/karol-gwaj/following{/other_user}","gists_url":"https://api.github.com/users/karol-gwaj/gists{/gist_id}","starred_url":"https://api.github.com/users/karol-gwaj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karol-gwaj/subscriptions","organizations_url":"https://api.github.com/users/karol-gwaj/orgs","repos_url":"https://api.github.com/users/karol-gwaj/repos","events_url":"https://api.github.com/users/karol-gwaj/events{/privacy}","received_events_url":"https://api.github.com/users/karol-gwaj/received_events","type":"User","site_admin":false},"created_at":"2014-03-05T17:06:24Z","updated_at":"2014-03-05T17:06:24Z","author_association":"NONE","body":"sadly im stuck with timestamp in this format (as it comes from external source)\nwill be nice to  have some configuration switch that will allow to change default parsing behavior for timestamp \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/37725612","html_url":"https://github.com/elastic/elasticsearch/issues/5328#issuecomment-37725612","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5328","id":37725612,"node_id":"MDEyOklzc3VlQ29tbWVudDM3NzI1NjEy","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-03-15T13:24:41Z","updated_at":"2014-03-15T13:24:41Z","author_association":"CONTRIBUTOR","body":"Another place where we don't do the right thing with `\"1234\"` vs `1234`:\n\n```\nDELETE /t\n\nPUT /t\n{\n  \"mappings\": {\n    \"t\": {\n      \"properties\": {\n        \"date\": {\n          \"type\": \"date\",\n          \"format\": \"YYYYMMddHHmmss\"\n        }\n      }\n    }\n  }\n}\n\nPUT /t/t/1\n{\n  \"date\": \"20140101000000\"\n}\n\nPUT /t/t/2\n{\n  \"date\": 20140101000000\n}\n\nGET /t/_search\n{\n  \"script_fields\": {\n    \"date\": {\n      \"script\": \"doc['date'].value\"\n    }\n  }\n}\n\nGET /t/_search\n{\n  \"query\": {\n    \"match\": {\n      \"date\": \"20140101000000\"\n    }\n  }\n}\n\nGET /t/_search\n{\n  \"query\": {\n    \"match\": {\n      \"date\": 20140101000000\n    }\n  }\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/91617825","html_url":"https://github.com/elastic/elasticsearch/issues/5328#issuecomment-91617825","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5328","id":91617825,"node_id":"MDEyOklzc3VlQ29tbWVudDkxNjE3ODI1","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-04-10T16:49:01Z","updated_at":"2015-04-10T16:49:01Z","author_association":"MEMBER","body":"As Igor said before, part of the problem is date fields have this dual behavior, where it can accept a formatted date, but also an epoch timestamp. However, in this case, the value being searched is passed as a json number. The only way we could interpret that with the original supplied format would be to write the number as a string and then try to parse. I don't think we should do this.\n\nWe could however make a couple improvements:\n- Add a flag to disable interpreting as an epoch time\n- Throw an error if a number is passed in when this feature is disabled \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/92299179","html_url":"https://github.com/elastic/elasticsearch/issues/5328#issuecomment-92299179","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5328","id":92299179,"node_id":"MDEyOklzc3VlQ29tbWVudDkyMjk5MTc5","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-04-13T10:07:33Z","updated_at":"2015-04-13T10:07:33Z","author_association":"CONTRIBUTOR","body":"Another possibility would be to add `epoch` as a format, then users can control the order in which the epoch format is tried, eg:\n\n```\n \"format\": \"epoch|YYYY-mm-dd\"\n```\n\nvs\n\n```\n \"format\": \"YYYY-mm-dd|epoch\"\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/95472112","html_url":"https://github.com/elastic/elasticsearch/issues/5328#issuecomment-95472112","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5328","id":95472112,"node_id":"MDEyOklzc3VlQ29tbWVudDk1NDcyMTEy","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2015-04-23T07:17:42Z","updated_at":"2015-04-23T07:17:42Z","author_association":"MEMBER","body":"@clintongormley I really like that idea! I think we should do that, and change the docs to describe the default format to match the current behavior? Should we have a way to specify whether it is seconds or milliseconds epoch? We currently use the first example you gave, with milliseconds epoch.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/96384213","html_url":"https://github.com/elastic/elasticsearch/issues/5328#issuecomment-96384213","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5328","id":96384213,"node_id":"MDEyOklzc3VlQ29tbWVudDk2Mzg0MjEz","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-04-26T13:55:14Z","updated_at":"2015-04-26T13:55:14Z","author_association":"CONTRIBUTOR","body":"@rjernst yes, i think supporting epoch seconds would be an excellent idea, eg Perl uses floating point seconds.  So perhaps `epoch_seconds` and `epoch_ms`?\n","performed_via_github_app":null}]