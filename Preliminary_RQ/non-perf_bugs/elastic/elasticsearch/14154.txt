{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/14154","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14154/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14154/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14154/events","html_url":"https://github.com/elastic/elasticsearch/issues/14154","id":111803247,"node_id":"MDU6SXNzdWUxMTE4MDMyNDc=","number":14154,"title":"Elasticsearch 2.0.0-rc1 displaying strange data","user":{"login":"robertsmarty","id":4920375,"node_id":"MDQ6VXNlcjQ5MjAzNzU=","avatar_url":"https://avatars0.githubusercontent.com/u/4920375?v=4","gravatar_id":"","url":"https://api.github.com/users/robertsmarty","html_url":"https://github.com/robertsmarty","followers_url":"https://api.github.com/users/robertsmarty/followers","following_url":"https://api.github.com/users/robertsmarty/following{/other_user}","gists_url":"https://api.github.com/users/robertsmarty/gists{/gist_id}","starred_url":"https://api.github.com/users/robertsmarty/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robertsmarty/subscriptions","organizations_url":"https://api.github.com/users/robertsmarty/orgs","repos_url":"https://api.github.com/users/robertsmarty/repos","events_url":"https://api.github.com/users/robertsmarty/events{/privacy}","received_events_url":"https://api.github.com/users/robertsmarty/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2015-10-16T10:21:51Z","updated_at":"2015-10-16T10:56:22Z","closed_at":"2015-10-16T10:56:22Z","author_association":"NONE","active_lock_reason":null,"body":"I have logstash 2.0.0-beta2 sending AWS detailed billing data into elasticsearch 2.0.0-rc1 so I can test my setup. I've setup a template so all fields are doc_values.\n\nLogstash rubydebug output looks great. Data is as expected. Elasticsearch dynamic mappings look great. Data types look great. Fields are not analysed. All good.\n\nThen I look at the data. Weird, here's a small sample. Hopefully it'll make sense to someone...\n\n```\n        {\n            \"_index\": \"aws_billing-2015.08.31\",\n            \"_type\": \"detailed_with_resources_and_tags\",\n            \"_id\": \"\\\"60012830\\\",\\\"588738232867\\\",\",\n            \"_score\": 1,\n            \"_source\": {\n                \"@version\": \"1\",\n                \"@timestamp\": \"2015-08-31T23:00:00.000Z\",\n                \"host\": \"PBNEELK4001\",\n                \"type\": \"detailed_with_resources_and_tags\",\n                \"InvoiceID\": \"\\\"6001283\",\n                \"PayerAccountId\": \"\\\"60012830\\\",\\\"\",\n                \"LinkedAccountId\": \"\\\"60012830\\\",\\\"\",\n                \"RecordType\": \"\\\"6001283\",\n                \"RecordId\": \"\\\"60012830\\\",\\\"588738232867\\\",\",\n                \"ProductName\": \"\\\"60012830\\\",\\\"588738232867\\\",\",\n                \"RateId\": \"\\\"600128\",\n                \"SubscriptionId\": \"\\\"60012830\",\n                \"PricingPlanId\": \"\\\"60012\",\n                \"UsageType\": \"\\\"60012830\\\",\\\"58873823286\",\n                \"Operation\": \"\\\"600128\",\n                \"AvailabilityZone\": \"\",\n                \"ReservedInstance\": \"N\",\n                \"ItemDescription\": \"\\\"60012830\\\",\\\"588738232867\\\",\\\"128881676082\",\n                \"UsageQuantity\": 0.00138889,\n                \"BlendedRate\": 1,\n                \"BlendedCost\": 0.00138889,\n                \"UnBlendedRate\": 1,\n                \"UnBlendedCost\": 0.00138889,\n                \"ResourceId\": null,\n                \"aws_cloudformation_logical_id\": null,\n                \"aws_cloudformation_stack_id\": null,\n                \"aws_cloudformation_stack_name\": null,\n                \"user_Env\": null,\n                \"user_Environment\": null,\n                \"user_Name\": null,\n                \"user_Project\": null,\n                \"user_Purpose\": null,\n                \"user_Role\": null,\n                \"user_User\": null,\n                \"user_Workspace\": \"\"\n            }\n```\n\nThis is what rubydebug looks like (it's not the same record though)...\n\n{\n                         \"@version\" => \"1\",\n                       \"@timestamp\" => \"2015-09-07T08:00:00.000Z\",\n                             \"host\" => \"HOST4001\",\n                             \"type\" => \"detailed_with_resources_and_tags\",\n                        \"InvoiceID\" => \"xxx830\",\n                   \"PayerAccountId\" => \"xxx867\",\n                  \"LinkedAccountId\" => \"xxx944\",\n                       \"RecordType\" => \"LineItem\",\n                         \"RecordId\" => \"40214935098354950258880757\",\n                      \"ProductName\" => \"Amazon Simple Storage Service\",\n                           \"RateId\" => \"3510841\",\n                   \"SubscriptionId\" => \"112242859\",\n                    \"PricingPlanId\" => \"505699\",\n                        \"UsageType\" => \"APS2-DataTransfer-Out-Bytes\",\n                        \"Operation\" => \"ReadBucketPolicy\",\n                 \"AvailabilityZone\" => \"\",\n                 \"ReservedInstance\" => \"N\",\n                  \"ItemDescription\" => \"$0.140 per GB - up to 10 TB / month data transfer out\",\n                    \"UsageQuantity\" => 1.16e-06,\n                      \"BlendedRate\" => 0.13724872926531,\n                      \"BlendedCost\" => 1.6e-07,\n                    \"UnBlendedRate\" => 0.14,\n                    \"UnBlendedCost\" => 1.6e-07,\n                       \"ResourceId\" => \"w-001006-emr-admin\",\n    \"aws_cloudformation_logical_id\" => nil,\n      \"aws_cloudformation_stack_id\" => nil,\n    \"aws_cloudformation_stack_name\" => nil,\n                         \"user_Env\" => nil,\n                 \"user_Environment\" => nil,\n                        \"user_Name\" => nil,\n                     \"user_Project\" => nil,\n                     \"user_Purpose\" => nil,\n                        \"user_Role\" => nil,\n                        \"user_User\" => nil,\n                   \"user_Workspace\" => \"\"\n}\n\nThis worked perfectly on logstash 1.5 and elasticsearch < 2.x\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}