{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/15581","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15581/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15581/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15581/events","html_url":"https://github.com/elastic/elasticsearch/issues/15581","id":123345201,"node_id":"MDU6SXNzdWUxMjMzNDUyMDE=","number":15581,"title":"Could not load hunspell dictionary through a symlink","user":{"login":"thlawiczka","id":2869243,"node_id":"MDQ6VXNlcjI4NjkyNDM=","avatar_url":"https://avatars0.githubusercontent.com/u/2869243?v=4","gravatar_id":"","url":"https://api.github.com/users/thlawiczka","html_url":"https://github.com/thlawiczka","followers_url":"https://api.github.com/users/thlawiczka/followers","following_url":"https://api.github.com/users/thlawiczka/following{/other_user}","gists_url":"https://api.github.com/users/thlawiczka/gists{/gist_id}","starred_url":"https://api.github.com/users/thlawiczka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thlawiczka/subscriptions","organizations_url":"https://api.github.com/users/thlawiczka/orgs","repos_url":"https://api.github.com/users/thlawiczka/repos","events_url":"https://api.github.com/users/thlawiczka/events{/privacy}","received_events_url":"https://api.github.com/users/thlawiczka/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2015-12-21T19:46:13Z","updated_at":"2016-01-10T19:52:38Z","closed_at":"2016-01-10T19:52:38Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\n\nusing ES 2.1.0 I can't use a system hunspell dictionary, as follow:\n\n```\nmkdir -p /etc/elasticsearch/hunspell/pl_PL\ncd /etc/elasticsearch/hunspell/pl_PL\nln -s /usr/share/hunspell/pl_PL.* .\nls -l /etc/elasticsearch/hunspell/pl_PL\nlrwxrwxrwx 1 root root 29 Dec 21 15:48 pl_PL.aff -> /usr/share/hunspell/pl_PL.aff\nlrwxrwxrwx 1 root root 29 Dec 21 15:48 pl_PL.dic -> /usr/share/hunspell/pl_PL.dic\n```\n\n```\n[2015-12-21 15:54:27,417][ERROR][indices.analysis         ] [Hammer and Anvil] Could not load hunspell dictionary [pl_PL]\njava.security.AccessControlException: access denied (\"java.io.FilePermission\" \"/etc/elasticsearch/hunspell/pl_PL/pl_PL.dic\" \"read\")\n        at java.security.AccessControlContext.checkPermission(Unknown Source)\n        at java.security.AccessController.checkPermission(Unknown Source)\n        at java.lang.SecurityManager.checkPermission(Unknown Source)\n        at java.lang.SecurityManager.checkRead(Unknown Source)\n        at sun.nio.fs.UnixChannelFactory.open(Unknown Source)\n        at sun.nio.fs.UnixChannelFactory.newFileChannel(Unknown Source)\n        at sun.nio.fs.UnixChannelFactory.newFileChannel(Unknown Source)\n        at sun.nio.fs.UnixFileSystemProvider.newByteChannel(Unknown Source)\n        at java.nio.file.Files.newByteChannel(Unknown Source)\n        at java.nio.file.Files.newByteChannel(Unknown Source)\n        at java.nio.file.spi.FileSystemProvider.newInputStream(Unknown Source)\n        at java.nio.file.Files.newInputStream(Unknown Source)\n        at org.elasticsearch.indices.analysis.HunspellService.loadDictionary(HunspellService.java:185)\n        at org.elasticsearch.indices.analysis.HunspellService.access$000(HunspellService.java:70)\n        at org.elasticsearch.indices.analysis.HunspellService$1.load(HunspellService.java:96)\n        at org.elasticsearch.indices.analysis.HunspellService$1.load(HunspellService.java:91)\n        at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3527)\n        at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2319)\n        at com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2282)\n        at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2197)\n        at com.google.common.cache.LocalCache.get(LocalCache.java:3937)\n        at com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:3941)\n        at com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:4824)\n        at com.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:4830)\n        at org.elasticsearch.indices.analysis.HunspellService.scanAndLoadDictionaries(HunspellService.java:134)\n        at org.elasticsearch.indices.analysis.HunspellService.<init>(HunspellService.java:102)\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\n        at java.lang.reflect.Constructor.newInstance(Unknown Source)\n        at org.elasticsearch.common.inject.DefaultConstructionProxyFactory$1.newInstance(DefaultConstructionProxyFactory.java:56)\n        at org.elasticsearch.common.inject.ConstructorInjector.construct(ConstructorInjector.java:86)\n        at org.elasticsearch.common.inject.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:104)\n        at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:47)\n        at org.elasticsearch.common.inject.InjectorImpl.callInContext(InjectorImpl.java:887)\n        at org.elasticsearch.common.inject.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:43)\n        at org.elasticsearch.common.inject.Scopes$1$1.get(Scopes.java:59)\n        at org.elasticsearch.common.inject.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:46)\n        at org.elasticsearch.common.inject.InjectorBuilder$1.call(InjectorBuilder.java:201)\n        at org.elasticsearch.common.inject.InjectorBuilder$1.call(InjectorBuilder.java:193)\n        at org.elasticsearch.common.inject.InjectorImpl.callInContext(InjectorImpl.java:880)\n        at org.elasticsearch.common.inject.InjectorBuilder.loadEagerSingletons(InjectorBuilder.java:193)\n        at org.elasticsearch.common.inject.InjectorBuilder.injectDynamically(InjectorBuilder.java:175)\n        at org.elasticsearch.common.inject.InjectorBuilder.build(InjectorBuilder.java:110)\n        at org.elasticsearch.common.inject.Guice.createInjector(Guice.java:93)\n        at org.elasticsearch.common.inject.Guice.createInjector(Guice.java:70)\n        at org.elasticsearch.common.inject.ModulesBuilder.createInjector(ModulesBuilder.java:46)\n        at org.elasticsearch.node.Node.<init>(Node.java:202)\n        at org.elasticsearch.node.Node.<init>(Node.java:129)\n        at org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:145)\n        at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:178)\n        at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:285)\n        at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:35)\n[2015-12-21 15:54:27,420][ERROR][indices.analysis         ] [Hammer and Anvil] exception while loading dictionary pl_PL\n```\n\nHowever, coping files or using hard-links (`ln` without -s) works fine. Also version ES 1.7 works with symlinks.\n\nES user has proper perms for those files:\n\n```\nsu - elasticsearch -c \"wc -l /usr/share/hunspell/pl_PL.*\"\n   7232 /usr/share/hunspell/pl_PL.aff\n 297671 /usr/share/hunspell/pl_PL.dic\n 304903 total\n```\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}