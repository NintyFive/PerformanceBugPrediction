{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/44148","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44148/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44148/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/44148/events","html_url":"https://github.com/elastic/elasticsearch/issues/44148","id":466093314,"node_id":"MDU6SXNzdWU0NjYwOTMzMTQ=","number":44148,"title":"Explicitly annotate public API parameters as Nonnull by default to allow Kotlin plugins to check usage","user":{"login":"vinoov","id":95576,"node_id":"MDQ6VXNlcjk1NTc2","avatar_url":"https://avatars2.githubusercontent.com/u/95576?v=4","gravatar_id":"","url":"https://api.github.com/users/vinoov","html_url":"https://github.com/vinoov","followers_url":"https://api.github.com/users/vinoov/followers","following_url":"https://api.github.com/users/vinoov/following{/other_user}","gists_url":"https://api.github.com/users/vinoov/gists{/gist_id}","starred_url":"https://api.github.com/users/vinoov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinoov/subscriptions","organizations_url":"https://api.github.com/users/vinoov/orgs","repos_url":"https://api.github.com/users/vinoov/repos","events_url":"https://api.github.com/users/vinoov/events{/privacy}","received_events_url":"https://api.github.com/users/vinoov/received_events","type":"User","site_admin":false},"labels":[{"id":146832994,"node_id":"MDU6TGFiZWwxNDY4MzI5OTQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Plugins","name":":Core/Infra/Plugins","color":"0e8a16","default":false,"description":"Plugin API and infrastructure"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-07-10T04:31:17Z","updated_at":"2019-11-27T21:46:32Z","closed_at":"2019-11-27T21:46:32Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"_Opening this issue to discuss making default non-null arguments explicit as suggested by @mark-vieira in https://github.com/elastic/elasticsearch/pull/43912#issuecomment-509281993_\r\n\r\nCurrently ES APIs explicitly annotate Nullable method parameters and all other parameters are implicitly understood to be non-null (at least as far as I can tell).  If this implicit default is made explicit for the plugin APIs then plugins written in Kotlin could benefit from better null checking as described here: https://kotlinlang.org/docs/reference/java-interop.html#jsr-305-support\r\n\r\nOne way to implement this is by defining a new annotation in the `org.elasticsearch.common` package like so: \r\n\r\n```\r\n@Nonnull\r\n@TypeQualifierDefault({ElementType.PARAMETER})\r\n@Retention(RetentionPolicy.RUNTIME)\r\npublic @interface NonnullParameters {\r\n}\r\n```\r\n\r\nand then applying it to classes/packages as needed.  ","closed_by":{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false},"performed_via_github_app":null}