[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/49403239","html_url":"https://github.com/elastic/elasticsearch/issues/6911#issuecomment-49403239","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6911","id":49403239,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NDAzMjM5","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2014-07-18T07:32:57Z","updated_at":"2014-07-18T07:32:57Z","author_association":"MEMBER","body":"I think you are doing something wrong. I can not reproduce it.\nThis works fine for me:\n\n```\nDELETE /test\n\nPUT /test\n{\n  \"mappings\": {\n    \"test\": {\n      \"properties\": {\n        \"foo\": {\n          \"type\": \"string\"\n        },\n        \"newfield\": {\n          \"type\": \"string\"\n        }\n\n      }\n    }\n  }\n}\nPUT /test/test/1\n{\n    \"foo\": \"bar\"\n}\nPUT /test/test/2\n{\n    \"foo\": \"bar\"\n}\n\nGET /test/test/_search\n{\n    \"query\": {\n        \"constant_score\": {\n            \"filter\": {\n                \"exists\": {\n                    \"field\": \"newfield\"\n                }\n            }\n        }\n    },\n    \"sort\": [\n        {\n            \"newfield\": {\n                \"order\": \"asc\"\n            }\n        }\n    ]\n}\n```\n\nClosing. Feel free to reopen with more details but my first guess is that you are querying on a type which does not know that field at all.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/49409510","html_url":"https://github.com/elastic/elasticsearch/issues/6911#issuecomment-49409510","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6911","id":49409510,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NDA5NTEw","user":{"login":"TheoKouzelis","id":4980126,"node_id":"MDQ6VXNlcjQ5ODAxMjY=","avatar_url":"https://avatars0.githubusercontent.com/u/4980126?v=4","gravatar_id":"","url":"https://api.github.com/users/TheoKouzelis","html_url":"https://github.com/TheoKouzelis","followers_url":"https://api.github.com/users/TheoKouzelis/followers","following_url":"https://api.github.com/users/TheoKouzelis/following{/other_user}","gists_url":"https://api.github.com/users/TheoKouzelis/gists{/gist_id}","starred_url":"https://api.github.com/users/TheoKouzelis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TheoKouzelis/subscriptions","organizations_url":"https://api.github.com/users/TheoKouzelis/orgs","repos_url":"https://api.github.com/users/TheoKouzelis/repos","events_url":"https://api.github.com/users/TheoKouzelis/events{/privacy}","received_events_url":"https://api.github.com/users/TheoKouzelis/received_events","type":"User","site_admin":false},"created_at":"2014-07-18T08:57:33Z","updated_at":"2014-07-18T08:57:33Z","author_association":"NONE","body":"Thanks for your reply, sorry I should have provided a mapping with my ticket (doh). \n\nThe problem arises when the field isn't included in the mapping. If you run my original query against your test mapping you should get the error.\n\nBut after looking at the docs again I found that adding <code>\"ignore_unmapped\" : true</code> to the sort object solved the problem. \n\nFull query below.\n\n```\n{\n    \"query\": {\n        \"constant_score\": {\n            \"filter\": {\n                \"exists\": {\n                    \"field\": \"some_field_that_doesnt_exist\"\n                }\n            }\n        }\n    },\n    \"sort\": [\n        {\n            \"some_field_that_doesnt_exist\": {\n                \"ignore_unmapped\" : true,\n                \"order\": \"desc\"\n            }\n        }\n    ]\n}\n```\n\nThanks for your help, and apologies if I have wasted anybodyâ€™s time.  \n","performed_via_github_app":null}]