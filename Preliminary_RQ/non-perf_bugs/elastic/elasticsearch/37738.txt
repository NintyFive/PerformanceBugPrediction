{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/37738","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37738/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37738/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37738/events","html_url":"https://github.com/elastic/elasticsearch/issues/37738","id":402022945,"node_id":"MDU6SXNzdWU0MDIwMjI5NDU=","number":37738,"title":"[CCR] Follower info API doesn't return paused status","user":{"login":"jen-huang","id":1965714,"node_id":"MDQ6VXNlcjE5NjU3MTQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1965714?v=4","gravatar_id":"","url":"https://api.github.com/users/jen-huang","html_url":"https://github.com/jen-huang","followers_url":"https://api.github.com/users/jen-huang/followers","following_url":"https://api.github.com/users/jen-huang/following{/other_user}","gists_url":"https://api.github.com/users/jen-huang/gists{/gist_id}","starred_url":"https://api.github.com/users/jen-huang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jen-huang/subscriptions","organizations_url":"https://api.github.com/users/jen-huang/orgs","repos_url":"https://api.github.com/users/jen-huang/repos","events_url":"https://api.github.com/users/jen-huang/events{/privacy}","received_events_url":"https://api.github.com/users/jen-huang/received_events","type":"User","site_admin":false},"labels":[{"id":912824565,"node_id":"MDU6TGFiZWw5MTI4MjQ1NjU=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/CCR","name":":Distributed/CCR","color":"0e8a16","default":false,"description":"Issues around the Cross Cluster State Replication features"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"assignees":[{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2019-01-23T01:03:09Z","updated_at":"2019-01-24T07:50:23Z","closed_at":"2019-01-24T07:50:23Z","author_association":"NONE","active_lock_reason":null,"body":"I have two active follower indices: `copy-of-kibana_sample_data_logs`, `copy-of-kibana_sample_data_flights`.\r\n\r\nThen I send a request to pause the second one:\r\n```\r\nPOST /copy-of-kibana_sample_data_flights/_ccr/pause_follow\r\n```\r\n\r\nFollower stats API does not show the index that was paused (correct behavior):\r\n```\r\nGET /_ccr/stats\r\n\r\n{\r\n  \"auto_follow_stats\" : {\r\n    \"number_of_failed_follow_indices\" : 0,\r\n    \"number_of_failed_remote_cluster_state_requests\" : 0,\r\n    \"number_of_successful_follow_indices\" : 2,\r\n    \"recent_auto_follow_errors\" : [ ],\r\n    \"auto_followed_clusters\" : [\r\n      {\r\n        \"cluster_name\" : \"prod2\",\r\n        \"time_since_last_check_millis\" : 35108,\r\n        \"last_seen_metadata_version\" : 32\r\n      }\r\n    ]\r\n  },\r\n  \"follow_stats\" : {\r\n    \"indices\" : [\r\n      {\r\n        \"index\" : \"copy-of-kibana_sample_data_logs\",\r\n        \"shards\" : [\r\n          {\r\n            \"remote_cluster\" : \"prod2\",\r\n            \"leader_index\" : \"kibana_sample_data_logs\",\r\n            \"follower_index\" : \"copy-of-kibana_sample_data_logs\",\r\n            \"shard_id\" : 0,\r\n            \"leader_global_checkpoint\" : 14004,\r\n            \"leader_max_seq_no\" : 14004,\r\n            \"follower_global_checkpoint\" : 14004,\r\n            \"follower_max_seq_no\" : 14004,\r\n            \"last_requested_seq_no\" : 14004,\r\n            \"outstanding_read_requests\" : 1,\r\n            \"outstanding_write_requests\" : 0,\r\n            \"write_buffer_operation_count\" : 0,\r\n            \"write_buffer_size_in_bytes\" : 0,\r\n            \"follower_mapping_version\" : 2,\r\n            \"follower_settings_version\" : 1,\r\n            \"total_read_time_millis\" : 6209,\r\n            \"total_read_remote_exec_time_millis\" : 6086,\r\n            \"successful_read_requests\" : 29,\r\n            \"failed_read_requests\" : 0,\r\n            \"operations_read\" : 14005,\r\n            \"bytes_read\" : 13606642,\r\n            \"total_write_time_millis\" : 3231,\r\n            \"successful_write_requests\" : 29,\r\n            \"failed_write_requests\" : 0,\r\n            \"operations_written\" : 14005,\r\n            \"read_exceptions\" : [ ],\r\n            \"time_since_last_read_millis\" : 39676\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  }\r\n}\r\n```\r\n\r\nHowever, the follower info API still returns `status: \"active\"` for it:\r\n```\r\nGET /_all/_ccr/info\r\n\r\n{\r\n  \"follower_indices\" : [\r\n    {\r\n      \"follower_index\" : \"copy-of-kibana_sample_data_logs\",\r\n      \"remote_cluster\" : \"prod2\",\r\n      \"leader_index\" : \"kibana_sample_data_logs\",\r\n      \"status\" : \"active\",\r\n      \"parameters\" : {\r\n        \"max_read_request_operation_count\" : 5120,\r\n        \"max_read_request_size\" : \"32mb\",\r\n        \"max_outstanding_read_requests\" : 12,\r\n        \"max_write_request_operation_count\" : 5120,\r\n        \"max_write_request_size\" : \"9223372036854775807b\",\r\n        \"max_outstanding_write_requests\" : 9,\r\n        \"max_write_buffer_count\" : 2147483647,\r\n        \"max_write_buffer_size\" : \"512mb\",\r\n        \"max_retry_delay\" : \"500ms\",\r\n        \"read_poll_timeout\" : \"1m\"\r\n      }\r\n    },\r\n    {\r\n      \"follower_index\" : \"copy-of-kibana_sample_data_flights\",\r\n      \"remote_cluster\" : \"prod2\",\r\n      \"leader_index\" : \"kibana_sample_data_flights\",\r\n      \"status\" : \"active\",\r\n      \"parameters\" : {\r\n        \"max_read_request_operation_count\" : 5120,\r\n        \"max_read_request_size\" : \"32mb\",\r\n        \"max_outstanding_read_requests\" : 12,\r\n        \"max_write_request_operation_count\" : 5120,\r\n        \"max_write_request_size\" : \"9223372036854775807b\",\r\n        \"max_outstanding_write_requests\" : 9,\r\n        \"max_write_buffer_count\" : 2147483647,\r\n        \"max_write_buffer_size\" : \"512mb\",\r\n        \"max_retry_delay\" : \"500ms\",\r\n        \"read_poll_timeout\" : \"1m\"\r\n      }\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\ncc @martijnvg ","closed_by":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"performed_via_github_app":null}