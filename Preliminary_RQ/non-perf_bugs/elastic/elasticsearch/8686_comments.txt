[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64808023","html_url":"https://github.com/elastic/elasticsearch/issues/8686#issuecomment-64808023","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8686","id":64808023,"node_id":"MDEyOklzc3VlQ29tbWVudDY0ODA4MDIz","user":{"login":"synhershko","id":212252,"node_id":"MDQ6VXNlcjIxMjI1Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/212252?v=4","gravatar_id":"","url":"https://api.github.com/users/synhershko","html_url":"https://github.com/synhershko","followers_url":"https://api.github.com/users/synhershko/followers","following_url":"https://api.github.com/users/synhershko/following{/other_user}","gists_url":"https://api.github.com/users/synhershko/gists{/gist_id}","starred_url":"https://api.github.com/users/synhershko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/synhershko/subscriptions","organizations_url":"https://api.github.com/users/synhershko/orgs","repos_url":"https://api.github.com/users/synhershko/repos","events_url":"https://api.github.com/users/synhershko/events{/privacy}","received_events_url":"https://api.github.com/users/synhershko/received_events","type":"User","site_admin":false},"created_at":"2014-11-27T16:10:00Z","updated_at":"2014-11-27T16:10:00Z","author_association":"CONTRIBUTOR","body":"+1 for exposing this in node stats, way better than nagging in the logs\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64808853","html_url":"https://github.com/elastic/elasticsearch/issues/8686#issuecomment-64808853","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8686","id":64808853,"node_id":"MDEyOklzc3VlQ29tbWVudDY0ODA4ODUz","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2014-11-27T16:18:01Z","updated_at":"2014-11-27T16:18:01Z","author_association":"MEMBER","body":"brainstorming here, but maybe we should have an allocation status API, and each decider can return an explanation + structured flags (allow_all, allow_primary, allow_replica) on a cluster view, node view, or index view (i.e. when concurrent recoveries is breached, ...). If its provided with a specific shard, then maybe we can give details on that specific shard?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64809080","html_url":"https://github.com/elastic/elasticsearch/issues/8686#issuecomment-64809080","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8686","id":64809080,"node_id":"MDEyOklzc3VlQ29tbWVudDY0ODA5MDgw","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2014-11-27T16:20:12Z","updated_at":"2014-11-27T16:20:12Z","author_association":"MEMBER","body":"@kimchy +1 on an allocation status API, I think we should separate the two (do both, but separately I mean), I think the disk usage percentage and watermark passed/not-passed should be exposed via the nodes stats API as part of the FsStats as a first step, then we can add the allocation status API as an additional step.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/64809191","html_url":"https://github.com/elastic/elasticsearch/issues/8686#issuecomment-64809191","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8686","id":64809191,"node_id":"MDEyOklzc3VlQ29tbWVudDY0ODA5MTkx","user":{"login":"kimchy","id":41300,"node_id":"MDQ6VXNlcjQxMzAw","avatar_url":"https://avatars1.githubusercontent.com/u/41300?v=4","gravatar_id":"","url":"https://api.github.com/users/kimchy","html_url":"https://github.com/kimchy","followers_url":"https://api.github.com/users/kimchy/followers","following_url":"https://api.github.com/users/kimchy/following{/other_user}","gists_url":"https://api.github.com/users/kimchy/gists{/gist_id}","starred_url":"https://api.github.com/users/kimchy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kimchy/subscriptions","organizations_url":"https://api.github.com/users/kimchy/orgs","repos_url":"https://api.github.com/users/kimchy/repos","events_url":"https://api.github.com/users/kimchy/events{/privacy}","received_events_url":"https://api.github.com/users/kimchy/received_events","type":"User","site_admin":false},"created_at":"2014-11-27T16:21:17Z","updated_at":"2014-11-27T16:21:17Z","author_association":"MEMBER","body":"@dakrone ++\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/263064383","html_url":"https://github.com/elastic/elasticsearch/issues/8686#issuecomment-263064383","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8686","id":263064383,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzA2NDM4Mw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-11-26T13:48:38Z","updated_at":"2016-11-26T13:48:38Z","author_association":"CONTRIBUTOR","body":"@dakrone you planning on returning to this one at some stage?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/264973240","html_url":"https://github.com/elastic/elasticsearch/issues/8686#issuecomment-264973240","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8686","id":264973240,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDk3MzI0MA==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2016-12-05T20:51:06Z","updated_at":"2016-12-05T20:51:06Z","author_association":"MEMBER","body":"@clintongormley yes, I've updated the title for this as well for its actual work.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/572310367","html_url":"https://github.com/elastic/elasticsearch/issues/8686#issuecomment-572310367","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8686","id":572310367,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjMxMDM2Nw==","user":{"login":"godber","id":1249,"node_id":"MDQ6VXNlcjEyNDk=","avatar_url":"https://avatars1.githubusercontent.com/u/1249?v=4","gravatar_id":"","url":"https://api.github.com/users/godber","html_url":"https://github.com/godber","followers_url":"https://api.github.com/users/godber/followers","following_url":"https://api.github.com/users/godber/following{/other_user}","gists_url":"https://api.github.com/users/godber/gists{/gist_id}","starred_url":"https://api.github.com/users/godber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/godber/subscriptions","organizations_url":"https://api.github.com/users/godber/orgs","repos_url":"https://api.github.com/users/godber/repos","events_url":"https://api.github.com/users/godber/events{/privacy}","received_events_url":"https://api.github.com/users/godber/received_events","type":"User","site_admin":false},"created_at":"2020-01-08T23:37:21Z","updated_at":"2020-01-08T23:37:21Z","author_association":"NONE","body":"Hi All, sorry to comment on this blast from the past but I've recently found myself needing this type of functionality.  Was the PR accidentally closed instead of accepted or something?  It looks like everyone was in agreement an MR was made and then closed.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/572488781","html_url":"https://github.com/elastic/elasticsearch/issues/8686#issuecomment-572488781","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8686","id":572488781,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjQ4ODc4MQ==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2020-01-09T10:10:33Z","updated_at":"2020-01-09T10:10:33Z","author_association":"CONTRIBUTOR","body":"I'm not sure why it's marked as `Closed` in the Github UI since it was indeed merged (see 4eb32e9) and still works to this day (version 7.5.0):\r\n\r\n```\r\n$ curl -s 'http://localhost:9200/_nodes/stats/fs' | jq .\r\n{\r\n  \"_nodes\": {\r\n    \"total\": 1,\r\n    \"successful\": 1,\r\n    \"failed\": 0\r\n  },\r\n  \"cluster_name\": \"elasticsearch\",\r\n  \"nodes\": {\r\n    \"TXGs3dDwS1WmAQnicIxqkg\": {\r\n      \"timestamp\": 1578564322370,\r\n      \"name\": \"node-0\",\r\n      \"transport_address\": \"127.0.0.1:9300\",\r\n      \"host\": \"127.0.0.1\",\r\n      \"ip\": \"127.0.0.1:9300\",\r\n      \"roles\": [\r\n        \"ingest\",\r\n        \"master\",\r\n        \"data\",\r\n        \"ml\"\r\n      ],\r\n      \"attributes\": {\r\n        \"ml.machine_memory\": \"17179869184\",\r\n        \"xpack.installed\": \"true\",\r\n        \"ml.max_open_jobs\": \"20\"\r\n      },\r\n      \"fs\": {\r\n        \"timestamp\": 1578564322370,\r\n        \"total\": {\r\n          \"total_in_bytes\": 499963170816,\r\n          \"free_in_bytes\": 270946213888,\r\n          \"available_in_bytes\": 265933774848\r\n        },\r\n        \"least_usage_estimate\": {\r\n          \"path\": \"/Users/davidturner/issues/8686/elasticsearch-7.5.0/data-0/nodes/0\",\r\n          \"total_in_bytes\": 499963170816,\r\n          \"available_in_bytes\": 265933742080,\r\n          \"used_disk_percent\": 46.80933364632356\r\n        },\r\n        \"most_usage_estimate\": {\r\n          \"path\": \"/Users/davidturner/issues/8686/elasticsearch-7.5.0/data-0/nodes/0\",\r\n          \"total_in_bytes\": 499963170816,\r\n          \"available_in_bytes\": 265933742080,\r\n          \"used_disk_percent\": 46.80933364632356\r\n        },\r\n        \"data\": [\r\n          {\r\n            \"path\": \"/Users/davidturner/issues/8686/elasticsearch-7.5.0/data-0/nodes/0\",\r\n            \"mount\": \"/ (/dev/disk1s1)\",\r\n            \"type\": \"apfs\",\r\n            \"total_in_bytes\": 499963170816,\r\n            \"free_in_bytes\": 270946213888,\r\n            \"available_in_bytes\": 265933774848\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThis information is also available in the allocation explain API if you pass the `?include_disk_info` parameter.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/572633986","html_url":"https://github.com/elastic/elasticsearch/issues/8686#issuecomment-572633986","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8686","id":572633986,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjYzMzk4Ng==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2020-01-09T16:16:31Z","updated_at":"2020-01-09T16:16:31Z","author_association":"MEMBER","body":"> I'm not sure why it's marked as Closed in the Github UI since it was indeed merged (see 4eb32e9) and still works to this day (version 7.5.0)\r\n\r\nGithub only marks squashed commits as \"Merged\" if you used the merge button, otherwise they are marked as closed. I probably merged it manually (or hey, maybe the merge button wasn't even around back then).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/572681180","html_url":"https://github.com/elastic/elasticsearch/issues/8686#issuecomment-572681180","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8686","id":572681180,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjY4MTE4MA==","user":{"login":"godber","id":1249,"node_id":"MDQ6VXNlcjEyNDk=","avatar_url":"https://avatars1.githubusercontent.com/u/1249?v=4","gravatar_id":"","url":"https://api.github.com/users/godber","html_url":"https://github.com/godber","followers_url":"https://api.github.com/users/godber/followers","following_url":"https://api.github.com/users/godber/following{/other_user}","gists_url":"https://api.github.com/users/godber/gists{/gist_id}","starred_url":"https://api.github.com/users/godber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/godber/subscriptions","organizations_url":"https://api.github.com/users/godber/orgs","repos_url":"https://api.github.com/users/godber/repos","events_url":"https://api.github.com/users/godber/events{/privacy}","received_events_url":"https://api.github.com/users/godber/received_events","type":"User","site_admin":false},"created_at":"2020-01-09T18:03:25Z","updated_at":"2020-01-09T18:03:25Z","author_association":"NONE","body":"Ah, my bad, thanks for taking the time to respond.  We don't see this in our 6.8.1 clusters, so I was confused and thought it didn't make it in.  My issue must be something else.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/661114471","html_url":"https://github.com/elastic/elasticsearch/issues/8686#issuecomment-661114471","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8686","id":661114471,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MTExNDQ3MQ==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2020-07-20T15:34:47Z","updated_at":"2020-07-20T15:34:47Z","author_association":"CONTRIBUTOR","body":"@godber this came up again internally and we found that these stats are indeed sometimes (often) missing or stale, so that might explain your issue. The fix would have been rather convoluted, and the correct stats are available from the allocation explain API, and/or can be computed from the stats API response, so we've reverted this change in #59755.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/661524411","html_url":"https://github.com/elastic/elasticsearch/issues/8686#issuecomment-661524411","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8686","id":661524411,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MTUyNDQxMQ==","user":{"login":"godber","id":1249,"node_id":"MDQ6VXNlcjEyNDk=","avatar_url":"https://avatars1.githubusercontent.com/u/1249?v=4","gravatar_id":"","url":"https://api.github.com/users/godber","html_url":"https://github.com/godber","followers_url":"https://api.github.com/users/godber/followers","following_url":"https://api.github.com/users/godber/following{/other_user}","gists_url":"https://api.github.com/users/godber/gists{/gist_id}","starred_url":"https://api.github.com/users/godber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/godber/subscriptions","organizations_url":"https://api.github.com/users/godber/orgs","repos_url":"https://api.github.com/users/godber/repos","events_url":"https://api.github.com/users/godber/events{/privacy}","received_events_url":"https://api.github.com/users/godber/received_events","type":"User","site_admin":false},"created_at":"2020-07-21T01:15:33Z","updated_at":"2020-07-21T01:15:33Z","author_association":"NONE","body":"@DaveCTurner thanks for remembering me and pinging me here!","performed_via_github_app":null}]