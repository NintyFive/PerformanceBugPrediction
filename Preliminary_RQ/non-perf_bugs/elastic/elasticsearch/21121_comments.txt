[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/256198781","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-256198781","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":256198781,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjE5ODc4MQ==","user":{"login":"niemyjski","id":1020579,"node_id":"MDQ6VXNlcjEwMjA1Nzk=","avatar_url":"https://avatars3.githubusercontent.com/u/1020579?v=4","gravatar_id":"","url":"https://api.github.com/users/niemyjski","html_url":"https://github.com/niemyjski","followers_url":"https://api.github.com/users/niemyjski/followers","following_url":"https://api.github.com/users/niemyjski/following{/other_user}","gists_url":"https://api.github.com/users/niemyjski/gists{/gist_id}","starred_url":"https://api.github.com/users/niemyjski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niemyjski/subscriptions","organizations_url":"https://api.github.com/users/niemyjski/orgs","repos_url":"https://api.github.com/users/niemyjski/repos","events_url":"https://api.github.com/users/niemyjski/events{/privacy}","received_events_url":"https://api.github.com/users/niemyjski/received_events","type":"User","site_admin":false},"created_at":"2016-10-25T22:39:22Z","updated_at":"2016-10-25T22:39:22Z","author_association":"CONTRIBUTOR","body":"I'll try to update (https://www.elastic.co/guide/en/elasticsearch/reference/5.0/docs-update.html) with a date example once this is figured out :)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/256199063","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-256199063","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":256199063,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjE5OTA2Mw==","user":{"login":"niemyjski","id":1020579,"node_id":"MDQ6VXNlcjEwMjA1Nzk=","avatar_url":"https://avatars3.githubusercontent.com/u/1020579?v=4","gravatar_id":"","url":"https://api.github.com/users/niemyjski","html_url":"https://github.com/niemyjski","followers_url":"https://api.github.com/users/niemyjski/followers","following_url":"https://api.github.com/users/niemyjski/following{/other_user}","gists_url":"https://api.github.com/users/niemyjski/gists{/gist_id}","starred_url":"https://api.github.com/users/niemyjski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niemyjski/subscriptions","organizations_url":"https://api.github.com/users/niemyjski/orgs","repos_url":"https://api.github.com/users/niemyjski/repos","events_url":"https://api.github.com/users/niemyjski/events{/privacy}","received_events_url":"https://api.github.com/users/niemyjski/received_events","type":"User","site_admin":false},"created_at":"2016-10-25T22:40:37Z","updated_at":"2016-10-25T22:40:37Z","author_association":"CONTRIBUTOR","body":"cc @jdconrad https://github.com/elastic/elasticsearch/issues/17992\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/256201212","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-256201212","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":256201212,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjIwMTIxMg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-10-25T22:50:07Z","updated_at":"2016-10-25T22:50:07Z","author_association":"MEMBER","body":"Elastic reserves GitHub for bug reports and feature requests; please post general questions on the [Elastic Discourse forum](https://discourse.elastic.co).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/256201878","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-256201878","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":256201878,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjIwMTg3OA==","user":{"login":"niemyjski","id":1020579,"node_id":"MDQ6VXNlcjEwMjA1Nzk=","avatar_url":"https://avatars3.githubusercontent.com/u/1020579?v=4","gravatar_id":"","url":"https://api.github.com/users/niemyjski","html_url":"https://github.com/niemyjski","followers_url":"https://api.github.com/users/niemyjski/followers","following_url":"https://api.github.com/users/niemyjski/following{/other_user}","gists_url":"https://api.github.com/users/niemyjski/gists{/gist_id}","starred_url":"https://api.github.com/users/niemyjski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niemyjski/subscriptions","organizations_url":"https://api.github.com/users/niemyjski/orgs","repos_url":"https://api.github.com/users/niemyjski/repos","events_url":"https://api.github.com/users/niemyjski/events{/privacy}","received_events_url":"https://api.github.com/users/niemyjski/received_events","type":"User","site_admin":false},"created_at":"2016-10-25T22:53:12Z","updated_at":"2016-10-25T22:54:06Z","author_association":"CONTRIBUTOR","body":"Considering you don't have a single painless test for dates or docs (https://github.com/elastic/elasticsearch/blob/master/modules/lang-painless/src/test/java/org/elasticsearch/painless/CastTests.java) I think this is a bug/feature report.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/256202284","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-256202284","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":256202284,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjIwMjI4NA==","user":{"login":"niemyjski","id":1020579,"node_id":"MDQ6VXNlcjEwMjA1Nzk=","avatar_url":"https://avatars3.githubusercontent.com/u/1020579?v=4","gravatar_id":"","url":"https://api.github.com/users/niemyjski","html_url":"https://github.com/niemyjski","followers_url":"https://api.github.com/users/niemyjski/followers","following_url":"https://api.github.com/users/niemyjski/following{/other_user}","gists_url":"https://api.github.com/users/niemyjski/gists{/gist_id}","starred_url":"https://api.github.com/users/niemyjski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niemyjski/subscriptions","organizations_url":"https://api.github.com/users/niemyjski/orgs","repos_url":"https://api.github.com/users/niemyjski/repos","events_url":"https://api.github.com/users/niemyjski/events{/privacy}","received_events_url":"https://api.github.com/users/niemyjski/received_events","type":"User","site_admin":false},"created_at":"2016-10-25T22:55:20Z","updated_at":"2016-10-25T22:57:51Z","author_association":"CONTRIBUTOR","body":"I've created a post on https://discuss.elastic.co/t/comparing-dates-in-painless/63943 and renamed this title\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/256205829","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-256205829","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":256205829,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjIwNTgyOQ==","user":{"login":"niemyjski","id":1020579,"node_id":"MDQ6VXNlcjEwMjA1Nzk=","avatar_url":"https://avatars3.githubusercontent.com/u/1020579?v=4","gravatar_id":"","url":"https://api.github.com/users/niemyjski","html_url":"https://github.com/niemyjski","followers_url":"https://api.github.com/users/niemyjski/followers","following_url":"https://api.github.com/users/niemyjski/following{/other_user}","gists_url":"https://api.github.com/users/niemyjski/gists{/gist_id}","starred_url":"https://api.github.com/users/niemyjski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niemyjski/subscriptions","organizations_url":"https://api.github.com/users/niemyjski/orgs","repos_url":"https://api.github.com/users/niemyjski/repos","events_url":"https://api.github.com/users/niemyjski/events{/privacy}","received_events_url":"https://api.github.com/users/niemyjski/received_events","type":"User","site_admin":false},"created_at":"2016-10-25T23:11:56Z","updated_at":"2016-10-25T23:11:56Z","author_association":"CONTRIBUTOR","body":"Looks like it's almost impossible to parse an ISO-8601 date with painless (http://stackoverflow.com/questions/2201925/converting-iso-8601-compliant-string-to-java-util-date) am I missing something?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/256207609","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-256207609","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":256207609,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjIwNzYwOQ==","user":{"login":"niemyjski","id":1020579,"node_id":"MDQ6VXNlcjEwMjA1Nzk=","avatar_url":"https://avatars3.githubusercontent.com/u/1020579?v=4","gravatar_id":"","url":"https://api.github.com/users/niemyjski","html_url":"https://github.com/niemyjski","followers_url":"https://api.github.com/users/niemyjski/followers","following_url":"https://api.github.com/users/niemyjski/following{/other_user}","gists_url":"https://api.github.com/users/niemyjski/gists{/gist_id}","starred_url":"https://api.github.com/users/niemyjski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niemyjski/subscriptions","organizations_url":"https://api.github.com/users/niemyjski/orgs","repos_url":"https://api.github.com/users/niemyjski/repos","events_url":"https://api.github.com/users/niemyjski/events{/privacy}","received_events_url":"https://api.github.com/users/niemyjski/received_events","type":"User","site_admin":false},"created_at":"2016-10-25T23:22:22Z","updated_at":"2016-10-25T23:22:52Z","author_association":"CONTRIBUTOR","body":"To anyone wondering I was able to get this working at least locally, I'm not sure how reliable it is at parsing different date formats as I can't specify `Zulu` because min date time doesn't have it (pre epoch)\n\n```\ndef sf = new SimpleDateFormat(\\\"\"yyyy-MM-dd'T'HH:mm:ss\\\"\");\nif (ctx._source.total_occurrences == 0 || sf.parse(ctx._source.first_occurrence).after(sf.parse(params.minOccurrenceDateUtc))) {\n  ctx._source.first_occurrence = params.minOccurrenceDateUtc;\n}\nif (sf.parse(ctx._source.last_occurrence).before(sf.parse(params.maxOccurrenceDateUtc))) {\n  ctx._source.last_occurrence = params.maxOccurrenceDateUtc;\n}\nctx._source.total_occurrences += params.count;\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/257337489","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-257337489","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":257337489,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NzMzNzQ4OQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-10-31T16:08:00Z","updated_at":"2016-10-31T16:08:00Z","author_association":"CONTRIBUTOR","body":"I'm reopening this because I think it is interesting. I mean, you have a workaround but it kind of sucks for a few reasons:\n1. We end up re-parsing the params on every execution.\n2. It isn't painless.\n3. `first_occurrence` is a date and should be exposed to painless as a date.\n4. We really need to document examples like this.\n\nI don't know how many changes should stem from this issue but my instinct is \"a couple\".\n\nI do want to be clear on point number 2. Painless's list of priorities are:\n1. Security\n2. Performance\n3. Awesomeness/Painlessness\n4. Compatibility with Groovy\n\nThe work around you have has trouble with 2 and 3 and 4. I don't know if we'll ever get 4, but we should be able to get 2 and 3.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/257359400","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-257359400","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":257359400,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NzM1OTQwMA==","user":{"login":"niemyjski","id":1020579,"node_id":"MDQ6VXNlcjEwMjA1Nzk=","avatar_url":"https://avatars3.githubusercontent.com/u/1020579?v=4","gravatar_id":"","url":"https://api.github.com/users/niemyjski","html_url":"https://github.com/niemyjski","followers_url":"https://api.github.com/users/niemyjski/followers","following_url":"https://api.github.com/users/niemyjski/following{/other_user}","gists_url":"https://api.github.com/users/niemyjski/gists{/gist_id}","starred_url":"https://api.github.com/users/niemyjski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niemyjski/subscriptions","organizations_url":"https://api.github.com/users/niemyjski/orgs","repos_url":"https://api.github.com/users/niemyjski/repos","events_url":"https://api.github.com/users/niemyjski/events{/privacy}","received_events_url":"https://api.github.com/users/niemyjski/received_events","type":"User","site_admin":false},"created_at":"2016-10-31T17:23:55Z","updated_at":"2016-10-31T17:23:55Z","author_association":"CONTRIBUTOR","body":"Yeah, I ended up having to do even more work as stated in here (https://discuss.elastic.co/t/comparing-dates-in-painless/63943). I had to create a function to parse the date into a Instant (in a try block) and return a default value. It definitely wasn't straight forward. I appreciate you reopening this. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/257372239","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-257372239","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":257372239,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NzM3MjIzOQ==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2016-10-31T18:06:16Z","updated_at":"2016-10-31T18:07:03Z","author_association":"CONTRIBUTOR","body":"@nik9000 Point 1 to me is certainly the most interesting here.  On point 3, I thought @rjernst made the change to Date fields to expose these things as dates?  Maybe I'm misremembering, though.  I think for compatibility with Groovy, it's best effort, but if something doesn't make sense or we agree it's a poor feature we should definitely not be forced to implement it.  Groovy has a lot of really insecure/overly lenient features.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/257974973","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-257974973","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":257974973,"node_id":"MDEyOklzc3VlQ29tbWVudDI1Nzk3NDk3Mw==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2016-11-02T19:35:59Z","updated_at":"2016-11-02T19:35:59Z","author_association":"MEMBER","body":"The change I made was for `boolean`s, and only applicable for doc values (which are not available in update scripts).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/270216822","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-270216822","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":270216822,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDIxNjgyMg==","user":{"login":"niemyjski","id":1020579,"node_id":"MDQ6VXNlcjEwMjA1Nzk=","avatar_url":"https://avatars3.githubusercontent.com/u/1020579?v=4","gravatar_id":"","url":"https://api.github.com/users/niemyjski","html_url":"https://github.com/niemyjski","followers_url":"https://api.github.com/users/niemyjski/followers","following_url":"https://api.github.com/users/niemyjski/following{/other_user}","gists_url":"https://api.github.com/users/niemyjski/gists{/gist_id}","starred_url":"https://api.github.com/users/niemyjski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niemyjski/subscriptions","organizations_url":"https://api.github.com/users/niemyjski/orgs","repos_url":"https://api.github.com/users/niemyjski/repos","events_url":"https://api.github.com/users/niemyjski/events{/privacy}","received_events_url":"https://api.github.com/users/niemyjski/received_events","type":"User","site_admin":false},"created_at":"2017-01-03T20:33:10Z","updated_at":"2017-01-03T20:33:10Z","author_association":"CONTRIBUTOR","body":"Some additional feedback. I seem to be hitting more issues around this (I'm working to get to the bottom of this.).. I have a date `\"date\": \"2017-01-03T14:12:36.2770782-06:00\"` and I'm doing an explain on it .\r\n\r\n```json\r\n_explain\r\n{\r\n  \"query\": {\r\n    \"script\": {\r\n      \"script\": \"Debug.explain(doc.date)\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nwhich returns\r\n```\r\n        \"type\": \"script_exception\",\r\n        \"reason\": \"runtime error\",\r\n        \"to_string\": \"[1483474356277]\",\r\n```\r\n\r\nSo I tried to convert it by doing both `Instant.parse(doc.date)` returns ` \"org.elasticsearch.index.fielddata.ScriptDocValues$Longs cannot be cast to java.lang.CharSequence\"` and `new Date(doc.date)` returns `\"org.elasticsearch.index.fielddata.ScriptDocValues$Longs cannot be cast to java.lang.Long\"` Seems at least on the second one that the conversion should be much easier in painless. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/270220127","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-270220127","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":270220127,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDIyMDEyNw==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2017-01-03T20:46:44Z","updated_at":"2017-01-03T20:46:44Z","author_association":"MEMBER","body":"> and new Date(doc.date) returns \"org.elasticsearch.index.fielddata.ScriptDocValues$Longs cannot be cast to java.lang.Long\"\r\n\r\n`ScriptDocValues$Longs` already provides a date accessor. Use `doc['date'].date`.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/270223117","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-270223117","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":270223117,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDIyMzExNw==","user":{"login":"niemyjski","id":1020579,"node_id":"MDQ6VXNlcjEwMjA1Nzk=","avatar_url":"https://avatars3.githubusercontent.com/u/1020579?v=4","gravatar_id":"","url":"https://api.github.com/users/niemyjski","html_url":"https://github.com/niemyjski","followers_url":"https://api.github.com/users/niemyjski/followers","following_url":"https://api.github.com/users/niemyjski/following{/other_user}","gists_url":"https://api.github.com/users/niemyjski/gists{/gist_id}","starred_url":"https://api.github.com/users/niemyjski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niemyjski/subscriptions","organizations_url":"https://api.github.com/users/niemyjski/orgs","repos_url":"https://api.github.com/users/niemyjski/repos","events_url":"https://api.github.com/users/niemyjski/events{/privacy}","received_events_url":"https://api.github.com/users/niemyjski/received_events","type":"User","site_admin":false},"created_at":"2017-01-03T20:59:53Z","updated_at":"2017-01-03T21:00:01Z","author_association":"CONTRIBUTOR","body":"@rjernst good to know, I just also figured I could do this as well (get the utc time) `def x = OffsetDateTime.parse('2017-01-01T00:00:00.0000000+12:00'); Debug.explain(x.toInstant())`","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/270226341","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-270226341","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":270226341,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDIyNjM0MQ==","user":{"login":"niemyjski","id":1020579,"node_id":"MDQ6VXNlcjEwMjA1Nzk=","avatar_url":"https://avatars3.githubusercontent.com/u/1020579?v=4","gravatar_id":"","url":"https://api.github.com/users/niemyjski","html_url":"https://github.com/niemyjski","followers_url":"https://api.github.com/users/niemyjski/followers","following_url":"https://api.github.com/users/niemyjski/following{/other_user}","gists_url":"https://api.github.com/users/niemyjski/gists{/gist_id}","starred_url":"https://api.github.com/users/niemyjski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niemyjski/subscriptions","organizations_url":"https://api.github.com/users/niemyjski/orgs","repos_url":"https://api.github.com/users/niemyjski/repos","events_url":"https://api.github.com/users/niemyjski/events{/privacy}","received_events_url":"https://api.github.com/users/niemyjski/received_events","type":"User","site_admin":false},"created_at":"2017-01-03T21:13:45Z","updated_at":"2017-01-03T21:13:45Z","author_association":"CONTRIBUTOR","body":"@rjernst is that (doc['date'.date) ]available on reindex scripts? Getting a null reference when I try that outside of regular explain.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/270247181","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-270247181","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":270247181,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDI0NzE4MQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2017-01-03T22:44:25Z","updated_at":"2017-01-03T22:44:25Z","author_association":"MEMBER","body":"That would be available in any script that has `doc` available. I think that is just search scripts. But if you see a message about ScriptDocValues, it should be available.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/270252375","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-270252375","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":270252375,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDI1MjM3NQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2017-01-03T23:11:54Z","updated_at":"2017-01-03T23:11:54Z","author_association":"CONTRIBUTOR","body":"In reindex `ctx._source.date` should return a date. You should be able to have a look at it with `Debug.explain(ctx._source.date)` (5.1.1+). That should return an error with the class of the date and you can go from there. [This](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-scripting-painless-debugging.html) has some instructions that should be useful. I'd love to have a proper API reference to point you at and I've been working on and off on it for a bit. I've uncovered quite a few crabs along the way though....","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/270255736","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-270255736","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":270255736,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDI1NTczNg==","user":{"login":"niemyjski","id":1020579,"node_id":"MDQ6VXNlcjEwMjA1Nzk=","avatar_url":"https://avatars3.githubusercontent.com/u/1020579?v=4","gravatar_id":"","url":"https://api.github.com/users/niemyjski","html_url":"https://github.com/niemyjski","followers_url":"https://api.github.com/users/niemyjski/followers","following_url":"https://api.github.com/users/niemyjski/following{/other_user}","gists_url":"https://api.github.com/users/niemyjski/gists{/gist_id}","starred_url":"https://api.github.com/users/niemyjski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niemyjski/subscriptions","organizations_url":"https://api.github.com/users/niemyjski/orgs","repos_url":"https://api.github.com/users/niemyjski/repos","events_url":"https://api.github.com/users/niemyjski/events{/privacy}","received_events_url":"https://api.github.com/users/niemyjski/received_events","type":"User","site_admin":false},"created_at":"2017-01-03T23:31:59Z","updated_at":"2017-01-03T23:33:02Z","author_association":"CONTRIBUTOR","body":"@nik9000 thanks!, looks like it's a string, I can do `OffsetDateTime.parse(ctx._source.date).toInstant();`","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/277637785","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-277637785","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":277637785,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzYzNzc4NQ==","user":{"login":"cp2587","id":5306537,"node_id":"MDQ6VXNlcjUzMDY1Mzc=","avatar_url":"https://avatars0.githubusercontent.com/u/5306537?v=4","gravatar_id":"","url":"https://api.github.com/users/cp2587","html_url":"https://github.com/cp2587","followers_url":"https://api.github.com/users/cp2587/followers","following_url":"https://api.github.com/users/cp2587/following{/other_user}","gists_url":"https://api.github.com/users/cp2587/gists{/gist_id}","starred_url":"https://api.github.com/users/cp2587/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cp2587/subscriptions","organizations_url":"https://api.github.com/users/cp2587/orgs","repos_url":"https://api.github.com/users/cp2587/repos","events_url":"https://api.github.com/users/cp2587/events{/privacy}","received_events_url":"https://api.github.com/users/cp2587/received_events","type":"User","site_admin":false},"created_at":"2017-02-06T10:07:25Z","updated_at":"2017-02-06T10:08:16Z","author_association":"NONE","body":"Hello,\r\n\r\nI also encounter a lot of painful problems when trying to work with datetime in painless... For instance, i wanted to apply a TZ to two dates and get the difference but cannot find a way to do it in painless...\r\n\r\nIn groovy, i could do something like:\r\n`(doc['t1'].date.setZone(org.joda.time.DateTimeZone.forID(tz)) - doc['t2'].date.setZone(org.joda.time.DateTimeZone.forID(tz))).days`\r\n\r\nDo you plan to improve this aspect of painless or do i need to keep using groovy if i want to do complex operations on date object ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/277656298","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-277656298","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":277656298,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzY1NjI5OA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-02-06T11:31:31Z","updated_at":"2017-02-06T11:31:31Z","author_association":"CONTRIBUTOR","body":"@cp2587 see https://github.com/elastic/elasticsearch/pull/22875 and https://github.com/elastic/elasticsearch/pull/22948","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/277719547","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-277719547","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":277719547,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzcxOTU0Nw==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2017-02-06T15:38:49Z","updated_at":"2017-02-06T15:38:49Z","author_association":"CONTRIBUTOR","body":"> (doc['t1'].date.setZone(org.joda.time.DateTimeZone.forID(tz)) - doc['t2'].date.setZone(org.joda.time.DateTimeZone.forID(tz))).days\r\n\r\nI don't think a lot of these are whitelisted. I'm not sure why, but right now most of java's time API is whitelisted and joda isn't.... I expect something like this should work:\r\n\r\n```\r\nZoneId zone = ZoneId.of(params.tz); ChronoUnit.DAYS. between(Instant.ofEpochMilli(doc.t2.date.millis).atZone(zone), Instant.ofEpochMilli(doc.t1.date.millis).atZone(zone))\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/277739152","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-277739152","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":277739152,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzczOTE1Mg==","user":{"login":"cp2587","id":5306537,"node_id":"MDQ6VXNlcjUzMDY1Mzc=","avatar_url":"https://avatars0.githubusercontent.com/u/5306537?v=4","gravatar_id":"","url":"https://api.github.com/users/cp2587","html_url":"https://github.com/cp2587","followers_url":"https://api.github.com/users/cp2587/followers","following_url":"https://api.github.com/users/cp2587/following{/other_user}","gists_url":"https://api.github.com/users/cp2587/gists{/gist_id}","starred_url":"https://api.github.com/users/cp2587/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cp2587/subscriptions","organizations_url":"https://api.github.com/users/cp2587/orgs","repos_url":"https://api.github.com/users/cp2587/repos","events_url":"https://api.github.com/users/cp2587/events{/privacy}","received_events_url":"https://api.github.com/users/cp2587/received_events","type":"User","site_admin":false},"created_at":"2017-02-06T16:43:20Z","updated_at":"2017-02-06T16:43:20Z","author_association":"NONE","body":"Thank you very much @nik9000, it works well !!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/277746091","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-277746091","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":277746091,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzc0NjA5MQ==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2017-02-06T17:06:44Z","updated_at":"2017-02-06T17:06:44Z","author_association":"CONTRIBUTOR","body":"> Thank you very much @nik9000, it works well !!\r\n\r\nAnd now I'm torn! Painless supports java's time api well because we expected to port Elasticsearch to java's time api and drop joda time at some point. But we haven't yet. Either we should push the migration through in 6.0 or fix up joda's date support in painless or both....","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/277748876","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-277748876","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":277748876,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzc0ODg3Ng==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2017-02-06T17:16:10Z","updated_at":"2017-02-06T17:16:10Z","author_association":"MEMBER","body":">  or fix up joda's date support in painless\r\n\r\nI don't think we should do that. The java 8 time api in painless works fine.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/277749502","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-277749502","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":277749502,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzc0OTUwMg==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2017-02-06T17:18:19Z","updated_at":"2017-02-06T17:18:19Z","author_association":"CONTRIBUTOR","body":"> The java 8 time api in painless works fine.\r\n\r\nYeah. I'm fairly sure the right thing to do is to complete the port. For the time being things like date aggregations can work if you return millis-since-epoch from the script.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/277749915","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-277749915","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":277749915,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzc0OTkxNQ==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2017-02-06T17:19:47Z","updated_at":"2017-02-06T17:19:47Z","author_association":"CONTRIBUTOR","body":"I'm also against adding support for Joda.  Dates are already challenging to use, but having two libraries would really step up the difficulty level.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/277751628","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-277751628","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":277751628,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzc1MTYyOA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-02-06T17:25:45Z","updated_at":"2017-02-06T17:25:45Z","author_association":"MEMBER","body":"Removing Joda is an eventuality.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/277753526","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-277753526","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":277753526,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzc1MzUyNg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-02-06T17:32:16Z","updated_at":"2017-02-06T17:32:16Z","author_association":"CONTRIBUTOR","body":"I agree with not adding support for joda to painless. We should (at some stage) start working on https://github.com/elastic/elasticsearch/issues/12829 to replace joda with java time instead","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/277756898","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-277756898","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":277756898,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzc1Njg5OA==","user":{"login":"niemyjski","id":1020579,"node_id":"MDQ6VXNlcjEwMjA1Nzk=","avatar_url":"https://avatars3.githubusercontent.com/u/1020579?v=4","gravatar_id":"","url":"https://api.github.com/users/niemyjski","html_url":"https://github.com/niemyjski","followers_url":"https://api.github.com/users/niemyjski/followers","following_url":"https://api.github.com/users/niemyjski/following{/other_user}","gists_url":"https://api.github.com/users/niemyjski/gists{/gist_id}","starred_url":"https://api.github.com/users/niemyjski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niemyjski/subscriptions","organizations_url":"https://api.github.com/users/niemyjski/orgs","repos_url":"https://api.github.com/users/niemyjski/repos","events_url":"https://api.github.com/users/niemyjski/events{/privacy}","received_events_url":"https://api.github.com/users/niemyjski/received_events","type":"User","site_admin":false},"created_at":"2017-02-06T17:44:25Z","updated_at":"2017-02-06T17:44:57Z","author_association":"CONTRIBUTOR","body":"@rjernst I wouldn't say it works fine, but it works.. It's been a PITA working with dates in elastic painless...","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/324682740","html_url":"https://github.com/elastic/elasticsearch/issues/21121#issuecomment-324682740","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21121","id":324682740,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNDY4Mjc0MA==","user":{"login":"eranhirs","id":3372820,"node_id":"MDQ6VXNlcjMzNzI4MjA=","avatar_url":"https://avatars1.githubusercontent.com/u/3372820?v=4","gravatar_id":"","url":"https://api.github.com/users/eranhirs","html_url":"https://github.com/eranhirs","followers_url":"https://api.github.com/users/eranhirs/followers","following_url":"https://api.github.com/users/eranhirs/following{/other_user}","gists_url":"https://api.github.com/users/eranhirs/gists{/gist_id}","starred_url":"https://api.github.com/users/eranhirs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eranhirs/subscriptions","organizations_url":"https://api.github.com/users/eranhirs/orgs","repos_url":"https://api.github.com/users/eranhirs/repos","events_url":"https://api.github.com/users/eranhirs/events{/privacy}","received_events_url":"https://api.github.com/users/eranhirs/received_events","type":"User","site_admin":false},"created_at":"2017-08-24T16:11:44Z","updated_at":"2017-09-05T12:07:12Z","author_association":"NONE","body":"@niemyjski thanks for the help.\r\n[Here ](https://stackoverflow.com/questions/45864201/elasticsearch-painless-manipulate-date/45864252) is my experience with manipulating dates.\r\nMaybe this will help someone, I eventually succeed using the `.plusHours()` function.","performed_via_github_app":null}]