[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/453431971","html_url":"https://github.com/elastic/elasticsearch/issues/37345#issuecomment-453431971","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37345","id":453431971,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzQzMTk3MQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-01-11T08:41:58Z","updated_at":"2019-01-11T08:41:58Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/453433820","html_url":"https://github.com/elastic/elasticsearch/issues/37345#issuecomment-453433820","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37345","id":453433820,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzQzMzgyMA==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-01-11T08:46:51Z","updated_at":"2019-01-11T08:46:51Z","author_association":"CONTRIBUTOR","body":"@original-brownbear could it be related to #37226 ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/453434090","html_url":"https://github.com/elastic/elasticsearch/issues/37345#issuecomment-453434090","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37345","id":453434090,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzQzNDA5MA==","user":{"login":"alpar-t","id":2565652,"node_id":"MDQ6VXNlcjI1NjU2NTI=","avatar_url":"https://avatars1.githubusercontent.com/u/2565652?v=4","gravatar_id":"","url":"https://api.github.com/users/alpar-t","html_url":"https://github.com/alpar-t","followers_url":"https://api.github.com/users/alpar-t/followers","following_url":"https://api.github.com/users/alpar-t/following{/other_user}","gists_url":"https://api.github.com/users/alpar-t/gists{/gist_id}","starred_url":"https://api.github.com/users/alpar-t/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alpar-t/subscriptions","organizations_url":"https://api.github.com/users/alpar-t/orgs","repos_url":"https://api.github.com/users/alpar-t/repos","events_url":"https://api.github.com/users/alpar-t/events{/privacy}","received_events_url":"https://api.github.com/users/alpar-t/received_events","type":"User","site_admin":false},"created_at":"2019-01-11T08:47:36Z","updated_at":"2019-01-11T08:49:07Z","author_association":"CONTRIBUTOR","body":"Muted in 3e73911cbe8","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/453465504","html_url":"https://github.com/elastic/elasticsearch/issues/37345#issuecomment-453465504","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37345","id":453465504,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzQ2NTUwNA==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2019-01-11T10:13:42Z","updated_at":"2019-01-11T10:13:42Z","author_association":"MEMBER","body":"@atorok yea that def. seems related, I should have a fix in a few minutes :)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/458507717","html_url":"https://github.com/elastic/elasticsearch/issues/37345#issuecomment-458507717","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37345","id":458507717,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODUwNzcxNw==","user":{"login":"matriv","id":5058131,"node_id":"MDQ6VXNlcjUwNTgxMzE=","avatar_url":"https://avatars1.githubusercontent.com/u/5058131?v=4","gravatar_id":"","url":"https://api.github.com/users/matriv","html_url":"https://github.com/matriv","followers_url":"https://api.github.com/users/matriv/followers","following_url":"https://api.github.com/users/matriv/following{/other_user}","gists_url":"https://api.github.com/users/matriv/gists{/gist_id}","starred_url":"https://api.github.com/users/matriv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matriv/subscriptions","organizations_url":"https://api.github.com/users/matriv/orgs","repos_url":"https://api.github.com/users/matriv/repos","events_url":"https://api.github.com/users/matriv/events{/privacy}","received_events_url":"https://api.github.com/users/matriv/received_events","type":"User","site_admin":false},"created_at":"2019-01-29T11:33:49Z","updated_at":"2019-01-29T11:33:49Z","author_association":"CONTRIBUTOR","body":"New failures: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.x+matrix-java-periodic/ES_BUILD_JAVA=java11,ES_RUNTIME_JAVA=zulu11,nodes=virtual&&linux/210/console\r\n\r\nReproduce:\r\n```\r\n./gradlew :server:integTest \\\r\n  -Dtests.seed=E77709B66B5E760A \\\r\n  -Dtests.class=org.elasticsearch.cluster.routing.PrimaryAllocationIT \\\r\n  -Dtests.method=\"testForceStaleReplicaToBePromotedToPrimaryOnWrongNode\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=es-CL \\\r\n  -Dtests.timezone=Europe/Brussels \\\r\n  -Dcompiler.java=11 \\\r\n  -Druntime.java=11\r\n```\r\n\r\nCouldn't reproduce locally.\r\n\r\n```\r\nERROR   1128s J4 | PrimaryAllocationIT.testForceStaleReplicaToBePromotedToPrimaryOnWrongNode <<< FAILURES!\r\n  2> \tat java.base@11.0.2/java.lang.Thread.run(Thread.java:834)\r\n  2> \"elasticsearch[node_td4][[timer]]\" ID=3401 TIMED_WAITING\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/458519679","html_url":"https://github.com/elastic/elasticsearch/issues/37345#issuecomment-458519679","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37345","id":458519679,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODUxOTY3OQ==","user":{"login":"matriv","id":5058131,"node_id":"MDQ6VXNlcjUwNTgxMzE=","avatar_url":"https://avatars1.githubusercontent.com/u/5058131?v=4","gravatar_id":"","url":"https://api.github.com/users/matriv","html_url":"https://github.com/matriv","followers_url":"https://api.github.com/users/matriv/followers","following_url":"https://api.github.com/users/matriv/following{/other_user}","gists_url":"https://api.github.com/users/matriv/gists{/gist_id}","starred_url":"https://api.github.com/users/matriv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matriv/subscriptions","organizations_url":"https://api.github.com/users/matriv/orgs","repos_url":"https://api.github.com/users/matriv/repos","events_url":"https://api.github.com/users/matriv/events{/privacy}","received_events_url":"https://api.github.com/users/matriv/received_events","type":"User","site_admin":false},"created_at":"2019-01-29T12:19:18Z","updated_at":"2019-01-29T12:19:18Z","author_association":"CONTRIBUTOR","body":"And another one: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.x+matrix-java-periodic/ES_BUILD_JAVA=java11,ES_RUNTIME_JAVA=java8,nodes=virtual&&linux/210/console\r\n\r\n```\r\nERROR   16.3s J4 | PrimaryAllocationIT.testForceStaleReplicaToBePromotedToPrimaryOnWrongNode <<< FAILURES!\r\n   > Throwable #1: java.lang.NullPointerException\r\n   > \tat __randomizedtesting.SeedInfo.seed([EF58BD1E4C92C848:D61E9DF8C976E5F0]:0)\r\n   > \tat org.elasticsearch.cluster.routing.PrimaryAllocationIT.testForceStaleReplicaToBePromotedToPrimaryOnWrongNode(PrimaryAllocationIT.java:313)\r\n   > \tat java.lang.Thread.run(Thread.java:748)\r\n  1> [2019-01-29T11:27:02,923][INFO ][o.e.c.r.PrimaryAllocationIT] [testForceStaleReplicaToBePromotedToPrimary] before test\r\n  1> [2019-01-29T11:27:02,923][INFO ][o.e.c.r.PrimaryAllocationIT] [testForceStaleReplicaToBePromotedToPrimary] [PrimaryAllocationIT#testForceStaleReplicaToBePromotedToPrimary]: setting up test\r\n  1> [2019-01-29T11:27:02,924][INFO ][o.e.t.InternalTestCluster] [testForceStaleReplicaToBePromotedToPrimary] Setup InternalTestCluster [TEST-CHILD_VM=[4]-CLUSTER_SEED=[-4661995235852411665]-HASH=[1419D940F93]-cluster] with seed [BF4D440886741CEF] using [0] dedicated masters, [0] (data) nodes and [0] coord only nodes (min_master_nodes are [auto-managed])\r\n  1> [2019-01-29T11:27:02,924][INFO ][o.e.c.r.PrimaryAllocationIT] [testForceStaleReplicaToBePromotedToPrimary] [PrimaryAllocationIT#testForceStaleReplicaToBePromotedToPrimary]: all set up test\r\n  1> [2019-01-29T11:27:02,924][INFO ][o.e.c.r.PrimaryAllocationIT] [testForceStaleReplicaToBePromotedToPrimary] --> starting 3 nodes, 1 master, 2 data\r\n  1> [2019-01-29T11:27:02,928][INFO ][o.e.e.NodeEnvironment    ] [testForceStaleReplicaToBePromotedToPrimary] using [1] data paths, mounts [[/ (/dev/sda1)]], net usable_space [465.7gb], net total_space [503.9gb], types [ext4]\r\n  1> [2019-01-29T11:27:02,928][INFO ][o.e.e.NodeEnvironment    ] [testForceStaleReplicaToBePromotedToPrimary] heap size [491mb], compressed ordinary object pointers [true]\r\n  1> [2019-01-29T11:27:02,929][INFO ][o.e.n.Node               ] [testForceStaleReplicaToBePromotedToPrimary] node name [node_tm0], node ID [uGBxeepJTWy3MSBE9paOtQ]\r\n  1> [2019-01-29T11:27:02,929][INFO ][o.e.n.Node               ] [testForceStaleReplicaToBePromotedToPrimary] version[6.7.0-SNAPSHOT], pid[14028], build[unknown/unknown/Unknown/Unknown], OS[Linux/4.4.0-141-generic/amd64], JVM[Oracle Corporation/Java HotSpot(TM) 64-Bit Server VM/1.8.0_202/25.202-b08]\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/458520092","html_url":"https://github.com/elastic/elasticsearch/issues/37345#issuecomment-458520092","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37345","id":458520092,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODUyMDA5Mg==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2019-01-29T12:20:59Z","updated_at":"2019-01-29T12:20:59Z","author_association":"MEMBER","body":"@matriv I'm on it, sorry for the noise.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/458523462","html_url":"https://github.com/elastic/elasticsearch/issues/37345#issuecomment-458523462","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37345","id":458523462,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODUyMzQ2Mg==","user":{"login":"matriv","id":5058131,"node_id":"MDQ6VXNlcjUwNTgxMzE=","avatar_url":"https://avatars1.githubusercontent.com/u/5058131?v=4","gravatar_id":"","url":"https://api.github.com/users/matriv","html_url":"https://github.com/matriv","followers_url":"https://api.github.com/users/matriv/followers","following_url":"https://api.github.com/users/matriv/following{/other_user}","gists_url":"https://api.github.com/users/matriv/gists{/gist_id}","starred_url":"https://api.github.com/users/matriv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matriv/subscriptions","organizations_url":"https://api.github.com/users/matriv/orgs","repos_url":"https://api.github.com/users/matriv/repos","events_url":"https://api.github.com/users/matriv/events{/privacy}","received_events_url":"https://api.github.com/users/matriv/received_events","type":"User","site_admin":false},"created_at":"2019-01-29T12:33:28Z","updated_at":"2019-01-29T12:33:28Z","author_association":"CONTRIBUTOR","body":"@original-brownbear No worries :-)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/458541011","html_url":"https://github.com/elastic/elasticsearch/issues/37345#issuecomment-458541011","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37345","id":458541011,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODU0MTAxMQ==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2019-01-29T13:33:56Z","updated_at":"2019-01-29T13:33:56Z","author_association":"MEMBER","body":"The NPE when calling `org.elasticsearch.test.InternalTestCluster#getNodeNames` is quite interesting, the only way I can see this happening is via some concurrent modification of `org.elasticsearch.test.InternalTestCluster#nodes` that is happening in `6.x` but not in `master`.\r\nGoing through the differences between the two now to see where this could be coming from.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/465624178","html_url":"https://github.com/elastic/elasticsearch/issues/37345#issuecomment-465624178","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/37345","id":465624178,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NTYyNDE3OA==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2019-02-20T15:25:28Z","updated_at":"2019-02-20T15:25:28Z","author_association":"MEMBER","body":"This will be resolved by #39168 ","performed_via_github_app":null}]