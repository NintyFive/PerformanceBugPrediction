[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/560341341","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-560341341","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":560341341,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDM0MTM0MQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-12-02T10:47:19Z","updated_at":"2019-12-02T10:47:19Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-docs (:Docs)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/574276127","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-574276127","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":574276127,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NDI3NjEyNw==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2020-01-14T17:06:23Z","updated_at":"2020-01-14T17:06:23Z","author_association":"CONTRIBUTOR","body":"This is happening increasingly often over the past couple of days due to the scope of the suite simply slowly increasing over time. I think we may need to bump this timeout in the interim until we sort out a better solution like splitting it up.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/574320588","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-574320588","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":574320588,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NDMyMDU4OA==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2020-01-14T18:55:59Z","updated_at":"2020-01-14T18:56:24Z","author_association":"CONTRIBUTOR","body":"Now I am indeed starting to believe we've introduced some kind of regression. This is failing consistently across many OSes and JREs. Here's the runtime graph for one such CI build over the last several builds. You can see the sudden spike here.\r\n\r\n![image](https://user-images.githubusercontent.com/4106672/72373100-70a78600-36bc-11ea-90d1-c5ffedcea4d1.png)\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/575337702","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-575337702","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":575337702,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NTMzNzcwMg==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2020-01-16T20:43:42Z","updated_at":"2020-01-16T20:43:42Z","author_association":"CONTRIBUTOR","body":"So something has clearly changed to make this test suite suddenly run so much slower. The reason I don't believe we are seeing this failure in intake and pull request checks is that those are split up into multiple smaller parallel builds and therefore this is much less contention on the worker then for the full periodic builds.\r\n\r\nThere's no single test that's running long. It simply looks as though all test cases are just a bit slower, adding up to a pretty substantial runtime hit.\r\n\r\nAnother interesting data point is this is only happening in `master` and `7.x`. We are not seeing the increased runtimes in `7.5`. My closest guess at a potential culprit for a large change that might impact performance here is perhaps https://github.com/elastic/elasticsearch/pull/50907.\r\n\r\n@ywelsch @DaveCTurner Any thoughts? Any chance that change might have an adverse effect on performance on a system with lot of other CPU and IO contention (lots of other concurrent tests).\r\n\r\n@danielmitterdorfer Have you seen any recent changes in performance benchmarks that might indicate some kind regression might have been introduced?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/575508911","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-575508911","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":575508911,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NTUwODkxMQ==","user":{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false},"created_at":"2020-01-17T07:27:05Z","updated_at":"2020-01-17T07:40:49Z","author_association":"CONTRIBUTOR","body":"For me this look like a duplicate of #49579\r\n\r\nHowever, since 20/01/13 the number of failures have increased, which support the investigations above.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/575522038","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-575522038","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":575522038,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NTUyMjAzOA==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2020-01-17T08:12:22Z","updated_at":"2020-01-17T08:12:36Z","author_association":"CONTRIBUTOR","body":"I suspect https://github.com/elastic/elasticsearch/pull/50907 and https://github.com/elastic/elasticsearch/pull/50928. Although these changes save potentially hundreds of `fsync` calls from some cluster state updates in large clusters they will add an `fsync` or two to cluster state updates in tiny clusters, and these tests use a tiny cluster which does a lot of cluster state updates.\r\n\r\nDo these tests run using a ramdisk? If not, can we move them to use a ramdisk? That would make `fsync` calls free again.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/575533182","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-575533182","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":575533182,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NTUzMzE4Mg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-01-17T08:49:03Z","updated_at":"2020-01-17T08:49:03Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra (:Core/Infra/Build)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/575533994","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-575533994","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":575533994,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NTUzMzk5NA==","user":{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false},"created_at":"2020-01-17T08:51:45Z","updated_at":"2020-01-17T08:52:08Z","author_association":"CONTRIBUTOR","body":"While investigations are running which hopefully result in a proper fix, I will increase the timeout as a temporary solution, because too many builds are failing at the moment.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/575598706","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-575598706","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":575598706,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NTU5ODcwNg==","user":{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false},"created_at":"2020-01-17T11:59:47Z","updated_at":"2020-01-17T11:59:47Z","author_association":"CONTRIBUTOR","body":"I increased the timeout to 35 minutes. **This is a temporary solution, please revert once we have a proper solution**","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/576087476","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-576087476","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":576087476,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NjA4NzQ3Ng==","user":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"created_at":"2020-01-20T03:03:31Z","updated_at":"2020-01-20T03:19:44Z","author_association":"CONTRIBUTOR","body":"It doesn't look like 35 minutes is enough. Suite is still timing out.\r\n- [7.6 fedora-29 2020-01-20](https://gradle-enterprise.elastic.co/s/74wh7k3wqdyuk/console-log?anchor=10090)\r\n- [7.x fedora-29 2020-01-20](https://gradle-enterprise.elastic.co/s/tb3r2ya5hc3be/console-log?anchor=10673)\r\n- [master G1GC](https://gradle-enterprise.elastic.co/s/xdciq3tbxm75s/console-log#L10380)\r\n\r\nI'll push the timeout up further.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/576200707","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-576200707","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":576200707,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NjIwMDcwNw==","user":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"created_at":"2020-01-20T10:07:10Z","updated_at":"2020-01-20T10:07:10Z","author_association":"MEMBER","body":"> @danielmitterdorfer Have you seen any recent changes in performance benchmarks that might indicate some kind regression might have been introduced?\r\n\r\nOur [benchmarks](https://elasticsearch-benchmarks.elastic.co/#) don't indicate any major regressions recently but the workload and cluster configuration is quite different here so [David's suggestion](https://github.com/elastic/elasticsearch/issues/49753#issuecomment-575522038) seems reasonable.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/576779582","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-576779582","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":576779582,"node_id":"MDEyOklzc3VlQ29tbWVudDU3Njc3OTU4Mg==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2020-01-21T17:03:24Z","updated_at":"2020-01-21T17:03:24Z","author_association":"CONTRIBUTOR","body":"> Do these tests run using a ramdisk? If not, can we move them to use a ramdisk? That would make fsync calls free again.\r\n\r\nYes, this is timing out both in builds that use a ramdisk and those that don't.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/576869828","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-576869828","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":576869828,"node_id":"MDEyOklzc3VlQ29tbWVudDU3Njg2OTgyOA==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2020-01-21T20:37:18Z","updated_at":"2020-01-21T20:37:18Z","author_association":"CONTRIBUTOR","body":"This suite is still timing out even at 40 minutes. Its strange that this doesn't seem to be affecting (at least not to a perceptible degree) other test suites in a significant way. My only guess here is that something shifted in terms of the execution graph of the build and now there is simply more contention on the system when running this very long test suite. This also explains why we aren't seeing the timeouts in intake or pull request builds, because they are cut up into smaller pieces and there is less intrabuild contention.\r\n\r\nI'm curious if we bump this to something very large, say 1 hour, if the total build test execution time ends up being about the same. If so, tells me we are doing the same amount of work, but perhaps the docs tests taking longer means other tests executing more quickly. Right now it's hard to do apples to apples comparisons across builds because we are failing early due to this timeout.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/577165332","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-577165332","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":577165332,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NzE2NTMzMg==","user":{"login":"astefan","id":893749,"node_id":"MDQ6VXNlcjg5Mzc0OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/893749?v=4","gravatar_id":"","url":"https://api.github.com/users/astefan","html_url":"https://github.com/astefan","followers_url":"https://api.github.com/users/astefan/followers","following_url":"https://api.github.com/users/astefan/following{/other_user}","gists_url":"https://api.github.com/users/astefan/gists{/gist_id}","starred_url":"https://api.github.com/users/astefan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astefan/subscriptions","organizations_url":"https://api.github.com/users/astefan/orgs","repos_url":"https://api.github.com/users/astefan/repos","events_url":"https://api.github.com/users/astefan/events{/privacy}","received_events_url":"https://api.github.com/users/astefan/received_events","type":"User","site_admin":false},"created_at":"2020-01-22T12:50:05Z","updated_at":"2020-01-22T12:50:05Z","author_association":"CONTRIBUTOR","body":"There is one suite where both DocsClientYamlTestSuiteIT and XPackRestIT timed out.\r\n\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.6+matrix-java-periodic/ES_BUILD_JAVA=openjdk13,ES_RUNTIME_JAVA=corretto11,nodes=general-purpose/14/console\r\n[7.5.3] https://gradle-enterprise.elastic.co/s/6zkf5kjcqwvcc\r\n[6.8.7] https://gradle-enterprise.elastic.co/s/poka253asglpc\r\nhttps://gradle-enterprise.elastic.co/s/aaqsqtdunbilk\r\n\r\n```\r\norg.elasticsearch.smoketest.DocsClientYamlTestSuiteIT classMethod\r\norg.elasticsearch.xpack.test.rest.XPackRestIT classMethod\r\norg.elasticsearch.xpack.test.rest.XPackRestIT test {p0=privileges/10_basic/Test put and delete privileges}\r\norg.elasticsearch.smoketest.DocsClientYamlTestSuiteIT test {yaml=reference/aggregations/bucket/daterange-aggregation/line_78}\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/577177244","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-577177244","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":577177244,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NzE3NzI0NA==","user":{"login":"astefan","id":893749,"node_id":"MDQ6VXNlcjg5Mzc0OQ==","avatar_url":"https://avatars2.githubusercontent.com/u/893749?v=4","gravatar_id":"","url":"https://api.github.com/users/astefan","html_url":"https://github.com/astefan","followers_url":"https://api.github.com/users/astefan/followers","following_url":"https://api.github.com/users/astefan/following{/other_user}","gists_url":"https://api.github.com/users/astefan/gists{/gist_id}","starred_url":"https://api.github.com/users/astefan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astefan/subscriptions","organizations_url":"https://api.github.com/users/astefan/orgs","repos_url":"https://api.github.com/users/astefan/repos","events_url":"https://api.github.com/users/astefan/events{/privacy}","received_events_url":"https://api.github.com/users/astefan/received_events","type":"User","site_admin":false},"created_at":"2020-01-22T13:18:05Z","updated_at":"2020-01-22T13:18:05Z","author_association":"CONTRIBUTOR","body":"Another XPackRestIT timeout.\r\n\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob-unix-compatibility/os=centos-6&&immutable/528/console\r\n[7.5.3] https://gradle-enterprise.elastic.co/s/yfraoimkm2oty\r\n[7.7.0] https://gradle-enterprise.elastic.co/s/o5gnkc5kbkhv4 \r\n[7.6.0] https://gradle-enterprise.elastic.co/s/q5nocksdi7wak \r\n[7.5.3] https://gradle-enterprise.elastic.co/s/nrvafb443xw4k \r\n[7.6.0] https://gradle-enterprise.elastic.co/s/rorimvt3wpcsi \r\n[7.7.0] https://gradle-enterprise.elastic.co/s/zexvtet3swsw2\r\nhttps://gradle-enterprise.elastic.co/s/blpyy3dggqnqg\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/577304974","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-577304974","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":577304974,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NzMwNDk3NA==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2020-01-22T17:48:34Z","updated_at":"2020-01-22T18:00:26Z","author_association":"CONTRIBUTOR","body":"Overall build times after increasing the timeouts have increased vs a week ago before we had these timeout issues which to me seems to imply a general slowness in test execution that has been introduced somehow.\r\n\r\nYou can see in the graph below of intake build times that there's a clear bump starting last week.\r\n![image](https://user-images.githubusercontent.com/4106672/72918990-7b38cf80-3cfb-11ea-99d3-6b35bac7d05f.png)\r\n\r\nIt's unlikely this is infrastructure related since this doesn't affect the `7.5` branch and we get consistent timeouts across operating systems, java runtime versions, etc. There's also no related build changes during that time. The only major change was the upgrade to Gradle 6.1 which was after we started seeing these timeouts.\r\n\r\n> Note, the builds in the graph above are already utilizing a ramdisk for the build workspace.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/577378859","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-577378859","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":577378859,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NzM3ODg1OQ==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2020-01-22T20:49:38Z","updated_at":"2020-01-22T20:49:38Z","author_association":"CONTRIBUTOR","body":"As another datapoint, we specifically **do not** use a ramdisk in our unix compatibility tests due to wanting to exercise the distro FS implementations. We do however on the Java compatibility tests, which are also still timing out.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/577765974","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-577765974","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":577765974,"node_id":"MDEyOklzc3VlQ29tbWVudDU3Nzc2NTk3NA==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2020-01-23T16:43:29Z","updated_at":"2020-01-23T16:43:29Z","author_association":"MEMBER","body":"Master docs yaml tests timed out today.  I couldn't find evidence of any particular test killing the cluster or the test itself failing, so looks to be another instance of general slowdown.\r\n\r\nhttps://gradle-enterprise.elastic.co/s/xrrdvuh3wza2s","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/577786039","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-577786039","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":577786039,"node_id":"MDEyOklzc3VlQ29tbWVudDU3Nzc4NjAzOQ==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2020-01-23T17:30:14Z","updated_at":"2020-01-23T17:30:14Z","author_association":"CONTRIBUTOR","body":"@mark-vieira can you establish a base-line performance for `docs:check` on our CI machines?\r\n\r\nOn my machine, for example, it takes 32 minutes, running on an SSD, but on RamDisk, it takes 16 minutes, which brings it well below the range of the timeout.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/577787130","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-577787130","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":577787130,"node_id":"MDEyOklzc3VlQ29tbWVudDU3Nzc4NzEzMA==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2020-01-23T17:33:01Z","updated_at":"2020-01-23T17:34:18Z","author_association":"MEMBER","body":"Another maybe-useful data point: I just saw three timeouts come in back-to-back, and they were all from the same host.  Perhaps there is something specific to certain hosts/machines/OS combinations that is exacerbating the issue?  I know the OS/JREs have already been analyzed, but wasnt sure about hosts so thought I'd mention","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/577790012","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-577790012","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":577790012,"node_id":"MDEyOklzc3VlQ29tbWVudDU3Nzc5MDAxMg==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2020-01-23T17:40:32Z","updated_at":"2020-01-23T17:40:32Z","author_association":"CONTRIBUTOR","body":">  I just saw three timeouts come in back-to-back, and they were all from the same host\r\n\r\nWe use ephemeral workers so we never run multiple builds on a single agent. Perhaps the same _type_ of host. Our [compatibility matrix tests](https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob-unix-compatibility) show this timing out across all operating systems so I think specific host types is not the issue. Also, as I mentioned before, this regression is not in `7.5` so that indicates to me something that got introduced in `7.x` and later.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/577791440","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-577791440","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":577791440,"node_id":"MDEyOklzc3VlQ29tbWVudDU3Nzc5MTQ0MA==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2020-01-23T17:44:16Z","updated_at":"2020-01-23T17:44:16Z","author_association":"CONTRIBUTOR","body":"> On my machine, for example, it takes 32 minutes, running on an SSD, but on RamDisk, it takes 16 minutes, which brings it well below the range of the timeout.\r\n\r\nKeep in mind this is running _only_ a single test suite so resource contention is very low. This is the same reason why we generally don't see timeouts in pull-request or intake builds because those jobs are split up into smaller pieces with fewer concurrently executing tests.\r\n\r\nThe graph below is average execution time for this suite over the past 30 days for intake/PR builds (these use a ramdisk). You can see while we are still well below the timeout threshold there is a clear bump in execution time around the time of Jan 12-13. The additional load of our periodic tests (which run the entire test suite in a single build) is enough to push this over the edge.\r\n\r\n![image](https://user-images.githubusercontent.com/4106672/73009182-e8646780-3dc4-11ea-8d69-f4bc7be5b9dd.png)\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/577792614","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-577792614","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":577792614,"node_id":"MDEyOklzc3VlQ29tbWVudDU3Nzc5MjYxNA==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2020-01-23T17:47:18Z","updated_at":"2020-01-23T17:47:18Z","author_association":"CONTRIBUTOR","body":"Here's the same graph but for `XPackRestIT`. The bump in execution time isn't as dramatic but it's there, and the timetables align.\r\n\r\n![image](https://user-images.githubusercontent.com/4106672/73009394-56109380-3dc5-11ea-8daf-b3c2805dc55b.png)\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/577795967","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-577795967","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":577795967,"node_id":"MDEyOklzc3VlQ29tbWVudDU3Nzc5NTk2Nw==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2020-01-23T17:55:50Z","updated_at":"2020-01-23T17:57:21Z","author_association":"CONTRIBUTOR","body":"Here are the graphs for `DocsClientYamlTestSuiteIT` per branch across all CI builds:\r\n\r\n**7.5**\r\n![image](https://user-images.githubusercontent.com/4106672/73009916-30d05500-3dc6-11ea-8edc-584c2907784f.png)\r\n\r\n**7.x**\r\n![image](https://user-images.githubusercontent.com/4106672/73009955-42b1f800-3dc6-11ea-9ddc-d36c31c1769c.png)\r\n\r\n**master**\r\n![image](https://user-images.githubusercontent.com/4106672/73010165-bd7b1300-3dc6-11ea-9305-10a9da8dee1d.png)\r\n\r\n\r\nThe clear disparity between branches makes me want to rule out anything infrastructure related given that all this stuff runs on the same infra. That said, there _might_ have been some change in `7.x` and later that interacts awkwardly with our infra, or some infra change in some way.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/577942507","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-577942507","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":577942507,"node_id":"MDEyOklzc3VlQ29tbWVudDU3Nzk0MjUwNw==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2020-01-24T00:33:06Z","updated_at":"2020-01-24T00:33:14Z","author_association":"CONTRIBUTOR","body":"Here's an interesting thing I just found. Here's the syslogs for the CI agent running two identical build configurations:\r\n\r\n**7.5:** https://infra-stats.elastic.co/app/infra#/logs?_g=()&flyoutOptions=(flyoutId:!n,flyoutVisibility:hidden,surroundingLogsId:!n)&logFilter=(expression:'host.name:elasticsearch-ci-immutable-ubuntu-1604-1579811827669019501',kind:kuery)&logPosition=(position:(tiebreaker:82329295,time:1579813230000),streamLive:!f)&logTextview=(textScale:small,wrap:!f)\r\n**7.x:** https://infra-stats.elastic.co/app/infra#/logs?_g=()&flyoutOptions=(flyoutId:!n,flyoutVisibility:hidden,surroundingLogsId:!n)&logFilter=(expression:'host.name:elasticsearch-ci-immutable-fedora-29-1579709304051438758',kind:kuery)&logPosition=(position:(tiebreaker:53366760,time:1579713794000),streamLive:!f)&logTextview=(textScale:small,wrap:!t)\r\n\r\nThe 7.x builds are producing 50x more output in the syslogs due to what seems to be us logging every syscall. This is undoubtably contributing to some overhead, not only to perform the logging but whatever instrumentation is enabled that's performing this logging. Anyone have any ideas why we might be getting all this extra logging all of a sudden?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/577945238","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-577945238","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":577945238,"node_id":"MDEyOklzc3VlQ29tbWVudDU3Nzk0NTIzOA==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2020-01-24T00:45:49Z","updated_at":"2020-01-24T00:48:28Z","author_association":"CONTRIBUTOR","body":"Ok, I take back the conclusion in my previous comment. The additional syscall logging seems to be specific to certain OSes, not branches, and we have extended test execution times even on systems where this logging isn't present so this doesn't seem to be the cause of our problem. \r\n\r\nDamn, back to the drawing board.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/578181747","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-578181747","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":578181747,"node_id":"MDEyOklzc3VlQ29tbWVudDU3ODE4MTc0Nw==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2020-01-24T15:38:56Z","updated_at":"2020-01-24T16:47:39Z","author_association":"CONTRIBUTOR","body":"I've found the source for slowness here and will open a PR shortly. The gist here is that with ILM/SLM we do a lot of unnecessary setup / teardown work on each test. Compounded with the slightly slower cluster state storage mechanism, this causes the tests to run much slower.\r\n\r\nOn the core/infra side, we could also look at speeding up plugin installs. It currently takes 30-40 seconds at the beginning of `docs:integTest` to just install the plugins:\r\n\r\n```\r\n[2020-01-24T15:22:56.594355Z] [BUILD] Installing 16 plugins\r\n[2020-01-24T15:23:41.084037Z] [BUILD] Starting Elasticsearch process\r\n```\r\n\r\nEdit: PR #51430 added","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/578193747","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-578193747","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":578193747,"node_id":"MDEyOklzc3VlQ29tbWVudDU3ODE5Mzc0Nw==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2020-01-24T16:07:58Z","updated_at":"2020-01-24T16:08:20Z","author_association":"MEMBER","body":"> On the core/infra side, we could also look at speeding up plugin installs.\r\n\r\nWhile we could and should do that (now that we can install them all in one plugin command), the timeout here is in the test suite, while we do plugin installation externally from gradle.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/578195604","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-578195604","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":578195604,"node_id":"MDEyOklzc3VlQ29tbWVudDU3ODE5NTYwNA==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2020-01-24T16:12:41Z","updated_at":"2020-01-24T16:12:41Z","author_association":"CONTRIBUTOR","body":"I don't believe the solution proposed in #51418 is going to help here. As I've stated before, we already run most of our CI builds in ramdisk workspace and those builds continue to timeout at 40 minutes whereas we were running under 20 minutes before.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/579945638","html_url":"https://github.com/elastic/elasticsearch/issues/49753#issuecomment-579945638","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49753","id":579945638,"node_id":"MDEyOklzc3VlQ29tbWVudDU3OTk0NTYzOA==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2020-01-29T20:31:19Z","updated_at":"2020-01-29T20:31:19Z","author_association":"CONTRIBUTOR","body":"This looks to have done the trick. Thanks @ywelsch!\r\n\r\n**master**\r\n![image](https://user-images.githubusercontent.com/4106672/73394822-2c5adf00-4293-11ea-942a-88dabb9015a3.png)\r\n\r\n**7.x**\r\n![image](https://user-images.githubusercontent.com/4106672/73394856-3e3c8200-4293-11ea-96bc-3b5625b0b321.png)\r\n","performed_via_github_app":null}]