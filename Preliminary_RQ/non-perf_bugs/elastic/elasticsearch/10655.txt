{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/10655","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10655/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10655/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10655/events","html_url":"https://github.com/elastic/elasticsearch/issues/10655","id":69254065,"node_id":"MDU6SXNzdWU2OTI1NDA2NQ==","number":10655,"title":"terms aggregation ERROR : parse failure on include array of values","user":{"login":"rrphotosoft","id":4465221,"node_id":"MDQ6VXNlcjQ0NjUyMjE=","avatar_url":"https://avatars3.githubusercontent.com/u/4465221?v=4","gravatar_id":"","url":"https://api.github.com/users/rrphotosoft","html_url":"https://github.com/rrphotosoft","followers_url":"https://api.github.com/users/rrphotosoft/followers","following_url":"https://api.github.com/users/rrphotosoft/following{/other_user}","gists_url":"https://api.github.com/users/rrphotosoft/gists{/gist_id}","starred_url":"https://api.github.com/users/rrphotosoft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rrphotosoft/subscriptions","organizations_url":"https://api.github.com/users/rrphotosoft/orgs","repos_url":"https://api.github.com/users/rrphotosoft/repos","events_url":"https://api.github.com/users/rrphotosoft/events{/privacy}","received_events_url":"https://api.github.com/users/rrphotosoft/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"assignees":[{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2015-04-18T01:55:08Z","updated_at":"2015-04-21T15:06:35Z","closed_at":"2015-04-20T22:49:03Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\nI'm using a terms aggregation and would like to use the include feature to only include certain terms on which buckets should be created.\nUnfortunately I am not able to find the right syntax.\nThe documentation mentions the following:\n\n\"It is possible to filter the values for which buckets will be created. This can be done using the include and exclude parameters which are based on regular expression strings or arrays of exact values.\"\n\nHow do you pass an array of exact values?\nHere is my example:\n{\n   \"query\" :{..},\n   \"aggregations\":{\n         \"sector_ids\":{\n             \"terms\":{\n                 \"field\":\"sector_id\"\n             },\n             \"aggs\":{\n                 \"unique_keywords\":{\n                     \"terms\":{\n                         \"field\":\"keywords.analyzed_name\",\n                         \"include\": [\"xeon\",\"argon\"]\n                     }\n                 }\n             }\n         }\n     }\n}\n\nThis throws an error:\n\n\"Parse Failure [Unknown key for a START_ARRAY in [unique_keywords]: [include].]];\"\n\nI am using ES 1.3.5, however I don't think it has anything to do with my version.\n\nAny help is appreciated, until then I will have my program generate a pattern of all the keywords that I wish to include, but that becomes a  really lousy piece of monkey patching.\n\nRegards,\nRR.\n","closed_by":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"performed_via_github_app":null}