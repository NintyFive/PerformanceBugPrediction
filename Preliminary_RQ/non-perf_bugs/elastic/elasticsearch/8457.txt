{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/8457","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8457/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8457/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8457/events","html_url":"https://github.com/elastic/elasticsearch/issues/8457","id":48539729,"node_id":"MDU6SXNzdWU0ODUzOTcyOQ==","number":8457,"title":"Index corruption with ES1.4.0","user":{"login":"thomasmarkus","id":5584610,"node_id":"MDQ6VXNlcjU1ODQ2MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/5584610?v=4","gravatar_id":"","url":"https://api.github.com/users/thomasmarkus","html_url":"https://github.com/thomasmarkus","followers_url":"https://api.github.com/users/thomasmarkus/followers","following_url":"https://api.github.com/users/thomasmarkus/following{/other_user}","gists_url":"https://api.github.com/users/thomasmarkus/gists{/gist_id}","starred_url":"https://api.github.com/users/thomasmarkus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thomasmarkus/subscriptions","organizations_url":"https://api.github.com/users/thomasmarkus/orgs","repos_url":"https://api.github.com/users/thomasmarkus/repos","events_url":"https://api.github.com/users/thomasmarkus/events{/privacy}","received_events_url":"https://api.github.com/users/thomasmarkus/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":22,"created_at":"2014-11-12T17:44:26Z","updated_at":"2014-11-12T22:01:11Z","closed_at":"2014-11-12T21:51:00Z","author_association":"NONE","active_lock_reason":null,"body":"I've got a 2-node cluster, both with 8G of heap and 16G ram total running on Java7 with Centos7\nToday, during a batch insert job I've begun noticing \"CorruptIndexException\"s like these:\n\n```\n[2014-11-12 17:42:06,305][WARN ][cluster.action.shard     ] [Cluemaster] [somtoday-iridium-straat1-2014-10-05][1] received shard failed for [somtoday-iridium-straat1-2014-10-05][1], node[W4q8\nnityRu6TsZQacyWTvQ], [R], s[INITIALIZING], indexUUID [nqd-mNyZTpqvD-rjml098g], reason [Failed to start shard, message [CorruptIndexException[[somtoday-iridium-straat1-2014-10-05][1] Preexisti\nng corrupted index [corrupted_FEmwcRlwQMWvhBuhU3kZzw] caused by: CorruptIndexException[codec footer mismatch: actual footer=-1637713527 vs expected footer=-1071082520 (resource: NIOFSIndexInp\nut(path=\"/home/elasticsearch/gotham/nodes/0/indices/somtoday-iridium-straat1-2014-10-05/1/index/_0.cfs\"))]\norg.apache.lucene.index.CorruptIndexException: codec footer mismatch: actual footer=-1637713527 vs expected footer=-1071082520 (resource: NIOFSIndexInput(path=\"/home/elasticsearch/got\nham/nodes/0/indices/somtoday-iridium-straat1-2014-10-05/1/index/_0.cfs\"))\n        at org.apache.lucene.codecs.CodecUtil.validateFooter(CodecUtil.java:235)\n        at org.apache.lucene.codecs.CodecUtil.retrieveChecksum(CodecUtil.java:228)\n        at org.elasticsearch.index.store.Store$MetadataSnapshot.checksumFromLuceneFile(Store.java:586)\n        at org.elasticsearch.index.store.Store$MetadataSnapshot.buildMetadata(Store.java:519)\n        at org.elasticsearch.index.store.Store$MetadataSnapshot.<init>(Store.java:502)\n        at org.elasticsearch.index.store.Store.getMetadata(Store.java:183)\n        at org.elasticsearch.index.store.Store.getMetadataOrEmpty(Store.java:147)\n        at org.elasticsearch.indices.cluster.IndicesClusterStateService.applyInitializingShard(IndicesClusterStateService.java:726)\n        at org.elasticsearch.indices.cluster.IndicesClusterStateService.applyNewOrUpdatedShards(IndicesClusterStateService.java:578)\n        at org.elasticsearch.indices.cluster.IndicesClusterStateService.clusterChanged(IndicesClusterStateService.java:182)\n        at org.elasticsearch.cluster.service.InternalClusterService$UpdateTask.run(InternalClusterService.java:431)\n        at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:153)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n        at java.lang.Thread.run(Thread.java:745)\n```\n\nI'm inserting at one node over REST and replicating with default settings to the other node.\nWill it automatically recover or do I need to do something about it?\n\n---\n\njava version \"1.7.0_71\"\nOpenJDK Runtime Environment (rhel-2.5.3.1.el7_0-x86_64 u71-b14)\nOpenJDK 64-Bit Server VM (build 24.65-b04, mixed mode)\n","closed_by":{"login":"thomasmarkus","id":5584610,"node_id":"MDQ6VXNlcjU1ODQ2MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/5584610?v=4","gravatar_id":"","url":"https://api.github.com/users/thomasmarkus","html_url":"https://github.com/thomasmarkus","followers_url":"https://api.github.com/users/thomasmarkus/followers","following_url":"https://api.github.com/users/thomasmarkus/following{/other_user}","gists_url":"https://api.github.com/users/thomasmarkus/gists{/gist_id}","starred_url":"https://api.github.com/users/thomasmarkus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thomasmarkus/subscriptions","organizations_url":"https://api.github.com/users/thomasmarkus/orgs","repos_url":"https://api.github.com/users/thomasmarkus/repos","events_url":"https://api.github.com/users/thomasmarkus/events{/privacy}","received_events_url":"https://api.github.com/users/thomasmarkus/received_events","type":"User","site_admin":false},"performed_via_github_app":null}