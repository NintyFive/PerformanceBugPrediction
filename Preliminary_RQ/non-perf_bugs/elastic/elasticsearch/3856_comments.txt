[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/25960501","html_url":"https://github.com/elastic/elasticsearch/issues/3856#issuecomment-25960501","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3856","id":25960501,"node_id":"MDEyOklzc3VlQ29tbWVudDI1OTYwNTAx","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2013-10-09T10:20:38Z","updated_at":"2013-10-09T10:20:38Z","author_association":"MEMBER","body":"@xawiers Can you share that script via a gist or something like that?\n\nThe `query` object in the percolate documents are parsed to a Lucene query and loaded into memory, so the number of number of percolate queries is bounded by the amount of memory you have per node. I don't expect that you would OOM when just indexing 2000 percolate queries.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/25962103","html_url":"https://github.com/elastic/elasticsearch/issues/3856#issuecomment-25962103","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3856","id":25962103,"node_id":"MDEyOklzc3VlQ29tbWVudDI1OTYyMTAz","user":{"login":"ksaveras","id":485111,"node_id":"MDQ6VXNlcjQ4NTExMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/485111?v=4","gravatar_id":"","url":"https://api.github.com/users/ksaveras","html_url":"https://github.com/ksaveras","followers_url":"https://api.github.com/users/ksaveras/followers","following_url":"https://api.github.com/users/ksaveras/following{/other_user}","gists_url":"https://api.github.com/users/ksaveras/gists{/gist_id}","starred_url":"https://api.github.com/users/ksaveras/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ksaveras/subscriptions","organizations_url":"https://api.github.com/users/ksaveras/orgs","repos_url":"https://api.github.com/users/ksaveras/repos","events_url":"https://api.github.com/users/ksaveras/events{/privacy}","received_events_url":"https://api.github.com/users/ksaveras/received_events","type":"User","site_admin":false},"created_at":"2013-10-09T10:52:22Z","updated_at":"2013-10-09T10:52:22Z","author_association":"NONE","body":"Plan is to have ~15000 percolate queries (let's assume these will be alerts)\nand every time I plan to check one by one document to see what alerts matches.\n\nBTW changed wildcard search to one / two words with wildcard at the end and it worked. With 6-8 words it does not work. It's possible to kill system :) if someone gains access to creating such amount of percolate queries.\n\nPHP code I used https://gist.github.com/xawiers/6899411\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/26068273","html_url":"https://github.com/elastic/elasticsearch/issues/3856#issuecomment-26068273","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3856","id":26068273,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDY4Mjcz","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2013-10-10T16:21:12Z","updated_at":"2013-10-10T16:21:12Z","author_association":"MEMBER","body":"@xawiers I see the same problem here, the wildcard queries take way more memory than just match queries.\n\nThis boils down on the Lucene level in the fact that the wildcard string in compiled into an automaton, which takes a lot of memory.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/26136956","html_url":"https://github.com/elastic/elasticsearch/issues/3856#issuecomment-26136956","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3856","id":26136956,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTM2OTU2","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2013-10-11T13:31:26Z","updated_at":"2013-10-11T13:32:15Z","author_association":"MEMBER","body":"@xawiers In your example I think you should use prefix query instead of the wildcard query. The `prefix` query does the same as the suffix wildcard query, but doesn't compile into a memory heavy automaton like the wildcard query does.\n\nOn top of this I think you should just use the `query_string` query, because that would do the expected behaviour in your case when you generate multiple words with wildcard. (each wildcard word, should be interpreted on its own instead of evaluating the complete string as wildcard expression).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/26247229","html_url":"https://github.com/elastic/elasticsearch/issues/3856#issuecomment-26247229","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3856","id":26247229,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MjQ3MjI5","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2013-10-14T10:35:49Z","updated_at":"2013-10-14T10:35:49Z","author_association":"MEMBER","body":"@xawiers Did you try to replace the `wildcard` query with `query_string`? This should significantly reduce the memory usage in your script.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/51635546","html_url":"https://github.com/elastic/elasticsearch/issues/3856#issuecomment-51635546","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3856","id":51635546,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjM1NTQ2","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-08-08T17:53:30Z","updated_at":"2014-08-08T17:53:30Z","author_association":"CONTRIBUTOR","body":"No feedback since last year. Closing\n","performed_via_github_app":null}]