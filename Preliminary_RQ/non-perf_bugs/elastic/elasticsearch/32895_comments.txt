[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/413408715","html_url":"https://github.com/elastic/elasticsearch/issues/32895#issuecomment-413408715","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32895","id":413408715,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzQwODcxNQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-08-16T02:58:19Z","updated_at":"2018-08-16T02:58:19Z","author_association":"MEMBER","body":"Sorry, but we need reproduction steps.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/413417107","html_url":"https://github.com/elastic/elasticsearch/issues/32895#issuecomment-413417107","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/32895","id":413417107,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMzQxNzEwNw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-08-16T03:52:19Z","updated_at":"2018-08-16T03:52:19Z","author_association":"MEMBER","body":"I think that you have a broken client. If I use `nc` and send an invalid request (i.e., without saying `HTTP/1.1`), I can reproduce this issue:\r\n\r\n```\r\n23:46:34 [jason:~/src/netty/netty] 4.1 125 ± docker run --rm -p 9200:9200 -p 9300:9300 -e discovery.type=single-node docker.elastic.co/elasticsearch/elasticsearch:6.2.2\r\nUnable to find image 'docker.elastic.co/elasticsearch/elasticsearch:6.2.2' locally\r\n6.2.2: Pulling from elasticsearch/elasticsearch\r\naf4b0a2388c6: Pull complete \r\n9f2b4072a82e: Pull complete \r\n420654deff44: Pull complete \r\n2eedd2602cca: Pull complete \r\n3585183d966d: Pull complete \r\nb4209ef6b414: Pull complete \r\nDigest: sha256:5b2bb3e91379f04a9da7c477314a24b2428fb1a4c20696991dff54b70d1b4ef3\r\nStatus: Downloaded newer image for docker.elastic.co/elasticsearch/elasticsearch:6.2.2\r\n[2018-08-16T03:47:44,345][INFO ][o.e.n.Node               ] [] initializing ...\r\n[2018-08-16T03:47:44,404][INFO ][o.e.e.NodeEnvironment    ] [fzwa6Nl] using [1] data paths, mounts [[/ (overlay)]], net usable_space [53.8gb], net total_space [58.4gb], types [overlay]\r\n[2018-08-16T03:47:44,405][INFO ][o.e.e.NodeEnvironment    ] [fzwa6Nl] heap size [990.7mb], compressed ordinary object pointers [true]\r\n[2018-08-16T03:47:44,406][INFO ][o.e.n.Node               ] node name [fzwa6Nl] derived from node ID [fzwa6NluQsOI8cKRr3iTPw]; set [node.name] to override\r\n[2018-08-16T03:47:44,407][INFO ][o.e.n.Node               ] version[6.2.2], pid[1], build[10b1edd/2018-02-16T19:01:30.685723Z], OS[Linux/4.9.93-linuxkit-aufs/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/1.8.0_161/25.161-b14]\r\n[2018-08-16T03:47:44,407][INFO ][o.e.n.Node               ] JVM arguments [-Xms1g, -Xmx1g, -XX:+UseConcMarkSweepGC, -XX:CMSInitiatingOccupancyFraction=75, -XX:+UseCMSInitiatingOccupancyOnly, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Djava.io.tmpdir=/tmp/elasticsearch.Mmc2p6ak, -XX:+HeapDumpOnOutOfMemoryError, -XX:+PrintGCDetails, -XX:+PrintGCDateStamps, -XX:+PrintTenuringDistribution, -XX:+PrintGCApplicationStoppedTime, -Xloggc:logs/gc.log, -XX:+UseGCLogFileRotation, -XX:NumberOfGCLogFiles=32, -XX:GCLogFileSize=64m, -Des.cgroups.hierarchy.override=/, -Des.path.home=/usr/share/elasticsearch, -Des.path.conf=/usr/share/elasticsearch/config]\r\n[2018-08-16T03:47:45,964][INFO ][o.e.p.PluginsService     ] [fzwa6Nl] loaded module [aggs-matrix-stats]\r\n[2018-08-16T03:47:45,964][INFO ][o.e.p.PluginsService     ] [fzwa6Nl] loaded module [analysis-common]\r\n[2018-08-16T03:47:45,964][INFO ][o.e.p.PluginsService     ] [fzwa6Nl] loaded module [ingest-common]\r\n[2018-08-16T03:47:45,964][INFO ][o.e.p.PluginsService     ] [fzwa6Nl] loaded module [lang-expression]\r\n[2018-08-16T03:47:45,964][INFO ][o.e.p.PluginsService     ] [fzwa6Nl] loaded module [lang-mustache]\r\n[2018-08-16T03:47:45,965][INFO ][o.e.p.PluginsService     ] [fzwa6Nl] loaded module [lang-painless]\r\n[2018-08-16T03:47:45,965][INFO ][o.e.p.PluginsService     ] [fzwa6Nl] loaded module [mapper-extras]\r\n[2018-08-16T03:47:45,965][INFO ][o.e.p.PluginsService     ] [fzwa6Nl] loaded module [parent-join]\r\n[2018-08-16T03:47:45,965][INFO ][o.e.p.PluginsService     ] [fzwa6Nl] loaded module [percolator]\r\n[2018-08-16T03:47:45,965][INFO ][o.e.p.PluginsService     ] [fzwa6Nl] loaded module [rank-eval]\r\n[2018-08-16T03:47:45,965][INFO ][o.e.p.PluginsService     ] [fzwa6Nl] loaded module [reindex]\r\n[2018-08-16T03:47:45,966][INFO ][o.e.p.PluginsService     ] [fzwa6Nl] loaded module [repository-url]\r\n[2018-08-16T03:47:45,966][INFO ][o.e.p.PluginsService     ] [fzwa6Nl] loaded module [transport-netty4]\r\n[2018-08-16T03:47:45,966][INFO ][o.e.p.PluginsService     ] [fzwa6Nl] loaded module [tribe]\r\n[2018-08-16T03:47:45,967][INFO ][o.e.p.PluginsService     ] [fzwa6Nl] loaded plugin [ingest-geoip]\r\n[2018-08-16T03:47:45,967][INFO ][o.e.p.PluginsService     ] [fzwa6Nl] loaded plugin [ingest-user-agent]\r\n[2018-08-16T03:47:45,967][INFO ][o.e.p.PluginsService     ] [fzwa6Nl] loaded plugin [x-pack-core]\r\n[2018-08-16T03:47:45,967][INFO ][o.e.p.PluginsService     ] [fzwa6Nl] loaded plugin [x-pack-deprecation]\r\n[2018-08-16T03:47:45,967][INFO ][o.e.p.PluginsService     ] [fzwa6Nl] loaded plugin [x-pack-graph]\r\n[2018-08-16T03:47:45,968][INFO ][o.e.p.PluginsService     ] [fzwa6Nl] loaded plugin [x-pack-logstash]\r\n[2018-08-16T03:47:45,968][INFO ][o.e.p.PluginsService     ] [fzwa6Nl] loaded plugin [x-pack-ml]\r\n[2018-08-16T03:47:45,968][INFO ][o.e.p.PluginsService     ] [fzwa6Nl] loaded plugin [x-pack-monitoring]\r\n[2018-08-16T03:47:45,968][INFO ][o.e.p.PluginsService     ] [fzwa6Nl] loaded plugin [x-pack-security]\r\n[2018-08-16T03:47:45,968][INFO ][o.e.p.PluginsService     ] [fzwa6Nl] loaded plugin [x-pack-upgrade]\r\n[2018-08-16T03:47:45,968][INFO ][o.e.p.PluginsService     ] [fzwa6Nl] loaded plugin [x-pack-watcher]\r\n[2018-08-16T03:47:48,892][INFO ][o.e.x.m.j.p.l.CppLogMessageHandler] [controller/120] [Main.cc@128] controller (64 bit): Version 6.2.2 (Build 61c43548e5e0f2) Copyright (c) 2018 Elasticsearch BV\r\n[2018-08-16T03:47:49,631][INFO ][o.e.d.DiscoveryModule    ] [fzwa6Nl] using discovery type [single-node]\r\n[2018-08-16T03:47:50,569][INFO ][o.e.n.Node               ] initialized\r\n[2018-08-16T03:47:50,570][INFO ][o.e.n.Node               ] [fzwa6Nl] starting ...\r\n[2018-08-16T03:47:50,755][INFO ][o.e.t.TransportService   ] [fzwa6Nl] publish_address {172.17.0.2:9300}, bound_addresses {0.0.0.0:9300}\r\n[2018-08-16T03:47:50,883][INFO ][o.e.x.s.t.n.SecurityNetty4HttpServerTransport] [fzwa6Nl] publish_address {172.17.0.2:9200}, bound_addresses {0.0.0.0:9200}\r\n[2018-08-16T03:47:50,884][INFO ][o.e.n.Node               ] [fzwa6Nl] started\r\n[2018-08-16T03:47:51,077][INFO ][o.e.g.GatewayService     ] [fzwa6Nl] recovered [0] indices into cluster_state\r\n[2018-08-16T03:47:51,605][INFO ][o.e.l.LicenseService     ] [fzwa6Nl] license [615b0649-5abe-4783-a1ae-b1fe2a4d21b6] mode [basic] - valid\r\n[2018-08-16T03:48:00,658][INFO ][o.e.c.m.MetaDataCreateIndexService] [fzwa6Nl] [.monitoring-es-6-2018.08.16] creating index, cause [auto(bulk api)], templates [.monitoring-es], shards [1]/[0], mappings [doc]\r\n[2018-08-16T03:48:00,830][INFO ][o.e.c.r.a.AllocationService] [fzwa6Nl] Cluster health status changed from [YELLOW] to [GREEN] (reason: [shards started [[.monitoring-es-6-2018.08.16][0]] ...]).\r\n```\r\n\r\nAnd then:\r\n\r\n```\r\n23:49:16 [jason:~/src/netty/netty] 4.1 ± nc localhost 9200\r\nGET /\r\nHTTP/1.0 400 Bad Request\r\ncontent-type: application/json; charset=UTF-8\r\ncontent-length: 203\r\n\r\n{\"error\":{\"root_cause\":[{\"type\":\"illegal_argument_exception\",\"reason\":\"text is empty (possibly HTTP/0.9)\"}],\"type\":\"illegal_argument_exception\",\"reason\":\"text is empty (possibly HTTP/0.9)\"},\"status\":400}\r\n```\r\n\r\nI am closing this as a client-side issue on your end. Please feel free to comment if you think that I have triaged this incorrectly.","performed_via_github_app":null}]