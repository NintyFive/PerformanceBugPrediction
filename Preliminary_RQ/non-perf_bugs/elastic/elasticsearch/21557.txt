{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/21557","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21557/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21557/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21557/events","html_url":"https://github.com/elastic/elasticsearch/issues/21557","id":189300051,"node_id":"MDU6SXNzdWUxODkzMDAwNTE=","number":21557,"title":"How to configure docker-compose for storing data of Elastic search out-side of docker container?","user":{"login":"DhairyashilBhosale","id":6925937,"node_id":"MDQ6VXNlcjY5MjU5Mzc=","avatar_url":"https://avatars1.githubusercontent.com/u/6925937?v=4","gravatar_id":"","url":"https://api.github.com/users/DhairyashilBhosale","html_url":"https://github.com/DhairyashilBhosale","followers_url":"https://api.github.com/users/DhairyashilBhosale/followers","following_url":"https://api.github.com/users/DhairyashilBhosale/following{/other_user}","gists_url":"https://api.github.com/users/DhairyashilBhosale/gists{/gist_id}","starred_url":"https://api.github.com/users/DhairyashilBhosale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DhairyashilBhosale/subscriptions","organizations_url":"https://api.github.com/users/DhairyashilBhosale/orgs","repos_url":"https://api.github.com/users/DhairyashilBhosale/repos","events_url":"https://api.github.com/users/DhairyashilBhosale/events{/privacy}","received_events_url":"https://api.github.com/users/DhairyashilBhosale/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2016-11-15T04:57:19Z","updated_at":"2016-11-15T05:29:01Z","closed_at":"2016-11-15T05:29:01Z","author_association":"NONE","active_lock_reason":null,"body":"_**Check following for:**_\r\n\r\n                 **1: Docker-compose.yml**\r\n                 **2: elasticsearch.yml**\r\n\r\nSo in Elasticsearch configuration file, data will be stored in this path ***/Elasticsearch/data***  i.e. out-side of docker container\r\n\r\nbut I checked in ***/Elasticsearch/data*** directory there are no ***/node*** or ***/0*** directory is created.\r\n\r\n**So How to store Data out-side elasticsearch-docker-container?**\r\n\r\n\r\n**1: Docker-compose.yml**\r\n\r\n\r\n         elk:\r\n    \r\n          image: elasticsearch:latest\r\n    \r\n          ports:    \r\n            - \" 127.0.0.1:9200:9200\"\r\n            - \"9300:9300\"\r\n    \r\n          volumes:\r\n            - ./Elasticsearch/data:/var/lib/elasticsearch\r\n            - ./Elasticsearch/config/elasticsearch.yml:/etc/elasticsearch/config/elasticsearch.yml\r\n    \r\n          tty : true\r\n    \r\n        Redis:\r\n          image: redis:latest\r\n    \r\n          ports:\r\n            - \"6379:6379\"\r\n    \r\n          volumes:\r\n            - /Redis/redis.conf:/var/lib/redis\r\n    \r\n          restart: always`\r\n\r\n**2: elasticsearch.yml**\r\n\r\n`##################### Elasticsearch Configuration Example #####################\r\n    \r\n    # This file contains an overview of various configuration settings,\r\n    # targeted at operations staff. Application developers should\r\n    # consult the guide at <http://elasticsearch.org/guide>.\r\n    #\r\n    # The installation procedure is covered at\r\n    # <http://elasticsearch.org/guide/en/elasticsearch/reference/current/setup.html>.\r\n    #\r\n    # Elasticsearch comes with reasonable defaults for most settings,\r\n    # so you can try it out without bothering with configuration.\r\n    #\r\n    # Most of the time, these defaults are just fine for running a production\r\n    # cluster. If you're fine-tuning your cluster, or wondering about the\r\n    # effect of certain configuration option, please _do ask_ on the\r\n    # mailing list or IRC channel [http://elasticsearch.org/community].\r\n    \r\n    # Any element in the configuration can be replaced with environment variables\r\n    # by placing them in ${...} notation. For example:\r\n    #\r\n    #node.rack: ${RACK_ENV_VAR}\r\n    \r\n    # For information on supported formats and syntax for the config file, see\r\n    # <http://elasticsearch.org/guide/en/elasticsearch/reference/current/setup-configuration.html>\r\n    \r\n    \r\n    ################################### Cluster ###################################\r\n    \r\n    # Cluster name identifies your cluster for auto-discovery. If you're running\r\n    # multiple clusters on the same network, make sure you're using unique names.\r\n    #\r\n    cluster.name: test_cluster\r\n    \r\n    \r\n    #################################### Node #####################################\r\n    \r\n    # Node names are generated dynamically on startup, so you're relieved\r\n    # from configuring them manually. You can tie this node to a specific name:\r\n    #\r\n    node.name: \"pun-essrv01_Logstash\"\r\n    \r\n    # Every node can be configured to allow or deny being eligible as the master,\r\n    # and to allow or deny to store the data.\r\n    #\r\n    # Allow this node to be eligible as a master node (enabled by default):\r\n    #\r\n    #node.master: true\r\n    #\r\n    # Allow this node to store data (enabled by default):\r\n    #\r\n    #node.data: true\r\n    \r\n    # You can exploit these settings to design advanced cluster topologies.\r\n    #\r\n    # 1. You want this node to never become a master node, only to hold data.\r\n    #    This will be the \"workhorse\" of your cluster.\r\n    #\r\n    #node.master: false\r\n    #node.data: true\r\n    #\r\n    # 2. You want this node to only serve as a master: to not store any data and\r\n    #    to have free resources. This will be the \"coordinator\" of your cluster.\r\n    #\r\n    #node.master: true\r\n    #node.data: false\r\n    #\r\n    # 3. You want this node to be neither master nor data node, but\r\n    #    to act as a \"search load balancer\" (fetching data from nodes,\r\n    #    aggregating results, etc.)\r\n    #\r\n    #node.master: false\r\n    #node.data: false\r\n    \r\n    # Use the Cluster Health API [http://localhost:9200/_cluster/health], the\r\n    # Node Info API [http://localhost:9200/_nodes] or GUI tools\r\n    # such as <http://www.elasticsearch.org/overview/marvel/>,\r\n    # <http://github.com/karmi/elasticsearch-paramedic>,\r\n    # <http://github.com/lukas-vlcek/bigdesk> and\r\n    # <http://mobz.github.com/elasticsearch-head> to inspect the cluster state.\r\n    \r\n    # A node can have generic attributes associated with it, which can later be used\r\n    # for customized shard allocation filtering, or allocation awareness. An attribute\r\n    # is a simple key value pair, similar to node.key: value, here is an example:\r\n    #\r\n    #node.rack: rack314\r\n    \r\n    # By default, multiple nodes are allowed to start from the same installation location\r\n    # to disable it, set the following:\r\n    #node.max_local_storage_nodes: 1\r\n    \r\n    \r\n    #################################### Index ####################################\r\n    \r\n    # You can set a number of options (such as shard/replica options, mapping\r\n    # or analyzer definitions, translog settings, ...) for indices globally,\r\n    # in this file.\r\n    #\r\n    # Note, that it makes more sense to configure index settings specifically for\r\n    # a certain index, either when creating it or by using the index templates API.\r\n    #\r\n    # See <http://elasticsearch.org/guide/en/elasticsearch/reference/current/index-modules.html> and\r\n    # <http://elasticsearch.org/guide/en/elasticsearch/reference/current/indices-create-index.html>\r\n    # for more information.\r\n    \r\n    # Set the number of shards (splits) of an index (5 by default):\r\n    #\r\n    #index.number_of_shards: 5\r\n    \r\n    # Set the number of replicas (additional copies) of an index (1 by default):\r\n    #\r\n    #index.number_of_replicas: 1\r\n    \r\n    # Note, that for development on a local machine, with small indices, it usually\r\n    # makes sense to \"disable\" the distributed features:\r\n    #\r\n    #index.number_of_shards: 1\r\n    #index.number_of_replicas: 0\r\n    \r\n    # These settings directly affect the performance of index and search operations\r\n    # in your cluster. Assuming you have enough machines to hold shards and\r\n    # replicas, the rule of thumb is:\r\n    #\r\n    # 1. Having more *shards* enhances the _indexing_ performance and allows to\r\n    #    _distribute_ a big index across machines.\r\n    # 2. Having more *replicas* enhances the _search_ performance and improves the\r\n    #    cluster _availability_.\r\n    #\r\n    # The \"number_of_shards\" is a one-time setting for an index.\r\n    #\r\n    # The \"number_of_replicas\" can be increased or decreased anytime,\r\n    # by using the Index Update Settings API.\r\n    #\r\n    # Elasticsearch takes care about load balancing, relocating, gathering the\r\n    # results from nodes, etc. Experiment with different settings to fine-tune\r\n    # your setup.\r\n    \r\n    # Use the Index Status API (<http://localhost:9200/A/_status>) to inspect\r\n    # the index status.\r\n    \r\n    \r\n    #################################### Paths ####################################\r\n    \r\n    # Path to directory containing configuration (this file and logging.yml):\r\n    #\r\n    #path.conf: /path/to/conf\r\n    \r\n    # Path to directory where to store index data allocated for this node.\r\n    #\r\n    path.data: /usr/ELK_Docker_Dir/Elasticsearch/data\r\n    #\r\n    # Can optionally include more than one location, causing data to be striped across\r\n    # the locations (a la RAID 0) on a file level, favouring locations with most free\r\n    # space on creation. For example:\r\n    #\r\n    #path.data: /path/to/data1,/path/to/data2\r\n    \r\n    # Path to temporary files:\r\n    #\r\n    #path.work: /path/to/work\r\n    \r\n    # Path to log files:\r\n    #\r\n    #path.logs: /path/to/logs\r\n    \r\n    # Path to where plugins are installed:\r\n    #\r\n    #path.plugins: /path/to/plugins\r\n    \r\n    \r\n    #################################### Plugin ###################################\r\n    \r\n    # If a plugin listed here is not installed for current node, the node will not start.\r\n    #\r\n    #plugin.mandatory: mapper-attachments,lang-groovy\r\n    \r\n    \r\n    ################################### Memory ####################################\r\n    \r\n    # Elasticsearch performs poorly when JVM starts swapping: you should ensure that\r\n    # it _never_ swaps.\r\n    #\r\n    # Set this property to true to lock the memory:\r\n    #\r\n    #bootstrap.mlockall: true\r\n    \r\n    # Make sure that the ES_MIN_MEM and ES_MAX_MEM environment variables are set\r\n    # to the same value, and that the machine has enough memory to allocate\r\n    # for Elasticsearch, leaving enough memory for the operating system itself.\r\n    #\r\n    # You should also make sure that the Elasticsearch process is allowed to lock\r\n    # the memory, eg. by using `ulimit -l unlimited`.\r\n    \r\n    \r\n    ############################## Network And HTTP ###############################\r\n    \r\n    # Elasticsearch, by default, binds itself to the 0.0.0.0 address, and listens\r\n    # on port [9200-9300] for HTTP traffic and on port [9300-9400] for node-to-node\r\n    # communication. (the range means that if the port is busy, it will automatically\r\n    # try the next port).\r\n    \r\n    # Set the bind address specifically (IPv4 or IPv6):\r\n    #\r\n    #network.bind_host: 192.168.0.1\r\n    \r\n    # Set the address other nodes will use to communicate with this node. If not\r\n    # set, it is automatically derived. It must point to an actual IP address.\r\n    #\r\n    #network.publish_host: 192.168.0.1\r\n    \r\n    # Set both 'bind_host' and 'publish_host':\r\n    #\r\n    #network.host: 192.168.0.1\r\n    \r\n    # Set a custom port for the node to node communication (9300 by default):\r\n    #\r\n    #transport.tcp.port: 9300\r\n    \r\n    # Enable compression for all communication between nodes (disabled by default):\r\n    #\r\n    #transport.tcp.compress: true\r\n    \r\n    # Set a custom port to listen for HTTP traffic:\r\n    #\r\n    #http.port: 9200\r\n    \r\n    # Set a custom allowed content length:\r\n    #\r\n    #http.max_content_length: 100mb\r\n    \r\n    # Disable HTTP completely:\r\n    #\r\n    #http.enabled: false\r\n    \r\n    http.cors.allow-origin: http://127.0.0.1\r\n    http.cors.enabled: true\r\n    \r\n    ################################### Gateway ###################################\r\n    \r\n    # The gateway allows for persisting the cluster state between full cluster\r\n    # restarts. Every change to the state (such as adding an index) will be stored\r\n    # in the gateway, and when the cluster starts up for the first time,\r\n    # it will read its state from the gateway.\r\n    \r\n    # There are several types of gateway implementations. For more information, see\r\n    # <http://elasticsearch.org/guide/en/elasticsearch/reference/current/modules-gateway.html>.\r\n    \r\n    # The default gateway type is the \"local\" gateway (recommended):\r\n    #\r\n    #gateway.type: local\r\n    \r\n    # Settings below control how and when to start the initial recovery process on\r\n    # a full cluster restart (to reuse as much local data as possible when using shared\r\n    # gateway).\r\n    \r\n    # Allow recovery process after N nodes in a cluster are up:\r\n    #\r\n    #gateway.recover_after_nodes: 1\r\n    \r\n    # Set the timeout to initiate the recovery process, once the N nodes\r\n    # from previous setting are up (accepts time value):\r\n    #\r\n    #gateway.recover_after_time: 5m\r\n    \r\n    # Set how many nodes are expected in this cluster. Once these N nodes\r\n    # are up (and recover_after_nodes is met), begin recovery process immediately\r\n    # (without waiting for recover_after_time to expire):\r\n    #\r\n    #gateway.expected_nodes: 2\r\n    \r\n    \r\n    ############################# Recovery Throttling #############################\r\n    \r\n    # These settings allow to control the process of shards allocation between\r\n    # nodes during initial recovery, replica allocation, rebalancing,\r\n    # or when adding and removing nodes.\r\n    \r\n    # Set the number of concurrent recoveries happening on a node:\r\n    #\r\n    # 1. During the initial recovery\r\n    #\r\n    #cluster.routing.allocation.node_initial_primaries_recoveries: 4\r\n    #\r\n    # 2. During adding/removing nodes, rebalancing, etc\r\n    #\r\n    #cluster.routing.allocation.node_concurrent_recoveries: 2\r\n    \r\n    # Set to throttle throughput when recovering (eg. 100mb, by default 20mb):\r\n    #\r\n    #indices.recovery.max_bytes_per_sec: 20mb\r\n    \r\n    # Set to limit the number of open concurrent streams when\r\n    # recovering a shard from a peer:\r\n    #\r\n    #indices.recovery.concurrent_streams: 5\r\n    \r\n    \r\n    ################################## Discovery ##################################\r\n    \r\n    # Discovery infrastructure ensures nodes can be found within a cluster\r\n    # and master node is elected. Multicast discovery is the default.\r\n    \r\n    # Set to ensure a node sees N other master eligible nodes to be considered\r\n    # operational within the cluster. This should be set to a quorum/majority of \r\n    # the master-eligible nodes in the cluster.\r\n    #\r\n    #discovery.zen.minimum_master_nodes: 1\r\n    \r\n    # Set the time to wait for ping responses from other nodes when discovering.\r\n    # Set this option to a higher value on a slow or congested network\r\n    # to minimize discovery failures:\r\n    #\r\n    #discovery.zen.ping.timeout: 3s\r\n    \r\n    # For more information, see\r\n    # <http://elasticsearch.org/guide/en/elasticsearch/reference/current/modules-discovery-zen.html>\r\n    \r\n    # Unicast discovery allows to explicitly control which nodes will be used\r\n    # to discover the cluster. It can be used when multicast is not present,\r\n    # or to restrict the cluster communication-wise.\r\n    #\r\n    # 1. Disable multicast discovery (enabled by default):\r\n    #\r\n    #discovery.zen.ping.multicast.enabled: false\r\n    #\r\n    # 2. Configure an initial list of master nodes in the cluster\r\n    #    to perform discovery when new nodes (master or data) are started:\r\n    #\r\n    #discovery.zen.ping.unicast.hosts: [\"host1\", \"host2:port\"]\r\n    \r\n    # EC2 discovery allows to use AWS EC2 API in order to perform discovery.\r\n    #\r\n    # You have to install the cloud-aws plugin for enabling the EC2 discovery.\r\n    #\r\n    # For more information, see\r\n    # <http://elasticsearch.org/guide/en/elasticsearch/reference/current/modules-discovery-ec2.html>\r\n    #\r\n    # See <http://elasticsearch.org/tutorials/elasticsearch-on-ec2/>\r\n    # for a step-by-step tutorial.\r\n    \r\n    # GCE discovery allows to use Google Compute Engine API in order to perform discovery.\r\n    #\r\n    # You have to install the cloud-gce plugin for enabling the GCE discovery.\r\n    #\r\n    # For more information, see <https://github.com/elasticsearch/elasticsearch-cloud-gce>.\r\n    \r\n    # Azure discovery allows to use Azure API in order to perform discovery.\r\n    #\r\n    # You have to install the cloud-azure plugin for enabling the Azure discovery.\r\n    #\r\n    # For more information, see <https://github.com/elasticsearch/elasticsearch-cloud-azure>.\r\n    \r\n    ################################## Slow Log ##################################\r\n    \r\n    # Shard level query and fetch threshold logging.\r\n    \r\n    #index.search.slowlog.threshold.query.warn: 10s\r\n    #index.search.slowlog.threshold.query.info: 5s\r\n    #index.search.slowlog.threshold.query.debug: 2s\r\n    #index.search.slowlog.threshold.query.trace: 500ms\r\n    \r\n    #index.search.slowlog.threshold.fetch.warn: 1s\r\n    #index.search.slowlog.threshold.fetch.info: 800ms\r\n    #index.search.slowlog.threshold.fetch.debug: 500ms\r\n    #index.search.slowlog.threshold.fetch.trace: 200ms\r\n    \r\n    #index.indexing.slowlog.threshold.index.warn: 10s\r\n    #index.indexing.slowlog.threshold.index.info: 5s\r\n    #index.indexing.slowlog.threshold.index.debug: 2s\r\n    #index.indexing.slowlog.threshold.index.trace: 500ms\r\n    \r\n    ################################## GC Logging ################################\r\n    \r\n    #monitor.jvm.gc.young.warn: 1000ms\r\n    #monitor.jvm.gc.young.info: 700ms\r\n    #monitor.jvm.gc.young.debug: 400ms\r\n    \r\n    #monitor.jvm.gc.old.warn: 10s\r\n    #monitor.jvm.gc.old.info: 5s\r\n    #monitor.jvm.gc.old.debug: 2s\r\n    \r\n    ################################## Security ################################\r\n    \r\n    # Uncomment if you want to enable JSONP as a valid return transport on the\r\n    # http server. With this enabled, it may pose a security risk, so disabling\r\n    # it unless you need it is recommended (it is disabled by default).\r\n    #\r\n    #http.jsonp.enable: true`","closed_by":{"login":"DhairyashilBhosale","id":6925937,"node_id":"MDQ6VXNlcjY5MjU5Mzc=","avatar_url":"https://avatars1.githubusercontent.com/u/6925937?v=4","gravatar_id":"","url":"https://api.github.com/users/DhairyashilBhosale","html_url":"https://github.com/DhairyashilBhosale","followers_url":"https://api.github.com/users/DhairyashilBhosale/followers","following_url":"https://api.github.com/users/DhairyashilBhosale/following{/other_user}","gists_url":"https://api.github.com/users/DhairyashilBhosale/gists{/gist_id}","starred_url":"https://api.github.com/users/DhairyashilBhosale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DhairyashilBhosale/subscriptions","organizations_url":"https://api.github.com/users/DhairyashilBhosale/orgs","repos_url":"https://api.github.com/users/DhairyashilBhosale/repos","events_url":"https://api.github.com/users/DhairyashilBhosale/events{/privacy}","received_events_url":"https://api.github.com/users/DhairyashilBhosale/received_events","type":"User","site_admin":false},"performed_via_github_app":null}