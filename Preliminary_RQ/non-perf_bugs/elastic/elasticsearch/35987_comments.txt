[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/442403788","html_url":"https://github.com/elastic/elasticsearch/issues/35987#issuecomment-442403788","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35987","id":442403788,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MjQwMzc4OA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-11-28T10:48:50Z","updated_at":"2018-11-28T10:48:50Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-analytics-geo","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/444856193","html_url":"https://github.com/elastic/elasticsearch/issues/35987#issuecomment-444856193","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35987","id":444856193,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NDg1NjE5Mw==","user":{"login":"diogoholanda","id":11463487,"node_id":"MDQ6VXNlcjExNDYzNDg3","avatar_url":"https://avatars2.githubusercontent.com/u/11463487?v=4","gravatar_id":"","url":"https://api.github.com/users/diogoholanda","html_url":"https://github.com/diogoholanda","followers_url":"https://api.github.com/users/diogoholanda/followers","following_url":"https://api.github.com/users/diogoholanda/following{/other_user}","gists_url":"https://api.github.com/users/diogoholanda/gists{/gist_id}","starred_url":"https://api.github.com/users/diogoholanda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/diogoholanda/subscriptions","organizations_url":"https://api.github.com/users/diogoholanda/orgs","repos_url":"https://api.github.com/users/diogoholanda/repos","events_url":"https://api.github.com/users/diogoholanda/events{/privacy}","received_events_url":"https://api.github.com/users/diogoholanda/received_events","type":"User","site_admin":false},"created_at":"2018-12-06T12:33:11Z","updated_at":"2018-12-06T12:33:11Z","author_association":"NONE","body":"@cbuescher what's the best way to move this forward?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/444866767","html_url":"https://github.com/elastic/elasticsearch/issues/35987#issuecomment-444866767","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35987","id":444866767,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NDg2Njc2Nw==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2018-12-06T13:15:13Z","updated_at":"2018-12-06T13:15:13Z","author_association":"MEMBER","body":"@diogoholanda By labeling this issue it should be in the queue for one of our area teams, so it should get picked up soon.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/445076555","html_url":"https://github.com/elastic/elasticsearch/issues/35987#issuecomment-445076555","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35987","id":445076555,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NTA3NjU1NQ==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2018-12-07T00:10:12Z","updated_at":"2018-12-07T00:10:12Z","author_association":"MEMBER","body":"We chatted about this earlier in the week and I just didn't get a chance to respond.  Sorry!\r\n\r\nIt does seem like a bug.  Looking at the code, what we're giving the user is basically the maximum potential doc_count of a term which didn't make _any of the shards_ top `n`.  Which isn't quite what we intended.  It should be the maximum potential doc_countn of a term which didn't make the final top `n`, not just any particular shard.\r\n\r\nTo fix this, I think we need to also track the max doc_count of buckets pruned during the final reduction and use that to modify the error (if applicable).\r\n\r\nThat said, the goal of the error is to express to the user an order of \"wrongness\" in their results, as a way to gauge how much to trust it.  So I could see it going three ways:\r\n\r\n1. It's a bug, would be nice to fix but not critical since the error should be reasonably close except for the most antagonist datasets\r\n2. Fix the bug so it's accurate\r\n3. Find some way to express the error in a unit-less quantity, so that the user gets a sense of magnitude without actual hard numbers (percentage, or something?  Not sure).\r\n\r\nI'm going to label this as a `bug` and `help-wanted`.  If you'd like to work on a PR to fix it we'd love to work with you to get it fixed!","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/648962445","html_url":"https://github.com/elastic/elasticsearch/issues/35987#issuecomment-648962445","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/35987","id":648962445,"node_id":"MDEyOklzc3VlQ29tbWVudDY0ODk2MjQ0NQ==","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2020-06-24T17:35:45Z","updated_at":"2020-06-24T17:35:45Z","author_association":"MEMBER","body":"We don't have any immediate plans on fixing this issue at the moment. Closing.","performed_via_github_app":null}]