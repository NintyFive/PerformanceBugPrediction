{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/28766","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28766/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28766/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28766/events","html_url":"https://github.com/elastic/elasticsearch/issues/28766","id":299007958,"node_id":"MDU6SXNzdWUyOTkwMDc5NTg=","number":28766,"title":"query_string query works wrong for wildcard","user":{"login":"nikoncode","id":838300,"node_id":"MDQ6VXNlcjgzODMwMA==","avatar_url":"https://avatars2.githubusercontent.com/u/838300?v=4","gravatar_id":"","url":"https://api.github.com/users/nikoncode","html_url":"https://github.com/nikoncode","followers_url":"https://api.github.com/users/nikoncode/followers","following_url":"https://api.github.com/users/nikoncode/following{/other_user}","gists_url":"https://api.github.com/users/nikoncode/gists{/gist_id}","starred_url":"https://api.github.com/users/nikoncode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nikoncode/subscriptions","organizations_url":"https://api.github.com/users/nikoncode/orgs","repos_url":"https://api.github.com/users/nikoncode/repos","events_url":"https://api.github.com/users/nikoncode/events{/privacy}","received_events_url":"https://api.github.com/users/nikoncode/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-02-21T15:12:38Z","updated_at":"2018-02-22T09:33:19Z","closed_at":"2018-02-21T15:36:37Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`): 6.2.1\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version** (`java -version`): OpenJDK Runtime Environment (build 1.8.0_162-b01)\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): Linux mikita-pc 4.14.20-2-MANJARO #1 SMP PREEMPT Sat Feb 17 21:47:27 CET 2018 x86_64 GNU/Linux\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nLet's imagine I have two values: [\"aa\", \"bb\"]\r\n(aa, bb) -> returns both (expected)\r\n(a*) -> return aa (expected)\r\n(a*, bb) -> returns bb (not expected)\r\n(a*,bb) -> returns nothing (not expected)\r\n(a* bb) -> returns both (kind of expected)\r\n\r\n**Steps to reproduce**:\r\n\r\n```\r\nPOST localhost:9200/tests/test/1\r\n{\r\n\t\"name\": \"aa\"\r\n}\r\n\r\nPOST localhost:9200/tests/test/2\r\n{\r\n\t\"name\": \"bb\"\r\n}\r\n\r\nPOST localhost:9200/tests/test/_search (return both, expected)\r\n{\r\n   \"query\":{\r\n      \"query_string\":{\r\n         \"query\":\"(aa, bb)\",\r\n         \"default_field\":\"name\"\r\n      }\r\n   }\r\n}\r\n\r\nPOST localhost:9200/tests/test/_search (return one, expected)\r\n{\r\n   \"query\":{\r\n      \"query_string\":{\r\n         \"query\":\"(a*)\",\r\n         \"default_field\":\"name\"\r\n      }\r\n   }\r\n}\r\n\r\nPOST localhost:9200/tests/test/_search (return only one, not expected)\r\n{\r\n   \"query\":{\r\n      \"query_string\":{\r\n         \"query\":\"(a*, bb)\",\r\n         \"default_field\":\"name\"\r\n      }\r\n   }\r\n}\r\n\r\nPOST localhost:9200/tests/test/_search (return nothing, not expected)\r\n{\r\n   \"query\":{\r\n      \"query_string\":{\r\n         \"query\":\"(a*,bb)\",\r\n         \"default_field\":\"name\"\r\n      }\r\n   }\r\n}\r\n\r\nPOST localhost:9200/tests/test/_search (return both)\r\n{\r\n   \"query\":{\r\n      \"query_string\":{\r\n         \"query\":\"(a* bb)\",\r\n         \"default_field\":\"name\"\r\n      }\r\n   }\r\n}\r\n```\r\n\r\n\r\n","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}