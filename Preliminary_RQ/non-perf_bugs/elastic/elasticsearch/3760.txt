{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/3760","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3760/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3760/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3760/events","html_url":"https://github.com/elastic/elasticsearch/issues/3760","id":19878296,"node_id":"MDU6SXNzdWUxOTg3ODI5Ng==","number":3760,"title":"Incorrect JVM_DLL environment variable definition in service.bat","user":{"login":"nathan-alden-sr","id":1189759,"node_id":"MDQ6VXNlcjExODk3NTk=","avatar_url":"https://avatars2.githubusercontent.com/u/1189759?v=4","gravatar_id":"","url":"https://api.github.com/users/nathan-alden-sr","html_url":"https://github.com/nathan-alden-sr","followers_url":"https://api.github.com/users/nathan-alden-sr/followers","following_url":"https://api.github.com/users/nathan-alden-sr/following{/other_user}","gists_url":"https://api.github.com/users/nathan-alden-sr/gists{/gist_id}","starred_url":"https://api.github.com/users/nathan-alden-sr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nathan-alden-sr/subscriptions","organizations_url":"https://api.github.com/users/nathan-alden-sr/orgs","repos_url":"https://api.github.com/users/nathan-alden-sr/repos","events_url":"https://api.github.com/users/nathan-alden-sr/events{/privacy}","received_events_url":"https://api.github.com/users/nathan-alden-sr/received_events","type":"User","site_admin":false},"labels":[{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":56772237,"node_id":"MDU6TGFiZWw1Njc3MjIzNw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.90.6","name":"v0.90.6","color":"e0e0e0","default":false,"description":null},{"id":37906111,"node_id":"MDU6TGFiZWwzNzkwNjExMQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v1.0.0.Beta1","name":"v1.0.0.Beta1","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"costin","id":76245,"node_id":"MDQ6VXNlcjc2MjQ1","avatar_url":"https://avatars3.githubusercontent.com/u/76245?v=4","gravatar_id":"","url":"https://api.github.com/users/costin","html_url":"https://github.com/costin","followers_url":"https://api.github.com/users/costin/followers","following_url":"https://api.github.com/users/costin/following{/other_user}","gists_url":"https://api.github.com/users/costin/gists{/gist_id}","starred_url":"https://api.github.com/users/costin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/costin/subscriptions","organizations_url":"https://api.github.com/users/costin/orgs","repos_url":"https://api.github.com/users/costin/repos","events_url":"https://api.github.com/users/costin/events{/privacy}","received_events_url":"https://api.github.com/users/costin/received_events","type":"User","site_admin":false},"assignees":[{"login":"costin","id":76245,"node_id":"MDQ6VXNlcjc2MjQ1","avatar_url":"https://avatars3.githubusercontent.com/u/76245?v=4","gravatar_id":"","url":"https://api.github.com/users/costin","html_url":"https://github.com/costin","followers_url":"https://api.github.com/users/costin/followers","following_url":"https://api.github.com/users/costin/following{/other_user}","gists_url":"https://api.github.com/users/costin/gists{/gist_id}","starred_url":"https://api.github.com/users/costin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/costin/subscriptions","organizations_url":"https://api.github.com/users/costin/orgs","repos_url":"https://api.github.com/users/costin/repos","events_url":"https://api.github.com/users/costin/events{/privacy}","received_events_url":"https://api.github.com/users/costin/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2013-09-22T19:48:24Z","updated_at":"2014-05-10T04:47:13Z","closed_at":"2013-10-24T10:50:08Z","author_association":"NONE","active_lock_reason":null,"body":"I am running Windows 8 64-bit. First, I uninstalled all previous Java-related installations. I confirmed that I had no `C:\\Program Files\\Java` folders. I then downloaded and installed JRE 7 from the last download link on this page:\n\nhttp://www.oracle.com/technetwork/java/javase/downloads/java-se-jre-7-download-432155.html\n\nI confirmed that Java was installed properly. Here is the installed path to `jvm.dll`:\n\n`C:\\Program Files\\Java\\jre7\\bin\\server\\jvm.dll`\n\nMy JAVA_HOME environment variable is set to `C:\\Program Files\\Java\\jre7`.\n\nUnfortunately, service.bat sets the JVM_DLL environment variable to this:\n\n```\n%JAVA_HOME%\\jre\\bin\\server\\jvm.dll\n```\n\nNote the extra `jre` path that does not exist with the JRE I installed. Perhaps this path changed in later versions of the JRE or in Oracle's installer? This problem causes the service to fail to start with this error:\n\n```\n[2013-09-22 14:23:27] [info]  [19408] Starting service...\n[2013-09-22 14:23:27] [error] [19408] Failed creating java C:\\Progra~1\\Java\\jre7\\jre\\bin\\server\\jvm.dll\n[2013-09-22 14:23:27] [error] [19408] The system cannot find the path specified.\n[2013-09-22 14:23:27] [error] [19408] ServiceStart returned 1\n```\n\nI fixed this easily by simply removing `jre\\` from the `set JVM_DLL` line. The batch file should probably use a different mechanism for determining the location of `jvm.dll`.\n","closed_by":{"login":"costin","id":76245,"node_id":"MDQ6VXNlcjc2MjQ1","avatar_url":"https://avatars3.githubusercontent.com/u/76245?v=4","gravatar_id":"","url":"https://api.github.com/users/costin","html_url":"https://github.com/costin","followers_url":"https://api.github.com/users/costin/followers","following_url":"https://api.github.com/users/costin/following{/other_user}","gists_url":"https://api.github.com/users/costin/gists{/gist_id}","starred_url":"https://api.github.com/users/costin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/costin/subscriptions","organizations_url":"https://api.github.com/users/costin/orgs","repos_url":"https://api.github.com/users/costin/repos","events_url":"https://api.github.com/users/costin/events{/privacy}","received_events_url":"https://api.github.com/users/costin/received_events","type":"User","site_admin":false},"performed_via_github_app":null}