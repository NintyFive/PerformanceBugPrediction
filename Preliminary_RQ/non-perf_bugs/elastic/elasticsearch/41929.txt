{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/41929","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41929/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41929/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/41929/events","html_url":"https://github.com/elastic/elasticsearch/issues/41929","id":441520435,"node_id":"MDU6SXNzdWU0NDE1MjA0MzU=","number":41929,"title":"RestHighLevelClient in spring boot 2.1.x doesn't allow a spring cloud task to finish successfully ","user":{"login":"VernonG07","id":11031181,"node_id":"MDQ6VXNlcjExMDMxMTgx","avatar_url":"https://avatars1.githubusercontent.com/u/11031181?v=4","gravatar_id":"","url":"https://api.github.com/users/VernonG07","html_url":"https://github.com/VernonG07","followers_url":"https://api.github.com/users/VernonG07/followers","following_url":"https://api.github.com/users/VernonG07/following{/other_user}","gists_url":"https://api.github.com/users/VernonG07/gists{/gist_id}","starred_url":"https://api.github.com/users/VernonG07/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VernonG07/subscriptions","organizations_url":"https://api.github.com/users/VernonG07/orgs","repos_url":"https://api.github.com/users/VernonG07/repos","events_url":"https://api.github.com/users/VernonG07/events{/privacy}","received_events_url":"https://api.github.com/users/VernonG07/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-05-08T02:20:00Z","updated_at":"2019-06-10T09:18:18Z","closed_at":"2019-05-08T06:59:12Z","author_association":"NONE","active_lock_reason":null,"body":"<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`): \r\nTested with 6.4.2 through 7.0.0\r\n\r\n**JVM version** (`java -version`):\r\n```\r\njava version \"1.8.0_211\"\r\nJava(TM) SE Runtime Environment (build 1.8.0_211-b12)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.211-b12, mixed mode)\r\n```\r\n\r\n**OS version** (`uname -a` if on a Unix-like system):\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nIncluding elasticsearch-rest-high-level-client on the classpath for a spring-boot, spring cloud task service does not properly close and therefor doesn't die after the task is complete.\r\n\r\nRemoving Elasticsearch from the classpath allows the spring cloud task to function correctly and die after the task is finished.\r\n\r\n**Steps to reproduce**:\r\n\r\n1. Clone https://github.com/spring-cloud/spring-cloud-task/tree/master/spring-cloud-task-samples/timestamp\r\n2. Run the application - The service dies after it prints the timestamp\r\n3. Add \r\n```\r\n                <dependency>\r\n\t\t\t<groupId>org.elasticsearch.client</groupId>\r\n\t\t\t<artifactId>elasticsearch-rest-high-level-client</artifactId>\r\n\t\t\t<version>7.0.0</version>\r\n\t\t</dependency>\r\n```\r\n4. Re-run the application - The service now stays alive\r\n\r\n**Notes**\r\nWith:\r\nSpring Cloud Task - Finchley.SR3\r\nSpring Boot - 2.0.x\r\nRest High Level Client - 6.4.2\r\nThe app functions as intended.\r\nWith:\r\nSpring Cloud Task - Greenwich.SR1\r\nSpring Boot -2.1.x\r\nRest High Level Client - 6.4.2\r\nThe app exhibits the problematic behavior\r\n\r\n","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}