[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/77094911","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-77094911","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":77094911,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MDk0OTEx","user":{"login":"philbarresi","id":1325433,"node_id":"MDQ6VXNlcjEzMjU0MzM=","avatar_url":"https://avatars3.githubusercontent.com/u/1325433?v=4","gravatar_id":"","url":"https://api.github.com/users/philbarresi","html_url":"https://github.com/philbarresi","followers_url":"https://api.github.com/users/philbarresi/followers","following_url":"https://api.github.com/users/philbarresi/following{/other_user}","gists_url":"https://api.github.com/users/philbarresi/gists{/gist_id}","starred_url":"https://api.github.com/users/philbarresi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/philbarresi/subscriptions","organizations_url":"https://api.github.com/users/philbarresi/orgs","repos_url":"https://api.github.com/users/philbarresi/repos","events_url":"https://api.github.com/users/philbarresi/events{/privacy}","received_events_url":"https://api.github.com/users/philbarresi/received_events","type":"User","site_admin":false},"created_at":"2015-03-04T04:22:21Z","updated_at":"2015-03-04T04:22:21Z","author_association":"NONE","body":"+1 started getting this, I'm on version 1.4.4; there are no requests in my app logs, I can't even figure out what's got ES spinning and causing these things but I generated about 10,000 lines of logs with this same error.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/78493501","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-78493501","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":78493501,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NDkzNTAx","user":{"login":"ChrisHubinger","id":229793,"node_id":"MDQ6VXNlcjIyOTc5Mw==","avatar_url":"https://avatars1.githubusercontent.com/u/229793?v=4","gravatar_id":"","url":"https://api.github.com/users/ChrisHubinger","html_url":"https://github.com/ChrisHubinger","followers_url":"https://api.github.com/users/ChrisHubinger/followers","following_url":"https://api.github.com/users/ChrisHubinger/following{/other_user}","gists_url":"https://api.github.com/users/ChrisHubinger/gists{/gist_id}","starred_url":"https://api.github.com/users/ChrisHubinger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChrisHubinger/subscriptions","organizations_url":"https://api.github.com/users/ChrisHubinger/orgs","repos_url":"https://api.github.com/users/ChrisHubinger/repos","events_url":"https://api.github.com/users/ChrisHubinger/events{/privacy}","received_events_url":"https://api.github.com/users/ChrisHubinger/received_events","type":"User","site_admin":false},"created_at":"2015-03-12T14:45:03Z","updated_at":"2015-03-12T14:45:03Z","author_association":"NONE","body":"+1 here the same getting this error on 1.4.4\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/78569128","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-78569128","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":78569128,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NTY5MTI4","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-03-12T18:57:38Z","updated_at":"2015-03-12T18:57:38Z","author_association":"CONTRIBUTOR","body":"when you are using scan/scroll are those requests taking a long time to finish ie. are you keeping the scroll request open a long time before going back to get the next batch? can you tell me a bit more about the usage pattern?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/78641353","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-78641353","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":78641353,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NjQxMzUz","user":{"login":"ChrisHubinger","id":229793,"node_id":"MDQ6VXNlcjIyOTc5Mw==","avatar_url":"https://avatars1.githubusercontent.com/u/229793?v=4","gravatar_id":"","url":"https://api.github.com/users/ChrisHubinger","html_url":"https://github.com/ChrisHubinger","followers_url":"https://api.github.com/users/ChrisHubinger/followers","following_url":"https://api.github.com/users/ChrisHubinger/following{/other_user}","gists_url":"https://api.github.com/users/ChrisHubinger/gists{/gist_id}","starred_url":"https://api.github.com/users/ChrisHubinger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChrisHubinger/subscriptions","organizations_url":"https://api.github.com/users/ChrisHubinger/orgs","repos_url":"https://api.github.com/users/ChrisHubinger/repos","events_url":"https://api.github.com/users/ChrisHubinger/events{/privacy}","received_events_url":"https://api.github.com/users/ChrisHubinger/received_events","type":"User","site_admin":false},"created_at":"2015-03-12T21:53:40Z","updated_at":"2015-03-12T21:53:40Z","author_association":"NONE","body":"in my case the strange thing is that i did not use scan or scroll at all.\nES is running using docker containers on two AWS t2.small Machines - it is a dev/test environment.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/86346911","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-86346911","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":86346911,"node_id":"MDEyOklzc3VlQ29tbWVudDg2MzQ2OTEx","user":{"login":"renewooller","id":3643599,"node_id":"MDQ6VXNlcjM2NDM1OTk=","avatar_url":"https://avatars0.githubusercontent.com/u/3643599?v=4","gravatar_id":"","url":"https://api.github.com/users/renewooller","html_url":"https://github.com/renewooller","followers_url":"https://api.github.com/users/renewooller/followers","following_url":"https://api.github.com/users/renewooller/following{/other_user}","gists_url":"https://api.github.com/users/renewooller/gists{/gist_id}","starred_url":"https://api.github.com/users/renewooller/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/renewooller/subscriptions","organizations_url":"https://api.github.com/users/renewooller/orgs","repos_url":"https://api.github.com/users/renewooller/repos","events_url":"https://api.github.com/users/renewooller/events{/privacy}","received_events_url":"https://api.github.com/users/renewooller/received_events","type":"User","site_admin":false},"created_at":"2015-03-26T05:17:35Z","updated_at":"2015-03-26T05:17:35Z","author_association":"NONE","body":"This is causing problems for us. The scroll_id is being recognised by the master search node, but, intermittently, all the data nodes seems to lose the context for the scroll. Here is an example response, with status 500: {\"_scroll_id\":\"c2NhbjswOzE7dG90YWxfaGl0czoxODs=\",\"took\":15,\"timed_out\":false,\"_shards\":{\"total\":20,\"successful\":0,\"failed\":20,\"failures\":[{\"status\":500,\"reason\":\"RemoteTransportException[[es-trk-data-52.otherlevels.com][inet[/10.107.13.237:9300]][search/phase/scan/scroll]]; nested: SearchContextMissingException[No search context found for id [614221475]]; \"},{\"status\":500,\"reason\":\"RemoteTransportException[[es-trk-data-69.otherlevels.com][inet[/10.107.13.212:9300]][search/phase/scan/scroll]]; nested: SearchContextMissingException[No search context found for id [735000705]]; \"},{\"status\":500,\"reason\":\"RemoteTransportException[[es-trk-data-72.otherlevels.com][inet[/10.107.13.208:9300]][search/phase/scan/scroll]]; nested: SearchContextMissingException[No search context found for id [682782622]]; \"},{\"status\":500,\"reason\":\"RemoteTransportException[[es-trk-data-72.otherlevels.com][inet[/10.107.13.208:9300]][search/phase/scan/scroll]]; nested: SearchContextMissingException[No search context found for id [682782623]]; \"},{\"status\":500,\"reason\":\"RemoteTransportException[[es-trk-data-70.otherlevels.com][inet[/10.107.13.214:9300]][search/phase/scan/scroll]]; nested: SearchContextMissingException[No search context found for id [654543614]]; \"},{\"status\":500,\"reason\":\"RemoteTransportException[[es-trk-data-53.otherlevels.com][inet[/10.107.13.241:9300]][search/phase/scan/scroll]]; nested: SearchContextMissingException[No search context found for id [683625239]]; \"},{\"status\":500,\"reason\":\"RemoteTransportException[[es-trk-data-51.otherlevels.com][inet[/10.107.13.239:9300]][search/phase/scan/scroll]]; nested: SearchContextMissingException[No search context found for id [645331945]]; \"},{\"status\":500,\"reason\":\"RemoteTransportException[[es-trk-data-66.otherlevels.com][inet[/10.107.13.206:9300]][search/phase/scan/scroll]]; nested: SearchContextMissingException[No search context found for id [729378224]]; \"},{\"status\":500,\"reason\":\"RemoteTransportException[[es-trk-data-67.otherlevels.com][inet[/10.107.13.218:9300]][search/phase/scan/scroll]]; nested: SearchContextMissingException[No search context found for id [529068847]]; \"},{\"status\":500,\"reason\":\"RemoteTransportException[[es-trk-data-52.otherlevels.com][inet[/10.107.13.237:9300]][search/phase/scan/scroll]]; nested: SearchContextMissingException[No search context found for id [614221476]]; \"},{\"status\":500,\"reason\":\"RemoteTransportException[[es-trk-data-53.otherlevels.com][inet[/10.107.13.241:9300]][search/phase/scan/scroll]]; nested: SearchContextMissingException[No search context found for id [683625238]]; \"},{\"status\":500,\"reason\":\"RemoteTransportException[[es-trk-data-65.otherlevels.com][inet[/10.107.13.204:9300]][search/phase/scan/scroll]]; nested: SearchContextMissingException[No search context found for id [716845006]]; \"},{\"status\":500,\"reason\":\"RemoteTransportException[[es-trk-data-54.otherlevels.com][inet[/10.107.13.245:9300]][search/phase/scan/scroll]]; nested: SearchContextMissingException[No search context found for id [590371336]]; \"},{\"status\":500,\"reason\":\"RemoteTransportException[[es-trk-data-69.otherlevels.com][inet[/10.107.13.212:9300]][search/phase/scan/scroll]]; nested: SearchContextMissingException[No search context found for id [735000706]]; \"},{\"status\":500,\"reason\":\"RemoteTransportException[[es-trk-data-60.otherlevels.com][inet[/10.107.13.194:9300]][search/phase/scan/scroll]]; nested: SearchContextMissingException[No search context found for id [691684634]]; \"},{\"status\":500,\"reason\":\"RemoteTransportException[[es-trk-data-60.otherlevels.com][inet[/10.107.13.194:9300]][search/phase/scan/scroll]]; nested: SearchContextMissingException[No search context found for id [691684635]]; \"},{\"status\":500,\"reason\":\"RemoteTransportException[[es-trk-data-69.otherlevels.com][inet[/10.107.13.212:9300]][search/phase/scan/scroll]]; nested: SearchContextMissingException[No search context found for id [735000707]]; \"},{\"status\":500,\"reason\":\"RemoteTransportException[[es-trk-data-73.otherlevels.com][inet[/10.107.13.222:9300]][search/phase/scan/scroll]]; nested: SearchContextMissingException[No search context found for id [501628671]]; \"},{\"status\":500,\"reason\":\"RemoteTransportException[[es-trk-data-54.otherlevels.com][inet[/10.107.13.245:9300]][search/phase/scan/scroll]]; nested: SearchContextMissingException[No search context found for id [590371338]]; \"},{\"status\":500,\"reason\":\"RemoteTransportException[[es-trk-data-54.otherlevels.com][inet[/10.107.13.245:9300]][search/phase/scan/scroll]]; nested: SearchContextMissingException[No search context found for id [590371337]]; \"}]},\"hits\":{\"total\":18,\"max_score\":0,\"hits\":[]}}\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/89769765","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-89769765","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":89769765,"node_id":"MDEyOklzc3VlQ29tbWVudDg5NzY5NzY1","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-04-05T13:17:24Z","updated_at":"2015-04-05T13:17:24Z","author_association":"CONTRIBUTOR","body":"@renewooller this sounds like you are not using the new scroll ID returned with the previous scroll request.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/94146492","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-94146492","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":94146492,"node_id":"MDEyOklzc3VlQ29tbWVudDk0MTQ2NDky","user":{"login":"bittusarkar","id":860447,"node_id":"MDQ6VXNlcjg2MDQ0Nw==","avatar_url":"https://avatars0.githubusercontent.com/u/860447?v=4","gravatar_id":"","url":"https://api.github.com/users/bittusarkar","html_url":"https://github.com/bittusarkar","followers_url":"https://api.github.com/users/bittusarkar/followers","following_url":"https://api.github.com/users/bittusarkar/following{/other_user}","gists_url":"https://api.github.com/users/bittusarkar/gists{/gist_id}","starred_url":"https://api.github.com/users/bittusarkar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bittusarkar/subscriptions","organizations_url":"https://api.github.com/users/bittusarkar/orgs","repos_url":"https://api.github.com/users/bittusarkar/repos","events_url":"https://api.github.com/users/bittusarkar/events{/privacy}","received_events_url":"https://api.github.com/users/bittusarkar/received_events","type":"User","site_admin":false},"created_at":"2015-04-18T09:19:11Z","updated_at":"2015-04-18T09:39:11Z","author_association":"NONE","body":"@clintongormley Going back to the original issue, we don't use `scan` and `scroll` but still see this exception resulting in search request failures. Do you know what can cause this issue? Can additional logging help debug this issue? If yes, do let me know what logging needs to be enabled.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/96218621","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-96218621","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":96218621,"node_id":"MDEyOklzc3VlQ29tbWVudDk2MjE4NjIx","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-04-25T14:52:45Z","updated_at":"2015-04-25T14:52:45Z","author_association":"CONTRIBUTOR","body":"@bittusarkar are you seeing long GC (garbage collection) warnings in the logs?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/101042281","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-101042281","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":101042281,"node_id":"MDEyOklzc3VlQ29tbWVudDEwMTA0MjI4MQ==","user":{"login":"sylvinus","id":410452,"node_id":"MDQ6VXNlcjQxMDQ1Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/410452?v=4","gravatar_id":"","url":"https://api.github.com/users/sylvinus","html_url":"https://github.com/sylvinus","followers_url":"https://api.github.com/users/sylvinus/followers","following_url":"https://api.github.com/users/sylvinus/following{/other_user}","gists_url":"https://api.github.com/users/sylvinus/gists{/gist_id}","starred_url":"https://api.github.com/users/sylvinus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sylvinus/subscriptions","organizations_url":"https://api.github.com/users/sylvinus/orgs","repos_url":"https://api.github.com/users/sylvinus/repos","events_url":"https://api.github.com/users/sylvinus/events{/privacy}","received_events_url":"https://api.github.com/users/sylvinus/received_events","type":"User","site_admin":false},"created_at":"2015-05-11T20:45:30Z","updated_at":"2015-05-11T20:45:59Z","author_association":"CONTRIBUTOR","body":"Seeing this as well on found.no with parallel scan queries\n\n```\nNotFoundError: TransportError(404, u'{\"_scroll_id\":\"c2NhbjswOzE7dG90YWxfaGl0czoxMzM7\",\"took\":9,\"timed_out\":false,\"_shards\":{\"total\":1,\"successful\":0,\"failed\":1,\"failures\":[{\"status\":404,\"reason\":\"SearchContextMissingException[No search context found for id [15839]]\"}]},\"hits\":{\"total\":133,\"max_score\":0.0,\"hits\":[]}}')\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/109733372","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-109733372","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":109733372,"node_id":"MDEyOklzc3VlQ29tbWVudDEwOTczMzM3Mg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-06-07T10:32:14Z","updated_at":"2015-06-07T10:32:14Z","author_association":"CONTRIBUTOR","body":"@sylvinus you can't use scan/scroll in parallel - the scroll ID from the previous scroll request needs to be passed to the next scroll request.  Instead, you can use multiple scan/scroll requests each with a filter to segment the original index into (eg) documents from different months.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/120751462","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-120751462","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":120751462,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMDc1MTQ2Mg==","user":{"login":"comdiv","id":2387862,"node_id":"MDQ6VXNlcjIzODc4NjI=","avatar_url":"https://avatars2.githubusercontent.com/u/2387862?v=4","gravatar_id":"","url":"https://api.github.com/users/comdiv","html_url":"https://github.com/comdiv","followers_url":"https://api.github.com/users/comdiv/followers","following_url":"https://api.github.com/users/comdiv/following{/other_user}","gists_url":"https://api.github.com/users/comdiv/gists{/gist_id}","starred_url":"https://api.github.com/users/comdiv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/comdiv/subscriptions","organizations_url":"https://api.github.com/users/comdiv/orgs","repos_url":"https://api.github.com/users/comdiv/repos","events_url":"https://api.github.com/users/comdiv/events{/privacy}","received_events_url":"https://api.github.com/users/comdiv/received_events","type":"User","site_admin":false},"created_at":"2015-07-12T18:07:46Z","updated_at":"2015-07-12T18:08:34Z","author_association":"NONE","body":"+1  We get same SCROLL - erorrs. We not use scroll queries. \nBut i not see such erorrs on development node. The difference is that dev is singleton node without marvel logging and production is 4-node cluster 2x2 with marvel installed. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/120896055","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-120896055","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":120896055,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMDg5NjA1NQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-07-13T11:28:37Z","updated_at":"2015-07-13T11:28:37Z","author_association":"CONTRIBUTOR","body":"I've done some digging.  First, a search request comes into a coordinating node. It forwards the request to each involved shard to execute the query phase.  Once all shards have responded, it reduces the results then fetches results from each shard in the fetch phase.\n\nIf a single shard takes a long time to return from the query phase, then the search context might have expired on the other shards, resulting in a search context missing exception during the fetch phase.  The search context is kept alive for 5 minutes by default before being released, so this points to one node being completely unresponsive (eg due to long GC) for an extended period.\n\nThe keep alive duration is affected by the search `timeout` setting.  \n\nQuestions:\n- Are you seeing log messages about slow garbage collections?\n- Are you using the search `timeout` parameter?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/120987926","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-120987926","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":120987926,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMDk4NzkyNg==","user":{"login":"comdiv","id":2387862,"node_id":"MDQ6VXNlcjIzODc4NjI=","avatar_url":"https://avatars2.githubusercontent.com/u/2387862?v=4","gravatar_id":"","url":"https://api.github.com/users/comdiv","html_url":"https://github.com/comdiv","followers_url":"https://api.github.com/users/comdiv/followers","following_url":"https://api.github.com/users/comdiv/following{/other_user}","gists_url":"https://api.github.com/users/comdiv/gists{/gist_id}","starred_url":"https://api.github.com/users/comdiv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/comdiv/subscriptions","organizations_url":"https://api.github.com/users/comdiv/orgs","repos_url":"https://api.github.com/users/comdiv/repos","events_url":"https://api.github.com/users/comdiv/events{/privacy}","received_events_url":"https://api.github.com/users/comdiv/received_events","type":"User","site_admin":false},"created_at":"2015-07-13T16:34:01Z","updated_at":"2015-07-13T16:34:01Z","author_association":"NONE","body":"I and first author can repeat it again - WE NOT USING SCROLL QUERIES when this errors occured. )))) so we not use timeout parameter. )))\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/120996993","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-120996993","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":120996993,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMDk5Njk5Mw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-07-13T17:17:12Z","updated_at":"2015-07-13T17:17:12Z","author_association":"CONTRIBUTOR","body":"@comdiv The search API also supports the `timeout` parameter.  My previous comment doesn't refer to scroll requests at all.  If you're not using timeouts, then please look in your logs for slow garbage collections.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/121514978","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-121514978","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":121514978,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMTUxNDk3OA==","user":{"login":"bittusarkar","id":860447,"node_id":"MDQ6VXNlcjg2MDQ0Nw==","avatar_url":"https://avatars0.githubusercontent.com/u/860447?v=4","gravatar_id":"","url":"https://api.github.com/users/bittusarkar","html_url":"https://github.com/bittusarkar","followers_url":"https://api.github.com/users/bittusarkar/followers","following_url":"https://api.github.com/users/bittusarkar/following{/other_user}","gists_url":"https://api.github.com/users/bittusarkar/gists{/gist_id}","starred_url":"https://api.github.com/users/bittusarkar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bittusarkar/subscriptions","organizations_url":"https://api.github.com/users/bittusarkar/orgs","repos_url":"https://api.github.com/users/bittusarkar/repos","events_url":"https://api.github.com/users/bittusarkar/events{/privacy}","received_events_url":"https://api.github.com/users/bittusarkar/received_events","type":"User","site_admin":false},"created_at":"2015-07-15T07:32:20Z","updated_at":"2015-07-15T07:32:20Z","author_association":"NONE","body":"@clintongormley Sorry for the delayed response. Thanks a lot for explaining the scenario when this error can occur. I did check our logs but did not find any significant GC activity around the time when this error occurred. We do not use `timeout` with `search` API but if by default it is 5 minutes, I think we can live with that.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/121584711","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-121584711","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":121584711,"node_id":"MDEyOklzc3VlQ29tbWVudDEyMTU4NDcxMQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-07-15T11:12:59Z","updated_at":"2015-07-15T11:12:59Z","author_association":"CONTRIBUTOR","body":"@bittusarkar i'm trying to figure out why these exceptions are being thrown.  Essentially a search context needs to be inactive for 5 mins (or the timeout) for it to be purged, so if you're not using timeouts and you don't have really slow GCs, then I'm not sure where this could come from...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/126633446","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-126633446","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":126633446,"node_id":"MDEyOklzc3VlQ29tbWVudDEyNjYzMzQ0Ng==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2015-07-31T10:09:47Z","updated_at":"2015-07-31T10:09:47Z","author_association":"MEMBER","body":"Removing the discuss label for now since waiting for feedback currently.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/128047850","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-128047850","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":128047850,"node_id":"MDEyOklzc3VlQ29tbWVudDEyODA0Nzg1MA==","user":{"login":"dirk1978","id":10587448,"node_id":"MDQ6VXNlcjEwNTg3NDQ4","avatar_url":"https://avatars2.githubusercontent.com/u/10587448?v=4","gravatar_id":"","url":"https://api.github.com/users/dirk1978","html_url":"https://github.com/dirk1978","followers_url":"https://api.github.com/users/dirk1978/followers","following_url":"https://api.github.com/users/dirk1978/following{/other_user}","gists_url":"https://api.github.com/users/dirk1978/gists{/gist_id}","starred_url":"https://api.github.com/users/dirk1978/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dirk1978/subscriptions","organizations_url":"https://api.github.com/users/dirk1978/orgs","repos_url":"https://api.github.com/users/dirk1978/repos","events_url":"https://api.github.com/users/dirk1978/events{/privacy}","received_events_url":"https://api.github.com/users/dirk1978/received_events","type":"User","site_admin":false},"created_at":"2015-08-05T15:54:27Z","updated_at":"2015-08-05T17:51:35Z","author_association":"NONE","body":"I seem to be affected by this issue. Apologies if this is something different.\n\nI'm copying data from one index to another using the scan and scroll API through PHP.\n\nThe code loops through the documents, getting the scroll id and then pulling the documents out and it works fine until the last c.10% of the documents, where the client returns false and this error is logged:\n\n```\n[2015-08-05 16:18:38,653][DEBUG][action.search.type       ] [client-node] [455550] Failed to execute query phase\norg.elasticsearch.transport.RemoteTransportException: [dev-es-05-02][inet[/192.168.119.232:9301]][indices:data/read/search[phase/scan/scroll]]\nCaused by: org.elasticsearch.search.SearchContextMissingException: No search context found for id [455550]\n        at org.elasticsearch.search.SearchService.findContext(SearchService.java:537)\n        at org.elasticsearch.search.SearchService.executeScan(SearchService.java:265)\n        at org.elasticsearch.search.action.SearchServiceTransportAction$SearchScanScrollTransportHandler.messageReceived(SearchServiceTransportAction.java:939)\n        at org.elasticsearch.search.action.SearchServiceTransportAction$SearchScanScrollTransportHandler.messageReceived(SearchServiceTransportAction.java:930)\n        at org.elasticsearch.transport.netty.MessageChannelHandler$RequestHandler.doRun(MessageChannelHandler.java:279)\n        at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:36)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\n[2015-08-05 16:18:38,653][DEBUG][action.search.type       ] [client-node] [455882] Failed to execute query phase\norg.elasticsearch.transport.RemoteTransportException: [dev-es-05-01][inet[/192.168.119.232:9300]][indices:data/read/search[phase/scan/scroll]]\nCaused by: org.elasticsearch.search.SearchContextMissingException: No search context found for id [455882]\n        at org.elasticsearch.search.SearchService.findContext(SearchService.java:537)\n        at org.elasticsearch.search.SearchService.executeScan(SearchService.java:265)\n        at org.elasticsearch.search.action.SearchServiceTransportAction$SearchScanScrollTransportHandler.messageReceived(SearchServiceTransportAction.java:939)\n        at org.elasticsearch.search.action.SearchServiceTransportAction$SearchScanScrollTransportHandler.messageReceived(SearchServiceTransportAction.java:930)\n        at org.elasticsearch.transport.netty.MessageChannelHandler$RequestHandler.doRun(MessageChannelHandler.java:279)\n        at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:36)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\n```\n\nThere are 2 instances on the server dev-es-05, named dev-es-05-01 and -02 accordingly. Nothing is logged on that server at the time and 2 separate JVM processes erroring at the same time would indicate it's the local client node causing the error rather than the target node mentioned in the errors.\n\nI've tried upping the scroll param from '30s' to '2m' which doesn't fix it. I'm using size 10000 and will try with various other sizes.\n\nThe versions are 1.7.0 and Oracle JVM 1.8.0_31.\n\nI can give sample code to show how I'm doing the scan and scroll, but essentially it's just like the sample code \n\n```\n$docs = $pull_client->search($search_params);   // Execute the search\n    $scroll_id = $docs['_scroll_id'];        // The response will contain no results, just a _scroll_id\nwhile (\\true) {\n        $response = $pull_client->scroll(\n            array(\n                \"scroll_id\" => $scroll_id,  //...using our previously obtained _scroll_id\n                \"scroll\" => \"5m\"           // and the same timeout window\n            )\n        );\n        foreach ( $response['hits']['hits'] as $doc ) {\n           // ...do stuff...\n        }\n        $scroll_id = $response['_scroll_id'];\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/128093071","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-128093071","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":128093071,"node_id":"MDEyOklzc3VlQ29tbWVudDEyODA5MzA3MQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-08-05T18:03:10Z","updated_at":"2015-08-05T18:03:10Z","author_association":"CONTRIBUTOR","body":"@dirk1978 you should stop pulling when you get back zero hits.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/128299457","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-128299457","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":128299457,"node_id":"MDEyOklzc3VlQ29tbWVudDEyODI5OTQ1Nw==","user":{"login":"dirk1978","id":10587448,"node_id":"MDQ6VXNlcjEwNTg3NDQ4","avatar_url":"https://avatars2.githubusercontent.com/u/10587448?v=4","gravatar_id":"","url":"https://api.github.com/users/dirk1978","html_url":"https://github.com/dirk1978","followers_url":"https://api.github.com/users/dirk1978/followers","following_url":"https://api.github.com/users/dirk1978/following{/other_user}","gists_url":"https://api.github.com/users/dirk1978/gists{/gist_id}","starred_url":"https://api.github.com/users/dirk1978/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dirk1978/subscriptions","organizations_url":"https://api.github.com/users/dirk1978/orgs","repos_url":"https://api.github.com/users/dirk1978/repos","events_url":"https://api.github.com/users/dirk1978/events{/privacy}","received_events_url":"https://api.github.com/users/dirk1978/received_events","type":"User","site_admin":false},"created_at":"2015-08-06T09:06:18Z","updated_at":"2015-08-06T09:11:19Z","author_association":"NONE","body":"@clintongormley good shout. I was following this: https://github.com/elastic/elasticsearch-php/issues/138#issuecomment-58014781 which is obviously not the best way to do it.\n\nedit: In fact, sorry, I do stop pulling when I get back zero hits:\n\n`$hits = count($response['hits']['hits']);\n    if ($hits > 0) {\n        // If yes, Do Work Here\n        $dataload->debug('received '.$hits.' hits');\n        foreach ( $response['hits']['hits'] as $doc ) {`\n\nI left it out of the snippet above for brevity.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/128301674","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-128301674","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":128301674,"node_id":"MDEyOklzc3VlQ29tbWVudDEyODMwMTY3NA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-08-06T09:13:05Z","updated_at":"2015-08-06T09:13:05Z","author_association":"CONTRIBUTOR","body":"@dirk1978 if you look at https://github.com/elastic/elasticsearch-php/issues/138#issuecomment-58014781 again, you will see this line:\n\n```\n    if (count($response['hits']['hits']) > 0) {\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/135137251","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-135137251","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":135137251,"node_id":"MDEyOklzc3VlQ29tbWVudDEzNTEzNzI1MQ==","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-08-26T18:50:18Z","updated_at":"2015-08-26T18:50:18Z","author_association":"CONTRIBUTOR","body":"Closing due to lack of feedback\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/146681780","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-146681780","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":146681780,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NjY4MTc4MA==","user":{"login":"pmaury","id":3295873,"node_id":"MDQ6VXNlcjMyOTU4NzM=","avatar_url":"https://avatars3.githubusercontent.com/u/3295873?v=4","gravatar_id":"","url":"https://api.github.com/users/pmaury","html_url":"https://github.com/pmaury","followers_url":"https://api.github.com/users/pmaury/followers","following_url":"https://api.github.com/users/pmaury/following{/other_user}","gists_url":"https://api.github.com/users/pmaury/gists{/gist_id}","starred_url":"https://api.github.com/users/pmaury/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pmaury/subscriptions","organizations_url":"https://api.github.com/users/pmaury/orgs","repos_url":"https://api.github.com/users/pmaury/repos","events_url":"https://api.github.com/users/pmaury/events{/privacy}","received_events_url":"https://api.github.com/users/pmaury/received_events","type":"User","site_admin":false},"created_at":"2015-10-08T20:52:16Z","updated_at":"2015-10-08T20:52:16Z","author_association":"NONE","body":"I have the same issue when I search on several indices and then scroll the result. Also happens with an alias that points to several indices. \n\nWorkaround: run the search for each index separately.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148867200","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-148867200","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":148867200,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODg2NzIwMA==","user":{"login":"pickypg","id":1501235,"node_id":"MDQ6VXNlcjE1MDEyMzU=","avatar_url":"https://avatars2.githubusercontent.com/u/1501235?v=4","gravatar_id":"","url":"https://api.github.com/users/pickypg","html_url":"https://github.com/pickypg","followers_url":"https://api.github.com/users/pickypg/followers","following_url":"https://api.github.com/users/pickypg/following{/other_user}","gists_url":"https://api.github.com/users/pickypg/gists{/gist_id}","starred_url":"https://api.github.com/users/pickypg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pickypg/subscriptions","organizations_url":"https://api.github.com/users/pickypg/orgs","repos_url":"https://api.github.com/users/pickypg/repos","events_url":"https://api.github.com/users/pickypg/events{/privacy}","received_events_url":"https://api.github.com/users/pickypg/received_events","type":"User","site_admin":false},"created_at":"2015-10-16T23:51:28Z","updated_at":"2015-10-16T23:51:28Z","author_association":"MEMBER","body":"@pmaury If you're getting this error, then please create a new issue with the way to reproduce it. Specifically, please detail how you are getting and setting the scroll ID for each request.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/149675526","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-149675526","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":149675526,"node_id":"MDEyOklzc3VlQ29tbWVudDE0OTY3NTUyNg==","user":{"login":"pmaury","id":3295873,"node_id":"MDQ6VXNlcjMyOTU4NzM=","avatar_url":"https://avatars3.githubusercontent.com/u/3295873?v=4","gravatar_id":"","url":"https://api.github.com/users/pmaury","html_url":"https://github.com/pmaury","followers_url":"https://api.github.com/users/pmaury/followers","following_url":"https://api.github.com/users/pmaury/following{/other_user}","gists_url":"https://api.github.com/users/pmaury/gists{/gist_id}","starred_url":"https://api.github.com/users/pmaury/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pmaury/subscriptions","organizations_url":"https://api.github.com/users/pmaury/orgs","repos_url":"https://api.github.com/users/pmaury/repos","events_url":"https://api.github.com/users/pmaury/events{/privacy}","received_events_url":"https://api.github.com/users/pmaury/received_events","type":"User","site_admin":false},"created_at":"2015-10-20T19:26:56Z","updated_at":"2015-10-20T19:26:56Z","author_association":"NONE","body":"ok... I found the source of my problem. It turns out the bug is in my code... sorry.\n\nAs mentioned earlier in this thread, and in the documentation:\n\"The initial search request and each subsequent scroll request returns a new _scroll_id — only the most recent _scroll_id should be used\"\n\nI failed to notice the problem because from the client perspective, everything is working fine: no exception, no error, and all the results are returned (it seems at least). The only trace of the problem is a log on the server side.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/178696972","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-178696972","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":178696972,"node_id":"MDEyOklzc3VlQ29tbWVudDE3ODY5Njk3Mg==","user":{"login":"tom-christie","id":5084541,"node_id":"MDQ6VXNlcjUwODQ1NDE=","avatar_url":"https://avatars2.githubusercontent.com/u/5084541?v=4","gravatar_id":"","url":"https://api.github.com/users/tom-christie","html_url":"https://github.com/tom-christie","followers_url":"https://api.github.com/users/tom-christie/followers","following_url":"https://api.github.com/users/tom-christie/following{/other_user}","gists_url":"https://api.github.com/users/tom-christie/gists{/gist_id}","starred_url":"https://api.github.com/users/tom-christie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tom-christie/subscriptions","organizations_url":"https://api.github.com/users/tom-christie/orgs","repos_url":"https://api.github.com/users/tom-christie/repos","events_url":"https://api.github.com/users/tom-christie/events{/privacy}","received_events_url":"https://api.github.com/users/tom-christie/received_events","type":"User","site_admin":false},"created_at":"2016-02-02T17:19:09Z","updated_at":"2016-02-02T17:19:09Z","author_association":"NONE","body":"I'm getting this error using Logstash to pull from one Elasticsearch index to another index. It's causing problems because when this error occurs, Logstash creates duplicate entries in the target index.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/182516496","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-182516496","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":182516496,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MjUxNjQ5Ng==","user":{"login":"cjbottaro","id":10292,"node_id":"MDQ6VXNlcjEwMjky","avatar_url":"https://avatars0.githubusercontent.com/u/10292?v=4","gravatar_id":"","url":"https://api.github.com/users/cjbottaro","html_url":"https://github.com/cjbottaro","followers_url":"https://api.github.com/users/cjbottaro/followers","following_url":"https://api.github.com/users/cjbottaro/following{/other_user}","gists_url":"https://api.github.com/users/cjbottaro/gists{/gist_id}","starred_url":"https://api.github.com/users/cjbottaro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cjbottaro/subscriptions","organizations_url":"https://api.github.com/users/cjbottaro/orgs","repos_url":"https://api.github.com/users/cjbottaro/repos","events_url":"https://api.github.com/users/cjbottaro/events{/privacy}","received_events_url":"https://api.github.com/users/cjbottaro/received_events","type":"User","site_admin":false},"created_at":"2016-02-10T18:26:20Z","updated_at":"2016-02-10T18:26:20Z","author_association":"NONE","body":"Does using the scroll_id reset its ttl?  My timeout is set to 10m, and processing all the results takes longer than 10m, _but the time in between_ each use of the scroll_id is definitely under 10m.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/183728948","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-183728948","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":183728948,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MzcyODk0OA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-02-13T19:18:27Z","updated_at":"2016-02-13T19:18:27Z","author_association":"CONTRIBUTOR","body":"@cjbottaro no - you have to pass a `?scroll=10m` with every scroll request to extend the scroll for another 10 minutes\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/189964468","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-189964468","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":189964468,"node_id":"MDEyOklzc3VlQ29tbWVudDE4OTk2NDQ2OA==","user":{"login":"isabel12","id":2031820,"node_id":"MDQ6VXNlcjIwMzE4MjA=","avatar_url":"https://avatars1.githubusercontent.com/u/2031820?v=4","gravatar_id":"","url":"https://api.github.com/users/isabel12","html_url":"https://github.com/isabel12","followers_url":"https://api.github.com/users/isabel12/followers","following_url":"https://api.github.com/users/isabel12/following{/other_user}","gists_url":"https://api.github.com/users/isabel12/gists{/gist_id}","starred_url":"https://api.github.com/users/isabel12/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/isabel12/subscriptions","organizations_url":"https://api.github.com/users/isabel12/orgs","repos_url":"https://api.github.com/users/isabel12/repos","events_url":"https://api.github.com/users/isabel12/events{/privacy}","received_events_url":"https://api.github.com/users/isabel12/received_events","type":"User","site_admin":false},"created_at":"2016-02-28T23:06:01Z","updated_at":"2016-02-28T23:06:01Z","author_association":"NONE","body":"We are getting this issue too.  \n\nWe are running ES v 1.5.2.  Similar to bittusarkar, we aren't using scan and scroll, or timeouts in our search requests, and we don't see any reference to the GC being slow in our logs.\n\nThis message got spammed to our logs for a whole day this weekend, with about 5 different search context ids.  It happened just over a month ago, for a shorter period of time.  It only seems to affect one cluster.\n\nWe suspect it might be the Marvel plugin (v.1.3.1), as it has only been intermittently used in the past, but this weekend it was left in an open window overnight.\n\nTo try and find out more, we will attempt the following:\n- Set an alert on that particular message so we are aware of it as soon as it happens next\n- When it does, enable slowlog for a bit to see what queries we are receiving, and try closing Marvel to see if it fixes it\n- If it is Marvel, I guess we will try updating it?\n\nDoes that sound about right @clintongormley?\n\n`[2016-02-27 03:50:59,999][DEBUG][action.search.type       ] [<Master node name>] [324418689] Failed to execute query phase\norg.elasticsearch.transport.RemoteTransportException: [<Non-master node name>][inet[/xx.x.xx.xx:9300]][indices:data/read/search[phase/scan/scroll]]\nCaused by: org.elasticsearch.search.SearchContextMissingException: No search context found for id [324418689]\n                at org.elasticsearch.search.SearchService.findContext(SearchService.java:522)\n                at org.elasticsearch.search.SearchService.executeScan(SearchService.java:250)\n                at org.elasticsearch.search.action.SearchServiceTransportAction$SearchScanScrollTransportHandler.messageReceived(SearchServiceTransportAction.java:939)\n                at org.elasticsearch.search.action.SearchServiceTransportAction$SearchScanScrollTransportHandler.messageReceived(SearchServiceTransportAction.java:930)\n                at org.elasticsearch.transport.netty.MessageChannelHandler$RequestHandler.doRun(MessageChannelHandler.java:277)\n                at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:36)\n                at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n                at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n                at java.lang.Thread.run(Thread.java:745)`\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/190106905","html_url":"https://github.com/elastic/elasticsearch/issues/9726#issuecomment-190106905","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9726","id":190106905,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MDEwNjkwNQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-02-29T08:48:11Z","updated_at":"2016-02-29T08:48:11Z","author_association":"CONTRIBUTOR","body":"Hi @isabel12 \n\nThis issue appears to have been resolved in later versions as we haven't seen any reports of this for a while.  1.5.2 is pretty old, I suggest upgrading\n","performed_via_github_app":null}]