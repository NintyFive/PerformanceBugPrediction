{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/55849","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55849/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55849/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/55849/events","html_url":"https://github.com/elastic/elasticsearch/issues/55849","id":608194342,"node_id":"MDU6SXNzdWU2MDgxOTQzNDI=","number":55849,"title":"Elasticsearch multi-layer remote cluster is invalid","user":{"login":"jiankunking","id":15723050,"node_id":"MDQ6VXNlcjE1NzIzMDUw","avatar_url":"https://avatars2.githubusercontent.com/u/15723050?v=4","gravatar_id":"","url":"https://api.github.com/users/jiankunking","html_url":"https://github.com/jiankunking","followers_url":"https://api.github.com/users/jiankunking/followers","following_url":"https://api.github.com/users/jiankunking/following{/other_user}","gists_url":"https://api.github.com/users/jiankunking/gists{/gist_id}","starred_url":"https://api.github.com/users/jiankunking/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiankunking/subscriptions","organizations_url":"https://api.github.com/users/jiankunking/orgs","repos_url":"https://api.github.com/users/jiankunking/repos","events_url":"https://api.github.com/users/jiankunking/events{/privacy}","received_events_url":"https://api.github.com/users/jiankunking/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-04-28T10:11:50Z","updated_at":"2020-04-28T13:10:57Z","closed_at":"2020-04-28T13:10:57Z","author_association":"NONE","active_lock_reason":null,"body":"Initial requirements\r\n\r\n[https://github.com/elastic/kibana/issues/64267](https://github.com/elastic/kibana/issues/64267)\r\n\r\nSet up the es cluster as shown below：\r\n\r\n![1](https://user-images.githubusercontent.com/15723050/80473969-75e1c580-8979-11ea-8336-98119bbe1da0.png)\r\n\r\nHowever, the following anomalies are found:\r\n`at org.elasticsearch.transport.InboundHandler.handleResponse(InboundHandler.java:214) ~[elasticsearch-7.6.2.jar:7.6.2]\", \"at org.elasticsearch.transport.InboundHandler.messageReceived(InboundHandler.java:139) ~[elasticsearch-7.6.2.jar:7.6.2]\", \"at org.elasticsearch.transport.InboundHandler.inboundMessage(InboundHandler.java:103) ~[elasticsearch-7.6.2.jar:7.6.2]\", \"at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:300) ~[?:?]\", \"at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374) ~[?:?]\", \"at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374) ~[?:?]\", \"at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360) ~[?:?]\", \"at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[?:?]\", \"stacktrace\": [\"org.elasticsearch.transport.ConnectTransportException: [][10.133.0.89:9300] general node connection failure\", \"at org.elasticsearch.action.ActionListener$1.onFailure(ActionListener.java:71) ~[elasticsearch-7.6.2.jar:7.6.2]\", \"at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) ~[elasticsearch-7.6.2.jar:7.6.2]\", \"at org.elasticsearch.transport.InboundHandler.inboundMessage(InboundHandler.java:103) ~[elasticsearch-7.6.2.jar:7.6.2]\", \"at org.elasticsearch.transport.netty4.Netty4MessageChannelHandler.channelRead(Netty4MessageChannelHandler.java:62) ~[?:?]\", \"at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352) ~[?:?]\", \"at io.netty.handler.logging.LoggingHandler.channelRead(LoggingHandler.java:241) ~[?:?]\", \"Caused by: java.lang.IllegalStateException: Received message from unsupported version: [6.5.1] minimal compatible version is: [6.8.0]\", \"stacktrace\": [\"org.elasticsearch.transport.ConnectTransportException: [][10.163.204.195:9300] general node connection failure\", \"at org.elasticsearch.transport.TcpTransport$ChannelsConnectedListener.lambda$onResponse$2(TcpTransport.java:979) ~[elasticsearch-7.6.2.jar:7.6.2]\", \"at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) ~[elasticsearch-7.6.2.jar:7.6.2]\", \"at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374) ~[?:?]\", \"at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:163) ~[?:?]\", \"at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1422) ~[?:?]\", \"at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374) ~[?:?]\", \"at io.netty.util.concurrent.SingleThreadEventExecutor$6.run(SingleThreadEventExecutor.java:1050) ~[?:?]\", \"at org.elasticsearch.transport.TransportHandshaker$HandshakeResponseHandler.handleResponse(TransportHandshaker.java:139) ~[elasticsearch-7.6.2.jar:7.6.2]\", \"at org.elasticsearch.common.util.concurrent.EsExecutors$DirectExecutorService.execute(EsExecutors.java:225) ~[elasticsearch-7.6.2.jar:7.6.2]\", \"at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1422) ~[?:?]\", \"at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360) ~[?:?]\", \"at io.netty.handler.logging.LoggingHandler.channelRead(LoggingHandler.java:241) ~[?:?]\", \"at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:554) ~[?:?]\", \"at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:514) ~[?:?]`\r\n\r\nSo I rebuilt the es cluster, as shown in the following figure:\r\n\r\n\r\n![2](https://user-images.githubusercontent.com/15723050/80475306-46cc5380-897b-11ea-9a64-01de13caee6e.png)\r\nHowever, I found that in kibana, I still could not see the data of each es cluster in the blue box。\r\n\r\n**Is it because remote cluster cannot multilayer proxy?**\r\n\r\n\r\n","closed_by":{"login":"pgomulka","id":11137008,"node_id":"MDQ6VXNlcjExMTM3MDA4","avatar_url":"https://avatars0.githubusercontent.com/u/11137008?v=4","gravatar_id":"","url":"https://api.github.com/users/pgomulka","html_url":"https://github.com/pgomulka","followers_url":"https://api.github.com/users/pgomulka/followers","following_url":"https://api.github.com/users/pgomulka/following{/other_user}","gists_url":"https://api.github.com/users/pgomulka/gists{/gist_id}","starred_url":"https://api.github.com/users/pgomulka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgomulka/subscriptions","organizations_url":"https://api.github.com/users/pgomulka/orgs","repos_url":"https://api.github.com/users/pgomulka/repos","events_url":"https://api.github.com/users/pgomulka/events{/privacy}","received_events_url":"https://api.github.com/users/pgomulka/received_events","type":"User","site_admin":false},"performed_via_github_app":null}