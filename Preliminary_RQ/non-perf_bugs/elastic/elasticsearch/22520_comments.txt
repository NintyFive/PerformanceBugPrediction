[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/271522712","html_url":"https://github.com/elastic/elasticsearch/issues/22520#issuecomment-271522712","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22520","id":271522712,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTUyMjcxMg==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2017-01-10T09:08:25Z","updated_at":"2017-01-10T09:08:25Z","author_association":"CONTRIBUTOR","body":"++","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/271587808","html_url":"https://github.com/elastic/elasticsearch/issues/22520#issuecomment-271587808","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22520","id":271587808,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTU4NzgwOA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2017-01-10T14:23:56Z","updated_at":"2017-01-10T14:23:56Z","author_association":"CONTRIBUTOR","body":"#22526 and #22523 might be helpful here.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/272462484","html_url":"https://github.com/elastic/elasticsearch/issues/22520#issuecomment-272462484","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22520","id":272462484,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjQ2MjQ4NA==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2017-01-13T14:57:53Z","updated_at":"2017-01-13T14:57:53Z","author_association":"MEMBER","body":"I think that's a great idea. I did something similar for azure but I'm using another way to define things:\r\n\r\nIf you have only one account, you define:\r\n\r\n```yml\r\ncloud.azure.storage:\r\n            my_account1:\r\n                account: your_azure_storage_account1\r\n                key: your_azure_storage_key1\r\n```\r\n\r\nThen when you create the repository, you don't need to reference which account you want to use as there is only one.\r\n\r\n```\r\n# my_account1 will be used\r\nPUT _snapshot/my_backup\r\n{\r\n    \"type\": \"azure\"\r\n}\r\n```\r\n\r\nIf you need multiple accounts, you explicitly set which is the default one with `default: true`:\r\n\r\n```yml\r\ncloud.azure.storage:\r\n            my_account1:\r\n                account: your_azure_storage_account1\r\n                key: your_azure_storage_key1\r\n                default: true\r\n            my_account2:\r\n                account: your_azure_storage_account2\r\n                key: your_azure_storage_key2\r\n```\r\n\r\nAgain, if you create a repository without setting the account you want to use the one which is marked as `default` will be used.\r\n\r\n```\r\n# my_account1 will be used\r\nPUT _snapshot/my_backup\r\n{\r\n    \"type\": \"azure\"\r\n}\r\n```\r\n\r\n\r\nOtherwise, you have to explicitly set the account to use:\r\n\r\n```\r\n# my_account2 will be used\r\nPUT _snapshot/my_backup\r\n{\r\n    \"type\": \"azure\",\r\n    \"settings\": {\r\n        \"account\": \"my_account2\"\r\n    }\r\n}\r\n```\r\n\r\nI'm fine doing it as you are proposing but in that case I'd open a follow up issue to apply the same pattern to azure plugin so we are consistent across repository plugins.\r\n\r\nAlso if we go your way, as for naming, may be we can use something like `_default_` instead:\r\n\r\n```yml\r\naws.configuration._default_:\r\n    access_key: foo\r\n    secret_key: bar\r\n    proxy_host: example.com\r\n    proxy_port: 1234\r\n```\r\n\r\nWe are using some specific names like this for the network layer for instance.\r\n\r\nWDYT?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/273317523","html_url":"https://github.com/elastic/elasticsearch/issues/22520#issuecomment-273317523","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22520","id":273317523,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MzMxNzUyMw==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2017-01-17T22:14:15Z","updated_at":"2017-01-17T22:14:15Z","author_association":"MEMBER","body":"> If you need multiple accounts, you explicitly set which is the default one with default: true\r\n\r\nI don't like having a flag, as this requires validation code to ensure two accounts were not set with `default: true`. I think a special name is just fine.\r\n\r\n> Also if we go your way, as for naming, may be we can use something like _default_ instead\r\n\r\nI also don't like having to use special characters. I don't see any reason the special configuration name `default` can't be used.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/273401675","html_url":"https://github.com/elastic/elasticsearch/issues/22520#issuecomment-273401675","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22520","id":273401675,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MzQwMTY3NQ==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2017-01-18T07:18:09Z","updated_at":"2017-01-18T07:18:09Z","author_association":"MEMBER","body":"> I don't like having a flag, as this requires validation code to ensure two accounts were not set with default: true. I think a special name is just fine.\r\n\r\nI'm ok with your way of doing it. Just saying that I want to be consistent across plugins so I will move azure to use the same kind of \"global\" configuration which can be referenced then later.\r\n\r\n> I don't see any reason the special configuration name `default` can't be used.\r\n\r\nWell. It's just a way to make sure and clearly identify what are reserved words.\r\nLike what we have in the rest of elasticsearch. `_all` field is not `all` field.\r\n`GET index/_search` instead of `GET index/search`.\r\n\r\nEven more: https://www.elastic.co/guide/en/elasticsearch/reference/5.1/default-mapping.html\r\n\r\n```\r\nPUT my_index\r\n{\r\n  \"mappings\": {\r\n    \"_default_\": { \r\n      \"_all\": {\r\n        \"enabled\": false\r\n      }\r\n  }\r\n}\r\n```\r\n\r\nSo `_default_` seems a better name IMO but I let other people comment. Not a big deal to me.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/273947271","html_url":"https://github.com/elastic/elasticsearch/issues/22520#issuecomment-273947271","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22520","id":273947271,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Mzk0NzI3MQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2017-01-20T01:01:51Z","updated_at":"2017-01-20T01:01:51Z","author_association":"MEMBER","body":"> It's just a way to make sure and clearly identify what are reserved words.\r\n\r\nIt's not really a reserved word though. It is just the the default configuration name when reading the `config` setting in repository settings.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/273994179","html_url":"https://github.com/elastic/elasticsearch/issues/22520#issuecomment-273994179","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22520","id":273994179,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Mzk5NDE3OQ==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2017-01-20T07:16:13Z","updated_at":"2017-01-20T07:16:13Z","author_association":"MEMBER","body":"Then, let's do something like:\r\n\r\n```\r\naws.configuration:\r\n    foo:\r\n        access_key: foo\r\n        secret_key: bar\r\n        proxy_host: example.com\r\n        proxy_port: 1234\r\naws.default: foo\r\n```\r\n\r\nOr something along those lines?\r\nWe can define that `aws.default` default value is `default` which allows your way of writing the settings:\r\n\r\n```\r\naws.configuration:\r\n    default:\r\n        access_key: foo\r\n        secret_key: bar\r\n        proxy_host: example.com\r\n        proxy_port: 1234\r\n```\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/274186757","html_url":"https://github.com/elastic/elasticsearch/issues/22520#issuecomment-274186757","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22520","id":274186757,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDE4Njc1Nw==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2017-01-20T21:38:41Z","updated_at":"2017-01-20T21:38:41Z","author_association":"MEMBER","body":"> We can define that aws.default default value is default\r\n\r\nThat is just an extra level of obfuscation with an additional setting that adds no benefit.","performed_via_github_app":null}]