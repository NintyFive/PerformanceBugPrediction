{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/10137","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10137/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10137/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/10137/events","html_url":"https://github.com/elastic/elasticsearch/issues/10137","id":62697387,"node_id":"MDU6SXNzdWU2MjY5NzM4Nw==","number":10137,"title":" Getting exception in indexing data using node client ","user":{"login":"prachicsa","id":9909499,"node_id":"MDQ6VXNlcjk5MDk0OTk=","avatar_url":"https://avatars1.githubusercontent.com/u/9909499?v=4","gravatar_id":"","url":"https://api.github.com/users/prachicsa","html_url":"https://github.com/prachicsa","followers_url":"https://api.github.com/users/prachicsa/followers","following_url":"https://api.github.com/users/prachicsa/following{/other_user}","gists_url":"https://api.github.com/users/prachicsa/gists{/gist_id}","starred_url":"https://api.github.com/users/prachicsa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prachicsa/subscriptions","organizations_url":"https://api.github.com/users/prachicsa/orgs","repos_url":"https://api.github.com/users/prachicsa/repos","events_url":"https://api.github.com/users/prachicsa/events{/privacy}","received_events_url":"https://api.github.com/users/prachicsa/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-03-18T13:44:13Z","updated_at":"2015-03-18T14:17:47Z","closed_at":"2015-03-18T14:17:47Z","author_association":"NONE","active_lock_reason":null,"body":"Hi,\n\nI have used transport client before for the same cluster and same index, which works fine. I want to use node client now. I tried the following:\n\n```package es.code;\n\nimport org.apache.log4j.Logger;\nimport org.elasticsearch.action.get.GetResponse;\nimport org.elasticsearch.action.index.IndexResponse;\nimport org.elasticsearch.client.Client;\nimport org.elasticsearch.node.Node;\n\nimport static org.elasticsearch.node.NodeBuilder.*;\n\nimport java.io.IOException;\n\npublic class elasticsearch {\n\n```\nprivate elasticsearch() {\n}\n\npublic static void main(String[] args) throws IOException {\n    System.out.println(\"Hello, World\");\n    Client client = null;\n\n    Node node = nodeBuilder().clusterName(\"sample_test\").client(true).node();\n    client = node.client();\n    String json = \"{\" +\n            \"\\\"user\\\":\\\"prachi\\\",\" +\n            \"\\\"postDate\\\":\\\"2013-01-30\\\",\" +\n            \"\\\"message\\\":\\\"trying out Elasticsearch\\\"\" +\n            \"}\";\n\n    IndexResponse response = client.prepareIndex(\"estest\", \"testing\")\n            .setSource(json)\n            .execute()\n            .actionGet();\n\n    System.out.println(response.getId());    \n    node.close();  \n}\n```\n\n}```\n\nI am getting the following exception:\n\n`Exception in thread \"main\" org.elasticsearch.discovery.MasterNotDiscoveredException: waited for [1m]\n    at org.elasticsearch.action.support.master.TransportMasterNodeOperationAction$4.onTimeout(TransportMasterNodeOperationAction.java:164)\n    at org.elasticsearch.cluster.ClusterStateObserver$ObserverClusterStateListener.onTimeout(ClusterStateObserver.java:239)\n    at org.elasticsearch.cluster.service.InternalClusterService$NotifyTimeout.run(InternalClusterService.java:520)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:744)`\n\nWhat is it which I am doing wrong? If I remove client(true), the program runs successfully. But I don't see data in ES index.\n\nWhat is the correct way to do it?\n","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}