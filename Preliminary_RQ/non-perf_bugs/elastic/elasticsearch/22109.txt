{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/22109","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22109/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22109/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22109/events","html_url":"https://github.com/elastic/elasticsearch/issues/22109","id":194928915,"node_id":"MDU6SXNzdWUxOTQ5Mjg5MTU=","number":22109,"title":"x-pack offline installation : failure","user":{"login":"MarneusCalgarXP","id":1315177,"node_id":"MDQ6VXNlcjEzMTUxNzc=","avatar_url":"https://avatars3.githubusercontent.com/u/1315177?v=4","gravatar_id":"","url":"https://api.github.com/users/MarneusCalgarXP","html_url":"https://github.com/MarneusCalgarXP","followers_url":"https://api.github.com/users/MarneusCalgarXP/followers","following_url":"https://api.github.com/users/MarneusCalgarXP/following{/other_user}","gists_url":"https://api.github.com/users/MarneusCalgarXP/gists{/gist_id}","starred_url":"https://api.github.com/users/MarneusCalgarXP/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MarneusCalgarXP/subscriptions","organizations_url":"https://api.github.com/users/MarneusCalgarXP/orgs","repos_url":"https://api.github.com/users/MarneusCalgarXP/repos","events_url":"https://api.github.com/users/MarneusCalgarXP/events{/privacy}","received_events_url":"https://api.github.com/users/MarneusCalgarXP/received_events","type":"User","site_admin":false},"labels":[{"id":146832994,"node_id":"MDU6TGFiZWwxNDY4MzI5OTQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Infra/Plugins","name":":Core/Infra/Plugins","color":"0e8a16","default":false,"description":"Plugin API and infrastructure"},{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2016-12-12T09:42:14Z","updated_at":"2016-12-16T09:19:33Z","closed_at":"2016-12-16T09:19:33Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**: 5.1.1\r\n\r\n**Plugins installed**: [none]\r\n\r\n**JVM version**: 1.8.0_101-b13 64bits\r\n\r\n**OS version**: Centos 6\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nWhen trying to install x-pack offline as indicated by official documentation (https://www.elastic.co/guide/en/x-pack/5.0/installing-xpack.html#xpack-installing-offline), I get an error:\r\n\r\n```\r\n$ ./bin/elasticsearch-plugin install file:///path/to/elasticsearch-5.1.1/plugins/x-pack-5.1.1.zip\r\n-> Downloading file:///path/to/elasticsearch-5.1.1/plugins/x-pack-5.1.1.zip\r\n[=================================================] 100%Â Â \r\nException in thread \"main\" java.lang.IllegalStateException: Could not load plugin descriptor for existing plugin [x-pack-5.1.1.zip]. Was the plugin built before 2.0?\r\n        at org.elasticsearch.plugins.PluginsService.getPluginBundles(PluginsService.java:295)\r\n        at org.elasticsearch.plugins.InstallPluginCommand.jarHellCheck(InstallPluginCommand.java:451)\r\n        at org.elasticsearch.plugins.InstallPluginCommand.verify(InstallPluginCommand.java:432)\r\n        at org.elasticsearch.plugins.InstallPluginCommand.install(InstallPluginCommand.java:474)\r\n        at org.elasticsearch.plugins.InstallPluginCommand.execute(InstallPluginCommand.java:212)\r\n        at org.elasticsearch.plugins.InstallPluginCommand.execute(InstallPluginCommand.java:195)\r\n        at org.elasticsearch.cli.SettingCommand.execute(SettingCommand.java:54)\r\n        at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:96)\r\n        at org.elasticsearch.cli.MultiCommand.execute(MultiCommand.java:69)\r\n        at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:96)\r\n        at org.elasticsearch.cli.Command.main(Command.java:62)\r\n        at org.elasticsearch.plugins.PluginCli.main(PluginCli.java:42)\r\nCaused by: java.nio.file.FileSystemException: /path/to/elasticsearch-5.1.1/plugins/x-pack-5.1.1.zip/plugin-descriptor.properties: Not a directory\r\n        at sun.nio.fs.UnixException.translateToIOException(UnixException.java:91)\r\n        at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)\r\n        at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)\r\n        at sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214)\r\n        at java.nio.file.Files.newByteChannel(Files.java:361)\r\n        at java.nio.file.Files.newByteChannel(Files.java:407)\r\n        at java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:384)\r\n        at java.nio.file.Files.newInputStream(Files.java:152)\r\n        at org.elasticsearch.plugins.PluginInfo.readFromProperties(PluginInfo.java:86)\r\n        at org.elasticsearch.plugins.PluginsService.getPluginBundles(PluginsService.java:292)\r\n        ... 11 more\r\n```\r\n\r\n**Steps to reproduce**:\r\n 1. Download and unzip elasticsearch 5.1.1\r\n 2. Download offline x-pack package (wget https://artifacts.elastic.co/downloads/packs/x-pack/x-pack-5.1.1.zip ) (into plugins directory)\r\n 3. Try to install x-pack as described in documentation (./bin/elasticsearch-plugin install file:///path/to/elasticsearch-5.1.1/plugins//x-pack-5.1.1.zip)\r\n\r\n**Provide logs (if relevant)**:\r\n\r\n```\r\n-> Downloading file:///path/to/elasticsearch-5.1.1/plugins/x-pack-5.1.1.zip\r\n[=================================================] 100%Â Â \r\nException in thread \"main\" java.lang.IllegalStateException: Could not load plugin descriptor for existing plugin [x-pack-5.1.1.zip]. Was the plugin built before 2.0?\r\n        at org.elasticsearch.plugins.PluginsService.getPluginBundles(PluginsService.java:295)\r\n        at org.elasticsearch.plugins.InstallPluginCommand.jarHellCheck(InstallPluginCommand.java:451)\r\n        at org.elasticsearch.plugins.InstallPluginCommand.verify(InstallPluginCommand.java:432)\r\n        at org.elasticsearch.plugins.InstallPluginCommand.install(InstallPluginCommand.java:474)\r\n        at org.elasticsearch.plugins.InstallPluginCommand.execute(InstallPluginCommand.java:212)\r\n        at org.elasticsearch.plugins.InstallPluginCommand.execute(InstallPluginCommand.java:195)\r\n        at org.elasticsearch.cli.SettingCommand.execute(SettingCommand.java:54)\r\n        at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:96)\r\n        at org.elasticsearch.cli.MultiCommand.execute(MultiCommand.java:69)\r\n        at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:96)\r\n        at org.elasticsearch.cli.Command.main(Command.java:62)\r\n        at org.elasticsearch.plugins.PluginCli.main(PluginCli.java:42)\r\nCaused by: java.nio.file.FileSystemException: /path/to/elasticsearch-5.1.1/plugins/x-pack-5.1.1.zip/plugin-descriptor.properties: Not a directory\r\n        at sun.nio.fs.UnixException.translateToIOException(UnixException.java:91)\r\n        at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)\r\n        at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)\r\n        at sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214)\r\n        at java.nio.file.Files.newByteChannel(Files.java:361)\r\n        at java.nio.file.Files.newByteChannel(Files.java:407)\r\n        at java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:384)\r\n        at java.nio.file.Files.newInputStream(Files.java:152)\r\n        at org.elasticsearch.plugins.PluginInfo.readFromProperties(PluginInfo.java:86)\r\n        at org.elasticsearch.plugins.PluginsService.getPluginBundles(PluginsService.java:292)\r\n        ... 11 more\r\n```\r\n\r\n**Workaround**:\r\n* $ cd /path/to/elasticsearch-5.1.1/plugins\r\n* $ unzip x-pack-5.1.1.zip \"elasticsearch/*\"\r\n* $ mv elasticsearch x-pack\r\n\r\n\r\nEDITED 2016-12-15 : I downloaded the x-pack zip file into the plugins directory","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}