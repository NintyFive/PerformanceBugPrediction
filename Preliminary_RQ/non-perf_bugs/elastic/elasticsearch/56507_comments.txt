[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/626641249","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-626641249","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":626641249,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNjY0MTI0OQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-05-11T11:20:00Z","updated_at":"2020-05-11T11:20:00Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-security (:Security/Authentication)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/626675103","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-626675103","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":626675103,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNjY3NTEwMw==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2020-05-11T12:37:48Z","updated_at":"2020-05-11T12:51:28Z","author_association":"CONTRIBUTOR","body":"These started failing in May 9 only with runtime java set to 15 ( this is why @benwtrent can't reproduce them I guess, the repro line above is missing the `-Druntime.java=15` but the build plugin output has this as it should ) . Now, JDK 15 build 22 was released on May 6 and ~I guess we picked it up around May 9~ we actually picked it up on [May 7](https://github.com/elastic/infra/commit/6a3d551a14fb50ad7b711cf7fab08a4ed32384e3). This is an NPE in the `sun.security.krb5.KrbKdcRep` class so I guess it's most probably a JDK bug rather one of our own.  I will look at this over the next week or so and file the bug upstream if needed. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/626817156","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-626817156","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":626817156,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNjgxNzE1Ng==","user":{"login":"benwtrent","id":4357155,"node_id":"MDQ6VXNlcjQzNTcxNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/4357155?v=4","gravatar_id":"","url":"https://api.github.com/users/benwtrent","html_url":"https://github.com/benwtrent","followers_url":"https://api.github.com/users/benwtrent/followers","following_url":"https://api.github.com/users/benwtrent/following{/other_user}","gists_url":"https://api.github.com/users/benwtrent/gists{/gist_id}","starred_url":"https://api.github.com/users/benwtrent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benwtrent/subscriptions","organizations_url":"https://api.github.com/users/benwtrent/orgs","repos_url":"https://api.github.com/users/benwtrent/repos","events_url":"https://api.github.com/users/benwtrent/events{/privacy}","received_events_url":"https://api.github.com/users/benwtrent/received_events","type":"User","site_admin":false},"created_at":"2020-05-11T16:42:12Z","updated_at":"2020-05-11T16:42:12Z","author_association":"MEMBER","body":"Here is a different test failure, but also JDK15 + kerberos NPE: https://gradle-enterprise.elastic.co/s/hgrh76kyapze2\r\n\r\n```\r\njava.io.IOException: Login failure for hdfs/hdfs.build.elastic.co@BUILD.ELASTIC.CO from keytab /dev/shm/elastic+elasticsearch+7.x+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15/nodes/general-purpose/test/fixtures/krb5kdc-fixture/testfixtures_shared/shared/hdfs/keytabs/hdfs_hdfs.build.elastic.co.keytab: javax.security.auth.login.LoginException: java.lang.NullPointerException\r\n    \tat java.security.jgss/sun.security.krb5.KrbKdcRep.check(KrbKdcRep.java:149)\r\n    \tat java.security.jgss/sun.security.krb5.KrbAsRep.decrypt(KrbAsRep.java:159)\r\n    \tat java.security.jgss/sun.security.krb5.KrbAsRep.decryptUsingKeyTab(KrbAsRep.java:121)\r\n    \tat java.security.jgss/sun.security.krb5.KrbAsReqBuilder.resolve(KrbAsReqBuilder.java:310)\r\n    \tat java.security.jgss/sun.security.krb5.KrbAsReqBuilder.action(KrbAsReqBuilder.java:498)\r\n    \tat jdk.security.auth/com.sun.security.auth.module.Krb5LoginModule.attemptAuthentication(Krb5LoginModule.java:754)\r\n    \tat jdk.security.auth/com.sun.security.auth.module.Krb5LoginModule.login(Krb5LoginModule.java:592)\r\n    \tat java.base/javax.security.auth.login.LoginContext.invoke(LoginContext.java:726)\r\n    \tat java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:665)\r\n    \tat java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:663)\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:691)\r\n    \tat java.base/javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:663)\r\n    \tat java.base/javax.security.auth.login.LoginContext.login(LoginContext.java:574)\r\n    \tat org.apache.hadoop.security.UserGroupInformation.loginUserFromKeytab(UserGroupInformation.java:1057)\r\n    \tat org.apache.hadoop.security.SecurityUtil.login(SecurityUtil.java:286)\r\n    \tat org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:1081)\r\n    \tat org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:376)\r\n    \tat org.apache.hadoop.hdfs.DFSTestUtil.formatNameNode(DFSTestUtil.java:233)\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.createNameNodesAndSetConf(MiniDFSCluster.java:1027)\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.initMiniDFSCluster(MiniDFSCluster.java:830)\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.<init>(MiniDFSCluster.java:485)\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster$Builder.build(MiniDFSCluster.java:444)\r\n    \tat hdfs.MiniHDFS.main(MiniHDFS.java:119)\r\n    \r\n    \tat org.apache.hadoop.security.UserGroupInformation.loginUserFromKeytab(UserGroupInformation.java:1066)\r\n    \tat org.apache.hadoop.security.SecurityUtil.login(SecurityUtil.java:286)\r\n    \tat org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:1081)\r\n    \tat org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:376)\r\n    \tat org.apache.hadoop.hdfs.DFSTestUtil.formatNameNode(DFSTestUtil.java:233)\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.createNameNodesAndSetConf(MiniDFSCluster.java:1027)\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.initMiniDFSCluster(MiniDFSCluster.java:830)\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.<init>(MiniDFSCluster.java:485)\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster$Builder.build(MiniDFSCluster.java:444)\r\n    \tat hdfs.MiniHDFS.main(MiniHDFS.java:119)\r\n    Caused by: javax.security.auth.login.LoginException: java.lang.NullPointerException\r\n    \tat java.security.jgss/sun.security.krb5.KrbKdcRep.check(KrbKdcRep.java:149)\r\n    \tat java.security.jgss/sun.security.krb5.KrbAsRep.decrypt(KrbAsRep.java:159)\r\n    \tat java.security.jgss/sun.security.krb5.KrbAsRep.decryptUsingKeyTab(KrbAsRep.java:121)\r\n    \tat java.security.jgss/sun.security.krb5.KrbAsReqBuilder.resolve(KrbAsReqBuilder.java:310)\r\n    \tat java.security.jgss/sun.security.krb5.KrbAsReqBuilder.action(KrbAsReqBuilder.java:498)\r\n    \tat jdk.security.auth/com.sun.security.auth.module.Krb5LoginModule.attemptAuthentication(Krb5LoginModule.java:754)\r\n    \tat jdk.security.auth/com.sun.security.auth.module.Krb5LoginModule.login(Krb5LoginModule.java:592)\r\n    \tat java.base/javax.security.auth.login.LoginContext.invoke(LoginContext.java:726)\r\n    \tat java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:665)\r\n    \tat java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:663)\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:691)\r\n    \tat java.base/javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:663)\r\n    \tat java.base/javax.security.auth.login.LoginContext.login(LoginContext.java:574)\r\n    \tat org.apache.hadoop.security.UserGroupInformation.loginUserFromKeytab(UserGroupInformation.java:1057)\r\n    \tat org.apache.hadoop.security.SecurityUtil.login(SecurityUtil.java:286)\r\n    \tat org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:1081)\r\n    \tat org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:376)\r\n    \tat org.apache.hadoop.hdfs.DFSTestUtil.formatNameNode(DFSTestUtil.java:233)\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.createNameNodesAndSetConf(MiniDFSCluster.java:1027)\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.initMiniDFSCluster(MiniDFSCluster.java:830)\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.<init>(MiniDFSCluster.java:485)\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster$Builder.build(MiniDFSCluster.java:444)\r\n    \tat hdfs.MiniHDFS.main(MiniHDFS.java:119)\r\n    \r\n    \tat java.base/javax.security.auth.login.LoginContext.invoke(LoginContext.java:821)\r\n    \tat java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:665)\r\n    \tat java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:663)\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:691)\r\n    \tat java.base/javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:663)\r\n    \tat java.base/javax.security.auth.login.LoginContext.login(LoginContext.java:574)\r\n    \tat org.apache.hadoop.security.UserGroupInformation.loginUserFromKeytab(UserGroupInformation.java:1057)\r\n    \t... 9 more\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/627848939","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-627848939","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":627848939,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNzg0ODkzOQ==","user":{"login":"markharwood","id":170925,"node_id":"MDQ6VXNlcjE3MDkyNQ==","avatar_url":"https://avatars0.githubusercontent.com/u/170925?v=4","gravatar_id":"","url":"https://api.github.com/users/markharwood","html_url":"https://github.com/markharwood","followers_url":"https://api.github.com/users/markharwood/followers","following_url":"https://api.github.com/users/markharwood/following{/other_user}","gists_url":"https://api.github.com/users/markharwood/gists{/gist_id}","starred_url":"https://api.github.com/users/markharwood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markharwood/subscriptions","organizations_url":"https://api.github.com/users/markharwood/orgs","repos_url":"https://api.github.com/users/markharwood/repos","events_url":"https://api.github.com/users/markharwood/events{/privacy}","received_events_url":"https://api.github.com/users/markharwood/received_events","type":"User","site_admin":false},"created_at":"2020-05-13T08:57:11Z","updated_at":"2020-05-13T08:57:11Z","author_association":"CONTRIBUTOR","body":"Another JDK15 + Kerberos NPE today https://gradle-enterprise.elastic.co/s/w46qi55v5ga2k\r\n\r\n    REPRODUCE WITH: ./gradlew ':x-pack:qa:kerberos-tests:integTestRunner' --tests \"org.elasticsearch.xpack.security.authc.kerberos.KerberosAuthenticationIT.testLoginByKeytab\" -Dtests.seed=5473F4144376DD6D -Dtests.security.manager=true -Dtests.locale=en-ZA -Dtests.timezone=Hongkong -Dcompiler.java=13 |  \r\n\r\n```\r\n\r\njava.lang.RuntimeException: javax.security.auth.login.LoginException: java.lang.NullPointerException |  \r\n-- | --\r\n  | at java.security.jgss/sun.security.krb5.KrbKdcRep.check(KrbKdcRep.java:149) |  \r\n  | at java.security.jgss/sun.security.krb5.KrbAsRep.decrypt(KrbAsRep.java:159) |  \r\n  | at java.security.jgss/sun.security.krb5.KrbAsRep.decryptUsingKeyTab(KrbAsRep.java:121) |  \r\n  | at java.security.jgss/sun.security.krb5.KrbAsReqBuilder.resolve(KrbAsReqBuilder.java:310) |  \r\n  | at java.security.jgss/sun.security.krb5.KrbAsReqBuilder.action(KrbAsReqBuilder.java:498) |  \r\n  | at jdk.security.auth/com.sun.security.auth.module.Krb5LoginModule.attemptAuthentication(Krb5LoginModule.java:754) |  \r\n  | at jdk.security.auth/com.sun.security.auth.module.Krb5LoginModule.login(Krb5LoginModule.java:592) |  \r\n  | at java.base/javax.security.auth.login.LoginContext.invoke(LoginContext.java:726) |  \r\n  | at java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:665) |  \r\n  | at java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:663) |  \r\n  | at java.base/java.security.AccessController.doPrivileged(AccessController.java:691) |  \r\n  | at java.base/javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:663) |  \r\n  | at java.base/javax.security.auth.login.LoginContext.login(LoginContext.java:574) |  \r\n  | at org.elasticsearch.xpack.security.authc.kerberos.SpnegoHttpClientConfigCallbackHandler.lambda$login$1(SpnegoHttpClientConfigCallbackHandler.java:168) |  \r\n  | at java.base/java.security.AccessController.doPrivileged(AccessController.java:554) |  \r\n  | at org.elasticsearch.xpack.security.authc.kerberos.SpnegoHttpClientConfigCallbackHandler.login(SpnegoHttpClientConfigCallbackHandler.java:155) |  \r\n  | at org.elasticsearch.xpack.security.authc.kerberos.SpnegoHttpClientConfigCallbackHandler.setupSpnegoAuthSchemeSupport(SpnegoHttpClientConfigCallbackHandler.java:126) |  \r\n  | at org.elasticsearch.xpack.security.authc.kerberos.SpnegoHttpClientConfigCallbackHandler.customizeHttpClient(SpnegoHttpClientConfigCallbackHandler.java:115) |  \r\n  | at org.elasticsearch.client.RestClientBuilder.createHttpClient(RestClientBuilder.java:215) |  \r\n  | at java.base/java.security.AccessController.doPrivileged(AccessController.java:312) |  \r\n  | at org.elasticsearch.client.RestClientBuilder.build(RestClientBuilder.java:191) |  \r\n  | at org.elasticsearch.xpack.security.authc.kerberos.KerberosAuthenticationIT.buildRestClientForKerberos(KerberosAuthenticationIT.java:190) |  \r\n  | at org.elasticsearch.xpack.security.authc.kerberos.KerberosAuthenticationIT.executeRequestAndVerifyResponse(KerberosAuthenticationIT.java:156) |  \r\n  | at org.elasticsearch.xpack.security.authc.kerberos.KerberosAuthenticationIT.testLoginByKeytab(KerberosAuthenticationIT.java:98) |  \r\n  | at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) |  \r\n  | at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64) |  \r\n  | at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) |  \r\n  | at java.base/java.lang.reflect.Method.invoke(Method.java:564) |  \r\n  | at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1750) |  \r\n  | at com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:938) |  \r\n  | at com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:974) |  \r\n  | at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:988) |  \r\n  | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) |  \r\n  | at org.apache.lucene.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:49) |  \r\n  | at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45) |  \r\n  | at org.apache.lucene.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:48) |  \r\n  | at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64) |  \r\n  | at org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47) |  \r\n  | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) |  \r\n  | at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:368) |  \r\n  | at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:817) |  \r\n  | at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:468) |  \r\n  | at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:947) |  \r\n  | at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:832) |  \r\n  | at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:883) |  \r\n  | at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:894) |  \r\n  | at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45) |  \r\n  | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) |  \r\n  | at org.apache.lucene.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:41) |  \r\n  | at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40) |  \r\n  | at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40) |  \r\n  | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) |  \r\n  | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) |  \r\n  | at org.apache.lucene.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53) |  \r\n  | at org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47) |  \r\n  | at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64) |  \r\n  | at org.apache.lucene.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:54) |  \r\n  | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) |  \r\n  | at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:368) |  \r\n  | at java.base/java.lang.Thread.run(Thread.java:832) |  \r\n  | at __randomizedtesting.SeedInfo.seed([5473F4144376DD6D:3B105C19777E512A]:0) |  \r\n  | at org.elasticsearch.xpack.security.authc.kerberos.SpnegoHttpClientConfigCallbackHandler.setupSpnegoAuthSchemeSupport(SpnegoHttpClientConfigCallbackHandler.java:141) |  \r\n  | at org.elasticsearch.xpack.security.authc.kerberos.SpnegoHttpClientConfigCallbackHandler.customizeHttpClient(SpnegoHttpClientConfigCallbackHandler.java:115) |  \r\n  | at org.elasticsearch.client.RestClientBuilder.createHttpClient(RestClientBuilder.java:215) |  \r\n  | at java.base/java.security.AccessController.doPrivileged(AccessController.java:312) |  \r\n  | at org.elasticsearch.client.RestClientBuilder.build(RestClientBuilder.java:191) |  \r\n  | at org.elasticsearch.xpack.security.authc.kerberos.KerberosAuthenticationIT.buildRestClientForKerberos(KerberosAuthenticationIT.java:190) |  \r\n  | at org.elasticsearch.xpack.security.authc.kerberos.KerberosAuthenticationIT.executeRequestAndVerifyResponse(KerberosAuthenticationIT.java:156) |  \r\n  | at org.elasticsearch.xpack.security.authc.kerberos.KerberosAuthenticationIT.testLoginByKeytab(KerberosAuthenticationIT.java:98) |  \r\n  |   |  \r\n  | Caused by: |  \r\n  | javax.security.auth.login.LoginException: java.lang.NullPointerException |  \r\n  | at java.security.jgss/sun.security.krb5.KrbKdcRep.check(KrbKdcRep.java:149) |  \r\n  | at java.security.jgss/sun.security.krb5.KrbAsRep.decrypt(KrbAsRep.java:159) |  \r\n  | at java.security.jgss/sun.security.krb5.KrbAsRep.decryptUsingKeyTab(KrbAsRep.java:121) |  \r\n  | at java.security.jgss/sun.security.krb5.KrbAsReqBuilder.resolve(KrbAsReqBuilder.java:310) |  \r\n  | at java.security.jgss/sun.security.krb5.KrbAsReqBuilder.action(KrbAsReqBuilder.java:498) |  \r\n  | at jdk.security.auth/com.sun.security.auth.module.Krb5LoginModule.attemptAuthentication(Krb5LoginModule.java:754) |  \r\n  | at jdk.security.auth/com.sun.security.auth.module.Krb5LoginModule.login(Krb5LoginModule.java:592) |  \r\n  | at java.base/javax.security.auth.login.LoginContext.invoke(LoginContext.java:726) |  \r\n  | at java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:665) |  \r\n  | at java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:663)\r\n\r\n\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/627936884","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-627936884","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":627936884,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNzkzNjg4NA==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2020-05-13T12:03:46Z","updated_at":"2020-05-13T12:03:46Z","author_association":"CONTRIBUTOR","body":"I spent 30 mins on it today out of curiosity. It seems this is actually a bug in sun.security.krb5.KrbKdcRep that was surfaced by the changes to `ReferralsState` in https://hg.openjdk.java.net/jdk/jdk/rev/142d090cab77 . I don't know enough about the mentioned RFCs in order to make a proper bug request upstream now, and given this might be a JDK15 regression that doesn't affect us now, I will take the time at some point over the next few weeks to do so  ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/634937536","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-634937536","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":634937536,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNDkzNzUzNg==","user":{"login":"gwbrown","id":1522844,"node_id":"MDQ6VXNlcjE1MjI4NDQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1522844?v=4","gravatar_id":"","url":"https://api.github.com/users/gwbrown","html_url":"https://github.com/gwbrown","followers_url":"https://api.github.com/users/gwbrown/followers","following_url":"https://api.github.com/users/gwbrown/following{/other_user}","gists_url":"https://api.github.com/users/gwbrown/gists{/gist_id}","starred_url":"https://api.github.com/users/gwbrown/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gwbrown/subscriptions","organizations_url":"https://api.github.com/users/gwbrown/orgs","repos_url":"https://api.github.com/users/gwbrown/repos","events_url":"https://api.github.com/users/gwbrown/events{/privacy}","received_events_url":"https://api.github.com/users/gwbrown/received_events","type":"User","site_admin":false},"created_at":"2020-05-27T21:02:00Z","updated_at":"2020-05-27T21:03:47Z","author_association":"CONTRIBUTOR","body":"I believe this same issue is causing failures on the JVM matrix builds, as the HDFS fixture depends on Kerberos and also hits this same failure. Sample build scans:\r\n[master](https://gradle-enterprise.elastic.co/s/lzd6ssx3erg7i)\r\n[7.8](https://gradle-enterprise.elastic.co/s/ovxdvtdgdf5ic)\r\n[7.7](https://gradle-enterprise.elastic.co/s/bssl5w7chx654)\r\n\r\nAll on JDK15.\r\n\r\nThe error appears to be the same: `LoginException` caused by a `NullPointerException` in `java.security.jgss/sun.security.krb5.KrbKdcRep.check` with the same stack trace as above.\r\n\r\n<details>\r\n<summary>Very log failure log</summary>\r\n\r\n```\r\nsecureHdfsFixture configuration:\t\r\n-----------------------------------------\t\r\n  cwd: /dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15/nodes/general-purpose/plugins/repository-hdfs/build/fixtures/secureHdfsFixture/cwd\t\r\n  command: /var/lib/jenkins/.java/openjdk15/bin/java -Djava.security.krb5.conf=/dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15/nodes/general-purpose/test/fixtures/krb5kdc-fixture/testfixtures_shared/shared/hdfs/krb5.conf hdfs.MiniHDFS /dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15/nodes/general-purpose/plugins/repository-hdfs/build/fixtures/secureHdfsFixture hdfs/hdfs.build.elastic.co@BUILD.ELASTIC.CO /dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15/nodes/general-purpose/test/fixtures/krb5kdc-fixture/testfixtures_shared/shared/hdfs/keytabs/hdfs_hdfs.build.elastic.co.keytab\t\r\n  environment:\t\r\n    CLASSPATH: [...omitted for brevity]\r\n\t\r\n  [run]\t\r\n    \"/var/lib/jenkins/.java/openjdk15/bin/java\" \"$@\" > run.log 2>&1 ; if [ $? != 0 ]; then touch run.failed; fi\t\r\nsecureHdfsFixture output:\t\r\n-----------------------------------------\t\r\n  failure marker exists: true\t\r\n  pid file exists: false\t\r\n  ports file exists: false\t\r\n\t\r\n  [log]\t\r\n    Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF8\t\r\n    WARNING: An illegal reflective access operation has occurred\t\r\n    WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/var/lib/jenkins/.gradle/caches/modules-2/files-2.1/org.apache.hadoop/hadoop-auth/2.8.5/63fe1f9d9ef6bdf2cb52dfeb28ed8faf78e4b85c/hadoop-auth-2.8.5.jar) to method sun.security.krb5.Config.getInstance()\t\r\n    WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil\t\r\n    WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\t\r\n    WARNING: All illegal access operations will be denied in a future release\t\r\n    2020-05-27 16:34:15,386 WARN  [main] util.NativeCodeLoader (NativeCodeLoader.java:<clinit>(62)) - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\t\r\n    2020-05-27 16:34:15,587 INFO  [main] hdfs.MiniDFSCluster (MiniDFSCluster.java:<init>(460)) - starting cluster: numNameNodes=1, numDataNodes=1\t\r\n    2020-05-27 16:34:16,549 ERROR [main] hdfs.MiniDFSCluster (MiniDFSCluster.java:initMiniDFSCluster(835)) - IOE creating namenodes. Permissions dump:\t\r\n    path '/dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15/nodes/general-purpose/plugins/repository-hdfs/build/fixtures/secureHdfsFixture/hdfs-data/data': \t\r\n    \tabsolute:/dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15/nodes/general-purpose/plugins/repository-hdfs/build/fixtures/secureHdfsFixture/hdfs-data/data\t\r\n    \tpermissions: ----\t\r\n    path '/dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15/nodes/general-purpose/plugins/repository-hdfs/build/fixtures/secureHdfsFixture/hdfs-data': \t\r\n    \tabsolute:/dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15/nodes/general-purpose/plugins/repository-hdfs/build/fixtures/secureHdfsFixture/hdfs-data\t\r\n    \tpermissions: ----\t\r\n    path '/dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15/nodes/general-purpose/plugins/repository-hdfs/build/fixtures/secureHdfsFixture': \t\r\n    \tabsolute:/dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15/nodes/general-purpose/plugins/repository-hdfs/build/fixtures/secureHdfsFixture\t\r\n    \tpermissions: drwx\t\r\n    path '/dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15/nodes/general-purpose/plugins/repository-hdfs/build/fixtures': \t\r\n    \tabsolute:/dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15/nodes/general-purpose/plugins/repository-hdfs/build/fixtures\t\r\n    \tpermissions: drwx\t\r\n    path '/dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15/nodes/general-purpose/plugins/repository-hdfs/build': \t\r\n    \tabsolute:/dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15/nodes/general-purpose/plugins/repository-hdfs/build\t\r\n    \tpermissions: drwx\t\r\n    path '/dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15/nodes/general-purpose/plugins/repository-hdfs': \t\r\n    \tabsolute:/dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15/nodes/general-purpose/plugins/repository-hdfs\t\r\n    \tpermissions: drwx\t\r\n    path '/dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15/nodes/general-purpose/plugins': \t\r\n    \tabsolute:/dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15/nodes/general-purpose/plugins\t\r\n    \tpermissions: drwx\t\r\n    path '/dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15/nodes/general-purpose': \t\r\n    \tabsolute:/dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15/nodes/general-purpose\t\r\n    \tpermissions: drwx\t\r\n    path '/dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15/nodes': \t\r\n    \tabsolute:/dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15/nodes\t\r\n    \tpermissions: drwx\t\r\n    path '/dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15': \t\r\n    \tabsolute:/dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15\t\r\n    \tpermissions: drwx\t\r\n    path '/dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA': \t\r\n    \tabsolute:/dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA\t\r\n    \tpermissions: drwx\t\r\n    path '/dev/shm/elastic+elasticsearch+master+matrix-java-periodic': \t\r\n    \tabsolute:/dev/shm/elastic+elasticsearch+master+matrix-java-periodic\t\r\n    \tpermissions: drwx\t\r\n    path '/dev/shm': \t\r\n    \tabsolute:/dev/shm\t\r\n    \tpermissions: drwx\t\r\n    path '/dev': \t\r\n    \tabsolute:/dev\t\r\n    \tpermissions: dr-x\t\r\n    path '/': \t\r\n    \tabsolute:/\t\r\n    \tpermissions: dr-x\t\r\n    \t\r\n    java.io.IOException: Login failure for hdfs/hdfs.build.elastic.co@BUILD.ELASTIC.CO from keytab /dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15/nodes/general-purpose/test/fixtures/krb5kdc-fixture/testfixtures_shared/shared/hdfs/keytabs/hdfs_hdfs.build.elastic.co.keytab: javax.security.auth.login.LoginException: java.lang.NullPointerException\t\r\n    \tat java.security.jgss/sun.security.krb5.KrbKdcRep.check(KrbKdcRep.java:149)\t\r\n    \tat java.security.jgss/sun.security.krb5.KrbAsRep.decrypt(KrbAsRep.java:159)\t\r\n    \tat java.security.jgss/sun.security.krb5.KrbAsRep.decryptUsingKeyTab(KrbAsRep.java:121)\t\r\n    \tat java.security.jgss/sun.security.krb5.KrbAsReqBuilder.resolve(KrbAsReqBuilder.java:310)\t\r\n    \tat java.security.jgss/sun.security.krb5.KrbAsReqBuilder.action(KrbAsReqBuilder.java:498)\t\r\n    \tat jdk.security.auth/com.sun.security.auth.module.Krb5LoginModule.attemptAuthentication(Krb5LoginModule.java:754)\t\r\n    \tat jdk.security.auth/com.sun.security.auth.module.Krb5LoginModule.login(Krb5LoginModule.java:592)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext.invoke(LoginContext.java:726)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:665)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:663)\t\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:691)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:663)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext.login(LoginContext.java:574)\t\r\n    \tat org.apache.hadoop.security.UserGroupInformation.loginUserFromKeytab(UserGroupInformation.java:1057)\t\r\n    \tat org.apache.hadoop.security.SecurityUtil.login(SecurityUtil.java:286)\t\r\n    \tat org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:1081)\t\r\n    \tat org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:376)\t\r\n    \tat org.apache.hadoop.hdfs.DFSTestUtil.formatNameNode(DFSTestUtil.java:233)\t\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.createNameNodesAndSetConf(MiniDFSCluster.java:1027)\t\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.initMiniDFSCluster(MiniDFSCluster.java:830)\t\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.<init>(MiniDFSCluster.java:485)\t\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster$Builder.build(MiniDFSCluster.java:444)\t\r\n    \tat hdfs.MiniHDFS.main(MiniHDFS.java:119)\t\r\n    \t\r\n    \tat org.apache.hadoop.security.UserGroupInformation.loginUserFromKeytab(UserGroupInformation.java:1066)\t\r\n    \tat org.apache.hadoop.security.SecurityUtil.login(SecurityUtil.java:286)\t\r\n    \tat org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:1081)\t\r\n    \tat org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:376)\t\r\n    \tat org.apache.hadoop.hdfs.DFSTestUtil.formatNameNode(DFSTestUtil.java:233)\t\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.createNameNodesAndSetConf(MiniDFSCluster.java:1027)\t\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.initMiniDFSCluster(MiniDFSCluster.java:830)\t\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.<init>(MiniDFSCluster.java:485)\t\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster$Builder.build(MiniDFSCluster.java:444)\t\r\n    \tat hdfs.MiniHDFS.main(MiniHDFS.java:119)\t\r\n    Caused by: javax.security.auth.login.LoginException: java.lang.NullPointerException\t\r\n    \tat java.security.jgss/sun.security.krb5.KrbKdcRep.check(KrbKdcRep.java:149)\t\r\n    \tat java.security.jgss/sun.security.krb5.KrbAsRep.decrypt(KrbAsRep.java:159)\t\r\n    \tat java.security.jgss/sun.security.krb5.KrbAsRep.decryptUsingKeyTab(KrbAsRep.java:121)\t\r\n    \tat java.security.jgss/sun.security.krb5.KrbAsReqBuilder.resolve(KrbAsReqBuilder.java:310)\t\r\n    \tat java.security.jgss/sun.security.krb5.KrbAsReqBuilder.action(KrbAsReqBuilder.java:498)\t\r\n    \tat jdk.security.auth/com.sun.security.auth.module.Krb5LoginModule.attemptAuthentication(Krb5LoginModule.java:754)\t\r\n    \tat jdk.security.auth/com.sun.security.auth.module.Krb5LoginModule.login(Krb5LoginModule.java:592)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext.invoke(LoginContext.java:726)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:665)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:663)\t\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:691)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:663)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext.login(LoginContext.java:574)\t\r\n    \tat org.apache.hadoop.security.UserGroupInformation.loginUserFromKeytab(UserGroupInformation.java:1057)\t\r\n    \tat org.apache.hadoop.security.SecurityUtil.login(SecurityUtil.java:286)\t\r\n    \tat org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:1081)\t\r\n    \tat org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:376)\t\r\n    \tat org.apache.hadoop.hdfs.DFSTestUtil.formatNameNode(DFSTestUtil.java:233)\t\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.createNameNodesAndSetConf(MiniDFSCluster.java:1027)\t\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.initMiniDFSCluster(MiniDFSCluster.java:830)\t\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.<init>(MiniDFSCluster.java:485)\t\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster$Builder.build(MiniDFSCluster.java:444)\t\r\n    \tat hdfs.MiniHDFS.main(MiniHDFS.java:119)\t\r\n    \t\r\n    \tat java.base/javax.security.auth.login.LoginContext.invoke(LoginContext.java:821)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:665)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:663)\t\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:691)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:663)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext.login(LoginContext.java:574)\t\r\n    \tat org.apache.hadoop.security.UserGroupInformation.loginUserFromKeytab(UserGroupInformation.java:1057)\t\r\n    \t... 9 more\t\r\n    2020-05-27 16:34:16,556 INFO  [main] hdfs.MiniDFSCluster (MiniDFSCluster.java:shutdown(1789)) - Shutting down the Mini HDFS Cluster\t\r\n    Exception in thread \"main\" java.io.IOException: Login failure for hdfs/hdfs.build.elastic.co@BUILD.ELASTIC.CO from keytab /dev/shm/elastic+elasticsearch+master+matrix-java-periodic/ES_RUNTIME_JAVA/openjdk15/nodes/general-purpose/test/fixtures/krb5kdc-fixture/testfixtures_shared/shared/hdfs/keytabs/hdfs_hdfs.build.elastic.co.keytab: javax.security.auth.login.LoginException: java.lang.NullPointerException\t\r\n    \tat java.security.jgss/sun.security.krb5.KrbKdcRep.check(KrbKdcRep.java:149)\t\r\n    \tat java.security.jgss/sun.security.krb5.KrbAsRep.decrypt(KrbAsRep.java:159)\t\r\n    \tat java.security.jgss/sun.security.krb5.KrbAsRep.decryptUsingKeyTab(KrbAsRep.java:121)\t\r\n    \tat java.security.jgss/sun.security.krb5.KrbAsReqBuilder.resolve(KrbAsReqBuilder.java:310)\t\r\n    \tat java.security.jgss/sun.security.krb5.KrbAsReqBuilder.action(KrbAsReqBuilder.java:498)\t\r\n    \tat jdk.security.auth/com.sun.security.auth.module.Krb5LoginModule.attemptAuthentication(Krb5LoginModule.java:754)\t\r\n    \tat jdk.security.auth/com.sun.security.auth.module.Krb5LoginModule.login(Krb5LoginModule.java:592)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext.invoke(LoginContext.java:726)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:665)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:663)\t\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:691)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:663)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext.login(LoginContext.java:574)\t\r\n    \tat org.apache.hadoop.security.UserGroupInformation.loginUserFromKeytab(UserGroupInformation.java:1057)\t\r\n    \tat org.apache.hadoop.security.SecurityUtil.login(SecurityUtil.java:286)\t\r\n    \tat org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:1081)\t\r\n    \tat org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:376)\t\r\n    \tat org.apache.hadoop.hdfs.DFSTestUtil.formatNameNode(DFSTestUtil.java:233)\t\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.createNameNodesAndSetConf(MiniDFSCluster.java:1027)\t\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.initMiniDFSCluster(MiniDFSCluster.java:830)\t\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.<init>(MiniDFSCluster.java:485)\t\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster$Builder.build(MiniDFSCluster.java:444)\t\r\n    \tat hdfs.MiniHDFS.main(MiniHDFS.java:119)\t\r\n    \t\r\n    \tat org.apache.hadoop.security.UserGroupInformation.loginUserFromKeytab(UserGroupInformation.java:1066)\t\r\n    \tat org.apache.hadoop.security.SecurityUtil.login(SecurityUtil.java:286)\t\r\n    \tat org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:1081)\t\r\n    \tat org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:376)\t\r\n    \tat org.apache.hadoop.hdfs.DFSTestUtil.formatNameNode(DFSTestUtil.java:233)\t\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.createNameNodesAndSetConf(MiniDFSCluster.java:1027)\t\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.initMiniDFSCluster(MiniDFSCluster.java:830)\t\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.<init>(MiniDFSCluster.java:485)\t\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster$Builder.build(MiniDFSCluster.java:444)\t\r\n    \tat hdfs.MiniHDFS.main(MiniHDFS.java:119)\t\r\n    Caused by: javax.security.auth.login.LoginException: java.lang.NullPointerException\t\r\n    \tat java.security.jgss/sun.security.krb5.KrbKdcRep.check(KrbKdcRep.java:149)\t\r\n    \tat java.security.jgss/sun.security.krb5.KrbAsRep.decrypt(KrbAsRep.java:159)\t\r\n    \tat java.security.jgss/sun.security.krb5.KrbAsRep.decryptUsingKeyTab(KrbAsRep.java:121)\t\r\n    \tat java.security.jgss/sun.security.krb5.KrbAsReqBuilder.resolve(KrbAsReqBuilder.java:310)\t\r\n    \tat java.security.jgss/sun.security.krb5.KrbAsReqBuilder.action(KrbAsReqBuilder.java:498)\t\r\n    \tat jdk.security.auth/com.sun.security.auth.module.Krb5LoginModule.attemptAuthentication(Krb5LoginModule.java:754)\t\r\n    \tat jdk.security.auth/com.sun.security.auth.module.Krb5LoginModule.login(Krb5LoginModule.java:592)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext.invoke(LoginContext.java:726)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:665)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:663)\t\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:691)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:663)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext.login(LoginContext.java:574)\t\r\n    \tat org.apache.hadoop.security.UserGroupInformation.loginUserFromKeytab(UserGroupInformation.java:1057)\t\r\n    \tat org.apache.hadoop.security.SecurityUtil.login(SecurityUtil.java:286)\t\r\n    \tat org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:1081)\t\r\n    \tat org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:376)\t\r\n    \tat org.apache.hadoop.hdfs.DFSTestUtil.formatNameNode(DFSTestUtil.java:233)\t\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.createNameNodesAndSetConf(MiniDFSCluster.java:1027)\t\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.initMiniDFSCluster(MiniDFSCluster.java:830)\t\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster.<init>(MiniDFSCluster.java:485)\t\r\n    \tat org.apache.hadoop.hdfs.MiniDFSCluster$Builder.build(MiniDFSCluster.java:444)\t\r\n    \tat hdfs.MiniHDFS.main(MiniHDFS.java:119)\t\r\n    \t\r\n    \tat java.base/javax.security.auth.login.LoginContext.invoke(LoginContext.java:821)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:665)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:663)\t\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:691)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:663)\t\r\n    \tat java.base/javax.security.auth.login.LoginContext.login(LoginContext.java:574)\t\r\n    \tat org.apache.hadoop.security.UserGroupInformation.loginUserFromKeytab(UserGroupInformation.java:1057)\t\r\n    \t... 9 more\r\n\r\n```\r\n</details>","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/639085200","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-639085200","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":639085200,"node_id":"MDEyOklzc3VlQ29tbWVudDYzOTA4NTIwMA==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2020-06-04T20:01:23Z","updated_at":"2020-06-04T20:02:12Z","author_association":"CONTRIBUTOR","body":"So this continues to fail on the JDK 15 builds. What should we do here? Should we disable this fixture and associated tests on Java 15? I'm ok with doing so temporarily but we should put some level of effort into figuring out if there's some kind of Java 15 bug given our trend of moving to the latest JDK on release and Java 15 GA only three months away.\r\n\r\nHere's the last week's failures for this issue:\r\nhttps://gradle-enterprise.elastic.co/scans/failures?failures.failureClassification=non_verification&failures.failureMessage=Execution%20failed%20for%20task%20%27:plugins:repository-hdfs:secureHdfsFixture%27.%0A*&list.size=50&list.sortColumn=startTime&list.sortOrder=desc&search.buildToolType=gradle&search.buildToolType=maven&search.relativeStartTime=P7D&search.tags=CI&search.timeZoneId=America/Los_Angeles","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/639086870","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-639086870","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":639086870,"node_id":"MDEyOklzc3VlQ29tbWVudDYzOTA4Njg3MA==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2020-06-04T20:04:39Z","updated_at":"2020-06-04T20:04:39Z","author_association":"CONTRIBUTOR","body":"I'll get to it in the next couple of days ,it's on my radar ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/639144279","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-639144279","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":639144279,"node_id":"MDEyOklzc3VlQ29tbWVudDYzOTE0NDI3OQ==","user":{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false},"created_at":"2020-06-04T22:08:06Z","updated_at":"2020-06-04T22:08:06Z","author_association":"MEMBER","body":"This is likely caused by https://bugs.openjdk.java.net/browse/JDK-8246193, which should be fixed in the next JDK 15 build","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/639258399","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-639258399","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":639258399,"node_id":"MDEyOklzc3VlQ29tbWVudDYzOTI1ODM5OQ==","user":{"login":"jkakavas","id":10281256,"node_id":"MDQ6VXNlcjEwMjgxMjU2","avatar_url":"https://avatars2.githubusercontent.com/u/10281256?v=4","gravatar_id":"","url":"https://api.github.com/users/jkakavas","html_url":"https://github.com/jkakavas","followers_url":"https://api.github.com/users/jkakavas/followers","following_url":"https://api.github.com/users/jkakavas/following{/other_user}","gists_url":"https://api.github.com/users/jkakavas/gists{/gist_id}","starred_url":"https://api.github.com/users/jkakavas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkakavas/subscriptions","organizations_url":"https://api.github.com/users/jkakavas/orgs","repos_url":"https://api.github.com/users/jkakavas/repos","events_url":"https://api.github.com/users/jkakavas/events{/privacy}","received_events_url":"https://api.github.com/users/jkakavas/received_events","type":"User","site_admin":false},"created_at":"2020-06-05T04:55:56Z","updated_at":"2020-06-05T04:55:56Z","author_association":"CONTRIBUTOR","body":"Thanks @jaymode , yes this raised bug agrees with what I saw in my initial analysis too. Happy our waiting game paid off :)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/661727501","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-661727501","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":661727501,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MTcyNzUwMQ==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2020-07-21T08:54:25Z","updated_at":"2020-07-21T08:54:25Z","author_association":"MEMBER","body":"I'm seeing several similar looking failures today, seems to have started some time around yesterday on 7.8 to 7.x branches.\r\nHere are the most recent ones. Since the error seems JDK related I add that here too:\r\n\r\n7.8:  https://gradle-enterprise.elastic.co/s/u3obnnvb4b2a2 (ES_RUNTIME_JAVA=zulu8)\r\n7.x:  https://gradle-enterprise.elastic.co/s/jphxevpnnnuza (ES_RUNTIME_JAVA=zulu8)\r\n7.8: https://gradle-enterprise.elastic.co/s/yoyhwjc6dfwgo (ES_RUNTIME_JAVA=zulu8)\r\n\r\nThere are some from yesterday (20.7) that uses ES_RUNTIME_JAVA=openjdk15 as well:\r\nhttps://gradle-enterprise.elastic.co/s/lnzxvc3yg54b2\r\nhttps://gradle-enterprise.elastic.co/s/xhkyix4cuetti\r\n\r\nI wonder if these builds were added later. There seems to be an uptic starting yesterday. Also I wonder why https://github.com/elastic/elasticsearch/pull/56767 doesn't seem to work to supress the last two failures on JDK 15.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/661923062","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-661923062","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":661923062,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MTkyMzA2Mg==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2020-07-21T15:15:33Z","updated_at":"2020-07-21T15:15:33Z","author_association":"MEMBER","body":"This is probably related too: https://gradle-enterprise.elastic.co/s/xy7b6zqcjegva/console-log?task=:plugins:repository-hdfs:secureHdfsFixture","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/661944329","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-661944329","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":661944329,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MTk0NDMyOQ==","user":{"login":"mark-vieira","id":4106672,"node_id":"MDQ6VXNlcjQxMDY2NzI=","avatar_url":"https://avatars2.githubusercontent.com/u/4106672?v=4","gravatar_id":"","url":"https://api.github.com/users/mark-vieira","html_url":"https://github.com/mark-vieira","followers_url":"https://api.github.com/users/mark-vieira/followers","following_url":"https://api.github.com/users/mark-vieira/following{/other_user}","gists_url":"https://api.github.com/users/mark-vieira/gists{/gist_id}","starred_url":"https://api.github.com/users/mark-vieira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mark-vieira/subscriptions","organizations_url":"https://api.github.com/users/mark-vieira/orgs","repos_url":"https://api.github.com/users/mark-vieira/repos","events_url":"https://api.github.com/users/mark-vieira/events{/privacy}","received_events_url":"https://api.github.com/users/mark-vieira/received_events","type":"User","site_admin":false},"created_at":"2020-07-21T15:52:36Z","updated_at":"2020-07-21T15:52:57Z","author_association":"CONTRIBUTOR","body":"The Zulu and JDK 15 builds have been around for some time now. It's possible a recent update to those JDKs is causing issues. JDK 15 especially since we are on EA builds get's updated regularly.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/662291412","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-662291412","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":662291412,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MjI5MTQxMg==","user":{"login":"probakowski","id":3896475,"node_id":"MDQ6VXNlcjM4OTY0NzU=","avatar_url":"https://avatars1.githubusercontent.com/u/3896475?v=4","gravatar_id":"","url":"https://api.github.com/users/probakowski","html_url":"https://github.com/probakowski","followers_url":"https://api.github.com/users/probakowski/followers","following_url":"https://api.github.com/users/probakowski/following{/other_user}","gists_url":"https://api.github.com/users/probakowski/gists{/gist_id}","starred_url":"https://api.github.com/users/probakowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/probakowski/subscriptions","organizations_url":"https://api.github.com/users/probakowski/orgs","repos_url":"https://api.github.com/users/probakowski/repos","events_url":"https://api.github.com/users/probakowski/events{/privacy}","received_events_url":"https://api.github.com/users/probakowski/received_events","type":"User","site_admin":false},"created_at":"2020-07-22T07:27:38Z","updated_at":"2020-07-22T07:27:38Z","author_association":"CONTRIBUTOR","body":"Another instance of this: https://gradle-enterprise.elastic.co/s/fh2hmhsjyc6ii/tests/failed","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/663083233","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-663083233","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":663083233,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MzA4MzIzMw==","user":{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false},"created_at":"2020-07-23T15:47:51Z","updated_at":"2020-07-23T15:47:51Z","author_association":"MEMBER","body":"Another instance: https://gradle-enterprise.elastic.co/s/b2phxw4foj3xg/console-log/raw","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/664748230","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-664748230","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":664748230,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NDc0ODIzMA==","user":{"login":"ywangd","id":2344308,"node_id":"MDQ6VXNlcjIzNDQzMDg=","avatar_url":"https://avatars3.githubusercontent.com/u/2344308?v=4","gravatar_id":"","url":"https://api.github.com/users/ywangd","html_url":"https://github.com/ywangd","followers_url":"https://api.github.com/users/ywangd/followers","following_url":"https://api.github.com/users/ywangd/following{/other_user}","gists_url":"https://api.github.com/users/ywangd/gists{/gist_id}","starred_url":"https://api.github.com/users/ywangd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywangd/subscriptions","organizations_url":"https://api.github.com/users/ywangd/orgs","repos_url":"https://api.github.com/users/ywangd/repos","events_url":"https://api.github.com/users/ywangd/events{/privacy}","received_events_url":"https://api.github.com/users/ywangd/received_events","type":"User","site_admin":false},"created_at":"2020-07-28T03:03:05Z","updated_at":"2020-07-28T03:03:05Z","author_association":"MEMBER","body":"> There are some from yesterday (20.7) that uses ES_RUNTIME_JAVA=openjdk15 as well:\r\n> https://gradle-enterprise.elastic.co/s/lnzxvc3yg54b2\r\n> https://gradle-enterprise.elastic.co/s/xhkyix4cuetti\r\n> \r\n> I wonder if these builds were added later. There seems to be an uptic starting yesterday. Also I wonder why #56767 doesn't seem to work to supress the last two failures on JDK 15.\r\n\r\nThese two failures are actually from May 15 and they are both before the suppress (#56767). The new failures are all about zulu8, which I am still digging.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/664758240","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-664758240","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":664758240,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NDc1ODI0MA==","user":{"login":"tvernum","id":2244393,"node_id":"MDQ6VXNlcjIyNDQzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/2244393?v=4","gravatar_id":"","url":"https://api.github.com/users/tvernum","html_url":"https://github.com/tvernum","followers_url":"https://api.github.com/users/tvernum/followers","following_url":"https://api.github.com/users/tvernum/following{/other_user}","gists_url":"https://api.github.com/users/tvernum/gists{/gist_id}","starred_url":"https://api.github.com/users/tvernum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tvernum/subscriptions","organizations_url":"https://api.github.com/users/tvernum/orgs","repos_url":"https://api.github.com/users/tvernum/repos","events_url":"https://api.github.com/users/tvernum/events{/privacy}","received_events_url":"https://api.github.com/users/tvernum/received_events","type":"User","site_admin":false},"created_at":"2020-07-28T03:42:52Z","updated_at":"2020-07-28T03:43:04Z","author_association":"CONTRIBUTOR","body":"We've [previously seen](https://github.com/elastic/elasticsearch/issues/49742) that Zulu is faster at releasing builds with backported changes than other OpenJDK providers, so it may be that they've merged whatever broke in JDK15.\r\n\r\nIf so, that sounds bad, and we need to get on top of it quickly. \r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/664776399","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-664776399","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":664776399,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NDc3NjM5OQ==","user":{"login":"ywangd","id":2344308,"node_id":"MDQ6VXNlcjIzNDQzMDg=","avatar_url":"https://avatars3.githubusercontent.com/u/2344308?v=4","gravatar_id":"","url":"https://api.github.com/users/ywangd","html_url":"https://github.com/ywangd","followers_url":"https://api.github.com/users/ywangd/followers","following_url":"https://api.github.com/users/ywangd/following{/other_user}","gists_url":"https://api.github.com/users/ywangd/gists{/gist_id}","starred_url":"https://api.github.com/users/ywangd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywangd/subscriptions","organizations_url":"https://api.github.com/users/ywangd/orgs","repos_url":"https://api.github.com/users/ywangd/repos","events_url":"https://api.github.com/users/ywangd/events{/privacy}","received_events_url":"https://api.github.com/users/ywangd/received_events","type":"User","site_admin":false},"created_at":"2020-07-28T04:56:17Z","updated_at":"2020-07-28T04:58:54Z","author_association":"MEMBER","body":"> Zulu is faster at releasing builds\r\n>\r\nThis is true. This is caused by the same bug that @jaymode linked before, i.e. https://bugs.openjdk.java.net/browse/JDK-8246193\r\n\r\nThe bug affects openjdk `8u262` as well, which I don't think is officially released (I can only find `8u261` from openjdk website). But it made its way to Zulu 8.48 which is based on `8u262`. It was released on July 22 and this timeline is consistent with the recent failures. The previous Zulu 8.46 (`8u252`) works fine. The bug is fixed in `8u271`. So next Zulu 8 release should be fine. In the meantime, I can mute the tests for zulu 8. What other things do we need to do? @tvernum \r\n\r\nAlso the bug is fixed in the latest JDK 15 builds (b26). I tested and it worked locally. So these tests can be unmuted for JDK 15 since we are already using the latest [JDK15 b33](https://github.com/elastic/infra/blob/32c0a39158aa01ad7b6108a493231afddb39d0d3/serverless/jvm-catalog-service/manifest.yml#L45).\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/664814665","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-664814665","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":664814665,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NDgxNDY2NQ==","user":{"login":"ywangd","id":2344308,"node_id":"MDQ6VXNlcjIzNDQzMDg=","avatar_url":"https://avatars3.githubusercontent.com/u/2344308?v=4","gravatar_id":"","url":"https://api.github.com/users/ywangd","html_url":"https://github.com/ywangd","followers_url":"https://api.github.com/users/ywangd/followers","following_url":"https://api.github.com/users/ywangd/following{/other_user}","gists_url":"https://api.github.com/users/ywangd/gists{/gist_id}","starred_url":"https://api.github.com/users/ywangd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywangd/subscriptions","organizations_url":"https://api.github.com/users/ywangd/orgs","repos_url":"https://api.github.com/users/ywangd/repos","events_url":"https://api.github.com/users/ywangd/events{/privacy}","received_events_url":"https://api.github.com/users/ywangd/received_events","type":"User","site_admin":false},"created_at":"2020-07-28T06:54:40Z","updated_at":"2020-07-28T06:54:40Z","author_association":"MEMBER","body":"The tests are now unmuted for jdk 15 by #60260","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/665120725","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-665120725","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":665120725,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NTEyMDcyNQ==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2020-07-28T15:50:23Z","updated_at":"2020-07-28T15:50:23Z","author_association":"MEMBER","body":"Just had a failure on Zulu8 / 7.9.  Unsure if that is expected or not given the recent muting:\r\n\r\nhttps://gradle-enterprise.elastic.co/s/waj7ctffrbpfa","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/665352882","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-665352882","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":665352882,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NTM1Mjg4Mg==","user":{"login":"ywangd","id":2344308,"node_id":"MDQ6VXNlcjIzNDQzMDg=","avatar_url":"https://avatars3.githubusercontent.com/u/2344308?v=4","gravatar_id":"","url":"https://api.github.com/users/ywangd","html_url":"https://github.com/ywangd","followers_url":"https://api.github.com/users/ywangd/followers","following_url":"https://api.github.com/users/ywangd/following{/other_user}","gists_url":"https://api.github.com/users/ywangd/gists{/gist_id}","starred_url":"https://api.github.com/users/ywangd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywangd/subscriptions","organizations_url":"https://api.github.com/users/ywangd/orgs","repos_url":"https://api.github.com/users/ywangd/repos","events_url":"https://api.github.com/users/ywangd/events{/privacy}","received_events_url":"https://api.github.com/users/ywangd/received_events","type":"User","site_admin":false},"created_at":"2020-07-28T23:55:56Z","updated_at":"2020-07-28T23:55:56Z","author_association":"MEMBER","body":"> Just had a failure on Zulu8 / 7.9. Unsure if that is expected or not given the recent muting:\r\n> \r\n> https://gradle-enterprise.elastic.co/s/waj7ctffrbpfa\r\n\r\nSorry you encountered it again. The mute for zulu8 has not been merged yet. Will action soon.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/665460488","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-665460488","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":665460488,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NTQ2MDQ4OA==","user":{"login":"ywangd","id":2344308,"node_id":"MDQ6VXNlcjIzNDQzMDg=","avatar_url":"https://avatars3.githubusercontent.com/u/2344308?v=4","gravatar_id":"","url":"https://api.github.com/users/ywangd","html_url":"https://github.com/ywangd","followers_url":"https://api.github.com/users/ywangd/followers","following_url":"https://api.github.com/users/ywangd/following{/other_user}","gists_url":"https://api.github.com/users/ywangd/gists{/gist_id}","starred_url":"https://api.github.com/users/ywangd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywangd/subscriptions","organizations_url":"https://api.github.com/users/ywangd/orgs","repos_url":"https://api.github.com/users/ywangd/repos","events_url":"https://api.github.com/users/ywangd/events{/privacy}","received_events_url":"https://api.github.com/users/ywangd/received_events","type":"User","site_admin":false},"created_at":"2020-07-29T06:28:18Z","updated_at":"2020-07-29T06:28:18Z","author_association":"MEMBER","body":"Backports all done. Since the mute is for a specific jdk version, there is no need to unmute it. Future JDK versions will automatically get picked up. Hence I am closing this issue.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/671212472","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-671212472","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":671212472,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MTIxMjQ3Mg==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2020-08-10T07:51:35Z","updated_at":"2020-08-10T07:51:35Z","author_association":"CONTRIBUTOR","body":"This just failed in a build that was using Java `8u242`.\r\n\r\nThe build was https://gradle-enterprise.elastic.co/s/y5n7s7aijsy6e\r\n\r\nLooking in the [console log](https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.8+matrix-java-periodic/ES_RUNTIME_JAVA=zulu8,nodes=general-purpose/152/consoleText) it seems that the JDK was `8u242` rather than the `8u262` that the test is muted for:\r\n\r\n```\r\n> Task :extract-linux-x64-jdk-adoptopenjdk-8u242+b08\r\n```\r\n\r\nIt looks like more JDK versions are affected.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/671213382","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-671213382","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":671213382,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MTIxMzM4Mg==","user":{"login":"droberts195","id":7405510,"node_id":"MDQ6VXNlcjc0MDU1MTA=","avatar_url":"https://avatars0.githubusercontent.com/u/7405510?v=4","gravatar_id":"","url":"https://api.github.com/users/droberts195","html_url":"https://github.com/droberts195","followers_url":"https://api.github.com/users/droberts195/followers","following_url":"https://api.github.com/users/droberts195/following{/other_user}","gists_url":"https://api.github.com/users/droberts195/gists{/gist_id}","starred_url":"https://api.github.com/users/droberts195/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/droberts195/subscriptions","organizations_url":"https://api.github.com/users/droberts195/orgs","repos_url":"https://api.github.com/users/droberts195/repos","events_url":"https://api.github.com/users/droberts195/events{/privacy}","received_events_url":"https://api.github.com/users/droberts195/received_events","type":"User","site_admin":false},"created_at":"2020-08-10T07:54:03Z","updated_at":"2020-08-10T07:54:03Z","author_association":"CONTRIBUTOR","body":"https://gradle-enterprise.elastic.co/s/t4epntiapfnfm is the same - also using `8u242`","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/672085499","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-672085499","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":672085499,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MjA4NTQ5OQ==","user":{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false},"created_at":"2020-08-11T16:50:03Z","updated_at":"2020-08-11T16:50:03Z","author_association":"MEMBER","body":"Just failed again on zulu8: https://gradle-enterprise.elastic.co/s/swcbiydrrw2ce","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/672393833","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-672393833","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":672393833,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MjM5MzgzMw==","user":{"login":"ywangd","id":2344308,"node_id":"MDQ6VXNlcjIzNDQzMDg=","avatar_url":"https://avatars3.githubusercontent.com/u/2344308?v=4","gravatar_id":"","url":"https://api.github.com/users/ywangd","html_url":"https://github.com/ywangd","followers_url":"https://api.github.com/users/ywangd/followers","following_url":"https://api.github.com/users/ywangd/following{/other_user}","gists_url":"https://api.github.com/users/ywangd/gists{/gist_id}","starred_url":"https://api.github.com/users/ywangd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywangd/subscriptions","organizations_url":"https://api.github.com/users/ywangd/orgs","repos_url":"https://api.github.com/users/ywangd/repos","events_url":"https://api.github.com/users/ywangd/events{/privacy}","received_events_url":"https://api.github.com/users/ywangd/received_events","type":"User","site_admin":false},"created_at":"2020-08-12T00:26:40Z","updated_at":"2020-08-12T00:26:40Z","author_association":"MEMBER","body":"Argh, zulu released `8u265` instead of `8u271` just a few days after I muted `8u262`. This version has exactly the same problem as `8u262`.  The new failure were using this version as shown in the log:\r\n> Linux 4.15.0-1080-gcp amd64/Azul Systems, Inc. 1.8.0_265 (64-bit)/cpus=32,threads=1,free=405172336,total=514850816\r\n>\r\n\r\nI'll re-mute so that it skips all versions of [262, 271) to be sure. Sorry for the noise.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/672441862","html_url":"https://github.com/elastic/elasticsearch/issues/56507#issuecomment-672441862","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56507","id":672441862,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MjQ0MTg2Mg==","user":{"login":"ywangd","id":2344308,"node_id":"MDQ6VXNlcjIzNDQzMDg=","avatar_url":"https://avatars3.githubusercontent.com/u/2344308?v=4","gravatar_id":"","url":"https://api.github.com/users/ywangd","html_url":"https://github.com/ywangd","followers_url":"https://api.github.com/users/ywangd/followers","following_url":"https://api.github.com/users/ywangd/following{/other_user}","gists_url":"https://api.github.com/users/ywangd/gists{/gist_id}","starred_url":"https://api.github.com/users/ywangd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywangd/subscriptions","organizations_url":"https://api.github.com/users/ywangd/orgs","repos_url":"https://api.github.com/users/ywangd/repos","events_url":"https://api.github.com/users/ywangd/events{/privacy}","received_events_url":"https://api.github.com/users/ywangd/received_events","type":"User","site_admin":false},"created_at":"2020-08-12T01:40:11Z","updated_at":"2020-08-12T01:40:11Z","author_association":"MEMBER","body":"I raised #60995 to mute it for any versions falls in between 8u[262, 271)","performed_via_github_app":null}]