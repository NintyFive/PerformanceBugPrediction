[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/153758247","html_url":"https://github.com/elastic/elasticsearch/issues/14524#issuecomment-153758247","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14524","id":153758247,"node_id":"MDEyOklzc3VlQ29tbWVudDE1Mzc1ODI0Nw==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2015-11-04T15:15:19Z","updated_at":"2015-11-04T15:15:19Z","author_association":"MEMBER","body":"Looking at DateTimeZone#forID, it seems like Joda couldn't look up the zone from the internal Provider class that Joda loads at startup and holds the time zone data. This seems pluggable, but there are two providers in Joda already, UTCProvider which only knows UTC time zone and ZoneInfoProvider, which should be used by default. This one seems to gets loaded using the class loader from \"org/joda/time/tz/data\" when the first ISOChronology instance (also internal Joda Singleton) gets initialized.\nI will try adding logging to both tests to confirm that if this failure happens again, we see which provider is used.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/153771671","html_url":"https://github.com/elastic/elasticsearch/issues/14524#issuecomment-153771671","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14524","id":153771671,"node_id":"MDEyOklzc3VlQ29tbWVudDE1Mzc3MTY3MQ==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2015-11-04T15:53:34Z","updated_at":"2015-11-04T15:53:34Z","author_association":"MEMBER","body":"Another one: http://build-us-00.elastic.co/job/es_core_2x_debian/530/\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154023321","html_url":"https://github.com/elastic/elasticsearch/issues/14524#issuecomment-154023321","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14524","id":154023321,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDAyMzMyMQ==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2015-11-05T10:35:02Z","updated_at":"2015-11-05T10:35:14Z","author_association":"MEMBER","body":"Added Logging confirmed that Joda uses the UTCProvider instead of the ZoneInfoProvider that usually should load the time zone data file:\n\n```\n[2015-11-04 09:57:06,003][DEBUG][messy.tests              ] Provider for DateTimeZone [class org.joda.time.tz.UTCProvider] \n[2015-11-04 09:57:06,003][DEBUG][messy.tests              ] Available time zone IDs [[UTC]] \n```\n\nUTCProvider is the last fallback when loading the Provider in `DateTimeZone#getDefaultProvider()`, before that it should succeed in loading resources from \"org/joda/time/tz/data\" in the joda-jar. So either the jar is broken or it doesn't even find it, which is strange given that its a Joda class trying to load it.\nJoda seems pretty good at swallowing exceptions, but it looks like it should write something to Std.err if something goes wrong while loading. Unfortunately haven't found anything in the CI output so far.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154348338","html_url":"https://github.com/elastic/elasticsearch/issues/14524#issuecomment-154348338","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14524","id":154348338,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDM0ODMzOA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-11-06T08:57:46Z","updated_at":"2015-11-06T08:57:46Z","author_association":"CONTRIBUTOR","body":"yet another one - all on 2.x http://build-us-00.elastic.co/job/es_core_2.x_oel_6/1056/\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154355161","html_url":"https://github.com/elastic/elasticsearch/issues/14524#issuecomment-154355161","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14524","id":154355161,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDM1NTE2MQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-11-06T09:25:01Z","updated_at":"2015-11-06T09:25:01Z","author_association":"CONTRIBUTOR","body":"@cbuescher I think I know why this fails... when you look at the latest failure I pasted above you can see that:\n\n```\nSuite: org.elasticsearch.script.groovy.GroovySecurityTests\nCompleted [1/43] on J0 in 2.87s, 1 test\n....\n....\n....\ngroovy/target/J0/temp/org.elasticsearch.messy.tests.DateHistogramTests_EFD276EEE9F95729-001\n  2> NOTE: test params are: codec=Asserting(Lucene54): {date=PostingsFormat(name=Asserting), d=PostingsFormat(name=Asserting), _field_names=PostingsFormat(name=Asserting), _type=PostingsFormat(name=Asserting), dates=PostingsFormat(name=Asserting), _timestamp=PostingsFormat(name=Asserting), _uid=PostingsFormat(name=Asserting), value=PostingsFormat(name=Asserting), _all=PostingsFormat(name=Asserting)}, docValues:{date=DocValuesFormat(name=Lucene54), d=DocValuesFormat(name=Lucene54), dates=DocValuesFormat(name=Lucene54), value=DocValuesFormat(name=Lucene54), _timestamp=DocValuesFormat(name=Lucene54), _version=DocValuesFormat(name=Lucene54)}, sim=RandomSimilarityProvider(queryNorm=false,coord=crazy): {}, locale=sq_AL, timezone=Africa/Ouagadougou\n  2> NOTE: Linux 2.6.32-504.23.4.el6.x86_64 amd64/Oracle Corporation 1.8.0_60 (64-bit)/cpus=8,threads=1,free=275774088,total=501219328\n  2> NOTE: All tests run in this JVM: [GroovySecurityTests, TransformOnIndexMapperTests, ContextAndHeaderTransportTests, MinTests, CardinalityTests, GeoDistanceTests, DateHistogramTests]\nCompleted [20/43] on J0 in 3.19s, 33 tests, 2 errors <<< FAILURES!\n```\n\nboth run in JVM J0. If you run `GroovySecurityTests` on it's own you can see this in the sys.err:\n\n```\njava.io.IOException: Resource not found: \"org/joda/time/tz/data/ZoneInfoMap\" ClassLoader: sun.misc.Launcher$AppClassLoader@14dad5dc\n    at org.joda.time.tz.ZoneInfoProvider.openResource(ZoneInfoProvider.java:210)\n    at org.joda.time.tz.ZoneInfoProvider.<init>(ZoneInfoProvider.java:127)\n    at org.joda.time.tz.ZoneInfoProvider.<init>(ZoneInfoProvider.java:86)\n    at org.joda.time.DateTimeZone.getDefaultProvider(DateTimeZone.java:514)\n    at org.joda.time.DateTimeZone.getProvider(DateTimeZone.java:413)\n    at org.joda.time.DateTimeZone.forTimeZone(DateTimeZone.java:349)\n    at org.joda.time.DateTimeZone.getDefault(DateTimeZone.java:157)\n    at org.joda.time.chrono.ISOChronology.getInstance(ISOChronology.java:79)\n    at org.joda.time.base.BaseDateTime.<init>(BaseDateTime.java:70)\n    at org.joda.time.DateTime.<init>(DateTime.java:171)\n    at org.codehaus.groovy.vmplugin.v7.IndyInterface.selectMethod(IndyInterface.java:218)\n    at a9d18bbccfaebbc0e2a1f5d7d21d068d4a97c59a.run(a9d18bbccfaebbc0e2a1f5d7d21d068d4a97c59a:1)\n    at org.elasticsearch.script.groovy.GroovyScriptEngineService$GroovyScript.run(GroovyScriptEngineService.java:296)\n    at org.elasticsearch.script.groovy.GroovySecurityTests.doTest(GroovySecurityTests.java:112)\n    at org.elasticsearch.script.groovy.GroovySecurityTests.assertFailure(GroovySecurityTests.java:123)\n    at org.elasticsearch.script.groovy.GroovySecurityTests.testEvilGroovyScripts(GroovySecurityTests.java:79)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1660)\n    at com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:866)\n    at com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:902)\n    at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:916)\n    at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n    at org.apache.lucene.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:50)\n    at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:46)\n    at org.apache.lucene.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:49)\n    at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:65)\n    at org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:48)\n    at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n    at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:367)\n    at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:809)\n    at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:460)\n    at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:875)\n    at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:777)\n    at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:811)\n    at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:822)\n    at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:46)\n    at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n    at org.apache.lucene.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:42)\n    at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)\n    at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)\n    at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n    at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n    at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n    at org.apache.lucene.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:54)\n    at org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:48)\n    at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:65)\n    at org.apache.lucene.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:55)\n    at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n    at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:367)\n    at java.lang.Thread.run(Thread.java:745)\n```\n\nit tires to load this without permissions and since it's a static block It will never be re-run. The simple fix would be to load that class before we fire up that test statically, what do you think? maybe @rmuir has an opinion\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154359270","html_url":"https://github.com/elastic/elasticsearch/issues/14524#issuecomment-154359270","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14524","id":154359270,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDM1OTI3MA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-11-06T09:32:31Z","updated_at":"2015-11-06T09:32:31Z","author_association":"CONTRIBUTOR","body":"on 2.x this reproduces the issue:\n\n```\n mvn clean test -Dtests.class=*.GroovySecurityTests\\|*.DateHistogramTests -Dtests.jvms=1 -Dtests.seed=7AD385E8819A7321\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154359523","html_url":"https://github.com/elastic/elasticsearch/issues/14524#issuecomment-154359523","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14524","id":154359523,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDM1OTUyMw==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2015-11-06T09:33:00Z","updated_at":"2015-11-06T09:34:40Z","author_association":"MEMBER","body":"@simonw I see so when GroovySecurityTests is run before the other it messes up the resource loading? Those DateHistogramTests not using groovy scripting should be moved back to core anyway, I was going to do that but didn't want to cover this test failure by it. Should I move the tests or is this something that should somehow be fixed in the test setup as well?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154360267","html_url":"https://github.com/elastic/elasticsearch/issues/14524#issuecomment-154360267","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14524","id":154360267,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDM2MDI2Nw==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-11-06T09:34:23Z","updated_at":"2015-11-06T09:34:23Z","author_association":"CONTRIBUTOR","body":"IMO we should force load that class during bootstrap AND during EsTestCase initialization\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154361802","html_url":"https://github.com/elastic/elasticsearch/issues/14524#issuecomment-154361802","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14524","id":154361802,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDM2MTgwMg==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-11-06T09:38:52Z","updated_at":"2015-11-06T09:38:52Z","author_association":"CONTRIBUTOR","body":"This could work but I'd like to consult @rmuir here first\n\n``` diff\ndiff --git a/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java\nindex 6a72bb4..620333e 100644\n--- a/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java\n+++ b/core/src/main/java/org/elasticsearch/bootstrap/Bootstrap.java\n@@ -59,6 +59,11 @@ final class Bootstrap {\n     private final CountDownLatch keepAliveLatch = new CountDownLatch(1);\n     private final Thread keepAliveThread;\n\n+    static {\n+        // ensure we load all the timezones in the parent classloader with all permissions\n+        org.joda.time.DateTimeZone.getDefault();\n+    }\n+    \n     /** creates a new instance */\n     Bootstrap() {\n         keepAliveThread = new Thread(new Runnable() {\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154362242","html_url":"https://github.com/elastic/elasticsearch/issues/14524#issuecomment-154362242","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14524","id":154362242,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDM2MjI0Mg==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-11-06T09:39:27Z","updated_at":"2015-11-06T09:39:27Z","author_association":"CONTRIBUTOR","body":"@cbuescher can you just put `org.joda.time.DateTimeZone.getDefault();` into the `GroovySecurityTests` for now to make this stop failing... \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154362812","html_url":"https://github.com/elastic/elasticsearch/issues/14524#issuecomment-154362812","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14524","id":154362812,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDM2MjgxMg==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2015-11-06T09:40:25Z","updated_at":"2015-11-06T09:40:25Z","author_association":"MEMBER","body":"@s1monw before any tests are run?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154362949","html_url":"https://github.com/elastic/elasticsearch/issues/14524#issuecomment-154362949","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14524","id":154362949,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDM2Mjk0OQ==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-11-06T09:40:44Z","updated_at":"2015-11-06T09:40:44Z","author_association":"CONTRIBUTOR","body":"just put it in a static block for now\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154369553","html_url":"https://github.com/elastic/elasticsearch/issues/14524#issuecomment-154369553","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14524","id":154369553,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDM2OTU1Mw==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2015-11-06T10:07:32Z","updated_at":"2015-11-06T11:04:09Z","author_association":"MEMBER","body":"Pushed this to 2.x, although it never failed on master so far your reproduction makes it fail there also. Will put this also on master.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154387644","html_url":"https://github.com/elastic/elasticsearch/issues/14524#issuecomment-154387644","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14524","id":154387644,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDM4NzY0NA==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2015-11-06T11:29:52Z","updated_at":"2015-11-06T11:29:52Z","author_association":"CONTRIBUTOR","body":"this is really a bug in groovy though: its missing an AccessController.doPrivileged block\n\nCan you open an issue with them so we don't have the hack forever?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154387708","html_url":"https://github.com/elastic/elasticsearch/issues/14524#issuecomment-154387708","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14524","id":154387708,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDM4NzcwOA==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2015-11-06T11:30:21Z","updated_at":"2015-11-06T11:30:21Z","author_association":"CONTRIBUTOR","body":"sorry, joda-time rather.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154387873","html_url":"https://github.com/elastic/elasticsearch/issues/14524#issuecomment-154387873","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14524","id":154387873,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDM4Nzg3Mw==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2015-11-06T11:30:54Z","updated_at":"2015-11-06T11:30:54Z","author_association":"CONTRIBUTOR","body":"I think if we switch to java time, which runs in the jdk, we won't have issues like this.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/154389900","html_url":"https://github.com/elastic/elasticsearch/issues/14524#issuecomment-154389900","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14524","id":154389900,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NDM4OTkwMA==","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-11-06T11:36:49Z","updated_at":"2015-11-06T11:36:49Z","author_association":"CONTRIBUTOR","body":"I opened an issue\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/176161392","html_url":"https://github.com/elastic/elasticsearch/issues/14524#issuecomment-176161392","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14524","id":176161392,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NjE2MTM5Mg==","user":{"login":"jodastephen","id":213212,"node_id":"MDQ6VXNlcjIxMzIxMg==","avatar_url":"https://avatars2.githubusercontent.com/u/213212?v=4","gravatar_id":"","url":"https://api.github.com/users/jodastephen","html_url":"https://github.com/jodastephen","followers_url":"https://api.github.com/users/jodastephen/followers","following_url":"https://api.github.com/users/jodastephen/following{/other_user}","gists_url":"https://api.github.com/users/jodastephen/gists{/gist_id}","starred_url":"https://api.github.com/users/jodastephen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jodastephen/subscriptions","organizations_url":"https://api.github.com/users/jodastephen/orgs","repos_url":"https://api.github.com/users/jodastephen/repos","events_url":"https://api.github.com/users/jodastephen/events{/privacy}","received_events_url":"https://api.github.com/users/jodastephen/received_events","type":"User","site_admin":false},"created_at":"2016-01-28T12:43:22Z","updated_at":"2016-01-28T12:43:22Z","author_association":"NONE","body":"I looked into this, but it is not clear to me what permissions you believe Joda-Time should be requesting.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/220210978","html_url":"https://github.com/elastic/elasticsearch/issues/14524#issuecomment-220210978","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14524","id":220210978,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMDIxMDk3OA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-05-19T02:18:40Z","updated_at":"2016-05-19T11:48:34Z","author_association":"MEMBER","body":"I opened JodaOrg/joda-time#375. I've tested a build that contains that fix and it resolves the issue reported here, #18017 and #18328 (and we can remove the hack added in 5563220fe53aae0c5580e05f09606e04668a9da8).\n","performed_via_github_app":null}]