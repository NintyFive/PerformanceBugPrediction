[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/625344725","html_url":"https://github.com/elastic/elasticsearch/issues/56361#issuecomment-625344725","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56361","id":625344725,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNTM0NDcyNQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-05-07T16:01:32Z","updated_at":"2020-05-07T16:01:32Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed (:Distributed/Snapshot/Restore)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/625344937","html_url":"https://github.com/elastic/elasticsearch/issues/56361#issuecomment-625344937","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56361","id":625344937,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNTM0NDkzNw==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2020-05-07T16:01:56Z","updated_at":"2020-05-07T16:01:56Z","author_association":"MEMBER","body":"cc @suyograo ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/628690780","html_url":"https://github.com/elastic/elasticsearch/issues/56361#issuecomment-628690780","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56361","id":628690780,"node_id":"MDEyOklzc3VlQ29tbWVudDYyODY5MDc4MA==","user":{"login":"yoavderazon","id":6758286,"node_id":"MDQ6VXNlcjY3NTgyODY=","avatar_url":"https://avatars3.githubusercontent.com/u/6758286?v=4","gravatar_id":"","url":"https://api.github.com/users/yoavderazon","html_url":"https://github.com/yoavderazon","followers_url":"https://api.github.com/users/yoavderazon/followers","following_url":"https://api.github.com/users/yoavderazon/following{/other_user}","gists_url":"https://api.github.com/users/yoavderazon/gists{/gist_id}","starred_url":"https://api.github.com/users/yoavderazon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yoavderazon/subscriptions","organizations_url":"https://api.github.com/users/yoavderazon/orgs","repos_url":"https://api.github.com/users/yoavderazon/repos","events_url":"https://api.github.com/users/yoavderazon/events{/privacy}","received_events_url":"https://api.github.com/users/yoavderazon/received_events","type":"User","site_admin":false},"created_at":"2020-05-14T14:57:25Z","updated_at":"2020-05-14T14:57:25Z","author_association":"NONE","body":"thanks for the issue, @original-brownbear .\r\n\r\nI am assuming that the classification of the type of request (verb) to the matching billing dimension will be in the cloud billing side, and be tailored for each cloud provider.\r\n\r\nquestion: will we also provide metadata that indicates the `context` in which an API request was made ? for example, as part of r \"snapshot restore\" vs. \"searchable snapshot\" ? ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/628733962","html_url":"https://github.com/elastic/elasticsearch/issues/56361#issuecomment-628733962","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56361","id":628733962,"node_id":"MDEyOklzc3VlQ29tbWVudDYyODczMzk2Mg==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2020-05-14T16:07:17Z","updated_at":"2020-05-14T16:07:17Z","author_association":"MEMBER","body":"np @yoavderazon \r\n\r\n> I am assuming that the classification of the type of request (verb) to the matching billing dimension will be in the cloud billing side, and be tailored for each cloud provider.\r\n\r\nYes exactly. We'll tailor this exactly to the kind of request that are billable on each provider and will count at least at a resolution that allows you to determine the exact cost. Or put differently, the resolution across various request types will be at least as good (better regarding some details of multi-part requests than what you currently get from the estimator).\r\n\r\n\r\n> ll we also provide metadata that indicates the context in which an API request was made ? for example, as part of r \"snapshot restore\" vs. \"searchable snapshot\" ?\r\n\r\nThis was not part of the initial plan. There are definitely challenges around implementing knowledge of the context. We can discuss this on another channel maybe, but if you see a use-case for having this the cost of building it wouldn't be prohibitive. The initial plan here was to simply meter the physical request regardless of context though.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/628895469","html_url":"https://github.com/elastic/elasticsearch/issues/56361#issuecomment-628895469","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56361","id":628895469,"node_id":"MDEyOklzc3VlQ29tbWVudDYyODg5NTQ2OQ==","user":{"login":"yoavderazon","id":6758286,"node_id":"MDQ6VXNlcjY3NTgyODY=","avatar_url":"https://avatars3.githubusercontent.com/u/6758286?v=4","gravatar_id":"","url":"https://api.github.com/users/yoavderazon","html_url":"https://github.com/yoavderazon","followers_url":"https://api.github.com/users/yoavderazon/followers","following_url":"https://api.github.com/users/yoavderazon/following{/other_user}","gists_url":"https://api.github.com/users/yoavderazon/gists{/gist_id}","starred_url":"https://api.github.com/users/yoavderazon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yoavderazon/subscriptions","organizations_url":"https://api.github.com/users/yoavderazon/orgs","repos_url":"https://api.github.com/users/yoavderazon/repos","events_url":"https://api.github.com/users/yoavderazon/events{/privacy}","received_events_url":"https://api.github.com/users/yoavderazon/received_events","type":"User","site_admin":false},"created_at":"2020-05-14T21:26:44Z","updated_at":"2020-05-14T21:26:44Z","author_association":"NONE","body":"Thanks Armin.\r\n\r\nThe reason im asking about the scope is to see if we have any flexibility to apply a different price for an API call if its in the context of searchable snapshot, vs. snapshot-restore.\r\nI'm NOT saying we decided to do so, but just checking if we would have the option.\r\n\r\nAs a general design principle, i think it could be helpful to log the context of a call, now that we have more than one context beyond restore.\r\n\r\nIf customers will use searchable snapshot extensively for reads  - the API snapshot billing will cease being an \"ancillary\" billing dimension and will become a more signficant portion of the bill. in such case, it would be helpful from an analytics perspective as well as billing details, to separate the records used for searching from the ones used for restore.\r\n\r\nIs providing such context a significant scope increase ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/629053889","html_url":"https://github.com/elastic/elasticsearch/issues/56361#issuecomment-629053889","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56361","id":629053889,"node_id":"MDEyOklzc3VlQ29tbWVudDYyOTA1Mzg4OQ==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2020-05-15T06:26:21Z","updated_at":"2020-05-15T06:26:21Z","author_association":"MEMBER","body":"> Is providing such context a significant scope increase ?\r\n\r\nIt depends on what we need/want here. If we simply want to meter all search-related operations separately that may be doable relatively quickly. But detailed context on whether other requests were part of a restore/snapshot/status-api-call, that would be quite complex.\r\nWould separately identifying search-related work be enough ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/629708720","html_url":"https://github.com/elastic/elasticsearch/issues/56361#issuecomment-629708720","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56361","id":629708720,"node_id":"MDEyOklzc3VlQ29tbWVudDYyOTcwODcyMA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2020-05-16T21:33:51Z","updated_at":"2020-05-16T21:33:51Z","author_association":"MEMBER","body":"Let's keep the scope focused on what we actually need. I've heard in other conversations that we do not plan to bill differently on the context of the API calls, so let's keep the scope focused on adding metering, the right way to expose it in Elasticsearch, etc. If in the future we have an actual concrete need for providing the context, then we can consider that when the need arises.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/630348478","html_url":"https://github.com/elastic/elasticsearch/issues/56361#issuecomment-630348478","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56361","id":630348478,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMDM0ODQ3OA==","user":{"login":"yoavderazon","id":6758286,"node_id":"MDQ6VXNlcjY3NTgyODY=","avatar_url":"https://avatars3.githubusercontent.com/u/6758286?v=4","gravatar_id":"","url":"https://api.github.com/users/yoavderazon","html_url":"https://github.com/yoavderazon","followers_url":"https://api.github.com/users/yoavderazon/followers","following_url":"https://api.github.com/users/yoavderazon/following{/other_user}","gists_url":"https://api.github.com/users/yoavderazon/gists{/gist_id}","starred_url":"https://api.github.com/users/yoavderazon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yoavderazon/subscriptions","organizations_url":"https://api.github.com/users/yoavderazon/orgs","repos_url":"https://api.github.com/users/yoavderazon/repos","events_url":"https://api.github.com/users/yoavderazon/events{/privacy}","received_events_url":"https://api.github.com/users/yoavderazon/received_events","type":"User","site_admin":false},"created_at":"2020-05-18T18:07:15Z","updated_at":"2020-05-18T18:08:29Z","author_association":"NONE","body":"@jasontedor  - this is not just for billing purposes. we will also benefit from calling out # of API calls for searchable snapshots vs. total # of API calls for snapshot backup/restore for analytics purposes. in fact - the number of API calls for searchable snapshots may be a leading KPI for the adoption of the searchable snapshot feature.\r\n\r\nI agree that we want to control a scope creep, but it also sounds that @original-brownbear proposal of {\"calls made from searchable snapshots\"; \"all other calls\"} may be a reasonable compromise that will still give us some additional level of detail. That is if i understood the proposal correctly.\r\n\r\n@zuketo , @zanbel  - do you have an issue for how we will measure the feature's adoption and what are the KPIs ? \r\ncc: @linyaru ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/635900464","html_url":"https://github.com/elastic/elasticsearch/issues/56361#issuecomment-635900464","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56361","id":635900464,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNTkwMDQ2NA==","user":{"login":"fcofdez","id":1033457,"node_id":"MDQ6VXNlcjEwMzM0NTc=","avatar_url":"https://avatars1.githubusercontent.com/u/1033457?v=4","gravatar_id":"","url":"https://api.github.com/users/fcofdez","html_url":"https://github.com/fcofdez","followers_url":"https://api.github.com/users/fcofdez/followers","following_url":"https://api.github.com/users/fcofdez/following{/other_user}","gists_url":"https://api.github.com/users/fcofdez/gists{/gist_id}","starred_url":"https://api.github.com/users/fcofdez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fcofdez/subscriptions","organizations_url":"https://api.github.com/users/fcofdez/orgs","repos_url":"https://api.github.com/users/fcofdez/repos","events_url":"https://api.github.com/users/fcofdez/events{/privacy}","received_events_url":"https://api.github.com/users/fcofdez/received_events","type":"User","site_admin":false},"created_at":"2020-05-29T10:31:34Z","updated_at":"2020-05-29T10:31:34Z","author_association":"CONTRIBUTOR","body":"I was wondering what would be the expected output for `Expose request counts via configurable (periodic) logging`. Should we log it into a specific file? should we log it into an index? For now I'll implement the exporting as a pluggable class so we can decide later.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/635909496","html_url":"https://github.com/elastic/elasticsearch/issues/56361#issuecomment-635909496","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56361","id":635909496,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNTkwOTQ5Ng==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2020-05-29T10:55:01Z","updated_at":"2020-05-29T10:55:01Z","author_association":"MEMBER","body":"@fcofdez if we just use a standard named log4j logger, then we can configure where the output goes via log4j and consumers of this can decide what to do with it. No need to worry about this on our end.\r\nThat said, the discussion on this is incoming elsewhere shortly as discussed on Tue :) sorry for the delay in getting this going.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/636486723","html_url":"https://github.com/elastic/elasticsearch/issues/56361#issuecomment-636486723","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56361","id":636486723,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNjQ4NjcyMw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2020-05-31T15:30:11Z","updated_at":"2020-05-31T15:30:11Z","author_association":"MEMBER","body":">we will also benefit from calling out # of API calls for searchable snapshots vs. total # of API calls for snapshot backup/restore for analytics purposes. in fact - the number of API calls for searchable snapshots may be a leading KPI for the adoption of the searchable snapshot feature.\r\n\r\n@yoavderazon Exposing telemetry for searchable snapshots is a separate consideration. Maybe we land on metering API calls, but maybe not. Typically, we don't; instead we expose metrics such as how many indices are backed by searchable snapshots, how many ILM policies have a searchable snapshot action, etc., as individual API call counts are noise.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/690077883","html_url":"https://github.com/elastic/elasticsearch/issues/56361#issuecomment-690077883","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56361","id":690077883,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MDA3Nzg4Mw==","user":{"login":"fcofdez","id":1033457,"node_id":"MDQ6VXNlcjEwMzM0NTc=","avatar_url":"https://avatars1.githubusercontent.com/u/1033457?v=4","gravatar_id":"","url":"https://api.github.com/users/fcofdez","html_url":"https://github.com/fcofdez","followers_url":"https://api.github.com/users/fcofdez/followers","following_url":"https://api.github.com/users/fcofdez/following{/other_user}","gists_url":"https://api.github.com/users/fcofdez/gists{/gist_id}","starred_url":"https://api.github.com/users/fcofdez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fcofdez/subscriptions","organizations_url":"https://api.github.com/users/fcofdez/orgs","repos_url":"https://api.github.com/users/fcofdez/repos","events_url":"https://api.github.com/users/fcofdez/events{/privacy}","received_events_url":"https://api.github.com/users/fcofdez/received_events","type":"User","site_admin":false},"created_at":"2020-09-10T08:25:44Z","updated_at":"2020-09-10T08:25:44Z","author_association":"CONTRIBUTOR","body":"I think we can close this issue now? ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/716659616","html_url":"https://github.com/elastic/elasticsearch/issues/56361#issuecomment-716659616","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/56361","id":716659616,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjY1OTYxNg==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2020-10-26T16:19:50Z","updated_at":"2020-10-26T16:19:50Z","author_association":"MEMBER","body":"Yea I think this is done. Closing, thanks @fcofdez !","performed_via_github_app":null}]