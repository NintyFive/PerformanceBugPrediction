[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/258375200","html_url":"https://github.com/elastic/elasticsearch/issues/21312#issuecomment-258375200","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21312","id":258375200,"node_id":"MDEyOklzc3VlQ29tbWVudDI1ODM3NTIwMA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-11-04T08:56:57Z","updated_at":"2016-11-04T08:56:57Z","author_association":"CONTRIBUTOR","body":"Inner hits expects the object form of `_source`, not the short form accepted by the top-level `_source`  pararameter\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/258530826","html_url":"https://github.com/elastic/elasticsearch/issues/21312#issuecomment-258530826","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21312","id":258530826,"node_id":"MDEyOklzc3VlQ29tbWVudDI1ODUzMDgyNg==","user":{"login":"ericofusco","id":5590224,"node_id":"MDQ6VXNlcjU1OTAyMjQ=","avatar_url":"https://avatars0.githubusercontent.com/u/5590224?v=4","gravatar_id":"","url":"https://api.github.com/users/ericofusco","html_url":"https://github.com/ericofusco","followers_url":"https://api.github.com/users/ericofusco/followers","following_url":"https://api.github.com/users/ericofusco/following{/other_user}","gists_url":"https://api.github.com/users/ericofusco/gists{/gist_id}","starred_url":"https://api.github.com/users/ericofusco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ericofusco/subscriptions","organizations_url":"https://api.github.com/users/ericofusco/orgs","repos_url":"https://api.github.com/users/ericofusco/repos","events_url":"https://api.github.com/users/ericofusco/events{/privacy}","received_events_url":"https://api.github.com/users/ericofusco/received_events","type":"User","site_admin":false},"created_at":"2016-11-04T19:50:31Z","updated_at":"2016-11-04T19:50:31Z","author_association":"NONE","body":"@clintongormley,\n\nThanks for the reply. Could you please give me a quick example for the \"_source\" ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/258612595","html_url":"https://github.com/elastic/elasticsearch/issues/21312#issuecomment-258612595","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21312","id":258612595,"node_id":"MDEyOklzc3VlQ29tbWVudDI1ODYxMjU5NQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-11-05T13:46:50Z","updated_at":"2016-11-05T13:46:50Z","author_association":"CONTRIBUTOR","body":"Sorry @ericofusco, I was just agreeing with you and adding some detail for @martijnvg \n\nThis form of `_source` works in inner hits:\n\n```\n\"_source\": { \"includes\": [...], \"excludes\": [...] }\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/258682738","html_url":"https://github.com/elastic/elasticsearch/issues/21312#issuecomment-258682738","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21312","id":258682738,"node_id":"MDEyOklzc3VlQ29tbWVudDI1ODY4MjczOA==","user":{"login":"ericofusco","id":5590224,"node_id":"MDQ6VXNlcjU1OTAyMjQ=","avatar_url":"https://avatars0.githubusercontent.com/u/5590224?v=4","gravatar_id":"","url":"https://api.github.com/users/ericofusco","html_url":"https://github.com/ericofusco","followers_url":"https://api.github.com/users/ericofusco/followers","following_url":"https://api.github.com/users/ericofusco/following{/other_user}","gists_url":"https://api.github.com/users/ericofusco/gists{/gist_id}","starred_url":"https://api.github.com/users/ericofusco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ericofusco/subscriptions","organizations_url":"https://api.github.com/users/ericofusco/orgs","repos_url":"https://api.github.com/users/ericofusco/repos","events_url":"https://api.github.com/users/ericofusco/events{/privacy}","received_events_url":"https://api.github.com/users/ericofusco/received_events","type":"User","site_admin":false},"created_at":"2016-11-06T14:02:13Z","updated_at":"2016-11-06T14:02:13Z","author_association":"NONE","body":"@clintongormley ,\n\nAlright. I guess I should keep this issue open until this is updated to accept the short form.\n\nUsing the object form as shown in your example works as expected.\n\nThanks again.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/265284691","html_url":"https://github.com/elastic/elasticsearch/issues/21312#issuecomment-265284691","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21312","id":265284691,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTI4NDY5MQ==","user":{"login":"sean-cherbone","id":2325957,"node_id":"MDQ6VXNlcjIzMjU5NTc=","avatar_url":"https://avatars3.githubusercontent.com/u/2325957?v=4","gravatar_id":"","url":"https://api.github.com/users/sean-cherbone","html_url":"https://github.com/sean-cherbone","followers_url":"https://api.github.com/users/sean-cherbone/followers","following_url":"https://api.github.com/users/sean-cherbone/following{/other_user}","gists_url":"https://api.github.com/users/sean-cherbone/gists{/gist_id}","starred_url":"https://api.github.com/users/sean-cherbone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sean-cherbone/subscriptions","organizations_url":"https://api.github.com/users/sean-cherbone/orgs","repos_url":"https://api.github.com/users/sean-cherbone/repos","events_url":"https://api.github.com/users/sean-cherbone/events{/privacy}","received_events_url":"https://api.github.com/users/sean-cherbone/received_events","type":"User","site_admin":false},"created_at":"2016-12-06T21:53:48Z","updated_at":"2016-12-07T18:17:44Z","author_association":"NONE","body":"Additionally,\r\n`\r\n\"_source\": [\"field1\",\"field2\"]\r\n`\r\nfails with error\r\n> [inner_hits] _source doesn't support values of type: START_ARRAY\r\n\r\nbut works as:\r\n`\r\n\"_source\": { \"includes\":[\"field1\",\"field2\"] }\r\n`\r\nI will assume this is the same issue.\r\n\r\nIf this is the intended behavior from here on out, it just needs to be stated as such in the [documentation](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-inner-hits.html). The [inner hits options](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-inner-hits.html#_options) documentation for 5.0 currently provides a link to the [top level source filtering](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-source-filtering.html) API; indicating that @ericofusco's code and mine should work.\r\n\r\nI should also point out that this type of filtering worked in 2.4","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/272479589","html_url":"https://github.com/elastic/elasticsearch/issues/21312#issuecomment-272479589","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21312","id":272479589,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjQ3OTU4OQ==","user":{"login":"vincentfretin","id":112249,"node_id":"MDQ6VXNlcjExMjI0OQ==","avatar_url":"https://avatars1.githubusercontent.com/u/112249?v=4","gravatar_id":"","url":"https://api.github.com/users/vincentfretin","html_url":"https://github.com/vincentfretin","followers_url":"https://api.github.com/users/vincentfretin/followers","following_url":"https://api.github.com/users/vincentfretin/following{/other_user}","gists_url":"https://api.github.com/users/vincentfretin/gists{/gist_id}","starred_url":"https://api.github.com/users/vincentfretin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vincentfretin/subscriptions","organizations_url":"https://api.github.com/users/vincentfretin/orgs","repos_url":"https://api.github.com/users/vincentfretin/repos","events_url":"https://api.github.com/users/vincentfretin/events{/privacy}","received_events_url":"https://api.github.com/users/vincentfretin/received_events","type":"User","site_admin":false},"created_at":"2017-01-13T16:04:52Z","updated_at":"2017-01-13T16:04:52Z","author_association":"NONE","body":"With elasticsearch 5.1.1,  \"_source\": { \"includes\":[\"uid\"] } indeed doesn't give an error but the returned _source is actually an empty {} instead of {\"uid\": \"8599f82f97684c72a9620f5552358b5d\"} I'm waiting in my case.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/277023296","html_url":"https://github.com/elastic/elasticsearch/issues/21312#issuecomment-277023296","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21312","id":277023296,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzAyMzI5Ng==","user":{"login":"Tobion","id":610090,"node_id":"MDQ6VXNlcjYxMDA5MA==","avatar_url":"https://avatars3.githubusercontent.com/u/610090?v=4","gravatar_id":"","url":"https://api.github.com/users/Tobion","html_url":"https://github.com/Tobion","followers_url":"https://api.github.com/users/Tobion/followers","following_url":"https://api.github.com/users/Tobion/following{/other_user}","gists_url":"https://api.github.com/users/Tobion/gists{/gist_id}","starred_url":"https://api.github.com/users/Tobion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tobion/subscriptions","organizations_url":"https://api.github.com/users/Tobion/orgs","repos_url":"https://api.github.com/users/Tobion/repos","events_url":"https://api.github.com/users/Tobion/events{/privacy}","received_events_url":"https://api.github.com/users/Tobion/received_events","type":"User","site_admin":false},"created_at":"2017-02-02T17:24:29Z","updated_at":"2017-02-02T17:27:58Z","author_association":"NONE","body":"I can confirm @vincentfretin. Source filtering on inner hits is bugged:\r\n\r\n- Using the short source filtering syntax creates an error\r\n- Using `\"_source\": { \"includes\":[\"uid\"] }` returns an empty _source even when the field exists\r\n- Using `\"_source\": { \"includes\":[\"uid\"], \"exludes\":[\"foo\"] }` returns the full _source and ignores the excluded field. Also the _source structure seems to have changed then. When part of a nested query the nested property is included in the source which didn't seem to be the case in earlier ES version, e.g. `_source: { \"nested property\": {...fields...} }`\r\n\r\nTested with version 5.0.2 and 5.1.2","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/286015838","html_url":"https://github.com/elastic/elasticsearch/issues/21312#issuecomment-286015838","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21312","id":286015838,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjAxNTgzOA==","user":{"login":"JohPa8696","id":14051565,"node_id":"MDQ6VXNlcjE0MDUxNTY1","avatar_url":"https://avatars2.githubusercontent.com/u/14051565?v=4","gravatar_id":"","url":"https://api.github.com/users/JohPa8696","html_url":"https://github.com/JohPa8696","followers_url":"https://api.github.com/users/JohPa8696/followers","following_url":"https://api.github.com/users/JohPa8696/following{/other_user}","gists_url":"https://api.github.com/users/JohPa8696/gists{/gist_id}","starred_url":"https://api.github.com/users/JohPa8696/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JohPa8696/subscriptions","organizations_url":"https://api.github.com/users/JohPa8696/orgs","repos_url":"https://api.github.com/users/JohPa8696/repos","events_url":"https://api.github.com/users/JohPa8696/events{/privacy}","received_events_url":"https://api.github.com/users/JohPa8696/received_events","type":"User","site_admin":false},"created_at":"2017-03-13T04:59:43Z","updated_at":"2017-03-13T04:59:43Z","author_association":"NONE","body":"Hi! I am new to the project. Can I try to tackle this issue? Any advice or suggestion would be much appreciated.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/290520115","html_url":"https://github.com/elastic/elasticsearch/issues/21312#issuecomment-290520115","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21312","id":290520115,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDUyMDExNQ==","user":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"created_at":"2017-03-30T19:32:08Z","updated_at":"2017-03-30T19:32:08Z","author_association":"MEMBER","body":"As reported by @Chakrygin in #23829 (see ticket for reproduction), this appears to be broken in field collapsing as well.  And also applies to disabling source entirely, not just various forms of filtering.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/290669187","html_url":"https://github.com/elastic/elasticsearch/issues/21312#issuecomment-290669187","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21312","id":290669187,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDY2OTE4Nw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-03-31T09:48:27Z","updated_at":"2017-03-31T09:48:27Z","author_association":"CONTRIBUTOR","body":"@talevy could you take a look at this please?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/297402137","html_url":"https://github.com/elastic/elasticsearch/issues/21312#issuecomment-297402137","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21312","id":297402137,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzQwMjEzNw==","user":{"login":"abhishek5678","id":27953347,"node_id":"MDQ6VXNlcjI3OTUzMzQ3","avatar_url":"https://avatars1.githubusercontent.com/u/27953347?v=4","gravatar_id":"","url":"https://api.github.com/users/abhishek5678","html_url":"https://github.com/abhishek5678","followers_url":"https://api.github.com/users/abhishek5678/followers","following_url":"https://api.github.com/users/abhishek5678/following{/other_user}","gists_url":"https://api.github.com/users/abhishek5678/gists{/gist_id}","starred_url":"https://api.github.com/users/abhishek5678/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abhishek5678/subscriptions","organizations_url":"https://api.github.com/users/abhishek5678/orgs","repos_url":"https://api.github.com/users/abhishek5678/repos","events_url":"https://api.github.com/users/abhishek5678/events{/privacy}","received_events_url":"https://api.github.com/users/abhishek5678/received_events","type":"User","site_admin":false},"created_at":"2017-04-26T13:10:21Z","updated_at":"2017-04-27T05:46:32Z","author_association":"NONE","body":"Hi Guys,\r\nIn this data when i am trying with nested data then it's getting fine but when i am adding one more nested data then it's not working  if anybody will be knows about that  then please reply me.\r\n\r\n\r\nPOST /icd10_codes/doc/1\r\n{\r\n    \"name\": \"Diseases of the blood and blood-forming organs and certain disorders involving the immune mechanism (D50-D89)\",\r\n    \"depth\": 1,\r\n    \"children\": [{\r\n\t\t\"name\": \"Nutritional anemias (D50-D53)\",\r\n\t\t\"depth\": 2,\r\n\t\t\t\"children\": [{\r\n\t\t\t\t\"code\": \"D50.0\",\r\n\t\t\t\t\"name\": \"Iron deficiency anemia secondary to blood loss (chronic)\",\r\n\t\t\t\t\"depth\": 4\r\n\t\t\t}, {\r\n\t\t\t\t\"code\": \"D50.1\",\r\n\t\t\t\t\"name\": \"Sideropenic dysphagia\",\r\n\t\t\t\t\"depth\": 4\r\n\t\t\t}, {\r\n\t\t\t\t\"code\": \"D50.8\",\r\n\t\t\t\t\"name\": \"Other iron deficiency anemias\",\r\n\t\t\t\t\"depth\": 4\r\n\t\t\t}, {\r\n\t\t\t\t\"code\": \"D50.9\",\r\n\t\t\t\t\"name\": \"Iron deficiency anemia, unspecified\",\r\n\t\t\t\t\"depth\": 4\r\n\t\t\t}]\r\n\t}]\r\n}\r\n\r\nAlso sending my mapping file and query also\r\nmapping file:\r\nPUT /icd10_codes\r\n{\r\n  \"mappings\": {\r\n    \"doc\": { \r\n      \"properties\": {\r\n        \"name\":            { \"type\": \"string\" },\r\n        \"depth\":           {\"type\":\"long\"},\r\n        \"children\": { \r\n          \"type\":             \"nested\",\r\n          \"properties\": {\r\n            \"name\":       { \"type\": \"string\" },\r\n            \"depth\":          { \"type\": \"long\"   },\r\n            \"children\":   { \r\n              \"type\":         \"nested\",\r\n              \"properties\": {\r\n                \"code\":     { \"type\": \"string\" },\r\n                \"name\":    { \"type\": \"string\" },\r\n                \"depth\":     { \"type\": \"long\" }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n}\r\n}\r\n\r\n\r\n\r\nQUERY:\r\nGET /icd10_codes/doc/_search\r\n{\r\n  \"_source\": false,\r\n  \"query\": {\r\n    \"nested\": {\r\n      \"path\": \"children\",\r\n      \"query\": {\r\n    \"nested\": {\r\n      \"path\": \"children.children\",\r\n      \"query\": {\r\n        \"bool\": {\r\n          \"must\": [\r\n            {\r\n              \"match\": {\r\n                \"children.children.name\": \"Iron\"\r\n              }\r\n            }\r\n          ]\r\n        }\r\n      },\r\n       \"inner_hits\": {        \r\n        \"_source\": {\r\n          \"excludes\":[\"name\"]\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n}\r\n}","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/301542671","html_url":"https://github.com/elastic/elasticsearch/issues/21312#issuecomment-301542671","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21312","id":301542671,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTU0MjY3MQ==","user":{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false},"created_at":"2017-05-15T17:21:19Z","updated_at":"2017-05-15T17:21:19Z","author_association":"CONTRIBUTOR","body":"Finally got around to fixing this... and realized someone beat me to it 3 days ago 💥!\r\n\r\nLooks like this commit fixed it: https://github.com/elastic/elasticsearch/commit/70e14d5e3fb78a74a89e812fc019882e781c61e4\r\nSo now the behavior is consistent in how the top-level and the inner-hits `_source` fields are parsed.\r\n\r\nTested against `5.x` with the shorthand string, array, and `includes`/`excludes`.\r\n\r\ntest CONSOLE script:\r\n```\r\nPUT company\r\n{\r\n  \"mappings\": {\r\n    \"branch\": {},\r\n    \"employee\": {\r\n      \"_parent\": {\r\n        \"type\": \"branch\" \r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nPOST /company/_bulk\r\n{ \"index\": { \"_type\": \"branch\", \"_id\": \"london\" }}\r\n{ \"name\": \"London Westminster\", \"city\": \"London\", \"country\": \"UK\" }\r\n{ \"index\": { \"_type\": \"employee\", \"_id\": \"london\", \"_parent\": \"london\" }}\r\n{ \"name\":  \"Alice Smith\", \"dob\":   \"1970-10-24\", \"hobby\": \"hiking\"}\r\n\r\nGET company/_search\r\n{\r\n  \"_source\": \"name\",\r\n  \"query\": {\r\n    \"has_parent\": {\r\n      \"parent_type\": \"branch\",\r\n      \"inner_hits\": { \"_source\" : \"city\"},\r\n      \"query\": {\r\n        \"match\": {\r\n          \"country\": \"UK\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```","performed_via_github_app":null}]