{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/31536","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31536/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31536/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/31536/events","html_url":"https://github.com/elastic/elasticsearch/issues/31536","id":334925769,"node_id":"MDU6SXNzdWUzMzQ5MjU3Njk=","number":31536,"title":"Completion suggester ignores trailing spaces in queries","user":{"login":"kylelyk","id":3401359,"node_id":"MDQ6VXNlcjM0MDEzNTk=","avatar_url":"https://avatars1.githubusercontent.com/u/3401359?v=4","gravatar_id":"","url":"https://api.github.com/users/kylelyk","html_url":"https://github.com/kylelyk","followers_url":"https://api.github.com/users/kylelyk/followers","following_url":"https://api.github.com/users/kylelyk/following{/other_user}","gists_url":"https://api.github.com/users/kylelyk/gists{/gist_id}","starred_url":"https://api.github.com/users/kylelyk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kylelyk/subscriptions","organizations_url":"https://api.github.com/users/kylelyk/orgs","repos_url":"https://api.github.com/users/kylelyk/repos","events_url":"https://api.github.com/users/kylelyk/events{/privacy}","received_events_url":"https://api.github.com/users/kylelyk/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-06-22T15:39:52Z","updated_at":"2018-06-22T17:11:17Z","closed_at":"2018-06-22T17:11:17Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**: 6.2.4\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version**: 1.8.0_101\r\n\r\n**OS version**: MacOS (Darwin Kernel Version 15.6.0)\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nWhen specifying a prefix query for the completion suggester, trailing spaces in the query do not have an effect on the results. This is annoying to users since a query for \"car \" will return suggestions like \"carpet\" rather than \"car shop\".\r\n\r\n**Steps to reproduce**:\r\n\r\n```\r\nPUT music\r\n{\r\n  \"mappings\": {\r\n    \"_doc\": {\r\n      \"properties\": {\r\n        \"suggest\": {\r\n          \"type\": \"completion\"\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nPUT music/_doc/1?refresh\r\n{\r\n    \"suggest\" : \"foo bar baz\"\r\n}\r\n```\r\n```\r\nPOST music/_search?pretty\r\n{\r\n    \"suggest\": {\r\n        \"song-suggest\" : {\r\n            \"prefix\" : \"foo b \",\r\n            \"completion\" : { \r\n                \"field\" : \"suggest\"\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nreturns 1 suggestion when it should fail to find any suggestions that start with \"foo b \".\r\n","closed_by":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"performed_via_github_app":null}