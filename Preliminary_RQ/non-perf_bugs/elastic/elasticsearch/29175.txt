{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/29175","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29175/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29175/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29175/events","html_url":"https://github.com/elastic/elasticsearch/issues/29175","id":306976714,"node_id":"MDU6SXNzdWUzMDY5NzY3MTQ=","number":29175,"title":"[CI] MasterDisruptionIT testMasterNodeGCs fails ocassionaly","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"labels":[{"id":836504707,"node_id":"MDU6TGFiZWw4MzY1MDQ3MDc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Distributed","name":":Distributed/Distributed","color":"0e8a16","default":false,"description":"A catch all label for anything in the Distributed Area. If you aren't sure, use this one."},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-03-20T17:59:50Z","updated_at":"2019-03-08T18:53:05Z","closed_at":"2019-03-08T18:53:05Z","author_association":"MEMBER","active_lock_reason":null,"body":"Seen today:\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.x+multijob-unix-compatibility/os=centos/824/console\r\n\r\nand a couple of days ago:\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.1+aggressive-opts/10/console\r\n\r\nNot reproducable locally so far:\r\n```\r\nREPRODUCE WITH: ./gradlew :server:integTest \\\r\n  -Dtests.seed=43D04A6C4FBD8535 \\\r\n  -Dtests.class=org.elasticsearch.discovery.MasterDisruptionIT \\\r\n  -Dtests.method=\"testMasterNodeGCs\" \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=be-BY \\\r\n  -Dtests.timezone=America/Mexico_City\r\n```\r\n\r\nThere are several timeouts in the log:\r\n```\r\n16:59:22   1> [2018-03-20T10:57:57,522][WARN ][o.e.d.z.UnicastZenPing   ] [node_t2] failed to send ping to [{node_t1}{DeehtQA4Q9KLlM4Lx4rb6A}{wprQ7qShRSGl4wuP2invGg}{127.0.0.1}{127.0.0.1:30218}]\r\n16:59:22   1> org.elasticsearch.transport.ReceiveTimeoutTransportException: [node_t1][127.0.0.1:30218][internal:discovery/zen/unicast] request_id [24] timed out after [3750ms]\r\n16:59:22   1> \tat org.elasticsearch.transport.TransportService$TimeoutHandler.run(TransportService.java:981) [main/:?]\r\n16:59:22   1> \tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:573) [main/:?]\r\n16:59:22   1> \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_162]\r\n16:59:22   1> \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_162]\r\n16:59:22   1> \tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_162]\r\n16:59:22   1> [2018-03-20T10:57:57,525][WARN ][o.e.d.z.UnicastZenPing   ] [node_t0] failed to send ping to [{node_t1}{DeehtQA4Q9KLlM4Lx4rb6A}{wprQ7qShRSGl4wuP2invGg}{127.0.0.1}{127.0.0.1:30218}]\r\n16:59:22   1> org.elasticsearch.transport.ReceiveTimeoutTransportException: [node_t1][127.0.0.1:30218][internal:discovery/zen/unicast] request_id [24] timed out after [3755ms]\r\n16:59:22   1> \tat org.elasticsearch.transport.TransportService$TimeoutHandler.run(TransportService.java:981) [main/:?]\r\n16:59:22   1> \tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:573) [main/:?]\r\n16:59:22   1> \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_162]\r\n16:59:22   1> \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_162]\r\n16:59:22   1> \tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_162]\r\n```\r\n\r\nLater I see this exception.\r\n```\r\n16:59:27 ERROR   35.4s J1 | MasterDisruptionIT.testMasterNodeGCs <<< FAILURES!\r\n16:59:27    > Throwable #1: MasterNotDiscoveredException[null]\r\n16:59:27    > \tat __randomizedtesting.SeedInfo.seed([43D04A6C4FBD8535:81B0F91CFAF0B415]:0)\r\n16:59:27    > \tat org.elasticsearch.action.support.master.TransportMasterNodeAction$AsyncSingleAction$4.onTimeout(TransportMasterNodeAction.java:213)\r\n16:59:27    > \tat org.elasticsearch.cluster.ClusterStateObserver$ContextPreservingListener.onTimeout(ClusterStateObserver.java:317)\r\n16:59:27    > \tat org.elasticsearch.cluster.ClusterStateObserver$ObserverClusterStateListener.onTimeout(ClusterStateObserver.java:244)\r\n16:59:27    > \tat org.elasticsearch.cluster.service.ClusterApplierService$NotifyTimeout.run(ClusterApplierService.java:577)\r\n16:59:27    > \tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:573)\r\n16:59:27    > \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n16:59:27    > \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n16:59:27    > \tat java.lang.Thread.run(Thread.java:748)\r\n```","closed_by":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"performed_via_github_app":null}