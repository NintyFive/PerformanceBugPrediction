[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66161970","html_url":"https://github.com/elastic/elasticsearch/issues/8823#issuecomment-66161970","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8823","id":66161970,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MTYxOTcw","user":{"login":"vjanelle","id":733641,"node_id":"MDQ6VXNlcjczMzY0MQ==","avatar_url":"https://avatars0.githubusercontent.com/u/733641?v=4","gravatar_id":"","url":"https://api.github.com/users/vjanelle","html_url":"https://github.com/vjanelle","followers_url":"https://api.github.com/users/vjanelle/followers","following_url":"https://api.github.com/users/vjanelle/following{/other_user}","gists_url":"https://api.github.com/users/vjanelle/gists{/gist_id}","starred_url":"https://api.github.com/users/vjanelle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vjanelle/subscriptions","organizations_url":"https://api.github.com/users/vjanelle/orgs","repos_url":"https://api.github.com/users/vjanelle/repos","events_url":"https://api.github.com/users/vjanelle/events{/privacy}","received_events_url":"https://api.github.com/users/vjanelle/received_events","type":"User","site_admin":false},"created_at":"2014-12-08T18:33:38Z","updated_at":"2014-12-08T18:33:38Z","author_association":"NONE","body":"Are you running dedicated masters with no query/data load?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66162212","html_url":"https://github.com/elastic/elasticsearch/issues/8823#issuecomment-66162212","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8823","id":66162212,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MTYyMjEy","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2014-12-08T18:34:57Z","updated_at":"2014-12-08T18:35:17Z","author_association":"MEMBER","body":"@bobpoekert can you elaborate more about what happened before the data was lost - did you update the mapping (title suggest so)? If you can share your cluster layout (dedicated master nodes or not) it would be great. Also please the grab a copy of the logs of the nodes and save them. They might give more insight.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66164797","html_url":"https://github.com/elastic/elasticsearch/issues/8823#issuecomment-66164797","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8823","id":66164797,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MTY0Nzk3","user":{"login":"bobpoekert","id":45596,"node_id":"MDQ6VXNlcjQ1NTk2","avatar_url":"https://avatars1.githubusercontent.com/u/45596?v=4","gravatar_id":"","url":"https://api.github.com/users/bobpoekert","html_url":"https://github.com/bobpoekert","followers_url":"https://api.github.com/users/bobpoekert/followers","following_url":"https://api.github.com/users/bobpoekert/following{/other_user}","gists_url":"https://api.github.com/users/bobpoekert/gists{/gist_id}","starred_url":"https://api.github.com/users/bobpoekert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bobpoekert/subscriptions","organizations_url":"https://api.github.com/users/bobpoekert/orgs","repos_url":"https://api.github.com/users/bobpoekert/repos","events_url":"https://api.github.com/users/bobpoekert/events{/privacy}","received_events_url":"https://api.github.com/users/bobpoekert/received_events","type":"User","site_admin":false},"created_at":"2014-12-08T18:49:47Z","updated_at":"2014-12-08T18:49:47Z","author_association":"NONE","body":"@vjanelle yes\n\n@bleskes The sequence of events was the following:\n1. Remove node (which is a master candidate) from cluster\n2. Delete all index files from said node\n3. Add node back into cluster\n4. Node is elected master\n5. All indexes in the cluster are now gone\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66165311","html_url":"https://github.com/elastic/elasticsearch/issues/8823#issuecomment-66165311","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8823","id":66165311,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MTY1MzEx","user":{"login":"vjanelle","id":733641,"node_id":"MDQ6VXNlcjczMzY0MQ==","avatar_url":"https://avatars0.githubusercontent.com/u/733641?v=4","gravatar_id":"","url":"https://api.github.com/users/vjanelle","html_url":"https://github.com/vjanelle","followers_url":"https://api.github.com/users/vjanelle/followers","following_url":"https://api.github.com/users/vjanelle/following{/other_user}","gists_url":"https://api.github.com/users/vjanelle/gists{/gist_id}","starred_url":"https://api.github.com/users/vjanelle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vjanelle/subscriptions","organizations_url":"https://api.github.com/users/vjanelle/orgs","repos_url":"https://api.github.com/users/vjanelle/repos","events_url":"https://api.github.com/users/vjanelle/events{/privacy}","received_events_url":"https://api.github.com/users/vjanelle/received_events","type":"User","site_admin":false},"created_at":"2014-12-08T18:52:52Z","updated_at":"2014-12-08T18:52:52Z","author_association":"NONE","body":"Did you have data turned off on the master candidate as well in the configuration?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66165372","html_url":"https://github.com/elastic/elasticsearch/issues/8823#issuecomment-66165372","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8823","id":66165372,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MTY1Mzcy","user":{"login":"bobpoekert","id":45596,"node_id":"MDQ6VXNlcjQ1NTk2","avatar_url":"https://avatars1.githubusercontent.com/u/45596?v=4","gravatar_id":"","url":"https://api.github.com/users/bobpoekert","html_url":"https://github.com/bobpoekert","followers_url":"https://api.github.com/users/bobpoekert/followers","following_url":"https://api.github.com/users/bobpoekert/following{/other_user}","gists_url":"https://api.github.com/users/bobpoekert/gists{/gist_id}","starred_url":"https://api.github.com/users/bobpoekert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bobpoekert/subscriptions","organizations_url":"https://api.github.com/users/bobpoekert/orgs","repos_url":"https://api.github.com/users/bobpoekert/repos","events_url":"https://api.github.com/users/bobpoekert/events{/privacy}","received_events_url":"https://api.github.com/users/bobpoekert/received_events","type":"User","site_admin":false},"created_at":"2014-12-08T18:53:11Z","updated_at":"2014-12-08T18:53:11Z","author_association":"NONE","body":"@vjanelle No. The master candidate is also a data node.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66173088","html_url":"https://github.com/elastic/elasticsearch/issues/8823#issuecomment-66173088","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8823","id":66173088,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MTczMDg4","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2014-12-08T19:39:04Z","updated_at":"2014-12-08T19:47:16Z","author_association":"MEMBER","body":"@bobpoekert thx. let me make sure I understand what you are saying:\n\n1) when you started you had a master node running, but it was also allowed to have data (i.e., it didn't have node.data set to false in its elasticsearch.yml file). Call this node A.\n2) you brought down _another_ node which was both a master candidate and a data node (i.e., neither node.master nor node.data was set to false). Call this node B.\n3).While B was down, you delete it's data folder (right? or was it some sub folders of it).\n4) You brought B back up and it joined the cluster.\n\nFrom this point on I'm not clear. Why was node B elected as master? What happened to the residing master node A?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66205856","html_url":"https://github.com/elastic/elasticsearch/issues/8823#issuecomment-66205856","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8823","id":66205856,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MjA1ODU2","user":{"login":"bobpoekert","id":45596,"node_id":"MDQ6VXNlcjQ1NTk2","avatar_url":"https://avatars1.githubusercontent.com/u/45596?v=4","gravatar_id":"","url":"https://api.github.com/users/bobpoekert","html_url":"https://github.com/bobpoekert","followers_url":"https://api.github.com/users/bobpoekert/followers","following_url":"https://api.github.com/users/bobpoekert/following{/other_user}","gists_url":"https://api.github.com/users/bobpoekert/gists{/gist_id}","starred_url":"https://api.github.com/users/bobpoekert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bobpoekert/subscriptions","organizations_url":"https://api.github.com/users/bobpoekert/orgs","repos_url":"https://api.github.com/users/bobpoekert/repos","events_url":"https://api.github.com/users/bobpoekert/events{/privacy}","received_events_url":"https://api.github.com/users/bobpoekert/received_events","type":"User","site_admin":false},"created_at":"2014-12-08T23:09:49Z","updated_at":"2014-12-08T23:09:49Z","author_association":"NONE","body":"@bleskes \n1. Cluster has a single master node (A) and two data nodes (B and C)\n2. Remove A from the cluster\n3. Now the cluster is offline (has no master)\n4. Delete A's data folder \n5. Bring A back up\n6. Now B and C have no data\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66206807","html_url":"https://github.com/elastic/elasticsearch/issues/8823#issuecomment-66206807","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8823","id":66206807,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MjA2ODA3","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2014-12-08T23:17:26Z","updated_at":"2014-12-08T23:17:26Z","author_association":"MEMBER","body":"@bobpoekert I'm confused. You said before you had nodes that are master candidates and are also data nodes. Can you confirm that node A has `node.data: false` in it's settings and and that node B & C have `node.master: false` ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66206904","html_url":"https://github.com/elastic/elasticsearch/issues/8823#issuecomment-66206904","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8823","id":66206904,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MjA2OTA0","user":{"login":"bobpoekert","id":45596,"node_id":"MDQ6VXNlcjQ1NTk2","avatar_url":"https://avatars1.githubusercontent.com/u/45596?v=4","gravatar_id":"","url":"https://api.github.com/users/bobpoekert","html_url":"https://github.com/bobpoekert","followers_url":"https://api.github.com/users/bobpoekert/followers","following_url":"https://api.github.com/users/bobpoekert/following{/other_user}","gists_url":"https://api.github.com/users/bobpoekert/gists{/gist_id}","starred_url":"https://api.github.com/users/bobpoekert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bobpoekert/subscriptions","organizations_url":"https://api.github.com/users/bobpoekert/orgs","repos_url":"https://api.github.com/users/bobpoekert/repos","events_url":"https://api.github.com/users/bobpoekert/events{/privacy}","received_events_url":"https://api.github.com/users/bobpoekert/received_events","type":"User","site_admin":false},"created_at":"2014-12-08T23:18:16Z","updated_at":"2014-12-08T23:18:49Z","author_association":"NONE","body":"@bleskes\nAll the nodes have `data: true`. \nA has `master: true`\nB and C have `master: false`\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66209745","html_url":"https://github.com/elastic/elasticsearch/issues/8823#issuecomment-66209745","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8823","id":66209745,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MjA5NzQ1","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2014-12-08T23:41:37Z","updated_at":"2014-12-08T23:41:37Z","author_association":"MEMBER","body":"OK. Clear. The cluster meta data (which we call cluster state) is stored and maintained on the master nodes. That meta data contains which indices are out there in the cluster. We only write the metadata on master eligible nodes, and rely on multiple masters for redundancy of this data set (compared to specific shard data). \n\nSince you only have one master node, that means there is no redundancy in your cluster meta data storage. After you deleted it there is nowhere to get it back from so the cluster becomes empty.\n\nWe do have a feature that is called dangling indices, which is in charge of scanning data folders for indices that are found on disk but are not part the cluster state and automatically import then into the cluster. As it is today, this feature needs to find some part of the index meta data to work, but those are also stored on the master eligible nodes, which in your case there were none. \n\nThinking about it, we can be more resilient in situations where users are running only a single master node (though we highly recommend running more than one), and store the index metadata wherever a shard copy is stored, so also on data nodes. So we can improve the dangling indices case to identify those as well.\n\nLets keep this issue open and we will work on a PR to improve things based on the above.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66216702","html_url":"https://github.com/elastic/elasticsearch/issues/8823#issuecomment-66216702","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8823","id":66216702,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MjE2NzAy","user":{"login":"lusis","id":228958,"node_id":"MDQ6VXNlcjIyODk1OA==","avatar_url":"https://avatars0.githubusercontent.com/u/228958?v=4","gravatar_id":"","url":"https://api.github.com/users/lusis","html_url":"https://github.com/lusis","followers_url":"https://api.github.com/users/lusis/followers","following_url":"https://api.github.com/users/lusis/following{/other_user}","gists_url":"https://api.github.com/users/lusis/gists{/gist_id}","starred_url":"https://api.github.com/users/lusis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lusis/subscriptions","organizations_url":"https://api.github.com/users/lusis/orgs","repos_url":"https://api.github.com/users/lusis/repos","events_url":"https://api.github.com/users/lusis/events{/privacy}","received_events_url":"https://api.github.com/users/lusis/received_events","type":"User","site_admin":false},"created_at":"2014-12-09T00:49:31Z","updated_at":"2014-12-09T00:49:31Z","author_association":"NONE","body":"This definitely feels like a documentation issue as well. I asked on twitter and the reason for running single master was essentially to avoid other bugs. I don't think it's an unfair assumption that a user would expect having a quorum of preexisting data nodes to be enough to promote a new master or rebuild it without data loss. I would, from a purely semantic perspective, expect that data nodes would have ALL the data needed for the cluster and that the master's state would live with the rest of the \"data\"\n\nAlso would it not make sense for maybe non-master eligible nodes to at least provide a backup of the master node cluster metadata for this case and as a safety precaution? \n\nFtr, I have no direct impact from this issue. Just another production ES user who tracks this stuff.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66216798","html_url":"https://github.com/elastic/elasticsearch/issues/8823#issuecomment-66216798","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8823","id":66216798,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MjE2Nzk4","user":{"login":"lusis","id":228958,"node_id":"MDQ6VXNlcjIyODk1OA==","avatar_url":"https://avatars0.githubusercontent.com/u/228958?v=4","gravatar_id":"","url":"https://api.github.com/users/lusis","html_url":"https://github.com/lusis","followers_url":"https://api.github.com/users/lusis/followers","following_url":"https://api.github.com/users/lusis/following{/other_user}","gists_url":"https://api.github.com/users/lusis/gists{/gist_id}","starred_url":"https://api.github.com/users/lusis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lusis/subscriptions","organizations_url":"https://api.github.com/users/lusis/orgs","repos_url":"https://api.github.com/users/lusis/repos","events_url":"https://api.github.com/users/lusis/events{/privacy}","received_events_url":"https://api.github.com/users/lusis/received_events","type":"User","site_admin":false},"created_at":"2014-12-09T00:50:30Z","updated_at":"2014-12-09T00:50:30Z","author_association":"NONE","body":"Sorry missed the part where you mention possibly storing the backup on data nodes. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66228228","html_url":"https://github.com/elastic/elasticsearch/issues/8823#issuecomment-66228228","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8823","id":66228228,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MjI4MjI4","user":{"login":"grantr","id":680,"node_id":"MDQ6VXNlcjY4MA==","avatar_url":"https://avatars3.githubusercontent.com/u/680?v=4","gravatar_id":"","url":"https://api.github.com/users/grantr","html_url":"https://github.com/grantr","followers_url":"https://api.github.com/users/grantr/followers","following_url":"https://api.github.com/users/grantr/following{/other_user}","gists_url":"https://api.github.com/users/grantr/gists{/gist_id}","starred_url":"https://api.github.com/users/grantr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grantr/subscriptions","organizations_url":"https://api.github.com/users/grantr/orgs","repos_url":"https://api.github.com/users/grantr/repos","events_url":"https://api.github.com/users/grantr/events{/privacy}","received_events_url":"https://api.github.com/users/grantr/received_events","type":"User","site_admin":false},"created_at":"2014-12-09T03:07:58Z","updated_at":"2014-12-09T03:07:58Z","author_association":"NONE","body":"Repro of this bug: https://gist.github.com/grantr/a53a9b6b91005ad9807f\n\nThis is more than a documentation issue. Even when running in a degraded configuration, shards should never be deleted if their metadata can't be found.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66246679","html_url":"https://github.com/elastic/elasticsearch/issues/8823#issuecomment-66246679","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8823","id":66246679,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MjQ2Njc5","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2014-12-09T07:59:09Z","updated_at":"2014-12-09T07:59:09Z","author_association":"MEMBER","body":"> Also would it not make sense for maybe non-master eligible nodes to at least provide a backup of the master node cluster metadata for this case and as a safety precaution?\n\nThis is indeed the plan\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/77676737","html_url":"https://github.com/elastic/elasticsearch/issues/8823#issuecomment-77676737","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8823","id":77676737,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Njc2NzM3","user":{"login":"mkliu","id":1469524,"node_id":"MDQ6VXNlcjE0Njk1MjQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1469524?v=4","gravatar_id":"","url":"https://api.github.com/users/mkliu","html_url":"https://github.com/mkliu","followers_url":"https://api.github.com/users/mkliu/followers","following_url":"https://api.github.com/users/mkliu/following{/other_user}","gists_url":"https://api.github.com/users/mkliu/gists{/gist_id}","starred_url":"https://api.github.com/users/mkliu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkliu/subscriptions","organizations_url":"https://api.github.com/users/mkliu/orgs","repos_url":"https://api.github.com/users/mkliu/repos","events_url":"https://api.github.com/users/mkliu/events{/privacy}","received_events_url":"https://api.github.com/users/mkliu/received_events","type":"User","site_admin":false},"created_at":"2015-03-07T06:46:11Z","updated_at":"2015-03-07T06:46:11Z","author_association":"NONE","body":"+1111\nThis bug really burnt me! We had multiple master node, but there was one time all master nodes are down, so I promote one data node as master node. And all data are gone! It freaked the hell out of me. And because people are still ingesting data, the data are overwritten. By the time I realize what's happening, it's already too late, we lost lots of data...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/77860748","html_url":"https://github.com/elastic/elasticsearch/issues/8823#issuecomment-77860748","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8823","id":77860748,"node_id":"MDEyOklzc3VlQ29tbWVudDc3ODYwNzQ4","user":{"login":"polgl","id":11061987,"node_id":"MDQ6VXNlcjExMDYxOTg3","avatar_url":"https://avatars1.githubusercontent.com/u/11061987?v=4","gravatar_id":"","url":"https://api.github.com/users/polgl","html_url":"https://github.com/polgl","followers_url":"https://api.github.com/users/polgl/followers","following_url":"https://api.github.com/users/polgl/following{/other_user}","gists_url":"https://api.github.com/users/polgl/gists{/gist_id}","starred_url":"https://api.github.com/users/polgl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polgl/subscriptions","organizations_url":"https://api.github.com/users/polgl/orgs","repos_url":"https://api.github.com/users/polgl/repos","events_url":"https://api.github.com/users/polgl/events{/privacy}","received_events_url":"https://api.github.com/users/polgl/received_events","type":"User","site_admin":false},"created_at":"2015-03-09T14:16:03Z","updated_at":"2015-03-09T14:16:03Z","author_association":"NONE","body":"Can the deletion be delayed for a longer period by setting a high value for `gateway.local.dangling_timeout` (couple of days maybe?)?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/77885335","html_url":"https://github.com/elastic/elasticsearch/issues/8823#issuecomment-77885335","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8823","id":77885335,"node_id":"MDEyOklzc3VlQ29tbWVudDc3ODg1MzM1","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-03-09T16:14:17Z","updated_at":"2015-03-09T16:14:17Z","author_association":"CONTRIBUTOR","body":"@polgl we remove the deleting and always import now since https://github.com/elasticsearch/elasticsearch/pull/10016 is pushed to 2.0\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/77900710","html_url":"https://github.com/elastic/elasticsearch/issues/8823#issuecomment-77900710","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8823","id":77900710,"node_id":"MDEyOklzc3VlQ29tbWVudDc3OTAwNzEw","user":{"login":"polgl","id":11061987,"node_id":"MDQ6VXNlcjExMDYxOTg3","avatar_url":"https://avatars1.githubusercontent.com/u/11061987?v=4","gravatar_id":"","url":"https://api.github.com/users/polgl","html_url":"https://github.com/polgl","followers_url":"https://api.github.com/users/polgl/followers","following_url":"https://api.github.com/users/polgl/following{/other_user}","gists_url":"https://api.github.com/users/polgl/gists{/gist_id}","starred_url":"https://api.github.com/users/polgl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polgl/subscriptions","organizations_url":"https://api.github.com/users/polgl/orgs","repos_url":"https://api.github.com/users/polgl/repos","events_url":"https://api.github.com/users/polgl/events{/privacy}","received_events_url":"https://api.github.com/users/polgl/received_events","type":"User","site_admin":false},"created_at":"2015-03-09T17:26:22Z","updated_at":"2015-03-09T17:26:22Z","author_association":"NONE","body":"I'm running 1.4 and can not update now, so i would prefer to change the settings and have more time to react.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/78565754","html_url":"https://github.com/elastic/elasticsearch/issues/8823#issuecomment-78565754","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8823","id":78565754,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NTY1NzU0","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2015-03-12T18:51:25Z","updated_at":"2015-03-12T18:51:25Z","author_association":"CONTRIBUTOR","body":"@polgl you can modify the settings yourself and just to import always?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/78602990","html_url":"https://github.com/elastic/elasticsearch/issues/8823#issuecomment-78602990","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8823","id":78602990,"node_id":"MDEyOklzc3VlQ29tbWVudDc4NjAyOTkw","user":{"login":"polgl","id":11061987,"node_id":"MDQ6VXNlcjExMDYxOTg3","avatar_url":"https://avatars1.githubusercontent.com/u/11061987?v=4","gravatar_id":"","url":"https://api.github.com/users/polgl","html_url":"https://github.com/polgl","followers_url":"https://api.github.com/users/polgl/followers","following_url":"https://api.github.com/users/polgl/following{/other_user}","gists_url":"https://api.github.com/users/polgl/gists{/gist_id}","starred_url":"https://api.github.com/users/polgl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polgl/subscriptions","organizations_url":"https://api.github.com/users/polgl/orgs","repos_url":"https://api.github.com/users/polgl/repos","events_url":"https://api.github.com/users/polgl/events{/privacy}","received_events_url":"https://api.github.com/users/polgl/received_events","type":"User","site_admin":false},"created_at":"2015-03-12T20:30:49Z","updated_at":"2015-03-12T20:30:49Z","author_association":"NONE","body":"Hi, I did some tests and it seems like our cluster does not show this behavior.\nWe have a single dedicated master node, if this node does not have an index in the meta data / cluster state. nothing happens. The data nodes don't delete any files (the dangling indices part in the code is not executed). That sounds ok, I can live with that.\n\nThanks for you help\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/228681057","html_url":"https://github.com/elastic/elasticsearch/issues/8823#issuecomment-228681057","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8823","id":228681057,"node_id":"MDEyOklzc3VlQ29tbWVudDIyODY4MTA1Nw==","user":{"login":"saurabh24292","id":8191425,"node_id":"MDQ6VXNlcjgxOTE0MjU=","avatar_url":"https://avatars1.githubusercontent.com/u/8191425?v=4","gravatar_id":"","url":"https://api.github.com/users/saurabh24292","html_url":"https://github.com/saurabh24292","followers_url":"https://api.github.com/users/saurabh24292/followers","following_url":"https://api.github.com/users/saurabh24292/following{/other_user}","gists_url":"https://api.github.com/users/saurabh24292/gists{/gist_id}","starred_url":"https://api.github.com/users/saurabh24292/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saurabh24292/subscriptions","organizations_url":"https://api.github.com/users/saurabh24292/orgs","repos_url":"https://api.github.com/users/saurabh24292/repos","events_url":"https://api.github.com/users/saurabh24292/events{/privacy}","received_events_url":"https://api.github.com/users/saurabh24292/received_events","type":"User","site_admin":false},"created_at":"2016-06-27T08:15:13Z","updated_at":"2016-06-27T08:15:13Z","author_association":"NONE","body":"ES Version 2.2\n\nPrevious state - A cluster with 6 nodes (3 Master cum data nodes, 3 client nodes).\nIndex has data for two months (1st April 2016 to 31st May 2016.) Actually, everyday, previous day's data is added and two months old data is deleted.\nI restarted the cluster. All of a sudden, 90% of data for the date range 5th May 2016 to 31st May 2016 is gone (average record for these days goes down from 100000 per day to 10000 per day) and, surprisingly, deleted data fro date range 5th March 2016 to 31st March 2016 reappears.\n\nWhat's the problem?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/228681977","html_url":"https://github.com/elastic/elasticsearch/issues/8823#issuecomment-228681977","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8823","id":228681977,"node_id":"MDEyOklzc3VlQ29tbWVudDIyODY4MTk3Nw==","user":{"login":"saurabh24292","id":8191425,"node_id":"MDQ6VXNlcjgxOTE0MjU=","avatar_url":"https://avatars1.githubusercontent.com/u/8191425?v=4","gravatar_id":"","url":"https://api.github.com/users/saurabh24292","html_url":"https://github.com/saurabh24292","followers_url":"https://api.github.com/users/saurabh24292/followers","following_url":"https://api.github.com/users/saurabh24292/following{/other_user}","gists_url":"https://api.github.com/users/saurabh24292/gists{/gist_id}","starred_url":"https://api.github.com/users/saurabh24292/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saurabh24292/subscriptions","organizations_url":"https://api.github.com/users/saurabh24292/orgs","repos_url":"https://api.github.com/users/saurabh24292/repos","events_url":"https://api.github.com/users/saurabh24292/events{/privacy}","received_events_url":"https://api.github.com/users/saurabh24292/received_events","type":"User","site_admin":false},"created_at":"2016-06-27T08:19:53Z","updated_at":"2016-06-27T08:19:53Z","author_association":"NONE","body":"correction - version is 2.1.1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/228744039","html_url":"https://github.com/elastic/elasticsearch/issues/8823#issuecomment-228744039","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8823","id":228744039,"node_id":"MDEyOklzc3VlQ29tbWVudDIyODc0NDAzOQ==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2016-06-27T13:24:30Z","updated_at":"2016-06-27T13:24:30Z","author_association":"MEMBER","body":"@saurabh24292 I'm not sure what your problem is, but maybe you can ask on discuss.elastic.co? if we figure out it's related to this issue or is cause by something other problem we can re-open this or (more likely) open a new one\n","performed_via_github_app":null}]