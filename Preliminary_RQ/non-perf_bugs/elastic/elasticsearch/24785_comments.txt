[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/302657024","html_url":"https://github.com/elastic/elasticsearch/issues/24785#issuecomment-302657024","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24785","id":302657024,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjY1NzAyNA==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2017-05-19T09:36:52Z","updated_at":"2017-05-19T09:36:52Z","author_association":"MEMBER","body":"@dijingran Thanks for reporting this issue. This looks like a bug. What happens here is that there is encoding logic that folds multiple binary array values into a single binary value, but at query time no decoding happens. Causing your `totalCount` var in your script to be always be 1 if the `evtCnt` is specified.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/307045628","html_url":"https://github.com/elastic/elasticsearch/issues/24785#issuecomment-307045628","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24785","id":307045628,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNzA0NTYyOA==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2017-06-08T09:09:38Z","updated_at":"2017-06-08T09:09:38Z","author_association":"MEMBER","body":"Turns out the decoding logic was not missing and behaving correctly. This bug was caused by something else: #25129","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/307084965","html_url":"https://github.com/elastic/elasticsearch/issues/24785#issuecomment-307084965","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24785","id":307084965,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNzA4NDk2NQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2017-06-08T12:12:16Z","updated_at":"2017-06-08T12:12:16Z","author_association":"MEMBER","body":"Turns out that #25129 only fixes a bug on master (6.0.0-alpha1 and 6.0.0-alpha2). This bug doesn't exist on 5.x because scrips access doc values in an array based way, whereas in master it is accessed in an iterator based manner which requires scripts to prefill an array. In that case #25129 is required.\r\n\r\n@dijingran Can you share a more isolated example that demonstrates the issue that you're seeing?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/317698869","html_url":"https://github.com/elastic/elasticsearch/issues/24785#issuecomment-317698869","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/24785","id":317698869,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNzY5ODg2OQ==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2017-07-25T10:37:37Z","updated_at":"2017-07-25T10:37:37Z","author_association":"MEMBER","body":"No further feedback. If you are still able to reproduce this issue please provide details and we can re-open","performed_via_github_app":null}]