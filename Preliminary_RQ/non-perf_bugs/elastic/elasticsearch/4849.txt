{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/4849","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4849/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4849/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4849/events","html_url":"https://github.com/elastic/elasticsearch/issues/4849","id":26099153,"node_id":"MDU6SXNzdWUyNjA5OTE1Mw==","number":4849,"title":"WARNING \"failed to prepare/warm\" after upgrading from 0.90.3 to 0.90.10","user":{"login":"benoit-intrw","id":684674,"node_id":"MDQ6VXNlcjY4NDY3NA==","avatar_url":"https://avatars0.githubusercontent.com/u/684674?v=4","gravatar_id":"","url":"https://api.github.com/users/benoit-intrw","html_url":"https://github.com/benoit-intrw","followers_url":"https://api.github.com/users/benoit-intrw/followers","following_url":"https://api.github.com/users/benoit-intrw/following{/other_user}","gists_url":"https://api.github.com/users/benoit-intrw/gists{/gist_id}","starred_url":"https://api.github.com/users/benoit-intrw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benoit-intrw/subscriptions","organizations_url":"https://api.github.com/users/benoit-intrw/orgs","repos_url":"https://api.github.com/users/benoit-intrw/repos","events_url":"https://api.github.com/users/benoit-intrw/events{/privacy}","received_events_url":"https://api.github.com/users/benoit-intrw/received_events","type":"User","site_admin":false},"labels":[{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":74293669,"node_id":"MDU6TGFiZWw3NDI5MzY2OQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.90.11","name":"v0.90.11","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"assignees":[{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2014-01-22T15:54:18Z","updated_at":"2014-01-23T10:17:49Z","closed_at":"2014-01-23T10:17:38Z","author_association":"NONE","active_lock_reason":null,"body":"I have check release note from 0.90.3 to 0.90.10 to see if warmer need some change, but nothing.\n\nInitially reported on ML : https://groups.google.com/d/msg/elasticsearch/xkX5RVII-Gk/BRd28_zbZUIJ\n\nTwo samples stack trace :\n\n```\n[2014-01-16 17:27:00,669][WARN ][index.engine.robin       ] [integration] [m112][0] failed to prepare/warm\njava.lang.IllegalMonitorStateException\n        at java.lang.Object.wait(Native Method)\n        at java.lang.Object.wait(Object.java:485)\n        at org.elasticsearch.search.SearchService$SearchWarmer$2.awaitTermination(SearchService.java:822)\n        at org.elasticsearch.indices.warmer.InternalIndicesWarmer.warm(InternalIndicesWarmer.java:99)\n        at org.elasticsearch.index.engine.robin.RobinEngine$RobinSearchFactory.newSearcher(RobinEngine.java:1652)\n        at org.apache.lucene.search.SearcherManager.getSearcher(SearcherManager.java:155)\n        at org.apache.lucene.search.SearcherManager.<init>(SearcherManager.java:89)\n        at org.elasticsearch.index.engine.robin.RobinEngine.buildSearchManager(RobinEngine.java:1530)\n        at org.elasticsearch.index.engine.robin.RobinEngine.start(RobinEngine.java:277)\n        at org.elasticsearch.index.shard.service.InternalIndexShard.performRecoveryPrepareForTranslog(InternalIndexShard.java:660)\n        at org.elasticsearch.index.gateway.local.LocalIndexShardGateway.recover(LocalIndexShardGateway.java:201)\n        at org.elasticsearch.index.gateway.IndexShardGatewayService$1.run(IndexShardGatewayService.java:174)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n        at java.lang.Thread.run(Thread.java:662)\n```\n\n```\n[2014-01-16 11:17:36,836][WARN ][index.engine.robin       ] [sissor2-pp] [m105][0] failed to prepare/warm\njava.lang.IllegalMonitorStateException\n        at java.lang.Object.wait(Native Method)\n        at java.lang.Object.wait(Object.java:503)\n        at org.elasticsearch.search.SearchService$SearchWarmer$2.awaitTermination(SearchService.java:822)\n        at org.elasticsearch.indices.warmer.InternalIndicesWarmer.warm(InternalIndicesWarmer.java:99)\n        at org.elasticsearch.index.engine.robin.RobinEngine$RobinSearchFactory.newSearcher(RobinEngine.java:1652)\n        at org.apache.lucene.search.SearcherManager.getSearcher(SearcherManager.java:155)\n        at org.apache.lucene.search.SearcherManager.<init>(SearcherManager.java:89)\n        at org.elasticsearch.index.engine.robin.RobinEngine.buildSearchManager(RobinEngine.java:1530)\n        at org.elasticsearch.index.engine.robin.RobinEngine.start(RobinEngine.java:277)\n        at org.elasticsearch.index.shard.service.InternalIndexShard.performRecoveryPrepareForTranslog(InternalIndexShard.java:660)\n        at org.elasticsearch.indices.recovery.RecoveryTarget$PrepareForTranslogOperationsRequestHandler.messageReceived(RecoveryTarget.java:389)\n        at org.elasticsearch.indices.recovery.RecoveryTarget$PrepareForTranslogOperationsRequestHandler.messageReceived(RecoveryTarget.java:363)\n        at org.elasticsearch.transport.netty.MessageChannelHandler$RequestHandler.run(MessageChannelHandler.java:270)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n        at java.lang.Thread.run(Thread.java:722)\n```\n","closed_by":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"performed_via_github_app":null}