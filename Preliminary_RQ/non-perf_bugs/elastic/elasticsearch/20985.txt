{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/20985","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20985/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20985/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20985/events","html_url":"https://github.com/elastic/elasticsearch/issues/20985","id":183591305,"node_id":"MDU6SXNzdWUxODM1OTEzMDU=","number":20985,"title":"Ability to tag different segments of custom scoring queries and later retrieve with explanation.","user":{"login":"kmalhotra","id":8871029,"node_id":"MDQ6VXNlcjg4NzEwMjk=","avatar_url":"https://avatars3.githubusercontent.com/u/8871029?v=4","gravatar_id":"","url":"https://api.github.com/users/kmalhotra","html_url":"https://github.com/kmalhotra","followers_url":"https://api.github.com/users/kmalhotra/followers","following_url":"https://api.github.com/users/kmalhotra/following{/other_user}","gists_url":"https://api.github.com/users/kmalhotra/gists{/gist_id}","starred_url":"https://api.github.com/users/kmalhotra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kmalhotra/subscriptions","organizations_url":"https://api.github.com/users/kmalhotra/orgs","repos_url":"https://api.github.com/users/kmalhotra/repos","events_url":"https://api.github.com/users/kmalhotra/events{/privacy}","received_events_url":"https://api.github.com/users/kmalhotra/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2016-10-18T05:04:25Z","updated_at":"2018-03-20T21:47:31Z","closed_at":"2018-03-20T21:47:15Z","author_association":"NONE","active_lock_reason":null,"body":"**Tag query functional scoring segments to be used with _explanation**: It would be great if ES can provide an ability to tag certain aspects of functional score score and later retrieve and use with _explain api.\r\n\r\nLet me provide some insights into my use case, let me know if a workaround exists the same.\r\n\r\nI have a complex functional scoring query,used to find relevancy between two entities based on custom scoring logic. Things work well with \"_search\" api, since I only need the total score at that point of time, but for some other background process I need specific details wrt how each component of the functional score query contribute to the total score. I am using \"_explain\" for this, but there are 2 problems that I face:-\r\n1. The response of _explain is tricky to decode, i.e identify contribution of each field to the total score (with java api).\r\n2. I also have a complex logic which defines different weight for each keyword matching against a single field in the entity, this means that even if I am able to solve issue 1, there is no way for me to differentiate between these scores.\r\n\r\n**My Suggestion**:- It would be great if I can just tag different segments of query at query preparation time(for _explain api and not _search api ) and individual factors in response.\r\n\r\nThoughts/Suggestion/ Work around?\r\n","closed_by":{"login":"andyb-elastic","id":29205940,"node_id":"MDQ6VXNlcjI5MjA1OTQw","avatar_url":"https://avatars2.githubusercontent.com/u/29205940?v=4","gravatar_id":"","url":"https://api.github.com/users/andyb-elastic","html_url":"https://github.com/andyb-elastic","followers_url":"https://api.github.com/users/andyb-elastic/followers","following_url":"https://api.github.com/users/andyb-elastic/following{/other_user}","gists_url":"https://api.github.com/users/andyb-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/andyb-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyb-elastic/subscriptions","organizations_url":"https://api.github.com/users/andyb-elastic/orgs","repos_url":"https://api.github.com/users/andyb-elastic/repos","events_url":"https://api.github.com/users/andyb-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/andyb-elastic/received_events","type":"User","site_admin":false},"performed_via_github_app":null}