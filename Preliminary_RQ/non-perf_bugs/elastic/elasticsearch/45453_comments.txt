[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/520506387","html_url":"https://github.com/elastic/elasticsearch/issues/45453#issuecomment-520506387","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45453","id":520506387,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDUwNjM4Nw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-08-12T16:55:02Z","updated_at":"2019-08-12T16:55:02Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/520623413","html_url":"https://github.com/elastic/elasticsearch/issues/45453#issuecomment-520623413","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45453","id":520623413,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDYyMzQxMw==","user":{"login":"gwbrown","id":1522844,"node_id":"MDQ6VXNlcjE1MjI4NDQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1522844?v=4","gravatar_id":"","url":"https://api.github.com/users/gwbrown","html_url":"https://github.com/gwbrown","followers_url":"https://api.github.com/users/gwbrown/followers","following_url":"https://api.github.com/users/gwbrown/following{/other_user}","gists_url":"https://api.github.com/users/gwbrown/gists{/gist_id}","starred_url":"https://api.github.com/users/gwbrown/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gwbrown/subscriptions","organizations_url":"https://api.github.com/users/gwbrown/orgs","repos_url":"https://api.github.com/users/gwbrown/repos","events_url":"https://api.github.com/users/gwbrown/events{/privacy}","received_events_url":"https://api.github.com/users/gwbrown/received_events","type":"User","site_admin":false},"created_at":"2019-08-12T22:50:17Z","updated_at":"2019-08-12T22:50:17Z","author_association":"CONTRIBUTOR","body":"This line right here is the problem:\r\n```\r\n        - index: \"metricbeat-%{[kubernetes.pod._module.namespace]}-%{+yyyy.MM.dd}\"\r\n```\r\n\r\nThat setting in Beats generally doesn't play well with ILM - this is something that should probably be addressed in Beats. When Beats configures ILM, it does so based on the ILM configuration (see below). When the output index is manually set to something other than the alias that Beats set up, it will cause errors similar to this.\r\n\r\nThe proper way to change the Beats output when using ILM can be found in the [Configure index lifecycle management](https://www.elastic.co/guide/en/beats/metricbeat/current/ilm.html) page in the Beats documentation. \r\n\r\nI've answered this here because this is something that looks on the surface like it could be a bug in our products, but for more help on this problem please post to the [forums](https://discuss.elastic.co/), where we typically provide configuration assistance and troubleshooting, as we try to keep GitHub issues reserved for bugs and feature requests.\r\n\r\nBecause this is not an Elasticsearch bug (although it is arguably a Beats usability bug), I hope you don't mind that I close this issue.","performed_via_github_app":null}]