{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/28844","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28844/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28844/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28844/events","html_url":"https://github.com/elastic/elasticsearch/issues/28844","id":300833452,"node_id":"MDU6SXNzdWUzMDA4MzM0NTI=","number":28844,"title":"Issues running three node cluster","user":{"login":"dmaulick","id":10509630,"node_id":"MDQ6VXNlcjEwNTA5NjMw","avatar_url":"https://avatars0.githubusercontent.com/u/10509630?v=4","gravatar_id":"","url":"https://api.github.com/users/dmaulick","html_url":"https://github.com/dmaulick","followers_url":"https://api.github.com/users/dmaulick/followers","following_url":"https://api.github.com/users/dmaulick/following{/other_user}","gists_url":"https://api.github.com/users/dmaulick/gists{/gist_id}","starred_url":"https://api.github.com/users/dmaulick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmaulick/subscriptions","organizations_url":"https://api.github.com/users/dmaulick/orgs","repos_url":"https://api.github.com/users/dmaulick/repos","events_url":"https://api.github.com/users/dmaulick/events{/privacy}","received_events_url":"https://api.github.com/users/dmaulick/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2018-02-27T23:29:00Z","updated_at":"2018-02-27T23:54:43Z","closed_at":"2018-02-27T23:54:43Z","author_association":"NONE","active_lock_reason":null,"body":"\r\n- Elasticsearch version: (6.2.1)\r\n- OS: Unix\r\n\r\nI am attempting to start a 3 node cluster \r\nI have two issues/questions in regards to my configuration.\r\n\r\n1) \r\n This is my first configuration in the elasticsearch.yml file\r\n\r\n\r\nnode.name: 127x16\r\npath.logs: //home/dmaul/569/machines/16/logs\r\npath.data: //home/dmaul/569/machines/16/data\r\nnetwork.host: 129.65.221.26\r\ndiscovery.zen.ping.uincast.hosts: [\"127x16\", \"127x17\", \"127x18\"]\r\n\r\n\r\nThe other nodes are named 127x17 and  127x18. \r\n(I realize I will want to have the discovery.zen.minimum_master_nodes to avoid split brain, however at this point I am just trying to get a running cluster and not too worried about efficiency)\r\n\r\nWith the above configuration, I receive the first stack trace labelled \"STACK 1 of 2\" below. According to the Elasticsearch documentation my syntax: \"discovery.zen.ping.uincast.hosts: [\"127x16\", \"127x17\", \"127x18\"]\" should work. However, the bootstrap seems to not accept that line.\r\n\r\n\r\n2) \r\nMy secondary question is in regards to my configuration when I remove discovery.zen.ping.uincast.hosts: [\"127x16\", \"127x17\", \"127x18\"].\r\nSo now in elasticsearch.yml file:\r\n\r\nnode.name: 127x16\r\npath.logs: //home/dmaul/569/machines/16/logs\r\npath.data: //home/dmaul/569/machines/16/data\r\nnetwork.host: 129.65.221.26\r\n\r\nAgain with the other nodes named 127x17 and 127x18. \r\n\r\nI receive a different Stack trace, labeled \"STACK 2 of 2\" below.\r\nAccording to the documentation, to address the two listed bootstrap issues I must update admin config files in the following way:\r\n\r\nTo address [1] (increasing max file descriptors):\r\nI added this line to my /etc/security/limits.conf: \r\nelasticsearch - nofile 70000\r\n\r\nTo address [2] (increase virtual memory):\r\nI added this line to my /etc/sysctl.conf:\r\nvm.max_mao_count=262144\r\n\r\nBut even with both of those files changed I still get this issue.\r\n\r\n\r\n//STACK 1 of 2**************************************************\r\n\r\n[2018-02-27T14:40:04,700][WARN ][o.e.b.ElasticsearchUncaughtExceptionHandler] [127x16] uncaught exception in thread [main]\r\norg.elasticsearch.bootstrap.StartupException: java.lang.IllegalArgumentException: unknown setting [discovery.zen.ping.uincast.hosts] please check that any required plugins are installed, or check the   breaking changes documentation for removed settings\r\n   at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:125) ~[elasticsearch-6.2.1.jar:6.2.1]\r\n   at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:112) ~[elasticsearch-6.2.1.jar:6.2.1]\r\n   at org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:86) ~[elasticsearch-6.2.1.jar:6.2.1]\r\n   at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124) ~[elasticsearch-cli-6.2.1.jar:6.2.1]\r\n   at org.elasticsearch.cli.Command.main(Command.java:90) ~[elasticsearch-cli-6.2.1.jar:6.2.1]\r\n   at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:92) ~[elasticsearch-6.2.1.jar:6.2.1]\r\n   at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:85) ~[elasticsearch-6.2.1.jar:6.2.1]\r\nCaused by: java.lang.IllegalArgumentException: unknown setting [discovery.zen.ping.uincast.hosts] please check that any required plugins are installed, or check the breaking changes documentation for   removed settings\r\n   at org.elasticsearch.common.settings.AbstractScopedSettings.validate(AbstractScopedSettings.java:346) ~[elasticsearch-6.2.1.jar:6.2.1]\r\n   at org.elasticsearch.common.settings.AbstractScopedSettings.validate(AbstractScopedSettings.java:310) ~[elasticsearch-6.2.1.jar:6.2.1]\r\n   at org.elasticsearch.common.settings.AbstractScopedSettings.validate(AbstractScopedSettings.java:284) ~[elasticsearch-6.2.1.jar:6.2.1]\r\n   at org.elasticsearch.common.settings.SettingsModule.<init>(SettingsModule.java:134) ~[elasticsearch-6.2.1.jar:6.2.1]\r\n   at org.elasticsearch.node.Node.<init>(Node.java:331) ~[elasticsearch-6.2.1.jar:6.2.1]\r\n   at org.elasticsearch.node.Node.<init>(Node.java:246) ~[elasticsearch-6.2.1.jar:6.2.1]\r\n   at org.elasticsearch.bootstrap.Bootstrap$5.<init>(Bootstrap.java:213) ~[elasticsearch-6.2.1.jar:6.2.1]\r\n   at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:213) ~[elasticsearch-6.2.1.jar:6.2.1]\r\n   at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:323) ~[elasticsearch-6.2.1.jar:6.2.1]\r\n   at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:121) ~[elasticsearch-6.2.1.jar:6.2.1]\r\n   ... 6 more\r\n\r\n//*****************************************************************\r\n\r\n\r\n//STACK 2 of 2*****************************************************\r\n\r\nERROR: [2] bootstrap checks failed\r\n[1]: max file descriptors [4096] for elasticsearch process is too low, increase to at least [65536]\r\n[2]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]\r\n[2018-02-27T15:07:09,937][INFO ][o.e.n.Node               ] [127x16] stopping ...\r\n[2018-02-27T15:07:10,010][INFO ][o.e.n.Node               ] [127x16] stopped\r\n[2018-02-27T15:07:10,010][INFO ][o.e.n.Node               ] [127x16] closing ...\r\n[2018-02-27T15:07:10,025][INFO ][o.e.n.Node               ] [127x16] closed\r\n\r\n//************************************************************************","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}