{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/26980","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26980/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26980/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26980/events","html_url":"https://github.com/elastic/elasticsearch/issues/26980","id":264852758,"node_id":"MDU6SXNzdWUyNjQ4NTI3NTg=","number":26980,"title":"Http compression only working when using localhost","user":{"login":"sladeos","id":11784656,"node_id":"MDQ6VXNlcjExNzg0NjU2","avatar_url":"https://avatars1.githubusercontent.com/u/11784656?v=4","gravatar_id":"","url":"https://api.github.com/users/sladeos","html_url":"https://github.com/sladeos","followers_url":"https://api.github.com/users/sladeos/followers","following_url":"https://api.github.com/users/sladeos/following{/other_user}","gists_url":"https://api.github.com/users/sladeos/gists{/gist_id}","starred_url":"https://api.github.com/users/sladeos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sladeos/subscriptions","organizations_url":"https://api.github.com/users/sladeos/orgs","repos_url":"https://api.github.com/users/sladeos/repos","events_url":"https://api.github.com/users/sladeos/events{/privacy}","received_events_url":"https://api.github.com/users/sladeos/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2017-10-12T08:20:56Z","updated_at":"2017-10-12T11:59:57Z","closed_at":"2017-10-12T09:55:10Z","author_association":"NONE","active_lock_reason":null,"body":"<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`): 5.5.2, 5.6.0, 5.6.2\r\n\r\n**Plugins installed**: []\r\n\r\n**JVM version** (`java -version`): 1.8.0_131, 1.8.0_144\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): 4.4.0-97-generic #120-Ubuntu SMP Tue Sep 19 17:28:18 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux. Windows 10.\r\n\r\n**Description of the problem including expected versus actual behavior**: \r\nExpected behaviour is that if http.compression is not turned off and a request is made with the Accept-Encoding header that responses are compressed and that the content-encoding header is set with the correct encoding type, regardless of the host address.\r\nResponses are only compressed when issuing requests to localhost. When using another address (local ip address, 127.0.0.1) no Content-Encoding header is sent and responses are not compressed.\r\n\r\n**Steps to reproduce**:\r\n 1. Install elastic and specify two network.hosts addresses. [localhost, local ip address]\r\n 2. Visit localhost:9200/_nodes/settings?pretty and localipaddress:9200/_nodes/settings?pretty and view the response headers. \r\n\r\n1. Localhost\r\n- HTTP/1.1 200 OK\r\ncontent-type: application/json; charset=UTF-8\r\ncontent-encoding: gzip\r\ncontent-length: 549\r\n2. Local ip request\r\n- Content-Length:1667\r\ncontent-type:application/json; charset=UTF-8","closed_by":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"performed_via_github_app":null}