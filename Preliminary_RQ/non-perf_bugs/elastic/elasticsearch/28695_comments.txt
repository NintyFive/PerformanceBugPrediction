[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/366063583","html_url":"https://github.com/elastic/elasticsearch/issues/28695#issuecomment-366063583","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28695","id":366063583,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjA2MzU4Mw==","user":{"login":"andyb-elastic","id":29205940,"node_id":"MDQ6VXNlcjI5MjA1OTQw","avatar_url":"https://avatars2.githubusercontent.com/u/29205940?v=4","gravatar_id":"","url":"https://api.github.com/users/andyb-elastic","html_url":"https://github.com/andyb-elastic","followers_url":"https://api.github.com/users/andyb-elastic/followers","following_url":"https://api.github.com/users/andyb-elastic/following{/other_user}","gists_url":"https://api.github.com/users/andyb-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/andyb-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyb-elastic/subscriptions","organizations_url":"https://api.github.com/users/andyb-elastic/orgs","repos_url":"https://api.github.com/users/andyb-elastic/repos","events_url":"https://api.github.com/users/andyb-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/andyb-elastic/received_events","type":"User","site_admin":false},"created_at":"2018-02-15T21:14:00Z","updated_at":"2018-02-15T21:14:00Z","author_association":"CONTRIBUTOR","body":"Also on 6.2\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+6.2+multijob-unix-compatibility/os=amazon/104/console\r\n[build-104-RemoteClusterConnectionTests.txt](https://github.com/elastic/elasticsearch/files/1729400/build-104-RemoteClusterConnectionTests.txt)\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/366111255","html_url":"https://github.com/elastic/elasticsearch/issues/28695#issuecomment-366111255","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28695","id":366111255,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjExMTI1NQ==","user":{"login":"andyb-elastic","id":29205940,"node_id":"MDQ6VXNlcjI5MjA1OTQw","avatar_url":"https://avatars2.githubusercontent.com/u/29205940?v=4","gravatar_id":"","url":"https://api.github.com/users/andyb-elastic","html_url":"https://github.com/andyb-elastic","followers_url":"https://api.github.com/users/andyb-elastic/followers","following_url":"https://api.github.com/users/andyb-elastic/following{/other_user}","gists_url":"https://api.github.com/users/andyb-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/andyb-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyb-elastic/subscriptions","organizations_url":"https://api.github.com/users/andyb-elastic/orgs","repos_url":"https://api.github.com/users/andyb-elastic/repos","events_url":"https://api.github.com/users/andyb-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/andyb-elastic/received_events","type":"User","site_admin":false},"created_at":"2018-02-16T00:44:17Z","updated_at":"2018-02-16T00:44:17Z","author_association":"CONTRIBUTOR","body":"This has failed several times recently in CI across different workers and operating systems, but doesn't reproduce locally. I've muted it on master (70b279dbbc9492c31740072b36877aef12ce5206) 6.x (04b77fd2600ec64fa41d578667ba2bc3f35570d2) and 6.2 (a6c01b76e43a3cb69dbb2c616fe1d4f25dd8c096)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/366184035","html_url":"https://github.com/elastic/elasticsearch/issues/28695#issuecomment-366184035","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28695","id":366184035,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjE4NDAzNQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2018-02-16T09:25:24Z","updated_at":"2018-02-16T10:58:45Z","author_association":"MEMBER","body":"Other test failures in the same test class fail with the same assertion error. The last test gets blamed for the the uncaught assertion error that the `testTriggerUpdatesConcurrently ` test causes:\r\n\r\n```\r\nREPRODUCE WITH: ./gradlew :server:test -Dtests.seed=C57042CE2984974E -Dtests.class=org.elasticsearch.transport.RemoteClusterConnectionTests -Dtests.method=\"testGetConnectionInfo\" -Dtests.security.manager=true -Dtests.locale=es-VE -Dtests.timezone=SystemV/PST8\r\nERROR   0.35s J1 | RemoteClusterConnectionTests.testGetConnectionInfo <<< FAILURES!\r\n   > Throwable #1: com.carrotsearch.randomizedtesting.UncaughtExceptionError: Captured an uncaught exception in thread: Thread[id=1222, name=elasticsearch[org.elasticsearch.transport.RemoteClusterConnectionTests][management][T#2], state=RUNNABLE, group=TGRP-RemoteClusterConnectionTests]\r\n   > \tat __randomizedtesting.SeedInfo.seed([C57042CE2984974E:CCBBF5CDD215623A]:0)\r\n   > Caused by: java.lang.AssertionError\r\n   > \tat __randomizedtesting.SeedInfo.seed([C57042CE2984974E]:0)\r\n   > \tat org.elasticsearch.transport.RemoteClusterConnectionTests$6.lambda$run$1(RemoteClusterConnectionTests.java:596)\r\n   > \tat org.elasticsearch.action.ActionListener$1.onFailure(ActionListener.java:68)\r\n   > \tat org.elasticsearch.action.ActionListener.onFailure(ActionListener.java:138)\r\n   > \tat org.elasticsearch.transport.RemoteClusterConnection$ConnectHandler$1.lambda$doRun$1(RemoteClusterConnection.java:407)\r\n   > \tat org.elasticsearch.action.ActionListener$1.onFailure(ActionListener.java:68)\r\n   > \tat org.elasticsearch.transport.RemoteClusterConnection$ConnectHandler.collectRemoteNodes(RemoteClusterConnection.java:474)\r\n   > \tat org.elasticsearch.transport.RemoteClusterConnection$ConnectHandler$1.doRun(RemoteClusterConnection.java:412)\r\n   > \tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\n   > \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n   > \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n   > \tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:573)\r\n   > \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n   > \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n   > \tat java.lang.Thread.run(Thread.java:748)\r\n```\r\n\r\nI'm also unable to reproduce locally and still trying to understand this failure.\r\n\r\n~~I suspect that #28667 is the cause for the RemoteClusterConnectionTests failing so often now.~~\r\nI suspect that the changes in #28667 uncovered these assertion errors that would otherwise not have been noticed.\r\n\r\nThis tests also fails on the 5.6 branch, so I'll will mute it there too:\r\n\r\n```\r\nERROR   0.11s J2 | RemoteClusterConnectionTests.testNodeDisconnected <<< FAILURES!\r\n Throwable #1: com.carrotsearch.randomizedtesting.UncaughtExceptionError: Captured an uncaught exception in thread: Thread[id=417, name=elasticsearch[org.elasticsearch.transport.RemoteClusterConnectionTests][management][T#2], state=RUNNABLE, group=TGRP-RemoteClusterConnectionTests]\r\n   > \tat __randomizedtesting.SeedInfo.seed([CF40251205CBC3BE:6143103BEBD223C]:0)\r\n  2> NOTE: test params are: codec=Asserting(Lucene62): {}, docValues:{}, maxPointsInLeafNode=1971, maxMBSortInHeap=6.355498547106645, sim=RandomSimilarity(queryNorm=false,coord=no): {}, locale=es-EC, timezone=Etc/UCT\r\n  2> NOTE: Linux 4.4.0-1050-aws amd64/Oracle Corporation 1.8.0_162 (64-bit)/cpus=4,threads=1,free=430621368,total=516423680\r\n  2> NOTE: All tests run in this JVM: [NodeAllocationResultTests, RestTableTests, QueriesTests, InternalFilterTests, SpanOrQueryBuilderTests, BalancedSingleShardTests, CodecTests, TransportReplicationActionTests, BootstrapChecksTests, InternalEngineSettingsTests, BucketScriptTests, ExistsQueryBuilderTests, CustomUnifiedHighlighterTests, PrimaryTermsTests, ContextPreservingActionListenerTests, SearchScrollAsyncActionTests, DateTimeUnitTests, MinTests, BulkShardRequestTests, NodeRemovalClusterStateTaskExecutorTests, RemoteClusterConnectionTests]\r\n   > Caused by: java.lang.AssertionError\r\n   > \tat __randomizedtesting.SeedInfo.seed([CF40251205CBC3BE]:0)\r\n   > \tat org.elasticsearch.transport.RemoteClusterConnectionTests$5.lambda$run$1(RemoteClusterConnectionTests.java:504)\r\n   > \tat org.elasticsearch.action.ActionListener$1.onFailure(ActionListener.java:67)\r\n   > \tat org.elasticsearch.action.ActionListener.onFailure(ActionListener.java:101)\r\n   > \tat org.elasticsearch.transport.RemoteClusterConnection$ConnectHandler$1.lambda$doRun$1(RemoteClusterConnection.java:397)\r\n   > \tat org.elasticsearch.action.ActionListener$1.onFailure(ActionListener.java:67)\r\n   > \tat org.elasticsearch.transport.RemoteClusterConnection$ConnectHandler.collectRemoteNodes(RemoteClusterConnection.java:464)\r\n   > \tat org.elasticsearch.transport.RemoteClusterConnection$ConnectHandler$1.doRun(RemoteClusterConnection.java:402)\r\n   > \tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\n   > \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n   > \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n   > \tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:575)\r\n   > \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n   > \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n   > \tat java.lang.Thread.run(Thread.java:748)\r\n```\r\n\r\n5.6 Build url: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+5.6+oracle-java9-periodic/92/consoleText","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/366225487","html_url":"https://github.com/elastic/elasticsearch/issues/28695#issuecomment-366225487","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28695","id":366225487,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjIyNTQ4Nw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-02-16T12:41:43Z","updated_at":"2018-02-16T12:41:43Z","author_association":"MEMBER","body":"Closed by 10666a4538472424d9dfbdbd19be3b17283206dd","performed_via_github_app":null}]