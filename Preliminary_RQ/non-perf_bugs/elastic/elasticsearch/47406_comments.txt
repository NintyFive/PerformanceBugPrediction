[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/537209640","html_url":"https://github.com/elastic/elasticsearch/issues/47406#issuecomment-537209640","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47406","id":537209640,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNzIwOTY0MA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-10-01T20:14:58Z","updated_at":"2019-10-01T20:14:58Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed (:Distributed/Snapshot/Restore)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/537214482","html_url":"https://github.com/elastic/elasticsearch/issues/47406#issuecomment-537214482","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47406","id":537214482,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNzIxNDQ4Mg==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2019-10-01T20:26:18Z","updated_at":"2019-10-01T20:26:18Z","author_association":"MEMBER","body":"Looks like it might be some REST test retry hitting us here again (the snapshot by that name but with a different UUID finishes concurrently to this failure here). Will look into it in more detail tomorrow.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/537542819","html_url":"https://github.com/elastic/elasticsearch/issues/47406#issuecomment-537542819","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47406","id":537542819,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNzU0MjgxOQ==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2019-10-02T15:18:47Z","updated_at":"2019-10-02T15:18:47Z","author_association":"MEMBER","body":"This is an actual bug, tripping an assertion in a BwC test:\r\n\r\n```\r\n» ERROR][o.e.b.ElasticsearchUncaughtExceptionHandler] [v7.5.0-0] fatal error in thread [elasticsearch[v7.5.0-0][generic][T#3]], exiting\r\n»  java.lang.AssertionError: Received null generation for shard state [SUCCESS]\r\n```\r\n\r\non it","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/546282483","html_url":"https://github.com/elastic/elasticsearch/issues/47406#issuecomment-546282483","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47406","id":546282483,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjI4MjQ4Mw==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2019-10-25T09:38:17Z","updated_at":"2019-10-25T09:38:17Z","author_association":"CONTRIBUTOR","body":"This looks to be affecting `7.x` too: https://gradle-enterprise.elastic.co/s/c6xy2fgsavlhm","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/546284857","html_url":"https://github.com/elastic/elasticsearch/issues/47406#issuecomment-546284857","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47406","id":546284857,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjI4NDg1Nw==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2019-10-25T09:45:09Z","updated_at":"2019-10-25T10:51:21Z","author_association":"MEMBER","body":"This is a new issue:\r\n\r\n```\r\n\r\n» ERROR][o.e.b.ElasticsearchUncaughtExceptionHandler] [v7.5.0-1] fatal error in thread [elasticsearch[v7.5.0-1][generic][T#5]], exiting\r\n--\r\n»  java.lang.AssertionError: Received null generation for shard state [SUCCESS]\r\n»  \tat org.elasticsearch.cluster.SnapshotsInProgress$ShardSnapshotStatus.<init>(SnapshotsInProgress.java:357) ~[elasticsearch-7.6.0-SNAPSHOT.jar:7.6.0-SNAPSHOT]\r\n»  \tat org.elasticsearch.cluster.SnapshotsInProgress.<init>(SnapshotsInProgress.java:517) ~[elasticsearch-7.6.0-SNAPSHOT.jar:7.6.0-SNAPSHOT]\r\n»  \tat org.elasticsearch.common.io.stream.NamedWriteableAwareStreamInput.readNamedWriteable(NamedWriteableAwareStreamInput.java:46) ~[elasticsearch-7.6.0-SNAPSHOT.jar:7.6.0-SNAPSHOT]\r\n»  \tat org.elasticsearch.cluster.AbstractNamedDiffable$CompleteNamedDiff.<init>(AbstractNamedDiffable.java:87) ~[elasticsearch-7.6.0-SNAPSHOT.jar:7.6.0-SNAPSHOT]\r\n»  \tat org.elasticsearch.cluster.AbstractNamedDiffable.readDiffFrom(AbstractNamedDiffable.java:47) ~[elasticsearch-7.6.0-SNAPSHOT.jar:7.6.0-SNAPSHOT]\r\n»  \tat org.elasticsearch.cluster.SnapshotsInProgress.readDiffFrom(SnapshotsInProgress.java:496) ~[elasticsearch-7.6.0-SNAPSHOT.jar:7.6.0-SNAPSHOT]\r\n»  \tat org.elasticsearch.common.io.stream.NamedWriteableAwareStreamInput.readNamedWriteable(NamedWriteableAwareStreamInput.java:46) ~[elasticsearch-7.6.0-SNAPSHOT.jar:7.6.0-SNAPSHOT]\r\n»  \tat org.elasticsearch.cluster.NamedDiffableValueSerializer.readDiff(NamedDiffableValueSerializer.java:56) ~[elasticsearch-7.6.0-SNAPSHOT.jar:7.6.0-SNAPSHOT]\r\n»  \tat org.elasticsearch.cluster.NamedDiffableValueSerializer.readDiff(NamedDiffableValueSerializer.java:30) ~[elasticsearch-7.6.0-SNAPSHOT.jar:7.6.0-SNAPSHOT]\r\n»  \tat org.elasticsearch.cluster.DiffableUtils$MapDiff.<init>(DiffableUtils.java:406) ~[elasticsearch-7.6.0-SNAPSHOT.jar:7.6.0-SNAPSHOT]\r\n»  \tat org.elasticsearch.cluster.DiffableUtils$ImmutableOpenMapDiff.<init>(DiffableUtils.java:234) ~[elasticsearch-7.6.0-SNAPSHOT.jar:7.6.0-SNAPSHOT]\r\n»  \tat org.elasticsearch.cluster.DiffableUtils.readImmutableOpenMapDiff(DiffableUtils.java:127) ~[elasticsearch-7.6.0-SNAPSHOT.jar:7.6.0-SNAPSHOT]\r\n»  \tat org.elasticsearch.cluster.ClusterState$ClusterStateDiff.<init>(ClusterState.java:885) ~[elasticsearch-7.6.0-SNAPSHOT.jar:7.6.0-SNAPSHOT]\r\n»  \tat org.elasticsearch.cluster.ClusterState.readDiffFrom(ClusterState.java:793) ~[elasticsearch-7.6.0-SNAPSHOT.jar:7.6.0-SNAPSHOT]\r\n»  \tat org.elasticsearch.cluster.coordination.PublicationTransportHandler.handleIncomingPublishRequest(PublicationTransportHandler.java:418) ~[elasticsearch-7.6.0-SNAPSHOT.jar:7.6.0-SNAPSHOT]\r\n»  \tat org.elasticsearch.cluster.coordination.PublicationTransportHandler.lambda$new$0(PublicationTransportHandler.java:100) ~[elasticsearch-7.6.0-SNAPSHOT.jar:7.6.0-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:63) ~[elasticsearch-7.6.0-SNAPSHOT.jar:7.6.0-SNAPSHOT]\r\n»  \tat org.elasticsearch.transport.InboundHandler$RequestHandler.doRun(InboundHandler.java:264) ~[elasticsearch-7.6.0-SNAPSHOT.jar:7.6.0-SNAPSHOT]\r\n»  \tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:773) ~[elasticsearch-7.6.0-SNAPSHOT.jar:7.6.0-SNAPSHOT]\r\n»  \tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) ~[elasticsearch-7.6.0-SNAPSHOT.jar:7.6.0-SNAPSHOT]\r\n»  \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_221]\r\n»  \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_221]\r\n»  \tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_221]\r\n\r\n\r\n```\r\n\r\nThere's  some trouble in BwC between `7.6` and `7.5` for the shard generation handling it seems. Looking into it shortly.\r\n\r\nEDIT: Turns out this was just a missing backport https://github.com/elastic/elasticsearch/pull/48514 ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/546345175","html_url":"https://github.com/elastic/elasticsearch/issues/47406#issuecomment-546345175","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/47406","id":546345175,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjM0NTE3NQ==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2019-10-25T13:03:55Z","updated_at":"2019-10-25T13:03:55Z","author_association":"MEMBER","body":"Fixed in `7.x` via #48514 ","performed_via_github_app":null}]