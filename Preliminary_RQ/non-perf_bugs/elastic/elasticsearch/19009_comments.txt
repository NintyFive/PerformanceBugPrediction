[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227694134","html_url":"https://github.com/elastic/elasticsearch/issues/19009#issuecomment-227694134","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19009","id":227694134,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzY5NDEzNA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-06-22T09:41:27Z","updated_at":"2016-06-22T09:41:27Z","author_association":"CONTRIBUTOR","body":"Thanks for the clear recreation.  Actually, I'd disagree with the output from `test_index_1` being correct. You've asked for extended bounds and yet you get no buckets back at all? I think all buckets should be returned instead.\n\n@colings86 could you take a look please?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/227697982","html_url":"https://github.com/elastic/elasticsearch/issues/19009#issuecomment-227697982","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19009","id":227697982,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzY5Nzk4Mg==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2016-06-22T09:57:50Z","updated_at":"2016-06-22T09:57:50Z","author_association":"MEMBER","body":"Hmm, I haven't yet run your recreation @wrobstory (thanks for such a complete explanation/recreation btw) but it looks like the problem here is that the extended bounds information is not sent back to the coordinating node in the shard response if the shard had no matching documents. We arbitrarily pick one of the responses to use as the guide for the reduce phase (this is actually the first in the list and I wouldn't be surprised if the list is in fact sorted by index name first) so if we choose one which matched no documents it won't do the last step of completing the extended bounds (leading to the weird behaviour where the name of the index makes a difference to the result). In theory it should be an easy fix, to send back the extended bounds information as part of the empty aggregation response. I'll look into making this change soon.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/228701863","html_url":"https://github.com/elastic/elasticsearch/issues/19009#issuecomment-228701863","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19009","id":228701863,"node_id":"MDEyOklzc3VlQ29tbWVudDIyODcwMTg2Mw==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2016-06-27T09:52:56Z","updated_at":"2016-06-27T09:52:56Z","author_association":"MEMBER","body":"@wrobstory I have raise #19085 to address this issue\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/229083544","html_url":"https://github.com/elastic/elasticsearch/issues/19009#issuecomment-229083544","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19009","id":229083544,"node_id":"MDEyOklzc3VlQ29tbWVudDIyOTA4MzU0NA==","user":{"login":"wrobstory","id":2601457,"node_id":"MDQ6VXNlcjI2MDE0NTc=","avatar_url":"https://avatars3.githubusercontent.com/u/2601457?v=4","gravatar_id":"","url":"https://api.github.com/users/wrobstory","html_url":"https://github.com/wrobstory","followers_url":"https://api.github.com/users/wrobstory/followers","following_url":"https://api.github.com/users/wrobstory/following{/other_user}","gists_url":"https://api.github.com/users/wrobstory/gists{/gist_id}","starred_url":"https://api.github.com/users/wrobstory/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wrobstory/subscriptions","organizations_url":"https://api.github.com/users/wrobstory/orgs","repos_url":"https://api.github.com/users/wrobstory/repos","events_url":"https://api.github.com/users/wrobstory/events{/privacy}","received_events_url":"https://api.github.com/users/wrobstory/received_events","type":"User","site_admin":false},"created_at":"2016-06-28T15:22:50Z","updated_at":"2016-06-28T15:22:50Z","author_association":"NONE","body":"Thanks for the great communication and quick turnaround! Much appreciated!\n","performed_via_github_app":null}]