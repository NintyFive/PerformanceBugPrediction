{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/13395","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13395/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13395/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/13395/events","html_url":"https://github.com/elastic/elasticsearch/issues/13395","id":105377865,"node_id":"MDU6SXNzdWUxMDUzNzc4NjU=","number":13395,"title":"elasticsearch pings other hosts on its own port","user":{"login":"tstibbs","id":4869014,"node_id":"MDQ6VXNlcjQ4NjkwMTQ=","avatar_url":"https://avatars1.githubusercontent.com/u/4869014?v=4","gravatar_id":"","url":"https://api.github.com/users/tstibbs","html_url":"https://github.com/tstibbs","followers_url":"https://api.github.com/users/tstibbs/followers","following_url":"https://api.github.com/users/tstibbs/following{/other_user}","gists_url":"https://api.github.com/users/tstibbs/gists{/gist_id}","starred_url":"https://api.github.com/users/tstibbs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tstibbs/subscriptions","organizations_url":"https://api.github.com/users/tstibbs/orgs","repos_url":"https://api.github.com/users/tstibbs/repos","events_url":"https://api.github.com/users/tstibbs/events{/privacy}","received_events_url":"https://api.github.com/users/tstibbs/received_events","type":"User","site_admin":false},"labels":[{"id":146854632,"node_id":"MDU6TGFiZWwxNDY4NTQ2MzI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Network","name":":Distributed/Network","color":"0e8a16","default":false,"description":"Http and internode communication implementations"},{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2015-09-08T13:13:51Z","updated_at":"2015-09-08T14:28:19Z","closed_at":"2015-09-08T14:28:19Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"I have two elasticsearch nodes, one of which is a client node (called `nodeA`, running on `serverA`), and one of which is a master (called `nodeB`, running on `serverB`). NodeA has tcp port `9317` and nodeB uses port `9310`.\n\nI have noticed that when the client node (nodeA) starts up, it tries to contact nodeB, but it uses nodeA's port. This seems very strange to me, just because one node is running on a particular port, why does it assume all other nodes will be? I have checked that the firewall is not blocking any of the pings.\n\nI wouldn't care about this except that the port it's trying to contact is blocked by the firewall, which results in a `NoRouteToHostException`, which appears as a WARN in the log file - having an exception which is 'normal behaviour' makes it harder to spot actual issues when they occur.\n\n---\n\nnodeA's elasticsearch.yml:\n\n```\ndiscovery.zen.ping.unicast.hosts: [serverA, serverB]\nnode.master: false\nnode.client: true\ntransport.tcp.port: 9317\n```\n\nnodeB's elasticsearch.yml:\n\n```\ndiscovery.zen.ping.unicast.hosts: [serverA, serverB]\ntransport.tcp.port: 9310\n```\n\nextract from my firewall log on serverB demonstrating that it was iptables that blocked the connection from serverA to serverB on port 9317:\n\n```\nSep  8 11:34:02 serverB kernel: IPTABLES_REJECT: IN=eth7 OUT= SRC=serverA DST=serverB LEN=60 TOS=0x00 PREC=0x00 TTL=64 ID=49165 DF PROTO=TCP SPT=52202 DPT=9317 WINDOW=14600 RES=0x00 SYN URGP=0\n```\n\nThis is elasticsearch 1.7.1 running on sun java 1.7.0_67 on CentOS 6.4.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}