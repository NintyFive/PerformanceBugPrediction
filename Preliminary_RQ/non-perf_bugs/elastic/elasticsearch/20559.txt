{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/20559","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20559/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20559/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20559/events","html_url":"https://github.com/elastic/elasticsearch/issues/20559","id":177825696,"node_id":"MDU6SXNzdWUxNzc4MjU2OTY=","number":20559,"title":"Can't compile 5.x branch (Jackson 2.8.3 / 2.9.0-SNAPSHOT dep issue)","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"labels":[{"id":106454670,"node_id":"MDU6TGFiZWwxMDY0NTQ2NzA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Build","name":":Delivery/Build","color":"0e8a16","default":false,"description":"Build or test infrastructure"},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2016-09-19T16:03:01Z","updated_at":"2020-11-11T21:42:48Z","closed_at":"2016-09-19T22:12:55Z","author_association":"MEMBER","active_lock_reason":null,"body":"I tried to clean my `~/.m2` and `~/.gradle/caches` dirs before creating this issue.\n\nOn a fresh `5.x` branch, when running `gradle install` it fails in `ingest-geoip` plugin with:\n\n```\n:plugins:ingest-geoip:install FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':plugins:ingest-geoip:install'.\n> Could not publish configuration 'archives'\n   > Could not resolve all dependencies for configuration ':plugins:ingest-geoip:_transitive_com.maxmind.db:maxmind-db:1.2.1'.\n      > Could not find com.fasterxml.jackson.core:jackson-core:2.8.3-SNAPSHOT.\n        Searched in the following locations:\n            https://repo1.maven.org/maven2/com/fasterxml/jackson/core/jackson-core/2.8.3-SNAPSHOT/maven-metadata.xml\n            https://repo1.maven.org/maven2/com/fasterxml/jackson/core/jackson-core/2.8.3-SNAPSHOT/jackson-core-2.8.3-SNAPSHOT.pom\n            https://repo1.maven.org/maven2/com/fasterxml/jackson/core/jackson-core/2.8.3-SNAPSHOT/jackson-core-2.8.3-SNAPSHOT.jar\n            http://oss.sonatype.org/content/repositories/snapshots/com/fasterxml/jackson/core/jackson-core/2.8.3-SNAPSHOT/maven-metadata.xml\n            http://oss.sonatype.org/content/repositories/snapshots/com/fasterxml/jackson/core/jackson-core/2.8.3-SNAPSHOT/jackson-core-2.8.3-SNAPSHOT.pom\n            http://oss.sonatype.org/content/repositories/snapshots/com/fasterxml/jackson/core/jackson-core/2.8.3-SNAPSHOT/jackson-core-2.8.3-SNAPSHOT.jar\n        Required by:\n            org.elasticsearch.plugin:ingest-geoip:5.1.0-SNAPSHOT > com.maxmind.db:maxmind-db:1.2.1 > com.fasterxml.jackson.core:jackson-databind:2.9.0-SNAPSHOT\n```\n\nI tried then to run `gradle dependencies` in `plugins/ingest-geoip` dir and I'm getting:\n\n```\n=======================================\nElasticsearch Build Hamster says Hello!\n=======================================\n  Gradle Version        : 2.13\n  OS Info               : Mac OS X 10.11.6 (x86_64)\n  JDK Version           : Oracle Corporation 1.8.0_60 [Java HotSpot(TM) 64-Bit Server VM 25.60-b23]\n  JAVA_HOME             : /Library/Java/JavaVirtualMachines/jdk1.8.0_60.jdk/Contents/Home\n:plugins:ingest-geoip:dependencies\n\n------------------------------------------------------------\nProject :plugins:ingest-geoip - Elasticsearch subproject :plugins:ingest-geoip\n------------------------------------------------------------\n\n_plugin_:plugins:ingest-geoip\n\\--- project :plugins:ingest-geoip (*)\n\n_transitive_com.fasterxml.jackson.core:jackson-annotations:2.7.1\n\\--- com.fasterxml.jackson.core:jackson-annotations:2.7.1\n\n_transitive_com.fasterxml.jackson.core:jackson-databind:2.7.1\nDownload https://repo1.maven.org/maven2/com/fasterxml/jackson/core/jackson-annotations/2.7.0/jackson-annotations-2.7.0.pom\n\\--- com.fasterxml.jackson.core:jackson-databind:2.7.1\n     +--- com.fasterxml.jackson.core:jackson-annotations:2.7.0\n     \\--- com.fasterxml.jackson.core:jackson-core:2.7.1\n\n_transitive_com.maxmind.db:maxmind-db:1.2.1\n\\--- com.maxmind.db:maxmind-db:1.2.1\n     \\--- com.fasterxml.jackson.core:jackson-databind:[2.7.0,) -> 2.9.0-SNAPSHOT\n          +--- com.fasterxml.jackson.core:jackson-annotations:2.8.0\n          \\--- com.fasterxml.jackson.core:jackson-core:2.8.3-SNAPSHOT FAILED\n\n_transitive_com.maxmind.geoip2:geoip2:2.7.0\nDownload https://repo1.maven.org/maven2/com/fasterxml/jackson/core/jackson-databind/2.7.3/jackson-databind-2.7.3.pom\n\\--- com.maxmind.geoip2:geoip2:2.7.0\n     +--- com.maxmind.db:maxmind-db:1.2.1\n     |    \\--- com.fasterxml.jackson.core:jackson-databind:[2.7.0,) -> 2.9.0-SNAPSHOT\n     |         +--- com.fasterxml.jackson.core:jackson-annotations:2.8.0\n     |         \\--- com.fasterxml.jackson.core:jackson-core:2.8.3-SNAPSHOT FAILED\n     +--- com.google.http-client:google-http-client:1.21.0\n     |    +--- com.google.code.findbugs:jsr305:1.3.9\n     |    \\--- org.apache.httpcomponents:httpclient:4.0.1\n     |         +--- org.apache.httpcomponents:httpcore:4.0.1\n     |         +--- commons-logging:commons-logging:1.1.1\n     |         \\--- commons-codec:commons-codec:1.3\n     \\--- com.fasterxml.jackson.core:jackson-databind:2.7.3 -> 2.9.0-SNAPSHOT (*)\n```\n\nShould I clean anything else? I don't understand why Gradle tries to resolve to Jackson 2.9.0 instead of using 2.8.1 which is by example asked by elasticsearch:\n\n```\n+--- org.elasticsearch:elasticsearch:5.1.0-SNAPSHOT -> project :core\n|    +--- org.apache.lucene:lucene-core:6.2.0\n|    +--- org.apache.lucene:lucene-analyzers-common:6.2.0\n|    +--- org.apache.lucene:lucene-backward-codecs:6.2.0\n|    +--- org.apache.lucene:lucene-grouping:6.2.0\n|    +--- org.apache.lucene:lucene-highlighter:6.2.0\n|    +--- org.apache.lucene:lucene-join:6.2.0\n|    +--- org.apache.lucene:lucene-memory:6.2.0\n|    +--- org.apache.lucene:lucene-misc:6.2.0\n|    +--- org.apache.lucene:lucene-queries:6.2.0\n|    +--- org.apache.lucene:lucene-queryparser:6.2.0\n|    +--- org.apache.lucene:lucene-sandbox:6.2.0\n|    +--- org.apache.lucene:lucene-spatial:6.2.0\n|    +--- org.apache.lucene:lucene-spatial-extras:6.2.0\n|    +--- org.apache.lucene:lucene-spatial3d:6.2.0\n|    +--- org.apache.lucene:lucene-suggest:6.2.0\n|    +--- org.elasticsearch:securesm:1.1\n|    +--- net.sf.jopt-simple:jopt-simple:5.0.2\n|    +--- com.carrotsearch:hppc:0.7.1\n|    +--- joda-time:joda-time:2.9.4\n|    +--- org.joda:joda-convert:1.2\n|    +--- org.yaml:snakeyaml:1.15\n|    +--- com.fasterxml.jackson.core:jackson-core:2.8.1\n|    +--- com.fasterxml.jackson.dataformat:jackson-dataformat-smile:2.8.1\n|    +--- com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:2.8.1\n|    +--- com.fasterxml.jackson.dataformat:jackson-dataformat-cbor:2.8.1\n|    +--- com.tdunning:t-digest:3.0\n|    +--- org.hdrhistogram:HdrHistogram:2.1.6\n|    +--- org.locationtech.spatial4j:spatial4j:0.6\n|    +--- com.vividsolutions:jts:1.13\n|    +--- org.apache.logging.log4j:log4j-api:2.6.2\n|    +--- org.apache.logging.log4j:log4j-core:2.6.2\n|    +--- org.apache.logging.log4j:log4j-1.2-api:2.6.2\n|    \\--- net.java.dev.jna:jna:4.2.2\n+--- org.locationtech.spatial4j:spatial4j:0.6\n+--- com.vividsolutions:jts:1.13\n+--- org.apache.logging.log4j:log4j-api:2.6.2\n+--- org.apache.logging.log4j:log4j-core:2.6.2\n\\--- net.java.dev.jna:jna:4.2.2\n```\n\nAny idea of what is happening?\n","closed_by":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"performed_via_github_app":null}