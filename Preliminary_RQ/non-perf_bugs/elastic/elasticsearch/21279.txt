{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/21279","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21279/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21279/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21279/events","html_url":"https://github.com/elastic/elasticsearch/issues/21279","id":186874800,"node_id":"MDU6SXNzdWUxODY4NzQ4MDA=","number":21279,"title":"Elasticsearch response time - strange values","user":{"login":"cechovsky","id":2878125,"node_id":"MDQ6VXNlcjI4NzgxMjU=","avatar_url":"https://avatars1.githubusercontent.com/u/2878125?v=4","gravatar_id":"","url":"https://api.github.com/users/cechovsky","html_url":"https://github.com/cechovsky","followers_url":"https://api.github.com/users/cechovsky/followers","following_url":"https://api.github.com/users/cechovsky/following{/other_user}","gists_url":"https://api.github.com/users/cechovsky/gists{/gist_id}","starred_url":"https://api.github.com/users/cechovsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cechovsky/subscriptions","organizations_url":"https://api.github.com/users/cechovsky/orgs","repos_url":"https://api.github.com/users/cechovsky/repos","events_url":"https://api.github.com/users/cechovsky/events{/privacy}","received_events_url":"https://api.github.com/users/cechovsky/received_events","type":"User","site_admin":false},"labels":[{"id":146832564,"node_id":"MDU6TGFiZWwxNDY4MzI1NjQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Search/Search","name":":Search/Search","color":"0e8a16","default":false,"description":"Search-related issues that do not fall into other categories"},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2016-11-02T17:55:14Z","updated_at":"2016-11-04T16:11:36Z","closed_at":"2016-11-04T16:11:36Z","author_association":"NONE","active_lock_reason":null,"body":"I'm querying simple Elasticsearch index with house numbers data.\r\n\r\n```\r\n\".house-numbers\": {\r\n    \"mappings\": {\r\n      \"house-number\": {\r\n        \"properties\": {\r\n          \"id\": {\r\n            \"type\": \"keyword\"\r\n          },\r\n          \"value\": {\r\n            \"type\": \"text\",\r\n            \"index_options\": \"docs\"\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n```\r\nThen I'm querying data like POST http request\r\n\r\nRequest url\r\n\r\nhttp://localhost:9200/.house-numbers/housenumber/_search\r\nHeaders:\r\n\r\nContent-Type: text/plain\r\nContent-Length: 55\r\nAccept: */*\r\nAccept-Encoding: gzip, deflate, br\r\nRequest body:\r\n\r\n```\r\n{\r\n  \"size\": 30,\r\n  \"query\": {\r\n    \"match\": {\r\n      \"value\": {\r\n        \"query\": \"2 3\"\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\nThe request returns data in 10ms - 30ms and everything works fine. The elasticsearch response parameter 'took' is small in all cases 3-5ms.\r\n\r\nWhen I change size in the request body to \"size\": 35 the response time has suddenly 500ms. The 'took' parameter from Elasticsearch is the same. There are no special characters and the size of the response is very similar.\r\n\r\nI tried many clients NEST, Postman, Fiddler to do these requests, every client has the same behaviour.\r\n\r\nSetting of my elasticsearch contains only\r\n\r\nhttp.compression : true\r\nhttp.compression_level : 9\r\nSetting of my jvm\r\n\r\n```\r\n\"jvm\": {\r\n  \"timestamp\": 1478108615141,\r\n  \"uptime_in_millis\": 17150141,\r\n  \"mem\": {\r\n    \"heap_used_in_bytes\": 1384307624,\r\n    \"heap_used_percent\": 66,\r\n    \"heap_committed_in_bytes\": 2077753344,\r\n    \"heap_max_in_bytes\": 2077753344,\r\n    \"non_heap_used_in_bytes\": 96403904,\r\n    \"non_heap_committed_in_bytes\": 101502976,\r\n    \"pools\": {\r\n      \"young\": {\r\n        \"used_in_bytes\": 324358632,\r\n        \"max_in_bytes\": 558432256,\r\n        \"peak_used_in_bytes\": 558432256,\r\n        \"peak_max_in_bytes\": 558432256\r\n      },\r\n      \"survivor\": {\r\n        \"used_in_bytes\": 69730304,\r\n        \"max_in_bytes\": 69730304,\r\n        \"peak_used_in_bytes\": 69730304,\r\n        \"peak_max_in_bytes\": 69730304\r\n      },\r\n      \"old\": {\r\n        \"used_in_bytes\": 990220848,\r\n        \"max_in_bytes\": 1449590784,\r\n        \"peak_used_in_bytes\": 1190046816,\r\n        \"peak_max_in_bytes\": 1449590784\r\n      }...\r\n```\r\nI tried different versions of elasticsearch I tried different settings - turn off http.compression, change compression_level I tried another hosts for elasticsearch\r\n\r\nAm I doing something wrong or is it some type of bug in elasticsearch.","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}