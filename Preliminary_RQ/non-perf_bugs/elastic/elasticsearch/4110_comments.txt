[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/27886783","html_url":"https://github.com/elastic/elasticsearch/issues/4110#issuecomment-27886783","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4110","id":27886783,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODg2Nzgz","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2013-11-06T16:12:09Z","updated_at":"2013-11-06T16:12:09Z","author_association":"MEMBER","body":"Hey @roytmana thanks again for reporting this. I'm afraid I need a recreation though in order to understand what happens in your case. I really cannot reproduce what you are describing.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/27887397","html_url":"https://github.com/elastic/elasticsearch/issues/4110#issuecomment-27887397","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4110","id":27887397,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODg3Mzk3","user":{"login":"roytmana","id":2524911,"node_id":"MDQ6VXNlcjI1MjQ5MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2524911?v=4","gravatar_id":"","url":"https://api.github.com/users/roytmana","html_url":"https://github.com/roytmana","followers_url":"https://api.github.com/users/roytmana/followers","following_url":"https://api.github.com/users/roytmana/following{/other_user}","gists_url":"https://api.github.com/users/roytmana/gists{/gist_id}","starred_url":"https://api.github.com/users/roytmana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roytmana/subscriptions","organizations_url":"https://api.github.com/users/roytmana/orgs","repos_url":"https://api.github.com/users/roytmana/repos","events_url":"https://api.github.com/users/roytmana/events{/privacy}","received_events_url":"https://api.github.com/users/roytmana/received_events","type":"User","site_admin":false},"created_at":"2013-11-06T16:18:28Z","updated_at":"2013-11-06T16:18:28Z","author_association":"NONE","body":"can you provide any suggestions on what may be affecting highlighting to make it easier to recreate?\nsize of data, number of highlighted fields, query, analysis chain....\nit is hard to reproduce trying blindly as I am not familiar with the algorithm and lucene internals\n\ndid anything in my mapping looked suspicious to you?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/27888873","html_url":"https://github.com/elastic/elasticsearch/issues/4110#issuecomment-27888873","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4110","id":27888873,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODg4ODcz","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2013-11-06T16:33:38Z","updated_at":"2013-11-06T16:33:38Z","author_association":"MEMBER","body":"I don't really know, the issue you are describing seems related to #4103 , which is now fixed. By the way the fix is included in 1.0.0.beta1 which is worth to check out.\n\nIf you still see this behaviour I wonder why you cannot reproduce it, that seems totally weird to me. I just tested some more comparing snippets obtained from plain and postings highlighter, and I didn't see anything strange.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/27889692","html_url":"https://github.com/elastic/elasticsearch/issues/4110#issuecomment-27889692","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4110","id":27889692,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODg5Njky","user":{"login":"roytmana","id":2524911,"node_id":"MDQ6VXNlcjI1MjQ5MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2524911?v=4","gravatar_id":"","url":"https://api.github.com/users/roytmana","html_url":"https://github.com/roytmana","followers_url":"https://api.github.com/users/roytmana/followers","following_url":"https://api.github.com/users/roytmana/following{/other_user}","gists_url":"https://api.github.com/users/roytmana/gists{/gist_id}","starred_url":"https://api.github.com/users/roytmana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roytmana/subscriptions","organizations_url":"https://api.github.com/users/roytmana/orgs","repos_url":"https://api.github.com/users/roytmana/repos","events_url":"https://api.github.com/users/roytmana/events{/privacy}","received_events_url":"https://api.github.com/users/roytmana/received_events","type":"User","site_admin":false},"created_at":"2013-11-06T16:41:16Z","updated_at":"2013-11-06T16:41:38Z","author_association":"NONE","body":"ok, thanks i will keep digging. I will try to load my real index with just\na few records of fake data see if it'll do it\nI may need to lay it off for few days - a real crunch at work is coming\n\nI am building from 0.9 branch as I need to start finalizing the app in few\nmonths. not sure if I can afford using 1.0 beta\nis it worth while to test highlighting with 1.0beta or it should be\nidentical in both?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/27891675","html_url":"https://github.com/elastic/elasticsearch/issues/4110#issuecomment-27891675","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4110","id":27891675,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODkxNjc1","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2013-11-06T17:00:28Z","updated_at":"2013-11-06T17:00:50Z","author_association":"MEMBER","body":"0.90 and 1.0 should be identical for what concerns highlighting, the difference is that with 1.0.0.beta1 you'd work with a released version rather than a snapshot, as the fix for #4103 is not included in 0.90.6.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/27920921","html_url":"https://github.com/elastic/elasticsearch/issues/4110#issuecomment-27920921","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4110","id":27920921,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTIwOTIx","user":{"login":"roytmana","id":2524911,"node_id":"MDQ6VXNlcjI1MjQ5MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2524911?v=4","gravatar_id":"","url":"https://api.github.com/users/roytmana","html_url":"https://github.com/roytmana","followers_url":"https://api.github.com/users/roytmana/followers","following_url":"https://api.github.com/users/roytmana/following{/other_user}","gists_url":"https://api.github.com/users/roytmana/gists{/gist_id}","starred_url":"https://api.github.com/users/roytmana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roytmana/subscriptions","organizations_url":"https://api.github.com/users/roytmana/orgs","repos_url":"https://api.github.com/users/roytmana/repos","events_url":"https://api.github.com/users/roytmana/events{/privacy}","received_events_url":"https://api.github.com/users/roytmana/received_events","type":"User","site_admin":false},"created_at":"2013-11-06T22:36:00Z","updated_at":"2013-11-06T22:36:00Z","author_association":"NONE","body":"Luca here is gist with working recreation\ni only loaded two documents and stripped 99% of the fields but it shows highlighting issue\n\nhttps://gist.github.com/roytmana/5c12896420629fd3b090\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/27968200","html_url":"https://github.com/elastic/elasticsearch/issues/4110#issuecomment-27968200","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4110","id":27968200,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTY4MjAw","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2013-11-07T14:23:30Z","updated_at":"2013-11-07T14:23:30Z","author_association":"MEMBER","body":"Hi @roytmana thanks for your gist. I'm having problems recreating the index locally and your mapping is quite big, thus it's hard to understand what is going wrong.\n\nAnyways, you defined the field `award.type.name` in your mapping, but it has no value in your documents, as the field used in your documents is called `award.name`. Same for `activity` which in your mapping is child of `award` while in your documents is a top level field.\n\nIt seems to me that you are making highlighting using the postings highlighter against fields that are properly configured in the mapping but never have a value in your documents, which is why you don't get any error back forcing the highlighter type \"postings\", but at the same time you don't get any snippets back.\n\nDoes this make sense to you? \nIf you still have highlighting issues can you try and trim down your mapping to make sure everything is fine there?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/27968752","html_url":"https://github.com/elastic/elasticsearch/issues/4110#issuecomment-27968752","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4110","id":27968752,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTY4NzUy","user":{"login":"roytmana","id":2524911,"node_id":"MDQ6VXNlcjI1MjQ5MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2524911?v=4","gravatar_id":"","url":"https://api.github.com/users/roytmana","html_url":"https://github.com/roytmana","followers_url":"https://api.github.com/users/roytmana/followers","following_url":"https://api.github.com/users/roytmana/following{/other_user}","gists_url":"https://api.github.com/users/roytmana/gists{/gist_id}","starred_url":"https://api.github.com/users/roytmana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roytmana/subscriptions","organizations_url":"https://api.github.com/users/roytmana/orgs","repos_url":"https://api.github.com/users/roytmana/repos","events_url":"https://api.github.com/users/roytmana/events{/privacy}","received_events_url":"https://api.github.com/users/roytmana/received_events","type":"User","site_admin":false},"created_at":"2013-11-07T14:28:07Z","updated_at":"2013-11-07T14:28:07Z","author_association":"NONE","body":"I hand-edited the data so I may have screwed it up. let me doublecheck\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/27971604","html_url":"https://github.com/elastic/elasticsearch/issues/4110#issuecomment-27971604","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4110","id":27971604,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTcxNjA0","user":{"login":"roytmana","id":2524911,"node_id":"MDQ6VXNlcjI1MjQ5MTE=","avatar_url":"https://avatars0.githubusercontent.com/u/2524911?v=4","gravatar_id":"","url":"https://api.github.com/users/roytmana","html_url":"https://github.com/roytmana","followers_url":"https://api.github.com/users/roytmana/followers","following_url":"https://api.github.com/users/roytmana/following{/other_user}","gists_url":"https://api.github.com/users/roytmana/gists{/gist_id}","starred_url":"https://api.github.com/users/roytmana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roytmana/subscriptions","organizations_url":"https://api.github.com/users/roytmana/orgs","repos_url":"https://api.github.com/users/roytmana/repos","events_url":"https://api.github.com/users/roytmana/events{/privacy}","received_events_url":"https://api.github.com/users/roytmana/received_events","type":"User","site_admin":false},"created_at":"2013-11-07T14:53:36Z","updated_at":"2013-11-07T14:55:13Z","author_association":"NONE","body":"but why would the plain highlighter work if the field has no data?\n\ni did screwed up activity while editing but not type. Here is formatted payload from the bulk:\n\n```\n{\n   \"award\": {\n      \"id\": 100,\n      \"type\": {\n         \"id\": 1000,\n         \"name\": \"BPA Call\"\n      }\n   },\n   \"activity\": {\n      \"code\": \"N02\",\n      \"name\": \"Non Research and Development\"\n   }\n}\n\n{\n   \"award\": {\n      \"id\": 101,\n      \"type\": {\n         \"id\": 1000,\n         \"name\": \"BPA Call\"\n      }\n   },\n   \"attr\": {\n      \"fpds8a\": {\n         \"id\": \"6640\",\n         \"name\": \"LABORATORY EQUIPMENT AND SUPPLIES\"\n      },\n      \"fpds6m\": \"105027         SRV-PCR\"\n   }\n}\n```\n\nI will fix Activity in the bulk to be under award but it did not matter as the query (and highlight) should have been against  award.\n\nWhat problems did you have with creating the index? The mapping is big but the small recreation i posted before did not show the issue.\n\nI can't exactly test curl itself because on windows it does not work with command line payloads but I copied mapping directly from the file which I execute with curl. Would you rather get mapping and data as files so I can test them before sending them to you? Can I attache them somewhere? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/27978248","html_url":"https://github.com/elastic/elasticsearch/issues/4110#issuecomment-27978248","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/4110","id":27978248,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTc4MjQ4","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2013-11-07T16:00:30Z","updated_at":"2013-11-07T16:00:30Z","author_association":"MEMBER","body":"Right, I was finally able to trim down your mapping and get to a small recreation, I just opened another issue (#4116) that is more specific to the problem as this one seems confusing to me. The problem is related to using `just_name` in the mapping. A fix is on its way too. \n\nThanks a lot for your help @roytmana !\n","performed_via_github_app":null}]