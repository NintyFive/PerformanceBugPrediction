[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/696191439","html_url":"https://github.com/elastic/elasticsearch/issues/62712#issuecomment-696191439","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62712","id":696191439,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjE5MTQzOQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-09-21T15:30:08Z","updated_at":"2020-09-21T15:30:08Z","author_association":"COLLABORATOR","body":"Pinging @elastic/ml-core (:ml/Transform)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/696193971","html_url":"https://github.com/elastic/elasticsearch/issues/62712#issuecomment-696193971","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62712","id":696193971,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjE5Mzk3MQ==","user":{"login":"mikeh-elastic","id":16882389,"node_id":"MDQ6VXNlcjE2ODgyMzg5","avatar_url":"https://avatars0.githubusercontent.com/u/16882389?v=4","gravatar_id":"","url":"https://api.github.com/users/mikeh-elastic","html_url":"https://github.com/mikeh-elastic","followers_url":"https://api.github.com/users/mikeh-elastic/followers","following_url":"https://api.github.com/users/mikeh-elastic/following{/other_user}","gists_url":"https://api.github.com/users/mikeh-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/mikeh-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikeh-elastic/subscriptions","organizations_url":"https://api.github.com/users/mikeh-elastic/orgs","repos_url":"https://api.github.com/users/mikeh-elastic/repos","events_url":"https://api.github.com/users/mikeh-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/mikeh-elastic/received_events","type":"User","site_admin":false},"created_at":"2020-09-21T15:32:07Z","updated_at":"2020-09-21T15:32:07Z","author_association":"NONE","body":"Once initial transform and data stream support is completed there will be the issue of updates to documents with rollover via ILM or other to also solve as per https://www.elastic.co/guide/en/elasticsearch/reference/7.9/use-a-data-stream.html#update-docs-in-a-data-stream-by-query","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/696575620","html_url":"https://github.com/elastic/elasticsearch/issues/62712#issuecomment-696575620","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62712","id":696575620,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjU3NTYyMA==","user":{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false},"created_at":"2020-09-22T08:15:07Z","updated_at":"2020-09-22T08:43:42Z","author_association":"CONTRIBUTOR","body":"@mikeh-elastic \r\n\r\nTransform supports data streams **as source** (this can be improved, see #58504), data stream **as destination** is by design problematic. Transform does *upserts*, meaning it overwrites documents, but a data stream is *append only*. The classical transform use case is building an entity centric index, a data stream output won't work by design.\r\n\r\nHowever there is 1 usecase that could work: If you have a `date_histogram` group_by configured with `@timestamp`, transform could in theory be append only. To make this work, checkpoints have to be aligned with bucket boundaries. This has been requested for other reasons(#61587). I formalized the request and added data stream output as a use case: #62746\r\n\r\nI am aware that updates are [possible](\r\nhttps://www.elastic.co/guide/en/elasticsearch/reference/7.9/use-a-data-stream.html#update-docs-in-a-data-stream-by-query), however this seems contradictory to me. I will try to get some clarification on that. It's technical possible to use this (let transform upsert by query), however this seems complex and error prone.\r\n\r\nI will change the title to reflect that we only talk about dest, not data streams in general.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/696578241","html_url":"https://github.com/elastic/elasticsearch/issues/62712#issuecomment-696578241","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62712","id":696578241,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjU3ODI0MQ==","user":{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false},"created_at":"2020-09-22T08:20:59Z","updated_at":"2020-09-22T08:20:59Z","author_association":"CONTRIBUTOR","body":"> Now that data streams are released users will expect to be able to run transforms against them.\r\n\r\n@mikeh-elastic IMHO this is possible, you can run transform _against_ a data stream, you can just not _write_ the output to a data stream.\r\n\r\nIn order to avoid confusion for readers of this issue, can you please edit your 1st post?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/698511723","html_url":"https://github.com/elastic/elasticsearch/issues/62712#issuecomment-698511723","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62712","id":698511723,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODUxMTcyMw==","user":{"login":"mikeh-elastic","id":16882389,"node_id":"MDQ6VXNlcjE2ODgyMzg5","avatar_url":"https://avatars0.githubusercontent.com/u/16882389?v=4","gravatar_id":"","url":"https://api.github.com/users/mikeh-elastic","html_url":"https://github.com/mikeh-elastic","followers_url":"https://api.github.com/users/mikeh-elastic/followers","following_url":"https://api.github.com/users/mikeh-elastic/following{/other_user}","gists_url":"https://api.github.com/users/mikeh-elastic/gists{/gist_id}","starred_url":"https://api.github.com/users/mikeh-elastic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikeh-elastic/subscriptions","organizations_url":"https://api.github.com/users/mikeh-elastic/orgs","repos_url":"https://api.github.com/users/mikeh-elastic/repos","events_url":"https://api.github.com/users/mikeh-elastic/events{/privacy}","received_events_url":"https://api.github.com/users/mikeh-elastic/received_events","type":"User","site_admin":false},"created_at":"2020-09-24T18:27:07Z","updated_at":"2020-09-24T18:27:07Z","author_association":"NONE","body":"I have updated my initial post to clarify data stream as a destination for a transform is the request.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/701448655","html_url":"https://github.com/elastic/elasticsearch/issues/62712#issuecomment-701448655","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/62712","id":701448655,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMTQ0ODY1NQ==","user":{"login":"hendrikmuhs","id":7126422,"node_id":"MDQ6VXNlcjcxMjY0MjI=","avatar_url":"https://avatars3.githubusercontent.com/u/7126422?v=4","gravatar_id":"","url":"https://api.github.com/users/hendrikmuhs","html_url":"https://github.com/hendrikmuhs","followers_url":"https://api.github.com/users/hendrikmuhs/followers","following_url":"https://api.github.com/users/hendrikmuhs/following{/other_user}","gists_url":"https://api.github.com/users/hendrikmuhs/gists{/gist_id}","starred_url":"https://api.github.com/users/hendrikmuhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hendrikmuhs/subscriptions","organizations_url":"https://api.github.com/users/hendrikmuhs/orgs","repos_url":"https://api.github.com/users/hendrikmuhs/repos","events_url":"https://api.github.com/users/hendrikmuhs/events{/privacy}","received_events_url":"https://api.github.com/users/hendrikmuhs/received_events","type":"User","site_admin":false},"created_at":"2020-09-30T15:02:12Z","updated_at":"2020-09-30T15:02:12Z","author_association":"CONTRIBUTOR","body":"We discussed this issue in the team.\r\n\r\nData streams are designed for append only, however transform updates data in the destination. Updates require a delete and an insert, this not compatible with append only, therefore transform by design can not write into a data stream[1].\r\n\r\nAs a result of the discussion we added a note to the [documentation](https://www.elastic.co/guide/en/elasticsearch/reference/current/transform-limitations.html#transform-data-streams-destination).\r\n\r\n[1] We discussed the update by query approach, this would create a lot of complexity and although it is technically possible, we think data streams are and should be append only (similarly you could write directly to the backing indices)","performed_via_github_app":null}]