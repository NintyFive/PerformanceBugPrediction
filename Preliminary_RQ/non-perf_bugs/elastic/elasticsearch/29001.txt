{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/29001","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29001/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29001/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/29001/events","html_url":"https://github.com/elastic/elasticsearch/issues/29001","id":304571462,"node_id":"MDU6SXNzdWUzMDQ1NzE0NjI=","number":29001,"title":"[TEST] GeoIpProcessorFactoryTests fails handling files on Windows","user":{"login":"talevy","id":388837,"node_id":"MDQ6VXNlcjM4ODgzNw==","avatar_url":"https://avatars0.githubusercontent.com/u/388837?v=4","gravatar_id":"","url":"https://api.github.com/users/talevy","html_url":"https://github.com/talevy","followers_url":"https://api.github.com/users/talevy/followers","following_url":"https://api.github.com/users/talevy/following{/other_user}","gists_url":"https://api.github.com/users/talevy/gists{/gist_id}","starred_url":"https://api.github.com/users/talevy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talevy/subscriptions","organizations_url":"https://api.github.com/users/talevy/orgs","repos_url":"https://api.github.com/users/talevy/repos","events_url":"https://api.github.com/users/talevy/events{/privacy}","received_events_url":"https://api.github.com/users/talevy/received_events","type":"User","site_admin":false},"labels":[{"id":268963484,"node_id":"MDU6TGFiZWwyNjg5NjM0ODQ=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Ingest","name":":Core/Features/Ingest","color":"0e8a16","default":false,"description":"Execution or management of Ingest Pipelines"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":60445228,"node_id":"MDU6TGFiZWw2MDQ0NTIyOA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest","name":">test","color":"5319e7","default":false,"description":"Issues or PRs that are addressing/adding tests"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"},{"id":753477051,"node_id":"MDU6TGFiZWw3NTM0NzcwNTE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v6.3.0","name":"v6.3.0","color":"DDDDDD","default":false,"description":null},{"id":1223177445,"node_id":"MDU6TGFiZWwxMjIzMTc3NDQ1","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v7.0.0-beta1","name":"v7.0.0-beta1","color":"dddddd","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"assignees":[{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false}],"milestone":null,"comments":6,"created_at":"2018-03-12T23:02:49Z","updated_at":"2019-02-07T10:34:45Z","closed_at":"2018-03-13T08:10:41Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"GeoIP cannot clean up the database files because they are still being used by another test?\r\n\r\nbuild failure: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob-windows-compatibility/1368/console\r\n\r\n```\r\n20:49:52   1> [2018-03-12T21:49:49,082][INFO ][o.e.i.g.GeoIpProcessorFactoryTests] [testBuildWithCountryDbAndAsnFields]: before test\r\n20:49:52 \r\n20:49:52   1> [2018-03-12T21:49:49,083][INFO ][o.e.i.g.GeoIpProcessorFactoryTests] [testBuildWithCountryDbAndAsnFields]: after test\r\n20:49:52 \r\n20:49:52 ERROR   0.00s J1 | GeoIpProcessorFactoryTests (suite) <<< FAILURES!\r\n20:49:52 \r\n20:49:52   2> NOTE: All tests run in this JVM: [GeoIpProcessorFactoryTests]\r\n20:49:52 \r\n20:49:52    > Throwable #1: java.io.IOException: Could not remove the following files (in the order of attempts):\r\n20:49:52    >    C:\\Users\\jenkins\\workspace\\elastic+elasticsearch+master+multijob-windows-compatibility\\plugins\\ingest-geoip\\build\\testrun\\test\\J1\\temp\\org.elasticsearch.ingest.geoip.GeoIpProcessorFactoryTests_A72F0DB2EDA125D3-001\\tempDir-002\\ingest-geoip\\GeoLite2-ASN.mmdb: java.nio.file.FileSystemException: C:\\Users\\jenkins\\workspace\\elastic+elasticsearch+master+multijob-windows-compatibility\\plugins\\ingest-geoip\\build\\testrun\\test\\J1\\temp\\org.elasticsearch.ingest.geoip.GeoIpProcessorFactoryTests_A72F0DB2EDA125D3-001\\tempDir-002\\ingest-geoip\\GeoLite2-ASN.mmdb: The process cannot access the file because it is being used by another process.\r\n20:49:52    >    C:\\Users\\jenkins\\workspace\\elastic+elasticsearch+master+multijob-windows-compatibility\\plugins\\ingest-geoip\\build\\testrun\\test\\J1\\temp\\org.elasticsearch.ingest.geoip.GeoIpProcessorFactoryTests_A72F0DB2EDA125D3-001\\tempDir-002\\ingest-geoip\\GeoLite2-City.mmdb: java.nio.file.FileSystemException: C:\\Users\\jenkins\\workspace\\elastic+elasticsearch+master+multijob-windows-compatibility\\plugins\\ingest-geoip\\build\\testrun\\test\\J1\\temp\\org.elasticsearch.ingest.geoip.GeoIpProcessorFactoryTests_A72F0DB2EDA125D3-001\\tempDir-002\\ingest-geoip\\GeoLite2-City.mmdb: The process cannot access the file because it is being used by another process.\r\n20:49:52    >    C:\\Users\\jenkins\\workspace\\elastic+elasticsearch+master+multijob-windows-compatibility\\plugins\\ingest-geoip\\build\\testrun\\test\\J1\\temp\\org.elasticsearch.ingest.geoip.GeoIpProcessorFactoryTests_A72F0DB2EDA125D3-001\\tempDir-002\\ingest-geoip\\GeoLite2-Country.mmdb: java.nio.file.FileSystemException: C:\\Users\\jenkins\\workspace\\elastic+elasticsearch+master+multijob-windows-compatibility\\plugins\\ingest-geoip\\build\\testrun\\test\\J1\\temp\\org.elasticsearch.ingest.geoip.GeoIpProcessorFactoryTests_A72F0DB2EDA125D3-001\\tempDir-002\\ingest-geoip\\GeoLite2-Country.mmdb: The process cannot access the file because it is being used by another process.\r\n20:49:52    >    C:\\Users\\jenkins\\workspace\\elastic+elasticsearch+master+multijob-windows-compatibility\\plugins\\ingest-geoip\\build\\testrun\\test\\J1\\temp\\org.elasticsearch.ingest.geoip.GeoIpProcessorFactoryTests_A72F0DB2EDA125D3-001\\tempDir-002\\ingest-geoip: java.nio.file.DirectoryNotEmptyException: C:\\Users\\jenkins\\workspace\\elastic+elasticsearch+master+multijob-windows-compatibility\\plugins\\ingest-geoip\\build\\testrun\\test\\J1\\temp\\org.elasticsearch.ingest.geoip.GeoIpProcessorFactoryTests_A72F0DB2EDA125D3-001\\tempDir-002\\ingest-geoip\r\n20:49:52    >    C:\\Users\\jenkins\\workspace\\elastic+elasticsearch+master+multijob-windows-compatibility\\plugins\\ingest-geoip\\build\\testrun\\test\\J1\\temp\\org.elasticsearch.ingest.geoip.GeoIpProcessorFactoryTests_A72F0DB2EDA125D3-001\\tempDir-002: java.nio.file.DirectoryNotEmptyException: C:\\Users\\jenkins\\workspace\\elastic+elasticsearch+master+multijob-windows-compatibility\\plugins\\ingest-geoip\\build\\testrun\\test\\J1\\temp\\org.elasticsearch.ingest.geoip.GeoIpProcessorFactoryTests_A72F0DB2EDA125D3-001\\tempDir-002\r\n20:49:52    >    C:\\Users\\jenkins\\workspace\\elastic+elasticsearch+master+multijob-windows-compatibility\\plugins\\ingest-geoip\\build\\testrun\\test\\J1\\temp\\org.elasticsearch.ingest.geoip.GeoIpProcessorFactoryTests_A72F0DB2EDA125D3-001: java.nio.file.DirectoryNotEmptyException: C:\\Users\\jenkins\\workspace\\elastic+elasticsearch+master+multijob-windows-compatibility\\plugins\\ingest-geoip\\build\\testrun\\test\\J1\\temp\\org.elasticsearch.ingest.geoip.GeoIpProcessorFactoryTests_A72F0DB2EDA125D3-001\r\n20:49:52    > \tat __randomizedtesting.SeedInfo.seed([A72F0DB2EDA125D3]:0)\r\n20:49:52    > \tat org.apache.lucene.util.IOUtils.rm(IOUtils.java:329)\r\n20:49:52    > \tat java.lang.Thread.run(Thread.java:748)\r\n20:49:52 Completed [2/3] on J1 in 6.90s, 12 tests, 1 error <<< FAILURES!\r\n20:49:52 \r\n20:49:55 Suite: org.elasticsearch.ingest.geoip.GeoIpProcessorTests\r\n20:49:55 Completed [3/3] on J2 in 10.06s, 12 tests\r\n20:49:55 \r\n20:49:55 Tests with failures:\r\n20:49:55   - org.elasticsearch.ingest.geoip.GeoIpProcessorFactoryTests (suite)```","closed_by":{"login":"danielmitterdorfer","id":1699576,"node_id":"MDQ6VXNlcjE2OTk1NzY=","avatar_url":"https://avatars3.githubusercontent.com/u/1699576?v=4","gravatar_id":"","url":"https://api.github.com/users/danielmitterdorfer","html_url":"https://github.com/danielmitterdorfer","followers_url":"https://api.github.com/users/danielmitterdorfer/followers","following_url":"https://api.github.com/users/danielmitterdorfer/following{/other_user}","gists_url":"https://api.github.com/users/danielmitterdorfer/gists{/gist_id}","starred_url":"https://api.github.com/users/danielmitterdorfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielmitterdorfer/subscriptions","organizations_url":"https://api.github.com/users/danielmitterdorfer/orgs","repos_url":"https://api.github.com/users/danielmitterdorfer/repos","events_url":"https://api.github.com/users/danielmitterdorfer/events{/privacy}","received_events_url":"https://api.github.com/users/danielmitterdorfer/received_events","type":"User","site_admin":false},"performed_via_github_app":null}