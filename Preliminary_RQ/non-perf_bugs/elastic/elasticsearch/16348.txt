{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/16348","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16348/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16348/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16348/events","html_url":"https://github.com/elastic/elasticsearch/issues/16348","id":130424170,"node_id":"MDU6SXNzdWUxMzA0MjQxNzA=","number":16348,"title":"Dynamic mapping does not work with more than one type","user":{"login":"AColmant","id":15942867,"node_id":"MDQ6VXNlcjE1OTQyODY3","avatar_url":"https://avatars0.githubusercontent.com/u/15942867?v=4","gravatar_id":"","url":"https://api.github.com/users/AColmant","html_url":"https://github.com/AColmant","followers_url":"https://api.github.com/users/AColmant/followers","following_url":"https://api.github.com/users/AColmant/following{/other_user}","gists_url":"https://api.github.com/users/AColmant/gists{/gist_id}","starred_url":"https://api.github.com/users/AColmant/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AColmant/subscriptions","organizations_url":"https://api.github.com/users/AColmant/orgs","repos_url":"https://api.github.com/users/AColmant/repos","events_url":"https://api.github.com/users/AColmant/events{/privacy}","received_events_url":"https://api.github.com/users/AColmant/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2016-02-01T17:20:38Z","updated_at":"2016-02-02T16:16:47Z","closed_at":"2016-02-02T11:38:35Z","author_association":"NONE","active_lock_reason":null,"body":"Hello guys,\n\nThis config worked in ES v1.7.2 but since i tried to use the configuration in ES v2.1 I have a error... So :\n\nI use this mapping :\n\n``` json\nPUT /my_index/_mapping/_default_\n{\n    \"_default_\": {\n        \"dynamic_date_formats\" : [\n            \"yyyy-MM-dd HH:mm:ss\",\n            \"yyyy-MM-dd HH:mm:ss||yyyyMMdd-HH:mm:ss||yyyyMMdd-HH:mm:ss.SSS\"\n        ],\n        \"dynamic_templates\": [\n            {\n                \"template_1\" : {\n                    \"match\" : \"*\",\n                    \"match_mapping_type\" : \"string\",\n                    \"mapping\" : {\n                        \"type\" : \"string\",\n                        \"index\" : \"not_analyzed\"\n                    }\n                }\n            }, {\n                \"template_2\" : {\n                    \"match\" : \"*@expire\",\n                    \"match_mapping_type\" : \"date\",\n                    \"mapping\" : {\n                        \"type\" : \"string\",\n                        \"index\" : \"not_analyzed\"\n                    }\n                }\n            }\n        ]\n    }\n}\n```\n\nAnd after a first type insert, I get the expected result. But if I try to insert a second or third type like :\n\n``` json\nPOST /my_index/my_type\n{\n   \"source\":\"my_source\",\n   \"country\":\"my_country\",\n   \"company\":\"my_company\",\n   \"server\":\"my_server\",\n   \"@timestamp\":\"2016-01-01 00:07:10\"\n}\n```\n\nResult return is :\n\n``` json\n{\n   \"error\": {\n      \"root_cause\": [\n         {\n            \"type\": \"mapper_parsing_exception\",\n            \"reason\": \"failed to parse [@timestamp]\"\n         }\n      ],\n      \"type\": \"mapper_parsing_exception\",\n      \"reason\": \"failed to parse [@timestamp]\",\n      \"caused_by\": {\n         \"type\": \"illegal_argument_exception\",\n         \"reason\": \"Invalid format: \\\"2016-01-01 00:07:10\\\" is malformed at \\\" 00:07:10\\\"\"\n      }\n   },\n   \"status\": 400\n}\n```\n\nIf I try to insert it on the first type, this is working... Perhaps bug, or just my mistake but i do not understand.\n\nFYI: if i swap the order of the type inserted, it is always the first that it work correctly.\n","closed_by":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"performed_via_github_app":null}