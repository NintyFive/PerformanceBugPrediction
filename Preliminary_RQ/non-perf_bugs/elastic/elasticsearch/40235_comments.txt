[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/474651567","html_url":"https://github.com/elastic/elasticsearch/issues/40235#issuecomment-474651567","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40235","id":474651567,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDY1MTU2Nw==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2019-03-20T01:48:01Z","updated_at":"2019-03-20T01:48:01Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-features","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/474674675","html_url":"https://github.com/elastic/elasticsearch/issues/40235#issuecomment-474674675","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40235","id":474674675,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDY3NDY3NQ==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2019-03-20T03:53:41Z","updated_at":"2019-03-20T03:53:41Z","author_association":"MEMBER","body":"@triggerman86 what happened is that when you initially created the index, it immediately attempted to execute the policy, but couldn't because the alias doesn't exist (since it was created shortly after the index).\r\n\r\nYou can use the [ILM retry](https://www.elastic.co/guide/en/elasticsearch/reference/7.x/ilm-retry-policy.html) API to retry the operation which *should* retry the step, and ILM will see that the alias now exists, moving it out of the ERROR step).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/474822775","html_url":"https://github.com/elastic/elasticsearch/issues/40235#issuecomment-474822775","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40235","id":474822775,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3NDgyMjc3NQ==","user":{"login":"triggerman86","id":34053224,"node_id":"MDQ6VXNlcjM0MDUzMjI0","avatar_url":"https://avatars0.githubusercontent.com/u/34053224?v=4","gravatar_id":"","url":"https://api.github.com/users/triggerman86","html_url":"https://github.com/triggerman86","followers_url":"https://api.github.com/users/triggerman86/followers","following_url":"https://api.github.com/users/triggerman86/following{/other_user}","gists_url":"https://api.github.com/users/triggerman86/gists{/gist_id}","starred_url":"https://api.github.com/users/triggerman86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/triggerman86/subscriptions","organizations_url":"https://api.github.com/users/triggerman86/orgs","repos_url":"https://api.github.com/users/triggerman86/repos","events_url":"https://api.github.com/users/triggerman86/events{/privacy}","received_events_url":"https://api.github.com/users/triggerman86/received_events","type":"User","site_admin":false},"created_at":"2019-03-20T13:13:52Z","updated_at":"2019-03-20T13:13:52Z","author_association":"NONE","body":"@dakrone Ahh I see what I have overlooked. Behaving as expected then. Thanks.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/590413667","html_url":"https://github.com/elastic/elasticsearch/issues/40235#issuecomment-590413667","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40235","id":590413667,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MDQxMzY2Nw==","user":{"login":"lbouquinUniv","id":57000474,"node_id":"MDQ6VXNlcjU3MDAwNDc0","avatar_url":"https://avatars0.githubusercontent.com/u/57000474?v=4","gravatar_id":"","url":"https://api.github.com/users/lbouquinUniv","html_url":"https://github.com/lbouquinUniv","followers_url":"https://api.github.com/users/lbouquinUniv/followers","following_url":"https://api.github.com/users/lbouquinUniv/following{/other_user}","gists_url":"https://api.github.com/users/lbouquinUniv/gists{/gist_id}","starred_url":"https://api.github.com/users/lbouquinUniv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbouquinUniv/subscriptions","organizations_url":"https://api.github.com/users/lbouquinUniv/orgs","repos_url":"https://api.github.com/users/lbouquinUniv/repos","events_url":"https://api.github.com/users/lbouquinUniv/events{/privacy}","received_events_url":"https://api.github.com/users/lbouquinUniv/received_events","type":"User","site_admin":false},"created_at":"2020-02-24T16:20:33Z","updated_at":"2020-02-24T16:21:07Z","author_association":"NONE","body":"I have the same problems. I try to use IML retry and it's doesn't work \r\n\r\n**Create ilm policy**\r\n`PUT /_ilm/policy/test_rollover_policy\r\n{\r\n  \"policy\": {\r\n    \"phases\": {\r\n      \"hot\": {\r\n        \"actions\": {\r\n          \"rollover\": {\r\n            \"max_size\": \"2mB\"\r\n            , \"max_docs\": 1000\r\n            , \"max_age\": \"1d\"\r\n          }\r\n        }\r\n      },\r\n      \"delete\": {\r\n        \"min_age\": \"30d\",\r\n        \"actions\": {\r\n          \"delete\": {}\r\n        }\r\n      }\r\n    }\r\n  }\r\n}`\r\n\r\n**create template**\r\n`PUT _template/test_template_rollover\r\n{\r\n  \"index_patterns\": [\"*-ker-roolover-*\"], \r\n  \"settings\": {\r\n    \"number_of_shards\": 1,\r\n    \"number_of_replicas\": 1,\r\n    \"index.lifecycle.name\": \"test_rollover_policy\", \r\n    \"index.lifecycle.rollover_alias\": \"test-alias-rollover\" \r\n  }\r\n}`\r\n\r\n**Create index with aliases**\r\n`PUT /rollover-000001\r\n{\r\n  \"aliases\": {\r\n    \"test-alias-rollover\":{\r\n      \"is_write_index\": true\r\n    }\r\n  }\r\n}\r\n`\r\n**get  GET filebeat-7.4.2-ker-roolover-000001/_ilm/explain**\r\n\r\n`{\r\n  \"indices\" : {\r\n    \"filebeat-7.4.2-ker-roolover-000001\" : {\r\n      \"index\" : \"filebeat-7.4.2-ker-roolover-000001\",\r\n      \"managed\" : true,\r\n      \"policy\" : \"test_rollover_policy\",\r\n      \"lifecycle_date_millis\" : 1582560410665,\r\n      \"phase\" : \"hot\",\r\n      \"phase_time_millis\" : 1582560414227,\r\n      \"action\" : \"rollover\",\r\n      \"action_time_millis\" : 1582560416266,\r\n      \"step\" : \"ERROR\",\r\n      \"step_time_millis\" : 1582560420029,\r\n      \"failed_step\" : \"check-rollover-ready\",\r\n      \"step_info\" : {\r\n        \"type\" : \"illegal_argument_exception\",\r\n        \"reason\" : \"index.lifecycle.rollover_alias [test-alias-rollover] does not point to index [filebeat-7.4.2-ker-roolover-000001]\",\r\n        \"stack_trace\" : \"\"\"\r\njava.lang.IllegalArgumentException: index.lifecycle.rollover_alias [test-alias-rollover] does not point to index [filebeat-7.4.2-ker-roolover-000001]\r\n\tat org.elasticsearch.xpack.core.indexlifecycle.WaitForRolloverReadyStep.evaluateCondition(WaitForRolloverReadyStep.java:92)\r\n\tat org.elasticsearch.xpack.indexlifecycle.IndexLifecycleRunner.runPeriodicStep(IndexLifecycleRunner.java:133)\r\n\tat org.elasticsearch.xpack.indexlifecycle.IndexLifecycleService.triggerPolicies(IndexLifecycleService.java:270)\r\n\tat org.elasticsearch.xpack.indexlifecycle.IndexLifecycleService.triggered(IndexLifecycleService.java:213)\r\n\tat org.elasticsearch.xpack.core.scheduler.SchedulerEngine.notifyListeners(SchedulerEngine.java:168)\r\n\tat org.elasticsearch.xpack.core.scheduler.SchedulerEngine$ActiveSchedule.run(SchedulerEngine.java:196)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\n\r\n\"\"\"\r\n      },\r\n      \"phase_execution\" : {\r\n        \"policy\" : \"test_rollover_policy\",\r\n        \"phase_definition\" : {\r\n          \"min_age\" : \"0ms\",\r\n          \"actions\" : {\r\n            \"rollover\" : {\r\n              \"max_size\" : \"2mb\",\r\n              \"max_age\" : \"1d\",\r\n              \"max_docs\" : 1000\r\n            }\r\n          }\r\n        },\r\n        \"version\" : 8,\r\n        \"modified_date_in_millis\" : 1582560390297\r\n      }\r\n    }\r\n  }\r\n}`\r\n\r\n\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/590822574","html_url":"https://github.com/elastic/elasticsearch/issues/40235#issuecomment-590822574","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40235","id":590822574,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MDgyMjU3NA==","user":{"login":"andreidan","id":1217601,"node_id":"MDQ6VXNlcjEyMTc2MDE=","avatar_url":"https://avatars2.githubusercontent.com/u/1217601?v=4","gravatar_id":"","url":"https://api.github.com/users/andreidan","html_url":"https://github.com/andreidan","followers_url":"https://api.github.com/users/andreidan/followers","following_url":"https://api.github.com/users/andreidan/following{/other_user}","gists_url":"https://api.github.com/users/andreidan/gists{/gist_id}","starred_url":"https://api.github.com/users/andreidan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreidan/subscriptions","organizations_url":"https://api.github.com/users/andreidan/orgs","repos_url":"https://api.github.com/users/andreidan/repos","events_url":"https://api.github.com/users/andreidan/events{/privacy}","received_events_url":"https://api.github.com/users/andreidan/received_events","type":"User","site_admin":false},"created_at":"2020-02-25T11:32:47Z","updated_at":"2020-02-25T11:32:47Z","author_association":"CONTRIBUTOR","body":"@lbouquinUniv Thanks for trying out ILM. I think you'll have to assign the `test-alias-rollover` alias to `filebeat-7.4.2-ker-roolover-000001`. The statement you used above does not achieve this (the index name is `rollover-000001`)\r\n```\r\nCreate index with aliases\r\nPUT /rollover-000001 { \"aliases\": { \"test-alias-rollover\":{ \"is_write_index\": true } } } \r\n```\r\nWe appreciate these steps are a bit cumbersome though and are actively looking at options to make this setup more user friendly in the future.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/590850795","html_url":"https://github.com/elastic/elasticsearch/issues/40235#issuecomment-590850795","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40235","id":590850795,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MDg1MDc5NQ==","user":{"login":"lbouquinUniv","id":57000474,"node_id":"MDQ6VXNlcjU3MDAwNDc0","avatar_url":"https://avatars0.githubusercontent.com/u/57000474?v=4","gravatar_id":"","url":"https://api.github.com/users/lbouquinUniv","html_url":"https://github.com/lbouquinUniv","followers_url":"https://api.github.com/users/lbouquinUniv/followers","following_url":"https://api.github.com/users/lbouquinUniv/following{/other_user}","gists_url":"https://api.github.com/users/lbouquinUniv/gists{/gist_id}","starred_url":"https://api.github.com/users/lbouquinUniv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbouquinUniv/subscriptions","organizations_url":"https://api.github.com/users/lbouquinUniv/orgs","repos_url":"https://api.github.com/users/lbouquinUniv/repos","events_url":"https://api.github.com/users/lbouquinUniv/events{/privacy}","received_events_url":"https://api.github.com/users/lbouquinUniv/received_events","type":"User","site_admin":false},"created_at":"2020-02-25T12:50:37Z","updated_at":"2020-02-25T12:50:37Z","author_association":"NONE","body":"ok i change it but I have another issue manage false\r\n```\r\nPUT /_ilm/policy/test_rollover_policy\r\n{\r\n  \"policy\": {\r\n    \"phases\": {\r\n      \"hot\": {\r\n        \"actions\": {\r\n          \"rollover\": {\r\n            \"max_size\": \"2mB\"\r\n            , \"max_docs\": 1000\r\n            , \"max_age\": \"1d\"\r\n          }\r\n        }\r\n      },\r\n      \"delete\": {\r\n        \"min_age\": \"30d\",\r\n        \"actions\": {\r\n          \"delete\": {}\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nPUT _template/test_template_rollover\r\n{\r\n  \"index_patterns\": [\"roolover-*\"], \r\n  \"settings\": {\r\n    \"number_of_shards\": 2,\r\n    \"number_of_replicas\": 2,\r\n    \"index.lifecycle.name\": \"test_rollover_policy\", \r\n    \"index.lifecycle.rollover_alias\": \"test-alias-rollover\"\r\n  }\r\n}\r\n\r\n```\r\n```\r\nPOST /_aliases\r\n{\r\n    \"actions\" : [\r\n        { \"add\" : { \"index\" : \"rollover-000001\", \"alias\" : \"test-alias-rollover\"} }\r\n    ]\r\n}\r\n\r\nGET rollover-000001/_ilm/explain\r\n```\r\n\r\nresult \r\n\r\n> {\r\n>   \"indices\" : {\r\n>     \"rollover-000001\" : {\r\n>       \"index\" : \"rollover-000001\",\r\n>       \"managed\" : false\r\n>     }\r\n>   }\r\n> }\r\n> \r\n\r\nIn kibana rollover-* exist and logstash fill it\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/590958784","html_url":"https://github.com/elastic/elasticsearch/issues/40235#issuecomment-590958784","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40235","id":590958784,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MDk1ODc4NA==","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"created_at":"2020-02-25T16:51:59Z","updated_at":"2020-02-25T16:51:59Z","author_association":"MEMBER","body":"@lbouquinUniv you have a typo in your template:\r\n\r\n```\r\n\"index_patterns\": [\"roolover-*\"],\r\n                here --^\r\n```\r\n\r\nIn the future however, these sorts of questions should be directed to our user forums at https://discuss.elastic.co.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/591286985","html_url":"https://github.com/elastic/elasticsearch/issues/40235#issuecomment-591286985","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40235","id":591286985,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTI4Njk4NQ==","user":{"login":"lbouquinUniv","id":57000474,"node_id":"MDQ6VXNlcjU3MDAwNDc0","avatar_url":"https://avatars0.githubusercontent.com/u/57000474?v=4","gravatar_id":"","url":"https://api.github.com/users/lbouquinUniv","html_url":"https://github.com/lbouquinUniv","followers_url":"https://api.github.com/users/lbouquinUniv/followers","following_url":"https://api.github.com/users/lbouquinUniv/following{/other_user}","gists_url":"https://api.github.com/users/lbouquinUniv/gists{/gist_id}","starred_url":"https://api.github.com/users/lbouquinUniv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbouquinUniv/subscriptions","organizations_url":"https://api.github.com/users/lbouquinUniv/orgs","repos_url":"https://api.github.com/users/lbouquinUniv/repos","events_url":"https://api.github.com/users/lbouquinUniv/events{/privacy}","received_events_url":"https://api.github.com/users/lbouquinUniv/received_events","type":"User","site_admin":false},"created_at":"2020-02-26T07:49:47Z","updated_at":"2020-02-26T09:09:14Z","author_association":"NONE","body":"Correct it but other issue\r\n\r\nI have rollover-000002 but it doesn't fill \r\n\r\n> test-alias-rollover      rollover-000002                    -      -             -\r\n![image](https://user-images.githubusercontent.com/57000474/75329443-e851fe80-587f-11ea-9056-95a327b8bd28.png)\r\n\r\n![image](https://user-images.githubusercontent.com/57000474/75329526-0881bd80-5880-11ea-9634-546e6c5bde6d.png)\r\n\r\n\r\n\r\n","performed_via_github_app":null}]