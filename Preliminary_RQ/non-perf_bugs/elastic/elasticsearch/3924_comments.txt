[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/26496727","html_url":"https://github.com/elastic/elasticsearch/issues/3924#issuecomment-26496727","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3924","id":26496727,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDk2NzI3","user":{"login":"brwe","id":4320215,"node_id":"MDQ6VXNlcjQzMjAyMTU=","avatar_url":"https://avatars0.githubusercontent.com/u/4320215?v=4","gravatar_id":"","url":"https://api.github.com/users/brwe","html_url":"https://github.com/brwe","followers_url":"https://api.github.com/users/brwe/followers","following_url":"https://api.github.com/users/brwe/following{/other_user}","gists_url":"https://api.github.com/users/brwe/gists{/gist_id}","starred_url":"https://api.github.com/users/brwe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brwe/subscriptions","organizations_url":"https://api.github.com/users/brwe/orgs","repos_url":"https://api.github.com/users/brwe/repos","events_url":"https://api.github.com/users/brwe/events{/privacy}","received_events_url":"https://api.github.com/users/brwe/received_events","type":"User","site_admin":false},"created_at":"2013-10-17T11:30:01Z","updated_at":"2013-10-17T11:30:01Z","author_association":"CONTRIBUTOR","body":"Thanks! I am glad to hear that the term vector api is useful. I want to add that @bleskes deserves at least half the credit!\n\nThere is another issue related to gathering statistics on terms(#3920). Is this similar to what you need?\nCould you describe your use case? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/26518514","html_url":"https://github.com/elastic/elasticsearch/issues/3924#issuecomment-26518514","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3924","id":26518514,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTE4NTE0","user":{"login":"mhoffman","id":139379,"node_id":"MDQ6VXNlcjEzOTM3OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/139379?v=4","gravatar_id":"","url":"https://api.github.com/users/mhoffman","html_url":"https://github.com/mhoffman","followers_url":"https://api.github.com/users/mhoffman/followers","following_url":"https://api.github.com/users/mhoffman/following{/other_user}","gists_url":"https://api.github.com/users/mhoffman/gists{/gist_id}","starred_url":"https://api.github.com/users/mhoffman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhoffman/subscriptions","organizations_url":"https://api.github.com/users/mhoffman/orgs","repos_url":"https://api.github.com/users/mhoffman/repos","events_url":"https://api.github.com/users/mhoffman/events{/privacy}","received_events_url":"https://api.github.com/users/mhoffman/received_events","type":"User","site_admin":false},"created_at":"2013-10-17T15:42:37Z","updated_at":"2013-10-17T15:42:37Z","author_association":"NONE","body":"Thanks for the quick response. So big shoutout to @bleskes, too: Thank you! No in my case I am actually after the precise offset, but typically only of a few terms (say 2-5). To describe this in general terms: I am doing a distance based scoring for things in the text. Can I send you a prototype privately?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/26649649","html_url":"https://github.com/elastic/elasticsearch/issues/3924#issuecomment-26649649","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3924","id":26649649,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NjQ5NjQ5","user":{"login":"brwe","id":4320215,"node_id":"MDQ6VXNlcjQzMjAyMTU=","avatar_url":"https://avatars0.githubusercontent.com/u/4320215?v=4","gravatar_id":"","url":"https://api.github.com/users/brwe","html_url":"https://github.com/brwe","followers_url":"https://api.github.com/users/brwe/followers","following_url":"https://api.github.com/users/brwe/following{/other_user}","gists_url":"https://api.github.com/users/brwe/gists{/gist_id}","starred_url":"https://api.github.com/users/brwe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brwe/subscriptions","organizations_url":"https://api.github.com/users/brwe/orgs","repos_url":"https://api.github.com/users/brwe/repos","events_url":"https://api.github.com/users/brwe/events{/privacy}","received_events_url":"https://api.github.com/users/brwe/received_events","type":"User","site_admin":false},"created_at":"2013-10-19T13:26:43Z","updated_at":"2013-10-19T13:26:43Z","author_association":"CONTRIBUTOR","body":"If you by _privately_ mean that you want to push a branch to your repo without pull request and then discuss it here - sure! Just link the commit or branch here. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/26777429","html_url":"https://github.com/elastic/elasticsearch/issues/3924#issuecomment-26777429","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3924","id":26777429,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Nzc3NDI5","user":{"login":"mhoffman","id":139379,"node_id":"MDQ6VXNlcjEzOTM3OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/139379?v=4","gravatar_id":"","url":"https://api.github.com/users/mhoffman","html_url":"https://github.com/mhoffman","followers_url":"https://api.github.com/users/mhoffman/followers","following_url":"https://api.github.com/users/mhoffman/following{/other_user}","gists_url":"https://api.github.com/users/mhoffman/gists{/gist_id}","starred_url":"https://api.github.com/users/mhoffman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhoffman/subscriptions","organizations_url":"https://api.github.com/users/mhoffman/orgs","repos_url":"https://api.github.com/users/mhoffman/repos","events_url":"https://api.github.com/users/mhoffman/events{/privacy}","received_events_url":"https://api.github.com/users/mhoffman/received_events","type":"User","site_admin":false},"created_at":"2013-10-22T05:04:02Z","updated_at":"2013-10-22T05:04:02Z","author_association":"NONE","body":"Thanks, for taking the time. I have tried to do that in a low-brow way and the result is at\nUser/Project@SHA: mhoffman/elasticsearch@5ed795c9306ced7da937c55fef5f8c90683266c2 .\n\nNow, I have two problems so far:\n- There is some speed-up compared to a full termvector, but it is less than I thought\n- If the selected term(s) is not in the document, elasticsearch returns a 500, EOFException. Which is probably not desirable.\n\nAny suggestions?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/26821620","html_url":"https://github.com/elastic/elasticsearch/issues/3924#issuecomment-26821620","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3924","id":26821620,"node_id":"MDEyOklzc3VlQ29tbWVudDI2ODIxNjIw","user":{"login":"brwe","id":4320215,"node_id":"MDQ6VXNlcjQzMjAyMTU=","avatar_url":"https://avatars0.githubusercontent.com/u/4320215?v=4","gravatar_id":"","url":"https://api.github.com/users/brwe","html_url":"https://github.com/brwe","followers_url":"https://api.github.com/users/brwe/followers","following_url":"https://api.github.com/users/brwe/following{/other_user}","gists_url":"https://api.github.com/users/brwe/gists{/gist_id}","starred_url":"https://api.github.com/users/brwe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brwe/subscriptions","organizations_url":"https://api.github.com/users/brwe/orgs","repos_url":"https://api.github.com/users/brwe/repos","events_url":"https://api.github.com/users/brwe/events{/privacy}","received_events_url":"https://api.github.com/users/brwe/received_events","type":"User","site_admin":false},"created_at":"2013-10-22T17:02:31Z","updated_at":"2013-10-22T17:02:31Z","author_association":"CONTRIBUTOR","body":"Thanks for the commit! I assumed you wanted to discuss e7c1e9e980da986, since 5ed795c9306ced7da does some percolator things, right? Let me know if I am mistaken.\n\nAbout the speed-up: I could imagine the speedup is not as great as expected because all term info is loaded from disc no matter how many of terms you actually return. Disc IO probably influences the performance most. I still think the change is useful for large documents with many terms when only few are requested.\nWhat kind of documents did you use for measuring the speedup?\n\nAbout the EOF: We should decide if a requested term should be returned with frequency 0 if it is not in the doc, or not return missing terms at all. I prepared a commit fixing the EOF for the former and added a comment for the latter, just so that you know where the changes have to be made here: 27bc8fd813ae8d342527c4f7d4d36e5b4bcaaddf\n\nWhat do you think: Return the term with frequency 0 or not return it at all if it is not the document?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/26824998","html_url":"https://github.com/elastic/elasticsearch/issues/3924#issuecomment-26824998","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3924","id":26824998,"node_id":"MDEyOklzc3VlQ29tbWVudDI2ODI0OTk4","user":{"login":"mhoffman","id":139379,"node_id":"MDQ6VXNlcjEzOTM3OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/139379?v=4","gravatar_id":"","url":"https://api.github.com/users/mhoffman","html_url":"https://github.com/mhoffman","followers_url":"https://api.github.com/users/mhoffman/followers","following_url":"https://api.github.com/users/mhoffman/following{/other_user}","gists_url":"https://api.github.com/users/mhoffman/gists{/gist_id}","starred_url":"https://api.github.com/users/mhoffman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhoffman/subscriptions","organizations_url":"https://api.github.com/users/mhoffman/orgs","repos_url":"https://api.github.com/users/mhoffman/repos","events_url":"https://api.github.com/users/mhoffman/events{/privacy}","received_events_url":"https://api.github.com/users/mhoffman/received_events","type":"User","site_admin":false},"created_at":"2013-10-22T17:45:21Z","updated_at":"2013-10-22T17:45:46Z","author_association":"NONE","body":"  Thanks for the corrections! Sorry, about the confusion with the commit link. I must have gotten something wrong with linking into user-specific commits. I am also a bit confused how this 5ed795c you link to comes turn out to be there? I definitely didn't intend to touch any percolator stuff. Is it coincidence that the first 7 characters match?\n\n  Anyhow, you seem to have gotten the right commit and in my use-case both solutions work equally well. Though one could argue that given that Disk IO will dominate the runtime of this request anyways, returning a 0 would simply make the result a bit more self-explaining.\n\nThanks again.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/26901527","html_url":"https://github.com/elastic/elasticsearch/issues/3924#issuecomment-26901527","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3924","id":26901527,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTAxNTI3","user":{"login":"brwe","id":4320215,"node_id":"MDQ6VXNlcjQzMjAyMTU=","avatar_url":"https://avatars0.githubusercontent.com/u/4320215?v=4","gravatar_id":"","url":"https://api.github.com/users/brwe","html_url":"https://github.com/brwe","followers_url":"https://api.github.com/users/brwe/followers","following_url":"https://api.github.com/users/brwe/following{/other_user}","gists_url":"https://api.github.com/users/brwe/gists{/gist_id}","starred_url":"https://api.github.com/users/brwe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brwe/subscriptions","organizations_url":"https://api.github.com/users/brwe/orgs","repos_url":"https://api.github.com/users/brwe/repos","events_url":"https://api.github.com/users/brwe/events{/privacy}","received_events_url":"https://api.github.com/users/brwe/received_events","type":"User","site_admin":false},"created_at":"2013-10-23T12:47:47Z","updated_at":"2013-10-23T12:47:47Z","author_association":"CONTRIBUTOR","body":"Would you like to make a pull request for your changes? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/27070079","html_url":"https://github.com/elastic/elasticsearch/issues/3924#issuecomment-27070079","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3924","id":27070079,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDcwMDc5","user":{"login":"mhoffman","id":139379,"node_id":"MDQ6VXNlcjEzOTM3OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/139379?v=4","gravatar_id":"","url":"https://api.github.com/users/mhoffman","html_url":"https://github.com/mhoffman","followers_url":"https://api.github.com/users/mhoffman/followers","following_url":"https://api.github.com/users/mhoffman/following{/other_user}","gists_url":"https://api.github.com/users/mhoffman/gists{/gist_id}","starred_url":"https://api.github.com/users/mhoffman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhoffman/subscriptions","organizations_url":"https://api.github.com/users/mhoffman/orgs","repos_url":"https://api.github.com/users/mhoffman/repos","events_url":"https://api.github.com/users/mhoffman/events{/privacy}","received_events_url":"https://api.github.com/users/mhoffman/received_events","type":"User","site_admin":false},"created_at":"2013-10-25T07:16:55Z","updated_at":"2013-10-25T07:16:55Z","author_association":"NONE","body":"Sorry for the delay. Why don't you go ahead since you have the last version\nin your repo already.\n\n2013/10/23 Britta Weber notifications@github.com\n\n> Would you like to make a pull request for your changes?\n> \n> —\n> Reply to this email directly or view it on GitHubhttps://github.com/elasticsearch/elasticsearch/issues/3924#issuecomment-26901527\n> .\n\n## \n\nMax J. Hoffmann\nTel: +4989 289 13807 (office)\nRoom CH62115\nTU München\nLichtenbergstr. 4\nD-85747 Garching\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/27094416","html_url":"https://github.com/elastic/elasticsearch/issues/3924#issuecomment-27094416","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3924","id":27094416,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MDk0NDE2","user":{"login":"brwe","id":4320215,"node_id":"MDQ6VXNlcjQzMjAyMTU=","avatar_url":"https://avatars0.githubusercontent.com/u/4320215?v=4","gravatar_id":"","url":"https://api.github.com/users/brwe","html_url":"https://github.com/brwe","followers_url":"https://api.github.com/users/brwe/followers","following_url":"https://api.github.com/users/brwe/following{/other_user}","gists_url":"https://api.github.com/users/brwe/gists{/gist_id}","starred_url":"https://api.github.com/users/brwe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brwe/subscriptions","organizations_url":"https://api.github.com/users/brwe/orgs","repos_url":"https://api.github.com/users/brwe/repos","events_url":"https://api.github.com/users/brwe/events{/privacy}","received_events_url":"https://api.github.com/users/brwe/received_events","type":"User","site_admin":false},"created_at":"2013-10-25T13:56:39Z","updated_at":"2013-10-25T13:56:39Z","author_association":"CONTRIBUTOR","body":"ok, I'll do that.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/28416805","html_url":"https://github.com/elastic/elasticsearch/issues/3924#issuecomment-28416805","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3924","id":28416805,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NDE2ODA1","user":{"login":"brwe","id":4320215,"node_id":"MDQ6VXNlcjQzMjAyMTU=","avatar_url":"https://avatars0.githubusercontent.com/u/4320215?v=4","gravatar_id":"","url":"https://api.github.com/users/brwe","html_url":"https://github.com/brwe","followers_url":"https://api.github.com/users/brwe/followers","following_url":"https://api.github.com/users/brwe/following{/other_user}","gists_url":"https://api.github.com/users/brwe/gists{/gist_id}","starred_url":"https://api.github.com/users/brwe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brwe/subscriptions","organizations_url":"https://api.github.com/users/brwe/orgs","repos_url":"https://api.github.com/users/brwe/repos","events_url":"https://api.github.com/users/brwe/events{/privacy}","received_events_url":"https://api.github.com/users/brwe/received_events","type":"User","site_admin":false},"created_at":"2013-11-13T17:48:36Z","updated_at":"2013-11-13T17:48:36Z","author_association":"CONTRIBUTOR","body":"About the speedup: With the current implementation, we load the whole term vector for a document. This makes sense if you need all the terms or do not know in advance which term is requested but also makes it slow.\nFor pre-selected terms the current implementation (see commits above) we also load the term vector and only keep the terms that we are interested in. I am now wondering if this makes sense at all for pre-selected terms. We do not need the full term vector and could also get all the information from the DocsEnum of the terms - this might be quicker than what we do right now. \nSummoning @s1monw here because I am unsure if it really is quicker in this case.\n\nAlso, please take a look at pr #4161. It implements access to term vectors in a script. I implemented it wrong there as well (load term vectors and get the information from there instead from the standard DocsEnum) but I can fix that. \nIf the script term vector access gives you all you need, than maybe you do not even need the pre-selected term vectors in the _termvector api anymore?\n\nAlso, sorry for the delay.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/31445583","html_url":"https://github.com/elastic/elasticsearch/issues/3924#issuecomment-31445583","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3924","id":31445583,"node_id":"MDEyOklzc3VlQ29tbWVudDMxNDQ1NTgz","user":{"login":"brwe","id":4320215,"node_id":"MDQ6VXNlcjQzMjAyMTU=","avatar_url":"https://avatars0.githubusercontent.com/u/4320215?v=4","gravatar_id":"","url":"https://api.github.com/users/brwe","html_url":"https://github.com/brwe","followers_url":"https://api.github.com/users/brwe/followers","following_url":"https://api.github.com/users/brwe/following{/other_user}","gists_url":"https://api.github.com/users/brwe/gists{/gist_id}","starred_url":"https://api.github.com/users/brwe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brwe/subscriptions","organizations_url":"https://api.github.com/users/brwe/orgs","repos_url":"https://api.github.com/users/brwe/repos","events_url":"https://api.github.com/users/brwe/events{/privacy}","received_events_url":"https://api.github.com/users/brwe/received_events","type":"User","site_admin":false},"created_at":"2014-01-02T10:32:42Z","updated_at":"2014-01-02T10:32:42Z","author_association":"CONTRIBUTOR","body":"I just pushed the script api for term statistics (pr #4161) Could you check if this allows you to do all you need?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/34587653","html_url":"https://github.com/elastic/elasticsearch/issues/3924#issuecomment-34587653","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3924","id":34587653,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTg3NjUz","user":{"login":"mhoffman","id":139379,"node_id":"MDQ6VXNlcjEzOTM3OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/139379?v=4","gravatar_id":"","url":"https://api.github.com/users/mhoffman","html_url":"https://github.com/mhoffman","followers_url":"https://api.github.com/users/mhoffman/followers","following_url":"https://api.github.com/users/mhoffman/following{/other_user}","gists_url":"https://api.github.com/users/mhoffman/gists{/gist_id}","starred_url":"https://api.github.com/users/mhoffman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhoffman/subscriptions","organizations_url":"https://api.github.com/users/mhoffman/orgs","repos_url":"https://api.github.com/users/mhoffman/repos","events_url":"https://api.github.com/users/mhoffman/events{/privacy}","received_events_url":"https://api.github.com/users/mhoffman/received_events","type":"User","site_admin":false},"created_at":"2014-02-09T21:37:02Z","updated_at":"2014-02-09T21:37:02Z","author_association":"NONE","body":"Hi\n\nSorry for the slow reply. The function_score query seems to work as the\ndocs promise (at least using 'mvel' and 'native'). Though my actual\nproblem, that made me look for term vectors etc., is still too complex for\nthis query type: I would need to access the term vector of the _parent_ of\nthe object that I am scoring with the script. I guess this notion was\nexpressed before in #1071 and #761 but apparently easier said than done.\n\nI think this could still be a nice feature and since parent/child object\nfollow the same routing shouldn't all too complicated. Any comments?\n\n2014-01-02 11:33 GMT+01:00 Britta Weber notifications@github.com:\n\n> I just pushed the script api for term statistics (pr #4161https://github.com/elasticsearch/elasticsearch/pull/4161)\n> Could you check if this allows you to do all you need?\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/elasticsearch/elasticsearch/issues/3924#issuecomment-31445583\n> .\n\n## \n\nMax J. Hoffmann\nTel: +4989 289 13807 (office)\nRoom CH62115\nTU München\nLichtenbergstr. 4\nD-85747 Garching\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/34854215","html_url":"https://github.com/elastic/elasticsearch/issues/3924#issuecomment-34854215","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3924","id":34854215,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODU0MjE1","user":{"login":"brwe","id":4320215,"node_id":"MDQ6VXNlcjQzMjAyMTU=","avatar_url":"https://avatars0.githubusercontent.com/u/4320215?v=4","gravatar_id":"","url":"https://api.github.com/users/brwe","html_url":"https://github.com/brwe","followers_url":"https://api.github.com/users/brwe/followers","following_url":"https://api.github.com/users/brwe/following{/other_user}","gists_url":"https://api.github.com/users/brwe/gists{/gist_id}","starred_url":"https://api.github.com/users/brwe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brwe/subscriptions","organizations_url":"https://api.github.com/users/brwe/orgs","repos_url":"https://api.github.com/users/brwe/repos","events_url":"https://api.github.com/users/brwe/events{/privacy}","received_events_url":"https://api.github.com/users/brwe/received_events","type":"User","site_admin":false},"created_at":"2014-02-12T10:00:45Z","updated_at":"2014-02-12T10:00:45Z","author_association":"CONTRIBUTOR","body":"That would call for a different issue.\n\nJust to be sure: Do you need both parent and child statistics in the same script? Can you elaborate a little on what exactly you need maybe with a small example?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/35162161","html_url":"https://github.com/elastic/elasticsearch/issues/3924#issuecomment-35162161","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3924","id":35162161,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTYyMTYx","user":{"login":"mhoffman","id":139379,"node_id":"MDQ6VXNlcjEzOTM3OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/139379?v=4","gravatar_id":"","url":"https://api.github.com/users/mhoffman","html_url":"https://github.com/mhoffman","followers_url":"https://api.github.com/users/mhoffman/followers","following_url":"https://api.github.com/users/mhoffman/following{/other_user}","gists_url":"https://api.github.com/users/mhoffman/gists{/gist_id}","starred_url":"https://api.github.com/users/mhoffman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhoffman/subscriptions","organizations_url":"https://api.github.com/users/mhoffman/orgs","repos_url":"https://api.github.com/users/mhoffman/repos","events_url":"https://api.github.com/users/mhoffman/events{/privacy}","received_events_url":"https://api.github.com/users/mhoffman/received_events","type":"User","site_admin":false},"created_at":"2014-02-15T17:40:11Z","updated_at":"2014-02-15T17:40:11Z","author_association":"NONE","body":"Just played with the script_score feature and thinks this allows a really\nnice developing workflow. Sweet!\n\n My parent/child use case is the following (I hope this makes sense). In my\napplication I store my data with parents and children and each parent has\nmany children (~100). The children are very small in size (4 fields, short\nstrings each) but the parent has one large field (~1e6 characters). So from\nan index size point of view it makes sense to keep the big field with the\nparent once instead of with each of the many children\n\nThen the 'functions' part of the 'function_score' request could look like\nbelow, and it is run on the children doc_type but the '_parent' refers to\nthe respective parent. I think this could make sense since (if I understand\ncorrectly) parent and child are always routed to the same node. I would\nlike to have a look into this, but it might take me a couple of days.\n\n 'functions' : [{\n                        'script_score': {\n                            \"params\" : {\n                                'pos': 520,\n                                'terms': ['this','system'],\n                            },\n                            'script': \"\"\"\n                                score = 0;\n                                for (term: terms) {\n                                    offsets = _parent['body'].get(term,\n_OFFSETS | _CACHE);\n                                    for (offset: offsets){\n                                        score = score + exp(-(pos -\noffset.startOffset)**2 \\* (-.0001));\n                                    }\n                                }\n                                score\n\n```\n                        \"\"\",\n                                    }\n                }],\n```\n\n2014-02-12 11:01 GMT+01:00 Britta Weber notifications@github.com:\n\n> That would call for a different issue.\n> \n> Just to be sure: Do you need both parent and child statistics in the same\n> script? Can you elaborate a little on what exactly you need maybe with a\n> small example?\n> \n> ## \n> \n> Reply to this email directly or view it on GitHubhttps://github.com/elasticsearch/elasticsearch/issues/3924#issuecomment-34854215\n> .\n\n## \n\nMax J. Hoffmann\nTel: +4989 289 13807 (office)\nRoom CH62115\nTU München\nLichtenbergstr. 4\nD-85747 Garching\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/42270734","html_url":"https://github.com/elastic/elasticsearch/issues/3924#issuecomment-42270734","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3924","id":42270734,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMjcwNzM0","user":{"login":"brwe","id":4320215,"node_id":"MDQ6VXNlcjQzMjAyMTU=","avatar_url":"https://avatars0.githubusercontent.com/u/4320215?v=4","gravatar_id":"","url":"https://api.github.com/users/brwe","html_url":"https://github.com/brwe","followers_url":"https://api.github.com/users/brwe/followers","following_url":"https://api.github.com/users/brwe/following{/other_user}","gists_url":"https://api.github.com/users/brwe/gists{/gist_id}","starred_url":"https://api.github.com/users/brwe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brwe/subscriptions","organizations_url":"https://api.github.com/users/brwe/orgs","repos_url":"https://api.github.com/users/brwe/repos","events_url":"https://api.github.com/users/brwe/events{/privacy}","received_events_url":"https://api.github.com/users/brwe/received_events","type":"User","site_admin":false},"created_at":"2014-05-06T06:13:01Z","updated_at":"2014-05-06T06:13:01Z","author_association":"CONTRIBUTOR","body":"Hi,\n\nsorry for the late reply. Can you check if the `has_parent` query together with the function score would solve the problem?\n\nUsing several documents within a script for computing the score is not supported yet and would need a new issue. Let me know if I can close this one. Thanks!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44286669","html_url":"https://github.com/elastic/elasticsearch/issues/3924#issuecomment-44286669","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3924","id":44286669,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0Mjg2NjY5","user":{"login":"mhoffman","id":139379,"node_id":"MDQ6VXNlcjEzOTM3OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/139379?v=4","gravatar_id":"","url":"https://api.github.com/users/mhoffman","html_url":"https://github.com/mhoffman","followers_url":"https://api.github.com/users/mhoffman/followers","following_url":"https://api.github.com/users/mhoffman/following{/other_user}","gists_url":"https://api.github.com/users/mhoffman/gists{/gist_id}","starred_url":"https://api.github.com/users/mhoffman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mhoffman/subscriptions","organizations_url":"https://api.github.com/users/mhoffman/orgs","repos_url":"https://api.github.com/users/mhoffman/repos","events_url":"https://api.github.com/users/mhoffman/events{/privacy}","received_events_url":"https://api.github.com/users/mhoffman/received_events","type":"User","site_admin":false},"created_at":"2014-05-27T14:52:09Z","updated_at":"2014-05-27T14:52:09Z","author_association":"NONE","body":"Looks good to me.\nAm 06.05.2014 08:13 schrieb \"Britta Weber\" notifications@github.com:\n\n> Hi,\n> \n> sorry for the late reply. Can you check if the has_parent query together\n> with the function score would solve the problem?\n> \n> Using several documents within a script for computing the score is not\n> supported yet and would need a new issue. Let me know if I can close this\n> one. Thanks!\n> \n> —\n> Reply to this email directly or view it on GitHubhttps://github.com/elasticsearch/elasticsearch/issues/3924#issuecomment-42270734\n> .\n","performed_via_github_app":null}]