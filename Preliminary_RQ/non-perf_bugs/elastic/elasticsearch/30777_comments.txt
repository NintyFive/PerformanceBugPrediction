[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/390948010","html_url":"https://github.com/elastic/elasticsearch/issues/30777#issuecomment-390948010","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30777","id":390948010,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDk0ODAxMA==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-05-22T10:51:57Z","updated_at":"2018-05-22T10:51:57Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/495771880","html_url":"https://github.com/elastic/elasticsearch/issues/30777#issuecomment-495771880","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30777","id":495771880,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NTc3MTg4MA==","user":{"login":"jakelandis","id":976291,"node_id":"MDQ6VXNlcjk3NjI5MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/976291?v=4","gravatar_id":"","url":"https://api.github.com/users/jakelandis","html_url":"https://github.com/jakelandis","followers_url":"https://api.github.com/users/jakelandis/followers","following_url":"https://api.github.com/users/jakelandis/following{/other_user}","gists_url":"https://api.github.com/users/jakelandis/gists{/gist_id}","starred_url":"https://api.github.com/users/jakelandis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakelandis/subscriptions","organizations_url":"https://api.github.com/users/jakelandis/orgs","repos_url":"https://api.github.com/users/jakelandis/repos","events_url":"https://api.github.com/users/jakelandis/events{/privacy}","received_events_url":"https://api.github.com/users/jakelandis/received_events","type":"User","site_admin":false},"created_at":"2019-05-24T20:02:14Z","updated_at":"2019-05-24T20:02:14Z","author_association":"CONTRIBUTOR","body":"Un-muted this test on PR #42409 to obtain additional logs. \r\n\r\nIf (when?) this test fails again please obtain the following information before muting the test:\r\n\r\n* Copy of the relevant failure\r\n* Copy of the reproduce line\r\n* The Jenkins build link \r\n* The Gradle scan link\r\n* The relevant cluster logs from \"Google Cloud Storage Upload Report\" (link found in Jenkins build)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/573754216","html_url":"https://github.com/elastic/elasticsearch/issues/30777#issuecomment-573754216","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30777","id":573754216,"node_id":"MDEyOklzc3VlQ29tbWVudDU3Mzc1NDIxNg==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2020-01-13T16:37:31Z","updated_at":"2020-01-13T16:37:31Z","author_association":"MEMBER","body":"This test suite failed last time 4th of December and fails differently now:\r\n\r\n```\r\norg.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT > testSearchInputWithInsufficientPrivileges FAILED\r\n    java.lang.AssertionError: \r\n    Expected: is a value equal to or greater than <1>\r\n         but: <0> was less than <1>\r\n        at __randomizedtesting.SeedInfo.seed([A9D1FC962308DA58:6B9A0632AD97956]:0)\r\n        at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)\r\n        at org.junit.Assert.assertThat(Assert.java:956)\r\n        at org.junit.Assert.assertThat(Assert.java:923)\r\n        at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.lambda$getWatchHistoryEntry$4(SmokeTestWatcherWithSecurityIT.java:331)\r\n        at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:866)\r\n        at org.elasticsearch.test.ESTestCase.assertBusy(ESTestCase.java:839)\r\n        at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.getWatchHistoryEntry(SmokeTestWatcherWithSecurityIT.java:308)\r\n        at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.getWatchHistoryEntry(SmokeTestWatcherWithSecurityIT.java:303)\r\n        at org.elasticsearch.smoketest.SmokeTestWatcherWithSecurityIT.testSearchInputWithInsufficientPrivileges(SmokeTestWatcherWithSecurityIT.java:184)\r\n```\r\n\r\nBasically there are no entries for expected watch in the watch history index.\r\n\r\nI'm going to tweak the test a bit so, that more information is logged when it fails. (current cluster state, watcher state and the contents of the watch history index)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/578136842","html_url":"https://github.com/elastic/elasticsearch/issues/30777#issuecomment-578136842","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30777","id":578136842,"node_id":"MDEyOklzc3VlQ29tbWVudDU3ODEzNjg0Mg==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2020-01-24T13:49:31Z","updated_at":"2020-01-24T13:49:31Z","author_association":"MEMBER","body":"This test hasn't failed since december 4th, also not after adding more logging in the test.\r\nI'm going to unmute this test in the 7 dot x branch too.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/578661867","html_url":"https://github.com/elastic/elasticsearch/issues/30777#issuecomment-578661867","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30777","id":578661867,"node_id":"MDEyOklzc3VlQ29tbWVudDU3ODY2MTg2Nw==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2020-01-27T09:28:58Z","updated_at":"2020-01-27T09:28:58Z","author_association":"MEMBER","body":"Over the weekend this failed on the 7 dot x branch. [It failed](https://gradle-enterprise.elastic.co/s/jsp4ev6srpz46/console-log?task=:x-pack:qa:smoke-test-watcher-with-security:integTestRunner), because of a test issue (not all shards were ready to search the history index, and the search should have been tried). I will push a fix for this test issue.\r\n\r\nUnfortunately this is not the failure we have been waiting for, so let's wait until it fails like was reported before.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/579737596","html_url":"https://github.com/elastic/elasticsearch/issues/30777#issuecomment-579737596","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30777","id":579737596,"node_id":"MDEyOklzc3VlQ29tbWVudDU3OTczNzU5Ng==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2020-01-29T12:39:34Z","updated_at":"2020-01-29T12:39:34Z","author_association":"MEMBER","body":"There's been a failure for this test today on 7.x: https://gradle-enterprise.elastic.co/s/c4nufk2i4lq7c\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+7.x+multijob-unix-compatibility/os=oraclelinux-7&&immutable/537/console\r\n\r\nCannot repro, not sure if it is related or provides the additional info you are looking for but will leave unmuted...","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/579738352","html_url":"https://github.com/elastic/elasticsearch/issues/30777#issuecomment-579738352","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30777","id":579738352,"node_id":"MDEyOklzc3VlQ29tbWVudDU3OTczODM1Mg==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2020-01-29T12:41:43Z","updated_at":"2020-01-29T12:41:43Z","author_association":"MEMBER","body":"Thanks @cbuescher this is a test failure. Likely multiple history docs have matched, but only the first hit is checked and it is likely that this doc doesn't have the expected state. I will fix this, by ensuring that we query only for history docs with the expected state.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/580194636","html_url":"https://github.com/elastic/elasticsearch/issues/30777#issuecomment-580194636","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30777","id":580194636,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MDE5NDYzNg==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2020-01-30T10:44:40Z","updated_at":"2020-01-30T10:44:40Z","author_association":"MEMBER","body":"Closing this issue, the test hasn't failed for a long time in the way originally reported. Yesterday's failure was a different test issue, which has been addressed as well.\r\n\r\nIf this test fails again then a new issue should be opened and possible reference this issue if the failure looks similar to the original report.","performed_via_github_app":null}]