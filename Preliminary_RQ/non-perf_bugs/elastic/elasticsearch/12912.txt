{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/12912","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12912/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12912/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/12912/events","html_url":"https://github.com/elastic/elasticsearch/issues/12912","id":101213944,"node_id":"MDU6SXNzdWUxMDEyMTM5NDQ=","number":12912,"title":"Querying on a date range","user":{"login":"icecrime","id":1564054,"node_id":"MDQ6VXNlcjE1NjQwNTQ=","avatar_url":"https://avatars0.githubusercontent.com/u/1564054?v=4","gravatar_id":"","url":"https://api.github.com/users/icecrime","html_url":"https://github.com/icecrime","followers_url":"https://api.github.com/users/icecrime/followers","following_url":"https://api.github.com/users/icecrime/following{/other_user}","gists_url":"https://api.github.com/users/icecrime/gists{/gist_id}","starred_url":"https://api.github.com/users/icecrime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icecrime/subscriptions","organizations_url":"https://api.github.com/users/icecrime/orgs","repos_url":"https://api.github.com/users/icecrime/repos","events_url":"https://api.github.com/users/icecrime/events{/privacy}","received_events_url":"https://api.github.com/users/icecrime/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2015-08-15T22:22:26Z","updated_at":"2015-08-15T23:48:23Z","closed_at":"2015-08-15T23:48:23Z","author_association":"NONE","active_lock_reason":null,"body":"I'm quite new to Elastic Search, and trying to store and visualize time-series data. I've removed Kibana from the equation, and I'm down with the following behavior that I can't explain.\n\nA document is indexed with what seems to be a proper timestamp:\n\n```\n# curl elasticsearch:9200/[redacted]/[redacted]/[redacted]?fields=_timestamp | jq .\n{\n  \"_index\": \"[redacted]\",\n  \"_type\": \"[redacted]\",\n  \"_id\": \"[redacted]\",\n  \"_version\": 1,\n  \"found\": true,\n  \"fields\": {\n    \"_timestamp\": 1439673273000\n  }\n}\n```\n\nQuerying with a date range which does include this document:\n\n```\n# cat query\n{\n  \"size\": 0,\n  \"query\": {\n    \"filtered\": {\n      \"query\": {\n        \"query_string\": {\n          \"analyze_wildcard\": true,\n          \"query\": \"*\"\n        }\n      },\n      \"filter\": {\n        \"bool\": {\n          \"must\": [\n            {\n              \"range\": {\n                \"_timestamp\": {\n                  \"gte\": 1439660028476,\n                  \"lte\": 1439674428476\n                }\n              }\n            }\n          ],\n          \"must_not\": []\n        }\n      }\n    }\n  }\n}\n```\n\nGives me no result:\n\n```\n# curl -XGET elasticsearch:9200/[redacted]/[redacted]/_search -d @query | jq .\n{\n  \"took\": 3,\n  \"timed_out\": false,\n  \"_shards\": {\n    \"total\": 5,\n    \"successful\": 5,\n    \"failed\": 0\n  },\n  \"hits\": {\n    \"total\": 0,\n    \"max_score\": 0,\n    \"hits\": []\n  }\n}\n```\n\nRelevant timestamps:\n- Query lower bound `1439660028476` (Sat, 15 Aug 2015 17:33:48 GMT)\n- Query upper bound `1439674428476` (Sat, 15 Aug 2015 21:33:48 GMT)\n- Document timestamp `1439673273000`  (Sat, 15 Aug 2015 21:14:33 GMT)\n\nElastic Search is 1.7.1, running in PST timezone.\n","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}