[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/266728385","html_url":"https://github.com/elastic/elasticsearch/issues/22128#issuecomment-266728385","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22128","id":266728385,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NjcyODM4NQ==","user":{"login":"MaineC","id":70953,"node_id":"MDQ6VXNlcjcwOTUz","avatar_url":"https://avatars3.githubusercontent.com/u/70953?v=4","gravatar_id":"","url":"https://api.github.com/users/MaineC","html_url":"https://github.com/MaineC","followers_url":"https://api.github.com/users/MaineC/followers","following_url":"https://api.github.com/users/MaineC/following{/other_user}","gists_url":"https://api.github.com/users/MaineC/gists{/gist_id}","starred_url":"https://api.github.com/users/MaineC/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaineC/subscriptions","organizations_url":"https://api.github.com/users/MaineC/orgs","repos_url":"https://api.github.com/users/MaineC/repos","events_url":"https://api.github.com/users/MaineC/events{/privacy}","received_events_url":"https://api.github.com/users/MaineC/received_events","type":"User","site_admin":false},"created_at":"2016-12-13T12:39:43Z","updated_at":"2016-12-13T12:39:43Z","author_association":"CONTRIBUTOR","body":"As you seem to have pinned down the exact location in the code base that is causing the issue - would you mind taking this a step further and submitting a pull request with a fix?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/267009293","html_url":"https://github.com/elastic/elasticsearch/issues/22128#issuecomment-267009293","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22128","id":267009293,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NzAwOTI5Mw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-12-14T11:18:06Z","updated_at":"2016-12-14T11:18:06Z","author_association":"CONTRIBUTOR","body":"But what is the fix here? It's not clear to me what we could change here to make it better.\r\n\r\n> It seems that support for this variable was removed in 5.x\r\n>\r\n> Documentation: https://www.elastic.co/guide/en/elasticsearch/guide/current/heap-sizing.html This is (despite saying \"current\" in the url) the documentation of 2.x.\r\n>\r\n>> Generally, setting the ES_HEAP_SIZE environment variable is preferred over setting explicit -Xmx and -Xms values.\r\n> There is no mention of it being deprecated.\r\n\r\nThere's a disconnect between the Definitive Guide and the ES Reference, where it is indeed documented under breaking changes: https://www.elastic.co/guide/en/elasticsearch/reference/5.1/breaking_50_packaging.html#_jvm_options\r\n\r\nWe need to do something with the Def Guide to make it obvious that it refers to legacy ES still.\r\n\r\nOther than docs, any ideas how we could improve this experience?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/267014127","html_url":"https://github.com/elastic/elasticsearch/issues/22128#issuecomment-267014127","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22128","id":267014127,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NzAxNDEyNw==","user":{"login":"MaineC","id":70953,"node_id":"MDQ6VXNlcjcwOTUz","avatar_url":"https://avatars3.githubusercontent.com/u/70953?v=4","gravatar_id":"","url":"https://api.github.com/users/MaineC","html_url":"https://github.com/MaineC","followers_url":"https://api.github.com/users/MaineC/followers","following_url":"https://api.github.com/users/MaineC/following{/other_user}","gists_url":"https://api.github.com/users/MaineC/gists{/gist_id}","starred_url":"https://api.github.com/users/MaineC/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaineC/subscriptions","organizations_url":"https://api.github.com/users/MaineC/orgs","repos_url":"https://api.github.com/users/MaineC/repos","events_url":"https://api.github.com/users/MaineC/events{/privacy}","received_events_url":"https://api.github.com/users/MaineC/received_events","type":"User","site_admin":false},"created_at":"2016-12-14T11:44:56Z","updated_at":"2016-12-14T11:44:56Z","author_association":"CONTRIBUTOR","body":"I may have read @chrono incorrectly, but the way I understood the bug report what he would like to see is some some kind of warning message in the logs when upgrading from 2.x to 5.x and leaving no longer supported configuration messages in place, no?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/267016031","html_url":"https://github.com/elastic/elasticsearch/issues/22128#issuecomment-267016031","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22128","id":267016031,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NzAxNjAzMQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-12-14T11:55:39Z","updated_at":"2016-12-14T11:55:39Z","author_association":"MEMBER","body":"We do error if `ES_HEAP_SIZE` (and other variables) is set. The trouble comes from the fact that we do not export those variables from the startup script. So, if you have set `ES_HEAP_SIZE`, and run the startup script, we do not export so you never see the error that `ES_HEAP_SIZE` is no longer supported and Elasticsearch starts with the default. We could conditionally (only if they are set) export these in 5.x only.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/267204857","html_url":"https://github.com/elastic/elasticsearch/issues/22128#issuecomment-267204857","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22128","id":267204857,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NzIwNDg1Nw==","user":{"login":"chrono","id":76803,"node_id":"MDQ6VXNlcjc2ODAz","avatar_url":"https://avatars3.githubusercontent.com/u/76803?v=4","gravatar_id":"","url":"https://api.github.com/users/chrono","html_url":"https://github.com/chrono","followers_url":"https://api.github.com/users/chrono/followers","following_url":"https://api.github.com/users/chrono/following{/other_user}","gists_url":"https://api.github.com/users/chrono/gists{/gist_id}","starred_url":"https://api.github.com/users/chrono/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrono/subscriptions","organizations_url":"https://api.github.com/users/chrono/orgs","repos_url":"https://api.github.com/users/chrono/repos","events_url":"https://api.github.com/users/chrono/events{/privacy}","received_events_url":"https://api.github.com/users/chrono/received_events","type":"User","site_admin":false},"created_at":"2016-12-15T00:57:24Z","updated_at":"2016-12-15T00:57:24Z","author_association":"NONE","body":"Yeah, my idea for a fix would be to pass the ENV vars to the startup script (for at least the majority of the 5.x lifecycle) so that the startup script can break if they're set.\r\n\r\nAt 6.x I'd think it would be safe to remove the export.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/267237425","html_url":"https://github.com/elastic/elasticsearch/issues/22128#issuecomment-267237425","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22128","id":267237425,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NzIzNzQyNQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-12-15T04:41:56Z","updated_at":"2016-12-15T04:41:56Z","author_association":"MEMBER","body":"Closed by #22183","performed_via_github_app":null}]