{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/2502","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2502/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2502/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/2502/events","html_url":"https://github.com/elastic/elasticsearch/issues/2502","id":9498260,"node_id":"MDU6SXNzdWU5NDk4MjYw","number":2502,"title":"Add scoring support to `has_child` and `has_parent` queries","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"labels":[{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":21541037,"node_id":"MDU6TGFiZWwyMTU0MTAzNw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.20.2","name":"v0.20.2","color":"DDDDDD","default":false,"description":null},{"id":17100279,"node_id":"MDU6TGFiZWwxNzEwMDI3OQ==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/v0.90.0.Beta1","name":"v0.90.0.Beta1","color":"DDDDDD","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2012-12-24T09:43:37Z","updated_at":"2012-12-24T10:39:53Z","closed_at":"2012-12-24T10:39:53Z","author_association":"MEMBER","active_lock_reason":null,"body":"Currently the `has_parent` and `has_child` queries are basically `constant_score` query wrappers around the `has_parent` and `has_child` filters. This adds score support to both queries. Both queries will support a `score_type` option. The `has_child` will support the same options as the `top_children` query and the `none` option which is the default and yields the current behaviour. The `has_parent` query will support the score type options: `score` and `none`. The latter is the default and yields the current behaviour.\n\nIf the `score_type` is set to a value other than `none` then the `has_parent` query will map the matched parent score into the related children documents. The `has_child` query will then map the matched children documents into the related parent document.  The `score_type` on both queries defines how the children documents scores are mapped in the parent documents. Both queries are executed in two phases. First phase collects the parent uid values of matching documents with an aggregated score per parent uid value. In the second phase either child or parent typed documents are emitted as hit that have the same parent uid value as found during the first phase. The score computed in the first phase will be used as score.\n","closed_by":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"performed_via_github_app":null}