{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/14011","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14011/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14011/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14011/events","html_url":"https://github.com/elastic/elasticsearch/issues/14011","id":110347793,"node_id":"MDU6SXNzdWUxMTAzNDc3OTM=","number":14011,"title":"Allocation not complete when only 1 of 2 awareness attributes is set to forced","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"labels":[{"id":837246479,"node_id":"MDU6TGFiZWw4MzcyNDY0Nzk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Allocation","name":":Distributed/Allocation","color":"0e8a16","default":false,"description":"All issues relating to the decision making around placing a shard (both master logic & on the nodes)"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2015-10-08T00:24:45Z","updated_at":"2018-03-20T09:59:43Z","closed_at":"2018-03-20T09:59:43Z","author_association":"MEMBER","active_lock_reason":null,"body":"This test uses a similar setup as 14010 (also using ES 1.7.2), the only difference is that for this use case, only 1 of the attributes (updateDomain) is set to be forced, the other attribute (faultDomain) is not set to be forced.\n\nWith this configuration, you will see from the video that the first issue I ran into is 14010 where I have to prod it by forcing a cluster reroute in order for it to complete its allocation.  Except that even after prodding, one of the shard is not at the right place.  If I use a manual reroute command to move it, it actually gets moved successfully and does not violate any routing rules.  Given that it does not violate any routing rules, it seems like there is another bug here where it is not moving the shard to the right place automatically as part of awareness.\n\nRepro video:\nhttps://drive.google.com/file/d/0B1rxJ0dAZbQvd3p5Y3F0QzItMWs/view?usp=sharing\n\nNode setup:\nhttps://docs.google.com/document/d/1ktYSzaZh_FlhloSextzCNh3HYYS0OEE8wPU4jhHGPTo/edit?usp=sharing\n","closed_by":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"performed_via_github_app":null}