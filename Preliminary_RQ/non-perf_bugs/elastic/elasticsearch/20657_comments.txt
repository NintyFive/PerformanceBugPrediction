[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/249614620","html_url":"https://github.com/elastic/elasticsearch/issues/20657#issuecomment-249614620","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20657","id":249614620,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTYxNDYyMA==","user":{"login":"cookandy","id":6495064,"node_id":"MDQ6VXNlcjY0OTUwNjQ=","avatar_url":"https://avatars0.githubusercontent.com/u/6495064?v=4","gravatar_id":"","url":"https://api.github.com/users/cookandy","html_url":"https://github.com/cookandy","followers_url":"https://api.github.com/users/cookandy/followers","following_url":"https://api.github.com/users/cookandy/following{/other_user}","gists_url":"https://api.github.com/users/cookandy/gists{/gist_id}","starred_url":"https://api.github.com/users/cookandy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cookandy/subscriptions","organizations_url":"https://api.github.com/users/cookandy/orgs","repos_url":"https://api.github.com/users/cookandy/repos","events_url":"https://api.github.com/users/cookandy/events{/privacy}","received_events_url":"https://api.github.com/users/cookandy/received_events","type":"User","site_admin":false},"created_at":"2016-09-26T16:02:37Z","updated_at":"2016-09-26T16:20:19Z","author_association":"NONE","body":"One other thing to note:  If I cluster the two nodes **before** loading the data, the health stays `green`.  As soon as I try to load the data I see the following log entries on the primary host:\n\n```\n[2016-09-26 16:00:34,321][INFO ][cluster.metadata         ] [elastic-search-1] [bank] creating index, cause [auto(bulk api)], templates [], shards [5]/[1], mappings []\n[2016-09-26 16:00:35,129][INFO ][cluster.routing.allocation] [elastic-search-1] Cluster health status changed from [RED] to [YELLOW] (reason: [shards started [[bank][1], [bank][1]] ...]).\n[2016-09-26 16:00:35,259][INFO ][cluster.metadata         ] [elastic-search-1] [bank] create_mapping [account]\n[2016-09-26 16:00:35,850][INFO ][cluster.routing.allocation] [elastic-search-1] Cluster health status changed from [YELLOW] to [GREEN] (reason: [shards started [[bank][3]] ...]).\n```\n\nAnd these `transport handler not found` errors on the secondary host:\n\n```\n[2016-09-26 16:00:35,110][WARN ][transport                ] [elastic-search-2] Transport response handler not found of id [69]\n[2016-09-26 16:00:35,152][WARN ][transport                ] [elastic-search-2] Transport response handler not found of id [72]\n```\n\n...and the status of the cluster goes to `yellow` and never recovers.  \n\nEventually the secondary node will leave:\n\n```\n[2016-09-26 16:17:51,463][INFO ][discovery.zen            ] [elastic-search-2] master_left [{elastic-search-1}{P-zPIMOZTEeswYuIewGdNw}{10.138.160.10}{10.138.160.10:9300}], reason [failed to ping, tried [3] times, each with  maximum [30s] timeout]\n[2016-09-26 16:17:51,464][WARN ][discovery.zen            ] [elastic-search-2] master left (reason = failed to ping, tried [3] times, each with  maximum [30s] timeout), current nodes: {{elastic-search-2}{82iFoY8YQz6_JZuhFm4Gbw}{10.138.160.210}{10.138.160.210:9300},}\n[2016-09-26 16:17:51,464][INFO ][cluster.service          ] [elastic-search-2] removed {{elastic-search-1}{P-zPIMOZTEeswYuIewGdNw}{10.138.160.10}{10.138.160.10:9300},}, reason: zen-disco-master_failed ({elastic-search-1}{P-zPIMOZTEeswYuIewGdNw}{10.138.160.10}{10.138.160.10:9300})\n[2016-09-26 16:18:21,489][INFO ][cluster.service          ] [elastic-search-2] detected_master {elastic-search-1}{P-zPIMOZTEeswYuIewGdNw}{10.138.160.10}{10.138.160.10:9300}, added {{elastic-search-1}{P-zPIMOZTEeswYuIewGdNw}{10.138.160.10}{10.138.160.10:9300},}, reason: zen-disco-receive(from master [{elastic-search-1}{P-zPIMOZTEeswYuIewGdNw}{10.138.160.10}{10.138.160.10:9300}])\n[2016-09-26 16:18:21,582][WARN ][transport                ] [elastic-search-2] Transport response handler not found of id [1158]\n[2016-09-26 16:18:21,644][WARN ][transport                ] [elastic-search-2] Transport response handler not found of id [1163]\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/249709032","html_url":"https://github.com/elastic/elasticsearch/issues/20657#issuecomment-249709032","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20657","id":249709032,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTcwOTAzMg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-09-26T21:53:42Z","updated_at":"2016-09-27T08:26:12Z","author_association":"MEMBER","body":"I'm not convinced this has anything to do with changing the MTU.\n\n> If I cluster the two nodes **before** loading the data, the health stays `green`.\n\nA cluster with no data is always green.\n\n> And these transport handler not found errors on the secondary host:\n\nThis is a known issue, it doesn't cause any problems, and it will be fixed in 2.4.1.\n\nCan you run:\n\n``` bash\n$ curl -XGET 'localhost:9200/_cluster/state?pretty'\n```\n\nand find a shard that is unassigned and then run\n\n``` bash\ncurl -XPOST 'localhost:9200/_cluster/reroute?explain&dry_run&pretty' -d '\n{\n  \"commands\": [ {\n    \"allocate\": {\n      \"index\": \"bank\", \"shard\": <ID of assigned shard>, \"node\": \"elastic-search-2\"\n    }\n  } ]\n}\n```\n\nreplacing `<ID of assigned shard>` by the shard ID of the unassigned shard (it's a number) and share the output here?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/249723932","html_url":"https://github.com/elastic/elasticsearch/issues/20657#issuecomment-249723932","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20657","id":249723932,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTcyMzkzMg==","user":{"login":"cookandy","id":6495064,"node_id":"MDQ6VXNlcjY0OTUwNjQ=","avatar_url":"https://avatars0.githubusercontent.com/u/6495064?v=4","gravatar_id":"","url":"https://api.github.com/users/cookandy","html_url":"https://github.com/cookandy","followers_url":"https://api.github.com/users/cookandy/followers","following_url":"https://api.github.com/users/cookandy/following{/other_user}","gists_url":"https://api.github.com/users/cookandy/gists{/gist_id}","starred_url":"https://api.github.com/users/cookandy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cookandy/subscriptions","organizations_url":"https://api.github.com/users/cookandy/orgs","repos_url":"https://api.github.com/users/cookandy/repos","events_url":"https://api.github.com/users/cookandy/events{/privacy}","received_events_url":"https://api.github.com/users/cookandy/received_events","type":"User","site_admin":false},"created_at":"2016-09-26T23:10:02Z","updated_at":"2016-09-26T23:10:02Z","author_association":"NONE","body":"Hi @jasontedor \n\nThanks for the reply.  Using a new cluster, I started both nodes, formed the cluster, and ran the status query successfully:\n\n```\n# curl 'http://10.138.160.10:9200/_cluster/state?pretty'\n{\n  \"cluster_name\" : \"elastic-search\",\n  \"version\" : 3,\n  \"state_uuid\" : \"gkn1pVpqSxi95frzk23KTg\",\n  \"master_node\" : \"RhvmJLBNTgyaKKtrD4EU7w\",\n  \"blocks\" : { },\n  \"nodes\" : {\n    \"RhvmJLBNTgyaKKtrD4EU7w\" : {\n      \"name\" : \"elastic-search-1\",\n      \"transport_address\" : \"10.138.160.10:9300\",\n      \"attributes\" : { }\n    },\n    \"570n2Eb-S7-WwpqasCwn6w\" : {\n      \"name\" : \"elastic-search-2\",\n      \"transport_address\" : \"10.138.160.210:9300\",\n      \"attributes\" : { }\n    }\n  },\n  \"metadata\" : {\n    \"cluster_uuid\" : \"2IrVFOTeSn6s8OxUcz4eww\",\n    \"templates\" : { },\n    \"indices\" : { }\n  },\n  \"routing_table\" : {\n    \"indices\" : { }\n  },\n  \"routing_nodes\" : {\n    \"unassigned\" : [ ],\n    \"nodes\" : {\n      \"RhvmJLBNTgyaKKtrD4EU7w\" : [ ],\n      \"570n2Eb-S7-WwpqasCwn6w\" : [ ]\n    }\n  }\n}\n```\n\nI try to load in the `accounts.json` file and it just hangs (as expected).  When I look at the status again I see:\n\n```\n# curl 'http://10.138.160.10:9200/_cluster/state?pretty'\n{\n  \"cluster_name\" : \"elastic-search\",\n  \"version\" : 11,\n  \"state_uuid\" : \"ozAHU4toQOOX6bt1y-GS-Q\",\n  \"master_node\" : \"RhvmJLBNTgyaKKtrD4EU7w\",\n  \"blocks\" : { },\n  \"nodes\" : {\n    \"RhvmJLBNTgyaKKtrD4EU7w\" : {\n      \"name\" : \"elastic-search-1\",\n      \"transport_address\" : \"10.138.160.10:9300\",\n      \"attributes\" : { }\n    },\n    \"570n2Eb-S7-WwpqasCwn6w\" : {\n      \"name\" : \"elastic-search-2\",\n      \"transport_address\" : \"10.138.160.210:9300\",\n      \"attributes\" : { }\n    }\n  },\n  \"metadata\" : {\n    \"cluster_uuid\" : \"2IrVFOTeSn6s8OxUcz4eww\",\n    \"templates\" : { },\n    \"indices\" : {\n      \"bank\" : {\n        \"state\" : \"open\",\n        \"settings\" : {\n          \"index\" : {\n            \"creation_date\" : \"1474930899421\",\n            \"number_of_shards\" : \"5\",\n            \"number_of_replicas\" : \"1\",\n            \"uuid\" : \"4qU-r2UOTSW8RWSj59KivQ\",\n            \"version\" : {\n              \"created\" : \"2040099\"\n            }\n          }\n        },\n        \"mappings\" : {\n          \"account\" : {\n            \"properties\" : {\n              \"account_number\" : {\n                \"type\" : \"long\"\n              },\n              \"firstname\" : {\n                \"type\" : \"string\"\n              },\n              \"address\" : {\n                \"type\" : \"string\"\n              },\n              \"balance\" : {\n                \"type\" : \"long\"\n              },\n              \"gender\" : {\n                \"type\" : \"string\"\n              },\n              \"city\" : {\n                \"type\" : \"string\"\n              },\n              \"employer\" : {\n                \"type\" : \"string\"\n              },\n              \"state\" : {\n                \"type\" : \"string\"\n              },\n              \"age\" : {\n                \"type\" : \"long\"\n              },\n              \"email\" : {\n                \"type\" : \"string\"\n              },\n              \"lastname\" : {\n                \"type\" : \"string\"\n              }\n            }\n          }\n        },\n        \"aliases\" : [ ]\n      }\n    }\n  },\n  \"routing_table\" : {\n    \"indices\" : {\n      \"bank\" : {\n        \"shards\" : {\n          \"1\" : [ {\n            \"state\" : \"STARTED\",\n            \"primary\" : false,\n            \"node\" : \"RhvmJLBNTgyaKKtrD4EU7w\",\n            \"relocating_node\" : null,\n            \"shard\" : 1,\n            \"index\" : \"bank\",\n            \"version\" : 4,\n            \"allocation_id\" : {\n              \"id\" : \"kNSRF_6gT-6gbdm5p25prg\"\n            }\n          }, {\n            \"state\" : \"STARTED\",\n            \"primary\" : true,\n            \"node\" : \"570n2Eb-S7-WwpqasCwn6w\",\n            \"relocating_node\" : null,\n            \"shard\" : 1,\n            \"index\" : \"bank\",\n            \"version\" : 4,\n            \"allocation_id\" : {\n              \"id\" : \"hZ7IlGmGRxq50g7tAgUCug\"\n            }\n          } ],\n          \"2\" : [ {\n            \"state\" : \"STARTED\",\n            \"primary\" : true,\n            \"node\" : \"RhvmJLBNTgyaKKtrD4EU7w\",\n            \"relocating_node\" : null,\n            \"shard\" : 2,\n            \"index\" : \"bank\",\n            \"version\" : 2,\n            \"allocation_id\" : {\n              \"id\" : \"1dJ3jxMdRaOkgKRFsCW8cg\"\n            }\n          }, {\n            \"state\" : \"INITIALIZING\",\n            \"primary\" : false,\n            \"node\" : \"570n2Eb-S7-WwpqasCwn6w\",\n            \"relocating_node\" : null,\n            \"shard\" : 2,\n            \"index\" : \"bank\",\n            \"version\" : 2,\n            \"allocation_id\" : {\n              \"id\" : \"GcNpfm34T5WIRX2N0PYbew\"\n            },\n            \"unassigned_info\" : {\n              \"reason\" : \"INDEX_CREATED\",\n              \"at\" : \"2016-09-26T23:01:39.558Z\"\n            }\n          } ],\n          \"4\" : [ {\n            \"state\" : \"STARTED\",\n            \"primary\" : true,\n            \"node\" : \"RhvmJLBNTgyaKKtrD4EU7w\",\n            \"relocating_node\" : null,\n            \"shard\" : 4,\n            \"index\" : \"bank\",\n            \"version\" : 3,\n            \"allocation_id\" : {\n              \"id\" : \"C9KsRr7BTp-YXUK_4pJxpA\"\n            }\n          }, {\n            \"state\" : \"INITIALIZING\",\n            \"primary\" : false,\n            \"node\" : \"570n2Eb-S7-WwpqasCwn6w\",\n            \"relocating_node\" : null,\n            \"shard\" : 4,\n            \"index\" : \"bank\",\n            \"version\" : 3,\n            \"allocation_id\" : {\n              \"id\" : \"oCNqLIjQQUKh8VVx6e1aaA\"\n            },\n            \"unassigned_info\" : {\n              \"reason\" : \"INDEX_CREATED\",\n              \"at\" : \"2016-09-26T23:01:39.558Z\"\n            }\n          } ],\n          \"3\" : [ {\n            \"state\" : \"STARTED\",\n            \"primary\" : false,\n            \"node\" : \"RhvmJLBNTgyaKKtrD4EU7w\",\n            \"relocating_node\" : null,\n            \"shard\" : 3,\n            \"index\" : \"bank\",\n            \"version\" : 4,\n            \"allocation_id\" : {\n              \"id\" : \"PwS0S4oRRWqt2Iq915p00Q\"\n            }\n          }, {\n            \"state\" : \"STARTED\",\n            \"primary\" : true,\n            \"node\" : \"570n2Eb-S7-WwpqasCwn6w\",\n            \"relocating_node\" : null,\n            \"shard\" : 3,\n            \"index\" : \"bank\",\n            \"version\" : 4,\n            \"allocation_id\" : {\n              \"id\" : \"swmHm3F0SI-xLB-GVsnwjg\"\n            }\n          } ],\n          \"0\" : [ {\n            \"state\" : \"STARTED\",\n            \"primary\" : true,\n            \"node\" : \"RhvmJLBNTgyaKKtrD4EU7w\",\n            \"relocating_node\" : null,\n            \"shard\" : 0,\n            \"index\" : \"bank\",\n            \"version\" : 3,\n            \"allocation_id\" : {\n              \"id\" : \"K3OogJa1QPaka8jquERndQ\"\n            }\n          }, {\n            \"state\" : \"STARTED\",\n            \"primary\" : false,\n            \"node\" : \"570n2Eb-S7-WwpqasCwn6w\",\n            \"relocating_node\" : null,\n            \"shard\" : 0,\n            \"index\" : \"bank\",\n            \"version\" : 3,\n            \"allocation_id\" : {\n              \"id\" : \"gu2FPnImQnqAmrNGkyhIRg\"\n            }\n          } ]\n        }\n      }\n    }\n  },\n  \"routing_nodes\" : {\n    \"unassigned\" : [ ],\n    \"nodes\" : {\n      \"RhvmJLBNTgyaKKtrD4EU7w\" : [ {\n        \"state\" : \"STARTED\",\n        \"primary\" : false,\n        \"node\" : \"RhvmJLBNTgyaKKtrD4EU7w\",\n        \"relocating_node\" : null,\n        \"shard\" : 1,\n        \"index\" : \"bank\",\n        \"version\" : 4,\n        \"allocation_id\" : {\n          \"id\" : \"kNSRF_6gT-6gbdm5p25prg\"\n        }\n      }, {\n        \"state\" : \"STARTED\",\n        \"primary\" : true,\n        \"node\" : \"RhvmJLBNTgyaKKtrD4EU7w\",\n        \"relocating_node\" : null,\n        \"shard\" : 2,\n        \"index\" : \"bank\",\n        \"version\" : 2,\n        \"allocation_id\" : {\n          \"id\" : \"1dJ3jxMdRaOkgKRFsCW8cg\"\n        }\n      }, {\n        \"state\" : \"STARTED\",\n        \"primary\" : true,\n        \"node\" : \"RhvmJLBNTgyaKKtrD4EU7w\",\n        \"relocating_node\" : null,\n        \"shard\" : 4,\n        \"index\" : \"bank\",\n        \"version\" : 3,\n        \"allocation_id\" : {\n          \"id\" : \"C9KsRr7BTp-YXUK_4pJxpA\"\n        }\n      }, {\n        \"state\" : \"STARTED\",\n        \"primary\" : false,\n        \"node\" : \"RhvmJLBNTgyaKKtrD4EU7w\",\n        \"relocating_node\" : null,\n        \"shard\" : 3,\n        \"index\" : \"bank\",\n        \"version\" : 4,\n        \"allocation_id\" : {\n          \"id\" : \"PwS0S4oRRWqt2Iq915p00Q\"\n        }\n      }, {\n        \"state\" : \"STARTED\",\n        \"primary\" : true,\n        \"node\" : \"RhvmJLBNTgyaKKtrD4EU7w\",\n        \"relocating_node\" : null,\n        \"shard\" : 0,\n        \"index\" : \"bank\",\n        \"version\" : 3,\n        \"allocation_id\" : {\n          \"id\" : \"K3OogJa1QPaka8jquERndQ\"\n        }\n      } ],\n      \"570n2Eb-S7-WwpqasCwn6w\" : [ {\n        \"state\" : \"STARTED\",\n        \"primary\" : true,\n        \"node\" : \"570n2Eb-S7-WwpqasCwn6w\",\n        \"relocating_node\" : null,\n        \"shard\" : 1,\n        \"index\" : \"bank\",\n        \"version\" : 4,\n        \"allocation_id\" : {\n          \"id\" : \"hZ7IlGmGRxq50g7tAgUCug\"\n        }\n      }, {\n        \"state\" : \"INITIALIZING\",\n        \"primary\" : false,\n        \"node\" : \"570n2Eb-S7-WwpqasCwn6w\",\n        \"relocating_node\" : null,\n        \"shard\" : 2,\n        \"index\" : \"bank\",\n        \"version\" : 2,\n        \"allocation_id\" : {\n          \"id\" : \"GcNpfm34T5WIRX2N0PYbew\"\n        },\n        \"unassigned_info\" : {\n          \"reason\" : \"INDEX_CREATED\",\n          \"at\" : \"2016-09-26T23:01:39.558Z\"\n        }\n      }, {\n        \"state\" : \"INITIALIZING\",\n        \"primary\" : false,\n        \"node\" : \"570n2Eb-S7-WwpqasCwn6w\",\n        \"relocating_node\" : null,\n        \"shard\" : 4,\n        \"index\" : \"bank\",\n        \"version\" : 3,\n        \"allocation_id\" : {\n          \"id\" : \"oCNqLIjQQUKh8VVx6e1aaA\"\n        },\n        \"unassigned_info\" : {\n          \"reason\" : \"INDEX_CREATED\",\n          \"at\" : \"2016-09-26T23:01:39.558Z\"\n        }\n      }, {\n        \"state\" : \"STARTED\",\n        \"primary\" : true,\n        \"node\" : \"570n2Eb-S7-WwpqasCwn6w\",\n        \"relocating_node\" : null,\n        \"shard\" : 3,\n        \"index\" : \"bank\",\n        \"version\" : 4,\n        \"allocation_id\" : {\n          \"id\" : \"swmHm3F0SI-xLB-GVsnwjg\"\n        }\n      }, {\n        \"state\" : \"STARTED\",\n        \"primary\" : false,\n        \"node\" : \"570n2Eb-S7-WwpqasCwn6w\",\n        \"relocating_node\" : null,\n        \"shard\" : 0,\n        \"index\" : \"bank\",\n        \"version\" : 3,\n        \"allocation_id\" : {\n          \"id\" : \"gu2FPnImQnqAmrNGkyhIRg\"\n        }\n      } ]\n    }\n  }\n}\n```\n\nSo I tried running the reroute command against `shard 2`:\n\n```\ncurl -XPOST '10.138.160.10:9200/_cluster/reroute?explain&dry_run&pretty' -d '\n> {\n>   \"commands\": [ {\n>     \"allocate_replica\": {\n>       \"index\": \"bank\", \"shard\": 2, \"node\": \"elasticsearch-search-2\"\n>     }\n>   } ]\n> }'\n{\n  \"error\" : {\n    \"root_cause\" : [ {\n      \"type\" : \"illegal_argument_exception\",\n      \"reason\" : \"No allocation command factory registered for name [allocate_replica]\"\n    } ],\n    \"type\" : \"illegal_argument_exception\",\n    \"reason\" : \"No allocation command factory registered for name [allocate_replica]\"\n  },\n  \"status\" : 400\n}\n```\n\nNot sure if this is the right response... hopefully it help.  Happy to provide any additional logs if needed.  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/249728811","html_url":"https://github.com/elastic/elasticsearch/issues/20657#issuecomment-249728811","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20657","id":249728811,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTcyODgxMQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-09-26T23:40:38Z","updated_at":"2016-09-26T23:40:38Z","author_association":"MEMBER","body":"The last command should use `allocate`, not `allocate_replica` (that's the syntax in 5.x but you're on 2.x; I'm sorry for the mistake). Can you rerun the command?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/249740939","html_url":"https://github.com/elastic/elasticsearch/issues/20657#issuecomment-249740939","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20657","id":249740939,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTc0MDkzOQ==","user":{"login":"cookandy","id":6495064,"node_id":"MDQ6VXNlcjY0OTUwNjQ=","avatar_url":"https://avatars0.githubusercontent.com/u/6495064?v=4","gravatar_id":"","url":"https://api.github.com/users/cookandy","html_url":"https://github.com/cookandy","followers_url":"https://api.github.com/users/cookandy/followers","following_url":"https://api.github.com/users/cookandy/following{/other_user}","gists_url":"https://api.github.com/users/cookandy/gists{/gist_id}","starred_url":"https://api.github.com/users/cookandy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cookandy/subscriptions","organizations_url":"https://api.github.com/users/cookandy/orgs","repos_url":"https://api.github.com/users/cookandy/repos","events_url":"https://api.github.com/users/cookandy/events{/privacy}","received_events_url":"https://api.github.com/users/cookandy/received_events","type":"User","site_admin":false},"created_at":"2016-09-27T01:09:46Z","updated_at":"2016-09-27T01:09:46Z","author_association":"NONE","body":"Hi,\n\nNo problem, here's the output (this time it was shard `3`):\n\n```\n{\n  \"commands\": [ {\n    \"allocate\": {\n      \"index\": \"bank\", \"shard\": 3, \"node\": \"elasticsearch-search-2\"\n    }\n  } ]\n}'\n{\n  \"error\" : {\n    \"root_cause\" : [ {\n      \"type\" : \"illegal_argument_exception\",\n      \"reason\" : \"failed to resolve [elasticsearch-search-2 ], no matching nodes\"\n    } ],\n    \"type\" : \"illegal_argument_exception\",\n    \"reason\" : \"failed to resolve [elasticsearch-search-2 ], no matching nodes\"\n  },\n  \"status\" : 400\n}\n```\n\nNot sure why it says `no matching nodes`:\n\n```\ncurl 'http://10.138.160.10:9200/_cluster/state?pretty'\n{\n  \"cluster_name\" : \"elastic-search\",\n  \"version\" : 10,\n  \"state_uuid\" : \"JsbJQzneQ5WM0ts1BSY5YA\",\n  \"master_node\" : \"iTHoie0yQsug9aiDG9hXqA\",\n  \"blocks\" : { },\n  \"nodes\" : {\n    \"yyJzVi7fQ9WRhEP4c4vssA\" : {\n      \"name\" : \"elastic-search-2\",\n      \"transport_address\" : \"10.138.160.210:9300\",\n      \"attributes\" : { }\n    },\n    \"iTHoie0yQsug9aiDG9hXqA\" : {\n      \"name\" : \"elastic-search-1\",\n      \"transport_address\" : \"10.138.160.10:9300\",\n      \"attributes\" : { }\n    }\n  }\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/249799731","html_url":"https://github.com/elastic/elasticsearch/issues/20657#issuecomment-249799731","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20657","id":249799731,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTc5OTczMQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-09-27T08:26:42Z","updated_at":"2016-09-27T08:26:42Z","author_association":"MEMBER","body":"It should be `elastic-search-2`; we'll get there yet! :smile:\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/249910037","html_url":"https://github.com/elastic/elasticsearch/issues/20657#issuecomment-249910037","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20657","id":249910037,"node_id":"MDEyOklzc3VlQ29tbWVudDI0OTkxMDAzNw==","user":{"login":"cookandy","id":6495064,"node_id":"MDQ6VXNlcjY0OTUwNjQ=","avatar_url":"https://avatars0.githubusercontent.com/u/6495064?v=4","gravatar_id":"","url":"https://api.github.com/users/cookandy","html_url":"https://github.com/cookandy","followers_url":"https://api.github.com/users/cookandy/followers","following_url":"https://api.github.com/users/cookandy/following{/other_user}","gists_url":"https://api.github.com/users/cookandy/gists{/gist_id}","starred_url":"https://api.github.com/users/cookandy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cookandy/subscriptions","organizations_url":"https://api.github.com/users/cookandy/orgs","repos_url":"https://api.github.com/users/cookandy/repos","events_url":"https://api.github.com/users/cookandy/events{/privacy}","received_events_url":"https://api.github.com/users/cookandy/received_events","type":"User","site_admin":false},"created_at":"2016-09-27T15:57:33Z","updated_at":"2016-09-28T18:46:07Z","author_association":"NONE","body":"Oops - not sure how I missed that!\n\nOk, finally got a good output.  Looks like it failed with `failed to find [bank][1] on the list of unassigned shards`:\n\n```\n> {\n>    \"commands\": [ {\n>      \"allocate\": {\n>       \"index\": \"bank\", \"shard\": 1, \"node\": \"elastic-search-2\"\n>     }\n>   } ]\n> }'\n{\n  \"acknowledged\" : true,\n  \"state\" : {\n    \"version\" : 11,\n    \"state_uuid\" : \"slxSROySRoivWlpz68E41Q\",\n    \"master_node\" : \"Umz4vi3_TRyeFnZ-QN1BBg\",\n    \"blocks\" : { },\n    \"nodes\" : {\n      \"0aEB86V_S7OELTXIcAExbQ\" : {\n        \"name\" : \"elastic-search-2\",\n        \"transport_address\" : \"10.138.160.210:9300\",\n        \"attributes\" : { }\n      },\n      \"Umz4vi3_TRyeFnZ-QN1BBg\" : {\n        \"name\" : \"elastic-search-1\",\n        \"transport_address\" : \"10.138.160.10:9300\",\n        \"attributes\" : { }\n      }\n    },\n    \"routing_table\" : {\n      \"indices\" : {\n        \"bank\" : {\n          \"shards\" : {\n            \"2\" : [ {\n              \"state\" : \"STARTED\",\n              \"primary\" : true,\n              \"node\" : \"0aEB86V_S7OELTXIcAExbQ\",\n              \"relocating_node\" : null,\n              \"shard\" : 2,\n              \"index\" : \"bank\",\n              \"version\" : 4,\n              \"allocation_id\" : {\n                \"id\" : \"6rD8M3PWRpah1P1O29hUGg\"\n              }\n            }, {\n              \"state\" : \"STARTED\",\n              \"primary\" : false,\n              \"node\" : \"Umz4vi3_TRyeFnZ-QN1BBg\",\n              \"relocating_node\" : null,\n              \"shard\" : 2,\n              \"index\" : \"bank\",\n              \"version\" : 4,\n              \"allocation_id\" : {\n                \"id\" : \"HxY8V7SlTFiIyvEm6MpDZg\"\n              }\n            } ],\n            \"1\" : [ {\n              \"state\" : \"INITIALIZING\",\n              \"primary\" : false,\n              \"node\" : \"0aEB86V_S7OELTXIcAExbQ\",\n              \"relocating_node\" : null,\n              \"shard\" : 1,\n              \"index\" : \"bank\",\n              \"version\" : 2,\n              \"allocation_id\" : {\n                \"id\" : \"AVN0EhNlR9OWgh_9PlH5eA\"\n              },\n              \"unassigned_info\" : {\n                \"reason\" : \"INDEX_CREATED\",\n                \"at\" : \"2016-09-27T15:49:55.359Z\"\n              }\n            }, {\n              \"state\" : \"STARTED\",\n              \"primary\" : true,\n              \"node\" : \"Umz4vi3_TRyeFnZ-QN1BBg\",\n              \"relocating_node\" : null,\n              \"shard\" : 1,\n              \"index\" : \"bank\",\n              \"version\" : 2,\n              \"allocation_id\" : {\n                \"id\" : \"-Wuh_90KT4ubhenevIEA_Q\"\n              }\n            } ],\n            \"4\" : [ {\n              \"state\" : \"STARTED\",\n              \"primary\" : true,\n              \"node\" : \"0aEB86V_S7OELTXIcAExbQ\",\n              \"relocating_node\" : null,\n              \"shard\" : 4,\n              \"index\" : \"bank\",\n              \"version\" : 4,\n              \"allocation_id\" : {\n                \"id\" : \"sOgZQpldSc29wbjtvmvqpA\"\n              }\n            }, {\n              \"state\" : \"STARTED\",\n              \"primary\" : false,\n              \"node\" : \"Umz4vi3_TRyeFnZ-QN1BBg\",\n              \"relocating_node\" : null,\n              \"shard\" : 4,\n              \"index\" : \"bank\",\n              \"version\" : 4,\n              \"allocation_id\" : {\n                \"id\" : \"J-IxE0HjQCGG0cjNtMtvFw\"\n              }\n            } ],\n            \"3\" : [ {\n              \"state\" : \"STARTED\",\n              \"primary\" : false,\n              \"node\" : \"0aEB86V_S7OELTXIcAExbQ\",\n              \"relocating_node\" : null,\n              \"shard\" : 3,\n              \"index\" : \"bank\",\n              \"version\" : 3,\n              \"allocation_id\" : {\n                \"id\" : \"cpyRrf_cSTqjdP9twzchNQ\"\n              }\n            }, {\n              \"state\" : \"STARTED\",\n              \"primary\" : true,\n              \"node\" : \"Umz4vi3_TRyeFnZ-QN1BBg\",\n              \"relocating_node\" : null,\n              \"shard\" : 3,\n              \"index\" : \"bank\",\n              \"version\" : 3,\n              \"allocation_id\" : {\n                \"id\" : \"eKReCCWrTQaUtHqhaJtvRA\"\n              }\n            } ],\n            \"0\" : [ {\n              \"state\" : \"STARTED\",\n              \"primary\" : true,\n              \"node\" : \"0aEB86V_S7OELTXIcAExbQ\",\n              \"relocating_node\" : null,\n              \"shard\" : 0,\n              \"index\" : \"bank\",\n              \"version\" : 3,\n              \"allocation_id\" : {\n                \"id\" : \"Syi61NmDRyywfx814Sp97A\"\n              }\n            }, {\n              \"state\" : \"INITIALIZING\",\n              \"primary\" : false,\n              \"node\" : \"Umz4vi3_TRyeFnZ-QN1BBg\",\n              \"relocating_node\" : null,\n              \"shard\" : 0,\n              \"index\" : \"bank\",\n              \"version\" : 3,\n              \"allocation_id\" : {\n                \"id\" : \"VEurk-aLRPeRojYMCjxDew\"\n              },\n              \"unassigned_info\" : {\n                \"reason\" : \"INDEX_CREATED\",\n                \"at\" : \"2016-09-27T15:49:55.359Z\"\n              }\n            } ]\n          }\n        }\n      }\n    },\n    \"routing_nodes\" : {\n      \"unassigned\" : [ ],\n      \"nodes\" : {\n        \"0aEB86V_S7OELTXIcAExbQ\" : [ {\n          \"state\" : \"STARTED\",\n          \"primary\" : true,\n          \"node\" : \"0aEB86V_S7OELTXIcAExbQ\",\n          \"relocating_node\" : null,\n          \"shard\" : 2,\n          \"index\" : \"bank\",\n          \"version\" : 4,\n          \"allocation_id\" : {\n            \"id\" : \"6rD8M3PWRpah1P1O29hUGg\"\n          }\n        }, {\n          \"state\" : \"INITIALIZING\",\n          \"primary\" : false,\n          \"node\" : \"0aEB86V_S7OELTXIcAExbQ\",\n          \"relocating_node\" : null,\n          \"shard\" : 1,\n          \"index\" : \"bank\",\n          \"version\" : 2,\n          \"allocation_id\" : {\n            \"id\" : \"AVN0EhNlR9OWgh_9PlH5eA\"\n          },\n          \"unassigned_info\" : {\n            \"reason\" : \"INDEX_CREATED\",\n            \"at\" : \"2016-09-27T15:49:55.359Z\"\n          }\n        }, {\n          \"state\" : \"STARTED\",\n          \"primary\" : true,\n          \"node\" : \"0aEB86V_S7OELTXIcAExbQ\",\n          \"relocating_node\" : null,\n          \"shard\" : 4,\n          \"index\" : \"bank\",\n          \"version\" : 4,\n          \"allocation_id\" : {\n            \"id\" : \"sOgZQpldSc29wbjtvmvqpA\"\n          }\n        }, {\n          \"state\" : \"STARTED\",\n          \"primary\" : false,\n          \"node\" : \"0aEB86V_S7OELTXIcAExbQ\",\n          \"relocating_node\" : null,\n          \"shard\" : 3,\n          \"index\" : \"bank\",\n          \"version\" : 3,\n          \"allocation_id\" : {\n            \"id\" : \"cpyRrf_cSTqjdP9twzchNQ\"\n          }\n        }, {\n          \"state\" : \"STARTED\",\n          \"primary\" : true,\n          \"node\" : \"0aEB86V_S7OELTXIcAExbQ\",\n          \"relocating_node\" : null,\n          \"shard\" : 0,\n          \"index\" : \"bank\",\n          \"version\" : 3,\n          \"allocation_id\" : {\n            \"id\" : \"Syi61NmDRyywfx814Sp97A\"\n          }\n        } ],\n        \"Umz4vi3_TRyeFnZ-QN1BBg\" : [ {\n          \"state\" : \"STARTED\",\n          \"primary\" : false,\n          \"node\" : \"Umz4vi3_TRyeFnZ-QN1BBg\",\n          \"relocating_node\" : null,\n          \"shard\" : 2,\n          \"index\" : \"bank\",\n          \"version\" : 4,\n          \"allocation_id\" : {\n            \"id\" : \"HxY8V7SlTFiIyvEm6MpDZg\"\n          }\n        }, {\n          \"state\" : \"STARTED\",\n          \"primary\" : true,\n          \"node\" : \"Umz4vi3_TRyeFnZ-QN1BBg\",\n          \"relocating_node\" : null,\n          \"shard\" : 1,\n          \"index\" : \"bank\",\n          \"version\" : 2,\n          \"allocation_id\" : {\n            \"id\" : \"-Wuh_90KT4ubhenevIEA_Q\"\n          }\n        }, {\n          \"state\" : \"STARTED\",\n          \"primary\" : false,\n          \"node\" : \"Umz4vi3_TRyeFnZ-QN1BBg\",\n          \"relocating_node\" : null,\n          \"shard\" : 4,\n          \"index\" : \"bank\",\n          \"version\" : 4,\n          \"allocation_id\" : {\n            \"id\" : \"J-IxE0HjQCGG0cjNtMtvFw\"\n          }\n        }, {\n          \"state\" : \"STARTED\",\n          \"primary\" : true,\n          \"node\" : \"Umz4vi3_TRyeFnZ-QN1BBg\",\n          \"relocating_node\" : null,\n          \"shard\" : 3,\n          \"index\" : \"bank\",\n          \"version\" : 3,\n          \"allocation_id\" : {\n            \"id\" : \"eKReCCWrTQaUtHqhaJtvRA\"\n          }\n        }, {\n          \"state\" : \"INITIALIZING\",\n          \"primary\" : false,\n          \"node\" : \"Umz4vi3_TRyeFnZ-QN1BBg\",\n          \"relocating_node\" : null,\n          \"shard\" : 0,\n          \"index\" : \"bank\",\n          \"version\" : 3,\n          \"allocation_id\" : {\n            \"id\" : \"VEurk-aLRPeRojYMCjxDew\"\n          },\n          \"unassigned_info\" : {\n            \"reason\" : \"INDEX_CREATED\",\n            \"at\" : \"2016-09-27T15:49:55.359Z\"\n          }\n        } ]\n      }\n    }\n  },\n  \"explanations\" : [ {\n    \"command\" : \"allocate\",\n    \"parameters\" : {\n      \"index\" : \"bank\",\n      \"shard\" : 1,\n      \"node\" : \"elastic-search-2\",\n      \"allow_primary\" : false\n    },\n    \"decisions\" : [ {\n      \"decider\" : \"allocate_allocation_command\",\n      \"decision\" : \"NO\",\n      \"explanation\" : \"failed to find [bank][1] on the list of unassigned shards\"\n    } ]\n  } ]\n}\n```\n\n@jasontedor -- any thoughts on this one?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/250629534","html_url":"https://github.com/elastic/elasticsearch/issues/20657#issuecomment-250629534","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20657","id":250629534,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MDYyOTUzNA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-09-30T00:31:25Z","updated_at":"2016-09-30T00:31:25Z","author_association":"MEMBER","body":"@cookandy You have to pick a shard that is not assigned (but your latest cluster state doesn't show any unassigned shards).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/250645456","html_url":"https://github.com/elastic/elasticsearch/issues/20657#issuecomment-250645456","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20657","id":250645456,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MDY0NTQ1Ng==","user":{"login":"cookandy","id":6495064,"node_id":"MDQ6VXNlcjY0OTUwNjQ=","avatar_url":"https://avatars0.githubusercontent.com/u/6495064?v=4","gravatar_id":"","url":"https://api.github.com/users/cookandy","html_url":"https://github.com/cookandy","followers_url":"https://api.github.com/users/cookandy/followers","following_url":"https://api.github.com/users/cookandy/following{/other_user}","gists_url":"https://api.github.com/users/cookandy/gists{/gist_id}","starred_url":"https://api.github.com/users/cookandy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cookandy/subscriptions","organizations_url":"https://api.github.com/users/cookandy/orgs","repos_url":"https://api.github.com/users/cookandy/repos","events_url":"https://api.github.com/users/cookandy/events{/privacy}","received_events_url":"https://api.github.com/users/cookandy/received_events","type":"User","site_admin":false},"created_at":"2016-09-30T02:42:01Z","updated_at":"2016-09-30T02:42:01Z","author_association":"NONE","body":"Let's try it again, from the beginning:\n\nStart Node 1 and 2, everything looks good:\n\n```\n# curl 'http://10.138.160.10:9200/_cluster/state?pretty'\n{\n  \"cluster_name\" : \"elastic-search\",\n  \"version\" : 3,\n  \"state_uuid\" : \"0_G4EkNNQOO3UC_KmkrwDw\",\n  \"master_node\" : \"iN9iu67OTJaGZzIFWzKdmA\",\n  \"blocks\" : { },\n  \"nodes\" : {\n    \"iN9iu67OTJaGZzIFWzKdmA\" : {\n      \"name\" : \"elastic-search-1\",\n      \"transport_address\" : \"10.138.160.10:9300\",\n      \"attributes\" : { }\n    },\n    \"Uvor9IWBQFmGoBVd0AJBnw\" : {\n      \"name\" : \"elastic-search-2\",\n      \"transport_address\" : \"10.138.160.210:9300\",\n      \"attributes\" : { }\n    }\n  },\n  \"metadata\" : {\n    \"cluster_uuid\" : \"CUJsoHlQQiqIhz68ljOUmQ\",\n    \"templates\" : { },\n    \"indices\" : { }\n  },\n  \"routing_table\" : {\n    \"indices\" : { }\n  },\n  \"routing_nodes\" : {\n    \"unassigned\" : [ ],\n    \"nodes\" : {\n      \"Uvor9IWBQFmGoBVd0AJBnw\" : [ ],\n      \"iN9iu67OTJaGZzIFWzKdmA\" : [ ]\n    }\n  }\n}\n```\n\nTry to load `accounts.json` on Node 1.  Cluster shows `shard 2` as `UNASSIGNED`\n\n```\n# curl 'http://10.138.160.10:9200/_cluster/state?pretty'\n{\n  \"cluster_name\" : \"elastic-search\",\n  \"version\" : 5,\n  \"state_uuid\" : \"NWcgBxXuSYqBpVb_t_OGiQ\",\n  \"master_node\" : \"iN9iu67OTJaGZzIFWzKdmA\",\n  \"blocks\" : { },\n  \"nodes\" : {\n    \"iN9iu67OTJaGZzIFWzKdmA\" : {\n      \"name\" : \"elastic-search-1\",\n      \"transport_address\" : \"10.138.160.10:9300\",\n      \"attributes\" : { }\n    },\n    \"Uvor9IWBQFmGoBVd0AJBnw\" : {\n      \"name\" : \"elastic-search-2\",\n      \"transport_address\" : \"10.138.160.210:9300\",\n      \"attributes\" : { }\n    }\n  },\n  \"metadata\" : {\n    \"cluster_uuid\" : \"CUJsoHlQQiqIhz68ljOUmQ\",\n    \"templates\" : { },\n    \"indices\" : {\n      \"bank\" : {\n        \"state\" : \"open\",\n        \"settings\" : {\n          \"index\" : {\n            \"creation_date\" : \"1475202600895\",\n            \"number_of_shards\" : \"5\",\n            \"number_of_replicas\" : \"1\",\n            \"uuid\" : \"kG6lUvG9QTqhB256X_N6xg\",\n            \"version\" : {\n              \"created\" : \"2040099\"\n            }\n          }\n        },\n        \"mappings\" : { },\n        \"aliases\" : [ ]\n      }\n    }\n  },\n  \"routing_table\" : {\n    \"indices\" : {\n      \"bank\" : {\n        \"shards\" : {\n          \"2\" : [ {\n            \"state\" : \"STARTED\",\n            \"primary\" : true,\n            \"node\" : \"Uvor9IWBQFmGoBVd0AJBnw\",\n            \"relocating_node\" : null,\n            \"shard\" : 2,\n            \"index\" : \"bank\",\n            \"version\" : 2,\n            \"allocation_id\" : {\n              \"id\" : \"whYVQvYKReiLYorph-jW2g\"\n            }\n          }, {\n            \"state\" : \"UNASSIGNED\",\n            \"primary\" : false,\n            \"node\" : null,\n            \"relocating_node\" : null,\n            \"shard\" : 2,\n            \"index\" : \"bank\",\n            \"version\" : 2,\n            \"unassigned_info\" : {\n              \"reason\" : \"INDEX_CREATED\",\n              \"at\" : \"2016-09-30T02:30:00.997Z\"\n            }\n          } ],\n          \"1\" : [ {\n            \"state\" : \"INITIALIZING\",\n            \"primary\" : true,\n            \"node\" : \"iN9iu67OTJaGZzIFWzKdmA\",\n            \"relocating_node\" : null,\n            \"shard\" : 1,\n            \"index\" : \"bank\",\n            \"version\" : 1,\n            \"allocation_id\" : {\n              \"id\" : \"DV2pf9RRRoi2N9-LmszvVw\"\n            },\n            \"unassigned_info\" : {\n              \"reason\" : \"INDEX_CREATED\",\n              \"at\" : \"2016-09-30T02:30:00.997Z\"\n            }\n          }, {\n            \"state\" : \"UNASSIGNED\",\n            \"primary\" : false,\n            \"node\" : null,\n            \"relocating_node\" : null,\n            \"shard\" : 1,\n            \"index\" : \"bank\",\n            \"version\" : 1,\n            \"unassigned_info\" : {\n              \"reason\" : \"INDEX_CREATED\",\n              \"at\" : \"2016-09-30T02:30:00.997Z\"\n            }\n          } ],\n          \"3\" : [ {\n            \"state\" : \"INITIALIZING\",\n            \"primary\" : true,\n            \"node\" : \"iN9iu67OTJaGZzIFWzKdmA\",\n            \"relocating_node\" : null,\n            \"shard\" : 3,\n            \"index\" : \"bank\",\n            \"version\" : 1,\n            \"allocation_id\" : {\n              \"id\" : \"-X5uQQxKRnmpH8GWOby13g\"\n            },\n            \"unassigned_info\" : {\n              \"reason\" : \"INDEX_CREATED\",\n              \"at\" : \"2016-09-30T02:30:00.997Z\"\n            }\n          }, {\n            \"state\" : \"UNASSIGNED\",\n            \"primary\" : false,\n            \"node\" : null,\n            \"relocating_node\" : null,\n            \"shard\" : 3,\n            \"index\" : \"bank\",\n            \"version\" : 1,\n            \"unassigned_info\" : {\n              \"reason\" : \"INDEX_CREATED\",\n              \"at\" : \"2016-09-30T02:30:00.997Z\"\n            }\n          } ],\n          \"4\" : [ {\n            \"state\" : \"STARTED\",\n            \"primary\" : true,\n            \"node\" : \"Uvor9IWBQFmGoBVd0AJBnw\",\n            \"relocating_node\" : null,\n            \"shard\" : 4,\n            \"index\" : \"bank\",\n            \"version\" : 2,\n            \"allocation_id\" : {\n              \"id\" : \"oHvW-WOFTPe3FWO_g2hUDw\"\n            }\n          }, {\n            \"state\" : \"UNASSIGNED\",\n            \"primary\" : false,\n            \"node\" : null,\n            \"relocating_node\" : null,\n            \"shard\" : 4,\n            \"index\" : \"bank\",\n            \"version\" : 2,\n            \"unassigned_info\" : {\n              \"reason\" : \"INDEX_CREATED\",\n              \"at\" : \"2016-09-30T02:30:00.997Z\"\n            }\n          } ],\n          \"0\" : [ {\n            \"state\" : \"STARTED\",\n            \"primary\" : true,\n            \"node\" : \"Uvor9IWBQFmGoBVd0AJBnw\",\n            \"relocating_node\" : null,\n            \"shard\" : 0,\n            \"index\" : \"bank\",\n            \"version\" : 2,\n            \"allocation_id\" : {\n              \"id\" : \"iTzIYMP-RNilDH1No_T4QA\"\n            }\n          }, {\n            \"state\" : \"UNASSIGNED\",\n            \"primary\" : false,\n            \"node\" : null,\n            \"relocating_node\" : null,\n            \"shard\" : 0,\n            \"index\" : \"bank\",\n            \"version\" : 2,\n            \"unassigned_info\" : {\n              \"reason\" : \"INDEX_CREATED\",\n              \"at\" : \"2016-09-30T02:30:00.997Z\"\n            }\n          } ]\n        }\n      }\n    }\n  },\n  \"routing_nodes\" : {\n    \"unassigned\" : [ {\n      \"state\" : \"UNASSIGNED\",\n      \"primary\" : false,\n      \"node\" : null,\n      \"relocating_node\" : null,\n      \"shard\" : 2,\n      \"index\" : \"bank\",\n      \"version\" : 2,\n      \"unassigned_info\" : {\n        \"reason\" : \"INDEX_CREATED\",\n        \"at\" : \"2016-09-30T02:30:00.997Z\"\n      }\n    }, {\n      \"state\" : \"UNASSIGNED\",\n      \"primary\" : false,\n      \"node\" : null,\n      \"relocating_node\" : null,\n      \"shard\" : 1,\n      \"index\" : \"bank\",\n      \"version\" : 1,\n      \"unassigned_info\" : {\n        \"reason\" : \"INDEX_CREATED\",\n        \"at\" : \"2016-09-30T02:30:00.997Z\"\n      }\n    }, {\n      \"state\" : \"UNASSIGNED\",\n      \"primary\" : false,\n      \"node\" : null,\n      \"relocating_node\" : null,\n      \"shard\" : 3,\n      \"index\" : \"bank\",\n      \"version\" : 1,\n      \"unassigned_info\" : {\n        \"reason\" : \"INDEX_CREATED\",\n        \"at\" : \"2016-09-30T02:30:00.997Z\"\n      }\n    }, {\n      \"state\" : \"UNASSIGNED\",\n      \"primary\" : false,\n      \"node\" : null,\n      \"relocating_node\" : null,\n      \"shard\" : 4,\n      \"index\" : \"bank\",\n      \"version\" : 2,\n      \"unassigned_info\" : {\n        \"reason\" : \"INDEX_CREATED\",\n        \"at\" : \"2016-09-30T02:30:00.997Z\"\n      }\n    }, {\n      \"state\" : \"UNASSIGNED\",\n      \"primary\" : false,\n      \"node\" : null,\n      \"relocating_node\" : null,\n      \"shard\" : 0,\n      \"index\" : \"bank\",\n      \"version\" : 2,\n      \"unassigned_info\" : {\n        \"reason\" : \"INDEX_CREATED\",\n        \"at\" : \"2016-09-30T02:30:00.997Z\"\n      }\n    } ],\n    \"nodes\" : {\n      \"Uvor9IWBQFmGoBVd0AJBnw\" : [ {\n        \"state\" : \"STARTED\",\n        \"primary\" : true,\n        \"node\" : \"Uvor9IWBQFmGoBVd0AJBnw\",\n        \"relocating_node\" : null,\n        \"shard\" : 2,\n        \"index\" : \"bank\",\n        \"version\" : 2,\n        \"allocation_id\" : {\n          \"id\" : \"whYVQvYKReiLYorph-jW2g\"\n        }\n      }, {\n        \"state\" : \"STARTED\",\n        \"primary\" : true,\n        \"node\" : \"Uvor9IWBQFmGoBVd0AJBnw\",\n        \"relocating_node\" : null,\n        \"shard\" : 4,\n        \"index\" : \"bank\",\n        \"version\" : 2,\n        \"allocation_id\" : {\n          \"id\" : \"oHvW-WOFTPe3FWO_g2hUDw\"\n        }\n      }, {\n        \"state\" : \"STARTED\",\n        \"primary\" : true,\n        \"node\" : \"Uvor9IWBQFmGoBVd0AJBnw\",\n        \"relocating_node\" : null,\n        \"shard\" : 0,\n        \"index\" : \"bank\",\n        \"version\" : 2,\n        \"allocation_id\" : {\n          \"id\" : \"iTzIYMP-RNilDH1No_T4QA\"\n        }\n      } ],\n      \"iN9iu67OTJaGZzIFWzKdmA\" : [ {\n        \"state\" : \"INITIALIZING\",\n        \"primary\" : true,\n        \"node\" : \"iN9iu67OTJaGZzIFWzKdmA\",\n        \"relocating_node\" : null,\n        \"shard\" : 1,\n        \"index\" : \"bank\",\n        \"version\" : 1,\n        \"allocation_id\" : {\n          \"id\" : \"DV2pf9RRRoi2N9-LmszvVw\"\n        },\n        \"unassigned_info\" : {\n          \"reason\" : \"INDEX_CREATED\",\n          \"at\" : \"2016-09-30T02:30:00.997Z\"\n        }\n      }, {\n        \"state\" : \"INITIALIZING\",\n        \"primary\" : true,\n        \"node\" : \"iN9iu67OTJaGZzIFWzKdmA\",\n        \"relocating_node\" : null,\n        \"shard\" : 3,\n        \"index\" : \"bank\",\n        \"version\" : 1,\n        \"allocation_id\" : {\n          \"id\" : \"-X5uQQxKRnmpH8GWOby13g\"\n        },\n        \"unassigned_info\" : {\n          \"reason\" : \"INDEX_CREATED\",\n          \"at\" : \"2016-09-30T02:30:00.997Z\"\n        }\n      } ]\n    }\n  }\n}\n```\n\nRun reroute:\n\n```\ncurl -XPOST '10.138.160.10:9200/_cluster/reroute?explain&dry_run&pretty' -d '\n> {\n>   \"commands\": [ {\n>     \"allocate\": {\n>       \"index\": \"bank\", \"shard\": 2, \"node\": \"elastic-search-2\"\n>     }\n>   } ]\n> }'\n{\n  \"acknowledged\" : true,\n  \"state\" : {\n    \"version\" : 7,\n    \"state_uuid\" : \"I2RQP9BCQhaD5KJsXMtFVQ\",\n    \"master_node\" : \"iN9iu67OTJaGZzIFWzKdmA\",\n    \"blocks\" : { },\n    \"nodes\" : {\n      \"iN9iu67OTJaGZzIFWzKdmA\" : {\n        \"name\" : \"elastic-search-1\",\n        \"transport_address\" : \"10.138.160.10:9300\",\n        \"attributes\" : { }\n      },\n      \"Uvor9IWBQFmGoBVd0AJBnw\" : {\n        \"name\" : \"elastic-search-2\",\n        \"transport_address\" : \"10.138.160.210:9300\",\n        \"attributes\" : { }\n      }\n    },\n    \"routing_table\" : {\n      \"indices\" : {\n        \"bank\" : {\n          \"shards\" : {\n            \"2\" : [ {\n              \"state\" : \"STARTED\",\n              \"primary\" : true,\n              \"node\" : \"Uvor9IWBQFmGoBVd0AJBnw\",\n              \"relocating_node\" : null,\n              \"shard\" : 2,\n              \"index\" : \"bank\",\n              \"version\" : 3,\n              \"allocation_id\" : {\n                \"id\" : \"whYVQvYKReiLYorph-jW2g\"\n              }\n            }, {\n              \"state\" : \"INITIALIZING\",\n              \"primary\" : false,\n              \"node\" : \"iN9iu67OTJaGZzIFWzKdmA\",\n              \"relocating_node\" : null,\n              \"shard\" : 2,\n              \"index\" : \"bank\",\n              \"version\" : 3,\n              \"allocation_id\" : {\n                \"id\" : \"T3U7KBncRNmpd9iEXX14zQ\"\n              },\n              \"unassigned_info\" : {\n                \"reason\" : \"INDEX_CREATED\",\n                \"at\" : \"2016-09-30T02:30:00.997Z\"\n              }\n            } ],\n            \"1\" : [ {\n              \"state\" : \"INITIALIZING\",\n              \"primary\" : false,\n              \"node\" : \"Uvor9IWBQFmGoBVd0AJBnw\",\n              \"relocating_node\" : null,\n              \"shard\" : 1,\n              \"index\" : \"bank\",\n              \"version\" : 2,\n              \"allocation_id\" : {\n                \"id\" : \"eBcicAX7QM-cUWTfs32Gaw\"\n              },\n              \"unassigned_info\" : {\n                \"reason\" : \"INDEX_CREATED\",\n                \"at\" : \"2016-09-30T02:30:00.997Z\"\n              }\n            }, {\n              \"state\" : \"STARTED\",\n              \"primary\" : true,\n              \"node\" : \"iN9iu67OTJaGZzIFWzKdmA\",\n              \"relocating_node\" : null,\n              \"shard\" : 1,\n              \"index\" : \"bank\",\n              \"version\" : 2,\n              \"allocation_id\" : {\n                \"id\" : \"DV2pf9RRRoi2N9-LmszvVw\"\n              }\n            } ],\n            \"3\" : [ {\n              \"state\" : \"INITIALIZING\",\n              \"primary\" : false,\n              \"node\" : \"Uvor9IWBQFmGoBVd0AJBnw\",\n              \"relocating_node\" : null,\n              \"shard\" : 3,\n              \"index\" : \"bank\",\n              \"version\" : 2,\n              \"allocation_id\" : {\n                \"id\" : \"F8Ujd_cgSNCzbiYTb4FROw\"\n              },\n              \"unassigned_info\" : {\n                \"reason\" : \"INDEX_CREATED\",\n                \"at\" : \"2016-09-30T02:30:00.997Z\"\n              }\n            }, {\n              \"state\" : \"STARTED\",\n              \"primary\" : true,\n              \"node\" : \"iN9iu67OTJaGZzIFWzKdmA\",\n              \"relocating_node\" : null,\n              \"shard\" : 3,\n              \"index\" : \"bank\",\n              \"version\" : 2,\n              \"allocation_id\" : {\n                \"id\" : \"-X5uQQxKRnmpH8GWOby13g\"\n              }\n            } ],\n            \"4\" : [ {\n              \"state\" : \"STARTED\",\n              \"primary\" : true,\n              \"node\" : \"Uvor9IWBQFmGoBVd0AJBnw\",\n              \"relocating_node\" : null,\n              \"shard\" : 4,\n              \"index\" : \"bank\",\n              \"version\" : 2,\n              \"allocation_id\" : {\n                \"id\" : \"oHvW-WOFTPe3FWO_g2hUDw\"\n              }\n            }, {\n              \"state\" : \"UNASSIGNED\",\n              \"primary\" : false,\n              \"node\" : null,\n              \"relocating_node\" : null,\n              \"shard\" : 4,\n              \"index\" : \"bank\",\n              \"version\" : 2,\n              \"unassigned_info\" : {\n                \"reason\" : \"INDEX_CREATED\",\n                \"at\" : \"2016-09-30T02:30:00.997Z\"\n              }\n            } ],\n            \"0\" : [ {\n              \"state\" : \"STARTED\",\n              \"primary\" : true,\n              \"node\" : \"Uvor9IWBQFmGoBVd0AJBnw\",\n              \"relocating_node\" : null,\n              \"shard\" : 0,\n              \"index\" : \"bank\",\n              \"version\" : 3,\n              \"allocation_id\" : {\n                \"id\" : \"iTzIYMP-RNilDH1No_T4QA\"\n              }\n            }, {\n              \"state\" : \"INITIALIZING\",\n              \"primary\" : false,\n              \"node\" : \"iN9iu67OTJaGZzIFWzKdmA\",\n              \"relocating_node\" : null,\n              \"shard\" : 0,\n              \"index\" : \"bank\",\n              \"version\" : 3,\n              \"allocation_id\" : {\n                \"id\" : \"tElMfjfDT6qTJ29kSiexGg\"\n              },\n              \"unassigned_info\" : {\n                \"reason\" : \"INDEX_CREATED\",\n                \"at\" : \"2016-09-30T02:30:00.997Z\"\n              }\n            } ]\n          }\n        }\n      }\n    },\n    \"routing_nodes\" : {\n      \"unassigned\" : [ {\n        \"state\" : \"UNASSIGNED\",\n        \"primary\" : false,\n        \"node\" : null,\n        \"relocating_node\" : null,\n        \"shard\" : 4,\n        \"index\" : \"bank\",\n        \"version\" : 2,\n        \"unassigned_info\" : {\n          \"reason\" : \"INDEX_CREATED\",\n          \"at\" : \"2016-09-30T02:30:00.997Z\"\n        }\n      } ],\n      \"nodes\" : {\n        \"Uvor9IWBQFmGoBVd0AJBnw\" : [ {\n          \"state\" : \"STARTED\",\n          \"primary\" : true,\n          \"node\" : \"Uvor9IWBQFmGoBVd0AJBnw\",\n          \"relocating_node\" : null,\n          \"shard\" : 2,\n          \"index\" : \"bank\",\n          \"version\" : 3,\n          \"allocation_id\" : {\n            \"id\" : \"whYVQvYKReiLYorph-jW2g\"\n          }\n        }, {\n          \"state\" : \"INITIALIZING\",\n          \"primary\" : false,\n          \"node\" : \"Uvor9IWBQFmGoBVd0AJBnw\",\n          \"relocating_node\" : null,\n          \"shard\" : 1,\n          \"index\" : \"bank\",\n          \"version\" : 2,\n          \"allocation_id\" : {\n            \"id\" : \"eBcicAX7QM-cUWTfs32Gaw\"\n          },\n          \"unassigned_info\" : {\n            \"reason\" : \"INDEX_CREATED\",\n            \"at\" : \"2016-09-30T02:30:00.997Z\"\n          }\n        }, {\n          \"state\" : \"INITIALIZING\",\n          \"primary\" : false,\n          \"node\" : \"Uvor9IWBQFmGoBVd0AJBnw\",\n          \"relocating_node\" : null,\n          \"shard\" : 3,\n          \"index\" : \"bank\",\n          \"version\" : 2,\n          \"allocation_id\" : {\n            \"id\" : \"F8Ujd_cgSNCzbiYTb4FROw\"\n          },\n          \"unassigned_info\" : {\n            \"reason\" : \"INDEX_CREATED\",\n            \"at\" : \"2016-09-30T02:30:00.997Z\"\n          }\n        }, {\n          \"state\" : \"STARTED\",\n          \"primary\" : true,\n          \"node\" : \"Uvor9IWBQFmGoBVd0AJBnw\",\n          \"relocating_node\" : null,\n          \"shard\" : 4,\n          \"index\" : \"bank\",\n          \"version\" : 2,\n          \"allocation_id\" : {\n            \"id\" : \"oHvW-WOFTPe3FWO_g2hUDw\"\n          }\n        }, {\n          \"state\" : \"STARTED\",\n          \"primary\" : true,\n          \"node\" : \"Uvor9IWBQFmGoBVd0AJBnw\",\n          \"relocating_node\" : null,\n          \"shard\" : 0,\n          \"index\" : \"bank\",\n          \"version\" : 3,\n          \"allocation_id\" : {\n            \"id\" : \"iTzIYMP-RNilDH1No_T4QA\"\n          }\n        } ],\n        \"iN9iu67OTJaGZzIFWzKdmA\" : [ {\n          \"state\" : \"INITIALIZING\",\n          \"primary\" : false,\n          \"node\" : \"iN9iu67OTJaGZzIFWzKdmA\",\n          \"relocating_node\" : null,\n          \"shard\" : 2,\n          \"index\" : \"bank\",\n          \"version\" : 3,\n          \"allocation_id\" : {\n            \"id\" : \"T3U7KBncRNmpd9iEXX14zQ\"\n          },\n          \"unassigned_info\" : {\n            \"reason\" : \"INDEX_CREATED\",\n            \"at\" : \"2016-09-30T02:30:00.997Z\"\n          }\n        }, {\n          \"state\" : \"STARTED\",\n          \"primary\" : true,\n          \"node\" : \"iN9iu67OTJaGZzIFWzKdmA\",\n          \"relocating_node\" : null,\n          \"shard\" : 1,\n          \"index\" : \"bank\",\n          \"version\" : 2,\n          \"allocation_id\" : {\n            \"id\" : \"DV2pf9RRRoi2N9-LmszvVw\"\n          }\n        }, {\n          \"state\" : \"STARTED\",\n          \"primary\" : true,\n          \"node\" : \"iN9iu67OTJaGZzIFWzKdmA\",\n          \"relocating_node\" : null,\n          \"shard\" : 3,\n          \"index\" : \"bank\",\n          \"version\" : 2,\n          \"allocation_id\" : {\n            \"id\" : \"-X5uQQxKRnmpH8GWOby13g\"\n          }\n        }, {\n          \"state\" : \"INITIALIZING\",\n          \"primary\" : false,\n          \"node\" : \"iN9iu67OTJaGZzIFWzKdmA\",\n          \"relocating_node\" : null,\n          \"shard\" : 0,\n          \"index\" : \"bank\",\n          \"version\" : 3,\n          \"allocation_id\" : {\n            \"id\" : \"tElMfjfDT6qTJ29kSiexGg\"\n          },\n          \"unassigned_info\" : {\n            \"reason\" : \"INDEX_CREATED\",\n            \"at\" : \"2016-09-30T02:30:00.997Z\"\n          }\n        } ]\n      }\n    }\n  },\n  \"explanations\" : [ {\n    \"command\" : \"allocate\",\n    \"parameters\" : {\n      \"index\" : \"bank\",\n      \"shard\" : 2,\n      \"node\" : \"elastic-search-2\",\n      \"allow_primary\" : false\n    },\n    \"decisions\" : [ {\n      \"decider\" : \"allocate_allocation_command\",\n      \"decision\" : \"NO\",\n      \"explanation\" : \"failed to find [bank][2] on the list of unassigned shards\"\n    } ]\n  } ]\n}\n```\n\n...the Node 1 logs might be telling:\n\n```\n[2016-09-30 02:26:54,648][WARN ][bootstrap                ] unable to install syscall filter: seccomp unavailable: your kernel is buggy and you should upgrade\n[2016-09-30 02:26:54,899][INFO ][node                     ] [elastic-search-1] version[2.4.0], pid[1], build[ce9f0c7/2016-08-29T09:14:17Z]\n[2016-09-30 02:26:54,899][INFO ][node                     ] [elastic-search-1] initializing ...\n[2016-09-30 02:26:55,565][INFO ][plugins                  ] [elastic-search-1] modules [reindex, lang-expression, lang-groovy], plugins [], sites []\n[2016-09-30 02:26:55,591][INFO ][env                      ] [elastic-search-1] using [1] data paths, mounts [[/usr/share/elasticsearch/data (/dev/vda1)]], net usable_space [70.6gb], net total_space [78.6gb], spins? [possibly], types [ext4]\n[2016-09-30 02:26:55,591][INFO ][env                      ] [elastic-search-1] heap size [990.7mb], compressed ordinary object pointers [true]\n[2016-09-30 02:26:57,572][INFO ][node                     ] [elastic-search-1] initialized\n[2016-09-30 02:26:57,572][INFO ][node                     ] [elastic-search-1] starting ...\n[2016-09-30 02:26:57,643][INFO ][transport                ] [elastic-search-1] publish_address {10.138.160.10:9300}, bound_addresses {[::]:9300}\n[2016-09-30 02:26:57,649][INFO ][discovery                ] [elastic-search-1] elastic-search/iN9iu67OTJaGZzIFWzKdmA\n[2016-09-30 02:27:27,652][WARN ][discovery                ] [elastic-search-1] waited for 30s and no initial state was set by the discovery\n[2016-09-30 02:27:27,675][INFO ][http                     ] [elastic-search-1] publish_address {10.138.160.10:9200}, bound_addresses {[::]:9200}\n[2016-09-30 02:27:27,675][INFO ][node                     ] [elastic-search-1] started\n[2016-09-30 02:27:27,681][INFO ][cluster.service          ] [elastic-search-1] new_master {elastic-search-1}{iN9iu67OTJaGZzIFWzKdmA}{10.138.160.10}{10.138.160.10:9300}, reason: zen-disco-join(elected_as_master, [0] joins received)\n[2016-09-30 02:27:27,723][INFO ][gateway                  ] [elastic-search-1] recovered [0] indices into cluster_state\n[2016-09-30 02:28:41,138][INFO ][cluster.service          ] [elastic-search-1] added {{elastic-search-2}{Uvor9IWBQFmGoBVd0AJBnw}{10.138.160.210}{10.138.160.210:9300},}, reason: zen-disco-join(join from node[{elastic-search-2}{Uvor9IWBQFmGoBVd0AJBnw}{10.138.160.210}{10.138.160.210:9300}])\n[2016-09-30 02:30:00,994][INFO ][cluster.metadata         ] [elastic-search-1] [bank] creating index, cause [auto(bulk api)], templates [], shards [5]/[1], mappings []\n[2016-09-30 02:35:01,592][WARN ][discovery.zen.publish    ] [elastic-search-1] timed out waiting for all nodes to process published state [6] (timeout [5m], pending nodes: [{elastic-search-2}{Uvor9IWBQFmGoBVd0AJBnw}{10.138.160.210}{10.138.160.210:9300}])\n[2016-09-30 02:35:01,607][WARN ][cluster.service          ] [elastic-search-1] cluster state update task [shard-started ([bank][1], node[iN9iu67OTJaGZzIFWzKdmA], [P], v[1], s[INITIALIZING], a[id=DV2pf9RRRoi2N9-LmszvVw], unassigned_info[[reason=INDEX_CREATED], at[2016-09-30T02:30:00.997Z]]), reason [after recovery from store]] took 5m above the warn threshold of 30s\n[2016-09-30 02:35:01,609][INFO ][cluster.routing.allocation] [elastic-search-1] Cluster health status changed from [RED] to [YELLOW] (reason: [shards started [[bank][3], [bank][3]] ...]).\n[2016-09-30 02:35:01,618][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [449]\n[2016-09-30 02:35:02,122][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [451]\n[2016-09-30 02:35:02,626][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [452]\n[2016-09-30 02:35:03,137][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [454]\n[2016-09-30 02:35:03,641][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [455]\n[2016-09-30 02:35:04,145][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [457]\n[2016-09-30 02:35:04,648][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [458]\n[2016-09-30 02:35:05,157][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [460]\n[2016-09-30 02:35:05,661][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [461]\n[2016-09-30 02:35:06,166][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [463]\n[2016-09-30 02:35:06,670][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [464]\n[2016-09-30 02:35:07,173][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [466]\n[2016-09-30 02:35:07,676][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [467]\n[2016-09-30 02:35:08,180][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [469]\n[2016-09-30 02:35:08,683][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [470]\n[2016-09-30 02:35:09,188][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [472]\n[2016-09-30 02:35:09,694][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [473]\n[2016-09-30 02:35:10,197][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [475]\n[2016-09-30 02:35:10,700][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [476]\n[2016-09-30 02:35:11,203][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [478]\n[2016-09-30 02:35:11,707][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [479]\n[2016-09-30 02:35:12,210][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [481]\n[2016-09-30 02:35:12,713][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [482]\n[2016-09-30 02:35:13,216][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [484]\n[2016-09-30 02:35:13,730][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [485]\n[2016-09-30 02:35:14,233][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [487]\n[2016-09-30 02:35:14,738][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [488]\n[2016-09-30 02:35:15,246][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [490]\n[2016-09-30 02:35:15,750][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [491]\n[2016-09-30 02:35:16,259][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [493]\n[2016-09-30 02:35:16,763][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [494]\n[2016-09-30 02:35:17,266][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [496]\n[2016-09-30 02:35:17,770][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [497]\n[2016-09-30 02:35:18,273][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [499]\n[2016-09-30 02:35:18,777][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [500]\n[2016-09-30 02:35:19,281][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [502]\n[2016-09-30 02:35:19,784][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [504]\n[2016-09-30 02:35:20,287][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [505]\n[2016-09-30 02:35:20,792][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [507]\n[2016-09-30 02:35:21,294][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [508]\n[2016-09-30 02:35:21,798][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [510]\n[2016-09-30 02:35:22,301][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [511]\n[2016-09-30 02:35:22,803][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [513]\n[2016-09-30 02:35:23,307][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [514]\n[2016-09-30 02:35:23,809][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [516]\n[2016-09-30 02:35:24,313][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [517]\n[2016-09-30 02:35:24,815][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [519]\n[2016-09-30 02:35:25,317][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [520]\n[2016-09-30 02:35:25,820][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [522]\n[2016-09-30 02:35:26,322][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [523]\n[2016-09-30 02:35:26,826][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [525]\n[2016-09-30 02:35:27,328][WARN ][transport                ] [elastic-search-1] Transport response handler not found of id [526]\n[2016-09-30 02:37:57,803][DEBUG][action.admin.cluster.node.stats] [elastic-search-1] failed to execute on node [Uvor9IWBQFmGoBVd0AJBnw]\nReceiveTimeoutTransportException[[elastic-search-2][10.138.160.210:9300][cluster:monitor/nodes/stats[n]] request_id [678] timed out after [15001ms]]\n    at org.elasticsearch.transport.TransportService$TimeoutHandler.run(TransportService.java:696)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n[2016-09-30 02:38:57,146][DEBUG][action.admin.cluster.reroute] [elastic-search-1] failed to perform [cluster_reroute (api)]\nProcessClusterEventTimeoutException[failed to process cluster event (cluster_reroute (api)) within 30s]\n    at org.elasticsearch.cluster.service.InternalClusterService$2$1.run(InternalClusterService.java:349)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n[2016-09-30 02:38:57,149][WARN ][rest.suppressed          ] path: /_cluster/reroute, params: {explain=, pretty=, dry_run=}\nProcessClusterEventTimeoutException[failed to process cluster event (cluster_reroute (api)) within 30s]\n    at org.elasticsearch.cluster.service.InternalClusterService$2$1.run(InternalClusterService.java:349)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n[2016-09-30 02:39:19,031][DEBUG][action.admin.cluster.reroute] [elastic-search-1] failed to perform [cluster_reroute (api)]\nProcessClusterEventTimeoutException[failed to process cluster event (cluster_reroute (api)) within 30s]\n    at org.elasticsearch.cluster.service.InternalClusterService$2$1.run(InternalClusterService.java:349)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n[2016-09-30 02:39:19,031][WARN ][rest.suppressed          ] path: /_cluster/reroute, params: {explain=, pretty=, dry_run=}\nProcessClusterEventTimeoutException[failed to process cluster event (cluster_reroute (api)) within 30s]\n    at org.elasticsearch.cluster.service.InternalClusterService$2$1.run(InternalClusterService.java:349)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n[2016-09-30 02:40:01,611][WARN ][discovery.zen.publish    ] [elastic-search-1] timed out waiting for all nodes to process published state [7] (timeout [5m], pending nodes: [{elastic-search-2}{Uvor9IWBQFmGoBVd0AJBnw}{10.138.160.210}{10.138.160.210:9300}])\n[2016-09-30 02:40:01,634][WARN ][cluster.service          ] [elastic-search-1] cluster state update task [shard-started ([bank][3], node[iN9iu67OTJaGZzIFWzKdmA], [P], v[1], s[INITIALIZING], a[id=-X5uQQxKRnmpH8GWOby13g], unassigned_info[[reason=INDEX_CREATED], at[2016-09-30T02:30:00.997Z]]), reason [after recovery from store],shard-started ([bank][3], node[iN9iu67OTJaGZzIFWzKdmA], [P], v[1], s[INITIALIZING], a[id=-X5uQQxKRnmpH8GWOby13g], unassigned_info[[reason=INDEX_CREATED], at[2016-09-30T02:30:00.997Z]]), reason [master {elastic-search-1}{iN9iu67OTJaGZzIFWzKdmA}{10.138.160.10}{10.138.160.10:9300} marked shard as initializing, but shard state is [POST_RECOVERY], mark shard as started]] took 5m above the warn threshold of 30s\n[2016-09-30 02:40:27,809][DEBUG][action.admin.cluster.node.stats] [elastic-search-1] failed to execute on node [Uvor9IWBQFmGoBVd0AJBnw]\nReceiveTimeoutTransportException[[elastic-search-2][10.138.160.210:9300][cluster:monitor/nodes/stats[n]] request_id [842] timed out after [15000ms]]\n    at org.elasticsearch.transport.TransportService$TimeoutHandler.run(TransportService.java:696)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n\n```\n\nThanks again, @jasontedor!\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/250668719","html_url":"https://github.com/elastic/elasticsearch/issues/20657#issuecomment-250668719","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20657","id":250668719,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MDY2ODcxOQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-09-30T06:23:02Z","updated_at":"2016-09-30T06:23:02Z","author_association":"MEMBER","body":"You need to pick a shard where the state is unassigned, for example in your output that would be shard 4. For shard 2, which you picked for the reroute, the state is initializing, the shard is assigned to a node, it just hasn't started yet.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/250674202","html_url":"https://github.com/elastic/elasticsearch/issues/20657#issuecomment-250674202","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20657","id":250674202,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MDY3NDIwMg==","user":{"login":"cookandy","id":6495064,"node_id":"MDQ6VXNlcjY0OTUwNjQ=","avatar_url":"https://avatars0.githubusercontent.com/u/6495064?v=4","gravatar_id":"","url":"https://api.github.com/users/cookandy","html_url":"https://github.com/cookandy","followers_url":"https://api.github.com/users/cookandy/followers","following_url":"https://api.github.com/users/cookandy/following{/other_user}","gists_url":"https://api.github.com/users/cookandy/gists{/gist_id}","starred_url":"https://api.github.com/users/cookandy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cookandy/subscriptions","organizations_url":"https://api.github.com/users/cookandy/orgs","repos_url":"https://api.github.com/users/cookandy/repos","events_url":"https://api.github.com/users/cookandy/events{/privacy}","received_events_url":"https://api.github.com/users/cookandy/received_events","type":"User","site_admin":false},"created_at":"2016-09-30T07:02:13Z","updated_at":"2016-09-30T07:02:13Z","author_association":"NONE","body":"Oops!  Must be time for bed for me...\n\n```\ncurl -XPOST '10.138.160.10:9200/_cluster/reroute?explain&dry_run&pretty' -d '\n> {\n>   \"commands\": [ {\n>     \"allocate\": {\n>       \"index\": \"bank\", \"shard\": 4, \"node\": \"elastic-search-2\"\n>     }\n>   } ]\n> }'\n{\n  \"acknowledged\" : true,\n  \"state\" : {\n    \"version\" : 9,\n    \"state_uuid\" : \"m5oZWHMiQZmlq6vMAiNV2w\",\n    \"master_node\" : \"aZGMtpTUQUOHc08Be1C2Qw\",\n    \"blocks\" : { },\n    \"nodes\" : {\n      \"aZGMtpTUQUOHc08Be1C2Qw\" : {\n        \"name\" : \"elastic-search-1\",\n        \"transport_address\" : \"10.138.160.10:9300\",\n        \"attributes\" : { }\n      },\n      \"HOtSgn1OQwOA5XiksLAmiA\" : {\n        \"name\" : \"elastic-search-2\",\n        \"transport_address\" : \"10.138.160.210:9300\",\n        \"attributes\" : { }\n      }\n    },\n    \"routing_table\" : {\n      \"indices\" : {\n        \"bank\" : {\n          \"shards\" : {\n            \"2\" : [ {\n              \"state\" : \"STARTED\",\n              \"primary\" : true,\n              \"node\" : \"aZGMtpTUQUOHc08Be1C2Qw\",\n              \"relocating_node\" : null,\n              \"shard\" : 2,\n              \"index\" : \"bank\",\n              \"version\" : 2,\n              \"allocation_id\" : {\n                \"id\" : \"pQDNtuwvRoO7maaRV6febg\"\n              }\n            }, {\n              \"state\" : \"INITIALIZING\",\n              \"primary\" : false,\n              \"node\" : \"HOtSgn1OQwOA5XiksLAmiA\",\n              \"relocating_node\" : null,\n              \"shard\" : 2,\n              \"index\" : \"bank\",\n              \"version\" : 2,\n              \"allocation_id\" : {\n                \"id\" : \"soH7T-XNTtKCvlkVHb8zqA\"\n              },\n              \"unassigned_info\" : {\n                \"reason\" : \"INDEX_CREATED\",\n                \"at\" : \"2016-09-30T06:59:54.288Z\"\n              }\n            } ],\n            \"4\" : [ {\n              \"state\" : \"STARTED\",\n              \"primary\" : true,\n              \"node\" : \"aZGMtpTUQUOHc08Be1C2Qw\",\n              \"relocating_node\" : null,\n              \"shard\" : 4,\n              \"index\" : \"bank\",\n              \"version\" : 3,\n              \"allocation_id\" : {\n                \"id\" : \"PJOr8-K8QuCINL0kMdiThw\"\n              }\n            }, {\n              \"state\" : \"INITIALIZING\",\n              \"primary\" : false,\n              \"node\" : \"HOtSgn1OQwOA5XiksLAmiA\",\n              \"relocating_node\" : null,\n              \"shard\" : 4,\n              \"index\" : \"bank\",\n              \"version\" : 3,\n              \"allocation_id\" : {\n                \"id\" : \"h2Kv9OYXSryxs9T8PgYBbA\"\n              },\n              \"unassigned_info\" : {\n                \"reason\" : \"INDEX_CREATED\",\n                \"at\" : \"2016-09-30T06:59:54.288Z\"\n              }\n            } ],\n            \"1\" : [ {\n              \"state\" : \"INITIALIZING\",\n              \"primary\" : false,\n              \"node\" : \"aZGMtpTUQUOHc08Be1C2Qw\",\n              \"relocating_node\" : null,\n              \"shard\" : 1,\n              \"index\" : \"bank\",\n              \"version\" : 3,\n              \"allocation_id\" : {\n                \"id\" : \"2wd9soXLSFad880zSX5jvA\"\n              },\n              \"unassigned_info\" : {\n                \"reason\" : \"INDEX_CREATED\",\n                \"at\" : \"2016-09-30T06:59:54.288Z\"\n              }\n            }, {\n              \"state\" : \"STARTED\",\n              \"primary\" : true,\n              \"node\" : \"HOtSgn1OQwOA5XiksLAmiA\",\n              \"relocating_node\" : null,\n              \"shard\" : 1,\n              \"index\" : \"bank\",\n              \"version\" : 3,\n              \"allocation_id\" : {\n                \"id\" : \"MeLu1qaARc2jySR4RVSDrA\"\n              }\n            } ],\n            \"3\" : [ {\n              \"state\" : \"STARTED\",\n              \"primary\" : false,\n              \"node\" : \"aZGMtpTUQUOHc08Be1C2Qw\",\n              \"relocating_node\" : null,\n              \"shard\" : 3,\n              \"index\" : \"bank\",\n              \"version\" : 4,\n              \"allocation_id\" : {\n                \"id\" : \"bbNutY0jS5mjoodnlYzzoQ\"\n              }\n            }, {\n              \"state\" : \"STARTED\",\n              \"primary\" : true,\n              \"node\" : \"HOtSgn1OQwOA5XiksLAmiA\",\n              \"relocating_node\" : null,\n              \"shard\" : 3,\n              \"index\" : \"bank\",\n              \"version\" : 4,\n              \"allocation_id\" : {\n                \"id\" : \"WKbzJYfnSQqyEbAzh0l40g\"\n              }\n            } ],\n            \"0\" : [ {\n              \"state\" : \"STARTED\",\n              \"primary\" : true,\n              \"node\" : \"aZGMtpTUQUOHc08Be1C2Qw\",\n              \"relocating_node\" : null,\n              \"shard\" : 0,\n              \"index\" : \"bank\",\n              \"version\" : 2,\n              \"allocation_id\" : {\n                \"id\" : \"IzwJKzIaRU-cDdHq4rG6PQ\"\n              }\n            }, {\n              \"state\" : \"INITIALIZING\",\n              \"primary\" : false,\n              \"node\" : \"HOtSgn1OQwOA5XiksLAmiA\",\n              \"relocating_node\" : null,\n              \"shard\" : 0,\n              \"index\" : \"bank\",\n              \"version\" : 2,\n              \"allocation_id\" : {\n                \"id\" : \"SQDxk1qXQp6PzFuQ9yAv0A\"\n              },\n              \"unassigned_info\" : {\n                \"reason\" : \"INDEX_CREATED\",\n                \"at\" : \"2016-09-30T06:59:54.288Z\"\n              }\n            } ]\n          }\n        }\n      }\n    },\n    \"routing_nodes\" : {\n      \"unassigned\" : [ ],\n      \"nodes\" : {\n        \"aZGMtpTUQUOHc08Be1C2Qw\" : [ {\n          \"state\" : \"STARTED\",\n          \"primary\" : true,\n          \"node\" : \"aZGMtpTUQUOHc08Be1C2Qw\",\n          \"relocating_node\" : null,\n          \"shard\" : 2,\n          \"index\" : \"bank\",\n          \"version\" : 2,\n          \"allocation_id\" : {\n            \"id\" : \"pQDNtuwvRoO7maaRV6febg\"\n          }\n        }, {\n          \"state\" : \"STARTED\",\n          \"primary\" : true,\n          \"node\" : \"aZGMtpTUQUOHc08Be1C2Qw\",\n          \"relocating_node\" : null,\n          \"shard\" : 4,\n          \"index\" : \"bank\",\n          \"version\" : 3,\n          \"allocation_id\" : {\n            \"id\" : \"PJOr8-K8QuCINL0kMdiThw\"\n          }\n        }, {\n          \"state\" : \"INITIALIZING\",\n          \"primary\" : false,\n          \"node\" : \"aZGMtpTUQUOHc08Be1C2Qw\",\n          \"relocating_node\" : null,\n          \"shard\" : 1,\n          \"index\" : \"bank\",\n          \"version\" : 3,\n          \"allocation_id\" : {\n            \"id\" : \"2wd9soXLSFad880zSX5jvA\"\n          },\n          \"unassigned_info\" : {\n            \"reason\" : \"INDEX_CREATED\",\n            \"at\" : \"2016-09-30T06:59:54.288Z\"\n          }\n        }, {\n          \"state\" : \"STARTED\",\n          \"primary\" : false,\n          \"node\" : \"aZGMtpTUQUOHc08Be1C2Qw\",\n          \"relocating_node\" : null,\n          \"shard\" : 3,\n          \"index\" : \"bank\",\n          \"version\" : 4,\n          \"allocation_id\" : {\n            \"id\" : \"bbNutY0jS5mjoodnlYzzoQ\"\n          }\n        }, {\n          \"state\" : \"STARTED\",\n          \"primary\" : true,\n          \"node\" : \"aZGMtpTUQUOHc08Be1C2Qw\",\n          \"relocating_node\" : null,\n          \"shard\" : 0,\n          \"index\" : \"bank\",\n          \"version\" : 2,\n          \"allocation_id\" : {\n            \"id\" : \"IzwJKzIaRU-cDdHq4rG6PQ\"\n          }\n        } ],\n        \"HOtSgn1OQwOA5XiksLAmiA\" : [ {\n          \"state\" : \"INITIALIZING\",\n          \"primary\" : false,\n          \"node\" : \"HOtSgn1OQwOA5XiksLAmiA\",\n          \"relocating_node\" : null,\n          \"shard\" : 2,\n          \"index\" : \"bank\",\n          \"version\" : 2,\n          \"allocation_id\" : {\n            \"id\" : \"soH7T-XNTtKCvlkVHb8zqA\"\n          },\n          \"unassigned_info\" : {\n            \"reason\" : \"INDEX_CREATED\",\n            \"at\" : \"2016-09-30T06:59:54.288Z\"\n          }\n        }, {\n          \"state\" : \"INITIALIZING\",\n          \"primary\" : false,\n          \"node\" : \"HOtSgn1OQwOA5XiksLAmiA\",\n          \"relocating_node\" : null,\n          \"shard\" : 4,\n          \"index\" : \"bank\",\n          \"version\" : 3,\n          \"allocation_id\" : {\n            \"id\" : \"h2Kv9OYXSryxs9T8PgYBbA\"\n          },\n          \"unassigned_info\" : {\n            \"reason\" : \"INDEX_CREATED\",\n            \"at\" : \"2016-09-30T06:59:54.288Z\"\n          }\n        }, {\n          \"state\" : \"STARTED\",\n          \"primary\" : true,\n          \"node\" : \"HOtSgn1OQwOA5XiksLAmiA\",\n          \"relocating_node\" : null,\n          \"shard\" : 1,\n          \"index\" : \"bank\",\n          \"version\" : 3,\n          \"allocation_id\" : {\n            \"id\" : \"MeLu1qaARc2jySR4RVSDrA\"\n          }\n        }, {\n          \"state\" : \"STARTED\",\n          \"primary\" : true,\n          \"node\" : \"HOtSgn1OQwOA5XiksLAmiA\",\n          \"relocating_node\" : null,\n          \"shard\" : 3,\n          \"index\" : \"bank\",\n          \"version\" : 4,\n          \"allocation_id\" : {\n            \"id\" : \"WKbzJYfnSQqyEbAzh0l40g\"\n          }\n        }, {\n          \"state\" : \"INITIALIZING\",\n          \"primary\" : false,\n          \"node\" : \"HOtSgn1OQwOA5XiksLAmiA\",\n          \"relocating_node\" : null,\n          \"shard\" : 0,\n          \"index\" : \"bank\",\n          \"version\" : 2,\n          \"allocation_id\" : {\n            \"id\" : \"SQDxk1qXQp6PzFuQ9yAv0A\"\n          },\n          \"unassigned_info\" : {\n            \"reason\" : \"INDEX_CREATED\",\n            \"at\" : \"2016-09-30T06:59:54.288Z\"\n          }\n        } ]\n      }\n    }\n  },\n  \"explanations\" : [ {\n    \"command\" : \"allocate\",\n    \"parameters\" : {\n      \"index\" : \"bank\",\n      \"shard\" : 4,\n      \"node\" : \"elastic-search-2\",\n      \"allow_primary\" : false\n    },\n    \"decisions\" : [ {\n      \"decider\" : \"node_version\",\n      \"decision\" : \"YES\",\n      \"explanation\" : \"target node version [2.4.0] is same or newer than source node version [2.4.0]\"\n    }, {\n      \"decider\" : \"disk_threshold\",\n      \"decision\" : \"YES\",\n      \"explanation\" : \"enough disk for shard on node, free: [70.2gb]\"\n    }, {\n      \"decider\" : \"filter\",\n      \"decision\" : \"YES\",\n      \"explanation\" : \"node passes include/exclude/require filters\"\n    }, {\n      \"decider\" : \"shards_limit\",\n      \"decision\" : \"YES\",\n      \"explanation\" : \"total shard limit disabled: [index: -1, cluster: -1] <= 0\"\n    }, {\n      \"decider\" : \"enable\",\n      \"decision\" : \"YES\",\n      \"explanation\" : \"allocation disabling is ignored\"\n    }, {\n      \"decider\" : \"replica_after_primary_active\",\n      \"decision\" : \"YES\",\n      \"explanation\" : \"primary is already active\"\n    }, {\n      \"decider\" : \"throttling\",\n      \"decision\" : \"THROTTLE\",\n      \"explanation\" : \"too many shards currently recovering [2], limit: [2]\"\n    }, {\n      \"decider\" : \"awareness\",\n      \"decision\" : \"YES\",\n      \"explanation\" : \"no allocation awareness enabled\"\n    }, {\n      \"decider\" : \"same_shard\",\n      \"decision\" : \"YES\",\n      \"explanation\" : \"shard is not allocated to same node or host\"\n    }, {\n      \"decider\" : \"disable\",\n      \"decision\" : \"YES\",\n      \"explanation\" : \"allocation disabling is ignored\"\n    }, {\n      \"decider\" : \"snapshot_in_progress\",\n      \"decision\" : \"YES\",\n      \"explanation\" : \"shard not primary or relocation disabled\"\n    } ]\n  } ]\n}\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/251418532","html_url":"https://github.com/elastic/elasticsearch/issues/20657#issuecomment-251418532","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20657","id":251418532,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MTQxODUzMg==","user":{"login":"cookandy","id":6495064,"node_id":"MDQ6VXNlcjY0OTUwNjQ=","avatar_url":"https://avatars0.githubusercontent.com/u/6495064?v=4","gravatar_id":"","url":"https://api.github.com/users/cookandy","html_url":"https://github.com/cookandy","followers_url":"https://api.github.com/users/cookandy/followers","following_url":"https://api.github.com/users/cookandy/following{/other_user}","gists_url":"https://api.github.com/users/cookandy/gists{/gist_id}","starred_url":"https://api.github.com/users/cookandy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cookandy/subscriptions","organizations_url":"https://api.github.com/users/cookandy/orgs","repos_url":"https://api.github.com/users/cookandy/repos","events_url":"https://api.github.com/users/cookandy/events{/privacy}","received_events_url":"https://api.github.com/users/cookandy/received_events","type":"User","site_admin":false},"created_at":"2016-10-04T15:14:19Z","updated_at":"2016-10-04T15:14:19Z","author_association":"NONE","body":"hi @jasontedor any thoughts?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/251716085","html_url":"https://github.com/elastic/elasticsearch/issues/20657#issuecomment-251716085","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20657","id":251716085,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MTcxNjA4NQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-10-05T15:52:27Z","updated_at":"2016-10-05T18:07:03Z","author_association":"MEMBER","body":"The recovery of that shard is being throttled by other recoveries that are taking place:\n\n```\n      \"decider\" : \"throttling\",\n      \"decision\" : \"THROTTLE\",\n      \"explanation\" : \"too many shards currently recovering [2], limit: [2]\"\n```\n\nHow big are these shards? On the surface, I do not see an issue with Elasticsearch here, and certainly not any issue related to the MTU and Elasticsearch.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/251736018","html_url":"https://github.com/elastic/elasticsearch/issues/20657#issuecomment-251736018","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20657","id":251736018,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MTczNjAxOA==","user":{"login":"cookandy","id":6495064,"node_id":"MDQ6VXNlcjY0OTUwNjQ=","avatar_url":"https://avatars0.githubusercontent.com/u/6495064?v=4","gravatar_id":"","url":"https://api.github.com/users/cookandy","html_url":"https://github.com/cookandy","followers_url":"https://api.github.com/users/cookandy/followers","following_url":"https://api.github.com/users/cookandy/following{/other_user}","gists_url":"https://api.github.com/users/cookandy/gists{/gist_id}","starred_url":"https://api.github.com/users/cookandy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cookandy/subscriptions","organizations_url":"https://api.github.com/users/cookandy/orgs","repos_url":"https://api.github.com/users/cookandy/repos","events_url":"https://api.github.com/users/cookandy/events{/privacy}","received_events_url":"https://api.github.com/users/cookandy/received_events","type":"User","site_admin":false},"created_at":"2016-10-05T17:05:28Z","updated_at":"2016-10-05T17:05:52Z","author_association":"NONE","body":"This was a brand new cluster - just started 2 min before I tried to run the import.  I would imagine the shard size would be nil, since it was just created.  \n\nAgain, if I disable IPSec, everything works fine.\n\nAnything else I can provide to help troubleshoot this?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/251739358","html_url":"https://github.com/elastic/elasticsearch/issues/20657#issuecomment-251739358","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20657","id":251739358,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MTczOTM1OA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-10-05T17:17:45Z","updated_at":"2016-10-05T17:17:45Z","author_association":"MEMBER","body":"> Anything else I can provide to help troubleshoot this?\n\nYes, a reproduction that does not involve Docker.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/251751689","html_url":"https://github.com/elastic/elasticsearch/issues/20657#issuecomment-251751689","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20657","id":251751689,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MTc1MTY4OQ==","user":{"login":"cookandy","id":6495064,"node_id":"MDQ6VXNlcjY0OTUwNjQ=","avatar_url":"https://avatars0.githubusercontent.com/u/6495064?v=4","gravatar_id":"","url":"https://api.github.com/users/cookandy","html_url":"https://github.com/cookandy","followers_url":"https://api.github.com/users/cookandy/followers","following_url":"https://api.github.com/users/cookandy/following{/other_user}","gists_url":"https://api.github.com/users/cookandy/gists{/gist_id}","starred_url":"https://api.github.com/users/cookandy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cookandy/subscriptions","organizations_url":"https://api.github.com/users/cookandy/orgs","repos_url":"https://api.github.com/users/cookandy/repos","events_url":"https://api.github.com/users/cookandy/events{/privacy}","received_events_url":"https://api.github.com/users/cookandy/received_events","type":"User","site_admin":false},"created_at":"2016-10-05T18:03:09Z","updated_at":"2016-10-05T18:03:09Z","author_association":"NONE","body":"Unfortunately Docker is a requirement in my environment and I will not be able to run ES outside of it.\n\nI am using the official ES Docker image, so I'm a bit surprised we're trying to cut out Docker...   \n\nI had other MTU issues on Docker and the only fix was to create an iptables rule to fix it:\n\n```\niptables -t mangle -A POSTROUTING -p tcp --tcp-flags SYN,RST SYN -o eth1 -j TCPMSS --set-mss 1460 --clamp-mss-to-pmtu\n```\n\nThis seems to work fine for all other applications besides ES.  I'm wondering if it has anything to do with the fact that it's UDP traffic and not TCP.  I see configuration options for `tcp_send_buffer_size`, but nothing for UDP... \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/251752511","html_url":"https://github.com/elastic/elasticsearch/issues/20657#issuecomment-251752511","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20657","id":251752511,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MTc1MjUxMQ==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-10-05T18:06:27Z","updated_at":"2016-10-05T18:06:27Z","author_association":"MEMBER","body":"> I am using the official ES Docker image, so I'm a bit surprised we're trying to cut out Docker...\n\nThe \"official\" Elasticsearch Docker image is not affiliated with Elastic, it's a terribly misnamed image.\n\nI want to cut out as much of the complexity as possible yet still reproduce the issue. Basically where I'm coming from is that I think this has nothing to do with Elasticsearch, I think it's something else. So I want a reproduction on as close to a vanilla installation of Elasticsearch as possible.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/251763797","html_url":"https://github.com/elastic/elasticsearch/issues/20657#issuecomment-251763797","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20657","id":251763797,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MTc2Mzc5Nw==","user":{"login":"cookandy","id":6495064,"node_id":"MDQ6VXNlcjY0OTUwNjQ=","avatar_url":"https://avatars0.githubusercontent.com/u/6495064?v=4","gravatar_id":"","url":"https://api.github.com/users/cookandy","html_url":"https://github.com/cookandy","followers_url":"https://api.github.com/users/cookandy/followers","following_url":"https://api.github.com/users/cookandy/following{/other_user}","gists_url":"https://api.github.com/users/cookandy/gists{/gist_id}","starred_url":"https://api.github.com/users/cookandy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cookandy/subscriptions","organizations_url":"https://api.github.com/users/cookandy/orgs","repos_url":"https://api.github.com/users/cookandy/repos","events_url":"https://api.github.com/users/cookandy/events{/privacy}","received_events_url":"https://api.github.com/users/cookandy/received_events","type":"User","site_admin":false},"created_at":"2016-10-05T18:47:22Z","updated_at":"2016-10-05T18:47:22Z","author_association":"NONE","body":"Oh, I didn't realize the \"official\" Elasticsearch image wasn't maintained/supported by Elastic. 😞\n\nI have a feeling you are correct, and I will be unable to reproduce this issue outside of Docker.  I have already discovered flaws with Docker TCP bridging, and I know it's MTU-related (hence the iptables rule).  Also, failing to add the iptables rule prevents me from even loading the `accounts.json` file with a single server.\n\nHowever, adding the iptables rule seems to have fixed all of my other docker applications.  \n\nSo in this case I think it's something specific to the way ES clustering works (UDP) + Docker + IPSec.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/251780976","html_url":"https://github.com/elastic/elasticsearch/issues/20657#issuecomment-251780976","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20657","id":251780976,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MTc4MDk3Ng==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-10-05T19:54:49Z","updated_at":"2016-10-05T19:54:49Z","author_association":"MEMBER","body":"> Oh, I didn't realize the \"official\" Elasticsearch image wasn't maintained/supported by Elastic. 😞\n\nIt's a really unfortunate situation, it's caused a tremendous amount of confusion in the community; you're not the only one to be confused by this.\n\nWe are [working on truly official Docker images](https://www.elastic.co/blog/releasing-beta-version-of-elastic-docker-images), but these are currently in beta form.\n\n> So in this case I think it's something specific to the way ES clustering works (UDP) + Docker + IPSec.\n\nThe transport layer (used for clustering) uses TCP.\n\nI'm going to close this issue. Please feel free to let me know if you think this is a mistake. If you're able to reproduce this issue with a relatively vanilla setup, I would be happy to take a look.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/251837952","html_url":"https://github.com/elastic/elasticsearch/issues/20657#issuecomment-251837952","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20657","id":251837952,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MTgzNzk1Mg==","user":{"login":"cookandy","id":6495064,"node_id":"MDQ6VXNlcjY0OTUwNjQ=","avatar_url":"https://avatars0.githubusercontent.com/u/6495064?v=4","gravatar_id":"","url":"https://api.github.com/users/cookandy","html_url":"https://github.com/cookandy","followers_url":"https://api.github.com/users/cookandy/followers","following_url":"https://api.github.com/users/cookandy/following{/other_user}","gists_url":"https://api.github.com/users/cookandy/gists{/gist_id}","starred_url":"https://api.github.com/users/cookandy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cookandy/subscriptions","organizations_url":"https://api.github.com/users/cookandy/orgs","repos_url":"https://api.github.com/users/cookandy/repos","events_url":"https://api.github.com/users/cookandy/events{/privacy}","received_events_url":"https://api.github.com/users/cookandy/received_events","type":"User","site_admin":false},"created_at":"2016-10-06T00:33:50Z","updated_at":"2016-10-06T00:33:50Z","author_association":"NONE","body":"@jasontedor thanks for the help.  I'm glad to see that there are official Docker images in the works.  I will try this scenario with the official (beta) image, and see if I have the same problem.  If so, would it be appropriate to open this issue under that project?  \n\n> The transport layer (used for clustering) uses TCP.\n\nIs there any reason you can think of why a single node would work (only after adjusting MTU), but a cluster would not?  Given that it uses TCP I'd expect the iptables rule to catch those packets.  Can we adjust the MTU values in ES directly?  \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/251838858","html_url":"https://github.com/elastic/elasticsearch/issues/20657#issuecomment-251838858","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20657","id":251838858,"node_id":"MDEyOklzc3VlQ29tbWVudDI1MTgzODg1OA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-10-06T00:40:49Z","updated_at":"2016-10-06T00:41:56Z","author_association":"MEMBER","body":"> thanks for the help.\n\nYou're welcome. I'm sorry we couldn't make substantial progress on the issue, but our role is to investigate Elasticsearch issues and this feels outside of Elasticsearch.\n\n> If so, would it be appropriate to open this issue under that project?\n\nOnly if you have a reasonable argument that the issue is with the image or Elasticsearch, and not due to custom setup that you've applied to the Docker hosts or the interaction between the hosts. \n\n> Is there any reason you can think of why a single node would work (only after adjusting MTU), but a cluster would not?\n\nNope, I think the setup is just broken. \n\n> Can we adjust the MTU values in ES directly?\n\nNo, MTU is a link-layer thing, Elasticsearch is none the wiser that the MTU is 1460 or 1500 or 9000, that's all handled in the bowels of the layers below it. \n","performed_via_github_app":null}]