[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/159937035","html_url":"https://github.com/elastic/elasticsearch/issues/14998#issuecomment-159937035","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14998","id":159937035,"node_id":"MDEyOklzc3VlQ29tbWVudDE1OTkzNzAzNQ==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2015-11-26T15:21:59Z","updated_at":"2015-11-26T15:29:23Z","author_association":"MEMBER","body":"There is a complication with only relying on the sync push mechanism. Changes can be missed, for example when ingest node is starting up and hasn't yet read all ingest documents from the .ingest index and another node is pushing the latest update of a pipeline, which the current node isn't ready to accept yet.\n\nSo instead we should keep the current async pipeline loading and as an addition to that we should add the sync refresh of pipelines on all other nodes if a node accepts a put or delete pipeline request. This way we're sure that we never ever miss pipelines on nodes (even during restarts) and because of the sync refresh all ingest nodes that are currently started are guaranteed to have the latest changes made to pipelines after a put or delete pipeline call. So this still makes testing easier and we don't have to rely on `assertBusy(...)` snippets in tests.\n\nIf we add the sync pipeline refresh and the put and delete pipeline apis run that as part of their operation then we can increase the interval to async load pipelines to a higher value. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/170621287","html_url":"https://github.com/elastic/elasticsearch/issues/14998#issuecomment-170621287","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14998","id":170621287,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDYyMTI4Nw==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2016-01-11T17:10:15Z","updated_at":"2016-01-11T17:10:15Z","author_association":"MEMBER","body":"This has been implemented.\n","performed_via_github_app":null}]