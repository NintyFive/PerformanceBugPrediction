[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/390612156","html_url":"https://github.com/elastic/elasticsearch/issues/30718#issuecomment-390612156","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30718","id":390612156,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDYxMjE1Ng==","user":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"created_at":"2018-05-21T10:09:27Z","updated_at":"2018-05-21T10:09:27Z","author_association":"MEMBER","body":"@ywelsch do you mind taking a look?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/390944466","html_url":"https://github.com/elastic/elasticsearch/issues/30718#issuecomment-390944466","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30718","id":390944466,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDk0NDQ2Ng==","user":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"created_at":"2018-05-22T10:37:41Z","updated_at":"2018-05-22T10:37:41Z","author_association":"MEMBER","body":"Another instance here: https://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+periodic/6349/consoleFull\r\n\r\n[consoleText.txt](https://github.com/elastic/elasticsearch/files/2026194/consoleText.txt)\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/390957748","html_url":"https://github.com/elastic/elasticsearch/issues/30718#issuecomment-390957748","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30718","id":390957748,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDk1Nzc0OA==","user":{"login":"ywelsch","id":3718355,"node_id":"MDQ6VXNlcjM3MTgzNTU=","avatar_url":"https://avatars3.githubusercontent.com/u/3718355?v=4","gravatar_id":"","url":"https://api.github.com/users/ywelsch","html_url":"https://github.com/ywelsch","followers_url":"https://api.github.com/users/ywelsch/followers","following_url":"https://api.github.com/users/ywelsch/following{/other_user}","gists_url":"https://api.github.com/users/ywelsch/gists{/gist_id}","starred_url":"https://api.github.com/users/ywelsch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywelsch/subscriptions","organizations_url":"https://api.github.com/users/ywelsch/orgs","repos_url":"https://api.github.com/users/ywelsch/repos","events_url":"https://api.github.com/users/ywelsch/events{/privacy}","received_events_url":"https://api.github.com/users/ywelsch/received_events","type":"User","site_admin":false},"created_at":"2018-05-22T11:31:46Z","updated_at":"2018-05-22T11:31:46Z","author_association":"CONTRIBUTOR","body":"The test has an issue that exhibits only super rarely. The test sets the publish timeout to 0, then proceeds to block cluster state processing on a data node, then deletes an index and recreates it, and finally removes the cluster state processing block. Finally, it calls ensureGreen, which might now return before the data node has fully applied the cluster state that removed and readded the shard, due to the publish timeout of 0. I've pushed a fix (e6a784c4748) to the test that waits for the cluster state to be fully processed on the data node before doing the search.","performed_via_github_app":null}]