[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/66243297","html_url":"https://github.com/elastic/elasticsearch/issues/6172#issuecomment-66243297","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6172","id":66243297,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MjQzMjk3","user":{"login":"vaibhavkulkar","id":7933501,"node_id":"MDQ6VXNlcjc5MzM1MDE=","avatar_url":"https://avatars3.githubusercontent.com/u/7933501?v=4","gravatar_id":"","url":"https://api.github.com/users/vaibhavkulkar","html_url":"https://github.com/vaibhavkulkar","followers_url":"https://api.github.com/users/vaibhavkulkar/followers","following_url":"https://api.github.com/users/vaibhavkulkar/following{/other_user}","gists_url":"https://api.github.com/users/vaibhavkulkar/gists{/gist_id}","starred_url":"https://api.github.com/users/vaibhavkulkar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vaibhavkulkar/subscriptions","organizations_url":"https://api.github.com/users/vaibhavkulkar/orgs","repos_url":"https://api.github.com/users/vaibhavkulkar/repos","events_url":"https://api.github.com/users/vaibhavkulkar/events{/privacy}","received_events_url":"https://api.github.com/users/vaibhavkulkar/received_events","type":"User","site_admin":false},"created_at":"2014-12-09T07:11:53Z","updated_at":"2014-12-09T07:11:53Z","author_association":"NONE","body":"This issue is still reproducible ?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148107935","html_url":"https://github.com/elastic/elasticsearch/issues/6172#issuecomment-148107935","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6172","id":148107935,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODEwNzkzNQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-10-14T16:32:27Z","updated_at":"2015-10-14T16:32:27Z","author_association":"CONTRIBUTOR","body":"This is still broken in 2.0\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/220796709","html_url":"https://github.com/elastic/elasticsearch/issues/6172#issuecomment-220796709","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6172","id":220796709,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMDc5NjcwOQ==","user":{"login":"qwerty4030","id":874677,"node_id":"MDQ6VXNlcjg3NDY3Nw==","avatar_url":"https://avatars2.githubusercontent.com/u/874677?v=4","gravatar_id":"","url":"https://api.github.com/users/qwerty4030","html_url":"https://github.com/qwerty4030","followers_url":"https://api.github.com/users/qwerty4030/followers","following_url":"https://api.github.com/users/qwerty4030/following{/other_user}","gists_url":"https://api.github.com/users/qwerty4030/gists{/gist_id}","starred_url":"https://api.github.com/users/qwerty4030/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qwerty4030/subscriptions","organizations_url":"https://api.github.com/users/qwerty4030/orgs","repos_url":"https://api.github.com/users/qwerty4030/repos","events_url":"https://api.github.com/users/qwerty4030/events{/privacy}","received_events_url":"https://api.github.com/users/qwerty4030/received_events","type":"User","site_admin":false},"created_at":"2016-05-21T19:44:14Z","updated_at":"2016-05-21T19:44:14Z","author_association":"CONTRIBUTOR","body":"@clintongormley I took a look and seems like this is a fairly easy fix. I'm assuming the expected behavior is to ignore the `filter` in this case (all percolators executed). I wanted to add an integration test and noticed the [PercolateRequestBuilder](https://github.com/elastic/elasticsearch/blob/2.x/core/src/main/java/org/elasticsearch/action/percolate/PercolateRequestBuilder.java) and [PercolateSourceBuilder](https://github.com/elastic/elasticsearch/blob/2.x/core/src/main/java/org/elasticsearch/action/percolate/PercolateSourceBuilder.java) had the `filter` option removed in this commit: [Query DSL: Remove filter parsers.](https://github.com/elastic/elasticsearch/commit/a0af88e99630b9d3f0c2cf4997f2e82f1f834d41) However the [documentation](https://www.elastic.co/guide/en/elasticsearch/reference/2.3/search-percolate.html#_percolate_api) indicates both the `query` and `filter` options are still supported. My plan was to add the `filter` option back to those java client classes as a `QueryBuilder`. Let me know if I'm not on the right track here. Thanks.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/220919872","html_url":"https://github.com/elastic/elasticsearch/issues/6172#issuecomment-220919872","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6172","id":220919872,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMDkxOTg3Mg==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2016-05-23T08:38:40Z","updated_at":"2016-05-23T08:38:40Z","author_association":"MEMBER","body":"Hey @qwerty4030 the best way to fix this NPE is to replace line 321 in `PercolatorService.java` (2.x branch) with this:\n\n``` java\nParsedQuery parsedQuery = documentIndexService.queryParserService().parseInnerFilter(parser);\nif (parsedQuery != null) {\n   context.percolateQuery(new ConstantScoreQuery(parsedQuery.query()));\n}\n```\n\nFilters are deprecated and therefor adding filter methods to the Java api isn't a good idea.\nThis issue doesn't occur in the master branch (percolator has been rewritten), but it makes sense to fix it in 2.x and 2.3 branches. If you open a PR for this then I'm happy to merge it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/221527696","html_url":"https://github.com/elastic/elasticsearch/issues/6172#issuecomment-221527696","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6172","id":221527696,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMTUyNzY5Ng==","user":{"login":"martijnvg","id":580421,"node_id":"MDQ6VXNlcjU4MDQyMQ==","avatar_url":"https://avatars3.githubusercontent.com/u/580421?v=4","gravatar_id":"","url":"https://api.github.com/users/martijnvg","html_url":"https://github.com/martijnvg","followers_url":"https://api.github.com/users/martijnvg/followers","following_url":"https://api.github.com/users/martijnvg/following{/other_user}","gists_url":"https://api.github.com/users/martijnvg/gists{/gist_id}","starred_url":"https://api.github.com/users/martijnvg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martijnvg/subscriptions","organizations_url":"https://api.github.com/users/martijnvg/orgs","repos_url":"https://api.github.com/users/martijnvg/repos","events_url":"https://api.github.com/users/martijnvg/events{/privacy}","received_events_url":"https://api.github.com/users/martijnvg/received_events","type":"User","site_admin":false},"created_at":"2016-05-25T09:57:47Z","updated_at":"2016-05-25T09:57:47Z","author_association":"MEMBER","body":"Fixed via #18563\n","performed_via_github_app":null}]