[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/391257899","html_url":"https://github.com/elastic/elasticsearch/issues/30802#issuecomment-391257899","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30802","id":391257899,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTI1Nzg5OQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-05-23T08:04:23Z","updated_at":"2018-05-23T08:04:23Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-core-infra","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/391261929","html_url":"https://github.com/elastic/elasticsearch/issues/30802#issuecomment-391261929","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/30802","id":391261929,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTI2MTkyOQ==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2018-05-23T08:18:52Z","updated_at":"2018-05-23T08:18:52Z","author_association":"MEMBER","body":"We require that if Elasticsearch is started with JUnit on the classpath that RandomizedRunner is used in the test suite. This is because there are elements within the server that use RNG and requiring RandomizedRunner on the classspath when running Junit tests means that we can make these RNG's deterministic so we can reproduce failures more easily. This is built into the server itself (see `Randomness` class) so we cannot make mistakes and accidentally create a test that is hard to reproduce.\r\n\r\nAdditionally, we do not advise writing tests which run against an embedded server as running the Elasticsearch server embedded is not a supported mode. It looks like from the name of your test that you are writing performance tests so its especially important that you do not run again an embedded server as the results of your test will be affected by the fact that the server is running embedded (for example, because the heap is shared GC pauses will not be realistic since it will need to mark and clean up object both from the server and from the test).\r\n\r\nInstead we recommend that you run Elasticsearch separately to your test suite in a configuration as close to your production scenario as possible (e.g. using the same machine specs, OS version, JVM version, etc.). This makes the test fair since you are testing against an Elasticsearch server which is running in the manner it expects.\r\n\r\nYou might also be interested in looking at Rally ([https://esrally.readthedocs.io/en/stable/](https://esrally.readthedocs.io/en/stable/)) which was built specifically to help run performance tests against Elasticsearch servers. You can write tests in Rally that run your specific workloads against Elasticsearch and output detailed results. You can even run competitions to determine, for example, which server configuration suits your workloads the best.","performed_via_github_app":null}]