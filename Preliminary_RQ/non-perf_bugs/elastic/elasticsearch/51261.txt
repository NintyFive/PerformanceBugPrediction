{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/51261","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51261/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51261/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/51261/events","html_url":"https://github.com/elastic/elasticsearch/issues/51261","id":553018498,"node_id":"MDU6SXNzdWU1NTMwMTg0OTg=","number":51261,"title":"ElasticSearch crashes with EXCEPTION_ILLEGAL_INSTRUCTION error","user":{"login":"twjs76","id":60146803,"node_id":"MDQ6VXNlcjYwMTQ2ODAz","avatar_url":"https://avatars2.githubusercontent.com/u/60146803?v=4","gravatar_id":"","url":"https://api.github.com/users/twjs76","html_url":"https://github.com/twjs76","followers_url":"https://api.github.com/users/twjs76/followers","following_url":"https://api.github.com/users/twjs76/following{/other_user}","gists_url":"https://api.github.com/users/twjs76/gists{/gist_id}","starred_url":"https://api.github.com/users/twjs76/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/twjs76/subscriptions","organizations_url":"https://api.github.com/users/twjs76/orgs","repos_url":"https://api.github.com/users/twjs76/repos","events_url":"https://api.github.com/users/twjs76/events{/privacy}","received_events_url":"https://api.github.com/users/twjs76/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-01-21T17:19:39Z","updated_at":"2020-01-21T23:12:07Z","closed_at":"2020-01-21T23:12:07Z","author_association":"NONE","active_lock_reason":null,"body":"<!--\r\n\r\n** Please read the guidelines below. **\r\n\r\nIssues that do not follow these guidelines are likely to be closed.\r\n\r\n1.  GitHub is reserved for bug reports and feature requests. The best place to\r\n    ask a general question is at the Elastic [forums](https://discuss.elastic.co).\r\n    GitHub is not the place for general questions.\r\n\r\n2.  Is this bug report or feature request for a supported OS? If not, it\r\n    is likely to be closed.  See https://www.elastic.co/support/matrix#show_os\r\n\r\n3.  Please fill out EITHER the feature request block or the bug report block\r\n    below, and delete the other block.\r\n\r\n-->\r\n\r\n<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`):\r\nVersion: 6.5.4, Build: default/zip/d2ef93d/2018-12-17T21:17:40.758843Z, JVM: 11.0.4\r\n\r\n**Plugins installed**: [searchguard]\r\n\r\n**JVM version** (`java -version`):\r\nopenjdk 11.0.3 2019-04-16\r\nOpenJDK Runtime Environment AdoptOpenJDK (build 11.0.3+7)\r\nOpenJDK 64-Bit Server VM AdoptOpenJDK (build 11.0.3+7, mixed mode)\r\n\r\n**OS version** (`uname -a` if on a Unix-like system):\r\n- Windows Server   2012 R2 Standard Edition: ServerStandard (6.3 Build 9600)\r\n- AMD Opteron(tm)   Processor 6180 SE\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nAfter a reboot (which is performed nightly), ElasticSearch will suddenly no longer be able to start. A fatal JRE error will be reported, memory dump written and the process crashes. Subsequent attempts to start ElasticSearch are met with the same error. Deleting the ElasticSearch index helps temporarily, and the system will run normally (i.e. data will be indexed and searches will be executed no problem) however at some point the issue will reoccur after a reboot.\r\n\r\n**Steps to reproduce**:\r\nI have not been able to reproduce the issue locally unfortunately, it only seems to happen on a small number of (live) customer systems. One interesting thing that I've noticed, is that on all of the systems with this issue (3 so far), they have AMD Opteron processors. This issue happens with both G1GC and ConcMarkSweepGC.\r\n\r\n**Provide logs (if relevant)**:\r\n[elasticsearch.out.log](https://github.com/elastic/elasticsearch/files/4092452/elasticsearch.out.log)\r\n[hs_err_pid17828.log](https://github.com/elastic/elasticsearch/files/4092453/hs_err_pid17828.log)\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}