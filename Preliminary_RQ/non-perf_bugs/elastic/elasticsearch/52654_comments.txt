[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/589748331","html_url":"https://github.com/elastic/elasticsearch/issues/52654#issuecomment-589748331","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52654","id":589748331,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTc0ODMzMQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-02-21T17:16:06Z","updated_at":"2020-02-21T17:16:06Z","author_association":"COLLABORATOR","body":"Pinging @elastic/ml-core (:ml)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/589748683","html_url":"https://github.com/elastic/elasticsearch/issues/52654#issuecomment-589748683","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52654","id":589748683,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTc0ODY4Mw==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2020-02-21T17:17:00Z","updated_at":"2020-02-21T17:17:00Z","author_association":"CONTRIBUTOR","body":"Another failure in the test suite: https://github.com/elastic/elasticsearch/issues/49305","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/589756053","html_url":"https://github.com/elastic/elasticsearch/issues/52654#issuecomment-589756053","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52654","id":589756053,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTc1NjA1Mw==","user":{"login":"jdconrad","id":2126764,"node_id":"MDQ6VXNlcjIxMjY3NjQ=","avatar_url":"https://avatars2.githubusercontent.com/u/2126764?v=4","gravatar_id":"","url":"https://api.github.com/users/jdconrad","html_url":"https://github.com/jdconrad","followers_url":"https://api.github.com/users/jdconrad/followers","following_url":"https://api.github.com/users/jdconrad/following{/other_user}","gists_url":"https://api.github.com/users/jdconrad/gists{/gist_id}","starred_url":"https://api.github.com/users/jdconrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdconrad/subscriptions","organizations_url":"https://api.github.com/users/jdconrad/orgs","repos_url":"https://api.github.com/users/jdconrad/repos","events_url":"https://api.github.com/users/jdconrad/events{/privacy}","received_events_url":"https://api.github.com/users/jdconrad/received_events","type":"User","site_admin":false},"created_at":"2020-02-21T17:36:10Z","updated_at":"2020-02-21T17:36:10Z","author_association":"CONTRIBUTOR","body":"Muted in 7.6 and 7.7.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/589771394","html_url":"https://github.com/elastic/elasticsearch/issues/52654#issuecomment-589771394","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52654","id":589771394,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTc3MTM5NA==","user":{"login":"davidkyle","id":2353640,"node_id":"MDQ6VXNlcjIzNTM2NDA=","avatar_url":"https://avatars1.githubusercontent.com/u/2353640?v=4","gravatar_id":"","url":"https://api.github.com/users/davidkyle","html_url":"https://github.com/davidkyle","followers_url":"https://api.github.com/users/davidkyle/followers","following_url":"https://api.github.com/users/davidkyle/following{/other_user}","gists_url":"https://api.github.com/users/davidkyle/gists{/gist_id}","starred_url":"https://api.github.com/users/davidkyle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidkyle/subscriptions","organizations_url":"https://api.github.com/users/davidkyle/orgs","repos_url":"https://api.github.com/users/davidkyle/repos","events_url":"https://api.github.com/users/davidkyle/events{/privacy}","received_events_url":"https://api.github.com/users/davidkyle/received_events","type":"User","site_admin":false},"created_at":"2020-02-21T18:16:47Z","updated_at":"2020-02-21T18:17:48Z","author_association":"MEMBER","body":"The task failed for some mysterious reason \r\n```\r\nSuccessfully update task state to [failed]\r\n```\r\nyay successfully \r\n\r\nHere are the [logs.zip](https://github.com/elastic/elasticsearch/files/4237427/logs.zip) the only lines I see referencing the job are\r\n\r\n```\r\n[2020-02-21T09:50:13,033][INFO ][o.e.x.m.a.TransportStartDataFrameAnalyticsAction] [integTest-0] [test_outlier_detection_stop_and_restart] Starting data frame analytics\r\n[2020-02-21T09:50:13,172][INFO ][o.e.x.m.d.DataFrameAnalyticsManager] [integTest-0] [test_outlier_detection_stop_and_restart] Creating destination index [test-outlier-detection-stop-and-restart-results]\r\n[2020-02-21T09:50:13,258][INFO ][o.e.x.m.a.TransportStopDataFrameAnalyticsAction] [integTest-0] [test_outlier_detection_stop_and_restart] Stopping task with force [false]\r\n[2020-02-21T09:50:13,778][INFO ][o.e.x.m.a.TransportStartDataFrameAnalyticsAction] [integTest-0] [test_outlier_detection_stop_and_restart] Starting data frame analytics\r\n[2020-02-21T09:50:13,877][INFO ][o.e.x.m.d.DataFrameAnalyticsManager] [integTest-0] [test_outlier_detection_stop_and_restart] Creating destination index [test-outlier-detection-stop-and-restart-results]\r\n[2020-02-21T09:50:13,947][INFO ][o.e.x.m.d.DataFrameAnalyticsTask] [integTest-0] [test_outlier_detection_stop_and_restart] Successfully update task state to [failed]\r\n[2020-02-21T09:50:46,746][INFO ][o.e.x.m.a.TransportStopDataFrameAnalyticsAction] [integTest-0] [test_outlier_detection_stop_and_restart] Stopping task with force [true]\r\n```\r\n\r\nOdd that it tries to create the destination index again when it restarts, @przemekwitek is the expert here.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/590378319","html_url":"https://github.com/elastic/elasticsearch/issues/52654#issuecomment-590378319","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52654","id":590378319,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MDM3ODMxOQ==","user":{"login":"davidkyle","id":2353640,"node_id":"MDQ6VXNlcjIzNTM2NDA=","avatar_url":"https://avatars1.githubusercontent.com/u/2353640?v=4","gravatar_id":"","url":"https://api.github.com/users/davidkyle","html_url":"https://github.com/davidkyle","followers_url":"https://api.github.com/users/davidkyle/followers","following_url":"https://api.github.com/users/davidkyle/following{/other_user}","gists_url":"https://api.github.com/users/davidkyle/gists{/gist_id}","starred_url":"https://api.github.com/users/davidkyle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidkyle/subscriptions","organizations_url":"https://api.github.com/users/davidkyle/orgs","repos_url":"https://api.github.com/users/davidkyle/repos","events_url":"https://api.github.com/users/davidkyle/events{/privacy}","received_events_url":"https://api.github.com/users/davidkyle/received_events","type":"User","site_admin":false},"created_at":"2020-02-24T15:25:27Z","updated_at":"2020-02-24T15:25:27Z","author_association":"MEMBER","body":"I've reverted the muting of this test on the 7.x branch in de3d674bb7949fe44ee1a2592a48d4317fbd1481. The extra logging added in #52659 should shine a light on what went wrong. When it fails again please ping the ml team.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/591437543","html_url":"https://github.com/elastic/elasticsearch/issues/52654#issuecomment-591437543","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52654","id":591437543,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTQzNzU0Mw==","user":{"login":"dnhatn","id":13474362,"node_id":"MDQ6VXNlcjEzNDc0MzYy","avatar_url":"https://avatars3.githubusercontent.com/u/13474362?v=4","gravatar_id":"","url":"https://api.github.com/users/dnhatn","html_url":"https://github.com/dnhatn","followers_url":"https://api.github.com/users/dnhatn/followers","following_url":"https://api.github.com/users/dnhatn/following{/other_user}","gists_url":"https://api.github.com/users/dnhatn/gists{/gist_id}","starred_url":"https://api.github.com/users/dnhatn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnhatn/subscriptions","organizations_url":"https://api.github.com/users/dnhatn/orgs","repos_url":"https://api.github.com/users/dnhatn/repos","events_url":"https://api.github.com/users/dnhatn/events{/privacy}","received_events_url":"https://api.github.com/users/dnhatn/received_events","type":"User","site_admin":false},"created_at":"2020-02-26T13:55:09Z","updated_at":"2020-02-26T13:55:09Z","author_association":"MEMBER","body":"@davidkyle This test failed again on 7.x: https://gradle-enterprise.elastic.co/s/gk43p25mbnfia/tests/zcquf3hc3eoda-q3ovxh6ju37ic.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/591460117","html_url":"https://github.com/elastic/elasticsearch/issues/52654#issuecomment-591460117","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52654","id":591460117,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTQ2MDExNw==","user":{"login":"davidkyle","id":2353640,"node_id":"MDQ6VXNlcjIzNTM2NDA=","avatar_url":"https://avatars1.githubusercontent.com/u/2353640?v=4","gravatar_id":"","url":"https://api.github.com/users/davidkyle","html_url":"https://github.com/davidkyle","followers_url":"https://api.github.com/users/davidkyle/followers","following_url":"https://api.github.com/users/davidkyle/following{/other_user}","gists_url":"https://api.github.com/users/davidkyle/gists{/gist_id}","starred_url":"https://api.github.com/users/davidkyle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidkyle/subscriptions","organizations_url":"https://api.github.com/users/davidkyle/orgs","repos_url":"https://api.github.com/users/davidkyle/repos","events_url":"https://api.github.com/users/davidkyle/events{/privacy}","received_events_url":"https://api.github.com/users/davidkyle/received_events","type":"User","site_admin":false},"created_at":"2020-02-26T14:41:22Z","updated_at":"2020-02-26T14:41:37Z","author_association":"MEMBER","body":"Thanks @dnhatn \r\n\r\nI've muted the test again in ad3a3b1af984bc051e7af01b50d1f4c78120e44d and here are the [logs](https://github.com/elastic/elasticsearch/files/4256286/logs.zip)\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/591562301","html_url":"https://github.com/elastic/elasticsearch/issues/52654#issuecomment-591562301","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52654","id":591562301,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTU2MjMwMQ==","user":{"login":"davidkyle","id":2353640,"node_id":"MDQ6VXNlcjIzNTM2NDA=","avatar_url":"https://avatars1.githubusercontent.com/u/2353640?v=4","gravatar_id":"","url":"https://api.github.com/users/davidkyle","html_url":"https://github.com/davidkyle","followers_url":"https://api.github.com/users/davidkyle/followers","following_url":"https://api.github.com/users/davidkyle/following{/other_user}","gists_url":"https://api.github.com/users/davidkyle/gists{/gist_id}","starred_url":"https://api.github.com/users/davidkyle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidkyle/subscriptions","organizations_url":"https://api.github.com/users/davidkyle/orgs","repos_url":"https://api.github.com/users/davidkyle/repos","events_url":"https://api.github.com/users/davidkyle/events{/privacy}","received_events_url":"https://api.github.com/users/davidkyle/received_events","type":"User","site_admin":false},"created_at":"2020-02-26T18:05:03Z","updated_at":"2020-02-26T18:05:03Z","author_association":"MEMBER","body":"The error is \r\n```\r\nUpdated analytics task state to [failed] with reason [[integTest-0][127.0.0.1:37781][indices:admin/create]]\r\n```\r\n where the `[integTest-0][127.0.0.1:37781][indices:admin/create]` part comes from an [ActionTransportException](https://github.com/elastic/elasticsearch/blob/99f88f15c5febbca2d13b5b5fda27b844153bf1a/server/src/main/java/org/elasticsearch/transport/ActionTransportException.java#L78) \r\n\r\nWe know the create index is failing but why? Well the cause is not in `Exception.getMessage()` better unwrap that exception, another round of logging changes and unmuting coming up. \r\n\r\nThe test starts then stops a DFA. On restart the the DFA will delete and recreate the destination index if the DFA was only partially complete from the last run. The deleting is fine but the recreation is erring. On a different node there is the log message \r\n```\r\n[test-outlier-detection-stop-and-restart-results] creating index, cause [auto(bulk api)], templates [random_index_template], shards [3]/[1], mappings []\r\n```\r\nNote the cause **auto(bulk api)** not **api** which it would be if create index was called. It looks like something in the DFA is doing a bulk write before the index is created  \r\n\r\n \r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/591950406","html_url":"https://github.com/elastic/elasticsearch/issues/52654#issuecomment-591950406","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52654","id":591950406,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTk1MDQwNg==","user":{"login":"davidkyle","id":2353640,"node_id":"MDQ6VXNlcjIzNTM2NDA=","avatar_url":"https://avatars1.githubusercontent.com/u/2353640?v=4","gravatar_id":"","url":"https://api.github.com/users/davidkyle","html_url":"https://github.com/davidkyle","followers_url":"https://api.github.com/users/davidkyle/followers","following_url":"https://api.github.com/users/davidkyle/following{/other_user}","gists_url":"https://api.github.com/users/davidkyle/gists{/gist_id}","starred_url":"https://api.github.com/users/davidkyle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidkyle/subscriptions","organizations_url":"https://api.github.com/users/davidkyle/orgs","repos_url":"https://api.github.com/users/davidkyle/repos","events_url":"https://api.github.com/users/davidkyle/events{/privacy}","received_events_url":"https://api.github.com/users/davidkyle/received_events","type":"User","site_admin":false},"created_at":"2020-02-27T12:41:05Z","updated_at":"2020-02-27T12:41:46Z","author_association":"MEMBER","body":"Unmuted again in d8bdf31110521733e5cfc3e7a2da2fa3450db2f3.\r\n\r\nIf you found your way here triaging this failure please ping `@elastic/ml-core` ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/608469660","html_url":"https://github.com/elastic/elasticsearch/issues/52654#issuecomment-608469660","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/52654","id":608469660,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODQ2OTY2MA==","user":{"login":"dimitris-athanasiou","id":9351617,"node_id":"MDQ6VXNlcjkzNTE2MTc=","avatar_url":"https://avatars3.githubusercontent.com/u/9351617?v=4","gravatar_id":"","url":"https://api.github.com/users/dimitris-athanasiou","html_url":"https://github.com/dimitris-athanasiou","followers_url":"https://api.github.com/users/dimitris-athanasiou/followers","following_url":"https://api.github.com/users/dimitris-athanasiou/following{/other_user}","gists_url":"https://api.github.com/users/dimitris-athanasiou/gists{/gist_id}","starred_url":"https://api.github.com/users/dimitris-athanasiou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dimitris-athanasiou/subscriptions","organizations_url":"https://api.github.com/users/dimitris-athanasiou/orgs","repos_url":"https://api.github.com/users/dimitris-athanasiou/repos","events_url":"https://api.github.com/users/dimitris-athanasiou/events{/privacy}","received_events_url":"https://api.github.com/users/dimitris-athanasiou/received_events","type":"User","site_admin":false},"created_at":"2020-04-03T14:37:52Z","updated_at":"2020-04-03T14:37:52Z","author_association":"CONTRIBUTOR","body":"No failures of this appeared for over a month now. Closing for now.","performed_via_github_app":null}]