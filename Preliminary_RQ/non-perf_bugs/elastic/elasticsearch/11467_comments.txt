[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/108329887","html_url":"https://github.com/elastic/elasticsearch/issues/11467#issuecomment-108329887","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11467","id":108329887,"node_id":"MDEyOklzc3VlQ29tbWVudDEwODMyOTg4Nw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-06-03T11:46:32Z","updated_at":"2015-06-03T11:46:32Z","author_association":"CONTRIBUTOR","body":"Related to #10766, #10704, #10644 \n\n@spinscale any thoughts here?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/108442296","html_url":"https://github.com/elastic/elasticsearch/issues/11467#issuecomment-108442296","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11467","id":108442296,"node_id":"MDEyOklzc3VlQ29tbWVudDEwODQ0MjI5Ng==","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2015-06-03T14:09:46Z","updated_at":"2015-06-03T14:09:46Z","author_association":"MEMBER","body":"@frstie can you retry running the same test, but ensure that the you do not use the calling thread for the listener by changing your search request builder call to\n\n``` java\nSearchRequestBuilder searchRequest = internalCluster().transportClient().prepareSearch().setListenerThreaded(true);\n```\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/108452503","html_url":"https://github.com/elastic/elasticsearch/issues/11467#issuecomment-108452503","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11467","id":108452503,"node_id":"MDEyOklzc3VlQ29tbWVudDEwODQ1MjUwMw==","user":{"login":"frstie","id":275248,"node_id":"MDQ6VXNlcjI3NTI0OA==","avatar_url":"https://avatars1.githubusercontent.com/u/275248?v=4","gravatar_id":"","url":"https://api.github.com/users/frstie","html_url":"https://github.com/frstie","followers_url":"https://api.github.com/users/frstie/followers","following_url":"https://api.github.com/users/frstie/following{/other_user}","gists_url":"https://api.github.com/users/frstie/gists{/gist_id}","starred_url":"https://api.github.com/users/frstie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/frstie/subscriptions","organizations_url":"https://api.github.com/users/frstie/orgs","repos_url":"https://api.github.com/users/frstie/repos","events_url":"https://api.github.com/users/frstie/events{/privacy}","received_events_url":"https://api.github.com/users/frstie/received_events","type":"User","site_admin":false},"created_at":"2015-06-03T14:25:48Z","updated_at":"2015-06-03T14:25:48Z","author_association":"NONE","body":"Hi @spinscale  - adding that in sorts out the problem nicely. Still get a handful of \"transport stopped\" exceptions when ~ 50 concurrent requests but that's probably just a capacity issue.\n\nThinking about it this makes sense in our case, particularly since we are using vertx and want to make sure there is minimum blocking on the calling thread.\n\nAre there any cases when we explicitly _wouldn't_ want to use setListenerThreaded() since it seems to me that it would be a sensible default for our use cases?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/108454625","html_url":"https://github.com/elastic/elasticsearch/issues/11467#issuecomment-108454625","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11467","id":108454625,"node_id":"MDEyOklzc3VlQ29tbWVudDEwODQ1NDYyNQ==","user":{"login":"frstie","id":275248,"node_id":"MDQ6VXNlcjI3NTI0OA==","avatar_url":"https://avatars1.githubusercontent.com/u/275248?v=4","gravatar_id":"","url":"https://api.github.com/users/frstie","html_url":"https://github.com/frstie","followers_url":"https://api.github.com/users/frstie/followers","following_url":"https://api.github.com/users/frstie/following{/other_user}","gists_url":"https://api.github.com/users/frstie/gists{/gist_id}","starred_url":"https://api.github.com/users/frstie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/frstie/subscriptions","organizations_url":"https://api.github.com/users/frstie/orgs","repos_url":"https://api.github.com/users/frstie/repos","events_url":"https://api.github.com/users/frstie/events{/privacy}","received_events_url":"https://api.github.com/users/frstie/received_events","type":"User","site_admin":false},"created_at":"2015-06-03T14:29:28Z","updated_at":"2015-06-03T14:29:28Z","author_association":"NONE","body":"I (and my colleague) also read it the wrong way around when reading the javadoc about setListenerThreaded() - I think we assumed it would be using a different thread by default and setting the property would have the opposite effect. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/108468178","html_url":"https://github.com/elastic/elasticsearch/issues/11467#issuecomment-108468178","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11467","id":108468178,"node_id":"MDEyOklzc3VlQ29tbWVudDEwODQ2ODE3OA==","user":{"login":"spinscale","id":667544,"node_id":"MDQ6VXNlcjY2NzU0NA==","avatar_url":"https://avatars2.githubusercontent.com/u/667544?v=4","gravatar_id":"","url":"https://api.github.com/users/spinscale","html_url":"https://github.com/spinscale","followers_url":"https://api.github.com/users/spinscale/followers","following_url":"https://api.github.com/users/spinscale/following{/other_user}","gists_url":"https://api.github.com/users/spinscale/gists{/gist_id}","starred_url":"https://api.github.com/users/spinscale/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spinscale/subscriptions","organizations_url":"https://api.github.com/users/spinscale/orgs","repos_url":"https://api.github.com/users/spinscale/repos","events_url":"https://api.github.com/users/spinscale/events{/privacy}","received_events_url":"https://api.github.com/users/spinscale/received_events","type":"User","site_admin":false},"created_at":"2015-06-03T14:53:48Z","updated_at":"2015-06-03T14:53:48Z","author_association":"MEMBER","body":"Just a word of warning: Setting this property means, that the action listener is run in the `listener` threadpool. By default this threadpool is `fixed` and does not have a queue, see [threadpool docs](https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-threadpool.html). The assumption is still that your task is kinda lightweight, so you shouldnt block in that threadpool either (which is simple in your example as you wait for the future instead of applying another listener).\n\nElasticsearch 2.0 will solve this by indeed changing the default for the transportclient to do the right thing, see https://github.com/elastic/elasticsearch/pull/10940\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/108576688","html_url":"https://github.com/elastic/elasticsearch/issues/11467#issuecomment-108576688","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11467","id":108576688,"node_id":"MDEyOklzc3VlQ29tbWVudDEwODU3NjY4OA==","user":{"login":"frstie","id":275248,"node_id":"MDQ6VXNlcjI3NTI0OA==","avatar_url":"https://avatars1.githubusercontent.com/u/275248?v=4","gravatar_id":"","url":"https://api.github.com/users/frstie","html_url":"https://github.com/frstie","followers_url":"https://api.github.com/users/frstie/followers","following_url":"https://api.github.com/users/frstie/following{/other_user}","gists_url":"https://api.github.com/users/frstie/gists{/gist_id}","starred_url":"https://api.github.com/users/frstie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/frstie/subscriptions","organizations_url":"https://api.github.com/users/frstie/orgs","repos_url":"https://api.github.com/users/frstie/repos","events_url":"https://api.github.com/users/frstie/events{/privacy}","received_events_url":"https://api.github.com/users/frstie/received_events","type":"User","site_admin":false},"created_at":"2015-06-03T18:59:48Z","updated_at":"2015-06-03T18:59:48Z","author_association":"NONE","body":"Thanks. That all makes sense. Hopefully this will help other people with the same issue. Feel free to close the case if you like.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/108871092","html_url":"https://github.com/elastic/elasticsearch/issues/11467#issuecomment-108871092","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/11467","id":108871092,"node_id":"MDEyOklzc3VlQ29tbWVudDEwODg3MTA5Mg==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-06-04T12:24:02Z","updated_at":"2015-06-04T12:24:02Z","author_association":"CONTRIBUTOR","body":"thanks @frstie, closing\n","performed_via_github_app":null}]