{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/25319","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25319/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25319/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/25319/events","html_url":"https://github.com/elastic/elasticsearch/issues/25319","id":237299287,"node_id":"MDU6SXNzdWUyMzcyOTkyODc=","number":25319,"title":"Java API contains unsupported geohash_cell query builder","user":{"login":"igorbunova","id":10805589,"node_id":"MDQ6VXNlcjEwODA1NTg5","avatar_url":"https://avatars0.githubusercontent.com/u/10805589?v=4","gravatar_id":"","url":"https://api.github.com/users/igorbunova","html_url":"https://github.com/igorbunova","followers_url":"https://api.github.com/users/igorbunova/followers","following_url":"https://api.github.com/users/igorbunova/following{/other_user}","gists_url":"https://api.github.com/users/igorbunova/gists{/gist_id}","starred_url":"https://api.github.com/users/igorbunova/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/igorbunova/subscriptions","organizations_url":"https://api.github.com/users/igorbunova/orgs","repos_url":"https://api.github.com/users/igorbunova/repos","events_url":"https://api.github.com/users/igorbunova/events{/privacy}","received_events_url":"https://api.github.com/users/igorbunova/received_events","type":"User","site_admin":false},"labels":[{"id":141079527,"node_id":"MDU6TGFiZWwxNDEwNzk1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Analytics/Geo","name":":Analytics/Geo","color":"0e8a16","default":false,"description":"Indexing, search aggregations of geo points and shapes"}],"state":"closed","locked":false,"assignee":{"login":"nknize","id":830187,"node_id":"MDQ6VXNlcjgzMDE4Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/830187?v=4","gravatar_id":"","url":"https://api.github.com/users/nknize","html_url":"https://github.com/nknize","followers_url":"https://api.github.com/users/nknize/followers","following_url":"https://api.github.com/users/nknize/following{/other_user}","gists_url":"https://api.github.com/users/nknize/gists{/gist_id}","starred_url":"https://api.github.com/users/nknize/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nknize/subscriptions","organizations_url":"https://api.github.com/users/nknize/orgs","repos_url":"https://api.github.com/users/nknize/repos","events_url":"https://api.github.com/users/nknize/events{/privacy}","received_events_url":"https://api.github.com/users/nknize/received_events","type":"User","site_admin":false},"assignees":[{"login":"nknize","id":830187,"node_id":"MDQ6VXNlcjgzMDE4Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/830187?v=4","gravatar_id":"","url":"https://api.github.com/users/nknize","html_url":"https://github.com/nknize","followers_url":"https://api.github.com/users/nknize/followers","following_url":"https://api.github.com/users/nknize/following{/other_user}","gists_url":"https://api.github.com/users/nknize/gists{/gist_id}","starred_url":"https://api.github.com/users/nknize/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nknize/subscriptions","organizations_url":"https://api.github.com/users/nknize/orgs","repos_url":"https://api.github.com/users/nknize/repos","events_url":"https://api.github.com/users/nknize/events{/privacy}","received_events_url":"https://api.github.com/users/nknize/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2017-06-20T18:14:27Z","updated_at":"2018-03-23T18:17:10Z","closed_at":"2018-03-23T18:17:10Z","author_association":"NONE","active_lock_reason":null,"body":"**Steps to reproduce**:\r\nTry using  QueryBuilders.geoHashCellQuery method in the code, for example\r\n```\r\nClient client = ...;\r\ndouble lat =...;\r\ndouble lon = ...;\r\nQueryBuilder locationFilter = QueryBuilders.geoHashCellQuery(name, new GeoPoint(lat, lon));\r\nQueryBuider q =  QueryBuilders.boolQuery()\r\n            .must(QueryBuilders.matchQuery(\"field\", \"text\"))\r\n            .filter(locationFilter);\r\n\r\nclient.prepareSearch(\"index\").setQuery(q).get();\r\n```\r\n\r\n\r\n**Elasticsearch version**: 5.4.1\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nThe breaking changes description is missed in the documentation.\r\nJava API method should be removed or marked as Deprecated and linked with the alternative API methods or workarounds.\r\nI don't see any other alternatives to this query except the additional fields to store the latitude and the longitude, however, https://www.elastic.co/guide/en/elasticsearch/reference/5.0/geo-point.html#_using_geo_points_in_scripts\r\nsays that lat and lon values of the geopoint field are available while scripting, perhaps it is possible to make them available while querying.\r\n\r\n**Logs**\r\nQueryShardException[failed to parse [geohash_cell] query. geo_point field no longer supports geohash_cell queries\r\n","closed_by":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"performed_via_github_app":null}