{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/23479","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23479/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23479/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23479/events","html_url":"https://github.com/elastic/elasticsearch/issues/23479","id":211684534,"node_id":"MDU6SXNzdWUyMTE2ODQ1MzQ=","number":23479,"title":"Snapshoted indices data (disk space & more)","user":{"login":"eirc","id":250971,"node_id":"MDQ6VXNlcjI1MDk3MQ==","avatar_url":"https://avatars2.githubusercontent.com/u/250971?v=4","gravatar_id":"","url":"https://api.github.com/users/eirc","html_url":"https://github.com/eirc","followers_url":"https://api.github.com/users/eirc/followers","following_url":"https://api.github.com/users/eirc/following{/other_user}","gists_url":"https://api.github.com/users/eirc/gists{/gist_id}","starred_url":"https://api.github.com/users/eirc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eirc/subscriptions","organizations_url":"https://api.github.com/users/eirc/orgs","repos_url":"https://api.github.com/users/eirc/repos","events_url":"https://api.github.com/users/eirc/events{/privacy}","received_events_url":"https://api.github.com/users/eirc/received_events","type":"User","site_admin":false},"labels":[{"id":143077482,"node_id":"MDU6TGFiZWwxNDMwNzc0ODI=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Distributed/Snapshot/Restore","name":":Distributed/Snapshot/Restore","color":"0e8a16","default":false,"description":"Anything directly related to the `_snapshot/*` APIs"},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2017-03-03T13:13:38Z","updated_at":"2018-03-26T13:29:31Z","closed_at":"2018-03-26T13:29:31Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the feature**:\r\n\r\nWhat I really need is a way to tell how much disk space is used up by specific indices on snapshots.\r\n\r\nCurrently there is no way to get any statistics on the disk space used by snapshots except for directly querying the snapshot repository's filesystem. This is even more obscure on 5.0 where indices are not stored in folders with the index name but instead using an ID.\r\n\r\nTwo possible ideas on how to fix this:\r\n\r\n* Provide a map of snapshot index IDs to index names on some API and let user go query the filesystem\r\n* Keep the mapping internal and instead directly expose the disk space used (and possibly other data too) on some API essentially keeping users away from the snapshot repository filesystem\r\n\r\nBoth those approaches could be included for example in the `_snapshot` API by changing the indices array to contain hashes with data:\r\n\r\n```\r\n/_snapshot/{repository}/_all\r\n{\r\n  \"snapshots\" : [\r\n    {\r\n      \"snapshot\" : \"mysnapshot-20170302141731\",\r\n      \"uuid\" : \"qB7R3TIkQIKcKrDkPIlsLg\",\r\n      ...\r\n      \"indices\" : [\r\n        {\r\n          \"name\": \"nicelogs-2017.03.02\"\r\n          \"id_on_disk\": \"jbD8iHU_Toy1kNRGXhS6sA\",\r\n          \"size_on_disk_bytes\": \"1000000\",\r\n          \"more_data_here\": \"???\",\r\n        },\r\n        ...\r\n      ],\r\n      ...\r\n    },\r\n    ...\r\n```\r\n_This is just an example, I know nothing about ES's conventions on naming things in the API_\r\n\r\n[My question that prompted the feature request](https://discuss.elastic.co/t/index-uuids-in-snapshots/77175)","closed_by":{"login":"tlrx","id":642733,"node_id":"MDQ6VXNlcjY0MjczMw==","avatar_url":"https://avatars1.githubusercontent.com/u/642733?v=4","gravatar_id":"","url":"https://api.github.com/users/tlrx","html_url":"https://github.com/tlrx","followers_url":"https://api.github.com/users/tlrx/followers","following_url":"https://api.github.com/users/tlrx/following{/other_user}","gists_url":"https://api.github.com/users/tlrx/gists{/gist_id}","starred_url":"https://api.github.com/users/tlrx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlrx/subscriptions","organizations_url":"https://api.github.com/users/tlrx/orgs","repos_url":"https://api.github.com/users/tlrx/repos","events_url":"https://api.github.com/users/tlrx/events{/privacy}","received_events_url":"https://api.github.com/users/tlrx/received_events","type":"User","site_admin":false},"performed_via_github_app":null}