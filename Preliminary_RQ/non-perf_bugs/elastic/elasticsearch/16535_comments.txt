[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/181875026","html_url":"https://github.com/elastic/elasticsearch/issues/16535#issuecomment-181875026","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16535","id":181875026,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MTg3NTAyNg==","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"created_at":"2016-02-09T14:01:25Z","updated_at":"2016-02-09T14:01:25Z","author_association":"CONTRIBUTOR","body":"> \"settings\": { \"number_of_shards\": 2 },\n\nThis is enough to do it. If you want consistent scoring, you need to enable distributed term statistics, otherwise the IDF values used are based on local information, not global. \n\nSee https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-search-type.html\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/181895307","html_url":"https://github.com/elastic/elasticsearch/issues/16535#issuecomment-181895307","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16535","id":181895307,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MTg5NTMwNw==","user":{"login":"mfussenegger","id":38700,"node_id":"MDQ6VXNlcjM4NzAw","avatar_url":"https://avatars0.githubusercontent.com/u/38700?v=4","gravatar_id":"","url":"https://api.github.com/users/mfussenegger","html_url":"https://github.com/mfussenegger","followers_url":"https://api.github.com/users/mfussenegger/followers","following_url":"https://api.github.com/users/mfussenegger/following{/other_user}","gists_url":"https://api.github.com/users/mfussenegger/gists{/gist_id}","starred_url":"https://api.github.com/users/mfussenegger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mfussenegger/subscriptions","organizations_url":"https://api.github.com/users/mfussenegger/orgs","repos_url":"https://api.github.com/users/mfussenegger/repos","events_url":"https://api.github.com/users/mfussenegger/events{/privacy}","received_events_url":"https://api.github.com/users/mfussenegger/received_events","type":"User","site_admin":false},"created_at":"2016-02-09T14:40:38Z","updated_at":"2016-02-09T14:40:38Z","author_association":"CONTRIBUTOR","body":"But shouldn't the local IDF values be deterministic if _id isn't randomly generated? The shard allocation should be deterministic which should result in the shards/lucene-indices having the same documents. \n\nYou're right in that if I change number_of_shards to 1 I get the same results in both 1.7 and 2.1 - could it be that the routing allocation algorithm changed?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/181902538","html_url":"https://github.com/elastic/elasticsearch/issues/16535#issuecomment-181902538","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/16535","id":181902538,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MTkwMjUzOA==","user":{"login":"mfussenegger","id":38700,"node_id":"MDQ6VXNlcjM4NzAw","avatar_url":"https://avatars0.githubusercontent.com/u/38700?v=4","gravatar_id":"","url":"https://api.github.com/users/mfussenegger","html_url":"https://github.com/mfussenegger","followers_url":"https://api.github.com/users/mfussenegger/followers","following_url":"https://api.github.com/users/mfussenegger/following{/other_user}","gists_url":"https://api.github.com/users/mfussenegger/gists{/gist_id}","starred_url":"https://api.github.com/users/mfussenegger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mfussenegger/subscriptions","organizations_url":"https://api.github.com/users/mfussenegger/orgs","repos_url":"https://api.github.com/users/mfussenegger/repos","events_url":"https://api.github.com/users/mfussenegger/events{/privacy}","received_events_url":"https://api.github.com/users/mfussenegger/received_events","type":"User","site_admin":false},"created_at":"2016-02-09T14:57:20Z","updated_at":"2016-02-09T14:57:20Z","author_association":"CONTRIBUTOR","body":"Okay, thanks for the pointer in the right direction. Murmur is now used - it's even documented in the mapping changes.\nDue to that the distribution is different from before and due to that the scoring is different.\n","performed_via_github_app":null}]