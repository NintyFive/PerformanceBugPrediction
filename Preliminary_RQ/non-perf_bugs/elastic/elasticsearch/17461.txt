{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/17461","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17461/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17461/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17461/events","html_url":"https://github.com/elastic/elasticsearch/issues/17461","id":145019238,"node_id":"MDU6SXNzdWUxNDUwMTkyMzg=","number":17461,"title":"Native script invoke file script","user":{"login":"haingo-kenshjn","id":7381003,"node_id":"MDQ6VXNlcjczODEwMDM=","avatar_url":"https://avatars1.githubusercontent.com/u/7381003?v=4","gravatar_id":"","url":"https://api.github.com/users/haingo-kenshjn","html_url":"https://github.com/haingo-kenshjn","followers_url":"https://api.github.com/users/haingo-kenshjn/followers","following_url":"https://api.github.com/users/haingo-kenshjn/following{/other_user}","gists_url":"https://api.github.com/users/haingo-kenshjn/gists{/gist_id}","starred_url":"https://api.github.com/users/haingo-kenshjn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/haingo-kenshjn/subscriptions","organizations_url":"https://api.github.com/users/haingo-kenshjn/orgs","repos_url":"https://api.github.com/users/haingo-kenshjn/repos","events_url":"https://api.github.com/users/haingo-kenshjn/events{/privacy}","received_events_url":"https://api.github.com/users/haingo-kenshjn/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2016-03-31T21:09:04Z","updated_at":"2016-04-01T17:11:50Z","closed_at":"2016-04-01T17:11:50Z","author_association":"NONE","active_lock_reason":null,"body":"From: https://github.com/elastic/elasticsearch/issues/17448. It's impossible to retrieve native from plugin because of security problem.\n\nCan I invoke groovy script from native ?\n\n```\n@Inject\npublic Factory(Settings settings, GroovyScriptEngineService service) {\n    super(settings);\n    this.service = service;\n}\n```\n\nthen in constructor : \n\n```\n    @Override\n    public Object run() {\n        GroovyScriptEngineService abc = TestScript.Factory.service;\n        CompiledScript combined = new CompiledScript(ScriptType.FILE, \"init\", \"groovy\", abc.compile(\"init\"));\n        logger.info(combined.getClass().toString());\n        return abc.execute(combined, params);\n    }\n```\n\nResult:\n\n> \"reason\": {\n>             \"type\": \"script_exception\",\n>             \"reason\": \"failed to execute file script [init] using lang [groovy]\",\n>             \"caused_by\": {\n>             \"type\": \"missing_property_exception\",\n>             \"reason\": \"No such property: init for class: fd62812fbd9ec4c7f99aa4f6253fead2388eb238\"\n>    }\n> }\n","closed_by":{"login":"haingo-kenshjn","id":7381003,"node_id":"MDQ6VXNlcjczODEwMDM=","avatar_url":"https://avatars1.githubusercontent.com/u/7381003?v=4","gravatar_id":"","url":"https://api.github.com/users/haingo-kenshjn","html_url":"https://github.com/haingo-kenshjn","followers_url":"https://api.github.com/users/haingo-kenshjn/followers","following_url":"https://api.github.com/users/haingo-kenshjn/following{/other_user}","gists_url":"https://api.github.com/users/haingo-kenshjn/gists{/gist_id}","starred_url":"https://api.github.com/users/haingo-kenshjn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/haingo-kenshjn/subscriptions","organizations_url":"https://api.github.com/users/haingo-kenshjn/orgs","repos_url":"https://api.github.com/users/haingo-kenshjn/repos","events_url":"https://api.github.com/users/haingo-kenshjn/events{/privacy}","received_events_url":"https://api.github.com/users/haingo-kenshjn/received_events","type":"User","site_admin":false},"performed_via_github_app":null}