{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/17171","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17171/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17171/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17171/events","html_url":"https://github.com/elastic/elasticsearch/issues/17171","id":141612169,"node_id":"MDU6SXNzdWUxNDE2MTIxNjk=","number":17171,"title":"elasticsearch does not start / gradle build totally broken with JDK 9 build 110","user":{"login":"rmuir","id":504194,"node_id":"MDQ6VXNlcjUwNDE5NA==","avatar_url":"https://avatars1.githubusercontent.com/u/504194?v=4","gravatar_id":"","url":"https://api.github.com/users/rmuir","html_url":"https://github.com/rmuir","followers_url":"https://api.github.com/users/rmuir/followers","following_url":"https://api.github.com/users/rmuir/following{/other_user}","gists_url":"https://api.github.com/users/rmuir/gists{/gist_id}","starred_url":"https://api.github.com/users/rmuir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmuir/subscriptions","organizations_url":"https://api.github.com/users/rmuir/orgs","repos_url":"https://api.github.com/users/rmuir/repos","events_url":"https://api.github.com/users/rmuir/events{/privacy}","received_events_url":"https://api.github.com/users/rmuir/received_events","type":"User","site_admin":false},"labels":[{"id":106454670,"node_id":"MDU6TGFiZWwxMDY0NTQ2NzA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Build","name":":Delivery/Build","color":"0e8a16","default":false,"description":"Build or test infrastructure"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"},{"id":249799053,"node_id":"MDU6TGFiZWwyNDk3OTkwNTM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/jvm%20bug","name":"jvm bug","color":"e11d21","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2016-03-17T15:11:46Z","updated_at":"2020-11-11T21:43:27Z","closed_at":"2018-03-12T22:39:12Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"With the latest java 9 ea (110), a compiled version will not work at all.\nMaybe we are doing something illegal/sheisty to retrieve the PID, maybe its a bug.\n\n```\nrmuir@beast:~/workspace/elasticsearch/distribution/zip/build/distributions/elasticsearch-5.0.0-SNAPSHOT$ bin/elasticsearch\nJava HotSpot(TM) 64-Bit Server VM warning: Option UseParNewGC was deprecated in version 9.0 and will likely be removed in a future release.\nException in thread \"main\" java.lang.NoClassDefFoundError: Could not initialize class java.lang.management.ManagementFactory$PlatformMBeanFinder\n    at java.lang.management.ManagementFactory.getPlatformMXBean(ManagementFactory.java:649)\n    at java.lang.management.ManagementFactory.getRuntimeMXBean(ManagementFactory.java:355)\n    at org.elasticsearch.monitor.jvm.JvmInfo.<clinit>(JvmInfo.java:53)\n    at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:245)\n    at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:108)\n    at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:103)\n    at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:88)\n    at org.elasticsearch.cli.Command.main(Command.java:53)\n    at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:74)\n    at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:67)\nRefer to the log for complete error details.\n```\n\nAlso gradle itself eats it early and does not work at all:\n\n```\nrmuir@beast:~/workspace/elasticsearch$ gradle --stacktrace clean\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nsun.management.spi.PlatformMBeanProvider: Provider jdk.management.cmm.internal.PlatformMBeanProviderImpl not found\n\n* Try:\nRun with --info or --debug option to get more log output.\n\n* Exception is:\njava.util.ServiceConfigurationError: sun.management.spi.PlatformMBeanProvider: Provider jdk.management.cmm.internal.PlatformMBeanProviderImpl not found\n    at java.util.ServiceLoader.fail(ServiceLoader.java:237)\n    at java.util.ServiceLoader.access$300(ServiceLoader.java:183)\n    at java.util.ServiceLoader$LazyIterator.nextService(ServiceLoader.java:370)\n    at java.util.ServiceLoader$LazyIterator.next(ServiceLoader.java:402)\n    at java.util.ServiceLoader$1.next(ServiceLoader.java:478)\n    at java.lang.Iterable.forEach(Iterable.java:74)\n    at java.lang.management.ManagementFactory$PlatformMBeanFinder.lambda$static$0(ManagementFactory.java:890)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.security.AccessController.doPrivileged(AccessController.java:428)\n    at java.lang.management.ManagementFactory$PlatformMBeanFinder.<clinit>(ManagementFactory.java:886)\n    at java.lang.management.ManagementFactory.getPlatformMXBean(ManagementFactory.java:649)\n    at java.lang.management.ManagementFactory.getRuntimeMXBean(ManagementFactory.java:355)\n    at org.gradle.launcher.daemon.configuration.CurrentProcess.inferJvmOptions(CurrentProcess.java:71)\n    at org.gradle.launcher.daemon.configuration.CurrentProcess.<init>(CurrentProcess.java:33)\n    at org.gradle.launcher.cli.BuildActionsFactory.canUseCurrentProcess(BuildActionsFactory.java:95)\n    at org.gradle.launcher.cli.BuildActionsFactory.createAction(BuildActionsFactory.java:72)\n    at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.createAction(CommandLineActionFactory.java:242)\n    at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:232)\n    at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:210)\n    at org.gradle.launcher.cli.JavaRuntimeValidationAction.execute(JavaRuntimeValidationAction.java:35)\n    at org.gradle.launcher.cli.JavaRuntimeValidationAction.execute(JavaRuntimeValidationAction.java:24)\n    at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:206)\n    at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:169)\n    at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:33)\n    at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:22)\n    at org.gradle.launcher.Main.doAction(Main.java:33)\n    at org.gradle.launcher.bootstrap.EntryPoint.run(EntryPoint.java:45)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:520)\n    at org.gradle.launcher.bootstrap.ProcessBootstrap.runNoExit(ProcessBootstrap.java:54)\n    at org.gradle.launcher.bootstrap.ProcessBootstrap.run(ProcessBootstrap.java:35)\n    at org.gradle.launcher.GradleMain.main(GradleMain.java:23)\n```\n","closed_by":{"login":"hub-cap","id":613352,"node_id":"MDQ6VXNlcjYxMzM1Mg==","avatar_url":"https://avatars2.githubusercontent.com/u/613352?v=4","gravatar_id":"","url":"https://api.github.com/users/hub-cap","html_url":"https://github.com/hub-cap","followers_url":"https://api.github.com/users/hub-cap/followers","following_url":"https://api.github.com/users/hub-cap/following{/other_user}","gists_url":"https://api.github.com/users/hub-cap/gists{/gist_id}","starred_url":"https://api.github.com/users/hub-cap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hub-cap/subscriptions","organizations_url":"https://api.github.com/users/hub-cap/orgs","repos_url":"https://api.github.com/users/hub-cap/repos","events_url":"https://api.github.com/users/hub-cap/events{/privacy}","received_events_url":"https://api.github.com/users/hub-cap/received_events","type":"User","site_admin":false},"performed_via_github_app":null}