{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/7345","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7345/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7345/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7345/events","html_url":"https://github.com/elastic/elasticsearch/issues/7345","id":40669769,"node_id":"MDU6SXNzdWU0MDY2OTc2OQ==","number":7345,"title":"Why the mappings in rails is replaced by default setting","user":{"login":"tigerneil","id":5799436,"node_id":"MDQ6VXNlcjU3OTk0MzY=","avatar_url":"https://avatars1.githubusercontent.com/u/5799436?v=4","gravatar_id":"","url":"https://api.github.com/users/tigerneil","html_url":"https://github.com/tigerneil","followers_url":"https://api.github.com/users/tigerneil/followers","following_url":"https://api.github.com/users/tigerneil/following{/other_user}","gists_url":"https://api.github.com/users/tigerneil/gists{/gist_id}","starred_url":"https://api.github.com/users/tigerneil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tigerneil/subscriptions","organizations_url":"https://api.github.com/users/tigerneil/orgs","repos_url":"https://api.github.com/users/tigerneil/repos","events_url":"https://api.github.com/users/tigerneil/events{/privacy}","received_events_url":"https://api.github.com/users/tigerneil/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2014-08-20T07:20:51Z","updated_at":"2014-08-20T07:34:32Z","closed_at":"2014-08-20T07:34:32Z","author_association":"NONE","active_lock_reason":null,"body":"I use elasticsearch in my rails application. The following are my settings and mappings:\n\n```\nsettings index: { number_of_shards: 5 }, analysis: { analyzer: 'ik' } do\n    mappings dynamic: 'strict' do\n      indexes :title, analyzer: 'ik', type: :string\n      indexes :content, analyzer: 'ik', type: :string\n      indexes :likes_count, type: :integer\n      indexes :tags do\n        indexes :name, analyzer: 'ik', type: :string\n      end\n    end\n  end\n```\n\nWhen I use `Note.import` to build index for my  data, I just found the settings and mappings in elasticsearch using the default configuration. \n\n```\ncurl -XGET localhost:9200/collections/collection/_mapping?pretty \n{\n  \"collections\" : {\n    \"mappings\" : {\n      \"collection\" : {\n        \"properties\" : {\n          \"content\" : {\n            \"type\" : \"string\"\n          },\n          \"created_at\" : {\n            \"type\" : \"date\",\n            \"format\" : \"dateOptionalTime\"\n          },\n          \"id\" : {\n            \"type\" : \"long\"\n          },\n          \"image_content_type\" : {\n            \"type\" : \"string\"\n          },\n          \"image_file_name\" : {\n            \"type\" : \"string\"\n          },\n          \"image_file_size\" : {\n            \"type\" : \"long\"\n          },\n          \"image_updated_at\" : {\n            \"type\" : \"date\",\n            \"format\" : \"dateOptionalTime\"\n          },\n          \"likes_count\" : {\n            \"type\" : \"long\"\n          },\n          \"newly_added_at\" : {\n            \"type\" : \"long\"\n          },\n          \"priority\" : {\n            \"type\" : \"long\"\n          },\n          \"recommended\" : {\n            \"type\" : \"boolean\"\n          },\n          \"slug\" : {\n            \"type\" : \"string\"\n          },\n          \"tags\" : {\n            \"properties\" : {\n              \"name\" : {\n                \"type\" : \"string\"\n              }\n            }\n          },\n          \"title\" : {\n            \"type\" : \"string\"\n          },\n          \"updated_at\" : {\n            \"type\" : \"date\",\n            \"format\" : \"dateOptionalTime\"\n          },\n          \"user_id\" : {\n            \"type\" : \"long\"\n          },\n          \"visible\" : {\n            \"type\" : \"boolean\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nThey all use a default setting and mapping configuration.  I have tried a lot but fail to deal with it. Could somebody shed some light on this problem?\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}