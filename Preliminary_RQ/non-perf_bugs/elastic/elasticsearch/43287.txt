{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/43287","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43287/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43287/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/43287/events","html_url":"https://github.com/elastic/elasticsearch/issues/43287","id":457007228,"node_id":"MDU6SXNzdWU0NTcwMDcyMjg=","number":43287,"title":"[CI] DocsClientYamlTestSuiteIT {yaml=reference/search/request/sort/line_514} failed on master fails due to geo distance mapper failure","user":{"login":"dakrone","id":19060,"node_id":"MDQ6VXNlcjE5MDYw","avatar_url":"https://avatars3.githubusercontent.com/u/19060?v=4","gravatar_id":"","url":"https://api.github.com/users/dakrone","html_url":"https://github.com/dakrone","followers_url":"https://api.github.com/users/dakrone/followers","following_url":"https://api.github.com/users/dakrone/following{/other_user}","gists_url":"https://api.github.com/users/dakrone/gists{/gist_id}","starred_url":"https://api.github.com/users/dakrone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakrone/subscriptions","organizations_url":"https://api.github.com/users/dakrone/orgs","repos_url":"https://api.github.com/users/dakrone/repos","events_url":"https://api.github.com/users/dakrone/events{/privacy}","received_events_url":"https://api.github.com/users/dakrone/received_events","type":"User","site_admin":false},"labels":[{"id":141079527,"node_id":"MDU6TGFiZWwxNDEwNzk1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Analytics/Geo","name":":Analytics/Geo","color":"0e8a16","default":false,"description":"Indexing, search aggregations of geo points and shapes"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-06-17T15:43:08Z","updated_at":"2019-06-21T14:06:15Z","closed_at":"2019-06-21T14:06:15Z","author_association":"MEMBER","active_lock_reason":null,"body":"In the geo sort documentation, the query failed in the test:\r\n\r\n```\r\n\"type\" : \"illegal_argument_exception\",\r\n\"reason\" : \"failed to find mapper for [pin.location] for geo distance based sort\",\r\n\"stack_trace\" : \"[failed to find mapper for [pin.location] for geo distance based sort]; nested: IllegalArgumentException[failed to find mapper for [pin.location] for geo distance based sort];\r\n```\r\n\r\nThe build scan is at https://scans.gradle.com/s/ublvsm4jfwhjs/tests/jbm2x6tnwtxku-5qgvxxvgu23yc\r\n\r\nThe reproduce line is:\r\n\r\n```\r\n./gradlew :docs:integTestRunner --tests \"org.elasticsearch.smoketest.DocsClientYamlTestSuiteIT.test {yaml=reference/search/request/sort/line_514}\" -Dtests.seed=2F476A0C6B5AFE2F -Dtests.security.manager=true -Dtests.locale=pa -Dtests.timezone=Asia/Yakutsk -Dcompiler.java=12 -Druntime.java=11\r\n```\r\n\r\nBut it did not reproduce for me.\r\n\r\nFull failure:\r\n\r\n<details>\r\n<pre>\r\n:docs:integTestRunnerorg.elasticsearch.smoketest.DocsClientYamlTestSuiteIT Â» test {yaml=reference/search/request/sort/line_514} (0.331s)\r\njava.lang.AssertionError\r\n: \r\nFailure at [reference/search/request/sort:417]: expected [2xx] status code but api [raw[method=GET path=_search]] returned [400 Bad Request] [{\"error\":{\"root_cause\":[{\"type\":\"illegal_argument_exception\",\"reason\":\"failed to find mapper for [pin.location] for geo distance based sort\",\"stack_trace\":\"[failed to find mapper for [pin.location] for geo distance based sort]; nested: IllegalArgumentException[failed to find mapper for [pin.location] for geo distance based sort];\\n\\tat org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:639)\\n\\tat org.elasticsearch.action.search.SearchPhaseExecutionException.guessRootCauses(SearchPhaseExecutionException.java:167)\\n\\tat org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:621)\\n\\tat org.elasticsearch.ElasticsearchException.generateFailureXContent(ElasticsearchException.java:567)\\n\\tat org.elasticsearch.rest.BytesRestResponse.build(BytesRestResponse.java:138)\\n\\tat org.elasticsearch.rest.BytesRestResponse.<init>(BytesRestResponse.java:96)\\n\\tat org.elasticsearch.rest.BytesRestResponse.<init>(BytesRestResponse.java:91)\\n\\tat org.elasticsearch.rest.action.RestActionListener.onFailure(RestActionListener.java:58)\\n\\tat org.elasticsearch.action.support.TransportAction$1.onFailure(TransportAction.java:74)\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.raisePhaseFailure(AbstractSearchAsyncAction.java:243)\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseFailure(AbstractSearchAsyncAction.java:301)\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:139)\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseDone(AbstractSearchAsyncAction.java:264)\\n\\tat org.elasticsearch.action.search.InitialSearchPhase.onShardFailure(InitialSearchPhase.java:105)\\n\\tat org.elasticsearch.action.search.InitialSearchPhase$2.onFailure(InitialSearchPhase.java:273)\\n\\tat org.elasticsearch.action.search.SearchExecutionStatsCollector.onFailure(SearchExecutionStatsCollector.java:73)\\n\\tat org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:59)\\n\\tat org.elasticsearch.action.search.SearchTransportService$ConnectionCountingHandler.handleException(SearchTransportService.java:441)\\n\\tat org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1101)\\n\\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.processException(TransportService.java:1213)\\n\\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:1187)\\n\\tat org.elasticsearch.transport.TaskTransportChannel.sendResponse(TaskTransportChannel.java:60)\\n\\tat org.elasticsearch.action.support.ChannelActionListener.onFailure(ChannelActionListener.java:56)\\n\\tat org.elasticsearch.action.ActionListener$1.onFailure(ActionListener.java:70)\\n\\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:64)\\n\\tat org.elasticsearch.search.SearchService$2.doRun(SearchService.java:1052)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:44)\\n\\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:757)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\\n\\tat java.base/java.lang.Thread.run(Thread.java:834)\\nCaused by: java.lang.IllegalArgumentException: failed to find mapper for [pin.location] for geo distance based sort\\n\\tat org.elasticsearch.search.sort.GeoDistanceSortBuilder.build(GeoDistanceSortBuilder.java:608)\\n\\tat org.elasticsearch.search.sort.SortBuilder.buildSort(SortBuilder.java:147)\\n\\tat org.elasticsearch.search.SearchService.parseSource(SearchService.java:760)\\n\\tat org.elasticsearch.search.SearchService.createContext(SearchService.java:591)\\n\\tat org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:550)\\n\\tat org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:353)\\n\\tat org.elasticsearch.search.SearchService.lambda$executeQueryPhase$1(SearchService.java:340)\\n\\tat org.elasticsearch.action.ActionListener.lambda$map$2(ActionListener.java:145)\\n\\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:62)\\n\\t... 8 more\\n\"}],\"type\":\"search_phase_execution_exception\",\"reason\":\"all shards failed\",\"phase\":\"query\",\"grouped\":true,\"failed_shards\":[{\"shard\":0,\"index\":\".data-frame-notifications-1\",\"node\":\"uhxxwHciSt-IDFhse57DIQ\",\"reason\":{\"type\":\"illegal_argument_exception\",\"reason\":\"failed to find mapper for [pin.location] for geo distance based sort\",\"stack_trace\":\"java.lang.IllegalArgumentException: failed to find mapper for [pin.location] for geo distance based sort\\n\\tat org.elasticsearch.search.sort.GeoDistanceSortBuilder.build(GeoDistanceSortBuilder.java:608)\\n\\tat org.elasticsearch.search.sort.SortBuilder.buildSort(SortBuilder.java:147)\\n\\tat org.elasticsearch.search.SearchService.parseSource(SearchService.java:760)\\n\\tat org.elasticsearch.search.SearchService.createContext(SearchService.java:591)\\n\\tat org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:550)\\n\\tat org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:353)\\n\\tat org.elasticsearch.search.SearchService.lambda$executeQueryPhase$1(SearchService.java:340)\\n\\tat org.elasticsearch.action.ActionListener.lambda$map$2(ActionListener.java:145)\\n\\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:62)\\n\\tat org.elasticsearch.search.SearchService$2.doRun(SearchService.java:1052)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:44)\\n\\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:757)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\\n\\tat java.base/java.lang.Thread.run(Thread.java:834)\\n\"}}],\"caused_by\":{\"type\":\"illegal_argument_exception\",\"reason\":\"failed to find mapper for [pin.location] for geo distance based sort\",\"caused_by\":{\"type\":\"illegal_argument_exception\",\"reason\":\"failed to find mapper for [pin.location] for geo distance based sort\",\"stack_trace\":\"java.lang.IllegalArgumentException: failed to find mapper for [pin.location] for geo distance based sort\\n\\tat org.elasticsearch.search.sort.GeoDistanceSortBuilder.build(GeoDistanceSortBuilder.java:608)\\n\\tat org.elasticsearch.search.sort.SortBuilder.buildSort(SortBuilder.java:147)\\n\\tat org.elasticsearch.search.SearchService.parseSource(SearchService.java:760)\\n\\tat org.elasticsearch.search.SearchService.createContext(SearchService.java:591)\\n\\tat org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:550)\\n\\tat org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:353)\\n\\tat org.elasticsearch.search.SearchService.lambda$executeQueryPhase$1(SearchService.java:340)\\n\\tat org.elasticsearch.action.ActionListener.lambda$map$2(ActionListener.java:145)\\n\\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:62)\\n\\tat org.elasticsearch.search.SearchService$2.doRun(SearchService.java:1052)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:44)\\n\\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:757)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\\n\\tat java.base/java.lang.Thread.run(Thread.java:834)\\n\"},\"stack_trace\":\"[failed to find mapper for [pin.location] for geo distance based sort]; nested: IllegalArgumentException[failed to find mapper for [pin.location] for geo distance based sort];\\n\\tat org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:639)\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:137)\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseDone(AbstractSearchAsyncAction.java:264)\\n\\tat org.elasticsearch.action.search.InitialSearchPhase.onShardFailure(InitialSearchPhase.java:105)\\n\\tat org.elasticsearch.action.search.InitialSearchPhase$2.onFailure(InitialSearchPhase.java:273)\\n\\tat org.elasticsearch.action.search.SearchExecutionStatsCollector.onFailure(SearchExecutionStatsCollector.java:73)\\n\\tat org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:59)\\n\\tat org.elasticsearch.action.search.SearchTransportService$ConnectionCountingHandler.handleException(SearchTransportService.java:441)\\n\\tat org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1101)\\n\\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.processException(TransportService.java:1213)\\n\\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:1187)\\n\\tat org.elasticsearch.transport.TaskTransportChannel.sendResponse(TaskTransportChannel.java:60)\\n\\tat org.elasticsearch.action.support.ChannelActionListener.onFailure(ChannelActionListener.java:56)\\n\\tat org.elasticsearch.action.ActionListener$1.onFailure(ActionListener.java:70)\\n\\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:64)\\n\\tat org.elasticsearch.search.SearchService$2.doRun(SearchService.java:1052)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:44)\\n\\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:757)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\\n\\tat java.base/java.lang.Thread.run(Thread.java:834)\\nCaused by: java.lang.IllegalArgumentException: failed to find mapper for [pin.location] for geo distance based sort\\n\\tat org.elasticsearch.search.sort.GeoDistanceSortBuilder.build(GeoDistanceSortBuilder.java:608)\\n\\tat org.elasticsearch.search.sort.SortBuilder.buildSort(SortBuilder.java:147)\\n\\tat org.elasticsearch.search.SearchService.parseSource(SearchService.java:760)\\n\\tat org.elasticsearch.search.SearchService.createContext(SearchService.java:591)\\n\\tat org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:550)\\n\\tat org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:353)\\n\\tat org.elasticsearch.search.SearchService.lambda$executeQueryPhase$1(SearchService.java:340)\\n\\tat org.elasticsearch.action.ActionListener.lambda$map$2(ActionListener.java:145)\\n\\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:62)\\n\\t... 8 more\\n\"},\"stack_trace\":\"Failed to execute phase [query], all shards failed; shardFailures {[uhxxwHciSt-IDFhse57DIQ][.data-frame-notifications-1][0]: RemoteTransportException[[node-0][127.0.0.1:38185][indices:data/read/search[phase/query]]]; nested: IllegalArgumentException[failed to find mapper for [pin.location] for geo distance based sort]; }\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseFailure(AbstractSearchAsyncAction.java:301)\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:139)\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseDone(AbstractSearchAsyncAction.java:264)\\n\\tat org.elasticsearch.action.search.InitialSearchPhase.onShardFailure(InitialSearchPhase.java:105)\\n\\tat org.elasticsearch.action.search.InitialSearchPhase$2.onFailure(InitialSearchPhase.java:273)\\n\\tat org.elasticsearch.action.search.SearchExecutionStatsCollector.onFailure(SearchExecutionStatsCollector.java:73)\\n\\tat org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:59)\\n\\tat org.elasticsearch.action.search.SearchTransportService$ConnectionCountingHandler.handleException(SearchTransportService.java:441)\\n\\tat org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1101)\\n\\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.processException(TransportService.java:1213)\\n\\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:1187)\\n\\tat org.elasticsearch.transport.TaskTransportChannel.sendResponse(TaskTransportChannel.java:60)\\n\\tat org.elasticsearch.action.support.ChannelActionListener.onFailure(ChannelActionListener.java:56)\\n\\tat org.elasticsearch.action.ActionListener$1.onFailure(ActionListener.java:70)\\n\\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:64)\\n\\tat org.elasticsearch.search.SearchService$2.doRun(SearchService.java:1052)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:44)\\n\\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:757)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\\n\\tat java.base/java.lang.Thread.run(Thread.java:834)\\nCaused by: [failed to find mapper for [pin.location] for geo distance based sort]; nested: IllegalArgumentException[failed to find mapper for [pin.location] for geo distance based sort];\\n\\tat org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:639)\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:137)\\n\\t... 21 more\\nCaused by: java.lang.IllegalArgumentException: failed to find mapper for [pin.location] for geo distance based sort\\n\\tat org.elasticsearch.search.sort.GeoDistanceSortBuilder.build(GeoDistanceSortBuilder.java:608)\\n\\tat org.elasticsearch.search.sort.SortBuilder.buildSort(SortBuilder.java:147)\\n\\tat org.elasticsearch.search.SearchService.parseSource(SearchService.java:760)\\n\\tat org.elasticsearch.search.SearchService.createContext(SearchService.java:591)\\n\\tat org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:550)\\n\\tat org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:353)\\n\\tat org.elasticsearch.search.SearchService.lambda$executeQueryPhase$1(SearchService.java:340)\\n\\tat org.elasticsearch.action.ActionListener.lambda$map$2(ActionListener.java:145)\\n\\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:62)\\n\\t... 8 more\\n\"},\"status\":400}]\r\nOpen stacktrace\r\nCaused by: \r\njava.lang.AssertionError\r\n: \r\nexpected [2xx] status code but api [raw[method=GET path=_search]] returned [400 Bad Request] [{\"error\":{\"root_cause\":[{\"type\":\"illegal_argument_exception\",\"reason\":\"failed to find mapper for [pin.location] for geo distance based sort\",\"stack_trace\":\"[failed to find mapper for [pin.location] for geo distance based sort]; nested: IllegalArgumentException[failed to find mapper for [pin.location] for geo distance based sort];\\n\\tat org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:639)\\n\\tat org.elasticsearch.action.search.SearchPhaseExecutionException.guessRootCauses(SearchPhaseExecutionException.java:167)\\n\\tat org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:621)\\n\\tat org.elasticsearch.ElasticsearchException.generateFailureXContent(ElasticsearchException.java:567)\\n\\tat org.elasticsearch.rest.BytesRestResponse.build(BytesRestResponse.java:138)\\n\\tat org.elasticsearch.rest.BytesRestResponse.<init>(BytesRestResponse.java:96)\\n\\tat org.elasticsearch.rest.BytesRestResponse.<init>(BytesRestResponse.java:91)\\n\\tat org.elasticsearch.rest.action.RestActionListener.onFailure(RestActionListener.java:58)\\n\\tat org.elasticsearch.action.support.TransportAction$1.onFailure(TransportAction.java:74)\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.raisePhaseFailure(AbstractSearchAsyncAction.java:243)\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseFailure(AbstractSearchAsyncAction.java:301)\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:139)\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseDone(AbstractSearchAsyncAction.java:264)\\n\\tat org.elasticsearch.action.search.InitialSearchPhase.onShardFailure(InitialSearchPhase.java:105)\\n\\tat org.elasticsearch.action.search.InitialSearchPhase$2.onFailure(InitialSearchPhase.java:273)\\n\\tat org.elasticsearch.action.search.SearchExecutionStatsCollector.onFailure(SearchExecutionStatsCollector.java:73)\\n\\tat org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:59)\\n\\tat org.elasticsearch.action.search.SearchTransportService$ConnectionCountingHandler.handleException(SearchTransportService.java:441)\\n\\tat org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1101)\\n\\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.processException(TransportService.java:1213)\\n\\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:1187)\\n\\tat org.elasticsearch.transport.TaskTransportChannel.sendResponse(TaskTransportChannel.java:60)\\n\\tat org.elasticsearch.action.support.ChannelActionListener.onFailure(ChannelActionListener.java:56)\\n\\tat org.elasticsearch.action.ActionListener$1.onFailure(ActionListener.java:70)\\n\\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:64)\\n\\tat org.elasticsearch.search.SearchService$2.doRun(SearchService.java:1052)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:44)\\n\\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:757)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\\n\\tat java.base/java.lang.Thread.run(Thread.java:834)\\nCaused by: java.lang.IllegalArgumentException: failed to find mapper for [pin.location] for geo distance based sort\\n\\tat org.elasticsearch.search.sort.GeoDistanceSortBuilder.build(GeoDistanceSortBuilder.java:608)\\n\\tat org.elasticsearch.search.sort.SortBuilder.buildSort(SortBuilder.java:147)\\n\\tat org.elasticsearch.search.SearchService.parseSource(SearchService.java:760)\\n\\tat org.elasticsearch.search.SearchService.createContext(SearchService.java:591)\\n\\tat org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:550)\\n\\tat org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:353)\\n\\tat org.elasticsearch.search.SearchService.lambda$executeQueryPhase$1(SearchService.java:340)\\n\\tat org.elasticsearch.action.ActionListener.lambda$map$2(ActionListener.java:145)\\n\\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:62)\\n\\t... 8 more\\n\"}],\"type\":\"search_phase_execution_exception\",\"reason\":\"all shards failed\",\"phase\":\"query\",\"grouped\":true,\"failed_shards\":[{\"shard\":0,\"index\":\".data-frame-notifications-1\",\"node\":\"uhxxwHciSt-IDFhse57DIQ\",\"reason\":{\"type\":\"illegal_argument_exception\",\"reason\":\"failed to find mapper for [pin.location] for geo distance based sort\",\"stack_trace\":\"java.lang.IllegalArgumentException: failed to find mapper for [pin.location] for geo distance based sort\\n\\tat org.elasticsearch.search.sort.GeoDistanceSortBuilder.build(GeoDistanceSortBuilder.java:608)\\n\\tat org.elasticsearch.search.sort.SortBuilder.buildSort(SortBuilder.java:147)\\n\\tat org.elasticsearch.search.SearchService.parseSource(SearchService.java:760)\\n\\tat org.elasticsearch.search.SearchService.createContext(SearchService.java:591)\\n\\tat org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:550)\\n\\tat org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:353)\\n\\tat org.elasticsearch.search.SearchService.lambda$executeQueryPhase$1(SearchService.java:340)\\n\\tat org.elasticsearch.action.ActionListener.lambda$map$2(ActionListener.java:145)\\n\\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:62)\\n\\tat org.elasticsearch.search.SearchService$2.doRun(SearchService.java:1052)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:44)\\n\\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:757)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\\n\\tat java.base/java.lang.Thread.run(Thread.java:834)\\n\"}}],\"caused_by\":{\"type\":\"illegal_argument_exception\",\"reason\":\"failed to find mapper for [pin.location] for geo distance based sort\",\"caused_by\":{\"type\":\"illegal_argument_exception\",\"reason\":\"failed to find mapper for [pin.location] for geo distance based sort\",\"stack_trace\":\"java.lang.IllegalArgumentException: failed to find mapper for [pin.location] for geo distance based sort\\n\\tat org.elasticsearch.search.sort.GeoDistanceSortBuilder.build(GeoDistanceSortBuilder.java:608)\\n\\tat org.elasticsearch.search.sort.SortBuilder.buildSort(SortBuilder.java:147)\\n\\tat org.elasticsearch.search.SearchService.parseSource(SearchService.java:760)\\n\\tat org.elasticsearch.search.SearchService.createContext(SearchService.java:591)\\n\\tat org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:550)\\n\\tat org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:353)\\n\\tat org.elasticsearch.search.SearchService.lambda$executeQueryPhase$1(SearchService.java:340)\\n\\tat org.elasticsearch.action.ActionListener.lambda$map$2(ActionListener.java:145)\\n\\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:62)\\n\\tat org.elasticsearch.search.SearchService$2.doRun(SearchService.java:1052)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:44)\\n\\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:757)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\\n\\tat java.base/java.lang.Thread.run(Thread.java:834)\\n\"},\"stack_trace\":\"[failed to find mapper for [pin.location] for geo distance based sort]; nested: IllegalArgumentException[failed to find mapper for [pin.location] for geo distance based sort];\\n\\tat org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:639)\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:137)\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseDone(AbstractSearchAsyncAction.java:264)\\n\\tat org.elasticsearch.action.search.InitialSearchPhase.onShardFailure(InitialSearchPhase.java:105)\\n\\tat org.elasticsearch.action.search.InitialSearchPhase$2.onFailure(InitialSearchPhase.java:273)\\n\\tat org.elasticsearch.action.search.SearchExecutionStatsCollector.onFailure(SearchExecutionStatsCollector.java:73)\\n\\tat org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:59)\\n\\tat org.elasticsearch.action.search.SearchTransportService$ConnectionCountingHandler.handleException(SearchTransportService.java:441)\\n\\tat org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1101)\\n\\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.processException(TransportService.java:1213)\\n\\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:1187)\\n\\tat org.elasticsearch.transport.TaskTransportChannel.sendResponse(TaskTransportChannel.java:60)\\n\\tat org.elasticsearch.action.support.ChannelActionListener.onFailure(ChannelActionListener.java:56)\\n\\tat org.elasticsearch.action.ActionListener$1.onFailure(ActionListener.java:70)\\n\\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:64)\\n\\tat org.elasticsearch.search.SearchService$2.doRun(SearchService.java:1052)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:44)\\n\\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:757)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\\n\\tat java.base/java.lang.Thread.run(Thread.java:834)\\nCaused by: java.lang.IllegalArgumentException: failed to find mapper for [pin.location] for geo distance based sort\\n\\tat org.elasticsearch.search.sort.GeoDistanceSortBuilder.build(GeoDistanceSortBuilder.java:608)\\n\\tat org.elasticsearch.search.sort.SortBuilder.buildSort(SortBuilder.java:147)\\n\\tat org.elasticsearch.search.SearchService.parseSource(SearchService.java:760)\\n\\tat org.elasticsearch.search.SearchService.createContext(SearchService.java:591)\\n\\tat org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:550)\\n\\tat org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:353)\\n\\tat org.elasticsearch.search.SearchService.lambda$executeQueryPhase$1(SearchService.java:340)\\n\\tat org.elasticsearch.action.ActionListener.lambda$map$2(ActionListener.java:145)\\n\\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:62)\\n\\t... 8 more\\n\"},\"stack_trace\":\"Failed to execute phase [query], all shards failed; shardFailures {[uhxxwHciSt-IDFhse57DIQ][.data-frame-notifications-1][0]: RemoteTransportException[[node-0][127.0.0.1:38185][indices:data/read/search[phase/query]]]; nested: IllegalArgumentException[failed to find mapper for [pin.location] for geo distance based sort]; }\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseFailure(AbstractSearchAsyncAction.java:301)\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:139)\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseDone(AbstractSearchAsyncAction.java:264)\\n\\tat org.elasticsearch.action.search.InitialSearchPhase.onShardFailure(InitialSearchPhase.java:105)\\n\\tat org.elasticsearch.action.search.InitialSearchPhase$2.onFailure(InitialSearchPhase.java:273)\\n\\tat org.elasticsearch.action.search.SearchExecutionStatsCollector.onFailure(SearchExecutionStatsCollector.java:73)\\n\\tat org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:59)\\n\\tat org.elasticsearch.action.search.SearchTransportService$ConnectionCountingHandler.handleException(SearchTransportService.java:441)\\n\\tat org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1101)\\n\\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.processException(TransportService.java:1213)\\n\\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:1187)\\n\\tat org.elasticsearch.transport.TaskTransportChannel.sendResponse(TaskTransportChannel.java:60)\\n\\tat org.elasticsearch.action.support.ChannelActionListener.onFailure(ChannelActionListener.java:56)\\n\\tat org.elasticsearch.action.ActionListener$1.onFailure(ActionListener.java:70)\\n\\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:64)\\n\\tat org.elasticsearch.search.SearchService$2.doRun(SearchService.java:1052)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:44)\\n\\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:757)\\n\\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\\n\\tat java.base/java.lang.Thread.run(Thread.java:834)\\nCaused by: [failed to find mapper for [pin.location] for geo distance based sort]; nested: IllegalArgumentException[failed to find mapper for [pin.location] for geo distance based sort];\\n\\tat org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:639)\\n\\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:137)\\n\\t... 21 more\\nCaused by: java.lang.IllegalArgumentException: failed to find mapper for [pin.location] for geo distance based sort\\n\\tat org.elasticsearch.search.sort.GeoDistanceSortBuilder.build(GeoDistanceSortBuilder.java:608)\\n\\tat org.elasticsearch.search.sort.SortBuilder.buildSort(SortBuilder.java:147)\\n\\tat org.elasticsearch.search.SearchService.parseSource(SearchService.java:760)\\n\\tat org.elasticsearch.search.SearchService.createContext(SearchService.java:591)\\n\\tat org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:550)\\n\\tat org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:353)\\n\\tat org.elasticsearch.search.SearchService.lambda$executeQueryPhase$1(SearchService.java:340)\\n\\tat org.elasticsearch.action.ActionListener.lambda$map$2(ActionListener.java:145)\\n\\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:62)\\n\\t... 8 more\\n\"},\"status\":400}]\r\nOpen stacktrace\r\n[2019-06-18T00:25:33,131][INFO ][o.e.s.DocsClientYamlTestSuiteIT] [test] [yaml=reference/search/request/sort/line_514] before test\r\n[2019-06-18T00:25:33,181][INFO ][o.e.s.DocsClientYamlTestSuiteIT] [test] Stash dump on test failure [{\r\n  \"stash\" : {\r\n    \"body\" : {\r\n      \"error\" : {\r\n        \"root_cause\" : [\r\n          {\r\n            \"type\" : \"illegal_argument_exception\",\r\n            \"reason\" : \"failed to find mapper for [pin.location] for geo distance based sort\",\r\n            \"stack_trace\" : \"[failed to find mapper for [pin.location] for geo distance based sort]; nested: IllegalArgumentException[failed to find mapper for [pin.location] for geo distance based sort];\r\n\tat org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:639)\r\n\tat org.elasticsearch.action.search.SearchPhaseExecutionException.guessRootCauses(SearchPhaseExecutionException.java:167)\r\n\tat org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:621)\r\n\tat org.elasticsearch.ElasticsearchException.generateFailureXContent(ElasticsearchException.java:567)\r\n\tat org.elasticsearch.rest.BytesRestResponse.build(BytesRestResponse.java:138)\r\n\tat org.elasticsearch.rest.BytesRestResponse.<init>(BytesRestResponse.java:96)\r\n\tat org.elasticsearch.rest.BytesRestResponse.<init>(BytesRestResponse.java:91)\r\n\tat org.elasticsearch.rest.action.RestActionListener.onFailure(RestActionListener.java:58)\r\n\tat org.elasticsearch.action.support.TransportAction$1.onFailure(TransportAction.java:74)\r\n\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.raisePhaseFailure(AbstractSearchAsyncAction.java:243)\r\n\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseFailure(AbstractSearchAsyncAction.java:301)\r\n\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:139)\r\n\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseDone(AbstractSearchAsyncAction.java:264)\r\n\tat org.elasticsearch.action.search.InitialSearchPhase.onShardFailure(InitialSearchPhase.java:105)\r\n\tat org.elasticsearch.action.search.InitialSearchPhase$2.onFailure(InitialSearchPhase.java:273)\r\n\tat org.elasticsearch.action.search.SearchExecutionStatsCollector.onFailure(SearchExecutionStatsCollector.java:73)\r\n\tat org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:59)\r\n\tat org.elasticsearch.action.search.SearchTransportService$ConnectionCountingHandler.handleException(SearchTransportService.java:441)\r\n\tat org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1101)\r\n\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.processException(TransportService.java:1213)\r\n\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:1187)\r\n\tat org.elasticsearch.transport.TaskTransportChannel.sendResponse(TaskTransportChannel.java:60)\r\n\tat org.elasticsearch.action.support.ChannelActionListener.onFailure(ChannelActionListener.java:56)\r\n\tat org.elasticsearch.action.ActionListener$1.onFailure(ActionListener.java:70)\r\n\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:64)\r\n\tat org.elasticsearch.search.SearchService$2.doRun(SearchService.java:1052)\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\n\tat org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:44)\r\n\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:757)\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\nCaused by: java.lang.IllegalArgumentException: failed to find mapper for [pin.location] for geo distance based sort\r\n\tat org.elasticsearch.search.sort.GeoDistanceSortBuilder.build(GeoDistanceSortBuilder.java:608)\r\n\tat org.elasticsearch.search.sort.SortBuilder.buildSort(SortBuilder.java:147)\r\n\tat org.elasticsearch.search.SearchService.parseSource(SearchService.java:760)\r\n\tat org.elasticsearch.search.SearchService.createContext(SearchService.java:591)\r\n\tat org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:550)\r\n\tat org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:353)\r\n\tat org.elasticsearch.search.SearchService.lambda$executeQueryPhase$1(SearchService.java:340)\r\n\tat org.elasticsearch.action.ActionListener.lambda$map$2(ActionListener.java:145)\r\n\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:62)\r\n\t... 8 more\r\n\"\r\n          }\r\n        ],\r\n        \"type\" : \"search_phase_execution_exception\",\r\n        \"reason\" : \"all shards failed\",\r\n        \"phase\" : \"query\",\r\n        \"grouped\" : true,\r\n        \"failed_shards\" : [\r\n          {\r\n            \"shard\" : 0,\r\n            \"index\" : \".data-frame-notifications-1\",\r\n            \"node\" : \"uhxxwHciSt-IDFhse57DIQ\",\r\n            \"reason\" : {\r\n              \"type\" : \"illegal_argument_exception\",\r\n              \"reason\" : \"failed to find mapper for [pin.location] for geo distance based sort\",\r\n              \"stack_trace\" : \"java.lang.IllegalArgumentException: failed to find mapper for [pin.location] for geo distance based sort\r\n\tat org.elasticsearch.search.sort.GeoDistanceSortBuilder.build(GeoDistanceSortBuilder.java:608)\r\n\tat org.elasticsearch.search.sort.SortBuilder.buildSort(SortBuilder.java:147)\r\n\tat org.elasticsearch.search.SearchService.parseSource(SearchService.java:760)\r\n\tat org.elasticsearch.search.SearchService.createContext(SearchService.java:591)\r\n\tat org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:550)\r\n\tat org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:353)\r\n\tat org.elasticsearch.search.SearchService.lambda$executeQueryPhase$1(SearchService.java:340)\r\n\tat org.elasticsearch.action.ActionListener.lambda$map$2(ActionListener.java:145)\r\n\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:62)\r\n\tat org.elasticsearch.search.SearchService$2.doRun(SearchService.java:1052)\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\n\tat org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:44)\r\n\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:757)\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\n\"\r\n            }\r\n          }\r\n        ],\r\n        \"caused_by\" : {\r\n          \"type\" : \"illegal_argument_exception\",\r\n          \"reason\" : \"failed to find mapper for [pin.location] for geo distance based sort\",\r\n          \"caused_by\" : {\r\n            \"type\" : \"illegal_argument_exception\",\r\n            \"reason\" : \"failed to find mapper for [pin.location] for geo distance based sort\",\r\n            \"stack_trace\" : \"java.lang.IllegalArgumentException: failed to find mapper for [pin.location] for geo distance based sort\r\n\tat org.elasticsearch.search.sort.GeoDistanceSortBuilder.build(GeoDistanceSortBuilder.java:608)\r\n\tat org.elasticsearch.search.sort.SortBuilder.buildSort(SortBuilder.java:147)\r\n\tat org.elasticsearch.search.SearchService.parseSource(SearchService.java:760)\r\n\tat org.elasticsearch.search.SearchService.createContext(SearchService.java:591)\r\n\tat org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:550)\r\n\tat org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:353)\r\n\tat org.elasticsearch.search.SearchService.lambda$executeQueryPhase$1(SearchService.java:340)\r\n\tat org.elasticsearch.action.ActionListener.lambda$map$2(ActionListener.java:145)\r\n\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:62)\r\n\tat org.elasticsearch.search.SearchService$2.doRun(SearchService.java:1052)\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\n\tat org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:44)\r\n\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:757)\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\n\"\r\n          },\r\n          \"stack_trace\" : \"[failed to find mapper for [pin.location] for geo distance based sort]; nested: IllegalArgumentException[failed to find mapper for [pin.location] for geo distance based sort];\r\n\tat org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:639)\r\n\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:137)\r\n\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseDone(AbstractSearchAsyncAction.java:264)\r\n\tat org.elasticsearch.action.search.InitialSearchPhase.onShardFailure(InitialSearchPhase.java:105)\r\n\tat org.elasticsearch.action.search.InitialSearchPhase$2.onFailure(InitialSearchPhase.java:273)\r\n\tat org.elasticsearch.action.search.SearchExecutionStatsCollector.onFailure(SearchExecutionStatsCollector.java:73)\r\n\tat org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:59)\r\n\tat org.elasticsearch.action.search.SearchTransportService$ConnectionCountingHandler.handleException(SearchTransportService.java:441)\r\n\tat org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1101)\r\n\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.processException(TransportService.java:1213)\r\n\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:1187)\r\n\tat org.elasticsearch.transport.TaskTransportChannel.sendResponse(TaskTransportChannel.java:60)\r\n\tat org.elasticsearch.action.support.ChannelActionListener.onFailure(ChannelActionListener.java:56)\r\n\tat org.elasticsearch.action.ActionListener$1.onFailure(ActionListener.java:70)\r\n\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:64)\r\n\tat org.elasticsearch.search.SearchService$2.doRun(SearchService.java:1052)\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\n\tat org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:44)\r\n\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:757)\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\nCaused by: java.lang.IllegalArgumentException: failed to find mapper for [pin.location] for geo distance based sort\r\n\tat org.elasticsearch.search.sort.GeoDistanceSortBuilder.build(GeoDistanceSortBuilder.java:608)\r\n\tat org.elasticsearch.search.sort.SortBuilder.buildSort(SortBuilder.java:147)\r\n\tat org.elasticsearch.search.SearchService.parseSource(SearchService.java:760)\r\n\tat org.elasticsearch.search.SearchService.createContext(SearchService.java:591)\r\n\tat org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:550)\r\n\tat org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:353)\r\n\tat org.elasticsearch.search.SearchService.lambda$executeQueryPhase$1(SearchService.java:340)\r\n\tat org.elasticsearch.action.ActionListener.lambda$map$2(ActionListener.java:145)\r\n\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:62)\r\n\t... 8 more\r\n\"\r\n        },\r\n        \"stack_trace\" : \"Failed to execute phase [query], all shards failed; shardFailures {[uhxxwHciSt-IDFhse57DIQ][.data-frame-notifications-1][0]: RemoteTransportException[[node-0][127.0.0.1:38185][indices:data/read/search[phase/query]]]; nested: IllegalArgumentException[failed to find mapper for [pin.location] for geo distance based sort]; }\r\n\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseFailure(AbstractSearchAsyncAction.java:301)\r\n\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:139)\r\n\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseDone(AbstractSearchAsyncAction.java:264)\r\n\tat org.elasticsearch.action.search.InitialSearchPhase.onShardFailure(InitialSearchPhase.java:105)\r\n\tat org.elasticsearch.action.search.InitialSearchPhase$2.onFailure(InitialSearchPhase.java:273)\r\n\tat org.elasticsearch.action.search.SearchExecutionStatsCollector.onFailure(SearchExecutionStatsCollector.java:73)\r\n\tat org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:59)\r\n\tat org.elasticsearch.action.search.SearchTransportService$ConnectionCountingHandler.handleException(SearchTransportService.java:441)\r\n\tat org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1101)\r\n\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.processException(TransportService.java:1213)\r\n\tat org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:1187)\r\n\tat org.elasticsearch.transport.TaskTransportChannel.sendResponse(TaskTransportChannel.java:60)\r\n\tat org.elasticsearch.action.support.ChannelActionListener.onFailure(ChannelActionListener.java:56)\r\n\tat org.elasticsearch.action.ActionListener$1.onFailure(ActionListener.java:70)\r\n\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:64)\r\n\tat org.elasticsearch.search.SearchService$2.doRun(SearchService.java:1052)\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\n\tat org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:44)\r\n\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:757)\r\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\nCaused by: [failed to find mapper for [pin.location] for geo distance based sort]; nested: IllegalArgumentException[failed to find mapper for [pin.location] for geo distance based sort];\r\n\tat org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:639)\r\n\tat org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:137)\r\n\t... 21 more\r\nCaused by: java.lang.IllegalArgumentException: failed to find mapper for [pin.location] for geo distance based sort\r\n\tat org.elasticsearch.search.sort.GeoDistanceSortBuilder.build(GeoDistanceSortBuilder.java:608)\r\n\tat org.elasticsearch.search.sort.SortBuilder.buildSort(SortBuilder.java:147)\r\n\tat org.elasticsearch.search.SearchService.parseSource(SearchService.java:760)\r\n\tat org.elasticsearch.search.SearchService.createContext(SearchService.java:591)\r\n\tat org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:550)\r\n\tat org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:353)\r\n\tat org.elasticsearch.search.SearchService.lambda$executeQueryPhase$1(SearchService.java:340)\r\n\tat org.elasticsearch.action.ActionListener.lambda$map$2(ActionListener.java:145)\r\n\tat org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:62)\r\n\t... 8 more\r\n\"\r\n      },\r\n      \"status\" : 400\r\n    }\r\n  }\r\n}]\r\n[2019-06-18T00:25:33,376][INFO ][o.e.s.DocsClientYamlTestSuiteIT] [test] [yaml=reference/search/request/sort/line_514] after test\r\n[2019-06-18T00:25:33,376][ERROR][o.e.s.DocsClientYamlTestSuiteIT] [test] This failing test was generated by documentation starting at reference/search/request/sort.asciidoc:line_514. It may include many snippets. See docs/README.asciidoc for an explanation of test generation.\r\nREPRODUCE WITH: ./gradlew :docs:integTestRunner --tests \"org.elasticsearch.smoketest.DocsClientYamlTestSuiteIT.test {yaml=reference/search/request/sort/line_514}\" -Dtests.seed=2F476A0C6B5AFE2F -Dtests.security.manager=true -Dtests.locale=pa -Dtests.timezone=Asia/Yakutsk -Dcompiler.java=12 -Druntime.java=11\r\n</pre>\r\n</details>","closed_by":{"login":"polyfractal","id":1224228,"node_id":"MDQ6VXNlcjEyMjQyMjg=","avatar_url":"https://avatars1.githubusercontent.com/u/1224228?v=4","gravatar_id":"","url":"https://api.github.com/users/polyfractal","html_url":"https://github.com/polyfractal","followers_url":"https://api.github.com/users/polyfractal/followers","following_url":"https://api.github.com/users/polyfractal/following{/other_user}","gists_url":"https://api.github.com/users/polyfractal/gists{/gist_id}","starred_url":"https://api.github.com/users/polyfractal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polyfractal/subscriptions","organizations_url":"https://api.github.com/users/polyfractal/orgs","repos_url":"https://api.github.com/users/polyfractal/repos","events_url":"https://api.github.com/users/polyfractal/events{/privacy}","received_events_url":"https://api.github.com/users/polyfractal/received_events","type":"User","site_admin":false},"performed_via_github_app":null}