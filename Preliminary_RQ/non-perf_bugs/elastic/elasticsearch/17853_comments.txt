[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/211911027","html_url":"https://github.com/elastic/elasticsearch/issues/17853#issuecomment-211911027","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17853","id":211911027,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMTkxMTAyNw==","user":{"login":"nikoncode","id":838300,"node_id":"MDQ6VXNlcjgzODMwMA==","avatar_url":"https://avatars2.githubusercontent.com/u/838300?v=4","gravatar_id":"","url":"https://api.github.com/users/nikoncode","html_url":"https://github.com/nikoncode","followers_url":"https://api.github.com/users/nikoncode/followers","following_url":"https://api.github.com/users/nikoncode/following{/other_user}","gists_url":"https://api.github.com/users/nikoncode/gists{/gist_id}","starred_url":"https://api.github.com/users/nikoncode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nikoncode/subscriptions","organizations_url":"https://api.github.com/users/nikoncode/orgs","repos_url":"https://api.github.com/users/nikoncode/repos","events_url":"https://api.github.com/users/nikoncode/events{/privacy}","received_events_url":"https://api.github.com/users/nikoncode/received_events","type":"User","site_admin":false},"created_at":"2016-04-19T12:52:49Z","updated_at":"2016-04-19T12:54:38Z","author_association":"CONTRIBUTOR","body":"What behaviors are expected?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/211939943","html_url":"https://github.com/elastic/elasticsearch/issues/17853#issuecomment-211939943","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17853","id":211939943,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMTkzOTk0Mw==","user":{"login":"HonzaKral","id":32132,"node_id":"MDQ6VXNlcjMyMTMy","avatar_url":"https://avatars0.githubusercontent.com/u/32132?v=4","gravatar_id":"","url":"https://api.github.com/users/HonzaKral","html_url":"https://github.com/HonzaKral","followers_url":"https://api.github.com/users/HonzaKral/followers","following_url":"https://api.github.com/users/HonzaKral/following{/other_user}","gists_url":"https://api.github.com/users/HonzaKral/gists{/gist_id}","starred_url":"https://api.github.com/users/HonzaKral/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HonzaKral/subscriptions","organizations_url":"https://api.github.com/users/HonzaKral/orgs","repos_url":"https://api.github.com/users/HonzaKral/repos","events_url":"https://api.github.com/users/HonzaKral/events{/privacy}","received_events_url":"https://api.github.com/users/HonzaKral/received_events","type":"User","site_admin":false},"created_at":"2016-04-19T14:15:39Z","updated_at":"2016-04-19T14:15:39Z","author_association":"MEMBER","body":"Either for it to ignore the body and respond with the settings or provide a relevant exception saying that sending body is not allowed with this API\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/212392155","html_url":"https://github.com/elastic/elasticsearch/issues/17853#issuecomment-212392155","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17853","id":212392155,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMjM5MjE1NQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-04-20T11:41:55Z","updated_at":"2016-04-20T11:41:55Z","author_association":"CONTRIBUTOR","body":"It's a POST request, not a GET request, and it is somehow matching a `POST /{index}/_mapping` handler\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/213920915","html_url":"https://github.com/elastic/elasticsearch/issues/17853#issuecomment-213920915","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17853","id":213920915,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMzkyMDkxNQ==","user":{"login":"alexshadow007","id":647552,"node_id":"MDQ6VXNlcjY0NzU1Mg==","avatar_url":"https://avatars1.githubusercontent.com/u/647552?v=4","gravatar_id":"","url":"https://api.github.com/users/alexshadow007","html_url":"https://github.com/alexshadow007","followers_url":"https://api.github.com/users/alexshadow007/followers","following_url":"https://api.github.com/users/alexshadow007/following{/other_user}","gists_url":"https://api.github.com/users/alexshadow007/gists{/gist_id}","starred_url":"https://api.github.com/users/alexshadow007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexshadow007/subscriptions","organizations_url":"https://api.github.com/users/alexshadow007/orgs","repos_url":"https://api.github.com/users/alexshadow007/repos","events_url":"https://api.github.com/users/alexshadow007/events{/privacy}","received_events_url":"https://api.github.com/users/alexshadow007/received_events","type":"User","site_admin":false},"created_at":"2016-04-24T09:52:01Z","updated_at":"2016-04-24T09:52:01Z","author_association":"CONTRIBUTOR","body":"@clintongormley \nIt is matching `POST /{index}/{type}` handler.\nIt is trying to create dynamic mapping for type `_settings`, but can't and throws MapperParsingException.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/219614104","html_url":"https://github.com/elastic/elasticsearch/issues/17853#issuecomment-219614104","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17853","id":219614104,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTYxNDEwNA==","user":{"login":"jeff303","id":3521562,"node_id":"MDQ6VXNlcjM1MjE1NjI=","avatar_url":"https://avatars0.githubusercontent.com/u/3521562?v=4","gravatar_id":"","url":"https://api.github.com/users/jeff303","html_url":"https://github.com/jeff303","followers_url":"https://api.github.com/users/jeff303/followers","following_url":"https://api.github.com/users/jeff303/following{/other_user}","gists_url":"https://api.github.com/users/jeff303/gists{/gist_id}","starred_url":"https://api.github.com/users/jeff303/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeff303/subscriptions","organizations_url":"https://api.github.com/users/jeff303/orgs","repos_url":"https://api.github.com/users/jeff303/repos","events_url":"https://api.github.com/users/jeff303/events{/privacy}","received_events_url":"https://api.github.com/users/jeff303/received_events","type":"User","site_admin":false},"created_at":"2016-05-17T04:03:52Z","updated_at":"2016-05-17T04:03:52Z","author_association":"CONTRIBUTOR","body":"I'm new to the project, so take everything here with a huge grain of salt.  It's not clear to me how responding to the POST the same way as to the GET, or changing the exception could be accomplished cleanly.\n\n`GET /{index}/_settings` is mapped in `RestGetIndicesAction`, with the _settings portion being covered by a feature.  In theory, a specific POST handler could be added for `/{index}/_settings` but it probably shouldn't go in this class, since it's explicitly for GET requests.\n\nAbsent a special handler for this, even changing the exception would require some kind of special handling in `RestIndexAction`.  But it would seem that prevents someone from dynamically indexing a document with type `_settings`, and why shouldn't that be allowed?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/229561320","html_url":"https://github.com/elastic/elasticsearch/issues/17853#issuecomment-229561320","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17853","id":229561320,"node_id":"MDEyOklzc3VlQ29tbWVudDIyOTU2MTMyMA==","user":{"login":"SushantVarshney","id":18661908,"node_id":"MDQ6VXNlcjE4NjYxOTA4","avatar_url":"https://avatars3.githubusercontent.com/u/18661908?v=4","gravatar_id":"","url":"https://api.github.com/users/SushantVarshney","html_url":"https://github.com/SushantVarshney","followers_url":"https://api.github.com/users/SushantVarshney/followers","following_url":"https://api.github.com/users/SushantVarshney/following{/other_user}","gists_url":"https://api.github.com/users/SushantVarshney/gists{/gist_id}","starred_url":"https://api.github.com/users/SushantVarshney/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SushantVarshney/subscriptions","organizations_url":"https://api.github.com/users/SushantVarshney/orgs","repos_url":"https://api.github.com/users/SushantVarshney/repos","events_url":"https://api.github.com/users/SushantVarshney/events{/privacy}","received_events_url":"https://api.github.com/users/SushantVarshney/received_events","type":"User","site_admin":false},"created_at":"2016-06-30T05:15:15Z","updated_at":"2016-06-30T05:15:15Z","author_association":"NONE","body":"Also facing the same issue.Is there any way to overcome this?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/242991893","html_url":"https://github.com/elastic/elasticsearch/issues/17853#issuecomment-242991893","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17853","id":242991893,"node_id":"MDEyOklzc3VlQ29tbWVudDI0Mjk5MTg5Mw==","user":{"login":"qwerty4030","id":874677,"node_id":"MDQ6VXNlcjg3NDY3Nw==","avatar_url":"https://avatars2.githubusercontent.com/u/874677?v=4","gravatar_id":"","url":"https://api.github.com/users/qwerty4030","html_url":"https://github.com/qwerty4030","followers_url":"https://api.github.com/users/qwerty4030/followers","following_url":"https://api.github.com/users/qwerty4030/following{/other_user}","gists_url":"https://api.github.com/users/qwerty4030/gists{/gist_id}","starred_url":"https://api.github.com/users/qwerty4030/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qwerty4030/subscriptions","organizations_url":"https://api.github.com/users/qwerty4030/orgs","repos_url":"https://api.github.com/users/qwerty4030/repos","events_url":"https://api.github.com/users/qwerty4030/events{/privacy}","received_events_url":"https://api.github.com/users/qwerty4030/received_events","type":"User","site_admin":false},"created_at":"2016-08-28T18:47:35Z","updated_at":"2016-08-28T18:47:35Z","author_association":"CONTRIBUTOR","body":"@clintongormley @jbertouch I think this may be user error. curl and sense automatically convert a `GET` request with a body to a `POST`. I was able to reproduce the error on latest master, but changing the request to the following gives the correct index settings (request body ignored):\n`curl -X GET localhost:9200/test/_settings -d ''`\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/242997116","html_url":"https://github.com/elastic/elasticsearch/issues/17853#issuecomment-242997116","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17853","id":242997116,"node_id":"MDEyOklzc3VlQ29tbWVudDI0Mjk5NzExNg==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2016-08-28T20:24:57Z","updated_at":"2016-08-28T20:25:03Z","author_association":"MEMBER","body":"> I think this may be user error.\n\n@qwerty4030 Whether or not it's user error, there is the issue that a `POST` request to `/{index}/_settings` is being treated as an index request when ideally it would match the update settings handler for `/{index}/_settings` and return a 405 since this endpoint only accepts `PUT` requests. Instead, it's matching the `POST` handler for `/{index}/{type}` and that's why the we see a mapper parsing exception here.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/285986770","html_url":"https://github.com/elastic/elasticsearch/issues/17853#issuecomment-285986770","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17853","id":285986770,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTk4Njc3MA==","user":{"login":"AdityaJNair","id":13092045,"node_id":"MDQ6VXNlcjEzMDkyMDQ1","avatar_url":"https://avatars2.githubusercontent.com/u/13092045?v=4","gravatar_id":"","url":"https://api.github.com/users/AdityaJNair","html_url":"https://github.com/AdityaJNair","followers_url":"https://api.github.com/users/AdityaJNair/followers","following_url":"https://api.github.com/users/AdityaJNair/following{/other_user}","gists_url":"https://api.github.com/users/AdityaJNair/gists{/gist_id}","starred_url":"https://api.github.com/users/AdityaJNair/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AdityaJNair/subscriptions","organizations_url":"https://api.github.com/users/AdityaJNair/orgs","repos_url":"https://api.github.com/users/AdityaJNair/repos","events_url":"https://api.github.com/users/AdityaJNair/events{/privacy}","received_events_url":"https://api.github.com/users/AdityaJNair/received_events","type":"User","site_admin":false},"created_at":"2017-03-12T23:29:22Z","updated_at":"2017-03-12T23:29:22Z","author_association":"CONTRIBUTOR","body":"Hey do you mind if we can have a go at this issue?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/285987208","html_url":"https://github.com/elastic/elasticsearch/issues/17853#issuecomment-285987208","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17853","id":285987208,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTk4NzIwOA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-03-12T23:34:48Z","updated_at":"2017-03-12T23:34:59Z","author_association":"MEMBER","body":"> Hey do you mind if we can have a go at this issue?\r\n\r\nThanks for your interest. There's already an open PR to address this issue.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/369911256","html_url":"https://github.com/elastic/elasticsearch/issues/17853#issuecomment-369911256","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17853","id":369911256,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTkxMTI1Ng==","user":{"login":"olcbean","id":26058559,"node_id":"MDQ6VXNlcjI2MDU4NTU5","avatar_url":"https://avatars3.githubusercontent.com/u/26058559?v=4","gravatar_id":"","url":"https://api.github.com/users/olcbean","html_url":"https://github.com/olcbean","followers_url":"https://api.github.com/users/olcbean/followers","following_url":"https://api.github.com/users/olcbean/following{/other_user}","gists_url":"https://api.github.com/users/olcbean/gists{/gist_id}","starred_url":"https://api.github.com/users/olcbean/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olcbean/subscriptions","organizations_url":"https://api.github.com/users/olcbean/orgs","repos_url":"https://api.github.com/users/olcbean/repos","events_url":"https://api.github.com/users/olcbean/events{/privacy}","received_events_url":"https://api.github.com/users/olcbean/received_events","type":"User","site_admin":false},"created_at":"2018-03-02T12:43:31Z","updated_at":"2018-03-02T12:43:31Z","author_association":"CONTRIBUTOR","body":"I cannot reproduce this issue in `7.0` ( 95dea2408d4c6b70fe43ea3d4294dd98f89178b1 )\r\nI think the current behavior ( shown below ) is correct and this issue can be closed.\r\n\r\n```\r\ncurl -XPUT \"http://localhost:9200/index1/_settings?pretty\" -H 'Content-Type: application/json'\r\n```\r\n```\r\n{\r\n  \"error\" : {\r\n    \"root_cause\" : [\r\n      {\r\n        \"type\" : \"parse_exception\",\r\n        \"reason\" : \"request body is required\"\r\n      }\r\n    ],\r\n    \"type\" : \"parse_exception\",\r\n    \"reason\" : \"request body is required\"\r\n  },\r\n  \"status\" : 400\r\n}\r\n```\r\n\r\n```\r\ncurl -XPUT \"http://localhost:9200/index1/_settings?pretty\" -H 'Content-Type: application/json' -d '{}'\r\n```\r\n```\r\n{\r\n  \"error\" : {\r\n    \"root_cause\" : [\r\n      {\r\n        \"type\" : \"action_request_validation_exception\",\r\n        \"reason\" : \"Validation Failed: 1: no settings to update;\"\r\n      }\r\n    ],\r\n    \"type\" : \"action_request_validation_exception\",\r\n    \"reason\" : \"Validation Failed: 1: no settings to update;\"\r\n  },\r\n  \"status\" : 400\r\n}\r\n```\r\nAlso using unsupported op `POST` is correctly detected and reported\r\n```\r\ncurl -XPOST \"http://localhost:9200/index1/_settings?pretty\" -H 'Content-Type: application/json' -d '{}'\r\n```\r\n```\r\n{\r\n  \"error\" : \"Incorrect HTTP method for uri [/index1/_settings?pretty] and method [POST], allowed: [PUT, GET]\",\r\n  \"status\" : 405\r\n}\r\n```\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/369923068","html_url":"https://github.com/elastic/elasticsearch/issues/17853#issuecomment-369923068","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/17853","id":369923068,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTkyMzA2OA==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2018-03-02T13:39:38Z","updated_at":"2018-03-02T13:39:38Z","author_association":"MEMBER","body":"thanks @olcbean for testing this, I think it was fixed with #24437 but we forgot to close this issue. Closing.","performed_via_github_app":null}]