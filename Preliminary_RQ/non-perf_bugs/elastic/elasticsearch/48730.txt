{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/48730","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48730/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48730/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/48730/events","html_url":"https://github.com/elastic/elasticsearch/issues/48730","id":515158613,"node_id":"MDU6SXNzdWU1MTUxNTg2MTM=","number":48730,"title":"Translog reader didn't release file handler, nearly millions translog still opened, with new translog keep flushing","user":{"login":"wangkhc","id":32295978,"node_id":"MDQ6VXNlcjMyMjk1OTc4","avatar_url":"https://avatars1.githubusercontent.com/u/32295978?v=4","gravatar_id":"","url":"https://api.github.com/users/wangkhc","html_url":"https://github.com/wangkhc","followers_url":"https://api.github.com/users/wangkhc/followers","following_url":"https://api.github.com/users/wangkhc/following{/other_user}","gists_url":"https://api.github.com/users/wangkhc/gists{/gist_id}","starred_url":"https://api.github.com/users/wangkhc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangkhc/subscriptions","organizations_url":"https://api.github.com/users/wangkhc/orgs","repos_url":"https://api.github.com/users/wangkhc/repos","events_url":"https://api.github.com/users/wangkhc/events{/privacy}","received_events_url":"https://api.github.com/users/wangkhc/received_events","type":"User","site_admin":false},"labels":[{"id":111624690,"node_id":"MDU6TGFiZWwxMTE2MjQ2OTA=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/feedback_needed","name":"feedback_needed","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-10-31T04:39:35Z","updated_at":"2019-11-01T11:00:30Z","closed_at":"2019-11-01T11:00:30Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`): \r\n6.7.0\r\n\r\n**JVM version** (`java -version`): \r\nopenjdk version \"11.0.3-AJDK\" 2019-03-09\r\n\r\n**OS version** (`uname -a` if on a Unix-like system): \r\nLinux es-cn-mp91cp7gj0001pi7e-def6a525-0002 3.10.0-327.ali2010.rc6.alios7.x86_64 #1 SMP Tue May 23 13:42:10 CST 2017 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\n1. Millions of translog file opened containing files created serveral days ago,  which should be trimmed. \r\n2. this node has thousands of shards (2c8g vm)\r\n3. indexing already stopped by user, but still no help.\r\n\r\n**Steps to reproduce**:\r\nthis is from aliyun es customer, we didn't figure out how did it happened.\r\n\r\n\r\n**snapshot : lsof translog-3.tlog**\r\n\r\n![image](https://user-images.githubusercontent.com/32295978/67919434-3d844900-fbdb-11e9-8991-5095322ad3c7.png)\r\n\r\n![image](https://user-images.githubusercontent.com/32295978/67919459-673d7000-fbdb-11e9-93d6-49a1882a5756.png)\r\n\r\n![image](https://user-images.githubusercontent.com/32295978/67919467-6dcbe780-fbdb-11e9-9c27-77a10f7afa63.png)\r\n","closed_by":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"performed_via_github_app":null}