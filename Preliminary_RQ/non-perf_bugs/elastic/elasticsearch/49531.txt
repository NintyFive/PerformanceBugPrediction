{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/49531","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49531/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49531/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/49531/events","html_url":"https://github.com/elastic/elasticsearch/issues/49531","id":527969614,"node_id":"MDU6SXNzdWU1Mjc5Njk2MTQ=","number":49531,"title":"[ML] Data frame analytics - exclude fields from dest index","user":{"login":"LucaWintergerst","id":11661400,"node_id":"MDQ6VXNlcjExNjYxNDAw","avatar_url":"https://avatars3.githubusercontent.com/u/11661400?v=4","gravatar_id":"","url":"https://api.github.com/users/LucaWintergerst","html_url":"https://github.com/LucaWintergerst","followers_url":"https://api.github.com/users/LucaWintergerst/followers","following_url":"https://api.github.com/users/LucaWintergerst/following{/other_user}","gists_url":"https://api.github.com/users/LucaWintergerst/gists{/gist_id}","starred_url":"https://api.github.com/users/LucaWintergerst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LucaWintergerst/subscriptions","organizations_url":"https://api.github.com/users/LucaWintergerst/orgs","repos_url":"https://api.github.com/users/LucaWintergerst/repos","events_url":"https://api.github.com/users/LucaWintergerst/events{/privacy}","received_events_url":"https://api.github.com/users/LucaWintergerst/received_events","type":"User","site_admin":false},"labels":[{"id":912833043,"node_id":"MDU6TGFiZWw5MTI4MzMwNDM=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:ml","name":":ml","color":"0e8a16","default":false,"description":"Machine learning"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-11-25T09:51:25Z","updated_at":"2019-11-29T12:20:32Z","closed_at":"2019-11-29T12:20:32Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the feature**:\r\nData frame analytics always reindexes all fields of an index. While it is possible to exclude individual documents, it is not possible to exclude a set of fields from being written to the dest index.\r\n\r\nFor outlier detection only numeric fields are required for analytics. However, all text fields also get copied to the output index.\r\n\r\nI suggest adding `_source` filtering as part of the source definition like this. \r\n\r\n```\r\nPUT _ml/data_frame/analytics/test1\r\n{\r\n  \"id\": \"test1\",\r\n  \"source\": {\r\n    \"index\": [\r\n      \"demo-airbnb-listings-munich\"\r\n    ],\r\n    \"query\": {\r\n      \"match_all\": {}\r\n    },\r\n    \"_source\": { \r\n      \"excludes\": [ \"foobar\" ] \r\n    }\r\n  },\r\n  ...\r\n}\r\n``` \r\n\r\nThis way the behaviour would be consistent with source filtering in queries or when using _reindex.\r\n\r\nThis is easy to implement too as we can make use of source filtering in the `_reindex` request that we make","closed_by":{"login":"dimitris-athanasiou","id":9351617,"node_id":"MDQ6VXNlcjkzNTE2MTc=","avatar_url":"https://avatars3.githubusercontent.com/u/9351617?v=4","gravatar_id":"","url":"https://api.github.com/users/dimitris-athanasiou","html_url":"https://github.com/dimitris-athanasiou","followers_url":"https://api.github.com/users/dimitris-athanasiou/followers","following_url":"https://api.github.com/users/dimitris-athanasiou/following{/other_user}","gists_url":"https://api.github.com/users/dimitris-athanasiou/gists{/gist_id}","starred_url":"https://api.github.com/users/dimitris-athanasiou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dimitris-athanasiou/subscriptions","organizations_url":"https://api.github.com/users/dimitris-athanasiou/orgs","repos_url":"https://api.github.com/users/dimitris-athanasiou/repos","events_url":"https://api.github.com/users/dimitris-athanasiou/events{/privacy}","received_events_url":"https://api.github.com/users/dimitris-athanasiou/received_events","type":"User","site_admin":false},"performed_via_github_app":null}