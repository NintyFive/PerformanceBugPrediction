{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/9495","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9495/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9495/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9495/events","html_url":"https://github.com/elastic/elasticsearch/issues/9495","id":56005413,"node_id":"MDU6SXNzdWU1NjAwNTQxMw==","number":9495,"title":"cluster broken after switches upgrade","user":{"login":"jbdamiano","id":3286076,"node_id":"MDQ6VXNlcjMyODYwNzY=","avatar_url":"https://avatars0.githubusercontent.com/u/3286076?v=4","gravatar_id":"","url":"https://api.github.com/users/jbdamiano","html_url":"https://github.com/jbdamiano","followers_url":"https://api.github.com/users/jbdamiano/followers","following_url":"https://api.github.com/users/jbdamiano/following{/other_user}","gists_url":"https://api.github.com/users/jbdamiano/gists{/gist_id}","starred_url":"https://api.github.com/users/jbdamiano/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbdamiano/subscriptions","organizations_url":"https://api.github.com/users/jbdamiano/orgs","repos_url":"https://api.github.com/users/jbdamiano/repos","events_url":"https://api.github.com/users/jbdamiano/events{/privacy}","received_events_url":"https://api.github.com/users/jbdamiano/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-01-30T08:06:26Z","updated_at":"2015-01-30T14:33:34Z","closed_at":"2015-01-30T14:33:34Z","author_association":"NONE","active_lock_reason":null,"body":"Hello,\n\n We have actually 7 nodes. We use elasticsearch 1.3.2.\n\nWe are configured in unicast mode with a minimum consistency of 4\nTwo days ago, in the night, network team has done a switches firmware upgrade of all production switches.\n\nThe result of this upgrade has been catastrophic for the cluster.\nThe cluster has been split in two parts with some node in  first and second part\n\nNode 3 and Node 5 was master together\n\nNode 3 with Node 1, Node3 and Node 6\nNode 5 with Node 1, Node2, Node4, Node 5, Node 6 and Node 7\n\nFortunately we have a second cluster on other lab which the same data and we have been able to do a snapshot/restore from this cluster to the first one after a rolling restart.\n\nAnd don't understand how a switch upgrade, and a connectivity lost, can result of a corrupted cluster allocation.\n\nRegards,\n","closed_by":{"login":"bleskes","id":1006375,"node_id":"MDQ6VXNlcjEwMDYzNzU=","avatar_url":"https://avatars1.githubusercontent.com/u/1006375?v=4","gravatar_id":"","url":"https://api.github.com/users/bleskes","html_url":"https://github.com/bleskes","followers_url":"https://api.github.com/users/bleskes/followers","following_url":"https://api.github.com/users/bleskes/following{/other_user}","gists_url":"https://api.github.com/users/bleskes/gists{/gist_id}","starred_url":"https://api.github.com/users/bleskes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bleskes/subscriptions","organizations_url":"https://api.github.com/users/bleskes/orgs","repos_url":"https://api.github.com/users/bleskes/repos","events_url":"https://api.github.com/users/bleskes/events{/privacy}","received_events_url":"https://api.github.com/users/bleskes/received_events","type":"User","site_admin":false},"performed_via_github_app":null}