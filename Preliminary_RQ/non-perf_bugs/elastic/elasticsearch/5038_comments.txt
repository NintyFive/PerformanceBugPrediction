[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/34324583","html_url":"https://github.com/elastic/elasticsearch/issues/5038#issuecomment-34324583","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5038","id":34324583,"node_id":"MDEyOklzc3VlQ29tbWVudDM0MzI0NTgz","user":{"login":"karlney","id":1814172,"node_id":"MDQ6VXNlcjE4MTQxNzI=","avatar_url":"https://avatars2.githubusercontent.com/u/1814172?v=4","gravatar_id":"","url":"https://api.github.com/users/karlney","html_url":"https://github.com/karlney","followers_url":"https://api.github.com/users/karlney/followers","following_url":"https://api.github.com/users/karlney/following{/other_user}","gists_url":"https://api.github.com/users/karlney/gists{/gist_id}","starred_url":"https://api.github.com/users/karlney/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karlney/subscriptions","organizations_url":"https://api.github.com/users/karlney/orgs","repos_url":"https://api.github.com/users/karlney/repos","events_url":"https://api.github.com/users/karlney/events{/privacy}","received_events_url":"https://api.github.com/users/karlney/received_events","type":"User","site_admin":false},"created_at":"2014-02-06T13:56:34Z","updated_at":"2014-02-06T13:57:14Z","author_association":"NONE","body":"FYI this bug is related to #4153, #4155 and #4158\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/39064730","html_url":"https://github.com/elastic/elasticsearch/issues/5038#issuecomment-39064730","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5038","id":39064730,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDY0NzMw","user":{"login":"vorce","id":983376,"node_id":"MDQ6VXNlcjk4MzM3Ng==","avatar_url":"https://avatars3.githubusercontent.com/u/983376?v=4","gravatar_id":"","url":"https://api.github.com/users/vorce","html_url":"https://github.com/vorce","followers_url":"https://api.github.com/users/vorce/followers","following_url":"https://api.github.com/users/vorce/following{/other_user}","gists_url":"https://api.github.com/users/vorce/gists{/gist_id}","starred_url":"https://api.github.com/users/vorce/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vorce/subscriptions","organizations_url":"https://api.github.com/users/vorce/orgs","repos_url":"https://api.github.com/users/vorce/repos","events_url":"https://api.github.com/users/vorce/events{/privacy}","received_events_url":"https://api.github.com/users/vorce/received_events","type":"User","site_admin":false},"created_at":"2014-03-31T08:32:29Z","updated_at":"2014-03-31T08:32:29Z","author_association":"NONE","body":"Any progress on this yet?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/44270825","html_url":"https://github.com/elastic/elasticsearch/issues/5038#issuecomment-44270825","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5038","id":44270825,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MjcwODI1","user":{"login":"btiernay","id":2717578,"node_id":"MDQ6VXNlcjI3MTc1Nzg=","avatar_url":"https://avatars3.githubusercontent.com/u/2717578?v=4","gravatar_id":"","url":"https://api.github.com/users/btiernay","html_url":"https://github.com/btiernay","followers_url":"https://api.github.com/users/btiernay/followers","following_url":"https://api.github.com/users/btiernay/following{/other_user}","gists_url":"https://api.github.com/users/btiernay/gists{/gist_id}","starred_url":"https://api.github.com/users/btiernay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/btiernay/subscriptions","organizations_url":"https://api.github.com/users/btiernay/orgs","repos_url":"https://api.github.com/users/btiernay/repos","events_url":"https://api.github.com/users/btiernay/events{/privacy}","received_events_url":"https://api.github.com/users/btiernay/received_events","type":"User","site_admin":false},"created_at":"2014-05-27T12:50:42Z","updated_at":"2014-05-27T12:50:42Z","author_association":"NONE","body":"I'm trying to implement a workaround for #6314 and this is required. Any update here for a fix?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/46014365","html_url":"https://github.com/elastic/elasticsearch/issues/5038#issuecomment-46014365","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5038","id":46014365,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDE0MzY1","user":{"login":"telax1985","id":7880913,"node_id":"MDQ6VXNlcjc4ODA5MTM=","avatar_url":"https://avatars2.githubusercontent.com/u/7880913?v=4","gravatar_id":"","url":"https://api.github.com/users/telax1985","html_url":"https://github.com/telax1985","followers_url":"https://api.github.com/users/telax1985/followers","following_url":"https://api.github.com/users/telax1985/following{/other_user}","gists_url":"https://api.github.com/users/telax1985/gists{/gist_id}","starred_url":"https://api.github.com/users/telax1985/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/telax1985/subscriptions","organizations_url":"https://api.github.com/users/telax1985/orgs","repos_url":"https://api.github.com/users/telax1985/repos","events_url":"https://api.github.com/users/telax1985/events{/privacy}","received_events_url":"https://api.github.com/users/telax1985/received_events","type":"User","site_admin":false},"created_at":"2014-06-13T14:01:18Z","updated_at":"2014-06-13T14:02:34Z","author_association":"NONE","body":"Hello, \n\nI'm seeing an issue with the bulk request API where I am sending many bulk requests simultaneously.\n\nWhen my index reaches a certain size and the amount of memory assigned to each shard is increased (i.e. increasing from 56Mb allocated to 128Mb allocated) the pending bulk requests fail to respond (i.e. no call to 'onResponse' or 'onFailure' in the BulkRequest ActionListener) effectively locking my application from sending any additional requests as the semaphore flags acquired before calling 'execute' are never released.\n\nCould this issue relate to a problem that I am seeing with the bulk request API? \n\nThanks,\nAndrew\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/46016570","html_url":"https://github.com/elastic/elasticsearch/issues/5038#issuecomment-46016570","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5038","id":46016570,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDE2NTcw","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2014-06-13T14:20:06Z","updated_at":"2014-06-13T14:20:06Z","author_association":"MEMBER","body":"Hi @awnixon ,\nif you mean the semaphore within `BulkProcessor`, that's now released in a finally block. Which version of elasticsearch are you using though? This reminds me of #4153, it might be your problem if you're using an old version of elasticsearch,\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/46018224","html_url":"https://github.com/elastic/elasticsearch/issues/5038#issuecomment-46018224","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5038","id":46018224,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDE4MjI0","user":{"login":"telax1985","id":7880913,"node_id":"MDQ6VXNlcjc4ODA5MTM=","avatar_url":"https://avatars2.githubusercontent.com/u/7880913?v=4","gravatar_id":"","url":"https://api.github.com/users/telax1985","html_url":"https://github.com/telax1985","followers_url":"https://api.github.com/users/telax1985/followers","following_url":"https://api.github.com/users/telax1985/following{/other_user}","gists_url":"https://api.github.com/users/telax1985/gists{/gist_id}","starred_url":"https://api.github.com/users/telax1985/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/telax1985/subscriptions","organizations_url":"https://api.github.com/users/telax1985/orgs","repos_url":"https://api.github.com/users/telax1985/repos","events_url":"https://api.github.com/users/telax1985/events{/privacy}","received_events_url":"https://api.github.com/users/telax1985/received_events","type":"User","site_admin":false},"created_at":"2014-06-13T14:33:38Z","updated_at":"2014-06-13T14:33:38Z","author_association":"NONE","body":"Hi @javanna,\n\nWithin my own client application I manage the number of bulk requests which may be sent using a semaphore flag which is acquired before calling execute and released once a response is received.\nThe issue you referenced does sound similar to my own, however I am using the 2.0.0-SNAPSHOT version (as of the 9th of June). \n\nAlso, I do not see any exceptions coming from the elasticsearch node. Simply the statement that the amount of memory allocated to each shard is to be increased at which point the number of pending requests in my client application steadily increases without any response from the server. I am still able to execute curl -XGet requests (i.e. elastisearch cluster state is reported as green on request).\n\nI hope that helps. \n\nAll the best, \nAndrew \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/46021420","html_url":"https://github.com/elastic/elasticsearch/issues/5038#issuecomment-46021420","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5038","id":46021420,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDIxNDIw","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2014-06-13T14:59:17Z","updated_at":"2014-06-13T14:59:17Z","author_association":"MEMBER","body":"Then the problem can't be in the `BulkProcessor` as you are not using it. I'd suggest to switch to it though. There might be an issue in your client code that handles the semaphore?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/46046813","html_url":"https://github.com/elastic/elasticsearch/issues/5038#issuecomment-46046813","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5038","id":46046813,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDQ2ODEz","user":{"login":"telax1985","id":7880913,"node_id":"MDQ6VXNlcjc4ODA5MTM=","avatar_url":"https://avatars2.githubusercontent.com/u/7880913?v=4","gravatar_id":"","url":"https://api.github.com/users/telax1985","html_url":"https://github.com/telax1985","followers_url":"https://api.github.com/users/telax1985/followers","following_url":"https://api.github.com/users/telax1985/following{/other_user}","gists_url":"https://api.github.com/users/telax1985/gists{/gist_id}","starred_url":"https://api.github.com/users/telax1985/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/telax1985/subscriptions","organizations_url":"https://api.github.com/users/telax1985/orgs","repos_url":"https://api.github.com/users/telax1985/repos","events_url":"https://api.github.com/users/telax1985/events{/privacy}","received_events_url":"https://api.github.com/users/telax1985/received_events","type":"User","site_admin":false},"created_at":"2014-06-13T18:47:57Z","updated_at":"2014-06-13T18:47:57Z","author_association":"NONE","body":"Thanks for the suggestion. I've switched to the BulkProcessor and found the\nsituation to be the same where I set the level of concurrency to > 1.\nI believe that I have found the root cause of my issue however. Whilst\nusing concurrent concurrent bulk requests I'm reaching (or exceeding) the\nspecified \"indices.memory.max_index_buffer_size\" (which I've set to 256Mb\nduring testing). When I increase the \"indices.memory.max_index_buffer_size\"\nvalue my issue no longer occurs. Would you expect elasticsearch to handle\nthis situation by rejecting some/all pending requests or should it be\nreturning to the current set of pending requests once the\n\"index_buffer_size\" for each shard has been updated?\n\nOn 13 June 2014 15:59, Luca Cavanna notifications@github.com wrote:\n\n> Then the problem can't be in the BulkProcessor as you are not using it.\n> I'd suggest to switch to it though. There might be an issue in your client\n> code that handles the semaphore?\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/elasticsearch/elasticsearch/issues/5038#issuecomment-46021420\n> .\n","performed_via_github_app":null}]