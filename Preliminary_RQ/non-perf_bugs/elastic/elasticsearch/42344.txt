{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/42344","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42344/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42344/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/42344/events","html_url":"https://github.com/elastic/elasticsearch/issues/42344","id":447047074,"node_id":"MDU6SXNzdWU0NDcwNDcwNzQ=","number":42344,"title":"[CI] Data Frame IT failures due to task not terminating","user":{"login":"davidkyle","id":2353640,"node_id":"MDQ6VXNlcjIzNTM2NDA=","avatar_url":"https://avatars1.githubusercontent.com/u/2353640?v=4","gravatar_id":"","url":"https://api.github.com/users/davidkyle","html_url":"https://github.com/davidkyle","followers_url":"https://api.github.com/users/davidkyle/followers","following_url":"https://api.github.com/users/davidkyle/following{/other_user}","gists_url":"https://api.github.com/users/davidkyle/gists{/gist_id}","starred_url":"https://api.github.com/users/davidkyle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidkyle/subscriptions","organizations_url":"https://api.github.com/users/davidkyle/orgs","repos_url":"https://api.github.com/users/davidkyle/repos","events_url":"https://api.github.com/users/davidkyle/events{/privacy}","received_events_url":"https://api.github.com/users/davidkyle/received_events","type":"User","site_admin":false},"labels":[{"id":1272783040,"node_id":"MDU6TGFiZWwxMjcyNzgzMDQw","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:ml/Transform","name":":ml/Transform","color":"0e8a16","default":false,"description":"Transform"},{"id":148612629,"node_id":"MDU6TGFiZWwxNDg2MTI2Mjk=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Etest-failure","name":">test-failure","color":"207de5","default":false,"description":"Triaged test failures from CI"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2019-05-22T10:07:50Z","updated_at":"2019-05-25T06:58:06Z","closed_at":"2019-05-24T11:41:50Z","author_association":"MEMBER","active_lock_reason":null,"body":"A number of tests have failed due to a failed wait for pending tasks test in the teardown. Affected tests are \r\n\r\n- DataFrameGetAndGetStatsIT\r\n- DataFramePivotRestIT\r\n- DataFrameMetaDataIT\r\n- DataFrameAuditorIT\r\n\r\n\r\nhttps://elasticsearch-ci.elastic.co/job/elastic+elasticsearch+master+multijob-unix-compatibility/os=sles-12/433/console\r\n\r\nMany tests in the suite failed due to a wait for pending tasks failures\r\n```\r\njava.lang.AssertionError: 2 active tasks found:\r\ndata_frame/transforms[c]       d61iDVODQD-XrdRTsClKhw:1291 cluster:5                   persistent 1558492518692 02:35:18 49.8s       127.0.0.1 node-0 data_frame_pivot_stats_2\r\ndata_frame/transforms[c]       d61iDVODQD-XrdRTsClKhw:1474 cluster:6                   persistent 1558492519579 02:35:19 48.9s       127.0.0.1 node-0 data_frame_simpleStatsPivotWithQuery\r\n expected:<0> but was:<2>\r\n```\r\n\r\nFor some reason `pivot_stats_2` and `simpleStatsPivotWithQuery` did not stop\r\n\r\n[integTestCluster.log](https://github.com/elastic/elasticsearch/files/3206844/integTestCluster.log)\r\n\r\n\r\nOne of the reproduce lines:\r\n```\r\n./gradlew :x-pack:plugin:data-frame:qa:single-node-tests:integTestRunner --tests \"org.elasticsearch.xpack.dataframe.integration.DataFrameGetAndGetStatsIT.testGetPersistedStatsWithoutTask\" \\\r\n  -Dtests.seed=A71AC2C8B8F32174 \\\r\n  -Dtests.security.manager=true \\\r\n  -Dtests.locale=en-GG \\\r\n  -Dtests.timezone=Europe/Podgorica \\\r\n  -Dcompiler.java=12 \\\r\n  -Druntime.java=11\r\n```","closed_by":{"login":"davidkyle","id":2353640,"node_id":"MDQ6VXNlcjIzNTM2NDA=","avatar_url":"https://avatars1.githubusercontent.com/u/2353640?v=4","gravatar_id":"","url":"https://api.github.com/users/davidkyle","html_url":"https://github.com/davidkyle","followers_url":"https://api.github.com/users/davidkyle/followers","following_url":"https://api.github.com/users/davidkyle/following{/other_user}","gists_url":"https://api.github.com/users/davidkyle/gists{/gist_id}","starred_url":"https://api.github.com/users/davidkyle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidkyle/subscriptions","organizations_url":"https://api.github.com/users/davidkyle/orgs","repos_url":"https://api.github.com/users/davidkyle/repos","events_url":"https://api.github.com/users/davidkyle/events{/privacy}","received_events_url":"https://api.github.com/users/davidkyle/received_events","type":"User","site_admin":false},"performed_via_github_app":null}