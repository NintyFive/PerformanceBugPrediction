[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/243435617","html_url":"https://github.com/elastic/elasticsearch/issues/20231#issuecomment-243435617","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20231","id":243435617,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzQzNTYxNw==","user":{"login":"MaineC","id":70953,"node_id":"MDQ6VXNlcjcwOTUz","avatar_url":"https://avatars3.githubusercontent.com/u/70953?v=4","gravatar_id":"","url":"https://api.github.com/users/MaineC","html_url":"https://github.com/MaineC","followers_url":"https://api.github.com/users/MaineC/followers","following_url":"https://api.github.com/users/MaineC/following{/other_user}","gists_url":"https://api.github.com/users/MaineC/gists{/gist_id}","starred_url":"https://api.github.com/users/MaineC/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaineC/subscriptions","organizations_url":"https://api.github.com/users/MaineC/orgs","repos_url":"https://api.github.com/users/MaineC/repos","events_url":"https://api.github.com/users/MaineC/events{/privacy}","received_events_url":"https://api.github.com/users/MaineC/received_events","type":"User","site_admin":false},"created_at":"2016-08-30T13:19:00Z","updated_at":"2016-08-30T13:19:00Z","author_association":"CONTRIBUTOR","body":"Proposal: Use templating/ ScriptServices to enable users to submit only one test request template and let them only specify template parameters on a per test request basis.\n\nInput from @martijnvg: \"So in general, if templating is required, an api can just call the ScriptService and create a Script with ‘mustache’ as language. This way there is no hard compile time dependency to mustache. But when ES is running with all its modules, the template provided as Script gets rendered. An example of this can be found in the phrase suggester which has a collate parameter. Collate is kind of a query that gets run in order to verify a suggestion.\n\nIn phrase suggester the collate function is provided as Script and contains the query and provide access to phrase suggestion variables, only know at runtime.\n\nhttps://github.com/elastic/elasticsearch/blob/master/core/src/main/java/org/elasticsearch/search/suggest/phrase/PhraseSuggestionBuilder.java#L394\n\nIf using the scriptservice directly for templating doesn’t make sense or can’t somehow not work in rank eval api, please let me know. So somewhere in the rerank api you should use script service to evaluate a Script that has been provided by the user. (the user thinks it is a template, but we don’t make a difference between scripting and templating in ES).\"\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/243436364","html_url":"https://github.com/elastic/elasticsearch/issues/20231#issuecomment-243436364","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20231","id":243436364,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzQzNjM2NA==","user":{"login":"MaineC","id":70953,"node_id":"MDQ6VXNlcjcwOTUz","avatar_url":"https://avatars3.githubusercontent.com/u/70953?v=4","gravatar_id":"","url":"https://api.github.com/users/MaineC","html_url":"https://github.com/MaineC","followers_url":"https://api.github.com/users/MaineC/followers","following_url":"https://api.github.com/users/MaineC/following{/other_user}","gists_url":"https://api.github.com/users/MaineC/gists{/gist_id}","starred_url":"https://api.github.com/users/MaineC/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaineC/subscriptions","organizations_url":"https://api.github.com/users/MaineC/orgs","repos_url":"https://api.github.com/users/MaineC/repos","events_url":"https://api.github.com/users/MaineC/events{/privacy}","received_events_url":"https://api.github.com/users/MaineC/received_events","type":"User","site_admin":false},"created_at":"2016-08-30T13:21:44Z","updated_at":"2016-08-31T08:41:30Z","author_association":"CONTRIBUTOR","body":"Example of an API request:\n\n```\nGET /index/type/_rank_eval/template\n{\n    \"spec_id\": \"human_readable_id\",\n    \"template\": {\n        \"inline\": \"string that constitutes a search request template\"\n    }\n    \"requests\": [{\n        \"id\": \"human_readable_id\",\n        \"params\": { ... params to the request to check ... },\n        \"ratings\": { ... mapping from doc id to rating value ... }\n     }],\n    \"metric\": {\n        \"... metric_name... \": {\n            \"... metric_parameter_key ...\": ...metric_parameter_value...\n        }\n    }\n  }\n```\n\n@clintongormley feedback on the proposed API welcome, see [for what the request looks like w/o templates for comparison](https://github.com/elastic/elasticsearch/blob/feature/rank-eval/modules/rank-eval/src/main/java/org/elasticsearch/index/rankeval/RestRankEvalAction.java#L51) \n\nEdit: Changed structure of template entry to match the structure of [template search requests](https://www.elastic.co/guide/en/elasticsearch/reference/master/search-template.html)\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/243735397","html_url":"https://github.com/elastic/elasticsearch/issues/20231#issuecomment-243735397","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20231","id":243735397,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzczNTM5Nw==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-08-31T11:25:06Z","updated_at":"2016-08-31T11:25:06Z","author_association":"CONTRIBUTOR","body":"I'm on the fence about this one.  Should it be a single template specified at the top level, or should you be able to specify a different template per request.  Certainly the former would be a common use case, but the latter is more flexible (if more verbose).  But perhaps a UI would solve the verbosity.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/244018177","html_url":"https://github.com/elastic/elasticsearch/issues/20231#issuecomment-244018177","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20231","id":244018177,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDAxODE3Nw==","user":{"login":"MaineC","id":70953,"node_id":"MDQ6VXNlcjcwOTUz","avatar_url":"https://avatars3.githubusercontent.com/u/70953?v=4","gravatar_id":"","url":"https://api.github.com/users/MaineC","html_url":"https://github.com/MaineC","followers_url":"https://api.github.com/users/MaineC/followers","following_url":"https://api.github.com/users/MaineC/following{/other_user}","gists_url":"https://api.github.com/users/MaineC/gists{/gist_id}","starred_url":"https://api.github.com/users/MaineC/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaineC/subscriptions","organizations_url":"https://api.github.com/users/MaineC/orgs","repos_url":"https://api.github.com/users/MaineC/repos","events_url":"https://api.github.com/users/MaineC/events{/privacy}","received_events_url":"https://api.github.com/users/MaineC/received_events","type":"User","site_admin":false},"created_at":"2016-09-01T08:56:50Z","updated_at":"2016-09-01T08:56:50Z","author_association":"CONTRIBUTOR","body":"I'm not quite sure what the benefit of specifying a template per request would be. Do you have an example use case for clarification?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/244368225","html_url":"https://github.com/elastic/elasticsearch/issues/20231#issuecomment-244368225","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20231","id":244368225,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDM2ODIyNQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-09-02T13:00:47Z","updated_at":"2016-09-02T13:00:47Z","author_association":"CONTRIBUTOR","body":"I was thinking about comparing different templates, but eg with the same parameters.  Thinking about it again I think what you're doing here makes more sense.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/244729620","html_url":"https://github.com/elastic/elasticsearch/issues/20231#issuecomment-244729620","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20231","id":244729620,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDcyOTYyMA==","user":{"login":"MaineC","id":70953,"node_id":"MDQ6VXNlcjcwOTUz","avatar_url":"https://avatars3.githubusercontent.com/u/70953?v=4","gravatar_id":"","url":"https://api.github.com/users/MaineC","html_url":"https://github.com/MaineC","followers_url":"https://api.github.com/users/MaineC/followers","following_url":"https://api.github.com/users/MaineC/following{/other_user}","gists_url":"https://api.github.com/users/MaineC/gists{/gist_id}","starred_url":"https://api.github.com/users/MaineC/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaineC/subscriptions","organizations_url":"https://api.github.com/users/MaineC/orgs","repos_url":"https://api.github.com/users/MaineC/repos","events_url":"https://api.github.com/users/MaineC/events{/privacy}","received_events_url":"https://api.github.com/users/MaineC/received_events","type":"User","site_admin":false},"created_at":"2016-09-05T11:56:31Z","updated_at":"2016-09-05T11:56:31Z","author_association":"CONTRIBUTOR","body":"> I was thinking about comparing different templates, but eg with the same parameters.\n\nThat makes a lot of sense to me. IIRC in some earlier iteration of the API we even had support for specifying multiple templates at once.\n\nI'm wondering if it would be fine for users to be required to send one rank-eval request per template they want to test. Given the above API proposal those requests would only differ in the template section, so all the rest could be automatically generated/ copy-paste-ed/...\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/257536102","html_url":"https://github.com/elastic/elasticsearch/issues/20231#issuecomment-257536102","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20231","id":257536102,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NzUzNjEwMg==","user":{"login":"MaineC","id":70953,"node_id":"MDQ6VXNlcjcwOTUz","avatar_url":"https://avatars3.githubusercontent.com/u/70953?v=4","gravatar_id":"","url":"https://api.github.com/users/MaineC","html_url":"https://github.com/MaineC","followers_url":"https://api.github.com/users/MaineC/followers","following_url":"https://api.github.com/users/MaineC/following{/other_user}","gists_url":"https://api.github.com/users/MaineC/gists{/gist_id}","starred_url":"https://api.github.com/users/MaineC/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaineC/subscriptions","organizations_url":"https://api.github.com/users/MaineC/orgs","repos_url":"https://api.github.com/users/MaineC/repos","events_url":"https://api.github.com/users/MaineC/events{/privacy}","received_events_url":"https://api.github.com/users/MaineC/received_events","type":"User","site_admin":false},"created_at":"2016-11-01T10:40:36Z","updated_at":"2016-11-01T10:40:36Z","author_association":"CONTRIBUTOR","body":"Fixed with #20374 \n","performed_via_github_app":null}]