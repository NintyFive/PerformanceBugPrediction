{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/45506","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45506/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45506/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/45506/events","html_url":"https://github.com/elastic/elasticsearch/issues/45506","id":480165710,"node_id":"MDU6SXNzdWU0ODAxNjU3MTA=","number":45506,"title":"[mapper_parsing_exception] Provided shape has duplicate consecutive coordinates at","user":{"login":"bartvastgoed","id":46315480,"node_id":"MDQ6VXNlcjQ2MzE1NDgw","avatar_url":"https://avatars2.githubusercontent.com/u/46315480?v=4","gravatar_id":"","url":"https://api.github.com/users/bartvastgoed","html_url":"https://github.com/bartvastgoed","followers_url":"https://api.github.com/users/bartvastgoed/followers","following_url":"https://api.github.com/users/bartvastgoed/following{/other_user}","gists_url":"https://api.github.com/users/bartvastgoed/gists{/gist_id}","starred_url":"https://api.github.com/users/bartvastgoed/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bartvastgoed/subscriptions","organizations_url":"https://api.github.com/users/bartvastgoed/orgs","repos_url":"https://api.github.com/users/bartvastgoed/repos","events_url":"https://api.github.com/users/bartvastgoed/events{/privacy}","received_events_url":"https://api.github.com/users/bartvastgoed/received_events","type":"User","site_admin":false},"labels":[{"id":141079527,"node_id":"MDU6TGFiZWwxNDEwNzk1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Analytics/Geo","name":":Analytics/Geo","color":"0e8a16","default":false,"description":"Indexing, search aggregations of geo points and shapes"},{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-08-13T13:45:06Z","updated_at":"2019-09-25T13:35:56Z","closed_at":"2019-09-25T13:35:55Z","author_association":"NONE","active_lock_reason":null,"body":"<!-- Bug report -->\r\n\r\n**Elasticsearch version** (`bin/elasticsearch --version`):\r\n5.6.11\r\n**Plugins installed**: []\r\n\r\n**JVM version** (`java -version`):\r\nopenjdk version \"1.8.0_222\"\r\nOpenJDK Runtime Environment (build 1.8.0_222-8u222-b10-1ubuntu1~16.04.1-b10)\r\nOpenJDK 64-Bit Server VM (build 25.222-b10, mixed mode)\r\n\r\n**OS version** (`uname -a` if on a Unix-like system):\r\nLinux myserver 4.4.0-131-generic #157-Ubuntu SMP Thu Jul 12 15:51:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n**Description of the problem including expected versus actual behavior**:\r\nDuring my bulk inserts I noticed i couldn't insert some of my document with certain coordinates.\r\nExpected; being able to insert said document with said coordinates.\r\n\r\n**Steps to reproduce**:\r\n\r\n 1. the mapping:\r\n```\r\n'contour' => [\r\n        'type' => 'geo_shape',\r\n        'tree' => 'quadtree',\r\n        'precision' => '50cm',\r\n    ]\r\n\r\n```\r\n 2. try to add a document with the following coordinates:\r\n```\r\n[[[6.1741779921149,52.900830177646],[6.174375274915,52.900583123989],[6.1745312119037,52.900628656014],[6.174361093674,52.900841695524],[6.1744087549395,52.900855607275],[6.1744473131991,52.900807318579],[6.17464348691,52.900864600397],[6.1746135473049,52.900902093087],[6.174662463802,52.900916373901],[6.1748558926934,52.90067413483],[6.1750103363593,52.900719226747],[6.1747977526217,52.900985452388],[6.1746863379868,52.900952918431],[6.1746759024879,52.90096597319],[6.1745823573715,52.900938659391],[6.1745109963801,52.901028036419],[6.1744516062146,52.901010697223],[6.1744016532655,52.901073260193],[6.1742895066468,52.901040515012],[6.1743392998204,52.900978150851],[6.1743161712153,52.900971392538],[6.1743592207397,52.900917484473],[6.1743692909645,52.900920428633],[6.174389827298,52.900894707808],[6.1743799963032,52.900891842952],[6.1743907949551,52.900878318512],[6.1743446875809,52.900864863819],[6.1743327988597,52.90087975245],[6.1741751578564,52.900833719154],[6.1741779921149,52.900830177646],[6.1741779921149,52.900830177646]]]\r\n```\r\n\r\n 3. error.\r\n\r\n**Provide logs (if relevant)**:\r\nOutput of my terminal during the bulk insert:\r\n```           \r\n [_index] => my_index_1\r\n            [_type] => my_index_1\r\n            [_id] => 12312313\r\n            [status] => 400\r\n            [error] => Array\r\n                (\r\n                    [type] => mapper_parsing_exception\r\n                    [reason] => failed to parse [contour]\r\n                    [caused_by] => Array\r\n                        (\r\n                            [type] => invalid_shape_exception\r\n                            [reason] => Provided shape has duplicate consecutive coordinates at: (6.1741779921149,52.900830177646, NaN)\r\n                        )\r\n\r\n                )\r\n```\r\n\r\nThanks in advance","closed_by":{"login":"iverase","id":29038686,"node_id":"MDQ6VXNlcjI5MDM4Njg2","avatar_url":"https://avatars1.githubusercontent.com/u/29038686?v=4","gravatar_id":"","url":"https://api.github.com/users/iverase","html_url":"https://github.com/iverase","followers_url":"https://api.github.com/users/iverase/followers","following_url":"https://api.github.com/users/iverase/following{/other_user}","gists_url":"https://api.github.com/users/iverase/gists{/gist_id}","starred_url":"https://api.github.com/users/iverase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iverase/subscriptions","organizations_url":"https://api.github.com/users/iverase/orgs","repos_url":"https://api.github.com/users/iverase/repos","events_url":"https://api.github.com/users/iverase/events{/privacy}","received_events_url":"https://api.github.com/users/iverase/received_events","type":"User","site_admin":false},"performed_via_github_app":null}