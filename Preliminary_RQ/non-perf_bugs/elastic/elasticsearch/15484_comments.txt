[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/165400312","html_url":"https://github.com/elastic/elasticsearch/issues/15484#issuecomment-165400312","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15484","id":165400312,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NTQwMDMxMg==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2015-12-17T09:44:05Z","updated_at":"2015-12-17T09:44:18Z","author_association":"MEMBER","body":"It is a bug that we don't have this documented for Percentiles but I am not keen in having a section for keyed response in the documentation listed which aggregation support it and which don't since a vast majority of them don't support it. \n\nI also am inclined to think its a bit of a useless feature anyway. In range and percentile aggregations you ask for specific buckets and so I would think you would always want to get the buckets by key (implying `keyed: true`) rather than iterating through them. For the few cases where you would want to iterate through them, most (probably all) languages allow you to iterate through maps anyway. In the histogram aggregation you actually don't know what buckets are going to be returned so getting a bucket by key doesn't make too much sense to me (if you wanted a specific bucket surely you would have used the range aggregation?) so I would say that `keyed: false` is probably the only viable option here too.\n\nThis is just my opinion though.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/165445628","html_url":"https://github.com/elastic/elasticsearch/issues/15484#issuecomment-165445628","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15484","id":165445628,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NTQ0NTYyOA==","user":{"login":"uboness","id":211019,"node_id":"MDQ6VXNlcjIxMTAxOQ==","avatar_url":"https://avatars3.githubusercontent.com/u/211019?v=4","gravatar_id":"","url":"https://api.github.com/users/uboness","html_url":"https://github.com/uboness","followers_url":"https://api.github.com/users/uboness/followers","following_url":"https://api.github.com/users/uboness/following{/other_user}","gists_url":"https://api.github.com/users/uboness/gists{/gist_id}","starred_url":"https://api.github.com/users/uboness/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uboness/subscriptions","organizations_url":"https://api.github.com/users/uboness/orgs","repos_url":"https://api.github.com/users/uboness/repos","events_url":"https://api.github.com/users/uboness/events{/privacy}","received_events_url":"https://api.github.com/users/uboness/received_events","type":"User","site_admin":false},"created_at":"2015-12-17T12:54:14Z","updated_at":"2015-12-17T12:54:14Z","author_association":"CONTRIBUTOR","body":"@colings86 I don't share your opinion here. I think there are two things to take into account here:\n- There should be a consistent response structure across all aggs. This enables more generic tools to build UIs on top of the aggs and treat all the aggs the same when parsing the response. IMO, Having an array of buckets as a default structure is a good choice for that.\n- sometimes you do know what you're looking for and you use the aggs to get a few specific aggs. In those cases you want to have random access to them instead of writing boilerplate code that iterates over an array to find those aggs.\n\nThis is where the current support comes from - default to arrays, but you can customize the response to be keyed instead (and along with that, customize the keys for every bucket).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/165741960","html_url":"https://github.com/elastic/elasticsearch/issues/15484#issuecomment-165741960","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15484","id":165741960,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NTc0MTk2MA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-12-18T10:28:27Z","updated_at":"2015-12-18T10:28:27Z","author_association":"CONTRIBUTOR","body":"I'm of the opinion that we should remove the keyed response for three reasons:\n- you lose order\n- you produce key names that potentially look like paths eg `99.9` and can't be indexed into elasticsearch and won't work with path syntax\n- converting an array into a map is a one liner on the application side\n\n@rashidkpc does kibana use keyed responses?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/165811790","html_url":"https://github.com/elastic/elasticsearch/issues/15484#issuecomment-165811790","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15484","id":165811790,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NTgxMTc5MA==","user":{"login":"rashidkpc","id":1250387,"node_id":"MDQ6VXNlcjEyNTAzODc=","avatar_url":"https://avatars1.githubusercontent.com/u/1250387?v=4","gravatar_id":"","url":"https://api.github.com/users/rashidkpc","html_url":"https://github.com/rashidkpc","followers_url":"https://api.github.com/users/rashidkpc/followers","following_url":"https://api.github.com/users/rashidkpc/following{/other_user}","gists_url":"https://api.github.com/users/rashidkpc/gists{/gist_id}","starred_url":"https://api.github.com/users/rashidkpc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rashidkpc/subscriptions","organizations_url":"https://api.github.com/users/rashidkpc/orgs","repos_url":"https://api.github.com/users/rashidkpc/repos","events_url":"https://api.github.com/users/rashidkpc/events{/privacy}","received_events_url":"https://api.github.com/users/rashidkpc/received_events","type":"User","site_admin":false},"created_at":"2015-12-18T15:47:41Z","updated_at":"2015-12-18T15:47:41Z","author_association":"NONE","body":"@clintongormley yes it does. If you choose to remove them please file a ticket on the kibana repo.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/170391144","html_url":"https://github.com/elastic/elasticsearch/issues/15484#issuecomment-170391144","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15484","id":170391144,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDM5MTE0NA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2016-01-10T20:29:21Z","updated_at":"2016-01-10T20:29:21Z","author_association":"CONTRIBUTOR","body":"@rashidkpc may I ask what for? ie would it be annoying to kibana to have keyed responses removed, or are you on board with this?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/170393054","html_url":"https://github.com/elastic/elasticsearch/issues/15484#issuecomment-170393054","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15484","id":170393054,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDM5MzA1NA==","user":{"login":"rashidkpc","id":1250387,"node_id":"MDQ6VXNlcjEyNTAzODc=","avatar_url":"https://avatars1.githubusercontent.com/u/1250387?v=4","gravatar_id":"","url":"https://api.github.com/users/rashidkpc","html_url":"https://github.com/rashidkpc","followers_url":"https://api.github.com/users/rashidkpc/followers","following_url":"https://api.github.com/users/rashidkpc/following{/other_user}","gists_url":"https://api.github.com/users/rashidkpc/gists{/gist_id}","starred_url":"https://api.github.com/users/rashidkpc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rashidkpc/subscriptions","organizations_url":"https://api.github.com/users/rashidkpc/orgs","repos_url":"https://api.github.com/users/rashidkpc/repos","events_url":"https://api.github.com/users/rashidkpc/events{/privacy}","received_events_url":"https://api.github.com/users/rashidkpc/received_events","type":"User","site_admin":false},"created_at":"2016-01-10T20:52:38Z","updated_at":"2016-01-10T20:52:49Z","author_association":"NONE","body":"I'm fine with it, we can change how we handle the agg. I'd much rather have things be consistent. Just file a ticket if/when you do it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/170397702","html_url":"https://github.com/elastic/elasticsearch/issues/15484#issuecomment-170397702","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15484","id":170397702,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDM5NzcwMg==","user":{"login":"uboness","id":211019,"node_id":"MDQ6VXNlcjIxMTAxOQ==","avatar_url":"https://avatars3.githubusercontent.com/u/211019?v=4","gravatar_id":"","url":"https://api.github.com/users/uboness","html_url":"https://github.com/uboness","followers_url":"https://api.github.com/users/uboness/followers","following_url":"https://api.github.com/users/uboness/following{/other_user}","gists_url":"https://api.github.com/users/uboness/gists{/gist_id}","starred_url":"https://api.github.com/users/uboness/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uboness/subscriptions","organizations_url":"https://api.github.com/users/uboness/orgs","repos_url":"https://api.github.com/users/uboness/repos","events_url":"https://api.github.com/users/uboness/events{/privacy}","received_events_url":"https://api.github.com/users/uboness/received_events","type":"User","site_admin":false},"created_at":"2016-01-10T21:54:56Z","updated_at":"2016-01-10T21:54:56Z","author_association":"CONTRIBUTOR","body":"if everyone is onboard for removing keyed responses, I'm +1 as well. will certainly clean up some code. Hopefully not many will complain about it... lets see how it goes.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/299487996","html_url":"https://github.com/elastic/elasticsearch/issues/15484#issuecomment-299487996","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15484","id":299487996,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTQ4Nzk5Ng==","user":{"login":"javanna","id":832460,"node_id":"MDQ6VXNlcjgzMjQ2MA==","avatar_url":"https://avatars1.githubusercontent.com/u/832460?v=4","gravatar_id":"","url":"https://api.github.com/users/javanna","html_url":"https://github.com/javanna","followers_url":"https://api.github.com/users/javanna/followers","following_url":"https://api.github.com/users/javanna/following{/other_user}","gists_url":"https://api.github.com/users/javanna/gists{/gist_id}","starred_url":"https://api.github.com/users/javanna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/javanna/subscriptions","organizations_url":"https://api.github.com/users/javanna/orgs","repos_url":"https://api.github.com/users/javanna/repos","events_url":"https://api.github.com/users/javanna/events{/privacy}","received_events_url":"https://api.github.com/users/javanna/received_events","type":"User","site_admin":false},"created_at":"2017-05-05T14:58:33Z","updated_at":"2017-05-05T14:58:33Z","author_association":"MEMBER","body":"I wasn't aware that we planned on removing keyed responses, and I recently got in #23758 that documented it where it was undocumented.\r\n\r\n@clintongormley if we still plan on removing keyed responses do we want to create a new issue or relabel this one?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/299869409","html_url":"https://github.com/elastic/elasticsearch/issues/15484#issuecomment-299869409","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15484","id":299869409,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTg2OTQwOQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2017-05-08T13:39:13Z","updated_at":"2017-05-08T13:39:13Z","author_association":"CONTRIBUTOR","body":"@colings86 what do you think?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/300734318","html_url":"https://github.com/elastic/elasticsearch/issues/15484#issuecomment-300734318","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/15484","id":300734318,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMDczNDMxOA==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2017-05-11T09:24:40Z","updated_at":"2017-05-11T09:24:40Z","author_association":"MEMBER","body":"The documentation for this is fixed in https://github.com/elastic/elasticsearch/pull/23758. There is stil;l a discussion to be had about whether we should have the `keyed` option but I have created a new issue to discuss this: https://github.com/elastic/elasticsearch/issues/24611","performed_via_github_app":null}]