[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/35406471","html_url":"https://github.com/elastic/elasticsearch/issues/5165#issuecomment-35406471","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5165","id":35406471,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDA2NDcx","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-02-18T17:01:13Z","updated_at":"2014-02-18T17:01:13Z","author_association":"CONTRIBUTOR","body":"I looked at the gist and I think you should submit this as a PR! Good catch! Can you make sure you sign the CLA as well so we can pull this in quickly. \n\nOne comment about the initialization I think we should initialize the new context with `-1` instead so we just skip it on the reaper?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/35417287","html_url":"https://github.com/elastic/elasticsearch/issues/5165#issuecomment-35417287","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5165","id":35417287,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDE3Mjg3","user":{"login":"jaymode","id":4339958,"node_id":"MDQ6VXNlcjQzMzk5NTg=","avatar_url":"https://avatars1.githubusercontent.com/u/4339958?v=4","gravatar_id":"","url":"https://api.github.com/users/jaymode","html_url":"https://github.com/jaymode","followers_url":"https://api.github.com/users/jaymode/followers","following_url":"https://api.github.com/users/jaymode/following{/other_user}","gists_url":"https://api.github.com/users/jaymode/gists{/gist_id}","starred_url":"https://api.github.com/users/jaymode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaymode/subscriptions","organizations_url":"https://api.github.com/users/jaymode/orgs","repos_url":"https://api.github.com/users/jaymode/repos","events_url":"https://api.github.com/users/jaymode/events{/privacy}","received_events_url":"https://api.github.com/users/jaymode/received_events","type":"User","site_admin":false},"created_at":"2014-02-18T18:36:24Z","updated_at":"2014-02-18T18:36:24Z","author_association":"MEMBER","body":"Will create a PR and sign the CLA shortly.\n\nRegarding initialization, I thought about using `-1` but decided against it as there could be some unknown case, where lastAccessTime is always `-1`, so the search context will never be cleaned up by the reaper. Initializing to the estimated time allows it to be cleaned up by the reaper in that case. Let me know what you think.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/35418596","html_url":"https://github.com/elastic/elasticsearch/issues/5165#issuecomment-35418596","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/5165","id":35418596,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDE4NTk2","user":{"login":"s1monw","id":973334,"node_id":"MDQ6VXNlcjk3MzMzNA==","avatar_url":"https://avatars0.githubusercontent.com/u/973334?v=4","gravatar_id":"","url":"https://api.github.com/users/s1monw","html_url":"https://github.com/s1monw","followers_url":"https://api.github.com/users/s1monw/followers","following_url":"https://api.github.com/users/s1monw/following{/other_user}","gists_url":"https://api.github.com/users/s1monw/gists{/gist_id}","starred_url":"https://api.github.com/users/s1monw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s1monw/subscriptions","organizations_url":"https://api.github.com/users/s1monw/orgs","repos_url":"https://api.github.com/users/s1monw/repos","events_url":"https://api.github.com/users/s1monw/events{/privacy}","received_events_url":"https://api.github.com/users/s1monw/received_events","type":"User","site_admin":false},"created_at":"2014-02-18T18:48:10Z","updated_at":"2014-02-18T18:48:10Z","author_association":"CONTRIBUTOR","body":"@jaymode I agree on the `-1` and the special casing. We actually set it to `-1` each time we access the context. to prevent the reaper from closing the context while we are using it. I think we should do the same when initialising. There should be some logic that frees the context if there is an exception thrown too.\n","performed_via_github_app":null}]