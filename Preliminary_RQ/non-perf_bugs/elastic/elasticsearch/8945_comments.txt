[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/67023689","html_url":"https://github.com/elastic/elasticsearch/issues/8945#issuecomment-67023689","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8945","id":67023689,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDIzNjg5","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-12-15T16:43:25Z","updated_at":"2014-12-15T16:43:25Z","author_association":"CONTRIBUTOR","body":"@dadoonet could you check please?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/67766590","html_url":"https://github.com/elastic/elasticsearch/issues/8945#issuecomment-67766590","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8945","id":67766590,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NzY2NTkw","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2014-12-21T10:55:11Z","updated_at":"2014-12-21T10:55:11Z","author_association":"MEMBER","body":"Hi @sausax.\n\nI can't reproduce your issue. Here is the code I wrote to check that:\n\n``` java\n    public void indexExists() throws IOException, InterruptedException {\n        // Remove index\n        try {\n            client.admin().indices().prepareDelete(\"testindex\").get();\n        } catch (IndexMissingException e) {\n        }\n\n        // Create the index\n        client.admin().indices().prepareCreate(\"testindex\").get();\n\n        IndicesExistsResponse res = client.admin().indices().prepareExists(\"testindex\").get();\n        if (!res.isExists()) {\n            logger.info(\"Index does not exist. Creating...\");\n            client.admin().indices().prepareCreate(\"testindex\").get();\n        } else {\n            logger.info(\"Index already exists.\");\n        }\n    }\n```\n\nIt always print in logs:\n\n```\n[2014-12-21 11:50:14,314][INFO ][org.elasticsearch.api.BaseTest] Index already exists.\n```\n\nClosing for now but feel free to reopen if you could reproduce it and share more details about what you are doing. Not sure what else you modified in your config files or if the code you pasted here is the actual running code.\n\nIIRC from the mailing list, you first forgot the negative operator in the `if` block. Could you check that again?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/67782822","html_url":"https://github.com/elastic/elasticsearch/issues/8945#issuecomment-67782822","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8945","id":67782822,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NzgyODIy","user":{"login":"sausax","id":481150,"node_id":"MDQ6VXNlcjQ4MTE1MA==","avatar_url":"https://avatars0.githubusercontent.com/u/481150?v=4","gravatar_id":"","url":"https://api.github.com/users/sausax","html_url":"https://github.com/sausax","followers_url":"https://api.github.com/users/sausax/followers","following_url":"https://api.github.com/users/sausax/following{/other_user}","gists_url":"https://api.github.com/users/sausax/gists{/gist_id}","starred_url":"https://api.github.com/users/sausax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sausax/subscriptions","organizations_url":"https://api.github.com/users/sausax/orgs","repos_url":"https://api.github.com/users/sausax/repos","events_url":"https://api.github.com/users/sausax/events{/privacy}","received_events_url":"https://api.github.com/users/sausax/received_events","type":"User","site_admin":false},"created_at":"2014-12-21T20:11:42Z","updated_at":"2014-12-21T20:11:42Z","author_association":"NONE","body":"Hi @dadoonet,\n\nHere is the complete code that I am using to reproduce the issue. \n\n```\nimport org.elasticsearch.action.admin.indices.create.CreateIndexRequestBuilder;\nimport org.elasticsearch.action.admin.indices.exists.indices.IndicesExistsResponse;\nimport org.elasticsearch.client.Client;\nimport org.elasticsearch.client.IndicesAdminClient;\nimport org.elasticsearch.common.settings.ImmutableSettings;\nimport org.elasticsearch.node.Node;\nimport org.elasticsearch.node.NodeBuilder;\n\n\npublic class ElasticSearchTest {\n\n    public static void main(String[] args) {\n\n        Node node = NodeBuilder.nodeBuilder().settings(ImmutableSettings.settingsBuilder()\n                .put(\"path.data\", \"/etc/elasticsearch\")\n                .put(\"cluster.name\", \"testcluster\"))\n                .node();\n        Client client = node.client();\n        IndicesAdminClient indices = client.admin().indices();\n        IndicesExistsResponse res = indices.prepareExists(\"testindex\").execute().actionGet();\n        if(!res.isExists()){ //Everytime getting value as false\n            CreateIndexRequestBuilder createIndexRequestBuilder = indices.prepareCreate(\"testindex\");\n            System.out.println(\"Creating index\");\n            createIndexRequestBuilder.execute().actionGet(); // Erring out with IndexAlreadyExistsException\n        }\n    }\n\n}\n\n```\n\nI am running the code two times. On first run it creates the index, in second run isExists() again gives false, and tries to create index.\n\nI am getting the following output on second run \n\n```\nCreating index\nException in thread \"main\" org.elasticsearch.indices.IndexAlreadyExistsException: [testindex] already exists\n    at org.elasticsearch.cluster.metadata.MetaDataCreateIndexService.validateIndexName(MetaDataCreateIndexService.java:167)\n    at org.elasticsearch.cluster.metadata.MetaDataCreateIndexService.validate(MetaDataCreateIndexService.java:558)\n    at org.elasticsearch.cluster.metadata.MetaDataCreateIndexService.access$200(MetaDataCreateIndexService.java:87)\n    at org.elasticsearch.cluster.metadata.MetaDataCreateIndexService$2.execute(MetaDataCreateIndexService.java:243)\n    at org.elasticsearch.cluster.service.InternalClusterService$UpdateTask.run(InternalClusterService.java:329)\n    at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:153)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n\n```\n\nI am not deleting and then creating the index.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/96492502","html_url":"https://github.com/elastic/elasticsearch/issues/8945#issuecomment-96492502","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8945","id":96492502,"node_id":"MDEyOklzc3VlQ29tbWVudDk2NDkyNTAy","user":{"login":"GMelo","id":875635,"node_id":"MDQ6VXNlcjg3NTYzNQ==","avatar_url":"https://avatars2.githubusercontent.com/u/875635?v=4","gravatar_id":"","url":"https://api.github.com/users/GMelo","html_url":"https://github.com/GMelo","followers_url":"https://api.github.com/users/GMelo/followers","following_url":"https://api.github.com/users/GMelo/following{/other_user}","gists_url":"https://api.github.com/users/GMelo/gists{/gist_id}","starred_url":"https://api.github.com/users/GMelo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GMelo/subscriptions","organizations_url":"https://api.github.com/users/GMelo/orgs","repos_url":"https://api.github.com/users/GMelo/repos","events_url":"https://api.github.com/users/GMelo/events{/privacy}","received_events_url":"https://api.github.com/users/GMelo/received_events","type":"User","site_admin":false},"created_at":"2015-04-27T04:00:38Z","updated_at":"2015-04-27T04:00:38Z","author_association":"NONE","body":"I am getting the same error, created a test to show it:\n\n``` java\nClient elasticSearchClient = elasticSearchLocalService.getClient();\nif (elasticSearchClient.admin().indices().exists(new IndicesExistsRequest(indexName)).get().isExists())\n    elasticSearchClient.admin().indices().delete(new DeleteIndexRequest(indexName)).get();\nif (elasticSearchClient.admin().indices().exists(new IndicesExistsRequest(indexName)).get().isExists());//returns false\n    elasticSearchClient.admin().indices().create(new CreateIndexRequest(indexName)).get();\n```\n\nI get the same error, however, if I try to create it and let it fail it works on the second time:\n\n``` java\nClient elasticSearchClient = elasticSearchLocalService.getClient();\nif (elasticSearchClient.admin().indices().exists(new IndicesExistsRequest(indexName)).get().isExists())\n    elasticSearchClient.admin().indices().delete(new DeleteIndexRequest(indexName)).get();\ntry{\n    elasticSearchClient.admin().indices().create(new CreateIndexRequest(indexName)).get();\n}catch (IndexAlreadyExistsException exception){\n//log\n}\nif (elasticSearchClient.admin().indices().exists(new IndicesExistsRequest(indexName)).get().isExists());//returns false\n    elasticSearchClient.admin().indices().create(new CreateIndexRequest(indexName)).get();\n```\n\nThanks\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/96573703","html_url":"https://github.com/elastic/elasticsearch/issues/8945#issuecomment-96573703","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8945","id":96573703,"node_id":"MDEyOklzc3VlQ29tbWVudDk2NTczNzAz","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-04-27T08:59:29Z","updated_at":"2015-04-27T08:59:29Z","author_association":"CONTRIBUTOR","body":"@GMelo your description sounds like a duplicate of https://github.com/elastic/elasticsearch/issues/8105\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/257923940","html_url":"https://github.com/elastic/elasticsearch/issues/8945#issuecomment-257923940","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8945","id":257923940,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NzkyMzk0MA==","user":{"login":"rdgreen","id":19548624,"node_id":"MDQ6VXNlcjE5NTQ4NjI0","avatar_url":"https://avatars2.githubusercontent.com/u/19548624?v=4","gravatar_id":"","url":"https://api.github.com/users/rdgreen","html_url":"https://github.com/rdgreen","followers_url":"https://api.github.com/users/rdgreen/followers","following_url":"https://api.github.com/users/rdgreen/following{/other_user}","gists_url":"https://api.github.com/users/rdgreen/gists{/gist_id}","starred_url":"https://api.github.com/users/rdgreen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdgreen/subscriptions","organizations_url":"https://api.github.com/users/rdgreen/orgs","repos_url":"https://api.github.com/users/rdgreen/repos","events_url":"https://api.github.com/users/rdgreen/events{/privacy}","received_events_url":"https://api.github.com/users/rdgreen/received_events","type":"User","site_admin":false},"created_at":"2016-11-02T16:44:54Z","updated_at":"2016-11-02T16:44:54Z","author_association":"NONE","body":"Still seeing this on ES 2.4.1.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/273540573","html_url":"https://github.com/elastic/elasticsearch/issues/8945#issuecomment-273540573","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8945","id":273540573,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MzU0MDU3Mw==","user":{"login":"mllanes","id":2744135,"node_id":"MDQ6VXNlcjI3NDQxMzU=","avatar_url":"https://avatars3.githubusercontent.com/u/2744135?v=4","gravatar_id":"","url":"https://api.github.com/users/mllanes","html_url":"https://github.com/mllanes","followers_url":"https://api.github.com/users/mllanes/followers","following_url":"https://api.github.com/users/mllanes/following{/other_user}","gists_url":"https://api.github.com/users/mllanes/gists{/gist_id}","starred_url":"https://api.github.com/users/mllanes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mllanes/subscriptions","organizations_url":"https://api.github.com/users/mllanes/orgs","repos_url":"https://api.github.com/users/mllanes/repos","events_url":"https://api.github.com/users/mllanes/events{/privacy}","received_events_url":"https://api.github.com/users/mllanes/received_events","type":"User","site_admin":false},"created_at":"2017-01-18T17:21:55Z","updated_at":"2017-01-18T17:23:36Z","author_association":"NONE","body":"I'm seeing the same issue on ES 2.4. Using the Js client. \r\nIf I run `curl -XHEAD -i 'http://localhost:9200/myIndex/myType'` it comes back 200","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/312556817","html_url":"https://github.com/elastic/elasticsearch/issues/8945#issuecomment-312556817","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8945","id":312556817,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjU1NjgxNw==","user":{"login":"subhasish23sahu","id":29768364,"node_id":"MDQ6VXNlcjI5NzY4MzY0","avatar_url":"https://avatars0.githubusercontent.com/u/29768364?v=4","gravatar_id":"","url":"https://api.github.com/users/subhasish23sahu","html_url":"https://github.com/subhasish23sahu","followers_url":"https://api.github.com/users/subhasish23sahu/followers","following_url":"https://api.github.com/users/subhasish23sahu/following{/other_user}","gists_url":"https://api.github.com/users/subhasish23sahu/gists{/gist_id}","starred_url":"https://api.github.com/users/subhasish23sahu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/subhasish23sahu/subscriptions","organizations_url":"https://api.github.com/users/subhasish23sahu/orgs","repos_url":"https://api.github.com/users/subhasish23sahu/repos","events_url":"https://api.github.com/users/subhasish23sahu/events{/privacy}","received_events_url":"https://api.github.com/users/subhasish23sahu/received_events","type":"User","site_admin":false},"created_at":"2017-07-03T06:05:34Z","updated_at":"2017-07-03T06:05:34Z","author_association":"NONE","body":"im getting the below error while connecting to ES locally \r\n\r\nError:\r\n\r\nException in thread \"main\" NoNodeAvailableException[None of the configured nodes are available: [{#transport#-1}{127.0.0.1}{127.0.0.1:9200}]]\r\n\r\nCode:\r\n------\r\n\r\n   Settings settings =Settings.builder()\r\n\t\t    \t\t.put(\"client.transport.sniff\",false)\r\n\t\t    \t\t.put(\"cluster.name\", \"my-application\").build();\r\n    Client  client = new PreBuiltTransportClient(settings)\r\n            .addTransportAddress(new InetSocketTransportAddress(InetAddress.getByName(\"127.0.0.1\"), 9200));\r\n   IndicesAdminClient indices = client.admin().indices();\r\n\t\t    IndicesExistsResponse res = indices.prepareExists(\"schools\").execute().actionGet();\r\n\t        System.out.println(res.isExists());","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/312557051","html_url":"https://github.com/elastic/elasticsearch/issues/8945#issuecomment-312557051","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8945","id":312557051,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjU1NzA1MQ==","user":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"created_at":"2017-07-03T06:07:21Z","updated_at":"2017-07-03T06:07:21Z","author_association":"MEMBER","body":"Ask your questions on discuss.elastic.co instead.\r\n\r\nHere use port 9300.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/312557585","html_url":"https://github.com/elastic/elasticsearch/issues/8945#issuecomment-312557585","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8945","id":312557585,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjU1NzU4NQ==","user":{"login":"subhasish23sahu","id":29768364,"node_id":"MDQ6VXNlcjI5NzY4MzY0","avatar_url":"https://avatars0.githubusercontent.com/u/29768364?v=4","gravatar_id":"","url":"https://api.github.com/users/subhasish23sahu","html_url":"https://github.com/subhasish23sahu","followers_url":"https://api.github.com/users/subhasish23sahu/followers","following_url":"https://api.github.com/users/subhasish23sahu/following{/other_user}","gists_url":"https://api.github.com/users/subhasish23sahu/gists{/gist_id}","starred_url":"https://api.github.com/users/subhasish23sahu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/subhasish23sahu/subscriptions","organizations_url":"https://api.github.com/users/subhasish23sahu/orgs","repos_url":"https://api.github.com/users/subhasish23sahu/repos","events_url":"https://api.github.com/users/subhasish23sahu/events{/privacy}","received_events_url":"https://api.github.com/users/subhasish23sahu/received_events","type":"User","site_admin":false},"created_at":"2017-07-03T06:11:42Z","updated_at":"2017-07-03T06:11:42Z","author_association":"NONE","body":"thanks..anways tried with 9300 also..still not working","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/354725474","html_url":"https://github.com/elastic/elasticsearch/issues/8945#issuecomment-354725474","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/8945","id":354725474,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDcyNTQ3NA==","user":{"login":"aimrabbit","id":8012407,"node_id":"MDQ6VXNlcjgwMTI0MDc=","avatar_url":"https://avatars3.githubusercontent.com/u/8012407?v=4","gravatar_id":"","url":"https://api.github.com/users/aimrabbit","html_url":"https://github.com/aimrabbit","followers_url":"https://api.github.com/users/aimrabbit/followers","following_url":"https://api.github.com/users/aimrabbit/following{/other_user}","gists_url":"https://api.github.com/users/aimrabbit/gists{/gist_id}","starred_url":"https://api.github.com/users/aimrabbit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aimrabbit/subscriptions","organizations_url":"https://api.github.com/users/aimrabbit/orgs","repos_url":"https://api.github.com/users/aimrabbit/repos","events_url":"https://api.github.com/users/aimrabbit/events{/privacy}","received_events_url":"https://api.github.com/users/aimrabbit/received_events","type":"User","site_admin":false},"created_at":"2018-01-02T09:11:01Z","updated_at":"2018-01-02T09:11:01Z","author_association":"NONE","body":"I figured out the problem for Elasticsearch and Kibana, because i had this issue too.\r\nThe problem is if you're using Elasticsearch and Kibana you have to create the index pattern, delete them after creating it and then delete the index over command. You will see everything works fine and you can create the index again. \r\nIf you delete the index without creating an index pattern in Kibana and delete them, you will get the error.\r\n\r\n**To solve the problem:**\r\n1. You created the index\r\n2. Create an index pattern in Kibana (if you have Kibana)\r\n3. Delete the index pattern in Kibana\r\n4. Delete the index over command from Elasticsearch\r\n5. Check if it is deleted under your address ( http://your.ip.to.elasticsearch:port/YOUR_INDEX )\r\nResult should look like this:\r\n`{\r\n\"error\": {\r\n\"root_cause\": [\r\n{\r\n\"type\": \"index_not_found_exception\",\r\n\"reason\": \"no such index\",\r\n\"resource.type\": \"index_or_alias\",\r\n\"resource.id\": \"test\",\r\n\"index_uuid\": \"_na_\",\r\n\"index\": \"test\"\r\n}\r\n],\r\n\"type\": \"index_not_found_exception\",\r\n\"reason\": \"no such index\",\r\n\"resource.type\": \"index_or_alias\",\r\n\"resource.id\": \"test\",\r\n\"index_uuid\": \"_na_\",\r\n\"index\": \"test\"\r\n},\r\n\"status\": 404\r\n}`\r\n\r\nI hope it helps someone to fix the problem.","performed_via_github_app":null}]