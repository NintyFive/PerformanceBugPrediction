{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/21182","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21182/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21182/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/21182/events","html_url":"https://github.com/elastic/elasticsearch/issues/21182","id":186028580,"node_id":"MDU6SXNzdWUxODYwMjg1ODA=","number":21182,"title":"support date math in _field_stats API","user":{"login":"inqueue","id":6099128,"node_id":"MDQ6VXNlcjYwOTkxMjg=","avatar_url":"https://avatars2.githubusercontent.com/u/6099128?v=4","gravatar_id":"","url":"https://api.github.com/users/inqueue","html_url":"https://github.com/inqueue","followers_url":"https://api.github.com/users/inqueue/followers","following_url":"https://api.github.com/users/inqueue/following{/other_user}","gists_url":"https://api.github.com/users/inqueue/gists{/gist_id}","starred_url":"https://api.github.com/users/inqueue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/inqueue/subscriptions","organizations_url":"https://api.github.com/users/inqueue/orgs","repos_url":"https://api.github.com/users/inqueue/repos","events_url":"https://api.github.com/users/inqueue/events{/privacy}","received_events_url":"https://api.github.com/users/inqueue/received_events","type":"User","site_admin":false},"labels":[{"id":163824881,"node_id":"MDU6TGFiZWwxNjM4MjQ4ODE=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Core/Features/Indices%20APIs","name":":Core/Features/Indices APIs","color":"0e8a16","default":false,"description":"APIs to create and manage indices"},{"id":23174,"node_id":"MDU6TGFiZWwyMzE3NA==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Eenhancement","name":">enhancement","color":"4a4ea8","default":false,"description":null},{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2016-10-28T21:40:19Z","updated_at":"2017-05-26T12:40:41Z","closed_at":"2017-05-26T12:40:41Z","author_association":"MEMBER","active_lock_reason":null,"body":"<!--\nGitHub is reserved for bug reports and feature requests. The best place\nto ask a general question is at the Elastic Discourse forums at\nhttps://discuss.elastic.co. If you are in fact posting a bug report or\na feature request, please include one and only one of the below blocks\nin your new issue. Note that whether you're filing a bug report or a\nfeature request, ensure that your submission is for an\n[OS that we support](https://www.elastic.co/support/matrix#show_os).\nBug reports on an OS that we do not support or feature requests\nspecific to an OS that we do not support will be closed.\n-->\n\n<!--\nIf you are filing a bug report, please remove the below feature\nrequest block and provide responses for all of the below items.\n-->\n\n**Elasticsearch version**: 5.0\n\n**Describe the feature**:\nI have been using `_rollover` to manage aliases for time series indices. I would like to use `_field_stats` to determine if an index can be deleted based on the timestamp of the last document given some relative time, like 14 days ago. Could the field stats API support date math?\n\n```\nGET packetbeat/_field_stats?level=indices\n{\n  \"fields\": [\"@timestamp\"],\n  \"index_constraints\": {\n    \"@timestamp\": {\n      \"max_value\": {\n        \"lt\": \"now-14d\"\n      }\n    }\n  }\n}\n\n{\n  \"_shards\": {\n    \"total\": 1,\n    \"successful\": 1,\n    \"failed\": 0\n  },\n  \"indices\": {\n    \"packetbeat-000001\": {\n      \"fields\": {\n        \"@timestamp\": {\n          \"type\": \"date\",\n          \"max_doc\": 844906,\n          \"doc_count\": 844906,\n          \"density\": 100,\n          \"sum_doc_freq\": -1,\n          \"sum_total_term_freq\": 844906,\n          \"searchable\": true,\n          \"aggregatable\": true,\n          \"min_value\": 1475280000000,\n          \"min_value_as_string\": \"2016-10-01T00:00:00.000Z\",\n          \"max_value\": 1476403140000,\n          \"max_value_as_string\": \"2016-10-13T23:59:00.000Z\"\n        }\n      }\n    }\n  }\n}\n```\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}