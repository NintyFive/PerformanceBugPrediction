{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/22246","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22246/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22246/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22246/events","html_url":"https://github.com/elastic/elasticsearch/issues/22246","id":196217797,"node_id":"MDU6SXNzdWUxOTYyMTc3OTc=","number":22246,"title":"Reenact API","user":{"login":"bjorn-ali-goransson","id":668160,"node_id":"MDQ6VXNlcjY2ODE2MA==","avatar_url":"https://avatars2.githubusercontent.com/u/668160?v=4","gravatar_id":"","url":"https://api.github.com/users/bjorn-ali-goransson","html_url":"https://github.com/bjorn-ali-goransson","followers_url":"https://api.github.com/users/bjorn-ali-goransson/followers","following_url":"https://api.github.com/users/bjorn-ali-goransson/following{/other_user}","gists_url":"https://api.github.com/users/bjorn-ali-goransson/gists{/gist_id}","starred_url":"https://api.github.com/users/bjorn-ali-goransson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bjorn-ali-goransson/subscriptions","organizations_url":"https://api.github.com/users/bjorn-ali-goransson/orgs","repos_url":"https://api.github.com/users/bjorn-ali-goransson/repos","events_url":"https://api.github.com/users/bjorn-ali-goransson/events{/privacy}","received_events_url":"https://api.github.com/users/bjorn-ali-goransson/received_events","type":"User","site_admin":false},"labels":[{"id":111416437,"node_id":"MDU6TGFiZWwxMTE0MTY0Mzc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/discuss","name":"discuss","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2016-12-17T11:40:57Z","updated_at":"2016-12-19T14:31:38Z","closed_at":"2016-12-19T14:31:37Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"With the `_analyze` API, we can send in text for analysis using either custom parameters or index analyzers (etc).\r\n\r\nBut when troubleshooting issues such as \"When doing a prefix query (for multiple fields), some documents appear only when typing a part of the query, then disappear\", it would be beneficial to see a complete document as indexed by ES.\r\n\r\nHere, it would be nice to be able to \"reenact\" an indexing of a document using the index settings, for example by issuing a `POST /my_index/my_content/1/_reenact` to get a post construction of what would be indexed in terms of `all` field, custom fields, aggregated fields and multiple fields that map to a single property but with different analyzers.\r\n\r\nAs this is from extremely difficult to impossible to reverse discover, an enactment would be second-to-best.\r\n\r\nExample document:\r\n\r\n```\r\nGET /my_index/my_content/1\r\n\r\n{\r\n  \"name\": \"Jones\",\r\n  \"description\": \"A big guy\"\r\n}\r\n```\r\n\r\nExample reenact request:\r\n\r\n```\r\nPOST /my_index/my_content/1/_reenact\r\n```\r\n\r\nResponse:\r\n\r\n```\r\n{\r\n  \"_all\": {\r\n    \"jones\",\r\n    \"a\",\r\n    \"big\",\r\n    \"guy\"\r\n  },\r\n  \"_all_swedish_analyzer\": {\r\n    \"jon\",\r\n    \"a\",\r\n    \"big\",\r\n    \"guy\"\r\n  },\r\n  \"name.with_standard_analyzer\": [{\r\n    \"token\": \"jones\",\r\n    \"start_offset\": 0,\r\n    \"end_offset\": 5,\r\n    \"type\": \"<ALPHANUM>\",\r\n    \"position\": 0\r\n  }],\r\n  \"name.with_custom_swedish_analyzer\": [{\r\n    \"token\": \"jon\",\r\n    \"start_offset\": 0,\r\n    \"end_offset\": 5,\r\n    \"type\": \"<ALPHANUM>\",\r\n    \"position\": 0\r\n  }],\r\n  ... etc ...\r\n```\r\n\r\nThat would be with two custom fields for `name`, one called `with_standard_analyzer` and another `with_custom_swedish_analyzer`, and for the swedish one a `copy_to` setting to the field `_all_swedish_analyzer`.\r\n\r\nAnd this would of course be with the disclaimer that this is a REENACTMENT, not the actual, canonical content as actually was indexed by ES/Lucene.","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}