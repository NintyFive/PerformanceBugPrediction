{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/19463","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19463/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19463/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/19463/events","html_url":"https://github.com/elastic/elasticsearch/issues/19463","id":165968251,"node_id":"MDU6SXNzdWUxNjU5NjgyNTE=","number":19463,"title":"date histogram doc count with interval day is correct, but giving more doc count with hour","user":{"login":"dks007","id":1190154,"node_id":"MDQ6VXNlcjExOTAxNTQ=","avatar_url":"https://avatars1.githubusercontent.com/u/1190154?v=4","gravatar_id":"","url":"https://api.github.com/users/dks007","html_url":"https://github.com/dks007","followers_url":"https://api.github.com/users/dks007/followers","following_url":"https://api.github.com/users/dks007/following{/other_user}","gists_url":"https://api.github.com/users/dks007/gists{/gist_id}","starred_url":"https://api.github.com/users/dks007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dks007/subscriptions","organizations_url":"https://api.github.com/users/dks007/orgs","repos_url":"https://api.github.com/users/dks007/repos","events_url":"https://api.github.com/users/dks007/events{/privacy}","received_events_url":"https://api.github.com/users/dks007/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2016-07-17T09:13:12Z","updated_at":"2016-07-18T07:52:35Z","closed_at":"2016-07-17T18:54:01Z","author_association":"NONE","active_lock_reason":null,"body":"Hi ,\n  I am writing query to find hourly count with some filter: \ndate histogram doc count with interval day is correct, but giving more doc count with hour\n\nFor example my query with interval day:\n\n```\nGET _search\n{\n  \"size\": 0,\n  \"aggs\": {\n    \"eventtime\": {\n      \"filter\": {\n        \"bool\": {\n          \"must\": [\n            {\n              \"term\": {\n                \"RW.RT\": \"152\"\n              }\n            },\n            {\n              \"term\": {\n                \"RW.RE\": \"received\"\n              }\n            }\n          ]\n        }\n      },\n      \"aggregations\": {\n        \"timeslice\": {\n          \"date_histogram\": {\n            \"field\": \"RW.DT\",\n            \"interval\": \"day\",\n            \"format\": \"YYYY-MM-dd HH:MM:ss\",\n            \"min_doc_count\": 1\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nOutput is : \n\n```\n\"hits\": {\n  \"total\": 147,\n  \"max_score\": 0,\n  \"hits\": []\n},\n\"aggregations\": {\n  \"eventtime\": {\n     \"doc_count\": 6,\n     \"timeslice\": {\n        \"buckets\": [\n           {\n              \"key_as_string\": \"2016-07-14 00:07:00\",\n              \"key\": 1468454400000,\n              \"doc_count\": 6\n           }\n        ]\n     }\n  }\n  }\n```\n\nThis is ok..but when i change interval with hour ..\nOutput is \n\n```\n\"hits\": {\n  \"total\": 147,\n  \"max_score\": 0,\n  \"hits\": []\n},\n\"aggregations\": {\n  \"eventtime\": {\n     \"doc_count\": 6,\n     \"timeslice\": {\n        \"buckets\": [\n           {\n              \"key_as_string\": \"2016-07-14 07:07:00\",\n              \"key\": 1468479600000,\n              \"doc_count\": 1\n           },\n           {\n              \"key_as_string\": \"2016-07-14 08:07:00\",\n              \"key\": 1468483200000,\n              \"doc_count\": 2\n           },\n           {\n              \"key_as_string\": \"2016-07-14 09:07:00\",\n              \"key\": 1468486800000,\n              \"doc_count\": 4\n           },\n           {\n              \"key_as_string\": \"2016-07-14 12:07:00\",\n              \"key\": 1468497600000,\n              \"doc_count\": 1\n           },\n           {\n              \"key_as_string\": \"2016-07-14 13:07:00\",\n              \"key\": 1468501200000,\n              \"doc_count\": 1\n           }\n        ]\n     }\n  }\n }\n```\n\nHere in output doc count is  9, this should be 6 \nPlease help me \n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}