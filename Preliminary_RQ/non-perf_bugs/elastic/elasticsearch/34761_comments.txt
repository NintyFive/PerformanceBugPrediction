[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/432353685","html_url":"https://github.com/elastic/elasticsearch/issues/34761#issuecomment-432353685","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34761","id":432353685,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjM1MzY4NQ==","user":{"login":"Bherzet","id":9641921,"node_id":"MDQ6VXNlcjk2NDE5MjE=","avatar_url":"https://avatars3.githubusercontent.com/u/9641921?v=4","gravatar_id":"","url":"https://api.github.com/users/Bherzet","html_url":"https://github.com/Bherzet","followers_url":"https://api.github.com/users/Bherzet/followers","following_url":"https://api.github.com/users/Bherzet/following{/other_user}","gists_url":"https://api.github.com/users/Bherzet/gists{/gist_id}","starred_url":"https://api.github.com/users/Bherzet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bherzet/subscriptions","organizations_url":"https://api.github.com/users/Bherzet/orgs","repos_url":"https://api.github.com/users/Bherzet/repos","events_url":"https://api.github.com/users/Bherzet/events{/privacy}","received_events_url":"https://api.github.com/users/Bherzet/received_events","type":"User","site_admin":false},"created_at":"2018-10-23T17:57:41Z","updated_at":"2018-10-23T18:01:23Z","author_association":"NONE","body":"OK. I just found out that it is, indeed, looking for Hunspell dictionaries under `/etc/elasticsearch/hunspell`, but I missed `pl_PL` there. So the good news is that I have at least some solution.\r\n\r\nBut the question remains: Why doesn't Elasticsearch look for Hunspell dictionaries under `ES_PATH_CONF`? [Documentation](https://www.elastic.co/guide/en/elasticsearch/reference/6.4/analysis-hunspell-tokenfilter.html) states:\r\n\r\n> Hunspell dictionaries will be picked up from a dedicated hunspell directory on the filesystem (<path.conf>/hunspell).\r\n\r\nWhat is meant by `<path.conf>` if not `ES_PATH_CONF`? For testing purposes, I'd still rather have dictionaries directly under the project root.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/432596331","html_url":"https://github.com/elastic/elasticsearch/issues/34761#issuecomment-432596331","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34761","id":432596331,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjU5NjMzMQ==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2018-10-24T10:06:43Z","updated_at":"2018-10-24T10:06:43Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-search-aggs","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/432714091","html_url":"https://github.com/elastic/elasticsearch/issues/34761#issuecomment-432714091","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34761","id":432714091,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjcxNDA5MQ==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2018-10-24T15:48:35Z","updated_at":"2018-10-24T15:48:35Z","author_association":"MEMBER","body":"`ES_PATH_CONF` must point to the entire elasticsearch configuration directory. Do you have your elasticsearch log file? This is almost assuredly an environmental issue, but we should be printing out enough info in the log to find where hunspell is looking.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/433005550","html_url":"https://github.com/elastic/elasticsearch/issues/34761#issuecomment-433005550","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34761","id":433005550,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzAwNTU1MA==","user":{"login":"Bherzet","id":9641921,"node_id":"MDQ6VXNlcjk2NDE5MjE=","avatar_url":"https://avatars3.githubusercontent.com/u/9641921?v=4","gravatar_id":"","url":"https://api.github.com/users/Bherzet","html_url":"https://github.com/Bherzet","followers_url":"https://api.github.com/users/Bherzet/followers","following_url":"https://api.github.com/users/Bherzet/following{/other_user}","gists_url":"https://api.github.com/users/Bherzet/gists{/gist_id}","starred_url":"https://api.github.com/users/Bherzet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bherzet/subscriptions","organizations_url":"https://api.github.com/users/Bherzet/orgs","repos_url":"https://api.github.com/users/Bherzet/repos","events_url":"https://api.github.com/users/Bherzet/events{/privacy}","received_events_url":"https://api.github.com/users/Bherzet/received_events","type":"User","site_admin":false},"created_at":"2018-10-25T10:52:44Z","updated_at":"2018-10-25T18:19:11Z","author_association":"NONE","body":"I see. I greped the log file for `\"/etc/elasticsearch\"` and found that it's actually being started with `-Des.path.conf=/etc/elasticsearch`. My apologies for not noticing earlier.\r\n\r\nI digged a bit deeper at why this happens. Right at the beginning of `/usr/share/elasticsearch/bin/elasticsearch` is the following line:\r\n\r\n    source \"`dirname \"$0\"`\"/elasticsearch-env\r\n\r\nAt `/usr/share/elasticsearch/bin/elasticsearch-env`:\r\n\r\n    source /etc/default/elasticsearch\r\n\r\n    if [ -z \"$ES_PATH_CONF\" ]; then\r\n      echo \"ES_PATH_CONF must be set to the configuration path\"\r\n      exit 1\r\n    fi\r\n\r\nAnd finally, at `/etc/default/elasticsearch`:\r\n\r\n    ES_PATH_CONF=/etc/elasticsearch\r\n\r\nI simply tried commenting this line out and *now* it actually complains about my `ES_PATH_CONF` not containing all configuration files, such as `jvm.options`.\r\n\r\nSo, in case I am not missing anything, `ES_PATH_CONF` cannot actually be set \"from the outside\", because it gets overwritten each and every time. The solution (not very clean, but working) would be to only set this variable if not set already, so for example replace the line posted above with something like:\r\n\r\n    if [ -z \"$ES_PATH_CONF\" ]; then\r\n        ES_PATH_CONF=/etc/elasticsearch\r\n    fi\r\n\r\n~~I would consider this a bug, but it largely depends whether or not you want to allow users to run Elasticsearch in this manner (i.e. specifying configuration directory using env variable).~~\r\n\r\nAlthough  [documented](https://www.elastic.co/guide/en/elasticsearch/reference/6.4/settings.html) (I've to admit I overlooked it), the current behavior doesn't seem very intuitive to me. But that might be a personal bias (I expected `ES_PATH_CONF` in 6.4.x to be a drop-in replacement for `--path.conf` in 2.3.x, which it's not).\r\n\r\nI believe the file I have in `/etc/default/elasticsearch` comes from [this](https://github.com/elastic/elasticsearch/blob/master/distribution/packages/src/common/env/elasticsearch) repository file. Should I make a pull request with this little change?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/434045156","html_url":"https://github.com/elastic/elasticsearch/issues/34761#issuecomment-434045156","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34761","id":434045156,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDA0NTE1Ng==","user":{"login":"rjernst","id":289412,"node_id":"MDQ6VXNlcjI4OTQxMg==","avatar_url":"https://avatars3.githubusercontent.com/u/289412?v=4","gravatar_id":"","url":"https://api.github.com/users/rjernst","html_url":"https://github.com/rjernst","followers_url":"https://api.github.com/users/rjernst/followers","following_url":"https://api.github.com/users/rjernst/following{/other_user}","gists_url":"https://api.github.com/users/rjernst/gists{/gist_id}","starred_url":"https://api.github.com/users/rjernst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjernst/subscriptions","organizations_url":"https://api.github.com/users/rjernst/orgs","repos_url":"https://api.github.com/users/rjernst/repos","events_url":"https://api.github.com/users/rjernst/events{/privacy}","received_events_url":"https://api.github.com/users/rjernst/received_events","type":"User","site_admin":false},"created_at":"2018-10-29T19:22:16Z","updated_at":"2018-10-29T19:22:16Z","author_association":"MEMBER","body":"I believe this is a duplicate of https://github.com/elastic/elasticsearch/issues/28619. Also see the discussion in https://github.com/elastic/elasticsearch/issues/24867. Closing this in favor of the first issue.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/434048013","html_url":"https://github.com/elastic/elasticsearch/issues/34761#issuecomment-434048013","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/34761","id":434048013,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDA0ODAxMw==","user":{"login":"Bherzet","id":9641921,"node_id":"MDQ6VXNlcjk2NDE5MjE=","avatar_url":"https://avatars3.githubusercontent.com/u/9641921?v=4","gravatar_id":"","url":"https://api.github.com/users/Bherzet","html_url":"https://github.com/Bherzet","followers_url":"https://api.github.com/users/Bherzet/followers","following_url":"https://api.github.com/users/Bherzet/following{/other_user}","gists_url":"https://api.github.com/users/Bherzet/gists{/gist_id}","starred_url":"https://api.github.com/users/Bherzet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bherzet/subscriptions","organizations_url":"https://api.github.com/users/Bherzet/orgs","repos_url":"https://api.github.com/users/Bherzet/repos","events_url":"https://api.github.com/users/Bherzet/events{/privacy}","received_events_url":"https://api.github.com/users/Bherzet/received_events","type":"User","site_admin":false},"created_at":"2018-10-29T19:31:20Z","updated_at":"2018-10-29T19:31:20Z","author_association":"NONE","body":"Agreed. Thanks for your time.","performed_via_github_app":null}]