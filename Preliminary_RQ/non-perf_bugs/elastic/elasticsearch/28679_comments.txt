[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/365638971","html_url":"https://github.com/elastic/elasticsearch/issues/28679#issuecomment-365638971","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28679","id":365638971,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTYzODk3MQ==","user":{"login":"cexmmaqsood","id":10196786,"node_id":"MDQ6VXNlcjEwMTk2Nzg2","avatar_url":"https://avatars2.githubusercontent.com/u/10196786?v=4","gravatar_id":"","url":"https://api.github.com/users/cexmmaqsood","html_url":"https://github.com/cexmmaqsood","followers_url":"https://api.github.com/users/cexmmaqsood/followers","following_url":"https://api.github.com/users/cexmmaqsood/following{/other_user}","gists_url":"https://api.github.com/users/cexmmaqsood/gists{/gist_id}","starred_url":"https://api.github.com/users/cexmmaqsood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cexmmaqsood/subscriptions","organizations_url":"https://api.github.com/users/cexmmaqsood/orgs","repos_url":"https://api.github.com/users/cexmmaqsood/repos","events_url":"https://api.github.com/users/cexmmaqsood/events{/privacy}","received_events_url":"https://api.github.com/users/cexmmaqsood/received_events","type":"User","site_admin":false},"created_at":"2018-02-14T15:17:59Z","updated_at":"2018-02-14T15:17:59Z","author_association":"NONE","body":"Out of curiosity, what would be the use case of a `match_none` query?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/365676890","html_url":"https://github.com/elastic/elasticsearch/issues/28679#issuecomment-365676890","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28679","id":365676890,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTY3Njg5MA==","user":{"login":"m9aertner","id":6495291,"node_id":"MDQ6VXNlcjY0OTUyOTE=","avatar_url":"https://avatars0.githubusercontent.com/u/6495291?v=4","gravatar_id":"","url":"https://api.github.com/users/m9aertner","html_url":"https://github.com/m9aertner","followers_url":"https://api.github.com/users/m9aertner/followers","following_url":"https://api.github.com/users/m9aertner/following{/other_user}","gists_url":"https://api.github.com/users/m9aertner/gists{/gist_id}","starred_url":"https://api.github.com/users/m9aertner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/m9aertner/subscriptions","organizations_url":"https://api.github.com/users/m9aertner/orgs","repos_url":"https://api.github.com/users/m9aertner/repos","events_url":"https://api.github.com/users/m9aertner/events{/privacy}","received_events_url":"https://api.github.com/users/m9aertner/received_events","type":"User","site_admin":false},"created_at":"2018-02-14T17:09:45Z","updated_at":"2018-02-14T17:09:45Z","author_association":"CONTRIBUTOR","body":"We have multi-tenant data in our index with conditions regarding the visibility (i.e. user, maintenance, admin, on-behalf-of and so on). Structured ES queries are _generated_ on the fly based on user input and implicit roles/identity/permissions. In some cases deep down when certain sub-queries are found to not apply, a \"match_none\" is added to make sure that no preceding partial conditions still permit access.\r\n\r\nCome to think of if, it's certainly better to bubble up that bit of information and just drop the whole sub-condition from the query. Thanks for the 2nd thought! I should have asked that \"why?\" question myself...","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/365690090","html_url":"https://github.com/elastic/elasticsearch/issues/28679#issuecomment-365690090","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28679","id":365690090,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTY5MDA5MA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2018-02-14T17:53:05Z","updated_at":"2018-02-14T17:53:05Z","author_association":"MEMBER","body":"Please take a look @elastic/es-search-aggs.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/365691845","html_url":"https://github.com/elastic/elasticsearch/issues/28679#issuecomment-365691845","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28679","id":365691845,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTY5MTg0NQ==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2018-02-14T17:58:50Z","updated_at":"2018-02-14T18:00:11Z","author_association":"MEMBER","body":"@m9aertner thanks for opening this issue and the related PR (#28680) I already responded there.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/365866366","html_url":"https://github.com/elastic/elasticsearch/issues/28679#issuecomment-365866366","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28679","id":365866366,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTg2NjM2Ng==","user":{"login":"colings86","id":236731,"node_id":"MDQ6VXNlcjIzNjczMQ==","avatar_url":"https://avatars0.githubusercontent.com/u/236731?v=4","gravatar_id":"","url":"https://api.github.com/users/colings86","html_url":"https://github.com/colings86","followers_url":"https://api.github.com/users/colings86/followers","following_url":"https://api.github.com/users/colings86/following{/other_user}","gists_url":"https://api.github.com/users/colings86/gists{/gist_id}","starred_url":"https://api.github.com/users/colings86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/colings86/subscriptions","organizations_url":"https://api.github.com/users/colings86/orgs","repos_url":"https://api.github.com/users/colings86/repos","events_url":"https://api.github.com/users/colings86/events{/privacy}","received_events_url":"https://api.github.com/users/colings86/received_events","type":"User","site_admin":false},"created_at":"2018-02-15T09:11:49Z","updated_at":"2018-02-15T09:11:49Z","author_association":"MEMBER","body":"I'm not a fan of exposing this query. The only reason this query exists is so we have something that the rewrite phase can replace the query with that means no documents should match to speed up execution. In clients I think its better to have logic which excluded the clause instead of adding a `match_none` query.\r\n\r\nThat said the MatchNoneQueryBuilder is public at the moment so I think we need to decide if we want it to be publicly exposed, if so we should add it to the QueryBuilders class for completeness and if not we should see if we can reduce the visibility of MatchNoneQueryBuilder so it is only visible internally (for the rewrite phase to use).","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/365867831","html_url":"https://github.com/elastic/elasticsearch/issues/28679#issuecomment-365867831","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28679","id":365867831,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTg2NzgzMQ==","user":{"login":"cbuescher","id":10398885,"node_id":"MDQ6VXNlcjEwMzk4ODg1","avatar_url":"https://avatars0.githubusercontent.com/u/10398885?v=4","gravatar_id":"","url":"https://api.github.com/users/cbuescher","html_url":"https://github.com/cbuescher","followers_url":"https://api.github.com/users/cbuescher/followers","following_url":"https://api.github.com/users/cbuescher/following{/other_user}","gists_url":"https://api.github.com/users/cbuescher/gists{/gist_id}","starred_url":"https://api.github.com/users/cbuescher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbuescher/subscriptions","organizations_url":"https://api.github.com/users/cbuescher/orgs","repos_url":"https://api.github.com/users/cbuescher/repos","events_url":"https://api.github.com/users/cbuescher/events{/privacy}","received_events_url":"https://api.github.com/users/cbuescher/received_events","type":"User","site_admin":false},"created_at":"2018-02-15T09:17:53Z","updated_at":"2018-02-15T09:17:53Z","author_association":"MEMBER","body":"To argue for keeping it, there have been asks for this kind of query in the past (e.g. https://github.com/elastic/elasticsearch/issues/13406). There is always a workaround on the client side to construct a query that matches no docs (like e.g. an empty ids query), but \"match_none\" communicates more clearly what it does, and in my opinion there is no downside to having it as a logical complement to \"macht_all\".","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/365954201","html_url":"https://github.com/elastic/elasticsearch/issues/28679#issuecomment-365954201","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28679","id":365954201,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTk1NDIwMQ==","user":{"login":"m9aertner","id":6495291,"node_id":"MDQ6VXNlcjY0OTUyOTE=","avatar_url":"https://avatars0.githubusercontent.com/u/6495291?v=4","gravatar_id":"","url":"https://api.github.com/users/m9aertner","html_url":"https://github.com/m9aertner","followers_url":"https://api.github.com/users/m9aertner/followers","following_url":"https://api.github.com/users/m9aertner/following{/other_user}","gists_url":"https://api.github.com/users/m9aertner/gists{/gist_id}","starred_url":"https://api.github.com/users/m9aertner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/m9aertner/subscriptions","organizations_url":"https://api.github.com/users/m9aertner/orgs","repos_url":"https://api.github.com/users/m9aertner/repos","events_url":"https://api.github.com/users/m9aertner/events{/privacy}","received_events_url":"https://api.github.com/users/m9aertner/received_events","type":"User","site_admin":false},"created_at":"2018-02-15T15:05:05Z","updated_at":"2018-02-15T15:05:05Z","author_association":"CONTRIBUTOR","body":"After reviewing my use case I removed all uses of MatchNoneQueryBuilder and changed the client application code so that no query gets executed at all in these cases @cexmmaqsood @colings86 .\r\n\r\nThanks @cbuescher for mentioning #13406. I was in a somewhat similar situation but in my case it was really no problem to change the client code accordingly.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/365955405","html_url":"https://github.com/elastic/elasticsearch/issues/28679#issuecomment-365955405","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/28679","id":365955405,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTk1NTQwNQ==","user":{"login":"m9aertner","id":6495291,"node_id":"MDQ6VXNlcjY0OTUyOTE=","avatar_url":"https://avatars0.githubusercontent.com/u/6495291?v=4","gravatar_id":"","url":"https://api.github.com/users/m9aertner","html_url":"https://github.com/m9aertner","followers_url":"https://api.github.com/users/m9aertner/followers","following_url":"https://api.github.com/users/m9aertner/following{/other_user}","gists_url":"https://api.github.com/users/m9aertner/gists{/gist_id}","starred_url":"https://api.github.com/users/m9aertner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/m9aertner/subscriptions","organizations_url":"https://api.github.com/users/m9aertner/orgs","repos_url":"https://api.github.com/users/m9aertner/repos","events_url":"https://api.github.com/users/m9aertner/events{/privacy}","received_events_url":"https://api.github.com/users/m9aertner/received_events","type":"User","site_admin":false},"created_at":"2018-02-15T15:09:03Z","updated_at":"2018-02-15T15:09:03Z","author_association":"CONTRIBUTOR","body":"Now, does it _make sense_ to expose this specific function on top level?\r\n\r\nHaving read these other linked considerations, I don't think it's a great idea any longer. By using the existing class \"MatchNoneQueryBuilder\" directly it is still **possible** to get to the underlying function, but I agree it's not a query language element that will be used regularly.\r\n\r\nNo _need_ to expose it. Thanks for your consideration and input above, but let me close this request.","performed_via_github_app":null}]