{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/20483","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20483/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20483/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/20483/events","html_url":"https://github.com/elastic/elasticsearch/issues/20483","id":176950154,"node_id":"MDU6SXNzdWUxNzY5NTAxNTQ=","number":20483,"title":"Mapper-attachments -java.io.UnsupportedEncodingException - FlateFilter: stop reading corrupt stream due to a DataFormatException","user":{"login":"SKumarMN","id":2056311,"node_id":"MDQ6VXNlcjIwNTYzMTE=","avatar_url":"https://avatars2.githubusercontent.com/u/2056311?v=4","gravatar_id":"","url":"https://api.github.com/users/SKumarMN","html_url":"https://github.com/SKumarMN","followers_url":"https://api.github.com/users/SKumarMN/followers","following_url":"https://api.github.com/users/SKumarMN/following{/other_user}","gists_url":"https://api.github.com/users/SKumarMN/gists{/gist_id}","starred_url":"https://api.github.com/users/SKumarMN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SKumarMN/subscriptions","organizations_url":"https://api.github.com/users/SKumarMN/orgs","repos_url":"https://api.github.com/users/SKumarMN/repos","events_url":"https://api.github.com/users/SKumarMN/events{/privacy}","received_events_url":"https://api.github.com/users/SKumarMN/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2016-09-14T16:08:21Z","updated_at":"2016-09-14T16:35:49Z","closed_at":"2016-09-14T16:35:49Z","author_association":"NONE","active_lock_reason":null,"body":"**Elasticsearch version**: ES 2.3.2\n\n**Plugins installed**: [mapper-plugin]\n\n**JVM version**: jdk 1.8\n\n**OS version**: Linux /windows 7\n\nUnable to parse certain office documents using mapper-attachment plugin\n\n**Steps to reproduce**:\n 1.Index office documents/PDF's\n 2.\n 3.\n\n**Provide logs (if relevant)**:\n\n[2016-08-31 08:59:56,296][WARN ][org.apache.tika.parser.microsoft.AbstractPOIFSExtractor] Ignoring unexpected exception while parsing summary entry \u0005SummaryInformation\njava.io.UnsupportedEncodingException: Codepage number may not be 0\n    at org.apache.poi.util.CodePageUtil.codepageToEncoding(CodePageUtil.java:277)\n    at org.apache.poi.util.CodePageUtil.codepageToEncoding(CodePageUtil.java:255)\n    at org.apache.poi.util.CodePageUtil.getStringFromCodePage(CodePageUtil.java:233)\n    at org.apache.poi.util.CodePageUtil.getStringFromCodePage(CodePageUtil.java:221)\n    at org.apache.poi.hpsf.CodePageString.getJavaValue(CodePageString.java:70)\n    at org.apache.poi.hpsf.VariantSupport.read(VariantSupport.java:210)\n    at org.apache.poi.hpsf.Property.<init>(Property.java:163)\n    at org.apache.poi.hpsf.Section.<init>(Section.java:277)\n    at org.apache.poi.hpsf.PropertySet.init(PropertySet.java:451)\n    at org.apache.poi.hpsf.PropertySet.<init>(PropertySet.java:246)\n    at org.apache.tika.parser.microsoft.SummaryExtractor.parseSummaryEntryIfExists(SummaryExtractor.java:83)\n    at org.apache.tika.parser.microsoft.SummaryExtractor.parseSummaries(SummaryExtractor.java:73)\n    at org.apache.tika.parser.microsoft.OfficeParser.parse(OfficeParser.java:126)\n    at org.apache.tika.parser.microsoft.OfficeParser.parse(OfficeParser.java:117)\n    at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:280)\n    at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:120)\n    at org.apache.tika.Tika.parseToString(Tika.java:537)\n    at org.elasticsearch.mapper.attachments.TikaImpl$1.run(TikaImpl.java:94)\n    at org.elasticsearch.mapper.attachments.TikaImpl$1.run(TikaImpl.java:91)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at org.elasticsearch.mapper.attachments.TikaImpl.parse(TikaImpl.java:91)\n    at org.elasticsearch.mapper.attachments.AttachmentMapper.parse(AttachmentMapper.java:481)\n    at org.elasticsearch.index.mapper.DocumentParser.parseObjectOrField(DocumentParser.java:309)\n    at org.elasticsearch.index.mapper.DocumentParser.parseValue(DocumentParser.java:436)\n    at org.elasticsearch.index.mapper.DocumentParser.parseObject(DocumentParser.java:262)\n    at org.elasticsearch.index.mapper.DocumentParser.parseDocument(DocumentParser.java:122)\n    at org.elasticsearch.index.mapper.DocumentMapper.parse(DocumentMapper.java:309)\n    at org.elasticsearch.index.shard.IndexShard.prepareIndex(IndexShard.java:580)\n    at org.elasticsearch.index.shard.IndexShard.prepareIndexOnPrimary(IndexShard.java:559)\n    at org.elasticsearch.action.index.TransportIndexAction.prepareIndexOperationOnPrimary(TransportIndexAction.java:212)\n    at org.elasticsearch.action.index.TransportIndexAction.executeIndexRequestOnPrimary(TransportIndexAction.java:224)\n    at org.elasticsearch.action.bulk.TransportShardBulkAction.shardIndexOperation(TransportShardBulkAction.java:326)\n    at org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:119)\n    at org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:68)\n    at org.elasticsearch.action.support.replication.TransportReplicationAction$PrimaryPhase.doRun(TransportReplicationAction.java:639)\n    at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\n    at org.elasticsearch.action.support.replication.TransportReplicationAction$PrimaryOperationTransportHandler.messageReceived(TransportReplicationAction.java:279)\n    at org.elasticsearch.action.support.replication.TransportReplicationAction$PrimaryOperationTransportHandler.messageReceived(TransportReplicationAction.java:271)\n    at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:75)\n    at org.elasticsearch.transport.TransportService$4.doRun(TransportService.java:376)\n    at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n\nLog2:\n\n[2016-08-31 08:56:17,258][ERROR][org.apache.pdfbox.filter.FlateFilter] FlateFilter: stop reading corrupt stream due to a DataFormatException\n[2016-08-31 08:56:54,058][ERROR][org.apache.pdfbox.filter.FlateFilter] FlateFilter: stop reading corrupt stream due to a DataFormatException\n[2016-08-31 08:56:54,106][ERROR][org.apache.pdfbox.filter.FlateFilter] FlateFilter: stop reading corrupt stream due to a DataFormatException\n[2016-08-31 08:56:54,248][ERROR][org.apache.pdfbox.filter.FlateFilter] FlateFilter: stop reading corrupt stream due to a DataFormatException\n[2016-08-31 08:56:54,265][ERROR][org.apache.pdfbox.filter.FlateFilter] FlateFilter: stop reading corrupt stream due to a DataFormatException\n","closed_by":{"login":"dadoonet","id":274222,"node_id":"MDQ6VXNlcjI3NDIyMg==","avatar_url":"https://avatars3.githubusercontent.com/u/274222?v=4","gravatar_id":"","url":"https://api.github.com/users/dadoonet","html_url":"https://github.com/dadoonet","followers_url":"https://api.github.com/users/dadoonet/followers","following_url":"https://api.github.com/users/dadoonet/following{/other_user}","gists_url":"https://api.github.com/users/dadoonet/gists{/gist_id}","starred_url":"https://api.github.com/users/dadoonet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dadoonet/subscriptions","organizations_url":"https://api.github.com/users/dadoonet/orgs","repos_url":"https://api.github.com/users/dadoonet/repos","events_url":"https://api.github.com/users/dadoonet/events{/privacy}","received_events_url":"https://api.github.com/users/dadoonet/received_events","type":"User","site_admin":false},"performed_via_github_app":null}