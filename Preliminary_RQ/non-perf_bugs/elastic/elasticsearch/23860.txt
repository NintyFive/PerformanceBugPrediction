{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/23860","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23860/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23860/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/23860/events","html_url":"https://github.com/elastic/elasticsearch/issues/23860","id":218660999,"node_id":"MDU6SXNzdWUyMTg2NjA5OTk=","number":23860,"title":"Elasticsearch persistent cluster settings not apply?","user":{"login":"boicehuang","id":4607177,"node_id":"MDQ6VXNlcjQ2MDcxNzc=","avatar_url":"https://avatars3.githubusercontent.com/u/4607177?v=4","gravatar_id":"","url":"https://api.github.com/users/boicehuang","html_url":"https://github.com/boicehuang","followers_url":"https://api.github.com/users/boicehuang/followers","following_url":"https://api.github.com/users/boicehuang/following{/other_user}","gists_url":"https://api.github.com/users/boicehuang/gists{/gist_id}","starred_url":"https://api.github.com/users/boicehuang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/boicehuang/subscriptions","organizations_url":"https://api.github.com/users/boicehuang/orgs","repos_url":"https://api.github.com/users/boicehuang/repos","events_url":"https://api.github.com/users/boicehuang/events{/privacy}","received_events_url":"https://api.github.com/users/boicehuang/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-04-01T02:29:59Z","updated_at":"2017-04-01T16:14:59Z","closed_at":"2017-04-01T16:14:59Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Hi, i  have a question on  Cluster Update Settings\r\n\r\n i create a 2-node cluster and write some data to it.  The shards of index is distributed across two nodes.\r\nthen i put the setting below to the  cluster to exclude one node. \r\n\r\n    curl -XPUT http://1.1.1.1:18437/_cluster/settings?pretty -d '\r\n    {\r\n      \"persistent\" : {\r\n        \"cluster.routing.allocation.exclude._ip\": \"1.1.1.1\"\r\n      }\r\n    }'\r\n\r\nand i got acknowledge response. but  it doesn't takes effect. the shard of the node 1.1.1.1 is still working and not being  reallocated.\r\n\r\nbut it  works well  like settings below\r\n\r\n    curl -XPUT http://1.1.1.1:18437/_cluster/settings?pretty -d '\r\n    {\r\n      \"transient\" : {\r\n        \"cluster.routing.allocation.exclude._ip\": \"1.1.1.1\"\r\n      }\r\n    }'\r\n\r\n\r\ni am afraid of losing my settings in case that the cluster restart so i want to put my settings in persistent module. why doesn't  persistent cluster setting working  like  transient settings?\r\n\r\nmy elasticsearch version is 5.0.0\r\n\r\nand above is all my settings","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}