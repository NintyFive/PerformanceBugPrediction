[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/335780513","html_url":"https://github.com/elastic/elasticsearch/issues/26951#issuecomment-335780513","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26951","id":335780513,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTc4MDUxMw==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2017-10-11T11:31:50Z","updated_at":"2017-10-11T11:31:50Z","author_association":"MEMBER","body":"The slowlog records the query **after** rewriting, in 5.x queries are rewritten on the coordinating node and on the shards which is why they can differ from the original query when printed in the slowlog. In your example I suspect that the shard rewrote the range query to an open bound query because we detected that the provided range would match all documents in that shard. Open bounds range query are represented with null values so the output is expected.\r\n\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/335868179","html_url":"https://github.com/elastic/elasticsearch/issues/26951#issuecomment-335868179","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26951","id":335868179,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTg2ODE3OQ==","user":{"login":"ppf2","id":7216393,"node_id":"MDQ6VXNlcjcyMTYzOTM=","avatar_url":"https://avatars0.githubusercontent.com/u/7216393?v=4","gravatar_id":"","url":"https://api.github.com/users/ppf2","html_url":"https://github.com/ppf2","followers_url":"https://api.github.com/users/ppf2/followers","following_url":"https://api.github.com/users/ppf2/following{/other_user}","gists_url":"https://api.github.com/users/ppf2/gists{/gist_id}","starred_url":"https://api.github.com/users/ppf2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppf2/subscriptions","organizations_url":"https://api.github.com/users/ppf2/orgs","repos_url":"https://api.github.com/users/ppf2/repos","events_url":"https://api.github.com/users/ppf2/events{/privacy}","received_events_url":"https://api.github.com/users/ppf2/received_events","type":"User","site_admin":false},"created_at":"2017-10-11T16:29:09Z","updated_at":"2017-10-11T16:29:09Z","author_association":"MEMBER","body":"Thanks @jimczi Thx for the explanation on how we treat the query internally!  I am wondering if there's anything we can do from a user experience point of view.  Slowlogs are often used to identify what queries are being sent from the application.  So showing nulls instead of what the user provided may throw users off when analyzing slowlogs.  It will be helpful to document this behavior in the slowlog documentation.  Or are there too many other scenarios where we would show null after rewriting?  ","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/335869058","html_url":"https://github.com/elastic/elasticsearch/issues/26951#issuecomment-335869058","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26951","id":335869058,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTg2OTA1OA==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2017-10-11T16:32:17Z","updated_at":"2017-10-11T16:32:17Z","author_association":"MEMBER","body":"I think knowing where a query in the slow logs is coming from is best solved orthogonally to how the query is presented in the slow logs. Instead, we have been thinking about adding some metadata or allowing users to add metadata that would help them.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/335886162","html_url":"https://github.com/elastic/elasticsearch/issues/26951#issuecomment-335886162","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26951","id":335886162,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNTg4NjE2Mg==","user":{"login":"jimczi","id":15977469,"node_id":"MDQ6VXNlcjE1OTc3NDY5","avatar_url":"https://avatars0.githubusercontent.com/u/15977469?v=4","gravatar_id":"","url":"https://api.github.com/users/jimczi","html_url":"https://github.com/jimczi","followers_url":"https://api.github.com/users/jimczi/followers","following_url":"https://api.github.com/users/jimczi/following{/other_user}","gists_url":"https://api.github.com/users/jimczi/gists{/gist_id}","starred_url":"https://api.github.com/users/jimczi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jimczi/subscriptions","organizations_url":"https://api.github.com/users/jimczi/orgs","repos_url":"https://api.github.com/users/jimczi/repos","events_url":"https://api.github.com/users/jimczi/events{/privacy}","received_events_url":"https://api.github.com/users/jimczi/received_events","type":"User","site_admin":false},"created_at":"2017-10-11T17:29:45Z","updated_at":"2017-10-11T17:29:45Z","author_association":"MEMBER","body":"I agree with Jason, it would be simpler to associate metadata with a request that you can search in the slowlog directly.\r\nRelates to https://github.com/elastic/elasticsearch/issues/8547\r\n","performed_via_github_app":null}]