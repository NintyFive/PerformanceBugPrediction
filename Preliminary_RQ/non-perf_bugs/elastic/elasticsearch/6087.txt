{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/6087","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6087/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6087/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/6087/events","html_url":"https://github.com/elastic/elasticsearch/issues/6087","id":33033749,"node_id":"MDU6SXNzdWUzMzAzMzc0OQ==","number":6087,"title":"Docs suggest downloading GPG key over HTTP","user":{"login":"rboulton","id":73564,"node_id":"MDQ6VXNlcjczNTY0","avatar_url":"https://avatars2.githubusercontent.com/u/73564?v=4","gravatar_id":"","url":"https://api.github.com/users/rboulton","html_url":"https://github.com/rboulton","followers_url":"https://api.github.com/users/rboulton/followers","following_url":"https://api.github.com/users/rboulton/following{/other_user}","gists_url":"https://api.github.com/users/rboulton/gists{/gist_id}","starred_url":"https://api.github.com/users/rboulton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rboulton/subscriptions","organizations_url":"https://api.github.com/users/rboulton/orgs","repos_url":"https://api.github.com/users/rboulton/repos","events_url":"https://api.github.com/users/rboulton/events{/privacy}","received_events_url":"https://api.github.com/users/rboulton/received_events","type":"User","site_admin":false},"labels":[{"id":114977275,"node_id":"MDU6TGFiZWwxMTQ5NzcyNzU=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/:Delivery/Packaging","name":":Delivery/Packaging","color":"0e8a16","default":false,"description":"RPM and deb packaging, tar and zip archives, shell and batch scripts"},{"id":2495976472,"node_id":"MDU6TGFiZWwyNDk1OTc2NDcy","url":"https://api.github.com/repos/elastic/elasticsearch/labels/Team:Delivery","name":"Team:Delivery","color":"fef2c0","default":false,"description":"Meta label for Delivery team"},{"id":110815527,"node_id":"MDU6TGFiZWwxMTA4MTU1Mjc=","url":"https://api.github.com/repos/elastic/elasticsearch/labels/help%20wanted","name":"help wanted","color":"207de5","default":true,"description":"adoptme"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2014-05-07T23:15:18Z","updated_at":"2020-11-11T22:00:51Z","closed_at":"2014-12-30T18:18:29Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"tl;dr: please check the GPG key for downloading apt packages into the main elasticsearch repo, alongside the documentation on repositories.\n\nThe docs (at http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/setup-repositories.html ) suggest the following command to install the public GPG key for elasticsearch .deb packages:\n\n```\nwget -O - http://packages.elasticsearch.org/GPG-KEY-elasticsearch | apt-key add -\n```\n\nThis is insecure; the http transport is not valiated in any way, and the output from it is automatically trusted.  A man in the middle could use this to add his own GPG key instead of the official one, and would then be able to add arbitrary code to the packages subsequently downloaded, and have it trusted by the user's machine.  You shouldn't be suggesting that users run this command.\n\nIn the absence of moving to a key signing web-of-trust or similar, please make there be some way of obtaining the GPG key over HTTPS or some other relatively secure pathway.\n\nIdeally, you'd do this by making both the location the GPG key is downloaded from, and the documentation saying how to download it, be served over HTTPS (if you don't make the page with the instructions be served over HTTPS, an attacker can just change the instructions).  I suspect this is awkward to do, because you're serving the documentation directly from S3.  Therefore, a simpler solution would be to check the GPG key into the main repository: that way, users can browse the repository over github's HTTPS connections, and download the key over the same HTTPS connections.\n","closed_by":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"performed_via_github_app":null}