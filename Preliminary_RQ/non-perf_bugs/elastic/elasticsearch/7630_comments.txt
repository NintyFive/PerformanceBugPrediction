[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54735759","html_url":"https://github.com/elastic/elasticsearch/issues/7630#issuecomment-54735759","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7630","id":54735759,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzM1NzU5","user":{"login":"drewr","id":6202,"node_id":"MDQ6VXNlcjYyMDI=","avatar_url":"https://avatars3.githubusercontent.com/u/6202?v=4","gravatar_id":"","url":"https://api.github.com/users/drewr","html_url":"https://github.com/drewr","followers_url":"https://api.github.com/users/drewr/followers","following_url":"https://api.github.com/users/drewr/following{/other_user}","gists_url":"https://api.github.com/users/drewr/gists{/gist_id}","starred_url":"https://api.github.com/users/drewr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drewr/subscriptions","organizations_url":"https://api.github.com/users/drewr/orgs","repos_url":"https://api.github.com/users/drewr/repos","events_url":"https://api.github.com/users/drewr/events{/privacy}","received_events_url":"https://api.github.com/users/drewr/received_events","type":"User","site_admin":false},"created_at":"2014-09-07T03:02:16Z","updated_at":"2014-09-07T03:02:16Z","author_association":"MEMBER","body":"I should have written _may_ be even faster.  Did you test it?  Curious if that was indeed the case for you.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54739114","html_url":"https://github.com/elastic/elasticsearch/issues/7630#issuecomment-54739114","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7630","id":54739114,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzM5MTE0","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-09-07T06:49:19Z","updated_at":"2014-09-07T06:49:19Z","author_association":"CONTRIBUTOR","body":"+1\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/54740653","html_url":"https://github.com/elastic/elasticsearch/issues/7630#issuecomment-54740653","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7630","id":54740653,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzQwNjUz","user":{"login":"avleen","id":539525,"node_id":"MDQ6VXNlcjUzOTUyNQ==","avatar_url":"https://avatars1.githubusercontent.com/u/539525?v=4","gravatar_id":"","url":"https://api.github.com/users/avleen","html_url":"https://github.com/avleen","followers_url":"https://api.github.com/users/avleen/followers","following_url":"https://api.github.com/users/avleen/following{/other_user}","gists_url":"https://api.github.com/users/avleen/gists{/gist_id}","starred_url":"https://api.github.com/users/avleen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/avleen/subscriptions","organizations_url":"https://api.github.com/users/avleen/orgs","repos_url":"https://api.github.com/users/avleen/repos","events_url":"https://api.github.com/users/avleen/events{/privacy}","received_events_url":"https://api.github.com/users/avleen/received_events","type":"User","site_admin":false},"created_at":"2014-09-07T08:23:00Z","updated_at":"2014-09-07T08:23:00Z","author_association":"NONE","body":"Always more than happy to do benchmarks! I should have done one before opening this issue.\nBut now we have something for future googlers!\n\nA simple query, on cached/hot data:  `type:access_logs`:\nsize=0:\n`( for i in $( seq 1 100 ); do; curl -s  > /dev/null; done; )  0.17s user 0.32s system 1% cpu 46.681 total`\n\nsearch_type=count:\n`( for i in $( seq 1 100 ); do; curl -s  > /dev/null; done; )  0.15s user 0.34s system 1% cpu 45.664 total`\n\nRan each test 3 times, took the middle result. Basically, no difference.\n\nI tried with some more complex queries. The difference between the two was always negligible.\nEven on cold data, the requests took longer but the difference was pretty much nothing.\n\nWhich leads me to wonder: In which situations SHOULD search_type=count be faster?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/63120927","html_url":"https://github.com/elastic/elasticsearch/issues/7630#issuecomment-63120927","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7630","id":63120927,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMTIwOTI3","user":{"login":"gsastry","id":369096,"node_id":"MDQ6VXNlcjM2OTA5Ng==","avatar_url":"https://avatars1.githubusercontent.com/u/369096?v=4","gravatar_id":"","url":"https://api.github.com/users/gsastry","html_url":"https://github.com/gsastry","followers_url":"https://api.github.com/users/gsastry/followers","following_url":"https://api.github.com/users/gsastry/following{/other_user}","gists_url":"https://api.github.com/users/gsastry/gists{/gist_id}","starred_url":"https://api.github.com/users/gsastry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gsastry/subscriptions","organizations_url":"https://api.github.com/users/gsastry/orgs","repos_url":"https://api.github.com/users/gsastry/repos","events_url":"https://api.github.com/users/gsastry/events{/privacy}","received_events_url":"https://api.github.com/users/gsastry/received_events","type":"User","site_admin":false},"created_at":"2014-11-14T20:01:16Z","updated_at":"2014-11-14T20:01:16Z","author_association":"NONE","body":"I'm seeing similar results in my tests. Does anyone have an explanation of the performance characteristics of `search_type=count` vs setting `size=0`?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/69906207","html_url":"https://github.com/elastic/elasticsearch/issues/7630#issuecomment-69906207","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/7630","id":69906207,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTA2MjA3","user":{"login":"jpountz","id":299848,"node_id":"MDQ6VXNlcjI5OTg0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/299848?v=4","gravatar_id":"","url":"https://api.github.com/users/jpountz","html_url":"https://github.com/jpountz","followers_url":"https://api.github.com/users/jpountz/followers","following_url":"https://api.github.com/users/jpountz/following{/other_user}","gists_url":"https://api.github.com/users/jpountz/gists{/gist_id}","starred_url":"https://api.github.com/users/jpountz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpountz/subscriptions","organizations_url":"https://api.github.com/users/jpountz/orgs","repos_url":"https://api.github.com/users/jpountz/repos","events_url":"https://api.github.com/users/jpountz/events{/privacy}","received_events_url":"https://api.github.com/users/jpountz/received_events","type":"User","site_admin":false},"created_at":"2015-01-14T11:56:33Z","updated_at":"2015-01-14T11:56:33Z","author_association":"CONTRIBUTOR","body":"As far as I know `size=0` only has one drawback compared to `search_type=count`, which is that the search contexts are released in a second round-trip to all shards, while the `count` search type always releases the context at the end of the query phase. If the link between the machines is good, this second round-trip is super fast, which would explain why you did not see any difference.\n\nBut I agree we should merge the two. Having two ways to do the same thing is confusing (especially given that they're not equivalent).\n\nA more pernicious difference is that some features like the shard query cache are only enabled with the `count` search type.\n","performed_via_github_app":null}]