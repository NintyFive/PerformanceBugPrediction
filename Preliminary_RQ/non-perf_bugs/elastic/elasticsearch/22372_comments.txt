[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/269777610","html_url":"https://github.com/elastic/elasticsearch/issues/22372#issuecomment-269777610","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22372","id":269777610,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTc3NzYxMA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-12-30T14:29:30Z","updated_at":"2016-12-30T14:29:30Z","author_association":"CONTRIBUTOR","body":"I believe this to be a json encoding issue. Because the script and the error response are both encoded in json the `\\\\` becomes `\\` on the way in and the `\\` in the error message become `\\\\` on the way out. Can you try something like `\\\\\\\\` to get a literal `\\` in a string? That'd get transformed by json parsing to `\\\\` and then the painless lexing should interpret that as a `\\`.\r\n\r\nStill, I think it be worth me adding an example of this to painless's docs as we expect lots of folks to use the script inline. And probably to fix up the error message for illegal `\\` sequences to mention something about json encoding.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/269777818","html_url":"https://github.com/elastic/elasticsearch/issues/22372#issuecomment-269777818","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22372","id":269777818,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTc3NzgxOA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-12-30T14:31:44Z","updated_at":"2016-12-30T14:31:44Z","author_association":"CONTRIBUTOR","body":"I just tried this locally and `\\\\\\\\` seems to work. This two layers of escaping thing is giving me nasty flashbacks to writing shell scripts....","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/269778637","html_url":"https://github.com/elastic/elasticsearch/issues/22372#issuecomment-269778637","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22372","id":269778637,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTc3ODYzNw==","user":{"login":"Dom-nik","id":3912570,"node_id":"MDQ6VXNlcjM5MTI1NzA=","avatar_url":"https://avatars1.githubusercontent.com/u/3912570?v=4","gravatar_id":"","url":"https://api.github.com/users/Dom-nik","html_url":"https://github.com/Dom-nik","followers_url":"https://api.github.com/users/Dom-nik/followers","following_url":"https://api.github.com/users/Dom-nik/following{/other_user}","gists_url":"https://api.github.com/users/Dom-nik/gists{/gist_id}","starred_url":"https://api.github.com/users/Dom-nik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Dom-nik/subscriptions","organizations_url":"https://api.github.com/users/Dom-nik/orgs","repos_url":"https://api.github.com/users/Dom-nik/repos","events_url":"https://api.github.com/users/Dom-nik/events{/privacy}","received_events_url":"https://api.github.com/users/Dom-nik/received_events","type":"User","site_admin":false},"created_at":"2016-12-30T14:39:38Z","updated_at":"2016-12-30T14:39:38Z","author_association":"NONE","body":"Hi, thanks for picking this up!\r\n\r\nI've tested `\\\\\\\\` and it works (runs without errors), but the comparison `doc['Status.keyword'].value == '\\\\\\\\Archived'` doesn't work as planned, i.e. it skips the values `'\\\\Archived'`.\r\n\r\nI got a very similar problem in Logstash and actually had to modfiy a filter plugin code to make it accept and parse similar values: https://github.com/logstash-plugins/logstash-filter-elasticsearch/issues/55","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/269778704","html_url":"https://github.com/elastic/elasticsearch/issues/22372#issuecomment-269778704","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22372","id":269778704,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTc3ODcwNA==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-12-30T14:40:20Z","updated_at":"2016-12-30T14:40:20Z","author_association":"CONTRIBUTOR","body":"Let me play with it some more....","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/269784323","html_url":"https://github.com/elastic/elasticsearch/issues/22372#issuecomment-269784323","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22372","id":269784323,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTc4NDMyMw==","user":{"login":"nik9000","id":215970,"node_id":"MDQ6VXNlcjIxNTk3MA==","avatar_url":"https://avatars2.githubusercontent.com/u/215970?v=4","gravatar_id":"","url":"https://api.github.com/users/nik9000","html_url":"https://github.com/nik9000","followers_url":"https://api.github.com/users/nik9000/followers","following_url":"https://api.github.com/users/nik9000/following{/other_user}","gists_url":"https://api.github.com/users/nik9000/gists{/gist_id}","starred_url":"https://api.github.com/users/nik9000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nik9000/subscriptions","organizations_url":"https://api.github.com/users/nik9000/orgs","repos_url":"https://api.github.com/users/nik9000/repos","events_url":"https://api.github.com/users/nik9000/events{/privacy}","received_events_url":"https://api.github.com/users/nik9000/received_events","type":"User","site_admin":false},"created_at":"2016-12-30T15:30:01Z","updated_at":"2016-12-30T15:30:01Z","author_association":"CONTRIBUTOR","body":"Looks like a bug, yeah. I reproduced the problem you are having over REST and now in a unit test. I suspect you can work around it for now with `'\\\\\\\\Archived'.substring(1)`. I'll see about opening up a PR to fix it.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/269785061","html_url":"https://github.com/elastic/elasticsearch/issues/22372#issuecomment-269785061","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/22372","id":269785061,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTc4NTA2MQ==","user":{"login":"Dom-nik","id":3912570,"node_id":"MDQ6VXNlcjM5MTI1NzA=","avatar_url":"https://avatars1.githubusercontent.com/u/3912570?v=4","gravatar_id":"","url":"https://api.github.com/users/Dom-nik","html_url":"https://github.com/Dom-nik","followers_url":"https://api.github.com/users/Dom-nik/followers","following_url":"https://api.github.com/users/Dom-nik/following{/other_user}","gists_url":"https://api.github.com/users/Dom-nik/gists{/gist_id}","starred_url":"https://api.github.com/users/Dom-nik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Dom-nik/subscriptions","organizations_url":"https://api.github.com/users/Dom-nik/orgs","repos_url":"https://api.github.com/users/Dom-nik/repos","events_url":"https://api.github.com/users/Dom-nik/events{/privacy}","received_events_url":"https://api.github.com/users/Dom-nik/received_events","type":"User","site_admin":false},"created_at":"2016-12-30T15:37:00Z","updated_at":"2016-12-30T15:37:00Z","author_association":"NONE","body":"Thanks for confirming this and taking time to check!","performed_via_github_app":null}]