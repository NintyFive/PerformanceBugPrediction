[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/146838237","html_url":"https://github.com/elastic/elasticsearch/issues/14045#issuecomment-146838237","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14045","id":146838237,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NjgzODIzNw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2015-10-09T11:22:43Z","updated_at":"2015-10-09T11:22:43Z","author_association":"MEMBER","body":"Can you confirm that you are attempting this with `_bond0` instead of `_bond0_` (it should be the latter)? If so, would you be able to try `_bond0_`?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/146857850","html_url":"https://github.com/elastic/elasticsearch/issues/14045#issuecomment-146857850","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14045","id":146857850,"node_id":"MDEyOklzc3VlQ29tbWVudDE0Njg1Nzg1MA==","user":{"login":"ozlevka","id":1323974,"node_id":"MDQ6VXNlcjEzMjM5NzQ=","avatar_url":"https://avatars2.githubusercontent.com/u/1323974?v=4","gravatar_id":"","url":"https://api.github.com/users/ozlevka","html_url":"https://github.com/ozlevka","followers_url":"https://api.github.com/users/ozlevka/followers","following_url":"https://api.github.com/users/ozlevka/following{/other_user}","gists_url":"https://api.github.com/users/ozlevka/gists{/gist_id}","starred_url":"https://api.github.com/users/ozlevka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ozlevka/subscriptions","organizations_url":"https://api.github.com/users/ozlevka/orgs","repos_url":"https://api.github.com/users/ozlevka/repos","events_url":"https://api.github.com/users/ozlevka/events{/privacy}","received_events_url":"https://api.github.com/users/ozlevka/received_events","type":"User","site_admin":false},"created_at":"2015-10-09T12:44:27Z","updated_at":"2015-10-09T12:44:27Z","author_association":"NONE","body":"Sorry, this is only printing mistake. Of course we use _bond0_ as parameter.\nIf it can help we use version 1.4.4, but I not find some different between\n1.4.4 and current stable version.\n\nOn Fri, Oct 9, 2015 at 2:23 PM, Jason Tedor notifications@github.com\nwrote:\n\n> Can you confirm that you are attempting this with _bond0 instead of\n> _bond0_ (it should be the latter)? If so, would you be able to try _bond0_\n> ?\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/elastic/elasticsearch/issues/14045#issuecomment-146838237\n> .\n\n## \n\nBest regards\nOzeryansky Lev\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/147632054","html_url":"https://github.com/elastic/elasticsearch/issues/14045#issuecomment-147632054","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14045","id":147632054,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NzYzMjA1NA==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-10-13T07:42:40Z","updated_at":"2015-10-13T07:42:40Z","author_association":"CONTRIBUTOR","body":"Hi @ozlevka \n\nThe networking binding code has been extensively rewritten in 2.0.  Could you try the 2.0.0-rc1 release and see if it suffers from the same problem please?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/147906543","html_url":"https://github.com/elastic/elasticsearch/issues/14045#issuecomment-147906543","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14045","id":147906543,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NzkwNjU0Mw==","user":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"created_at":"2015-10-14T02:33:33Z","updated_at":"2015-10-14T02:36:29Z","author_association":"MEMBER","body":"@ozlevka I setup a CentOS installation with a bonded interface and Elasticsearch 1.4.4, and I'm not able to reproduce into the issue that you describe.\n\n```\n$ ifconfig bond0\nbond0     Link encap:Ethernet  HWaddr 08:00:27:6B:E2:E2\n          inet addr:192.168.33.12  Bcast:192.168.33.255  Mask:255.255.255.0\n          inet6 addr: fe80::a00:27ff:feff:1c2a/64 Scope:Link\n          UP BROADCAST RUNNING MASTER MULTICAST  MTU:1500  Metric:1\n          RX packets:15 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:31 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0\n          RX bytes:918 (918.0 b)  TX bytes:2382 (2.3 KiB)\n```\n\nThe bonding status:\n\n```\n$ cat /proc/net/bonding/bond0\nEthernet Channel Bonding Driver: v3.7.1 (April 27, 2011)\n\nBonding Mode: fault-tolerance (active-backup) (fail_over_mac active)\nPrimary Slave: None\nCurrently Active Slave: eth3\nMII Status: up\nMII Polling Interval (ms): 100\nUp Delay (ms): 200\nDown Delay (ms): 200\n\nSlave Interface: eth3\nMII Status: up\nSpeed: 1000 Mbps\nDuplex: full\nLink Failure Count: 0\nPermanent HW addr: 08:00:27:6b:e2:e2\nSlave queue ID: 0\n\nSlave Interface: eth2\nMII Status: up\nSpeed: 1000 Mbps\nDuplex: full\nLink Failure Count: 0\nPermanent HW addr: 08:00:27:ff:1c:2a\nSlave queue ID: 0\n```\n\nThe only change that I made to the default configuration is:\n\n```\n$ cat /etc/elasticsearch/elasticsearch.yml | grep network.host\nnetwork.host: _bond0_\n```\n\nand I forced IPv4 by adding \n\n```\nES_JAVA_OPTS=\"-Djava.net.preferIPv4Stack=true\"\n```\n\nto `/etc/sysconfig/elasticsearch`.\n\nFrom the startup logs:\n\n```\n[2015-10-13 22:49:25,150][INFO ][transport                ] [Quentin Quire] bound_address {inet[/192.168.33.12:9300]}, publish_address {inet[/192.168.33.12:9300]}\n[2015-10-13 22:49:25,200][INFO ][discovery                ] [Quentin Quire] elasticsearch/f8-Z5kcKQsaz5uRImrXB8g\n[2015-10-13 22:49:29,009][INFO ][cluster.service          ] [Quentin Quire] new_master [Quentin Quire][f8-Z5kcKQsaz5uRImrXB8g][localhost][inet[/192.168.33.12:9300]], reason: zen-disco-join (elected_as_master)\n[2015-10-13 22:49:29,048][INFO ][http                     ] [Quentin Quire] bound_address {inet[/192.168.33.12:9200]}, publish_address {inet[/192.168.33.12:9200]}\n```\n\nAnd:\n\n```\n  $ curl -XGET 192.168.33.12:9200\n  {\n    \"status\" : 200,\n    \"name\" : \"Quentin Quire\",\n    \"cluster_name\" : \"elasticsearch\",\n    \"version\" : {\n      \"number\" : \"1.4.4\",\n      \"build_hash\" : \"c88f77ffc81301dfa9dfd81ca2232f09588bd512\",\n      \"build_timestamp\" : \"2015-02-19T13:05:36Z\",\n      \"build_snapshot\" : false,\n      \"lucene_version\" : \"4.10.3\"\n    },\n    \"tagline\" : \"You Know, for Search\"\n  }\n```\n\nAs for a get on `_nodes` returning a `primary_interface` of `eth2` on your box, ignore that; that is due to the Sigar library that this depends on and is happening outside of Elasticsearch; it does not mean that Elasticsearch is even using this interface at all. As of Elasticsearch 2.0, we no longer rely on this library and do not even report this information in the `_nodes` endpoint any more.\n\nSo, where this leaves us is that we're not concerned by the `primary_interface` reporting, and we are not able to reproduce the issue that you describe. If you're able to provide additional information that will help us reproduce the issue, we would be happy to investigate further. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148313369","html_url":"https://github.com/elastic/elasticsearch/issues/14045#issuecomment-148313369","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14045","id":148313369,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODMxMzM2OQ==","user":{"login":"ozlevka","id":1323974,"node_id":"MDQ6VXNlcjEzMjM5NzQ=","avatar_url":"https://avatars2.githubusercontent.com/u/1323974?v=4","gravatar_id":"","url":"https://api.github.com/users/ozlevka","html_url":"https://github.com/ozlevka","followers_url":"https://api.github.com/users/ozlevka/followers","following_url":"https://api.github.com/users/ozlevka/following{/other_user}","gists_url":"https://api.github.com/users/ozlevka/gists{/gist_id}","starred_url":"https://api.github.com/users/ozlevka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ozlevka/subscriptions","organizations_url":"https://api.github.com/users/ozlevka/orgs","repos_url":"https://api.github.com/users/ozlevka/repos","events_url":"https://api.github.com/users/ozlevka/events{/privacy}","received_events_url":"https://api.github.com/users/ozlevka/received_events","type":"User","site_admin":false},"created_at":"2015-10-15T08:12:01Z","updated_at":"2015-10-15T08:12:01Z","author_association":"NONE","body":"I'll ask system team when I can process upgrade. I think we can wait to GA\nversion of 2.0\n\nThank you\n\nOn Tue, Oct 13, 2015 at 10:43 AM, Clinton Gormley notifications@github.com\nwrote:\n\n> Hi @ozlevka https://github.com/ozlevka\n> \n> The networking binding code has been extensively rewritten in 2.0. Could\n> you try the 2.0.0-rc1 release and see if it suffers from the same problem\n> please?\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/elastic/elasticsearch/issues/14045#issuecomment-147632054\n> .\n\n## \n\nBest regards\nOzeryansky Lev\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/148313985","html_url":"https://github.com/elastic/elasticsearch/issues/14045#issuecomment-148313985","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/14045","id":148313985,"node_id":"MDEyOklzc3VlQ29tbWVudDE0ODMxMzk4NQ==","user":{"login":"ozlevka","id":1323974,"node_id":"MDQ6VXNlcjEzMjM5NzQ=","avatar_url":"https://avatars2.githubusercontent.com/u/1323974?v=4","gravatar_id":"","url":"https://api.github.com/users/ozlevka","html_url":"https://github.com/ozlevka","followers_url":"https://api.github.com/users/ozlevka/followers","following_url":"https://api.github.com/users/ozlevka/following{/other_user}","gists_url":"https://api.github.com/users/ozlevka/gists{/gist_id}","starred_url":"https://api.github.com/users/ozlevka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ozlevka/subscriptions","organizations_url":"https://api.github.com/users/ozlevka/orgs","repos_url":"https://api.github.com/users/ozlevka/repos","events_url":"https://api.github.com/users/ozlevka/events{/privacy}","received_events_url":"https://api.github.com/users/ozlevka/received_events","type":"User","site_admin":false},"created_at":"2015-10-15T08:14:08Z","updated_at":"2015-10-15T08:14:08Z","author_association":"NONE","body":"Thank you Jason\nAbout: \"get on _nodes returning a primary_interface of eth2 on your box,\nignore that\". This is exactly what we do.\nI hope it's will be fixed in 2.0 GA version.\n\nThank you\n\nOn Wed, Oct 14, 2015 at 5:34 AM, Jason Tedor notifications@github.com\nwrote:\n\n> @ozlevka https://github.com/ozlevka I setup a CentOS installation with\n> a bonded interface and Elasticsearch 1.4.4, and I'm not able to reproduce\n> into the issue that you describe.\n> \n> [vagrant@localhost ~]$ ifconfig bond0\n> bond0     Link encap:Ethernet  HWaddr 08:00:27:6B:E2:E2\n>           inet addr:192.168.33.12  Bcast:192.168.33.255  Mask:255.255.255.0\n>           inet6 addr: fe80::a00:27ff:feff:1c2a/64 Scope:Link\n>           UP BROADCAST RUNNING MASTER MULTICAST  MTU:1500  Metric:1\n>           RX packets:15 errors:0 dropped:0 overruns:0 frame:0\n>           TX packets:31 errors:0 dropped:0 overruns:0 carrier:0\n>           collisions:0 txqueuelen:0\n>           RX bytes:918 (918.0 b)  TX bytes:2382 (2.3 KiB)\n> \n> The bonding status:\n> \n> [vagrant@localhost ~]$ cat /proc/net/bonding/bond0\n> Ethernet Channel Bonding Driver: v3.7.1 (April 27, 2011)\n> \n> Bonding Mode: fault-tolerance (active-backup) (fail_over_mac active)\n> Primary Slave: None\n> Currently Active Slave: eth3\n> MII Status: up\n> MII Polling Interval (ms): 100\n> Up Delay (ms): 200\n> Down Delay (ms): 200\n> \n> Slave Interface: eth3\n> MII Status: up\n> Speed: 1000 Mbps\n> Duplex: full\n> Link Failure Count: 0\n> Permanent HW addr: 08:00:27:6b:e2:e2\n> Slave queue ID: 0\n> \n> Slave Interface: eth2\n> MII Status: up\n> Speed: 1000 Mbps\n> Duplex: full\n> Link Failure Count: 0\n> Permanent HW addr: 08:00:27:ff:1c:2a\n> Slave queue ID: 0\n> \n> The only change that I made to the default configuration is:\n> \n> [vagrant@localhost ~]$ cat /etc/elasticsearch/elasticsearch.yml | grep network.host\n> network.host: _bond0_\n> \n> and I forced IPv4 by adding\n> \n> ES_JAVA_OPTS=\"-Djava.net.preferIPv4Stack=true\"\n> \n> to /etc/sysconfig/elasticsearch.\n> \n> From the startup logs:\n> \n> [2015-10-13 22:49:25,150][INFO ][transport                ] [Quentin Quire] bound_address {inet[/192.168.33.12:9300]}, publish_address {inet[/192.168.33.12:9300]}\n> [2015-10-13 22:49:25,200][INFO ][discovery                ] [Quentin Quire] elasticsearch/f8-Z5kcKQsaz5uRImrXB8g\n> [2015-10-13 22:49:29,009][INFO ][cluster.service          ] [Quentin Quire] new_master [Quentin Quire][f8-Z5kcKQsaz5uRImrXB8g][localhost][inet[/192.168.33.12:9300]], reason: zen-disco-join (elected_as_master)\n> [2015-10-13 22:49:29,048][INFO ][http                     ] [Quentin Quire] bound_address {inet[/192.168.33.12:9200]}, publish_address {inet[/192.168.33.12:9200]}\n> \n> And:\n> \n>   [vagrant@localhost ~]$ curl -XGET 192.168.33.12:9200\n>   {\n>     \"status\" : 200,\n>     \"name\" : \"Quentin Quire\",\n>     \"cluster_name\" : \"elasticsearch\",\n>     \"version\" : {\n>       \"number\" : \"1.4.4\",\n>       \"build_hash\" : \"c88f77ffc81301dfa9dfd81ca2232f09588bd512\",\n>       \"build_timestamp\" : \"2015-02-19T13:05:36Z\",\n>       \"build_snapshot\" : false,\n>       \"lucene_version\" : \"4.10.3\"\n>     },\n>     \"tagline\" : \"You Know, for Search\"\n>   }\n> \n> As for a get on _nodes returning a primary_interface of eth2 on your box,\n> ignore that; that is due ot the Sigar library that this depends on and is\n> happening outside of Elasticsearch; it does not mean that Elasticsearch is\n> even using this interface at all.\n> \n> So, where this leaves us is that we're not concerned by the\n> primary_interface reporting, and we are not able to reproduce the issue\n> that you describe. If you're able to provide additional information that\n> will help us reproduce the issue, we would be happy to investigate further.\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/elastic/elasticsearch/issues/14045#issuecomment-147906543\n> .\n\n## \n\nBest regards\nOzeryansky Lev\n","performed_via_github_app":null}]