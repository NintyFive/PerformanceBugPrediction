[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/161766539","html_url":"https://github.com/elastic/elasticsearch/issues/9352#issuecomment-161766539","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9352","id":161766539,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MTc2NjUzOQ==","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2015-12-03T20:00:35Z","updated_at":"2015-12-03T20:00:35Z","author_association":"CONTRIBUTOR","body":"There has been no further support shown for this ticket in almost a year.  Rereading it it feels like an edge case that would introduce a lot of complexity to an already complex query, so I'm going to close it.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/182406519","html_url":"https://github.com/elastic/elasticsearch/issues/9352#issuecomment-182406519","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/9352","id":182406519,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MjQwNjUxOQ==","user":{"login":"aadmathijssen","id":3796971,"node_id":"MDQ6VXNlcjM3OTY5NzE=","avatar_url":"https://avatars0.githubusercontent.com/u/3796971?v=4","gravatar_id":"","url":"https://api.github.com/users/aadmathijssen","html_url":"https://github.com/aadmathijssen","followers_url":"https://api.github.com/users/aadmathijssen/followers","following_url":"https://api.github.com/users/aadmathijssen/following{/other_user}","gists_url":"https://api.github.com/users/aadmathijssen/gists{/gist_id}","starred_url":"https://api.github.com/users/aadmathijssen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aadmathijssen/subscriptions","organizations_url":"https://api.github.com/users/aadmathijssen/orgs","repos_url":"https://api.github.com/users/aadmathijssen/repos","events_url":"https://api.github.com/users/aadmathijssen/events{/privacy}","received_events_url":"https://api.github.com/users/aadmathijssen/received_events","type":"User","site_admin":false},"created_at":"2016-02-10T14:54:19Z","updated_at":"2016-02-10T14:55:04Z","author_association":"NONE","body":"I needed this feature as well, in my case to combine a negative score with a positive score. The way they should be combined is that the resulting score is between the negative score and 1; the higher the positive score, the more it should approach 1.\n\nA function that can be used for this is the following, where `ns` represents the negative score and `ps` the positive score:\n\n```\nps^2 / (ps^2 + (1/ns) - 1)\n```\n\nThe only way I can see how this could be added to the Elasticsearch instances, is by adding a server-side script. The downside of this is that the function score queries for obtaining the negative and positive scores should also be encoded inside the script. Also, this introduces the problem of deploying this script to each Elasticsearch instance and updating it whenever the logic changes. \n\nAs a workaround, I have moved the calculation, and the logic to determine whether the negative and/or positive score applies as well, to the application code. The result of the calculation is then added as a  separate field to each document, and field value factor is used to apply the factor in this field to the score. This is not ideal situation, because it requires a full reindex whenever the negative or positive score is changed.\n","performed_via_github_app":null}]