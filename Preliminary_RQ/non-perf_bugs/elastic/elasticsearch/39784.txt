{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/39784","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39784/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39784/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/39784/events","html_url":"https://github.com/elastic/elasticsearch/issues/39784","id":418202951,"node_id":"MDU6SXNzdWU0MTgyMDI5NTE=","number":39784,"title":"Cannot start Elasticsearch 6.6.1 as a Windows service","user":{"login":"glucaci","id":13761704,"node_id":"MDQ6VXNlcjEzNzYxNzA0","avatar_url":"https://avatars1.githubusercontent.com/u/13761704?v=4","gravatar_id":"","url":"https://api.github.com/users/glucaci","html_url":"https://github.com/glucaci","followers_url":"https://api.github.com/users/glucaci/followers","following_url":"https://api.github.com/users/glucaci/following{/other_user}","gists_url":"https://api.github.com/users/glucaci/gists{/gist_id}","starred_url":"https://api.github.com/users/glucaci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glucaci/subscriptions","organizations_url":"https://api.github.com/users/glucaci/orgs","repos_url":"https://api.github.com/users/glucaci/repos","events_url":"https://api.github.com/users/glucaci/events{/privacy}","received_events_url":"https://api.github.com/users/glucaci/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-03-07T09:15:55Z","updated_at":"2020-01-12T17:58:34Z","closed_at":"2019-03-07T12:12:40Z","author_association":"NONE","active_lock_reason":null,"body":"Elasticsearch version 6.6.1-oss installed from .zip on Windows Server 2016 Datacenter 10.0.14393 / 56GB RAM\r\n\r\n`JAVA_HOME` is set as System Variable\r\n```\r\nelasticsearch-service.bat install\r\n\r\nInstalling service      :  \"elasticsearch-service-x64\"\r\nUsing JAVA_HOME (64-bit):  \"C:\\Program Files\\Java\\jdk-11.0.2\"\r\n-XX:+UseConcMarkSweepGC;-XX:CMSInitiatingOccupancyFraction=75;-XX:+UseCMSInitiatingOccupancyOnly;-XX:+AlwaysPreTouch;-server;-Xss1m;-Djava.awt.headless=true;-Dfile.encoding=UTF-8;-Djna.nosys=true;-Djdk.io.permissionsUseCanonicalPath=true;-Dio.netty.noUnsafe=true;-Dio.netty.noKeySetOptimization=true;-Dio.netty.recycler.maxCapacityPerThread=0;-Dlog4j.shutdownHookEnabled=false;-Dlog4j2.disable.jmx=true;-Dlog4j.skipJansi=true;-XX:+HeapDumpOnOutOfMemoryError;-Xmx14336m;-Xms14336m\r\nThe service 'elasticsearch-service-x64' has been installed.\r\n```\r\nLogs after `elasticsearch-service.bat start`\r\n```\r\n[2019-02-22 21:10:10] [info]  [21880] Commons Daemon procrun (1.1.0.0 64-bit) started\r\n[2019-02-22 21:10:10] [info]  [21880] Running 'elasticsearch-service-x64' Service...\r\n[2019-02-22 21:10:10] [info]  [19200] Starting service...\r\n[2019-02-22 21:10:10] [error] [13880] CreateJavaVM Failed\r\n[2019-02-22 21:10:10] [error] [13880] The system cannot find the file specified.\r\n[2019-02-22 21:10:10] [error] [19200] Failed to start Java\r\n[2019-02-22 21:10:10] [error] [19200] ServiceStart returned 4\r\n[2019-02-22 21:10:10] [info]  [21880] Run service finished.\r\n[2019-02-22 21:10:10] [info]  [21880] Commons Daemon procrun finished\r\n```\r\nStderr and stdout has no aditional information.\r\n\r\n\r\nJava options from `elasticsearch-service.bat manager`\r\n```\r\n-XX:+UseConcMarkSweepGC\r\n-XX:CMSInitiatingOccupancyFraction=75\r\n-XX:+UseCMSInitiatingOccupancyOnly\r\n-XX:+AlwaysPreTouch\r\n-server\r\n-Xss1m\r\n-Djava.awt.headless=true\r\n-Dfile.encoding=UTF-8\r\n-Djna.nosys=true\r\n-Djdk.io.permissionsUseCanonicalPath=true\r\n-Dio.netty.noUnsafe=true\r\n-Dio.netty.noKeySetOptimization=true\r\n-Dio.netty.recycler.maxCapacityPerThread=0\r\n-Dlog4j.shutdownHookEnabled=false\r\n-Dlog4j2.disable.jmx=true\r\n-Dlog4j.skipJansi=true\r\n-XX:+HeapDumpOnOutOfMemoryError\r\n-Xmx14336m\r\n-Xms14336m\r\n-Delasticsearch\r\n-Des.path.home=c:\\elasticsearch-6.6.1\r\n-Des.path.conf=E:\\ElasticConfig\r\n-Des.distribution.flavor=oss\r\n-Des.distribution.type=zip\r\n```\r\n\r\nIf i start `bin\\elasticsearch.bat` from comand line is working. \r\nBefore I installed the full version (6.6.1) also from .zip and had no problem.\r\n\r\n_Originally posted by @glucaci in https://github.com/elastic/elasticsearch/issues/21917#issuecomment-466553905_","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}