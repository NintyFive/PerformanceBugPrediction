[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/640457542","html_url":"https://github.com/elastic/elasticsearch/issues/57794#issuecomment-640457542","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57794","id":640457542,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MDQ1NzU0Mg==","user":{"login":"elasticmachine","id":15837671,"node_id":"MDQ6VXNlcjE1ODM3Njcx","avatar_url":"https://avatars3.githubusercontent.com/u/15837671?v=4","gravatar_id":"","url":"https://api.github.com/users/elasticmachine","html_url":"https://github.com/elasticmachine","followers_url":"https://api.github.com/users/elasticmachine/followers","following_url":"https://api.github.com/users/elasticmachine/following{/other_user}","gists_url":"https://api.github.com/users/elasticmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/elasticmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elasticmachine/subscriptions","organizations_url":"https://api.github.com/users/elasticmachine/orgs","repos_url":"https://api.github.com/users/elasticmachine/repos","events_url":"https://api.github.com/users/elasticmachine/events{/privacy}","received_events_url":"https://api.github.com/users/elasticmachine/received_events","type":"User","site_admin":false},"created_at":"2020-06-08T08:39:12Z","updated_at":"2020-06-08T08:39:12Z","author_association":"COLLABORATOR","body":"Pinging @elastic/es-distributed (:Distributed/Snapshot/Restore)","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/640458706","html_url":"https://github.com/elastic/elasticsearch/issues/57794#issuecomment-640458706","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57794","id":640458706,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MDQ1ODcwNg==","user":{"login":"original-brownbear","id":6490959,"node_id":"MDQ6VXNlcjY0OTA5NTk=","avatar_url":"https://avatars0.githubusercontent.com/u/6490959?v=4","gravatar_id":"","url":"https://api.github.com/users/original-brownbear","html_url":"https://github.com/original-brownbear","followers_url":"https://api.github.com/users/original-brownbear/followers","following_url":"https://api.github.com/users/original-brownbear/following{/other_user}","gists_url":"https://api.github.com/users/original-brownbear/gists{/gist_id}","starred_url":"https://api.github.com/users/original-brownbear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/original-brownbear/subscriptions","organizations_url":"https://api.github.com/users/original-brownbear/orgs","repos_url":"https://api.github.com/users/original-brownbear/repos","events_url":"https://api.github.com/users/original-brownbear/events{/privacy}","received_events_url":"https://api.github.com/users/original-brownbear/received_events","type":"User","site_admin":false},"created_at":"2020-06-08T08:41:11Z","updated_at":"2020-06-08T08:41:11Z","author_association":"MEMBER","body":"Hi @ebuildy \r\n\r\n>  I found the error is because AWS have a connection pool and always reuse the connection.\r\n\r\nI'm not sure I understand the motivation here, why would having pooled connections be an issue?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/640461824","html_url":"https://github.com/elastic/elasticsearch/issues/57794#issuecomment-640461824","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57794","id":640461824,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MDQ2MTgyNA==","user":{"login":"ebuildy","id":1219817,"node_id":"MDQ6VXNlcjEyMTk4MTc=","avatar_url":"https://avatars0.githubusercontent.com/u/1219817?v=4","gravatar_id":"","url":"https://api.github.com/users/ebuildy","html_url":"https://github.com/ebuildy","followers_url":"https://api.github.com/users/ebuildy/followers","following_url":"https://api.github.com/users/ebuildy/following{/other_user}","gists_url":"https://api.github.com/users/ebuildy/gists{/gist_id}","starred_url":"https://api.github.com/users/ebuildy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebuildy/subscriptions","organizations_url":"https://api.github.com/users/ebuildy/orgs","repos_url":"https://api.github.com/users/ebuildy/repos","events_url":"https://api.github.com/users/ebuildy/events{/privacy}","received_events_url":"https://api.github.com/users/ebuildy/received_events","type":"User","site_admin":false},"created_at":"2020-06-08T08:46:32Z","updated_at":"2020-06-08T08:46:32Z","author_association":"CONTRIBUTOR","body":"I dont know why, maybe this is a problem with our Minio server.\r\n\r\nThe AWS setting:\r\n\r\nhttps://github.com/aws/aws-sdk-java/blob/19d24422b8d800ac34b085d647d069862ed2e90d/aws-java-sdk-core/src/main/java/com/amazonaws/ClientConfiguration.java#L2052\r\n\r\n```\r\n/**\r\n     * Sets the expiration time (in milliseconds) for a connection in the connection pool. When\r\n     * retrieving a connection from the pool to make a request, the total time that the connection\r\n     * has been open is compared against this value. Connections which have been open for longer are\r\n     * discarded, and if needed a new connection is created.\r\n     * <p>\r\n     * Tuning this setting down (together with an appropriately-low setting for Java's DNS cache\r\n     * TTL) ensures that your application will quickly rotate over to new IP addresses when the\r\n     * service begins announcing them through DNS, at the cost of having to re-establish new\r\n     * connections more frequently.\r\n     * <p>\r\n     * By default, it is set to {@code -1}, i.e. connections do not expire.\r\n     *\r\n     * @param connectionTTL\r\n     *            the connection TTL, in milliseconds\r\n     * @return the updated ClientConfiguration object\r\n     */\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/640569657","html_url":"https://github.com/elastic/elasticsearch/issues/57794#issuecomment-640569657","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57794","id":640569657,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MDU2OTY1Nw==","user":{"login":"ebuildy","id":1219817,"node_id":"MDQ6VXNlcjEyMTk4MTc=","avatar_url":"https://avatars0.githubusercontent.com/u/1219817?v=4","gravatar_id":"","url":"https://api.github.com/users/ebuildy","html_url":"https://github.com/ebuildy","followers_url":"https://api.github.com/users/ebuildy/followers","following_url":"https://api.github.com/users/ebuildy/following{/other_user}","gists_url":"https://api.github.com/users/ebuildy/gists{/gist_id}","starred_url":"https://api.github.com/users/ebuildy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebuildy/subscriptions","organizations_url":"https://api.github.com/users/ebuildy/orgs","repos_url":"https://api.github.com/users/ebuildy/repos","events_url":"https://api.github.com/users/ebuildy/events{/privacy}","received_events_url":"https://api.github.com/users/ebuildy/received_events","type":"User","site_admin":false},"created_at":"2020-06-08T12:22:48Z","updated_at":"2020-06-08T12:22:48Z","author_association":"CONTRIBUTOR","body":"Finally I found the issue, our infra. team have misconfigured Minio+Nginx.\r\n\r\nAfter remove Nginx ``proxy_set_header Expect $http_expect;`` , it works as expected.\r\n\r\nBecause ES verify endpoint uses the same HTTP connection to upload then read file (via the AWS SDK), Nginx was blocking at the end of the first POST query.","performed_via_github_app":null}]