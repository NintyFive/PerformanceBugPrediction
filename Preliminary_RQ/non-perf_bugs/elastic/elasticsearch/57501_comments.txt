[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/637381139","html_url":"https://github.com/elastic/elasticsearch/issues/57501#issuecomment-637381139","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57501","id":637381139,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNzM4MTEzOQ==","user":{"login":"Bukhtawar","id":12809319,"node_id":"MDQ6VXNlcjEyODA5MzE5","avatar_url":"https://avatars0.githubusercontent.com/u/12809319?v=4","gravatar_id":"","url":"https://api.github.com/users/Bukhtawar","html_url":"https://github.com/Bukhtawar","followers_url":"https://api.github.com/users/Bukhtawar/followers","following_url":"https://api.github.com/users/Bukhtawar/following{/other_user}","gists_url":"https://api.github.com/users/Bukhtawar/gists{/gist_id}","starred_url":"https://api.github.com/users/Bukhtawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bukhtawar/subscriptions","organizations_url":"https://api.github.com/users/Bukhtawar/orgs","repos_url":"https://api.github.com/users/Bukhtawar/repos","events_url":"https://api.github.com/users/Bukhtawar/events{/privacy}","received_events_url":"https://api.github.com/users/Bukhtawar/received_events","type":"User","site_admin":false},"created_at":"2020-06-02T08:30:43Z","updated_at":"2020-06-02T08:35:43Z","author_association":"CONTRIBUTOR","body":"The `AsyncShardFetch#processAsyncFetch` handling is done on the network thread on version 7.7 as well, which means if one node is flaky the network threads on masters will be blocked longer due to the failure logging overhead and might impact other node pings and new node connections","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/637396158","html_url":"https://github.com/elastic/elasticsearch/issues/57501#issuecomment-637396158","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57501","id":637396158,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNzM5NjE1OA==","user":{"login":"DaveCTurner","id":5058284,"node_id":"MDQ6VXNlcjUwNTgyODQ=","avatar_url":"https://avatars3.githubusercontent.com/u/5058284?v=4","gravatar_id":"","url":"https://api.github.com/users/DaveCTurner","html_url":"https://github.com/DaveCTurner","followers_url":"https://api.github.com/users/DaveCTurner/followers","following_url":"https://api.github.com/users/DaveCTurner/following{/other_user}","gists_url":"https://api.github.com/users/DaveCTurner/gists{/gist_id}","starred_url":"https://api.github.com/users/DaveCTurner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaveCTurner/subscriptions","organizations_url":"https://api.github.com/users/DaveCTurner/orgs","repos_url":"https://api.github.com/users/DaveCTurner/repos","events_url":"https://api.github.com/users/DaveCTurner/events{/privacy}","received_events_url":"https://api.github.com/users/DaveCTurner/received_events","type":"User","site_admin":false},"created_at":"2020-06-02T08:55:15Z","updated_at":"2020-06-02T08:55:15Z","author_association":"CONTRIBUTOR","body":"There's nothing actionable here so I am closing this. Please fill out the bug report template in full when reporting apparent bugs. We need significantly more information than you have provided here before we can even start to analyse a bug report. A stack trace from a single thread is rarely of any use and this one doesn't indicate anything particularly surprising happening.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/637405377","html_url":"https://github.com/elastic/elasticsearch/issues/57501#issuecomment-637405377","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57501","id":637405377,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNzQwNTM3Nw==","user":{"login":"Bukhtawar","id":12809319,"node_id":"MDQ6VXNlcjEyODA5MzE5","avatar_url":"https://avatars0.githubusercontent.com/u/12809319?v=4","gravatar_id":"","url":"https://api.github.com/users/Bukhtawar","html_url":"https://github.com/Bukhtawar","followers_url":"https://api.github.com/users/Bukhtawar/followers","following_url":"https://api.github.com/users/Bukhtawar/following{/other_user}","gists_url":"https://api.github.com/users/Bukhtawar/gists{/gist_id}","starred_url":"https://api.github.com/users/Bukhtawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bukhtawar/subscriptions","organizations_url":"https://api.github.com/users/Bukhtawar/orgs","repos_url":"https://api.github.com/users/Bukhtawar/repos","events_url":"https://api.github.com/users/Bukhtawar/events{/privacy}","received_events_url":"https://api.github.com/users/Bukhtawar/received_events","type":"User","site_admin":false},"created_at":"2020-06-02T09:10:48Z","updated_at":"2020-06-02T10:25:53Z","author_association":"CONTRIBUTOR","body":"> There's nothing actionable here so I am closing this\r\n\r\nI thought the bug is, it's not right to have a logging overhead on Network threads. Can you please correct me if I am wrong @DaveCTurner . The stack trace shows that and I have the **full thread dump** https://gist.github.com/Bukhtawar/1b9e1ad07958d684a8d9ebce3fcb4889\r\n\r\nI'll share the logs if I'm unable to repro\r\n\r\n> We need significantly more information than you have provided here before we can even start to analyse a bug report. \r\n\r\nI am working on that if you can please bear with me.","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/637460463","html_url":"https://github.com/elastic/elasticsearch/issues/57501#issuecomment-637460463","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57501","id":637460463,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNzQ2MDQ2Mw==","user":{"login":"Bukhtawar","id":12809319,"node_id":"MDQ6VXNlcjEyODA5MzE5","avatar_url":"https://avatars0.githubusercontent.com/u/12809319?v=4","gravatar_id":"","url":"https://api.github.com/users/Bukhtawar","html_url":"https://github.com/Bukhtawar","followers_url":"https://api.github.com/users/Bukhtawar/followers","following_url":"https://api.github.com/users/Bukhtawar/following{/other_user}","gists_url":"https://api.github.com/users/Bukhtawar/gists{/gist_id}","starred_url":"https://api.github.com/users/Bukhtawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bukhtawar/subscriptions","organizations_url":"https://api.github.com/users/Bukhtawar/orgs","repos_url":"https://api.github.com/users/Bukhtawar/repos","events_url":"https://api.github.com/users/Bukhtawar/events{/privacy}","received_events_url":"https://api.github.com/users/Bukhtawar/received_events","type":"User","site_admin":false},"created_at":"2020-06-02T10:58:56Z","updated_at":"2020-06-02T11:04:50Z","author_association":"CONTRIBUTOR","body":"On this particular case since `ClassLoader#loadClass` requires a lock acquisition, as a result only one of `transport_worker` thread could acquire it causing the others network thread wanting to log the failure to get `BLOCKED` on the monitor(based on the thread dump). \r\nThe lock `0x00007f2f5e3c4d30 ` is the one other transport_workers are waiting on and only one gets to acquire at one point.\r\n\r\nDo you think this is the expected and the desired behaviour @DaveCTurner ?","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/637478641","html_url":"https://github.com/elastic/elasticsearch/issues/57501#issuecomment-637478641","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/57501","id":637478641,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNzQ3ODY0MQ==","user":{"login":"Bukhtawar","id":12809319,"node_id":"MDQ6VXNlcjEyODA5MzE5","avatar_url":"https://avatars0.githubusercontent.com/u/12809319?v=4","gravatar_id":"","url":"https://api.github.com/users/Bukhtawar","html_url":"https://github.com/Bukhtawar","followers_url":"https://api.github.com/users/Bukhtawar/followers","following_url":"https://api.github.com/users/Bukhtawar/following{/other_user}","gists_url":"https://api.github.com/users/Bukhtawar/gists{/gist_id}","starred_url":"https://api.github.com/users/Bukhtawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bukhtawar/subscriptions","organizations_url":"https://api.github.com/users/Bukhtawar/orgs","repos_url":"https://api.github.com/users/Bukhtawar/repos","events_url":"https://api.github.com/users/Bukhtawar/events{/privacy}","received_events_url":"https://api.github.com/users/Bukhtawar/received_events","type":"User","site_admin":false},"created_at":"2020-06-02T11:31:00Z","updated_at":"2020-06-02T11:31:00Z","author_association":"CONTRIBUTOR","body":"If you see the implementation of the transport_worker its actually doing another IO. See `JarLoader#getResource`\r\n```\r\n\"elasticsearch[LARLAca][transport_worker][T#7]\" #55 daemon prio=5 os_prio=0 tid=0x00007f2de800b800 nid=0x2fee runnable [0x00007f2e048ee000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\tat java.util.zip.ZipFile.getEntry(Native Method)\r\n\tat java.util.zip.ZipFile.getEntry(ZipFile.java:316)\r\n\t- locked <0x00007f2f5c2e1310> (a java.util.jar.JarFile)\r\n\tat java.util.jar.JarFile.getEntry(JarFile.java:240)\r\n\tat java.util.jar.JarFile.getJarEntry(JarFile.java:223)\r\n\tat sun.misc.URLClassPath$JarLoader.getResource(URLClassPath.java:1054)\r\n\tat sun.misc.URLClassPath.getResource(URLClassPath.java:249)\r\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:366)\r\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:363)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:362)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:419)\r\n\t- locked <0x00007f2f5e3c4d30> (a java.lang.Object)\r\n```","performed_via_github_app":null}]