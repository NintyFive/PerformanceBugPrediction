{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/26201","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26201/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26201/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/26201/events","html_url":"https://github.com/elastic/elasticsearch/issues/26201","id":250016461,"node_id":"MDU6SXNzdWUyNTAwMTY0NjE=","number":26201,"title":"Flood stage exceeded is incorrectly logged","user":{"login":"PhaedrusTheGreek","id":4387023,"node_id":"MDQ6VXNlcjQzODcwMjM=","avatar_url":"https://avatars0.githubusercontent.com/u/4387023?v=4","gravatar_id":"","url":"https://api.github.com/users/PhaedrusTheGreek","html_url":"https://github.com/PhaedrusTheGreek","followers_url":"https://api.github.com/users/PhaedrusTheGreek/followers","following_url":"https://api.github.com/users/PhaedrusTheGreek/following{/other_user}","gists_url":"https://api.github.com/users/PhaedrusTheGreek/gists{/gist_id}","starred_url":"https://api.github.com/users/PhaedrusTheGreek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PhaedrusTheGreek/subscriptions","organizations_url":"https://api.github.com/users/PhaedrusTheGreek/orgs","repos_url":"https://api.github.com/users/PhaedrusTheGreek/repos","events_url":"https://api.github.com/users/PhaedrusTheGreek/events{/privacy}","received_events_url":"https://api.github.com/users/PhaedrusTheGreek/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-08-14T12:30:01Z","updated_at":"2017-08-14T15:22:28Z","closed_at":"2017-08-14T15:22:28Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Tested on \r\n - ES 6.0.0-beta1 \r\n - Mac OSX Sierra\r\n\r\nNode is reporting flood stage exceeded:\r\n\r\n```\r\n[2017-08-14T09:29:37,167][WARN ][o.e.c.r.a.DiskThresholdMonitor] [Lq-N3tZ] flood stage disk watermark [95%] exceeded on [Lq-N3tZ8QY6B648xAA8H0g][Lq-N3tZ][/Users/jay/Workspace/elasticsearch-6.0.0-beta1/data/nodes/0] free: 11.1gb[9.9%], all indices on this node will marked read-only\r\n```\r\n\r\nBut the math doesn't add up (flood stage is 95% and there's 9.9% free disk space\r\n\r\nAnd indexing is still allowed, even on indices created before the flood stage log message appears.\r\n\r\n```\r\n{\r\n    \"_index\": \"foo\",\r\n    \"_type\": \"bar\",\r\n    \"_id\": \"7\",\r\n    \"_version\": 1,\r\n    \"result\": \"created\",\r\n    \"_shards\": {\r\n        \"total\": 2,\r\n        \"successful\": 1,\r\n        \"failed\": 0\r\n    },\r\n    \"_seq_no\": 0,\r\n    \"_primary_term\": 1\r\n}\r\n```\r\n","closed_by":{"login":"jasontedor","id":4744941,"node_id":"MDQ6VXNlcjQ3NDQ5NDE=","avatar_url":"https://avatars3.githubusercontent.com/u/4744941?v=4","gravatar_id":"","url":"https://api.github.com/users/jasontedor","html_url":"https://github.com/jasontedor","followers_url":"https://api.github.com/users/jasontedor/followers","following_url":"https://api.github.com/users/jasontedor/following{/other_user}","gists_url":"https://api.github.com/users/jasontedor/gists{/gist_id}","starred_url":"https://api.github.com/users/jasontedor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasontedor/subscriptions","organizations_url":"https://api.github.com/users/jasontedor/orgs","repos_url":"https://api.github.com/users/jasontedor/repos","events_url":"https://api.github.com/users/jasontedor/events{/privacy}","received_events_url":"https://api.github.com/users/jasontedor/received_events","type":"User","site_admin":false},"performed_via_github_app":null}