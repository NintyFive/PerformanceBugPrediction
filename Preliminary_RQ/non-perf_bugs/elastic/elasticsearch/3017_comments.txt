[{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/17746193","html_url":"https://github.com/elastic/elasticsearch/issues/3017#issuecomment-17746193","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3017","id":17746193,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NzQ2MTkz","user":{"login":"dehora","id":5454,"node_id":"MDQ6VXNlcjU0NTQ=","avatar_url":"https://avatars1.githubusercontent.com/u/5454?v=4","gravatar_id":"","url":"https://api.github.com/users/dehora","html_url":"https://github.com/dehora","followers_url":"https://api.github.com/users/dehora/followers","following_url":"https://api.github.com/users/dehora/following{/other_user}","gists_url":"https://api.github.com/users/dehora/gists{/gist_id}","starred_url":"https://api.github.com/users/dehora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dehora/subscriptions","organizations_url":"https://api.github.com/users/dehora/orgs","repos_url":"https://api.github.com/users/dehora/repos","events_url":"https://api.github.com/users/dehora/events{/privacy}","received_events_url":"https://api.github.com/users/dehora/received_events","type":"User","site_admin":false},"created_at":"2013-05-10T21:41:49Z","updated_at":"2013-05-10T21:41:49Z","author_association":"NONE","body":"Updated to clarify the java.io.StreamCorruptedException resulted in the master becoming unresponsive and disconnected from the rest of the cluster.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18497987","html_url":"https://github.com/elastic/elasticsearch/issues/3017#issuecomment-18497987","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3017","id":18497987,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDk3OTg3","user":{"login":"jayv","id":159325,"node_id":"MDQ6VXNlcjE1OTMyNQ==","avatar_url":"https://avatars3.githubusercontent.com/u/159325?v=4","gravatar_id":"","url":"https://api.github.com/users/jayv","html_url":"https://github.com/jayv","followers_url":"https://api.github.com/users/jayv/followers","following_url":"https://api.github.com/users/jayv/following{/other_user}","gists_url":"https://api.github.com/users/jayv/gists{/gist_id}","starred_url":"https://api.github.com/users/jayv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jayv/subscriptions","organizations_url":"https://api.github.com/users/jayv/orgs","repos_url":"https://api.github.com/users/jayv/repos","events_url":"https://api.github.com/users/jayv/events{/privacy}","received_events_url":"https://api.github.com/users/jayv/received_events","type":"User","site_admin":false},"created_at":"2013-05-27T13:14:06Z","updated_at":"2013-05-27T13:14:06Z","author_association":"NONE","body":"We experience the same issue with 0.20.1, did you get an answer or found a solution for this problem? \nI discovered this while performing various tests to assure failover is happening and recovery works.\n\nWe run 3 nodes, zen minimum master = 2, when I shut down the network on 1 machine, the remaining 2 keep working, when the network connection returns, it never joins the cluster and we see the same exception is in our logs.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18544773","html_url":"https://github.com/elastic/elasticsearch/issues/3017#issuecomment-18544773","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3017","id":18544773,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NTQ0Nzcz","user":{"login":"stephanj","id":179457,"node_id":"MDQ6VXNlcjE3OTQ1Nw==","avatar_url":"https://avatars3.githubusercontent.com/u/179457?v=4","gravatar_id":"","url":"https://api.github.com/users/stephanj","html_url":"https://github.com/stephanj","followers_url":"https://api.github.com/users/stephanj/followers","following_url":"https://api.github.com/users/stephanj/following{/other_user}","gists_url":"https://api.github.com/users/stephanj/gists{/gist_id}","starred_url":"https://api.github.com/users/stephanj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stephanj/subscriptions","organizations_url":"https://api.github.com/users/stephanj/orgs","repos_url":"https://api.github.com/users/stephanj/repos","events_url":"https://api.github.com/users/stephanj/events{/privacy}","received_events_url":"https://api.github.com/users/stephanj/received_events","type":"User","site_admin":false},"created_at":"2013-05-28T11:30:20Z","updated_at":"2013-05-28T11:30:20Z","author_association":"NONE","body":"Any plans on fixing this issue?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18545708","html_url":"https://github.com/elastic/elasticsearch/issues/3017#issuecomment-18545708","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3017","id":18545708,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NTQ1NzA4","user":{"login":"dehora","id":5454,"node_id":"MDQ6VXNlcjU0NTQ=","avatar_url":"https://avatars1.githubusercontent.com/u/5454?v=4","gravatar_id":"","url":"https://api.github.com/users/dehora","html_url":"https://github.com/dehora","followers_url":"https://api.github.com/users/dehora/followers","following_url":"https://api.github.com/users/dehora/following{/other_user}","gists_url":"https://api.github.com/users/dehora/gists{/gist_id}","starred_url":"https://api.github.com/users/dehora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dehora/subscriptions","organizations_url":"https://api.github.com/users/dehora/orgs","repos_url":"https://api.github.com/users/dehora/repos","events_url":"https://api.github.com/users/dehora/events{/privacy}","received_events_url":"https://api.github.com/users/dehora/received_events","type":"User","site_admin":false},"created_at":"2013-05-28T11:54:06Z","updated_at":"2013-11-22T21:10:54Z","author_association":"NONE","body":"*did you get an answer or found a solution for this problem? *\n\n@jayv No. But we've seen it 2 times since this report. What causes the elected master to go awry has varied, but the resulting behaviour is consistent -\n- previous master excised from cluster\n- new master elected\n- rest of cluster reporting the same state\n- previous master reporting a different state\n- previous master requires a restart to join the cluster\n\nRequiring N/2+1 master eligible nodes to be involved in election I gather stops a split brain, but I've seen this behaviour enough times such that I'm concluding it's how ES fault tolerance actually works when it comes to master elections. It's possibly not expected or intended, but it seems to be part of the design (I'd love to see a formal model of ES election.)\n\nThe primary concern I have is the consequent level of replica motion, which we've seen in every case after this happens. It doesn't seem workable for large datasets. We had one node post this failure get stuck moving 2 replicas to another node for about 8 days (we let it run to see what would happen, the guidance was to blow away the data on the sending node). What fixed it eventually was another master failure that moved about 15% of the shard/replicas, possibly more.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18546294","html_url":"https://github.com/elastic/elasticsearch/issues/3017#issuecomment-18546294","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3017","id":18546294,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NTQ2Mjk0","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2013-05-28T12:09:43Z","updated_at":"2013-05-28T12:09:43Z","author_association":"MEMBER","body":"Could someone post or send us complete logs (from all nodes, preferably on DEBUG level) from one of the incidents? \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/18928235","html_url":"https://github.com/elastic/elasticsearch/issues/3017#issuecomment-18928235","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3017","id":18928235,"node_id":"MDEyOklzc3VlQ29tbWVudDE4OTI4MjM1","user":{"login":"dehora","id":5454,"node_id":"MDQ6VXNlcjU0NTQ=","avatar_url":"https://avatars1.githubusercontent.com/u/5454?v=4","gravatar_id":"","url":"https://api.github.com/users/dehora","html_url":"https://github.com/dehora","followers_url":"https://api.github.com/users/dehora/followers","following_url":"https://api.github.com/users/dehora/following{/other_user}","gists_url":"https://api.github.com/users/dehora/gists{/gist_id}","starred_url":"https://api.github.com/users/dehora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dehora/subscriptions","organizations_url":"https://api.github.com/users/dehora/orgs","repos_url":"https://api.github.com/users/dehora/repos","events_url":"https://api.github.com/users/dehora/events{/privacy}","received_events_url":"https://api.github.com/users/dehora/received_events","type":"User","site_admin":false},"created_at":"2013-06-04T18:13:47Z","updated_at":"2013-11-22T21:11:20Z","author_association":"NONE","body":"We've seen this happen again (another invalid internal transport message). The knock-on this time included 3 of 6 data nodes having to be restarted as they were unable to join the cluster with the master post-election. As before a large part of the index was dropped and re-allocated - beyond invalid internal transport, master re-election plus re-allocation has happened about 4 times in 6w. \n\n_Could someone post or send us_\n\nLet me know how you want them sent.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19610579","html_url":"https://github.com/elastic/elasticsearch/issues/3017#issuecomment-19610579","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3017","id":19610579,"node_id":"MDEyOklzc3VlQ29tbWVudDE5NjEwNTc5","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2013-06-18T13:23:15Z","updated_at":"2013-06-18T13:23:15Z","author_association":"MEMBER","body":"You can, for example, upload them to dropbox or any other server and post here, email me or send me on IRC channel the link. Whatever works for you.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/19848309","html_url":"https://github.com/elastic/elasticsearch/issues/3017#issuecomment-19848309","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3017","id":19848309,"node_id":"MDEyOklzc3VlQ29tbWVudDE5ODQ4MzA5","user":{"login":"metacret","id":1091109,"node_id":"MDQ6VXNlcjEwOTExMDk=","avatar_url":"https://avatars3.githubusercontent.com/u/1091109?v=4","gravatar_id":"","url":"https://api.github.com/users/metacret","html_url":"https://github.com/metacret","followers_url":"https://api.github.com/users/metacret/followers","following_url":"https://api.github.com/users/metacret/following{/other_user}","gists_url":"https://api.github.com/users/metacret/gists{/gist_id}","starred_url":"https://api.github.com/users/metacret/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/metacret/subscriptions","organizations_url":"https://api.github.com/users/metacret/orgs","repos_url":"https://api.github.com/users/metacret/repos","events_url":"https://api.github.com/users/metacret/events{/privacy}","received_events_url":"https://api.github.com/users/metacret/received_events","type":"User","site_admin":false},"created_at":"2013-06-22T01:15:04Z","updated_at":"2013-06-22T01:15:04Z","author_association":"NONE","body":"I've seen this with 0.90.0 too, exactly same behavior.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/20076228","html_url":"https://github.com/elastic/elasticsearch/issues/3017#issuecomment-20076228","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3017","id":20076228,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMDc2MjI4","user":{"login":"kornypoet","id":260766,"node_id":"MDQ6VXNlcjI2MDc2Ng==","avatar_url":"https://avatars3.githubusercontent.com/u/260766?v=4","gravatar_id":"","url":"https://api.github.com/users/kornypoet","html_url":"https://github.com/kornypoet","followers_url":"https://api.github.com/users/kornypoet/followers","following_url":"https://api.github.com/users/kornypoet/following{/other_user}","gists_url":"https://api.github.com/users/kornypoet/gists{/gist_id}","starred_url":"https://api.github.com/users/kornypoet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kornypoet/subscriptions","organizations_url":"https://api.github.com/users/kornypoet/orgs","repos_url":"https://api.github.com/users/kornypoet/repos","events_url":"https://api.github.com/users/kornypoet/events{/privacy}","received_events_url":"https://api.github.com/users/kornypoet/received_events","type":"User","site_admin":false},"created_at":"2013-06-26T20:08:27Z","updated_at":"2013-06-26T20:08:27Z","author_association":"NONE","body":"We're seeing this too; will send logs over later today. On 0.90.0 as released.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/29035310","html_url":"https://github.com/elastic/elasticsearch/issues/3017#issuecomment-29035310","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3017","id":29035310,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDM1MzEw","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2013-11-21T23:30:58Z","updated_at":"2013-11-21T23:30:58Z","author_association":"MEMBER","body":"I just reproduced this issue locally with master (1.0.0.Beta2-SNAPSHOT). I overloaded one of the nodes by moving about 1000 shards to a really small node and it caused this node to run out of memory, which was expected. But just before node got into out of memory state it threw a couple of \"java.io.StreamCorruptedException: invalid internal transport message format\" exceptions. In other words, it looks like this exception might be a symptom of pre-OOM node. There are might be other reasons for this error though. \n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/29109909","html_url":"https://github.com/elastic/elasticsearch/issues/3017#issuecomment-29109909","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3017","id":29109909,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MTA5OTA5","user":{"login":"dehora","id":5454,"node_id":"MDQ6VXNlcjU0NTQ=","avatar_url":"https://avatars1.githubusercontent.com/u/5454?v=4","gravatar_id":"","url":"https://api.github.com/users/dehora","html_url":"https://github.com/dehora","followers_url":"https://api.github.com/users/dehora/followers","following_url":"https://api.github.com/users/dehora/following{/other_user}","gists_url":"https://api.github.com/users/dehora/gists{/gist_id}","starred_url":"https://api.github.com/users/dehora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dehora/subscriptions","organizations_url":"https://api.github.com/users/dehora/orgs","repos_url":"https://api.github.com/users/dehora/repos","events_url":"https://api.github.com/users/dehora/events{/privacy}","received_events_url":"https://api.github.com/users/dehora/received_events","type":"User","site_admin":false},"created_at":"2013-11-22T21:15:00Z","updated_at":"2013-11-22T21:15:18Z","author_association":"NONE","body":"@imotov Awesome you've seen this happen. I don't have access to the related logs anymore, but from what I recall about the gc logs, the master nodes in scope for the initial bugrep were not under memory pressure at the time. Again, the concern for me is the cascading failure rather than a node hanging.\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52798709","html_url":"https://github.com/elastic/elasticsearch/issues/3017#issuecomment-52798709","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3017","id":52798709,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzk4NzA5","user":{"login":"imotov","id":655851,"node_id":"MDQ6VXNlcjY1NTg1MQ==","avatar_url":"https://avatars3.githubusercontent.com/u/655851?v=4","gravatar_id":"","url":"https://api.github.com/users/imotov","html_url":"https://github.com/imotov","followers_url":"https://api.github.com/users/imotov/followers","following_url":"https://api.github.com/users/imotov/following{/other_user}","gists_url":"https://api.github.com/users/imotov/gists{/gist_id}","starred_url":"https://api.github.com/users/imotov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotov/subscriptions","organizations_url":"https://api.github.com/users/imotov/orgs","repos_url":"https://api.github.com/users/imotov/repos","events_url":"https://api.github.com/users/imotov/events{/privacy}","received_events_url":"https://api.github.com/users/imotov/received_events","type":"User","site_admin":false},"created_at":"2014-08-20T15:53:55Z","updated_at":"2014-08-20T15:53:55Z","author_association":"MEMBER","body":"In the last year, I haven't seen any reports of this error that weren't related to nodes running out of memory. Considering this, should we close it?\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/comments/52809180","html_url":"https://github.com/elastic/elasticsearch/issues/3017#issuecomment-52809180","issue_url":"https://api.github.com/repos/elastic/elasticsearch/issues/3017","id":52809180,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODA5MTgw","user":{"login":"clintongormley","id":56599,"node_id":"MDQ6VXNlcjU2NTk5","avatar_url":"https://avatars0.githubusercontent.com/u/56599?v=4","gravatar_id":"","url":"https://api.github.com/users/clintongormley","html_url":"https://github.com/clintongormley","followers_url":"https://api.github.com/users/clintongormley/followers","following_url":"https://api.github.com/users/clintongormley/following{/other_user}","gists_url":"https://api.github.com/users/clintongormley/gists{/gist_id}","starred_url":"https://api.github.com/users/clintongormley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintongormley/subscriptions","organizations_url":"https://api.github.com/users/clintongormley/orgs","repos_url":"https://api.github.com/users/clintongormley/repos","events_url":"https://api.github.com/users/clintongormley/events{/privacy}","received_events_url":"https://api.github.com/users/clintongormley/received_events","type":"User","site_admin":false},"created_at":"2014-08-20T17:07:48Z","updated_at":"2014-08-20T17:07:48Z","author_association":"CONTRIBUTOR","body":"Seems reasonable to me. Please reopen if you see further related incidents on 1.3 or later.\n","performed_via_github_app":null}]