{"url":"https://api.github.com/repos/elastic/elasticsearch/issues/40","repository_url":"https://api.github.com/repos/elastic/elasticsearch","labels_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40/labels{/name}","comments_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40/comments","events_url":"https://api.github.com/repos/elastic/elasticsearch/issues/40/events","html_url":"https://github.com/elastic/elasticsearch/issues/40","id":138470,"node_id":"MDU6SXNzdWUxMzg0NzA=","number":40,"title":"Exception in clusters with embedded and standalone nodes","user":{"login":"sbtourist","id":103671,"node_id":"MDQ6VXNlcjEwMzY3MQ==","avatar_url":"https://avatars0.githubusercontent.com/u/103671?v=4","gravatar_id":"","url":"https://api.github.com/users/sbtourist","html_url":"https://github.com/sbtourist","followers_url":"https://api.github.com/users/sbtourist/followers","following_url":"https://api.github.com/users/sbtourist/following{/other_user}","gists_url":"https://api.github.com/users/sbtourist/gists{/gist_id}","starred_url":"https://api.github.com/users/sbtourist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sbtourist/subscriptions","organizations_url":"https://api.github.com/users/sbtourist/orgs","repos_url":"https://api.github.com/users/sbtourist/repos","events_url":"https://api.github.com/users/sbtourist/events{/privacy}","received_events_url":"https://api.github.com/users/sbtourist/received_events","type":"User","site_admin":false},"labels":[{"id":23173,"node_id":"MDU6TGFiZWwyMzE3Mw==","url":"https://api.github.com/repos/elastic/elasticsearch/labels/%3Ebug","name":">bug","color":"b60205","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2010-02-23T18:01:12Z","updated_at":"2010-08-18T21:51:42Z","closed_at":"2010-08-18T21:51:42Z","author_association":"NONE","active_lock_reason":null,"body":"When I run a cluster made up of embedded and standalone nodes, former ones seems not to be able to connect to latter ones, and I get the following log messages on embedded nodes:\n\nOOB-1,elasticsearch,caffeine.local-16363 -\njgroups.pbcast.NAKACK - caffeine.local-16363: dropped message from\ncaffeine.local-17690 (not in xmit_table), keys are\n[caffeine.local-16363], view=[caffeine.local-16363|0]\n[caffeine.local-16363]\n\nThe problem seems to be related to JGroups which, on IPv6-enabled machines, prefers IPv6 addresses over IPv4 ones, but embedded instances aren't able to guess a proper IPv6 address.\n\nThat can be fixed by:\nSpecifying java.net.preferIPv4Stack=true on the embedded node, forcing the use of IPv4.\n_or_\nSpecifying java.net.preferIPv4Stack=false and java.net.preferIPv6Stack=false on the standalone node, apparently forcing JGroups to take the proper default.\n","closed_by":null,"performed_via_github_app":null}